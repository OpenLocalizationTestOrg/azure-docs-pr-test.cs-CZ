---
title: "Zřídit fondech Azure Batch z vlastních bitových kopií | Microsoft Docs"
description: "Můžete vytvořit dávce fondu vlastní image zřídit výpočetní uzly, které obsahují software a data, která je nutné pro vaši aplikaci. Vlastní Image jsou účinný způsob, jak nakonfigurovat výpočetních uzlů k spouštět úlohy Batch."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/07/2017
ms.author: tamram
ms.openlocfilehash: 3d655766b4f2a5efb0c8c29ffa81a89f84b3e17c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="use-a-custom-image-to-create-a-pool-of-virtual-machines"></a><span data-ttu-id="a55dc-104">Použít vlastní bitovou kopii k vytvoření fondu virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="a55dc-104">Use a custom image to create a pool of virtual machines</span></span>

<span data-ttu-id="a55dc-105">Při vytváření fondu virtuálních počítačů v Azure Batch, zadejte image virtuálního počítače (VM), které poskytuje operační systém pro každý výpočetní uzel ve fondu.</span><span class="sxs-lookup"><span data-stu-id="a55dc-105">When you create a pool of virtual machines in Azure Batch, you specify a virtual machine (VM) image that provides the operating system for each compute node in the pool.</span></span> <span data-ttu-id="a55dc-106">Fond virtuálních počítačů můžete vytvořit buď pomocí image Azure Marketplace, nebo zadáním vlastní image virtuálního pevného disku, který jste připravili.</span><span class="sxs-lookup"><span data-stu-id="a55dc-106">You can create a pool of virtual machines either by using an Azure Marketplace image, or by providing a custom VHD image that you have prepared.</span></span> <span data-ttu-id="a55dc-107">Když zadáte vlastní image, máte kontrolu nad konfigurace operačního systému v době, který je zajištěný každý výpočetní uzel.</span><span class="sxs-lookup"><span data-stu-id="a55dc-107">When you provide a custom image, you have control over how the operating system is configured at the time that each compute node is provisioned.</span></span> <span data-ttu-id="a55dc-108">Vlastní image může zahrnovat aplikace a referenčních dat, které jsou k dispozici na výpočetním uzlu, jakmile je zřízený.</span><span class="sxs-lookup"><span data-stu-id="a55dc-108">Your custom image can also include applications and reference data that are available on the compute node as soon as it is provisioned.</span></span>

<span data-ttu-id="a55dc-109">Pomocí vlastní image můžete ušetřit čas při získávání váš fond výpočetních uzlů, které jsou připravené ke spuštění úlohy Batch.</span><span class="sxs-lookup"><span data-stu-id="a55dc-109">Using a custom image can save you time in getting your pool's compute nodes ready to run your Batch workload.</span></span> <span data-ttu-id="a55dc-110">Zatímco můžete vždy použít image Azure Marketplace a instalovat software na každém výpočetním uzlu po byla zřízení, může být tento přístup míň efektivní než pomocí vlastní image.</span><span class="sxs-lookup"><span data-stu-id="a55dc-110">While you can always use an Azure Marketplace image and install software on each compute node after it has been provisioned, this approach may be less efficient than using a custom image.</span></span> 

<span data-ttu-id="a55dc-111">Chcete-li použít vlastní obrázek, který je nakonfigurovaný pro váš scénář důvodů museli:</span><span class="sxs-lookup"><span data-stu-id="a55dc-111">Some reasons to use a custom image that is configured for your scenario include needing to:</span></span>

- <span data-ttu-id="a55dc-112">**Konfigurace operačního systému (OS)** žádnou zvláštní konfiguraci operačního systému lze provést na vlastní image.</span><span class="sxs-lookup"><span data-stu-id="a55dc-112">**Configure the operating system (OS)** Any special configuration of the operating system can be performed on the custom image.</span></span> 
- <span data-ttu-id="a55dc-113">**Nainstalujte velké aplikace.**</span><span class="sxs-lookup"><span data-stu-id="a55dc-113">**Install large applications.**</span></span> <span data-ttu-id="a55dc-114">Instalace aplikace na vlastní image je efektivnější než je nainstalujete na každém výpočetním uzlu po je zřízený.</span><span class="sxs-lookup"><span data-stu-id="a55dc-114">Installing applications on a custom image is more efficient than installing them on each compute node after it is provisioned.</span></span>
- <span data-ttu-id="a55dc-115">**Zkopírujte poměrně velké množství dat.**</span><span class="sxs-lookup"><span data-stu-id="a55dc-115">**Copy significant amounts of data.**</span></span> <span data-ttu-id="a55dc-116">Pokud ale data se zkopírují do vlastní image, pouze se musí zkopírovat jednou, nikoli na každém výpočetním uzlu, ukládání čas a šířku pásma.</span><span class="sxs-lookup"><span data-stu-id="a55dc-116">If the data is copied to the custom image, it only needs to be copied once, rather than to each compute node, saving time and bandwidth.</span></span>
- <span data-ttu-id="a55dc-117">**Restartování virtuálního počítače během procesu instalace.**</span><span class="sxs-lookup"><span data-stu-id="a55dc-117">**Reboot the VM during the setup process.**</span></span> <span data-ttu-id="a55dc-118">Restartování virtuálního počítače může být časově náročné, zvláště pokud máte počet výpočetních uzlů.</span><span class="sxs-lookup"><span data-stu-id="a55dc-118">Rebooting the VM can be a time-consuming process, especially if you have a number of compute nodes.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a55dc-119">Požadavky</span><span class="sxs-lookup"><span data-stu-id="a55dc-119">Prerequisites</span></span>

- <span data-ttu-id="a55dc-120">**Účet Batch vytvořit s režimem přidělení fondu předplatné uživatele.**</span><span class="sxs-lookup"><span data-stu-id="a55dc-120">**A Batch account created with the User Subscription pool allocation mode.**</span></span> <span data-ttu-id="a55dc-121">Pokud chcete používat vlastní image pro zřízení virtuálního počítače fondy, vytvořte vašeho účtu Batch s předplatným uživatele [režim přidělení fondu](batch-api-basics.md#pool-allocation-mode).</span><span class="sxs-lookup"><span data-stu-id="a55dc-121">To use a custom image to provision Virtual Machine pools, create your Batch account with the User Subscription [pool allocation mode](batch-api-basics.md#pool-allocation-mode).</span></span> <span data-ttu-id="a55dc-122">S tímto režimem se fondy Batch přidělují do předplatného, ve které je tento účet umístěný.</span><span class="sxs-lookup"><span data-stu-id="a55dc-122">With this mode, Batch pools are allocated into the subscription where the account resides.</span></span> <span data-ttu-id="a55dc-123">Najdete v článku [účet](batch-api-basics.md#account) kapitoly [rozsáhlé paralelní vývoj výpočetní řešení pomocí služby Batch](batch-api-basics.md) informace o nastavení režimu přidělení fondu při vytváření účtu Batch.</span><span class="sxs-lookup"><span data-stu-id="a55dc-123">See the [Account](batch-api-basics.md#account) section in [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md) for information on setting the pool allocation mode when you create a Batch account.</span></span>

- <span data-ttu-id="a55dc-124">**Účet služby Azure Storage.**</span><span class="sxs-lookup"><span data-stu-id="a55dc-124">**An Azure Storage account.**</span></span> <span data-ttu-id="a55dc-125">Vytvoření fondu virtuálních počítačů pomocí vlastní image, musíte standardní, obecný účet úložiště Azure ve stejném předplatném a oblast.</span><span class="sxs-lookup"><span data-stu-id="a55dc-125">To create a pool of virtual machines using a custom image, you need a standard, general-purpose Azure Storage account in the same subscription and region.</span></span> <span data-ttu-id="a55dc-126">Pokud vytvoříte vlastní image z virtuálního počítače Azure, bude kopírovat bitovou kopii k účtu úložiště, kde se nachází disk operačního systému Virtuálního počítače, a nebude je potřeba vytvořit účet samostatného úložiště.</span><span class="sxs-lookup"><span data-stu-id="a55dc-126">If you create a custom image from an Azure VM, then you will copy the image to the storage account where the VM's OS disk resides, and you won't need to create a separate storage account.</span></span> 
    
## <a name="prepare-a-custom-image"></a><span data-ttu-id="a55dc-127">Příprava vlastní image</span><span class="sxs-lookup"><span data-stu-id="a55dc-127">Prepare a custom image</span></span>

<span data-ttu-id="a55dc-128">Příprava vlastní image pro použití se službou Batch, musí generalize existující instalace systému Linux nebo Windows.</span><span class="sxs-lookup"><span data-stu-id="a55dc-128">To prepare a custom image for use with Batch, you must generalize an existing installation of Linux or Windows.</span></span> <span data-ttu-id="a55dc-129">Generalizací instalace operačního systému odebere informace specifické pro počítač.</span><span class="sxs-lookup"><span data-stu-id="a55dc-129">Generalizing an operating system installation removes machine-specific information.</span></span> <span data-ttu-id="a55dc-130">Výsledkem je obrázek, který lze nainstalovat na jiných počítačích nebo virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="a55dc-130">The result is an image that can be installed on other computers or VMs.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="a55dc-131">Batch aktuálně nepodporuje použití Azure spravované bitové kopie k přidělení fondu.</span><span class="sxs-lookup"><span data-stu-id="a55dc-131">Batch does not currently support using Azure managed images to provision a pool.</span></span> <span data-ttu-id="a55dc-132">Vlastní image, které můžete použít k přidělení fondu musí být uložen v úložišti Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="a55dc-132">The custom image you use to provision a pool must be stored in Azure Storage.</span></span> 
>
> <span data-ttu-id="a55dc-133">Při přípravě vlastní image, mějte na paměti následující body:</span><span class="sxs-lookup"><span data-stu-id="a55dc-133">When preparing your custom image, keep in mind the following points:</span></span>
> - <span data-ttu-id="a55dc-134">Zajistěte, aby image základního operačního systému, kterou použijete ke zřizování fondů Batch, neobsahovala žádná předinstalovaná rozšíření Azure, jako je například rozšíření vlastních skriptů.</span><span class="sxs-lookup"><span data-stu-id="a55dc-134">Ensure that the base OS image you use to provision your Batch pools does not have any pre-installed Azure extensions, such as the Custom Script extension.</span></span> <span data-ttu-id="a55dc-135">Pokud image obsahuje nějaké předinstalované rozšíření, v Azure může docházet k problémům při nasazování virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="a55dc-135">If the image contains a pre-installed extension, Azure may encounter problems deploying the VM.</span></span>
> - <span data-ttu-id="a55dc-136">Zajistěte, aby poskytnutá image základního operačního systému používala výchozí dočasnou jednotku, protože ji očekává agent uzlu Batch.</span><span class="sxs-lookup"><span data-stu-id="a55dc-136">Ensure that the base OS image you provide uses the default temp drive, as the Batch node agent currently expects the default temp drive.</span></span>
>
>

<span data-ttu-id="a55dc-137">Všechny existující připravené systému Windows nebo Linux bitové kopie můžete použít jako vlastní image.</span><span class="sxs-lookup"><span data-stu-id="a55dc-137">You can use any existing prepared Windows or Linux image as a custom image.</span></span> <span data-ttu-id="a55dc-138">Například pokud chcete použít místní bitovou kopii, pak nahrajte bitovou kopii do účtu Azure Storage, který je ve stejném předplatném, oblasti jako váš účet Batch pomocí [AzCopy](../storage/storage-use-azcopy.md) nebo jiný nástroj pro odesílání.</span><span class="sxs-lookup"><span data-stu-id="a55dc-138">For example, if you wish to use a local image, then upload the image to an Azure Storage account that is in the same subscription and region as your Batch account using [AzCopy](../storage/storage-use-azcopy.md) or another upload tool.</span></span>

<span data-ttu-id="a55dc-139">Můžete také připravit vlastní image z nového nebo existujícího virtuálního počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="a55dc-139">You can also prepare a custom image from a new or existing Azure VM.</span></span> <span data-ttu-id="a55dc-140">Pokud vytváříte nový virtuální počítač, můžete image Azure Marketplace použít jako základní bitovou kopii pro vlastní image a pak ji přizpůsobit.</span><span class="sxs-lookup"><span data-stu-id="a55dc-140">If you are creating a new VM, you can use an Azure Marketplace image as the base image for your custom image and then customize it.</span></span> <span data-ttu-id="a55dc-141">Chcete-li přizpůsobit základní bitovou kopii, vytvořte virtuální počítač Azure a do ní přidejte aplikace nebo data.</span><span class="sxs-lookup"><span data-stu-id="a55dc-141">To customize the base image, create an Azure VM and add your applications or data to it.</span></span> <span data-ttu-id="a55dc-142">Potom generalize virtuálního počítače sloužit jako vlastní image a uložte ho do úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="a55dc-142">Then generalize the VM to serve as your custom image and save it to Azure Storage.</span></span> 

<span data-ttu-id="a55dc-143">Pokud chcete připravit vlastní image z virtuálního počítače Azure, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="a55dc-143">To prepare a custom image from an Azure VM, follow these steps:</span></span>

1. <span data-ttu-id="a55dc-144">Vytvoření **nespravované** virtuálního počítače Azure z image Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a55dc-144">Create an **unmanaged** Azure VM from an Azure Marketplace image.</span></span> <span data-ttu-id="a55dc-145">Azure Marketplace obsahuje bitové kopie pro obě [Windows](../virtual-machines/windows/quick-create-portal.md) a [Linux](../virtual-machines/linux/quick-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a55dc-145">Azure Marketplace includes images for both [Windows](../virtual-machines/windows/quick-create-portal.md) and [Linux](../virtual-machines/linux/quick-create-portal.md).</span></span>
    
    <span data-ttu-id="a55dc-146">V kroku 3 tohoto procesu vytváření virtuálních počítačů, ujistěte se, že jste vybrali **ne** pro **úložiště: použijte spravované disky** možnost.</span><span class="sxs-lookup"><span data-stu-id="a55dc-146">On step 3 of the VM creation process, make sure that you select **No** for **Storage: Use Managed Disks** option.</span></span> <span data-ttu-id="a55dc-147">Také si poznamenejte název účtu úložiště pro disk s operačním systémem Virtuálního počítače, protože tento účet úložiště se taky, kde Azure uloží vlastní bitovou kopii:</span><span class="sxs-lookup"><span data-stu-id="a55dc-147">Also take note of the storage account name for the VM's OS disk, as this storage account is also where Azure will save your custom image:</span></span>

    ![Vytvoření nespravované virtuálního počítače a poznamenejte si název účtu úložiště](media/batch-custom-images/vm-create-storage.png)
 
2. <span data-ttu-id="a55dc-149">Dokončete proces vytváření virtuálního počítače a počkejte na její přidělování Azure.</span><span class="sxs-lookup"><span data-stu-id="a55dc-149">Complete the process of creating your VM, and wait for it to be allocated by Azure.</span></span> <span data-ttu-id="a55dc-150">Tady je obrázek, který ukazuje na portálu Azure v běžícím stavu virtuálního počítače:</span><span class="sxs-lookup"><span data-stu-id="a55dc-150">Here's an image that shows a VM in the Azure portal in the running state:</span></span>

    ![Vytvoření virtuálního počítače z image pořízenou prostřednictvím marketplace](media/batch-custom-images/vm-status-running.png)

3. <span data-ttu-id="a55dc-152">Jakmile je virtuální počítač spuštěný, lze k němu připojte pomocí protokolu RDP (pro Windows) nebo SSH (pro Linux).</span><span class="sxs-lookup"><span data-stu-id="a55dc-152">Once the VM is running, connect to it via RDP (for Windows) or SSH (for Linux).</span></span> <span data-ttu-id="a55dc-153">Nainstalujte potřebný software nebo zkopírujte požadované data a pak generalize virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="a55dc-153">Install any necessary software or copy desired data, and then generalize the VM.</span></span> <span data-ttu-id="a55dc-154">Postupujte podle kroků popsaných v [Generalize virtuální počítač](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span><span class="sxs-lookup"><span data-stu-id="a55dc-154">Follow the steps described in [Generalize the VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span></span> 
   
4. <span data-ttu-id="a55dc-155">Postup [přihlášení k prostředí Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span><span class="sxs-lookup"><span data-stu-id="a55dc-155">Follow the steps to [Log in to Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span></span> <span data-ttu-id="a55dc-156">Chcete-li nainstalovat Azure PowerShell, přečtěte si téma [Přehled prostředí Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span><span class="sxs-lookup"><span data-stu-id="a55dc-156">To install Azure PowerShell, see [Overview of Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span></span> 

5. <span data-ttu-id="a55dc-157">Potom postupujte podle kroků pro [zrušit přidělení virtuálního počítače a nastavit stav na zobecněný](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span><span class="sxs-lookup"><span data-stu-id="a55dc-157">Next, follow the steps to [Deallocate the VM and set the state to generalized](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span></span> 

    <span data-ttu-id="a55dc-158">Na portálu Azure Všimněte si, že je virtuální počítač navrácený:</span><span class="sxs-lookup"><span data-stu-id="a55dc-158">In the Azure portal, notice that the VM is deallocated:</span></span>

    ![Ujistěte se, že je virtuální počítač navrácený](media/batch-custom-images/vm-status-deallocated.png)

6.  <span data-ttu-id="a55dc-160">Vytvořte a uložte bitovou kopii virtuálního počítače k úložišti Azure pomocí [uložit AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) rutiny prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a55dc-160">Create and save the VM image to Azure Storage using the [Save-AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) PowerShell cmdlet.</span></span> <span data-ttu-id="a55dc-161">Postupujte podle pokynů v tématu [vytvoření bitové kopie](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span><span class="sxs-lookup"><span data-stu-id="a55dc-161">Follow the instructions described in [Create the image](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span></span>
    
    <span data-ttu-id="a55dc-162">Image virtuálního počítače je uložena do účtu úložiště Azure vytvořili při vytvoření virtuálního počítače, jak je znázorněno v kroku 1 tohoto postupu.</span><span class="sxs-lookup"><span data-stu-id="a55dc-162">The VM image is saved to the Azure Storage account created when the VM was created, as shown in step 1 of this procedure.</span></span> <span data-ttu-id="a55dc-163">Uložit AzureRmVMImage rutina uloží obrázek, který má **systému** kontejneru v daném účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="a55dc-163">the Save-AzureRmVMImage cmdlet saves the image to the **system** container in that storage account.</span></span> <span data-ttu-id="a55dc-164">`-DestinationContainername` Parametr názvy virtuální adresáře v rámci **systému** kontejneru.</span><span class="sxs-lookup"><span data-stu-id="a55dc-164">The `-DestinationContainername` parameter names a virtual directory within the **system** container.</span></span> <span data-ttu-id="a55dc-165">`-VHDNamePrefix` Parametr určuje předponu pro název objektu blob.</span><span class="sxs-lookup"><span data-stu-id="a55dc-165">The `-VHDNamePrefix` parameter specifies a prefix for the blob name.</span></span> <span data-ttu-id="a55dc-166">Před touto předponou názvu objektu blob s pomlčkou.</span><span class="sxs-lookup"><span data-stu-id="a55dc-166">This prefix is prepended to the blob name with a hyphen.</span></span> 

    <span data-ttu-id="a55dc-167">Předpokládejme například, že zavoláte AzureRmVMImage uložit s následujícími parametry:</span><span class="sxs-lookup"><span data-stu-id="a55dc-167">For example, suppose you call Save-AzureRmVMImage with the following parameters:</span></span>  

        Save-AzureRmVMImage -ResourceGroupName sample-resource-group -Name vm-custom-image -DestinationContainerName batchimages -VHDNamePrefix custom -Path C:\Temp\Images\vm-custom-image.json

    <span data-ttu-id="a55dc-168">Výsledný obraz je uložena do umístění a název objektu blob znázorněno zde:</span><span class="sxs-lookup"><span data-stu-id="a55dc-168">The resulting image is saved to the location and blob name shown here:</span></span>

    ![Umístění uloženého virtuálního pevného disku v kontejneru systému](media/batch-custom-images/vhd-in-vm-storage-account.png)

    > [!NOTE]
    > <span data-ttu-id="a55dc-170">Azure nespravované virtuálního počítače vytvoří několik účtů úložiště pro jiné účely.</span><span class="sxs-lookup"><span data-stu-id="a55dc-170">An Azure unmanaged VM creates several storage accounts for different purposes.</span></span> <span data-ttu-id="a55dc-171">Pokud při vytvoření virtuálního počítače není poznamenejte si název kontejneru úložiště pro disk operačního systému, pak Najít účet přidruženého úložiště, který obsahuje **systému** kontejneru.</span><span class="sxs-lookup"><span data-stu-id="a55dc-171">If you did not note the name of the storage container for the OS disk when the VM was created, then find the associated storage account that contains the **system** container.</span></span> <span data-ttu-id="a55dc-172">Procházet **systému** kontejneru najít vlastní image, pomocí hodnoty zadané pro **uložit AzureRmVMImage** příkaz.</span><span class="sxs-lookup"><span data-stu-id="a55dc-172">Navigate through the **system** container to find the custom image using the values you specified for the **Save-AzureRmVMImage** command.</span></span>

## <a name="create-a-pool-from-a-custom-image-in-the-portal"></a><span data-ttu-id="a55dc-173">Vytvořit fond z vlastní image na portálu</span><span class="sxs-lookup"><span data-stu-id="a55dc-173">Create a pool from a custom image in the portal</span></span>

<span data-ttu-id="a55dc-174">Jakmile jste uložili vlastní bitovou kopii a znáte jeho umístění, můžete vytvořit fondu služby Batch z této bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="a55dc-174">Once you have saved your custom image and you know its location, you can create a Batch pool from that image.</span></span> <span data-ttu-id="a55dc-175">Postupujte podle těchto kroků můžete vytvořit fond z portálu Azure:</span><span class="sxs-lookup"><span data-stu-id="a55dc-175">Follow these steps to create a pool from the Azure portal:</span></span>

1. <span data-ttu-id="a55dc-176">Na webu Azure Portal přejděte ke svému účtu Batch.</span><span class="sxs-lookup"><span data-stu-id="a55dc-176">Navigate to your Batch account in the Azure portal.</span></span> <span data-ttu-id="a55dc-177">Tento účet musí být ve stejném předplatném, oblasti jako účet úložiště, který obsahuje vlastní image.</span><span class="sxs-lookup"><span data-stu-id="a55dc-177">This account must be in the same subscription and region as the storage account containing the custom image.</span></span> 
2. <span data-ttu-id="a55dc-178">V **nastavení** okno na levé straně vyberte **fondy** položku nabídky.</span><span class="sxs-lookup"><span data-stu-id="a55dc-178">In the **Settings** window on the left, select the **Pools** menu item.</span></span>
3. <span data-ttu-id="a55dc-179">V **fondy** vyberte **přidat** příkaz.</span><span class="sxs-lookup"><span data-stu-id="a55dc-179">In the **Pools** window, select the **Add** command.</span></span>
4. <span data-ttu-id="a55dc-180">Na **přidat fond** vyberte **vlastní obrázek (Linux nebo Windows)** z **typ obrázku** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="a55dc-180">On the **Add Pool** window, select **Custom Image (Linux/Windows)** from the **Image Type** dropdown.</span></span> <span data-ttu-id="a55dc-181">Na portálu se zobrazí výběr **Vlastní image**.</span><span class="sxs-lookup"><span data-stu-id="a55dc-181">The portal displays the **Custom Image** picker.</span></span> <span data-ttu-id="a55dc-182">Přejděte na účet úložiště, kde se nachází vlastní image a vyberte požadované virtuální pevný disk z kontejneru.</span><span class="sxs-lookup"><span data-stu-id="a55dc-182">Navigate to the storage account where your custom image is located, and select the desired VHD from the container.</span></span> 
5. <span data-ttu-id="a55dc-183">Vyberte správný **vydavatele nebo nabídka nebo Sku** pro vlastního virtuálního pevného disku.</span><span class="sxs-lookup"><span data-stu-id="a55dc-183">Select the correct **Publisher/Offer/Sku** for your custom VHD.</span></span>
6. <span data-ttu-id="a55dc-184">Zadejte zbývající požadované nastavení, včetně **velikost uzlu**, **cílové uzly vyhrazené**, a **nízkou prioritu uzly**, stejně jako všechny potřeby volitelná nastavení.</span><span class="sxs-lookup"><span data-stu-id="a55dc-184">Specify the remaining required settings, including the **Node size**, **Target dedicated nodes**, and **Low priority nodes**, as well as any desired optional settings.</span></span>

    <span data-ttu-id="a55dc-185">Například pro Microsoft Windows Server Datacenter 2016 vlastní image **přidat fond** okno se zobrazí, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="a55dc-185">For example, for a Microsoft Windows Server Datacenter 2016 custom image, the **Add Pool** window appears as shown here:</span></span>

    ![Přidejte fond z vlastní bitovou kopii systému Windows](media/batch-custom-images/add-pool-custom-image.png)
  
<span data-ttu-id="a55dc-187">Pokud chcete zkontrolovat, zda existující fond je založena na vlastní image, najdete v části **operačního systému** vlastnost v souhrnu oddílu prostředků **fondu** okno.</span><span class="sxs-lookup"><span data-stu-id="a55dc-187">To check whether an existing pool is based on a custom image, see the **Operating System** property in the resource summary section of the **Pool** window.</span></span> <span data-ttu-id="a55dc-188">Pokud fond byl vytvořen z vlastní image, je nastavený na **vlastní Image virtuálního počítače**.</span><span class="sxs-lookup"><span data-stu-id="a55dc-188">If the pool was created from a custom image, it is set to **Custom VM Image**.</span></span>

<span data-ttu-id="a55dc-189">Zobrazí se všechny vlastní VHD přidružený fond na fondu **vlastnosti** okno.</span><span class="sxs-lookup"><span data-stu-id="a55dc-189">All custom VHDs associated with a pool are displayed on the pool's **Properties** window.</span></span>
 
## <a name="next-steps"></a><span data-ttu-id="a55dc-190">Další kroky</span><span class="sxs-lookup"><span data-stu-id="a55dc-190">Next steps</span></span>

- <span data-ttu-id="a55dc-191">Podrobnější přehled služby Batch, najdete v tématu [rozsáhlé paralelní vývoj výpočetní řešení pomocí služby Batch](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="a55dc-191">For an in-depth overview of Batch, see [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md).</span></span>
- <span data-ttu-id="a55dc-192">Informace o vytvoření účtu Batch najdete v tématu [vytvořit účet Batch pomocí portálu Azure](batch-account-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a55dc-192">For information about creating a Batch account, see [Create a Batch account with the Azure portal](batch-account-create-portal.md).</span></span>