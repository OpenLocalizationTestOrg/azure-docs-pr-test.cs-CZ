---
title: "aaaUse náročné virtuální počítače Azure pomocí služby Batch | Microsoft Docs"
description: "Jak velikosti tootake výhod podporující RDMA nebo grafický procesor s podporou virtuálních počítačů ve fondech Azure Batch"
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: 6a462a5f2a44ddcec8bf4e5c200d444cac8fafe6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="2842e-103">Používání podporující RDMA nebo grafický procesor s podporou instancí ve fondech Batch</span><span class="sxs-lookup"><span data-stu-id="2842e-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="2842e-104">toorun určité úlohy Batch můžete chtít tootake výhod určená pro rozsáhlé výpočtu velikosti virtuálního počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="2842e-104">toorun certain Batch jobs, you might want tootake advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="2842e-105">Například s více instancemi toorun [úlohy MPI](batch-mpi.md), můžete zvolit A8, A9, nebo velikosti H-series, které mají síť rozhraní pro vzdálený přímý paměti přístup (RDMA).</span><span class="sxs-lookup"><span data-stu-id="2842e-105">For example, toorun multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="2842e-106">Tyto velikosti připojit síť InfiniBand tooan pro komunikaci mezi uzly, které můžou urychlit aplikací MPI.</span><span class="sxs-lookup"><span data-stu-id="2842e-106">These sizes connect tooan InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="2842e-107">Nebo CUDA aplikace, můžete zvolit N-series velikostí, které zahrnují grafických NVIDIA tesla – Měrná jednotka (GPU) karty.</span><span class="sxs-lookup"><span data-stu-id="2842e-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="2842e-108">Tento článek obsahuje pokyny a příklady toouse některé specializované velikostí Azure ve fondech Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-108">This article provides guidance and examples toouse some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="2842e-109">Specifikace a pozadí najdete v tématu:</span><span class="sxs-lookup"><span data-stu-id="2842e-109">For specs and background, see:</span></span>

* <span data-ttu-id="2842e-110">Vysoký výkon výpočetní velikosti virtuálních počítačů ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="2842e-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="2842e-111">Grafický procesor s podporou velikosti virtuálních počítačů ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="2842e-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="2842e-112">Předplatné a limity účtu</span><span class="sxs-lookup"><span data-stu-id="2842e-112">Subscription and account limits</span></span>

* <span data-ttu-id="2842e-113">**Kvóty** – jeden nebo více kvótách Azure může omezit počet hello nebo typ uzlů můžete přidat tooa fondu služby Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-113">**Quotas** - One or more Azure quotas may limit hello number or type of nodes you can add tooa Batch pool.</span></span> <span data-ttu-id="2842e-114">Jste pravděpodobnější toobe omezené když zvolíte podporu rdma, GPU povoleno, nebo jiné vícejádrovými velikosti virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="2842e-114">You are more likely toobe limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="2842e-115">V závislosti na typu hello účtu Batch, kterou jste vytvořili může použít kvóty hello toohello účet sám sebe nebo tooyour předplatné.</span><span class="sxs-lookup"><span data-stu-id="2842e-115">Depending on hello type of Batch account you created, hello quotas could apply toohello account itself or tooyour subscription.</span></span>

    * <span data-ttu-id="2842e-116">Pokud jste vytvořili vašeho účtu Batch v hello **služba Batch** konfigurace, je omezeno hello [kvóty vyhrazené jader na účtu Batch](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="2842e-116">If you created your Batch account in hello **Batch service** configuration, you are limited by hello [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="2842e-117">Ve výchozím nastavení je tato kvóta 20 jader.</span><span class="sxs-lookup"><span data-stu-id="2842e-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="2842e-118">Samostatné kvótu platí příliš[virtuální počítače s nízkou prioritou](batch-low-pri-vms.md), pokud je používáte.</span><span class="sxs-lookup"><span data-stu-id="2842e-118">A separate quota applies too[low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="2842e-119">Pokud jste vytvořili účet hello v hello **uživatele předplatné** konfigurace, vaše předplatné omezuje hello počet jader virtuálního počítače na oblast.</span><span class="sxs-lookup"><span data-stu-id="2842e-119">If you created hello account in hello **User subscription** configuration, your subscription limits hello number of VM cores per region.</span></span> <span data-ttu-id="2842e-120">V tématu [předplatného Azure a omezení služby, kvóty a omezení](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="2842e-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="2842e-121">Vaše předplatné se týká také místní kvóty toocertain velikosti virtuálních počítačů, včetně HPC a GPU instancí.</span><span class="sxs-lookup"><span data-stu-id="2842e-121">Your subscription also applies a regional quota toocertain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="2842e-122">V konfiguraci předplatné hello uživatele použít žádné další kvóty účtu Batch toohello.</span><span class="sxs-lookup"><span data-stu-id="2842e-122">In hello user subscription configuration, no additional quotas apply toohello Batch account.</span></span> 

  <span data-ttu-id="2842e-123">Může být nutné tooincrease jeden nebo více kvóty při použití specializované velikost virtuálního počítače v dávce.</span><span class="sxs-lookup"><span data-stu-id="2842e-123">You might need tooincrease one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="2842e-124">toorequest zvýšení kvóty, otevřete [žádost o podporu online zákazníka](../azure-supportability/how-to-create-azure-support-request.md) zdarma.</span><span class="sxs-lookup"><span data-stu-id="2842e-124">toorequest a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="2842e-125">**Dostupnost v oblastech** – náročné virtuální počítače nemusí být k dispozici v hello oblastech, kde můžete vytvořit účty Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-125">**Region availability** - Compute-intensive VMs might not be available in hello regions where you create your Batch accounts.</span></span> <span data-ttu-id="2842e-126">toocheck, že velikost je k dispozici, najdete v části [produkty podle oblasti](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="2842e-126">toocheck that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="2842e-127">Závislosti</span><span class="sxs-lookup"><span data-stu-id="2842e-127">Dependencies</span></span>

<span data-ttu-id="2842e-128">Hello RDMA a možnosti GPU velikostí náročné jsou podporovány pouze v určitých operačních systémech.</span><span class="sxs-lookup"><span data-stu-id="2842e-128">hello RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="2842e-129">V závislosti na operačním systému může být nutné tooinstall nebo nakonfigurovat další ovladače nebo jiný software.</span><span class="sxs-lookup"><span data-stu-id="2842e-129">Depending on your operating system, you might need tooinstall or configure additional driver or other software.</span></span> <span data-ttu-id="2842e-130">Následující tabulky Hello shrnují tyto závislosti.</span><span class="sxs-lookup"><span data-stu-id="2842e-130">hello following tables summarize these dependencies.</span></span> <span data-ttu-id="2842e-131">Najdete v článcích propojené podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="2842e-131">See linked articles for details.</span></span> <span data-ttu-id="2842e-132">Možnosti fondů služby Batch tooconfigure najdete dále v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="2842e-132">For options tooconfigure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="2842e-133">Linux fondy - konfigurace virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="2842e-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="2842e-134">Velikost</span><span class="sxs-lookup"><span data-stu-id="2842e-134">Size</span></span> | <span data-ttu-id="2842e-135">Schopnost</span><span class="sxs-lookup"><span data-stu-id="2842e-135">Capability</span></span> | <span data-ttu-id="2842e-136">Operační systémy</span><span class="sxs-lookup"><span data-stu-id="2842e-136">Operating systems</span></span> | <span data-ttu-id="2842e-137">Požadovaný software</span><span class="sxs-lookup"><span data-stu-id="2842e-137">Required software</span></span> | <span data-ttu-id="2842e-138">Nastavení fondu.</span><span class="sxs-lookup"><span data-stu-id="2842e-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="2842e-139">H16r, H16mr A8, A9</span><span class="sxs-lookup"><span data-stu-id="2842e-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="2842e-140">RDMA</span><span class="sxs-lookup"><span data-stu-id="2842e-140">RDMA</span></span> | <span data-ttu-id="2842e-141">SUSE Linux Enterprise Server 12 HPC nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="2842e-142">Na základě centOS HPC</span><span class="sxs-lookup"><span data-stu-id="2842e-142">CentOS-based HPC</span></span><br/><span data-ttu-id="2842e-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="2842e-143">(Azure Marketplace)</span></span> | <span data-ttu-id="2842e-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="2842e-144">Intel MPI 5</span></span> | <span data-ttu-id="2842e-145">Povolit komunikaci mezi uzly, zakažte provedení souběžné úlohy</span><span class="sxs-lookup"><span data-stu-id="2842e-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="2842e-146">NC řady *</span><span class="sxs-lookup"><span data-stu-id="2842e-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="2842e-147">Tesla – měrná K80 NVIDIA GPU</span><span class="sxs-lookup"><span data-stu-id="2842e-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="2842e-148">Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="2842e-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="2842e-149">Red Hat Enterprise Linux 7.3, nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="2842e-150">Distribuce založené na CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="2842e-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="2842e-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="2842e-151">(Azure Marketplace)</span></span> | <span data-ttu-id="2842e-152">Ovladače NVIDIA CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="2842e-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="2842e-153">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="2842e-153">N/A</span></span> | 
| [<span data-ttu-id="2842e-154">Řady VS</span><span class="sxs-lookup"><span data-stu-id="2842e-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="2842e-155">Tesla – měrná M60 NVIDIA GPU</span><span class="sxs-lookup"><span data-stu-id="2842e-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="2842e-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="2842e-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="2842e-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="2842e-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="2842e-158">Distribuce založené na CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="2842e-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="2842e-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="2842e-159">(Azure Marketplace)</span></span> | <span data-ttu-id="2842e-160">4.3 mřížky NVIDIA ovladače</span><span class="sxs-lookup"><span data-stu-id="2842e-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="2842e-161">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="2842e-161">N/A</span></span> |

<span data-ttu-id="2842e-162">* Připojení RDMA na virtuálních počítačích NC24r je podporované na základě CentOS 7.3 HPC s Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="2842e-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="2842e-163">Fondy Windows - konfigurace virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="2842e-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="2842e-164">Velikost</span><span class="sxs-lookup"><span data-stu-id="2842e-164">Size</span></span> | <span data-ttu-id="2842e-165">Schopnost</span><span class="sxs-lookup"><span data-stu-id="2842e-165">Capability</span></span> | <span data-ttu-id="2842e-166">Operační systémy</span><span class="sxs-lookup"><span data-stu-id="2842e-166">Operating systems</span></span> | <span data-ttu-id="2842e-167">Požadovaný software</span><span class="sxs-lookup"><span data-stu-id="2842e-167">Required software</span></span> | <span data-ttu-id="2842e-168">Nastavení fondu.</span><span class="sxs-lookup"><span data-stu-id="2842e-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="2842e-169">H16r, H16mr A8, A9</span><span class="sxs-lookup"><span data-stu-id="2842e-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="2842e-170">RDMA</span><span class="sxs-lookup"><span data-stu-id="2842e-170">RDMA</span></span> | <span data-ttu-id="2842e-171">Windows Server 2012 R2 nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="2842e-172">Windows Server 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="2842e-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="2842e-173">Microsoft MPI 2012 R2 nebo novější, nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="2842e-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="2842e-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="2842e-175">Rozšíření virtuálního počítače Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="2842e-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="2842e-176">Povolit komunikaci mezi uzly, zakažte provedení souběžné úlohy</span><span class="sxs-lookup"><span data-stu-id="2842e-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="2842e-177">NC řady *</span><span class="sxs-lookup"><span data-stu-id="2842e-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="2842e-178">Tesla – měrná K80 NVIDIA GPU</span><span class="sxs-lookup"><span data-stu-id="2842e-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="2842e-179">Windows Server 2016 nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="2842e-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="2842e-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="2842e-181">Tesla – měrná NVIDIA ovladače nebo ovladače CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="2842e-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="2842e-182">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="2842e-182">N/A</span></span> | 
| [<span data-ttu-id="2842e-183">Řady VS</span><span class="sxs-lookup"><span data-stu-id="2842e-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="2842e-184">Tesla – měrná M60 NVIDIA GPU</span><span class="sxs-lookup"><span data-stu-id="2842e-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="2842e-185">Windows Server 2016 nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="2842e-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="2842e-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="2842e-187">4.3 mřížky NVIDIA ovladače</span><span class="sxs-lookup"><span data-stu-id="2842e-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="2842e-188">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="2842e-188">N/A</span></span> |

<span data-ttu-id="2842e-189">* Připojení RDMA na virtuálních počítačích NC24r je podporována v systému Windows Server 2012 R2 s příponou HpcVMDrivers a Microsoft MPI nebo Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="2842e-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="2842e-190">Fondy Windows - konfigurace cloudových služeb</span><span class="sxs-lookup"><span data-stu-id="2842e-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="2842e-191">N-series velikosti nejsou podporovány ve fondech Batch s konfigurace hello cloudových služeb.</span><span class="sxs-lookup"><span data-stu-id="2842e-191">N-series sizes are not supported in Batch pools with hello cloud services configuration.</span></span>
>

| <span data-ttu-id="2842e-192">Velikost</span><span class="sxs-lookup"><span data-stu-id="2842e-192">Size</span></span> | <span data-ttu-id="2842e-193">Schopnost</span><span class="sxs-lookup"><span data-stu-id="2842e-193">Capability</span></span> | <span data-ttu-id="2842e-194">Operační systémy</span><span class="sxs-lookup"><span data-stu-id="2842e-194">Operating systems</span></span> | <span data-ttu-id="2842e-195">Požadovaný software</span><span class="sxs-lookup"><span data-stu-id="2842e-195">Required software</span></span> | <span data-ttu-id="2842e-196">Nastavení fondu.</span><span class="sxs-lookup"><span data-stu-id="2842e-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="2842e-197">H16r, H16mr A8, A9</span><span class="sxs-lookup"><span data-stu-id="2842e-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="2842e-198">RDMA</span><span class="sxs-lookup"><span data-stu-id="2842e-198">RDMA</span></span> | <span data-ttu-id="2842e-199">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="2842e-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="2842e-200">Windows Server 2012, nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="2842e-201">Windows Server 2008 R2 (hostovaného operačního systému rodiny)</span><span class="sxs-lookup"><span data-stu-id="2842e-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="2842e-202">Microsoft MPI 2012 R2 nebo novější, nebo</span><span class="sxs-lookup"><span data-stu-id="2842e-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="2842e-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="2842e-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="2842e-204">Rozšíření virtuálního počítače Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="2842e-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="2842e-205">Povolit komunikaci mezi uzly</span><span class="sxs-lookup"><span data-stu-id="2842e-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="2842e-206">zakázat provedení souběžné úlohy</span><span class="sxs-lookup"><span data-stu-id="2842e-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="2842e-207">Možnosti konfigurace fondu</span><span class="sxs-lookup"><span data-stu-id="2842e-207">Pool configuration options</span></span>

<span data-ttu-id="2842e-208">tooconfigure specializované velikost virtuálního počítače pro fondu Batch, hello rozhraní API služby Batch a nástroje poskytují různé možnosti tooinstall požadované softwaru nebo ovladačů, včetně:</span><span class="sxs-lookup"><span data-stu-id="2842e-208">tooconfigure a specialized VM size for your Batch pool, hello Batch APIs and tools provide several options tooinstall required software or drivers, including:</span></span>

* <span data-ttu-id="2842e-209">[Spouštěcí úkol](batch-api-basics.md#start-task) -nahrát instalační balíček jako tooan souborů prostředků účtu úložiště Azure v hello stejné oblasti jako hello účtu Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file tooan Azure storage account in hello same region as hello Batch account.</span></span> <span data-ttu-id="2842e-210">Vytvořte počáteční úlohu příkazového řádku tooinstall hello zdrojový soubor bezobslužně při spuštění hello fondu.</span><span class="sxs-lookup"><span data-stu-id="2842e-210">Create a start task command line tooinstall hello resource file silently when hello pool starts.</span></span> <span data-ttu-id="2842e-211">Další informace najdete v tématu hello [dokumentace k REST API](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="2842e-211">For more information, see hello [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="2842e-212">spouštěcí úkol Hello musíte spustit s oprávněními zvýšenými (správce) a musí počkat na úspěšné.</span><span class="sxs-lookup"><span data-stu-id="2842e-212">hello start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="2842e-213">[Balíček aplikace](batch-application-packages.md) – přidat komprimované instalační balíček tooyour účtu Batch a nakonfigurovat odkaz na balíček ve fondu hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-213">[Application package](batch-application-packages.md) - Add a zipped installation package tooyour Batch account, and configure a package reference in hello pool.</span></span> <span data-ttu-id="2842e-214">Toto nastavení odešle a unzips hello balíčku na všech uzlech ve fondu hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-214">This setting uploads and unzips hello package on all nodes in hello pool.</span></span> <span data-ttu-id="2842e-215">Pokud je balíček hello instalační program, vytvořte spuštění úloh příkazového řádku toosilently instalace hello aplikaci na všech uzlech fondu.</span><span class="sxs-lookup"><span data-stu-id="2842e-215">If hello package is an installer, create a start task command line toosilently install hello app on all pool nodes.</span></span> <span data-ttu-id="2842e-216">Volitelně můžete nainstalujte hello balíček při úloha je naplánovaná toorun na uzlu.</span><span class="sxs-lookup"><span data-stu-id="2842e-216">Optionally, install hello package when a task is scheduled toorun on a node.</span></span>

* <span data-ttu-id="2842e-217">[Obrázek vlastní fond](batch-api-basics.md#pool) – vytvoření vlastní Windows nebo vyžadované bitovou kopii virtuálního počítače s Linuxem, která obsahuje ovladače, softwaru nebo jiná nastavení pro hello velikost virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="2842e-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for hello VM size.</span></span> <span data-ttu-id="2842e-218">Pokud jste vytvořili vašeho účtu Batch v konfigurace odběru hello uživatele, zadejte vlastní image hello fondu Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-218">If you created your Batch account in hello user subscription configuration, specify hello custom image for your Batch pool.</span></span> <span data-ttu-id="2842e-219">(Vlastní obrázky nejsou podporovány v účtech v konfiguraci služby Batch hello). Vlastní obrázky lze použít pouze s fondy v konfiguraci virtuálního počítače hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-219">(Custom images are not supported in accounts in hello Batch service configuration.) Custom images can only be used with pools in hello virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="2842e-220">Ve fondech Batch nemůžete použít aktuálně vlastní image vytvořené s spravované disky nebo s storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="2842e-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="2842e-221">[Batch loděnice](https://github.com/Azure/batch-shipyard) automaticky nakonfiguruje transparentně s kontejnerizované úlohy v Azure Batch toowork hello GPU a RDMA.</span><span class="sxs-lookup"><span data-stu-id="2842e-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures hello GPU and RDMA toowork transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="2842e-222">Batch loděnice zcela vycházejí s konfiguračními soubory.</span><span class="sxs-lookup"><span data-stu-id="2842e-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="2842e-223">Existuje mnoho ukázka recepturách konfigurace k dispozici umožňující GPU a RDMA úlohy, jako například hello [CNTK GPU recepturách](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) který předem nakonfiguruje ovladače grafického procesoru na virtuálních počítačích N-series a načte kognitivní nástrojů Microsoft software jako bitovou kopii Docker.</span><span class="sxs-lookup"><span data-stu-id="2842e-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="2842e-224">Příklad: Microsoft MPI u fondu virtuální počítač A8</span><span class="sxs-lookup"><span data-stu-id="2842e-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="2842e-225">toorun aplikací Windows MPI ve fondu Azure A8 uzlů, je nutné tooinstall podporované MPI implementace.</span><span class="sxs-lookup"><span data-stu-id="2842e-225">toorun Windows MPI applications on a pool of Azure A8 nodes, you need tooinstall a supported MPI implementation.</span></span> <span data-ttu-id="2842e-226">Tady je ukázka kroky tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) na Windows fondu pomocí balíčku aplikace Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-226">Here are sample steps tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="2842e-227">Stáhnout hello [instalační balíček](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) pro nejnovější verzi Microsoft MPI hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-227">Download hello [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for hello latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="2842e-228">Vytvořte soubor zip balíčku hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-228">Create a zip file of hello package.</span></span>
3. <span data-ttu-id="2842e-229">Nahrajte účtu Batch tooyour hello balíčku.</span><span class="sxs-lookup"><span data-stu-id="2842e-229">Upload hello package tooyour Batch account.</span></span> <span data-ttu-id="2842e-230">Pokyny najdete v tématu hello [balíčky aplikací](batch-application-packages.md) pokyny.</span><span class="sxs-lookup"><span data-stu-id="2842e-230">For steps, see hello [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="2842e-231">Zadejte id aplikace, jako *MSMPI*, a verze, jako *8.1*.</span><span class="sxs-lookup"><span data-stu-id="2842e-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="2842e-232">V konfiguraci hello cloudových služeb s hello požadovaného počtu uzlů a škálování pomocí hello rozhraní API služby Batch nebo portálu Azure, vytvořte fond.</span><span class="sxs-lookup"><span data-stu-id="2842e-232">Using hello Batch APIs or Azure portal, create a pool in hello cloud services configuration with hello desired number of nodes and scale.</span></span> <span data-ttu-id="2842e-233">Hello následující tabulka uvádí nastavení tooset ukázka až MPI v bezobslužném režimu pomocí spouštěcí úkol:</span><span class="sxs-lookup"><span data-stu-id="2842e-233">hello following table shows sample settings tooset up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="2842e-234">Nastavení</span><span class="sxs-lookup"><span data-stu-id="2842e-234">Setting</span></span> | <span data-ttu-id="2842e-235">Hodnota</span><span class="sxs-lookup"><span data-stu-id="2842e-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="2842e-236">**Obrázek – typ**</span><span class="sxs-lookup"><span data-stu-id="2842e-236">**Image Type**</span></span> | <span data-ttu-id="2842e-237">Cloud Services</span><span class="sxs-lookup"><span data-stu-id="2842e-237">Cloud Services</span></span> |
| <span data-ttu-id="2842e-238">**Řada operačního systému**</span><span class="sxs-lookup"><span data-stu-id="2842e-238">**OS family**</span></span> | <span data-ttu-id="2842e-239">Windows Server 2012 R2 (řada operačního systému 4)</span><span class="sxs-lookup"><span data-stu-id="2842e-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="2842e-240">**Velikost uzlu**</span><span class="sxs-lookup"><span data-stu-id="2842e-240">**Node size**</span></span> | <span data-ttu-id="2842e-241">A8 Standard</span><span class="sxs-lookup"><span data-stu-id="2842e-241">A8 Standard</span></span> |
| <span data-ttu-id="2842e-242">**Komunikace internodium povoleno**</span><span class="sxs-lookup"><span data-stu-id="2842e-242">**Internode communication enabled**</span></span> | <span data-ttu-id="2842e-243">True</span><span class="sxs-lookup"><span data-stu-id="2842e-243">True</span></span> |
| <span data-ttu-id="2842e-244">**Maximální počet úkolů na uzlu**</span><span class="sxs-lookup"><span data-stu-id="2842e-244">**Max tasks per node**</span></span> | <span data-ttu-id="2842e-245">1</span><span class="sxs-lookup"><span data-stu-id="2842e-245">1</span></span> |
| <span data-ttu-id="2842e-246">**Odkazy na balíček aplikace**</span><span class="sxs-lookup"><span data-stu-id="2842e-246">**Application package references**</span></span> | <span data-ttu-id="2842e-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="2842e-247">MSMPI</span></span> |
| <span data-ttu-id="2842e-248">**Spouštěcí úkol povoleno**</span><span class="sxs-lookup"><span data-stu-id="2842e-248">**Start task enabled**</span></span> | <span data-ttu-id="2842e-249">True</span><span class="sxs-lookup"><span data-stu-id="2842e-249">True</span></span><br><span data-ttu-id="2842e-250">**Příkazový řádek** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="2842e-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="2842e-251">**Identita uživatele** -autouser fondu, správce</span><span class="sxs-lookup"><span data-stu-id="2842e-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="2842e-252">**Počkejte úspěch** – True</span><span class="sxs-lookup"><span data-stu-id="2842e-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="2842e-253">Příklad: NVIDIA tesla – měrná ovladačů ve fondu virtuálních počítačů NC</span><span class="sxs-lookup"><span data-stu-id="2842e-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="2842e-254">toorun CUDA aplikací ve fondu uzlů Linux NC, je nutné tooinstall CUDA Toolkit 8.0 na uzlech hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-254">toorun CUDA applications on a pool of Linux NC nodes, you need tooinstall CUDA Toolkit 8.0 on hello nodes.</span></span> <span data-ttu-id="2842e-255">Hello Toolkit nainstaluje potřebné ovladače NVIDIA tesla – měrná GPU hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-255">hello Toolkit installs hello necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="2842e-256">Zde je ukázka kroky toodeploy vlastní image Ubuntu 16.04 LTS s ovladači GPU hello:</span><span class="sxs-lookup"><span data-stu-id="2842e-256">Here are sample steps toodeploy a custom Ubuntu 16.04 LTS image with hello GPU drivers:</span></span>

1. <span data-ttu-id="2842e-257">Nasaďte virtuální počítač Azure NC6 systémem Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="2842e-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="2842e-258">Můžete například vytvořte hello virtuálních počítačů v oblasti USA – jih centrální hello.</span><span class="sxs-lookup"><span data-stu-id="2842e-258">For example, create hello VM in hello US South Central region.</span></span> <span data-ttu-id="2842e-259">Ujistěte se, že vytvoříte hello virtuálních počítačů s standardního úložiště, a *bez* spravované disky.</span><span class="sxs-lookup"><span data-stu-id="2842e-259">Make sure that you create hello VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="2842e-260">Postupujte podle hello kroky tooconnect toohello virtuálních počítačů a [instalaci ovladačů CUDA](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="2842e-260">Follow hello steps tooconnect toohello VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="2842e-261">Zrušení zřízení hello agenta systému Linux a pak zachytíte image virtuálního počítače s Linuxem pomocí příkazů hello Azure CLI 1.0.</span><span class="sxs-lookup"><span data-stu-id="2842e-261">Deprovision hello Linux agent, and then capture Linux VM image using hello Azure CLI 1.0 commands.</span></span> <span data-ttu-id="2842e-262">Pokyny najdete v tématu [zachytit virtuální počítač Linux spuštěné v Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="2842e-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="2842e-263">Poznamenejte si hello Image identifikátor URI.</span><span class="sxs-lookup"><span data-stu-id="2842e-263">Make a note of hello image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="2842e-264">Nepoužívejte Azure CLI 2.0 příkazy toocapture hello image pro Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="2842e-264">Do not use Azure CLI 2.0 commands toocapture hello image for Azure Batch.</span></span> <span data-ttu-id="2842e-265">Příkazy hello 2.0 rozhraní příkazového řádku aktuálně zachytit pouze virtuální počítače vytvořené pomocí spravovaného disky.</span><span class="sxs-lookup"><span data-stu-id="2842e-265">Currently hello CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="2842e-266">Vytvořte účet Batch se hello konfigurace odběru uživatele, v oblasti, která podporuje virtuální počítače názvového kontextu.</span><span class="sxs-lookup"><span data-stu-id="2842e-266">Create a Batch account, with hello user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="2842e-267">Pomocí hello rozhraní API služby Batch nebo portál Azure, vytvoření fondu pomocí vlastní image hello a s hello požadovaného počtu uzlů a škálování.</span><span class="sxs-lookup"><span data-stu-id="2842e-267">Using hello Batch APIs or Azure portal, create a pool using hello custom image and with hello desired number of nodes and scale.</span></span> <span data-ttu-id="2842e-268">Hello následující tabulka uvádí nastavení fondu ukázkových hello bitové kopie:</span><span class="sxs-lookup"><span data-stu-id="2842e-268">hello following table shows sample pool settings for hello image:</span></span>

| <span data-ttu-id="2842e-269">Nastavení</span><span class="sxs-lookup"><span data-stu-id="2842e-269">Setting</span></span> | <span data-ttu-id="2842e-270">Hodnota</span><span class="sxs-lookup"><span data-stu-id="2842e-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="2842e-271">**Obrázek – typ**</span><span class="sxs-lookup"><span data-stu-id="2842e-271">**Image Type**</span></span> | <span data-ttu-id="2842e-272">Vlastní Image</span><span class="sxs-lookup"><span data-stu-id="2842e-272">Custom Image</span></span> |
| <span data-ttu-id="2842e-273">**Vlastní Image**</span><span class="sxs-lookup"><span data-stu-id="2842e-273">**Custom Image**</span></span> | <span data-ttu-id="2842e-274">Obrázek URI hello formuláře`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="2842e-274">Image URI of hello form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="2842e-275">**Uzel agenta SKU**</span><span class="sxs-lookup"><span data-stu-id="2842e-275">**Node agent SKU**</span></span> | <span data-ttu-id="2842e-276">batch.Node.Ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="2842e-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="2842e-277">**Velikost uzlu**</span><span class="sxs-lookup"><span data-stu-id="2842e-277">**Node size**</span></span> | <span data-ttu-id="2842e-278">NC6 Standard</span><span class="sxs-lookup"><span data-stu-id="2842e-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="2842e-279">Další kroky</span><span class="sxs-lookup"><span data-stu-id="2842e-279">Next steps</span></span>

* <span data-ttu-id="2842e-280">toorun úloh MPI ve fondu Azure Batch, najdete v části hello [Windows](batch-mpi.md) nebo [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) příklady.</span><span class="sxs-lookup"><span data-stu-id="2842e-280">toorun MPI jobs on an Azure Batch pool, see hello [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="2842e-281">Příklady úloh GPU na Batch najdete v tématu hello [Batch loděnice](https://github.com/Azure/batch-shipyard/) recepty.</span><span class="sxs-lookup"><span data-stu-id="2842e-281">For examples of GPU workloads on Batch, see hello [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>
