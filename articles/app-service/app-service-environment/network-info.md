---
title: "aspekty aaaNetworking pomocí služby Azure App Service environment"
description: "Vysvětluje hello App Service Environment síťový provoz a jak tooset skupiny Nsg a udr s vaší App Service Environment"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="488bb-103">Aspekty sítě služby App Service environment</span><span class="sxs-lookup"><span data-stu-id="488bb-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="488bb-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="488bb-104">Overview</span></span> ##

 <span data-ttu-id="488bb-105">Azure [App Service Environment] [ Intro] nasazení služby Azure App Service na podsíť ve virtuální síti Azure (VNet).</span><span class="sxs-lookup"><span data-stu-id="488bb-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="488bb-106">Existují dva typy nasazení pro služby App Service environment (App Service Environment):</span><span class="sxs-lookup"><span data-stu-id="488bb-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="488bb-107">**Externí App Service Environment**: zpřístupňuje hello aplikace app Service Environment hostované na IP adresu přístupné z Internetu.</span><span class="sxs-lookup"><span data-stu-id="488bb-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="488bb-108">Další informace najdete v tématu [vytvořit externí App Service Environment][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="488bb-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="488bb-109">**App Service Environment ILB**: zpřístupňuje hello aplikace app Service Environment hostované na IP adresu ve virtuální síti.</span><span class="sxs-lookup"><span data-stu-id="488bb-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="488bb-110">vnitřní koncový bod Hello je interní nástroj (ILB), proto volal ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="488bb-111">Další informace najdete v tématu [vytvoření a použití App Service Environment ILB][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="488bb-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="488bb-112">Existují dvě verze služby App Service Environment: ASEv1 a ASEv2.</span><span class="sxs-lookup"><span data-stu-id="488bb-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="488bb-113">Informace o ASEv1 najdete v tématu [Úvod tooApp Service Environment v1][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="488bb-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="488bb-114">ASEv1 se dá nasadit v klasický nebo virtuální sítě Resource Manageru.</span><span class="sxs-lookup"><span data-stu-id="488bb-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="488bb-115">ASEv2 lze nasadit pouze do virtuální sítě Resource Manageru.</span><span class="sxs-lookup"><span data-stu-id="488bb-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="488bb-116">Všechna volání ze App Service Environment, které přejděte toohello internet ponechte hello virtuální sítě pomocí virtuální IP adresu přiřadit pro hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="488bb-117">Hello veřejnou IP adresu z této VIP je pak hello zdrojové IP adresy pro všechna volání z hello App Service Environment, které přejděte toohello Internetu.</span><span class="sxs-lookup"><span data-stu-id="488bb-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="488bb-118">Pokud aplikace hello ve vašem App Service Environment umožňují volání tooresources ve vaší virtuální síti nebo přes síť VPN, je jedním z hello IP adres v podsíti hello používá vaše App Service Environment hello zdrojové IP adresy.</span><span class="sxs-lookup"><span data-stu-id="488bb-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="488bb-119">Protože hello App Service Environment není v rámci hello virtuální sítě, je také přístup k prostředkům v rámci hello virtuální sítě bez jakékoli dodatečné konfigurace.</span><span class="sxs-lookup"><span data-stu-id="488bb-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="488bb-120">Pokud hello virtuální sítě je připojený tooyour do místní sítě, aplikací ve vaší App Service Environment mít také přístup tooresources existuje.</span><span class="sxs-lookup"><span data-stu-id="488bb-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="488bb-121">Nepotřebujete tooconfigure hello App Service Environment nebo aplikace pro všechny další.</span><span class="sxs-lookup"><span data-stu-id="488bb-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![Externí App Service Environment][1] 

<span data-ttu-id="488bb-123">Pokud máte externí App Service Environment, veřejné VIP hello je také hello koncový bod, že vaše aplikace app Service Environment přeložit toofor:</span><span class="sxs-lookup"><span data-stu-id="488bb-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="488bb-124">HTTP/S.</span><span class="sxs-lookup"><span data-stu-id="488bb-124">HTTP/S.</span></span> 
* <span data-ttu-id="488bb-125">FTP/S.</span><span class="sxs-lookup"><span data-stu-id="488bb-125">FTP/S.</span></span> 
* <span data-ttu-id="488bb-126">Nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="488bb-126">Web deployment.</span></span>
* <span data-ttu-id="488bb-127">Vzdálené ladění.</span><span class="sxs-lookup"><span data-stu-id="488bb-127">Remote debugging.</span></span>

![ILB APP SERVICE ENVIRONMENT][2]

<span data-ttu-id="488bb-129">Pokud máte App Service Environment ILB, adresa IP hello hello ILB je hello koncový bod HTTP/S, FTP/S, nasazení webu a vzdálené ladění.</span><span class="sxs-lookup"><span data-stu-id="488bb-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="488bb-130">Hello normální aplikace přístupové porty jsou:</span><span class="sxs-lookup"><span data-stu-id="488bb-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="488bb-131">Použití</span><span class="sxs-lookup"><span data-stu-id="488bb-131">Use</span></span> | <span data-ttu-id="488bb-132">Z</span><span class="sxs-lookup"><span data-stu-id="488bb-132">From</span></span> | <span data-ttu-id="488bb-133">příliš</span><span class="sxs-lookup"><span data-stu-id="488bb-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="488bb-134">PROTOKOL HTTP NEBO HTTPS</span><span class="sxs-lookup"><span data-stu-id="488bb-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="488bb-135">Konfigurovatelná uživatelem</span><span class="sxs-lookup"><span data-stu-id="488bb-135">User configurable</span></span> |  <span data-ttu-id="488bb-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="488bb-136">80, 443</span></span> |
|  <span data-ttu-id="488bb-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="488bb-137">FTP/FTPS</span></span>    | <span data-ttu-id="488bb-138">Konfigurovatelná uživatelem</span><span class="sxs-lookup"><span data-stu-id="488bb-138">User configurable</span></span> |  <span data-ttu-id="488bb-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="488bb-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="488bb-140">Visual Studio vzdálené ladění</span><span class="sxs-lookup"><span data-stu-id="488bb-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="488bb-141">Konfigurovatelná uživatelem</span><span class="sxs-lookup"><span data-stu-id="488bb-141">User configurable</span></span> |  <span data-ttu-id="488bb-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="488bb-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="488bb-143">To platí, pokud jste na externí App Service Environment nebo ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="488bb-144">Pokud jste na externí App Service Environment, stiskněte tlačítko tyto porty na veřejné VIP hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="488bb-145">Pokud jste v App Service Environment ILB, stiskněte tlačítko tyto porty na hello ILB.</span><span class="sxs-lookup"><span data-stu-id="488bb-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="488bb-146">Pokud se uzamknout port 443, může být dopad na některé funkce zveřejněné hello portálu.</span><span class="sxs-lookup"><span data-stu-id="488bb-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="488bb-147">Další informace najdete v tématu [portál závislosti](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="488bb-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="488bb-148">Závislosti App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-148">ASE dependencies</span></span> ##

<span data-ttu-id="488bb-149">App Service Environment příchozí přístup závislostí je:</span><span class="sxs-lookup"><span data-stu-id="488bb-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="488bb-150">Použití</span><span class="sxs-lookup"><span data-stu-id="488bb-150">Use</span></span> | <span data-ttu-id="488bb-151">Z</span><span class="sxs-lookup"><span data-stu-id="488bb-151">From</span></span> | <span data-ttu-id="488bb-152">příliš</span><span class="sxs-lookup"><span data-stu-id="488bb-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="488bb-153">Správa</span><span class="sxs-lookup"><span data-stu-id="488bb-153">Management</span></span> | <span data-ttu-id="488bb-154">Adresy pro správu služby aplikace</span><span class="sxs-lookup"><span data-stu-id="488bb-154">App Service management addresses</span></span> | <span data-ttu-id="488bb-155">Podsíť App Service Environment: 454, 455</span><span class="sxs-lookup"><span data-stu-id="488bb-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="488bb-156">Interní komunikaci App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-156">ASE internal communication</span></span> | <span data-ttu-id="488bb-157">Podsíť App Service Environment: všechny porty</span><span class="sxs-lookup"><span data-stu-id="488bb-157">ASE subnet: All ports</span></span> | <span data-ttu-id="488bb-158">Podsíť App Service Environment: všechny porty</span><span class="sxs-lookup"><span data-stu-id="488bb-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="488bb-159">Povolit pro vyrovnávání zatížení Azure příchozí</span><span class="sxs-lookup"><span data-stu-id="488bb-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="488bb-160">Nástroje pro vyrovnávání zatížení Azure</span><span class="sxs-lookup"><span data-stu-id="488bb-160">Azure load balancer</span></span> | <span data-ttu-id="488bb-161">Podsíť App Service Environment: všechny porty</span><span class="sxs-lookup"><span data-stu-id="488bb-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="488bb-162">Aplikace přiřazené IP adresy</span><span class="sxs-lookup"><span data-stu-id="488bb-162">App assigned IP addresses</span></span> | <span data-ttu-id="488bb-163">Aplikace, které jsou přiřazeny adresy</span><span class="sxs-lookup"><span data-stu-id="488bb-163">App assigned addresses</span></span> | <span data-ttu-id="488bb-164">Podsíť App Service Environment: všechny porty</span><span class="sxs-lookup"><span data-stu-id="488bb-164">ASE subnet: All ports</span></span>

<span data-ttu-id="488bb-165">Hello příchozí provoz poskytuje příkazy a ovládání App Service Environment hello v přidání toosystem monitorování.</span><span class="sxs-lookup"><span data-stu-id="488bb-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="488bb-166">Zdroj Hello IP adres pro tyto přenosy dat jsou uvedené v hello [adresy App Service Environment správu] [ ASEManagement] dokumentu.</span><span class="sxs-lookup"><span data-stu-id="488bb-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="488bb-167">Konfigurace zabezpečení sítě Hello potřebuje přístup tooallow z všechny IP adresy na portech 454 a 455.</span><span class="sxs-lookup"><span data-stu-id="488bb-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="488bb-168">V rámci podsítě hello App Service Environment jsou mnoho porty se použijí pro komunikaci interní součásti a můžou změnit.</span><span class="sxs-lookup"><span data-stu-id="488bb-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="488bb-169">To vyžaduje všechny porty hello v toobe podsíť hello App Service Environment dostupný z podsítě hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="488bb-170">Pro hello komunikaci mezi pro vyrovnávání zatížení Azure hello a hello App Service Environment podsíť hello minimální porty jsou tohoto toobe potřeba otevřít 454 a 455 16001.</span><span class="sxs-lookup"><span data-stu-id="488bb-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="488bb-171">Hello 16001 port je používán pro udržování připojení provoz mezi hello nástroj pro vyrovnávání zatížení a hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="488bb-172">Pokud používáte App Service Environment ILB můžete uzamknout provoz směrem dolů toojust hello 454, 455, 16001 porty.</span><span class="sxs-lookup"><span data-stu-id="488bb-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="488bb-173">Pokud používáte externí App Service Environment bude nutné tootake do účtu hello normální aplikace přístupové porty.</span><span class="sxs-lookup"><span data-stu-id="488bb-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="488bb-174">Pokud používáte aplikaci přiřazenou adresy je třeba tooopen ho tooall porty.</span><span class="sxs-lookup"><span data-stu-id="488bb-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="488bb-175">Pokud adresu přiřazen tooa konkrétní aplikaci, nástroj pro vyrovnávání zatížení hello použije porty, které nejsou známá předem toosend HTTP a HTTPS provoz toohello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="488bb-176">Pokud používáte aplikaci přiřazenou IP adresy musíte tooallow provoz z hello přiřazené tooyour aplikace toohello App Service Environment podsítě IP adres.</span><span class="sxs-lookup"><span data-stu-id="488bb-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="488bb-177">Pro odchozí přístup App Service Environment závisí na několika externími systémy.</span><span class="sxs-lookup"><span data-stu-id="488bb-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="488bb-178">Tyto závislosti systému jsou definovány s názvy DNS a nemáte mapování tooa pevné sadu IP adres.</span><span class="sxs-lookup"><span data-stu-id="488bb-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="488bb-179">Proto hello App Service Environment vyžaduje odchozí přístup z podsítě tooall hello App Service Environment externí IP adres napříč různými porty.</span><span class="sxs-lookup"><span data-stu-id="488bb-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="488bb-180">App Service Environment má hello následující odchozí závislosti:</span><span class="sxs-lookup"><span data-stu-id="488bb-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="488bb-181">Použití</span><span class="sxs-lookup"><span data-stu-id="488bb-181">Use</span></span> | <span data-ttu-id="488bb-182">Z</span><span class="sxs-lookup"><span data-stu-id="488bb-182">From</span></span> | <span data-ttu-id="488bb-183">příliš</span><span class="sxs-lookup"><span data-stu-id="488bb-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="488bb-184">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="488bb-184">Azure Storage</span></span> | <span data-ttu-id="488bb-185">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-185">ASE subnet</span></span> | <span data-ttu-id="488bb-186">Table.Core.Windows.NET, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 je potřeba jenom pro ASEv1.)</span><span class="sxs-lookup"><span data-stu-id="488bb-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="488bb-187">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="488bb-187">Azure SQL Database</span></span> | <span data-ttu-id="488bb-188">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-188">ASE subnet</span></span> | <span data-ttu-id="488bb-189">Database.Windows.NET: 1433, 11000 11999, 14000 14999 (Další informace najdete v tématu [využití portu SQL Database verze 12](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span><span class="sxs-lookup"><span data-stu-id="488bb-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="488bb-190">Správa Azure</span><span class="sxs-lookup"><span data-stu-id="488bb-190">Azure management</span></span> | <span data-ttu-id="488bb-191">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-191">ASE subnet</span></span> | <span data-ttu-id="488bb-192">Management.Core.Windows.NET, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="488bb-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="488bb-193">Ověření certifikátu SSL</span><span class="sxs-lookup"><span data-stu-id="488bb-193">SSL certificate verification</span></span> |  <span data-ttu-id="488bb-194">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-194">ASE subnet</span></span>            |  <span data-ttu-id="488bb-195">OCSP.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="488bb-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="488bb-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="488bb-196">Azure Active Directory</span></span>        | <span data-ttu-id="488bb-197">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-197">ASE subnet</span></span>            |  <span data-ttu-id="488bb-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="488bb-198">Internet: 443</span></span>
| <span data-ttu-id="488bb-199">Správa služby App Service</span><span class="sxs-lookup"><span data-stu-id="488bb-199">App Service management</span></span>        | <span data-ttu-id="488bb-200">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-200">ASE subnet</span></span>            |  <span data-ttu-id="488bb-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="488bb-201">Internet: 443</span></span>
| <span data-ttu-id="488bb-202">Azure DNS</span><span class="sxs-lookup"><span data-stu-id="488bb-202">Azure DNS</span></span>                     | <span data-ttu-id="488bb-203">Podsíť App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-203">ASE subnet</span></span>            |  <span data-ttu-id="488bb-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="488bb-204">Internet: 53</span></span>
| <span data-ttu-id="488bb-205">Interní komunikaci App Service Environment</span><span class="sxs-lookup"><span data-stu-id="488bb-205">ASE internal communication</span></span>    | <span data-ttu-id="488bb-206">Podsíť App Service Environment: všechny porty</span><span class="sxs-lookup"><span data-stu-id="488bb-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="488bb-207">Podsíť App Service Environment: všechny porty</span><span class="sxs-lookup"><span data-stu-id="488bb-207">ASE subnet: All ports</span></span>

<span data-ttu-id="488bb-208">Pokud hello App Service Environment ztratí přístup toothese závislosti, přestane fungovat.</span><span class="sxs-lookup"><span data-stu-id="488bb-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="488bb-209">Pokud k tomu dojde dlouho dostatek, hello App Service Environment je pozastaven.</span><span class="sxs-lookup"><span data-stu-id="488bb-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="488bb-210">Zákazník DNS</span><span class="sxs-lookup"><span data-stu-id="488bb-210">Customer DNS</span></span> ###

<span data-ttu-id="488bb-211">Pokud hello virtuální síť je nakonfigurované na serveru DNS definovanou zákazníkem, hello klientské úlohy ji použít.</span><span class="sxs-lookup"><span data-stu-id="488bb-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="488bb-212">Hello App Service Environment stále potřebuje toocommunicate s Azure DNS pro účely správy.</span><span class="sxs-lookup"><span data-stu-id="488bb-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="488bb-213">Pokud hello virtuální síť je nakonfigurované zákazník DNS na hello druhé straně sítě VPN, musí být dostupný z podsítě hello, který obsahuje App Service Environment hello hello DNS server.</span><span class="sxs-lookup"><span data-stu-id="488bb-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="488bb-214">Portál závislosti</span><span class="sxs-lookup"><span data-stu-id="488bb-214">Portal dependencies</span></span> ##

<span data-ttu-id="488bb-215">V přidání toohello App Service Environment funkční závislosti existuje několik prostředí portálu související toohello další položky.</span><span class="sxs-lookup"><span data-stu-id="488bb-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="488bb-216">Některé z možností hello v hello portálu Azure, závisí na site_ too_SCM přímý přístup.</span><span class="sxs-lookup"><span data-stu-id="488bb-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="488bb-217">Pro každou aplikaci ve službě Azure App Service existují dvě adresy URL.</span><span class="sxs-lookup"><span data-stu-id="488bb-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="488bb-218">První adresa URL Hello je tooaccess vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="488bb-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="488bb-219">Hello druhý adresa URL je tooaccess hello SCM webu, což se označuje taky jako hello _Kudu konzoly_.</span><span class="sxs-lookup"><span data-stu-id="488bb-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="488bb-220">Funkce, které používají hello SCM lokality:</span><span class="sxs-lookup"><span data-stu-id="488bb-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="488bb-221">Webové úlohy</span><span class="sxs-lookup"><span data-stu-id="488bb-221">Web jobs</span></span>
-   <span data-ttu-id="488bb-222">Funkce</span><span class="sxs-lookup"><span data-stu-id="488bb-222">Functions</span></span>
-   <span data-ttu-id="488bb-223">Protokol streamování</span><span class="sxs-lookup"><span data-stu-id="488bb-223">Log streaming</span></span>
-   <span data-ttu-id="488bb-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="488bb-224">Kudu</span></span>
-   <span data-ttu-id="488bb-225">Rozšíření</span><span class="sxs-lookup"><span data-stu-id="488bb-225">Extensions</span></span>
-   <span data-ttu-id="488bb-226">Průzkumník procesů</span><span class="sxs-lookup"><span data-stu-id="488bb-226">Process Explorer</span></span>
-   <span data-ttu-id="488bb-227">Konzola</span><span class="sxs-lookup"><span data-stu-id="488bb-227">Console</span></span>

<span data-ttu-id="488bb-228">Při použití App Service Environment ILB hello SCM lokalita není dostupný z vnějšku hello virtuální sítě internet.</span><span class="sxs-lookup"><span data-stu-id="488bb-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="488bb-229">Pokud vaše aplikace je hostitelem App Service Environment ILB, některé funkce nebudou fungovat z portálu hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="488bb-230">Řadu tyto funkce, které závisí na hello SCM lokality jsou k dispozici přímo v konzoli Kudu hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="488bb-231">Tooit můžete připojit přímo spíše než pomocí portálu hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="488bb-232">Pokud je vaše aplikace hostovaná v App Service Environment ILB, pomocí vaší publikování toosign přihlašovací údaje v.</span><span class="sxs-lookup"><span data-stu-id="488bb-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="488bb-233">Hello URL tooaccess hello SCM lokality aplikace hostované v App Service Environment ILB má hello následující formát:</span><span class="sxs-lookup"><span data-stu-id="488bb-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="488bb-234">Pokud vaše App Service Environment ILB je název domény hello *contoso.net* a je název vaší aplikace *testapp*, hello aplikace je k dispozici na adrese *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="488bb-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="488bb-235">Hello SCM webu, která jde s ním je k dispozici na adrese *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="488bb-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="488bb-236">Funkce a webové úlohy</span><span class="sxs-lookup"><span data-stu-id="488bb-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="488bb-237">Funkce a webové úlohy závisí na hello SCM lokality, ale jsou podporovány pro použití v portálu hello i v případě, že vaše aplikace nacházely ve ILB App Service Environment, dokud bude prohlížeč dosáhnout hello SCM lokality.</span><span class="sxs-lookup"><span data-stu-id="488bb-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="488bb-238">Pokud používáte certifikát podepsaný svým držitelem s vaší App Service Environment ILB, budete potřebovat tooenable tootrust váš prohlížeč, který certifikát.</span><span class="sxs-lookup"><span data-stu-id="488bb-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="488bb-239">Pro aplikaci Internet Explorer a okraj, který znamená hello certifikát má toobe v počítači důvěryhodnosti hello uložit.</span><span class="sxs-lookup"><span data-stu-id="488bb-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="488bb-240">Pokud používáte Chrome, pak to znamená, že jste dříve přijali hello certifikátu v prohlížeči hello zasažení pravděpodobně z důvodu hello scm lokality přímo.</span><span class="sxs-lookup"><span data-stu-id="488bb-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="488bb-241">Hello nejlepším řešením je toouse komerční certifikát, který je v řetězu prohlížeče hello vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="488bb-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="488bb-242">App Service Environment IP adresy</span><span class="sxs-lookup"><span data-stu-id="488bb-242">ASE IP addresses</span></span> ##

<span data-ttu-id="488bb-243">App Service Environment má několik adres IP toobe vědět.</span><span class="sxs-lookup"><span data-stu-id="488bb-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="488bb-244">Jsou:</span><span class="sxs-lookup"><span data-stu-id="488bb-244">They are:</span></span>

- <span data-ttu-id="488bb-245">**Veřejná IP adresa příchozí**: použít pro provoz aplikace v externím App Service Environment a přenosy správy v App Service Environment ILB i externí App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="488bb-246">**Odchozí veřejnou IP adresu**: použít jako hello "z" IP adresy pro odchozí připojení z hello App Service Environment této ponechejte hello virtuální sítě, které nejsou směrovány dolů sítě VPN.</span><span class="sxs-lookup"><span data-stu-id="488bb-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="488bb-247">**ILB IP adresu**: Pokud používáte ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="488bb-248">**Přiřazené aplikace založená na IP adresy**: jedinou možnou s externí App Service Environment a je nakonfigurovaný na základě IP protokol SSL.</span><span class="sxs-lookup"><span data-stu-id="488bb-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="488bb-249">Tyto IP adresy lze snadno zobrazit v ASEv2 v hello portál Azure z hello App Service Environment uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="488bb-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="488bb-250">Pokud máte App Service Environment ILB, je uvedený hello IP pro hello ILB.</span><span class="sxs-lookup"><span data-stu-id="488bb-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![IP adresy][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="488bb-252">Aplikace přiřazené IP adresy</span><span class="sxs-lookup"><span data-stu-id="488bb-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="488bb-253">Externí App Service Environment můžete přiřadit IP adresy tooindividual aplikace.</span><span class="sxs-lookup"><span data-stu-id="488bb-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="488bb-254">Nejde udělat s ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="488bb-255">Další informace o tom, tooconfigure vaší aplikace toohave vlastní IP adresu, najdete v části [vytvořit vazbu existující vlastní SSL certifikát tooAzure webové aplikace](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="488bb-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="488bb-256">Pokud aplikace má vlastní založená na IP adresu, vyhrazuje hello App Service Environment dva porty toomap toothat IP adresu.</span><span class="sxs-lookup"><span data-stu-id="488bb-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="488bb-257">Je jeden port pro přenos HTTP, a hello jiných port se pro protokol HTTPS.</span><span class="sxs-lookup"><span data-stu-id="488bb-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="488bb-258">Tyto porty jsou uvedeny v hello App Service Environment uživatelského rozhraní v části adresy IP hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="488bb-259">Přenosy musí být schopný tooreach tyto porty z hello VIP nebo hello aplikace jsou nedostupné.</span><span class="sxs-lookup"><span data-stu-id="488bb-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="488bb-260">Tento požadavek je důležité tooremember při konfiguraci skupin zabezpečení sítě (Nsg).</span><span class="sxs-lookup"><span data-stu-id="488bb-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="488bb-261">Network Security Groups (Skupiny zabezpečení sítě)</span><span class="sxs-lookup"><span data-stu-id="488bb-261">Network Security Groups</span></span> ##

<span data-ttu-id="488bb-262">[Skupin zabezpečení sítě] [ NSGs] zadejte hello možnost toocontrol přístup k síti v rámci virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="488bb-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="488bb-263">Pokud používáte hello portál, je implicitní zakázat pravidlo v hello nejnižší priorita toodeny vše.</span><span class="sxs-lookup"><span data-stu-id="488bb-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="488bb-264">Můžete vytvořit jsou vaše povolí pravidla.</span><span class="sxs-lookup"><span data-stu-id="488bb-264">What you build are your allow rules.</span></span>

<span data-ttu-id="488bb-265">V App Service Environment nemáte přístup toohello virtuálních počítačů použít toohost hello App Service Environment sám sebe.</span><span class="sxs-lookup"><span data-stu-id="488bb-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="488bb-266">Jsou v předplatném spravovaný společností Microsoft.</span><span class="sxs-lookup"><span data-stu-id="488bb-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="488bb-267">Pokud chcete aplikace toohello toorestrict přístup na hello App Service Environment, nastavte skupiny Nsg na podsítě hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="488bb-268">Při tom věnujte pozornost pečlivě toohello App Service Environment závislosti.</span><span class="sxs-lookup"><span data-stu-id="488bb-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="488bb-269">Pokud zablokujete všechny závislosti, hello App Service Environment přestane fungovat.</span><span class="sxs-lookup"><span data-stu-id="488bb-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="488bb-270">Skupiny Nsg se dá nakonfigurovat pomocí hello portál Azure nebo pomocí prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="488bb-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="488bb-271">Zde Hello informace zobrazí hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="488bb-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="488bb-272">Vytvořit a spravovat skupiny Nsg hello portálu jako prostředek nejvyšší úrovně v rámci **sítě**.</span><span class="sxs-lookup"><span data-stu-id="488bb-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="488bb-273">Když hello příchozí a odchozí požadavky jsou vzít v úvahu, hello skupiny Nsg by měla vypadat podobně jako skupiny Nsg toohello uvedeno v tomto příkladu.</span><span class="sxs-lookup"><span data-stu-id="488bb-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="488bb-274">Hello rozsah adres virtuální sítě je _192.168.250.0/16_, a je hello podsítě, která se App Service Environment hello _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="488bb-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="488bb-275">první dva příchozí požadavky pro App Service Environment toofunction hello Hello se zobrazí v horní části hello hello seznamu v tomto příkladu.</span><span class="sxs-lookup"><span data-stu-id="488bb-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="488bb-276">Jejich umožňuje správu App Service Environment a hello App Service Environment toocommunicate sama se sebou.</span><span class="sxs-lookup"><span data-stu-id="488bb-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="488bb-277">Hello další položky jsou všechny konfigurovatelné klienta a můžou řídit síťový přístup toohello App Service Environment webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="488bb-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![Příchozí pravidla zabezpečení][4]

<span data-ttu-id="488bb-279">Výchozí pravidlo umožňuje hello IP adres v podsíti, hello virtuální síť tootalk toohello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="488bb-280">Jiné výchozí pravidlo umožňuje hello Vyrovnávání zatížení, také známé jako veřejné VIP hello, toocommunicate s hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="488bb-281">toosee hello výchozí pravidla, vyberte **výchozí pravidla** další toohello **přidat** ikonu.</span><span class="sxs-lookup"><span data-stu-id="488bb-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="488bb-282">Když vložíte odepření všechno ostatní pravidla po hello NSG pravidla uvedené, abyste zabránili provoz mezi hello VIP a hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="488bb-283">tooprevent provoz, který přichází z uvnitř hello sítě VNet, přidat vlastní pravidlo tooallow příchozí.</span><span class="sxs-lookup"><span data-stu-id="488bb-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="488bb-284">Použijte stejné tooAzureLoadBalancer zdroj s cílovým serverem **žádné** a rozsah portů ** \* **.</span><span class="sxs-lookup"><span data-stu-id="488bb-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="488bb-285">Pravidla NSG hello je použité toohello App Service Environment podsítě, a proto není nutné toobe konkrétní v cílovém umístění hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="488bb-286">Pokud jste přiřadili aplikace tooyour IP adresu, zkontrolujte, zda že zachovat hello porty brány.</span><span class="sxs-lookup"><span data-stu-id="488bb-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="488bb-287">Vyberte toosee hello porty, **App Service Environment** > **IP adresy**.</span><span class="sxs-lookup"><span data-stu-id="488bb-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="488bb-288">Všechny položky hello ukazuje hello následující odchozích pravidel, je potřeba, s výjimkou hello poslední položky.</span><span class="sxs-lookup"><span data-stu-id="488bb-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="488bb-289">Umožňují síťový přístup toohello App Service Environment závislosti, které jste si poznamenali dříve v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="488bb-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="488bb-290">Pokud některý z nich zablokujete, vaše App Service Environment přestane fungovat.</span><span class="sxs-lookup"><span data-stu-id="488bb-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="488bb-291">Hello poslední položky v seznamu hello umožňuje vaší App Service Environment toocommunicate s další prostředky ve virtuální síti.</span><span class="sxs-lookup"><span data-stu-id="488bb-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![Odchozí pravidla zabezpečení][5]

<span data-ttu-id="488bb-293">Po skupin Nsg jsou definovány, přiřaďte jim toohello podsítě, který vaše App Service Environment je na.</span><span class="sxs-lookup"><span data-stu-id="488bb-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="488bb-294">Pokud si nepamatujete hello App Service Environment virtuální síť nebo podsíť, zobrazí se z portálu pro správu hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="488bb-295">tooassign hello NSG tooyour podsíť, přejděte toohello podsíť uživatelského rozhraní a vyberte hello NSG.</span><span class="sxs-lookup"><span data-stu-id="488bb-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="488bb-296">Trasy</span><span class="sxs-lookup"><span data-stu-id="488bb-296">Routes</span></span> ##

<span data-ttu-id="488bb-297">Trasy stát nejčastěji problematické, pokud konfigurujete virtuální síť s Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="488bb-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="488bb-298">Existují tři typy tras ve virtuální síti:</span><span class="sxs-lookup"><span data-stu-id="488bb-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="488bb-299">Systémové trasy</span><span class="sxs-lookup"><span data-stu-id="488bb-299">System routes</span></span>
-   <span data-ttu-id="488bb-300">Trasy protokolu BGP</span><span class="sxs-lookup"><span data-stu-id="488bb-300">BGP routes</span></span>
-   <span data-ttu-id="488bb-301">Trasy definované uživatelem (udr)</span><span class="sxs-lookup"><span data-stu-id="488bb-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="488bb-302">Trasy protokolu BGP přepsat systémové trasy.</span><span class="sxs-lookup"><span data-stu-id="488bb-302">BGP routes override system routes.</span></span> <span data-ttu-id="488bb-303">Udr přepsat trasy protokolu BGP.</span><span class="sxs-lookup"><span data-stu-id="488bb-303">UDRs override BGP routes.</span></span> <span data-ttu-id="488bb-304">Další informace o trasách v Azure virtuální sítě najdete v tématu [trasy definované uživatelem přehled][UDRs].</span><span class="sxs-lookup"><span data-stu-id="488bb-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="488bb-305">databáze Azure SQL Hello že App Service Environment hello používá systém hello toomanage má bránu firewall.</span><span class="sxs-lookup"><span data-stu-id="488bb-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="488bb-306">To vyžaduje toooriginate komunikace z hello veřejné VIP App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="488bb-307">Databáze SQL toohello připojení z hello App Service Environment bude odepřen, pokud jsou odesílány dolů hello připojení ExpressRoute a na jinou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="488bb-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="488bb-308">Pokud požadavky na správu tooincoming odpovědi odesílá dolů hello ExpressRoute, se liší od původního cíle hello hello zpáteční adresu.</span><span class="sxs-lookup"><span data-stu-id="488bb-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="488bb-309">Tato neshoda dělí komunikaci TCP hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="488bb-310">Pro vaše App Service Environment toowork při vaši virtuální síť je nakonfigurované ExpressRoute, toodo co nejjednodušší hello je:</span><span class="sxs-lookup"><span data-stu-id="488bb-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="488bb-311">Konfigurace ExpressRoute tooadvertise _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="488bb-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="488bb-312">Ve výchozím nastavení, je vynutit tunely všechny odchozí přenosy na místě.</span><span class="sxs-lookup"><span data-stu-id="488bb-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="488bb-313">Vytvořte UDR.</span><span class="sxs-lookup"><span data-stu-id="488bb-313">Create a UDR.</span></span> <span data-ttu-id="488bb-314">Použít toohello podsítě, která obsahuje App Service Environment hello s předponu adresy z _0.0.0.0/0_ a dalšího směrování typ _Internet_.</span><span class="sxs-lookup"><span data-stu-id="488bb-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="488bb-315">Pokud provedete tyto dvě změny, určené internetové komunikaci z podsítě hello App Service Environment není vynutit hello ExpressRoute a hello App Service Environment funguje.</span><span class="sxs-lookup"><span data-stu-id="488bb-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="488bb-316">Hello trasy definované v UDR musí být dost konkrétní tootake přednost přes všechny trasy inzerované konfigurace ExpressRoute hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="488bb-317">Hello předchozí příklad používá rozsah adres široký 0.0.0.0/0 hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="488bb-318">Se dá potenciálně omylem přepsat inzerování tras, které používají podrobnější rozsahy adres.</span><span class="sxs-lookup"><span data-stu-id="488bb-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="488bb-319">Konfigurace ExpressRoute, které mezi Inzerovat trasy z hello partnerský vztah veřejné cesta toohello partnerský vztah privátní cesty ASEs nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="488bb-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="488bb-320">Konfigurace ExpressRoute s veřejné partnerské vztahy nakonfigurované dostávat inzerování trasy od Microsoftu.</span><span class="sxs-lookup"><span data-stu-id="488bb-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="488bb-321">oznámení o inzerovaném programu Hello obsahovat velké sady rozsahů adres Microsoft Azure IP.</span><span class="sxs-lookup"><span data-stu-id="488bb-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="488bb-322">Pokud rozsahy adres hello ohlášené mezi v cestě partnerský vztah privátní hello, jsou všechny odchozí síťových paketů z podsítě hello App Service Environment pro zákazníka tunelových tooa vynutit místní síťové infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="488bb-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="488bb-323">ASEs aktuálně nepodporuje tento tok sítě.</span><span class="sxs-lookup"><span data-stu-id="488bb-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="488bb-324">Jedním z problémů toothis řešení je toostop mezi – reklamu trasy z hello partnerský vztah veřejné cesta toohello partnerský vztah privátní cesty.</span><span class="sxs-lookup"><span data-stu-id="488bb-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="488bb-325">toocreate UDR, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="488bb-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="488bb-326">Přejděte toohello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="488bb-326">Go toohello Azure portal.</span></span> <span data-ttu-id="488bb-327">Vyberte **sítě** > **směrovacích tabulek**.</span><span class="sxs-lookup"><span data-stu-id="488bb-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="488bb-328">Vytvořit novou tabulku směrování v hello stejné oblasti jako virtuální síť.</span><span class="sxs-lookup"><span data-stu-id="488bb-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="488bb-329">V rámci tabulky tras uživatelského rozhraní, vyberte **trasy** > **přidat**.</span><span class="sxs-lookup"><span data-stu-id="488bb-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="488bb-330">Sada hello **typ dalšího směrování** příliš**Internet** a hello **předpona adresy** příliš**0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="488bb-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="488bb-331">Vyberte **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="488bb-331">Select **Save**.</span></span>

    <span data-ttu-id="488bb-332">Zobrazí se něco podobného jako hello následující:</span><span class="sxs-lookup"><span data-stu-id="488bb-332">You then see something like hello following:</span></span>

    ![Funkční trasy][6]

5. <span data-ttu-id="488bb-334">Po vytvoření hello nové směrovací tabulku, přejděte toohello podsítě, která obsahuje vaše App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="488bb-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="488bb-335">Vyberte směrovací tabulku ze seznamu hello hello portálu.</span><span class="sxs-lookup"><span data-stu-id="488bb-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="488bb-336">Po uložení změn hello, měli byste vidět pak hello skupiny Nsg a trasy zaznamenán s podsíť.</span><span class="sxs-lookup"><span data-stu-id="488bb-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![Skupiny Nsg a trasy][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="488bb-338">Nasazení do virtuální sítě Azure, které jsou integrované s ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="488bb-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="488bb-339">toodeploy vaše App Service Environment do virtuální sítě, která je integrovaná s ExpressRoute, předem nakonfigurujte hello podsíť, kam chcete nasadit App Service Environment hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="488bb-340">Potom pomocí toodeploy šablony Resource Manageru ho.</span><span class="sxs-lookup"><span data-stu-id="488bb-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="488bb-341">toocreate App Service Environment ve virtuální síti která již má nakonfigurované ExpressRoute:</span><span class="sxs-lookup"><span data-stu-id="488bb-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="488bb-342">Vytvořte App Service Environment text podsíť toohost hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="488bb-343">V podsíti hello ale hello App Service Environment může být nic jiného.</span><span class="sxs-lookup"><span data-stu-id="488bb-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="488bb-344">Být jisti toochoose adresní prostor, který umožňuje růstem do budoucna.</span><span class="sxs-lookup"><span data-stu-id="488bb-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="488bb-345">Nelze změnit, tato nastavení později.</span><span class="sxs-lookup"><span data-stu-id="488bb-345">You can't change this setting later.</span></span> <span data-ttu-id="488bb-346">Doporučujeme velikost `/25` adresy 128.</span><span class="sxs-lookup"><span data-stu-id="488bb-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="488bb-347">Vytvoření udr (například směrovací tabulky), jak je popsáno výše a nastavte ho na podsíť hello.</span><span class="sxs-lookup"><span data-stu-id="488bb-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="488bb-348">Vytvořit App Service Environment hello pomocí šablony Resource Manageru, jak je popsáno v [vytvořit App Service Environment pomocí šablony Resource Manageru][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="488bb-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
