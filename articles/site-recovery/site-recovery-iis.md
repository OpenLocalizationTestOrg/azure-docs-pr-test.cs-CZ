---
title: "aaaReplicate vícevrstvé IIS na základě webové aplikace pomocí Azure Site Recovery | Microsoft Docs"
description: "Tento článek popisuje, jak tooreplicate služby IIS webová farma virtuálních počítačů pomocí Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="13ee6-103">Replikovat vícevrstvé aplikace webové služby IIS na základě pomocí Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="13ee6-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="13ee6-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="13ee6-104">Overview</span></span>


<span data-ttu-id="13ee6-105">Software, aplikace je modul hello firmy produktivity v organizaci.</span><span class="sxs-lookup"><span data-stu-id="13ee6-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="13ee6-106">Různé webových aplikací můžete v organizaci slouží k jiným účelům.</span><span class="sxs-lookup"><span data-stu-id="13ee6-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="13ee6-107">Některé z těchto jako mzdy zpracování, finanční aplikace a zákazníků, kterým čelí weby může být co nejvíce kritické pro organizaci.</span><span class="sxs-lookup"><span data-stu-id="13ee6-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="13ee6-108">Je důležité pro organizaci toohave hello je nahoru a spuštěná na všechny časy tooprevent ke snížení produktivity a více je nejdůležitější zabránit žádný obrázek značky toohello poškození hello organizace.</span><span class="sxs-lookup"><span data-stu-id="13ee6-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="13ee6-109">Kritické webové aplikace jsou obvykle nastavit jako vícevrstvé aplikace s hello webový server, databáze a aplikací na různých vrstev.</span><span class="sxs-lookup"><span data-stu-id="13ee6-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="13ee6-110">Kromě se šíří přes různých úrovní, hello aplikace může také používat více serverů v každé vrstvě tooload vyrovnávání hello přenosů.</span><span class="sxs-lookup"><span data-stu-id="13ee6-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="13ee6-111">Kromě toho může být hello mapování mezi různými úrovněmi a na webovém serveru hello založené na statických IP adres.</span><span class="sxs-lookup"><span data-stu-id="13ee6-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="13ee6-112">Na převzetí služeb při selhání některé z těchto mapování potřebovat toobe aktualizován, zejména, pokud máte více webů nakonfigurovaná na webovém serveru hello.</span><span class="sxs-lookup"><span data-stu-id="13ee6-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="13ee6-113">V případě webových aplikací pomocí protokolu SSL bude nutné vazby certifikátů toobe aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="13ee6-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="13ee6-114">Tradiční bez replikace na základě obnovení metody zahrnovat zálohování z různých souborů, konfigurace, nastavení registru, vazby, vlastní komponent (COM nebo rozhraní .NET), obsah a také certifikáty a se obnovované hello soubory pomocí sady ruční kroky.</span><span class="sxs-lookup"><span data-stu-id="13ee6-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="13ee6-115">Tyto postupy jsou jasně náročnější, chyba není škálovatelné a náchylné k chybám.</span><span class="sxs-lookup"><span data-stu-id="13ee6-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="13ee6-116">Je například možné snadno pro tooforget zálohování certifikátů a být ponecháno s žádná volba ale toobuy nové certifikáty pro hello server po převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="13ee6-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="13ee6-117">Řešení pro zotavení po havárii funkční, by měl Povolit modelování plány obnovení kolem hello výše architektury komplexní aplikace a také mít hello možnost tooadd přizpůsobit kroky toohandle aplikace mapování mezi různými úrovněmi proto poskytování jedním kliknutím zda snímek řešení v případě havárie úvodní tooa hello nižší RTO.</span><span class="sxs-lookup"><span data-stu-id="13ee6-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="13ee6-118">Tento článek popisuje, jak tooprotect službu IIS na základě, webové aplikace pomocí [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="13ee6-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="13ee6-119">Tento článek se zabývá osvědčené postupy pro replikaci tři vrstvy služby IIS na základě tooAzure webové aplikace, jak můžete provést postupu zotavení po havárii a jak můžete tooAzure aplikace hello převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="13ee6-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="13ee6-120">Požadavky</span><span class="sxs-lookup"><span data-stu-id="13ee6-120">Prerequisites</span></span>

<span data-ttu-id="13ee6-121">Než začnete, ujistěte se, že rozumíte hello následující:</span><span class="sxs-lookup"><span data-stu-id="13ee6-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="13ee6-122">Replikaci virtuálního počítače tooAzure</span><span class="sxs-lookup"><span data-stu-id="13ee6-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="13ee6-123">Jak příliš[návrh k síti pro obnovení](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="13ee6-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="13ee6-124">Provádění tooAzure testovací převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="13ee6-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="13ee6-125">Provádění tooAzure převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="13ee6-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="13ee6-126">Jak příliš[replikace řadiče domény](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="13ee6-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="13ee6-127">Jak příliš[replikaci systému SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="13ee6-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="13ee6-128">Vzory pro nasazení</span><span class="sxs-lookup"><span data-stu-id="13ee6-128">Deployment patterns</span></span>
<span data-ttu-id="13ee6-129">Webové aplikace služby IIS na základě obvykle zahrnuje jednu hello následující vzory nasazení:</span><span class="sxs-lookup"><span data-stu-id="13ee6-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="13ee6-130">** Nasazení vzor 1 ** služby IIS na základě webové farmy se Routing(ARR) požádat o aplikaci, Server služby IIS a Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="13ee6-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Vzor nasazení](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="13ee6-132">**Vzor nasazení 2** služby IIS na základě webové farmy se Routing(ARR) požádat o aplikaci, Server služby IIS, aplikační Server a Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="13ee6-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Vzor nasazení](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="13ee6-134">Podpora pro obnovení lokality</span><span class="sxs-lookup"><span data-stu-id="13ee6-134">Site Recovery support</span></span>

<span data-ttu-id="13ee6-135">Vytváření virtuálních počítačů VMware Tento článek se serverem služby IIS verze 7.5 na Windows Server 2012 R2 Enterprise za účelem hello byly použity.</span><span class="sxs-lookup"><span data-stu-id="13ee6-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="13ee6-136">Replikace obnovení lokality je nezávislá na aplikace, pokud hello doporučení tady jsou očekávané toohold také následujících scénářů a pro různé verze služby IIS.</span><span class="sxs-lookup"><span data-stu-id="13ee6-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="13ee6-137">Zdroj a cíl</span><span class="sxs-lookup"><span data-stu-id="13ee6-137">Source and target</span></span>

<span data-ttu-id="13ee6-138">**Scénář**</span><span class="sxs-lookup"><span data-stu-id="13ee6-138">**Scenario**</span></span> | <span data-ttu-id="13ee6-139">**tooa sekundární lokality**</span><span class="sxs-lookup"><span data-stu-id="13ee6-139">**tooa secondary site**</span></span> | <span data-ttu-id="13ee6-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="13ee6-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="13ee6-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="13ee6-141">**Hyper-V**</span></span> | <span data-ttu-id="13ee6-142">Ano</span><span class="sxs-lookup"><span data-stu-id="13ee6-142">Yes</span></span> | <span data-ttu-id="13ee6-143">Ano</span><span class="sxs-lookup"><span data-stu-id="13ee6-143">Yes</span></span>
<span data-ttu-id="13ee6-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="13ee6-144">**VMware**</span></span> | <span data-ttu-id="13ee6-145">Ano</span><span class="sxs-lookup"><span data-stu-id="13ee6-145">Yes</span></span> | <span data-ttu-id="13ee6-146">Ano</span><span class="sxs-lookup"><span data-stu-id="13ee6-146">Yes</span></span>
<span data-ttu-id="13ee6-147">**Fyzický server**</span><span class="sxs-lookup"><span data-stu-id="13ee6-147">**Physical server**</span></span> | <span data-ttu-id="13ee6-148">Ne</span><span class="sxs-lookup"><span data-stu-id="13ee6-148">No</span></span> | <span data-ttu-id="13ee6-149">Ano</span><span class="sxs-lookup"><span data-stu-id="13ee6-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="13ee6-150">Replikace virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="13ee6-150">Replicate virtual machines</span></span>

<span data-ttu-id="13ee6-151">Postupujte podle [v tomto návodu](site-recovery-vmware-to-azure.md) toostart replikace všech hello IIS webové farmy virtuálních počítačů tooAzure.</span><span class="sxs-lookup"><span data-stu-id="13ee6-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="13ee6-152">Pokud používáte statickou IP adresu můžete zadat hello IP, který chcete hello tootake virtuálního počítače v hello [ **cílová IP adresa** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) nastavení v nastavení výpočtů a sítě.</span><span class="sxs-lookup"><span data-stu-id="13ee6-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![Cílové IP](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="13ee6-154">Vytvoření plánu obnovení</span><span class="sxs-lookup"><span data-stu-id="13ee6-154">Creating a recovery plan</span></span>

<span data-ttu-id="13ee6-155">Plán obnovení umožňuje pořadí převzetí služeb při selhání hello v různých vrstvách vícevrstvé aplikace, proto zachování konzistence aplikace.</span><span class="sxs-lookup"><span data-stu-id="13ee6-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="13ee6-156">Postupujte podle následujících kroků hello při vytváření plánu obnovení vícevrstvých webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="13ee6-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="13ee6-157">[Další informace o vytváření plánu obnovení](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="13ee6-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="13ee6-158">Přidání skupin toofailover virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="13ee6-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="13ee6-159">Typické vícevrstvé aplikace webové služby IIS budou tvořeny a databázové vrstvy s virtuálními počítači, hello webová vrstva zřízená serveru IIS a aplikační vrstvě SQL.</span><span class="sxs-lookup"><span data-stu-id="13ee6-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="13ee6-160">Přidejte všechny tyto virtuální počítače toodifferent skupiny založené na vrstvě jako níže.</span><span class="sxs-lookup"><span data-stu-id="13ee6-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="13ee6-161">[Další informace o přizpůsobení plán obnovení](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="13ee6-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="13ee6-162">Vytvoření plánu obnovení.</span><span class="sxs-lookup"><span data-stu-id="13ee6-162">Create a recovery plan.</span></span> <span data-ttu-id="13ee6-163">Přidáte virtuální počítače vrstvy hello databáze v 1. skupina tooensure, že jsou vypnutí poslední a první zapínají.</span><span class="sxs-lookup"><span data-stu-id="13ee6-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="13ee6-164">Přidáte virtuální počítače vrstvy hello aplikace ve skupině 2 tak, aby se zapínají po byla zapínají hello databázové vrstvy.</span><span class="sxs-lookup"><span data-stu-id="13ee6-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="13ee6-165">Přidáte hello webové vrstvy virtuální počítače do 3. skupina tak, aby se zapínají po byla zapínají hello aplikační vrstvě.</span><span class="sxs-lookup"><span data-stu-id="13ee6-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="13ee6-166">Přidejte virtuální počítače Vyrovnávání zatížení do skupiny 4 tak, aby se zapínají po byla zapínají hello webovou vrstvu.</span><span class="sxs-lookup"><span data-stu-id="13ee6-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="13ee6-167">Přidávání skriptů toohello plánu obnovení</span><span class="sxs-lookup"><span data-stu-id="13ee6-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="13ee6-168">Může být nutné toodo některých operací na virtuálních počítačích Azure post převzetí služeb při selhání a testovací převzetí služeb při selhání toomake IIS webové farmy funkce hello správně.</span><span class="sxs-lookup"><span data-stu-id="13ee6-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="13ee6-169">Můžete automatizovat převzetí služeb při selhání operaci post hello jako aktualizaci položky DNS, změna vazby webu, změňte v připojovacím řetězci přidáním příslušných skriptů v plánu obnovení hello jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="13ee6-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="13ee6-170">[Další informace o přidání skript plánu obnovení](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="13ee6-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="13ee6-171">Aktualizace DNS.</span><span class="sxs-lookup"><span data-stu-id="13ee6-171">DNS Update</span></span>
<span data-ttu-id="13ee6-172">Pokud hello DNS je nakonfigurován pro dynamické aktualizace DNS, pak po spuštění virtuálních počítačů obvykle aktualizovat hello DNS s novou IP Adresou hello.</span><span class="sxs-lookup"><span data-stu-id="13ee6-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="13ee6-173">Pokud chcete tooadd explicitní krok tooupdate DNS s hello nové IP adresy virtuálních počítačů hello přidejte to [skriptu tooupdate IP ve službě DNS](https://aka.ms/asr-dns-update) jako akce post na skupiny plánu obnovení.</span><span class="sxs-lookup"><span data-stu-id="13ee6-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="13ee6-174">Připojovací řetězec v souboru web.config aplikace</span><span class="sxs-lookup"><span data-stu-id="13ee6-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="13ee6-175">Hello připojovací řetězec Určuje, že komunikuje hello databázi, která hello webu.</span><span class="sxs-lookup"><span data-stu-id="13ee6-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="13ee6-176">Pokud hello připojovací řetězec představuje název hello hello databáze virtuálního počítače, bude žádné další kroky potřebné post převzetí služeb při selhání a aplikace hello se nebude moct komunikovat tooautomatically toohello DB.</span><span class="sxs-lookup"><span data-stu-id="13ee6-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="13ee6-177">Navíc pokud se uchovávají hello IP adresu pro virtuální počítač hello databáze, nebude potřeba tooupdate hello připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="13ee6-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="13ee6-178">Pokud připojovací řetězec hello odkazuje toohello databázového virtuálního počítače pomocí IP adresy, je nutné aktualizovat toobe post převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="13ee6-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="13ee6-179">Například</span><span class="sxs-lookup"><span data-stu-id="13ee6-179">E.g.</span></span> <span data-ttu-id="13ee6-180">Hello níže připojovací řetězec body toohello DB s IP Adresou 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="13ee6-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="13ee6-181">Hello připojovací řetězec v webovou vrstvu můžete aktualizovat přidáním [skript aktualizace připojení služby IIS](https://aka.ms/asr-update-webtier-script-classic) po 3. skupina v plánu obnovení hello.</span><span class="sxs-lookup"><span data-stu-id="13ee6-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="13ee6-182">Vazby webu pro aplikaci hello</span><span class="sxs-lookup"><span data-stu-id="13ee6-182">Site bindings for hello application</span></span>
<span data-ttu-id="13ee6-183">Každé lokalitě se skládá z vazby informace, které zahrnují hello typ vazby, hello IP adresu, na které hello naslouchá server služby IIS toohello požadavky na lokalitu hello, číslo portu hello a názvy hostitelů hello hello lokality.</span><span class="sxs-lookup"><span data-stu-id="13ee6-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="13ee6-184">V době hello převzetí služeb při selhání může být třeba tyto vazby toobe aktualizováni, pokud dojde ke změně hello IP adresu s nimi spojených.</span><span class="sxs-lookup"><span data-stu-id="13ee6-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="13ee6-185">Pokud jste označili 'všechny nepřiřazené' pro vazbu webu hello jako v následujícím příkladu hello, nebude nutné tooupdate post převzetí této vazby.</span><span class="sxs-lookup"><span data-stu-id="13ee6-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="13ee6-186">Navíc pokud hello IP adresy přidružené k lokalitě nedojde ke změně po převzetí služeb při selhání, vazbu webu hello nemusí být aktualizována (uchování hello IP adresu závisí na architekturu hello sítě a podsítě přiřazené toohello primárními a obnovovacími weby a proto může nebo nemusí být vhodný pro vaši organizaci.)</span><span class="sxs-lookup"><span data-stu-id="13ee6-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Vazba SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="13ee6-188">Pokud máte přidružené hello IP adresu s lokalitou, budete potřebovat tooupdate všechny vazby webu s hello novou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="13ee6-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="13ee6-189">Můžete přidat [webové vrstvy aktualizační skript](https://aka.ms/asr-web-tier-update-runbook-classic) po 3. skupina v vazby webu hello toochange plánu obnovení.</span><span class="sxs-lookup"><span data-stu-id="13ee6-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="13ee6-190">Aktualizujte IP adresa služby Vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="13ee6-190">Update load balancer IP address</span></span>
<span data-ttu-id="13ee6-191">Pokud máte virtuální počítač směrování žádostí na aplikace, přidejte [směrování žádostí na aplikace služby IIS převzetí služeb při selhání skriptu](https://aka.ms/asr-iis-arrtier-failover-script-classic) po 4 skupiny tooupdate hello IP adresu.</span><span class="sxs-lookup"><span data-stu-id="13ee6-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="13ee6-192">Hello vazbu certifikátu SSL pro připojení https</span><span class="sxs-lookup"><span data-stu-id="13ee6-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="13ee6-193">Weby může mít přidružený certifikát SSL, který pomáhá zajistit zabezpečenou komunikaci mezi hello webový server a prohlížeče hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="13ee6-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="13ee6-194">Pokud má web hello připojení https a přidružené https toohello vazby lokality IP adresu serveru služby IIS hello s vazbou certifikátu SSL, bude nutné novou vazbu webu toobe přidat pro cert hello hello post IP hello IIS virtuálního počítače převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="13ee6-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="13ee6-195">certifikát SSL Hello může být vydaný pro-</span><span class="sxs-lookup"><span data-stu-id="13ee6-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="13ee6-196">(a) hello plně kvalifikovaný název domény webu hello</span><span class="sxs-lookup"><span data-stu-id="13ee6-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="13ee6-197">b) název hello serveru hello</span><span class="sxs-lookup"><span data-stu-id="13ee6-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="13ee6-198">c) certifikát se zástupným znakem pro název domény hello</span><span class="sxs-lookup"><span data-stu-id="13ee6-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="13ee6-199">d) IP adresu – Pokud je hello certifikát SSL vydaný pro hello IP hello serveru služby IIS, jiné toobe musí certifikát SSL vydaný pro hello hello IP adresu serveru služby IIS na hello Azure site a další vazby SSL pro tento certifikát bude nutné vytvořit toobe.</span><span class="sxs-lookup"><span data-stu-id="13ee6-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="13ee6-200">Proto je vhodné toonot použijte certifikát SSL vydaný pro IP.</span><span class="sxs-lookup"><span data-stu-id="13ee6-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="13ee6-201">Toto je méně používaných možnost a bude brzy zastaralá podle nové změny fórum certifikační Autority nebo prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="13ee6-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="13ee6-202">Aktualizace hello závislosti mezi hello webové a aplikační vrstvě hello</span><span class="sxs-lookup"><span data-stu-id="13ee6-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="13ee6-203">Pokud máte konkrétní závislost aplikace na základě IP adresy hello hello virtuálních počítačů, musíte tooupdate převzetí této závislosti post.</span><span class="sxs-lookup"><span data-stu-id="13ee6-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="13ee6-204">Provádění testovací převzetí služeb</span><span class="sxs-lookup"><span data-stu-id="13ee6-204">Doing a test failover</span></span>
<span data-ttu-id="13ee6-205">Postupujte podle [v tomto návodu](site-recovery-test-failover-to-azure.md) toodo testovací převzetí služeb.</span><span class="sxs-lookup"><span data-stu-id="13ee6-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="13ee6-206">Přejděte tooAzure portál a vyberte svůj trezor služeb zotavení.</span><span class="sxs-lookup"><span data-stu-id="13ee6-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="13ee6-207">Klikněte na hello plán obnovení pro webové farmy IIS vytvořit.</span><span class="sxs-lookup"><span data-stu-id="13ee6-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="13ee6-208">Klikněte na "Testovací převzetí služeb".</span><span class="sxs-lookup"><span data-stu-id="13ee6-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="13ee6-209">Vyberte bod obnovení a virtuální síť Azure toostart hello testovací převzetí služeb při selhání procesu.</span><span class="sxs-lookup"><span data-stu-id="13ee6-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="13ee6-210">Jakmile sekundární prostředí hello zapnutý, můžete provést vaše ověření.</span><span class="sxs-lookup"><span data-stu-id="13ee6-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="13ee6-211">Po dokončení ověření hello se můžete vybrat ověření dokončení a hello testovací převzetí služeb při selhání prostředí bude vyčištěna.</span><span class="sxs-lookup"><span data-stu-id="13ee6-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="13ee6-212">Převzetím služeb</span><span class="sxs-lookup"><span data-stu-id="13ee6-212">Doing a failover</span></span>
<span data-ttu-id="13ee6-213">Postupujte podle [v tomto návodu](site-recovery-failover.md) při dělají převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="13ee6-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="13ee6-214">Přejděte tooAzure portál a vyberte svůj trezor služeb zotavení.</span><span class="sxs-lookup"><span data-stu-id="13ee6-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="13ee6-215">Klikněte na hello plán obnovení pro webové farmy IIS vytvořit.</span><span class="sxs-lookup"><span data-stu-id="13ee6-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="13ee6-216">Klikněte na 'Převzetí služeb při selhání'.</span><span class="sxs-lookup"><span data-stu-id="13ee6-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="13ee6-217">Vyberte proces obnovení bodu toostart hello převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="13ee6-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="13ee6-218">Další kroky</span><span class="sxs-lookup"><span data-stu-id="13ee6-218">Next steps</span></span>
<span data-ttu-id="13ee6-219">Další informace o [replikovat jiné aplikace](site-recovery-workload.md) pomocí Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="13ee6-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
