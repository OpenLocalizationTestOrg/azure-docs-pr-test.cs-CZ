---
title: "Tok autorizačního kódu – Azure AD B2C | Microsoft Docs"
description: "Naučte se vytvářet webové aplikace pomocí Azure AD B2C a OpenID Connect ověřovací protokol."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: mtillman
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 99a292c6be66016264e528525a5920667207b605
ms.sourcegitcommit: 694e40a193980dea1e2f945471071f11030d5641
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/29/2018
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="26eb7-103">Azure Active Directory B2C: Toku kódu autorizace OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="26eb7-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="26eb7-104">Udělení autorizačního kódu OAuth 2.0 v aplikace nainstalované v zařízení můžete použít k získání přístupu k chráněným prostředkům, jako jsou webová rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="26eb7-104">You can use the OAuth 2.0 authorization code grant in apps installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="26eb7-105">Pomocí Azure Active Directory B2C (Azure AD B2C) provádění OAuth 2.0, můžete přidat registrace, přihlašování a jiných správu identity úkolů mobilních a desktopových aplikací.</span><span class="sxs-lookup"><span data-stu-id="26eb7-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks to your mobile and desktop apps.</span></span> <span data-ttu-id="26eb7-106">Tento článek je nezávislé na jazyku.</span><span class="sxs-lookup"><span data-stu-id="26eb7-106">This article is language-independent.</span></span> <span data-ttu-id="26eb7-107">V následujícím článku jsme popisují, jak odesílat a přijímat zprávy HTTP bez použití žádné knihovny open-source.</span><span class="sxs-lookup"><span data-stu-id="26eb7-107">In the article, we describe how to send and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link to libraries -->

<span data-ttu-id="26eb7-108">Toku kódu autorizace OAuth 2.0 je popsaná v [části 4.1 specifikace OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="26eb7-108">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="26eb7-109">Můžete ji použít k ověřování a autorizaci většinu typů aplikací, včetně [webové aplikace](active-directory-b2c-apps.md#web-apps) a [nativně nainstalované aplikace](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="26eb7-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="26eb7-110">Můžete použít toku kódu autorizace OAuth 2.0 bezpečně získat *přístup tokeny* pro vaše aplikace, které lze použít pro přístup k prostředkům, které jsou zabezpečeny [serveru ověřování](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="26eb7-110">You can use the OAuth 2.0 authorization code flow to securely acquire *access tokens* for your apps, which can be used to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="26eb7-111">Tento článek se týká **veřejné klienti** toku kódu autorizace OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="26eb7-111">This article focuses on the **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="26eb7-112">Veřejné klienta je klientská aplikace, která nemůže být důvěryhodný bezpečně zachovat integritu tajný hesla.</span><span class="sxs-lookup"><span data-stu-id="26eb7-112">A public client is any client application that cannot be trusted to securely maintain the integrity of a secret password.</span></span> <span data-ttu-id="26eb7-113">To zahrnuje mobilní aplikace, aplikace klasické pracovní plochy a v podstatě jakékoli aplikace, která běží na zařízení a získat tokeny přístupu je potřeba.</span><span class="sxs-lookup"><span data-stu-id="26eb7-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs to get access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="26eb7-114">Chcete-li přidat Správa identit pro webové aplikace pomocí Azure AD B2C, použijte [OpenID Connect](active-directory-b2c-reference-oidc.md) místo OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="26eb7-114">To add identity management to a web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="26eb7-115">Azure AD B2C rozšiřuje standardní, které OAuth 2.0 toků více než jednoduché ověřování a autorizace.</span><span class="sxs-lookup"><span data-stu-id="26eb7-115">Azure AD B2C extends the standard OAuth 2.0 flows to do more than simple authentication and authorization.</span></span> <span data-ttu-id="26eb7-116">Zavádí [zásad parametr](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="26eb7-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="26eb7-117">Pomocí předdefinovaných zásad vám pomůže OAuth 2.0 přidejte koncových uživatelů na aplikaci, například registrace, přihlašování a správy profilů.</span><span class="sxs-lookup"><span data-stu-id="26eb7-117">With built-in policies, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="26eb7-118">V tomto článku jsme ukazují, jak každý z těchto prostředí implementovat v nativních aplikací pomocí OAuth 2.0 a zásady.</span><span class="sxs-lookup"><span data-stu-id="26eb7-118">In this article, we show you how to use OAuth 2.0 and policies to implement each of these experiences in your native applications.</span></span> <span data-ttu-id="26eb7-119">Můžeme také ukazují, jak získat tokeny přístupu pro přístup k webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="26eb7-119">We also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="26eb7-120">V žádosti o příklad HTTP v tomto článku používáme naše ukázka adresáře Azure AD B2C, **fabrikamb2c.onmicrosoft.com**. Používáme se naše ukázková aplikace a zásady.</span><span class="sxs-lookup"><span data-stu-id="26eb7-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="26eb7-121">Požadavky můžete také zkusit sami pomocí těchto hodnot, nebo je můžete nahradit vlastními hodnotami.</span><span class="sxs-lookup"><span data-stu-id="26eb7-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="26eb7-122">Zjistěte, jak [získat vlastní adresář Azure AD B2C, aplikace a zásady](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="26eb7-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="26eb7-123">1. Získat autorizační kód</span><span class="sxs-lookup"><span data-stu-id="26eb7-123">1. Get an authorization code</span></span>
<span data-ttu-id="26eb7-124">Tok autorizačního kódu začíná klienta odkazovat uživatele `/authorize` koncový bod.</span><span class="sxs-lookup"><span data-stu-id="26eb7-124">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="26eb7-125">Toto je část interaktivní tok, kde uživatel provede akci.</span><span class="sxs-lookup"><span data-stu-id="26eb7-125">This is the interactive part of the flow, where the user takes action.</span></span> <span data-ttu-id="26eb7-126">V této žádosti o označuje klienta v `scope` parametr oprávnění, která je nutné získat od uživatele.</span><span class="sxs-lookup"><span data-stu-id="26eb7-126">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="26eb7-127">V `p` parametr, znamená to zásady provést.</span><span class="sxs-lookup"><span data-stu-id="26eb7-127">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="26eb7-128">Následující tři příklady (pomocí konců řádků čitelnější) každou pomocí různých zásad.</span><span class="sxs-lookup"><span data-stu-id="26eb7-128">The following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="26eb7-129">Použít zásadu přihlášení</span><span class="sxs-lookup"><span data-stu-id="26eb7-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="26eb7-130">Použít zásadu registrace</span><span class="sxs-lookup"><span data-stu-id="26eb7-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="26eb7-131">Pomocí zásady úpravy profilu</span><span class="sxs-lookup"><span data-stu-id="26eb7-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="26eb7-132">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-132">Parameter</span></span> | <span data-ttu-id="26eb7-133">Povinné?</span><span class="sxs-lookup"><span data-stu-id="26eb7-133">Required?</span></span> | <span data-ttu-id="26eb7-134">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="26eb7-135">client_id</span><span class="sxs-lookup"><span data-stu-id="26eb7-135">client_id</span></span> |<span data-ttu-id="26eb7-136">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-136">Required</span></span> |<span data-ttu-id="26eb7-137">ID aplikace přiřazené vaší aplikaci v [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="26eb7-137">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="26eb7-138">response_type</span><span class="sxs-lookup"><span data-stu-id="26eb7-138">response_type</span></span> |<span data-ttu-id="26eb7-139">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-139">Required</span></span> |<span data-ttu-id="26eb7-140">Typ odpovědi, která musí zahrnovat `code` pro tok autorizačního kódu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-140">The response type, which must include `code` for the authorization code flow.</span></span> |
| <span data-ttu-id="26eb7-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="26eb7-141">redirect_uri</span></span> |<span data-ttu-id="26eb7-142">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-142">Required</span></span> |<span data-ttu-id="26eb7-143">Identifikátor URI přesměrování vaší aplikace, kde odesílání a přijímání aplikace odpovědi ověřování.</span><span class="sxs-lookup"><span data-stu-id="26eb7-143">The redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="26eb7-144">Ho musí přesně shodovat s jedním přesměrování identifikátory URI, který je zaregistrovaný na portálu, s tím rozdílem, že musí být kódovaná adresou URL.</span><span class="sxs-lookup"><span data-stu-id="26eb7-144">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="26eb7-145">Obor</span><span class="sxs-lookup"><span data-stu-id="26eb7-145">scope</span></span> |<span data-ttu-id="26eb7-146">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-146">Required</span></span> |<span data-ttu-id="26eb7-147">Seznam obory oddělených mezerami.</span><span class="sxs-lookup"><span data-stu-id="26eb7-147">A space-separated list of scopes.</span></span> <span data-ttu-id="26eb7-148">Hodnota jeden obor označuje do Azure Active Directory (Azure AD) i oprávnění, která se vyžadují.</span><span class="sxs-lookup"><span data-stu-id="26eb7-148">A single scope value indicates to Azure Active Directory (Azure AD) both of the permissions that are being requested.</span></span> <span data-ttu-id="26eb7-149">Pomocí ID klienta podle oboru ukazuje, že vaše aplikace vyžaduje přístupový token, který můžete použít u službou nebo webové rozhraní API, reprezentována stejné ID klienta.</span><span class="sxs-lookup"><span data-stu-id="26eb7-149">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="26eb7-150">`offline_access` Oboru ukazuje, že vaše aplikace vyžaduje obnovovací token pro dlouhodobé přístup k prostředkům.</span><span class="sxs-lookup"><span data-stu-id="26eb7-150">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span> <span data-ttu-id="26eb7-151">Můžete taky použít `openid` oboru požadavku na ID token z Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="26eb7-151">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="26eb7-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="26eb7-152">response_mode</span></span> |<span data-ttu-id="26eb7-153">Doporučené</span><span class="sxs-lookup"><span data-stu-id="26eb7-153">Recommended</span></span> |<span data-ttu-id="26eb7-154">Metoda, která můžete pomocí odesílat výsledné autorizační kód zpět do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="26eb7-154">The method that you use to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="26eb7-155">Může být `query`, `form_post`, nebo `fragment`.</span><span class="sxs-lookup"><span data-stu-id="26eb7-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="26eb7-156">state</span><span class="sxs-lookup"><span data-stu-id="26eb7-156">state</span></span> |<span data-ttu-id="26eb7-157">Doporučené</span><span class="sxs-lookup"><span data-stu-id="26eb7-157">Recommended</span></span> |<span data-ttu-id="26eb7-158">Hodnota součástí požadavek, který je vrácený v odpovědi tokenu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-158">A value included in the request that is returned in the token response.</span></span> <span data-ttu-id="26eb7-159">Může být řetězec o délce veškerý obsah, který chcete použít.</span><span class="sxs-lookup"><span data-stu-id="26eb7-159">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="26eb7-160">Obvykle náhodně generované jedinečné hodnoty se používá, aby se zabránilo útokům padělání požadavku posílaného mezi weby.</span><span class="sxs-lookup"><span data-stu-id="26eb7-160">Usually, a randomly generated unique value is  used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="26eb7-161">Stav se také používá ke kódování informace o stavu uživatele v aplikaci, než požadavek na ověření došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="26eb7-161">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="26eb7-162">Například stránka, kterou uživatel byl na nebo zásad, který byl vykonáván.</span><span class="sxs-lookup"><span data-stu-id="26eb7-162">For example, the page the user was on, or the policy that was being executed.</span></span> |
| <span data-ttu-id="26eb7-163">p</span><span class="sxs-lookup"><span data-stu-id="26eb7-163">p</span></span> |<span data-ttu-id="26eb7-164">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-164">Required</span></span> |<span data-ttu-id="26eb7-165">Zásady, které se spustí.</span><span class="sxs-lookup"><span data-stu-id="26eb7-165">The policy that is executed.</span></span> <span data-ttu-id="26eb7-166">Je název zásady, který je vytvořen v adresáři Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="26eb7-166">It's the name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="26eb7-167">Hodnota název zásad by měl začínat obráceným **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="26eb7-167">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="26eb7-168">Další informace o zásadách najdete v tématu [integrovaných zásad Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="26eb7-168">To learn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="26eb7-169">řádku</span><span class="sxs-lookup"><span data-stu-id="26eb7-169">prompt</span></span> |<span data-ttu-id="26eb7-170">Nepovinné</span><span class="sxs-lookup"><span data-stu-id="26eb7-170">Optional</span></span> |<span data-ttu-id="26eb7-171">Typ interakci s uživatelem, který je vyžadován.</span><span class="sxs-lookup"><span data-stu-id="26eb7-171">The type of user interaction that is required.</span></span> <span data-ttu-id="26eb7-172">V současné době je jedinou platnou hodnotou `login`, který vynutí uživatele k zadání přihlašovacích údajů tohoto požadavku.</span><span class="sxs-lookup"><span data-stu-id="26eb7-172">Currently, the only valid value is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="26eb7-173">Jednotné přihlašování se neprojeví.</span><span class="sxs-lookup"><span data-stu-id="26eb7-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="26eb7-174">V tomto okamžiku uživatel požádán o dokončení pracovního postupu nastavení zásad.</span><span class="sxs-lookup"><span data-stu-id="26eb7-174">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="26eb7-175">To může zahrnovat uživatele zadáním uživatelského jména a hesla, přihlášení pomocí sociálních identitu, přihlašování k adresáři, nebo jakékoli jiné číslo kroky.</span><span class="sxs-lookup"><span data-stu-id="26eb7-175">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="26eb7-176">Uživatel akce závisí na tom, jak je definované zásady.</span><span class="sxs-lookup"><span data-stu-id="26eb7-176">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="26eb7-177">Poté, co uživatel vykoná zásadu, Azure AD vrátí odpověď do vaší aplikace na hodnotu jste použili pro `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="26eb7-177">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="26eb7-178">Používá metody popsané v `response_mode` parametr.</span><span class="sxs-lookup"><span data-stu-id="26eb7-178">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="26eb7-179">Odpověď je přesně stejný pro všechny uživatele akce scénářů, nezávisle na zásadu, která byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="26eb7-179">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

<span data-ttu-id="26eb7-180">Úspěšná odpověď, který používá `response_mode=query` vypadá podobně jako tento:</span><span class="sxs-lookup"><span data-stu-id="26eb7-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| <span data-ttu-id="26eb7-181">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-181">Parameter</span></span> | <span data-ttu-id="26eb7-182">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="26eb7-183">kód</span><span class="sxs-lookup"><span data-stu-id="26eb7-183">code</span></span> |<span data-ttu-id="26eb7-184">Autorizační kód, který požadované aplikace.</span><span class="sxs-lookup"><span data-stu-id="26eb7-184">The authorization code that the app requested.</span></span> <span data-ttu-id="26eb7-185">Aplikace můžete autorizační kód vyžádat token přístupu pro cílový prostředek.</span><span class="sxs-lookup"><span data-stu-id="26eb7-185">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="26eb7-186">Kódy ověřování jsou velmi krátkodobou.</span><span class="sxs-lookup"><span data-stu-id="26eb7-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="26eb7-187">Obvykle se jejich platnost vyprší po přibližně 10 minut.</span><span class="sxs-lookup"><span data-stu-id="26eb7-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="26eb7-188">state</span><span class="sxs-lookup"><span data-stu-id="26eb7-188">state</span></span> |<span data-ttu-id="26eb7-189">Viz úplný popis v tabulce v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="26eb7-189">See the full description in the table in the preceding section.</span></span> <span data-ttu-id="26eb7-190">Pokud `state` parametr je zahrnuta v žádosti o stejnou hodnotu by se měla objevit v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="26eb7-190">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="26eb7-191">Aplikace by měla ověřte, zda `state` hodnoty v požadavku a odpovědi jsou identické.</span><span class="sxs-lookup"><span data-stu-id="26eb7-191">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="26eb7-192">Chybové odpovědi můžete také odešle do identifikátor URI přesměrování tak, aby aplikace můžete správně zpracovat:</span><span class="sxs-lookup"><span data-stu-id="26eb7-192">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="26eb7-193">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-193">Parameter</span></span> | <span data-ttu-id="26eb7-194">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="26eb7-195">error</span><span class="sxs-lookup"><span data-stu-id="26eb7-195">error</span></span> |<span data-ttu-id="26eb7-196">Řetězec kódu chyby, můžete použít ke klasifikaci typy chyb, ke kterým dochází.</span><span class="sxs-lookup"><span data-stu-id="26eb7-196">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="26eb7-197">Můžete také použít řetězec reagování na chyby.</span><span class="sxs-lookup"><span data-stu-id="26eb7-197">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="26eb7-198">error_description</span><span class="sxs-lookup"><span data-stu-id="26eb7-198">error_description</span></span> |<span data-ttu-id="26eb7-199">Konkrétní chybová zpráva, která vám může pomoct určit hlavní příčinu chyby ověřování.</span><span class="sxs-lookup"><span data-stu-id="26eb7-199">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="26eb7-200">state</span><span class="sxs-lookup"><span data-stu-id="26eb7-200">state</span></span> |<span data-ttu-id="26eb7-201">Viz úplný popis v předchozí tabulce.</span><span class="sxs-lookup"><span data-stu-id="26eb7-201">See the full description in the preceding table.</span></span> <span data-ttu-id="26eb7-202">Pokud `state` parametr je zahrnuta v žádosti o stejnou hodnotu by se měla objevit v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="26eb7-202">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="26eb7-203">Aplikace by měla ověřte, zda `state` hodnoty v požadavku a odpovědi jsou identické.</span><span class="sxs-lookup"><span data-stu-id="26eb7-203">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="26eb7-204">2. Získání tokenu</span><span class="sxs-lookup"><span data-stu-id="26eb7-204">2. Get a token</span></span>
<span data-ttu-id="26eb7-205">Teď, když jste získali autorizační kód, uplatněte `code` pro token pro určený prostředek odesláním požadavku POST k `/token` koncový bod.</span><span class="sxs-lookup"><span data-stu-id="26eb7-205">Now that you've acquired an authorization code, you can redeem the `code` for a token to the intended resource by sending a POST request to the `/token` endpoint.</span></span> <span data-ttu-id="26eb7-206">V Azure AD B2C je pouze prostředek, který můžete požádat o token pro vaše aplikace vlastní back endové webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="26eb7-206">In Azure AD B2C, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="26eb7-207">Je použít ID klienta aplikace jako obor názvů, který se používá pro požadování tokenu sami sobě:</span><span class="sxs-lookup"><span data-stu-id="26eb7-207">The convention that's used for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="26eb7-208">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-208">Parameter</span></span> | <span data-ttu-id="26eb7-209">Povinné?</span><span class="sxs-lookup"><span data-stu-id="26eb7-209">Required?</span></span> | <span data-ttu-id="26eb7-210">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="26eb7-211">p</span><span class="sxs-lookup"><span data-stu-id="26eb7-211">p</span></span> |<span data-ttu-id="26eb7-212">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-212">Required</span></span> |<span data-ttu-id="26eb7-213">Zásada, která byla použita k získání autorizační kód.</span><span class="sxs-lookup"><span data-stu-id="26eb7-213">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="26eb7-214">V této žádosti nelze použít jinou zásadu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="26eb7-215">Všimněte si, že přidáte tento parametr *řetězec dotazu*, není v textu POST.</span><span class="sxs-lookup"><span data-stu-id="26eb7-215">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="26eb7-216">client_id</span><span class="sxs-lookup"><span data-stu-id="26eb7-216">client_id</span></span> |<span data-ttu-id="26eb7-217">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-217">Required</span></span> |<span data-ttu-id="26eb7-218">ID aplikace přiřazené vaší aplikaci v [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="26eb7-218">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="26eb7-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="26eb7-219">grant_type</span></span> |<span data-ttu-id="26eb7-220">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-220">Required</span></span> |<span data-ttu-id="26eb7-221">Typ udělení.</span><span class="sxs-lookup"><span data-stu-id="26eb7-221">The type of grant.</span></span> <span data-ttu-id="26eb7-222">Tok autorizačního kódu, musí být typ udělení `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="26eb7-222">For the authorization code flow, the grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="26eb7-223">Obor</span><span class="sxs-lookup"><span data-stu-id="26eb7-223">scope</span></span> |<span data-ttu-id="26eb7-224">Doporučené</span><span class="sxs-lookup"><span data-stu-id="26eb7-224">Recommended</span></span> |<span data-ttu-id="26eb7-225">Seznam obory oddělených mezerami.</span><span class="sxs-lookup"><span data-stu-id="26eb7-225">A space-separated list of scopes.</span></span> <span data-ttu-id="26eb7-226">Hodnota jeden obor označuje do služby Azure AD i oprávnění, která se vyžadují.</span><span class="sxs-lookup"><span data-stu-id="26eb7-226">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="26eb7-227">Pomocí ID klienta podle oboru ukazuje, že vaše aplikace vyžaduje přístupový token, který můžete použít u službou nebo webové rozhraní API, reprezentována stejné ID klienta.</span><span class="sxs-lookup"><span data-stu-id="26eb7-227">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="26eb7-228">`offline_access` Oboru ukazuje, že vaše aplikace vyžaduje obnovovací token pro dlouhodobé přístup k prostředkům.</span><span class="sxs-lookup"><span data-stu-id="26eb7-228">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="26eb7-229">Můžete taky použít `openid` oboru požadavku na ID token z Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="26eb7-229">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="26eb7-230">kód</span><span class="sxs-lookup"><span data-stu-id="26eb7-230">code</span></span> |<span data-ttu-id="26eb7-231">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-231">Required</span></span> |<span data-ttu-id="26eb7-232">Autorizační kód, který jste získali v prvním větev toku.</span><span class="sxs-lookup"><span data-stu-id="26eb7-232">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="26eb7-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="26eb7-233">redirect_uri</span></span> |<span data-ttu-id="26eb7-234">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-234">Required</span></span> |<span data-ttu-id="26eb7-235">Identifikátor URI přesměrování aplikace, kterou jste dostali autorizační kód.</span><span class="sxs-lookup"><span data-stu-id="26eb7-235">The redirect URI of the application where you received the authorization code.</span></span> |

<span data-ttu-id="26eb7-236">Úspěšné odpovědi tokenu vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="26eb7-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="26eb7-237">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-237">Parameter</span></span> | <span data-ttu-id="26eb7-238">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="26eb7-239">not_before</span><span class="sxs-lookup"><span data-stu-id="26eb7-239">not_before</span></span> |<span data-ttu-id="26eb7-240">Čas, kdy je token považován za platný v čase epoch.</span><span class="sxs-lookup"><span data-stu-id="26eb7-240">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="26eb7-241">token_type</span><span class="sxs-lookup"><span data-stu-id="26eb7-241">token_type</span></span> |<span data-ttu-id="26eb7-242">Typ tokenu hodnota.</span><span class="sxs-lookup"><span data-stu-id="26eb7-242">The token type value.</span></span> <span data-ttu-id="26eb7-243">Pouze typ, který podporuje Azure AD je nosiče.</span><span class="sxs-lookup"><span data-stu-id="26eb7-243">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="26eb7-244">access_token</span><span class="sxs-lookup"><span data-stu-id="26eb7-244">access_token</span></span> |<span data-ttu-id="26eb7-245">Podepsaný JSON Web Token (JWT) požadovaná.</span><span class="sxs-lookup"><span data-stu-id="26eb7-245">The signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="26eb7-246">Obor</span><span class="sxs-lookup"><span data-stu-id="26eb7-246">scope</span></span> |<span data-ttu-id="26eb7-247">Obory, které token je platný pro.</span><span class="sxs-lookup"><span data-stu-id="26eb7-247">The scopes that the token is valid for.</span></span> <span data-ttu-id="26eb7-248">Také můžete pomocí oborů tokeny mezipaměti pro pozdější použití.</span><span class="sxs-lookup"><span data-stu-id="26eb7-248">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="26eb7-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="26eb7-249">expires_in</span></span> |<span data-ttu-id="26eb7-250">Časový interval, který je token platný (v sekundách).</span><span class="sxs-lookup"><span data-stu-id="26eb7-250">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="26eb7-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="26eb7-251">refresh_token</span></span> |<span data-ttu-id="26eb7-252">Aktualizace tokenu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="26eb7-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="26eb7-253">Aplikace můžete používat tento token získat další tokeny po vypršení platnosti aktuálního tokenu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-253">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="26eb7-254">Tokeny obnovení je dlouhodobé.</span><span class="sxs-lookup"><span data-stu-id="26eb7-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="26eb7-255">Můžete je používat k přístupu k prostředkům uchovávány dlouhou dobu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-255">You can use them to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="26eb7-256">Další informace najdete v tématu [odkaz tokenu Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="26eb7-256">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="26eb7-257">Chybové odpovědi bude vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="26eb7-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="26eb7-258">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-258">Parameter</span></span> | <span data-ttu-id="26eb7-259">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="26eb7-260">error</span><span class="sxs-lookup"><span data-stu-id="26eb7-260">error</span></span> |<span data-ttu-id="26eb7-261">Řetězec kódu chyby, můžete použít ke klasifikaci typy chyb, ke kterým dochází.</span><span class="sxs-lookup"><span data-stu-id="26eb7-261">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="26eb7-262">Můžete také použít řetězec reagování na chyby.</span><span class="sxs-lookup"><span data-stu-id="26eb7-262">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="26eb7-263">error_description</span><span class="sxs-lookup"><span data-stu-id="26eb7-263">error_description</span></span> |<span data-ttu-id="26eb7-264">Konkrétní chybová zpráva, která vám může pomoct určit hlavní příčinu chyby ověřování.</span><span class="sxs-lookup"><span data-stu-id="26eb7-264">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="3-use-the-token"></a><span data-ttu-id="26eb7-265">3. Použití tokenu</span><span class="sxs-lookup"><span data-stu-id="26eb7-265">3. Use the token</span></span>
<span data-ttu-id="26eb7-266">Teď, když jste úspěšně získat přístupový token, můžete použít token v požadavcích na back endové webové rozhraní API zahrnutím v `Authorization` hlavičky:</span><span class="sxs-lookup"><span data-stu-id="26eb7-266">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a><span data-ttu-id="26eb7-267">4. Aktualizovat token</span><span class="sxs-lookup"><span data-stu-id="26eb7-267">4. Refresh the token</span></span>
<span data-ttu-id="26eb7-268">Přístupové tokeny a ID tokeny jsou krátkodobou.</span><span class="sxs-lookup"><span data-stu-id="26eb7-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="26eb7-269">Po vypršení jejich platnosti, je nutné aktualizovat, aby dál přístup k prostředkům.</span><span class="sxs-lookup"><span data-stu-id="26eb7-269">After they expire, you must refresh them to continue to access resources.</span></span> <span data-ttu-id="26eb7-270">K tomuto účelu odeslat další požadavek POST do `/token` koncový bod.</span><span class="sxs-lookup"><span data-stu-id="26eb7-270">To do this, submit another POST request to the `/token` endpoint.</span></span> <span data-ttu-id="26eb7-271">Zadejte této doby `refresh_token` místo `code`:</span><span class="sxs-lookup"><span data-stu-id="26eb7-271">This time, provide the `refresh_token` instead of the `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="26eb7-272">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-272">Parameter</span></span> | <span data-ttu-id="26eb7-273">Povinné?</span><span class="sxs-lookup"><span data-stu-id="26eb7-273">Required?</span></span> | <span data-ttu-id="26eb7-274">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="26eb7-275">p</span><span class="sxs-lookup"><span data-stu-id="26eb7-275">p</span></span> |<span data-ttu-id="26eb7-276">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-276">Required</span></span> |<span data-ttu-id="26eb7-277">Zásada, která byla použita k získání původní token obnovení.</span><span class="sxs-lookup"><span data-stu-id="26eb7-277">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="26eb7-278">V této žádosti nelze použít jinou zásadu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="26eb7-279">Všimněte si, že přidáte tento parametr *řetězec dotazu*, není v textu POST.</span><span class="sxs-lookup"><span data-stu-id="26eb7-279">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="26eb7-280">client_id</span><span class="sxs-lookup"><span data-stu-id="26eb7-280">client_id</span></span> |<span data-ttu-id="26eb7-281">Doporučené</span><span class="sxs-lookup"><span data-stu-id="26eb7-281">Recommended</span></span> |<span data-ttu-id="26eb7-282">ID aplikace přiřazené vaší aplikaci v [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="26eb7-282">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="26eb7-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="26eb7-283">grant_type</span></span> |<span data-ttu-id="26eb7-284">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-284">Required</span></span> |<span data-ttu-id="26eb7-285">Typ udělení.</span><span class="sxs-lookup"><span data-stu-id="26eb7-285">The type of grant.</span></span> <span data-ttu-id="26eb7-286">Pro tuto větev tok autorizačního kódu, musí být typ udělení `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="26eb7-286">For this leg of the authorization code flow, the grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="26eb7-287">Obor</span><span class="sxs-lookup"><span data-stu-id="26eb7-287">scope</span></span> |<span data-ttu-id="26eb7-288">Doporučené</span><span class="sxs-lookup"><span data-stu-id="26eb7-288">Recommended</span></span> |<span data-ttu-id="26eb7-289">Seznam obory oddělených mezerami.</span><span class="sxs-lookup"><span data-stu-id="26eb7-289">A space-separated list of scopes.</span></span> <span data-ttu-id="26eb7-290">Hodnota jeden obor označuje do služby Azure AD i oprávnění, která se vyžadují.</span><span class="sxs-lookup"><span data-stu-id="26eb7-290">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="26eb7-291">Pomocí ID klienta podle oboru ukazuje, že vaše aplikace vyžaduje přístupový token, který můžete použít u službou nebo webové rozhraní API, reprezentována stejné ID klienta.</span><span class="sxs-lookup"><span data-stu-id="26eb7-291">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="26eb7-292">`offline_access` Oboru označuje, že vaše aplikace budete potřebovat obnovovací token pro dlouhodobé přístup k prostředkům.</span><span class="sxs-lookup"><span data-stu-id="26eb7-292">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="26eb7-293">Můžete taky použít `openid` oboru požadavku na ID token z Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="26eb7-293">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="26eb7-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="26eb7-294">redirect_uri</span></span> |<span data-ttu-id="26eb7-295">Nepovinné</span><span class="sxs-lookup"><span data-stu-id="26eb7-295">Optional</span></span> |<span data-ttu-id="26eb7-296">Identifikátor URI přesměrování aplikace, kterou jste dostali autorizační kód.</span><span class="sxs-lookup"><span data-stu-id="26eb7-296">The redirect URI of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="26eb7-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="26eb7-297">refresh_token</span></span> |<span data-ttu-id="26eb7-298">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="26eb7-298">Required</span></span> |<span data-ttu-id="26eb7-299">Původní obnovovací token, který jste získali v druhé větev toku.</span><span class="sxs-lookup"><span data-stu-id="26eb7-299">The original refresh token that you acquired in the second leg of the flow.</span></span> |

<span data-ttu-id="26eb7-300">Úspěšné odpovědi tokenu vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="26eb7-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="26eb7-301">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-301">Parameter</span></span> | <span data-ttu-id="26eb7-302">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="26eb7-303">not_before</span><span class="sxs-lookup"><span data-stu-id="26eb7-303">not_before</span></span> |<span data-ttu-id="26eb7-304">Čas, kdy je token považován za platný v čase epoch.</span><span class="sxs-lookup"><span data-stu-id="26eb7-304">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="26eb7-305">token_type</span><span class="sxs-lookup"><span data-stu-id="26eb7-305">token_type</span></span> |<span data-ttu-id="26eb7-306">Typ tokenu hodnota.</span><span class="sxs-lookup"><span data-stu-id="26eb7-306">The token type value.</span></span> <span data-ttu-id="26eb7-307">Pouze typ, který podporuje Azure AD je nosiče.</span><span class="sxs-lookup"><span data-stu-id="26eb7-307">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="26eb7-308">access_token</span><span class="sxs-lookup"><span data-stu-id="26eb7-308">access_token</span></span> |<span data-ttu-id="26eb7-309">JWT podepsaný držitelem, které jste žádali.</span><span class="sxs-lookup"><span data-stu-id="26eb7-309">The signed JWT that you requested.</span></span> |
| <span data-ttu-id="26eb7-310">Obor</span><span class="sxs-lookup"><span data-stu-id="26eb7-310">scope</span></span> |<span data-ttu-id="26eb7-311">Obory, které token je platný pro.</span><span class="sxs-lookup"><span data-stu-id="26eb7-311">The scopes that the token is valid for.</span></span> <span data-ttu-id="26eb7-312">Také můžete obory tokeny mezipaměti pro pozdější použití.</span><span class="sxs-lookup"><span data-stu-id="26eb7-312">You also can use the scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="26eb7-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="26eb7-313">expires_in</span></span> |<span data-ttu-id="26eb7-314">Časový interval, který je token platný (v sekundách).</span><span class="sxs-lookup"><span data-stu-id="26eb7-314">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="26eb7-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="26eb7-315">refresh_token</span></span> |<span data-ttu-id="26eb7-316">Aktualizace tokenu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="26eb7-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="26eb7-317">Aplikace můžete používat tento token získat další tokeny po vypršení platnosti aktuálního tokenu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-317">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="26eb7-318">Aktualizujte je dlouhodobé tokeny a slouží k přístupu k prostředkům uchovávány dlouhou dobu.</span><span class="sxs-lookup"><span data-stu-id="26eb7-318">Refresh tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="26eb7-319">Další informace najdete v tématu [odkaz tokenu Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="26eb7-319">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="26eb7-320">Chybové odpovědi bude vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="26eb7-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="26eb7-321">Parametr</span><span class="sxs-lookup"><span data-stu-id="26eb7-321">Parameter</span></span> | <span data-ttu-id="26eb7-322">Popis</span><span class="sxs-lookup"><span data-stu-id="26eb7-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="26eb7-323">error</span><span class="sxs-lookup"><span data-stu-id="26eb7-323">error</span></span> |<span data-ttu-id="26eb7-324">Řetězec kódu chyby, můžete použít ke klasifikaci typů chyb, ke kterým dochází.</span><span class="sxs-lookup"><span data-stu-id="26eb7-324">An error code string that you can use to classify types of errors that occur.</span></span> <span data-ttu-id="26eb7-325">Můžete také použít řetězec reagování na chyby.</span><span class="sxs-lookup"><span data-stu-id="26eb7-325">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="26eb7-326">error_description</span><span class="sxs-lookup"><span data-stu-id="26eb7-326">error_description</span></span> |<span data-ttu-id="26eb7-327">Konkrétní chybová zpráva, která vám může pomoct určit hlavní příčinu chyby ověřování.</span><span class="sxs-lookup"><span data-stu-id="26eb7-327">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="26eb7-328">Použít vlastní adresáře Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="26eb7-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="26eb7-329">Chcete-li vyzkoušet tyto požadavky, proveďte následující kroky.</span><span class="sxs-lookup"><span data-stu-id="26eb7-329">To try these requests yourself, complete the following steps.</span></span> <span data-ttu-id="26eb7-330">Nahraďte ukázkové hodnoty, které jsme použili v tomto článku vlastními hodnotami.</span><span class="sxs-lookup"><span data-stu-id="26eb7-330">Replace the example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="26eb7-331">[Vytvořte adresář služby Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="26eb7-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="26eb7-332">Použijte název adresáře v žádosti.</span><span class="sxs-lookup"><span data-stu-id="26eb7-332">Use the name of your directory in the requests.</span></span>
2. <span data-ttu-id="26eb7-333">[Vytvoření aplikace](active-directory-b2c-app-registration.md) k získání ID aplikací a identifikátor URI pro přesměrování.</span><span class="sxs-lookup"><span data-stu-id="26eb7-333">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a redirect URI.</span></span> <span data-ttu-id="26eb7-334">Zahrňte nativního klienta ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="26eb7-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="26eb7-335">[Vytvoření vlastních zásad](active-directory-b2c-reference-policies.md) získat názvy zásad.</span><span class="sxs-lookup"><span data-stu-id="26eb7-335">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

