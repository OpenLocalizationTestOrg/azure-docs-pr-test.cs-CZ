---
title: "Monitorování koncového bodu v Azure Traffic Manageru | Microsoft Docs"
description: "Tento článek vám může pomoct pochopit, jak Traffic Manager používá pro Azure zákazníky, nasazení aplikací s vysokou dostupností monitorování koncového bodu a koncový bod automatické převzetí služeb při selhání"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: 5ce000814f2f5899a7338fdefb39c4873c006b1d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="56d5e-103">Monitorování koncového bodu Traffic Manageru</span><span class="sxs-lookup"><span data-stu-id="56d5e-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="56d5e-104">Azure Traffic Manager zahrnuje monitorování vestavěným koncovým bodem a koncový bod automatické převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="56d5e-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="56d5e-105">Tato funkce umožňuje poskytovat vysokou dostupnost aplikace, které jsou odolné vůči selhání koncový bod, včetně selhání oblast Azure.</span><span class="sxs-lookup"><span data-stu-id="56d5e-105">This feature helps you deliver high-availability applications that are resilient to endpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="56d5e-106">Konfigurace monitorování koncového bodu</span><span class="sxs-lookup"><span data-stu-id="56d5e-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="56d5e-107">Konfigurace koncového bodu monitorování, zadejte následující nastavení na svůj profil Traffic Manageru:</span><span class="sxs-lookup"><span data-stu-id="56d5e-107">To configure endpoint monitoring, you must specify the following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="56d5e-108">**Protokol**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-108">**Protocol**.</span></span> <span data-ttu-id="56d5e-109">Vyberte protokol HTTP, HTTPS nebo TCP jako protokol Traffic Manager používá při zjišťování váš koncový bod. Zkontrolujte jeho stav.</span><span class="sxs-lookup"><span data-stu-id="56d5e-109">Choose HTTP, HTTPS, or TCP as the protocol that Traffic Manager uses when probing your endpoint to check its health.</span></span> <span data-ttu-id="56d5e-110">Monitorování HTTPS neověřuje, že zda váš certifikát SSL není platný – pouze zkontroluje certifikát, který je přítomen.</span><span class="sxs-lookup"><span data-stu-id="56d5e-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that the certificate is present.</span></span>
* <span data-ttu-id="56d5e-111">**Port**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-111">**Port**.</span></span> <span data-ttu-id="56d5e-112">Zvolte port používaný pro požadavek.</span><span class="sxs-lookup"><span data-stu-id="56d5e-112">Choose the port used for the request.</span></span>
* <span data-ttu-id="56d5e-113">**Cesta**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-113">**Path**.</span></span> <span data-ttu-id="56d5e-114">Toto nastavení konfigurace je platná pouze pro protokoly HTTP a HTTPS, pro které určení cesty nastavení je povinné.</span><span class="sxs-lookup"><span data-stu-id="56d5e-114">This configuration setting is valid only for the HTTP and HTTPS protocols, for which specifying the path setting is required.</span></span> <span data-ttu-id="56d5e-115">Poskytuje toto nastavení pro TCP monitorování protokolu dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="56d5e-115">Providing this setting for the TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="56d5e-116">Pro protokol TCP zadejte relativní cesta a název webovou stránku nebo soubor, který přistupuje k monitorování.</span><span class="sxs-lookup"><span data-stu-id="56d5e-116">For TCP protocol, give the relative path and the name of the webpage or the file that the monitoring accesses.</span></span> <span data-ttu-id="56d5e-117">Lomítko (/) je zadána platná hodnota relativní cesty.</span><span class="sxs-lookup"><span data-stu-id="56d5e-117">A forward slash (/) is a valid entry for the relative path.</span></span> <span data-ttu-id="56d5e-118">Tato hodnota znamená, zda je soubor v kořenovém adresáři (výchozí).</span><span class="sxs-lookup"><span data-stu-id="56d5e-118">This value implies that the file is in the root directory (default).</span></span>
* <span data-ttu-id="56d5e-119">**Zkušební fáze Interval**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-119">**Probing Interval**.</span></span> <span data-ttu-id="56d5e-120">Tato hodnota určuje, jak často se kontroluje koncový bod na jeho stav od agentů testování Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="56d5e-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="56d5e-121">Můžete zadat sem dvě hodnoty: 30 sekund (normální zjišťování) a 10 sekund (rychlé zkušební fáze).</span><span class="sxs-lookup"><span data-stu-id="56d5e-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="56d5e-122">Pokud jsou k dispozici žádné hodnoty, profil se nastaví na výchozí hodnota je 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-122">If no values are provided, the profile sets to a default value of 30 seconds.</span></span> <span data-ttu-id="56d5e-123">Přejděte [Traffic Manager cenová](https://azure.microsoft.com/pricing/details/traffic-manager) stránka Další informace o cenách rychlé testování.</span><span class="sxs-lookup"><span data-stu-id="56d5e-123">Visit the [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page to learn more about fast probing pricing.</span></span>
* <span data-ttu-id="56d5e-124">**Počet selhání tolerovat**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="56d5e-125">Tato hodnota určuje, kolik selhání agenta testování Traffic Manager toleruje před označením tohoto koncového bodu jako chybné.</span><span class="sxs-lookup"><span data-stu-id="56d5e-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="56d5e-126">Jeho hodnota může být v rozsahu od 0 do 9.</span><span class="sxs-lookup"><span data-stu-id="56d5e-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="56d5e-127">Hodnota 0 znamená selhání jedné monitorování může způsobit tohoto koncového bodu označen jako chybný.</span><span class="sxs-lookup"><span data-stu-id="56d5e-127">A value of 0 means a single monitoring failure can cause that endpoint to be marked as unhealthy.</span></span> <span data-ttu-id="56d5e-128">Pokud není zadaná žádná hodnota, použije se výchozí hodnota 3.</span><span class="sxs-lookup"><span data-stu-id="56d5e-128">If no value is specified, it uses the default value of 3.</span></span>
* <span data-ttu-id="56d5e-129">**Časový limit monitorování**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="56d5e-130">Tato vlastnost určuje množství času, testování agenta Traffic Manager vyčkat před vzhledem k tomu, který zkontrolujte selhání při odeslání sondu kontrolu stavu ke koncovému bodu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-130">This property specifies the amount of time the Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent to the endpoint.</span></span> <span data-ttu-id="56d5e-131">Pokud Interval zjišťování je nastaven na hodnotu 30 sekund, můžete nastavit hodnotu časového limitu od 5 do 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-131">If the Probing Interval is set to 30 seconds, then you can set the Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="56d5e-132">Pokud není zadaná žádná hodnota, použije se výchozí hodnota je 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="56d5e-133">Pokud Interval zjišťování je nastaven na 10 sekund, můžete nastavit hodnotu časového limitu od 5 do 9 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-133">If the Probing Interval is set to 10 seconds, then you can set the Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="56d5e-134">Pokud není zadaná žádná hodnota časového limitu, používá výchozí hodnotu 9 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Monitorování koncového bodu Traffic Manageru](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="56d5e-136">**Obrázek 1: Traffic Manager koncového bodu monitorování**</span><span class="sxs-lookup"><span data-stu-id="56d5e-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="56d5e-137">Jak funguje monitorování koncového bodu</span><span class="sxs-lookup"><span data-stu-id="56d5e-137">How endpoint monitoring works</span></span>

<span data-ttu-id="56d5e-138">Pokud monitorování protokol nastaven jako HTTP nebo HTTPS, testování agenta Traffic Manager provede požadavek GET na koncový bod pomocí protokol, port a relativní cesta zadána.</span><span class="sxs-lookup"><span data-stu-id="56d5e-138">If the monitoring protocol is set as HTTP or HTTPS, the Traffic Manager probing agent makes a GET request to the endpoint using the protocol, port, and relative path given.</span></span> <span data-ttu-id="56d5e-139">Získá zpět odpověď 200 – OK, že koncový bod se považuje v pořádku.</span><span class="sxs-lookup"><span data-stu-id="56d5e-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="56d5e-140">Pokud je odpověď na jinou hodnotu, nebo pokud není žádná odpověď v rámci časový limit zadaný pak Traffic Manager zjišťování, agent se pokusí opětovně navázat podle nastavení tolerovat počet selhání (znovu pokusí se provést v případě, toto nastavení je 0).</span><span class="sxs-lookup"><span data-stu-id="56d5e-140">If the response is a different value, or, if no response is received within the timeout period specified, then the Traffic Manager probing agent re-attempts according to the Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="56d5e-141">Počet po sobě jdoucích selhání je vyšší než nastavení tolerovat počet selhání, tohoto koncového bodu je označen jako chybný.</span><span class="sxs-lookup"><span data-stu-id="56d5e-141">If the number of consecutive failures is higher than the Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="56d5e-142">Pokud monitorování protokol TCP, testování agenta Traffic Manager zahájí žádost o připojení protokolu TCP pomocí zadaný port.</span><span class="sxs-lookup"><span data-stu-id="56d5e-142">If the monitoring protocol is TCP, the Traffic Manager probing agent initiates a TCP connection request using the port specified.</span></span> <span data-ttu-id="56d5e-143">Pokud koncový bod odpoví na žádost s odpověď k navázání připojení, kontroly stavu je označena jako úspěšné a testování agenta Traffic Manager obnoví připojení TCP.</span><span class="sxs-lookup"><span data-stu-id="56d5e-143">If the endpoint responds to the request with a response to establish the connection, that health check is marked as a success and the Traffic Manager probing agent resets the TCP connection.</span></span> <span data-ttu-id="56d5e-144">Pokud je odpověď na jinou hodnotu, nebo pokud není žádná odpověď v rámci časového limitu zadán, Traffic Manager zjišťování, agent se pokusí opětovně navázat podle nastavení tolerovat počet selhání (znovu pokusí probíhají Pokud toto nastavení je 0).</span><span class="sxs-lookup"><span data-stu-id="56d5e-144">If the response is a different value, or if no response is received within the timeout period specified, the Traffic Manager probing agent re-attempts according to the Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="56d5e-145">Pokud počet po sobě jdoucích selhání je vyšší než nastavení tolerovat počet selhání, pak tohoto koncového bodu je označen jako chybný.</span><span class="sxs-lookup"><span data-stu-id="56d5e-145">If the number of consecutive failures is higher than the Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="56d5e-146">Ve všech případech Traffic Manager sondy z více umístění a se stane po sobě jdoucích selhání rozhodnutí v každé oblasti.</span><span class="sxs-lookup"><span data-stu-id="56d5e-146">In all cases, Traffic Manager probes from multiple locations and the consecutive failure determination happens within each region.</span></span> <span data-ttu-id="56d5e-147">Také to znamená, že koncových bodů obdrželi sondy stavu z Traffic Manager s frekvencí vyšší než nastavení používané pro Interval zjišťování.</span><span class="sxs-lookup"><span data-stu-id="56d5e-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than the setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="56d5e-148">Pro HTTP nebo HTTPS monitorování protokol je implementace vlastní stránky v rámci vaší aplikace – například /health.aspx běžnou praxí na straně koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-148">For HTTP or HTTPS monitoring protocol, a common practice on the endpoint side is to implement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="56d5e-149">Pomocí této cesty pro monitorování, můžete provést kontroly specifické pro aplikace, jako je kontrola čítače výkonu a ověřování databáze dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="56d5e-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="56d5e-150">Podle těchto vlastní kontroly, vrátí stránku odpovídající stavový kód HTTP.</span><span class="sxs-lookup"><span data-stu-id="56d5e-150">Based on these custom checks, the page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="56d5e-151">Všechny koncové body v profilu Traffic Manageru sdílet nastavení monitorování.</span><span class="sxs-lookup"><span data-stu-id="56d5e-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="56d5e-152">Pokud budete muset použít jiné nastavení monitorování pro různé koncové body, můžete vytvořit [vnořené profily Traffic Manageru](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span><span class="sxs-lookup"><span data-stu-id="56d5e-152">If you need to use different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="56d5e-153">Stav koncového bodu a profilu</span><span class="sxs-lookup"><span data-stu-id="56d5e-153">Endpoint and profile status</span></span>

<span data-ttu-id="56d5e-154">Můžete povolit nebo zakázat koncové body a profily Traffic Manageru.</span><span class="sxs-lookup"><span data-stu-id="56d5e-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="56d5e-155">Však ke změně stavu koncových bodů také může docházet k výsledku Traffic Manager automatizované procesy a nastavení.</span><span class="sxs-lookup"><span data-stu-id="56d5e-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="56d5e-156">Stav koncového bodu</span><span class="sxs-lookup"><span data-stu-id="56d5e-156">Endpoint status</span></span>

<span data-ttu-id="56d5e-157">Můžete povolit nebo zakázat konkrétní koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="56d5e-158">Základní služby, která nemusí být ještě v pořádku, je poškozena.</span><span class="sxs-lookup"><span data-stu-id="56d5e-158">The underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="56d5e-159">Změna stavu koncový bod řídí dostupnost koncového bodu v profil služby Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="56d5e-159">Changing the endpoint status controls the availability of the endpoint in the Traffic Manager profile.</span></span> <span data-ttu-id="56d5e-160">Pokud je koncový bod stav Zakázáno, Traffic Manager nekontroluje, jeho stav a koncový bod není zahrnutý v odpovědi DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-160">When an endpoint status is disabled, Traffic Manager does not check its health and the endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="56d5e-161">Stav profilu</span><span class="sxs-lookup"><span data-stu-id="56d5e-161">Profile status</span></span>

<span data-ttu-id="56d5e-162">Nastavení stavu profilu můžete povolit nebo zakázat konkrétní profil.</span><span class="sxs-lookup"><span data-stu-id="56d5e-162">Using the profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="56d5e-163">Při stav koncového bodu má vliv na jeden koncový bod, ovlivní stav profilu celého profilu, včetně všechny koncové body.</span><span class="sxs-lookup"><span data-stu-id="56d5e-163">While endpoint status affects a single endpoint, profile status affects the entire profile, including all endpoints.</span></span> <span data-ttu-id="56d5e-164">Pokud zakážete profil, koncových bodů nejsou kontroly stavu a žádné koncové body jsou zahrnuty v odpovědi DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-164">When you disable a profile, the endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="56d5e-165">[NXDOMAIN](https://tools.ietf.org/html/rfc2308) kód odpovědi se vrátí pro dotaz DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for the DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="56d5e-166">Stav monitorování koncových bodů</span><span class="sxs-lookup"><span data-stu-id="56d5e-166">Endpoint monitor status</span></span>

<span data-ttu-id="56d5e-167">Stav monitorování koncového bodu je hodnota generované Traffic Manager, která zobrazuje stav koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-167">Endpoint monitor status is a Traffic Manager-generated value that shows the status of the endpoint.</span></span> <span data-ttu-id="56d5e-168">Nelze změnit, tato nastavení ručně.</span><span class="sxs-lookup"><span data-stu-id="56d5e-168">You cannot change this setting manually.</span></span> <span data-ttu-id="56d5e-169">Sledujte stav koncového bodu je kombinací výsledky monitorování koncového bodu a stav nakonfigurovaný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-169">The endpoint monitor status is a combination of the results of endpoint monitoring and the configured endpoint status.</span></span> <span data-ttu-id="56d5e-170">V následující tabulce jsou uvedeny možné hodnoty koncového bodu monitorování stavu:</span><span class="sxs-lookup"><span data-stu-id="56d5e-170">The possible values of endpoint monitor status are shown in the following table:</span></span>

| <span data-ttu-id="56d5e-171">Stav profilu</span><span class="sxs-lookup"><span data-stu-id="56d5e-171">Profile status</span></span> | <span data-ttu-id="56d5e-172">Stav koncového bodu</span><span class="sxs-lookup"><span data-stu-id="56d5e-172">Endpoint status</span></span> | <span data-ttu-id="56d5e-173">Stav monitorování koncových bodů</span><span class="sxs-lookup"><span data-stu-id="56d5e-173">Endpoint monitor status</span></span> | <span data-ttu-id="56d5e-174">Poznámky</span><span class="sxs-lookup"><span data-stu-id="56d5e-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="56d5e-175">Zakázáno</span><span class="sxs-lookup"><span data-stu-id="56d5e-175">Disabled</span></span> |<span data-ttu-id="56d5e-176">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-176">Enabled</span></span> |<span data-ttu-id="56d5e-177">Neaktivní</span><span class="sxs-lookup"><span data-stu-id="56d5e-177">Inactive</span></span> |<span data-ttu-id="56d5e-178">Profil je zakázané.</span><span class="sxs-lookup"><span data-stu-id="56d5e-178">The profile has been disabled.</span></span> <span data-ttu-id="56d5e-179">I když je stav koncového bodu je povoleno, přednost má stav profilu (zakázáno).</span><span class="sxs-lookup"><span data-stu-id="56d5e-179">Although the endpoint status is Enabled, the profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="56d5e-180">Koncové body v zakázaném profily nejsou monitorovány.</span><span class="sxs-lookup"><span data-stu-id="56d5e-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="56d5e-181">Zadání kódu odpovědi NXDOMAIN se vrátí pro dotaz DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-181">An NXDOMAIN response code is returned for the DNS query.</span></span> |
| <span data-ttu-id="56d5e-182">&lt;všechny&gt;</span><span class="sxs-lookup"><span data-stu-id="56d5e-182">&lt;any&gt;</span></span> |<span data-ttu-id="56d5e-183">Zakázáno</span><span class="sxs-lookup"><span data-stu-id="56d5e-183">Disabled</span></span> |<span data-ttu-id="56d5e-184">Zakázáno</span><span class="sxs-lookup"><span data-stu-id="56d5e-184">Disabled</span></span> |<span data-ttu-id="56d5e-185">Koncový bod je zakázané.</span><span class="sxs-lookup"><span data-stu-id="56d5e-185">The endpoint has been disabled.</span></span> <span data-ttu-id="56d5e-186">Zakázané koncových bodů nejsou monitorovány.</span><span class="sxs-lookup"><span data-stu-id="56d5e-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="56d5e-187">Koncový bod není součástí odpovědí DNS, proto, že neobdrží provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-187">The endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="56d5e-188">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-188">Enabled</span></span> |<span data-ttu-id="56d5e-189">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-189">Enabled</span></span> |<span data-ttu-id="56d5e-190">Online</span><span class="sxs-lookup"><span data-stu-id="56d5e-190">Online</span></span> |<span data-ttu-id="56d5e-191">Koncový bod je monitorována a je v pořádku.</span><span class="sxs-lookup"><span data-stu-id="56d5e-191">The endpoint is monitored and is healthy.</span></span> <span data-ttu-id="56d5e-192">To je součástí odpovědí DNS a může přijímat provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="56d5e-193">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-193">Enabled</span></span> |<span data-ttu-id="56d5e-194">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-194">Enabled</span></span> |<span data-ttu-id="56d5e-195">Snížený výkon</span><span class="sxs-lookup"><span data-stu-id="56d5e-195">Degraded</span></span> |<span data-ttu-id="56d5e-196">Monitorování kontroly stavu koncový bod se nedaří.</span><span class="sxs-lookup"><span data-stu-id="56d5e-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="56d5e-197">Koncový bod není zahrnutý v odpovědi DNS a nepřijímá provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-197">The endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="56d5e-198">"Výjimkou je, pokud jsou degradovány všechny koncové body, v takovém případě všechny z nich jsou považovány za má být vrácen v odpovědi na dotaz).</span><span class="sxs-lookup"><span data-stu-id="56d5e-198">An exception to this is if all endpoints are degraded, in which case all of them are considered to be returned in the query response).</span></span></br>|
| <span data-ttu-id="56d5e-199">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-199">Enabled</span></span> |<span data-ttu-id="56d5e-200">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-200">Enabled</span></span> |<span data-ttu-id="56d5e-201">CheckingEndpoint</span><span class="sxs-lookup"><span data-stu-id="56d5e-201">CheckingEndpoint</span></span> |<span data-ttu-id="56d5e-202">Koncový bod je monitorována, ale výsledky první sondu ještě nebyly přijaty.</span><span class="sxs-lookup"><span data-stu-id="56d5e-202">The endpoint is monitored, but the results of the first probe have not been received yet.</span></span> <span data-ttu-id="56d5e-203">CheckingEndpoint je dočasný stav, ke kterému dochází obvykle okamžitě po přidání nebo povolení koncového bodu v profilu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in the profile.</span></span> <span data-ttu-id="56d5e-204">Koncový bod v tomto stavu je zahrnutý v odpovědi DNS a může přijímat provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="56d5e-205">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-205">Enabled</span></span> |<span data-ttu-id="56d5e-206">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-206">Enabled</span></span> |<span data-ttu-id="56d5e-207">Zastaveno</span><span class="sxs-lookup"><span data-stu-id="56d5e-207">Stopped</span></span> |<span data-ttu-id="56d5e-208">Cloudové služby nebo webovou aplikaci, odkazující na koncový bod není spuštěna.</span><span class="sxs-lookup"><span data-stu-id="56d5e-208">The cloud service or web app that the endpoint points to is not running.</span></span> <span data-ttu-id="56d5e-209">Zkontrolujte nastavení cloudové služby nebo webovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="56d5e-209">Check the cloud service or web app settings.</span></span> <span data-ttu-id="56d5e-210">To také může dojít, pokud koncový bod je typ vnořené koncového bodu a podřízené profilu je zakázán nebo je neaktivní.</span><span class="sxs-lookup"><span data-stu-id="56d5e-210">This can also happen if the endpoint is of type nested endpoint and the child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="56d5e-211">Koncový bod ve stavu Zastaveno není monitorován.</span><span class="sxs-lookup"><span data-stu-id="56d5e-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="56d5e-212">To není zahrnutý v odpovědi DNS a neobdrží provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="56d5e-213">Výjimkou je, pokud jsou degradovány všechny koncové body, v takovém případě všechny z nich bude považovat za má být vrácen v odpovědi na dotaz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-213">An exception to this is if all endpoints are degraded, in which case all of them will be considered to be returned in the query response.</span></span></br>|

<span data-ttu-id="56d5e-214">Podrobnosti o výpočtu stav monitorování koncových bodů pro vnořené koncové body najdete v tématu [vnořené profily Traffic Manageru](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="56d5e-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="56d5e-215">Stav monitorování profilu</span><span class="sxs-lookup"><span data-stu-id="56d5e-215">Profile monitor status</span></span>

<span data-ttu-id="56d5e-216">Stav monitorování profilu je kombinací stav nakonfigurované profilu a koncového bodu monitorování stavu hodnoty pro všechny koncové body.</span><span class="sxs-lookup"><span data-stu-id="56d5e-216">The profile monitor status is a combination of the configured profile status and the endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="56d5e-217">Možné hodnoty jsou popsané v následující tabulce:</span><span class="sxs-lookup"><span data-stu-id="56d5e-217">The possible values are described in the following table:</span></span>

| <span data-ttu-id="56d5e-218">Stav profilu (jak je nakonfigurováno)</span><span class="sxs-lookup"><span data-stu-id="56d5e-218">Profile status (as configured)</span></span> | <span data-ttu-id="56d5e-219">Stav monitorování koncových bodů</span><span class="sxs-lookup"><span data-stu-id="56d5e-219">Endpoint monitor status</span></span> | <span data-ttu-id="56d5e-220">Stav monitorování profilu</span><span class="sxs-lookup"><span data-stu-id="56d5e-220">Profile monitor status</span></span> | <span data-ttu-id="56d5e-221">Poznámky</span><span class="sxs-lookup"><span data-stu-id="56d5e-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="56d5e-222">Zakázáno</span><span class="sxs-lookup"><span data-stu-id="56d5e-222">Disabled</span></span> |<span data-ttu-id="56d5e-223">&lt;všechny&gt; nebo profil s žádné koncové body definované.</span><span class="sxs-lookup"><span data-stu-id="56d5e-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="56d5e-224">Zakázáno</span><span class="sxs-lookup"><span data-stu-id="56d5e-224">Disabled</span></span> |<span data-ttu-id="56d5e-225">Profil je zakázané.</span><span class="sxs-lookup"><span data-stu-id="56d5e-225">The profile has been disabled.</span></span> |
| <span data-ttu-id="56d5e-226">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-226">Enabled</span></span> |<span data-ttu-id="56d5e-227">Je Degradovaný stav aspoň jeden koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-227">The status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="56d5e-228">Snížený výkon</span><span class="sxs-lookup"><span data-stu-id="56d5e-228">Degraded</span></span> |<span data-ttu-id="56d5e-229">Zkontrolujte hodnoty stavu jednotlivých koncový bod k určení, které koncové body vyžadovat další pozornost.</span><span class="sxs-lookup"><span data-stu-id="56d5e-229">Review the individual endpoint status values to determine which endpoints require further attention.</span></span> |
| <span data-ttu-id="56d5e-230">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-230">Enabled</span></span> |<span data-ttu-id="56d5e-231">Stav aspoň jeden koncový bod je Online.</span><span class="sxs-lookup"><span data-stu-id="56d5e-231">The status of at least one endpoint is Online.</span></span> <span data-ttu-id="56d5e-232">Žádné koncové body mají stav snížený.</span><span class="sxs-lookup"><span data-stu-id="56d5e-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="56d5e-233">Online</span><span class="sxs-lookup"><span data-stu-id="56d5e-233">Online</span></span> |<span data-ttu-id="56d5e-234">Služba přijímá provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-234">The service is accepting traffic.</span></span> <span data-ttu-id="56d5e-235">Není vyžadována žádná další akce.</span><span class="sxs-lookup"><span data-stu-id="56d5e-235">No further action is required.</span></span> |
| <span data-ttu-id="56d5e-236">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-236">Enabled</span></span> |<span data-ttu-id="56d5e-237">Stav aspoň jeden koncový bod je CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="56d5e-237">The status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="56d5e-238">Ve stavu Online nebo snížený nejsou žádné koncové body.</span><span class="sxs-lookup"><span data-stu-id="56d5e-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="56d5e-239">CheckingEndpoints</span><span class="sxs-lookup"><span data-stu-id="56d5e-239">CheckingEndpoints</span></span> |<span data-ttu-id="56d5e-240">Tento přechod stavu nastane, když profil Pokud vytvořené nebo povolené.</span><span class="sxs-lookup"><span data-stu-id="56d5e-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="56d5e-241">První se kontroluje stav koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-241">The endpoint health is being checked for the first time.</span></span> |
| <span data-ttu-id="56d5e-242">Povoleno</span><span class="sxs-lookup"><span data-stu-id="56d5e-242">Enabled</span></span> |<span data-ttu-id="56d5e-243">Stavy všech koncových bodů v profilu jsou zakázán nebo zastaven nebo v profilu nemá žádné koncové body definované.</span><span class="sxs-lookup"><span data-stu-id="56d5e-243">The statuses of all endpoints in the profile are either Disabled or Stopped, or the profile has no defined endpoints.</span></span> |<span data-ttu-id="56d5e-244">Neaktivní</span><span class="sxs-lookup"><span data-stu-id="56d5e-244">Inactive</span></span> |<span data-ttu-id="56d5e-245">Žádné koncové body jsou aktivní, ale stále profilovou.</span><span class="sxs-lookup"><span data-stu-id="56d5e-245">No endpoints are active, but the profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="56d5e-246">Koncový bod převzetí služeb při selhání a obnovení</span><span class="sxs-lookup"><span data-stu-id="56d5e-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="56d5e-247">Traffic Manager pravidelně kontroluje stav každý koncový bod, včetně koncových bodů není v pořádku.</span><span class="sxs-lookup"><span data-stu-id="56d5e-247">Traffic Manager periodically checks the health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="56d5e-248">Traffic Manager zjistí, že koncový bod se změní na v pořádku a přenese zpět do otočení.</span><span class="sxs-lookup"><span data-stu-id="56d5e-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="56d5e-249">Koncový bod je není v pořádku, pokud dojde k některé z následujících událostí:</span><span class="sxs-lookup"><span data-stu-id="56d5e-249">An endpoint is unhealthy when any of the following events occur:</span></span>
- <span data-ttu-id="56d5e-250">Pokud je monitorování protokol HTTP nebo HTTPS:</span><span class="sxs-lookup"><span data-stu-id="56d5e-250">If the monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="56d5e-251">Bez 200 odezvu obdrží (včetně kódu různých 2xx nebo 301/302 přesměrování).</span><span class="sxs-lookup"><span data-stu-id="56d5e-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="56d5e-252">Pokud je monitorování protokol TCP:</span><span class="sxs-lookup"><span data-stu-id="56d5e-252">If the monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="56d5e-253">Odpověď než ACK nebo SYN ACK byl přijat v reakci na žádost o SYNCHRONIZACI odeslaná správcem provoz k pokusu o navázání připojení.</span><span class="sxs-lookup"><span data-stu-id="56d5e-253">A response other than ACK or SYN-ACK is received in response to the SYNC request sent by Traffic Manager to attempt a connection establishment.</span></span>
- <span data-ttu-id="56d5e-254">Časový limit.</span><span class="sxs-lookup"><span data-stu-id="56d5e-254">Timeout.</span></span> 
- <span data-ttu-id="56d5e-255">Jakýkoli další připojení problém, což je koncový bod není právě dostupná.</span><span class="sxs-lookup"><span data-stu-id="56d5e-255">Any other connection issue resulting in the endpoint being not reachable.</span></span>

<span data-ttu-id="56d5e-256">Další informace o odstraňování potíží selhání kontroly najdete v tématu [řešení potíží s Degradovaný stav na Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="56d5e-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="56d5e-257">Následující časová osa na obrázku 2 je podrobný popis monitorování procesu Traffic Manager koncového bodu, který má následující nastavení: monitorování protokolu, je HTTP, testování interval je 30 sekund, počet chyb. povolená je 3, hodnota časového limitu je 10 sekund a DNS TTL je 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-257">The following timeline in Figure 2 is a detailed description of the monitoring process of Traffic Manager endpoint that has the following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Traffic Manager pořadí převzetí služeb při selhání a navrácení služeb po obnovení koncového bodu](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="56d5e-259">**Obrázek 2: Provoz manager koncový bod převzetí služeb při selhání a obnovení pořadí**</span><span class="sxs-lookup"><span data-stu-id="56d5e-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="56d5e-260">**ZÍSKAT**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-260">**GET**.</span></span> <span data-ttu-id="56d5e-261">Pro každý koncový bod Traffic Manager monitorování systému provede požadavek GET na cestě zadaný v nastavení monitorování.</span><span class="sxs-lookup"><span data-stu-id="56d5e-261">For each endpoint, the Traffic Manager monitoring system performs a GET request on the path specified in the monitoring settings.</span></span>
2. <span data-ttu-id="56d5e-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-262">**200 OK**.</span></span> <span data-ttu-id="56d5e-263">Systém monitorování očekává zprávu HTTP 200 OK má být vrácen do 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-263">The monitoring system expects an HTTP 200 OK message to be returned within 10 seconds.</span></span> <span data-ttu-id="56d5e-264">Při přijetí této odpovědi, rozpozná, že služba je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="56d5e-264">When it receives this response, it recognizes that the service is available.</span></span>
3. <span data-ttu-id="56d5e-265">**30 sekundách mezi kontrolami**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-265">**30 seconds between checks**.</span></span> <span data-ttu-id="56d5e-266">Kontrola stavu koncový bod se opakuje každých 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-266">The endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="56d5e-267">**Služba není k dispozici**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-267">**Service unavailable**.</span></span> <span data-ttu-id="56d5e-268">Služba nebude k dispozici.</span><span class="sxs-lookup"><span data-stu-id="56d5e-268">The service becomes unavailable.</span></span> <span data-ttu-id="56d5e-269">Traffic Manager nebude vědět, dokud další kontrolu stavu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-269">Traffic Manager will not know until the next health check.</span></span>
5. <span data-ttu-id="56d5e-270">**Pokusí o přístup k cesta monitorování**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-270">**Attempts to access the monitoring path**.</span></span> <span data-ttu-id="56d5e-271">Systém monitorování provede požadavek GET, ale neobdrží odpověď během časového limitu 10 sekund (případně jiný 200 může být přijata odpověď).</span><span class="sxs-lookup"><span data-stu-id="56d5e-271">The monitoring system performs a GET request, but does not receive a response within the timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="56d5e-272">Zkusí další třikrát v intervalech 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="56d5e-273">Pokud jeden z pokusů je úspěšné, počet pokusů se vynuluje.</span><span class="sxs-lookup"><span data-stu-id="56d5e-273">If one of the tries is successful, then the number of tries is reset.</span></span>
6. <span data-ttu-id="56d5e-274">**Nastavit stav snížený**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-274">**Status set to Degraded**.</span></span> <span data-ttu-id="56d5e-275">Po čtvrtém po sobě jdoucích selhání systém monitorování označuje stav koncového bodu není k dispozici jako Snížený.</span><span class="sxs-lookup"><span data-stu-id="56d5e-275">After a fourth consecutive failure, the monitoring system marks the unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="56d5e-276">**Provoz je přesměrováni do dalších koncových bodů**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-276">**Traffic is diverted to other endpoints**.</span></span> <span data-ttu-id="56d5e-277">Názvové servery DNS Traffic Manager se aktualizují a Traffic Manager už vrátí koncový bod v odpovědi na dotazy DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-277">The Traffic Manager DNS name servers are updated and Traffic Manager no longer returns the endpoint in response to DNS queries.</span></span> <span data-ttu-id="56d5e-278">Nová připojení jsou směrované na jiných, k dispozici koncové body.</span><span class="sxs-lookup"><span data-stu-id="56d5e-278">New connections are directed to other, available endpoints.</span></span> <span data-ttu-id="56d5e-279">Rekurzivní servery DNS a klienty DNS však může stále mezipaměti předchozí odpovědí DNS, které obsahují tento koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="56d5e-280">Klienti dále používat koncový bod do vypršení platnosti mezipaměti DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-280">Clients continue to use the endpoint until the DNS cache expires.</span></span> <span data-ttu-id="56d5e-281">Jako mezipaměť DNS vyprší, klienti zkontrolujte nové dotazy DNS a jsou přesměrováni na různými koncovými body.</span><span class="sxs-lookup"><span data-stu-id="56d5e-281">As the DNS cache expires, clients make new DNS queries and are directed to different endpoints.</span></span> <span data-ttu-id="56d5e-282">Doba uložení do mezipaměti je řízena nastavením TTL v profil služby Traffic Manager, například 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="56d5e-282">The cache duration is controlled by the TTL setting in the Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="56d5e-283">**Kontroluje stav pokračovat**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-283">**Health checks continue**.</span></span> <span data-ttu-id="56d5e-284">Traffic Manager bude kontrolovat stav koncového bodu, když má stav snížený.</span><span class="sxs-lookup"><span data-stu-id="56d5e-284">Traffic Manager continues to check the health of the endpoint while it has a Degraded status.</span></span> <span data-ttu-id="56d5e-285">Traffic Manager zjistí, když se koncový bod se vrátí do stavu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-285">Traffic Manager detects when the endpoint returns to health.</span></span>
9. <span data-ttu-id="56d5e-286">**Služba přejde do režimu online**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-286">**Service comes back online**.</span></span> <span data-ttu-id="56d5e-287">Služba bude k dispozici.</span><span class="sxs-lookup"><span data-stu-id="56d5e-287">The service becomes available.</span></span> <span data-ttu-id="56d5e-288">Koncový bod zachovává jeho stav snížený v Traffic Manageru, dokud monitorování systém provede jeho další kontrolu stavu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-288">The endpoint retains its Degraded status in Traffic Manager until the monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="56d5e-289">**Přenosy do služby obnoví**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-289">**Traffic to service resumes**.</span></span> <span data-ttu-id="56d5e-290">Správce provozu se odešle požadavek GET a obdrží odpověď 200 OK stav.</span><span class="sxs-lookup"><span data-stu-id="56d5e-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="56d5e-291">Služba vrátila do stavu v pořádku.</span><span class="sxs-lookup"><span data-stu-id="56d5e-291">The service has returned to a healthy state.</span></span> <span data-ttu-id="56d5e-292">Traffic Manager názvové servery, které jsou aktualizovány a jejich začít možné předat název DNS služby v odpovědi DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-292">The Traffic Manager name servers are updated, and they begin to hand out the service's DNS name in DNS responses.</span></span> <span data-ttu-id="56d5e-293">Provoz vrátí ke koncovému bodu jako odpovědí uložených v mezipaměti DNS který vrací další koncové body platnost nevyprší a jako existující připojení k jiné koncové body budou ukončeny.</span><span class="sxs-lookup"><span data-stu-id="56d5e-293">Traffic returns to the endpoint as cached DNS responses that return other endpoints expire, and as existing connections to other endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="56d5e-294">Protože Traffic Manager funguje na úrovni DNS, nelze ovlivnit existující připojení pro libovolný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-294">Because Traffic Manager works at the DNS level, it cannot influence existing connections to any endpoint.</span></span> <span data-ttu-id="56d5e-295">Když ho přesměruje přenosy mezi koncovými body (buď nastavení změněné profilu, nebo při převzetí služeb při selhání a navrácení služeb po obnovení), Traffic Manager určí, že nová připojení k koncové body k dispozici.</span><span class="sxs-lookup"><span data-stu-id="56d5e-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections to available endpoints.</span></span> <span data-ttu-id="56d5e-296">Ostatní koncové body, může však i nadále přijímat přenosy přes existující připojení, dokud tyto relace jsou ukončeny.</span><span class="sxs-lookup"><span data-stu-id="56d5e-296">However, other endpoints might continue to receive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="56d5e-297">Pokud chcete povolit provoz na vyprazdňování z existující připojení, aplikace měli omezit dobu trvání relace použít s každý koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-297">To enable traffic to drain from existing connections, applications should limit the session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="56d5e-298">Metody směrování provozu</span><span class="sxs-lookup"><span data-stu-id="56d5e-298">Traffic-routing methods</span></span>

<span data-ttu-id="56d5e-299">Koncový bod má stav snížený, je už vrátila v reakci na dotazy DNS.</span><span class="sxs-lookup"><span data-stu-id="56d5e-299">When an endpoint has a Degraded status, it is no longer returned in response to DNS queries.</span></span> <span data-ttu-id="56d5e-300">Místo toho je alternativní koncový bod vybrali a vrácena.</span><span class="sxs-lookup"><span data-stu-id="56d5e-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="56d5e-301">Metodu směrování provozu nastavenou v profilu Určuje, jak je zvolen alternativní koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-301">The traffic-routing method configured in the profile determines how the alternative endpoint is chosen.</span></span>

* <span data-ttu-id="56d5e-302">**Priorita**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-302">**Priority**.</span></span> <span data-ttu-id="56d5e-303">Koncové body představují seznam seřazený podle priority.</span><span class="sxs-lookup"><span data-stu-id="56d5e-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="56d5e-304">První koncový bod k dispozici v seznamu se vždy vrátí.</span><span class="sxs-lookup"><span data-stu-id="56d5e-304">The first available endpoint on the list is always returned.</span></span> <span data-ttu-id="56d5e-305">Pokud je Degradovaný stav koncový bod, je vrácena další dostupný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-305">If an endpoint status is Degraded, then the next available endpoint is returned.</span></span>
* <span data-ttu-id="56d5e-306">**Vážené**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-306">**Weighted**.</span></span> <span data-ttu-id="56d5e-307">Žádný dostupný koncový bod je vybrán náhodně na základě jejich přiřazené váhu a váhu dalších dostupných koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="56d5e-307">Any available endpoint is chosen at random based on their assigned weights and the weights of the other available endpoints.</span></span>
* <span data-ttu-id="56d5e-308">**Výkon**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-308">**Performance**.</span></span> <span data-ttu-id="56d5e-309">Koncový bod nejbližší pro koncového uživatele se vrátí.</span><span class="sxs-lookup"><span data-stu-id="56d5e-309">The endpoint closest to the end user is returned.</span></span> <span data-ttu-id="56d5e-310">Pokud tohoto koncového bodu není k dispozici, koncový bod náhodně vybere z všech dalších dostupných koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="56d5e-310">If that endpoint is unavailable, an endpoint is randomly chosen from all the other available endpoints.</span></span> <span data-ttu-id="56d5e-311">Koncový bod náhodný výběr zabraňuje kaskádových selhání, který může nastat, když se stane přetížené nejbližší koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-311">Choosing a random endpoint avoids a cascading failure that can occur when the next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="56d5e-312">Plány alternativní převzetí služeb při selhání pro směrování provozu výkonu můžete nakonfigurovat pomocí [vnořené profily Traffic Manageru](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span><span class="sxs-lookup"><span data-stu-id="56d5e-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="56d5e-313">**Zeměpisná**.</span><span class="sxs-lookup"><span data-stu-id="56d5e-313">**Geographic**.</span></span> <span data-ttu-id="56d5e-314">Mapovat k obsluze geografické umístění na základě dotazu požadavku koncového bodu je vrácena IP adresy.</span><span class="sxs-lookup"><span data-stu-id="56d5e-314">The endpoint mapped to serve the geographic location based on the query request IP’s is returned.</span></span> <span data-ttu-id="56d5e-315">Pokud tohoto koncového bodu není k dispozici, jiný koncový bod nebude vybrán k převzetí služeb při selhání, protože geografické umístění lze mapovat pouze na jeden koncový bod v profilu (Další podrobnosti najdete v [– nejčastější dotazy](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span><span class="sxs-lookup"><span data-stu-id="56d5e-315">If that endpoint is unavailable, another endpoint will not be selected to failover to, since a geographic location can be mapped only to one endpoint in a profile (more details are in the [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="56d5e-316">Jako osvědčený postup, při použití geografické směrování doporučujeme zákazníkům používat vnořené profily Traffic Manageru s více než jeden koncový bod jako koncové body profilu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-316">As a best practice, when using geographic routing, we recommend customers to use nested Traffic Manager profiles with more than one endpoint as the endpoints of the profile.</span></span>

<span data-ttu-id="56d5e-317">Další informace najdete v tématu [metody směrování provozu Traffic Manager](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="56d5e-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="56d5e-318">Jedinou výjimkou je to normální chování směrování provozu dochází, pokud všechny vhodné koncové body degradovaném stavu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-318">One exception to normal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="56d5e-319">Díky Traffic Manager pokusí "best effort" a *odpoví, jako by všechny snížený stav koncových bodů ve skutečnosti ve stavu online*.</span><span class="sxs-lookup"><span data-stu-id="56d5e-319">Traffic Manager makes a "best effort" attempt and *responds as if all the Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="56d5e-320">Toto chování je vhodnější alternativu, která by mohla není v odpovědi DNS vrátit žádný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="56d5e-320">This behavior is preferable to the alternative, which would be to not return any endpoint in the DNS response.</span></span> <span data-ttu-id="56d5e-321">Nejsou monitorovány zakázán nebo zastaven koncových bodů, proto nejsou považovány za vhodné pro provoz.</span><span class="sxs-lookup"><span data-stu-id="56d5e-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="56d5e-322">Tento stav je obvykle způsobeny nesprávná konfigurace služby, jako například:</span><span class="sxs-lookup"><span data-stu-id="56d5e-322">This condition is commonly caused by improper configuration of the service, such as:</span></span>
>
> * <span data-ttu-id="56d5e-323">Seznam řízení přístupu [ACL] blokování kontroly stavu Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="56d5e-323">An access control list [ACL] blocking the Traffic Manager health checks.</span></span>
> * <span data-ttu-id="56d5e-324">Nesprávná konfigurace monitorování portu nebo protokol v profil správce provozu.</span><span class="sxs-lookup"><span data-stu-id="56d5e-324">An improper configuration of the monitoring port or protocol in the Traffic manager profile.</span></span>
>
> <span data-ttu-id="56d5e-325">Důsledků toto chování je, že pokud kontroly stavu Traffic Manager nejsou správně konfigurována, může se zdát, z provozu, jako když směrování Traffic Manager *je* funguje správně.</span><span class="sxs-lookup"><span data-stu-id="56d5e-325">The consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from the traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="56d5e-326">Však v takovém případě převzetí služeb při selhání koncový bod nemůže dojít, které ovlivní celkové aplikace k dispozici.</span><span class="sxs-lookup"><span data-stu-id="56d5e-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="56d5e-327">Je důležité zkontrolovat, že profil ukazuje Online stavu, není stav snížený.</span><span class="sxs-lookup"><span data-stu-id="56d5e-327">It is important to check that the profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="56d5e-328">Online stav označuje, že kontroly stavu Traffic Manager funguje podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="56d5e-328">An Online status indicates that the Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="56d5e-329">Další informace o řešení potíží se nezdařilo kontroly stavu, najdete v části [řešení potíží s Degradovaný stav na Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="56d5e-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="56d5e-330">Další kroky</span><span class="sxs-lookup"><span data-stu-id="56d5e-330">Next steps</span></span>

<span data-ttu-id="56d5e-331">Další informace [fungování Traffic Manager](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="56d5e-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="56d5e-332">Další informace o [metody směrování provozu](traffic-manager-routing-methods.md) podporované nástrojem Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="56d5e-332">Learn more about the [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="56d5e-333">Zjistěte, jak [vytvořit profil správce provozu](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="56d5e-333">Learn how to [create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="56d5e-334">[Řešení potíží s stav snížený](traffic-manager-troubleshooting-degraded.md) na koncový bod Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="56d5e-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>
