---
title: "metodách směrování provozu Traffic Manager - aaaAzure | Microsoft Docs"
description: "To vám pomůže pochopit metody směrování hello jiný přenos používaný správcem provoz články"
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="15bdd-103">Metody směrování Traffic Manageru</span><span class="sxs-lookup"><span data-stu-id="15bdd-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="15bdd-104">Azure Traffic Manager podporuje čtyři směrování provozu metody toodetermine jak tooroute síťový provoz toohello různé koncové body služby.</span><span class="sxs-lookup"><span data-stu-id="15bdd-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="15bdd-105">Správce provozu se vztahuje hello směrování provozu metoda tooeach dotaz DNS, které obdrží.</span><span class="sxs-lookup"><span data-stu-id="15bdd-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="15bdd-106">Metoda směrování provozu Hello Určuje, kterému koncovému bodu, vrátí se v odpovědi DNS hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="15bdd-107">Jsou k dispozici v Traffic Manageru čtyři metody směrování provozu:</span><span class="sxs-lookup"><span data-stu-id="15bdd-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="15bdd-108">**[Priorita](#priority):** vyberte **s prioritou** při toouse koncový bod primární služba pro veškerý provoz a zadejte zálohování v případě, že hello primární nebo hello zálohování koncových bodů nejsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="15bdd-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="15bdd-109">**[Vážená](#weighted):** vyberte **vážená** když chcete toodistribute provoz mezi sadu koncových bodů, buď rovnoměrně nebo podle tooweights, které definujete.</span><span class="sxs-lookup"><span data-stu-id="15bdd-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="15bdd-110">**[Výkon](#performance):** vyberte **výkonu** Pokud máte koncové body v různých zeměpisných místech a chcete, aby koncoví uživatelé toouse hello "nejbližší" endpoint z hlediska hello nejnižší latenci sítě.</span><span class="sxs-lookup"><span data-stu-id="15bdd-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="15bdd-111">**[Zeměpisná](#geographic):** vyberte **geografické** tak, aby uživatelé směrovanou toospecific koncových bodů (Azure, externí nebo vnořené) na základě které zeměpisné umístění svého dotazu DNS pochází z.</span><span class="sxs-lookup"><span data-stu-id="15bdd-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="15bdd-112">To umožňuje Traffic Manager zákazníci tooenable scénáře, kde je důležité zároveň budete vědět, geografické oblasti uživatele a směrování je založeno na tomto.</span><span class="sxs-lookup"><span data-stu-id="15bdd-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="15bdd-113">Mezi příklady patří soulad s pověřeními suverenity dat, lokalizace obsah & uživatelské prostředí a měření provoz z různých oblastech.</span><span class="sxs-lookup"><span data-stu-id="15bdd-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="15bdd-114">Všechny profily Traffic Manager zahrnují monitorování stavu koncový bod a koncový bod automatické převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="15bdd-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="15bdd-115">Další informace najdete v tématu [Traffic Manager koncového bodu monitorování](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="15bdd-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="15bdd-116">Jeden profil Traffic Manageru můžete použít pouze jednu metodu směrování provozu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="15bdd-117">Kdykoli můžete vybrat metodu směrování různých provozu pro svůj profil.</span><span class="sxs-lookup"><span data-stu-id="15bdd-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="15bdd-118">Změny se použijí během jedné minuty a započítány jsou nedojde k žádnému výpadku.</span><span class="sxs-lookup"><span data-stu-id="15bdd-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="15bdd-119">Metody směrování provozu lze spojovat pomocí vnořené profily Traffic Manageru.</span><span class="sxs-lookup"><span data-stu-id="15bdd-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="15bdd-120">Vnoření umožňuje sofistikovaná a flexibilní směrování provozu konfigurace, které splňují hello potřebám větší a složité aplikace.</span><span class="sxs-lookup"><span data-stu-id="15bdd-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="15bdd-121">Další informace najdete v tématu [vnořené profily Traffic Manageru](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="15bdd-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="15bdd-122"><a name = "priority"></a>Metoda směrování provozu s prioritou</span><span class="sxs-lookup"><span data-stu-id="15bdd-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="15bdd-123">Často organizace chce tooprovide spolehlivost pro své služby nasazením jednu nebo více zálohování služeb v případě, že jejich primární služba ocitne mimo provoz.</span><span class="sxs-lookup"><span data-stu-id="15bdd-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="15bdd-124">Metoda směrování provozu "Priority" Hello umožňuje Azure zákazníků tooeasily implementaci tohoto vzoru převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="15bdd-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Azure Traffic Manager, Priority, směrování provozu – metoda][1]

<span data-ttu-id="15bdd-126">Hello profil služby Traffic Manager obsahuje seznam koncových bodů služby seřazený podle priority.</span><span class="sxs-lookup"><span data-stu-id="15bdd-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="15bdd-127">Ve výchozím nastavení odešle Traffic Manager všechny přenosy toohello primární (nejvyšší priorita) koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="15bdd-128">Pokud hello primární koncový bod není k dispozici, směrování Traffic Manager hello druhý koncový bod toohello provoz.</span><span class="sxs-lookup"><span data-stu-id="15bdd-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="15bdd-129">Pokud oba hello primární a sekundární koncových bodů nejsou k dispozici, provoz hello přejde toohello třetí, a tak dále.</span><span class="sxs-lookup"><span data-stu-id="15bdd-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="15bdd-130">Dostupnost hello koncového bodu je založena na stav hello nakonfigurované (povolit nebo zakázat) a hello monitorování probíhající koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="15bdd-131">Konfigurace koncových bodů</span><span class="sxs-lookup"><span data-stu-id="15bdd-131">Configuring endpoints</span></span>

<span data-ttu-id="15bdd-132">S Azure Resource Manager, můžete nakonfigurovat Priorita koncového bodu hello explicitně pomocí vlastnosti "priority" hello pro každý koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="15bdd-133">Tato vlastnost je hodnotu v rozmezí 1 až 1000.</span><span class="sxs-lookup"><span data-stu-id="15bdd-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="15bdd-134">Nižší hodnoty představují vyšší prioritu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="15bdd-135">Koncové body nemohou sdílet hodnoty priority.</span><span class="sxs-lookup"><span data-stu-id="15bdd-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="15bdd-136">Nastavení vlastnosti hello je volitelné.</span><span class="sxs-lookup"><span data-stu-id="15bdd-136">Setting hello property is optional.</span></span> <span data-ttu-id="15bdd-137">Když tento parametr vynechán, použije se výchozí prioritu podle pořadí hello koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="15bdd-138"><a name = "weighted"></a>Vážené směrování provozu – metoda</span><span class="sxs-lookup"><span data-stu-id="15bdd-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="15bdd-139">směrování provozu "Vážená" Hello metoda vám umožní toodistribute provoz rovnoměrně nebo toouse předem definované vyvážení.</span><span class="sxs-lookup"><span data-stu-id="15bdd-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Azure Traffic Manager 'Vyvážené' směrování provozu – metoda][2]

<span data-ttu-id="15bdd-141">Hello vyvážené směrování provozu metoda přiřaďte tooeach koncový bod váhy v konfiguraci profilu Traffic Manageru hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="15bdd-142">Váha Hello je celé číslo od 1 too1000.</span><span class="sxs-lookup"><span data-stu-id="15bdd-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="15bdd-143">Tento parametr je volitelný.</span><span class="sxs-lookup"><span data-stu-id="15bdd-143">This parameter is optional.</span></span> <span data-ttu-id="15bdd-144">Pokud tento parametr vynechán, provoz správce používá výchozí váhu '1'.</span><span class="sxs-lookup"><span data-stu-id="15bdd-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="15bdd-145">Pro každé přijaté dotazy DNS Traffic Manager náhodně zvolí koncový bod k dispozici.</span><span class="sxs-lookup"><span data-stu-id="15bdd-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="15bdd-146">pravděpodobnost Hello podle uvážení koncového bodu je založená na hello váhu přiřazené tooall koncové body k dispozici.</span><span class="sxs-lookup"><span data-stu-id="15bdd-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="15bdd-147">Pomocí hello mezi všechny koncové body výsledky v distribuce přenosů i vážené stejné.</span><span class="sxs-lookup"><span data-stu-id="15bdd-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="15bdd-148">Pomocí vyšší nebo nižší váhu na konkrétním koncovým bodům způsobí, že tyto koncové body toobe více nebo méně často, vrátí se v odpovědi DNS hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="15bdd-149">Metoda Hello vážené umožňuje některé užitečné scénáře:</span><span class="sxs-lookup"><span data-stu-id="15bdd-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="15bdd-150">Aplikace postupného upgradu: přidělte procento nový koncový bod provoz tooroute tooa a postupně zvyšovat hello provoz přes čas too100 %.</span><span class="sxs-lookup"><span data-stu-id="15bdd-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="15bdd-151">Aplikace migrace tooAzure: vytvoření profilu s Azure a externími koncovými body.</span><span class="sxs-lookup"><span data-stu-id="15bdd-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="15bdd-152">Upravte hello váhu hello koncové body koncové tooprefer nové body hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="15bdd-153">Cloud bursting pro dodatečnou kapacitu: rychle rozbalte položku místní nasazení do cloudu hello umístěním za profil Traffic Manageru.</span><span class="sxs-lookup"><span data-stu-id="15bdd-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="15bdd-154">Pokud budete potřebovat víc kapacity v cloudu hello, můžete přidat nebo povolit další koncové body a určit, jaké části přenosů přejde tooeach koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="15bdd-155">Hello portálu Azure Resource Manager podporuje hello konfiguraci směrování vyvážené provozu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="15bdd-156">Můžete nakonfigurovat váhu používat hello verze správce prostředků Azure PowerShell, rozhraní příkazového řádku a hello rozhraní REST API.</span><span class="sxs-lookup"><span data-stu-id="15bdd-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="15bdd-157">Je důležité toounderstand, odpovědí DNS jsou uložené v mezipaměti klienty a servery DNS rekurzivní hello, které hello klientům používat tooresolve názvy DNS.</span><span class="sxs-lookup"><span data-stu-id="15bdd-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="15bdd-158">Toto použití mezipaměti může mít vliv na provoz vyvážené distribuce.</span><span class="sxs-lookup"><span data-stu-id="15bdd-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="15bdd-159">Po velký počet hello klienty a servery DNS rekurzivní distribuce přenosů funguje podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="15bdd-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="15bdd-160">Ale při malém počtu hello klientů nebo serverů DNS rekurzivní ukládání do mezipaměti může výrazně zkreslit distribuce přenosů hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="15bdd-161">Běžné případy použití patří:</span><span class="sxs-lookup"><span data-stu-id="15bdd-161">Common use cases include:</span></span>

* <span data-ttu-id="15bdd-162">Vývoj a testování prostředí</span><span class="sxs-lookup"><span data-stu-id="15bdd-162">Development and testing environments</span></span>
* <span data-ttu-id="15bdd-163">Komunikace aplikace – aplikace</span><span class="sxs-lookup"><span data-stu-id="15bdd-163">Application-to-application communications</span></span>
* <span data-ttu-id="15bdd-164">Aplikace zaměřené na úzké uživatele – základní hodnotu, která sdílejí společné rekurzivní infrastruktury služby DNS (například zaměstnanci společnosti připojení prostřednictvím proxy serveru)</span><span class="sxs-lookup"><span data-stu-id="15bdd-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="15bdd-165">Tyto účinky ukládání do mezipaměti DNS jsou běžné tooall provozu na základě DNS směrování systémů, nejen Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="15bdd-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="15bdd-166">V některých případech může explicitně vymazání hello mezipaměť DNS zadejte alternativní řešení.</span><span class="sxs-lookup"><span data-stu-id="15bdd-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="15bdd-167">V jiných případech může být vhodnější alternativní metodu směrování provozu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="15bdd-168"><a name = "performance"></a>Metoda směrování provozu výkonu</span><span class="sxs-lookup"><span data-stu-id="15bdd-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="15bdd-169">Nasazení koncové body ve dvou nebo více umístění mezi hello zeměkouli může zvýšit rychlost odezvy hello mnoho aplikací pomocí směrování provozu toohello umístění, které je 'nejbližší' tooyou.</span><span class="sxs-lookup"><span data-stu-id="15bdd-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="15bdd-170">Tuto možnost nabízí Hello metodu směrování provozu 'Výkonu'.</span><span class="sxs-lookup"><span data-stu-id="15bdd-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Azure Traffic Manager, výkon, směrování provozu – metoda][3]

<span data-ttu-id="15bdd-172">Hello 'nejbližší' koncový bod není nutně nejbližší měřený podle zeměpisného vzdálenost.</span><span class="sxs-lookup"><span data-stu-id="15bdd-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="15bdd-173">Místo toho hello metodu směrování provozu, výkon, určuje hello nejbližší koncového bodu na základě měření latence sítě.</span><span class="sxs-lookup"><span data-stu-id="15bdd-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="15bdd-174">Správce provozu udržuje Internetu latence tabulky tootrack hello doba odezvy mezi rozsahů IP adres a každé datové centrum Azure.</span><span class="sxs-lookup"><span data-stu-id="15bdd-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="15bdd-175">Správce provozu vyhledává hello zdrojové IP adresy hello příchozích požadavků na DNS v hello Internet latence tabulky.</span><span class="sxs-lookup"><span data-stu-id="15bdd-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="15bdd-176">Správce provozu zvolí koncový bod k dispozici v hello datové centrum Azure, který má nejnižší latenci hello pro tento rozsah IP adres a potom vrátí tohoto koncového bodu v hello odpověď DNS.</span><span class="sxs-lookup"><span data-stu-id="15bdd-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="15bdd-177">Jak je popsáno v [jak Traffic Manager funguje](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager neobdrží dotazy DNS přímo z klientů.</span><span class="sxs-lookup"><span data-stu-id="15bdd-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="15bdd-178">Místo toho dotazy DNS pocházet ze služby DNS rekurzivní hello, že jsou klienti hello nakonfigurované toouse.</span><span class="sxs-lookup"><span data-stu-id="15bdd-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="15bdd-179">Proto hello IP adresa použitá toodetermine hello 'nejbližší' koncový bod není IP adresa klienta hello, ale je služba DNS rekurzivní hello hello IP adresu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="15bdd-180">Tato IP adresa v praxi, je dobré proxy pro klienta hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="15bdd-181">Traffic Manager pravidelně, které aktualizace hello Internet latence tabulky tooaccount změny v hello globální Internetu a nové oblastech Azure.</span><span class="sxs-lookup"><span data-stu-id="15bdd-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="15bdd-182">Ale výkonu aplikací se liší podle v reálném čase rozdíly v zatížení napříč hello Internetu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="15bdd-183">Směrování provozu výkonu nesleduje zatížení koncového bodu dané služby.</span><span class="sxs-lookup"><span data-stu-id="15bdd-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="15bdd-184">Ale pokud koncový bod stane nedostupným, Traffic Manager nezahrnuje ho v odpovědi na dotazy DNS.</span><span class="sxs-lookup"><span data-stu-id="15bdd-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="15bdd-185">Toonote body:</span><span class="sxs-lookup"><span data-stu-id="15bdd-185">Points toonote:</span></span>

* <span data-ttu-id="15bdd-186">Pokud váš profil obsahuje několik koncových bodů v hello stejné oblasti Azure, pak Traffic Manager rovnoměrně rozděluje zatížení mezi hello dostupných koncových bodů v této oblasti.</span><span class="sxs-lookup"><span data-stu-id="15bdd-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="15bdd-187">Pokud dáváte přednost distribuce různých přenosů v rámci oblasti, můžete použít [vnořené profily Traffic Manageru](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="15bdd-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="15bdd-188">Pokud všechny povolené koncové body v hello nejbližší oblast Azure jsou sníženou, Traffic Manager přesune toohello provoz koncovými body v hello další nejbližší oblast Azure.</span><span class="sxs-lookup"><span data-stu-id="15bdd-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="15bdd-189">Pokud chcete toodefine pořadí upřednostňované převzetí služeb při selhání, použijte [vnořené profily Traffic Manageru](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="15bdd-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="15bdd-190">Pokud používáte metodu směrování provozu hello výkonu externí koncové body nebo vnořené koncových bodů, je potřeba toospecify hello umístění těchto koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="15bdd-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="15bdd-191">Zvolte hello oblast Azure nejbližší tooyour nasazení.</span><span class="sxs-lookup"><span data-stu-id="15bdd-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="15bdd-192">Těchto lokalit jsou hodnoty hello nepodporuje hello Internet latence tabulky.</span><span class="sxs-lookup"><span data-stu-id="15bdd-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="15bdd-193">Hello algoritmus, který vybere hello koncový bod je deterministická.</span><span class="sxs-lookup"><span data-stu-id="15bdd-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="15bdd-194">Opakovat dotazy DNS z hello stejného klienta jsou směrované toohello stejný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="15bdd-195">Obvykle se klienti používat servery DNS jiné rekurzivní cestách.</span><span class="sxs-lookup"><span data-stu-id="15bdd-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="15bdd-196">Hello klienta může být směrované tooa jinému koncovému bodu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="15bdd-197">Směrování může být ovlivněn aktualizací toohello Internet latence tabulky.</span><span class="sxs-lookup"><span data-stu-id="15bdd-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="15bdd-198">Proto hello výkonu metodu směrování provozu není zaručeno, že klient je vždy směrovány toohello stejný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="15bdd-199">Při změně hello Internet latence tabulky, můžete si všimnout, že někteří klienti jsou řízené tooa jinému koncovému bodu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="15bdd-200">Tato změna směrování je přesnější podle aktuálního data latence.</span><span class="sxs-lookup"><span data-stu-id="15bdd-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="15bdd-201">Tyto aktualizace jsou nezbytné toomaintain hello přesnost výkonu-směrování provozu jako hello průběžně zpracovaní Internetu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="15bdd-202"><a name = "geographic"></a>Zeměpisná metodu směrování provozu</span><span class="sxs-lookup"><span data-stu-id="15bdd-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="15bdd-203">Profily Traffic Manageru může být nakonfigurované toouse hello Geographic metodu směrování, aby uživatelé jsou směrované toospecific koncových bodů (Azure, externí nebo vnořené) podle které zeměpisné umístění svého dotazu DNS pochází z.</span><span class="sxs-lookup"><span data-stu-id="15bdd-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="15bdd-204">To umožňuje Traffic Manager zákazníci tooenable scénáře, kde je důležité zároveň budete vědět, geografické oblasti uživatele a směrování je založeno na tomto.</span><span class="sxs-lookup"><span data-stu-id="15bdd-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="15bdd-205">Mezi příklady patří soulad s pověřeními suverenity dat, lokalizace obsah & uživatelské prostředí a měření provoz z různých oblastech.</span><span class="sxs-lookup"><span data-stu-id="15bdd-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="15bdd-206">Pokud profil je nakonfigurována pro zeměpisnou směrování, každý koncový bod přidružené, profil musí toohave sadu tooit zeměpisné oblasti přiřazen.</span><span class="sxs-lookup"><span data-stu-id="15bdd-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="15bdd-207">Může být geografické oblasti s následující úrovní členitosti</span><span class="sxs-lookup"><span data-stu-id="15bdd-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="15bdd-208">World – libovolné oblasti</span><span class="sxs-lookup"><span data-stu-id="15bdd-208">World– any region</span></span>
- <span data-ttu-id="15bdd-209">Místní seskupení – například Afrika, Střední východ, Austrálie/Tichomoří atd.</span><span class="sxs-lookup"><span data-stu-id="15bdd-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="15bdd-210">Země nebo oblast – například Irsku Peru, Hongkong – zvláštní správní oblast ČLR atd.</span><span class="sxs-lookup"><span data-stu-id="15bdd-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="15bdd-211">Kraj – například kalifornské USA, Austrálie – Queensland, Kanada Alberta atd. (Poznámka: Tato úroveň členitost je podporována pouze pro stavy nebo provincie Austrálie, Kanada, UK a USA).</span><span class="sxs-lookup"><span data-stu-id="15bdd-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="15bdd-212">Jakmile oblasti nebo sadu oblastí je přiřazena tooan koncový bod, získá všechny žádosti z těchto oblastí směrované jenom toothat koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="15bdd-213">Traffic Manager používá hello zdrojové IP adresy hello DNS dotazu toodetermine hello oblasti, ze kterého uživatel se dotazuje z – to je obvykle hello IP adresu místního Překladač DNS hello provádění dotazu hello jménem uživatele hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Azure Traffic Manager, geografické' směrování provozu – metoda](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="15bdd-215">Traffic Manager načte hello zdrojovou IP adresu hello dotazu DNS a rozhodne, které geografické oblasti je pocházející z.</span><span class="sxs-lookup"><span data-stu-id="15bdd-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="15bdd-216">Pak vypadá toosee, pokud je koncový bod, který má tato tooit geografické oblasti namapované.</span><span class="sxs-lookup"><span data-stu-id="15bdd-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="15bdd-217">Spustí toto vyhledávání na úrovni členitosti nejnižší hello (Kraj kde by je podporován, jinak v úrovně země nebo oblast hello) a klient se přepne všechny způsob hello nejvyšší úroveň toohello, což je **World**.</span><span class="sxs-lookup"><span data-stu-id="15bdd-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="15bdd-218">Pomocí této funkce traversal je určený jako koncový bod tooreturn hello v odpovědi na dotaz hello nalezena Hello první shodu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="15bdd-219">Pokud je vrácen odpovídající pomocí typu koncový bod vnořené, koncový bod v rámci této podřízené profilu, založené na jeho metody směrování.</span><span class="sxs-lookup"><span data-stu-id="15bdd-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="15bdd-220">Hello následující body jsou příslušné toothis chování:</span><span class="sxs-lookup"><span data-stu-id="15bdd-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="15bdd-221">Geografické oblasti může být namapované pouze endpoint tooone v profilu Traffic Manageru, když je typ směrování hello geografické směrování.</span><span class="sxs-lookup"><span data-stu-id="15bdd-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="15bdd-222">To zajišťuje, že směrování uživatelů je deterministická a zákazníků můžete povolit scénáře, které vyžadují jednoznačným geografické hranice.</span><span class="sxs-lookup"><span data-stu-id="15bdd-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="15bdd-223">Pokud uživatele oblast dodává do dvou různých koncových bodů zeměpisné mapování, Traffic Manager vybere hello koncový bod s nejnižší rozlišením hello a nebere v úvahu směrování žádostí z této oblasti toohello jiný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="15bdd-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="15bdd-224">Představte si třeba profil typ geografické směrování s dva koncové body - koncovém bodě 1 a Endpoint2.</span><span class="sxs-lookup"><span data-stu-id="15bdd-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="15bdd-225">Je nakonfigurovaný koncovém bodě 1 tooreceive provoz z Irsku a Endpoint2 je nakonfigurovaný tooreceive provoz z Evropa.</span><span class="sxs-lookup"><span data-stu-id="15bdd-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="15bdd-226">Pokud požadavek pochází z Irská, je vždy směrované tooEndpoint1.</span><span class="sxs-lookup"><span data-stu-id="15bdd-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="15bdd-227">Vzhledem k tomu, že v oblasti lze mapovat pouze tooone koncový bod, vrátí ji Traffic Manager bez ohledu na to, jestli je koncový bod hello v pořádku nebo ne.</span><span class="sxs-lookup"><span data-stu-id="15bdd-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="15bdd-228">Důrazně doporučujeme, aby zákazníci, kteří používají metody směrování geografické hello, přidružte ji k koncové hello vnořené typu body, které má podřízené profily obsahující alespoň dva koncové body v každém.</span><span class="sxs-lookup"><span data-stu-id="15bdd-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="15bdd-229">Pokud je nalezena shoda koncový bod a tohoto koncového bodu je v hello **Zastaveno** stavu Traffic Manager vrátí odpověď NODATA.</span><span class="sxs-lookup"><span data-stu-id="15bdd-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="15bdd-230">Žádné další hledání v takovém případě se provádí vyšší nahoru v hierarchii hello geografické oblasti.</span><span class="sxs-lookup"><span data-stu-id="15bdd-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="15bdd-231">Toto chování platí i pro typy vnořených koncových bodů při hello podřízené profilu je v hello **Zastaveno** nebo **zakázané** stavu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="15bdd-232">Pokud se zobrazí koncový bod **zakázané** stav, nebude zahrnutý v oblasti hello odpovídající procesu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="15bdd-233">Toto chování platí i pro typy vnořených koncových bodů při hello koncový bod je v hello **zakázané** stavu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="15bdd-234">Pokud dotaz pochází z zeměpisnou oblast, která nemá žádné mapování v tomto profilu, Traffic Manager vrátí odpověď NODATA.</span><span class="sxs-lookup"><span data-stu-id="15bdd-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="15bdd-235">Proto důrazně doporučujeme, aby zákazníci používat zeměpisné směrování s jeden koncový bod, v ideálním případě tohoto typu vnořené s alespoň dva koncové body v rámci profilu podřízené hello, s hello oblast **World** přiřazené tooit.</span><span class="sxs-lookup"><span data-stu-id="15bdd-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="15bdd-236">To také zajistí, zpracovává všechny IP adresy, které nejsou namapovány tooa oblast.</span><span class="sxs-lookup"><span data-stu-id="15bdd-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="15bdd-237">Jak je popsáno v [jak Traffic Manager funguje](traffic-manager-how-traffic-manager-works.md), Traffic Manager neobdrží dotazy DNS přímo z klientů.</span><span class="sxs-lookup"><span data-stu-id="15bdd-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="15bdd-238">Místo toho dotazy DNS pocházet ze služby DNS rekurzivní hello, že jsou klienti hello nakonfigurované toouse.</span><span class="sxs-lookup"><span data-stu-id="15bdd-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="15bdd-239">Proto hello IP adresa použitá toodetermine hello oblast není hello IP adresa klienta, ale je služba DNS rekurzivní hello hello IP adresu.</span><span class="sxs-lookup"><span data-stu-id="15bdd-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="15bdd-240">Tato IP adresa v praxi, je dobré proxy pro klienta hello.</span><span class="sxs-lookup"><span data-stu-id="15bdd-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="15bdd-241">Další kroky</span><span class="sxs-lookup"><span data-stu-id="15bdd-241">Next steps</span></span>

<span data-ttu-id="15bdd-242">Zjistěte, jak pomocí aplikací s vysokou dostupností toodevelop [monitorování koncového bodu Traffic Manager](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="15bdd-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="15bdd-243">Zjistěte, jak příliš[vytvořit profil správce provozu](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="15bdd-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



