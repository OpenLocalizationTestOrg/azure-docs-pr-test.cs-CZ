---
ms.assetid: 
title: "obnovitelného odstranění aaaAzure Key Vault | Microsoft Docs"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="0b591-102">Přehled konfigurace soft odstranění služby Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="0b591-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="0b591-103">Key Vault obnovitelného odstranění funkce umožňuje obnovení hello odstranit trezory a objekty trezoru, označuje jako obnovitelného odstranění.</span><span class="sxs-lookup"><span data-stu-id="0b591-103">Key Vault's soft delete feature allows recovery of hello deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="0b591-104">Konkrétně jsme adres hello následující scénáře:</span><span class="sxs-lookup"><span data-stu-id="0b591-104">Specifically, we address hello following scenarios:</span></span>

- <span data-ttu-id="0b591-105">Podpora pro obnovitelné odstranění trezoru klíčů</span><span class="sxs-lookup"><span data-stu-id="0b591-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="0b591-106">Podpora pro obnovitelné odstranění trezoru klíčů objektů (např.</span><span class="sxs-lookup"><span data-stu-id="0b591-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="0b591-107">klíče, certifikáty a tajné klíče)</span><span class="sxs-lookup"><span data-stu-id="0b591-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="0b591-108">Podpora rozhraní</span><span class="sxs-lookup"><span data-stu-id="0b591-108">Supporting interfaces</span></span>

<span data-ttu-id="0b591-109">Hello funkci soft odstranění je původně k dispozici prostřednictvím hello REST, .NET / C# a prostředí PowerShell rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0b591-109">hello soft-delete feature is initially available through hello REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="0b591-110">Odkazovat toohello odkazy na tyto další podrobnosti, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="0b591-110">Refer toohello references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="0b591-111">Scénáře</span><span class="sxs-lookup"><span data-stu-id="0b591-111">Scenarios</span></span>

<span data-ttu-id="0b591-112">Azure trezory klíč jsou sledované prostředky, spravovat pomocí Správce prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="0b591-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="0b591-113">Azure Resource Manager určuje také dobře definovaný chování pro odstranění, které vyžaduje, aby úspěšná operace odstranění musí mít za následek prostředku nebude přístupný už.</span><span class="sxs-lookup"><span data-stu-id="0b591-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="0b591-114">Hello funkci soft odstranění adresy hello obnovení hello odstraněn objekt, zda text hello, co se náhodnému nebo záměrnému.</span><span class="sxs-lookup"><span data-stu-id="0b591-114">hello soft-delete feature addresses hello recovery of hello deleted object, whether hello deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="0b591-115">V typické scénáři hello uživatele nechtěně odstraněno trezoru klíčů nebo objekt trezoru klíčů; Pokud tento trezor klíčů nebo klíč trezoru objekt byly toobe použitelná pro obnovení po předem určenou dobu, může uživatel hello hello odstranění vrátit zpět a obnovit svá data.</span><span class="sxs-lookup"><span data-stu-id="0b591-115">In hello typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were toobe recoverable for a predetermined period, hello user may undo hello deletion and recover their data.</span></span>

2. <span data-ttu-id="0b591-116">V případě různých neautorizovaný uživatel pokusit toodelete trezoru klíčů nebo objekt trezoru klíčů, například klíč v trezoru, přerušení obchodní toocause.</span><span class="sxs-lookup"><span data-stu-id="0b591-116">In a different scenario, a rogue user may attempt toodelete a key vault or a key vault object, such as a key inside a vault, toocause a business disruption.</span></span> <span data-ttu-id="0b591-117">Oddělení hello odstranění trezoru klíčů hello nebo objekt trezoru klíčů z hello skutečného odstranění hello základní dat můžete použít jako bezpečnostní opatření, například omezení oprávnění na tooa odstranění dat liší, důvěryhodné role.</span><span class="sxs-lookup"><span data-stu-id="0b591-117">Separating hello deletion of hello key vault or key vault object from hello actual deletion of hello underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion tooa different, trusted role.</span></span> <span data-ttu-id="0b591-118">Tento přístup efektivně vyžaduje kvora pro operace, které může jinak dojít ke ztrátě okamžité data.</span><span class="sxs-lookup"><span data-stu-id="0b591-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="0b591-119">Chování konfigurace soft odstranění</span><span class="sxs-lookup"><span data-stu-id="0b591-119">Soft-delete behavior</span></span>

<span data-ttu-id="0b591-120">Pomocí této funkce hello operace odstranění v trezoru klíčů nebo trezoru klíčů objekt je typu soft odstranění, efektivně podržíte hello prostředky pro danou uchování období, udělíte hello vzhled tento objekt hello se odstraní.</span><span class="sxs-lookup"><span data-stu-id="0b591-120">With this feature, hello DELETE operation on a key vault or key vault object is a soft-delete, effectively holding hello resources for a given retention period, while giving hello appearance that hello object is deleted.</span></span> <span data-ttu-id="0b591-121">Další služby Hello poskytuje mechanismus pro obnovení hello odstraněn objekt, v podstatě vrácení zpět hello odstranění.</span><span class="sxs-lookup"><span data-stu-id="0b591-121">hello service further provides a mechanism for recovering hello deleted object, essentially undoing hello deletion.</span></span> 

<span data-ttu-id="0b591-122">Konfigurace soft odstranění je volitelné chování Key Vault a je **není ve výchozím nastavení povolené** v této verzi.</span><span class="sxs-lookup"><span data-stu-id="0b591-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="0b591-123">Podrobnosti o povolení konfigurace soft odstranění pro váš trezor klíčů najdete v tématu hello konkrétní pokyny v hello odkaz pro rozhraní hello podle svého výběru [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="0b591-123">For details on enabling soft-delete for your key vault, see hello specific guidance in hello reference for hello interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="0b591-124">Obnovení klíče trezoru</span><span class="sxs-lookup"><span data-stu-id="0b591-124">Key vault recovery</span></span>

<span data-ttu-id="0b591-125">Po odstranění trezoru klíčů, služba hello vytvoří prostředek proxy serveru v rámci předplatného hello, přidání dostatečná metadata pro obnovení.</span><span class="sxs-lookup"><span data-stu-id="0b591-125">Upon deleting a key vault, hello service creates a proxy resource under hello subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="0b591-126">prostředek proxy Hello je objekt uložené, k dispozici v hello stejné umístění jako trezor klíčů odstranit hello.</span><span class="sxs-lookup"><span data-stu-id="0b591-126">hello proxy resource is a stored object, available in hello same location as hello deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="0b591-127">Obnovení objektu trezoru klíčů</span><span class="sxs-lookup"><span data-stu-id="0b591-127">Key vault object recovery</span></span>

<span data-ttu-id="0b591-128">Při odstraňování objekt trezoru klíčů, například klíč, služba hello umístí hello objekt v odstraněném stavu, a tím operacemi načítání nepřístupný tooany.</span><span class="sxs-lookup"><span data-stu-id="0b591-128">Upon deleting a key vault object, such as a key, hello service will place hello object in a deleted state, thus making it inaccessible tooany retrieval operations.</span></span> <span data-ttu-id="0b591-129">V tomto stavu, hello trezoru klíčů objekt můžete pouze uvedené, obnovené nebo vynuceně nebo trvale odstraněn.</span><span class="sxs-lookup"><span data-stu-id="0b591-129">While in this state, hello key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="0b591-130">V hello stejný čas, klíče trezoru se naplánuje hello odstranění hello základní data odpovídající toohello odstranit trezor klíčů nebo objekt trezoru klíčů pro provádění po předem určenou dobu.</span><span class="sxs-lookup"><span data-stu-id="0b591-130">At hello same time, Key Vault will schedule hello deletion of hello underlying data corresponding toohello deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="0b591-131">Hello DNS záznam odpovídající toohello úložiště se také zachová hello doby trvání intervalu uchování hello.</span><span class="sxs-lookup"><span data-stu-id="0b591-131">hello DNS record corresponding toohello vault is also retained for hello duration of hello retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="0b591-132">Doba uchování dat konfigurace soft odstranění</span><span class="sxs-lookup"><span data-stu-id="0b591-132">Soft-delete retention period</span></span>

<span data-ttu-id="0b591-133">Logicky odstraněné prostředky jsou uchovány nastavte dobu, 90 dní.</span><span class="sxs-lookup"><span data-stu-id="0b591-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="0b591-134">Během intervalu uchování konfigurace soft odstranění hello platí následující hello:</span><span class="sxs-lookup"><span data-stu-id="0b591-134">During hello soft-delete retention interval, hello following apply:</span></span>

- <span data-ttu-id="0b591-135">Můžete seznam všech trezorů klíčů hello a trezoru klíčů objekty ve stavu obnovitelného odstranění hello pro vaše předplatné a také přístup k odstranění a obnovení informace o nich.</span><span class="sxs-lookup"><span data-stu-id="0b591-135">You may list all of hello key vaults and key vault objects in hello soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="0b591-136">Pouze uživatelé s speciální oprávnění vytvořit seznam odstraněných trezorů.</span><span class="sxs-lookup"><span data-stu-id="0b591-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="0b591-137">Doporučujeme uživatelům vytvořit vlastní roli s tyto speciální oprávnění pro zpracování odstranit trezorů.</span><span class="sxs-lookup"><span data-stu-id="0b591-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="0b591-138">Trezor klíčů se stejným názvem nelze v hello hello stejné umístění; odpovídajícím způsobem, trezor klíčů objekt nelze vytvořit v dané trezoru Pokud tento trezor klíčů obsahuje objekt s hello stejný název a který je v odstraněném stavu</span><span class="sxs-lookup"><span data-stu-id="0b591-138">A key vault with hello same name cannot be created in hello same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with hello same name and which is in a deleted state</span></span> 
- <span data-ttu-id="0b591-139">Jenom uživatel, konkrétně privilegované může obnovit trezoru klíčů nebo objekt trezoru klíčů vydání příkazu Obnovit na odpovídající proxy prostředek hello.</span><span class="sxs-lookup"><span data-stu-id="0b591-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on hello corresponding proxy resource.</span></span>
    - <span data-ttu-id="0b591-140">člen hello vlastní role, který má oprávnění toocreate hello trezoru klíčů ve skupině prostředků hello Hello uživatele, můžete obnovit hello trezoru.</span><span class="sxs-lookup"><span data-stu-id="0b591-140">hello user, member of hello custom role, who has hello privilege toocreate a key vault under hello resource group can restore hello vault.</span></span>
- <span data-ttu-id="0b591-141">Jenom uživatel, konkrétně privilegované může vynuceně odstranění trezoru klíčů nebo trezoru klíčů objektu po vydání příkazu delete na odpovídající prostředek proxy hello.</span><span class="sxs-lookup"><span data-stu-id="0b591-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on hello corresponding proxy resource.</span></span>

<span data-ttu-id="0b591-142">Pokud je obnovena na trezor klíčů nebo objekt trezoru klíčů, provede konec hello uchování interval hello služby v hello vyprázdnění hello obnovitelné odstranění trezoru klíčů nebo objekt trezoru klíčů a její obsah.</span><span class="sxs-lookup"><span data-stu-id="0b591-142">Unless a key vault or key vault object is recovered, at hello end of hello retention interval hello service performs a purge of hello soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="0b591-143">Odstranění prostředku nemusí přeplánovat.</span><span class="sxs-lookup"><span data-stu-id="0b591-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="0b591-144">Povolené vyprázdnění</span><span class="sxs-lookup"><span data-stu-id="0b591-144">Permitted purge</span></span>

<span data-ttu-id="0b591-145">Trvale odstraníte, čištění, trezoru klíčů je možné prostřednictvím operaci POST na prostředku hello proxy serveru a vyžaduje speciální oprávnění.</span><span class="sxs-lookup"><span data-stu-id="0b591-145">Permanently deleting, purging, a key vault is possible via a POST operation on hello proxy resource and requires special privileges.</span></span> <span data-ttu-id="0b591-146">Obecně platí pouze vlastník předplatného hello bude možné toopurge trezoru klíčů.</span><span class="sxs-lookup"><span data-stu-id="0b591-146">Generally, only hello subscription owner will be able toopurge a key vault.</span></span> <span data-ttu-id="0b591-147">aktivační události operaci POST Hello hello okamžité a nezotavitelné odstranění tohoto trezoru.</span><span class="sxs-lookup"><span data-stu-id="0b591-147">hello POST operation triggers hello immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="0b591-148">K výjimce toothis se hello nestane, pokud hello předplatného Azure byl označen jako *neodstranitelný*.</span><span class="sxs-lookup"><span data-stu-id="0b591-148">An exception toothis is hello case when hello Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="0b591-149">V takovém případě pouze hello služby může pak provést odstranění skutečné hello a nemá tak jako naplánované proces.</span><span class="sxs-lookup"><span data-stu-id="0b591-149">In this case, only hello service may then perform hello actual deletion, and does so as a scheduled process.</span></span> 



