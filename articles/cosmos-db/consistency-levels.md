---
title: "Úrovně konzistence v Azure Cosmos DB | Microsoft Docs"
description: "Azure Cosmos DB má pět úrovní konzistence můžete vyrovnávat případné konzistence, dostupností a latencí kompromis."
keywords: "konzistence typu případné azure cosmos databáze, azure, Microsoft azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="4d0ec-104">Data přizpůsobitelné úrovně konzistence v Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="4d0ec-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="4d0ec-105">Azure Cosmos DB slouží od základů až s globální distribuce v paměti pro každý datový model.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="4d0ec-106">Je navržen pro nabízejí předvídatelný s nízkou latencí záruky, dostupnost SLA 99,99 % a víc modely dobře definovaný volný konzistence.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="4d0ec-107">V současné době Azure Cosmos DB poskytuje pět úrovně konzistence: silnou, s ohraničenou odolností, založenou relace, konzistentní Předpona a případnou.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="4d0ec-108">Kromě **silné** a **konzistence typu případné** modely běžně nabízí distribuovaných databází Azure Cosmos DB nabízí tři další modely pečlivě kódované a operationalized konzistence a ověřila jejich užitečnost proti skutečných případy použití.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="4d0ec-109">Jedná se o **ohraničenou typu prošlostí**, **relace**, a **konzistentní předponu** úrovně konzistence.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="4d0ec-110">Kolektivně tyto úrovně pět konzistence umožňují provést dobře odůvodněnou kompromis mezi konzistencí, dostupností a latencí.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="4d0ec-111">Distribuovaná databáze a konzistence</span><span class="sxs-lookup"><span data-stu-id="4d0ec-111">Distributed databases and consistency</span></span>
<span data-ttu-id="4d0ec-112">Komerčně distribuované databáze spadají do dvou kategorií: databáze, které vůbec nenabízejí řádně definované osvědčené volby konzistence, a databáze, které nabízejí dvě extrémně programovatelné volby (silná vs. nahodilá konzistence).</span><span class="sxs-lookup"><span data-stu-id="4d0ec-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="4d0ec-113">Databáze uvedené jako první zatěžují vývojáře aplikací podrobnostmi protokolů replikace a očekávají od nich náročné kompromisy mezi konzistencí, dostupností, latencí a propustností.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="4d0ec-114">Druhá možnost klade tlak na volbu jednoho ze dvou extrémů.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="4d0ec-115">Navzdory spoustě průzkumů a návrhů více než 50 modelů konzistence nemohla komunita pro distribuované databáze komercionalizovat úrovně konzistence nad rámec silné a nahodilé konzistence.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="4d0ec-116">Cosmos DB umožňuje vývojářům si vybrat mezi pěti modely dobře definovaný konzistence podél spektra konzistence – nejsilnější, typu s ohraničenou prošlostí, [relace](http://dl.acm.org/citation.cfm?id=383631), konzistentní předponu a případnou.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Azure Cosmos DB nabízí více správně definovaných (uvolněných) modelů konzistence, z nichž je možné vybírat.](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="4d0ec-118">Následující tabulka uvádí konkrétní záruky, které poskytují jednotlivé úrovně konzistence.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="4d0ec-119">**Úrovně konzistence a záruky**</span><span class="sxs-lookup"><span data-stu-id="4d0ec-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="4d0ec-120">Úrovně konzistence</span><span class="sxs-lookup"><span data-stu-id="4d0ec-120">Consistency Level</span></span> | <span data-ttu-id="4d0ec-121">Záruky</span><span class="sxs-lookup"><span data-stu-id="4d0ec-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="4d0ec-122">Silné</span><span class="sxs-lookup"><span data-stu-id="4d0ec-122">Strong</span></span> | <span data-ttu-id="4d0ec-123">Linearizovatelnost</span><span class="sxs-lookup"><span data-stu-id="4d0ec-123">Linearizability</span></span> |
| <span data-ttu-id="4d0ec-124">Omezená neaktuálnost</span><span class="sxs-lookup"><span data-stu-id="4d0ec-124">Bounded Staleness</span></span> | <span data-ttu-id="4d0ec-125">Konzistentní předpona</span><span class="sxs-lookup"><span data-stu-id="4d0ec-125">Consistent Prefix.</span></span> <span data-ttu-id="4d0ec-126">Prodleva čtení mezi zápisy podle předpon k nebo intervalu t</span><span class="sxs-lookup"><span data-stu-id="4d0ec-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="4d0ec-127">Relace</span><span class="sxs-lookup"><span data-stu-id="4d0ec-127">Session</span></span>   | <span data-ttu-id="4d0ec-128">Konzistentní předpona</span><span class="sxs-lookup"><span data-stu-id="4d0ec-128">Consistent Prefix.</span></span> <span data-ttu-id="4d0ec-129">Monotónní čtení, monotónní zápisy, čtení zápisů, zápisy po čtení</span><span class="sxs-lookup"><span data-stu-id="4d0ec-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="4d0ec-130">Konzistentní předpona</span><span class="sxs-lookup"><span data-stu-id="4d0ec-130">Consistent Prefix</span></span> | <span data-ttu-id="4d0ec-131">Vrácené aktualizace jsou předponou všech aktualizací bez mezer</span><span class="sxs-lookup"><span data-stu-id="4d0ec-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="4d0ec-132">Nahodilé</span><span class="sxs-lookup"><span data-stu-id="4d0ec-132">Eventual</span></span>  | <span data-ttu-id="4d0ec-133">Čtení mimo pořadí</span><span class="sxs-lookup"><span data-stu-id="4d0ec-133">Out of order reads</span></span> |

<span data-ttu-id="4d0ec-134">Můžete nakonfigurovat výchozí úroveň konzistence účtu Cosmos DB (a později přepsat konzistenci v konkrétním požadavku pro čtení).</span><span class="sxs-lookup"><span data-stu-id="4d0ec-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="4d0ec-135">Výchozí úroveň konzistence interně, se vztahuje na data v rámci sady oddílů, které může span oblasti.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="4d0ec-136">O 73 % naše tenanty použijte konzistence typu relace a 20 % raději typu s ohraničenou prošlostí.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="4d0ec-137">Jsme pozorovat, že přibližně 3 % naše zákazníky experimentovat s různé úrovně konzistence původně před spuštěním na konkrétní konzistence volba pro svou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="4d0ec-138">Také pozorovat, že pouze 2 % naše tenanty přepsat úrovně konzistence na základě žádosti.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="4d0ec-139">V databázi Cosmos čtení zpracovat v relaci konzistentní předponu a konzistence typu případné jsou dvakrát jako levných jako čtení s konzistence typu silné nebo ohraničenou prošlostí.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="4d0ec-140">Cosmos DB má špičkové komplexní SLA 99,99 %, včetně záruk konzistence společně s dostupnosti, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="4d0ec-141">Můžeme využívat [linearizability kontrolu](http://dl.acm.org/citation.cfm?id=1806634), který nepřetržitě funguje přes naše služby telemetrie a zveřejněno sestavy veškerá porušení zásad konzistence pro vás.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="4d0ec-142">Pro typu s ohraničenou prošlostí jsme monitorování a hlášení žádné porušení tisíc a t hranice.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="4d0ec-143">Pro všechny pět úrovní volný konzistence jsme také sestavy [pravděpodobnosti typu s ohraničenou prošlostí metrika](http://dl.acm.org/citation.cfm?id=2212359) přímo pro vás.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="4d0ec-144">Rozsah konzistence</span><span class="sxs-lookup"><span data-stu-id="4d0ec-144">Scope of consistency</span></span>
<span data-ttu-id="4d0ec-145">Členitost konzistence je vymezen na žádost o jednoho uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="4d0ec-146">Žádost o zápis může odpovídat insert, replace, upsert a odstraňovat transakce.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="4d0ec-147">Stejně jako u zápisy, má také transakce čtení nebo dotazu obor na žádost o jednoho uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="4d0ec-148">Uživatel může být nutné stránkování přes velkým sadu výsledků dotazu, pokrývání uzlů více oddílů, ale každý přečíst transakce je omezená na jednu stránku a zpracování z v rámci jednoho oddílu.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="4d0ec-149">Úrovně konzistentnosti</span><span class="sxs-lookup"><span data-stu-id="4d0ec-149">Consistency levels</span></span>
<span data-ttu-id="4d0ec-150">Výchozí úroveň konzistence můžete nakonfigurovat na vašem účtu databáze, která platí pro všechny kolekce (a databází) v rámci účtu Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="4d0ec-151">Ve výchozím nastavení všechny čtení a dotazy vydaný pro uživatelem definované prostředky používají výchozí úroveň konzistence zadaný u databázového účtu.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="4d0ec-152">Můžete uvolnit úroveň konzistence pomocí požadavek specifického pro čtení nebo dotazu v každé z podporovaných rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="4d0ec-153">Existují pět typy úrovně konzistence nepodporuje Azure Cosmos DB protokol replikace, které poskytují zrušte kompromis mezi záruky konkrétní konzistence a výkon, jak je popsáno v této části.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="4d0ec-154">**Silná**:</span><span class="sxs-lookup"><span data-stu-id="4d0ec-154">**Strong**:</span></span> 

* <span data-ttu-id="4d0ec-155">Nabízí silnou konzistenci [linearizability](https://aphyr.com/posts/313-strong-consistency-models) zaručit s čtení zaručit vrátit nejnovější verzi položky.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="4d0ec-156">Silnou konzistenci zaručuje, že zápis se zobrazí po jeho je trvale potvrzený většinou kvora replik.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="4d0ec-157">Zápis je buď synchronně trvale potvrzený primárním serverem a kvora sekundárních databází nebo byl přerušen.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="4d0ec-158">Čtení vždy potvrdí se většinou číst kvora, klient nikdy uvidí zápisu nepotvrzené nebo jeho část a vždy záruku, přečtěte si nejnovější potvrzené zápisu.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="4d0ec-159">Azure Cosmos DB účty, které jsou nakonfigurovány pro použití silnou konzistenci nelze přiřadit více než jedné oblasti Azure pomocí svého účtu Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="4d0ec-160">Náklady na operace čtení (z hlediska [požadované jednotky](request-units.md) spotřebované) se silnou konzistenci je vyšší než relaci a případnou, ale stejný jako typu s ohraničenou prošlostí.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="4d0ec-161">**Vázaný typu prošlostí**:</span><span class="sxs-lookup"><span data-stu-id="4d0ec-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="4d0ec-162">Vázaný typu prošlostí konzistence záruky, které čtení může funkce lag za zápisy podle maximálně *tisíc* verze nebo předpony položky nebo *t* časovém intervalu.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="4d0ec-163">Proto pokud výběr ohraničenou typu prošlostí, typu "prošlostí" je možné nakonfigurovat dvěma způsoby: číslo verze *tisíc* položky, pomocí kterého čtení funkce lag za zápisů a časový interval *t*</span><span class="sxs-lookup"><span data-stu-id="4d0ec-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="4d0ec-164">Vázaný typu prošlostí nabízí celkové globální pořadí s výjimkou "typu prošlostí oknu."</span><span class="sxs-lookup"><span data-stu-id="4d0ec-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="4d0ec-165">Monotónní čtení záruky existuje v rámci oblasti uvnitř i mimo "typu prošlostí okna."</span><span class="sxs-lookup"><span data-stu-id="4d0ec-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="4d0ec-166">Typu s ohraničenou prošlostí poskytuje silnější záruku konzistence než relace nebo konzistence typu případné.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="4d0ec-167">Globálně distribuované aplikace doporučujeme, že používáte typu s ohraničenou prošlostí pro scénáře, kde chcete mít silnou konzistenci, ale také chcete 99,99 % dostupnost a s nízkou latencí.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="4d0ec-168">Azure Cosmos DB účty, které jsou nakonfigurovány s konzistence typu s ohraničenou prošlostí můžete přidružit libovolný počet oblastí Azure pomocí svého účtu Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="4d0ec-169">Náklady na operace čtení (z hlediska RUs spotřebované) s typu s ohraničenou prošlostí je vyšší než relace a konzistence typu případné, ale stejný jako silnou konzistenci.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="4d0ec-170">**Relace**:</span><span class="sxs-lookup"><span data-stu-id="4d0ec-170">**Session**:</span></span> 

* <span data-ttu-id="4d0ec-171">Na rozdíl od globální konzistence modely, které nabízí úrovně konzistence typu silné a ohraničenou prošlostí je vymezen konzistence typu relace k relaci klienta.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="4d0ec-172">Konzistence typu relace je ideální pro všechny scénáře, kde je zahrnuta relaci zařízení nebo uživatele, protože zaručuje monotónní čtení, monotónní zápisů a čtení zaručuje vlastní zápisy (RYW).</span><span class="sxs-lookup"><span data-stu-id="4d0ec-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="4d0ec-173">Konzistence typu relace poskytuje předvídatelnou konzistenci pro relaci a maximální propustnost čtení při nabízí nejnižší latenci zápisů a čtení.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="4d0ec-174">Azure Cosmos DB účty, které jsou nakonfigurovány s konzistence typu relace můžete přidružit libovolný počet oblastí Azure pomocí svého účtu Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="4d0ec-175">Náklady na operace čtení (z hlediska RUs spotřebované) s úrovní konzistence relace je typu s méně než silné a ohraničenou prošlostí, ale více než případné konzistence</span><span class="sxs-lookup"><span data-stu-id="4d0ec-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="4d0ec-176"><a id="consistent-prefix"></a>
**Konzistentní předponu**:</span><span class="sxs-lookup"><span data-stu-id="4d0ec-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="4d0ec-177">Konzistentní předponu zaručuje, že při absenci dalších zápisů budou repliky ve skupině konvergovat.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="4d0ec-178">Konzistentní předponu zaručuje, že čtení nikdy neuvidí mimo pořadí zápisy.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="4d0ec-179">Pokud zápisy se prováděly v pořadí `A, B, C`, pak klient uvidí buď `A`, `A,B`, nebo `A,B,C`, ale nikdy mimo pořadí jako `A,C` nebo `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="4d0ec-180">Azure Cosmos DB účty, které jsou nakonfigurovány s konzistentní předponu konzistence můžete přidružit libovolný počet oblastí Azure pomocí svého účtu Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="4d0ec-181">**Závěrečné**:</span><span class="sxs-lookup"><span data-stu-id="4d0ec-181">**Eventual**:</span></span> 

* <span data-ttu-id="4d0ec-182">Konzistence typu případné zaručuje, že při absenci dalších zápisů budou repliky ve skupině konvergovat.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="4d0ec-183">Konzistence typu případné je nejslabších formu konzistence, kde může klient získat hodnoty, které jsou starší než ty, které měl viděli.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="4d0ec-184">Konzistence typu případné poskytuje nejnižší konzistenci čtení, ale nabízí nejnižší latenci pro čtení i zápisy.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="4d0ec-185">Azure Cosmos DB účty, které jsou nakonfigurovány s konzistence typu případné můžete přidružit libovolný počet oblastí Azure pomocí svého účtu Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="4d0ec-186">Náklady na operace čtení (z hlediska RUs spotřebované) s konzistence typu případné úroveň je nejnižší všech úrovní konzistence Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="4d0ec-187">Konfigurace výchozí úroveň konzistence</span><span class="sxs-lookup"><span data-stu-id="4d0ec-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="4d0ec-188">V [portál Azure](https://portal.azure.com/), na panelu vlevo klikněte na tlačítko **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="4d0ec-189">V **Azure Cosmos DB** okně, vyberte databázi účet změnit.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="4d0ec-190">V okně účtu klikněte na **výchozí konzistence**.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="4d0ec-191">V **výchozí konzistence** okně, vyberte novou úroveň konzistence a klikněte na **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![Snímek obrazovky zvýraznění ikonu nastavení a vstupního výchozí konzistence](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="4d0ec-193">Úrovně konzistence pro dotazy</span><span class="sxs-lookup"><span data-stu-id="4d0ec-193">Consistency levels for queries</span></span>
<span data-ttu-id="4d0ec-194">Ve výchozím nastavení pro uživatelem definované prostředky úroveň konzistence pro dotazy je stejná jako úroveň konzistence pro čtení.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="4d0ec-195">Ve výchozím nastavení je synchronně aktualizace indexu na každý insert, replace nebo odstranit položky do kontejneru Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="4d0ec-196">To umožňuje dotazy vyhovět stejnou úroveň konzistence jako bod čtení.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="4d0ec-197">Zatímco Azure Cosmos DB je optimalizovaná zápisu která podporuje dlouhodobě svazky zápisy, synchronní indexu údržby a poskytování konzistentní dotazů, můžete nakonfigurovat určité kolekce k aktualizaci svého indexu líné.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="4d0ec-198">Opožděné indexování další součást zvyšuje výkon zápisu a je ideální pro hromadné přijímání scénáře při zatížení je primárně náročné na čtení.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="4d0ec-199">Indexování režimu</span><span class="sxs-lookup"><span data-stu-id="4d0ec-199">Indexing Mode</span></span> | <span data-ttu-id="4d0ec-200">Čtení</span><span class="sxs-lookup"><span data-stu-id="4d0ec-200">Reads</span></span> | <span data-ttu-id="4d0ec-201">Dotazy</span><span class="sxs-lookup"><span data-stu-id="4d0ec-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4d0ec-202">Konzistentní (výchozí)</span><span class="sxs-lookup"><span data-stu-id="4d0ec-202">Consistent (default)</span></span> |<span data-ttu-id="4d0ec-203">Vyberte z typu silné a ohraničenou prošlostí, relace, konzistentní předpony nebo případné</span><span class="sxs-lookup"><span data-stu-id="4d0ec-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="4d0ec-204">Vyberte, ze silného typu s ohraničenou prošlostí, relaci nebo případné</span><span class="sxs-lookup"><span data-stu-id="4d0ec-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="4d0ec-205">Opožděné</span><span class="sxs-lookup"><span data-stu-id="4d0ec-205">Lazy</span></span> |<span data-ttu-id="4d0ec-206">Vyberte z typu silné a ohraničenou prošlostí, relace, konzistentní předpony nebo případné</span><span class="sxs-lookup"><span data-stu-id="4d0ec-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="4d0ec-207">Nahodilé</span><span class="sxs-lookup"><span data-stu-id="4d0ec-207">Eventual</span></span> |
| <span data-ttu-id="4d0ec-208">Žádný</span><span class="sxs-lookup"><span data-stu-id="4d0ec-208">None</span></span> |<span data-ttu-id="4d0ec-209">Vyberte z typu silné a ohraničenou prošlostí, relace, konzistentní předpony nebo případné</span><span class="sxs-lookup"><span data-stu-id="4d0ec-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="4d0ec-210">Neuvedeno</span><span class="sxs-lookup"><span data-stu-id="4d0ec-210">Not applicable</span></span> |

<span data-ttu-id="4d0ec-211">Jako s požadavky na čtení, můžete snížit úroveň konzistence požadavku specifického dotazu v každé rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4d0ec-212">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4d0ec-212">Next steps</span></span>
<span data-ttu-id="4d0ec-213">Pokud chcete provést další výklad o úrovně konzistence a kompromisy, doporučujeme v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="4d0ec-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="4d0ec-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-214">Doug Terry.</span></span> <span data-ttu-id="4d0ec-215">Replikovaná Data konzistence vysvětlené prostřednictvím baseballové (video).</span><span class="sxs-lookup"><span data-stu-id="4d0ec-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="4d0ec-216">https://www.YouTube.com/Watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="4d0ec-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="4d0ec-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-217">Doug Terry.</span></span> <span data-ttu-id="4d0ec-218">Replikovaná Data konzistence vysvětlené prostřednictvím baseballové.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="4d0ec-219">http://Research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.PDF</span><span class="sxs-lookup"><span data-stu-id="4d0ec-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="4d0ec-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-220">Doug Terry.</span></span> <span data-ttu-id="4d0ec-221">Relace záruky pro slabě konzistentní replikovaná Data.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="4d0ec-222">http://DL.ACM.org/CITATION.cfm?ID=383631</span><span class="sxs-lookup"><span data-stu-id="4d0ec-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="4d0ec-223">ADAM Abadi.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-223">Daniel Abadi.</span></span> <span data-ttu-id="4d0ec-224">Konzistence kompromisy moderní distribuované návrhu databáze systémy: Zakončení je pouze část textu ".</span><span class="sxs-lookup"><span data-stu-id="4d0ec-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="4d0ec-225">http://Computer.org/CSDL/mags/co/2012/02/mco2012020037-ABS.HTML</span><span class="sxs-lookup"><span data-stu-id="4d0ec-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="4d0ec-226">Petr Bailis, Shivaram Venkataraman, Michael J. tw, Joseph M. Hellerstein, Stoica uchování.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="4d0ec-227">Pravděpodobnosti ohraničenou typu Prošlostí (PBS) pro praktické částečné kvor.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="4d0ec-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.PDF</span><span class="sxs-lookup"><span data-stu-id="4d0ec-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="4d0ec-229">Wernerovi Vogels.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-229">Werner Vogels.</span></span> <span data-ttu-id="4d0ec-230">Závěrečné konzistentní – kdykoli znovu spustit.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="4d0ec-231">http://allthingsdistributed.com/2008/12/eventually_consistent.HTML</span><span class="sxs-lookup"><span data-stu-id="4d0ec-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="4d0ec-232">Moni Naor, Avishai vlny, zatížení, kapacity a dostupnosti systémů kvora, SIAM deníku na výpočetních, v.27 n.2, p.423-447, duben 1998.</span><span class="sxs-lookup"><span data-stu-id="4d0ec-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="4d0ec-233">http://epubs.siam.org/DOI/Abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="4d0ec-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="4d0ec-234">Sebastianu Burckhardt, Jan Dern, Macanal Musuvathi, Royi Tan, řada produktů: nástroj úplný a automatické linearizability pro kontrolu, řízení 2010 konference ACM SIGPLAN na programovací jazyk návrhu a implementace, června 05-10, 2010, Toronto, Ontario, Kanada [doi > 10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="4d0ec-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="4d0ec-235">Petr Bailis, Shivaram Venkataraman, Michael J. tw, Joseph M. Hellerstein, uchování Stoica Probabilistically ohraničenou typu prošlostí pro praktické částečné kvor řízení dotační VLDB, v.5 n.8, p.776-787, duben 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="4d0ec-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>
