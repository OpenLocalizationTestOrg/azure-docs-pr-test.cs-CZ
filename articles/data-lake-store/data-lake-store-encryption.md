---
title: aaaEncryption v Azure Data Lake Store | Microsoft Docs
description: "Pochopíte, jak funguje šifrování a obměna klíčů v Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="b6044-103">Šifrování dat v Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="b6044-104">Šifrování v Azure Data Lake Store pomáhá chránit vaše data, implementovat zásady podnikového zabezpečení a splnit požadavky na dodržování legislativních předpisů.</span><span class="sxs-lookup"><span data-stu-id="b6044-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="b6044-105">Tento článek obsahuje přehled návrhu hello a popisuje některé z hello technické aspekty implementace.</span><span class="sxs-lookup"><span data-stu-id="b6044-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="b6044-106">Data Lake Store podporuje šifrování jak neaktivních uložených dat, tak i přenášených dat.</span><span class="sxs-lookup"><span data-stu-id="b6044-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="b6044-107">Pro neaktivní uložená data podporuje služba Data Lake Store „ve výchozím nastavení zapnuté“ transparentní šifrování.</span><span class="sxs-lookup"><span data-stu-id="b6044-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="b6044-108">Tady je podrobnější vysvětlení významu těchto termínů:</span><span class="sxs-lookup"><span data-stu-id="b6044-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="b6044-109">**Na ve výchozím nastavení**: Když vytvoříte nový účet Data Lake Store, hello výchozí nastavení povoluje šifrování.</span><span class="sxs-lookup"><span data-stu-id="b6044-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="b6044-110">Data, která je uložená v Data Lake Store je následně vždy šifrované předchozí toostoring na trvalé médiu.</span><span class="sxs-lookup"><span data-stu-id="b6044-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="b6044-111">To je hello chování pro všechna data a nelze jej změnit po vytvoření účtu.</span><span class="sxs-lookup"><span data-stu-id="b6044-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="b6044-112">**Transparentní**: Data Lake Store automaticky předchozí toopersisting data šifruje a dešifruje data předchozí tooretrieval.</span><span class="sxs-lookup"><span data-stu-id="b6044-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="b6044-113">šifrování Hello je nakonfigurované a spravované v hello Data Lake Store úroveň správce.</span><span class="sxs-lookup"><span data-stu-id="b6044-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="b6044-114">Nebudou provedeny žádné změny dat toohello přístup k rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="b6044-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="b6044-115">Proto není nutné kvůli šifrování měnit aplikace a služby, které pracují se službou Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="b6044-116">Přenášená data se ve službě Data Lake Store také vždy šifrují.</span><span class="sxs-lookup"><span data-stu-id="b6044-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="b6044-117">Kromě toho tooencrypting data předchozí toostoring toopersistent média, hello je také vždy zabezpečená data při přenosu pomocí protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="b6044-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="b6044-118">HTTPS je hello pouze protokol, který je podporován pro rozhraní Data Lake Store REST hello.</span><span class="sxs-lookup"><span data-stu-id="b6044-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="b6044-119">Hello následující diagram ukazuje, jak se změní na data šifrovaná v Data Lake Store:</span><span class="sxs-lookup"><span data-stu-id="b6044-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagram šifrování dat ve službě Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="b6044-121">Nastavení šifrování ve službě Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="b6044-122">Šifrování se pro službu Data Lake Store nastavuje během vytváření účtu a ve výchozím nastavení je vždy povoleno.</span><span class="sxs-lookup"><span data-stu-id="b6044-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="b6044-123">Můžete spravovat klíče hello sami, nebo povolit toomanage Data Lake Store je pro vás (Toto je výchozí hello).</span><span class="sxs-lookup"><span data-stu-id="b6044-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="b6044-124">Další informace najdete v tématu [Začínáme](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="b6044-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="b6044-125">Jak funguje šifrování ve službě Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="b6044-126">Hello následující informace se týkají jak toomanage hlavní šifrovací klíče a vysvětluje hello tři různé typy klíčů, které můžete použít v šifrování dat pro Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="b6044-127">Hlavní šifrovací klíče</span><span class="sxs-lookup"><span data-stu-id="b6044-127">Master encryption keys</span></span>

<span data-ttu-id="b6044-128">Data Lake Store nabízí dva režimy pro správu hlavních šifrovacích klíčů (MEK).</span><span class="sxs-lookup"><span data-stu-id="b6044-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="b6044-129">Teď předpokládají, že tento hello hlavní šifrovací klíč je klíč hello nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="b6044-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="b6044-130">Přístup k toohello hlavní šifrovací klíč je požadovaná toodecrypt všechna data uložená v Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="b6044-131">Hello dva režimy pro správu hello hlavní šifrovací klíč jsou následující:</span><span class="sxs-lookup"><span data-stu-id="b6044-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="b6044-132">Klíče spravované službou</span><span class="sxs-lookup"><span data-stu-id="b6044-132">Service managed keys</span></span>
*   <span data-ttu-id="b6044-133">Klíče spravované zákazníkem</span><span class="sxs-lookup"><span data-stu-id="b6044-133">Customer managed keys</span></span>

<span data-ttu-id="b6044-134">V obou režimech hello hlavní šifrovací klíč zabezpečené ukládání do Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="b6044-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="b6044-135">Key Vault je plně spravovaná, vysoce zabezpečených služba na platformě Azure, kterou lze použít toosafeguard kryptografické klíče.</span><span class="sxs-lookup"><span data-stu-id="b6044-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="b6044-136">Další informace najdete v tématu [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="b6044-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="b6044-137">Zde je stručný porovnání funkcí poskytovaných Správa hello MEKs hello dva režimy.</span><span class="sxs-lookup"><span data-stu-id="b6044-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="b6044-138">Klíče spravované službou</span><span class="sxs-lookup"><span data-stu-id="b6044-138">Service managed keys</span></span> | <span data-ttu-id="b6044-139">Klíče spravované zákazníkem</span><span class="sxs-lookup"><span data-stu-id="b6044-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="b6044-140">Jak se data ukládají?</span><span class="sxs-lookup"><span data-stu-id="b6044-140">How is data stored?</span></span>|<span data-ttu-id="b6044-141">Vždy šifrované předchozí toobeing uložené.</span><span class="sxs-lookup"><span data-stu-id="b6044-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="b6044-142">Vždy šifrované předchozí toobeing uložené.</span><span class="sxs-lookup"><span data-stu-id="b6044-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="b6044-143">Kde jsou uloženy hello hlavní šifrovací klíč?</span><span class="sxs-lookup"><span data-stu-id="b6044-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="b6044-144">Key Vault</span><span class="sxs-lookup"><span data-stu-id="b6044-144">Key Vault</span></span>|<span data-ttu-id="b6044-145">Key Vault</span><span class="sxs-lookup"><span data-stu-id="b6044-145">Key Vault</span></span>|
|<span data-ttu-id="b6044-146">Nejsou žádné šifrování klíče uložené v hello vymazat Key Vault?</span><span class="sxs-lookup"><span data-stu-id="b6044-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="b6044-147">Ne</span><span class="sxs-lookup"><span data-stu-id="b6044-147">No</span></span>|<span data-ttu-id="b6044-148">Ne</span><span class="sxs-lookup"><span data-stu-id="b6044-148">No</span></span>|
|<span data-ttu-id="b6044-149">Může načíst hello MEK Key Vault?</span><span class="sxs-lookup"><span data-stu-id="b6044-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="b6044-150">Ne.</span><span class="sxs-lookup"><span data-stu-id="b6044-150">No.</span></span> <span data-ttu-id="b6044-151">Po hello MEK je uložené v Key Vault lze možné použít pouze pro šifrování a dešifrování.</span><span class="sxs-lookup"><span data-stu-id="b6044-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="b6044-152">Ne.</span><span class="sxs-lookup"><span data-stu-id="b6044-152">No.</span></span> <span data-ttu-id="b6044-153">Po hello MEK je uložené v Key Vault lze možné použít pouze pro šifrování a dešifrování.</span><span class="sxs-lookup"><span data-stu-id="b6044-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="b6044-154">Kdo je vlastníkem hello Key Vault instance a hello MEK?</span><span class="sxs-lookup"><span data-stu-id="b6044-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="b6044-155">Hello služby Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-155">hello Data Lake Store service</span></span>|<span data-ttu-id="b6044-156">Vlastníte hello Key Vault instance, který patří do předplatného Azure.</span><span class="sxs-lookup"><span data-stu-id="b6044-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="b6044-157">Hello MEK v Key Vault můžou spravovat softwaru nebo hardwaru.</span><span class="sxs-lookup"><span data-stu-id="b6044-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="b6044-158">Můžete odvolat přístup toohello MEK pro hello služby Data Lake Store?</span><span class="sxs-lookup"><span data-stu-id="b6044-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="b6044-159">Ne</span><span class="sxs-lookup"><span data-stu-id="b6044-159">No</span></span>|<span data-ttu-id="b6044-160">Ano.</span><span class="sxs-lookup"><span data-stu-id="b6044-160">Yes.</span></span> <span data-ttu-id="b6044-161">Můžete spravovat seznamy řízení přístupu v Key Vault a odeberte identitu služby přístupu k řízení položky toohello pro hello služby Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="b6044-162">Je možné trvale odstranit hello MEK?</span><span class="sxs-lookup"><span data-stu-id="b6044-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="b6044-163">Ne</span><span class="sxs-lookup"><span data-stu-id="b6044-163">No</span></span>|<span data-ttu-id="b6044-164">Ano.</span><span class="sxs-lookup"><span data-stu-id="b6044-164">Yes.</span></span> <span data-ttu-id="b6044-165">Pokud odstraníte hello MEK z Key Vault, hello data v účtu Data Lake Store hello nelze dešifrovat každému uživateli, včetně služby Data Lake Store hello.</span><span class="sxs-lookup"><span data-stu-id="b6044-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="b6044-166">Pokud jste explicitně zálohovali hello MEK předchozí toodeleting ji z Key Vault, hello MEK lze obnovit a pak lze obnovit hello data.</span><span class="sxs-lookup"><span data-stu-id="b6044-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="b6044-167">Ale pokud nebyla zálohována předchozí toodeleting hello MEK ho z Key Vault, hello data v hello účtu Data Lake Store můžete nikdy dešifrovat po tomto datu.</span><span class="sxs-lookup"><span data-stu-id="b6044-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="b6044-168">Kromě zajištění dostatečného tento rozdíl, který spravuje hello MEK a hello Key Vault instance ve kterém se nachází, hello zbytek hello návrhu je hello stejné pro oba režimy.</span><span class="sxs-lookup"><span data-stu-id="b6044-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="b6044-169">Když zvolíte hello režim pro hello hlavní šifrovací klíče je důležité tooremember hello následující:</span><span class="sxs-lookup"><span data-stu-id="b6044-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="b6044-170">Můžete zvolit, jestli toouse zákazník spravuje klíče nebo klíče služby spravované při zřizování účtu Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="b6044-171">Po zřízení účtu Data Lake Store, nelze změnit režim hello.</span><span class="sxs-lookup"><span data-stu-id="b6044-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="b6044-172">Šifrování a dešifrování dat</span><span class="sxs-lookup"><span data-stu-id="b6044-172">Encryption and decryption of data</span></span>

<span data-ttu-id="b6044-173">Existují tři typy klíčů, které se používají v návrhu hello dat šifrování.</span><span class="sxs-lookup"><span data-stu-id="b6044-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="b6044-174">Hello následující tabulka obsahuje souhrn:</span><span class="sxs-lookup"><span data-stu-id="b6044-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="b6044-175">Klíč</span><span class="sxs-lookup"><span data-stu-id="b6044-175">Key</span></span>                   | <span data-ttu-id="b6044-176">Zkratka</span><span class="sxs-lookup"><span data-stu-id="b6044-176">Abbreviation</span></span> | <span data-ttu-id="b6044-177">Přidružený k</span><span class="sxs-lookup"><span data-stu-id="b6044-177">Associated with</span></span> | <span data-ttu-id="b6044-178">Umístění úložiště</span><span class="sxs-lookup"><span data-stu-id="b6044-178">Storage location</span></span>                             | <span data-ttu-id="b6044-179">Typ</span><span class="sxs-lookup"><span data-stu-id="b6044-179">Type</span></span>       | <span data-ttu-id="b6044-180">Poznámky</span><span class="sxs-lookup"><span data-stu-id="b6044-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b6044-181">Hlavní šifrovací klíč</span><span class="sxs-lookup"><span data-stu-id="b6044-181">Master Encryption Key</span></span> | <span data-ttu-id="b6044-182">MEK</span><span class="sxs-lookup"><span data-stu-id="b6044-182">MEK</span></span>          | <span data-ttu-id="b6044-183">Účet Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-183">A Data Lake Store account</span></span> | <span data-ttu-id="b6044-184">Key Vault</span><span class="sxs-lookup"><span data-stu-id="b6044-184">Key Vault</span></span>                              | <span data-ttu-id="b6044-185">Asymetrický</span><span class="sxs-lookup"><span data-stu-id="b6044-185">Asymmetric</span></span> | <span data-ttu-id="b6044-186">Může být spravovaný službou Data Lake Store nebo vámi.</span><span class="sxs-lookup"><span data-stu-id="b6044-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="b6044-187">Šifrovací klíč dat</span><span class="sxs-lookup"><span data-stu-id="b6044-187">Data Encryption Key</span></span>   | <span data-ttu-id="b6044-188">DEK</span><span class="sxs-lookup"><span data-stu-id="b6044-188">DEK</span></span>          | <span data-ttu-id="b6044-189">Účet Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-189">A Data Lake Store account</span></span> | <span data-ttu-id="b6044-190">Trvalé úložiště spravované službou Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="b6044-191">Symetrický</span><span class="sxs-lookup"><span data-stu-id="b6044-191">Symmetric</span></span>  | <span data-ttu-id="b6044-192">hello MEK šifrování Hello klíč DEK.</span><span class="sxs-lookup"><span data-stu-id="b6044-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="b6044-193">Dobrý den, který je šifrovaný klíč DEK, co je uložen na médiu trvalé.</span><span class="sxs-lookup"><span data-stu-id="b6044-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="b6044-194">Šifrovací klíč bloku</span><span class="sxs-lookup"><span data-stu-id="b6044-194">Block Encryption Key</span></span>  | <span data-ttu-id="b6044-195">BEK</span><span class="sxs-lookup"><span data-stu-id="b6044-195">BEK</span></span>          | <span data-ttu-id="b6044-196">Blokem dat</span><span class="sxs-lookup"><span data-stu-id="b6044-196">A block of data</span></span> | <span data-ttu-id="b6044-197">Žádný</span><span class="sxs-lookup"><span data-stu-id="b6044-197">None</span></span>                                         | <span data-ttu-id="b6044-198">Symetrický</span><span class="sxs-lookup"><span data-stu-id="b6044-198">Symmetric</span></span>  | <span data-ttu-id="b6044-199">Hello BEK je odvozená od hello klíč DEK a hello datového bloku.</span><span class="sxs-lookup"><span data-stu-id="b6044-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="b6044-200">Hello následující diagram znázorňuje tyto koncepty:</span><span class="sxs-lookup"><span data-stu-id="b6044-200">hello following diagram illustrates these concepts:</span></span>

![Klíče v šifrování dat](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="b6044-202">Pokud je soubor toobe dešifrovat pseudo algoritmus:</span><span class="sxs-lookup"><span data-stu-id="b6044-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="b6044-203">Zkontrolujte, jestli hello klíč DEK pro účet Data Lake Store hello je uložená v mezipaměti a připravena k použití.</span><span class="sxs-lookup"><span data-stu-id="b6044-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="b6044-204">Pokud ne, přečtěte si, že hello zašifrování klíč DEK z trvalého úložiště a odeslat toobe trezoru tooKey dešifrovat.</span><span class="sxs-lookup"><span data-stu-id="b6044-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="b6044-205">Mezipaměť hello dešifruje klíč DEK v paměti.</span><span class="sxs-lookup"><span data-stu-id="b6044-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="b6044-206">Je nyní připraven toouse.</span><span class="sxs-lookup"><span data-stu-id="b6044-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="b6044-207">Pro každý blok dat v souboru hello:</span><span class="sxs-lookup"><span data-stu-id="b6044-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="b6044-208">Hello šifrované blok pro čtení dat z trvalého úložiště.</span><span class="sxs-lookup"><span data-stu-id="b6044-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="b6044-209">Generování hello BEK z hello klíč DEK a hello blok šifrovaná data.</span><span class="sxs-lookup"><span data-stu-id="b6044-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="b6044-210">Hello BEK toodecrypt data použijte.</span><span class="sxs-lookup"><span data-stu-id="b6044-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="b6044-211">Pokud bloku dat je toobe šifrované pseudo algoritmus:</span><span class="sxs-lookup"><span data-stu-id="b6044-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="b6044-212">Zkontrolujte, jestli hello klíč DEK pro účet Data Lake Store hello je uložená v mezipaměti a připravena k použití.</span><span class="sxs-lookup"><span data-stu-id="b6044-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="b6044-213">Pokud ne, přečtěte si, že hello zašifrování klíč DEK z trvalého úložiště a odeslat toobe trezoru tooKey dešifrovat.</span><span class="sxs-lookup"><span data-stu-id="b6044-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="b6044-214">Mezipaměť hello dešifruje klíč DEK v paměti.</span><span class="sxs-lookup"><span data-stu-id="b6044-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="b6044-215">Je nyní připraven toouse.</span><span class="sxs-lookup"><span data-stu-id="b6044-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="b6044-216">Generovat jedinečný BEK hello bloku dat z hello klíč DEK.</span><span class="sxs-lookup"><span data-stu-id="b6044-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="b6044-217">Datový blok hello s hello BEK, šifrovat pomocí šifrování AES-256.</span><span class="sxs-lookup"><span data-stu-id="b6044-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="b6044-218">Ukládat blok šifrovaných dat hello dat do trvalého úložiště.</span><span class="sxs-lookup"><span data-stu-id="b6044-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="b6044-219">Z důvodů výkonu hello vymazat klíč DEK v hello je uložené v mezipaměti v paměti po krátkou dobu a okamžitě vymazáním i později.</span><span class="sxs-lookup"><span data-stu-id="b6044-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="b6044-220">Na trvalé média vždy uloženy ve hello MEK šifrování.</span><span class="sxs-lookup"><span data-stu-id="b6044-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="b6044-221">Obměna klíčů</span><span class="sxs-lookup"><span data-stu-id="b6044-221">Key rotation</span></span>

<span data-ttu-id="b6044-222">Při použití klíče spravovaného zákazníkem, můžete otočit hello MEK.</span><span class="sxs-lookup"><span data-stu-id="b6044-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="b6044-223">toolearn jak zjistit, tooset účet Data Lake Store s klíči spravované zákazníkem [Začínáme](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="b6044-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="b6044-224">Požadavky</span><span class="sxs-lookup"><span data-stu-id="b6044-224">Prerequisites</span></span>

<span data-ttu-id="b6044-225">Při nastavování hello účtu Data Lake Store, vybrali jste toouse vlastní klíče.</span><span class="sxs-lookup"><span data-stu-id="b6044-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="b6044-226">Tuto možnost nelze změnit po vytvoření účtu hello.</span><span class="sxs-lookup"><span data-stu-id="b6044-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="b6044-227">Hello následující postup předpokládá, že používáte klíče spravovaného zákazníkem (to znamená, rozhodli jste se vlastní klíče z trezoru klíč).</span><span class="sxs-lookup"><span data-stu-id="b6044-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="b6044-228">Všimněte si, že pokud používáte hello výchozí možnosti pro šifrování, jsou data vždy šifrována pomocí klíčů spravuje Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="b6044-229">Tuto možnost nemáte hello možnost toorotate klíče, jako jsou spravovány službou Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="b6044-230">Jak toorotate hello MEK v Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b6044-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="b6044-231">Přihlaste se toohello [portál Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="b6044-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="b6044-232">Procházejte toohello Key Vault instance, který ukládá klíče spojené s vaším účtem Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b6044-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="b6044-233">Vyberte **Klíče**.</span><span class="sxs-lookup"><span data-stu-id="b6044-233">Select **Keys**.</span></span>

    ![Snímek obrazovky služby Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="b6044-235">Vyberte hello klíč přidružený k účtu Data Lake Store a vytvořit novou verzi tohoto klíče.</span><span class="sxs-lookup"><span data-stu-id="b6044-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="b6044-236">Všimněte si, že Data Lake Store aktuálně podporuje jenom střídání klíče tooa novou verzi klíč.</span><span class="sxs-lookup"><span data-stu-id="b6044-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="b6044-237">Nepodporuje otáčení tooa jiný klíč.</span><span class="sxs-lookup"><span data-stu-id="b6044-237">It doesn't support rotating tooa different key.</span></span>

   ![Snímek obrazovky okna Klíče se zvýrazněnou možností Nová verze](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="b6044-239">Účet úložiště Data Lake Store toohello Procházet a vyberte **šifrování**.</span><span class="sxs-lookup"><span data-stu-id="b6044-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Snímek obrazovky okna účtu úložiště Data Lake Store se zvýrazněnou možností Šifrování](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="b6044-241">Zobrazí upozornění, že je k dispozici nová verze klíče hello klíče.</span><span class="sxs-lookup"><span data-stu-id="b6044-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="b6044-242">Klikněte na tlačítko **otočit klíč** tooupdate hello klíče toohello novou verzi.</span><span class="sxs-lookup"><span data-stu-id="b6044-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![Snímek obrazovky okna Data Lake Store se zvýrazněnou zprávou a možností Obměnit klíč](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="b6044-244">Tato operace by měla trvat méně než dvě minuty a neexistuje žádný očekávaná doba nedostupnosti kvůli tookey otočení.</span><span class="sxs-lookup"><span data-stu-id="b6044-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="b6044-245">Po dokončení operace hello hello novou verzi hello klíč se používá.</span><span class="sxs-lookup"><span data-stu-id="b6044-245">After hello operation is complete, hello new version of hello key is in use.</span></span>
