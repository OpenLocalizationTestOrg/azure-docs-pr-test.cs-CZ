---
title: "aaaAzure ladění pokyny pro Data Lake Store výkonu | Microsoft Docs"
description: "Ladění pravidla výkonu Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="6c07a-103">Ladění výkonu Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="6c07a-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="6c07a-104">Data Lake Store podporuje vysokou propustností k analýze intenzivním vstupně-výstupních operací a přesun dat.</span><span class="sxs-lookup"><span data-stu-id="6c07a-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="6c07a-105">V Azure Data Lake Store pomocí všech dostupných propustnost – hello množství dat, která můžou číst nebo zapisovat za sekundu – je důležité tooget hello nejlepší výkon.</span><span class="sxs-lookup"><span data-stu-id="6c07a-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="6c07a-106">To se dosáhne provedením tolik čte a zapisuje paralelně nejdříve.</span><span class="sxs-lookup"><span data-stu-id="6c07a-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Data Lake Store výkonu](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="6c07a-108">Azure Data Lake Store můžete škálovat tooprovide hello nezbytné propustnost pro všechny scénáře analýzy.</span><span class="sxs-lookup"><span data-stu-id="6c07a-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="6c07a-109">Ve výchozím nastavení účet Azure Data Lake Store poskytuje automaticky dostatek propustnost toomeet hello potřebám hlavních kategorií případy použití.</span><span class="sxs-lookup"><span data-stu-id="6c07a-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="6c07a-110">Hello případech, kde zákazníci spustit do hello výchozí limit, hello účtu ADLS může být nakonfigurované tooprovide další propustnost že se obrátíte na podporu společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="6c07a-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="6c07a-111">Přijímání dat</span><span class="sxs-lookup"><span data-stu-id="6c07a-111">Data ingestion</span></span>

<span data-ttu-id="6c07a-112">Při příjem dat z tooADLS systému zdroje, je důležité tooconsider, který hello zdrojového hardwaru, zdroj síťového hardwaru a tooADLS připojení k síti může být hello potíže.</span><span class="sxs-lookup"><span data-stu-id="6c07a-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Data Lake Store výkonu](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="6c07a-114">Je důležité, že tooensure, který hello přesun dat nemá vliv tyto faktory.</span><span class="sxs-lookup"><span data-stu-id="6c07a-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="6c07a-115">Zdroj hardwaru</span><span class="sxs-lookup"><span data-stu-id="6c07a-115">Source Hardware</span></span>

<span data-ttu-id="6c07a-116">Ať používáte místní počítače nebo virtuální počítače v Azure, měli byste pečlivě vybrat vhodný hardware hello.</span><span class="sxs-lookup"><span data-stu-id="6c07a-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="6c07a-117">Pro zdroj disku Hardware raději tooHDDs SSD a vyberte hardware disku s rychlejší diskových jednotek.</span><span class="sxs-lookup"><span data-stu-id="6c07a-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="6c07a-118">Pro zdroj síťový Hardware použijte hello nejrychlejší možné síťové adaptéry.</span><span class="sxs-lookup"><span data-stu-id="6c07a-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="6c07a-119">V Azure doporučujeme D14 virtuálních počítačích Azure, které mají hello správně výkonné disku a síťového hardwaru.</span><span class="sxs-lookup"><span data-stu-id="6c07a-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="6c07a-120">Síťové připojení tooAzure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="6c07a-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="6c07a-121">Hello síťové připojení mezi zdrojem dat a Azure Data Lake store může být někdy hello potíže.</span><span class="sxs-lookup"><span data-stu-id="6c07a-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="6c07a-122">Pokud je zdroj dat na místě, zvažte použití vyhrazených odkaz s [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="6c07a-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="6c07a-123">Pokud je zdroj dat v Azure, bude hello výkon nejlepší při hello data jsou v hello stejné oblasti Azure jako hello Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="6c07a-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="6c07a-124">Konfigurace nástrojů přijímání dat pro maximální paralelizace</span><span class="sxs-lookup"><span data-stu-id="6c07a-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="6c07a-125">Jakmile vyřešili hello zdrojového hardwaru a sítě kritická místa připojení výše, jste připravené tooconfigure vaše přijímání nástroje.</span><span class="sxs-lookup"><span data-stu-id="6c07a-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="6c07a-126">Hello následující tabulka shrnuje nastavení hello klíče pro několik oblíbených přijímání nástrojů a poskytuje podrobné ladění články pro ně výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c07a-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="6c07a-127">informace o tom, které nástroj toouse pro váš scénář toolearn získáte na tomto [článku](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="6c07a-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="6c07a-128">Nástroj</span><span class="sxs-lookup"><span data-stu-id="6c07a-128">Tool</span></span>               | <span data-ttu-id="6c07a-129">Nastavení</span><span class="sxs-lookup"><span data-stu-id="6c07a-129">Settings</span></span>     | <span data-ttu-id="6c07a-130">Další informace</span><span class="sxs-lookup"><span data-stu-id="6c07a-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="6c07a-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="6c07a-131">Powershell</span></span>       | <span data-ttu-id="6c07a-132">PerFileThreadCount ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="6c07a-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="6c07a-133">Odkaz</span><span class="sxs-lookup"><span data-stu-id="6c07a-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="6c07a-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="6c07a-134">AdlCopy</span></span>    | <span data-ttu-id="6c07a-135">Azure Data Lake Analytics jednotky</span><span class="sxs-lookup"><span data-stu-id="6c07a-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="6c07a-136">Odkaz</span><span class="sxs-lookup"><span data-stu-id="6c07a-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="6c07a-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="6c07a-137">DistCp</span></span>            | <span data-ttu-id="6c07a-138">-m (Mapovač)</span><span class="sxs-lookup"><span data-stu-id="6c07a-138">-m (mapper)</span></span>   | [<span data-ttu-id="6c07a-139">Odkaz</span><span class="sxs-lookup"><span data-stu-id="6c07a-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="6c07a-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="6c07a-140">Azure Data Factory</span></span>| <span data-ttu-id="6c07a-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="6c07a-141">parallelCopies</span></span>    | [<span data-ttu-id="6c07a-142">Odkaz</span><span class="sxs-lookup"><span data-stu-id="6c07a-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="6c07a-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="6c07a-143">Sqoop</span></span>           | <span data-ttu-id="6c07a-144">FS.Azure.Block.Size -m (Mapovač)</span><span class="sxs-lookup"><span data-stu-id="6c07a-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="6c07a-145">Odkaz</span><span class="sxs-lookup"><span data-stu-id="6c07a-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="6c07a-146">Struktury sadu dat</span><span class="sxs-lookup"><span data-stu-id="6c07a-146">Structure your data set</span></span>

<span data-ttu-id="6c07a-147">Pokud data uložená v Data Lake Store, hello velikost souboru, počet souborů a struktura složek mít vliv na výkon.</span><span class="sxs-lookup"><span data-stu-id="6c07a-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="6c07a-148">Hello následující část popisuje osvědčené postupy v těchto oblastech.</span><span class="sxs-lookup"><span data-stu-id="6c07a-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="6c07a-149">Velikost souboru</span><span class="sxs-lookup"><span data-stu-id="6c07a-149">File size</span></span>

<span data-ttu-id="6c07a-150">Analýza stroje například HDInsight a Azure Data Lake Analytics obvykle mají režijní náklady na soubor.</span><span class="sxs-lookup"><span data-stu-id="6c07a-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="6c07a-151">Pokud data ukládáte jako mnoho malých souborů, to může mít negativní vliv na výkon.</span><span class="sxs-lookup"><span data-stu-id="6c07a-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="6c07a-152">Obecně platí organizování vašich dat ve větší velikosti souborů pro lepší výkon.</span><span class="sxs-lookup"><span data-stu-id="6c07a-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="6c07a-153">Jako existuje pravidlo uspořádání datových sad v souborech 256 MB nebo větší.</span><span class="sxs-lookup"><span data-stu-id="6c07a-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="6c07a-154">V některých případech, například bitové kopie a binární data, není možné tooprocess je paralelně.</span><span class="sxs-lookup"><span data-stu-id="6c07a-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="6c07a-155">V těchto případech se doporučuje tookeep jednotlivých souborů v části 2GB.</span><span class="sxs-lookup"><span data-stu-id="6c07a-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="6c07a-156">V některých případech datových kanálů mají omezenou kontrolu nad hello nezpracovaná data, která má velké množství malých souborů.</span><span class="sxs-lookup"><span data-stu-id="6c07a-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="6c07a-157">Je doporučeno toohave "vaření" proces, který generuje větší soubory toouse pro příjem dat aplikace.</span><span class="sxs-lookup"><span data-stu-id="6c07a-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="6c07a-158">Uspořádání data časové řady ve složkách</span><span class="sxs-lookup"><span data-stu-id="6c07a-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="6c07a-159">Pro úlohy Hive a ADLA oddílu vyřazování data časové řady může pomoct některé dotazy číst pouze podmnožinu dat hello, což zvyšuje výkon.</span><span class="sxs-lookup"><span data-stu-id="6c07a-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="6c07a-160">Tyto kanály, které ingestují data časové řady, často umístit své soubory s velmi strukturovaných pojmenovávání souborů a složek.</span><span class="sxs-lookup"><span data-stu-id="6c07a-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="6c07a-161">Níže je velmi běžné příklad, který vidíte pro data, která je strukturovaná data:</span><span class="sxs-lookup"><span data-stu-id="6c07a-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="6c07a-162">Všimněte si, že hello data a času informace se zobrazí jako složky i v hello filename.</span><span class="sxs-lookup"><span data-stu-id="6c07a-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="6c07a-163">Datum a čas následující hello je běžný vzor</span><span class="sxs-lookup"><span data-stu-id="6c07a-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="6c07a-164">Volba hello bude s hello složku a soubor organizace by měl znovu, optimalizovat pro hello velkých souborů a přiměřené počet souborů v každé složky.</span><span class="sxs-lookup"><span data-stu-id="6c07a-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="6c07a-165">Optimalizace náročné úlohy vstupně-výstupních operací na úlohy Hadoop a Spark v HDInsight</span><span class="sxs-lookup"><span data-stu-id="6c07a-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="6c07a-166">Úlohy spadat do jednoho z následujících tří kategorií hello:</span><span class="sxs-lookup"><span data-stu-id="6c07a-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="6c07a-167">**Náročné na prostředky procesoru.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-167">**CPU intensive.**</span></span>  <span data-ttu-id="6c07a-168">Tyto úlohy má dlouhou výpočetní dobu s minimálním časy vstupu a výstupu.</span><span class="sxs-lookup"><span data-stu-id="6c07a-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="6c07a-169">Mezi příklady patří strojového učení a přirozeného jazyka zpracování úloh.</span><span class="sxs-lookup"><span data-stu-id="6c07a-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="6c07a-170">**Velké množství paměti.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-170">**Memory intensive.**</span></span>  <span data-ttu-id="6c07a-171">Tyto úlohy použijte velké množství paměti.</span><span class="sxs-lookup"><span data-stu-id="6c07a-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="6c07a-172">Mezi příklady patří PageRank a analýzu v reálném čase úlohy.</span><span class="sxs-lookup"><span data-stu-id="6c07a-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="6c07a-173">**Vstupně-výstupní operace náročné na prostředky.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-173">**I/O intensive.**</span></span>  <span data-ttu-id="6c07a-174">Tyto úlohy tráví většinu jejich doby provádění vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="6c07a-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="6c07a-175">Běžným příkladem jsou kopie úlohu, u které pouze operacích čtení a zápisu.</span><span class="sxs-lookup"><span data-stu-id="6c07a-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="6c07a-176">Další příklady data přípravy úlohy, které číst velké množství dat, provádí některé transformaci dat, a pak zápisy hello back toohello úložišti.</span><span class="sxs-lookup"><span data-stu-id="6c07a-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="6c07a-177">Hello pokynů je pouze použít tooI/O náročné úlohy.</span><span class="sxs-lookup"><span data-stu-id="6c07a-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="6c07a-178">Obecné aspekty pro cluster služby HDInsight</span><span class="sxs-lookup"><span data-stu-id="6c07a-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="6c07a-179">**HDInsight verze.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-179">**HDInsight versions.**</span></span> <span data-ttu-id="6c07a-180">Pro nejlepší výkon použijte hello nejnovější verze služby HDInsight.</span><span class="sxs-lookup"><span data-stu-id="6c07a-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="6c07a-181">**Oblasti.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-181">**Regions.**</span></span> <span data-ttu-id="6c07a-182">Umístit hello Data Lake Store hello stejné oblasti jako hello clusteru HDInsight.</span><span class="sxs-lookup"><span data-stu-id="6c07a-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="6c07a-183">Cluster služby HDInsight se skládá ze dvou hlavních uzlech a některé uzly pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="6c07a-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="6c07a-184">Každý pracovní uzel poskytuje určitý počet jader a paměti, což je dáno hello typ virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6c07a-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="6c07a-185">Při spuštění úlohy, je YARN vyjednavač hello prostředku, který přiděluje hello dostupná paměť a počet jader toocreate kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="6c07a-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="6c07a-186">Každý kontejner spustí hello úkoly potřebné toocomplete hello úlohu.</span><span class="sxs-lookup"><span data-stu-id="6c07a-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="6c07a-187">Kontejnery spustit v úlohách paralelní tooprocess rychle.</span><span class="sxs-lookup"><span data-stu-id="6c07a-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="6c07a-188">Proto spuštěním tolik paralelní kontejnery nejdříve vyšší výkon.</span><span class="sxs-lookup"><span data-stu-id="6c07a-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="6c07a-189">Existují tři vrstvy v rámci clusteru služby HDInsight, který může být ujít tooincrease hello počet kontejnerů a použít všechny dostupné propustnost.</span><span class="sxs-lookup"><span data-stu-id="6c07a-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="6c07a-190">**Fyzickou vrstvu**</span><span class="sxs-lookup"><span data-stu-id="6c07a-190">**Physical layer**</span></span>
* <span data-ttu-id="6c07a-191">**YARN vrstvy**</span><span class="sxs-lookup"><span data-stu-id="6c07a-191">**YARN layer**</span></span>
* <span data-ttu-id="6c07a-192">**Zatížení vrstvy**</span><span class="sxs-lookup"><span data-stu-id="6c07a-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="6c07a-193">Fyzickou vrstvu</span><span class="sxs-lookup"><span data-stu-id="6c07a-193">Physical Layer</span></span>

<span data-ttu-id="6c07a-194">**Spusťte clusteru s více uzly nebo větší velikosti virtuálních počítačů.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="6c07a-195">Větší cluster vám umožní toorun je víc kontejnerů YARN, jak ukazuje následující obrázek hello.</span><span class="sxs-lookup"><span data-stu-id="6c07a-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Data Lake Store výkonu](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="6c07a-197">**Použijte virtuální počítače s větší šířku pásma sítě.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="6c07a-198">Hello šířku pásma sítě může být kritický bod, pokud je menší šířku pásma sítě než propustnost Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="6c07a-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="6c07a-199">Různé virtuální počítače budou mít různých velikosti šířky pásma sítě.</span><span class="sxs-lookup"><span data-stu-id="6c07a-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="6c07a-200">Vyberte virtuální počítač – typ, který má hello největší možné šířku pásma sítě.</span><span class="sxs-lookup"><span data-stu-id="6c07a-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="6c07a-201">YARN vrstvy</span><span class="sxs-lookup"><span data-stu-id="6c07a-201">YARN Layer</span></span>

<span data-ttu-id="6c07a-202">**Použití menší YARN kontejnerů.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="6c07a-203">Snížení velikosti hello každý kontejner toocreate YARN další kontejnery s hello stejný objem prostředků.</span><span class="sxs-lookup"><span data-stu-id="6c07a-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Data Lake Store výkonu](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="6c07a-205">V závislosti na velikosti pracovní zátěže bude vždy minimální velikost YARN kontejneru, která je potřeba.</span><span class="sxs-lookup"><span data-stu-id="6c07a-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="6c07a-206">Pokud vyberete příliš malá kontejner, vaše úlohy se spustí do problémy z důvodu nedostatku paměti.</span><span class="sxs-lookup"><span data-stu-id="6c07a-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="6c07a-207">Kontejnery YARN obvykle by měla být menší než 1GB.</span><span class="sxs-lookup"><span data-stu-id="6c07a-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="6c07a-208">Je běžné kontejnery YARN toosee 3GB.</span><span class="sxs-lookup"><span data-stu-id="6c07a-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="6c07a-209">Pro některé úlohy pravděpodobně bude třeba větší kontejnery YARN.</span><span class="sxs-lookup"><span data-stu-id="6c07a-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="6c07a-210">**Zvýšit jader na kontejner YARN.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="6c07a-211">Zvýšíte číslo hello jádra přidělené tooeach kontejneru tooincrease hello počet paralelních úloh, které běží v každém kontejneru.</span><span class="sxs-lookup"><span data-stu-id="6c07a-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="6c07a-212">Tento postup funguje pro aplikace jako Spark, které se spustit několik úkolů na kontejneru.</span><span class="sxs-lookup"><span data-stu-id="6c07a-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="6c07a-213">Pro aplikace jako Hive, která spustit jeden vláken v jednotlivých kontejnerech, je lepší toohave víc kontejnerů než více jader na kontejneru.</span><span class="sxs-lookup"><span data-stu-id="6c07a-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="6c07a-214">Zatížení vrstvy</span><span class="sxs-lookup"><span data-stu-id="6c07a-214">Workload Layer</span></span>

<span data-ttu-id="6c07a-215">**Použijte všechny dostupné kontejnery.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-215">**Use all available containers.**</span></span>  <span data-ttu-id="6c07a-216">Nastavit hello počet úloh toobe stejná nebo větší než počet hello dostupné kontejnery, takže jsou využité všechny prostředky.</span><span class="sxs-lookup"><span data-stu-id="6c07a-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Data Lake Store výkonu](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="6c07a-218">**Neúspěšné úlohy jsou nákladné.**</span><span class="sxs-lookup"><span data-stu-id="6c07a-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="6c07a-219">Pokud má každý úkol velké množství dat tooprocess, selhání úkolu výsledků v nákladné opakování.</span><span class="sxs-lookup"><span data-stu-id="6c07a-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="6c07a-220">Proto je lepší toocreate další úlohy, z nichž každý malé množství dat zpracovává.</span><span class="sxs-lookup"><span data-stu-id="6c07a-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="6c07a-221">V přidání toohello obecné pokyny výše každá aplikace má k dispozici tootune různé parametry pro konkrétní aplikace.</span><span class="sxs-lookup"><span data-stu-id="6c07a-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="6c07a-222">Hello tabulce jsou uvedeny některé parametry a odkazy tooget hello začít s optimalizace výkonu pro každou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6c07a-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="6c07a-223">Úloha</span><span class="sxs-lookup"><span data-stu-id="6c07a-223">Workload</span></span>               | <span data-ttu-id="6c07a-224">Parametr tooset úlohy</span><span class="sxs-lookup"><span data-stu-id="6c07a-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="6c07a-225">Spark v HDInisight</span><span class="sxs-lookup"><span data-stu-id="6c07a-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="6c07a-226">Poče vykonavatelů</span><span class="sxs-lookup"><span data-stu-id="6c07a-226">Num-executors</span></span></li><li><span data-ttu-id="6c07a-227">Vykonavatele paměti</span><span class="sxs-lookup"><span data-stu-id="6c07a-227">Executor-memory</span></span></li><li><span data-ttu-id="6c07a-228">Vykonavatele jader</span><span class="sxs-lookup"><span data-stu-id="6c07a-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="6c07a-229">Hive v HDInsight</span><span class="sxs-lookup"><span data-stu-id="6c07a-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="6c07a-230">Hive.tez.Container.Size</span><span class="sxs-lookup"><span data-stu-id="6c07a-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="6c07a-231">MapReduce v HDInsight</span><span class="sxs-lookup"><span data-stu-id="6c07a-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="6c07a-232">mapreduce.map.Memory</span><span class="sxs-lookup"><span data-stu-id="6c07a-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="6c07a-233">Mapreduce.job.Maps</span><span class="sxs-lookup"><span data-stu-id="6c07a-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="6c07a-234">mapreduce.reduce.Memory</span><span class="sxs-lookup"><span data-stu-id="6c07a-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="6c07a-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="6c07a-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="6c07a-236">Storm v HDInsight</span><span class="sxs-lookup"><span data-stu-id="6c07a-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="6c07a-237">Počet pracovních procesů</span><span class="sxs-lookup"><span data-stu-id="6c07a-237">Number of worker processes</span></span></li><li><span data-ttu-id="6c07a-238">Počet instancí vykonavatele spout</span><span class="sxs-lookup"><span data-stu-id="6c07a-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="6c07a-239">Počet instancí vykonavatele bolt</span><span class="sxs-lookup"><span data-stu-id="6c07a-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="6c07a-240">Počet funkcí spout úlohy</span><span class="sxs-lookup"><span data-stu-id="6c07a-240">Number of spout tasks</span></span></li><li><span data-ttu-id="6c07a-241">Počet úloh bolt</span><span class="sxs-lookup"><span data-stu-id="6c07a-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="6c07a-242">Viz také</span><span class="sxs-lookup"><span data-stu-id="6c07a-242">See also</span></span>
* [<span data-ttu-id="6c07a-243">Přehled Azure Data Lake Storu</span><span class="sxs-lookup"><span data-stu-id="6c07a-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="6c07a-244">Začínáme s Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="6c07a-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
