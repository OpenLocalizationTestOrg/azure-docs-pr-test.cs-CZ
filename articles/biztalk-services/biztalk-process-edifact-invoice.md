---
title: "Kurz: Zpracovat EDIFACT faktury pomocí služby Azure BizTalk Services | Microsoft Docs"
description: "Jak vytvořit a nakonfigurovat konektor pole nebo rozhraní API app a použít ho v aplikaci logiky ve službě Azure App Service"
services: biztalk-services
documentationcenter: .net,nodejs,java
author: msftman
manager: erikre
editor: 
ms.assetid: 7e0b93fa-3e2b-4a9c-89ef-abf1d3aa8fa9
ms.service: biztalk-services
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 05/31/2016
ms.author: deonhe
ms.openlocfilehash: 4597ee28e4c3b797c0ab050b21a126a95d9e8191
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="tutorial-process-edifact-invoices-using-azure-biztalk-services"></a><span data-ttu-id="4e069-103">Kurz: Proces EDIFACT faktury pomocí služby Azure BizTalk Services</span><span class="sxs-lookup"><span data-stu-id="4e069-103">Tutorial: Process EDIFACT invoices using Azure BizTalk Services</span></span>

> [!INCLUDE [BizTalk Services is being retired, and replaced with Azure Logic Apps](../../includes/biztalk-services-retirement.md)]

<span data-ttu-id="4e069-104">Na portálu služby BizTalk můžete použít ke konfiguraci a nasazení X12 a smluv EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="4e069-104">You can use the BizTalk Services Portal to configure and deploy X12 and EDIFACT agreements.</span></span> <span data-ttu-id="4e069-105">V tomto kurzu podíváme na tom, jak vytvořit smlouvy EDIFACT pro výměnu faktury mezi obchodními partnery.</span><span class="sxs-lookup"><span data-stu-id="4e069-105">In this tutorial, we look at how to create an EDIFACT agreement for exchanging invoices between trading partners.</span></span> <span data-ttu-id="4e069-106">Tento kurz je napsán kolem začátku do konce obchodní řešení zahrnující dva obchodní partneři Northwind a Contoso, které exchange EDIFACT zprávy.</span><span class="sxs-lookup"><span data-stu-id="4e069-106">This tutorial is written around an end-to-end business solution involving two trading partners, Northwind and Contoso that exchange EDIFACT messages.</span></span>  

## <a name="sample-based-on-this-tutorial"></a><span data-ttu-id="4e069-107">Ukázka podle tohoto kurzu</span><span class="sxs-lookup"><span data-stu-id="4e069-107">Sample based on this tutorial</span></span>
<span data-ttu-id="4e069-108">Tento kurz je napsán kolem ukázku, **odesílání EDIFACT faktury pomocí BizTalk Services**, která je k dispozici ke stažení z [galerie kódů MSDN](http://go.microsoft.com/fwlink/?LinkId=401005).</span><span class="sxs-lookup"><span data-stu-id="4e069-108">This tutorial is written around a sample, **Sending EDIFACT Invoices Using BizTalk Services**, which is available to download from the [MSDN Code Gallery](http://go.microsoft.com/fwlink/?LinkId=401005).</span></span> <span data-ttu-id="4e069-109">Můžete použít ukázkový a projít tento kurz a pochopit, jak byl vytvořený v ukázkovém.</span><span class="sxs-lookup"><span data-stu-id="4e069-109">You could use the sample and go through this tutorial to understand how the sample was built.</span></span> <span data-ttu-id="4e069-110">Nebo můžete použít k vytvoření vlastního řešení základů tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="4e069-110">Or, you could use this tutorial to create your own solution ground-up.</span></span> <span data-ttu-id="4e069-111">V tomto kurzu je zaměřena na druhém postupu tak, že chápete, jak byl sestaven toto řešení.</span><span class="sxs-lookup"><span data-stu-id="4e069-111">This tutorial is targeted towards the second approach so that you understand how this solution was built.</span></span> <span data-ttu-id="4e069-112">Také možné míře, tento kurz je konzistentní s ukázkou a používá stejné názvy artefakty (například schémat, transformací) jako použité v ukázce.</span><span class="sxs-lookup"><span data-stu-id="4e069-112">Also, as much as possible, the tutorial is consistent with the sample and uses the same names for artifacts (for example, schemas, transforms) as used in the sample.</span></span>  

> [!NOTE]
> <span data-ttu-id="4e069-113">Protože toto řešení zahrnuje odesílání zprávy ze EAI most do mostu EDI, znovu použije [most služby BizTalk řetězení ukázka](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104) ukázka.</span><span class="sxs-lookup"><span data-stu-id="4e069-113">Because this solution involves sending a message from an EAI bridge to an EDI bridge, it reuses the [BizTalk Services Bridge chaining sample](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104) sample.</span></span>  
> 
> 

## <a name="what-does-the-solution-do"></a><span data-ttu-id="4e069-114">Jakým způsobem řešení?</span><span class="sxs-lookup"><span data-stu-id="4e069-114">What does the solution do?</span></span>
<span data-ttu-id="4e069-115">V tomto řešení Northwind obdrží EDIFACT faktury ze společnosti Contoso.</span><span class="sxs-lookup"><span data-stu-id="4e069-115">In this solution, Northwind receives EDIFACT invoices from Contoso.</span></span> <span data-ttu-id="4e069-116">Tyto faktury nejsou ve standardním formátu EDI.</span><span class="sxs-lookup"><span data-stu-id="4e069-116">These invoices are not in a standard EDI format.</span></span> <span data-ttu-id="4e069-117">Ano před odesláním faktury Northwind, se musí transformován do dokument EDIFACT faktura (také nazývané INVOIC).</span><span class="sxs-lookup"><span data-stu-id="4e069-117">So, before sending the invoice to Northwind, it must be transformed to an EDIFACT invoice (also called INVOIC) document.</span></span> <span data-ttu-id="4e069-118">Na přijetí musí Northwind zpracovat EDIFACT faktury a obnoví řídicí zprávu (také nazývané CONTRL) Contoso.</span><span class="sxs-lookup"><span data-stu-id="4e069-118">On receipt, Northwind must process the EDIFACT invoice, and return a control message (also called CONTRL) to Contoso.</span></span>

![][1]  

<span data-ttu-id="4e069-119">K dosažení této podnikový scénář, společnost Contoso využívá funkce poskytované službou Microsoft Azure BizTalk Services.</span><span class="sxs-lookup"><span data-stu-id="4e069-119">To achieve this business scenario, Contoso uses the features provided with Microsoft Azure BizTalk Services.</span></span>

* <span data-ttu-id="4e069-120">Společnost Contoso využívá mosty EAI na transformaci původní fakturu EDIFACT INVOIC.</span><span class="sxs-lookup"><span data-stu-id="4e069-120">Contoso uses EAI bridges to transform the original invoice to EDIFACT INVOIC.</span></span>
* <span data-ttu-id="4e069-121">Most EAI pak odešle zprávu do mostu odesílání EDI nasazen jako součást smlouvu nakonfigurované na portálu služby BizTalk.</span><span class="sxs-lookup"><span data-stu-id="4e069-121">The EAI bridge then sends the message to an EDI send bridge deployed as part of an agreement configured in the BizTalk Services Portal.</span></span>
* <span data-ttu-id="4e069-122">Most odesílání EDI zpracovává EDIFACT INVOIC a směruje na Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-122">The EDI send bridge processes the EDIFACT INVOIC and routes it to Northwind.</span></span>
* <span data-ttu-id="4e069-123">Po přijetí faktury, vrátí Northwind CONTRL zprávy k EDI přijímat most? víc informací, které jsou nasazeny jako součást této smlouvy.</span><span class="sxs-lookup"><span data-stu-id="4e069-123">After receiving the invoice, Northwind returns a CONTRL message to the EDI receive bridge deployed as part of the agreement.</span></span>  

> [!NOTE]
> <span data-ttu-id="4e069-124">Volitelně můžete toto řešení také ukazuje, jak pomocí dávkování odesílat faktur v dávkách, místo abyste odesílali každé faktury samostatně.</span><span class="sxs-lookup"><span data-stu-id="4e069-124">Optionally, this solution also demonstrates how to use batching to send the invoices in batches, instead of sending each invoice separately.</span></span>  
> 
> 

<span data-ttu-id="4e069-125">Chcete-li dokončit tento scénář, jsme používat fronty Service Bus odesílat faktury ze společnosti Contoso Northwind nebo přijímat potvrzení z Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-125">To complete the scenario, we use Service Bus queues to send invoice from Contoso to Northwind or receive acknowledgement from Northwind.</span></span> <span data-ttu-id="4e069-126">Tyto fronty si můžete vytvořit pomocí klientské aplikace, která je k dispozici ke stažení a je součástí balíčku vzorku, který je k dispozici v rámci tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="4e069-126">These queues can be created using a client application, which is available as a download and is included in the sample package that is available as part of this tutorial.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="4e069-127">Požadavky</span><span class="sxs-lookup"><span data-stu-id="4e069-127">Prerequisites</span></span>
* <span data-ttu-id="4e069-128">Musí mít obor názvů sběrnice.</span><span class="sxs-lookup"><span data-stu-id="4e069-128">You must have a Service Bus namespace.</span></span> <span data-ttu-id="4e069-129">Pokyny pro vytvoření oboru názvů, naleznete v části [postupy: vytvoření nebo úprava Namespace služby Service Bus](https://msdn.microsoft.com/library/azure/hh674478.aspx).</span><span class="sxs-lookup"><span data-stu-id="4e069-129">For instructions on creating a namespace, see [How To: Create or Modify a Service Bus Service Namespace](https://msdn.microsoft.com/library/azure/hh674478.aspx).</span></span> <span data-ttu-id="4e069-130">Předpokládejme, že už máte obor názvů sběrnice zřízený, nazývá **edifactbts**.</span><span class="sxs-lookup"><span data-stu-id="4e069-130">Let us assume that you already have a Service Bus namespace provisioned, called **edifactbts**.</span></span>
* <span data-ttu-id="4e069-131">Musíte mít předplatné služby BizTalk Services.</span><span class="sxs-lookup"><span data-stu-id="4e069-131">You must have a BizTalk Services subscription.</span></span> <span data-ttu-id="4e069-132">Pokyny najdete v tématu [vytvoření služby BizTalk pomocí portálu Azure classic](http://go.microsoft.com/fwlink/?LinkID=302280).</span><span class="sxs-lookup"><span data-stu-id="4e069-132">For instructions, see [Create a BizTalk Service using Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=302280).</span></span> <span data-ttu-id="4e069-133">V tomto kurzu, dejte nám předpokládá, že máte předplatné služby BizTalk, názvem **contosowabs**.</span><span class="sxs-lookup"><span data-stu-id="4e069-133">For this tutorial, let us assume you have a BizTalk Services subscription, called **contosowabs**.</span></span>
* <span data-ttu-id="4e069-134">Zaregistrujte své předplatné služby BizTalk Services na portálu služby BizTalk.</span><span class="sxs-lookup"><span data-stu-id="4e069-134">Register your BizTalk Services subscription on the BizTalk Services Portal.</span></span> <span data-ttu-id="4e069-135">Pokyny najdete v tématu [registrace nasazení služby BizTalk na portálu služby BizTalk](https://msdn.microsoft.com/library/hh689837.aspx)</span><span class="sxs-lookup"><span data-stu-id="4e069-135">For instructions, see [Registering a BizTalk Service Deployment on the BizTalk Services Portal](https://msdn.microsoft.com/library/hh689837.aspx)</span></span>
* <span data-ttu-id="4e069-136">Musíte mít nainstalovanou sadu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4e069-136">You must have Visual Studio installed.</span></span>
* <span data-ttu-id="4e069-137">Musíte mít nainstalované sady SDK služby BizTalk.</span><span class="sxs-lookup"><span data-stu-id="4e069-137">You must have BizTalk Services SDK installed.</span></span> <span data-ttu-id="4e069-138">Si můžete stáhnout sady SDK z [http://go.microsoft.com/fwlink/?LinkId=235057](http://go.microsoft.com/fwlink/?LinkId=235057)</span><span class="sxs-lookup"><span data-stu-id="4e069-138">You can download the SDK from [http://go.microsoft.com/fwlink/?LinkId=235057](http://go.microsoft.com/fwlink/?LinkId=235057)</span></span>  

## <a name="step-1-create-the-service-bus-queues"></a><span data-ttu-id="4e069-139">Krok 1: Vytvoření fronty Service Bus</span><span class="sxs-lookup"><span data-stu-id="4e069-139">Step 1: Create the Service Bus queues</span></span>
<span data-ttu-id="4e069-140">Toto řešení používá fronty Service Bus pro výměnu zpráv mezi obchodními partnery.</span><span class="sxs-lookup"><span data-stu-id="4e069-140">This solution uses Service Bus queues to exchange messages between trading partners.</span></span> <span data-ttu-id="4e069-141">Contoso a Northwind odesílání zpráv do front z kde mosty EAI a EDI využívat.</span><span class="sxs-lookup"><span data-stu-id="4e069-141">Contoso and Northwind send messages to the queues from where the EAI and/or EDI bridges consume them.</span></span> <span data-ttu-id="4e069-142">Pro toto řešení je třeba tři fronty Service Bus:</span><span class="sxs-lookup"><span data-stu-id="4e069-142">For this solution, you need three Service Bus queues:</span></span>

* <span data-ttu-id="4e069-143">**northwindreceive** – Northwind přijme faktury z Contoso přes tuto frontu.</span><span class="sxs-lookup"><span data-stu-id="4e069-143">**northwindreceive** – Northwind receives the invoice from Contoso over this queue.</span></span>
* <span data-ttu-id="4e069-144">**contosoreceive** – Contoso přijme potvrzení z Northwind přes tuto frontu.</span><span class="sxs-lookup"><span data-stu-id="4e069-144">**contosoreceive** – Contoso receives the acknowledgement from Northwind over this queue.</span></span>
* <span data-ttu-id="4e069-145">**pozastaveno** – všechny pozastavené zprávy jsou směrovány do této fronty.</span><span class="sxs-lookup"><span data-stu-id="4e069-145">**suspended** – All suspended messages are routed to this queue.</span></span> <span data-ttu-id="4e069-146">Zprávy jsou pozastavené, pokud se nepodaří během zpracování.</span><span class="sxs-lookup"><span data-stu-id="4e069-146">Messages are suspended if they fail during processing.</span></span>

<span data-ttu-id="4e069-147">Tyto fronty Service Bus můžete vytvořit pomocí součástí balíčku vzorku klientskou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4e069-147">You can create these Service Bus queues by using a client application included in the sample package.</span></span>  

1. <span data-ttu-id="4e069-148">Z umístění, kam jste stáhli ukázku, otevřete **kurzu odesílání faktury pomocí BizTalk Services EDI Bridges.sln**.</span><span class="sxs-lookup"><span data-stu-id="4e069-148">From the location where you downloaded the sample, open **Tutorial Sending Invoices Using BizTalk Services EDI Bridges.sln**.</span></span>
2. <span data-ttu-id="4e069-149">Stiskněte klávesu **F5** sestavíte a spustíte **kurzu klienta** aplikace.</span><span class="sxs-lookup"><span data-stu-id="4e069-149">Press **F5** to build and start the **Tutorial Client** application.</span></span>
3. <span data-ttu-id="4e069-150">V dialogovém okně zadejte obor názvů Service Bus ACS, název vystavitele a klíč vystavitele.</span><span class="sxs-lookup"><span data-stu-id="4e069-150">In the screen, enter the Service Bus ACS namespace, issuer name, and issuer key.</span></span>
   
   ![][2]  
4. <span data-ttu-id="4e069-151">Okno se zprávou vyzve, aby tři fronty budou vytvořeny v oboru názvů sběrnice.</span><span class="sxs-lookup"><span data-stu-id="4e069-151">A message box prompts that three queues will be created in your Service Bus namespace.</span></span> <span data-ttu-id="4e069-152">Klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="4e069-152">Click **OK**.</span></span>
5. <span data-ttu-id="4e069-153">Ponechte kurzu klienty v provozu.</span><span class="sxs-lookup"><span data-stu-id="4e069-153">Leave the Tutorial Client running.</span></span> <span data-ttu-id="4e069-154">Otevřít, klikněte na tlačítko **Service Bus** > ***vašeho oboru názvů Service Bus*** > **fronty**a ověřte, že jsou vytvořeny tři fronty.</span><span class="sxs-lookup"><span data-stu-id="4e069-154">Open the , click **Service Bus** > ***your Service Bus namespace*** > **Queues**, and verify that the three queues are created.</span></span>  

## <a name="step-2-create-and-deploy-trading-partner-agreement"></a><span data-ttu-id="4e069-155">Krok 2: Vytvoření a nasazení smlouvy obchodním partnerem</span><span class="sxs-lookup"><span data-stu-id="4e069-155">Step 2: Create and deploy trading partner agreement</span></span>
<span data-ttu-id="4e069-156">Vytvoření smlouvy s obchodním partnerem mezi Contoso a Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-156">Create a trading partner agreement between Contoso and Northwind.</span></span> <span data-ttu-id="4e069-157">Smlouvy s obchodním partnerem definuje kontrakt obchodu mezi dvěma obchodními partnery, jako je například které zpráva schématu pro použití, které zasílání zpráv protokolu chcete použít, atd. Smlouvy s obchodním partnerem obsahuje dva mosty EDI, jeden k odesílání zpráv do obchodních partnerů (volat **EDI odeslat most**) a jeden pro příjem zpráv z obchodních partnerů (volat **EDI přijímat most**).</span><span class="sxs-lookup"><span data-stu-id="4e069-157">A trading partner agreement defines a trade contract between the two business partners, such as which message schema to use, which messaging protocol to use, etc. A trading partner agreement includes two EDI bridges, one to send messages to trading partners (called the **EDI Send bridge**) and one to receive messages from trading partners (called the **EDI Receive bridge**).</span></span>

<span data-ttu-id="4e069-158">V kontextu tohoto řešení se most odesílání EDI odpovídá straně odesílání smlouvy a se používá k odeslání do Northwind faktury EDIFACT ze společnosti Contoso.</span><span class="sxs-lookup"><span data-stu-id="4e069-158">In the context of this solution, the EDI send bridge corresponds to the send-side of the agreement and is used to send the EDIFACT invoice from Contoso to Northwind.</span></span> <span data-ttu-id="4e069-159">Podobně most receive EDI odpovídá na straně příjmu smlouvy a slouží k potvrzení příjmu z Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-159">Similarly, the EDI receive bridge corresponds to the receive-side of the agreement and is used to receive acknowledgements from Northwind.</span></span>  

### <a name="create-the-trading-partners"></a><span data-ttu-id="4e069-160">Vytvoření obchodními partnery</span><span class="sxs-lookup"><span data-stu-id="4e069-160">Create the trading partners</span></span>
<span data-ttu-id="4e069-161">Pro společnosti Contoso a Northwind začínat, vytvořte obchodní partneři.</span><span class="sxs-lookup"><span data-stu-id="4e069-161">To start with, create trading partners for Contoso and Northwind.</span></span>  

1. <span data-ttu-id="4e069-162">Na portálu služeb BizTalk na **partnery** , klikněte na **přidat**.</span><span class="sxs-lookup"><span data-stu-id="4e069-162">In the BizTalk Services Portal, on the **Partners** tab, click **Add**.</span></span>
2. <span data-ttu-id="4e069-163">Na nové stránce partnera, zadejte **Contoso** jako název partnera a pak klikněte na tlačítko **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="4e069-163">In the New partner page, enter **Contoso** as a partner name, and then click **Save**.</span></span>
3. <span data-ttu-id="4e069-164">Opakujte krok k vytvoření druhého partnera **Northwind**.</span><span class="sxs-lookup"><span data-stu-id="4e069-164">Repeat the step to create the second partner, **Northwind**.</span></span>  

### <a name="create-the-agreement"></a><span data-ttu-id="4e069-165">Vytvoření smlouvy</span><span class="sxs-lookup"><span data-stu-id="4e069-165">Create the agreement</span></span>
<span data-ttu-id="4e069-166">Smluv s obchodními partnery se vytvoří mezi profily obchodní obchodních partnerů.</span><span class="sxs-lookup"><span data-stu-id="4e069-166">Trading partner agreements are created between business profiles of trading partners.</span></span> <span data-ttu-id="4e069-167">Toto řešení používá výchozí partnera profily, které se automaticky vytvoří, když jsme vytvořili partnery.</span><span class="sxs-lookup"><span data-stu-id="4e069-167">This solution uses the default partner profiles that are automatically created when we created the partners.</span></span>  

1. <span data-ttu-id="4e069-168">Na portálu služby BizTalk, klikněte na tlačítko **smlouvy** > **přidat**.</span><span class="sxs-lookup"><span data-stu-id="4e069-168">In the BizTalk Services Portal, click **Agreements** > **Add**.</span></span>
2. <span data-ttu-id="4e069-169">V nové smlouvy **obecné nastavení** stránky, zadejte hodnoty, jak je znázorněno na obrázku níže a pak klikněte na tlačítko **pokračovat**.</span><span class="sxs-lookup"><span data-stu-id="4e069-169">In the new agreement’s **General Settings** page, specify the values as shown in the image below, and then click **Continue**.</span></span>
   
   ![][3]  
   
   <span data-ttu-id="4e069-170">Po kliknutí na tlačítko **pokračovat**, dvě karty **přijímat nastavení** a **odeslat nastavení** k dispozici.</span><span class="sxs-lookup"><span data-stu-id="4e069-170">After you click **Continue**, two tabs, **Receive Settings** and **Send Settings** become available.</span></span>
3. <span data-ttu-id="4e069-171">Vytvoření smlouvy odesílání mezi Contoso a Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-171">Create the send agreement between Contoso and Northwind.</span></span> <span data-ttu-id="4e069-172">Tato smlouva řídí, jak Contoso odešle faktury EDIFACT Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-172">This agreement governs how Contoso sends the EDIFACT invoice to Northwind.</span></span>
   
   1. <span data-ttu-id="4e069-173">Klikněte na tlačítko **odeslat nastavení**.</span><span class="sxs-lookup"><span data-stu-id="4e069-173">Click **Send Settings**.</span></span>
   2. <span data-ttu-id="4e069-174">Zachovat výchozí hodnoty na **příchozí adresy URL**, **transformace**, a **Batching** karty.</span><span class="sxs-lookup"><span data-stu-id="4e069-174">Retain the default values on the **Inbound URL**, **Transform**, and **Batching** tabs.</span></span>
   3. <span data-ttu-id="4e069-175">Na **protokol** v části **schémata** části tím, že nahrajete **EFACT_D93A_INVOIC.xsd** schématu.</span><span class="sxs-lookup"><span data-stu-id="4e069-175">On the **Protocol** tab, under the **Schemas** section, upload the **EFACT_D93A_INVOIC.xsd** schema.</span></span> <span data-ttu-id="4e069-176">Toto schéma je k dispozici s balíčkem ukázka.</span><span class="sxs-lookup"><span data-stu-id="4e069-176">This schema is available with the sample package.</span></span>
      
      ![][4]  
   4. <span data-ttu-id="4e069-177">Na **přenosu** kartě, zadejte podrobnosti pro fronty Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4e069-177">On the **Transport** tab, specify the details for the Service Bus queues.</span></span> <span data-ttu-id="4e069-178">Smlouvy na straně odesílání používáme **northwindreceive** fronty k odeslání do Northwind, faktury EDIFACT a **pozastaveno** fronty směrovat všechny zprávy, které během zpracování selhat a jsou pozastavené.</span><span class="sxs-lookup"><span data-stu-id="4e069-178">For the send-side agreement, we use the **northwindreceive** queue to send the EDIFACT invoice to Northwind, and the **suspended** queue to route any messages that fail during processing and are suspended.</span></span> <span data-ttu-id="4e069-179">Můžete vytvořit tyto fronty v **krok 1: vytvoření fronty Service Bus** (v tomto tématu).</span><span class="sxs-lookup"><span data-stu-id="4e069-179">You created these queues in **Step 1: Create the Service Bus queues** (in this topic).</span></span>
      
      ![][5]  
      
      <span data-ttu-id="4e069-180">V části **přenosu nastavení > typ přenosu** a **nastavení pozastavení zpráv > typ přenosu**vyberte Azure Service Bus a zadejte hodnoty, jak je znázorněno na obrázku.</span><span class="sxs-lookup"><span data-stu-id="4e069-180">Under **Transport Settings > Transport type** and **Message Suspension Settings > Transport type**, select Azure Service Bus and provide the values as shown in the image.</span></span>
4. <span data-ttu-id="4e069-181">Vytvořte receive smlouvu mezi společností Contoso a Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-181">Create the receive agreement between Contoso and Northwind.</span></span> <span data-ttu-id="4e069-182">Tato smlouva řídí, jak Contoso obdrží od Northwind potvrzení.</span><span class="sxs-lookup"><span data-stu-id="4e069-182">This agreement governs how Contoso receives the acknowledgement from Northwind.</span></span>
   
   1. <span data-ttu-id="4e069-183">Klikněte na tlačítko **obdrží nastavení**.</span><span class="sxs-lookup"><span data-stu-id="4e069-183">Click **Receive Settings**.</span></span>
   2. <span data-ttu-id="4e069-184">Zachovat výchozí hodnoty na **přenosu** a **transformace** karty.</span><span class="sxs-lookup"><span data-stu-id="4e069-184">Retain the default values on the **Transport** and **Transform** tabs.</span></span>
   3. <span data-ttu-id="4e069-185">Na **protokol** v části **schémata** části tím, že nahrajete **EFACT_4.1_CONTRL.xsd** schématu.</span><span class="sxs-lookup"><span data-stu-id="4e069-185">On the **Protocol** tab, under the **Schemas** section, upload the **EFACT_4.1_CONTRL.xsd** schema.</span></span> <span data-ttu-id="4e069-186">Toto schéma je k dispozici s balíčkem ukázka.</span><span class="sxs-lookup"><span data-stu-id="4e069-186">This schema is available with the sample package.</span></span>
   4. <span data-ttu-id="4e069-187">Na **trasy** kartě, vytvoření filtru k zajištění, že pouze potvrzení z Northwind jsou směrované na Contoso.</span><span class="sxs-lookup"><span data-stu-id="4e069-187">On the **Route** tab, create a filter to ensure that only acknowledgements from Northwind are routed to Contoso.</span></span> <span data-ttu-id="4e069-188">V části **trasy nastavení**, klikněte na tlačítko **přidat** k vytvoření filtru rozhraní směrování.</span><span class="sxs-lookup"><span data-stu-id="4e069-188">Under **Route Settings**, click **Add** to create the routing filter.</span></span>
      
      ![][6]  
      
      1. <span data-ttu-id="4e069-189">Zadejte hodnoty pro **název pravidla**, **trasy pravidlo**, a **trasy cílové** jak je znázorněno na obrázku.</span><span class="sxs-lookup"><span data-stu-id="4e069-189">Provide values for **Rule Name**, **Route rule**, and **Route destination** as shown in the image.</span></span>
      2. <span data-ttu-id="4e069-190">Klikněte na **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="4e069-190">Click **Save**.</span></span>
   5. <span data-ttu-id="4e069-191">Na **trasy** kartě znovu, zadejte, kde jsou směrovány pozastavenou potvrzení (potvrzení, které nesplní během zpracování).</span><span class="sxs-lookup"><span data-stu-id="4e069-191">On the **Route** tab again, specify where suspended acknowledgements (acknowledgements that fail during processing) are routed to.</span></span> <span data-ttu-id="4e069-192">Nastavte typ přenosu k Azure Service Bus, směrovat cílový typ **fronty**, typ ověřování **sdíleného přístupového podpisu** (SAS), zadejte připojovací řetězec SAS pro obor názvů Service Bus a pak zadejte název fronty jako **pozastaveno**.</span><span class="sxs-lookup"><span data-stu-id="4e069-192">Set the transport type to Azure Service Bus, route destination type to **Queue**, authentication type to **Shared Access Signature** (SAS), provide the SAS connection string for the Service Bus namespace, and then enter the queue name as **suspended**.</span></span>
5. <span data-ttu-id="4e069-193">Nakonec klikněte na **nasadit** k nasazení této smlouvy.</span><span class="sxs-lookup"><span data-stu-id="4e069-193">Finally, click **Deploy** to deploy the agreement.</span></span> <span data-ttu-id="4e069-194">Všimněte si, koncových bodů kde odesílání a příjmu nasadí smlouvy.</span><span class="sxs-lookup"><span data-stu-id="4e069-194">Note the endpoints where the send and receive agreements get deployed.</span></span>
   
   * <span data-ttu-id="4e069-195">Na **odeslat nastavení** v části **příchozí adresy URL**, Všimněte si, koncový bod.</span><span class="sxs-lookup"><span data-stu-id="4e069-195">On the **Send Settings** tab, under **Inbound URL**, note the endpoint.</span></span> <span data-ttu-id="4e069-196">Pokud chcete odeslat zprávu ze společnosti Contoso Northwind pomocí most odesílání EDI, je nutné odeslat zprávu na tento koncový bod.</span><span class="sxs-lookup"><span data-stu-id="4e069-196">To send a message from Contoso to Northwind using the EDI send bridge, you must send a message to this endpoint.</span></span>
   * <span data-ttu-id="4e069-197">Na **přijímat nastavení** v části **přenosu**, Všimněte si, koncový bod.</span><span class="sxs-lookup"><span data-stu-id="4e069-197">On the **Receive Settings** tab, under **Transport**, note the endpoint.</span></span> <span data-ttu-id="4e069-198">Chcete-li odeslat zprávu z Northwind do společnosti Contoso pomocí EDI obdržet most, je nutné odeslat zprávu na tento koncový bod.</span><span class="sxs-lookup"><span data-stu-id="4e069-198">To send a message from Northwind to Contoso using the EDI receive bridge, you must send a message to this endpoint.</span></span>  

## <a name="step-3-create-and-deploy-the-biztalk-services-project"></a><span data-ttu-id="4e069-199">Krok 3: Vytvoření a nasazení projektu služby BizTalk Services</span><span class="sxs-lookup"><span data-stu-id="4e069-199">Step 3: Create and deploy the BizTalk Services project</span></span>
<span data-ttu-id="4e069-200">V předchozím kroku nasadit EDI odesílat a přijímat smlouvy ke zpracování EDIFACT faktury a potvrzení.</span><span class="sxs-lookup"><span data-stu-id="4e069-200">In the previous step, you deployed the EDI send and receive agreements to process EDIFACT invoices and acknowledgements.</span></span> <span data-ttu-id="4e069-201">Tyto smlouvy můžou jen proces zprávy, které odpovídala standardní schématu EDIFACT zprávy.</span><span class="sxs-lookup"><span data-stu-id="4e069-201">These agreements can only process messages that conform to the standard EDIFACT message schema.</span></span> <span data-ttu-id="4e069-202">Ale na tento scénář pro toto řešení Contoso odešle faktury Northwind ve schématu vlastní interní.</span><span class="sxs-lookup"><span data-stu-id="4e069-202">However, per the scenario for this solution, Contoso sends an invoice to Northwind in an in-house proprietary schema.</span></span> <span data-ttu-id="4e069-203">Ano předtím, než je zpráva odeslána do mostu odesílání EDI, ho musí transformaci z interních schématu standardní schématu faktury EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="4e069-203">So, before the message is sent to the EDI send bridge, it must be transformed from the in-house schema to the standard EDIFACT invoice schema.</span></span> <span data-ttu-id="4e069-204">BizTalk Services EAI projektu nemá který.</span><span class="sxs-lookup"><span data-stu-id="4e069-204">The BizTalk Services EAI project does that.</span></span>

<span data-ttu-id="4e069-205">Projektu služby BizTalk Services **InvoiceProcessingBridge**, transformací zprávy je také zahrnuty jako součást vzorku, který jste stáhli.</span><span class="sxs-lookup"><span data-stu-id="4e069-205">The BizTalk Services project, **InvoiceProcessingBridge**, that transforms the message is also included as part of the sample you downloaded.</span></span> <span data-ttu-id="4e069-206">Tento projekt zahrnuje následující artefakty:</span><span class="sxs-lookup"><span data-stu-id="4e069-206">The project includes the following artifacts:</span></span>

* <span data-ttu-id="4e069-207">**INHOUSEINVOICE. XSD** – schéma interní faktury, kterou posílá Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-207">**INHOUSEINVOICE.XSD** – Schema of the in-house invoice that is sent to Northwind.</span></span>
* <span data-ttu-id="4e069-208">**EFACT_D93A_INVOIC. XSD** – schéma standardní EDIFACT faktury.</span><span class="sxs-lookup"><span data-stu-id="4e069-208">**EFACT_D93A_INVOIC.XSD** – Schema of the standard EDIFACT invoice.</span></span>
* <span data-ttu-id="4e069-209">**EFACT_4.1_CONTRL. XSD** – schéma EDIFACT potvrzení, který odesílá Northwind Contoso.</span><span class="sxs-lookup"><span data-stu-id="4e069-209">**EFACT_4.1_CONTRL.XSD** – Schema of the EDIFACT acknowledgement that Northwind sends to Contoso.</span></span>
* <span data-ttu-id="4e069-210">**INHOUSEINVOICE_to_D93AINVOIC. TRFM** – transformace, která se mapuje na schéma standardní faktury EDIFACT schéma interní faktury.</span><span class="sxs-lookup"><span data-stu-id="4e069-210">**INHOUSEINVOICE_to_D93AINVOIC.TRFM** – The transform that maps the in-house invoice schema to the standard EDIFACT invoice schema.</span></span>  

### <a name="create-the-biztalk-services-project"></a><span data-ttu-id="4e069-211">Vytvoření projektu služby BizTalk Services</span><span class="sxs-lookup"><span data-stu-id="4e069-211">Create the BizTalk Services project</span></span>
1. <span data-ttu-id="4e069-212">V řešení sady Visual Studio rozbalte InvoiceProcessingBridge projekt a pak otevřete **MessageFlowItinerary.bcs** souboru.</span><span class="sxs-lookup"><span data-stu-id="4e069-212">In the Visual Studio solution, expand the InvoiceProcessingBridge project, and then open the **MessageFlowItinerary.bcs** file.</span></span>
2. <span data-ttu-id="4e069-213">Klikněte kamkoli na plátně a nastavte **adresy URL služby BizTalk** v poli vlastnosti k určení předplatného název vaší služby BizTalk Services.</span><span class="sxs-lookup"><span data-stu-id="4e069-213">Click anywhere on the canvas and set the **BizTalk Service URL** in the property box to specify your BizTalk Services subscription name.</span></span> <span data-ttu-id="4e069-214">Například, `https://contosowabs.biztalk.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="4e069-214">For example, `https://contosowabs.biztalk.windows.net`.</span></span>
   
   ![][7]  
3. <span data-ttu-id="4e069-215">Ze sady nástrojů, přetáhněte **Xml One-Way most** na plátno.</span><span class="sxs-lookup"><span data-stu-id="4e069-215">From the toolbox, drag an **Xml One-Way Bridge** to the canvas.</span></span> <span data-ttu-id="4e069-216">Nastavte **název Entity** a **relativní adresu** vlastnosti mostu k **ProcessInvoiceBridge**.</span><span class="sxs-lookup"><span data-stu-id="4e069-216">Set the **Entity Name** and **Relative Address** properties of the bridge to **ProcessInvoiceBridge**.</span></span> <span data-ttu-id="4e069-217">Klikněte dvakrát na **ProcessInvoiceBridge** otevřete prostor konfigurace most.</span><span class="sxs-lookup"><span data-stu-id="4e069-217">Double-click **ProcessInvoiceBridge** to open the bridge configuration surface.</span></span>
4. <span data-ttu-id="4e069-218">V rámci **typy zpráv** pole, klikněte na tlačítko plus (**+**) tlačítko zadejte schéma příchozí zprávy.</span><span class="sxs-lookup"><span data-stu-id="4e069-218">Within the **Message Types** box, click the plus (**+**) button to specify the schema of the incoming message.</span></span> <span data-ttu-id="4e069-219">Příchozí zpráva pro most EAI je vždy interní faktury, tuto možnost nastavíte na **INHOUSEINVOICE**.</span><span class="sxs-lookup"><span data-stu-id="4e069-219">Because the incoming message for the EAI bridge is always the in-house invoice, set this to **INHOUSEINVOICE**.</span></span>
   
   ![][8]  
5. <span data-ttu-id="4e069-220">Klikněte na tlačítko **transformace Xml** tvaru a v dialogovém okně Vlastnosti pro **mapy** vlastnosti, klikněte na tlačítko se třemi tečkami (**...** ) tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4e069-220">Click the **Xml Transform** shape, and in the property box, for the **Maps** property, click the ellipsis (**...**) button.</span></span> <span data-ttu-id="4e069-221">V **mapy výběr** dialogové okno, vyberte **INHOUSEINVOICE_to_D93AINVOIC** transformační soubor a potom klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="4e069-221">In the **Maps Selection** dialog box, select the **INHOUSEINVOICE_to_D93AINVOIC** transform file, and then click **OK**.</span></span>
   
   ![][9]  
6. <span data-ttu-id="4e069-222">Přejděte zpět na **MessageFlowItinerary.bcs**a ze sady nástrojů, přetáhněte ji **obousměrný externí koncový bod služby** napravo **ProcessInvoiceBridge**.</span><span class="sxs-lookup"><span data-stu-id="4e069-222">Go back to **MessageFlowItinerary.bcs**, and from the toolbox, drag a **Two-Way External Service Endpoint** to the right of the **ProcessInvoiceBridge**.</span></span> <span data-ttu-id="4e069-223">Nastavte její **název Entity** vlastnost **EDIBridge**.</span><span class="sxs-lookup"><span data-stu-id="4e069-223">Set its **Entity Name** property to **EDIBridge**.</span></span>
7. <span data-ttu-id="4e069-224">V Průzkumníku řešení rozbalte **MessageFlowItinerary.bcs** a dvakrát klikněte na **EDIBridge.config** souboru.</span><span class="sxs-lookup"><span data-stu-id="4e069-224">In the Solution Explorer, expand the **MessageFlowItinerary.bcs** and double-click the **EDIBridge.config** file.</span></span> <span data-ttu-id="4e069-225">Nahradí obsah **EDIBridge.config** následujícím kódem.</span><span class="sxs-lookup"><span data-stu-id="4e069-225">Replace the content of the **EDIBridge.config** with the following.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="4e069-226">Proč je potřeba upravit soubor .config?</span><span class="sxs-lookup"><span data-stu-id="4e069-226">Why do I need to edit the .config file?</span></span> <span data-ttu-id="4e069-227">Externí služby koncového bodu, který jsme přidali do plátna návrháře most představuje mostů EDI, které jsme dříve nasadili.</span><span class="sxs-lookup"><span data-stu-id="4e069-227">The external service endpoint that we added to the bridge designer canvas represents the EDI bridges that we deployed earlier.</span></span> <span data-ttu-id="4e069-228">EDI mostů jsou obousměrný mostů s odesílání a na straně příjmu.</span><span class="sxs-lookup"><span data-stu-id="4e069-228">EDI bridges are two-way bridges, with a send and receive side.</span></span> <span data-ttu-id="4e069-229">Jednosměrné most je však EAI mostu, který jsme přidali do mostu návrháře.</span><span class="sxs-lookup"><span data-stu-id="4e069-229">However, the EAI bridge that we added to the bridge designer is a one-way bridge.</span></span> <span data-ttu-id="4e069-230">Ano pro zpracování vzory exchange jiná zpráva dvě mostů, používáme vlastní most chování včetně jeho konfiguraci v souboru config.</span><span class="sxs-lookup"><span data-stu-id="4e069-230">So, to handle the different message exchange patterns of the two bridges, we use a custom bridge behavior by including its configuration in the .config file.</span></span> <span data-ttu-id="4e069-231">Kromě toho vlastní chování také obstará ověřování ke koncovému bodu EDI odesílání most. Toto vlastní chování je k dispozici jako samostatné ukázka v [most služby BizTalk řetězení ukázka - EAI na EDI](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104).</span><span class="sxs-lookup"><span data-stu-id="4e069-231">Additionally, the custom behavior also handles the authentication to the EDI send bridge endpoint.This custom behavior is available as a separate sample at [BizTalk Services Bridge chaining sample - EAI to EDI](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104).</span></span> <span data-ttu-id="4e069-232">Toto řešení opětovně používá vzorku.</span><span class="sxs-lookup"><span data-stu-id="4e069-232">This solution reuses the sample.</span></span>  
   > 
   > 
   
   ```
   <?xml version="1.0" encoding="utf-8"?>
   <configuration>
     <system.serviceModel>
       <extensions>
         <behaviorExtensions>
           <add name="BridgeAuthentication" 
                 type="Microsoft.BizTalk.Bridge.Behaviour.BridgeBehaviorElement, Microsoft.BizTalk.Bridge.Behaviour, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ae58f69b69495c05" />
         </behaviorExtensions>
       </extensions>
       <behaviors>
         <endpointBehaviors>
           <behavior name="BridgeAuthenticationConfiguration">
             <!-- Enter the ACS namespace, issuer name and issuer secret of the BizTalk Services deployment -->
             <BridgeAuthentication acsnamespace="[YOUR ACS NAMESPACE]" 
                                   issuername="owner" 
                                   issuersecret="[YOUR ACS SECRET]" />
             <webHttp />
           </behavior>
         </endpointBehaviors>
       </behaviors>
       <bindings>
         <webHttpBinding>
           <binding name="BridgeBindingConfiguration">
             <security mode="Transport" />
           </binding>
         </webHttpBinding>
       </bindings>
       <client>
         <clear />
         <!--
           Go BizTalk Portal > Agreement > Send Settings > Inbound URL
           Copy the Endpoint URL and paste it in the below address field
         -->
         <endpoint name="TwoWayExternalServiceEndpointReference1" 
                   address="[YOUR EDI BRIDGE SEND URI]" 
                   behaviorConfiguration="BridgeAuthenticationConfiguration" 
                   binding="webHttpBinding" 
                   bindingConfiguration="BridgeBindingConfiguration" 
                   contract="System.ServiceModel.Routing.IRequestReplyRouter" />
       </client>
     </system.serviceModel>
   </configuration>
   
   ```
8. <span data-ttu-id="4e069-233">Aktualizace souboru EDIBridge.config podrobností konfigurace</span><span class="sxs-lookup"><span data-stu-id="4e069-233">Update the EDIBridge.config file to include configuration details</span></span>
   
   * <span data-ttu-id="4e069-234">V části  *<behaviors>* , zadejte obor názvů služby ACS a klíč spojený s předplatným služby BizTalk Services.</span><span class="sxs-lookup"><span data-stu-id="4e069-234">Under *<behaviors>*, provide the ACS namespace and key associated with the BizTalk Services subscription.</span></span>
   * <span data-ttu-id="4e069-235">V části  *<client>* , poskytovat koncový bod, kde je nasazená smlouvy EDI odeslání.</span><span class="sxs-lookup"><span data-stu-id="4e069-235">Under *<client>*, provide the endpoint where the EDI send agreement is deployed.</span></span>
   
   <span data-ttu-id="4e069-236">Uložte změny a zavřete konfiguračního souboru.</span><span class="sxs-lookup"><span data-stu-id="4e069-236">Save changes and close the configuration file.</span></span>
9. <span data-ttu-id="4e069-237">Z panelu nástrojů klikněte na tlačítko **konektor** a připojte **ProcessInvoiceBridge** a **EDIBridge** součásti.</span><span class="sxs-lookup"><span data-stu-id="4e069-237">From the Toolbox, click the **Connector** and join the **ProcessInvoiceBridge** and **EDIBridge** components.</span></span> <span data-ttu-id="4e069-238">Vyberte konektor a v poli vlastnosti, nastavte **podmínku filtrování** k **všechny shody**.</span><span class="sxs-lookup"><span data-stu-id="4e069-238">Select the connector, and in Properties box, set **Filter Condition** to **Match All**.</span></span> <span data-ttu-id="4e069-239">Tím se zajistí, že všechny zprávy, které jsou zpracovávány EAI most jsou směrovány do mostu EDI.</span><span class="sxs-lookup"><span data-stu-id="4e069-239">This ensures that all messages processed by the EAI bridge are routed to the EDI bridge.</span></span>
   
   ![][10]  
10. <span data-ttu-id="4e069-240">Uložte změny do řešení.</span><span class="sxs-lookup"><span data-stu-id="4e069-240">Save changes to the solution.</span></span>  

### <a name="deploy-the-project"></a><span data-ttu-id="4e069-241">Nasazení projektu</span><span class="sxs-lookup"><span data-stu-id="4e069-241">Deploy the project</span></span>
1. <span data-ttu-id="4e069-242">V počítači, kde jste vytvořili projektu služby BizTalk stáhněte a nainstalujte certifikát SSL pro vaše předplatné služby BizTalk Services.</span><span class="sxs-lookup"><span data-stu-id="4e069-242">On the computer where you created the BizTalk Services project, download and install the SSL certificate for your BizTalk Services subscription.</span></span> <span data-ttu-id="4e069-243">Klikněte v části služby BizTalk Services na **řídicí panel**a potom klikněte na **stáhnout certifikát SSL**.</span><span class="sxs-lookup"><span data-stu-id="4e069-243">From , under BizTalk Services, click **Dashboard**, and then click **Download SSL Certificate**.</span></span> <span data-ttu-id="4e069-244">Dvakrát klikněte na certifikát a po zobrazení výzvy k dokončení instalace.</span><span class="sxs-lookup"><span data-stu-id="4e069-244">Double-click the certificate and follow the prompt to complete the installation.</span></span> <span data-ttu-id="4e069-245">Zajistěte, aby instalaci certifikátu v části **důvěryhodné kořenové certifikační autority** úložiště certifikátů.</span><span class="sxs-lookup"><span data-stu-id="4e069-245">Make sure you install the certificate under **Trusted Root Certification Authorities** certificate store.</span></span>
2. <span data-ttu-id="4e069-246">V Průzkumníku řešení Visual Studio, klikněte pravým tlačítkem myši **InvoiceProcessingBridge** projektu a pak klikněte na **nasadit**.</span><span class="sxs-lookup"><span data-stu-id="4e069-246">In Visual Studio Solution Explorer, right-click the **InvoiceProcessingBridge** project, and then click **Deploy**.</span></span>
3. <span data-ttu-id="4e069-247">Zadejte hodnoty, jak je znázorněno na obrázku a pak klikněte na tlačítko **nasadit**.</span><span class="sxs-lookup"><span data-stu-id="4e069-247">Provide the values as shown in the image, and then click **Deploy**.</span></span> <span data-ttu-id="4e069-248">Kliknutím můžete získat přihlašovací údaje služby ACS služby BizTalk Services **informace o připojení** na řídicím panelu služby BizTalk Services.</span><span class="sxs-lookup"><span data-stu-id="4e069-248">You can get the ACS credentials for BizTalk Services by clicking **Connection Information** from the BizTalk Services dashboard.</span></span>
   
   ![][11]  
   
   <span data-ttu-id="4e069-249">V podokně výstup zkopírujte koncový bod, kde most EAI nasazení, například `https://contosowabs.biztalk.windows.net/default/ProcessInvoiceBridge`.</span><span class="sxs-lookup"><span data-stu-id="4e069-249">From the output pane, copy the endpoint where the EAI bridge is deployed, for example, `https://contosowabs.biztalk.windows.net/default/ProcessInvoiceBridge`.</span></span> <span data-ttu-id="4e069-250">Tato adresa URL koncového bodu budete potřebovat později.</span><span class="sxs-lookup"><span data-stu-id="4e069-250">You will need this endpoint URL later.</span></span>  

## <a name="step-4-test-the-solution"></a><span data-ttu-id="4e069-251">Krok 4: Test řešení</span><span class="sxs-lookup"><span data-stu-id="4e069-251">Step 4: Test the solution</span></span>
<span data-ttu-id="4e069-252">V tomto tématu se podíváme na tom, jak otestovat řešení pomocí **kurzu klienta** aplikace k dispozici jako součást vzorku.</span><span class="sxs-lookup"><span data-stu-id="4e069-252">In this topic, we look at how to test the solution by using the **Tutorial Client** application provided as part of the sample.</span></span>  

1. <span data-ttu-id="4e069-253">Ve Visual Studiu stisknutím klávesy F5 spusťte **kurzu klienta**.</span><span class="sxs-lookup"><span data-stu-id="4e069-253">In Visual Studio, press F5 to start the **Tutorial Client**.</span></span>
2. <span data-ttu-id="4e069-254">Na obrazovce musí mít naplněnými z kroku hodnoty, které jsme vytvořili fronty Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4e069-254">The screen must have the values prepopulated from the step where we created the Service Bus queues.</span></span> <span data-ttu-id="4e069-255">Klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="4e069-255">Click **Next**.</span></span>
3. <span data-ttu-id="4e069-256">V okně Další zadejte přihlašovací údaje služby ACS pro předplatné služby BizTalk Services a koncových bodů kde EAI a EDI (přijímat) jsou nasazeny mostů.</span><span class="sxs-lookup"><span data-stu-id="4e069-256">In the next window, provide ACS credentials for BizTalk Services subscription, and the endpoints where EAI and EDI (receive) bridges are deployed.</span></span>
   
   <span data-ttu-id="4e069-257">Koncový bod most EAI měl zkopírovali v předchozím kroku.</span><span class="sxs-lookup"><span data-stu-id="4e069-257">You had copied the EAI bridge endpoint in the previous step.</span></span> <span data-ttu-id="4e069-258">Pro EDI přijímat most koncovému bodu, na portálu služby BizTalk, přejděte na Smlouvu > přijímat Nastavení > přenosu > koncový bod.</span><span class="sxs-lookup"><span data-stu-id="4e069-258">For EDI receive bridge endpoint, in the BizTalk Services Portal, go to the agreement > Receive Settings > Transport > Endpoint.</span></span>
   
   ![][12]  
4. <span data-ttu-id="4e069-259">V dalším okně pod Contoso, klikněte **odeslat interní faktury** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4e069-259">In the next window, under Contoso, click the **Send In-house Invoice** button.</span></span> <span data-ttu-id="4e069-260">V souboru otevřete dialogové okno, otevřete soubor INHOUSEINVOICE.txt.</span><span class="sxs-lookup"><span data-stu-id="4e069-260">In the File open dialog box, open the INHOUSEINVOICE.txt file.</span></span> <span data-ttu-id="4e069-261">Zkontrolujte obsah souboru a pak klikněte na tlačítko **OK** Odeslat faktury.</span><span class="sxs-lookup"><span data-stu-id="4e069-261">Examine the content of the file and then click **OK** to send the invoice.</span></span>
   
   ![][13]  
5. <span data-ttu-id="4e069-262">Během pár sekund faktury přijme Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-262">In a few seconds the invoice is received at Northwind.</span></span> <span data-ttu-id="4e069-263">Klikněte **zobrazení zpráv** odkaz zobrazíte faktury přijatých Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-263">Click the **View Message** link to see the invoice received by Northwind.</span></span> <span data-ttu-id="4e069-264">Všimněte si, jak faktury přijatých Northwind je ve schématu standardní EDIFACT při jeden poslal společnosti Contoso interní schématu.</span><span class="sxs-lookup"><span data-stu-id="4e069-264">Notice how the invoice received by Northwind is in standard EDIFACT schema while the one sent by Contoso was an in-house schema.</span></span>
   
   ![][14]  
6. <span data-ttu-id="4e069-265">Vyberte fakturu a potom klikněte na **odeslat potvrzení**.</span><span class="sxs-lookup"><span data-stu-id="4e069-265">Select the invoice and then click **Send Acknowledgement**.</span></span> <span data-ttu-id="4e069-266">V dialogovém okně, která se objeví Všimněte si, zda je ID výměnu stejné v přijatých faktury a potvrzení odesílána.</span><span class="sxs-lookup"><span data-stu-id="4e069-266">In the dialog box that pops up, notice that the interchange ID is same in the received invoice and the acknowledgement being sent.</span></span> <span data-ttu-id="4e069-267">Klikněte na tlačítko OK v **odeslat potvrzení** dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="4e069-267">Click OK in the **Send Acknowledgement** dialog box.</span></span>
   
   ![][15]  
7. <span data-ttu-id="4e069-268">Během pár sekund se potvrzení úspěšně přijme společnosti Contoso.</span><span class="sxs-lookup"><span data-stu-id="4e069-268">In a few seconds, the acknowledgement is successfully received at Contoso.</span></span>
   
   ![][16]  

## <a name="step-5-optional-send-edifact-invoice-in-batches"></a><span data-ttu-id="4e069-269">Krok 5 (volitelné): faktury odeslat EDIFACT v dávkách</span><span class="sxs-lookup"><span data-stu-id="4e069-269">Step 5 (optional): Send EDIFACT invoice in batches</span></span>
<span data-ttu-id="4e069-270">BizTalk Services EDI mostů podporuje také dávkování odchozích zpráv.</span><span class="sxs-lookup"><span data-stu-id="4e069-270">BizTalk Services EDI bridges also supports batching of outgoing messages.</span></span> <span data-ttu-id="4e069-271">Tato funkce je užitečná pro příjem partnery, které dávají přednost dávku zpráv (splňující určité kritérium) namísto jednotlivé zprávy.</span><span class="sxs-lookup"><span data-stu-id="4e069-271">This feature is useful for receiving partners that prefer to receive a batch of messages (meeting certain criterion) instead of individual messages.</span></span>

<span data-ttu-id="4e069-272">Nejdůležitější aspekt při práci s dávky je skutečná verze služby batch, označované taky jako uvolnění kritéria.</span><span class="sxs-lookup"><span data-stu-id="4e069-272">The most important aspect when working with batches is the actual release of the batch, also called the release criteria.</span></span> <span data-ttu-id="4e069-273">Kritéria verzi může být založen na jak přijímající partner chce dostávat zprávy.</span><span class="sxs-lookup"><span data-stu-id="4e069-273">The release criteria can be based on how the receiving partner wants to receive messages.</span></span> <span data-ttu-id="4e069-274">Pokud dávkování je povoleno, most EDI neodešle odchozí zprávy přijímající partnerovi dokud nebude splněna kritéria verze.</span><span class="sxs-lookup"><span data-stu-id="4e069-274">If batching is enabled, the EDI bridge does not send the outgoing message to the receiving partner until the release criteria is fulfilled.</span></span> <span data-ttu-id="4e069-275">Například dávkování kritéria na základě odešle zprávu velikost dávky pouze tehdy, když n zprávy jsou zpracovat v dávce.</span><span class="sxs-lookup"><span data-stu-id="4e069-275">For example, a batching criteria based on message size dispatches a batch only when ‘n’ messages are batched.</span></span> <span data-ttu-id="4e069-276">Kritéria batch může být také založené na čase, tak, aby dávky je odeslána v pevný čas každý den.</span><span class="sxs-lookup"><span data-stu-id="4e069-276">A batch criteria can also be time-based, such that a batch is sent at a fixed time every day.</span></span> <span data-ttu-id="4e069-277">V tomto řešení jsme zkuste velikost zprávy na základě kritérií.</span><span class="sxs-lookup"><span data-stu-id="4e069-277">In this solution, we try the message-size based criteria.</span></span>

1. <span data-ttu-id="4e069-278">Na portálu služby BizTalk klikněte na tlačítko smlouvy, kterou jste vytvořili dříve.</span><span class="sxs-lookup"><span data-stu-id="4e069-278">In the BizTalk Services Portal, click the agreement you created earlier.</span></span> <span data-ttu-id="4e069-279">Klikněte na tlačítko Nastavení odesílání > dávkování > Přidat Batch.</span><span class="sxs-lookup"><span data-stu-id="4e069-279">Click Send Settings > Batching > Add Batch.</span></span>
2. <span data-ttu-id="4e069-280">Název listu, zadejte **InvoiceBatch**, zadejte popis a pak klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="4e069-280">For batch name, enter **InvoiceBatch**, provide a description, and then click **Next**.</span></span>
3. <span data-ttu-id="4e069-281">Zadejte kritéria, dávky, která definuje, které zprávy musí být zpracovat v dávce.</span><span class="sxs-lookup"><span data-stu-id="4e069-281">Specify a batch criteria, that defines which messages must be batched.</span></span> <span data-ttu-id="4e069-282">V tomto řešení jsme dávky všechny zprávy.</span><span class="sxs-lookup"><span data-stu-id="4e069-282">In this solution, we batch all messages.</span></span> <span data-ttu-id="4e069-283">Ano, vyberte použít rozšířené definice možnost a zadejte **1 = 1**.</span><span class="sxs-lookup"><span data-stu-id="4e069-283">So, select the Use advanced definitions option, and enter **1 = 1**.</span></span> <span data-ttu-id="4e069-284">Toto je stav, který bude mít vždy hodnotu true, a proto všechny zprávy se zpracovat v dávce.</span><span class="sxs-lookup"><span data-stu-id="4e069-284">This is a condition which will always be true, and hence all messages will be batched.</span></span> <span data-ttu-id="4e069-285">Klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="4e069-285">Click **Next**.</span></span>
   
   ![][17]  
4. <span data-ttu-id="4e069-286">Zadejte kritéria, verze batch.</span><span class="sxs-lookup"><span data-stu-id="4e069-286">Specify a batch release criteria.</span></span> <span data-ttu-id="4e069-287">Vyberte z rozevíracího pole **MessageCountBased**a pro **počet**, zadejte **3**.</span><span class="sxs-lookup"><span data-stu-id="4e069-287">From the drop-box, select **MessageCountBased**, and for **Count**, specify **3**.</span></span> <span data-ttu-id="4e069-288">To znamená, že dávku zpráv tři odešlou do Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-288">This means that a batch of three messages will be sent to Northwind.</span></span> <span data-ttu-id="4e069-289">Klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="4e069-289">Click **Next**.</span></span>
   
   ![][18]  
5. <span data-ttu-id="4e069-290">Zkontrolujte souhrn a pak klikněte na tlačítko **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="4e069-290">Review the summary and then click **Save**.</span></span> <span data-ttu-id="4e069-291">Klikněte na tlačítko **nasadit** znovu nasadit smlouvu.</span><span class="sxs-lookup"><span data-stu-id="4e069-291">Click **Deploy** to redeploy the agreement.</span></span>
6. <span data-ttu-id="4e069-292">Přejděte zpět na **kurzu klienta**, klikněte na tlačítko **odeslat interní faktury**a postupujte podle pokynů k odeslání faktury.</span><span class="sxs-lookup"><span data-stu-id="4e069-292">Go back to the **Tutorial Client**, click **Send In-house Invoice**, and follow the prompts to send the invoice.</span></span> <span data-ttu-id="4e069-293">Si všimnete, že žádné faktury je obdrželi v Northwind, protože velikost dávky není splněná.</span><span class="sxs-lookup"><span data-stu-id="4e069-293">You will notice that no invoice is received at Northwind because the batch size is not met.</span></span> <span data-ttu-id="4e069-294">Tento krok opakujte dvakrát, takže budete mít tři faktury zprávy odeslané do Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-294">Repeat this step two more times, so that you have three invoice messages sent to Northwind.</span></span> <span data-ttu-id="4e069-295">To splňuje kritéria batch verze 3 zprávy a měli byste vidět faktury v Northwind.</span><span class="sxs-lookup"><span data-stu-id="4e069-295">This satisfies the batch release criteria of 3 messages and you should now see an invoice at Northwind.</span></span>

<!--Image references-->
[1]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-1.PNG  
[2]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-2.PNG  
[3]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-3.PNG
[4]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-4.PNG  
[5]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-5.PNG  
[6]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-6.PNG  
[7]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-7.PNG  
[8]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-8.PNG
[9]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-9.PNG  
[10]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-10.PNG  
[11]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-11.PNG  
[12]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-12.PNG  
[13]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-13.PNG
[14]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-14.PNG  
[15]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-15.PNG  
[16]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-16.PNG  
[17]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-17.PNG  
[18]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-18.PNG

