---
title: "Přehled služby Vyrovnávání zatížení Azure | Microsoft Docs"
description: "Přehled funkce Vyrovnávání zatížení Azure, architekturu a implementace. Zjistěte, jak funguje nástroj pro vyrovnávání zatížení a využít v cloudu."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 0f313dc0-f007-4cee-b2b9-f542357925a3
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/24/2016
ms.author: kumud
ms.openlocfilehash: 617da1cf41db08d319d6fe9fa7bc96b794a0001e
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="azure-load-balancer-overview"></a><span data-ttu-id="f3527-104">Azure Load Balancer – přehled</span><span class="sxs-lookup"><span data-stu-id="f3527-104">Azure Load Balancer overview</span></span>

<span data-ttu-id="f3527-105">Azure Load Balancer zajišťuje vysokou dostupnost a výkon sítě pro vaše aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3527-105">Azure Load Balancer delivers high availability and network performance to your applications.</span></span> <span data-ttu-id="f3527-106">Je Vyrovnávání zatížení vrstvy 4 (TCP, UDP), která distribuuje příchozí komunikaci mezi pořádku instancí služby definované v sadě s vyrovnáváním zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-106">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

<span data-ttu-id="f3527-107">Azure nástroj pro vyrovnávání zatížení můžete nakonfigurovat:</span><span class="sxs-lookup"><span data-stu-id="f3527-107">Azure Load Balancer can be configured to:</span></span>

* <span data-ttu-id="f3527-108">Načtěte vyrovnávání příchozí přenosy z Internetu k virtuálním počítačům.</span><span class="sxs-lookup"><span data-stu-id="f3527-108">Load balance incoming Internet traffic to virtual machines.</span></span> <span data-ttu-id="f3527-109">Tato konfigurace se označuje jako [Vyrovnávání zatížení internetového](load-balancer-internet-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f3527-109">This configuration is known as [Internet-facing load balancing](load-balancer-internet-overview.md).</span></span>
* <span data-ttu-id="f3527-110">Přenosy Vyrovnávání zatížení mezi virtuálními počítači ve virtuální síti, mezi virtuálními počítači v cloudové služby nebo mezi místními počítači a virtuální počítače ve virtuální síti mezi různými místy.</span><span class="sxs-lookup"><span data-stu-id="f3527-110">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="f3527-111">Tato konfigurace se označuje jako [Vyrovnávání zatížení pro vnitřní](load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f3527-111">This configuration is known as [internal load balancing](load-balancer-internal-overview.md).</span></span>
* <span data-ttu-id="f3527-112">Předat dál externích přenosů pro konkrétní virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="f3527-112">Forward external traffic to a specific virtual machine.</span></span>

<span data-ttu-id="f3527-113">Všechny prostředky v cloudu potřebovat veřejnou IP adresu, která být dosažitelný z Internetu.</span><span class="sxs-lookup"><span data-stu-id="f3527-113">All resources in the cloud need a public IP address to be reachable from the Internet.</span></span> <span data-ttu-id="f3527-114">Infrastruktura cloudu v Azure používá směrovat IP adresy pro její prostředky.</span><span class="sxs-lookup"><span data-stu-id="f3527-114">The cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="f3527-115">Azure používá překlad síťových adres (NAT) s veřejné IP adresy pro komunikaci k Internetu.</span><span class="sxs-lookup"><span data-stu-id="f3527-115">Azure uses network address translation (NAT) with public IP addresses to communicate to the Internet.</span></span>

## <a name="azure-deployment-models"></a><span data-ttu-id="f3527-116">Modelech nasazení Azure</span><span class="sxs-lookup"><span data-stu-id="f3527-116">Azure deployment models</span></span>

<span data-ttu-id="f3527-117">Je důležité porozumět rozdílům mezi portál Azure classic a Resource Manager [modely nasazení](../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="f3527-117">It's important to understand the differences between the Azure classic and Resource Manager [deployment models](../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="f3527-118">Azure nástroj pro vyrovnávání zatížení je nakonfigurována jinak než v každém modelu.</span><span class="sxs-lookup"><span data-stu-id="f3527-118">Azure Load Balancer is configured differently in each model.</span></span>

### <a name="azure-classic-deployment-model"></a><span data-ttu-id="f3527-119">Model nasazení Azure classic</span><span class="sxs-lookup"><span data-stu-id="f3527-119">Azure classic deployment model</span></span>

<span data-ttu-id="f3527-120">Virtuální počítače nasazené v rámci hranice cloudové služby je možné seskupit použít nástroj pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-120">Virtual machines deployed within a cloud service boundary can be grouped to use a load balancer.</span></span> <span data-ttu-id="f3527-121">V tomto modelu veřejnou IP adresu a plně kvalifikovaný název domény, (FQDN) jsou přiřazeny ke cloudové službě.</span><span class="sxs-lookup"><span data-stu-id="f3527-121">In this model a public IP address and a Fully Qualified Domain Name, (FQDN) are assigned to a cloud service.</span></span> <span data-ttu-id="f3527-122">Nástroje pro vyrovnávání zatížení portu překlad a vyrovnává zatížení síťového provozu pomocí veřejnou IP adresu pro cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="f3527-122">The load balancer does port translation and load balances the network traffic by using the public IP address for the cloud service.</span></span>

<span data-ttu-id="f3527-123">Provoz s vyrovnáváním zatížení je definována pomocí koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="f3527-123">Load-balanced traffic is defined by endpoints.</span></span> <span data-ttu-id="f3527-124">Koncové body překlad portu jsou v relaci mezi přiřazené veřejný port veřejnou IP adresu a místního portu přiřazené ke službě na konkrétní virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="f3527-124">Port translation endpoints have a one-to-one relationship between the public-assigned port of the public IP address and the local port assigned to the service on a specific virtual machine.</span></span> <span data-ttu-id="f3527-125">Koncové body Vyrovnávání zatížení mají vztah jeden mnoho mezi veřejná IP adresa a místní porty, které jsou přiřazeny k službám na virtuálních počítačích v rámci cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="f3527-125">Load balancing endpoints have a one-to-many relationship between the public IP address and the local ports assigned to the services on the virtual machines in the cloud service.</span></span>

![Azure pro vyrovnávání zatížení v modelu nasazení classic](./media/load-balancer-overview/asm-lb.png)

<span data-ttu-id="f3527-127">Obrázek 1 – Azure pro vyrovnávání zatížení v modelu nasazení classic</span><span class="sxs-lookup"><span data-stu-id="f3527-127">Figure 1 - Azure Load Balancer in the classic deployment model</span></span>

<span data-ttu-id="f3527-128">Popisek domény pro veřejnou IP adresu, která používá nástroj pro vyrovnávání zatížení pro tento model nasazení je \<název cloudové služby\>. cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="f3527-128">The domain label for the public IP address that the load balancer uses for this deployment model is \<cloud service name\>.cloudapp.net.</span></span> <span data-ttu-id="f3527-129">Následující obrázek znázorňuje nástroje pro vyrovnávání zatížení Azure v tomto modelu.</span><span class="sxs-lookup"><span data-stu-id="f3527-129">The following graphic shows the Azure Load Balancer in this model.</span></span>

### <a name="azure-resource-manager-deployment-model"></a><span data-ttu-id="f3527-130">Model nasazení Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f3527-130">Azure Resource Manager deployment model</span></span>

<span data-ttu-id="f3527-131">V modelu nasazení Resource Manager je potřeba vytvořit Cloudovou službu.</span><span class="sxs-lookup"><span data-stu-id="f3527-131">In the Resource Manager deployment model there is no need to create a Cloud service.</span></span> <span data-ttu-id="f3527-132">Nástroje pro vyrovnávání zatížení se vytvoří explicitně směrovat provoz mezi více virtuálními počítači.</span><span class="sxs-lookup"><span data-stu-id="f3527-132">The load balancer is created to explicitly route traffic among multiple virtual machines.</span></span>

<span data-ttu-id="f3527-133">Veřejná IP adresa je jednotlivých prostředků, který má popisek domény (název DNS).</span><span class="sxs-lookup"><span data-stu-id="f3527-133">A public IP address is an individual resource that has a domain label (DNS name).</span></span> <span data-ttu-id="f3527-134">Veřejná IP adresa je přidružen prostředek pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-134">The public IP address is associated with the load balancer resource.</span></span> <span data-ttu-id="f3527-135">Pravidla nástroje pro vyrovnávání zatížení a příchozího pravidla NAT použít veřejnou IP adresu jako koncový bod sítě Internet pro prostředky, které jsou přijímá provoz s vyrovnáváním zatížení sítě.</span><span class="sxs-lookup"><span data-stu-id="f3527-135">Load balancer rules and inbound NAT rules use the public IP address as the Internet endpoint for the resources that are receiving load-balanced network traffic.</span></span>

<span data-ttu-id="f3527-136">Privátní nebo veřejné IP adresa je přiřazena k síťovému prostředku rozhraní připojené k virtuálnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="f3527-136">A private or public IP address is assigned to the network interface resource attached to a virtual machine.</span></span> <span data-ttu-id="f3527-137">Po síťové rozhraní je přidán do fondu vyrovnávání zatížení back-end IP adres, je možné odesílat Vyrovnávání zatížení síťových přenosů na základě pravidel Vyrovnávání zatížení sítě, které jsou vytvořené pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-137">Once a network interface is added to a load balancer's back-end IP address pool, the load balancer is able to send load-balanced network traffic based on the load-balanced rules that are created.</span></span>

<span data-ttu-id="f3527-138">Následující obrázek ukazuje nástroje pro vyrovnávání zatížení Azure v tomto modelu:</span><span class="sxs-lookup"><span data-stu-id="f3527-138">The following graphic shows the Azure Load Balancer in this model:</span></span>

![Pro vyrovnávání zatížení Azure ve službě Správce prostředků](./media/load-balancer-overview/arm-lb.png)

<span data-ttu-id="f3527-140">Obrázek 2 – ve službě Správce prostředků pro vyrovnávání zatížení Azure</span><span class="sxs-lookup"><span data-stu-id="f3527-140">Figure 2 - Azure Load Balancer in Resource Manager</span></span>

<span data-ttu-id="f3527-141">Nástroje pro vyrovnávání zatížení je možné spravovat prostřednictvím šablony založené na správci prostředků, rozhraní API a nástroje.</span><span class="sxs-lookup"><span data-stu-id="f3527-141">The load balancer can be managed through Resource Manager-based templates, APIs, and tools.</span></span> <span data-ttu-id="f3527-142">Další informace o službě Správce prostředků najdete v tématu [Přehled služby Správce prostředků](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f3527-142">To learn more about Resource Manager, see the [Resource Manager overview](../azure-resource-manager/resource-group-overview.md).</span></span>

## <a name="load-balancer-features"></a><span data-ttu-id="f3527-143">Funkce nástroje pro vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="f3527-143">Load Balancer features</span></span>

* <span data-ttu-id="f3527-144">Na základě hodnoty hash distribuce</span><span class="sxs-lookup"><span data-stu-id="f3527-144">Hash-based distribution</span></span>

    <span data-ttu-id="f3527-145">Azure nástroj pro vyrovnávání zatížení používá algoritmus hash na základě distribuce.</span><span class="sxs-lookup"><span data-stu-id="f3527-145">Azure Load Balancer uses a hash-based distribution algorithm.</span></span> <span data-ttu-id="f3527-146">Ve výchozím nastavení použije hodnotu hash 5 řazené kolekce členů tvořený zdrojové IP adresy, zdrojového portu, cílové adresy IP, cílový port a typ protokolu mapovat provoz dostupné servery.</span><span class="sxs-lookup"><span data-stu-id="f3527-146">By default, it uses a 5-tuple hash composed of source IP, source port, destination IP, destination port, and protocol type to map traffic to available servers.</span></span> <span data-ttu-id="f3527-147">Poskytuje věrnosti pouze *v rámci* relace přenosu.</span><span class="sxs-lookup"><span data-stu-id="f3527-147">It provides stickiness only *within* a transport session.</span></span> <span data-ttu-id="f3527-148">Pakety ve stejné relaci TCP nebo UDP se přesměruje na stejnou instanci za koncový bod Vyrovnávání zatížení sítě.</span><span class="sxs-lookup"><span data-stu-id="f3527-148">Packets in the same TCP or UDP session will be directed to the same instance behind the load-balanced endpoint.</span></span> <span data-ttu-id="f3527-149">Pokud klient zavře a znovu otevře připojení nebo spustí novou relaci ze stejné zdrojové IP adresy, zdrojového portu se změní.</span><span class="sxs-lookup"><span data-stu-id="f3527-149">When the client closes and reopens the connection or starts a new session from the same source IP, the source port changes.</span></span> <span data-ttu-id="f3527-150">To může způsobit provoz přejít na jiný koncový bod v jiném datovém centru.</span><span class="sxs-lookup"><span data-stu-id="f3527-150">This may cause the traffic to go to a different endpoint in a different datacenter.</span></span>

    <span data-ttu-id="f3527-151">Další podrobnosti najdete v tématu [režim distribuce nástroje pro vyrovnávání zatížení](load-balancer-distribution-mode.md).</span><span class="sxs-lookup"><span data-stu-id="f3527-151">For more details, see [Load balancer distribution mode](load-balancer-distribution-mode.md).</span></span> <span data-ttu-id="f3527-152">Následující obrázek znázorňuje rozdělení na základě hodnoty hash:</span><span class="sxs-lookup"><span data-stu-id="f3527-152">The following graphic shows the hash-based distribution:</span></span>

    ![Na základě hodnoty hash distribuce](./media/load-balancer-overview/load-balancer-distribution.png)

    <span data-ttu-id="f3527-154">Obrázek 3 - Hash na základě distribuce</span><span class="sxs-lookup"><span data-stu-id="f3527-154">Figure 3 - Hash based distribution</span></span>

* <span data-ttu-id="f3527-155">Přesměrování portu</span><span class="sxs-lookup"><span data-stu-id="f3527-155">Port forwarding</span></span>

    <span data-ttu-id="f3527-156">Azure poskytuje nástroj pro vyrovnávání zatížení můžete řídit, je spravovaný přes jak příchozí komunikaci.</span><span class="sxs-lookup"><span data-stu-id="f3527-156">Azure Load Balancer gives you control over how inbound communication is managed.</span></span> <span data-ttu-id="f3527-157">Tato komunikace zahrnuje provozu iniciované z hostitele Internet, virtuální počítače v jiných cloudových služeb nebo virtuálních sítí.</span><span class="sxs-lookup"><span data-stu-id="f3527-157">This communication includes traffic initiated from Internet hosts, virtual machines in other cloud services, or virtual networks.</span></span> <span data-ttu-id="f3527-158">Tento ovládací prvek je reprezentována koncový bod (také nazývané vstupní koncový bod).</span><span class="sxs-lookup"><span data-stu-id="f3527-158">This control is represented by an endpoint (also called an input endpoint).</span></span>

    <span data-ttu-id="f3527-159">Vstupní koncový bod naslouchá na veřejný port a předává přenos pro interní port.</span><span class="sxs-lookup"><span data-stu-id="f3527-159">An input endpoint listens on a public port and forwards traffic to an internal port.</span></span> <span data-ttu-id="f3527-160">Můžete namapovat stejné porty pro koncový bod interních nebo externích nebo použít jiný port pro ně.</span><span class="sxs-lookup"><span data-stu-id="f3527-160">You can map the same ports for an internal or external endpoint or use a different port for them.</span></span> <span data-ttu-id="f3527-161">Například můžete mít webový server nakonfigurován pro naslouchání na portu 81 při mapování veřejný koncový bod je port 80.</span><span class="sxs-lookup"><span data-stu-id="f3527-161">For example, you can have a web server configured to listen to port 81 while the public endpoint mapping is port 80.</span></span> <span data-ttu-id="f3527-162">Vytvoření veřejný koncový bod se aktivuje vytvoření instance služby Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-162">The creation of a public endpoint triggers the creation of a load balancer instance.</span></span>

    <span data-ttu-id="f3527-163">Při použití portálu Azure, portálu automaticky vytvoří koncové body k virtuálnímu počítači pro protokol RDP (Remote Desktop) a vzdálenou komunikaci relace prostředí Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3527-163">When created using the Azure portal, the portal automatically creates endpoints to the virtual machine for the Remote Desktop Protocol (RDP) and remote Windows PowerShell session traffic.</span></span> <span data-ttu-id="f3527-164">Tyto koncové body můžete použít ke vzdálené správě virtuálního počítače přes Internet.</span><span class="sxs-lookup"><span data-stu-id="f3527-164">You can use these endpoints to remotely administer the virtual machine over the Internet.</span></span>

* <span data-ttu-id="f3527-165">Automatické překonfigurování</span><span class="sxs-lookup"><span data-stu-id="f3527-165">Automatic reconfiguration</span></span>

    <span data-ttu-id="f3527-166">Azure nástroj pro vyrovnávání zatížení okamžitě automatických při změně velikosti instancí nahoru nebo dolů.</span><span class="sxs-lookup"><span data-stu-id="f3527-166">Azure Load Balancer instantly reconfigures itself when you scale instances up or down.</span></span> <span data-ttu-id="f3527-167">Například tuto změnu konfigurace se stane, když zvýšíte počet instancí pro web/role pracovního procesu v cloudové službě, nebo při přidání dalších virtuálních počítačů do stejné sady vyrovnáváním zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-167">For example, this reconfiguration happens when you increase the instance count for web/worker roles in a cloud service or when you add additional virtual machines into the same load-balanced set.</span></span>

* <span data-ttu-id="f3527-168">Monitorování služeb</span><span class="sxs-lookup"><span data-stu-id="f3527-168">Service monitoring</span></span>

    <span data-ttu-id="f3527-169">Azure nástroj pro vyrovnávání zatížení můžete testovat stav různých instancí serveru.</span><span class="sxs-lookup"><span data-stu-id="f3527-169">Azure Load Balancer can probe the health of the various server instances.</span></span> <span data-ttu-id="f3527-170">Když sondu přestane reagovat, nástroje pro vyrovnávání zatížení zastaví odesílání nových připojení k instancím není v pořádku.</span><span class="sxs-lookup"><span data-stu-id="f3527-170">When a probe fails to respond, the load balancer stops sending new connections to the unhealthy instances.</span></span> <span data-ttu-id="f3527-171">Nejsou ovlivněná existující připojení.</span><span class="sxs-lookup"><span data-stu-id="f3527-171">Existing connections are not impacted.</span></span>

    <span data-ttu-id="f3527-172">Jsou podporovány tři typy sondy:</span><span class="sxs-lookup"><span data-stu-id="f3527-172">Three types of probes are supported:</span></span>

    + <span data-ttu-id="f3527-173">**Test agenta hosta (na platformě jako služby pouze ve virtuálních počítačích):** nástroje pro vyrovnávání zatížení využívá agent hosta ve virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="f3527-173">**Guest agent probe (on Platform as a Service Virtual Machines only):** The load balancer utilizes the guest agent inside the virtual machine.</span></span> <span data-ttu-id="f3527-174">Agent hosta, který přijímá a odpoví odpověď HTTP 200 OK jenom v případě, že instance je ve stavu připraveno (tj. instance není ve stavu jako o volném čase, recyklace nebo ukončení).</span><span class="sxs-lookup"><span data-stu-id="f3527-174">The guest agent listens and responds with an HTTP 200 OK response only when the instance is in the ready state (i.e. the instance is not in a state like busy, recycling, or stopping).</span></span> <span data-ttu-id="f3527-175">Když agent přestane reagovat s 200 OK protokolu HTTP, nástroje pro vyrovnávání zatížení označí instance jako reagovat a zastaví odesílání provozu do této instance.</span><span class="sxs-lookup"><span data-stu-id="f3527-175">If the agent fails to respond with an HTTP 200 OK, the load balancer marks the instance as unresponsive and stops sending traffic to that instance.</span></span> <span data-ttu-id="f3527-176">Nástroje pro vyrovnávání zatížení bude nadále příkazem ping otestovat instance.</span><span class="sxs-lookup"><span data-stu-id="f3527-176">The load balancer continues to ping the instance.</span></span> <span data-ttu-id="f3527-177">Pokud agenta hosta odpoví HTTP 200, bude nástroj pro vyrovnávání zatížení znovu odeslat provoz tuto instanci.</span><span class="sxs-lookup"><span data-stu-id="f3527-177">If the guest agent responds with an HTTP 200, the load balancer will send traffic to that instance again.</span></span> <span data-ttu-id="f3527-178">Pokud používáte webovou roli, kód webu obvykle běží v w3wp.exe, který není monitorován pomocí Azure prostředků infrastruktury nebo hostovaného agenta.</span><span class="sxs-lookup"><span data-stu-id="f3527-178">When you're using a web role, your website code typically runs in w3wp.exe, which is not monitored by the Azure fabric or guest agent.</span></span> <span data-ttu-id="f3527-179">To znamená, že selhání v w3wp.exe (např. odpovědi HTTP 500), nebudou ohlášena v agentovi hosta a nástroje pro vyrovnávání zatížení nebude vědět o trvat tuto instanci mimo otočení.</span><span class="sxs-lookup"><span data-stu-id="f3527-179">This means that failures in w3wp.exe (e.g. HTTP 500 responses) will not be reported to the guest agent, and the load balancer will not know to take that instance out of rotation.</span></span>
    + <span data-ttu-id="f3527-180">**Vlastní test paměti HTTP:** tento test přepíše výchozí kontroly (agenta hosta).</span><span class="sxs-lookup"><span data-stu-id="f3527-180">**HTTP custom probe:** This probe overrides the default (guest agent) probe.</span></span> <span data-ttu-id="f3527-181">Můžete ho vytvořit vlastní logiky k určení stavu role instance.</span><span class="sxs-lookup"><span data-stu-id="f3527-181">You can use it to create your own custom logic to determine the health of the role instance.</span></span> <span data-ttu-id="f3527-182">Nástroje pro vyrovnávání zatížení bude pravidelně testů váš koncový bod (každých 15 sekund, ve výchozím nastavení).</span><span class="sxs-lookup"><span data-stu-id="f3527-182">The load balancer will regularly probe your endpoint (every 15 seconds, by default).</span></span> <span data-ttu-id="f3527-183">Instance považován za v otočení, pokud ji odpoví TCP ACK nebo HTTP 200 během časového limitu (výchozí hodnoty 31 sekund).</span><span class="sxs-lookup"><span data-stu-id="f3527-183">The instance is considered to be in rotation if it responds with a TCP ACK or HTTP 200 within the timeout period (default of 31 seconds).</span></span> <span data-ttu-id="f3527-184">To je užitečné pro implementaci vlastní logiky k odebrání instance otočení Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-184">This is useful for implementing your own logic to remove instances from the load balancer's rotation.</span></span> <span data-ttu-id="f3527-185">Můžete například nakonfigurovat instanci systému na vrátit stav bez 200, pokud je instance vyšší než 90 % využití procesoru.</span><span class="sxs-lookup"><span data-stu-id="f3527-185">For example, you can configure the instance to return a non-200 status if the instance is above 90% CPU.</span></span> <span data-ttu-id="f3527-186">Pro webové role, které používají w3wp.exe, můžete také získat automatické monitorování vašeho webu, protože selhání ve vašem kódu webu vrátit stav bez 200 do sondy.</span><span class="sxs-lookup"><span data-stu-id="f3527-186">For web roles that use w3wp.exe, you also get automatic monitoring of your website, since failures in your website code return a non-200 status to the probe.</span></span>
    + <span data-ttu-id="f3527-187">**Vlastní test paměti TCP:** tento test spoléhá na úspěšné vytvoření relace TCP port definované testu.</span><span class="sxs-lookup"><span data-stu-id="f3527-187">**TCP custom probe:** This probe relies on successful TCP session establishment to a defined probe port.</span></span>

    <span data-ttu-id="f3527-188">Další informace najdete v tématu [LoadBalancerProbe schématu](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span><span class="sxs-lookup"><span data-stu-id="f3527-188">For more information, see the [LoadBalancerProbe schema](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span></span>

* <span data-ttu-id="f3527-189">Zdroj NAT</span><span class="sxs-lookup"><span data-stu-id="f3527-189">Source NAT</span></span>

    <span data-ttu-id="f3527-190">Všechny odchozí přenosy na Internet, která pochází z vaší služby projde zdroj NAT (SNAT) pomocí stejné adresy VIP jako příchozí přenosy.</span><span class="sxs-lookup"><span data-stu-id="f3527-190">All outbound traffic to the Internet that originates from your service undergoes source NAT (SNAT) by using the same VIP address as the incoming traffic.</span></span> <span data-ttu-id="f3527-191">Překládat pomocí SNAT poskytuje důležité výhody:</span><span class="sxs-lookup"><span data-stu-id="f3527-191">SNAT provides important benefits:</span></span>

    + <span data-ttu-id="f3527-192">Umožňuje snadno upgradu a zotavení po havárii služeb, od VIP může dynamicky mapovat k jiné instanci služby.</span><span class="sxs-lookup"><span data-stu-id="f3527-192">It enables easy upgrade and disaster recovery of services, since the VIP can be dynamically mapped to another instance of the service.</span></span>
    + <span data-ttu-id="f3527-193">Ho usnadňuje správu seznamu ACL řízení přístupu.</span><span class="sxs-lookup"><span data-stu-id="f3527-193">It makes access control list (ACL) management easier.</span></span> <span data-ttu-id="f3527-194">Seznamy ACL, vyjádřené jako virtuální IP adresy neměňte jako služby škálování nahoru, dolů nebo získat znovu nasazena.</span><span class="sxs-lookup"><span data-stu-id="f3527-194">ACLs expressed in terms of VIPs do not change as services scale up, down, or get redeployed.</span></span>

    <span data-ttu-id="f3527-195">Konfigurace služby Vyrovnávání zatížení podporuje úplné kuželový NAT pro UDP.</span><span class="sxs-lookup"><span data-stu-id="f3527-195">The load balancer configuration supports full cone NAT for UDP.</span></span> <span data-ttu-id="f3527-196">Úplné kuželový NAT je typ zařízení NAT, kde port umožňuje příchozí připojení z jakékoli externího hostitele (v odpovědi na požadavek odchozí).</span><span class="sxs-lookup"><span data-stu-id="f3527-196">Full cone NAT is a type of NAT where the port allows inbound connections from any external host (in response to an outbound request).</span></span>

    <span data-ttu-id="f3527-197">Pro každý nový odchozí připojení, které zahájí virtuálního počítače je přidělena odchozí port taky nástroje pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3527-197">For each new outbound connection that a virtual machine initiates, an outbound port is also allocated by the load balancer.</span></span> <span data-ttu-id="f3527-198">Externího hostitele vidí provoz s virtuální port přidělené virtuální IP adresy IP.</span><span class="sxs-lookup"><span data-stu-id="f3527-198">The external host sees traffic with a virtual IP (VIP)-allocated port.</span></span> <span data-ttu-id="f3527-199">Pro scénáře, které vyžadují hodně odchozí připojení, doporučuje se použít [veřejná IP adresa na úrovni instance](../virtual-network/virtual-networks-instance-level-public-ip.md) adresy tak, aby virtuální počítače odchozí vyhrazenou IP adresu pro překládat pomocí SNAT.</span><span class="sxs-lookup"><span data-stu-id="f3527-199">For scenarios that require a large number of outbound connections, it is recommended to use [instance-level public IP](../virtual-network/virtual-networks-instance-level-public-ip.md) addresses so that the VMs have a dedicated outbound IP address for SNAT.</span></span> <span data-ttu-id="f3527-200">Tím se snižuje riziko vyčerpání portu.</span><span class="sxs-lookup"><span data-stu-id="f3527-200">This reduces the risk of port exhaustion.</span></span>

    <span data-ttu-id="f3527-201">Najdete v tématu [odchozí připojení](load-balancer-outbound-connections.md) článku Další podrobnosti k tomuto tématu.</span><span class="sxs-lookup"><span data-stu-id="f3527-201">Please see [outbound connections](load-balancer-outbound-connections.md) article for more details on this topic.</span></span>

### <a name="support-for-multiple-load-balanced-ip-addresses-for-virtual-machines"></a><span data-ttu-id="f3527-202">Podpora pro více Vyrovnávání zatížení sítě IP adres pro virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="f3527-202">Support for multiple load-balanced IP addresses for virtual machines</span></span>
<span data-ttu-id="f3527-203">Sada virtuálních počítačů můžete přiřadit více než jeden Vyrovnávání zatížení veřejnou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="f3527-203">You can assign more than one load-balanced public IP address to a set of virtual machines.</span></span> <span data-ttu-id="f3527-204">Se tato možnost může být hostitelem více webů SSL nebo více naslouchací procesy skupiny dostupnosti AlwaysOn systému SQL Server na stejnou sadu virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3527-204">With this ability, you can host multiple SSL websites and/or multiple SQL Server AlwaysOn Availability Group listeners on the same set of virtual machines.</span></span> <span data-ttu-id="f3527-205">Další informace najdete v tématu [několika virtuálními IP adresami za cloudové služby](load-balancer-multivip.md).</span><span class="sxs-lookup"><span data-stu-id="f3527-205">For more information, see [Multiple VIPs per cloud service](load-balancer-multivip.md).</span></span>

[!INCLUDE [load-balancer-compare-tm-ag-lb-include.md](../../includes/load-balancer-compare-tm-ag-lb-include.md)]

## <a name="limitations"></a><span data-ttu-id="f3527-206">Omezení</span><span class="sxs-lookup"><span data-stu-id="f3527-206">Limitations</span></span>

<span data-ttu-id="f3527-207">Fondy back-end pro vyrovnávání zatížení může obsahovat všechny SKU virtuálních počítačů s výjimkou základní vrstvě.</span><span class="sxs-lookup"><span data-stu-id="f3527-207">Load Balancer backend pools can contain any VM SKU except Basic tier.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f3527-208">Další kroky</span><span class="sxs-lookup"><span data-stu-id="f3527-208">Next steps</span></span>

- <span data-ttu-id="f3527-209">Další informace o [internetového nástroj pro vyrovnávání zatížení](load-balancer-internet-overview.md)</span><span class="sxs-lookup"><span data-stu-id="f3527-209">Learn more about [Internet-facing load balancer](load-balancer-internet-overview.md)</span></span>

- <span data-ttu-id="f3527-210">Další informace o [přehled nástroje pro vyrovnávání zatížení interní](load-balancer-internal-overview.md)</span><span class="sxs-lookup"><span data-stu-id="f3527-210">Learn more about [Internal load balancer overview](load-balancer-internal-overview.md)</span></span>

- <span data-ttu-id="f3527-211">Vytvoření [internetového nástroj pro vyrovnávání zatížení](load-balancer-get-started-internet-portal.md)</span><span class="sxs-lookup"><span data-stu-id="f3527-211">Create an [Internet-facing load balancer](load-balancer-get-started-internet-portal.md)</span></span>

- <span data-ttu-id="f3527-212">Přečtěte si o některých dalších klíče [sítě možnosti](../networking/networking-overview.md) Azure</span><span class="sxs-lookup"><span data-stu-id="f3527-212">Learn about some of the other key [networking capabilities](../networking/networking-overview.md) of Azure</span></span>

