---
title: "Přehled nástroje pro vyrovnávání zatížení aaaAzure | Microsoft Docs"
description: "Přehled funkce Vyrovnávání zatížení Azure, architekturu a implementace. Zjistěte, jak funguje nástroj pro vyrovnávání zatížení hello a využít v cloudu hello."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 0f313dc0-f007-4cee-b2b9-f542357925a3
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/24/2016
ms.author: kumud
ms.openlocfilehash: 2376a02f7cbbbed6a90f216419c0c3d30f594272
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="azure-load-balancer-overview"></a><span data-ttu-id="4048c-104">Azure Load Balancer – přehled</span><span class="sxs-lookup"><span data-stu-id="4048c-104">Azure Load Balancer overview</span></span>

<span data-ttu-id="4048c-105">Azure nástroj pro vyrovnávání zatížení zajišťuje vysoké dostupnosti a výkonu v síti tooyour aplikace.</span><span class="sxs-lookup"><span data-stu-id="4048c-105">Azure Load Balancer delivers high availability and network performance tooyour applications.</span></span> <span data-ttu-id="4048c-106">Je Vyrovnávání zatížení vrstvy 4 (TCP, UDP), která distribuuje příchozí komunikaci mezi pořádku instancí služby definované v sadě s vyrovnáváním zatížení.</span><span class="sxs-lookup"><span data-stu-id="4048c-106">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

<span data-ttu-id="4048c-107">Azure nástroj pro vyrovnávání zatížení můžete nakonfigurovat:</span><span class="sxs-lookup"><span data-stu-id="4048c-107">Azure Load Balancer can be configured to:</span></span>

* <span data-ttu-id="4048c-108">Vyrovnávat zatížení příchozí internetové přenosy toovirtual počítačů.</span><span class="sxs-lookup"><span data-stu-id="4048c-108">Load balance incoming Internet traffic toovirtual machines.</span></span> <span data-ttu-id="4048c-109">Tato konfigurace se označuje jako [Vyrovnávání zatížení internetového](load-balancer-internet-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4048c-109">This configuration is known as [Internet-facing load balancing](load-balancer-internet-overview.md).</span></span>
* <span data-ttu-id="4048c-110">Přenosy Vyrovnávání zatížení mezi virtuálními počítači ve virtuální síti, mezi virtuálními počítači v cloudové služby nebo mezi místními počítači a virtuální počítače ve virtuální síti mezi různými místy.</span><span class="sxs-lookup"><span data-stu-id="4048c-110">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="4048c-111">Tato konfigurace se označuje jako [Vyrovnávání zatížení pro vnitřní](load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4048c-111">This configuration is known as [internal load balancing](load-balancer-internal-overview.md).</span></span>
* <span data-ttu-id="4048c-112">Předat dál externích přenosů tooa konkrétní virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="4048c-112">Forward external traffic tooa specific virtual machine.</span></span>

<span data-ttu-id="4048c-113">Všechny prostředky v cloudu hello potřebovat dosažitelný z Internetu hello veřejné toobe adres IP.</span><span class="sxs-lookup"><span data-stu-id="4048c-113">All resources in hello cloud need a public IP address toobe reachable from hello Internet.</span></span> <span data-ttu-id="4048c-114">Hello cloudové infrastruktury v Azure používá směrovat IP adresy pro její prostředky.</span><span class="sxs-lookup"><span data-stu-id="4048c-114">hello cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="4048c-115">Azure používá překlad síťových adres (NAT) s veřejné IP adresy toocommunicate toohello Internetu.</span><span class="sxs-lookup"><span data-stu-id="4048c-115">Azure uses network address translation (NAT) with public IP addresses toocommunicate toohello Internet.</span></span>

## <a name="azure-deployment-models"></a><span data-ttu-id="4048c-116">Modelech nasazení Azure</span><span class="sxs-lookup"><span data-stu-id="4048c-116">Azure deployment models</span></span>

<span data-ttu-id="4048c-117">Je důležité toounderstand hello rozdíly mezi hello Azure classic a Resource Manager [modely nasazení](../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="4048c-117">It's important toounderstand hello differences between hello Azure classic and Resource Manager [deployment models](../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="4048c-118">Azure nástroj pro vyrovnávání zatížení je nakonfigurována jinak než v každém modelu.</span><span class="sxs-lookup"><span data-stu-id="4048c-118">Azure Load Balancer is configured differently in each model.</span></span>

### <a name="azure-classic-deployment-model"></a><span data-ttu-id="4048c-119">Model nasazení Azure classic</span><span class="sxs-lookup"><span data-stu-id="4048c-119">Azure classic deployment model</span></span>

<span data-ttu-id="4048c-120">Virtuální počítače nasazené v rámci hranice cloudové služby může být seskupené toouse nástroj pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="4048c-120">Virtual machines deployed within a cloud service boundary can be grouped toouse a load balancer.</span></span> <span data-ttu-id="4048c-121">V tomto modelu veřejnou IP adresu a plně kvalifikovaný název domény, (FQDN) jsou přiřazeny tooa cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="4048c-121">In this model a public IP address and a Fully Qualified Domain Name, (FQDN) are assigned tooa cloud service.</span></span> <span data-ttu-id="4048c-122">Nástroj pro vyrovnávání zatížení Hello portu překlad a vyrovnává zatížení hello síťového provozu pomocí hello veřejnou IP adresu pro hello cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="4048c-122">hello load balancer does port translation and load balances hello network traffic by using hello public IP address for hello cloud service.</span></span>

<span data-ttu-id="4048c-123">Provoz s vyrovnáváním zatížení je definována pomocí koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="4048c-123">Load-balanced traffic is defined by endpoints.</span></span> <span data-ttu-id="4048c-124">Koncové body překlad portu jsou v relaci mezi hello přiřazené veřejný port hello veřejné IP adresy a hello místního portu přiřazené toohello službu na konkrétní virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="4048c-124">Port translation endpoints have a one-to-one relationship between hello public-assigned port of hello public IP address and hello local port assigned toohello service on a specific virtual machine.</span></span> <span data-ttu-id="4048c-125">Koncové body Vyrovnávání zatížení mít vztah jeden mnoho mezi hello veřejnou IP adresu a hello místní porty přiřazené toohello služby hello virtuálních počítačů v rámci hello cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="4048c-125">Load balancing endpoints have a one-to-many relationship between hello public IP address and hello local ports assigned toohello services on hello virtual machines in hello cloud service.</span></span>

![Azure pro vyrovnávání zatížení v modelu nasazení classic hello](./media/load-balancer-overview/asm-lb.png)

<span data-ttu-id="4048c-127">Obrázek 1 – Azure pro vyrovnávání zatížení v modelu nasazení classic hello</span><span class="sxs-lookup"><span data-stu-id="4048c-127">Figure 1 - Azure Load Balancer in hello classic deployment model</span></span>

<span data-ttu-id="4048c-128">Popisek domény Hello hello veřejnou IP adresu, která hello používá nástroj pro vyrovnávání zatížení pro tento model nasazení je \<název cloudové služby\>. cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="4048c-128">hello domain label for hello public IP address that hello load balancer uses for this deployment model is \<cloud service name\>.cloudapp.net.</span></span> <span data-ttu-id="4048c-129">Hello následující obrázek znázorňuje hello nástroj pro vyrovnávání zatížení Azure v tomto modelu.</span><span class="sxs-lookup"><span data-stu-id="4048c-129">hello following graphic shows hello Azure Load Balancer in this model.</span></span>

### <a name="azure-resource-manager-deployment-model"></a><span data-ttu-id="4048c-130">Model nasazení Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="4048c-130">Azure Resource Manager deployment model</span></span>

<span data-ttu-id="4048c-131">V modelu nasazení Resource Manager hello je bez nutnosti toocreate cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="4048c-131">In hello Resource Manager deployment model there is no need toocreate a Cloud service.</span></span> <span data-ttu-id="4048c-132">Nástroj pro vyrovnávání zatížení Hello se vytvoří tooexplicitly směrovat provoz mezi více virtuálními počítači.</span><span class="sxs-lookup"><span data-stu-id="4048c-132">hello load balancer is created tooexplicitly route traffic among multiple virtual machines.</span></span>

<span data-ttu-id="4048c-133">Veřejná IP adresa je jednotlivých prostředků, který má popisek domény (název DNS).</span><span class="sxs-lookup"><span data-stu-id="4048c-133">A public IP address is an individual resource that has a domain label (DNS name).</span></span> <span data-ttu-id="4048c-134">Hello veřejná IP adresa je přidružen hello prostředek pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="4048c-134">hello public IP address is associated with hello load balancer resource.</span></span> <span data-ttu-id="4048c-135">Pravidla nástroje pro vyrovnávání zatížení a příchozího pravidla NAT použít hello veřejnou IP adresu jako hello Internet koncový bod pro hello prostředky, které jsou přijímá provoz s vyrovnáváním zatížení sítě.</span><span class="sxs-lookup"><span data-stu-id="4048c-135">Load balancer rules and inbound NAT rules use hello public IP address as hello Internet endpoint for hello resources that are receiving load-balanced network traffic.</span></span>

<span data-ttu-id="4048c-136">Privátní nebo veřejné IP adresa je přiřazen toohello síťové rozhraní prostředků připojené tooa virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="4048c-136">A private or public IP address is assigned toohello network interface resource attached tooa virtual machine.</span></span> <span data-ttu-id="4048c-137">Po přidání fondu vyrovnávání zatížení tooa back-end IP adres rozhraní sítě hello nástroj pro vyrovnávání zatížení je možné toosend Vyrovnávání zatížení síťových přenosů na základě Vyrovnávání zatížení sítě pravidla hello, které jsou vytvořeny.</span><span class="sxs-lookup"><span data-stu-id="4048c-137">Once a network interface is added tooa load balancer's back-end IP address pool, hello load balancer is able toosend load-balanced network traffic based on hello load-balanced rules that are created.</span></span>

<span data-ttu-id="4048c-138">Hello následující obrázek ukazuje hello nástroj pro vyrovnávání zatížení Azure v tomto modelu:</span><span class="sxs-lookup"><span data-stu-id="4048c-138">hello following graphic shows hello Azure Load Balancer in this model:</span></span>

![Pro vyrovnávání zatížení Azure ve službě Správce prostředků](./media/load-balancer-overview/arm-lb.png)

<span data-ttu-id="4048c-140">Obrázek 2 – ve službě Správce prostředků pro vyrovnávání zatížení Azure</span><span class="sxs-lookup"><span data-stu-id="4048c-140">Figure 2 - Azure Load Balancer in Resource Manager</span></span>

<span data-ttu-id="4048c-141">Nástroj pro vyrovnávání zatížení Hello je možné spravovat prostřednictvím šablony založené na správci prostředků, rozhraní API a nástroje.</span><span class="sxs-lookup"><span data-stu-id="4048c-141">hello load balancer can be managed through Resource Manager-based templates, APIs, and tools.</span></span> <span data-ttu-id="4048c-142">toolearn víc o službě Správce prostředků, najdete v části hello [Přehled služby Správce prostředků](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4048c-142">toolearn more about Resource Manager, see hello [Resource Manager overview](../azure-resource-manager/resource-group-overview.md).</span></span>

## <a name="load-balancer-features"></a><span data-ttu-id="4048c-143">Funkce nástroje pro vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="4048c-143">Load Balancer features</span></span>

* <span data-ttu-id="4048c-144">Na základě hodnoty hash distribuce</span><span class="sxs-lookup"><span data-stu-id="4048c-144">Hash-based distribution</span></span>

    <span data-ttu-id="4048c-145">Azure nástroj pro vyrovnávání zatížení používá algoritmus hash na základě distribuce.</span><span class="sxs-lookup"><span data-stu-id="4048c-145">Azure Load Balancer uses a hash-based distribution algorithm.</span></span> <span data-ttu-id="4048c-146">Ve výchozím nastavení používá složené zdrojové IP adresy, zdrojového portu, cílové adresy IP, cílový port a protokol typ toomap provoz tooavailable serverů hash 5 řazené kolekce členů.</span><span class="sxs-lookup"><span data-stu-id="4048c-146">By default, it uses a 5-tuple hash composed of source IP, source port, destination IP, destination port, and protocol type toomap traffic tooavailable servers.</span></span> <span data-ttu-id="4048c-147">Poskytuje věrnosti pouze *v rámci* relace přenosu.</span><span class="sxs-lookup"><span data-stu-id="4048c-147">It provides stickiness only *within* a transport session.</span></span> <span data-ttu-id="4048c-148">Pakety hello stejné relace TCP nebo UDP bude přesměruje toohello stejné instance za koncový bod Vyrovnávání zatížení sítě hello.</span><span class="sxs-lookup"><span data-stu-id="4048c-148">Packets in hello same TCP or UDP session will be directed toohello same instance behind hello load-balanced endpoint.</span></span> <span data-ttu-id="4048c-149">Pokud se klient hello zavře a znovu otevře hello připojení nebo spustí novou relaci z hello stejné zdrojové IP adresy, hello zdrojového portu změny.</span><span class="sxs-lookup"><span data-stu-id="4048c-149">When hello client closes and reopens hello connection or starts a new session from hello same source IP, hello source port changes.</span></span> <span data-ttu-id="4048c-150">To může způsobit hello provoz toogo tooa jinému koncovému bodu v jiném datovém centru.</span><span class="sxs-lookup"><span data-stu-id="4048c-150">This may cause hello traffic toogo tooa different endpoint in a different datacenter.</span></span>

    <span data-ttu-id="4048c-151">Další podrobnosti najdete v tématu [režim distribuce nástroje pro vyrovnávání zatížení](load-balancer-distribution-mode.md).</span><span class="sxs-lookup"><span data-stu-id="4048c-151">For more details, see [Load balancer distribution mode](load-balancer-distribution-mode.md).</span></span> <span data-ttu-id="4048c-152">Hello následující obrázek ukazuje distribuci založenou na hash hello:</span><span class="sxs-lookup"><span data-stu-id="4048c-152">hello following graphic shows hello hash-based distribution:</span></span>

    ![Na základě hodnoty hash distribuce](./media/load-balancer-overview/load-balancer-distribution.png)

    <span data-ttu-id="4048c-154">Obrázek 3 - Hash na základě distribuce</span><span class="sxs-lookup"><span data-stu-id="4048c-154">Figure 3 - Hash based distribution</span></span>

* <span data-ttu-id="4048c-155">Přesměrování portu</span><span class="sxs-lookup"><span data-stu-id="4048c-155">Port forwarding</span></span>

    <span data-ttu-id="4048c-156">Azure poskytuje nástroj pro vyrovnávání zatížení můžete řídit, je spravovaný přes jak příchozí komunikaci.</span><span class="sxs-lookup"><span data-stu-id="4048c-156">Azure Load Balancer gives you control over how inbound communication is managed.</span></span> <span data-ttu-id="4048c-157">Tato komunikace zahrnuje provozu iniciované z hostitele Internet, virtuální počítače v jiných cloudových služeb nebo virtuálních sítí.</span><span class="sxs-lookup"><span data-stu-id="4048c-157">This communication includes traffic initiated from Internet hosts, virtual machines in other cloud services, or virtual networks.</span></span> <span data-ttu-id="4048c-158">Tento ovládací prvek je reprezentována koncový bod (také nazývané vstupní koncový bod).</span><span class="sxs-lookup"><span data-stu-id="4048c-158">This control is represented by an endpoint (also called an input endpoint).</span></span>

    <span data-ttu-id="4048c-159">Vstupní koncový bod naslouchá na veřejný port a předává přenos tooan interní port.</span><span class="sxs-lookup"><span data-stu-id="4048c-159">An input endpoint listens on a public port and forwards traffic tooan internal port.</span></span> <span data-ttu-id="4048c-160">Můžete namapovat hello stejné porty pro koncový bod interních nebo externích nebo použít jiný port pro ně.</span><span class="sxs-lookup"><span data-stu-id="4048c-160">You can map hello same ports for an internal or external endpoint or use a different port for them.</span></span> <span data-ttu-id="4048c-161">Například můžete mít webový server nakonfigurovaný toolisten tooport 81, při mapování hello veřejný koncový bod je port 80.</span><span class="sxs-lookup"><span data-stu-id="4048c-161">For example, you can have a web server configured toolisten tooport 81 while hello public endpoint mapping is port 80.</span></span> <span data-ttu-id="4048c-162">Vytvoření Hello veřejný koncový bod se aktivuje hello vytvoření instance služby Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="4048c-162">hello creation of a public endpoint triggers hello creation of a load balancer instance.</span></span>

    <span data-ttu-id="4048c-163">Když vytvořené pomocí hello portálu Azure, portál hello automaticky vytvoří koncové body toohello virtuální počítač pro hello protokolu RDP (Remote Desktop) a vzdálenou komunikaci relace prostředí Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4048c-163">When created using hello Azure portal, hello portal automatically creates endpoints toohello virtual machine for hello Remote Desktop Protocol (RDP) and remote Windows PowerShell session traffic.</span></span> <span data-ttu-id="4048c-164">Můžete použít tyto koncové body tooremotely spravovat hello virtuálního počítače přes hello Internet.</span><span class="sxs-lookup"><span data-stu-id="4048c-164">You can use these endpoints tooremotely administer hello virtual machine over hello Internet.</span></span>

* <span data-ttu-id="4048c-165">Automatické překonfigurování</span><span class="sxs-lookup"><span data-stu-id="4048c-165">Automatic reconfiguration</span></span>

    <span data-ttu-id="4048c-166">Azure nástroj pro vyrovnávání zatížení okamžitě automatických při změně velikosti instancí nahoru nebo dolů.</span><span class="sxs-lookup"><span data-stu-id="4048c-166">Azure Load Balancer instantly reconfigures itself when you scale instances up or down.</span></span> <span data-ttu-id="4048c-167">Například tuto změnu konfigurace se stane, když zvýšíte hello počet instancí pro web/role pracovního procesu v cloudové službě nebo při přidání dalších virtuálních počítačů do hello nastavit stejné Vyrovnávání zatížení sítě.</span><span class="sxs-lookup"><span data-stu-id="4048c-167">For example, this reconfiguration happens when you increase hello instance count for web/worker roles in a cloud service or when you add additional virtual machines into hello same load-balanced set.</span></span>

* <span data-ttu-id="4048c-168">Monitorování služeb</span><span class="sxs-lookup"><span data-stu-id="4048c-168">Service monitoring</span></span>

    <span data-ttu-id="4048c-169">Azure nástroj pro vyrovnávání zatížení můžete testů hello stav hello různé instance serveru.</span><span class="sxs-lookup"><span data-stu-id="4048c-169">Azure Load Balancer can probe hello health of hello various server instances.</span></span> <span data-ttu-id="4048c-170">Pokud sondu nezdaří toorespond, nástroj pro vyrovnávání zatížení hello zastaví odesílání nových připojení není v pořádku instance toohello.</span><span class="sxs-lookup"><span data-stu-id="4048c-170">When a probe fails toorespond, hello load balancer stops sending new connections toohello unhealthy instances.</span></span> <span data-ttu-id="4048c-171">Nejsou ovlivněná existující připojení.</span><span class="sxs-lookup"><span data-stu-id="4048c-171">Existing connections are not impacted.</span></span>

    <span data-ttu-id="4048c-172">Jsou podporovány tři typy sondy:</span><span class="sxs-lookup"><span data-stu-id="4048c-172">Three types of probes are supported:</span></span>

    + <span data-ttu-id="4048c-173">**Test agenta hosta (na platformě jako služby pouze ve virtuálních počítačích):** hello nástroj pro vyrovnávání zatížení využívá agenta hosta hello uvnitř hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="4048c-173">**Guest agent probe (on Platform as a Service Virtual Machines only):** hello load balancer utilizes hello guest agent inside hello virtual machine.</span></span> <span data-ttu-id="4048c-174">Hello agenta hosta naslouchá a odpoví odpověď HTTP 200 OK jenom v případě hello instance je ve stavu Připraveno hello (tj. hello instance není ve stavu jako o volném čase, recyklace nebo ukončení).</span><span class="sxs-lookup"><span data-stu-id="4048c-174">hello guest agent listens and responds with an HTTP 200 OK response only when hello instance is in hello ready state (i.e. hello instance is not in a state like busy, recycling, or stopping).</span></span> <span data-ttu-id="4048c-175">V případě selhání toorespond se HTTP 200 OK hello agenta značky nástroje pro vyrovnávání zatížení hello hello instance jako reagovat a zastaví odesílání přenosů toothat instance.</span><span class="sxs-lookup"><span data-stu-id="4048c-175">If hello agent fails toorespond with an HTTP 200 OK, hello load balancer marks hello instance as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="4048c-176">Nástroj pro vyrovnávání zatížení Hello pokračuje tooping hello instance.</span><span class="sxs-lookup"><span data-stu-id="4048c-176">hello load balancer continues tooping hello instance.</span></span> <span data-ttu-id="4048c-177">Pokud agenta hosta hello odpoví HTTP 200, odešle nástroj pro vyrovnávání zatížení hello provoz toothat instance znovu.</span><span class="sxs-lookup"><span data-stu-id="4048c-177">If hello guest agent responds with an HTTP 200, hello load balancer will send traffic toothat instance again.</span></span> <span data-ttu-id="4048c-178">Pokud používáte webovou roli, kód webu obvykle běží v w3wp.exe, který není monitorován pomocí hello prostředků infrastruktury Azure nebo agenta hosta.</span><span class="sxs-lookup"><span data-stu-id="4048c-178">When you're using a web role, your website code typically runs in w3wp.exe, which is not monitored by hello Azure fabric or guest agent.</span></span> <span data-ttu-id="4048c-179">To znamená, že selhání v w3wp.exe (např. odpovědi HTTP 500) nebude agent hosta hlášené toohello a nástroj pro vyrovnávání zatížení hello nebude vědět tootake tuto instanci mimo otočení.</span><span class="sxs-lookup"><span data-stu-id="4048c-179">This means that failures in w3wp.exe (e.g. HTTP 500 responses) will not be reported toohello guest agent, and hello load balancer will not know tootake that instance out of rotation.</span></span>
    + <span data-ttu-id="4048c-180">**Vlastní test paměti HTTP:** tento test přepsání hello výchozí (agenta hosta) kontroly.</span><span class="sxs-lookup"><span data-stu-id="4048c-180">**HTTP custom probe:** This probe overrides hello default (guest agent) probe.</span></span> <span data-ttu-id="4048c-181">Můžete ji toocreate použít vlastní stav vlastní logiky toodetermine hello hello role instance.</span><span class="sxs-lookup"><span data-stu-id="4048c-181">You can use it toocreate your own custom logic toodetermine hello health of hello role instance.</span></span> <span data-ttu-id="4048c-182">Nástroj pro vyrovnávání zatížení Hello bude pravidelně testů váš koncový bod (každých 15 sekund, ve výchozím nastavení).</span><span class="sxs-lookup"><span data-stu-id="4048c-182">hello load balancer will regularly probe your endpoint (every 15 seconds, by default).</span></span> <span data-ttu-id="4048c-183">Hello instance je považován za toobe v otočení, pokud ji odpoví TCP ACK nebo HTTP 200 v časovém limitu hello (výchozí hodnoty 31 sekund).</span><span class="sxs-lookup"><span data-stu-id="4048c-183">hello instance is considered toobe in rotation if it responds with a TCP ACK or HTTP 200 within hello timeout period (default of 31 seconds).</span></span> <span data-ttu-id="4048c-184">To je užitečné pro implementaci vlastní logiky tooremove instancí z otočení hello služby Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="4048c-184">This is useful for implementing your own logic tooremove instances from hello load balancer's rotation.</span></span> <span data-ttu-id="4048c-185">Můžete například nakonfigurovat hello instance tooreturn stav bez 200, pokud hello instance je vyšší než 90 % využití procesoru.</span><span class="sxs-lookup"><span data-stu-id="4048c-185">For example, you can configure hello instance tooreturn a non-200 status if hello instance is above 90% CPU.</span></span> <span data-ttu-id="4048c-186">Pro webové role, které používají w3wp.exe, můžete také získat automatické monitorování vašeho webu, protože selhání ve vašem kódu webu vrátit sondu toohello stav bez 200.</span><span class="sxs-lookup"><span data-stu-id="4048c-186">For web roles that use w3wp.exe, you also get automatic monitoring of your website, since failures in your website code return a non-200 status toohello probe.</span></span>
    + <span data-ttu-id="4048c-187">**Vlastní test paměti TCP:** tento test spoléhá na úspěšné TCP relace navázání tooa definované testu portu.</span><span class="sxs-lookup"><span data-stu-id="4048c-187">**TCP custom probe:** This probe relies on successful TCP session establishment tooa defined probe port.</span></span>

    <span data-ttu-id="4048c-188">Další informace najdete v tématu hello [LoadBalancerProbe schématu](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span><span class="sxs-lookup"><span data-stu-id="4048c-188">For more information, see hello [LoadBalancerProbe schema](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span></span>

* <span data-ttu-id="4048c-189">Zdroj NAT</span><span class="sxs-lookup"><span data-stu-id="4048c-189">Source NAT</span></span>

    <span data-ttu-id="4048c-190">Všechny odchozí přenosy toohello zde nevyskytlo Internet, která pochází z vaší služby zdroje NAT (SNAT) pomocí hello stejnou adresu VIP jako hello příchozí přenosy.</span><span class="sxs-lookup"><span data-stu-id="4048c-190">All outbound traffic toohello Internet that originates from your service undergoes source NAT (SNAT) by using hello same VIP address as hello incoming traffic.</span></span> <span data-ttu-id="4048c-191">Překládat pomocí SNAT poskytuje důležité výhody:</span><span class="sxs-lookup"><span data-stu-id="4048c-191">SNAT provides important benefits:</span></span>

    + <span data-ttu-id="4048c-192">Umožňuje snadno upgradu a zotavení po havárii služeb, protože hello VIP může být dynamicky namapované tooanother instanci služby hello.</span><span class="sxs-lookup"><span data-stu-id="4048c-192">It enables easy upgrade and disaster recovery of services, since hello VIP can be dynamically mapped tooanother instance of hello service.</span></span>
    + <span data-ttu-id="4048c-193">Ho usnadňuje správu seznamu ACL řízení přístupu.</span><span class="sxs-lookup"><span data-stu-id="4048c-193">It makes access control list (ACL) management easier.</span></span> <span data-ttu-id="4048c-194">Seznamy ACL, vyjádřené jako virtuální IP adresy neměňte jako služby škálování nahoru, dolů nebo získat znovu nasazena.</span><span class="sxs-lookup"><span data-stu-id="4048c-194">ACLs expressed in terms of VIPs do not change as services scale up, down, or get redeployed.</span></span>

    <span data-ttu-id="4048c-195">Konfigurace služby Vyrovnávání zatížení Hello podporuje úplné kuželový NAT pro UDP.</span><span class="sxs-lookup"><span data-stu-id="4048c-195">hello load balancer configuration supports full cone NAT for UDP.</span></span> <span data-ttu-id="4048c-196">Úplné kuželový NAT je typ zařízení NAT, kde hello portu umožňuje příchozí připojení z jakékoli externího hostitele (v odpovědi tooan odchozí požadavku).</span><span class="sxs-lookup"><span data-stu-id="4048c-196">Full cone NAT is a type of NAT where hello port allows inbound connections from any external host (in response tooan outbound request).</span></span>

    <span data-ttu-id="4048c-197">Pro každý nový odchozí připojení, které zahájí virtuálního počítače je nástroj pro vyrovnávání zatížení hello také přidělena odchozí port.</span><span class="sxs-lookup"><span data-stu-id="4048c-197">For each new outbound connection that a virtual machine initiates, an outbound port is also allocated by hello load balancer.</span></span> <span data-ttu-id="4048c-198">Hello externího hostitele vidí provoz s virtuální port přidělené virtuální IP adresy IP.</span><span class="sxs-lookup"><span data-stu-id="4048c-198">hello external host sees traffic with a virtual IP (VIP)-allocated port.</span></span> <span data-ttu-id="4048c-199">Pro scénáře, které vyžadují hodně odchozí připojení, je doporučeno toouse [veřejná IP adresa na úrovni instance](../virtual-network/virtual-networks-instance-level-public-ip.md) adresy tak, aby virtuální počítače hello odchozí vyhrazenou IP adresu pro překládat pomocí SNAT.</span><span class="sxs-lookup"><span data-stu-id="4048c-199">For scenarios that require a large number of outbound connections, it is recommended toouse [instance-level public IP](../virtual-network/virtual-networks-instance-level-public-ip.md) addresses so that hello VMs have a dedicated outbound IP address for SNAT.</span></span> <span data-ttu-id="4048c-200">Tím se snižuje riziko hello vyčerpání portu.</span><span class="sxs-lookup"><span data-stu-id="4048c-200">This reduces hello risk of port exhaustion.</span></span>

    <span data-ttu-id="4048c-201">Najdete v tématu [odchozí připojení](load-balancer-outbound-connections.md) článku Další podrobnosti k tomuto tématu.</span><span class="sxs-lookup"><span data-stu-id="4048c-201">Please see [outbound connections](load-balancer-outbound-connections.md) article for more details on this topic.</span></span>

### <a name="support-for-multiple-load-balanced-ip-addresses-for-virtual-machines"></a><span data-ttu-id="4048c-202">Podpora pro více Vyrovnávání zatížení sítě IP adres pro virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="4048c-202">Support for multiple load-balanced IP addresses for virtual machines</span></span>
<span data-ttu-id="4048c-203">Můžete přiřadit více než jeden Vyrovnávání zatížení sítě veřejnou IP adresu tooa sada virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="4048c-203">You can assign more than one load-balanced public IP address tooa set of virtual machines.</span></span> <span data-ttu-id="4048c-204">Se tato možnost může být hostitelem více webů SSL nebo více naslouchací procesy skupiny dostupnosti AlwaysOn serveru SQL na hello stejnou sadu virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="4048c-204">With this ability, you can host multiple SSL websites and/or multiple SQL Server AlwaysOn Availability Group listeners on hello same set of virtual machines.</span></span> <span data-ttu-id="4048c-205">Další informace najdete v tématu [několika virtuálními IP adresami za cloudové služby](load-balancer-multivip.md).</span><span class="sxs-lookup"><span data-stu-id="4048c-205">For more information, see [Multiple VIPs per cloud service](load-balancer-multivip.md).</span></span>

[!INCLUDE [load-balancer-compare-tm-ag-lb-include.md](../../includes/load-balancer-compare-tm-ag-lb-include.md)]

## <a name="limitations"></a><span data-ttu-id="4048c-206">Omezení</span><span class="sxs-lookup"><span data-stu-id="4048c-206">Limitations</span></span>

<span data-ttu-id="4048c-207">Fondy back-end pro vyrovnávání zatížení může obsahovat všechny SKU virtuálních počítačů s výjimkou základní vrstvě.</span><span class="sxs-lookup"><span data-stu-id="4048c-207">Load Balancer backend pools can contain any VM SKU except Basic tier.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4048c-208">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4048c-208">Next steps</span></span>

- <span data-ttu-id="4048c-209">Další informace o [internetového nástroj pro vyrovnávání zatížení](load-balancer-internet-overview.md)</span><span class="sxs-lookup"><span data-stu-id="4048c-209">Learn more about [Internet-facing load balancer](load-balancer-internet-overview.md)</span></span>

- <span data-ttu-id="4048c-210">Další informace o [přehled nástroje pro vyrovnávání zatížení interní](load-balancer-internal-overview.md)</span><span class="sxs-lookup"><span data-stu-id="4048c-210">Learn more about [Internal load balancer overview](load-balancer-internal-overview.md)</span></span>

- <span data-ttu-id="4048c-211">Vytvoření [internetového nástroj pro vyrovnávání zatížení](load-balancer-get-started-internet-portal.md)</span><span class="sxs-lookup"><span data-stu-id="4048c-211">Create an [Internet-facing load balancer](load-balancer-get-started-internet-portal.md)</span></span>

- <span data-ttu-id="4048c-212">Další informace o některých hello Další klíč [sítě možnosti](../networking/networking-overview.md) Azure</span><span class="sxs-lookup"><span data-stu-id="4048c-212">Learn about some of hello other key [networking capabilities](../networking/networking-overview.md) of Azure</span></span>

