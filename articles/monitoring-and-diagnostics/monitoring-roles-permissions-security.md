---
title: "aaaGet začít s rolí, oprávnění a zabezpečení pomocí Azure monitorování | Microsoft Docs"
description: "Zjistěte, jak toouse Azure monitorování integrovaných rolí a oprávnění toorestrict přístup toomonitoring prostředky."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="5d097-103">Začínáme s rolemi, oprávnění a zabezpečení pomocí Azure monitorování</span><span class="sxs-lookup"><span data-stu-id="5d097-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="5d097-104">Mnoha týmy potřebovat toostrictly regulovat přístup k datům toomonitoring a nastavení.</span><span class="sxs-lookup"><span data-stu-id="5d097-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="5d097-105">Například pokud máte členové týmu, kteří pracují výhradně na monitorování (pracovníci technické podpory, technici devops) nebo pokud používáte poskytovatel spravované služby, může být vhodné toogrant je přístup k tooonly monitorování dat při jejich toocreate možnost omezení, upravit, nebo Odstraňte prostředky.</span><span class="sxs-lookup"><span data-stu-id="5d097-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="5d097-106">Tento článek ukazuje, jak tooquickly použít integrované monitorování RBAC role tooa uživatele v Azure nebo vytvořit vlastní vlastní role pro uživatele, který potřebuje monitorování omezenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="5d097-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="5d097-107">Potom popisuje aspekty zabezpečení pro vaše prostředky související s monitorování Azure a jak můžete omezit přístup k datům toohello obsahují.</span><span class="sxs-lookup"><span data-stu-id="5d097-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="5d097-108">Vestavěné role, které monitorování</span><span class="sxs-lookup"><span data-stu-id="5d097-108">Built-in monitoring roles</span></span>
<span data-ttu-id="5d097-109">Předdefinované role Azure monitorování jsou navrženou toohelp omezení přístupu tooresources v rámci předplatného, ale ty zodpovědná za monitorování tooobtain infrastruktury a konfigurace hello dat, které potřebují.</span><span class="sxs-lookup"><span data-stu-id="5d097-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="5d097-110">Monitorování Azure poskytuje dvě role se na pole: A monitorování Čtenář a Přispěvatel monitorování.</span><span class="sxs-lookup"><span data-stu-id="5d097-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="5d097-111">Monitorování čtečky</span><span class="sxs-lookup"><span data-stu-id="5d097-111">Monitoring Reader</span></span>
<span data-ttu-id="5d097-112">Lidé přiřadit role Čtenář monitorování hello můžete zobrazit všechna data monitorování v předplatném, ale nelze upravit žádný prostředek nebo upravit všechny prostředky související toomonitoring nastavení.</span><span class="sxs-lookup"><span data-stu-id="5d097-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="5d097-113">Tato role je vhodný pro uživatele v organizaci, například podporu nebo operations engineers, kteří potřebují toobe moci:</span><span class="sxs-lookup"><span data-stu-id="5d097-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="5d097-114">Zobrazit řídicí panely monitorování hello portálu a vytvořit vlastní privátního sledování řídicí panely.</span><span class="sxs-lookup"><span data-stu-id="5d097-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="5d097-115">Dotaz pro metriky pomocí hello [REST API služby Azure monitorování](https://msdn.microsoft.com/library/azure/dn931930.aspx), [rutiny prostředí PowerShell](insights-powershell-samples.md), nebo [rozhraní příkazového řádku a platformy](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="5d097-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="5d097-116">Dotaz hello protokol aktivit pomocí portálu hello, REST API služby Azure monitorování, rutiny prostředí PowerShell nebo rozhraní příkazového řádku a platformy.</span><span class="sxs-lookup"><span data-stu-id="5d097-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="5d097-117">Zobrazení hello [nastavení pro diagnostiku](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) pro prostředek.</span><span class="sxs-lookup"><span data-stu-id="5d097-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="5d097-118">Zobrazení hello [protokolu profil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) pro předplatné.</span><span class="sxs-lookup"><span data-stu-id="5d097-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="5d097-119">Zobrazit nastavení automatického škálování.</span><span class="sxs-lookup"><span data-stu-id="5d097-119">View autoscale settings.</span></span>
* <span data-ttu-id="5d097-120">Zobrazení výstrah aktivity a nastavení.</span><span class="sxs-lookup"><span data-stu-id="5d097-120">View alert activity and settings.</span></span>
* <span data-ttu-id="5d097-121">Přístup k datům Application Insights a zobrazení dat v AI Analytics.</span><span class="sxs-lookup"><span data-stu-id="5d097-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="5d097-122">Vyhledávání dat pracovního prostoru analýzy protokolů (OMS) včetně data o využití pro pracovní prostor hello.</span><span class="sxs-lookup"><span data-stu-id="5d097-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="5d097-123">Zobrazení skupiny pro správu analýzy protokolů (OMS).</span><span class="sxs-lookup"><span data-stu-id="5d097-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="5d097-124">Načtení schématu vyhledávání hello analýzy protokolů (OMS).</span><span class="sxs-lookup"><span data-stu-id="5d097-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="5d097-125">Zobrazí seznam intelligence Pack analýzy protokolů (OMS).</span><span class="sxs-lookup"><span data-stu-id="5d097-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="5d097-126">Načtení a provedení analýzy protokolů (OMS) uložená hledání.</span><span class="sxs-lookup"><span data-stu-id="5d097-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="5d097-127">Načtěte konfiguraci úložiště analýzy protokolů (OMS) hello.</span><span class="sxs-lookup"><span data-stu-id="5d097-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="5d097-128">Tato role není poskytnuta data toolog přístup pro čtení, která byla centra událostí přenášené datovými proudy tooan nebo uložený v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="5d097-129">[Viz níže](#security-considerations-for-monitoring-data) informace o konfiguraci přístup k prostředkům toothese.</span><span class="sxs-lookup"><span data-stu-id="5d097-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="5d097-130">Monitorování přispěvatele</span><span class="sxs-lookup"><span data-stu-id="5d097-130">Monitoring Contributor</span></span>
<span data-ttu-id="5d097-131">Osoby, které jsou přiřazené hello monitorování Přispěvatel role můžete zobrazit všechna data monitorování v předplatném a vytvořit nebo upravit nastavení monitorování, ale nelze upravit žádné další prostředky.</span><span class="sxs-lookup"><span data-stu-id="5d097-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="5d097-132">Tato role je nadmnožinou hello monitorování čtečky role a je vhodný pro členy týmu monitorování nebo poskytovatele spravované služby, kteří kromě výše uvedeného toohello oprávnění také potřebovat toobe moct organizace:</span><span class="sxs-lookup"><span data-stu-id="5d097-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="5d097-133">Publikujte jako sdílené řídicího panelu monitorování řídicí panely.</span><span class="sxs-lookup"><span data-stu-id="5d097-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="5d097-134">Nastavit [nastavení pro diagnostiku](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) pro resource.*</span><span class="sxs-lookup"><span data-stu-id="5d097-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="5d097-135">Sada hello [protokolu profil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) pro subscription.*</span><span class="sxs-lookup"><span data-stu-id="5d097-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="5d097-136">Nastavit výstrahy aktivity a nastavení.</span><span class="sxs-lookup"><span data-stu-id="5d097-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="5d097-137">Vytvoření služby Application Insights webové testy a součásti.</span><span class="sxs-lookup"><span data-stu-id="5d097-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="5d097-138">Pracovní prostor analýzy protokolů (OMS) seznamu sdílených klíčů.</span><span class="sxs-lookup"><span data-stu-id="5d097-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="5d097-139">Povolit nebo zakázat intelligence Pack analýzy protokolů (OMS).</span><span class="sxs-lookup"><span data-stu-id="5d097-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="5d097-140">Vytvoření a odstranit a provedení analýzy protokolů (OMS) uložená hledání.</span><span class="sxs-lookup"><span data-stu-id="5d097-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="5d097-141">Vytvořte a odstranit konfiguraci úložiště analýzy protokolů (OMS) hello.</span><span class="sxs-lookup"><span data-stu-id="5d097-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="5d097-142">* uživatele musí být taky samostatně přidělují hello cílového prostředku (úložiště účet nebo události rozbočovače obor názvů) tooset profil protokolu nebo nastavení diagnostiky ListKeys oprávnění.</span><span class="sxs-lookup"><span data-stu-id="5d097-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="5d097-143">Tato role není poskytnuta data toolog přístup pro čtení, která byla centra událostí přenášené datovými proudy tooan nebo uložený v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="5d097-144">[Viz níže](#security-considerations-for-monitoring-data) informace o konfiguraci přístup k prostředkům toothese.</span><span class="sxs-lookup"><span data-stu-id="5d097-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="5d097-145">Monitorování oprávnění a vlastní role RBAC</span><span class="sxs-lookup"><span data-stu-id="5d097-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="5d097-146">Pokud hello výše vestavěné role, které nesplňují požadavky přesný hello týmu, můžete [vytvořit vlastní role RBAC](../active-directory/role-based-access-control-custom-roles.md) s podrobnější oprávnění.</span><span class="sxs-lookup"><span data-stu-id="5d097-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="5d097-147">Níže jsou hello běžných operací RBAC monitorování Azure s jejich popisy.</span><span class="sxs-lookup"><span data-stu-id="5d097-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="5d097-148">Operace</span><span class="sxs-lookup"><span data-stu-id="5d097-148">Operation</span></span> | <span data-ttu-id="5d097-149">Popis</span><span class="sxs-lookup"><span data-stu-id="5d097-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d097-150">Microsoft.Insights/AlertRules/[Read, zápisu, odstraní]</span><span class="sxs-lookup"><span data-stu-id="5d097-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="5d097-151">Pravidla výstrah pro čtení, zápisu a odstranění.</span><span class="sxs-lookup"><span data-stu-id="5d097-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="5d097-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="5d097-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="5d097-153">Seznam incidentů (historie hello pravidlo výstrahy se aktivuje) pro pravidla výstrah.</span><span class="sxs-lookup"><span data-stu-id="5d097-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="5d097-154">To se vztahuje pouze toohello portálu.</span><span class="sxs-lookup"><span data-stu-id="5d097-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="5d097-155">Microsoft.Insights/AutoscaleSettings/[Read, zápisu, odstraní]</span><span class="sxs-lookup"><span data-stu-id="5d097-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="5d097-156">Nastavení automatického škálování pro čtení, zápisu a odstranění.</span><span class="sxs-lookup"><span data-stu-id="5d097-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="5d097-157">Microsoft.Insights/DiagnosticSettings/[Read, zápisu, odstraní]</span><span class="sxs-lookup"><span data-stu-id="5d097-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="5d097-158">Nastavení diagnostiky pro čtení, zápisu a odstranění.</span><span class="sxs-lookup"><span data-stu-id="5d097-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="5d097-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="5d097-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="5d097-160">Toto oprávnění je nutné pro uživatele, kteří potřebují přístup k protokolům tooActivity přes portál hello.</span><span class="sxs-lookup"><span data-stu-id="5d097-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="5d097-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="5d097-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="5d097-162">Zobrazí seznam aktivity protokolu události (události management) v předplatném.</span><span class="sxs-lookup"><span data-stu-id="5d097-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="5d097-163">Toto oprávnění je použít tooboth programová a portálu přístup toohello protokol aktivit.</span><span class="sxs-lookup"><span data-stu-id="5d097-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="5d097-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="5d097-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="5d097-165">Toto oprávnění je nutné pro uživatele, kteří potřebují přístup k protokolům tooActivity přes portál hello.</span><span class="sxs-lookup"><span data-stu-id="5d097-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="5d097-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="5d097-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="5d097-167">Číst definice metrik (seznamu dostupných typů metriky pro prostředek).</span><span class="sxs-lookup"><span data-stu-id="5d097-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="5d097-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="5d097-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="5d097-169">Číst metriky pro prostředek.</span><span class="sxs-lookup"><span data-stu-id="5d097-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="5d097-170">Tooalerts přístupu, nastavení pro diagnostiku a metriky pro prostředek vyžaduje tento hello uživatel má přístup pro čtení toohello prostředků typu a rozsahu prostředku.</span><span class="sxs-lookup"><span data-stu-id="5d097-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="5d097-171">Vytváření ("zápis") diagnostický profil nastavení nebo protokolu, archivy tooa úložiště účet nebo datové proudy tooevent centra vyžaduje hello uživatele tooalso oprávnění ListKeys hello cílovému prostředku.</span><span class="sxs-lookup"><span data-stu-id="5d097-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="5d097-172">Například pomocí hello výše tabulky můžete vytvořit vlastní role RBAC pro "Aktivity protokolu čtečku" takto:</span><span class="sxs-lookup"><span data-stu-id="5d097-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="5d097-173">Důležité informace o zabezpečení pro monitorování dat.</span><span class="sxs-lookup"><span data-stu-id="5d097-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="5d097-174">Data monitorování – zvlášť soubory protokolu – mohou obsahovat citlivé údaje, jako je například IP adresy nebo uživatelské jméno.</span><span class="sxs-lookup"><span data-stu-id="5d097-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="5d097-175">Monitorování dat z Azure dodává ve formulářích tři základní:</span><span class="sxs-lookup"><span data-stu-id="5d097-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="5d097-176">Hello protokol aktivit, která popisuje všechny akce v rovině řízení na vaše předplatné Azure.</span><span class="sxs-lookup"><span data-stu-id="5d097-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="5d097-177">Diagnostické protokoly, které jsou protokoly vygenerované prostředkem.</span><span class="sxs-lookup"><span data-stu-id="5d097-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="5d097-178">Metriky, které jsou vysílaných prostředky.</span><span class="sxs-lookup"><span data-stu-id="5d097-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="5d097-179">Všechny tři z těchto typů dat může být uložený v účtu úložiště nebo prostřednictvím datového proudu tooEvent rozbočovače, které jsou pro obecné účely prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="5d097-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="5d097-180">Privilegované operace obvykle vyhrazena pro správce je, protože se jedná pro obecné účely prostředky, vytváření, odstraňování a k nim přistupovat.</span><span class="sxs-lookup"><span data-stu-id="5d097-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="5d097-181">Doporučujeme použít následující postupy pro monitorování související prostředky tooprevent zneužití hello:</span><span class="sxs-lookup"><span data-stu-id="5d097-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="5d097-182">Použijte účet jeden vyhrazený úložiště pro data monitorování.</span><span class="sxs-lookup"><span data-stu-id="5d097-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="5d097-183">Pokud potřebujete tooseparate monitorování data do více účtů úložiště, nikdy sdílet využití účtu úložiště mezi monitorování a data-monitoring, jako to může poskytnout nechtěně uživatelů, kteří potřebují pouze přístup k toomonitoring dat (např.</span><span class="sxs-lookup"><span data-stu-id="5d097-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="5d097-184">třetí strany SIEM) přístup k datům monitorování toonon.</span><span class="sxs-lookup"><span data-stu-id="5d097-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="5d097-185">Používejte jednu, vyhrazené sběrnice nebo Centrum událostí názvů ve všech nastavení pro diagnostiku pro hello stejného důvodu, jak je uvedeno výše.</span><span class="sxs-lookup"><span data-stu-id="5d097-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="5d097-186">Omezit tím, že jim skupinu prostředků samostatné účty pro přístup k související toomonitoring úložiště nebo event hubs a [použít obor](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) na monitorování role toolimit přístup tooonly příslušné skupině prostředků.</span><span class="sxs-lookup"><span data-stu-id="5d097-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="5d097-187">Když uživatel potřebuje pouze přístup k datům toomonitoring nikdy udělit hello ListKeys oprávnění pro účty úložiště nebo služby event hubs v oboru předplatné.</span><span class="sxs-lookup"><span data-stu-id="5d097-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="5d097-188">Místo toho poskytnout tyto uživatele toohello oprávnění na prostředek nebo skupina prostředků (Pokud máte vyhrazené monitorování skupiny prostředků) oboru.</span><span class="sxs-lookup"><span data-stu-id="5d097-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="5d097-189">Omezení týkajícího se toomonitoring úložiště účty pro přístup</span><span class="sxs-lookup"><span data-stu-id="5d097-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="5d097-190">Pokud uživatele nebo aplikace potřebuje přístup k datům toomonitoring v účtu úložiště, měli byste [generovat SAS účtu](https://msdn.microsoft.com/library/azure/mt584140.aspx) hello účtu úložiště, který obsahuje data monitorování s úložištěm tooblob přístup jen pro čtení na úrovni služby.</span><span class="sxs-lookup"><span data-stu-id="5d097-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="5d097-191">V prostředí PowerShell může vypadat například:</span><span class="sxs-lookup"><span data-stu-id="5d097-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="5d097-192">Pak můžete udělit hello tokenu toohello entita, která potřebuje tooread z daného účtu úložiště, a můžete zobrazit seznam a čtení ze všech objektů BLOB v daném účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="5d097-193">Případně pokud potřebujete tato oprávnění se RBAC toocontrol, můžete udělit této entity hello Microsoft.Storage/storageAccounts/listkeys/action oprávnění na tuto konkrétní účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="5d097-194">To je nezbytné pro uživatele, kteří potřebují mít tooset toobe diagnostické nastavení nebo protokolu profil tooarchive tooa účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="5d097-195">Můžete například vytvořit hello následující vlastní role RBAC pro uživatele nebo aplikace, které stačí tooread z jeden účet úložiště:</span><span class="sxs-lookup"><span data-stu-id="5d097-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="5d097-196">Hello ListKeys oprávnění umožňuje hello uživatele toolist hello primární a sekundární klíčů k účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="5d097-197">Tyto klíče hello uživateli udělit všechny podepsané oprávnění (čtení, zápis, vytvořit objekty BLOB, odstranit objekty BLOB, atd.) napříč všemi podepsané služby (objekt blob, fronty, tabulce, soubor) v daném účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5d097-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="5d097-198">Doporučujeme používat SAS účtu popsané výše, pokud je to možné.</span><span class="sxs-lookup"><span data-stu-id="5d097-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="5d097-199">Omezení přístupu související toomonitoring služba event hubs</span><span class="sxs-lookup"><span data-stu-id="5d097-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="5d097-200">Podobný princip platí službou event hubs, ale nejdřív je potřeba toocreate vyhrazené autorizační pravidlo naslouchání.</span><span class="sxs-lookup"><span data-stu-id="5d097-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="5d097-201">Pokud chcete toogrant přístup tooan aplikace, která stačí centra událostí souvisejících s toomonitoring toolisten, hello následující:</span><span class="sxs-lookup"><span data-stu-id="5d097-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="5d097-202">Vytvořte zásady sdíleného přístupu na hello události rozbočovače, které byly vytvořeny pro streamování dat monitorování s jenom deklarace identity naslouchání.</span><span class="sxs-lookup"><span data-stu-id="5d097-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="5d097-203">To lze provést hello portálu.</span><span class="sxs-lookup"><span data-stu-id="5d097-203">This can be done in hello portal.</span></span> <span data-ttu-id="5d097-204">Například můžete ho může volat "monitoringReadOnly."</span><span class="sxs-lookup"><span data-stu-id="5d097-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="5d097-205">Pokud je to možné můžete toogive, který klíče přímo toohello příjemce a hello další krok přeskočit.</span><span class="sxs-lookup"><span data-stu-id="5d097-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="5d097-206">Pokud příjemce hello potřebuje toobe možné tooget hello klíče ad-hoc, udělte akce ListKeys hello hello uživatele pro tohoto centra událostí.</span><span class="sxs-lookup"><span data-stu-id="5d097-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="5d097-207">To je nezbytné pro uživatele, kteří potřebují mít tooset toobe nastavení diagnostiky nebo protokolu profil toostream tooevent rozbočovače.</span><span class="sxs-lookup"><span data-stu-id="5d097-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="5d097-208">Například může vytvořit pravidlo RBAC:</span><span class="sxs-lookup"><span data-stu-id="5d097-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="5d097-209">Další kroky</span><span class="sxs-lookup"><span data-stu-id="5d097-209">Next steps</span></span>
* [<span data-ttu-id="5d097-210">Přečtěte si o RBAC a oprávnění ve službě Správce prostředků</span><span class="sxs-lookup"><span data-stu-id="5d097-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="5d097-211">Přečtěte si hello Přehled monitorování v Azure</span><span class="sxs-lookup"><span data-stu-id="5d097-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)

