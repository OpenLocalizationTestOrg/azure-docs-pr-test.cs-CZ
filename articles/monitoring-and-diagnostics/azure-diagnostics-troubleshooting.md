---
title: "Řešení potíží s Azure Diagnostics | Microsoft Docs"
description: "Vyřešení problémů při používání Azure diagnostics v Azure Virtual Machines, Service Fabric nebo cloudové služby."
services: monitoring-and-diagnostics
documentationcenter: .net
author: rboucher
manager: carmonm
editor: 
ms.assetid: 66469bce-d457-4d1e-b550-a08d2be4d28c
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 07/12/2017
ms.author: robb
ms.openlocfilehash: a0cb529836b14df71e83616f4f625a002c535b7b
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="azure-diagnostics-troubleshooting"></a><span data-ttu-id="8eb82-103">Řešení potíží s Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="8eb82-103">Azure Diagnostics Troubleshooting</span></span>
<span data-ttu-id="8eb82-104">Řešení potíží s informací, které jsou relevantní pro používání Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="8eb82-104">Troubleshooting information relevant to using Azure Diagnostics.</span></span> <span data-ttu-id="8eb82-105">Další informace o Azure diagnostics najdete v tématu [přehled Azure Diagnostics](azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="8eb82-105">For more information on Azure diagnostics, see [Azure Diagnostics Overview](azure-diagnostics.md).</span></span>

## <a name="logical-components"></a><span data-ttu-id="8eb82-106">Logické součásti</span><span class="sxs-lookup"><span data-stu-id="8eb82-106">Logical Components</span></span>
<span data-ttu-id="8eb82-107">**Modul plug-in Spouštěče diagnostiky (DiagnosticsPluginLauncher.exe)**: spustí rozšíření Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="8eb82-107">**Diagnostics Plugin Launcher (DiagnosticsPluginLauncher.exe)**: Launches the Azure Diagnostics extension.</span></span> <span data-ttu-id="8eb82-108">Slouží jako položka bodu procesu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-108">Serves as the entry point process.</span></span>

<span data-ttu-id="8eb82-109">**Modul plug-in diagnostiky (DiagnosticsPlugin.exe)**: hlavní proces, který je spuštěn Spouštěče výše a konfiguruje Monitoring Agent, spustí ji a spravuje celé jeho životnosti.</span><span class="sxs-lookup"><span data-stu-id="8eb82-109">**Diagnostics Plugin (DiagnosticsPlugin.exe)**: Main process that is launched by the launcher above and configures the Monitoring Agent, launches it and manages its lifetime.</span></span> 

<span data-ttu-id="8eb82-110">**Monitoring Agent (MonAgent\*procesy .exe)**: tyto procesy udělat velkou část pracovní; například monitorování, kolekce a přenos dat diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-110">**Monitoring Agent (MonAgent\*.exe processes)**: These processes do the bulk of the work; i.e., monitoring, collection and transfer of the diagnostics data.</span></span>  

## <a name="logartifact-paths"></a><span data-ttu-id="8eb82-111">Protokol/artefaktů cesty</span><span class="sxs-lookup"><span data-stu-id="8eb82-111">Log/Artifact Paths</span></span>
<span data-ttu-id="8eb82-112">Tady jsou cesty k některé důležité protokoly a artefakty.</span><span class="sxs-lookup"><span data-stu-id="8eb82-112">Here are the paths to some important logs and artifacts.</span></span> <span data-ttu-id="8eb82-113">Jsme zachovat odkazující na tyto ve zbývající části dokumentu:</span><span class="sxs-lookup"><span data-stu-id="8eb82-113">We keep referring to these throughout the rest of the document:</span></span>
### <a name="cloud-services"></a><span data-ttu-id="8eb82-114">Cloud Services</span><span class="sxs-lookup"><span data-stu-id="8eb82-114">Cloud Services</span></span>
| <span data-ttu-id="8eb82-115">Artefaktů</span><span class="sxs-lookup"><span data-stu-id="8eb82-115">Artifact</span></span> | <span data-ttu-id="8eb82-116">Cesta</span><span class="sxs-lookup"><span data-stu-id="8eb82-116">Path</span></span> |
| --- | --- |
| <span data-ttu-id="8eb82-117">**Azure Diagnostics konfiguračního souboru**</span><span class="sxs-lookup"><span data-stu-id="8eb82-117">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="8eb82-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<verze > \Config.txt</span><span class="sxs-lookup"><span data-stu-id="8eb82-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\Config.txt</span></span> |
| <span data-ttu-id="8eb82-119">**Soubory protokolu**</span><span class="sxs-lookup"><span data-stu-id="8eb82-119">**Log files**</span></span> | <span data-ttu-id="8eb82-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<verze > \\</span><span class="sxs-lookup"><span data-stu-id="8eb82-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\\</span></span> |
| <span data-ttu-id="8eb82-121">**Místní úložiště pro data diagnostiky**</span><span class="sxs-lookup"><span data-stu-id="8eb82-121">**Local store for diagnostics data**</span></span> | <span data-ttu-id="8eb82-122">C:\Resources\Directory\<CloudServiceDeploymentID >.\< RoleName >. DiagnosticStore\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="8eb82-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Tables</span></span> |
| <span data-ttu-id="8eb82-123">**Agent konfiguračním souborem monitorování**</span><span class="sxs-lookup"><span data-stu-id="8eb82-123">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="8eb82-124">C:\Resources\Directory\<CloudServiceDeploymentID >.\< RoleName >. DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="8eb82-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="8eb82-125">**Balíček rozšíření Azure diagnostics**</span><span class="sxs-lookup"><span data-stu-id="8eb82-125">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="8eb82-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<verze ></span><span class="sxs-lookup"><span data-stu-id="8eb82-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version></span></span> |
| <span data-ttu-id="8eb82-127">**Cesta kolekce nástroje protokolu**</span><span class="sxs-lookup"><span data-stu-id="8eb82-127">**Log collection utility path**</span></span> | <span data-ttu-id="8eb82-128">%SystemDrive%\Packages\GuestAgent\\</span><span class="sxs-lookup"><span data-stu-id="8eb82-128">%SystemDrive%\Packages\GuestAgent\\</span></span> |
| <span data-ttu-id="8eb82-129">**Soubor protokolu MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="8eb82-129">**MonAgentHost log file**</span></span> | <span data-ttu-id="8eb82-130">C:\Resources\Directory\<CloudServiceDeploymentID >.\< RoleName >. DiagnosticStore\WAD0107\Configuration\MonAgentHost. < seq_num > .log</span><span class="sxs-lookup"><span data-stu-id="8eb82-130">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

### <a name="virtual-machines"></a><span data-ttu-id="8eb82-131">Virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="8eb82-131">Virtual Machines</span></span>
| <span data-ttu-id="8eb82-132">Artefaktů</span><span class="sxs-lookup"><span data-stu-id="8eb82-132">Artifact</span></span> | <span data-ttu-id="8eb82-133">Cesta</span><span class="sxs-lookup"><span data-stu-id="8eb82-133">Path</span></span> |
| --- | --- |
| <span data-ttu-id="8eb82-134">**Azure Diagnostics konfiguračního souboru**</span><span class="sxs-lookup"><span data-stu-id="8eb82-134">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="8eb82-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<verze > \RuntimeSettings</span><span class="sxs-lookup"><span data-stu-id="8eb82-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\RuntimeSettings</span></span> |
| <span data-ttu-id="8eb82-136">**Soubory protokolu**</span><span class="sxs-lookup"><span data-stu-id="8eb82-136">**Log files**</span></span> | <span data-ttu-id="8eb82-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<verze > \Logs\\</span><span class="sxs-lookup"><span data-stu-id="8eb82-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Logs\\</span></span> |
| <span data-ttu-id="8eb82-138">**Místní úložiště pro data diagnostiky**</span><span class="sxs-lookup"><span data-stu-id="8eb82-138">**Local store for diagnostics data**</span></span> | <span data-ttu-id="8eb82-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion > \WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="8eb82-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Tables</span></span> |
| <span data-ttu-id="8eb82-140">**Agent konfiguračním souborem monitorování**</span><span class="sxs-lookup"><span data-stu-id="8eb82-140">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="8eb82-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion > \WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="8eb82-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="8eb82-142">**Stav souboru**</span><span class="sxs-lookup"><span data-stu-id="8eb82-142">**Status file**</span></span> | <span data-ttu-id="8eb82-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<verze > \Status</span><span class="sxs-lookup"><span data-stu-id="8eb82-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Status</span></span> |
| <span data-ttu-id="8eb82-144">**Balíček rozšíření Azure diagnostics**</span><span class="sxs-lookup"><span data-stu-id="8eb82-144">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="8eb82-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion ></span><span class="sxs-lookup"><span data-stu-id="8eb82-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion></span></span>|
| <span data-ttu-id="8eb82-146">**Cesta kolekce nástroje protokolu**</span><span class="sxs-lookup"><span data-stu-id="8eb82-146">**Log collection utility path**</span></span> | <span data-ttu-id="8eb82-147">C:\WindowsAzure\Packages</span><span class="sxs-lookup"><span data-stu-id="8eb82-147">C:\WindowsAzure\Packages</span></span> |
| <span data-ttu-id="8eb82-148">**Soubor protokolu MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="8eb82-148">**MonAgentHost log file**</span></span> | <span data-ttu-id="8eb82-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion > \WAD0107\Configuration\MonAgentHost. < seq_num > .log</span><span class="sxs-lookup"><span data-stu-id="8eb82-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

## <a name="metric-data-doesnt-show-in-azure-portal"></a><span data-ttu-id="8eb82-150">Data metriky nezobrazí na portálu Azure</span><span class="sxs-lookup"><span data-stu-id="8eb82-150">Metric data doesn't show in Azure portal</span></span>
<span data-ttu-id="8eb82-151">Azure Diagnostics obsahuje spoustu metriky data, která lze zobrazit na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="8eb82-151">Azure Diagnostics provides a bunch of metric data, which can be displayed in Azure portal.</span></span> <span data-ttu-id="8eb82-152">Pokud máte problémy s zobrazuje těchto dat na portálu, zkontrolujte účet úložiště diagnostiky -> WADMetrics\* tabulce najdete, pokud existují odpovídající záznamy metriky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-152">If you have problems with seeing these data in portal, check the diagnostics storage account -> WADMetrics\* table to see if the corresponding metric records are there.</span></span> <span data-ttu-id="8eb82-153">Zde PartitionKey tabulky je ID prostředku virtuálního počítače nebo škálovací sadu virtuálních počítačů, a RowKey je název metriky tj. název čítače výkonu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-153">Here, the PartitionKey of the table is the resource ID of virtual machine or virtual machine scale set, and the RowKey is the metric name i.e. performance counter name.</span></span>

<span data-ttu-id="8eb82-154">Pokud je ID prostředku není v pořádku, zkontrolujte konfiguraci diagnostiky -> metriky -> ResourceId, pokud je ID prostředku nastavena správně.</span><span class="sxs-lookup"><span data-stu-id="8eb82-154">If the resource ID is incorrect, check Diagnostics Configuration -> Metrics -> ResourceId to see if the resource ID is set correctly.</span></span>

<span data-ttu-id="8eb82-155">Pokud nejsou žádná data pro konkrétní metriku, zkontrolujte konfiguraci diagnostiky -> PerformanceCounter, jestli jsou zahrnuté metrika (čítače výkonu).</span><span class="sxs-lookup"><span data-stu-id="8eb82-155">If there's no data for the specific metric, check Diagnostics Configuration -> PerformanceCounter to see if the metric(performance counter) is included.</span></span> <span data-ttu-id="8eb82-156">Ve výchozím nastavení povolíme následující čítače.</span><span class="sxs-lookup"><span data-stu-id="8eb82-156">We enable the following counters by default.</span></span>
- <span data-ttu-id="8eb82-157">\Processor(_Total)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="8eb82-157">\Processor(_Total)\% Processor Time</span></span>
- <span data-ttu-id="8eb82-158">\Memory\Available Bytes</span><span class="sxs-lookup"><span data-stu-id="8eb82-158">\Memory\Available Bytes</span></span>
- <span data-ttu-id="8eb82-159">\ASP.NET aplikace (__celkový__) \Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="8eb82-159">\ASP.NET Applications(__Total__)\Requests/Sec</span></span>
- <span data-ttu-id="8eb82-160">\ASP.NET aplikace (__celkový__) \Errors celkem/s</span><span class="sxs-lookup"><span data-stu-id="8eb82-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span></span>
- <span data-ttu-id="8eb82-161">\ASP.NET\Requests zařazených do fronty</span><span class="sxs-lookup"><span data-stu-id="8eb82-161">\ASP.NET\Requests Queued</span></span>
- <span data-ttu-id="8eb82-162">\ASP.NET\Requests odmítl</span><span class="sxs-lookup"><span data-stu-id="8eb82-162">\ASP.NET\Requests Rejected</span></span>
- <span data-ttu-id="8eb82-163">\Processor(W3wp)\% času procesoru</span><span class="sxs-lookup"><span data-stu-id="8eb82-163">\Processor(w3wp)\% Processor Time</span></span>
- <span data-ttu-id="8eb82-164">Bajty \Private \Process (w3wp)</span><span class="sxs-lookup"><span data-stu-id="8eb82-164">\Process(w3wp)\Private Bytes</span></span>
- <span data-ttu-id="8eb82-165">\Process(WaIISHost)\% času procesoru</span><span class="sxs-lookup"><span data-stu-id="8eb82-165">\Process(WaIISHost)\% Processor Time</span></span>
- <span data-ttu-id="8eb82-166">Bajty \Private \Process (WaIISHost)</span><span class="sxs-lookup"><span data-stu-id="8eb82-166">\Process(WaIISHost)\Private Bytes</span></span>
- <span data-ttu-id="8eb82-167">\Process(WaWorkerHost)\% času procesoru</span><span class="sxs-lookup"><span data-stu-id="8eb82-167">\Process(WaWorkerHost)\% Processor Time</span></span>
- <span data-ttu-id="8eb82-168">Bajty \Private \Process (WaWorkerHost)</span><span class="sxs-lookup"><span data-stu-id="8eb82-168">\Process(WaWorkerHost)\Private Bytes</span></span>
- <span data-ttu-id="8eb82-169">\Memory\Page chyby/s</span><span class="sxs-lookup"><span data-stu-id="8eb82-169">\Memory\Page Faults/sec</span></span>
- <span data-ttu-id="8eb82-170">\.NET CLR paměti (_globální_)\% čas</span><span class="sxs-lookup"><span data-stu-id="8eb82-170">\.NET CLR Memory(_Global_)\% Time in GC</span></span>
- <span data-ttu-id="8eb82-171">Zápis \Disk \LogicalDisk (C:) bajty/s</span><span class="sxs-lookup"><span data-stu-id="8eb82-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="8eb82-172">\Disk \LogicalDisk (C:) přečtených bajtů/s</span><span class="sxs-lookup"><span data-stu-id="8eb82-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span></span>
- <span data-ttu-id="8eb82-173">Zápis \Disk \LogicalDisk (D:) bajty/s</span><span class="sxs-lookup"><span data-stu-id="8eb82-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="8eb82-174">\Disk \LogicalDisk (D:) přečtených bajtů/s</span><span class="sxs-lookup"><span data-stu-id="8eb82-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span></span>

<span data-ttu-id="8eb82-175">Pokud je správně nastavena konfigurace, ale stále nemůžete vidět data metriky, postupujte podle pokynů níže pro další šetření.</span><span class="sxs-lookup"><span data-stu-id="8eb82-175">If the configuration is set correctly but you still cannot see the metric data, follow the guidelines below for the further investigation.</span></span>


## <a name="azure-diagnostics-is-not-starting"></a><span data-ttu-id="8eb82-176">Azure Diagnostics není spouštění.</span><span class="sxs-lookup"><span data-stu-id="8eb82-176">Azure Diagnostics is not Starting</span></span>
<span data-ttu-id="8eb82-177">Podívejte se na **DiagnosticsPluginLauncher.log** a **DiagnosticsPlugin.log** soubory z umístění souborů protokolu výše uvedeného informace o Proč se nepodařilo spustit diagnostiku.</span><span class="sxs-lookup"><span data-stu-id="8eb82-177">Look at **DiagnosticsPluginLauncher.log** and **DiagnosticsPlugin.log** files from the location of the log files provided above for information on why diagnostics failed to start.</span></span> 

<span data-ttu-id="8eb82-178">Pokud tyto protokoly znamenat `Monitoring Agent not reporting success after launch`, znamená to, došlo k chybě spuštění MonAgentHost.exe.</span><span class="sxs-lookup"><span data-stu-id="8eb82-178">If these logs indicate `Monitoring Agent not reporting success after launch`, it means there was a failure launching MonAgentHost.exe.</span></span> <span data-ttu-id="8eb82-179">Vyhledejte v protokolech, v umístění určeném pro `MonAgentHost log file` výše v části.</span><span class="sxs-lookup"><span data-stu-id="8eb82-179">Look at the logs for that in the location indicated for `MonAgentHost log file` in the section above.</span></span>

<span data-ttu-id="8eb82-180">Poslední řádek souboru protokolu obsahuje ukončovací kód.</span><span class="sxs-lookup"><span data-stu-id="8eb82-180">The last line of the log files contains the exit code.</span></span>  

```
DiagnosticsPluginLauncher.exe Information: 0 : [4/16/2016 6:24:15 AM] DiagnosticPlugin exited with code 0
```
<span data-ttu-id="8eb82-181">Pokud zjistíte, **záporné** ukončovací kód, najdete [ukončovací kód tabulky](#azure-diagnostics-plugin-exit-codes) v [odkazy](#references).</span><span class="sxs-lookup"><span data-stu-id="8eb82-181">If you find a **negative** exit code, refer to the [exit code table](#azure-diagnostics-plugin-exit-codes) in the [References](#references).</span></span>

## <a name="diagnostics-data-is-not-logged-to-azure-storage"></a><span data-ttu-id="8eb82-182">Diagnostická Data není přihlášení do služby Azure Storage</span><span class="sxs-lookup"><span data-stu-id="8eb82-182">Diagnostics Data is Not Logged to Azure Storage</span></span>
<span data-ttu-id="8eb82-183">Určete, jestli je zobrazovat žádná data, nebo pouze některá data se nezobrazí.</span><span class="sxs-lookup"><span data-stu-id="8eb82-183">Determine if no data is showing up or only some of the data is not showing up.</span></span>

### <a name="diagnostics-infrastructure-logs"></a><span data-ttu-id="8eb82-184">Diagnostické protokoly infrastruktury</span><span class="sxs-lookup"><span data-stu-id="8eb82-184">Diagnostics Infrastructure Logs</span></span>
<span data-ttu-id="8eb82-185">Diagnostické protokoly infrastruktury je, kam azure diagnostics protokoluje všechny chyby, které běží na.</span><span class="sxs-lookup"><span data-stu-id="8eb82-185">Diagnostics Infrastructure Logs is where azure diagnostics logs any errors that it runs into.</span></span> <span data-ttu-id="8eb82-186">Zajistěte, aby mít povolené ([postup?](#how-to-check-diagnostics-extension-configuration)) zaznamenání protokolů diagnostiky infrastruktury v konfiguraci a rychle vyhledat všechny relevantní chyby, které se zobrazí v `DiagnosticInfrastructureLogsTable` tabulky ve vašem účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="8eb82-186">Make sure you have enabled ([how to?](#how-to-check-diagnostics-extension-configuration)) capturing of Diagnostics Infrastructure logs in your configuration and quickly look for any relevant errors that show up in the `DiagnosticInfrastructureLogsTable` table in your configured storage account.</span></span>

### <a name="no-data-is-showing-up"></a><span data-ttu-id="8eb82-187">Žádná data se zobrazuje, protože</span><span class="sxs-lookup"><span data-stu-id="8eb82-187">No data is showing up</span></span>
<span data-ttu-id="8eb82-188">Nejčastější příčinou události, který data úplně chybí je nesprávně definované informace o účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="8eb82-188">The most common cause of event data entirely missing is incorrectly defined storage account information.</span></span>

<span data-ttu-id="8eb82-189">Řešení: Opravte konfiguraci diagnostiky a znovu nainstalujte diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-189">Solution: Correct your Diagnostics configuration and reinstall Diagnostics.</span></span>

<span data-ttu-id="8eb82-190">Pokud účet úložiště není správně nakonfigurovaná, vzdálené plochy do počítače a ujistěte se, že DiagnosticsPlugin.exe a MonAgentCore.exe běží.</span><span class="sxs-lookup"><span data-stu-id="8eb82-190">If the storage account is configured correctly, remote desktop into the machine and make sure DiagnosticsPlugin.exe and MonAgentCore.exe are running.</span></span> <span data-ttu-id="8eb82-191">Pokud neběží, postupujte podle [Azure Diagnostics není od](#azure-diagnostics-is-not-starting).</span><span class="sxs-lookup"><span data-stu-id="8eb82-191">If they are not running, follow [Azure Diagnostics is not Starting](#azure-diagnostics-is-not-starting).</span></span> <span data-ttu-id="8eb82-192">Pokud procesů, které běží, přejít na [je data získávání zaznamenaná místně](#is-data-getting-captured-locally) a postupujte podle této příručky odtud na.</span><span class="sxs-lookup"><span data-stu-id="8eb82-192">If the processes are running, jump to [Is data getting captured locally](#is-data-getting-captured-locally) and follow this guide from there on.</span></span>

### <a name="part-of-the-data-is-missing"></a><span data-ttu-id="8eb82-193">Chybí část dat</span><span class="sxs-lookup"><span data-stu-id="8eb82-193">Part of the data is missing</span></span>
<span data-ttu-id="8eb82-194">Pokud jsou získáme nějaká data, ale ne jiné.</span><span class="sxs-lookup"><span data-stu-id="8eb82-194">If you are getting some data but not other.</span></span> <span data-ttu-id="8eb82-195">To znamená shromažďování dat nebo přenos kanálu nastavena správně.</span><span class="sxs-lookup"><span data-stu-id="8eb82-195">This means the data collection / transfer pipeline is set correctly.</span></span> <span data-ttu-id="8eb82-196">Můžete zúžit co je problém, postupujte podle zde témata:</span><span class="sxs-lookup"><span data-stu-id="8eb82-196">Follow the subsections here to narrow down what the issue is:</span></span>
#### <a name="is-collection-configured"></a><span data-ttu-id="8eb82-197">Je nakonfigurované kolekce:</span><span class="sxs-lookup"><span data-stu-id="8eb82-197">Is Collection Configured:</span></span> 
<span data-ttu-id="8eb82-198">Konfigurace diagnostiky obsahuje část, která se dá pokyn pro určitý typ dat, které se mají shromažďovat.</span><span class="sxs-lookup"><span data-stu-id="8eb82-198">Diagnostics Configuration contains the part that instructs for a particular type of data to be collected.</span></span> <span data-ttu-id="8eb82-199">[Zkontrolujte konfiguraci](#how-to-check-diagnostics-extension-configuration) a ujistěte se, nejsou vyhledávání dat, které jste nenakonfigurovali pro kolekci.</span><span class="sxs-lookup"><span data-stu-id="8eb82-199">[Review your configuration](#how-to-check-diagnostics-extension-configuration) to make sure you are not looking for data you have not configured for collection.</span></span>
#### <a name="is-the-host-generating-data"></a><span data-ttu-id="8eb82-200">Je hostitel generování dat:</span><span class="sxs-lookup"><span data-stu-id="8eb82-200">Is the host generating data:</span></span>
- <span data-ttu-id="8eb82-201">**Čítače výkonu**: Otevřete perfmon a zkontrolujte čítač.</span><span class="sxs-lookup"><span data-stu-id="8eb82-201">**Performance Counters**: open perfmon and check the counter.</span></span>
- <span data-ttu-id="8eb82-202">**Protokoly trasování**: použijte vzdálenou plochu do virtuálního počítače a přidejte TextWriterTraceListener konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="8eb82-202">**Trace Logs**:  Remote desktop into the VM and add a TextWriterTraceListener to the app’s config file.</span></span>  <span data-ttu-id="8eb82-203">V tématu http://msdn.microsoft.com/library/sk36c28t.aspx nastavit naslouchacího procesu text.</span><span class="sxs-lookup"><span data-stu-id="8eb82-203">See http://msdn.microsoft.com/library/sk36c28t.aspx to set up the text listener.</span></span>  <span data-ttu-id="8eb82-204">Zajistěte, aby `<trace>` má element `<trace autoflush="true">`.</span><span class="sxs-lookup"><span data-stu-id="8eb82-204">Make sure the `<trace>` element has `<trace autoflush="true">`.</span></span><br />
<span data-ttu-id="8eb82-205">Pokud nevidíte generováno protokoly trasování, postupujte podle [více o trasování protokoly chybí](#more-about-trace-logs-missing).</span><span class="sxs-lookup"><span data-stu-id="8eb82-205">If you don't see trace logs getting generated, follow [More About Trace Logs Missing](#more-about-trace-logs-missing).</span></span>
- <span data-ttu-id="8eb82-206">**Trasování událostí pro Windows trasování**: Vzdálená plocha do virtuálních počítačů a nainstalujte nástroje PerfView.</span><span class="sxs-lookup"><span data-stu-id="8eb82-206">**ETW traces**: Remote desktop into the VM and install PerfView.</span></span>  <span data-ttu-id="8eb82-207">Spuštění souboru -> Nástroje PerfView příkazu User -> etwprovder1 naslouchání, etwprovider2 atd.  Všimněte si, že je příkaz naslouchání velká a malá písmena a nemůže být mezery mezi čárkami oddělený seznam zprostředkovatelů trasování událostí pro Windows.</span><span class="sxs-lookup"><span data-stu-id="8eb82-207">In PerfView run File -> User Command -> Listen etwprovder1, etwprovider2, etc.  Note that the Listen command is case-sensitive and there cannot be spaces between the comma-separated list of ETW providers.</span></span>  <span data-ttu-id="8eb82-208">Pokud příkaz se nezdaří, můžete klikněte na tlačítko 'Protokolu' v pravém dolním rohu nástroj nástroje Perfview co došlo k pokusu o spuštění a jaký byl výsledek.</span><span class="sxs-lookup"><span data-stu-id="8eb82-208">If the command fails to run, you can click the 'Log' button in the bottom-right of the Perfview tool to see what was attempted to run and what the result was.</span></span>  <span data-ttu-id="8eb82-209">Za předpokladu, že vstup je správná, že pak se nové okno pop nahoru a za několik sekund, bude zahájena zobrazuje trasování ETW.</span><span class="sxs-lookup"><span data-stu-id="8eb82-209">Assuming the input is correct then a new window will pop up and in a few seconds you will begin seeing ETW traces.</span></span>
- <span data-ttu-id="8eb82-210">**Protokoly událostí**: použijte vzdálenou plochu do virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="8eb82-210">**Event Logs**: Remote desktop into the VM.</span></span> <span data-ttu-id="8eb82-211">Otevřete `Event Viewer` a nezapomeňte události.</span><span class="sxs-lookup"><span data-stu-id="8eb82-211">Open `Event Viewer` and ensure the events exist.</span></span>
#### <a name="is-data-getting-captured-locally"></a><span data-ttu-id="8eb82-212">Je získávání dat zachytit místně:</span><span class="sxs-lookup"><span data-stu-id="8eb82-212">Is data getting captured locally:</span></span>
<span data-ttu-id="8eb82-213">Dále zkontrolujte, zda že získávání zachycení místně.</span><span class="sxs-lookup"><span data-stu-id="8eb82-213">Next make sure the data is getting captured locally.</span></span>
<span data-ttu-id="8eb82-214">Jsou data uložená místně v `*.tsf` soubory v [místní úložiště pro data diagnostiky](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="8eb82-214">The data is locally stored in `*.tsf` files in [the local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="8eb82-215">Různé druhy protokoly získat shromážděné v různých `.tsf` soubory.</span><span class="sxs-lookup"><span data-stu-id="8eb82-215">Different kinds of logs get collected in different `.tsf` files.</span></span> <span data-ttu-id="8eb82-216">Názvy jsou podobné názvy tabulek v úložišti azure.</span><span class="sxs-lookup"><span data-stu-id="8eb82-216">The names are similar to the table names in azure storage.</span></span> <span data-ttu-id="8eb82-217">Například `Performance Counters` získat shromážděných v `PerformanceCountersTable.tsf`, získat shromáždí protokoly událostí v `WindowsEventLogsTable.tsf`.</span><span class="sxs-lookup"><span data-stu-id="8eb82-217">For example `Performance Counters` get collected in `PerformanceCountersTable.tsf`, Event Logs get collected in `WindowsEventLogsTable.tsf`.</span></span> <span data-ttu-id="8eb82-218">Postupujte podle pokynů v [místní protokolu extrakce](#local-log-extraction) oddílu otevřete místního shromažďování souborů a zajistěte, aby je vidíte získávání shromážděných na disku.</span><span class="sxs-lookup"><span data-stu-id="8eb82-218">Use the instructions in [Local Log Extraction](#local-log-extraction) section to open the local collection files and make sure you see them getting collected on disk.</span></span>

<span data-ttu-id="8eb82-219">Pokud nevidíte získávání místně shromážděné protokoly a již ověříte, že je hostitel generování dat, máte pravděpodobně problém konfigurace.</span><span class="sxs-lookup"><span data-stu-id="8eb82-219">If you don't see logs getting collected locally and have already verified that the host is generating data, you likely have a configuration issue.</span></span> <span data-ttu-id="8eb82-220">Zkontrolujte konfiguraci pečlivě pro příslušné části.</span><span class="sxs-lookup"><span data-stu-id="8eb82-220">Review your configuration carefully for the appropriate section.</span></span> <span data-ttu-id="8eb82-221">Také zkontrolujte konfiguraci vygenerované MonitoringAgent [MaConfig.xml](#log-artifacts-path) a zkontrolujte zkontrolujte, zda je některá část popisující zdroj příslušných protokolových a že nedojde ke ztrátě v překlad mezi konfigurace diagnostiky azure a monitorování konfigurace agenta.</span><span class="sxs-lookup"><span data-stu-id="8eb82-221">Also review the configuration generated for MonitoringAgent [MaConfig.xml](#log-artifacts-path) and make sure there is some section describing the relevant log source and that it is not lost in translation between azure diagnostics configuration and monitoring agent configuration.</span></span>
#### <a name="is-data-getting-transferred"></a><span data-ttu-id="8eb82-222">Získávání přenosu dat:</span><span class="sxs-lookup"><span data-stu-id="8eb82-222">Is data getting transferred:</span></span>
<span data-ttu-id="8eb82-223">Pokud jste ověřili získávání zachycení místně, ale přesto ho nevidíte ve vašem účtu úložiště:</span><span class="sxs-lookup"><span data-stu-id="8eb82-223">If you have verified the data is getting captured locally but you still don't see it in your storage account:</span></span> 
- <span data-ttu-id="8eb82-224">Především Ujistěte se, zda jste zadali účet úložiště správný a že nebyly vráceny přes etc.for klíče účtu daného úložiště.</span><span class="sxs-lookup"><span data-stu-id="8eb82-224">First and foremost, make sure that you have provided a correct storage account and that you have not rolled over keys etc.for the given storage account.</span></span> <span data-ttu-id="8eb82-225">Pro cloudové služby, někdy vidíme, že lidé Neaktualizovat jejich `useDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="8eb82-225">For cloud services, sometimes we see that people don't update their `useDevelopmentStorage=true`.</span></span>
- <span data-ttu-id="8eb82-226">Pokud předpokladu, že účet úložiště je správná.</span><span class="sxs-lookup"><span data-stu-id="8eb82-226">If provided storage account is correct.</span></span> <span data-ttu-id="8eb82-227">Ujistěte se, že nemáte určitá omezení sítě, které neumožňují komponenty k dosažení koncové body veřejné úložiště.</span><span class="sxs-lookup"><span data-stu-id="8eb82-227">Make sure you do not have some network restrictions that do not allow the components to reach public storage endpoints.</span></span> <span data-ttu-id="8eb82-228">Jeden způsob, jak to udělat, je Vzdálená plocha do počítače a akci k zápisu něco stejný účet úložiště sami.</span><span class="sxs-lookup"><span data-stu-id="8eb82-228">One way to do that is to remote desktop into the machine and try to write something to the same storage account yourself.</span></span>
- <span data-ttu-id="8eb82-229">Nakonec můžete akci a zjistit, jaké selhání se hlášených Monitoring Agent.</span><span class="sxs-lookup"><span data-stu-id="8eb82-229">Finally, you can try and see what failure are being reported by Monitoring Agent.</span></span> <span data-ttu-id="8eb82-230">Agent monitorování protokoly zapisují `maeventtable.tsf` umístěný v [místní úložiště pro data diagnostiky](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="8eb82-230">Monitoring agent writes its logs in `maeventtable.tsf` located in [the local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="8eb82-231">Postupujte podle pokynů v [místní protokolu extrakce](#local-log-extraction) části otevřít tento soubor a zkuste to a zjistěte, zda jsou `errors` označující selhání místní soubory číst nebo zapisovat do úložiště.</span><span class="sxs-lookup"><span data-stu-id="8eb82-231">Follow instructions in [Local Log Extraction](#local-log-extraction) section to open this file and try and figure out if there are `errors` indicating failures to read local files or write to storage.</span></span>

### <a name="capturing--archiving-logs"></a><span data-ttu-id="8eb82-232">Zaznamenání / archivaci protokoly</span><span class="sxs-lookup"><span data-stu-id="8eb82-232">Capturing / Archiving logs</span></span>
<span data-ttu-id="8eb82-233">Došlo k prostřednictvím výše uvedené kroky, ale nelze zjistit, co byla chybná a jsou přemýšlení o obrátíte na podporu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-233">You went through the above steps but could not figure out what was wrong and are thinking about contacting support.</span></span> <span data-ttu-id="8eb82-234">Je první věcí, kterou může vás vyzvou k shromažďování protokolů z vašeho počítače.</span><span class="sxs-lookup"><span data-stu-id="8eb82-234">The first thing they might ask you is to collect logs from your machine.</span></span> <span data-ttu-id="8eb82-235">Díky této sami můžete ušetřit čas.</span><span class="sxs-lookup"><span data-stu-id="8eb82-235">You can save time by doing that yourself.</span></span> <span data-ttu-id="8eb82-236">Spustit `CollectGuestLogs.exe` nástroj na [cesta protokolu kolekce nástroje](#log-artifacts-path) a vygeneruje soubor zip s všechny relevantní azure protokoly ve stejné složce.</span><span class="sxs-lookup"><span data-stu-id="8eb82-236">Run the `CollectGuestLogs.exe` utility at  [Log Collection Utility path](#log-artifacts-path) and it generates a zip file with all relevant azure logs in the same folder.</span></span>

## <a name="diagnostics-data-tables-not-found"></a><span data-ttu-id="8eb82-237">Diagnostická data tabulky nebyl nalezen</span><span class="sxs-lookup"><span data-stu-id="8eb82-237">Diagnostics data Tables not found</span></span>
<span data-ttu-id="8eb82-238">Tabulky v úložišti Azure, která uchovává události trasování událostí pro Windows jsou název, pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="8eb82-238">The tables in Azure storage holding ETW events are named using the following code:</span></span>

```C#
        if (String.IsNullOrEmpty(eventDestination)) {
            if (e == "DefaultEvents")
                tableName = "WADDefault" + MD5(provider);
            else
                tableName = "WADEvent" + MD5(provider) + eventId;
        }
        else
            tableName = "WAD" + eventDestination;
```

<span data-ttu-id="8eb82-239">Zde naleznete příklad:</span><span class="sxs-lookup"><span data-stu-id="8eb82-239">Here is an example:</span></span>

```XML
        <EtwEventSourceProviderConfiguration provider="prov1">
          <Event id="1" />
          <Event id="2" eventDestination="dest1" />
          <DefaultEvents />
        </EtwEventSourceProviderConfiguration>
        <EtwEventSourceProviderConfiguration provider="prov2">
          <DefaultEvents eventDestination="dest2" />
        </EtwEventSourceProviderConfiguration>
```
```JSON
"EtwEventSourceProviderConfiguration": [
    {
        "provider": "prov1",
        "Event": [
            {
                "id": 1
            },
            {
                "id": 2,
                "eventDestination": "dest1"
            }
        ],
        "DefaultEvents": {
            "eventDestination": "DefaultEventDestination",
            "sinks": ""
        }
    },
    {
        "provider": "prov2",
        "DefaultEvents": {
            "eventDestination": "dest2"
        }
    }
]
```
<span data-ttu-id="8eb82-240">4 tabulky, která generuje:</span><span class="sxs-lookup"><span data-stu-id="8eb82-240">That generates 4 tables:</span></span>

| <span data-ttu-id="8eb82-241">Událost</span><span class="sxs-lookup"><span data-stu-id="8eb82-241">Event</span></span> | <span data-ttu-id="8eb82-242">Název tabulky</span><span class="sxs-lookup"><span data-stu-id="8eb82-242">Table Name</span></span> |
| --- | --- |
| <span data-ttu-id="8eb82-243">Zprostředkovatel = "prov1" &lt;událost s id = "1" nebo&gt;</span><span class="sxs-lookup"><span data-stu-id="8eb82-243">provider=”prov1” &lt;Event id=”1” /&gt;</span></span> |<span data-ttu-id="8eb82-244">WADEvent + MD5("prov1") + "1"</span><span class="sxs-lookup"><span data-stu-id="8eb82-244">WADEvent+MD5(“prov1”)+”1”</span></span> |
| <span data-ttu-id="8eb82-245">Zprostředkovatel = "prov1" &lt;událost s id = "2" eventDestination = "dest1" /&gt;</span><span class="sxs-lookup"><span data-stu-id="8eb82-245">provider=”prov1” &lt;Event id=”2” eventDestination=”dest1” /&gt;</span></span> |<span data-ttu-id="8eb82-246">WADdest1</span><span class="sxs-lookup"><span data-stu-id="8eb82-246">WADdest1</span></span> |
| <span data-ttu-id="8eb82-247">Zprostředkovatel = "prov1" &lt;DefaultEvents /&gt;</span><span class="sxs-lookup"><span data-stu-id="8eb82-247">provider=”prov1” &lt;DefaultEvents /&gt;</span></span> |<span data-ttu-id="8eb82-248">WADDefault+MD5("prov1")</span><span class="sxs-lookup"><span data-stu-id="8eb82-248">WADDefault+MD5(“prov1”)</span></span> |
| <span data-ttu-id="8eb82-249">Zprostředkovatel = "prov2" &lt;DefaultEvents eventDestination = "dest2" /&gt;</span><span class="sxs-lookup"><span data-stu-id="8eb82-249">provider=”prov2” &lt;DefaultEvents eventDestination=”dest2” /&gt;</span></span> |<span data-ttu-id="8eb82-250">WADdest2</span><span class="sxs-lookup"><span data-stu-id="8eb82-250">WADdest2</span></span> |

## <a name="references"></a><span data-ttu-id="8eb82-251">Odkazy</span><span class="sxs-lookup"><span data-stu-id="8eb82-251">References</span></span>

### <a name="how-to-check-diagnostics-extension-configuration"></a><span data-ttu-id="8eb82-252">Jak zkontrolovat konfiguraci rozšíření diagnostiky</span><span class="sxs-lookup"><span data-stu-id="8eb82-252">How to check Diagnostics Extension Configuration</span></span>
<span data-ttu-id="8eb82-253">Nejjednodušší způsob, jak zkontrolovat konfiguraci rozšíření je přejděte na http://resources.azure.com, přejděte do virtuálního počítače nebo Cloudová služba, na kterém rozšíření diagnostiky Azure (IaaSDiagnostics / PaaDiagnostics) je nejistá.</span><span class="sxs-lookup"><span data-stu-id="8eb82-253">The easiest way to check your extension configuration is to navigate to http://resources.azure.com, navigate to the virtual machine or cloud service on which the Azure Diagnostics extension (IaaSDiagnostics / PaaDiagnostics) is in question.</span></span>

<span data-ttu-id="8eb82-254">Alternativně použijte vzdálenou plochu do počítače a podívejte se na Azure Diagnostics konfiguračního souboru popsané v příslušné části [zde](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="8eb82-254">Alternatively, remote desktop into the machine and look at the Azure Diagnostics Configuration file described in the appropriate section [here](#log-artifacts-path).</span></span>

<span data-ttu-id="8eb82-255">Buď případu vyhledávání pro **Microsoft.Azure.Diagnostics** pak pro **xmlCfg** nebo **WadCfg** pole.</span><span class="sxs-lookup"><span data-stu-id="8eb82-255">In either case search for **Microsoft.Azure.Diagnostics** then for the **xmlCfg** or **WadCfg** field.</span></span> 

<span data-ttu-id="8eb82-256">V případě virtuálních počítačů Pokud se nachází pole WadCfg, znamená to, že konfigurace je ve formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="8eb82-256">In case of virtual machines, if the WadCfg field is present, it means the config is in JSON.</span></span> <span data-ttu-id="8eb82-257">Pokud pole xmlCfg k dispozici, znamená to, konfigurace je v kódu XML a je kódování base64.</span><span class="sxs-lookup"><span data-stu-id="8eb82-257">If the xmlCfg field is present, it means the config is in XML and is base64 encoded.</span></span> <span data-ttu-id="8eb82-258">Budete muset [dekódovat](http://www.bing.com/search?q=base64+decoder) zobrazíte XML, který byl načteny diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-258">You need to [decode it](http://www.bing.com/search?q=base64+decoder) to see the XML that was loaded by Diagnostics.</span></span>

<span data-ttu-id="8eb82-259">Pro roli cloudové služby, pokud vyberete konfiguraci z disku, data je zakódovaný pomocí base64, budete muset [dekódovat](http://www.bing.com/search?q=base64+decoder) zobrazíte XML, který byl načteny diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-259">For Cloud Service role, if you pick the configuration from disk, the data is base64 encoded so you’ll need to [decode it](http://www.bing.com/search?q=base64+decoder) to see the XML that was loaded by Diagnostics.</span></span>

### <a name="azure-diagnostics-plugin-exit-codes"></a><span data-ttu-id="8eb82-260">Kódy ukončení modul plug-in Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="8eb82-260">Azure Diagnostics Plugin Exit Codes</span></span>
<span data-ttu-id="8eb82-261">Tento modul plug-in vrátí následující ukončovací kód:</span><span class="sxs-lookup"><span data-stu-id="8eb82-261">The plugin returns the following exit codes:</span></span>

| <span data-ttu-id="8eb82-262">Ukončovací kód</span><span class="sxs-lookup"><span data-stu-id="8eb82-262">Exit Code</span></span> | <span data-ttu-id="8eb82-263">Popis</span><span class="sxs-lookup"><span data-stu-id="8eb82-263">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8eb82-264">0</span><span class="sxs-lookup"><span data-stu-id="8eb82-264">0</span></span> |<span data-ttu-id="8eb82-265">Úspěch</span><span class="sxs-lookup"><span data-stu-id="8eb82-265">Success.</span></span> |
| <span data-ttu-id="8eb82-266">-1</span><span class="sxs-lookup"><span data-stu-id="8eb82-266">-1</span></span> |<span data-ttu-id="8eb82-267">Obecná chyba.</span><span class="sxs-lookup"><span data-stu-id="8eb82-267">Generic Error.</span></span> |
| <span data-ttu-id="8eb82-268">-2</span><span class="sxs-lookup"><span data-stu-id="8eb82-268">-2</span></span> |<span data-ttu-id="8eb82-269">Nelze načíst soubor rcf.</span><span class="sxs-lookup"><span data-stu-id="8eb82-269">Unable to load the rcf file.</span></span><p><span data-ttu-id="8eb82-270">Tato interní chyba by měla pouze dojít, pokud spouštěč modulu plug-in agenta hosta je vyvolána ručně, nesprávně, na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="8eb82-270">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="8eb82-271">-3</span><span class="sxs-lookup"><span data-stu-id="8eb82-271">-3</span></span> |<span data-ttu-id="8eb82-272">Nelze načíst konfigurační soubor diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-272">Cannot load the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="8eb82-273">Řešení: Způsobené konfigurační soubor není předávání ověřování schématu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-273">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="8eb82-274">Řešení je poskytnout konfiguračního souboru, který je v souladu se schématem.</span><span class="sxs-lookup"><span data-stu-id="8eb82-274">The solution is to provide a configuration file that complies with the schema.</span></span> |
| <span data-ttu-id="8eb82-275">-4</span><span class="sxs-lookup"><span data-stu-id="8eb82-275">-4</span></span> |<span data-ttu-id="8eb82-276">Jiná instance agenta monitorování diagnostiky už používá adresář místních prostředků.</span><span class="sxs-lookup"><span data-stu-id="8eb82-276">Another instance of the monitoring agent Diagnostics is already using the local resource directory.</span></span><p><p><span data-ttu-id="8eb82-277">Řešení: Zadat jinou hodnotu pro **LocalResourceDirectory**.</span><span class="sxs-lookup"><span data-stu-id="8eb82-277">Solution: Specify a different value for **LocalResourceDirectory**.</span></span> |
| <span data-ttu-id="8eb82-278">-6</span><span class="sxs-lookup"><span data-stu-id="8eb82-278">-6</span></span> |<span data-ttu-id="8eb82-279">Spouštěč hostovaného agenta modulu plug-in došlo k pokusu o spouštění diagnostiky neplatný příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="8eb82-279">The guest agent plugin launcher attempted to launch Diagnostics with an invalid command line.</span></span><p><p><span data-ttu-id="8eb82-280">Tato interní chyba by měla pouze dojít, pokud spouštěč modulu plug-in agenta hosta je vyvolána ručně, nesprávně, na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="8eb82-280">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="8eb82-281">-10</span><span class="sxs-lookup"><span data-stu-id="8eb82-281">-10</span></span> |<span data-ttu-id="8eb82-282">Modul plug-in diagnostiky byl ukončen se k neošetřené výjimce.</span><span class="sxs-lookup"><span data-stu-id="8eb82-282">The Diagnostics plugin exited with an unhandled exception.</span></span> |
| <span data-ttu-id="8eb82-283">-11</span><span class="sxs-lookup"><span data-stu-id="8eb82-283">-11</span></span> |<span data-ttu-id="8eb82-284">Agentovi hosta se nepodařilo vytvořit proces zodpovědný za spouštění a monitorování agent sledování.</span><span class="sxs-lookup"><span data-stu-id="8eb82-284">The guest agent was unable to create the process responsible for launching and monitoring the monitoring agent.</span></span><p><p><span data-ttu-id="8eb82-285">Řešení: Ověřte, že jsou k dispozici nové procesy dostatek systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="8eb82-285">Solution: Verify that sufficient system resources are available to launch new processes.</span></span><p> |
| <span data-ttu-id="8eb82-286">-101</span><span class="sxs-lookup"><span data-stu-id="8eb82-286">-101</span></span> |<span data-ttu-id="8eb82-287">Neplatné argumenty při volání modulu plug-in diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-287">Invalid arguments when calling the Diagnostics plugin.</span></span><p><p><span data-ttu-id="8eb82-288">Tato interní chyba by měla pouze dojít, pokud spouštěč modulu plug-in agenta hosta je vyvolána ručně, nesprávně, na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="8eb82-288">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="8eb82-289">-102</span><span class="sxs-lookup"><span data-stu-id="8eb82-289">-102</span></span> |<span data-ttu-id="8eb82-290">Proces modulu plug-in se nepodařilo inicializovat.</span><span class="sxs-lookup"><span data-stu-id="8eb82-290">The plugin process is unable to initialize itself.</span></span><p><p><span data-ttu-id="8eb82-291">Řešení: Ověřte, že jsou k dispozici nové procesy dostatek systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="8eb82-291">Solution: Verify that sufficient system resources are available to launch new processes.</span></span> |
| <span data-ttu-id="8eb82-292">-103</span><span class="sxs-lookup"><span data-stu-id="8eb82-292">-103</span></span> |<span data-ttu-id="8eb82-293">Proces modulu plug-in se nepodařilo inicializovat.</span><span class="sxs-lookup"><span data-stu-id="8eb82-293">The plugin process is unable to initialize itself.</span></span> <span data-ttu-id="8eb82-294">Konkrétně se nepodařilo vytvořit objekt protokolovacího nástroje.</span><span class="sxs-lookup"><span data-stu-id="8eb82-294">Specifically it is unable to create the logger object.</span></span><p><p><span data-ttu-id="8eb82-295">Řešení: Ověřte, že jsou k dispozici nové procesy dostatek systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="8eb82-295">Solution: Verify that sufficient system resources are available to launch new processes.</span></span> |
| <span data-ttu-id="8eb82-296">-104</span><span class="sxs-lookup"><span data-stu-id="8eb82-296">-104</span></span> |<span data-ttu-id="8eb82-297">Nelze načíst soubor rcf poskytované agenta hosta.</span><span class="sxs-lookup"><span data-stu-id="8eb82-297">Unable to load the rcf file provided by the guest agent.</span></span><p><p><span data-ttu-id="8eb82-298">Tato interní chyba by měla pouze dojít, pokud spouštěč modulu plug-in agenta hosta je vyvolána ručně, nesprávně, na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="8eb82-298">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="8eb82-299">-105</span><span class="sxs-lookup"><span data-stu-id="8eb82-299">-105</span></span> |<span data-ttu-id="8eb82-300">Modul plug-in Diagnostics nelze otevřít soubor konfigurace diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="8eb82-300">The Diagnostics plugin cannot open the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="8eb82-301">Tato interní chyba by mohlo dojít pouze v Pokud modul plug-in diagnostiky je vyvolána ručně, nesprávně, na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="8eb82-301">This internal error should only happen if the Diagnostics plugin is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="8eb82-302">-106</span><span class="sxs-lookup"><span data-stu-id="8eb82-302">-106</span></span> |<span data-ttu-id="8eb82-303">Diagnostika konfigurační soubor nelze přečíst.</span><span class="sxs-lookup"><span data-stu-id="8eb82-303">Cannot read the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="8eb82-304">Řešení: Způsobené konfigurační soubor není předávání ověřování schématu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-304">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="8eb82-305">Proto řešením je zajistit konfiguračního souboru, který je v souladu se schématem.</span><span class="sxs-lookup"><span data-stu-id="8eb82-305">So the solution is to provide a configuration file that complies with the schema.</span></span> <span data-ttu-id="8eb82-306">V tématu [jak zkontrolovat konfiguraci rozšíření diagnostiky](#how-to-check-diagnostics-extension-configuration).</span><span class="sxs-lookup"><span data-stu-id="8eb82-306">See [How to check Diagnostics Extension Configuration](#how-to-check-diagnostics-extension-configuration).</span></span> |
| <span data-ttu-id="8eb82-307">-107</span><span class="sxs-lookup"><span data-stu-id="8eb82-307">-107</span></span> |<span data-ttu-id="8eb82-308">Pass directory prostředků pro agenta monitorování je neplatný.</span><span class="sxs-lookup"><span data-stu-id="8eb82-308">The resource directory pass to the monitoring agent is invalid.</span></span><p><p><span data-ttu-id="8eb82-309">Tato interní chyba by mohlo dojít pouze v Pokud agenta monitorování je vyvolána ručně, nesprávně, na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="8eb82-309">This internal error should only happen if the monitoring agent is manually invoked, incorrectly, on the VM.</span></span></p> |
| <span data-ttu-id="8eb82-310">-108</span><span class="sxs-lookup"><span data-stu-id="8eb82-310">-108</span></span> |<span data-ttu-id="8eb82-311">Nebylo možné převést konfiguračního souboru diagnostiku do konfiguračního souboru monitorování agenta.</span><span class="sxs-lookup"><span data-stu-id="8eb82-311">Unable to convert the Diagnostics configuration file into the monitoring agent configuration file.</span></span><p><p><span data-ttu-id="8eb82-312">Tato interní chyba by mohlo dojít pouze v Pokud je modul plug-in diagnostiky je vyvolána ručně se souborem neplatná konfigurace.</span><span class="sxs-lookup"><span data-stu-id="8eb82-312">This internal error should only happen if the Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="8eb82-313">-110</span><span class="sxs-lookup"><span data-stu-id="8eb82-313">-110</span></span> |<span data-ttu-id="8eb82-314">Konfigurace diagnostiky obecné došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="8eb82-314">General Diagnostics configuration error.</span></span><p><p><span data-ttu-id="8eb82-315">Tato interní chyba by mohlo dojít pouze v Pokud je modul plug-in diagnostiky je vyvolána ručně se souborem neplatná konfigurace.</span><span class="sxs-lookup"><span data-stu-id="8eb82-315">This internal error should only happen if the Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="8eb82-316">-111</span><span class="sxs-lookup"><span data-stu-id="8eb82-316">-111</span></span> |<span data-ttu-id="8eb82-317">Nepodařilo se spustit agent sledování.</span><span class="sxs-lookup"><span data-stu-id="8eb82-317">Unable to start the monitoring agent.</span></span><p><p><span data-ttu-id="8eb82-318">Řešení: Ověřte, že jsou k dispozici dostatek systémových prostředků.</span><span class="sxs-lookup"><span data-stu-id="8eb82-318">Solution: Verify that sufficient system resources are available.</span></span> |
| <span data-ttu-id="8eb82-319">-112</span><span class="sxs-lookup"><span data-stu-id="8eb82-319">-112</span></span> |<span data-ttu-id="8eb82-320">Obecná chyba</span><span class="sxs-lookup"><span data-stu-id="8eb82-320">General error</span></span> |

### <a name="local-log-extraction"></a><span data-ttu-id="8eb82-321">Extrakce místního protokolu</span><span class="sxs-lookup"><span data-stu-id="8eb82-321">Local Log Extraction</span></span>
<span data-ttu-id="8eb82-322">Agent monitorování shromažďuje protokoly a artefaktů jako `.tsf` soubory.</span><span class="sxs-lookup"><span data-stu-id="8eb82-322">The monitoring agent collects logs and artifacts as `.tsf` files.</span></span> <span data-ttu-id="8eb82-323">`.tsf`soubor není možné číst, ale můžete ji do převést `.csv` následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="8eb82-323">`.tsf` file is not readable but you can convert it into a `.csv` as follows:</span></span> 

```
<Azure diagnostics extension package>\Monitor\x64\table2csv.exe <relevantLogFile>.tsf
```
<span data-ttu-id="8eb82-324">Nový soubor s názvem `<relevantLogFile>.csv` budou vytvořeny v stejnou cestu jako odpovídající `.tsf` souboru.</span><span class="sxs-lookup"><span data-stu-id="8eb82-324">A new file called `<relevantLogFile>.csv` will be created in the same path as the corresponding `.tsf` file.</span></span>

<span data-ttu-id="8eb82-325">**Poznámka:**: stačí ke spuštění tohoto nástroje u souboru hlavní tsf (například PerformanceCountersTable.tsf).</span><span class="sxs-lookup"><span data-stu-id="8eb82-325">**NOTE**: You only need to run this utility against the main tsf file (e.g., PerformanceCountersTable.tsf).</span></span> <span data-ttu-id="8eb82-326">Doprovodné soubory (například PerformanceCountersTables_\*\*001.tsf PerformanceCountersTables_\*\*002. tsf atd.) budou automaticky zpracovány.</span><span class="sxs-lookup"><span data-stu-id="8eb82-326">The accompanying files (e.g., PerformanceCountersTables_\*\*001.tsf, PerformanceCountersTables_\*\*002.tsf etc.) will automatically be processed.</span></span>

### <a name="more-about-trace-logs-missing"></a><span data-ttu-id="8eb82-327">Další informace o chybí protokoly trasování</span><span class="sxs-lookup"><span data-stu-id="8eb82-327">More About Trace Logs Missing</span></span>

<span data-ttu-id="8eb82-328">**Poznámka:** to většinou platí cloudových služeb, pouze pokud jste nakonfigurovali DiagnosticsMonitorTraceListener na aplikace běžící na vašem virtuálním počítači IaaS.</span><span class="sxs-lookup"><span data-stu-id="8eb82-328">**Note:** This mostly applies to cloud services only unless you have configured the DiagnosticsMonitorTraceListener on an application running on your IaaS VM.</span></span> 

- <span data-ttu-id="8eb82-329">Ujistěte se, že že diagnosticmonitortracelistener je nakonfigurován v souboru web.config nebo app.config.  To je ve výchozím nastavení nakonfigurována v projekty cloudových služeb, ale někteří zákazníci komentář, který ho způsobí, že příkazy trasování, které nelze shromažďovat diagnostické.</span><span class="sxs-lookup"><span data-stu-id="8eb82-329">Make sure the DiagnosticMonitorTraceListener is configured in the web.config or app.config.  This is configured by default in cloud service projects, but some customers comment it out which will cause the trace statements to not be collected by diagnostics.</span></span> 
- <span data-ttu-id="8eb82-330">Pokud protokoly získávání nezapisují z metody OnStart nebo spustit Ujistěte se, že se DiagnosticMonitorTraceListener souboru app.config.  Ve výchozím nastavení je v souboru web.config, ale které se týkají pouze kód spuštěný v rámci w3wp.exe; Proto musíte ho v souboru app.config zaznamenat trasování spuštění v WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="8eb82-330">If logs are not getting written from the OnStart or Run method make sure the DiagnosticMonitorTraceListener is in the app.config.  By default it is in the web.config, but that only applies to code running within w3wp.exe; so you need it in app.config to capture traces running in WaIISHost.exe.</span></span>
- <span data-ttu-id="8eb82-331">Ujistěte se, že používáte Diagnostics.Trace.TraceXXX místo Diagnostics.Debug.WriteXXX.</span><span class="sxs-lookup"><span data-stu-id="8eb82-331">Make sure you are using Diagnostics.Trace.TraceXXX instead of Diagnostics.Debug.WriteXXX.</span></span>  <span data-ttu-id="8eb82-332">Příkazy ladění se odeberou ze sestavení pro vydání.</span><span class="sxs-lookup"><span data-stu-id="8eb82-332">The Debug statements will be removed from a Release build.</span></span>
- <span data-ttu-id="8eb82-333">Ujistěte se, zda že zkompilovaný kód ve skutečnosti má řádky Diagnostics.Trace (použijte Reflector ildasm nebo ILSpy ověření).</span><span class="sxs-lookup"><span data-stu-id="8eb82-333">Make sure the compiled code actually has the Diagnostics.Trace lines (use Reflector, ildasm or ILSpy to verify).</span></span>  <span data-ttu-id="8eb82-334">Příkazy Diagnostics.Trace jsou vyřazeny z kompilované binární, pokud nechcete použít symbol Podmíněná kompilace trasování.</span><span class="sxs-lookup"><span data-stu-id="8eb82-334">Diagnostics.Trace commands are removed from the compiled binary unless you use the TRACE conditional compilation symbol.</span></span>  <span data-ttu-id="8eb82-335">Pokud se používá pro sestavení projektu msbuild jde častých problémů narazíte na.</span><span class="sxs-lookup"><span data-stu-id="8eb82-335">If using msbuild to build the project then this is a common problem to run into.</span></span>

## <a name="known-issues-and-mitigations"></a><span data-ttu-id="8eb82-336">Známé problémy a jejich zmírnění</span><span class="sxs-lookup"><span data-stu-id="8eb82-336">Known Issues and Mitigations</span></span>
<span data-ttu-id="8eb82-337">Tady je seznam známých problémů s známé způsoby zmírnění rizik:</span><span class="sxs-lookup"><span data-stu-id="8eb82-337">Here is a list of known issues with known mitigations:</span></span>

<span data-ttu-id="8eb82-338">**1. rozhraní .NET 4.5 závislost:**</span><span class="sxs-lookup"><span data-stu-id="8eb82-338">**1. .NET 4.5 dependency:**</span></span>

<span data-ttu-id="8eb82-339">WAD má závislost na modul runtime na rozhraní .NET 4.5 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="8eb82-339">WAD has a runtime dependency on .NET 4.5 framework or above.</span></span> <span data-ttu-id="8eb82-340">Všechny počítače, které jsou zřízené pro cloudové služby a také všechny oficiální azure základní bitové kopie virtuálních počítačů v době psaní to mít rozhraní .NET 4.5 nebo výše nainstalovat.</span><span class="sxs-lookup"><span data-stu-id="8eb82-340">At the time of writing this, all machines provisioned for cloud services as well as all official azure Virtual Machine base images have .NET 4.5 or above installed.</span></span> <span data-ttu-id="8eb82-341">Stále je ale možné zobrazovat v situaci, kdy zkusíte spustit WAD na počítači, který nemá .NET 4.5 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="8eb82-341">It is still however possible to land in a situation where you try to run WAD on a machine which does not have .NET 4.5 or above.</span></span> <span data-ttu-id="8eb82-342">To se stane, když vytvoříte svůj počítač z původní bitové kopie nebo snímek; nebo přineste vlastní disk.</span><span class="sxs-lookup"><span data-stu-id="8eb82-342">This happens when you create your machine off of an old image or snapshot; or bring your own custom disk.</span></span>

<span data-ttu-id="8eb82-343">To obvykle manifesty jako ukončovací kód **255** při spuštění DiagnosticsPluginLauncher.exe.</span><span class="sxs-lookup"><span data-stu-id="8eb82-343">This generally manifests as an exit code **255** when running DiagnosticsPluginLauncher.exe.</span></span> <span data-ttu-id="8eb82-344">Selhání dochází z důvodu neošetřené výjimky:</span><span class="sxs-lookup"><span data-stu-id="8eb82-344">Failure happens due to the unhandled exception:</span></span> 
```
System.IO.FileLoadException: Could not load file or assembly 'System.Threading.Tasks, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies
```

<span data-ttu-id="8eb82-345">**Omezení rizik:** instalace rozhraní .NET 4.5 nebo vyšší na váš počítač.</span><span class="sxs-lookup"><span data-stu-id="8eb82-345">**Mitigation:** Install .NET 4.5 or higher on your machine.</span></span>

<span data-ttu-id="8eb82-346">**2. Data čítače výkonu, které jsou k dispozici v úložiště, ale nezobrazují v portálu**</span><span class="sxs-lookup"><span data-stu-id="8eb82-346">**2. Performance Counters data available in storage but not showing in portal**</span></span>

<span data-ttu-id="8eb82-347">Virtuální počítače portálu prostředí ukazuje některé čítače výkonu ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="8eb82-347">Virtual machines portal experience shows certain performance counters by default.</span></span> <span data-ttu-id="8eb82-348">Pokud je nevidíte a víte, že data je generováno, protože je k dispozici v úložišti.</span><span class="sxs-lookup"><span data-stu-id="8eb82-348">If you don't see them and you know the data is getting generated because it is available in storage.</span></span> <span data-ttu-id="8eb82-349">Kontrola:</span><span class="sxs-lookup"><span data-stu-id="8eb82-349">Check:</span></span>
- <span data-ttu-id="8eb82-350">Pokud data v úložišti mají názvy čítačů v angličtině.</span><span class="sxs-lookup"><span data-stu-id="8eb82-350">If the data in storage has counter names in English.</span></span> <span data-ttu-id="8eb82-351">Pokud nejsou názvy čítačů v angličtině, nebude možné ho rozpoznat portálu metriky grafu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-351">If the counter names are not in English, portal metric chart will not be able to recognize it.</span></span>
- <span data-ttu-id="8eb82-352">Pokud používáte zástupné znaky (\*) v názvech čítače výkonu, nebudou mít ke korelaci čítač nakonfigurované a shromáždění portálu.</span><span class="sxs-lookup"><span data-stu-id="8eb82-352">If you are using wild cards (\*) in your performance counter names, the portal will not be able to correlate the configured and collected counter.</span></span>

<span data-ttu-id="8eb82-353">**Zmírnění dopadů**: Změna počítače jazyka na angličtinu pro účty systému.</span><span class="sxs-lookup"><span data-stu-id="8eb82-353">**Mitigation**: Change the machine's language to English for system accounts.</span></span> <span data-ttu-id="8eb82-354">Ovládací panely -> oblast -> správy -> Nastavení kopií -> tak, aby vlastní jazyk neplatí pro účet system, zrušte zaškrtnutí políčka "Úvodní obrazovky a systém účty".</span><span class="sxs-lookup"><span data-stu-id="8eb82-354">Control Panel -> Region -> Administrative -> Copy Settings -> uncheck "Welcome screen and system accounts" so that the custom language is not applied to system account.</span></span> <span data-ttu-id="8eb82-355">Ujistěte se, že nepoužíváte zástupné znaky, pokud chcete portál tak, aby se prostředí primární spotřeba také.</span><span class="sxs-lookup"><span data-stu-id="8eb82-355">Also make sure you do not use wild cards if you want portal to be your primary consumption experience.</span></span>
