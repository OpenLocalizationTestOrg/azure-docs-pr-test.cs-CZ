---
title: "Přehled protokolu činnosti Azure | Microsoft Docs"
description: "Zjistěte, co je protokol činnosti Azure a jak ji použít k pochopení událostí v rámci vašeho předplatného Azure."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: c274782f-039d-4c28-9ddb-f89ce21052c7
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: johnkem
ms.openlocfilehash: 8ff9f73fc0732cd2227b7e0cc1091e04d69014eb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="monitor-subscription-activity-with-the-azure-activity-log"></a><span data-ttu-id="bab9e-103">Sledování aktivity předplatné s protokol činnosti Azure</span><span class="sxs-lookup"><span data-stu-id="bab9e-103">Monitor Subscription Activity with the Azure Activity Log</span></span>
<span data-ttu-id="bab9e-104">**Protokol činnosti Azure** je protokol odběru, který poskytuje přehled o události na úrovni předplatného, k nimž došlo v Azure.</span><span class="sxs-lookup"><span data-stu-id="bab9e-104">The **Azure Activity Log** is a subscription log that provides insight into subscription-level events that have occurred in Azure.</span></span> <span data-ttu-id="bab9e-105">To zahrnuje celou řadu dat z provozních dat Azure Resource Manager aktualizací na události stavu služby.</span><span class="sxs-lookup"><span data-stu-id="bab9e-105">This includes a range of data, from Azure Resource Manager operational data to updates on Service Health events.</span></span> <span data-ttu-id="bab9e-106">Protokol aktivit se dřív označovala jako "Protokoly auditu" nebo "Provozní protokoly," od události administrativní kategorie sestavy rovině řízení pro vaše předplatné.</span><span class="sxs-lookup"><span data-stu-id="bab9e-106">The Activity Log was previously known as “Audit Logs” or “Operational Logs,” since the Administrative category reports control-plane events for your subscriptions.</span></span> <span data-ttu-id="bab9e-107">Pomocí protokolu činnosti, můžete určit ', kdo a kdy se pro všechny zápisu operace (PUT, POST, DELETE) na prostředky v rámci vašeho předplatného.</span><span class="sxs-lookup"><span data-stu-id="bab9e-107">Using the Activity Log, you can determine the ‘what, who, and when’ for any write operations (PUT, POST, DELETE) taken on the resources in your subscription.</span></span> <span data-ttu-id="bab9e-108">Můžete také chápou stav operace a další relevantní vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="bab9e-108">You can also understand the status of the operation and other relevant properties.</span></span> <span data-ttu-id="bab9e-109">Protokol aktivit nezahrnuje operace čtení (GET) nebo operace pro prostředky, které používají Classic nebo model "RDFE".</span><span class="sxs-lookup"><span data-stu-id="bab9e-109">The Activity Log does not include read (GET) operations or operations for resources that use the Classic/"RDFE" model.</span></span>

![<span data-ttu-id="bab9e-110">Aktivita protokoly vs jiné typy protokolů</span><span class="sxs-lookup"><span data-stu-id="bab9e-110">Activity Logs vs other types of logs</span></span> ](./media/monitoring-overview-activity-logs/Activity_Log_vs_other_logs_v5.png)

<span data-ttu-id="bab9e-111">Obrázek 1: Protokoly aktivity vs jiné typy protokolů</span><span class="sxs-lookup"><span data-stu-id="bab9e-111">Figure 1: Activity Logs vs other types of logs</span></span>

<span data-ttu-id="bab9e-112">Protokol aktivity se liší od [diagnostické protokoly](monitoring-overview-of-diagnostic-logs.md).</span><span class="sxs-lookup"><span data-stu-id="bab9e-112">The Activity Log differs from [Diagnostic Logs](monitoring-overview-of-diagnostic-logs.md).</span></span> <span data-ttu-id="bab9e-113">Protokoly aktivity poskytují data týkající se operací na prostředku z vnějšku ("řízení rovinou").</span><span class="sxs-lookup"><span data-stu-id="bab9e-113">Activity Logs provide data about the operations on a resource from the outside (the "control plane").</span></span> <span data-ttu-id="bab9e-114">Diagnostické protokoly jsou vygenerované prostředek a poskytnout informace o operaci prostředku ("data rovinou").</span><span class="sxs-lookup"><span data-stu-id="bab9e-114">Diagnostics Logs are emitted by a resource and provide information about the operation of that resource (the "data plane").</span></span>

<span data-ttu-id="bab9e-115">Můžete načíst události z protokolu aktivit pomocí portálu Azure, rozhraní příkazového řádku, rutiny prostředí PowerShell a rozhraní REST API Azure monitorování.</span><span class="sxs-lookup"><span data-stu-id="bab9e-115">You can retrieve events from your Activity Log using the Azure portal, CLI, PowerShell cmdlets, and Azure Monitor REST API.</span></span>


> [!WARNING]
> <span data-ttu-id="bab9e-116">Protokol činnosti Azure je určen pro činnosti, které ve službě Správce prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="bab9e-116">The Azure Activity Log is primarily for activities that occur in Azure Resource Manager.</span></span> <span data-ttu-id="bab9e-117">Sledovat prostředky pomocí modelu Classic nebo RDFE.</span><span class="sxs-lookup"><span data-stu-id="bab9e-117">It does not track resources using the Classic/RDFE model.</span></span> <span data-ttu-id="bab9e-118">Některé typy prostředků Classic mají proxy poskytovatele prostředků v Azure Resource Manageru (například Microsoft.Network).</span><span class="sxs-lookup"><span data-stu-id="bab9e-118">Some Classic resource types have a proxy resource provider in Azure Resource Manager (for example, Microsoft.ClassicCompute).</span></span> <span data-ttu-id="bab9e-119">Při práci s typem prostředku Classic prostřednictvím Správce Azure Resource Manager pomocí těchto poskytovatelů prostředků proxy, operace se objeví v protokolu aktivit.</span><span class="sxs-lookup"><span data-stu-id="bab9e-119">If you interact with a Classic resource type through Azure Resource Manager using these proxy resource providers, the operations appear in the Activity Log.</span></span> <span data-ttu-id="bab9e-120">Pokud budete používat klasického typu prostředku v klasickém portálu nebo jinak mimo proxy Azure Resource Manager, vaše akce jenom zaznamenávají v protokolu operací.</span><span class="sxs-lookup"><span data-stu-id="bab9e-120">If you interact with a Classic resource type in the Classic portal or otherwise outside of the Azure Resource Manager proxies, your actions are only recorded in the Operation Log.</span></span> <span data-ttu-id="bab9e-121">V protokolu operaci je dostupné jenom na portálu Classic.</span><span class="sxs-lookup"><span data-stu-id="bab9e-121">The Operation Log is accessible only in the Classic portal.</span></span>
>
>

<span data-ttu-id="bab9e-122">Zobrazení v následujícím videu Představení protokolu aktivit.</span><span class="sxs-lookup"><span data-stu-id="bab9e-122">View the following video introducing the Activity Log.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Seth-Juarez/Logs-John-Kemnetz/player]
> 
>

## <a name="categories-in-the-activity-log"></a><span data-ttu-id="bab9e-123">Kategorie v protokolu aktivit</span><span class="sxs-lookup"><span data-stu-id="bab9e-123">Categories in the Activity Log</span></span>
<span data-ttu-id="bab9e-124">Protokol aktivit obsahuje několik kategorií data.</span><span class="sxs-lookup"><span data-stu-id="bab9e-124">The Activity Log contains several categories of data.</span></span> <span data-ttu-id="bab9e-125">Úplné podrobnosti o schémat z těchto kategorií [najdete v článku](monitoring-activity-log-schema.md).</span><span class="sxs-lookup"><span data-stu-id="bab9e-125">For full details on the schemata of these categories, [see this article](monitoring-activity-log-schema.md).</span></span> <span data-ttu-id="bab9e-126">Mezi ně patří:</span><span class="sxs-lookup"><span data-stu-id="bab9e-126">These include:</span></span>
* <span data-ttu-id="bab9e-127">**Správce** – Tato kategorie obsahuje záznam všech vytvořit, operace aktualizace, odstranění a akce provést pomocí Správce prostředků.</span><span class="sxs-lookup"><span data-stu-id="bab9e-127">**Administrative** - This category contains the record of all create, update, delete, and action operations performed through Resource Manager.</span></span> <span data-ttu-id="bab9e-128">Typy událostí, zobrazí se v této kategorii příklady "vytvořit virtuální počítač" a "odstranit skupinu zabezpečení sítě" každou akci provedenou uživatele nebo aplikace pomocí Resource Manager je modelovaná jako operace na konkrétní typ prostředku.</span><span class="sxs-lookup"><span data-stu-id="bab9e-128">Examples of the types of events you would see in this category include "create virtual machine" and "delete network security group" Every action taken by a user or application using Resource Manager is modeled as an operation on a particular resource type.</span></span> <span data-ttu-id="bab9e-129">Pokud je typ operaci zápisu, Delete nebo akce, záznamy start a úspěch nebo selhání této operace se zaznamenávají do administrativní kategorie.</span><span class="sxs-lookup"><span data-stu-id="bab9e-129">If the operation type is Write, Delete, or Action, the records of both the start and success or fail of that operation are recorded in the Administrative category.</span></span> <span data-ttu-id="bab9e-130">Administrativní kategorie také zahrnuje všechny změny na řízení přístupu na základě rolí v předplatném.</span><span class="sxs-lookup"><span data-stu-id="bab9e-130">The Administrative category also includes any changes to role-based access control in a subscription.</span></span>
* <span data-ttu-id="bab9e-131">**Stav služby** – Tato kategorie obsahuje záznam všechny služby stavu incidentů, kterým došlo v Azure.</span><span class="sxs-lookup"><span data-stu-id="bab9e-131">**Service Health** - This category contains the record of any service health incidents that have occurred in Azure.</span></span> <span data-ttu-id="bab9e-132">Je například typ události, které se zobrazí se v této kategorii "SQL Azure v oblasti Východ USA dochází k výpadku."</span><span class="sxs-lookup"><span data-stu-id="bab9e-132">An example of the type of event you would see in this category is "SQL Azure in East US is experiencing downtime."</span></span> <span data-ttu-id="bab9e-133">Události stavu služby existují ve pět variantách: je vyžadována akce, jíž obnovení, Incident, údržby, informace nebo zabezpečení a objeví jenom tehdy, pokud máte prostředku v odběru, který bude mít vliv události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-133">Service health events come in five varieties: Action Required, Assisted Recovery, Incident, Maintenance, Information, or Security, and only appear if you have a resource in the subscription that would be impacted by the event.</span></span>
* <span data-ttu-id="bab9e-134">**Výstrahy** – Tato kategorie obsahuje záznam všech aktivací Azure výstrah.</span><span class="sxs-lookup"><span data-stu-id="bab9e-134">**Alert** - This category contains the record of all activations of Azure alerts.</span></span> <span data-ttu-id="bab9e-135">Je například typ události, které se zobrazí se v této kategorii "% využití procesoru na Můjvp je už více než 80 za posledních 5 minut."</span><span class="sxs-lookup"><span data-stu-id="bab9e-135">An example of the type of event you would see in this category is "CPU % on myVM has been over 80 for the past 5 minutes."</span></span> <span data-ttu-id="bab9e-136">Výstrahy koncept mají různé systémy Azure – můžete definovat pravidla nějaká a přijímat oznámení v případě podmínky odpovídají daného pravidla.</span><span class="sxs-lookup"><span data-stu-id="bab9e-136">A variety of Azure systems have an alerting concept -- you can define a rule of some sort and receive a notification when conditions match that rule.</span></span> <span data-ttu-id="bab9e-137">Pokaždé, když podporovaných Azure typu výstrahy, aktivuje,' nebo ke splnění podmínek pro generování oznámení, záznam aktivace také vložena do této kategorie protokolu činnosti.</span><span class="sxs-lookup"><span data-stu-id="bab9e-137">Each time a supported Azure alert type 'activates,' or the conditions are met to generate a notification, a record of the activation is also pushed to this category of the Activity Log.</span></span>
* <span data-ttu-id="bab9e-138">**Škálování** – Tato kategorie obsahuje záznam všechny události související s operací škálování stroje podle nastavení automatického škálování, který jste definovali ve vašem předplatném.</span><span class="sxs-lookup"><span data-stu-id="bab9e-138">**Autoscale** - This category contains the record of any events related to the operation of the autoscale engine based on any autoscale settings you have defined in your subscription.</span></span> <span data-ttu-id="bab9e-139">Je například typ události, které se zobrazí se v této kategorii "Škálování rozšiřování škálování využívajících akce se nezdařila."</span><span class="sxs-lookup"><span data-stu-id="bab9e-139">An example of the type of event you would see in this category is "Autoscale scale up action failed."</span></span> <span data-ttu-id="bab9e-140">Použití automatického škálování, můžete automaticky škálovat nebo škálovat počet instancí v typu prostředku podporované na základě času, den nebo zatížení (metriky) dat, na které se používá nastavení automatického škálování.</span><span class="sxs-lookup"><span data-stu-id="bab9e-140">Using autoscale, you can automatically scale out or scale in the number of instances in a supported resource type based on time of day and/or load (metric) data using an autoscale setting.</span></span> <span data-ttu-id="bab9e-141">Pokud jsou splněny podmínky škálování nahoru nebo dolů, spuštění a úspěšné nebo neúspěšné události se zaznamenávají v této kategorii.</span><span class="sxs-lookup"><span data-stu-id="bab9e-141">When the conditions are met to scale up or down, the start and succeeded or failed events are recorded in this category.</span></span>
* <span data-ttu-id="bab9e-142">**Doporučení** – Tato kategorie obsahuje doporučení události z určité typy prostředků, jako jsou webové servery a servery SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bab9e-142">**Recommendation** - This category contains recommendation events from certain resource types, such as web sites and SQL servers.</span></span> <span data-ttu-id="bab9e-143">Tyto události nabízet doporučení, jak lépe využívat zdroje.</span><span class="sxs-lookup"><span data-stu-id="bab9e-143">These events offer recommendations for how to better utilize your resources.</span></span> <span data-ttu-id="bab9e-144">Pokud máte prostředky, které emitování doporučení pouze zobrazí události tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-144">You only receive events of this type if you have resources that emit recommendations.</span></span>
* <span data-ttu-id="bab9e-145">**Zásady zabezpečení a stav prostředků** -tyto kategorie neobsahují žádné události; jsou vyhrazené pro budoucí použití.</span><span class="sxs-lookup"><span data-stu-id="bab9e-145">**Policy, Security, and Resource Health** - These categories do not contain any events; they are reserved for future use.</span></span>

## <a name="event-schema-per-category"></a><span data-ttu-id="bab9e-146">Schématu události podle kategorie</span><span class="sxs-lookup"><span data-stu-id="bab9e-146">Event schema per category</span></span>
[<span data-ttu-id="bab9e-147">V tématu Tento článek vám pomůže porozumět schématu aktivity protokolu události podle kategorie.</span><span class="sxs-lookup"><span data-stu-id="bab9e-147">See this article to understand the Activity Log event schema per category.</span></span>](monitoring-activity-log-schema.md)

## <a name="what-you-can-do-with-the-activity-log"></a><span data-ttu-id="bab9e-148">Co můžete dělat s protokolu aktivit</span><span class="sxs-lookup"><span data-stu-id="bab9e-148">What you can do with the Activity Log</span></span>
<span data-ttu-id="bab9e-149">Tady jsou některé z akcí, které můžete provést pomocí protokolu aktivit:</span><span class="sxs-lookup"><span data-stu-id="bab9e-149">Here are some of the things you can do with the Activity Log:</span></span>

![Azure protokol aktivit](./media/monitoring-overview-activity-logs/Activity_Log_Overview_v3.png)


* <span data-ttu-id="bab9e-151">Dotazování a ji zobrazit v **portál Azure**.</span><span class="sxs-lookup"><span data-stu-id="bab9e-151">Query and view it in the **Azure portal**.</span></span>
* [<span data-ttu-id="bab9e-152">Vytvořte výstrahu na aktivity protokolu události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-152">Create an alert on an Activity Log event.</span></span>](monitoring-activity-log-alerts.md)
* <span data-ttu-id="bab9e-153">[Stream, aby **centra událostí** ](monitoring-stream-activity-logs-event-hubs.md) pro přijímání službu třetí strany nebo řešení vlastní analýzy, jako je například PowerBI.</span><span class="sxs-lookup"><span data-stu-id="bab9e-153">[Stream it to an **Event Hub**](monitoring-stream-activity-logs-event-hubs.md) for ingestion by a third-party service or custom analytics solution such as PowerBI.</span></span>
* <span data-ttu-id="bab9e-154">Analyzovat v Power BI pomocí [ **balíček obsahu Power BI**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span><span class="sxs-lookup"><span data-stu-id="bab9e-154">Analyze it in PowerBI using the [**PowerBI content pack**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span></span>
* <span data-ttu-id="bab9e-155">[Ho uložit pro **účet úložiště** pro archivaci nebo ruční kontroly](monitoring-archive-activity-log.md).</span><span class="sxs-lookup"><span data-stu-id="bab9e-155">[Save it to a **Storage Account** for archival or manual inspection](monitoring-archive-activity-log.md).</span></span> <span data-ttu-id="bab9e-156">Můžete zadat uchování (ve dnech) pomocí **profil protokolu**.</span><span class="sxs-lookup"><span data-stu-id="bab9e-156">You can specify the retention time (in days) using the **Log Profile**.</span></span>
* <span data-ttu-id="bab9e-157">Dotaz je pomocí rutiny prostředí PowerShell, rozhraní příkazového řádku nebo REST API.</span><span class="sxs-lookup"><span data-stu-id="bab9e-157">Query it via PowerShell Cmdlet, CLI, or REST API.</span></span>

## <a name="query-the-activity-log-in-the-azure-portal"></a><span data-ttu-id="bab9e-158">Dotaz protokol aktivit na portálu Azure</span><span class="sxs-lookup"><span data-stu-id="bab9e-158">Query the Activity Log in the Azure portal</span></span>
<span data-ttu-id="bab9e-159">V rámci portálu Azure můžete zobrazit aktivitu protokolu na několika místech:</span><span class="sxs-lookup"><span data-stu-id="bab9e-159">Within the Azure portal you can view your Activity Log in several places:</span></span>
* <span data-ttu-id="bab9e-160">**Okno Protokol činnosti**, kterým můžete přistupovat tak, že protokol aktivit v části "Další služby" v levém navigačním podokně.</span><span class="sxs-lookup"><span data-stu-id="bab9e-160">The **Activity Log blade**, which you can access by searching for the Activity Log under "More Services" in the left-hand navigation pane.</span></span>
* <span data-ttu-id="bab9e-161">**Monitorování okno**, která se zobrazí ve výchozím nastavení v levém navigačním podokně.</span><span class="sxs-lookup"><span data-stu-id="bab9e-161">The **Monitor blade**, which appears by default in the left-hand navigation pane.</span></span> <span data-ttu-id="bab9e-162">Protokol aktivit je jeden oddíl tohoto okna Azure monitorování.</span><span class="sxs-lookup"><span data-stu-id="bab9e-162">The Activity Log is one section of this Azure Monitor blade.</span></span>
* <span data-ttu-id="bab9e-163">Jakémukoli prostředku **okna prostředků**, například okno konfigurace pro virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="bab9e-163">Any resource's **resource blade**, for example, the configuration blade for a Virtual Machine.</span></span> <span data-ttu-id="bab9e-164">Protokol aktivit je být jedna z částí většina těchto oken prostředků a kliknete na něm automaticky vyfiltruje události, které s ohledem na konkrétní prostředku.</span><span class="sxs-lookup"><span data-stu-id="bab9e-164">The Activity Log is be one of the sections on most of these resource blades, and clicking on it automatically filters the events to those related to that specific resource.</span></span>

<span data-ttu-id="bab9e-165">Na portálu Azure můžete filtrovat aktivity protokolu podle těchto polí:</span><span class="sxs-lookup"><span data-stu-id="bab9e-165">In the Azure portal, you can filter your Activity Log by these fields:</span></span>
* <span data-ttu-id="bab9e-166">Časový interval – počáteční a koncový čas pro události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-166">Timespan - The start and end time for events.</span></span>
* <span data-ttu-id="bab9e-167">Kategorie – kategorie události, jak je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="bab9e-167">Category - The event category as described above.</span></span>
* <span data-ttu-id="bab9e-168">Předplatné – jeden nebo více názvů předplatného Azure.</span><span class="sxs-lookup"><span data-stu-id="bab9e-168">Subscription - One or more Azure subscription names.</span></span>
* <span data-ttu-id="bab9e-169">Skupiny prostředků – jeden nebo více prostředků skupiny v rámci těchto předplatných.</span><span class="sxs-lookup"><span data-stu-id="bab9e-169">Resource group - One or more resource groups within those subscriptions.</span></span>
* <span data-ttu-id="bab9e-170">Prostředek (název) – název konkrétní prostředku.</span><span class="sxs-lookup"><span data-stu-id="bab9e-170">Resource (name) - The name of a specific resource.</span></span>
* <span data-ttu-id="bab9e-171">Typ prostředku – typ prostředku, například Microsoft.Compute/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="bab9e-171">Resource type - The type of resource, for example, Microsoft.Compute/virtualmachines.</span></span>
* <span data-ttu-id="bab9e-172">Operace název – název Azure Resource Manager operace, například Microsoft.SQL/servers/Write.</span><span class="sxs-lookup"><span data-stu-id="bab9e-172">Operation name - The name of an Azure Resource Manager operation, for example, Microsoft.SQL/servers/Write.</span></span>
* <span data-ttu-id="bab9e-173">Závažnost – úroveň závažnosti události (Informativní upozornění, chyby, kritické).</span><span class="sxs-lookup"><span data-stu-id="bab9e-173">Severity - The severity level of the event (Informational, Warning, Error, Critical).</span></span>
* <span data-ttu-id="bab9e-174">Událost iniciovaná - 'volajícího, nebo uživatel, který provádí operaci.</span><span class="sxs-lookup"><span data-stu-id="bab9e-174">Event initiated by - The 'caller,' or user who performed the operation.</span></span>
* <span data-ttu-id="bab9e-175">Otevřete vyhledávání - Toto je již otevřete textového pole hledání, prohledáván všechna pole v všechny události pro tento řetězec.</span><span class="sxs-lookup"><span data-stu-id="bab9e-175">Open search - This is an open text search box that searches for that string across all fields in all events.</span></span>

<span data-ttu-id="bab9e-176">Jakmile definujete sadu filtrů, můžete ho uložit jako dotaz, který je trvalé napříč relacemi, pokud byste někdy potřebovali provést stejný dotaz s tyto filtry znovu použít v budoucnu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-176">Once you have defined a set of filters, you can save it as a query that is persisted across sessions if you ever need to perform the same query with those filters applied again in the future.</span></span> <span data-ttu-id="bab9e-177">Dotaz můžete taky připnout na řídicí panel Azure vždy dohlížet na konkrétní události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-177">You can also pin a query to your Azure dashboard to always keep an eye on specific events.</span></span>

<span data-ttu-id="bab9e-178">Kliknutím na tlačítko "Použijí" spustí dotaz a všechny odpovídající události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-178">Clicking "Apply" runs your query and show all matching events.</span></span> <span data-ttu-id="bab9e-179">Kliknutím na libovolnou událost v seznamu zobrazuje souhrn tuto událost, a také úplné nezpracovaném formátu JSON této události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-179">Clicking on any event in the list shows the summary of that event as well as the full raw JSON of that event.</span></span>

<span data-ttu-id="bab9e-180">Pro více síly, můžete kliknout na **hledání protokolů** ikonu, která zobrazuje data protokolu aktivit z [řešení Log Analytics aktivity protokolu analýzy](../log-analytics/log-analytics-activity.md).</span><span class="sxs-lookup"><span data-stu-id="bab9e-180">For even more power, you can click the **Log Search** icon, which displays your Activity Log data in the [Log Analytics Activity Log Analytics solution](../log-analytics/log-analytics-activity.md).</span></span> <span data-ttu-id="bab9e-181">Okno Protokol činnosti nabízí prostředí základní filtru nebo přejděte na protokoly, ale analýzy protokolů umožňuje otáčení, dotazovat a vizualizovat data výkonnější způsoby.</span><span class="sxs-lookup"><span data-stu-id="bab9e-181">The Activity Log blade offers a basic filter/browse experience on logs, but Log Analytics enables you to pivot, query, and visualize your data in more powerful ways.</span></span>

## <a name="export-the-activity-log-with-a-log-profile"></a><span data-ttu-id="bab9e-182">Export protokolu aktivit k profilu protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-182">Export the Activity Log with a Log Profile</span></span>
<span data-ttu-id="bab9e-183">A **profil protokolu** řídí, jak je export protokolu aktivit.</span><span class="sxs-lookup"><span data-stu-id="bab9e-183">A **Log Profile** controls how your Activity Log is exported.</span></span> <span data-ttu-id="bab9e-184">Použití profilu protokolu, můžete nakonfigurovat:</span><span class="sxs-lookup"><span data-stu-id="bab9e-184">Using a Log Profile, you can configure:</span></span>

* <span data-ttu-id="bab9e-185">Kde by měly být odeslány protokol aktivit (účet úložiště nebo Event Hubs)</span><span class="sxs-lookup"><span data-stu-id="bab9e-185">Where the Activity Log should be sent (Storage Account or Event Hubs)</span></span>
* <span data-ttu-id="bab9e-186">Kategorie, které události (akce zápisu, odstranit,) by měly být odeslány.</span><span class="sxs-lookup"><span data-stu-id="bab9e-186">Which event categories (Write, Delete, Action) should be sent.</span></span> <span data-ttu-id="bab9e-187">*Význam "kategorie" v profilech protokolu a aktivity protokolu událostí se liší. V profilu protokolu "Kategorie" představuje typ operace (akce zápisu, odstranit,). Vlastnost "kategorie" v aktivity protokolu události, představuje zdroj nebo typ události (například správy, ServiceHealth, upozornění a další).*</span><span class="sxs-lookup"><span data-stu-id="bab9e-187">*The meaning of "category" in Log Profiles and Activity Log events is different. In the Log Profile, "Category" represents the operation type (Write, Delete, Action). In an Activity Log event, the "category" property represents the source or type of event (for example, Administration, ServiceHealth, Alert, and more).*</span></span>
* <span data-ttu-id="bab9e-188">Které oblasti (umístění) mají být exportovány.</span><span class="sxs-lookup"><span data-stu-id="bab9e-188">Which regions (locations) should be exported.</span></span> <span data-ttu-id="bab9e-189">Nezapomeňte zahrnout "globální", protože mnoho událostí v protokolu aktivit jsou globální události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-189">Make sure to include "global," as many events in the Activity Log are global events.</span></span>
* <span data-ttu-id="bab9e-190">Jak dlouho se uchovávají v účtu úložiště protokol aktivit.</span><span class="sxs-lookup"><span data-stu-id="bab9e-190">How long the Activity Log should be retained in a Storage Account.</span></span>
    - <span data-ttu-id="bab9e-191">Uchování nulový počet dnů znamená, že jsou protokoly v nekonečné smyčce.</span><span class="sxs-lookup"><span data-stu-id="bab9e-191">A retention of zero days means logs are kept forever.</span></span> <span data-ttu-id="bab9e-192">Hodnota, jinak hodnota může být libovolný počet dnů od 1 do 2147483647.</span><span class="sxs-lookup"><span data-stu-id="bab9e-192">Otherwise, the value can be any number of days between 1 and 2147483647.</span></span>
    - <span data-ttu-id="bab9e-193">Pokud nejsou nastavené zásady uchovávání informací, ale ukládání protokolů v účtu úložiště je zakázaný (například pokud jenom jsou vybrané možnosti služby Event Hubs nebo OMS), zásady uchovávání informací nemají žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="bab9e-193">If retention policies are set but storing logs in a Storage Account is disabled (for example, if only Event Hubs or OMS options are selected), the retention policies have no effect.</span></span>
    - <span data-ttu-id="bab9e-194">Zásady uchovávání informací jsou použité denní, takže na konci za den (UTC), protokoly dnem, který je teď nad rámec uchovávání se zásada odstraní.</span><span class="sxs-lookup"><span data-stu-id="bab9e-194">Retention policies are applied per-day, so at the end of a day (UTC), logs from the day that is now beyond the retention policy are deleted.</span></span> <span data-ttu-id="bab9e-195">Například pokud jste měli zásady uchovávání informací jeden den, od začátku dnešní den protokoly z včerejšek před den by odstraněn.</span><span class="sxs-lookup"><span data-stu-id="bab9e-195">For example, if you had a retention policy of one day, at the beginning of the day today the logs from the day before yesterday would be deleted.</span></span>

<span data-ttu-id="bab9e-196">Můžete použít úložiště účet nebo události rozbočovače obor názvů, který není ve stejném předplatném jako jeden emitování protokoly.</span><span class="sxs-lookup"><span data-stu-id="bab9e-196">You can use a storage account or event hub namespace that is not in the same subscription as the one emitting logs.</span></span> <span data-ttu-id="bab9e-197">Uživatel, který konfiguruje nastavení, musí mít odpovídající RBAC přístup na oba odběry.</span><span class="sxs-lookup"><span data-stu-id="bab9e-197">The user who configures the setting must have the appropriate RBAC access to both subscriptions.</span></span>

<span data-ttu-id="bab9e-198">Tato nastavení lze nakonfigurovat pomocí možnosti "Export" v okně Protokol aktivit na portálu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-198">These settings can be configured via the “Export” option in the Activity Log blade in the portal.</span></span> <span data-ttu-id="bab9e-199">Je také možné nakonfigurovat prostřednictvím kódu programu [pomocí rozhraní REST API Azure monitorování](https://msdn.microsoft.com/library/azure/dn931927.aspx), rutiny prostředí PowerShell nebo rozhraní příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="bab9e-199">They can also be configured programmatically [using the Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell cmdlets, or CLI.</span></span> <span data-ttu-id="bab9e-200">Předplatné může mít pouze jeden profil protokolu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-200">A subscription can only have one log profile.</span></span>

### <a name="configure-log-profiles-using-the-azure-portal"></a><span data-ttu-id="bab9e-201">Konfigurace protokolu profilů pomocí portálu Azure</span><span class="sxs-lookup"><span data-stu-id="bab9e-201">Configure log profiles using the Azure portal</span></span>
<span data-ttu-id="bab9e-202">Můžete datového proudu protokolu aktivit do centra událostí nebo uložit je do účtu úložiště pomocí možnosti "Export" na webu Azure portal.</span><span class="sxs-lookup"><span data-stu-id="bab9e-202">You can stream the Activity Log to an Event Hub or store them in a Storage Account by using the “Export” option in the Azure portal.</span></span>

1. <span data-ttu-id="bab9e-203">Přejděte na **protokol aktivit** okno pomocí nabídky na levé straně na portálu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-203">Navigate to the **Activity Log** blade using the menu on the left side of the portal.</span></span>

    ![Přejděte na protokol aktivit v portálu](./media/monitoring-overview-activity-logs/activity-logs-portal-navigate.png)
2. <span data-ttu-id="bab9e-205">Klikněte **exportovat** tlačítka v horní části okna.</span><span class="sxs-lookup"><span data-stu-id="bab9e-205">Click the **Export** button at the top of the blade.</span></span>

    ![Tlačítko Exportovat portálu](./media/monitoring-overview-activity-logs/activity-logs-portal-export.png)
3. <span data-ttu-id="bab9e-207">V okně, který se zobrazí můžete vybrat:</span><span class="sxs-lookup"><span data-stu-id="bab9e-207">In the blade that appears, you can select:</span></span>  
  * <span data-ttu-id="bab9e-208">oblasti, pro které chcete exportovat události</span><span class="sxs-lookup"><span data-stu-id="bab9e-208">regions for which you would like to export events</span></span>
  * <span data-ttu-id="bab9e-209">Účet úložiště, do které chcete uložit události</span><span class="sxs-lookup"><span data-stu-id="bab9e-209">the Storage Account to which you would like to save events</span></span>
  * <span data-ttu-id="bab9e-210">počet dní, které chcete uchovávat tyto události v úložišti.</span><span class="sxs-lookup"><span data-stu-id="bab9e-210">the number of days you want to retain these events in storage.</span></span> <span data-ttu-id="bab9e-211">Nastavení 0 dnů uchovává protokoly navždy.</span><span class="sxs-lookup"><span data-stu-id="bab9e-211">A setting of 0 days retains the logs forever.</span></span>
  * <span data-ttu-id="bab9e-212">Namespace Service Bus, ve kterém chcete vytvořit pro streamování tyto události centra událostí.</span><span class="sxs-lookup"><span data-stu-id="bab9e-212">the Service Bus Namespace in which you would like an Event Hub to be created for streaming these events.</span></span>

     ![Export protokolu aktivit okno](./media/monitoring-overview-activity-logs/activity-logs-portal-export-blade.png)
4. <span data-ttu-id="bab9e-214">Klikněte na tlačítko **Uložit** uložit tato nastavení.</span><span class="sxs-lookup"><span data-stu-id="bab9e-214">Click **Save** to save these settings.</span></span> <span data-ttu-id="bab9e-215">Nastavení se použije okamžitě do vašeho předplatného.</span><span class="sxs-lookup"><span data-stu-id="bab9e-215">The settings are immediately be applied to your subscription.</span></span>

### <a name="configure-log-profiles-using-the-azure-powershell-cmdlets"></a><span data-ttu-id="bab9e-216">Konfigurace protokolu profilů pomocí rutin prostředí PowerShell Azure</span><span class="sxs-lookup"><span data-stu-id="bab9e-216">Configure log profiles using the Azure PowerShell Cmdlets</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="bab9e-217">Získat stávající profil protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-217">Get existing log profile</span></span>
```
Get-AzureRmLogProfile
```

#### <a name="add-a-log-profile"></a><span data-ttu-id="bab9e-218">Přidat profil protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-218">Add a log profile</span></span>
```
Add-AzureRmLogProfile -Name my_log_profile -StorageAccountId /subscriptions/s1/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey -Locations global,westus,eastus -RetentionInDays 90 -Categories Write,Delete,Action
```

| <span data-ttu-id="bab9e-219">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="bab9e-219">Property</span></span> | <span data-ttu-id="bab9e-220">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="bab9e-220">Required</span></span> | <span data-ttu-id="bab9e-221">Popis</span><span class="sxs-lookup"><span data-stu-id="bab9e-221">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bab9e-222">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="bab9e-222">Name</span></span> |<span data-ttu-id="bab9e-223">Ano</span><span class="sxs-lookup"><span data-stu-id="bab9e-223">Yes</span></span> |<span data-ttu-id="bab9e-224">Název vašeho profilu protokolu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-224">Name of your log profile.</span></span> |
| <span data-ttu-id="bab9e-225">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="bab9e-225">StorageAccountId</span></span> |<span data-ttu-id="bab9e-226">Ne</span><span class="sxs-lookup"><span data-stu-id="bab9e-226">No</span></span> |<span data-ttu-id="bab9e-227">ID prostředku účtu úložiště, který má být uložen v protokolu aktivit.</span><span class="sxs-lookup"><span data-stu-id="bab9e-227">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="bab9e-228">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="bab9e-228">serviceBusRuleId</span></span> |<span data-ttu-id="bab9e-229">Ne</span><span class="sxs-lookup"><span data-stu-id="bab9e-229">No</span></span> |<span data-ttu-id="bab9e-230">ID pravidla sběrnice služby pro chcete mít centra událostí, které jsou vytvořené v oboru názvů Service Bus.</span><span class="sxs-lookup"><span data-stu-id="bab9e-230">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="bab9e-231">Je řetězec s Tento formát: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="bab9e-231">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="bab9e-232">Umístění</span><span class="sxs-lookup"><span data-stu-id="bab9e-232">Locations</span></span> |<span data-ttu-id="bab9e-233">Ano</span><span class="sxs-lookup"><span data-stu-id="bab9e-233">Yes</span></span> |<span data-ttu-id="bab9e-234">Seznam oddělený čárkami oblastí, pro které chcete shromažďovat aktivity protokolu události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-234">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="bab9e-235">retentionInDays</span><span class="sxs-lookup"><span data-stu-id="bab9e-235">RetentionInDays</span></span> |<span data-ttu-id="bab9e-236">Ano</span><span class="sxs-lookup"><span data-stu-id="bab9e-236">Yes</span></span> |<span data-ttu-id="bab9e-237">Počet dní pro události, které by měl být zachován, od 1 do 2147483647.</span><span class="sxs-lookup"><span data-stu-id="bab9e-237">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="bab9e-238">Hodnota nula ukládá protokoly bez omezení (navždy).</span><span class="sxs-lookup"><span data-stu-id="bab9e-238">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="bab9e-239">Kategorie</span><span class="sxs-lookup"><span data-stu-id="bab9e-239">Categories</span></span> |<span data-ttu-id="bab9e-240">Ne</span><span class="sxs-lookup"><span data-stu-id="bab9e-240">No</span></span> |<span data-ttu-id="bab9e-241">Seznam oddělený čárkami kategorií událostí, které by měl být shromážděny.</span><span class="sxs-lookup"><span data-stu-id="bab9e-241">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="bab9e-242">Možné hodnoty jsou zápisu, odstranění a akce.</span><span class="sxs-lookup"><span data-stu-id="bab9e-242">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="bab9e-243">Odebrat profil protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-243">Remove a log profile</span></span>
```
Remove-AzureRmLogProfile -name my_log_profile
```

### <a name="configure-log-profiles-using-the-azure-cross-platform-cli"></a><span data-ttu-id="bab9e-244">Konfigurace protokolu profilů pomocí Azure CLI pro různé platformy</span><span class="sxs-lookup"><span data-stu-id="bab9e-244">Configure log profiles Using the Azure Cross-Platform CLI</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="bab9e-245">Získat stávající profil protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-245">Get existing log profile</span></span>
```
azure insights logprofile list
```
```
azure insights logprofile get --name my_log_profile
```
<span data-ttu-id="bab9e-246">`name` Vlastnost by měla být název pro váš profil protokolu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-246">The `name` property should be the name of your log profile.</span></span>

#### <a name="add-a-log-profile"></a><span data-ttu-id="bab9e-247">Přidat profil protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-247">Add a log profile</span></span>
```
azure insights logprofile add --name my_log_profile --storageId /subscriptions/s1/resourceGroups/insights-integration/providers/Microsoft.Storage/storageAccounts/my_storage --serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey --locations global,westus,eastus,northeurope --retentionInDays 90 –categories Write,Delete,Action
```

| <span data-ttu-id="bab9e-248">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="bab9e-248">Property</span></span> | <span data-ttu-id="bab9e-249">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="bab9e-249">Required</span></span> | <span data-ttu-id="bab9e-250">Popis</span><span class="sxs-lookup"><span data-stu-id="bab9e-250">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bab9e-251">jméno</span><span class="sxs-lookup"><span data-stu-id="bab9e-251">name</span></span> |<span data-ttu-id="bab9e-252">Ano</span><span class="sxs-lookup"><span data-stu-id="bab9e-252">Yes</span></span> |<span data-ttu-id="bab9e-253">Název vašeho profilu protokolu.</span><span class="sxs-lookup"><span data-stu-id="bab9e-253">Name of your log profile.</span></span> |
| <span data-ttu-id="bab9e-254">storageId</span><span class="sxs-lookup"><span data-stu-id="bab9e-254">storageId</span></span> |<span data-ttu-id="bab9e-255">Ne</span><span class="sxs-lookup"><span data-stu-id="bab9e-255">No</span></span> |<span data-ttu-id="bab9e-256">ID prostředku účtu úložiště, který má být uložen v protokolu aktivit.</span><span class="sxs-lookup"><span data-stu-id="bab9e-256">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="bab9e-257">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="bab9e-257">serviceBusRuleId</span></span> |<span data-ttu-id="bab9e-258">Ne</span><span class="sxs-lookup"><span data-stu-id="bab9e-258">No</span></span> |<span data-ttu-id="bab9e-259">ID pravidla sběrnice služby pro chcete mít centra událostí, které jsou vytvořené v oboru názvů Service Bus.</span><span class="sxs-lookup"><span data-stu-id="bab9e-259">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="bab9e-260">Je řetězec s Tento formát: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="bab9e-260">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="bab9e-261">Umístění</span><span class="sxs-lookup"><span data-stu-id="bab9e-261">locations</span></span> |<span data-ttu-id="bab9e-262">Ano</span><span class="sxs-lookup"><span data-stu-id="bab9e-262">Yes</span></span> |<span data-ttu-id="bab9e-263">Seznam oddělený čárkami oblastí, pro které chcete shromažďovat aktivity protokolu události.</span><span class="sxs-lookup"><span data-stu-id="bab9e-263">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="bab9e-264">retentionInDays</span><span class="sxs-lookup"><span data-stu-id="bab9e-264">retentionInDays</span></span> |<span data-ttu-id="bab9e-265">Ano</span><span class="sxs-lookup"><span data-stu-id="bab9e-265">Yes</span></span> |<span data-ttu-id="bab9e-266">Počet dní pro události, které by měl být zachován, od 1 do 2147483647.</span><span class="sxs-lookup"><span data-stu-id="bab9e-266">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="bab9e-267">Hodnota nula ukládá protokoly bez omezení (navždy).</span><span class="sxs-lookup"><span data-stu-id="bab9e-267">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="bab9e-268">Kategorie</span><span class="sxs-lookup"><span data-stu-id="bab9e-268">categories</span></span> |<span data-ttu-id="bab9e-269">Ne</span><span class="sxs-lookup"><span data-stu-id="bab9e-269">No</span></span> |<span data-ttu-id="bab9e-270">Seznam oddělený čárkami kategorií událostí, které by měl být shromážděny.</span><span class="sxs-lookup"><span data-stu-id="bab9e-270">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="bab9e-271">Možné hodnoty jsou zápisu, odstranění a akce.</span><span class="sxs-lookup"><span data-stu-id="bab9e-271">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="bab9e-272">Odebrat profil protokolu</span><span class="sxs-lookup"><span data-stu-id="bab9e-272">Remove a log profile</span></span>
```
azure insights logprofile delete --name my_log_profile
```

## <a name="next-steps"></a><span data-ttu-id="bab9e-273">Další kroky</span><span class="sxs-lookup"><span data-stu-id="bab9e-273">Next Steps</span></span>
* [<span data-ttu-id="bab9e-274">Další informace o protokolu činnosti (dříve protokoly auditu)</span><span class="sxs-lookup"><span data-stu-id="bab9e-274">Learn more about the Activity Log (formerly Audit Logs)</span></span>](../azure-resource-manager/resource-group-audit.md)
* [<span data-ttu-id="bab9e-275">Datový proud protokolu Azure činnosti do centra událostí</span><span class="sxs-lookup"><span data-stu-id="bab9e-275">Stream the Azure Activity Log to Event Hubs</span></span>](monitoring-stream-activity-logs-event-hubs.md)
