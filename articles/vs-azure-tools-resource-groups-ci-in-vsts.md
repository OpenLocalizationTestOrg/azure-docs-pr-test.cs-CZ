---
title: "Průběžnou integraci ve Visual Studio Team Services pomocí projekty skupiny prostředků Azure | Microsoft Docs"
description: "Popisuje, jak nastavit průběžnou integraci ve Visual Studio Team Services pomocí projekty nasazení skupiny prostředků Azure v sadě Visual Studio."
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: e7d98ca3fa281a136595c37ed9b7e71de0cf7bff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="4f736-103">Průběžnou integraci ve Visual Studio Team Services pomocí projekty nasazení skupiny prostředků Azure</span><span class="sxs-lookup"><span data-stu-id="4f736-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="4f736-104">Pokud chcete nasadit šablonu Azure, můžete provádět úlohy v různých fázích: sestavení, testovací, kopírovat do Azure (také nazývané "Přípravy") a nasadit šablonu.</span><span class="sxs-lookup"><span data-stu-id="4f736-104">To deploy an Azure template, you perform tasks in various stages: Build, Test, Copy to Azure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="4f736-105">Existují dva různé způsoby pro nasazení šablon pro Visual Studio Team Services (Visual Studio Team Services).</span><span class="sxs-lookup"><span data-stu-id="4f736-105">There are two different ways to deploy templates to Visual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="4f736-106">Obě metody zadejte stejné výsledky, takže vybrat tu, které nejlépe vyhovuje pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="4f736-106">Both methods provide the same results, so choose the one that best fits your workflow.</span></span>

1. <span data-ttu-id="4f736-107">Přidejte jeden krok do vaší definice sestavení, který spouští skript prostředí PowerShell, který je zahrnutý v projektu nasazení skupiny prostředků Azure (nasadit-AzureResourceGroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="4f736-107">Add a single step to your build definition that runs the PowerShell script that’s included in the Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="4f736-108">Skript zkopíruje artefaktů a poté nasadí šablony.</span><span class="sxs-lookup"><span data-stu-id="4f736-108">The script copies artifacts and then deploys the template.</span></span>
2. <span data-ttu-id="4f736-109">Přidáte že více Visual Studio Team Services kroky sestavení, každé z nich provedení úlohy fáze.</span><span class="sxs-lookup"><span data-stu-id="4f736-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="4f736-110">Tento článek ukazuje obě možnosti.</span><span class="sxs-lookup"><span data-stu-id="4f736-110">This article demonstrates both options.</span></span> <span data-ttu-id="4f736-111">První možnost nabízí výhodu v podobě pomocí stejného skriptu používané vývojáři v sadě Visual Studio a poskytnete konzistence v průběhu cyklu.</span><span class="sxs-lookup"><span data-stu-id="4f736-111">The first option has the advantage of using the same script used by developers in Visual Studio and providing consistency throughout the lifecycle.</span></span> <span data-ttu-id="4f736-112">Druhou možností je umístěna do předdefinovaných skriptu.</span><span class="sxs-lookup"><span data-stu-id="4f736-112">The second option offers a convenient alternative to the built-in script.</span></span> <span data-ttu-id="4f736-113">Obě postupech se předpokládá, že již máte nasazení projektu sady Visual Studio zaškrtnutí do Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="4f736-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-to-azure"></a><span data-ttu-id="4f736-114">Zkopírování artefaktů na Azure</span><span class="sxs-lookup"><span data-stu-id="4f736-114">Copy artifacts to Azure</span></span>
<span data-ttu-id="4f736-115">Bez ohledu na to scénář Pokud máte artefakty, které jsou potřebné pro nasazení šablony, je nutné udělit Azure Resource Manager přístup k nim.</span><span class="sxs-lookup"><span data-stu-id="4f736-115">Regardless of the scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access to them.</span></span> <span data-ttu-id="4f736-116">Tyto artefakty mohou zahrnovat například soubory:</span><span class="sxs-lookup"><span data-stu-id="4f736-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="4f736-117">Vnořené šablony</span><span class="sxs-lookup"><span data-stu-id="4f736-117">Nested templates</span></span>
* <span data-ttu-id="4f736-118">Konfiguračních skriptů a skripty, DSC</span><span class="sxs-lookup"><span data-stu-id="4f736-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="4f736-119">Binární soubory aplikace</span><span class="sxs-lookup"><span data-stu-id="4f736-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="4f736-120">Vnořené šablony a konfigurační skripty</span><span class="sxs-lookup"><span data-stu-id="4f736-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="4f736-121">Při použití šablon, které aplikace Visual Studio (nebo vytvořené s nástroji Visual Studio fragmenty), skript prostředí PowerShell nejen zpracuje artefakty, je také parameterizes identifikátor URI pro prostředky pro jiné nasazení.</span><span class="sxs-lookup"><span data-stu-id="4f736-121">When you use the templates provided by Visual Studio (or built with Visual Studio snippets), the PowerShell script not only stages the artifacts, it also parameterizes the URI for the resources for different deployments.</span></span> <span data-ttu-id="4f736-122">Skript pak zkopíruje artefakty do zabezpečeného kontejneru ve službě Azure, vytvoří SaS token pro tento kontejner a pak předá tyto informace k nasazení šablony.</span><span class="sxs-lookup"><span data-stu-id="4f736-122">The script then copies the artifacts to a secure container in Azure, creates a SaS token for that container, and then passes that information on to the template deployment.</span></span> <span data-ttu-id="4f736-123">V tématu [vytvořit šablonu nasazení](https://msdn.microsoft.com/library/azure/dn790564.aspx) Další informace o vnořené šablony.</span><span class="sxs-lookup"><span data-stu-id="4f736-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) to learn more about nested templates.</span></span>  <span data-ttu-id="4f736-124">Při použití úlohy v Visual Studio Team Services, musíte vybrat odpovídající úlohy pro šablonu nasazení a v případě potřeby předat hodnoty parametrů z pracovní kroku nasazení šablony.</span><span class="sxs-lookup"><span data-stu-id="4f736-124">When using tasks in VS Team Services, you must select the appropriate tasks for your template deployment and if necessary, pass parameter values from the staging step to the template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="4f736-125">Nastavit průběžné nasazování ve Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="4f736-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="4f736-126">Volat skript prostředí PowerShell v Visual Studio Team Services, musíte aktualizovat svou definici sestavení.</span><span class="sxs-lookup"><span data-stu-id="4f736-126">To call the PowerShell script in VS Team Services, you need to update your build definition.</span></span> <span data-ttu-id="4f736-127">Stručně řečeno jsou kroky:</span><span class="sxs-lookup"><span data-stu-id="4f736-127">In brief, the steps are:</span></span> 

1. <span data-ttu-id="4f736-128">Upravte definici sestavení.</span><span class="sxs-lookup"><span data-stu-id="4f736-128">Edit the build definition.</span></span>
2. <span data-ttu-id="4f736-129">Nastavení Azure autorizace ve Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="4f736-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="4f736-130">Přidejte krok sestavení Azure PowerShell, který odkazuje na skript prostředí PowerShell v projektu nasazení skupiny prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="4f736-130">Add an Azure PowerShell build step that references the PowerShell script in the Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="4f736-131">Nastavte hodnotu *- ArtifactsStagingDirectory* parametr pro práci s projektem součástí Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="4f736-131">Set the value of the *-ArtifactsStagingDirectory* parameter to work with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="4f736-132">Podrobný návod pro možnost 1</span><span class="sxs-lookup"><span data-stu-id="4f736-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="4f736-133">Následující postup vás provede kroky nutné ke konfiguraci průběžné nasazování v Visual Studio Team Services pomocí jednu úlohu, která se spouští skript prostředí PowerShell ve vašem projektu.</span><span class="sxs-lookup"><span data-stu-id="4f736-133">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using a single task that runs the PowerShell script in your project.</span></span> 

1. <span data-ttu-id="4f736-134">Upravit definici sestavení vaší Visual Studio Team Services a přidejte krok sestavení prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4f736-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="4f736-135">Zvolte definici sestavení v části **sestavení definice** kategorie a potom zvolte **upravit** odkaz.</span><span class="sxs-lookup"><span data-stu-id="4f736-135">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Upravit definici sestavení][0]
2. <span data-ttu-id="4f736-137">Přidejte nový **prostředí Azure PowerShell** sestavení krok k definici sestavení a potom zvolte **krok sestavení přidat...**</span><span class="sxs-lookup"><span data-stu-id="4f736-137">Add a new **Azure PowerShell** build step to the build definition and then choose the **Add build step…**</span></span> <span data-ttu-id="4f736-138">.</span><span class="sxs-lookup"><span data-stu-id="4f736-138">button.</span></span>
   
   ![Přidejte krok sestavení][1]
3. <span data-ttu-id="4f736-140">Vyberte **úloh nasadit** kategorie, vyberte **prostředí Azure PowerShell** úkolů a potom vyberte jeho **přidat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4f736-140">Choose the **Deploy task** category, select the **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Přidání úkolů][2]
4. <span data-ttu-id="4f736-142">Vyberte **prostředí Azure PowerShell** kroku sestavení a pak zadejte jeho hodnoty.</span><span class="sxs-lookup"><span data-stu-id="4f736-142">Choose the **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="4f736-143">Pokud je již přidána do Visual Studio Team Services koncový bod služby Azure, zvolte předplatné v **předplatné Azure** rozevíracího seznamu a pak skip k další části.</span><span class="sxs-lookup"><span data-stu-id="4f736-143">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box and then skip to the next section.</span></span> 
      
      <span data-ttu-id="4f736-144">Pokud nemáte koncový bod služby Azure ve Visual Studio Team Services, budete muset přidat.</span><span class="sxs-lookup"><span data-stu-id="4f736-144">If you don’t have an Azure service endpoint in VS Team Services, you need to add one.</span></span> <span data-ttu-id="4f736-145">Tato část vás provede procesem.</span><span class="sxs-lookup"><span data-stu-id="4f736-145">This subsection takes you through the process.</span></span> <span data-ttu-id="4f736-146">Pokud váš účet Azure používá účet Microsoft (například Hotmail), musíte provést následující kroky k získání objektu služby ověřování.</span><span class="sxs-lookup"><span data-stu-id="4f736-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take the following steps to get a Service Principal authentication.</span></span>
   2. <span data-ttu-id="4f736-147">Vyberte **spravovat** na odkaz vedle položky **předplatné Azure** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4f736-147">Choose the **Manage** link next to the **Azure Subscription** drop-down list box.</span></span>
      
      ![Spravovat předplatná Azure][3]
   3. <span data-ttu-id="4f736-149">Zvolte **Azure** v **nový koncový bod služby** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4f736-149">Choose **Azure** in the **New Service Endpoint** drop-down list box.</span></span>
      
      ![Nový koncový bod služby][4]
   4. <span data-ttu-id="4f736-151">V **přidat předplatné Azure** dialogové okno, vyberte **instanční objekt** možnost.</span><span class="sxs-lookup"><span data-stu-id="4f736-151">In the **Add Azure Subscription** dialog box, select the **Service Principal** option.</span></span>
      
      ![Hlavní možnosti služby][5]
   5. <span data-ttu-id="4f736-153">Přidat vaše údaje předplatného Azure **přidat předplatné Azure** dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="4f736-153">Add your Azure subscription information to the **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="4f736-154">Je třeba zadat následující položky:</span><span class="sxs-lookup"><span data-stu-id="4f736-154">You need to provide the following items:</span></span>
      
      * <span data-ttu-id="4f736-155">Id předplatného</span><span class="sxs-lookup"><span data-stu-id="4f736-155">Subscription Id</span></span>
      * <span data-ttu-id="4f736-156">Název odběru</span><span class="sxs-lookup"><span data-stu-id="4f736-156">Subscription Name</span></span>
      * <span data-ttu-id="4f736-157">Id objektu zabezpečení</span><span class="sxs-lookup"><span data-stu-id="4f736-157">Service Principal Id</span></span>
      * <span data-ttu-id="4f736-158">Klíč objektu služby</span><span class="sxs-lookup"><span data-stu-id="4f736-158">Service Principal Key</span></span>
      * <span data-ttu-id="4f736-159">Id klienta</span><span class="sxs-lookup"><span data-stu-id="4f736-159">Tenant Id</span></span>
   6. <span data-ttu-id="4f736-160">Přidat název vaší volby **předplatné** pole název.</span><span class="sxs-lookup"><span data-stu-id="4f736-160">Add a name of your choice to the **Subscription** name box.</span></span> <span data-ttu-id="4f736-161">Tato hodnota se zobrazí později v **předplatné Azure** rozevíracího seznamu ve Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="4f736-161">This value appears later in the **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="4f736-162">Pokud si nejste jisti svoje ID předplatného Azure, můžete jeden z následujících příkazů ho Pokud chcete zjistit.</span><span class="sxs-lookup"><span data-stu-id="4f736-162">If you don’t know your Azure subscription ID, you can use one of the following commands to retrieve it.</span></span>
      
      <span data-ttu-id="4f736-163">Pro skripty prostředí PowerShell použijte:</span><span class="sxs-lookup"><span data-stu-id="4f736-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="4f736-164">Pokud používáte Azure CLI, použijte:</span><span class="sxs-lookup"><span data-stu-id="4f736-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="4f736-165">Získání ID objektu služby, klíč objektu služby a ID klienta, použijte postup v [vytvoření aplikace Active Directory a objektu zabezpečení pomocí portálu](resource-group-create-service-principal-portal.md) nebo [ověřování hlavní název služby pomocí Azure Resource Manageru](resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="4f736-165">To get a Service Principal ID, Service Principal Key, and Tenant ID, follow the procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="4f736-166">Přidejte hodnoty pro ID objektu služby, klíč objektu služby a ID klienta **přidat předplatné Azure** dialogové okno pole a zvolte **OK** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4f736-166">Add the Service Principal ID, Service Principal Key, and Tenant ID values to the **Add Azure Subscription** dialog box and then choose the **OK** button.</span></span>
      
      <span data-ttu-id="4f736-167">Nyní máte platný hlavní název služby se použije ke spuštění skriptu prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4f736-167">You now have a valid Service Principal to use to run the Azure PowerShell script.</span></span>
5. <span data-ttu-id="4f736-168">Upravit definici sestavení a zvolte **prostředí Azure PowerShell** kroku sestavení.</span><span class="sxs-lookup"><span data-stu-id="4f736-168">Edit the build definition and choose the **Azure PowerShell** build step.</span></span> <span data-ttu-id="4f736-169">Vyberte předplatné v **předplatné Azure** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4f736-169">Select the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="4f736-170">(Pokud se nezobrazí předplatného, zvolte **aktualizovat** tlačítko Další **spravovat** odkaz.)</span><span class="sxs-lookup"><span data-stu-id="4f736-170">(If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.)</span></span> 
   
   ![Konfigurace prostředí Azure PowerShell úlohu sestavení][8]
6. <span data-ttu-id="4f736-172">Zadejte cestu ke skriptu prostředí PowerShell AzureResourceGroup.ps1 nasadit.</span><span class="sxs-lookup"><span data-stu-id="4f736-172">Provide a path to the Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="4f736-173">To pokud chcete udělat, zvolte tlačítko se třemi tečkami (...) vedle položky **cestu ke skriptu** pole, přejděte do skriptu prostředí PowerShell AzureResourceGroup.ps1 nasadit **skripty** složku projekt, vyberte ji a potom vyberte **OK** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4f736-173">To do this, choose the ellipsis (…) button next to the **Script Path** box, navigate to the Deploy-AzureResourceGroup.ps1 PowerShell script in the **Scripts** folder of your project, select it, and then choose the **OK** button.</span></span>    
   
   ![Vyberte cestu ke skriptu][9]
7. <span data-ttu-id="4f736-175">Po výběru skript aktualizovat cestu skript tak, aby je spuštěn z Build.StagingDirectory (stejný adresář, *ArtifactsLocation* je nastaven na).</span><span class="sxs-lookup"><span data-stu-id="4f736-175">After you select the script, update the path to the script so that it’s run from the Build.StagingDirectory (the same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="4f736-176">To provedete tak, že přidáte "$(Build.StagingDirectory)/"na začátku cesta ke skriptu.</span><span class="sxs-lookup"><span data-stu-id="4f736-176">You can do this by adding “$(Build.StagingDirectory)/” to the beginning of the script path.</span></span>
   
    ![Upravit cestu ke skriptu][10]
8. <span data-ttu-id="4f736-178">V **argumenty skriptu** zadejte následující parametry (v jednom řádku).</span><span class="sxs-lookup"><span data-stu-id="4f736-178">In the **Script Arguments** box, enter the following parameters (in a single line).</span></span> <span data-ttu-id="4f736-179">Pokud spustíte skript v sadě Visual Studio, můžete zobrazit používání parametrů v VS **výstup** okno.</span><span class="sxs-lookup"><span data-stu-id="4f736-179">When you run the script in Visual Studio, you can see how VS uses the parameters in the **Output** window.</span></span> <span data-ttu-id="4f736-180">Můžete to použít jako výchozí bod pro nastavení hodnoty parametru v kroku vaše sestavení.</span><span class="sxs-lookup"><span data-stu-id="4f736-180">You can use this as a starting point for setting the parameter values in your build step.</span></span>
   
   | <span data-ttu-id="4f736-181">Parametr</span><span class="sxs-lookup"><span data-stu-id="4f736-181">Parameter</span></span> | <span data-ttu-id="4f736-182">Popis</span><span class="sxs-lookup"><span data-stu-id="4f736-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="4f736-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="4f736-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="4f736-184">Hodnota geografického umístění, kde je umístěna, například skupina prostředků **eastus** nebo **, východní USA,**.</span><span class="sxs-lookup"><span data-stu-id="4f736-184">The geo-location value where the resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="4f736-185">(Pokud je mezera v názvu, přidejte jednoduchých uvozovkách.) V tématu [oblasti Azure](https://azure.microsoft.com/en-us/regions/) Další informace.</span><span class="sxs-lookup"><span data-stu-id="4f736-185">(Add single quotes if there's a space in the name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="4f736-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="4f736-186">-ResourceGroupName</span></span> |<span data-ttu-id="4f736-187">Název skupiny prostředků použít pro toto nasazení.</span><span class="sxs-lookup"><span data-stu-id="4f736-187">The name of the resource group used for this deployment.</span></span> |
   | <span data-ttu-id="4f736-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="4f736-188">-UploadArtifacts</span></span> |<span data-ttu-id="4f736-189">Tento parametr, pokud jsou k dispozici, určuje, že artefaktů, které musí být nahrán do Azure z místního systému.</span><span class="sxs-lookup"><span data-stu-id="4f736-189">This parameter, when present, specifies that artifacts that need to be uploaded to Azure from the local system.</span></span> <span data-ttu-id="4f736-190">Stačí nastavit tento přepínač. Pokud vaše šablony nasazení vyžaduje další artefakty, pomocí kterých chcete dvoufázové instalace pomocí skriptu prostředí PowerShell (například konfigurační skripty nebo vnořené šablony).</span><span class="sxs-lookup"><span data-stu-id="4f736-190">You only need to set this switch if your template deployment requires extra artifacts that you want to stage using the PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="4f736-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="4f736-191">-StorageAccountName</span></span> |<span data-ttu-id="4f736-192">Název účtu úložiště používat k artefaktům fáze pro toto nasazení.</span><span class="sxs-lookup"><span data-stu-id="4f736-192">The name of the storage account used to stage artifacts for this deployment.</span></span> <span data-ttu-id="4f736-193">Tento parametr se používá pouze pokud jsou pracovní artefaktů pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="4f736-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="4f736-194">Pokud je tento parametr zadaný, se vytvoří nový účet úložiště, pokud skript není vytvořili během předchozí nasazení.</span><span class="sxs-lookup"><span data-stu-id="4f736-194">If this parameter is supplied, a new storage account is created if the script has not created one during a previous deployment.</span></span> <span data-ttu-id="4f736-195">Pokud je zadán parametr, již musí existovat účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="4f736-195">If the parameter is specified, the storage account must already exist.</span></span> |
   | <span data-ttu-id="4f736-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="4f736-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="4f736-197">Název skupiny prostředků, které jsou přidružené k účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="4f736-197">The name of the resource group associated with the storage account.</span></span> <span data-ttu-id="4f736-198">Tento parametr je povinný, jenom v případě, že je zadat hodnotu pro parametr StorageAccountName.</span><span class="sxs-lookup"><span data-stu-id="4f736-198">This parameter is required only if you provide a value for the StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="4f736-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="4f736-199">-TemplateFile</span></span> |<span data-ttu-id="4f736-200">Cesta k souboru šablony v projektu nasazení skupiny prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="4f736-200">The path to the template file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="4f736-201">Ke zvýšení flexibility, použijte cestu pro tento parametr, který je relativní k umístění skriptu prostředí PowerShell místo absolutní cesta.</span><span class="sxs-lookup"><span data-stu-id="4f736-201">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="4f736-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="4f736-202">-TemplateParametersFile</span></span> |<span data-ttu-id="4f736-203">Cesta k souboru parametrů v projektu nasazení skupiny prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="4f736-203">The path to the parameters file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="4f736-204">Ke zvýšení flexibility, použijte cestu pro tento parametr, který je relativní k umístění skriptu prostředí PowerShell místo absolutní cesta.</span><span class="sxs-lookup"><span data-stu-id="4f736-204">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="4f736-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="4f736-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="4f736-206">Tento parametr umožňuje PowerShell skriptu vědět složce, ze kterých by se měl zkopírovat binární soubory projektu.</span><span class="sxs-lookup"><span data-stu-id="4f736-206">This parameter lets the PowerShell script know the folder from where the project’s binary files should be copied.</span></span> <span data-ttu-id="4f736-207">Tato hodnota přepíše výchozí hodnota používaná pro skript prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4f736-207">This value overrides the default value used by the PowerShell script.</span></span> <span data-ttu-id="4f736-208">Pro Visual Studio Team Services používat, nastavte hodnotu na: - ArtifactStagingDirectory $(Build.StagingDirectory)</span><span class="sxs-lookup"><span data-stu-id="4f736-208">For VS Team Services use, set the value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="4f736-209">Tady je příklad skriptu argumenty (řádku přerušený čitelnější):</span><span class="sxs-lookup"><span data-stu-id="4f736-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="4f736-210">Jakmile budete hotovi, **argumenty skriptu** pole by měl vypadat podobně jako v následujícím seznamu:</span><span class="sxs-lookup"><span data-stu-id="4f736-210">When you’re finished, the **Script Arguments** box should resemble the following list:</span></span>
   
   ![Argumenty skriptu][11]
9. <span data-ttu-id="4f736-212">Po přidání všechny požadované položky k sestavení kroku prostředí Azure PowerShell, vyberte **fronty** sestavení tlačítko a tím projekt sestavit.</span><span class="sxs-lookup"><span data-stu-id="4f736-212">After you’ve added all the required items to the Azure PowerShell build step, choose the **Queue** build button to build the project.</span></span> <span data-ttu-id="4f736-213">**Sestavení** obrazovka ukazuje výstup ze skriptu prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4f736-213">The **Build** screen shows the output from the PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="4f736-214">Podrobný návod pro možnost 2</span><span class="sxs-lookup"><span data-stu-id="4f736-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="4f736-215">Následující postup vás provede kroky nutné ke konfiguraci průběžné nasazování v Visual Studio Team Services pomocí předdefinované úlohy.</span><span class="sxs-lookup"><span data-stu-id="4f736-215">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using the built-in tasks.</span></span>

1. <span data-ttu-id="4f736-216">Upravte svou definici sestavení Visual Studio Team Services. Chcete-li přidat že kroky dva nové sestavení.</span><span class="sxs-lookup"><span data-stu-id="4f736-216">Edit your VS Team Services build definition to add two new build steps.</span></span> <span data-ttu-id="4f736-217">Zvolte definici sestavení v části **sestavení definice** kategorie a potom zvolte **upravit** odkaz.</span><span class="sxs-lookup"><span data-stu-id="4f736-217">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Upravit definice sestavení][12]
2. <span data-ttu-id="4f736-219">Přidat nové sestavení kroky pro definici sestavení s využitím **krok sestavení přidat...**</span><span class="sxs-lookup"><span data-stu-id="4f736-219">Add the new build steps to the build definition using the **Add build step…**</span></span> <span data-ttu-id="4f736-220">.</span><span class="sxs-lookup"><span data-stu-id="4f736-220">button.</span></span>
   
   ![Přidejte krok sestavení][13]
3. <span data-ttu-id="4f736-222">Vyberte **nasadit** kategorii úloh, vyberte **Azure File Copy** úkolů a potom vyberte jeho **přidat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4f736-222">Choose the **Deploy** task category, select the **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Přidat úloha Azure File Copy][14]
4. <span data-ttu-id="4f736-224">Vyberte **nasazení skupiny prostředků Azure** úkolů, a potom vyberte jeho **přidat** tlačítko a potom **Zavřít** **úloha katalogu**.</span><span class="sxs-lookup"><span data-stu-id="4f736-224">Choose the **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** the **Task Catalog**.</span></span>
   
   ![Přidat úloha nasazení skupiny prostředků Azure][15]
5. <span data-ttu-id="4f736-226">Vyberte **Azure File Copy** úloh a zadejte jeho hodnoty.</span><span class="sxs-lookup"><span data-stu-id="4f736-226">Choose the **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="4f736-227">Pokud je již přidána do Visual Studio Team Services koncový bod služby Azure, zvolte předplatné v **předplatné Azure** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4f736-227">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="4f736-228">Pokud nemáte předplatné, přečtěte si téma [možnost 1](#detailed-walkthrough-for-option-1) pokyny k nastavení jeden ve Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="4f736-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="4f736-229">Zdroj – zadejte **$(Build.StagingDirectory)**</span><span class="sxs-lookup"><span data-stu-id="4f736-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="4f736-230">Azure typu připojení – vyberte **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="4f736-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="4f736-231">Předplatné Azure RM - vyberte předplatné, pro kterou chcete použít v účtu úložiště **předplatné Azure** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4f736-231">Azure RM Subscription - select the subscription for the storage account you want to use in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="4f736-232">Pokud předplatné se nezobrazí, vyberte **aktualizovat** tlačítko Další **spravovat** odkaz.</span><span class="sxs-lookup"><span data-stu-id="4f736-232">If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.</span></span>
   * <span data-ttu-id="4f736-233">Cílový typ - vyberte **objektů Blob v Azure**</span><span class="sxs-lookup"><span data-stu-id="4f736-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="4f736-234">RM účet úložiště – vyberte účet úložiště byste chtěli použít pro přípravu artefaktů</span><span class="sxs-lookup"><span data-stu-id="4f736-234">RM Storage Account - select the storage account you would like to use for staging artifacts</span></span>
   * <span data-ttu-id="4f736-235">Název kontejneru – zadejte název kontejneru, který chcete použít pro pracovní; může být jakýkoli název kontejneru platný, ale používat jeden vyhrazený pro tuto definici sestavení</span><span class="sxs-lookup"><span data-stu-id="4f736-235">Container Name - enter the name of the container you would like to use for staging; it can be any valid container name, but use one dedicated to this build definition</span></span>
   
   <span data-ttu-id="4f736-236">Pro výstup hodnoty:</span><span class="sxs-lookup"><span data-stu-id="4f736-236">For the output values:</span></span>
   
   * <span data-ttu-id="4f736-237">Zadejte kontejner úložiště URI - **artifactsLocation**</span><span class="sxs-lookup"><span data-stu-id="4f736-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="4f736-238">Token SAS pro kontejner úložiště – zadejte **artifactsLocationSasToken**</span><span class="sxs-lookup"><span data-stu-id="4f736-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Konfigurace úloze Azure File Copy][16]
6. <span data-ttu-id="4f736-240">Vyberte **nasazení skupiny prostředků Azure** kroku sestavení a pak zadejte jeho hodnoty.</span><span class="sxs-lookup"><span data-stu-id="4f736-240">Choose the **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="4f736-241">Azure typu připojení – vyberte **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="4f736-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="4f736-242">Předplatné Azure RM - vyberte odběr služby pro nasazení v **předplatné Azure** rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4f736-242">Azure RM Subscription - select the subscription for deployment in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="4f736-243">Obvykle to bude stejné předplatné použité v předchozím kroku</span><span class="sxs-lookup"><span data-stu-id="4f736-243">This will usually be the same subscription used in the previous step</span></span>
   * <span data-ttu-id="4f736-244">Akce – vyberte **vytvořit nebo aktualizovat skupinu prostředků**</span><span class="sxs-lookup"><span data-stu-id="4f736-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="4f736-245">Skupiny prostředků – vyberte skupinu prostředků nebo zadejte název nové skupiny prostředků pro nasazení</span><span class="sxs-lookup"><span data-stu-id="4f736-245">Resource Group - select a resource group or enter the name of a new resource group for the deployment</span></span>
   * <span data-ttu-id="4f736-246">Umístění – vyberte umístění pro skupinu prostředků</span><span class="sxs-lookup"><span data-stu-id="4f736-246">Location - select the location for the resource group</span></span>
   * <span data-ttu-id="4f736-247">Šablona – zadejte cestu a název šablony, kterou chcete nasadit předřazení **$(Build.StagingDirectory)**, například: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="4f736-247">Template - enter the path and name of the template to be deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="4f736-248">Parametry šablony – zadejte cestu a název parametry, které chcete použít, předřazení **$(Build.StagingDirectory)**, například: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="4f736-248">Template Parameters - enter the path and name of the parameters to be used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="4f736-249">Přepsání parametry šablony – zadejte nebo zkopírujte a vložte následující kód:</span><span class="sxs-lookup"><span data-stu-id="4f736-249">Override Template Parameters - enter or copy and paste the following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Konfigurace úlohy nasazení skupiny prostředků Azure][17]
7. <span data-ttu-id="4f736-251">Po přidání všechny požadované položky, Uložit definici sestavení a zvolte **fronty nového sestavení** v horní části.</span><span class="sxs-lookup"><span data-stu-id="4f736-251">After you’ve added all the required items, save the build definition and choose **Queue new build** at the top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4f736-252">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4f736-252">Next steps</span></span>
<span data-ttu-id="4f736-253">Čtení [přehled Azure Resource Manageru](azure-resource-manager/resource-group-overview.md) Další informace o Azure Resource Manageru a skupin prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="4f736-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) to learn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png
