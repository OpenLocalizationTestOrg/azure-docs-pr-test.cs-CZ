---
title: "Azure AD Connect: Koncepty návrhu | Microsoft Docs"
description: "Toto téma podrobnosti určité oblasti návrhu implementace"
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f23443d438c95a784f655fb9a5f20dfcf37be189
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="b3cca-103">Azure AD Connect: Koncepty návrhu</span><span class="sxs-lookup"><span data-stu-id="b3cca-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="b3cca-104">Účelem tohoto tématu je k popisu oblastí, které musí považovat při návrhu implementace služby Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b3cca-104">The purpose of this topic is to describe areas that must be thought through during the implementation design of Azure AD Connect.</span></span> <span data-ttu-id="b3cca-105">Toto téma se podrobné informace o určité oblasti a tyto koncepty stručně jsou popsány v i další témata.</span><span class="sxs-lookup"><span data-stu-id="b3cca-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="b3cca-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="b3cca-106">sourceAnchor</span></span>
<span data-ttu-id="b3cca-107">Atribut sourceAnchor je definován jako *atribut neměnné průběhu životnosti objektu*.</span><span class="sxs-lookup"><span data-stu-id="b3cca-107">The sourceAnchor attribute is defined as *an attribute immutable during the lifetime of an object*.</span></span> <span data-ttu-id="b3cca-108">Jednoznačně identifikuje objektů, že je stejný objekt místní a ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-108">It uniquely identifies an object as being the same object on-premises and in Azure AD.</span></span> <span data-ttu-id="b3cca-109">Atribut taky nazývá **immutableId** a tyto názvy se použijí zaměňovat.</span><span class="sxs-lookup"><span data-stu-id="b3cca-109">The attribute is also called **immutableId** and the two names are used interchangeable.</span></span>

<span data-ttu-id="b3cca-110">Neměnné, word, který je "nelze změnit", je důležité, abyste v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="b3cca-110">The word immutable, that is "cannot be changed", is important to this topic.</span></span> <span data-ttu-id="b3cca-111">Vzhledem k tomu, že tento atribut hodnotu nelze změnit, jakmile byla nastavena, je důležité vybrat návrh, který podporuje váš scénář.</span><span class="sxs-lookup"><span data-stu-id="b3cca-111">Since this attribute’s value cannot be changed after it has been set, it is important to pick a design that supports your scenario.</span></span>

<span data-ttu-id="b3cca-112">Atribut se používá pro následující scénáře:</span><span class="sxs-lookup"><span data-stu-id="b3cca-112">The attribute is used for the following scenarios:</span></span>

* <span data-ttu-id="b3cca-113">Pokud nový synchronizační server modul je vytvořen, nebo znovu sestavit po na scénář zotavení po havárii, tento atribut propojí existující objekty ve službě Azure AD s objekty na místě.</span><span class="sxs-lookup"><span data-stu-id="b3cca-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="b3cca-114">Pokud přejdete z čistě cloudové identity k modelu synchronizované identity, tento atribut umožňuje objekty, které se "pevné shodu" existující objekty ve službě Azure AD s místními objekty.</span><span class="sxs-lookup"><span data-stu-id="b3cca-114">If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to "hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="b3cca-115">Pokud používáte federace a potom tento atribut společně s **userPrincipalName** slouží k jednoznačné identifikaci uživatele v deklaraci identity.</span><span class="sxs-lookup"><span data-stu-id="b3cca-115">If you use federation, then this attribute together with the **userPrincipalName** is used in the claim to uniquely identify a user.</span></span>

<span data-ttu-id="b3cca-116">Toto téma sourceAnchor pouze zmíněn, protože se týká uživatelům.</span><span class="sxs-lookup"><span data-stu-id="b3cca-116">This topic only talks about sourceAnchor as it relates to users.</span></span> <span data-ttu-id="b3cca-117">Stejná pravidla platí pro všechny typy objektů, ale je určena pouze pro uživatele, že tento problém obvykle není vážný.</span><span class="sxs-lookup"><span data-stu-id="b3cca-117">The same rules apply to all object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="b3cca-118">Výběr atribut sourceAnchor funkční</span><span class="sxs-lookup"><span data-stu-id="b3cca-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="b3cca-119">Hodnota atributu musí postupujte podle následujících pravidel:</span><span class="sxs-lookup"><span data-stu-id="b3cca-119">The attribute value must follow the following rules:</span></span>

* <span data-ttu-id="b3cca-120">Být menší než 60 znaků.</span><span class="sxs-lookup"><span data-stu-id="b3cca-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="b3cca-121">Kódování a počítají jako znaky 3 znaky nebude a – z, A-Z nebo 0-9</span><span class="sxs-lookup"><span data-stu-id="b3cca-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="b3cca-122">Neobsahuje zvláštní znak: &#92;!</span><span class="sxs-lookup"><span data-stu-id="b3cca-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="b3cca-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="b3cca-123"># $ % & * + / = ?</span></span> <span data-ttu-id="b3cca-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="b3cca-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="b3cca-125">Musí být globálně jedinečný</span><span class="sxs-lookup"><span data-stu-id="b3cca-125">Must be globally unique</span></span>
* <span data-ttu-id="b3cca-126">Musí být řetězec, celé číslo nebo binárního souboru</span><span class="sxs-lookup"><span data-stu-id="b3cca-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="b3cca-127">By neměl být založené na jméno uživatele, tyto změny</span><span class="sxs-lookup"><span data-stu-id="b3cca-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="b3cca-128">By neměl být malá a velká písmena a vyhnout se hodnoty, které se mohou lišit podle případu</span><span class="sxs-lookup"><span data-stu-id="b3cca-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="b3cca-129">By se měla přiřadit při vytvoření objektu</span><span class="sxs-lookup"><span data-stu-id="b3cca-129">Should be assigned when the object is created</span></span>

<span data-ttu-id="b3cca-130">Pokud vybraný sourceAnchor není typu String, potom Azure AD Connect Base64Encode hodnota atributu zajistit žádné speciální znaky zobrazí.</span><span class="sxs-lookup"><span data-stu-id="b3cca-130">If the selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode the attribute value to ensure no special characters appear.</span></span> <span data-ttu-id="b3cca-131">Pokud používáte jiné federační server než služba AD FS, ujistěte se, se váš server můžete také Base64Encode atribut.</span><span class="sxs-lookup"><span data-stu-id="b3cca-131">If you use another federation server than ADFS, make sure your server can also Base64Encode the attribute.</span></span>

<span data-ttu-id="b3cca-132">Atribut sourceAnchor je malá a velká písmena.</span><span class="sxs-lookup"><span data-stu-id="b3cca-132">The sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="b3cca-133">Hodnota "JohnDoe" není stejný jako "johndoe".</span><span class="sxs-lookup"><span data-stu-id="b3cca-133">A value of “JohnDoe” is not the same as “johndoe”.</span></span> <span data-ttu-id="b3cca-134">Ale by neměl mít dva různé objekty s pouze rozdíly v případě.</span><span class="sxs-lookup"><span data-stu-id="b3cca-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="b3cca-135">Pokud máte jednu doménovou strukturu je na místě, pak byste měli použít atribut **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="b3cca-135">If you have a single forest on-premises, then the attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="b3cca-136">Toto je také atribut používaný kdy použít Expresní nastavení ve službě Azure AD Connect a také atribut používaný nástrojem DirSync.</span><span class="sxs-lookup"><span data-stu-id="b3cca-136">This is also the attribute used when you use express settings in Azure AD Connect and also the attribute used by DirSync.</span></span>

<span data-ttu-id="b3cca-137">Pokud máte více doménových struktur a nepřesouvejte uživatelů mezi doménové struktury a domény, pak **objectGUID** je dobrý atribut používat i v tomto případě.</span><span class="sxs-lookup"><span data-stu-id="b3cca-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute to use even in this case.</span></span>

<span data-ttu-id="b3cca-138">Pokud přesunete uživatele mezi doménové struktury a domény, pak musíte vyhledat atribut, který se nemění, nebo lze přesunout s uživateli během přesunu.</span><span class="sxs-lookup"><span data-stu-id="b3cca-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with the users during the move.</span></span> <span data-ttu-id="b3cca-139">Doporučený postup je zavedení syntetické atribut.</span><span class="sxs-lookup"><span data-stu-id="b3cca-139">A recommended approach is to introduce a synthetic attribute.</span></span> <span data-ttu-id="b3cca-140">Atribut, který může obsahovat něco který vypadá jako identifikátor GUID bude vhodné.</span><span class="sxs-lookup"><span data-stu-id="b3cca-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="b3cca-141">Při vytváření objektu je nový identifikátor GUID vytvořit a razítkem na uživatele.</span><span class="sxs-lookup"><span data-stu-id="b3cca-141">During object creation, a new GUID is created and stamped on the user.</span></span> <span data-ttu-id="b3cca-142">Vlastní synchronizační pravidlo lze vytvořit na serveru synchronizačního modulu pro vytvoření této hodnoty na základě **objectGUID** a aktualizovat v přidá vybraný atribut.</span><span class="sxs-lookup"><span data-stu-id="b3cca-142">A custom sync rule can be created in the sync engine server to create this value based on the **objectGUID** and update the selected attribute in ADDS.</span></span> <span data-ttu-id="b3cca-143">Při přesunutí objektu, ujistěte se, že jste také kopírovat obsah této hodnoty.</span><span class="sxs-lookup"><span data-stu-id="b3cca-143">When you move the object, make sure to also copy the content of this value.</span></span>

<span data-ttu-id="b3cca-144">Jiné řešení je vybrat stávající atribut, které znáte se nemění.</span><span class="sxs-lookup"><span data-stu-id="b3cca-144">Another solution is to pick an existing attribute you know does not change.</span></span> <span data-ttu-id="b3cca-145">Běžně používané atributy patří **employeeID**.</span><span class="sxs-lookup"><span data-stu-id="b3cca-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="b3cca-146">Pokud uvažujete o atribut, který obsahuje písmena, ujistěte se, že žádné prvního případ (velká a malá písmena) můžete změnit hodnotu atributu se.</span><span class="sxs-lookup"><span data-stu-id="b3cca-146">If you consider an attribute that contains letters, make sure there is no chance the case (upper case vs. lower case) can change for the attribute's value.</span></span> <span data-ttu-id="b3cca-147">Chybný atributy, které by se neměla používat zahrnují tyto atributy se jménem uživatele.</span><span class="sxs-lookup"><span data-stu-id="b3cca-147">Bad attributes that should not be used include those attributes with the name of the user.</span></span> <span data-ttu-id="b3cca-148">V manželství nebo rozvodu název by měl změnit, což není povoleno pro tento atribut.</span><span class="sxs-lookup"><span data-stu-id="b3cca-148">In a marriage or divorce, the name is expected to change, which is not allowed for this attribute.</span></span> <span data-ttu-id="b3cca-149">Toto je také jeden důvod proč atributy, jako **userPrincipalName**, **e-mailu**, a **targetAddress** nejsou i možné vybrat v Průvodci instalací Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b3cca-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible to select in the Azure AD Connect installation wizard.</span></span> <span data-ttu-id="b3cca-150">Tyto atributy obsahovat také "@" znak, který není povolen v sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-150">Those attributes also contain the "@" character, which is not allowed in the sourceAnchor.</span></span>

### <a name="changing-the-sourceanchor-attribute"></a><span data-ttu-id="b3cca-151">Změna atribut sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="b3cca-151">Changing the sourceAnchor attribute</span></span>
<span data-ttu-id="b3cca-152">Hodnota atributu sourceAnchor nelze změnit po objekt byl vytvořen ve službě Azure AD a identity je synchronizován.</span><span class="sxs-lookup"><span data-stu-id="b3cca-152">The sourceAnchor attribute value cannot be changed after the object has been created in Azure AD and the identity is synchronized.</span></span>

<span data-ttu-id="b3cca-153">Z tohoto důvodu se vztahují následující omezení na Azure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="b3cca-153">For this reason, the following restrictions apply to Azure AD Connect:</span></span>

* <span data-ttu-id="b3cca-154">Atribut sourceAnchor lze nastavit pouze během počáteční instalace.</span><span class="sxs-lookup"><span data-stu-id="b3cca-154">The sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="b3cca-155">Pokud Průvodce instalací, tato možnost je jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-155">If you rerun the installation wizard, this option is read-only.</span></span> <span data-ttu-id="b3cca-156">Pokud potřebujete změnit toto nastavení, je nutné odinstalovat a znovu nainstalovat.</span><span class="sxs-lookup"><span data-stu-id="b3cca-156">If you need to change this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="b3cca-157">Pokud nainstalujete jiný server Azure AD Connect, musíte vybrat stejný jako v předcházejícím atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-157">If you install another Azure AD Connect server, then you must select the same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="b3cca-158">Pokud jste dříve pomocí nástroje DirSync a přesunout do Azure AD Connect, pak musíte použít **objectGUID** vzhledem k tomu, který je atribut používaný nástrojem DirSync.</span><span class="sxs-lookup"><span data-stu-id="b3cca-158">If you have earlier been using DirSync and move to Azure AD Connect, then you must use **objectGUID** since that is the attribute used by DirSync.</span></span>
* <span data-ttu-id="b3cca-159">Pokud je po změně hodnoty pro sourceAnchor objekt byly exportovány do služby Azure AD, pak Azure AD Connect sync vyvolá chybu a nepovoluje další změny na zpět v zdrojový adresář nastavení se mění objekt předtím, než byl opraven problém a sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-159">If the value for sourceAnchor is changed after the object has been exported to Azure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before the issue has been fixed and the sourceAnchor is changed back in the source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="b3cca-160">Použití msDS-ConsistencyGuid jako sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="b3cca-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="b3cca-161">Ve výchozím nastavení, Azure AD Connect (verze 1.1.486.0 a starší) používá objectGUID jako atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as the sourceAnchor attribute.</span></span> <span data-ttu-id="b3cca-162">Identifikátoru GUID se generuje systémem.</span><span class="sxs-lookup"><span data-stu-id="b3cca-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="b3cca-163">Nelze zadat jeho hodnotu, při vytváření místní objekty služby AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="b3cca-164">Jak je popsáno v části [sourceAnchor](#sourceanchor), existují scénáře, kde je třeba zadat hodnotu sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need to specify the sourceAnchor value.</span></span> <span data-ttu-id="b3cca-165">Pokud pro vás platí scénáře, musíte použít atribut konfigurovat AD (například msDS-ConsistencyGuid) jako atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-165">If the scenarios are applicable to you, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as the sourceAnchor attribute.</span></span>

<span data-ttu-id="b3cca-166">Azure AD Connect (verze 1.1.524.0 a po) teď usnadňuje použití msDS-ConsistencyGuid jako atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates the use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="b3cca-167">Při použití této funkce, Azure AD Connect automaticky nakonfiguruje pravidla synchronizace pro:</span><span class="sxs-lookup"><span data-stu-id="b3cca-167">When using this feature, Azure AD Connect automatically configures the synchronization rules to:</span></span>

1. <span data-ttu-id="b3cca-168">Použijte msDS-ConsistencyGuid jako atribut sourceAnchor pro uživatelské objekty.</span><span class="sxs-lookup"><span data-stu-id="b3cca-168">Use msDS-ConsistencyGuid as the sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="b3cca-169">ObjectGUID se používá pro jiné typy objektů.</span><span class="sxs-lookup"><span data-stu-id="b3cca-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="b3cca-170">Pro všechny zadané místní uživatele AD objekt, jehož atribut msDS-ConsistencyGuid není vyplněná, Azure AD Connect zápisy, jeho hodnota objectGUID zpět do atribut msDS-ConsistencyGuid v místní službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b3cca-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="b3cca-171">Po naplnění atribut msDS-ConsistencyGuid Azure AD Connect pak exportuje objektu do služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-171">After the msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports the object to Azure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="b3cca-172">Jednou místní AD objektu je importovat do Azure AD Connect (která je, importována do prostoru konektoru AD a promítnout do úložiště Metaverse), jeho sourceAnchor hodnotu nelze změnit, již.</span><span class="sxs-lookup"><span data-stu-id="b3cca-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into the AD Connector Space and projected into the Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="b3cca-173">Zadejte hodnotu sourceAnchor pro danou místní AD objektu, konfigurovat jeho atribut msDS-ConsistencyGuid před jeho importu do Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b3cca-173">To specify the sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="b3cca-174">Potřebná oprávnění</span><span class="sxs-lookup"><span data-stu-id="b3cca-174">Permission required</span></span>
<span data-ttu-id="b3cca-175">Pro tuto funkci používat musí účet služby AD DS používá k synchronizaci s místní služby Active Directory udělit oprávnění k zápisu do atribut msDS-ConsistencyGuid v místní službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b3cca-175">For this feature to work, the AD DS account used to synchronize with on-premises Active Directory must be granted write permission to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature---new-installation"></a><span data-ttu-id="b3cca-176">Postup povolení funkce ConsistencyGuid - novou instalaci</span><span class="sxs-lookup"><span data-stu-id="b3cca-176">How to enable the ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="b3cca-177">Při nové instalaci můžete povolit použití ConsistencyGuid jako sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-177">You can enable the use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="b3cca-178">Tato část obsahuje Express a vlastní instalace v podrobnostech.</span><span class="sxs-lookup"><span data-stu-id="b3cca-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="b3cca-179">Pouze novější verze služby Azure AD Connect (1.1.524.0 a po) podporuje použití ConsistencyGuid jako sourceAnchor při nové instalaci.</span><span class="sxs-lookup"><span data-stu-id="b3cca-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports the use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature"></a><span data-ttu-id="b3cca-180">Postup povolení funkce ConsistencyGuid</span><span class="sxs-lookup"><span data-stu-id="b3cca-180">How to enable the ConsistencyGuid feature</span></span>
<span data-ttu-id="b3cca-181">V současné době můžete tuto funkci povolit pouze během pouze nové instalace Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b3cca-181">Currently, the feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="b3cca-182">Expresní instalace</span><span class="sxs-lookup"><span data-stu-id="b3cca-182">Express Installation</span></span>
<span data-ttu-id="b3cca-183">Při instalaci Azure AD Connect s režimem Express, Průvodce službou Azure AD Connect automaticky určuje atribut AD nejvhodnější používat jako atribut sourceAnchor pomocí následujícího postupu:</span><span class="sxs-lookup"><span data-stu-id="b3cca-183">When installing Azure AD Connect with Express mode, the Azure AD Connect wizard automatically determines the most appropriate AD attribute to use as the sourceAnchor attribute using the following logic:</span></span>

* <span data-ttu-id="b3cca-184">Průvodce Azure AD Connect nejprve dotazuje klientovi Azure AD načíst atribut AD použít jako atribut sourceAnchor v předchozí instalaci Azure AD Connect (pokud existuje).</span><span class="sxs-lookup"><span data-stu-id="b3cca-184">First, the Azure AD Connect wizard queries your Azure AD tenant to retrieve the AD attribute used as the sourceAnchor attribute in the previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="b3cca-185">Pokud tyto informace jsou k dispozici, Azure AD Connect používá stejný atribut AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-185">If this information is available, Azure AD Connect uses the same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="b3cca-186">Pouze novější verze služby Azure AD Connect (1.1.524.0 a po) jsou uloženy informace o atribut sourceAnchor v klientovi služby Azure AD použít během instalace.</span><span class="sxs-lookup"><span data-stu-id="b3cca-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about the sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="b3cca-187">Starší verze služby Azure AD Connect nepodporují.</span><span class="sxs-lookup"><span data-stu-id="b3cca-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="b3cca-188">Pokud není k dispozici informace o atribut sourceAnchor používaný, Průvodce zkontroluje stav atribut msDS-ConsistencyGuid ve vaší místní službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b3cca-188">If information about the sourceAnchor attribute used isn't available, the wizard checks the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="b3cca-189">Pokud atribut není nakonfigurovaný na všech objektech v adresáři, použije průvodce msDS-ConsistencyGuid jako atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-189">If the attribute isn't configured on any object in the directory, the wizard uses the msDS-ConsistencyGuid as the sourceAnchor attribute.</span></span> <span data-ttu-id="b3cca-190">Pokud atribut je nakonfigurovaný na jeden nebo více objektů v adresáři, průvodce se ukončí atribut se používá jiné aplikace a není vhodný jako atribut sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="b3cca-190">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="b3cca-191">V takovém případě průvodce spadne zpět na používání objectGUID jako atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-191">In which case, the wizard falls back to using objectGUID as the sourceAnchor attribute.</span></span>

* <span data-ttu-id="b3cca-192">Jakmile atribut sourceAnchor je určeno, Průvodce ukládá informace v klientovi služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-192">Once the sourceAnchor attribute is decided, the wizard stores the information in your Azure AD tenant.</span></span> <span data-ttu-id="b3cca-193">Informace se použije budoucí instalace služby Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b3cca-193">The information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="b3cca-194">Po dokončení expresní instalace Průvodce vás upozorní, které atribut vydané jako atribut zdrojové ukotvení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-194">Once Express installation completes, the wizard informs you which attribute has been picked as the Source Anchor attribute.</span></span>

![Průvodce informuje AD atribut vydat pro sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="b3cca-196">Vlastní instalace</span><span class="sxs-lookup"><span data-stu-id="b3cca-196">Custom installation</span></span>
<span data-ttu-id="b3cca-197">Při instalaci Azure AD Connect s vlastním režimu, poskytuje průvodce službou Azure AD Connect při konfiguraci atribut sourceAnchor dvě možnosti:</span><span class="sxs-lookup"><span data-stu-id="b3cca-197">When installing Azure AD Connect with Custom mode, the Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Vlastní instalace – sourceAnchor konfigurace](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="b3cca-199">Nastavení</span><span class="sxs-lookup"><span data-stu-id="b3cca-199">Setting</span></span> | <span data-ttu-id="b3cca-200">Popis</span><span class="sxs-lookup"><span data-stu-id="b3cca-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b3cca-201">Nechat správu zdrojového ukotvení na Azure</span><span class="sxs-lookup"><span data-stu-id="b3cca-201">Let Azure manage the source anchor for me</span></span> | <span data-ttu-id="b3cca-202">Tuto možnost vyberte, pokud chcete, aby Azure AD vybral atribut za vás.</span><span class="sxs-lookup"><span data-stu-id="b3cca-202">Select this option if you want Azure AD to pick the attribute for you.</span></span> <span data-ttu-id="b3cca-203">Pokud vyberete tuto možnost, Průvodce Azure AD Connect se vztahují stejné [logiku výběr atribut sourceAnchor použít během instalace Express](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="b3cca-203">If you select this option, Azure AD Connect wizard applies the same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="b3cca-204">Podobně jako u Expresní instalace, Průvodce vás upozorní, které atribut bylo vydáno jako atribut zdrojové ukotvení po dokončení instalace vlastní.</span><span class="sxs-lookup"><span data-stu-id="b3cca-204">Similar to Express installation, the wizard informs you which attribute has been picked as the Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="b3cca-205">Konkrétní atribut</span><span class="sxs-lookup"><span data-stu-id="b3cca-205">A specific attribute</span></span> | <span data-ttu-id="b3cca-206">Tuto možnost vyberte, pokud chcete jako atribut sourceAnchor zadat existující atribut AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-206">Select this option if you wish to specify an existing AD attribute as the sourceAnchor attribute.</span></span> |

### <a name="how-to-enable-the-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="b3cca-207">Postup povolení funkce ConsistencyGuid - stávajícího nasazení</span><span class="sxs-lookup"><span data-stu-id="b3cca-207">How to enable the ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="b3cca-208">Pokud máte existující nasazení Azure AD Connect, který používá jako zdrojové ukotvení atribut objectGUID, můžete je přepnout pomocí ConsistencyGuid místo.</span><span class="sxs-lookup"><span data-stu-id="b3cca-208">If you have an existing Azure AD Connect deployment which is using objectGUID as the Source Anchor attribute, you can switch it to using ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="b3cca-209">Pouze novější verze služby Azure AD Connect (1.1.552.0 a po) podporuje změna na ConsistencyGuid jako zdrojové ukotvení atribut ObjectGuid.</span><span class="sxs-lookup"><span data-stu-id="b3cca-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid to ConsistencyGuid as the Source Anchor attribute.</span></span>

<span data-ttu-id="b3cca-210">Přepnutí z objectGUID do ConsistencyGuid jako atribut zdrojové ukotvení:</span><span class="sxs-lookup"><span data-stu-id="b3cca-210">To switch from objectGUID to ConsistencyGuid as the Source Anchor attribute:</span></span>

1. <span data-ttu-id="b3cca-211">Spusťte Průvodce službou Azure AD Connect a klikněte na **konfigurace** přejít na obrazovce úlohy.</span><span class="sxs-lookup"><span data-stu-id="b3cca-211">Start the Azure AD Connect wizard and click **Configure** to go to the Tasks screen.</span></span>

2. <span data-ttu-id="b3cca-212">Vyberte **konfigurace zdrojové ukotvení** úloh možnost a klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="b3cca-212">Select the **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Povolit ConsistencyGuid pro existující nasazení – krok 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="b3cca-214">Zadejte své přihlašovací údaje správce Azure AD a klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="b3cca-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="b3cca-215">Průvodce Azure AD Connect analyzuje stav atribut msDS-ConsistencyGuid ve vaší místní službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b3cca-215">Azure AD Connect wizard analyzes the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="b3cca-216">Pokud atribut není nakonfigurovaný na všech objektech v adresáři, Azure AD Connect dojde k závěru, že žádná jiná aplikace právě používá atribut a je možné použít jako atribut zdrojové ukotvení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-216">If the attribute isn't configured on any object in the directory, Azure AD Connect concludes that no other application is currently using the attribute and is safe to use it as the Source Anchor attribute.</span></span> <span data-ttu-id="b3cca-217">Klikněte na tlačítko **Další** pokračujte.</span><span class="sxs-lookup"><span data-stu-id="b3cca-217">Click **Next** to continue.</span></span>

   ![Povolit ConsistencyGuid pro existující nasazení – krok 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="b3cca-219">V **připraveni konfigurovat** obrazovky, klikněte na tlačítko **konfigurace** aby změnu konfigurace.</span><span class="sxs-lookup"><span data-stu-id="b3cca-219">In the **Ready to Configure** screen, click **Configure** to make the configuration change.</span></span>

   ![Povolit ConsistencyGuid pro existující nasazení – krok 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="b3cca-221">Po dokončení konfigurace Průvodce označuje, že tento msDS-ConsistencyGuid je nyní používána jako atribut zdrojové ukotvení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-221">Once the configuration completes, the wizard indicates that msDS-ConsistencyGuid is now being used as the Source Anchor attribute.</span></span>

   ![Povolit ConsistencyGuid pro existující nasazení – krok 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="b3cca-223">Během analýzy (krok 4) Pokud je atribut nastaven na jeden nebo více objektů v adresáři, průvodce se ukončí atribut se používá jiná aplikace a vrátí chybu, jak je znázorněno v následujícím diagramu.</span><span class="sxs-lookup"><span data-stu-id="b3cca-223">During the analysis (step 4), if the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by another application and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="b3cca-224">Pokud jste si jisti, že atribut není používán existující aplikace, budete muset obraťte se na podporu pro informace o tom, jak potlačit chyby.</span><span class="sxs-lookup"><span data-stu-id="b3cca-224">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Povolit ConsistencyGuid pro existující nasazení – chyba](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="b3cca-226">Dopad na služby AD FS nebo konfigurace federování třetích stran</span><span class="sxs-lookup"><span data-stu-id="b3cca-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="b3cca-227">Pokud používáte Azure AD Connect ke správě místního nasazení služby AD FS, Azure AD Connect automaticky aktualizuje pravidel deklarací identity, které můžete použít stejný atribut AD jako sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b3cca-227">If you are using Azure AD Connect to manage on-premises AD FS deployment, the Azure AD Connect automatically updates the claim rules to use the same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="b3cca-228">Tím se zajistí, že deklarace identity ImmutableID generované služby AD FS je konzistentní s hodnotami sourceAnchor exportovány do služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-228">This ensures that the ImmutableID claim generated by ADFS is consistent with the sourceAnchor values exported to Azure AD.</span></span>

<span data-ttu-id="b3cca-229">Pokud spravujete služby AD FS mimo Azure AD Connect nebo třetích stran federační servery používají pro ověřování, je nutné ručně aktualizovat pravidla deklarací pro ImmutableID deklarace identity, aby byla konzistentní s hodnotami sourceAnchor exportované do Azure AD, jak je popsáno v části článku [pravidla deklarací identity upravit AD FS](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="b3cca-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update the claim rules for ImmutableID claim to be consistent with the sourceAnchor values exported to Azure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="b3cca-230">Po dokončení instalace, Průvodce vrátí následující upozornění:</span><span class="sxs-lookup"><span data-stu-id="b3cca-230">The wizard returns the following warning after installation completes:</span></span>

![Konfigurace federace třetích stran](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-to-existing-deployment"></a><span data-ttu-id="b3cca-232">Přidávání nových adresářů do stávajícího nasazení</span><span class="sxs-lookup"><span data-stu-id="b3cca-232">Adding new directories to existing deployment</span></span>
<span data-ttu-id="b3cca-233">Předpokládejme, že jste nasadili Azure AD Connect s povolenou funkcí ConsistencyGuid a teď chcete přidat další adresář k nasazení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-233">Suppose you have deployed Azure AD Connect with the ConsistencyGuid feature enabled, and now you would like to add another directory to the deployment.</span></span> <span data-ttu-id="b3cca-234">Když se pokusíte přidat k adresáři, Průvodce Azure AD Connect kontroluje stav atribut mSDS-ConsistencyGuid v adresáři.</span><span class="sxs-lookup"><span data-stu-id="b3cca-234">When you try to add the directory, Azure AD Connect wizard checks the state of the mSDS-ConsistencyGuid attribute in the directory.</span></span> <span data-ttu-id="b3cca-235">Pokud atribut je nakonfigurovaný na jeden nebo více objektů v adresáři, průvodce se ukončí atribut se používá jiné aplikace a vrátí chybu, jak je znázorněno v následujícím diagramu.</span><span class="sxs-lookup"><span data-stu-id="b3cca-235">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="b3cca-236">Pokud jste si jisti, že atribut není používán existující aplikace, budete muset obraťte se na podporu pro informace o tom, jak potlačit chyby.</span><span class="sxs-lookup"><span data-stu-id="b3cca-236">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Přidávání nových adresářů do stávajícího nasazení](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="b3cca-238">Azure AD přihlášení</span><span class="sxs-lookup"><span data-stu-id="b3cca-238">Azure AD sign-in</span></span>
<span data-ttu-id="b3cca-239">Při integraci místního adresáře do Azure AD, je důležité pochopit, jak nastavení synchronizace může ovlivnit způsob uživatel se ověřuje.</span><span class="sxs-lookup"><span data-stu-id="b3cca-239">While integrating your on-premises directory with Azure AD, it is important to understand how the synchronization settings can affect the way user authenticates.</span></span> <span data-ttu-id="b3cca-240">Azure AD userPrincipalName (UPN) používá k ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="b3cca-240">Azure AD uses userPrincipalName (UPN) to authenticate the user.</span></span> <span data-ttu-id="b3cca-241">Při synchronizaci vaši uživatelé však musíte zvolit atribut, který se použije pro hodnotu userPrincipalName pečlivě.</span><span class="sxs-lookup"><span data-stu-id="b3cca-241">However, when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-the-attribute-for-userprincipalname"></a><span data-ttu-id="b3cca-242">Výběr atribut userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="b3cca-242">Choosing the attribute for userPrincipalName</span></span>
<span data-ttu-id="b3cca-243">Při výběru atribut pro zajištění hodnotu UPN, které mají být použity v Azure jeden zajistil</span><span class="sxs-lookup"><span data-stu-id="b3cca-243">When you are selecting the attribute for providing the value of UPN to be used in Azure one should ensure</span></span>

* <span data-ttu-id="b3cca-244">Hodnoty atributu odpovídat UPN syntaxi (RFC 822), který je, že by mělo být ve formátuusername@domain</span><span class="sxs-lookup"><span data-stu-id="b3cca-244">The attribute values conform to the UPN syntax (RFC 822), that is it should be of the format username@domain</span></span>
* <span data-ttu-id="b3cca-245">Přípona v hodnoty odpovídá jednomu z ověřené vlastní domény ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="b3cca-245">The suffix in the values matches to one of the verified custom domains in Azure AD</span></span>

<span data-ttu-id="b3cca-246">V nastavení express je předpokládané volba pro atribut userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="b3cca-246">In express settings, the assumed choice for the attribute is userPrincipalName.</span></span> <span data-ttu-id="b3cca-247">Pokud atribut userPrincipalName neobsahuje hodnotu mají vaši uživatelé přihlásit k platformě Azure, pak je nutné vybrat **vlastní instalace**.</span><span class="sxs-lookup"><span data-stu-id="b3cca-247">If the userPrincipalName attribute does not contain the value you want your users to sign in to Azure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="b3cca-248">Stav vlastní domény a UPN</span><span class="sxs-lookup"><span data-stu-id="b3cca-248">Custom domain state and UPN</span></span>
<span data-ttu-id="b3cca-249">Je důležité zajistit, že je ověřené domény pro tuto příponu UPN.</span><span class="sxs-lookup"><span data-stu-id="b3cca-249">It is important to ensure that there is a verified domain for the UPN suffix.</span></span>

<span data-ttu-id="b3cca-250">Jan je uživatel v doméně contoso.com.</span><span class="sxs-lookup"><span data-stu-id="b3cca-250">John is a user in contoso.com.</span></span> <span data-ttu-id="b3cca-251">Chcete, aby Jan používat místní UPN john@contoso.com pro přihlášení k Azure po uživatelé mají synchronizované s vaší contoso.onmicrosoft.com adresář Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-251">You want John to use the on-premises UPN john@contoso.com to sign in to Azure after you have synced users to your Azure AD directory contoso.onmicrosoft.com.</span></span> <span data-ttu-id="b3cca-252">To pokud chcete udělat, musíte přidat a ověřit contoso.com jako vlastní domény ve službě Azure AD, než začnete synchronizovat uživatele.</span><span class="sxs-lookup"><span data-stu-id="b3cca-252">To do so, you need to add and verify contoso.com as a custom domain in Azure AD before you can start syncing the users.</span></span> <span data-ttu-id="b3cca-253">Pokud příponu UPN Jan, například contoso.com, neodpovídá ověřenou doménu ve službě Azure AD, Azure AD nahrazuje příponu UPN s contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="b3cca-253">If the UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces the UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="b3cca-254">Směrovatelný bez místní domény a UPN pro Azure AD</span><span class="sxs-lookup"><span data-stu-id="b3cca-254">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="b3cca-255">Některé organizace mají směrovat domény, jako je contoso.local nebo jednoduchý přípony domény jako contoso.</span><span class="sxs-lookup"><span data-stu-id="b3cca-255">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="b3cca-256">Nemůžete se nepodařilo ověřit směrovat domény ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-256">You are not able to verify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="b3cca-257">Azure AD Connect pro synchronizaci můžete pouze ověřené domény ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-257">Azure AD Connect can sync to only a verified domain in Azure AD.</span></span> <span data-ttu-id="b3cca-258">Když vytvoříte adresář služby Azure AD, vytvoří se směrovatelné domény, který se stane výchozí doménu pro vaši službu Azure AD například contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="b3cca-258">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="b3cca-259">Proto bude nutné v případě, že nechcete, aby pro synchronizaci výchozí domény onmicrosoft.com ověření všech ostatních směrovatelné domén v takové situaci.</span><span class="sxs-lookup"><span data-stu-id="b3cca-259">Therefore, it becomes necessary to verify any other routable domain in such a scenario in case you don't want to sync to the default onmicrosoft.com domain.</span></span>

<span data-ttu-id="b3cca-260">Čtení [přidání vlastního názvu domény do Azure Active Directory](../active-directory-add-domain.md) Další informace o přidání a ověření domény.</span><span class="sxs-lookup"><span data-stu-id="b3cca-260">Read [Add your custom domain name to Azure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="b3cca-261">Azure AD Connect zjistí, pokud běží v prostředí domény směrovat a bude odpovídajícím způsobem upozornit z pokračovat Expresní nastavení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-261">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="b3cca-262">Pokud pracujete v směrovat doméně, je pravděpodobné, že jména UPN uživatelů mít příliš směrovat přípony.</span><span class="sxs-lookup"><span data-stu-id="b3cca-262">If you are operating in a non-routable domain, then it is likely that the UPN of the users have non-routable suffixes too.</span></span> <span data-ttu-id="b3cca-263">Například pokud používáte v contoso.local, Azure AD Connect navrhuje vám umožní používat vlastní nastavení místo použitím expresního nastavení.</span><span class="sxs-lookup"><span data-stu-id="b3cca-263">For example, if you are running under contoso.local, Azure AD Connect suggests you to use custom settings rather than using express settings.</span></span> <span data-ttu-id="b3cca-264">Pomocí vlastních nastavení, budete moci zadat atribut, který má být použit jako hlavní název uživatele pro přihlášení k Azure po uživatelů se synchronizují do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b3cca-264">Using custom settings, you are able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b3cca-265">Další kroky</span><span class="sxs-lookup"><span data-stu-id="b3cca-265">Next steps</span></span>
<span data-ttu-id="b3cca-266">Přečtěte si další informace o [Integrování místních identit do služby Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="b3cca-266">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
