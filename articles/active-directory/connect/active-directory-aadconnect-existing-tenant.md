---
title: "Azure AD Connect: Pokud už máte Azure AD | Microsoft Docs"
description: "Toto téma popisuje, jak používat připojení, pokud máte existujícího klienta Azure AD."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 908c576b0427a23934c844362a4fd69443800d0f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a><span data-ttu-id="e908b-103">Azure AD Connect: Pokud máte existující klienta</span><span class="sxs-lookup"><span data-stu-id="e908b-103">Azure AD Connect: When you have an existent tenant</span></span>
<span data-ttu-id="e908b-104">Většinu témat, jak používat Azure AD Connect předpokládá začínat nové Azure AD klienta a že nejsou žádní uživatelé nebo existuje jiné objekty.</span><span class="sxs-lookup"><span data-stu-id="e908b-104">Most of the topics for how to use Azure AD Connect assumes you start with a new Azure AD tenant and that there are no users or other objects there.</span></span> <span data-ttu-id="e908b-105">Ale pokud jste spustili s klient Azure AD, naplní uživatelů a dalších objektů a teď chcete použít připojení, pak toto téma je pro vás.</span><span class="sxs-lookup"><span data-stu-id="e908b-105">But if you have started with an Azure AD tenant, populated it with users and other objects, and now want to use Connect, then this topic is for you.</span></span>

## <a name="the-basics"></a><span data-ttu-id="e908b-106">Základy</span><span class="sxs-lookup"><span data-stu-id="e908b-106">The basics</span></span>
<span data-ttu-id="e908b-107">Řídí objektu ve službě Azure AD se buď hlavním v cloudu (Azure AD) nebo místní.</span><span class="sxs-lookup"><span data-stu-id="e908b-107">An object in Azure AD is either mastered in the cloud (Azure AD) or on-premises.</span></span> <span data-ttu-id="e908b-108">Pro jeden jednoho objektu se nedají spravovat některé atributy místní a některé další atributy ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-108">For one single object, you cannot manage some attributes on-premises and some other attributes in Azure AD.</span></span> <span data-ttu-id="e908b-109">Každý objekt má příznak označující, kde je spravovaný objekt.</span><span class="sxs-lookup"><span data-stu-id="e908b-109">Each object has a flag indicating where the object is managed.</span></span>

<span data-ttu-id="e908b-110">Některé uživatele na místě a dalších můžete spravovat v cloudu.</span><span class="sxs-lookup"><span data-stu-id="e908b-110">You can manage some users on-premises and other in the cloud.</span></span> <span data-ttu-id="e908b-111">Běžný scénář pro tuto konfiguraci je organizace se smíšenými účetní pracovníků a prodeje pracovních procesů.</span><span class="sxs-lookup"><span data-stu-id="e908b-111">A common scenario for this configuration is an organization with a mix of accounting workers and sales workers.</span></span> <span data-ttu-id="e908b-112">Monitorování účtů pracovníci mít místní účet AD, ale prodeje pracovníci nepodporují, budou mít účet ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-112">The accounting workers have an on-premises AD account, but the sales workers do not, they have an account in Azure AD.</span></span> <span data-ttu-id="e908b-113">By spravovat některé uživatele místní a některé ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-113">You would manage some users on-premises and some in Azure AD.</span></span>

<span data-ttu-id="e908b-114">Pokud jste začali ke správě uživatelů ve službě Azure AD, které jsou k dispozici také v místní službě AD a později chcete použít připojení, pak jsou některé další otázky, které je třeba vzít v úvahu.</span><span class="sxs-lookup"><span data-stu-id="e908b-114">If you started to manage users in Azure AD that are also in on-premises AD and later want to use Connect, then there are some additional concerns you need to consider.</span></span>

## <a name="sync-with-existing-users-in-azure-ad"></a><span data-ttu-id="e908b-115">Synchronizovat s stávajících uživatelů ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="e908b-115">Sync with existing users in Azure AD</span></span>
<span data-ttu-id="e908b-116">Při instalaci Azure AD Connect a spustíte synchronizaci, služby Azure AD sync (ve službě Azure AD) neobsahuje kontrolu pro každý nový objekt a akci k vyhledání existujícího objektu tak, aby odpovídaly.</span><span class="sxs-lookup"><span data-stu-id="e908b-116">When you install Azure AD Connect and you start synchronizing, the Azure AD sync service (in Azure AD) does a check on every new object and try to find an existing object to match.</span></span> <span data-ttu-id="e908b-117">Pro tento proces se používají tři atributy: **userPrincipalName**, **proxyAddresses**, a **sourceAnchor**/**immutableID** .</span><span class="sxs-lookup"><span data-stu-id="e908b-117">There are three attributes used for this process: **userPrincipalName**, **proxyAddresses**, and **sourceAnchor**/**immutableID**.</span></span> <span data-ttu-id="e908b-118">Shoda s **userPrincipalName** a **proxyAddresses** se označuje jako **logicky shodu**.</span><span class="sxs-lookup"><span data-stu-id="e908b-118">A match on **userPrincipalName** and **proxyAddresses** is known as a **soft match**.</span></span> <span data-ttu-id="e908b-119">Shoda s **sourceAnchor** se označuje jako **pevný shodu**.</span><span class="sxs-lookup"><span data-stu-id="e908b-119">A match on **sourceAnchor** is known as **hard match**.</span></span> <span data-ttu-id="e908b-120">Pro **proxyAddresses** atribut pouze hodnotu s **SMTP:**, která je na primární e-mailovou adresu, slouží k vyhodnocení.</span><span class="sxs-lookup"><span data-stu-id="e908b-120">For the **proxyAddresses** attribute only the value with **SMTP:**, that is the primary email address, is used for the evaluation.</span></span>

<span data-ttu-id="e908b-121">Shody je Vyhodnocená jenom pro všechny nové objekty pocházejících z připojení.</span><span class="sxs-lookup"><span data-stu-id="e908b-121">The match is only evaluated for new objects coming from Connect.</span></span> <span data-ttu-id="e908b-122">Pokud změníte stávající objekt, je odpovídající, žádný z těchto atributů, pak se zobrazí chybová místo.</span><span class="sxs-lookup"><span data-stu-id="e908b-122">If you change an exiting object so it is matching any of these attributes, then you see an error instead.</span></span>

<span data-ttu-id="e908b-123">Pokud Azure AD nalezne objekt, kde jsou hodnoty atributu stejné pro objekt pocházejících z připojení a zda se již nachází ve službě Azure AD, je objekt ve službě Azure AD byly převzaty připojit.</span><span class="sxs-lookup"><span data-stu-id="e908b-123">If Azure AD finds an object where the attribute values are the same for an object coming from Connect and that it is already present in Azure AD, then the object in Azure AD is taken over by Connect.</span></span> <span data-ttu-id="e908b-124">Objekt dříve spravovanými přes cloud je označení místního spravované.</span><span class="sxs-lookup"><span data-stu-id="e908b-124">The previously cloud-managed object is flagged as on-premises managed.</span></span> <span data-ttu-id="e908b-125">Všechny atributy ve službě Azure AD s hodnotou v místním budou přepsána AD s místními hodnotou.</span><span class="sxs-lookup"><span data-stu-id="e908b-125">All attributes in Azure AD with a value in on-premises AD are overwritten with the on-premises value.</span></span> <span data-ttu-id="e908b-126">Výjimkou je, když má atribut **NULL** hodnotu místně.</span><span class="sxs-lookup"><span data-stu-id="e908b-126">The exception is when an attribute has a **NULL** value on-premises.</span></span> <span data-ttu-id="e908b-127">V takovém případě je hodnota v Azure AD zůstane, ale stále ji změnit jedině tak místní na něco jiného.</span><span class="sxs-lookup"><span data-stu-id="e908b-127">In this case, the value in Azure AD remains, but you can still only change it on-premises to something else.</span></span>

> [!WARNING]
> <span data-ttu-id="e908b-128">Vzhledem k tomu, že všechny atributy ve službě Azure AD se bude možné přepsat hodnotou místně, zkontrolujte, zda že máte funkční data místně.</span><span class="sxs-lookup"><span data-stu-id="e908b-128">Since all attributes in Azure AD are going to be overwritten by the on-premises value, make sure you have good data on-premises.</span></span> <span data-ttu-id="e908b-129">Například pokud pouze jste nahráli e-mailovou adresu v Office 365 a není zachovány aktualizovat v místní službě AD DS a ztratit všechny hodnoty v Azure AD nebo Office 365 nejsou k dispozici ve službě AD DS.</span><span class="sxs-lookup"><span data-stu-id="e908b-129">For example, if you only have managed email address in Office 365 and not kept it updated in on-premises AD DS, then you lose any values in Azure AD/Office 365 not present in AD DS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e908b-130">Pokud používat synchronizaci hesla, která je vždy používá Expresní nastavení, pak heslo ve službě Azure AD je přepsat heslo v místní AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-130">If you use password sync, which is always used by express settings, then the password in Azure AD is overwritten with the password in on-premises AD.</span></span> <span data-ttu-id="e908b-131">Pokud uživatelé používají ke správě různá hesla, budete muset informujte je, místní heslo se musí použít, pokud jste nainstalovali připojit.</span><span class="sxs-lookup"><span data-stu-id="e908b-131">If your users are used to manage different passwords, then you need to inform them that they should use the on-premises password when you have installed Connect.</span></span>

<span data-ttu-id="e908b-132">Předchozí části a upozornění je třeba zvážit při plánování.</span><span class="sxs-lookup"><span data-stu-id="e908b-132">The previous section and warning must be considered in your planning.</span></span> <span data-ttu-id="e908b-133">Pokud jste provedli mnoho změn ve službě Azure AD není promítnuta místní služby AD DS, pak je potřeba naplánovat postup naplnění služby AD DS s aktualizovanými hodnotami před synchronizaci objektů vašeho službou Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e908b-133">If you have made many changes in Azure AD not reflected in on-premises AD DS, then you need to plan for how to populate AD DS with the updated values before you sync your objects with Azure AD Connect.</span></span>

<span data-ttu-id="e908b-134">-Li vyplněno objektů s konfigurace soft shodu, pak se **sourceAnchor** je přidána do objektu ve službě Azure AD, pevné shoda lze později.</span><span class="sxs-lookup"><span data-stu-id="e908b-134">If you matched your objects with a soft-match, then the **sourceAnchor** is added to the object in Azure AD so a hard match can be used later.</span></span>

### <a name="hard-match-vs-soft-match"></a><span data-ttu-id="e908b-135">Pevný match vs konfigurace Soft-match</span><span class="sxs-lookup"><span data-stu-id="e908b-135">Hard-match vs Soft-match</span></span>
<span data-ttu-id="e908b-136">Pro novou instalaci připojení není žádný praktické rozdíl mezi soft - a pevné nalezena shoda.</span><span class="sxs-lookup"><span data-stu-id="e908b-136">For a new installation of Connect, there is no practical difference between a soft- and a hard-match.</span></span> <span data-ttu-id="e908b-137">Rozdíl je v situaci, obnovení po havárii.</span><span class="sxs-lookup"><span data-stu-id="e908b-137">The difference is in a disaster recovery situation.</span></span> <span data-ttu-id="e908b-138">Pokud jste ztratili serveru s Azure AD Connect, bez ztráty dat, můžete přeinstalovat novou instanci.</span><span class="sxs-lookup"><span data-stu-id="e908b-138">If you have lost your server with Azure AD Connect, you can reinstall a new instance without losing any data.</span></span> <span data-ttu-id="e908b-139">Objekt s sourceAnchor je odeslána připojit během počáteční instalace.</span><span class="sxs-lookup"><span data-stu-id="e908b-139">An object with a sourceAnchor is sent to Connect during initial install.</span></span> <span data-ttu-id="e908b-140">Pak může být vyhodnocena shoda klientem (Azure AD Connect), což je mnohem rychlejší než to stejné ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-140">The match can then be evaluated by the client (Azure AD Connect), which is a lot faster than doing the same in Azure AD.</span></span> <span data-ttu-id="e908b-141">Pevné shoda bude vyhodnocena Connect a službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-141">A hard match is evaluated both by Connect and by Azure AD.</span></span> <span data-ttu-id="e908b-142">Logicky shoda pouze vyhodnotí se službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-142">A soft match is only evaluated by Azure AD.</span></span>

### <a name="other-objects-than-users"></a><span data-ttu-id="e908b-143">Jiné objekty než uživatelé</span><span class="sxs-lookup"><span data-stu-id="e908b-143">Other objects than users</span></span>
<span data-ttu-id="e908b-144">Uživatelé obvykle mají userPrincipalName a proxyAddresses, tím snadno shody.</span><span class="sxs-lookup"><span data-stu-id="e908b-144">Users usually have both userPrincipalName and proxyAddresses, making the match easy.</span></span> <span data-ttu-id="e908b-145">Ale jiné objekty, třeba skupiny zabezpečení, těch, které nemají.</span><span class="sxs-lookup"><span data-stu-id="e908b-145">But other objects, such as security groups, do not have those.</span></span> <span data-ttu-id="e908b-146">V takovém případě je možné porovnávat jenom na pevné odpovídající pomocí sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="e908b-146">In this case, you can only match on a hard match using the sourceAnchor.</span></span> <span data-ttu-id="e908b-147">SourceAnchor je vždy Base64 převést **objectGUID** místně, tak musíte aktualizovat hodnotu ve službě Azure AD, když potřebujete dva objekty tak, aby odpovídaly.</span><span class="sxs-lookup"><span data-stu-id="e908b-147">The sourceAnchor is always the Base64 converted **objectGUID** on-premises, so you must update the value in Azure AD when you need two objects to match.</span></span> <span data-ttu-id="e908b-148">SourceAnchor/immutableID lze aktualizovat pouze pomocí prostředí PowerShell a ne prostřednictvím těchto portálů.</span><span class="sxs-lookup"><span data-stu-id="e908b-148">The sourceAnchor/immutableID can only be updated with PowerShell and not through the portals.</span></span>

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a><span data-ttu-id="e908b-149">Vytvoření nové místní Active Directory z dat ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="e908b-149">Create a new on-premises Active Directory from data in Azure AD</span></span>
<span data-ttu-id="e908b-150">Někteří zákazníci začínat čistě cloudové řešení s Azure AD a nemají místní AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-150">Some customers start with a cloud-only solution with Azure AD and they do not have an on-premises AD.</span></span> <span data-ttu-id="e908b-151">Později chtějí využívat místních prostředků a chcete vytvořit místní AD podle data služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-151">Later they want to consume on-premises resources and want to build an on-premises AD based on Azure AD data.</span></span> <span data-ttu-id="e908b-152">Azure AD Connect nemůže pomoct pro tento scénář.</span><span class="sxs-lookup"><span data-stu-id="e908b-152">Azure AD Connect cannot help you for this scenario.</span></span> <span data-ttu-id="e908b-153">Nedojde k vytvoření uživatele na místě a nemá žádné možnost nastavit heslo na místě na stejný jako v Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e908b-153">It does not create users on-premises and it does not have any ability to set the password on-premises to the same as in Azure AD.</span></span>

<span data-ttu-id="e908b-154">Pokud jenom důvod, proč plánujete přidat místní AD má zajistit podporu pro objekty LOBs (-obchodní aplikace), pak možná byste měli zvážit použití [služby Azure AD domain services](../../active-directory-domain-services/index.md) místo.</span><span class="sxs-lookup"><span data-stu-id="e908b-154">If the only reason why you plan to add on-premises AD is to support LOBs (Line-of-Business apps), then maybe you should consider to use [Azure AD domain services](../../active-directory-domain-services/index.md) instead.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e908b-155">Další kroky</span><span class="sxs-lookup"><span data-stu-id="e908b-155">Next steps</span></span>
<span data-ttu-id="e908b-156">Přečtěte si další informace o [Integrování místních identit do služby Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="e908b-156">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
