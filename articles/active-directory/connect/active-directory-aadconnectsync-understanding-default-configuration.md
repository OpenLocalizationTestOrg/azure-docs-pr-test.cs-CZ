---
title: "Synchronizace Azure AD Connect: Principy výchozí konfigurace | Microsoft Docs"
description: "Tento článek popisuje výchozí konfigurace v synchronizaci Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 32a693c059a1b4261f33a3d6f50f397365e9dac4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-the-default-configuration"></a><span data-ttu-id="8966e-103">Synchronizace služby Azure AD Connect: Principy výchozí konfigurace</span><span class="sxs-lookup"><span data-stu-id="8966e-103">Azure AD Connect sync: Understanding the default configuration</span></span>
<span data-ttu-id="8966e-104">Tento článek vysvětluje out-of-box konfigurační pravidla.</span><span class="sxs-lookup"><span data-stu-id="8966e-104">This article explains the out-of-box configuration rules.</span></span> <span data-ttu-id="8966e-105">Ho dokumentů, pravidla a jak tato pravidla vliv na konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="8966e-105">It documents the rules and how these rules impact the configuration.</span></span> <span data-ttu-id="8966e-106">Je také vás provede výchozí konfigurace synchronizace služby Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8966e-106">It also walks you through the default configuration of Azure AD Connect sync.</span></span> <span data-ttu-id="8966e-107">Cílem je, že čtečka plně chápe, jak funguje konfigurační model s názvem deklarativní zřizování v příkladu reálného.</span><span class="sxs-lookup"><span data-stu-id="8966e-107">The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="8966e-108">Tento článek předpokládá, že jste již nainstalovali a konfigurace synchronizace služby Azure AD Connect pomocí Průvodce instalací.</span><span class="sxs-lookup"><span data-stu-id="8966e-108">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span></span>

<span data-ttu-id="8966e-109">Zjistit podrobnosti o konfigurační model číst [Principy deklarativní zřizování](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="8966e-109">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-to-azure-ad"></a><span data-ttu-id="8966e-110">Pravidla Out-of-box z místní do služby Azure AD</span><span class="sxs-lookup"><span data-stu-id="8966e-110">Out-of-box rules from on-premises to Azure AD</span></span>
<span data-ttu-id="8966e-111">Následující výrazy naleznete v konfiguraci out-of-box.</span><span class="sxs-lookup"><span data-stu-id="8966e-111">The following expressions can be found in the out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="8966e-112">Pravidla out-of-box uživatele</span><span class="sxs-lookup"><span data-stu-id="8966e-112">User out-of-box rules</span></span>
<span data-ttu-id="8966e-113">Tato pravidla platí také pro typ objektu iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="8966e-113">These rules also apply to the iNetOrgPerson object type.</span></span>

<span data-ttu-id="8966e-114">Objekt uživatele, musí splňovat následující synchronizaci:</span><span class="sxs-lookup"><span data-stu-id="8966e-114">A user object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8966e-115">Musí mít sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8966e-115">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="8966e-116">Po vytvoření objektu ve službě Azure AD, nelze změnit sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8966e-116">After the object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="8966e-117">Pokud je hodnota změněné místní, objekt zastaví, synchronizace, dokud se nezmění sourceAnchor zpět na předchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="8966e-117">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span></span>
* <span data-ttu-id="8966e-118">Musí mít atribut accountEnabled (userAccountControl) naplněno.</span><span class="sxs-lookup"><span data-stu-id="8966e-118">Must have the accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="8966e-119">S místní Active Directory tento atribut je stále přítomen a vyplněná.</span><span class="sxs-lookup"><span data-stu-id="8966e-119">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="8966e-120">Následující objekty uživatele jsou **není** synchronizovat se službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="8966e-120">The following user objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="8966e-121">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="8966e-121">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="8966e-122">Ujistěte se, mnoho out-of-box objektů ve službě Active Directory, jako je předdefinovaný účet správce, nejsou synchronizovány.</span><span class="sxs-lookup"><span data-stu-id="8966e-122">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="8966e-123">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="8966e-123">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="8966e-124">Zkontrolujte, zda nejsou synchronizované objekty uživatele se žádné atributy sAMAccountName.</span><span class="sxs-lookup"><span data-stu-id="8966e-124">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="8966e-125">Tento případ by mohlo dojít pouze prakticky v doméně upgradu ze systému Windows NT 4.</span><span class="sxs-lookup"><span data-stu-id="8966e-125">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="8966e-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="8966e-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="8966e-127">Nesynchronizovat účtu služby používaného synchronizace Azure AD Connect a její starší verze.</span><span class="sxs-lookup"><span data-stu-id="8966e-127">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="8966e-128">Nesynchronizovat účty serveru Exchange, které nebude fungovat v systému Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="8966e-128">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="8966e-129">Nesynchronizovat objekty, které nebude fungovat v systému Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="8966e-129">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="8966e-130">Tato bitová maska (& H21C07000) bude filtrovat následující objekty:</span><span class="sxs-lookup"><span data-stu-id="8966e-130">This bitmask (&H21C07000) would filter out the following objects:</span></span>
  * <span data-ttu-id="8966e-131">Poštovní veřejné složky</span><span class="sxs-lookup"><span data-stu-id="8966e-131">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="8966e-132">Odpovídající poštovní schránky systému</span><span class="sxs-lookup"><span data-stu-id="8966e-132">System Attendant Mailbox</span></span>
  * <span data-ttu-id="8966e-133">Poštovní schránky databáze poštovní schránky (poštovní schránka systému)</span><span class="sxs-lookup"><span data-stu-id="8966e-133">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="8966e-134">Univerzální skupina zabezpečení (nemohli použít pro uživatele, ale je k dispozici z důvodu starší verze)</span><span class="sxs-lookup"><span data-stu-id="8966e-134">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="8966e-135">Non-univerzální skupiny (nemohli použít pro uživatele, ale je k dispozici z důvodu starší verze)</span><span class="sxs-lookup"><span data-stu-id="8966e-135">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="8966e-136">Plán poštovní schránky</span><span class="sxs-lookup"><span data-stu-id="8966e-136">Mailbox Plan</span></span>
  * <span data-ttu-id="8966e-137">Zjišťování poštovní schránky</span><span class="sxs-lookup"><span data-stu-id="8966e-137">Discovery Mailbox</span></span>
* <span data-ttu-id="8966e-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="8966e-139">Nesynchronizovat všechny objekty postižené replikace.</span><span class="sxs-lookup"><span data-stu-id="8966e-139">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="8966e-140">Platí následující pravidla atribut:</span><span class="sxs-lookup"><span data-stu-id="8966e-140">The following attribute rules apply:</span></span>

* <span data-ttu-id="8966e-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="8966e-142">Atribut sourceAnchor není podílí z propojená poštovní schránky.</span><span class="sxs-lookup"><span data-stu-id="8966e-142">The sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="8966e-143">Předpokládá se, že pokud byl nalezen propojená poštovní schránka, je skutečný účet později připojený.</span><span class="sxs-lookup"><span data-stu-id="8966e-143">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span></span>
* <span data-ttu-id="8966e-144">Exchange související s atributy se synchronizují pouze pokud atribut **mailNickName** má hodnotu.</span><span class="sxs-lookup"><span data-stu-id="8966e-144">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="8966e-145">Po několika doménovými strukturami se potom atributy používán v následujícím pořadí:</span><span class="sxs-lookup"><span data-stu-id="8966e-145">When there are multiple forests, then attributes are consumed in the following order:</span></span>
  1. <span data-ttu-id="8966e-146">Atributy související s přihlášení (například userPrincipalName) jsou podílí z doménové struktury s aktivovaný účet.</span><span class="sxs-lookup"><span data-stu-id="8966e-146">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span></span>
  2. <span data-ttu-id="8966e-147">Atributy, které lze nalézt v Exchange GAL (seznamu pro globální adresa) jsou podílí z doménové struktury s poštovní schránky systému Exchange.</span><span class="sxs-lookup"><span data-stu-id="8966e-147">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="8966e-148">Pokud je možné najít žádné poštovní schránky, tyto atributy mohou pocházet z jakékoli doménové struktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-148">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="8966e-149">Exchange související s atributy (technické atributy nejsou viditelné v globálním seznamu adres) jsou podílí z doménové struktury kde `mailNickname ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="8966e-149">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="8966e-150">Pokud existují několik doménových struktur, které splňují jednu z těchto pravidel, pořadí (datum a čas) vytvoření konektorů (doménové struktury) slouží k určení, která doménová struktura přispívá atributy.</span><span class="sxs-lookup"><span data-stu-id="8966e-150">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="8966e-151">Obraťte se na out-of-box pravidla</span><span class="sxs-lookup"><span data-stu-id="8966e-151">Contact out-of-box rules</span></span>
<span data-ttu-id="8966e-152">Objekt kontaktu musí splňovat následující synchronizaci:</span><span class="sxs-lookup"><span data-stu-id="8966e-152">A contact object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8966e-153">Kontakt musí být povoleným e-mailem.</span><span class="sxs-lookup"><span data-stu-id="8966e-153">The contact must be mail-enabled.</span></span> <span data-ttu-id="8966e-154">Ověření na základě následujících pravidel:</span><span class="sxs-lookup"><span data-stu-id="8966e-154">It is verified with the following rules:</span></span>
  * <span data-ttu-id="8966e-155">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-155">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="8966e-156">Musí být naplněn atribut proxyAddresses.</span><span class="sxs-lookup"><span data-stu-id="8966e-156">The proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="8966e-157">Primární e-mailovou adresu naleznete v atribut proxyAddresses nebo atribut mail.</span><span class="sxs-lookup"><span data-stu-id="8966e-157">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span></span> <span data-ttu-id="8966e-158">Přítomnost @ se používá k ověření, že je obsah e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="8966e-158">The presence of an @ is used to verify that the content is an email address.</span></span> <span data-ttu-id="8966e-159">Mezi tyto dvě pravidla musí vyhodnotit na hodnotu True.</span><span class="sxs-lookup"><span data-stu-id="8966e-159">One of these two rules must be evaluated to True.</span></span>
    * <span data-ttu-id="8966e-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="8966e-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="8966e-161">Je k dispozici položku s "SMTP:" a pokud neexistuje, můžete @ být nalezen v řetězci?</span><span class="sxs-lookup"><span data-stu-id="8966e-161">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span></span>
    * <span data-ttu-id="8966e-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="8966e-163">Je atribut mail vyplňovat a je-li, můžete @ být nalezen v řetězci?</span><span class="sxs-lookup"><span data-stu-id="8966e-163">Is the mail attribute populated and if it is, can an @ be found in the string?</span></span>

<span data-ttu-id="8966e-164">Následující objekty kontaktní **není** synchronizovat se službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="8966e-164">The following contact objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="8966e-165">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="8966e-165">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="8966e-166">Ujistěte se, jsou synchronizovány žádné kontaktní objekty označení kritický.</span><span class="sxs-lookup"><span data-stu-id="8966e-166">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="8966e-167">Nesmí být žádné s výchozí konfigurací.</span><span class="sxs-lookup"><span data-stu-id="8966e-167">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="8966e-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="8966e-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="8966e-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="8966e-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="8966e-170">Tyto objekty nebude fungovat v systému Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="8966e-170">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="8966e-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="8966e-172">Nesynchronizovat všechny objekty postižené replikace.</span><span class="sxs-lookup"><span data-stu-id="8966e-172">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="8966e-173">Skupina out-of-box pravidla</span><span class="sxs-lookup"><span data-stu-id="8966e-173">Group out-of-box rules</span></span>
<span data-ttu-id="8966e-174">Objekt skupiny musí splňovat následující synchronizaci:</span><span class="sxs-lookup"><span data-stu-id="8966e-174">A group object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8966e-175">Musí mít méně než 50 000 členy.</span><span class="sxs-lookup"><span data-stu-id="8966e-175">Must have less than 50,000 members.</span></span> <span data-ttu-id="8966e-176">Je to počet počet členů v místní skupině.</span><span class="sxs-lookup"><span data-stu-id="8966e-176">This count is the number of members in the on-premises group.</span></span>
  * <span data-ttu-id="8966e-177">Pokud má víc členů než poprvé spustí se synchronizace, skupině není synchronizován.</span><span class="sxs-lookup"><span data-stu-id="8966e-177">If it has more members before synchronization starts the first time, the group is not synchronized.</span></span>
  * <span data-ttu-id="8966e-178">Pokud počet členů tomu, když byl původně vytvořen, pak když dorazí do 50 000 členy přestane synchronizace, dokud počet členství je nižší než 50 000 znovu.</span><span class="sxs-lookup"><span data-stu-id="8966e-178">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="8966e-179">Poznámka: Počet 50 000 členství je také vynucené Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-179">Note: The 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="8966e-180">Nemůžete se moci synchronizovat skupiny s více členů, i když můžete upravit nebo odebrat toto pravidlo.</span><span class="sxs-lookup"><span data-stu-id="8966e-180">You are not able to synchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="8966e-181">Pokud je skupina **distribuční skupiny**, a také musí být povoleno e-mailu.</span><span class="sxs-lookup"><span data-stu-id="8966e-181">If the group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="8966e-182">V tématu [obraťte se na pravidla out-of-box](#contact-out-of-box-rules) pro toto pravidlo se nevynutí.</span><span class="sxs-lookup"><span data-stu-id="8966e-182">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="8966e-183">Následující objekty skupiny jsou **není** synchronizovat se službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="8966e-183">The following group objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="8966e-184">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="8966e-184">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="8966e-185">Ujistěte se, mnoho out-of-box objektů ve službě Active Directory, jako jsou předdefinované skupiny administrators, nejsou synchronizovány.</span><span class="sxs-lookup"><span data-stu-id="8966e-185">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="8966e-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="8966e-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="8966e-187">Starší verze skupina, která nástroj DirSync používá.</span><span class="sxs-lookup"><span data-stu-id="8966e-187">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="8966e-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="8966e-189">Skupina role.</span><span class="sxs-lookup"><span data-stu-id="8966e-189">Role Group.</span></span>
* <span data-ttu-id="8966e-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="8966e-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="8966e-191">Nesynchronizovat všechny objekty postižené replikace.</span><span class="sxs-lookup"><span data-stu-id="8966e-191">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="8966e-192">ForeignSecurityPrincipal out-of-box pravidla</span><span class="sxs-lookup"><span data-stu-id="8966e-192">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="8966e-193">FSP jsou připojené k "žádný" (\*) objektu v úložišti metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-193">FSPs are joined to "any" (\*) object in the metaverse.</span></span> <span data-ttu-id="8966e-194">Ve skutečnosti tohoto spojení se dělá jenom pro uživatele a skupiny zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="8966e-194">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="8966e-195">Tato konfigurace zajistí, že jsou ve skupinách mezi doménovými strukturami přeložit a správně reprezentováni v Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-195">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="8966e-196">Pravidla out-of-box počítače</span><span class="sxs-lookup"><span data-stu-id="8966e-196">Computer out-of-box rules</span></span>
<span data-ttu-id="8966e-197">Objekt počítače se musí splňovat následující synchronizaci:</span><span class="sxs-lookup"><span data-stu-id="8966e-197">A computer object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8966e-198">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="8966e-198">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="8966e-199">Pouze počítače s Windows 10 naplnit tento atribut.</span><span class="sxs-lookup"><span data-stu-id="8966e-199">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="8966e-200">Všechny objekty počítače s hodnotou v tomto atributu jsou synchronizovány.</span><span class="sxs-lookup"><span data-stu-id="8966e-200">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-the-out-of-box-rules-scenario"></a><span data-ttu-id="8966e-201">Vysvětlení pravidel out-of-box scénář</span><span class="sxs-lookup"><span data-stu-id="8966e-201">Understanding the out-of-box rules scenario</span></span>
<span data-ttu-id="8966e-202">V tomto příkladu používáme nasazení jedné doménové struktuře účtu (A), jednu doménovou strukturu prostředků (R) a jeden adresář Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-202">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![Obrázek s popis scénáře](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="8966e-204">V této konfiguraci se předpokládá, že aktivovaný účet v doménové struktuře účtu a deaktivovaného účtu v doménové struktuře prostředku s propojená poštovní schránka.</span><span class="sxs-lookup"><span data-stu-id="8966e-204">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span></span>

<span data-ttu-id="8966e-205">Naším cílem s výchozí konfigurací je:</span><span class="sxs-lookup"><span data-stu-id="8966e-205">Our goal with the default configuration is:</span></span>

* <span data-ttu-id="8966e-206">Atributy související s přihlášení se synchronizují z doménové struktury s aktivovaný účet.</span><span class="sxs-lookup"><span data-stu-id="8966e-206">Attributes related to sign-in are synchronized from the forest with the enabled account.</span></span>
* <span data-ttu-id="8966e-207">Atributy, které lze nalézt v GAL (seznamu pro globální adresa) jsou synchronizovány z doménové struktury s poštovní schránku.</span><span class="sxs-lookup"><span data-stu-id="8966e-207">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span></span> <span data-ttu-id="8966e-208">Pokud lze nalézt žádné poštovní schránky, je použít jiné doménové struktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-208">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="8966e-209">Pokud je nalezen propojená poštovní schránka, je nutné nalézt propojené aktivovaný účet pro objekt, který má být exportovány do služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-209">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="8966e-210">Synchronization Rule Editor</span><span class="sxs-lookup"><span data-stu-id="8966e-210">Synchronization Rule Editor</span></span>
<span data-ttu-id="8966e-211">Konfigurace můžete zobrazit a změnit pomocí nástroje synchronizace pravidla Editor (SRE) a zástupce k němu najdete v nabídce start.</span><span class="sxs-lookup"><span data-stu-id="8966e-211">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span></span>

![Ikona editoru pravidel synchronizace](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="8966e-213">Instalaci synchronizace Azure AD Connect SRE je nástroj resource kit.</span><span class="sxs-lookup"><span data-stu-id="8966e-213">The SRE is a resource kit tool and it is installed with Azure AD Connect sync.</span></span> <span data-ttu-id="8966e-214">Chcete-li jej spustit, musíte být členem skupiny ADSyncAdmins.</span><span class="sxs-lookup"><span data-stu-id="8966e-214">To be able to start it, you must be a member of the ADSyncAdmins group.</span></span> <span data-ttu-id="8966e-215">Po jeho spuštění, se zobrazí přibližně takto:</span><span class="sxs-lookup"><span data-stu-id="8966e-215">When it starts, you see something like this:</span></span>

![Příchozí pravidla synchronizace](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="8966e-217">V tomto podokně zobrazí všechny synchronizační pravidla, které jsou vytvořeny pro vaši konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="8966e-217">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="8966e-218">Každý řádek v tabulce představuje jeden synchronizační pravidlo.</span><span class="sxs-lookup"><span data-stu-id="8966e-218">Each line in the table is one Synchronization Rule.</span></span> <span data-ttu-id="8966e-219">Na levé straně v části typy pravidel, jsou uvedeny dva různé typy: příchozí a odchozí.</span><span class="sxs-lookup"><span data-stu-id="8966e-219">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="8966e-220">Příchozí a odchozí je z pohledu úložiště metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-220">Inbound and Outbound is from the view of the metaverse.</span></span> <span data-ttu-id="8966e-221">Zaměřuje se chystáte především na příchozích pravidel v tomto přehledu.</span><span class="sxs-lookup"><span data-stu-id="8966e-221">You are mainly going to focus on the inbound rules in this overview.</span></span> <span data-ttu-id="8966e-222">Skutečný seznam pravidel synchronizace závisí na schéma zjištěného v AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-222">The actual list of Synchronization Rules depends on the detected schema in AD.</span></span> <span data-ttu-id="8966e-223">Na obrázku výše doménové struktury účtu (fabrikamonline.com) nemá žádné služby, například Exchange a Lync, a žádná pravidla synchronizace byly vytvořeny pro tyto služby.</span><span class="sxs-lookup"><span data-stu-id="8966e-223">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="8966e-224">Ale v doménové struktuře prostředku (res.fabrikamonline.com) zjistíte synchronizační pravidla pro tyto služby.</span><span class="sxs-lookup"><span data-stu-id="8966e-224">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="8966e-225">Obsah pravidla se liší v závislosti na verzi zjištěna.</span><span class="sxs-lookup"><span data-stu-id="8966e-225">The content of the rules is different depending on the version detected.</span></span> <span data-ttu-id="8966e-226">Například v nasazení s Exchange 2013 existují další toky atributů, které jsou nakonfigurované než v systému Exchange 2010 nebo 2007.</span><span class="sxs-lookup"><span data-stu-id="8966e-226">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="8966e-227">Pravidlo synchronizace</span><span class="sxs-lookup"><span data-stu-id="8966e-227">Synchronization Rule</span></span>
<span data-ttu-id="8966e-228">Pravidlo synchronizace je objekt konfigurace sadu atributů toku, pokud je podmínka.</span><span class="sxs-lookup"><span data-stu-id="8966e-228">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="8966e-229">Používá se také k popisu, jak je související objekt v prostoru konektoru k objektu v úložišti metaverse, označuje jako **spojení** nebo **odpovídat**.</span><span class="sxs-lookup"><span data-stu-id="8966e-229">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="8966e-230">Synchronizační pravidla mají přednost před hodnotu, která určuje, jak se vztahují k sobě navzájem.</span><span class="sxs-lookup"><span data-stu-id="8966e-230">The Synchronization Rules have a precedence value indicating how they relate to each other.</span></span> <span data-ttu-id="8966e-231">Pravidlo synchronizace s nižší číselná hodnota má vyšší prioritu a v konfliktu tok atributů, vyšší prioritu služby wins řešení konfliktů.</span><span class="sxs-lookup"><span data-stu-id="8966e-231">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span></span>

<span data-ttu-id="8966e-232">Jako příklad, podívejte se na synchronizační pravidlo **v ze služby Active Directory – uživatel AccountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="8966e-232">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="8966e-233">Označit tento řádek v SRE a vyberte **upravit**.</span><span class="sxs-lookup"><span data-stu-id="8966e-233">Mark this line in the SRE and select **Edit**.</span></span>

<span data-ttu-id="8966e-234">Vzhledem k tomu, že toto pravidlo je pravidlo out-of-box, zobrazí se při otevření pravidlo upozornění.</span><span class="sxs-lookup"><span data-stu-id="8966e-234">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span></span> <span data-ttu-id="8966e-235">Neprovádějte žádné [změny pravidel out-of-box](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), takže se zobrazí dotaz, jaké jsou vaše záměry.</span><span class="sxs-lookup"><span data-stu-id="8966e-235">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="8966e-236">V takovém případě chcete jenom zobrazit pravidlo.</span><span class="sxs-lookup"><span data-stu-id="8966e-236">In this case, you only want to view the rule.</span></span> <span data-ttu-id="8966e-237">Vyberte **ne**.</span><span class="sxs-lookup"><span data-stu-id="8966e-237">Select **No**.</span></span>

![Synchronizační pravidla upozornění](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="8966e-239">Synchronizační pravidlo obsahuje čtyři části konfigurace: popis, rozsahu filtru, spojení pravidel a transformace.</span><span class="sxs-lookup"><span data-stu-id="8966e-239">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="8966e-240">Popis</span><span class="sxs-lookup"><span data-stu-id="8966e-240">Description</span></span>
<span data-ttu-id="8966e-241">První část obsahuje základní informace, jako je název a popis.</span><span class="sxs-lookup"><span data-stu-id="8966e-241">The first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="8966e-242">Popis kartě editor synchronizované pravidla</span><span class="sxs-lookup"><span data-stu-id="8966e-242">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="8966e-243">Můžete také získat informace, o které připojený systém toto pravidlo se vztahuje k, které objektu v připojených systému, které se vztahuje na typ a typ objektu úložiště metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-243">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span></span> <span data-ttu-id="8966e-244">Typ objektu úložiště metaverse je vždy osoba bez ohledu na to, když je typ zdrojového objektu uživatele, iNetOrgPerson nebo požádejte.</span><span class="sxs-lookup"><span data-stu-id="8966e-244">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="8966e-245">Typ objektu úložiště metaverse nikdy změnit tak, že je vytvořen jako obecného typu.</span><span class="sxs-lookup"><span data-stu-id="8966e-245">The metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="8966e-246">Typ propojení můžete nastavit na spojení, StickyJoin nebo zřídit.</span><span class="sxs-lookup"><span data-stu-id="8966e-246">The Link Type can be set to Join, StickyJoin, or Provision.</span></span> <span data-ttu-id="8966e-247">Toto nastavení spolupracuje s části připojení pravidla a věnuje se později.</span><span class="sxs-lookup"><span data-stu-id="8966e-247">This setting works together with the Join Rules section and is covered later.</span></span>

<span data-ttu-id="8966e-248">Zobrazí se také, že toto synchronizační pravidlo se používá pro synchronizaci hesel.</span><span class="sxs-lookup"><span data-stu-id="8966e-248">You can also see that this sync rule is used for password sync.</span></span> <span data-ttu-id="8966e-249">Pokud je uživatel v oboru pro toto synchronizační pravidlo, heslo synchronizovaných z místní do cloudu (za předpokladu, že jste povolili funkce Synchronizace hesla).</span><span class="sxs-lookup"><span data-stu-id="8966e-249">If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="8966e-250">Filtr vytváření oboru</span><span class="sxs-lookup"><span data-stu-id="8966e-250">Scoping filter</span></span>
<span data-ttu-id="8966e-251">V části filtru pro vytváření oboru slouží ke konfiguraci, pokud by se měly používat synchronizační pravidlo.</span><span class="sxs-lookup"><span data-stu-id="8966e-251">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="8966e-252">Vzhledem k tomu, že název pravidla synchronizace se díváte uvádí, že by měl použít pouze pro povolené uživatele, je nakonfigurován oboru proto AD atribut **userAccountControl** nesmí nastaven bit 2.</span><span class="sxs-lookup"><span data-stu-id="8966e-252">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span></span> <span data-ttu-id="8966e-253">Je-li synchronizační modul Vyhledá uživatele ve službě AD, platí toto synchronizační pravidlo, když **userAccountControl** nastavená na hodnotu decimal 512 (povoleného normální uživatele).</span><span class="sxs-lookup"><span data-stu-id="8966e-253">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="8966e-254">Pokud má uživatel nevztahuje pravidlo **userAccountControl** nastavena na 514 (zakázaný normální uživatel).</span><span class="sxs-lookup"><span data-stu-id="8966e-254">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span></span>

![<span data-ttu-id="8966e-255">Karta oboru v editoru pravidel synchronizace</span><span class="sxs-lookup"><span data-stu-id="8966e-255">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="8966e-256">Oboru filtru má skupin a věty, které mohou být použity.</span><span class="sxs-lookup"><span data-stu-id="8966e-256">The scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="8966e-257">Všechny klauzule uvnitř skupiny musí být splněny pro synchronizační pravidlo použít.</span><span class="sxs-lookup"><span data-stu-id="8966e-257">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span></span> <span data-ttu-id="8966e-258">Když jsou definovány více skupin, alespoň jednu skupinu musí být splněny pro pravidlo použít.</span><span class="sxs-lookup"><span data-stu-id="8966e-258">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span></span> <span data-ttu-id="8966e-259">To znamená logické nebo vyhodnocena mezi skupinami a logickou a vyhodnotí uvnitř skupiny.</span><span class="sxs-lookup"><span data-stu-id="8966e-259">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="8966e-260">Příklad této konfigurace můžete nalézt v odchozí pravidlo synchronizace **Out aad – připojení skupiny**.</span><span class="sxs-lookup"><span data-stu-id="8966e-260">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span></span> <span data-ttu-id="8966e-261">Existuje několik skupin synchronizace filtru, například jeden pro skupiny zabezpečení (`securityEnabled EQUAL True`) a jeden pro distribuční skupiny (`securityEnabled EQUAL False`).</span><span class="sxs-lookup"><span data-stu-id="8966e-261">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="8966e-262">Karta oboru v editoru pravidel synchronizace</span><span class="sxs-lookup"><span data-stu-id="8966e-262">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="8966e-263">Toto pravidlo se používá k definování skupiny, které musí být zřízená Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-263">This rule is used to define which Groups should be provisioned to Azure AD.</span></span> <span data-ttu-id="8966e-264">Distribuční skupiny musí být povoleno možné synchronizovat se službou Azure AD e-mailu, ale pro skupiny zabezpečení e-mailu se nevyžaduje.</span><span class="sxs-lookup"><span data-stu-id="8966e-264">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="8966e-265">Připojení k pravidla</span><span class="sxs-lookup"><span data-stu-id="8966e-265">Join rules</span></span>
<span data-ttu-id="8966e-266">Třetí části slouží ke konfiguraci, jak objekty v prostoru konektoru vztahují k objektům v úložišti metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-266">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span></span> <span data-ttu-id="8966e-267">Pravidlo, které jste dříve prohlédli nemá žádnou konfiguraci pro připojení k pravidla, takže místo toho chcete podívejte se na **v ze služby Active Directory – připojení uživatele k**.</span><span class="sxs-lookup"><span data-stu-id="8966e-267">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span></span>

![<span data-ttu-id="8966e-268">Karta pravidla připojení v editoru pravidel synchronizace</span><span class="sxs-lookup"><span data-stu-id="8966e-268">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="8966e-269">Obsah spojení pravidlo závisí na odpovídající možnosti vybrané v Průvodci instalací.</span><span class="sxs-lookup"><span data-stu-id="8966e-269">The content of the join rule depends on the matching option selected in the installation wizard.</span></span> <span data-ttu-id="8966e-270">Pro příchozí pravidlo vyhodnocení začíná na objekt v prostoru konektoru zdroje a každou skupinu v pravidlech spojení je vyhodnoceny v pořadí.</span><span class="sxs-lookup"><span data-stu-id="8966e-270">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span></span> <span data-ttu-id="8966e-271">Pokud se tak, aby odpovídaly právě jednoho objektu v úložišti metaverse pomocí jednoho pravidla spojení vyhodnotí zdrojový objekt, je objekty připojeni.</span><span class="sxs-lookup"><span data-stu-id="8966e-271">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span></span> <span data-ttu-id="8966e-272">Pokud byly vyhodnoceny všechna pravidla a není nalezena žádná shoda, bude použit typ odkazu na stránce popis.</span><span class="sxs-lookup"><span data-stu-id="8966e-272">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span></span> <span data-ttu-id="8966e-273">Pokud tuto konfiguraci je nastavený na **zřídit**, pak se vytvoří nový objekt v cílové úložiště metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-273">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span></span> <span data-ttu-id="8966e-274">Zřídit nový objekt úložiště metaverse a je také označován jako na **projektu** objektu úložiště metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-274">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span></span>

<span data-ttu-id="8966e-275">Spojení pravidla se vyhodnocují jenom jednou.</span><span class="sxs-lookup"><span data-stu-id="8966e-275">The join rules are only evaluated once.</span></span> <span data-ttu-id="8966e-276">Když jsou připojena objekt prostor konektoru a objektu úložiště metaverse, zůstanou připojené k, tak dlouho, dokud je stále splněna oboru synchronizačního pravidla.</span><span class="sxs-lookup"><span data-stu-id="8966e-276">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="8966e-277">Při vyhodnocování pravidel synchronizace, musí být pouze jeden synchronizační pravidlo s spojení pravidla definovaná v oboru.</span><span class="sxs-lookup"><span data-stu-id="8966e-277">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="8966e-278">Pokud se více pravidel synchronizace s pravidly spojení pro jeden objekt, je vržena chyba.</span><span class="sxs-lookup"><span data-stu-id="8966e-278">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="8966e-279">Z tohoto důvodu osvědčeným postupem je mít pouze jeden synchronizační pravidlo u připojení při více pravidel synchronizace jsou v oboru pro objekt definovaný.</span><span class="sxs-lookup"><span data-stu-id="8966e-279">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="8966e-280">V konfiguraci out-of-box synchronizace Azure AD Connect, můžete tato pravidla nalezen podle názvu a najít ty slovem **připojení** na konci názvu.</span><span class="sxs-lookup"><span data-stu-id="8966e-280">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span></span> <span data-ttu-id="8966e-281">Pravidlo synchronizace bez definováno žádné připojení k pravidel platí toky atributů při dalším synchronizačním pravidle propojeny objekty nebo zřídit nový objekt v cíl.</span><span class="sxs-lookup"><span data-stu-id="8966e-281">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span></span>

<span data-ttu-id="8966e-282">Pokud se podíváte na obrázku výše, uvidíte, že pravidlo se snaží připojit **objectSID** s **msExchMasterAccountSid** (Exchange) a **msRTCSIP-OriginatorSid** (Lync), který je co Očekáváme, že v účtu prostředků topologie doménové struktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-282">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="8966e-283">Můžete najít stejné pravidlo na všechny doménové struktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-283">You find the same rule on all forests.</span></span> <span data-ttu-id="8966e-284">Předpokladem je, že každá doménová struktura může být účtu nebo prostředek doménové struktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-284">The assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="8966e-285">Tato konfigurace taky funguje v případě, že mají účty, které za provozu v jedné doménové struktury a nemusí být připojen.</span><span class="sxs-lookup"><span data-stu-id="8966e-285">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="8966e-286">Transformace</span><span class="sxs-lookup"><span data-stu-id="8966e-286">Transformations</span></span>
<span data-ttu-id="8966e-287">V části transformace definuje všechny toky atributů, které platí pro cílový objekt, pokud jsou připojené objekty a obor filtru je splněné.</span><span class="sxs-lookup"><span data-stu-id="8966e-287">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span></span> <span data-ttu-id="8966e-288">Po návratu do **v ze služby Active Directory – uživatel AccountEnabled** synchronizační pravidlo, najít následující transformace:</span><span class="sxs-lookup"><span data-stu-id="8966e-288">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span></span>

![<span data-ttu-id="8966e-289">Transformace kartě editor synchronizované pravidla</span><span class="sxs-lookup"><span data-stu-id="8966e-289">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="8966e-290">Uvést do kontextu, v nasazení doménové struktury prostředků účtu, tato konfigurace se očekává, k vyhledání aktivovaný účet v doménové struktuře účtu a deaktivovaného účtu v doménové struktuře prostředku se nastavení Exchange a Lync.</span><span class="sxs-lookup"><span data-stu-id="8966e-290">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="8966e-291">Pravidlo synchronizace se díváte obsahuje atributy vyžadované pro přihlášení a tyto atributy musí procházet z doménové struktury je aktivovaný účet.</span><span class="sxs-lookup"><span data-stu-id="8966e-291">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span></span> <span data-ttu-id="8966e-292">Všechny tyto toky atributů jsou připravili v jedné synchronizační pravidlo.</span><span class="sxs-lookup"><span data-stu-id="8966e-292">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="8966e-293">Transformace může mít různé typy: Konstanta, přímo a výraz.</span><span class="sxs-lookup"><span data-stu-id="8966e-293">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="8966e-294">Konstantní toku vždy toky pevně zakódované hodnotu.</span><span class="sxs-lookup"><span data-stu-id="8966e-294">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="8966e-295">V případě výše vždy nastaví hodnotu **True** do atribut úložiště metaverse s názvem **accountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="8966e-295">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="8966e-296">Přímé toku vždy toků hodnotu atributu ve zdroji do atribut target jako-je.</span><span class="sxs-lookup"><span data-stu-id="8966e-296">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span></span>
* <span data-ttu-id="8966e-297">Typ třetí tok je výraz a umožňuje pro pokročilejší konfigurace.</span><span class="sxs-lookup"><span data-stu-id="8966e-297">The third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="8966e-298">Výraz jazyka je VBA (Visual Basic pro aplikace), takže uživatelé s prostředí systému Microsoft Office nebo VBScript rozpozná formátu.</span><span class="sxs-lookup"><span data-stu-id="8966e-298">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span></span> <span data-ttu-id="8966e-299">Atributy jsou uzavřené v hranatých závorkách [attributeName].</span><span class="sxs-lookup"><span data-stu-id="8966e-299">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="8966e-300">Názvy atributů a funkce jsou malá a velká písmena, ale editoru pravidla synchronizace vyhodnotí výrazy a zobrazit upozornění, pokud výraz není platný.</span><span class="sxs-lookup"><span data-stu-id="8966e-300">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span></span> <span data-ttu-id="8966e-301">Všechny výrazy jsou vyjádřeny na jeden řádek s vnořené funkce.</span><span class="sxs-lookup"><span data-stu-id="8966e-301">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="8966e-302">Pokud chcete zobrazit možnosti konfigurace jazyka, zde je toku pwdLastSet, ale s další komentáři vložit:</span><span class="sxs-lookup"><span data-stu-id="8966e-302">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (The evaluation for IIF) Is the attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (The True part of IIF) If it is, then from right to left, convert the AD time format to a .Net datetime, change it to the time format used by Azure AD, and finally convert it to a string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (The False part of IIF) Nothing to contribute
NULL
)
```

<span data-ttu-id="8966e-303">V tématu [Principy deklarativní zřizování výrazy](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) Další informace o jazyce výraz pro toky atributů.</span><span class="sxs-lookup"><span data-stu-id="8966e-303">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="8966e-304">Priorita</span><span class="sxs-lookup"><span data-stu-id="8966e-304">Precedence</span></span>
<span data-ttu-id="8966e-305">Jste nyní prohlédli některé jednotlivé synchronizační pravidla, ale pravidla spolupracují v konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="8966e-305">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span></span> <span data-ttu-id="8966e-306">V některých případech je hodnota atributu podílí z více pravidel synchronizace na stejný atribut target.</span><span class="sxs-lookup"><span data-stu-id="8966e-306">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span></span> <span data-ttu-id="8966e-307">V takovém případě přednost atributu slouží k určení, které atribut služby wins.</span><span class="sxs-lookup"><span data-stu-id="8966e-307">In this case, attribute precedence is used to determine which attribute wins.</span></span> <span data-ttu-id="8966e-308">Jako příklad podívejte se na atribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8966e-308">As an example, look at the attribute sourceAnchor.</span></span> <span data-ttu-id="8966e-309">Tento atribut je důležité atribut moct přihlásit k Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-309">This attribute is an important attribute to be able to sign in to Azure AD.</span></span> <span data-ttu-id="8966e-310">Můžete najít tok atributů pro tento atribut v dvě různá pravidla synchronizace **v ze služby Active Directory – uživatel AccountEnabled** a **v ze služby Active Directory – běžné uživatele**.</span><span class="sxs-lookup"><span data-stu-id="8966e-310">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="8966e-311">Z důvodu prioritu synchronizačního pravidla atribut sourceAnchor je podílí z doménové struktury s aktivovaný účet nejprve po několik objektů spojeno do objektu úložiště metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-311">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span></span> <span data-ttu-id="8966e-312">Pokud nejsou povolené účty, pak synchronizační modul používá pravidlo synchronizace catch-all **v ze služby Active Directory – běžné uživatele**.</span><span class="sxs-lookup"><span data-stu-id="8966e-312">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="8966e-313">Tato konfigurace zajistí, že i pro účty, kteří jsou zakázáni, stále existuje sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8966e-313">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![Příchozí pravidla synchronizace](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="8966e-315">Prioritu pro synchronizační pravidla nastavená ve skupinách, Průvodce instalací.</span><span class="sxs-lookup"><span data-stu-id="8966e-315">The precedence for Synchronization Rules is set in groups by the installation wizard.</span></span> <span data-ttu-id="8966e-316">Všechna pravidla ve skupině mají stejný název, ale jsou připojené k jiné připojeného adresáře.</span><span class="sxs-lookup"><span data-stu-id="8966e-316">All rules in a group have the same name, but they are connected to different connected directories.</span></span> <span data-ttu-id="8966e-317">Průvodce instalací poskytuje pravidlo **v ze služby Active Directory – připojení uživatele k** nejvyšší prioritu a iterace, přes všechny připojené adresáře AD.</span><span class="sxs-lookup"><span data-stu-id="8966e-317">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="8966e-318">Poté pokračuje v další skupiny pravidel v předdefinovaném pořadí.</span><span class="sxs-lookup"><span data-stu-id="8966e-318">It then continues with the next groups of rules in a predefined order.</span></span> <span data-ttu-id="8966e-319">Uvnitř skupiny se přidají pravidla v pořadí, ve kterém byly přidány konektory v průvodci.</span><span class="sxs-lookup"><span data-stu-id="8966e-319">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span></span> <span data-ttu-id="8966e-320">Pokud jiný konektor přidána prostřednictvím průvodce, přeuspořádají synchronizační pravidla a pravidla nový konektor jsou vloženy poslední v každé skupině.</span><span class="sxs-lookup"><span data-stu-id="8966e-320">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="8966e-321">Třeba umisťovat všechny společně</span><span class="sxs-lookup"><span data-stu-id="8966e-321">Putting it all together</span></span>
<span data-ttu-id="8966e-322">Víme teď dost o synchronizační pravidla, abyste mohli pochopit, jak funguje v konfiguraci s jinými pravidly synchronizace.</span><span class="sxs-lookup"><span data-stu-id="8966e-322">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span></span> <span data-ttu-id="8966e-323">Pokud se podíváte na uživatele a atributy, které jsou na úložiště metaverse podílí, pravidla se použijí v uvedeném pořadí:</span><span class="sxs-lookup"><span data-stu-id="8966e-323">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span></span>

| <span data-ttu-id="8966e-324">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="8966e-324">Name</span></span> | <span data-ttu-id="8966e-325">Komentář</span><span class="sxs-lookup"><span data-stu-id="8966e-325">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="8966e-326">V ze služby Active Directory – připojení uživatele</span><span class="sxs-lookup"><span data-stu-id="8966e-326">In from AD – User Join</span></span> |<span data-ttu-id="8966e-327">Pravidlo pro připojení objekty konektoru místa s úložiště metaverse.</span><span class="sxs-lookup"><span data-stu-id="8966e-327">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="8966e-328">V ze služby Active Directory – povolené uživatelské účty</span><span class="sxs-lookup"><span data-stu-id="8966e-328">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="8966e-329">Atributy, které jsou potřebné pro přihlášení ke službě Azure AD a Office 365.</span><span class="sxs-lookup"><span data-stu-id="8966e-329">Attributes required for sign-in to Azure AD and Office 365.</span></span> <span data-ttu-id="8966e-330">Chceme, aby tyto atributy z aktivovaný účet.</span><span class="sxs-lookup"><span data-stu-id="8966e-330">We want these attributes from the enabled account.</span></span> |
| <span data-ttu-id="8966e-331">V ze služby Active Directory – běžné uživatele ze systému Exchange</span><span class="sxs-lookup"><span data-stu-id="8966e-331">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="8966e-332">V seznamu pro globální adresa byly nalezeny atributy.</span><span class="sxs-lookup"><span data-stu-id="8966e-332">Attributes found in the Global Address List.</span></span> <span data-ttu-id="8966e-333">Předpokládáme, že kvality dat je vhodné v doménové struktuře, kde našli jsme poštovní schránky uživatele.</span><span class="sxs-lookup"><span data-stu-id="8966e-333">We assume the data quality is best in the forest where we have found the user’s mailbox.</span></span> |
| <span data-ttu-id="8966e-334">V ze služby Active Directory – běžné uživatele</span><span class="sxs-lookup"><span data-stu-id="8966e-334">In from AD – User Common</span></span> |<span data-ttu-id="8966e-335">V seznamu pro globální adresa byly nalezeny atributy.</span><span class="sxs-lookup"><span data-stu-id="8966e-335">Attributes found in the Global Address List.</span></span> <span data-ttu-id="8966e-336">V případě, že jsme nenašli poštovní schránku, můžete přispívat libovolného připojený k objektu hodnotu atributu.</span><span class="sxs-lookup"><span data-stu-id="8966e-336">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span></span> |
| <span data-ttu-id="8966e-337">V ze služby Active Directory – Exchange uživatele</span><span class="sxs-lookup"><span data-stu-id="8966e-337">In from AD – User Exchange</span></span> |<span data-ttu-id="8966e-338">Existuje pouze pokud byl zjištěn Exchange.</span><span class="sxs-lookup"><span data-stu-id="8966e-338">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="8966e-339">Ho toky všechny atributy Exchange infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-339">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="8966e-340">V ze služby Active Directory – uživatele aplikace Lync</span><span class="sxs-lookup"><span data-stu-id="8966e-340">In from AD – User Lync</span></span> |<span data-ttu-id="8966e-341">Existuje pouze pokud byla zjištěna aplikace Lync.</span><span class="sxs-lookup"><span data-stu-id="8966e-341">Only exists if Lync has been detected.</span></span> <span data-ttu-id="8966e-342">Ho toky všechny atributy Lync infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="8966e-342">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="8966e-343">Další kroky</span><span class="sxs-lookup"><span data-stu-id="8966e-343">Next steps</span></span>
* <span data-ttu-id="8966e-344">Další informace o konfiguraci modelu v [Principy deklarativní zřizování](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="8966e-344">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="8966e-345">Další informace o jazyk výrazů v [Principy deklarativní zřizování výrazy](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="8966e-345">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="8966e-346">Pokračujte ve čtení fungování konfigurace out-of-box [Principy uživatelů a kontaktů](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="8966e-346">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="8966e-347">Informace o tom, praktické změnit pomocí deklarativní zřizování v [jak provést změnu výchozí konfigurace](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="8966e-347">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="8966e-348">**Témata s přehledem**</span><span class="sxs-lookup"><span data-stu-id="8966e-348">**Overview topics**</span></span>

* [<span data-ttu-id="8966e-349">Synchronizace Azure AD Connect: pochopení a přizpůsobení synchronizace</span><span class="sxs-lookup"><span data-stu-id="8966e-349">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="8966e-350">Integrování místních identit do služby Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8966e-350">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

