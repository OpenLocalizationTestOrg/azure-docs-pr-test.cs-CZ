---
title: "Azure AD Connect: Upgrade z předchozí verze | Microsoft Docs"
description: "Vysvětluje hello různé metody tooupgrade toohello nejnovější verzi Azure Active Directory Connect, včetně místní upgrade a migrace dráha."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="9986a-103">Azure AD Connect: Upgrade z předchozí verze toohello nejnovější</span><span class="sxs-lookup"><span data-stu-id="9986a-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="9986a-104">Toto téma popisuje hello různé metody, které můžete použít tooupgrade nejnovější verze vaší služby Azure Active Directory (Azure AD) připojit instalace toohello.</span><span class="sxs-lookup"><span data-stu-id="9986a-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="9986a-105">Doporučujeme ponechat si sami aktuální s verzemi hello služby Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="9986a-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="9986a-106">Můžete také použít hello kroky v hello [kyvu migrace](#swing-migration) části při provedení podstatných změn v konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="9986a-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="9986a-107">Pokud chcete, aby tooupgrade z nástroje DirSync, přečtěte si téma [Upgrade ze synchronizačního nástroje služby Azure AD (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) místo.</span><span class="sxs-lookup"><span data-stu-id="9986a-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="9986a-108">Existuje několik různých strategií, které můžete použít tooupgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="9986a-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="9986a-109">Metoda</span><span class="sxs-lookup"><span data-stu-id="9986a-109">Method</span></span> | <span data-ttu-id="9986a-110">Popis</span><span class="sxs-lookup"><span data-stu-id="9986a-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="9986a-111">Automatický upgrade</span><span class="sxs-lookup"><span data-stu-id="9986a-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="9986a-112">Toto je hello nejsnazší pro zákazníky s rychlé instalace.</span><span class="sxs-lookup"><span data-stu-id="9986a-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="9986a-113">Místní upgrade</span><span class="sxs-lookup"><span data-stu-id="9986a-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="9986a-114">Pokud máte jeden server, můžete upgradovat hello instalace na místě na stejný server hello.</span><span class="sxs-lookup"><span data-stu-id="9986a-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="9986a-115">Dráha migrace</span><span class="sxs-lookup"><span data-stu-id="9986a-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="9986a-116">Dva servery můžete připravit jeden ze serverů hello s novou verzí hello nebo konfigurace a změnit hello active server, až budete připraveni.</span><span class="sxs-lookup"><span data-stu-id="9986a-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="9986a-117">Oprávnění informace najdete v tématu hello [oprávnění vyžadovaná pro upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="9986a-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="9986a-118">Poté, co jste povolili vaší nové Azure AD Connect server toostart synchronizace změn tooAzure AD, můžete nesmí vrátit zpět toousing DirSync nebo Azure AD Sync. Přechod na starší verzi z toolegacy klienty Azure AD Connect, včetně nástroje DirSync a Azure AD Sync, není podporována a může vést tooissues například ztráty dat ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9986a-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="9986a-119">Místní upgrade</span><span class="sxs-lookup"><span data-stu-id="9986a-119">In-place upgrade</span></span>
<span data-ttu-id="9986a-120">Místní upgrade funguje pro přechod z Azure AD Sync nebo Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="9986a-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="9986a-121">Nefunguje pro přesun z nástroje DirSync nebo řešení s Forefront Identity Manager (FIM) + konektoru služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9986a-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="9986a-122">Tato metoda je upřednostňovaný, pokud máte jeden server a o méně než 100 000 objektů.</span><span class="sxs-lookup"><span data-stu-id="9986a-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="9986a-123">Pokud se nějak změní toohello out-of-box synchronizační pravidla, úplný import a úplnou synchronizaci vzniknout po upgradu hello.</span><span class="sxs-lookup"><span data-stu-id="9986a-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="9986a-124">Tato metoda zajišťuje, že tuto novou konfiguraci hello je použité tooall stávající objekty v systému hello.</span><span class="sxs-lookup"><span data-stu-id="9986a-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="9986a-125">To běžet může trvat několik hodin v závislosti na hello počet objektů, které jsou v oboru hello synchronizační modul.</span><span class="sxs-lookup"><span data-stu-id="9986a-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="9986a-126">je pozastavená Hello normální rozdílová synchronizace scheduler (který ve výchozím nastavení synchronizuje každých 30 minut), ale pokračuje v synchronizaci hesel.</span><span class="sxs-lookup"><span data-stu-id="9986a-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="9986a-127">Můžete uvažovat o provádění hello místní upgrade během víkendu.</span><span class="sxs-lookup"><span data-stu-id="9986a-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="9986a-128">Pokud neexistují žádné změny toohello out-of-box konfigurace verze hello nové Azure AD Connect, pak normální Rozdílový import synchronizační spustí místo.</span><span class="sxs-lookup"><span data-stu-id="9986a-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Místní upgrade](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="9986a-130">Pokud jste udělali změny toohello out-of-box synchronizační pravidla, pak tato pravidla jsou vráceny zpět toohello výchozí konfigurace při upgradu.</span><span class="sxs-lookup"><span data-stu-id="9986a-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="9986a-131">toomake se, že bude konfiguraci nacházet mezi upgrady, ujistěte se, provést změny, jak se popisuje v [osvědčené postupy pro změnu výchozí konfigurace hello](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="9986a-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="9986a-132">Během upgradu na místě, může být zaváděné změny, které vyžadují toobe aktivity (včetně kroky úplný Import a úplnou synchronizaci) konkrétní synchronizace provést po dokončení upgradu.</span><span class="sxs-lookup"><span data-stu-id="9986a-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="9986a-133">toodefer takových aktivit, najdete v toosection [jak toodefer úplné synchronizace po upgradu](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="9986a-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="9986a-134">Postupná migrace</span><span class="sxs-lookup"><span data-stu-id="9986a-134">Swing migration</span></span>
<span data-ttu-id="9986a-135">Pokud máte komplexní nasazení nebo mnoho objektů, může to být nepraktické toodo místní upgrade na hello systému za provozu.</span><span class="sxs-lookup"><span data-stu-id="9986a-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="9986a-136">Pro některé zákazníky tento proces může trvat několik dní – a během této doby se zpracují žádné rozdílové změny.</span><span class="sxs-lookup"><span data-stu-id="9986a-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="9986a-137">Tuto metodu můžete také použít, když plánujete konfiguraci tooyour toomake významné změny a chcete, aby tootry je si před jejich jste nabídnutých toohello cloudu.</span><span class="sxs-lookup"><span data-stu-id="9986a-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="9986a-138">Hello doporučené metody pro tyto scénáře je toouse dráha migrace.</span><span class="sxs-lookup"><span data-stu-id="9986a-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="9986a-139">Je nutné (aspoň) dva servery – jednu aktivní a jeden pracovní server.</span><span class="sxs-lookup"><span data-stu-id="9986a-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="9986a-140">aktivní server Hello (ukázka s plnou blue řádků v hello následující obrázek) zodpovídá za hello active produkční zatížení.</span><span class="sxs-lookup"><span data-stu-id="9986a-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="9986a-141">Hello pracovní server (ukázka s přerušované čáry fialové) je připravená s novou verzí hello nebo konfigurace.</span><span class="sxs-lookup"><span data-stu-id="9986a-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="9986a-142">Pokud je plně připraven, se provádí tento server aktivní.</span><span class="sxs-lookup"><span data-stu-id="9986a-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="9986a-143">Hello předchozí active server, který teď má hello stará verze nebo konfigurace nainstalovaný, se provádí na testovacím serveru hello a upgradu.</span><span class="sxs-lookup"><span data-stu-id="9986a-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="9986a-144">dva servery Hello můžete použít různé verze.</span><span class="sxs-lookup"><span data-stu-id="9986a-144">hello two servers can use different versions.</span></span> <span data-ttu-id="9986a-145">Například aktivní server hello plánování toodecommission můžete použít Azure AD Sync, a hello nový pracovní server můžete použít Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="9986a-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="9986a-146">Pokud používáte dráha migrace toodevelop hello novou konfiguraci, jeho toohave vhodné hello shodovat s verzemi na dva servery.</span><span class="sxs-lookup"><span data-stu-id="9986a-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![Pracovní server](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="9986a-148">Někteří zákazníci dávají přednost toohave tři nebo čtyři servery pro tento scénář.</span><span class="sxs-lookup"><span data-stu-id="9986a-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="9986a-149">Pracovní server hello upgradován, nemáte záložní server pro [zotavení po havárii](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="9986a-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="9986a-150">Se tři nebo čtyři servery můžete připravit jednu sadu serverů primární nebo úsporného režimu s hello novou verzi, která zajišťuje, že existuje vždy pracovní server, který je připraven tootake přes.</span><span class="sxs-lookup"><span data-stu-id="9986a-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="9986a-151">Tyto kroky také fungovat toomove z Azure AD Sync nebo řešení s FIM + konektoru služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9986a-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="9986a-152">Tyto kroky nefungují pro nástroj DirSync, ale je hello stejnou dráha migrace metodu (také nazývané paralelní nasazení) s kroky pro nástroj DirSync v [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="9986a-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="9986a-153">Použít migraci tooupgrade dráha</span><span class="sxs-lookup"><span data-stu-id="9986a-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="9986a-154">Pokud používáte Azure AD Connect na serverech a plán tooonly zkontrolujte změnu konfigurace, ujistěte se, že aktivního serveru a testovacím serveru jsou obě pomocí hello stejnou verzi.</span><span class="sxs-lookup"><span data-stu-id="9986a-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="9986a-155">Tím je snazší toocompare rozdíly později.</span><span class="sxs-lookup"><span data-stu-id="9986a-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="9986a-156">Pokud provádíte upgrade ze služby Azure AD Sync, tyto servery mají různé verze.</span><span class="sxs-lookup"><span data-stu-id="9986a-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="9986a-157">Pokud provádíte upgrade ze starší verze služby Azure AD Connect, je vhodné toostart s hello dva servery, které jsou pomocí hello stejnou verzi, ale není to nutné.</span><span class="sxs-lookup"><span data-stu-id="9986a-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="9986a-158">Pokud jste provedli vlastní konfiguraci a pracovní server nemá, postupujte podle kroků hello pod [přesunout vlastní konfiguraci z toohello aktivní server hello pracovní server](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="9986a-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="9986a-159">Pokud provádíte upgrade ze starší verze služby Azure AD Connect, upgradujte hello pracovní server toohello nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="9986a-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="9986a-160">Při přesouvání z Azure AD Sync, nainstalujte Azure AD Connect na testovacím serveru.</span><span class="sxs-lookup"><span data-stu-id="9986a-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="9986a-161">Umožní hello synchronizační modul spustit úplný import a úplnou synchronizaci na testovacím serveru.</span><span class="sxs-lookup"><span data-stu-id="9986a-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="9986a-162">Ověřte, že novou konfiguraci hello nebyla způsobit neočekávané změny pomocí hello kroků v části "Ověřit" v [ověřte, zda text hello konfigurace serveru](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="9986a-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="9986a-163">Pokud něco není jako očekávané, správný, spusťte hello import a synchronizace a ověřte hello dat, dokud ho spokojeni, pomocí následujících kroků hello.</span><span class="sxs-lookup"><span data-stu-id="9986a-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="9986a-164">Přepnout hello pracovní server toobe hello aktivní server.</span><span class="sxs-lookup"><span data-stu-id="9986a-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="9986a-165">Toto je poslední krok hello "Přepínač active server" [ověřte, zda text hello konfigurace serveru](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="9986a-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="9986a-166">Pokud upgradujete Azure AD Connect, upgrade hello serveru, který je nyní v pracovní režimu toohello nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="9986a-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="9986a-167">Postupujte podle hello stejné kroky jako před tooget hello dat a konfigurace upgradovat.</span><span class="sxs-lookup"><span data-stu-id="9986a-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="9986a-168">Pokud jste upgradovali z Azure AD Sync, teď můžete vypnout a vyřadit z provozu starý server.</span><span class="sxs-lookup"><span data-stu-id="9986a-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="9986a-169">Přesunutí vlastní konfiguraci z pracovního serveru toohello hello aktivní server</span><span class="sxs-lookup"><span data-stu-id="9986a-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="9986a-170">Pokud jste provedli konfiguraci změny toohello aktivní server, je třeba toomake opravdu které hello stejné změny jsou použité toohello pracovní server.</span><span class="sxs-lookup"><span data-stu-id="9986a-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="9986a-171">Přesunout toohelp s tím, můžete použít hello [nástroje Azure AD Connect konfigurace dokumentace](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="9986a-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="9986a-172">Můžete přesunout hello vlastní synchronizační pravidla, že jste vytvořili pomocí prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9986a-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="9986a-173">Musíte použít jiné změny hello stejným způsobem jako na systémy a které nelze migrovat hello změny.</span><span class="sxs-lookup"><span data-stu-id="9986a-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="9986a-174">Hello [konfigurace dokumentace](https://github.com/Microsoft/AADConnectConfigDocumenter) vám může pomoct porovnávání hello dvěma systémy toomake se, že jsou identické.</span><span class="sxs-lookup"><span data-stu-id="9986a-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="9986a-175">Nástroj Hello může také pomoct při automatizaci hello se s postupem uvedeným v této části.</span><span class="sxs-lookup"><span data-stu-id="9986a-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="9986a-176">Budete potřebovat následující hello tooconfigure věcí hello stejný způsob na obou serverech:</span><span class="sxs-lookup"><span data-stu-id="9986a-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="9986a-177">Připojení toohello stejné doménové struktury</span><span class="sxs-lookup"><span data-stu-id="9986a-177">Connection toohello same forests</span></span>
* <span data-ttu-id="9986a-178">Všechny domény a filtrování organizační jednotky</span><span class="sxs-lookup"><span data-stu-id="9986a-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="9986a-179">Hello stejné volitelné funkce, jako je například synchronizace hesel a zpětný zápis hesla</span><span class="sxs-lookup"><span data-stu-id="9986a-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="9986a-180">**Přesunout vlastní synchronizační pravidla**</span><span class="sxs-lookup"><span data-stu-id="9986a-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="9986a-181">toomove vlastní synchronizační pravidla, hello následující:</span><span class="sxs-lookup"><span data-stu-id="9986a-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="9986a-182">Otevřete **editoru pravidel synchronizace** na váš aktivní server.</span><span class="sxs-lookup"><span data-stu-id="9986a-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="9986a-183">Vyberte vlastní pravidlo.</span><span class="sxs-lookup"><span data-stu-id="9986a-183">Select a custom rule.</span></span> <span data-ttu-id="9986a-184">Klikněte na tlačítko **exportovat**.</span><span class="sxs-lookup"><span data-stu-id="9986a-184">Click **Export**.</span></span> <span data-ttu-id="9986a-185">Otevře okno Poznámkový blok.</span><span class="sxs-lookup"><span data-stu-id="9986a-185">This brings up a Notepad window.</span></span> <span data-ttu-id="9986a-186">Uložte hello dočasný soubor s příponou PS1.</span><span class="sxs-lookup"><span data-stu-id="9986a-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="9986a-187">Díky tomu skript prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9986a-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="9986a-188">Zkopírujte hello PS1 souboru toohello pracovní server.</span><span class="sxs-lookup"><span data-stu-id="9986a-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="9986a-189">![Export pravidla synchronizace](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="9986a-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="9986a-190">Hello GUID konektoru se liší na hello pracovní server a musíte ji změnit.</span><span class="sxs-lookup"><span data-stu-id="9986a-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="9986a-191">Spustit tooget hello identifikátor GUID, **editoru pravidel synchronizace**, vyberte jednu z pravidla out-of-box hello této představují hello stejné připojení systému a klikněte na tlačítko **exportovat**.</span><span class="sxs-lookup"><span data-stu-id="9986a-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="9986a-192">Nahraďte hello GUID z hello pracovní server hello identifikátor GUID v souboru PS1.</span><span class="sxs-lookup"><span data-stu-id="9986a-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="9986a-193">V příkazovém řádku prostředí PowerShell spusťte soubor hello PS1.</span><span class="sxs-lookup"><span data-stu-id="9986a-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="9986a-194">Tím se vytvoří pravidlo vlastní synchronizace hello na pracovní server hello.</span><span class="sxs-lookup"><span data-stu-id="9986a-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="9986a-195">Tento postup opakujte pro všechny vaše vlastní pravidla.</span><span class="sxs-lookup"><span data-stu-id="9986a-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="9986a-196">Jak toodefer úplné synchronizace po upgradu</span><span class="sxs-lookup"><span data-stu-id="9986a-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="9986a-197">Během upgradu na místě, může být změny zavedl, které vyžadují toobe aktivity (včetně kroky úplný Import a úplnou synchronizaci) konkrétní synchronizace provést.</span><span class="sxs-lookup"><span data-stu-id="9986a-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="9986a-198">Například vyžadovat změny schématu konektor **úplný import** krok a out-of-box změny pravidlo synchronizace vyžadují **úplné synchronizace** krok toobe proveden v ovlivněných konektory.</span><span class="sxs-lookup"><span data-stu-id="9986a-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="9986a-199">Během upgradu, Azure AD Connect určí, jaké aktivity synchronizace se vyžadují a zaznamenává je jako *přepsání*.</span><span class="sxs-lookup"><span data-stu-id="9986a-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="9986a-200">V hello následující synchronizační cyklus plánovače synchronizace hello převezme tato přepsání a spustí je.</span><span class="sxs-lookup"><span data-stu-id="9986a-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="9986a-201">Jakmile přepsání úspěšně proveden, je odebrána.</span><span class="sxs-lookup"><span data-stu-id="9986a-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="9986a-202">Mohou nastat situace, kdy nechcete, aby tyto místní tootake přepsání okamžitě po provedení upgradu.</span><span class="sxs-lookup"><span data-stu-id="9986a-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="9986a-203">Například máte mnoho synchronizované objekty a chcete tyto kroky toooccur synchronizace mimo pracovní dobu.</span><span class="sxs-lookup"><span data-stu-id="9986a-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="9986a-204">tooremove tyto přepsání:</span><span class="sxs-lookup"><span data-stu-id="9986a-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="9986a-205">Během upgradu **zrušte zaškrtnutí políčka** hello možnost **po dokončení konfigurace spustit proces synchronizace hello**.</span><span class="sxs-lookup"><span data-stu-id="9986a-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="9986a-206">To zakáže plánovače synchronizace hello a zabrání synchronizační cyklus probíhají automaticky předtím, než se odeberou hello přepsání.</span><span class="sxs-lookup"><span data-stu-id="9986a-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="9986a-208">Po dokončení upgradu, spusťte následující rutinu toofind se přidaly které přepsání hello:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="9986a-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="9986a-209">přepsání Hello jsou specifické pro konektor.</span><span class="sxs-lookup"><span data-stu-id="9986a-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="9986a-210">V hello následující příklad, kroky úplný Import a úplnou synchronizaci byly přidány tooboth hello místní konektor AD a Azure AD Connector.</span><span class="sxs-lookup"><span data-stu-id="9986a-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="9986a-212">Poznamenejte si hello stávající přepsání, které byly přidány.</span><span class="sxs-lookup"><span data-stu-id="9986a-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="9986a-213">tooremove hello přepsání pro úplný import a úplnou synchronizaci v libovolné konektoru, spusťte následující rutinu hello:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="9986a-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="9986a-214">přepsání hello tooremove na všechny konektory, spusťte následující skript prostředí PowerShell hello:</span><span class="sxs-lookup"><span data-stu-id="9986a-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="9986a-215">tooresume hello Plánovač a spouštění hello následující rutiny:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="9986a-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="9986a-216">Mějte na paměti, postup synchronizace hello požadované tooexecute v nejdřívější usnadnění práce.</span><span class="sxs-lookup"><span data-stu-id="9986a-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="9986a-217">Můžete buď ručně provést tyto kroky, pomocí hello Synchronization Service Manager nebo přidat zpět pomocí rutiny Set-ADSyncSchedulerConnectorOverride hello přepsání hello.</span><span class="sxs-lookup"><span data-stu-id="9986a-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="9986a-218">tooadd hello přepsání pro úplný import a úplnou synchronizaci v libovolné konektoru, spusťte následující rutinu hello:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="9986a-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="9986a-219">Další kroky</span><span class="sxs-lookup"><span data-stu-id="9986a-219">Next steps</span></span>
<span data-ttu-id="9986a-220">Další informace o [integrace místních identit s Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="9986a-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
