---
title: "aspekty aaaSecurity proxy aplikace služby Azure AD | Microsoft Docs"
description: "Popisuje aspekty zabezpečení pomocí proxy aplikace služby Azure AD"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="2e057-103">Důležité informace o zabezpečení pro přístup k aplikacím vzdáleně pomocí proxy aplikace služby Azure AD</span><span class="sxs-lookup"><span data-stu-id="2e057-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="2e057-104">Tento článek vysvětluje, jak Proxy aplikace služby Active Directory Azure poskytuje zabezpečené službu pro publikování a vzdálený přístup k vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="2e057-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="2e057-105">Následující diagram ukazuje, jak Azure AD Hello umožňuje aplikacím místní tooyour zabezpečený vzdálený přístup.</span><span class="sxs-lookup"><span data-stu-id="2e057-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Diagram zabezpečený vzdálený přístup prostřednictvím proxy aplikace služby Azure AD](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="2e057-107">Výhody zabezpečení</span><span class="sxs-lookup"><span data-stu-id="2e057-107">Security benefits</span></span>

<span data-ttu-id="2e057-108">Azure AD Application Proxy nabízí následující výhody zabezpečení hello:</span><span class="sxs-lookup"><span data-stu-id="2e057-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="2e057-109">Ověřený přístup</span><span class="sxs-lookup"><span data-stu-id="2e057-109">Authenticated access</span></span> 

<span data-ttu-id="2e057-110">Pokud si zvolíte toouse předběžného ověřování Azure Active Directory, můžete přístup pouze ověřené připojení k síti.</span><span class="sxs-lookup"><span data-stu-id="2e057-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="2e057-111">Azure AD Application Proxy spoléhá na hello Azure AD služby tokenů zabezpečení (STS) pro všechny ověřování.</span><span class="sxs-lookup"><span data-stu-id="2e057-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="2e057-112">Předběžné ověření, ze své podstaty blokuje velký počet anonymní útoky, protože pouze ověřených identit můžete získat přístup k back-end aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="2e057-113">Pokud si zvolíte průchozí jako způsob předběžného ověření, neobdržíte této výhody.</span><span class="sxs-lookup"><span data-stu-id="2e057-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="2e057-114">Podmíněný přístup</span><span class="sxs-lookup"><span data-stu-id="2e057-114">Conditional access</span></span>

<span data-ttu-id="2e057-115">Použijete širší zásad řízení před tooyour sítě jsou vytvořeno připojení.</span><span class="sxs-lookup"><span data-stu-id="2e057-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="2e057-116">S [podmíněného přístupu](active-directory-conditional-access-azuread-connected-apps.md), můžete definovat omezení na to, jaký provoz je povoleno tooaccess aplikace back-end.</span><span class="sxs-lookup"><span data-stu-id="2e057-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="2e057-117">Můžete vytvořit zásady, které omezují přihlášení v závislosti na umístění, sílu ověřování a riziko profilu uživatele.</span><span class="sxs-lookup"><span data-stu-id="2e057-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="2e057-118">Můžete také použít zásady podmíněného přístupu tooconfigure služby Multi-Factor Authentication přidáním další úrovně ověřování uživatelů tooyour zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="2e057-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="2e057-119">Ukončení provozu</span><span class="sxs-lookup"><span data-stu-id="2e057-119">Traffic termination</span></span>

<span data-ttu-id="2e057-120">Veškerý provoz, je ukončen v cloudu hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="2e057-121">Proxy aplikace služby Azure AD je reverznímu proxy serveru, a proto všechny přenosy tooback-end aplikace se ukončuje na hello služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="2e057-122">Hello relace můžete získat obnovila pouze s hello back-end serverů, což znamená, že jsou vaše servery back-end není vystavený provoz toodirect HTTP.</span><span class="sxs-lookup"><span data-stu-id="2e057-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="2e057-123">Tato konfigurace znamená, že je líp chráněný před cílenými útoky.</span><span class="sxs-lookup"><span data-stu-id="2e057-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="2e057-124">Je odchozí veškerý přístup.</span><span class="sxs-lookup"><span data-stu-id="2e057-124">All access is outbound</span></span> 

<span data-ttu-id="2e057-125">Nepotřebujete tooopen příchozí připojení toohello podnikové síti.</span><span class="sxs-lookup"><span data-stu-id="2e057-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="2e057-126">Konektory Proxy aplikace použít pouze odchozí připojení toohello Azure AD Proxy aplikace služby, což znamená, že není nutné tooopen porty brány firewall pro příchozí spojení.</span><span class="sxs-lookup"><span data-stu-id="2e057-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="2e057-127">Tradiční proxy vyžaduje hraniční síti (označované také jako *DMZ*, *demilitarizovaná zóna*, nebo *monitorována podsíť*) a povolené toounauthenticated přístup připojení v hraniční síti hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="2e057-128">Tento scénář vyžaduje mnoho dodatečné investice do webové aplikace brány firewall provoz tooanalyze produkty a nabízet přidání ochrany toohello prostředí.</span><span class="sxs-lookup"><span data-stu-id="2e057-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="2e057-129">Pomocí Proxy aplikace nepotřebujete hraniční síti, protože všechna připojení jsou odchozí a provést přes zabezpečený kanál.</span><span class="sxs-lookup"><span data-stu-id="2e057-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="2e057-130">Další informace o konektory najdete v tématu [pochopit Azure AD Application Proxy konektory](application-proxy-understand-connectors.md).</span><span class="sxs-lookup"><span data-stu-id="2e057-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="2e057-131">Analýza cloudové škálování a machine learningu</span><span class="sxs-lookup"><span data-stu-id="2e057-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="2e057-132">Získáte ochranu nejmodernější zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="2e057-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="2e057-133">Protože je součástí služby Azure Active Directory, můžete využít Proxy aplikace [Azure AD Identity Protection](active-directory-identityprotection.md), s machine learning řízené intelligence a dat z hello Microsoft Security Response Center a jejichž šíření tým Dcu.</span><span class="sxs-lookup"><span data-stu-id="2e057-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="2e057-134">Společně jsme aktivně identifikovat ohroženými účty a nabízejí ochranu v reálném čase z s vysokým rizikem přihlášení. Jsme vzít v úvahu mnoha faktorech, například přístup z nakažených zařízení prostřednictvím zavedení anonymity sítě a netypických a pravděpodobně umístění přístup.</span><span class="sxs-lookup"><span data-stu-id="2e057-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="2e057-135">Mnoho tyto sestavy a události je již k dispozici prostřednictvím rozhraní API pro integraci s informace o zabezpečení a událostí systémy správy (SIEM).</span><span class="sxs-lookup"><span data-stu-id="2e057-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="2e057-136">Vzdálený přístup jako služby</span><span class="sxs-lookup"><span data-stu-id="2e057-136">Remote access as a service</span></span>

<span data-ttu-id="2e057-137">Nemáte tooworry o údržbu a opravy na místní servery.</span><span class="sxs-lookup"><span data-stu-id="2e057-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="2e057-138">Neopravené softwaru stále účty pro velký počet útoků.</span><span class="sxs-lookup"><span data-stu-id="2e057-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="2e057-139">Proxy aplikace služby Azure AD je internetových služba, která Microsoft vlastní, takže vždy získáte hello nejnovější opravy zabezpečení a upgrady.</span><span class="sxs-lookup"><span data-stu-id="2e057-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="2e057-140">tooimprove hello zabezpečení aplikací publikovaných serverem proxy aplikace služby Azure AD, jsme blokovat webové prohledávacího modulu robotů ze indexování a archivaci vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="2e057-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="2e057-141">Pokaždé, když robot webový prohledávací modul, pokusí se načíst nastavení robot pro publikované aplikace Proxy aplikace odpoví odpovědí s robots.txt soubor, který zahrnuje `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="2e057-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="2e057-142">Pod pokličkou hello</span><span class="sxs-lookup"><span data-stu-id="2e057-142">Under hello hood</span></span>

<span data-ttu-id="2e057-143">Proxy aplikace služby Azure AD se skládá ze dvou částí:</span><span class="sxs-lookup"><span data-stu-id="2e057-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="2e057-144">cloudové služby Hello: Tato služba běží v Azure a je, kde jsou vytvářeny připojení hello externí klient/uživatel.</span><span class="sxs-lookup"><span data-stu-id="2e057-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="2e057-145">[Hello místní konektor](application-proxy-understand-connectors.md): komponentu místní konektor hello čeká na požadavky od služby Proxy aplikace hello Azure AD a zpracovává připojení toohello interní aplikace.</span><span class="sxs-lookup"><span data-stu-id="2e057-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="2e057-146">Tok mezi hello konektoru a hello Proxy aplikace služby se zjistí při:</span><span class="sxs-lookup"><span data-stu-id="2e057-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="2e057-147">konektor Hello je nejdřív nastavit.</span><span class="sxs-lookup"><span data-stu-id="2e057-147">hello connector is first set up.</span></span>
* <span data-ttu-id="2e057-148">konektor Hello vrátí informace o konfiguraci z hello Proxy aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="2e057-149">Přístupu uživatele k publikované aplikaci.</span><span class="sxs-lookup"><span data-stu-id="2e057-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="2e057-150">Veškerá komunikace probíhá přes protokol SSL a vždy vycházet v toohello hello konektoru Proxy aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="2e057-151">Služba Hello je pouze odchozí.</span><span class="sxs-lookup"><span data-stu-id="2e057-151">hello service is outbound only.</span></span>

<span data-ttu-id="2e057-152">konektor Hello používá toohello tooauthenticate certifikátu klienta služby Proxy aplikace pro téměř všechna volání.</span><span class="sxs-lookup"><span data-stu-id="2e057-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="2e057-153">Hello pouze výjimka toothis proces je počáteční nastavení krok text hello, kde je vytvořeno hello klientský certifikát.</span><span class="sxs-lookup"><span data-stu-id="2e057-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="2e057-154">Instalace konektoru hello</span><span class="sxs-lookup"><span data-stu-id="2e057-154">Installing hello connector</span></span>

<span data-ttu-id="2e057-155">Pokud konektor hello je nejdřív nastavený, hello následující události toku proběhnout:</span><span class="sxs-lookup"><span data-stu-id="2e057-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="2e057-156">jako součást instalace hello hello konektoru se stane služby toohello registrace konektoru Hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="2e057-157">Uživatelé jsou výzvami tooenter přihlašovacích údajů správce Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2e057-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="2e057-158">Token získali z tohoto ověřování se předloží Azure AD Application Proxy služby toohello.</span><span class="sxs-lookup"><span data-stu-id="2e057-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="2e057-159">Hello Proxy aplikace služby vyhodnotí hello token.</span><span class="sxs-lookup"><span data-stu-id="2e057-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="2e057-160">Zajišťuje, že tento uživatel hello je, že správce společnosti v rámci hello klienta, který hello token vydán pro.</span><span class="sxs-lookup"><span data-stu-id="2e057-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="2e057-161">Pokud hello uživatel není správcem, ukončení procesu hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="2e057-162">konektor Hello generuje žádost o certifikát klienta a předává je, společně s hello tokenu, toohello Proxy aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="2e057-163">Služba Hello zase ověří hello token a podepíše žádost o certifikát klienta hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="2e057-164">konektor Hello používá hello klientský certifikát pro budoucí komunikaci s hello Proxy aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="2e057-165">konektor Hello provádí počáteční vyžádání hello systému konfiguračních dat ze služby hello pomocí jeho klientský certifikát a je nyní připraven tootake požadavky.</span><span class="sxs-lookup"><span data-stu-id="2e057-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="2e057-166">Aktualizuje se nastavení konfigurace hello</span><span class="sxs-lookup"><span data-stu-id="2e057-166">Updating hello configuration settings</span></span>

<span data-ttu-id="2e057-167">Vždy, když hello konfigurace nastavení aktualizací hello Proxy aplikace služby, hello následující události toku proběhnout:</span><span class="sxs-lookup"><span data-stu-id="2e057-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="2e057-168">konektor Hello připojuje toohello konfigurace koncového bodu v rámci hello Proxy aplikace služby pomocí jeho klientský certifikát.</span><span class="sxs-lookup"><span data-stu-id="2e057-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="2e057-169">Po hello klientský certifikát byl ověřen, vrátí hello Proxy aplikace služby konektoru toohello konfigurační data (například skupinu hello konektoru, která hello konektor musí být součástí).</span><span class="sxs-lookup"><span data-stu-id="2e057-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="2e057-170">Pokud je aktuální certifikát hello víc než 180 dní, konektor hello generuje novou žádost o certifikát, který efektivně aktualizace hello certifikát klienta za 180 dní.</span><span class="sxs-lookup"><span data-stu-id="2e057-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="2e057-171">Přístup k publikovaným aplikacím</span><span class="sxs-lookup"><span data-stu-id="2e057-171">Accessing published applications</span></span>

<span data-ttu-id="2e057-172">Při přístupu uživatelů k publikované aplikaci, hello následující události proběhnout mezi hello Proxy aplikace služby a konektor Proxy aplikace hello:</span><span class="sxs-lookup"><span data-stu-id="2e057-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="2e057-173">Služba Hello ověřuje hello uživatele pro aplikaci hello</span><span class="sxs-lookup"><span data-stu-id="2e057-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="2e057-174">Služba Hello umístí požadavek ve frontě konektoru hello</span><span class="sxs-lookup"><span data-stu-id="2e057-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="2e057-175">Konektor zpracuje požadavek hello z fronty hello</span><span class="sxs-lookup"><span data-stu-id="2e057-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="2e057-176">konektor Hello čeká na odpověď</span><span class="sxs-lookup"><span data-stu-id="2e057-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="2e057-177">uživatel toohello Hello služby datové proudy dat</span><span class="sxs-lookup"><span data-stu-id="2e057-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="2e057-178">zachovat čtení toolearn Další informace o co probíhá v každé z těchto kroků.</span><span class="sxs-lookup"><span data-stu-id="2e057-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="2e057-179">1. hello služby ověřuje hello uživatele pro aplikaci hello</span><span class="sxs-lookup"><span data-stu-id="2e057-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="2e057-180">Pokud jste nakonfigurovali toouse aplikace hello průchozí jako jeho metoda předběžného ověření, hello kroky v této části se přeskočí.</span><span class="sxs-lookup"><span data-stu-id="2e057-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="2e057-181">Pokud jste nakonfigurovali toopreauthenticate aplikace hello s Azure AD, jsou uživatelé přesměrovaného toohello tooauthenticate služby tokenů zabezpečení Azure AD a hello tyto kroky provést:</span><span class="sxs-lookup"><span data-stu-id="2e057-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="2e057-182">Proxy aplikací kontroluje všechny požadavky zásad podmíněného přístupu pro konkrétní aplikaci hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="2e057-183">Tento krok zajistí, že tento hello uživatel má přiřazeno toohello aplikace.</span><span class="sxs-lookup"><span data-stu-id="2e057-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="2e057-184">Pokud dvoustupňové ověření je potřeba, pořadí hello ověřování vyzve uživatele hello druhé metody ověřování.</span><span class="sxs-lookup"><span data-stu-id="2e057-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="2e057-185">Po všechny kontroly, hello tokenů zabezpečení Azure AD vydá token podepsané aplikace hello a hello přesměruje uživatele zpět toohello Proxy aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="2e057-186">Proxy aplikací ověřuje, že tento hello token vydán toocorrect hello aplikace.</span><span class="sxs-lookup"><span data-stu-id="2e057-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="2e057-187">Také provede další kontroly, například ujistit se, že hello byl podepsán token službou Azure AD a je to pořád se nachází v okně platný hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="2e057-188">Proxy aplikací nastaví tooindicate souboru cookie šifrované ověřování, který ověřování toohello aplikace došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="2e057-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="2e057-189">Hello souboru cookie zahrnuje vypršení platnosti časové razítko, který je založen na hello tokenu z Azure AD a další data, jako je na základě hello uživatelské jméno, které hello ověřování.</span><span class="sxs-lookup"><span data-stu-id="2e057-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="2e057-190">Hello soubor cookie se šifruje pomocí privátní klíč známý jenom toohello Proxy aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="2e057-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="2e057-191">Aplikace Proxy přesměrování hello uživatele zpět toohello původně požadované adresy URL.</span><span class="sxs-lookup"><span data-stu-id="2e057-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="2e057-192">Pokud se libovolná součást hello kroky předběžného ověření nezdaří, hello uživatele požadavek se odmítne a hello uživatele se zobrazí zprávu s upozorněním hello zdroj problému hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="2e057-193">2. hello služby umístí požadavek ve frontě konektoru hello</span><span class="sxs-lookup"><span data-stu-id="2e057-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="2e057-194">Konektory ponechat otevřené toohello Proxy aplikace služby odchozí připojení.</span><span class="sxs-lookup"><span data-stu-id="2e057-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="2e057-195">Když přijde žádost, fronty služby hello hello požadavek na jednom z hello otevřená připojení pro konektor toopick hello nahoru.</span><span class="sxs-lookup"><span data-stu-id="2e057-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="2e057-196">Hello žádost obsahuje položky z hello aplikace, třeba hlavičky žádosti hello, data ze souboru cookie hello zašifrovaná, hello uživatele provedení hello požadavku a hello požadavků ID.</span><span class="sxs-lookup"><span data-stu-id="2e057-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="2e057-197">I když se s žádostí hello pošle dat z šifrovaného souboru cookie hello ověřovacího souboru cookie hello samotné není.</span><span class="sxs-lookup"><span data-stu-id="2e057-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="2e057-198">3. hello konektor zpracuje požadavek hello z fronty hello.</span><span class="sxs-lookup"><span data-stu-id="2e057-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="2e057-199">Na základě žádosti hello provádí Proxy aplikace jednu hello následující akce:</span><span class="sxs-lookup"><span data-stu-id="2e057-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="2e057-200">Pokud požadavek hello je jednoduchá operace (například nejsou žádná data v textu hello, jako je se dosáhl standardu RESTful *získat* požadavek), konektor hello usnadňuje připojení toohello cílový interní prostředek a potom čeká na odpověď.</span><span class="sxs-lookup"><span data-stu-id="2e057-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="2e057-201">Pokud hello žádost obsahuje data přidružená v textu hello (například dosáhl standardu RESTful *POST* operaci), konektor hello vytvoří odchozí připojení pomocí hello klientský certifikát toohello Proxy aplikace instance.</span><span class="sxs-lookup"><span data-stu-id="2e057-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="2e057-202">Vytvoří tato připojení toorequest hello data a otevřete prostředek interní toohello připojení.</span><span class="sxs-lookup"><span data-stu-id="2e057-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="2e057-203">Po přijetí žádosti hello z konektoru hello, služba Proxy aplikace hello začne přijímat obsah z hello uživatele a předá konektor toohello dat.</span><span class="sxs-lookup"><span data-stu-id="2e057-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="2e057-204">Hello konektor, pak předá hello data toohello interního prostředku.</span><span class="sxs-lookup"><span data-stu-id="2e057-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="2e057-205">4. hello konektor čeká na odpověď.</span><span class="sxs-lookup"><span data-stu-id="2e057-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="2e057-206">Po hello požadavku a přenosu veškerý obsah toohello back end je dokončena, konektor hello čeká na odpověď.</span><span class="sxs-lookup"><span data-stu-id="2e057-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="2e057-207">Po obdržení odpovědi, díky hello konektoru Proxy aplikace služby toohello odchozí připojení, tooreturn hello podrobnosti záhlaví a začít streamování hello vracená data.</span><span class="sxs-lookup"><span data-stu-id="2e057-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="2e057-208">5. hello služby datové proudy dat toohello uživatele.</span><span class="sxs-lookup"><span data-stu-id="2e057-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="2e057-209">Některé zpracování hello aplikace může dojít, zde.</span><span class="sxs-lookup"><span data-stu-id="2e057-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="2e057-210">Pokud jste nakonfigurovali hlavičky tootranslate Proxy aplikace nebo adresy URL v aplikaci, se stane toto zpracování podle potřeby v tomto kroku.</span><span class="sxs-lookup"><span data-stu-id="2e057-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="2e057-211">Další kroky</span><span class="sxs-lookup"><span data-stu-id="2e057-211">Next steps</span></span>

[<span data-ttu-id="2e057-212">Aspekty topologie sítě při použití proxy aplikace služby Azure AD</span><span class="sxs-lookup"><span data-stu-id="2e057-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="2e057-213">Pochopení konektory proxy aplikace služby Azure AD</span><span class="sxs-lookup"><span data-stu-id="2e057-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
