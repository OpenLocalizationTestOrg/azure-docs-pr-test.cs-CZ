---
title: "aaaHow toobuild aplikaci, která se můžete přihlásit žádné uživatele Azure AD | Microsoft Docs"
description: "Podrobné pokyny pro vytváření aplikace, které můžou přihlásit uživatel jakéhokoli klienta Azure Active Directory, také známé jako aplikaci na více klientů."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/26/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 123ea8125fa3c308ce0f124cc58e85ec28d476d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="how-toosign-in-any-azure-active-directory-ad-user-using-hello-multi-tenant-application-pattern"></a><span data-ttu-id="7cc4d-103">Jak toosign v jakékoli pomocí uživatele Azure Active Directory (AD) hello vzor víceklientské aplikací</span><span class="sxs-lookup"><span data-stu-id="7cc4d-103">How toosign in any Azure Active Directory (AD) user using hello multi-tenant application pattern</span></span>
<span data-ttu-id="7cc4d-104">Pokud nabízíte softwaru jako toomany aplikace služby organizace, můžete nakonfigurovat vaše aplikace tooaccept přihlášení jakéhokoli klienta Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-104">If you offer a Software as a Service application toomany organizations, you can configure your application tooaccept sign-ins from any Azure AD tenant.</span></span>  <span data-ttu-id="7cc4d-105">Ve službě Azure AD se nazývá provedení víceklientské vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-105">In Azure AD this is called making your application multi-tenant.</span></span>  <span data-ttu-id="7cc4d-106">Budou uživatelé v jakékoli klientovi Azure AD může toosign v aplikaci tooyour po souhlas toouse svůj účet s vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-106">Users in any Azure AD tenant will be able toosign in tooyour application after consenting toouse their account with your application.</span></span>  

<span data-ttu-id="7cc4d-107">Pokud máte existující aplikaci, která má svůj vlastní účet systému nebo jiných druhů přihlášení od jiných poskytovatelů cloudu podporuje, klepněte přidání Azure AD přihlášení jakéhokoli klienta je jednoduché.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-107">If you have an existing application that has its own account system, or supports other kinds of sign-in from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="7cc4d-108">Právě svou aplikaci zaregistrovat, přidejte kód přihlášení přes OAuth2, OpenID Connect nebo SAML a umístí tlačítko "Přihlášení v with Microsoft" vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a "Sign In with Microsoft" button on your application.</span></span> <span data-ttu-id="7cc4d-109">Klikněte na následující tlačítko toolearn více informací o branding vaší aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-109">Click hello following button toolearn more about branding your application.</span></span>

<span data-ttu-id="7cc4d-110">[! [Přihlašovací tlačítko] [AAD-Sign-In]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-110">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="7cc4d-111">Tento článek předpokládá, že jste již obeznámeni s vytvoření jednoho klienta aplikace pro Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-111">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span>  <span data-ttu-id="7cc4d-112">Pokud si nejste, head, zálohujte toohello [domovské stránce průvodce vývojáře] [ AAD-Dev-Guide] a vyzkoušet některý z našich rychlé zahájení práce!</span><span class="sxs-lookup"><span data-stu-id="7cc4d-112">If you’re not, head back up toohello [developer guide homepage][AAD-Dev-Guide] and try one of our quick starts!</span></span>

<span data-ttu-id="7cc4d-113">Existují čtyři jednoduchých kroků tooconvert vaší aplikace do více klientů aplikace Azure AD:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-113">There are four simple steps tooconvert your application into an Azure AD multi-tenant app:</span></span>

1. <span data-ttu-id="7cc4d-114">Aktualizovat vaše aplikace registrace toobe víceklientské</span><span class="sxs-lookup"><span data-stu-id="7cc4d-114">Update your application registration toobe multi-tenant</span></span>
2. <span data-ttu-id="7cc4d-115">Aktualizovat/Common váš kód toosend požadavky toohello koncový bod</span><span class="sxs-lookup"><span data-stu-id="7cc4d-115">Update your code toosend requests toohello /common endpoint</span></span> 
3. <span data-ttu-id="7cc4d-116">Aktualizovat toohandle váš kód více hodnot vystavitele</span><span class="sxs-lookup"><span data-stu-id="7cc4d-116">Update your code toohandle multiple issuer values</span></span>
4. <span data-ttu-id="7cc4d-117">Rady pro pochopení souhlasu uživatele a správce a proveďte změny správný kód</span><span class="sxs-lookup"><span data-stu-id="7cc4d-117">Understand user and admin consent and make appropriate code changes</span></span>

<span data-ttu-id="7cc4d-118">Podívejme se na každý krok podrobně.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-118">Let’s look at each step in detail.</span></span> <span data-ttu-id="7cc4d-119">Můžete také přejít rovnou příliš[tento seznam víceklientské ukázky][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-119">You can also jump straight too[this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-toobe-multi-tenant"></a><span data-ttu-id="7cc4d-120">Aktualizace registrace toobe více klientů</span><span class="sxs-lookup"><span data-stu-id="7cc4d-120">Update registration toobe multi-tenant</span></span>
<span data-ttu-id="7cc4d-121">Ve výchozím nastavení jsou webové aplikaci nebo API registrace ve službě Azure AD jednoho klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-121">By default, web app/API registrations in Azure AD are single tenant.</span></span>  <span data-ttu-id="7cc4d-122">Můžete provést registrace víceklientské tak, že najdete na stránce vlastností hello registrace vaší aplikace v hello hello "více nevyužívá dělené tabulky" přepínač [portál Azure] [ AZURE-portal] a jeho nastavení příliš "Ano".</span><span class="sxs-lookup"><span data-stu-id="7cc4d-122">You can make your registration multi-tenant by finding hello “Multi-Tenanted” switch on hello properties page of your application registration in hello [Azure portal][AZURE-portal] and setting it too“Yes”.</span></span>

<span data-ttu-id="7cc4d-123">Všimněte si také, než aplikace můžete provedeny více klientů Azure AD vyžaduje hello identifikátor ID URI aplikace z toobe aplikace hello globálně jedinečný.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-123">Also note, before an application can be made multi-tenant, Azure AD requires hello App ID URI of hello application toobe globally unique.</span></span> <span data-ttu-id="7cc4d-124">Hello identifikátor ID URI aplikace je jedním ze způsobů hello, které aplikace je definována ve zprávách protokolu.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-124">hello App ID URI is one of hello ways an application is identified in protocol messages.</span></span>  <span data-ttu-id="7cc4d-125">Aplikace pomocí jednoho klienta je dostačující pro toobe identifikátor ID URI aplikace hello jedinečné v rámci tohoto klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-125">For a single tenant application, it is sufficient for hello App ID URI toobe unique within that tenant.</span></span>  <span data-ttu-id="7cc4d-126">Pro více klientů aplikace musí být globálně jedinečné, Azure AD můžete najít aplikaci hello napříč všichni klienti.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-126">For a multi-tenant application, it must be globally unique so Azure AD can find hello application across all tenants.</span></span>  <span data-ttu-id="7cc4d-127">Globální jedinečnosti se vynucuje vyžadováním toohave identifikátor ID URI aplikace hello název hostitele, který odpovídá ověřené domény klienta Azure AD hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-127">Global uniqueness is enforced by requiring hello App ID URI toohave a host name that matches a verified domain of hello Azure AD tenant.</span></span>  <span data-ttu-id="7cc4d-128">Například pokud hello název vašeho klienta se contoso.onmicrosoft.com pak platný identifikátor ID URI aplikace by být `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-128">For example, if hello name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span>  <span data-ttu-id="7cc4d-129">Pokud váš klient měli ověřené domény `contoso.com`, pak by také být platný identifikátor ID URI aplikace `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-129">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span>  <span data-ttu-id="7cc4d-130">Nastavení aplikace jako víceklientské se nezdaří, pokud hello identifikátor ID URI aplikace není postupujte podle tohoto vzoru.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-130">Setting an application as multi-tenant will fail if hello App ID URI doesn’t follow this pattern.</span></span>

<span data-ttu-id="7cc4d-131">Registrace nativního klienta jsou víceklientské ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-131">Native client registrations are multi-tenant by default.</span></span>  <span data-ttu-id="7cc4d-132">Tootake není třeba žádné akce toomake více klientů nativního klienta aplikace registrace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-132">You don’t need tootake any action toomake a native client application registration multi-tenant.</span></span>

## <a name="update-your-code-toosend-requests-toocommon"></a><span data-ttu-id="7cc4d-133">Aktualizace vašeho kódu toosend požadavky příliš/společné</span><span class="sxs-lookup"><span data-stu-id="7cc4d-133">Update your code toosend requests too/common</span></span>
<span data-ttu-id="7cc4d-134">V aplikaci jednoho klienta žádostí o přihlášení se odesílají klienta toohello přihlášení koncový bod.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-134">In a single tenant application, sign-in requests are sent toohello tenant’s sign-in endpoint.</span></span> <span data-ttu-id="7cc4d-135">Například pro contoso.onmicrosoft.com by hello koncový bod:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-135">For example, for contoso.onmicrosoft.com hello endpoint would be:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="7cc4d-136">Odeslání požadavků, že koncový bod tooa tenant můžete přihlásit uživatele (nebo Hosté) v tomto tooapplications klienta v něm.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-136">Requests sent tooa tenant’s endpoint can sign in users (or guests) in that tenant tooapplications in that tenant.</span></span>  <span data-ttu-id="7cc4d-137">S více klienty aplikací, aplikace hello neví předem hello uživatele klienta je, aby nemohli odesílat požadavky klienta tooa koncový bod.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-137">With a multi-tenant application, hello application doesn’t know up front what tenant hello user is from, so you can’t send requests tooa tenant’s endpoint.</span></span>  <span data-ttu-id="7cc4d-138">Místo toho jsou odeslány požadavky tooan koncový bod, který multiplexes napříč všechny klienty Azure AD:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-138">Instead, requests are sent tooan endpoint that multiplexes across all Azure AD tenants:</span></span>

    https://login.microsoftonline.com/common

<span data-ttu-id="7cc4d-139">Pokud Azure AD přijme požadavek na hello/běžné koncový bod, se přihlásí uživatel hello a v důsledku zjišťuje, které uživatel hello klienta je z.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-139">When Azure AD receives a request on hello /common endpoint, it signs hello user in and as a consequence discovers which tenant hello user is from.</span></span>  <span data-ttu-id="7cc4d-140">Hello/společný koncový bod funguje se všemi hello ověřovací protokoly podporovaný službou Azure AD: OpenID Connect, OAuth 2.0, SAML 2.0 a WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-140">hello /common endpoint works with all of hello authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="7cc4d-141">Hello přihlášení odpovědi toohello aplikace pak obsahuje token představující uživatele hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-141">hello sign-in response toohello application then contains a token representing hello user.</span></span>  <span data-ttu-id="7cc4d-142">Hodnota vystavitele Hello v tokenu hello informuje aplikace hello uživatele klienta je z.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-142">hello issuer value in hello token tells an application what tenant hello user is from.</span></span>  <span data-ttu-id="7cc4d-143">Pokud vrátí odpověď z hello nebo běžné koncový bod, hodnota vystavitele hello v tokenu hello bude odpovídat toohello uživatele klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-143">When a response returns from hello /common endpoint, hello issuer value in hello token will correspond toohello user’s tenant.</span></span>  <span data-ttu-id="7cc4d-144">Je důležité toonote hello/společný koncový bod není klienta a není vystavitele, je právě multiplexor.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-144">It’s important toonote hello /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span>  <span data-ttu-id="7cc4d-145">Při použití/Common, hello logiku v tokenech toovalidate vaše aplikace potřebuje toobe aktualizovat tootake to v úvahu.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-145">When using /common, hello logic in your application toovalidate tokens needs toobe updated tootake this into account.</span></span> 

<span data-ttu-id="7cc4d-146">Jako dříve uvedených, víceklientské aplikace by měl poskytovat také konzistentního prostředí přihlášení pro uživatele, následující hello branding pokyny aplikaci Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-146">As mentioned earlier, multi-tenant applications should also provide a consistent sign-in experience for users, following hello Azure AD application branding guidelines.</span></span> <span data-ttu-id="7cc4d-147">Klikněte na následující tlačítko toolearn více informací o branding vaší aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-147">Click hello following button toolearn more about branding your application.</span></span>

<span data-ttu-id="7cc4d-148">[! [Přihlašovací tlačítko] [AAD-Sign-In]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-148">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="7cc4d-149">Podívejme se na použití hello/Common hello koncový bod a implementaci kódu podrobněji.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-149">Let’s take a look at hello use of hello /common endpoint and your code implementation in more detail.</span></span>

## <a name="update-your-code-toohandle-multiple-issuer-values"></a><span data-ttu-id="7cc4d-150">Aktualizovat toohandle váš kód více hodnot vystavitele</span><span class="sxs-lookup"><span data-stu-id="7cc4d-150">Update your code toohandle multiple issuer values</span></span>
<span data-ttu-id="7cc4d-151">Webové aplikace a webové rozhraní API přijímat a ověřovat tokeny z Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-151">Web applications and web APIs receive and validate tokens from Azure AD.</span></span>  

> [!NOTE]
> <span data-ttu-id="7cc4d-152">Nativní klientské aplikace požadovat a přijímat tokeny z Azure AD, dělají Ano toosend je tooAPIs, kde se ověří.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-152">While native client applications request and receive tokens from Azure AD, they do so toosend them tooAPIs, where they are validated.</span></span>  <span data-ttu-id="7cc4d-153">Nativní aplikace neověřují tokeny a musí je považovat za neprůhledné.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-153">Native applications do not validate tokens and must treat them as opaque.</span></span>
> 
> 

<span data-ttu-id="7cc4d-154">Podívejme se na tom, jak aplikaci ověří tokeny obdrží z Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-154">Let’s look at how an application validates tokens it receives from Azure AD.</span></span>  <span data-ttu-id="7cc4d-155">Jednoho klienta aplikace bude obvykle trvat hodnotu koncového bodu jako:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-155">A single tenant application will normally take an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="7cc4d-156">a použít ho tooconstruct jako adresu URL metadat (v tomto případě OpenID Connect):</span><span class="sxs-lookup"><span data-stu-id="7cc4d-156">and use it tooconstruct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="7cc4d-157">toodownload dva zásadní informace, které jsou používané toovalidate tokeny: hello klienta podepisovací klíče a hodnoty vystavitele.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-157">toodownload two critical pieces of information that are used toovalidate tokens:  hello tenant’s signing keys and issuer value.</span></span>  <span data-ttu-id="7cc4d-158">Každý klient Azure AD má hodnotu jedinečný vystavitele hello formuláře:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-158">Each Azure AD tenant has a unique issuer value of hello form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="7cc4d-159">kde je hodnota GUID hello hello přejmenování bezpečnou verzi ID klienta hello hello klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-159">where hello GUID value is hello rename-safe version of hello tenant ID of hello tenant.</span></span>  <span data-ttu-id="7cc4d-160">Pokud kliknete na hello předcházející odkaz metadata pro `contoso.onmicrosoft.com`, zobrazí se tato hodnota vystavitele v dokumentu hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-160">If you click on hello preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in hello document.</span></span>

<span data-ttu-id="7cc4d-161">Když aplikace jednoho klienta ověří token, zkontroluje podpis hello hello tokenu proti hello podpisových klíčů z dokumentu metadat hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-161">When a single tenant application validates a token, it checks hello signature of hello token against hello signing keys from hello metadata document.</span></span> <span data-ttu-id="7cc4d-162">To umožňuje ho toomake zda hello vystavitele hodnotu v hello tokenu odpovídá hello, jeden a který byl nalezen v dokumentu metadat hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-162">This allows it toomake sure hello issuer value in hello token matches hello one that was found in hello metadata document.</span></span>

<span data-ttu-id="7cc4d-163">Od hello/běžný koncový bod neodpovídá tooa klienta a není vystavitele, při zkontrolujte hodnotu vystavitele hello hello metadat pro/běžné má podle šablony URL namísto skutečné hodnoty:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-163">Since hello /common endpoint doesn’t correspond tooa tenant and isn’t an issuer, when you examine hello issuer value in hello metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="7cc4d-164">Proto víceklientské aplikace nemůže ověřit tokeny pouhým odpovídající hodnotě vystavitele hello v metadatech hello s hello `issuer` hodnotu v tokenu hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-164">Therefore, a multi-tenant application can’t validate tokens just by matching hello issuer value in hello metadata with hello `issuer` value in hello token.</span></span>  <span data-ttu-id="7cc4d-165">Víceklientské aplikace potřebuje logiku toodecide vystavitele hodnot, které jsou platné a které jsou není, podle klienta hello ID část hodnoty vystavitele hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-165">A multi-tenant application needs logic toodecide which issuer values are valid and which are not, based on hello tenant ID portion of hello issuer value.</span></span>  

<span data-ttu-id="7cc4d-166">Například víceklientské aplikace umožňuje pouze přihlášení z konkrétní klientů, kteří zaregistrovali pro své služby, potom je nutné zkontrolovat hodnotě vystavitele hello nebo hello `tid` hodnoty v tokenu toomake hello se, že klienta je v jejich seznamu deklarace identity Odběratelé, kteří.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-166">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either hello issuer value or hello `tid` claim value in hello token toomake sure that tenant is in their list of subscribers.</span></span>  <span data-ttu-id="7cc4d-167">Pokud aplikace víceklientské pouze se zabývá jednotlivce a není rozhodnutí žádné přístupu na základě na klienty, potom ji můžete ignorovat hodnotě vystavitele hello zcela.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-167">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore hello issuer value altogether.</span></span>

<span data-ttu-id="7cc4d-168">V hello víceklientské ukázky v hello [související obsahu](#related-content) oddíl hello konci tohoto článku, vystavitele ověřování je zakázáno tooenable žádné toosign klienta Azure AD v.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-168">In hello multi-tenant samples in hello [Related Content](#related-content) section at hello end of this article, issuer validation is disabled tooenable any Azure AD tenant toosign in.</span></span>

<span data-ttu-id="7cc4d-169">Nyní Podíváme se na hello uživatelské prostředí pro uživatele, kteří se přihlašují toomulti klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-169">Now let’s look at hello user experience for users that are signing in toomulti-tenant applications.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="7cc4d-170">Principy uživatelů a správce souhlasu</span><span class="sxs-lookup"><span data-stu-id="7cc4d-170">Understanding user and admin consent</span></span>
<span data-ttu-id="7cc4d-171">Pro uživatele toosign v tooan aplikaci ve službě Azure AD musí být aplikace hello reprezentován v klientovi hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-171">For a user toosign in tooan application in Azure AD, hello application must be represented in hello user’s tenant.</span></span>  <span data-ttu-id="7cc4d-172">To umožňuje hello organizace toodo akce, jako je po přihlášení uživatelé z jejich klienta toohello aplikaci použít jedinečný zásady.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-172">This allows hello organization toodo things like apply unique policies when users from their tenant sign in toohello application.</span></span>  <span data-ttu-id="7cc4d-173">Pro jednoho klienta aplikace je tato registrace jednoduché. má hello, ten, který se stane při registraci aplikace hello v hello [portál Azure][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-173">For a single tenant application, this registration is simple; it’s hello one that happens when you register hello application in hello [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="7cc4d-174">Aplikace pomocí víceklientské hello počáteční registrace pro aplikace hello žije v klientovi Azure AD hello používá hello developer.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-174">For a multi-tenant application, hello initial registration for hello application lives in hello Azure AD tenant used by hello developer.</span></span>  <span data-ttu-id="7cc4d-175">Pokud se uživatel z jiné klienta přihlásí v aplikaci toohello hello poprvé, Azure AD je požádá tooconsent toohello oprávnění požadovaná aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-175">When a user from a different tenant signs in toohello application for hello first time, Azure AD asks them tooconsent toohello permissions requested by hello application.</span></span>  <span data-ttu-id="7cc4d-176">Pokud budou souhlasit, pak volat znázornění hello aplikace *instanční objekt* je vytvořen v hello uživatele klienta a přihlášení může pokračovat.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-176">If they consent, then a representation of hello application called a *service principal* is created in hello user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="7cc4d-177">Delegování je vytvořen také v hello adresář, který zaznamenává aplikaci toohello souhlasu hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-177">A delegation is also created in hello directory that records hello user’s consent toohello application.</span></span> <span data-ttu-id="7cc4d-178">V tématu [objekty aplikací a hlavní objekty služeb] [ AAD-App-SP-Objects] podrobnosti o aplikace hello aplikace a ServicePrincipal objekty a jejich vzájemných tooeach jiné.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-178">See [Application Objects and Service Principal Objects][AAD-App-SP-Objects] for details on hello application's Application and ServicePrincipal objects, and how they relate tooeach other.</span></span>

![Aplikace toosingle úroveň souhlasu][Consent-Single-Tier] 

<span data-ttu-id="7cc4d-180">Toto prostředí souhlasu je ovlivňován hello oprávnění požadovaná aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-180">This consent experience is affected by hello permissions requested by hello application.</span></span>  <span data-ttu-id="7cc4d-181">Azure AD podporuje dva druhy oprávnění jenom aplikace a delegovaným:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-181">Azure AD supports two kinds of permissions, app-only and delegated:</span></span>

* <span data-ttu-id="7cc4d-182">Delegovaná oprávnění uděluje tooact možnost hello aplikaci, můžete stejně jako přihlášeného uživatele pro podmnožinu hello věcí hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-182">A delegated permission grants an application hello ability tooact as a signed in user for a subset of hello things hello user can do.</span></span>  <span data-ttu-id="7cc4d-183">Například můžete udělit aplikace hello delegovaná oprávnění tooread hello přihlášení uživatele kalendáře.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-183">For example, you can grant an application hello delegated permission tooread hello signed in user’s calendar.</span></span>
* <span data-ttu-id="7cc4d-184">Jen aplikace je povoleno přímo toohello identitu aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-184">An app-only permission is granted directly toohello identity of hello application.</span></span>  <span data-ttu-id="7cc4d-185">Například můžete udělit jenom aplikace hello oprávnění jen aplikace tooread hello seznam uživatelů v klientovi, bez ohledu na to, kdo je přihlášený toohello aplikace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-185">For example, you can grant an application hello app-only permission tooread hello list of users in a tenant, regardless of who is signed in toohello application.</span></span>

<span data-ttu-id="7cc4d-186">Některá oprávnění může být svolení tooby běžný uživatel, zatímco jiné vyžadují souhlas správce klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-186">Some permissions can be consented tooby a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="7cc4d-187">Správce souhlasu</span><span class="sxs-lookup"><span data-stu-id="7cc4d-187">Admin consent</span></span>
<span data-ttu-id="7cc4d-188">Oprávnění jen aplikace vždy vyžadovat souhlas správce klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-188">App-only permissions always require a tenant administrator’s consent.</span></span>  <span data-ttu-id="7cc4d-189">Pokud vaše aplikace požaduje oprávnění jen aplikace a uživatel se pokusí toosign v aplikaci toohello, chybová zpráva zobrazí se, že uživatel hello není možné tooconsent.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-189">If your application requests an app-only permission and a user tries toosign in toohello application, an error message will be displayed saying hello user isn’t able tooconsent.</span></span>

<span data-ttu-id="7cc4d-190">Některé přidělená oprávnění také vyžadovat souhlas správce klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-190">Certain delegated permissions also require a tenant administrator’s consent.</span></span>  <span data-ttu-id="7cc4d-191">Například hello možnost toowrite back tooAzure AD jako hello přihlášený uživatel vyžaduje souhlas správce klienta.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-191">For example, hello ability toowrite back tooAzure AD as hello signed in user requires a tenant administrator’s consent.</span></span>  <span data-ttu-id="7cc4d-192">Například oprávnění jen pro aplikace Pokud běžného uživatele pokusí toosign v tooan aplikace, která požaduje delegované oprávnění, která vyžaduje souhlas správce vaší aplikace dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-192">Like app-only permissions, if an ordinary user tries toosign in tooan application that requests a delegated permission that requires administrator consent, your application will receive an error.</span></span>  <span data-ttu-id="7cc4d-193">Zda vyžaduje oprávnění správce souhlas je dáno hello vývojáře, která publikuje hello prostředků, může být v dokumentaci hello k hello prostředků.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-193">Whether or not a permission requires admin consent is determined by hello developer that published hello resource, and can be found in hello documentation for hello resource.</span></span>  <span data-ttu-id="7cc4d-194">Odkazy tootopics popisující hello dostupná oprávnění pro hello Azure AD Graph API a rozhraní Microsoft Graph API jsou v hello [související obsahu](#related-content) tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-194">Links tootopics describing hello available permissions for hello Azure AD Graph API and Microsoft Graph API are in hello [Related Content](#related-content) section of this article.</span></span>

<span data-ttu-id="7cc4d-195">Pokud vaše aplikace používá oprávnění, která vyžadovat souhlas správce, musíte toohave gesto například tlačítko nebo odkaz, kde Dobrý den, správce můžete zahájit hello akce.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-195">If your application uses permissions that require admin consent, you need toohave a gesture such as a button or link where hello admin can initiate hello action.</span></span>  <span data-ttu-id="7cc4d-196">žádost o Hello vaše aplikace odešle pro tato akce je obvykle požadavek ověřování OAuth2/OpenID Connect, ale který také obsahuje hello `prompt=admin_consent` parametr řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-196">hello request your application sends for this action is a usual OAuth2/OpenID Connect authorization request, but that also includes hello `prompt=admin_consent` query string parameter.</span></span>  <span data-ttu-id="7cc4d-197">Jakmile se dá souhlas Dobrý den, správce a hello instanční objekt se vytvoří v klientovi hello zákazníka, následných žádostí o přihlášení není nutné hello `prompt=admin_consent` parametr.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-197">Once hello admin has consented and hello service principal is created in hello customer’s tenant, subsequent sign-in requests do not need hello `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="7cc4d-198">Vzhledem k tomu, že správce hello se rozhodla, že hello požadovaná oprávnění jsou přijatelné, žádné jiné uživatelům v klientovi hello se zobrazí výzva k vyjádření souhlasu od tohoto okamžiku.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-198">Since hello administrator has decided hello requested permissions are acceptable, no other users in hello tenant will be prompted for consent from that point forward.</span></span>

<span data-ttu-id="7cc4d-199">Hello `prompt=admin_consent` parametru lze také aplikace, které žádostí o oprávnění, které nevyžadují souhlas správce.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-199">hello `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="7cc4d-200">To se provádí při hello aplikace vyžaduje prostředí kde Dobrý den, správce klienta "zaregistruje" jednu čas a žádné jiné uživateli zobrazí výzva k vyjádření souhlasu od tohoto okamžiku na.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-200">This is done when hello applicaton requires an experience where hello tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="7cc4d-201">Pokud aplikace vyžaduje souhlas správce a správce přihlášení v ale hello `prompt=admin_consent` parametr neposílají, dobrý den, správce se úspěšně souhlas toohello aplikace **pouze ke svému uživatelskému účtu**.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-201">If an application requires admin consent, and an admin signs in but hello `prompt=admin_consent` parameter is not sent, hello admin will successfully consent toohello application **only for their user account**.</span></span>  <span data-ttu-id="7cc4d-202">Běžní uživatelé stále nebude možné toosign v a aplikace toohello souhlasu.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-202">Regular users will still not be able toosign in and consent toohello application.</span></span>  <span data-ttu-id="7cc4d-203">To je užitečné, pokud chcete toogive hello klienta správce hello možnost tooexplore aplikace před povolením přístupu jiných uživatelů.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-203">This is useful if you want toogive hello tenant administrator hello ability tooexplore your application before allowing other users access.</span></span>

<span data-ttu-id="7cc4d-204">Správce klienta můžete zakázat možnost hello tooapplications tooconsent běžní uživatelé.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-204">A tenant administrator can disable hello ability for regular users tooconsent tooapplications.</span></span>  <span data-ttu-id="7cc4d-205">Pokud tato možnost je vypnuta, je vyžadováno pro toobe aplikace hello nastavit v klientovi hello vždy souhlas správce.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-205">If this capability is disabled, admin consent is always required for hello application toobe set up in hello tenant.</span></span>  <span data-ttu-id="7cc4d-206">Pokud chcete tootest vaší aplikace pomocí běžných uživatelských souhlasu zakázaná, můžete najít hello konfigurace přepínače v klientovi Azure AD hello konfigurační oddíl hello [portál Azure][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-206">If you want tootest your application with regular user consent disabled, you can find hello configuration switch in hello Azure AD tenant configuration section of hello [Azure portal][AZURE-portal].</span></span>

> [!NOTE]
> <span data-ttu-id="7cc4d-207">Některé aplikace mají prostředí běžní uživatelé jsou možné tooconsent původně, kde novější hello aplikace může zahrnovat hello správce a oprávnění k žádostem vyžadující souhlas správce.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-207">Some applications want an experience where regular users are able tooconsent initially, and later hello application can involve hello administrator and request permissions that require admin consent.</span></span>  <span data-ttu-id="7cc4d-208">Neexistuje žádný způsob, jak toodo to s registrací jednu aplikaci ve službě Azure AD ještě dnes.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-208">There is no way toodo this with a single application registration in Azure AD today.</span></span>  <span data-ttu-id="7cc4d-209">koncový bod v2 Hello nadcházející Azure AD vám umožní aplikace toorequest oprávnění za běhu, místo v době registrace, která vám umožní tento scénář.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-209">hello upcoming Azure AD v2 endpoint will allow applications toorequest permissions at runtime, instead of at registration time, which will enable this scenario.</span></span>  <span data-ttu-id="7cc4d-210">Další informace najdete v tématu hello [Příručka vývojáře v2 modelu aplikace Azure AD][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-210">For more information, see hello [Azure AD App Model v2 Developer Guide][AAD-V2-Dev-Guide].</span></span>
> 
> 

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="7cc4d-211">Souhlasu a vícevrstvé aplikace</span><span class="sxs-lookup"><span data-stu-id="7cc4d-211">Consent and multi-tier applications</span></span>
<span data-ttu-id="7cc4d-212">Aplikace může mít několik vrstev, každý reprezentován vlastní registraci ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-212">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span>  <span data-ttu-id="7cc4d-213">Nativní aplikace, která volá webové rozhraní API nebo webovou aplikaci, například volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-213">For example, a native application that calls a web API, or a web application that calls a web API.</span></span>  <span data-ttu-id="7cc4d-214">V obou případech hello klient (nativní aplikaci nebo webové aplikace) požaduje oprávnění toocall hello prostředků (webového rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="7cc4d-214">In both of these cases, hello client (native app or web app) requests permissions toocall hello resource (web API).</span></span>  <span data-ttu-id="7cc4d-215">Pro klienta toobe hello dá souhlas úspěšně do klienta zákazníka, musí všechny prostředky toowhich požaduje oprávnění již existují v klientovi hello zákazníka.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-215">For hello client toobe successfully consented into a customer’s tenant, all resources toowhich it requests permissions must already exist in hello customer’s tenant.</span></span>  <span data-ttu-id="7cc4d-216">Pokud není tato podmínka splněná, Azure AD vrátí chybu, která hello prostředků musí být přidán jako první.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-216">If this condition isn’t met, Azure AD will return an error that hello resource must be added first.</span></span>

<span data-ttu-id="7cc4d-217">**Několik vrstev v jednoho klienta**</span><span class="sxs-lookup"><span data-stu-id="7cc4d-217">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="7cc4d-218">Může to být problém, pokud vaše logické aplikace se skládá ze dvou nebo více aplikací registrace, například klienta a prostředků.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-218">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span>  <span data-ttu-id="7cc4d-219">Jak můžete získat hello prostředků do klienta zákazníka hello první?</span><span class="sxs-lookup"><span data-stu-id="7cc4d-219">How do you get hello resource into hello customer tenant first?</span></span>  <span data-ttu-id="7cc4d-220">Azure AD vysvětluje tento případ povolením klienta a toobe prostředků dá souhlas v jediném kroku.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-220">Azure AD covers this case by enabling client and resource toobe consented in a single step.</span></span> <span data-ttu-id="7cc4d-221">Hello uživateli se zobrazí celkový součet hello hello oprávnění požadoval hello klienta a prostředků na stránku souhlasu hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-221">hello user sees hello sum total of hello permissions requested by both hello client and resource on hello consent page.</span></span>  <span data-ttu-id="7cc4d-222">tooenable toto chování registrace aplikace hello prostředků musí obsahovat ID aplikace hello klienta jako `knownClientApplications` v manifestu aplikace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-222">tooenable this behavior, hello resource’s application registration must include hello client’s App ID as a `knownClientApplications` in its application manifest.</span></span>  <span data-ttu-id="7cc4d-223">Například:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-223">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="7cc4d-224">Tuto vlastnost lze aktualizovat prostřednictvím hello prostředků [manifestu aplikace][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-224">This property can be updated via hello resource [application’s manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="7cc4d-225">Tento postup je znázorněn v vícevrstvé nativního klienta volání ukázkové webové rozhraní API v hello [související obsahu](#related-content) oddíl hello konci tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-225">This is demonstrated in a multi-tier native client calling web API sample in hello [Related Content](#related-content) section at hello end of this article.</span></span> <span data-ttu-id="7cc4d-226">Hello následující diagram přehledně souhlasu pro vícevrstvé aplikace s zaregistrovaný v jednoho klienta:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-226">hello following diagram provides an overview of consent for a multi-tier app registered in a single tenant :</span></span>

![Souhlas toomulti vrstvě známé klientské aplikace][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="7cc4d-228">**Několik vrstev v několika klientech**</span><span class="sxs-lookup"><span data-stu-id="7cc4d-228">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="7cc4d-229">Podobný případ se stane, když jsou v jiných klientů zaregistrované hello různých vrstev aplikace.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-229">A similar case happens if hello different tiers of an application are registered in different tenants.</span></span>  <span data-ttu-id="7cc4d-230">Představte si třeba hello případ vytváření nativní klientskou aplikaci, která volá hello rozhraní API Office 365 Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-230">For example, consider hello case of building a native client application that calls hello Office 365 Exchange Online API.</span></span>  <span data-ttu-id="7cc4d-231">toodevelop hello nativní aplikaci a novějším pro toorun nativní aplikace hello v klientovi zákazníka, hello Exchange Online instanční objekt musí být k dispozici.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-231">toodevelop hello native application, and later for hello native application toorun in a customer’s tenant, hello Exchange Online service principal must be present.</span></span>  <span data-ttu-id="7cc4d-232">V takovém případě hello developer a k zákaznickým, musí si koupit Exchange Online pro hello služby hlavní toobe vytvořené v svým klientům.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-232">In this case, hello developer and customer must purchase Exchange Online for hello service principal toobe created in their tenants.</span></span>  

<span data-ttu-id="7cc4d-233">V případě hello rozhraní API vytvořené v organizaci než Microsoft musí vývojář hello hello rozhraní API tooprovide způsob, jak pro své zákazníky tooconsent hello aplikaci do klientů svým zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-233">In hello case of an API built by an organization other than Microsoft, hello developer of hello API needs tooprovide a way for their customers tooconsent hello application into their customers' tenants.</span></span> <span data-ttu-id="7cc4d-234">Hello doporučujeme návrhu je pro hello 3. stran vývojáře toobuild hello rozhraní API, tak, aby také může fungovat jako tooimplement webového klienta, registrace:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-234">hello recommended design is for hello 3rd party developer toobuild hello API such that it can also function as a web client tooimplement sign-up :</span></span>

1. <span data-ttu-id="7cc4d-235">Postupujte podle hello dřívější části tooensure hello API implementuje požadavky na registraci nebo kód víceklientské aplikace hello</span><span class="sxs-lookup"><span data-stu-id="7cc4d-235">Follow hello earlier sections tooensure hello API implements hello multi-tenant application registration/code requirements</span></span>
2. <span data-ttu-id="7cc4d-236">Kromě toho tooexposing hello rozhraní API obory nebo role, ujistěte se registrace hello zahrnuje hello "přihlášení a čtení profilu uživatele" oprávnění Azure AD (poskytuje se ve výchozím nastavení)</span><span class="sxs-lookup"><span data-stu-id="7cc4d-236">In addition tooexposing hello API's scopes/roles, ensure hello registration includes hello "Sign in and read user profile" Azure AD permission (provided by default)</span></span>
3. <span data-ttu-id="7cc4d-237">Implementovat sign v nebo registrace-množství stránku hello webovému klientovi, následující hello [souhlas správce](#admin-consent) pokyny uvedenými výše</span><span class="sxs-lookup"><span data-stu-id="7cc4d-237">Implement a sign-in/sign-up page in hello web client, following hello [admin consent](#admin-consent) guidance discussed earlier</span></span> 
4. <span data-ttu-id="7cc4d-238">Jakmile hello uživatel souhlasí toohello aplikace, hello service principal a souhlasu delegování odkazy jsou vytvořené v jejich klienta a nativní aplikace hello mohou získat tokeny pro hello rozhraní API</span><span class="sxs-lookup"><span data-stu-id="7cc4d-238">Once hello user consents toohello application, hello service principal and consent delegation links are created in their tenant, and hello native application can get tokens for hello API</span></span>

<span data-ttu-id="7cc4d-239">Následující diagram Hello poskytuje přehled o souhlas pro vícevrstvé aplikace s zaregistrovaný v jiných klientů:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-239">hello following diagram provides an overview of consent for a multi-tier app registered in different tenants:</span></span>

![Více stran aplikace toomulti úroveň souhlasu][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="7cc4d-241">Odvolání souhlasu</span><span class="sxs-lookup"><span data-stu-id="7cc4d-241">Revoking Consent</span></span>
<span data-ttu-id="7cc4d-242">Uživatelé a správci můžete odvolat souhlas tooyour aplikace kdykoli:</span><span class="sxs-lookup"><span data-stu-id="7cc4d-242">Users and administrators can revoke consent tooyour application at any time:</span></span>

* <span data-ttu-id="7cc4d-243">Uživatelé odvolat přístup k tooindividual aplikacím tím, že odebere je ze své [přístup k aplikacím panely] [ AAD-Access-Panel] seznamu.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-243">Users revoke access tooindividual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="7cc4d-244">Správci odvolat přístup tooapplications je odstranit z Azure AD pomocí hello Azure AD management části hello [portál Azure][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-244">Administrators revoke access tooapplications by removing them from Azure AD using hello Azure AD management section of hello [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="7cc4d-245">Pokud správce souhlasí tooan aplikací pro všechny uživatele v klientovi, uživatelé nelze odvolat přístup jednotlivě.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-245">If an administrator consents tooan application for all users in a tenant, users cannot revoke access individually.</span></span>  <span data-ttu-id="7cc4d-246">Pouze správce hello můžete odvolat přístup a jenom pro celý aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-246">Only hello administrator can revoke access, and only for hello whole application.</span></span>

### <a name="consent-and-protocol-support"></a><span data-ttu-id="7cc4d-247">Souhlasu a podpora protokolu</span><span class="sxs-lookup"><span data-stu-id="7cc4d-247">Consent and Protocol Support</span></span>
<span data-ttu-id="7cc4d-248">Souhlas se podporuje ve službě Azure AD prostřednictvím hello OAuth, OpenID Connect, WS-Federation a protokoly SAML.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-248">Consent is supported in Azure AD via hello OAuth, OpenID Connect, WS-Federation, and SAML protocols.</span></span>  <span data-ttu-id="7cc4d-249">Hello protokoly SAML a WS-Federation nepodporují hello `prompt=admin_consent` parametr, tak je možné pomocí OAuth a OpenID Connect jenom souhlas správce.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-249">hello SAML and WS-Federation protocols do not support hello `prompt=admin_consent` parameter, so admin consent is only possible via OAuth and OpenID Connect.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="7cc4d-250">Víceklientské aplikace a ukládání do mezipaměti přístupové tokeny</span><span class="sxs-lookup"><span data-stu-id="7cc4d-250">Multi-Tenant Applications and Caching Access Tokens</span></span>
<span data-ttu-id="7cc4d-251">Víceklientským aplikacím můžete také získat tokeny toocall přístup k rozhraní API, které jsou chráněné službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-251">Multi-tenant applications can also get access tokens toocall APIs that are protected by Azure AD.</span></span>  <span data-ttu-id="7cc4d-252">Běžnou chybou při hello Active Directory Authentication Library (ADAL) pomocí víceklientské aplikace, je požadavek tooinitially token pro uživatele s využitím/Common, obdrží odpověď a pak požádat o další token pro tomuto uživateli také pomocí/Common.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-252">A common error when using hello Active Directory Authentication Library (ADAL) with a multi-tenant application, is tooinitially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span>  <span data-ttu-id="7cc4d-253">Vzhledem k tomu, že hello odpověď z Azure AD pochází z klienta, není nebo běžné ADAL token hello jako pocházející z klienta hello ukládá do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-253">Since hello response from Azure AD comes from a tenant, not /common, ADAL caches hello token as being from hello tenant.</span></span> <span data-ttu-id="7cc4d-254">Hello následných volání tooget příliš/společné, přístupový token pro položku mezipaměti hello uživatele neúspěchy hello a hello uživatele je výzvami toosign v akci.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-254">hello subsequent call too/common tooget an access token for hello user misses hello cache entry, and hello user is prompted toosign in again.</span></span>  <span data-ttu-id="7cc4d-255">tooavoid chybějící hello mezipaměti, ověřte zda následující volání pro již přihlášeného uživatele jsou vytvářeny koncový bod toohello tenant.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-255">tooavoid missing hello cache, make sure subsequent calls for an already signed in user are made toohello tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7cc4d-256">Další kroky</span><span class="sxs-lookup"><span data-stu-id="7cc4d-256">Next steps</span></span>
<span data-ttu-id="7cc4d-257">V tomto článku jste se naučili jak toobuild aplikace, která se může přihlásit uživatel jakéhokoli klienta Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-257">In this article, you learned how toobuild an application that can sign in a user from any Azure Active Directory tenant.</span></span> <span data-ttu-id="7cc4d-258">Po povolení jednotného přihlašování mezi aplikací a Azure Active Directory, můžete také aktualizovat vaše aplikace tooaccess rozhraní API vystavené zdroje společnosti Microsoft, jako je Office 365.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-258">After enabling Single Sign-On between your app and Azure Active Directory, you can also update your application tooaccess APIs exposed by Microsoft resources, like Office 365.</span></span> <span data-ttu-id="7cc4d-259">Přizpůsobené rozhraní můžete tak nabízet ve vaší aplikaci, například zobrazení kontextové informace toohello uživatelů, jako je jejich profilový obrázek nebo jejich další událost kalendáře.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-259">So you can offer a personalized experience in your application, for example showing contextual information toohello users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="7cc4d-260">toolearn Další informace o vytváření rozhraní API, zavolá tooAzure služby Active Directory a služby Office 365, jako je Exchange, SharePoint, OneDrive, OneNote, Planner, Excel a další, navštivte: [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="7cc4d-260">toolearn more about making API calls tooAzure Active Directory and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel and more, visit: [Microsoft Graph API][MSFT-Graph-overview].</span></span>


## <a name="related-content"></a><span data-ttu-id="7cc4d-261">Související obsah</span><span class="sxs-lookup"><span data-stu-id="7cc4d-261">Related content</span></span>
* <span data-ttu-id="7cc4d-262">[Ukázky víceklientské aplikace][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-262">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="7cc4d-263">[Branding pokyny pro aplikace][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-263">[Branding Guidelines for Applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="7cc4d-264">[Průvodce Azure AD vývojáře][AAD-Dev-Guide]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-264">[Azure AD Developer's Guide][AAD-Dev-Guide]</span></span>
* <span data-ttu-id="7cc4d-265">[Objekty aplikací a hlavní objekty služeb][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-265">[Application Objects and Service Principal Objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="7cc4d-266">[Integrace aplikací s Azure Active Directory][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-266">[Integrating Applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="7cc4d-267">[Přehled hello souhlas Framework][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-267">[Overview of hello Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="7cc4d-268">[Obory oprávnění Microsoft Graph API][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-268">[Microsoft Graph API Permission Scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="7cc4d-269">[Obory oprávnění rozhraní Azure AD Graph API][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="7cc4d-269">[Azure AD Graph API Permission Scopes][AAD-Graph-Perm-Scopes]</span></span>

<span data-ttu-id="7cc4d-270">Použijte hello následující komentáře části tooprovide zpětnou vazbu a Pomozte nám vylepšit a utvářejí náš obsah.</span><span class="sxs-lookup"><span data-stu-id="7cc4d-270">Please use hello following comments section tooprovide feedback and help us refine and shape our content.</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]: ./active-directory-branding-guidelines.md
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Consent-Overview]: ./active-directory-integrating-applications.md#overview-of-the-consent-framework
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/en-us/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://graph.microsoft.io/en-us/docs/authorization/permission_scopes

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]: ./active-directory-token-and-claims.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/en-us/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














