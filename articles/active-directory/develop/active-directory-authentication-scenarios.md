---
title: "Scénáře ověřování pro Azure AD | Microsoft Docs"
description: "Přehled pět nejběžnějších scénářů ověřování pro Azure Active Directory (AAD)"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 2f9410bdaa037f1839cf7c12c3532b51be669ed5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="8b524-103">Scénáře ověřování pro Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="8b524-104">Azure Active Directory (Azure AD) zjednodušuje tím, že poskytuje identity jako zdroj služby, se podpora pro standardní protokoly, jako je například OAuth 2.0 a OpenID Connect, jakož i otevřené knihovny pro různé platformy můžete rychle psaní ověřování pro vývojáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms to help you start coding quickly.</span></span> <span data-ttu-id="8b524-105">Tento dokument vám pomůže pochopit podporuje různé scénáře služby Azure AD a vám ukáže, jak začít pracovat.</span><span class="sxs-lookup"><span data-stu-id="8b524-105">This document will help you understand the various scenarios Azure AD supports and will show you how to get started.</span></span> <span data-ttu-id="8b524-106">Je rozdělený do následujících částí:</span><span class="sxs-lookup"><span data-stu-id="8b524-106">It’s divided into the following sections:</span></span>

* [<span data-ttu-id="8b524-107">Základní informace o ověřování ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="8b524-108">Deklarace identity v tokenech zabezpečení Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="8b524-109">Základní informace o registraci aplikace ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="8b524-110">Typy aplikací a scénáře</span><span class="sxs-lookup"><span data-stu-id="8b524-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="8b524-111">Webový prohlížeč, aby webové aplikace</span><span class="sxs-lookup"><span data-stu-id="8b524-111">Web Browser to Web Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="8b524-112">Jednostránkové aplikace (SPA)</span><span class="sxs-lookup"><span data-stu-id="8b524-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="8b524-113">Nativní aplikace za účelem webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-113">Native Application to Web API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="8b524-114">Webovou aplikaci pro webové rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-114">Web Application to Web API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="8b524-115">Démon procesu nebo serverové aplikace webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-115">Daemon or Server Application to Web API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="8b524-116">Základní informace o ověřování ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="8b524-117">Pokud jste obeznámeni s základní koncepty ověřování ve službě Azure AD, přečtěte si v této části.</span><span class="sxs-lookup"><span data-stu-id="8b524-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="8b524-118">V ostatních případech můžete chtít přejděte dolů k [typy aplikací a scénáře](#application-types-and-scenarios).</span><span class="sxs-lookup"><span data-stu-id="8b524-118">Otherwise, you may want to skip down to [Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="8b524-119">Pojďme se nejzákladnější scénář, kdy je potřeba identity: uživatel ve webovém prohlížeči potřebuje ke svému ověření u webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-119">Let’s consider the most basic scenario where identity is required: a user in a web browser needs to authenticate to a web application.</span></span> <span data-ttu-id="8b524-120">Tento scénář je podrobně popsané v větší [webový prohlížeč k webové aplikaci](#web-browser-to-web-application) části, ale je užitečné výchozí bod pro ilustraci možnosti Azure AD a conceptualize fungování tohoto scénáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-120">This scenario is described in greater detail in the [Web Browser to Web Application](#web-browser-to-web-application) section, but it’s a useful starting point to illustrate the capabilities of Azure AD and conceptualize how the scenario works.</span></span> <span data-ttu-id="8b524-121">Vezměte v úvahu následující diagram pro tento scénář:</span><span class="sxs-lookup"><span data-stu-id="8b524-121">Consider the following diagram for this scenario:</span></span>

![Přehled přihlášení do webové aplikace](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="8b524-123">S diagramu výše na paměti zde je, co potřebujete vědět o jeho různé komponenty:</span><span class="sxs-lookup"><span data-stu-id="8b524-123">With the diagram above in mind, here’s what you need to know about its various components:</span></span>

* <span data-ttu-id="8b524-124">Azure AD je zprostředkovatel identity, který je zodpovědný za ověření identity uživatelů a aplikací, které existují v adresáři organizace a nakonec vystavování tokenů zabezpečení po úspěšném ověření těchto uživatelů a aplikací.</span><span class="sxs-lookup"><span data-stu-id="8b524-124">Azure AD is the identity provider, responsible for verifying the identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="8b524-125">Aplikace, která chce externí ověřování do služby Azure AD musí být zaregistrované ve službě Azure AD, která registruje a jednoznačně identifikuje aplikaci v adresáři.</span><span class="sxs-lookup"><span data-stu-id="8b524-125">An application that wants to outsource authentication to Azure AD must be registered in Azure AD, which registers and uniquely identifies the app in the directory.</span></span>
* <span data-ttu-id="8b524-126">Vývojářům můžete použít knihovny ověřování služby Azure AD s otevřeným zdrojem nastavit ověřování snadno tak, že zpracování podrobnosti protokolu.</span><span class="sxs-lookup"><span data-stu-id="8b524-126">Developers can use the open source Azure AD authentication libraries to make authentication easy by handling the protocol details for you.</span></span> <span data-ttu-id="8b524-127">V tématu [knihovny Azure Active Directory Authentication](active-directory-authentication-libraries.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="8b524-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="8b524-128">• Po ověření uživatele, aplikace musí ověřit token zabezpečení uživatele k zajištění, že ověření proběhlo úspěšně pro určený strany.</span><span class="sxs-lookup"><span data-stu-id="8b524-128">• Once a user has been authenticated, the application must validate the user’s security token to ensure that authentication was successful for the intended parties.</span></span> <span data-ttu-id="8b524-129">Vývojářům můžete použít knihovny zadaná ověřování pro zpracování ověření žádné tokenu z Azure AD, včetně webových tokenů JSON (JWT) nebo SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="8b524-129">Developers can use the provided authentication libraries to handle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="8b524-130">Pokud chcete provést ověření ručně, najdete v článku [obslužná rutina tokenu JWT](https://msdn.microsoft.com/library/dn205065.aspx) dokumentaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-130">If you want to perform validation manually, see the [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b524-131">Azure AD používá k podepisování tokenů a ověřte, zda jsou platná kryptografie využívající veřejného klíče.</span><span class="sxs-lookup"><span data-stu-id="8b524-131">Azure AD uses public key cryptography to sign tokens and verify that they are valid.</span></span> <span data-ttu-id="8b524-132">V tématu [důležité informace o podpisový klíč výměny ve službě Azure AD](active-directory-signing-key-rollover.md) Další informace o pomocí potřebné logiky musí mít v aplikaci k zajištění je vždy aktualizován s nejnovější klíče.</span><span class="sxs-lookup"><span data-stu-id="8b524-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on the necessary logic you must have in your application to ensure it’s always updated with the latest keys.</span></span>
> 
> 

<span data-ttu-id="8b524-133">• Toku požadavky a odpovědi pro proces ověřování je dáno ověřovací protokol, který byl použit, jako je například OAuth 2.0, OpenID Connect, WS-Federation nebo SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="8b524-133">• The flow of requests and responses for the authentication process is determined by the authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="8b524-134">Tyto protokoly jsou podrobněji popsána v [Azure Active Directory ověřovací protokoly](active-directory-authentication-protocols.md) tématu a v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="8b524-134">These protocols are discussed in more detail in the [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in the sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="8b524-135">Azure AD podporuje OAuth 2.0 a OpenID Connect standardy, které rozsáhlé použití tokenů nosiče, včetně nosné tokeny vyjádřené tokeny Jwt.</span><span class="sxs-lookup"><span data-stu-id="8b524-135">Azure AD supports the OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="8b524-136">Je token nosiče tokenu lightweight zabezpečení, který uděluje přístup "nosiče" k chráněnému prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-136">A bearer token is a lightweight security token that grants the “bearer” access to a protected resource.</span></span> <span data-ttu-id="8b524-137">V tomto smyslu je "nosiče" libovolné strany, který může být token.</span><span class="sxs-lookup"><span data-stu-id="8b524-137">In this sense, the “bearer” is any party that can present the token.</span></span> <span data-ttu-id="8b524-138">I když může strana musí nejprve ověřit pomocí Azure AD pro příjem token nosiče, nebudou přijata požadované kroky k zabezpečení token v přenos a ukládání, může být zachyceny a použity nezamýšleným strana.</span><span class="sxs-lookup"><span data-stu-id="8b524-138">Though a party must first authenticate with Azure AD to receive the bearer token, if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="8b524-139">I když některé tokeny zabezpečení má integrovanou mechanismus, který brání neoprávněným stranám jejich používání, nosné tokeny nemají tento mechanismus a musí být přenosu v zabezpečený kanál, jako je například transport layer security (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="8b524-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="8b524-140">Pokud token nosiče je přenesen v nešifrované podobě, man-in střední útok lze škodlivý stranou získat token a používat ho pro neoprávněný přístup k chráněnému prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-140">If a bearer token is transmitted in the clear, a man-in the middle attack can be used by a malicious party to acquire the token and use it for an unauthorized access to a protected resource.</span></span> <span data-ttu-id="8b524-141">Při ukládání nebo ukládání do mezipaměti nosné tokeny pro pozdější použití platí stejné zásady zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="8b524-141">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="8b524-142">Vždy zajistěte, aby vaše aplikace odesílá a ukládá nosné tokeny zabezpečeným způsobem.</span><span class="sxs-lookup"><span data-stu-id="8b524-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="8b524-143">Další aspekty zabezpečení na nosné tokeny, najdete v části [RFC 6750 část 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="8b524-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="8b524-144">Teď, když máte přehled o základní informace, přečtěte si následující části obsahují pochopit, jak zřizování funguje ve službě Azure AD a běžné scénáře služby Azure AD podporuje.</span><span class="sxs-lookup"><span data-stu-id="8b524-144">Now that you have an overview of the basics, read the sections below to understand how provisioning works in Azure AD and the common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="8b524-145">Deklarace identity v tokenech zabezpečení Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="8b524-146">Zabezpečení tokeny vydané službou Azure AD obsahují deklarace identity nebo tvrzení informace o subjektu, který byl ověřen.</span><span class="sxs-lookup"><span data-stu-id="8b524-146">Security tokens issued by Azure AD contain claims, or assertions of information about the subject that has been authenticated.</span></span> <span data-ttu-id="8b524-147">Tyto deklarace lze aplikací pro různé úlohy.</span><span class="sxs-lookup"><span data-stu-id="8b524-147">These claims can be used by the application for various tasks.</span></span> <span data-ttu-id="8b524-148">Například může být používají k ověření tokenu, identifikovat klienta directory daného subjektu, zobrazit informace o uživateli, určit autorizační daného subjektu a tak dále.</span><span class="sxs-lookup"><span data-stu-id="8b524-148">For example, they can be used to validate the token, identify the subject's directory tenant, display user information, determine the subject's authorization, and so on.</span></span> <span data-ttu-id="8b524-149">V jakékoli dané zabezpečení token deklarace identity jsou závislé na typ tokenu, typ pověření použité k ověření uživatele a konfiguraci aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-149">The claims present in any given security token are dependent upon the type of token, the type of credential used to authenticate the user, and the application configuration.</span></span> <span data-ttu-id="8b524-150">Stručný popis každého typu deklarace identity vygenerované službou Azure AD najdete v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="8b524-150">A brief description of each type of claim emitted by Azure AD is provided in the table below.</span></span> <span data-ttu-id="8b524-151">Další informace najdete v části [podporované tokenu a typy deklarací identity](active-directory-token-and-claims.md).</span><span class="sxs-lookup"><span data-stu-id="8b524-151">For more information, refer to [Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="8b524-152">Deklarovat</span><span class="sxs-lookup"><span data-stu-id="8b524-152">Claim</span></span> | <span data-ttu-id="8b524-153">Popis</span><span class="sxs-lookup"><span data-stu-id="8b524-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8b524-154">ID aplikace</span><span class="sxs-lookup"><span data-stu-id="8b524-154">Application ID</span></span> |<span data-ttu-id="8b524-155">Určuje aplikace, která je pomocí tokenu.</span><span class="sxs-lookup"><span data-stu-id="8b524-155">Identifies the application that is using the token.</span></span> |
| <span data-ttu-id="8b524-156">Cílová skupina</span><span class="sxs-lookup"><span data-stu-id="8b524-156">Audience</span></span> |<span data-ttu-id="8b524-157">Identifikuje příjemce token je určená pro prostředek.</span><span class="sxs-lookup"><span data-stu-id="8b524-157">Identifies the recipient resource the token is intended for.</span></span> |
| <span data-ttu-id="8b524-158">Application Authentication Context Class Reference</span><span class="sxs-lookup"><span data-stu-id="8b524-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="8b524-159">Určuje, jak klient se ověřený (veřejné klient oproti důvěrné klienta).</span><span class="sxs-lookup"><span data-stu-id="8b524-159">Indicates how the client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="8b524-160">Ověřování prostřednictvím rychlých</span><span class="sxs-lookup"><span data-stu-id="8b524-160">Authentication Instant</span></span> |<span data-ttu-id="8b524-161">Zaznamenává datum a čas, kdy došlo k chybě ověřování.</span><span class="sxs-lookup"><span data-stu-id="8b524-161">Records the date and time when the authentication occurred.</span></span> |
| <span data-ttu-id="8b524-162">Metoda ověřování</span><span class="sxs-lookup"><span data-stu-id="8b524-162">Authentication Method</span></span> |<span data-ttu-id="8b524-163">Určuje, jak byla ověřena předmět tokenu (heslo, certifikát, atd.).</span><span class="sxs-lookup"><span data-stu-id="8b524-163">Indicates how the subject of the token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="8b524-164">Jméno</span><span class="sxs-lookup"><span data-stu-id="8b524-164">First Name</span></span> |<span data-ttu-id="8b524-165">Poskytuje sadu křestní jméno uživatele ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-165">Provides the given name of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="8b524-166">Skupiny</span><span class="sxs-lookup"><span data-stu-id="8b524-166">Groups</span></span> |<span data-ttu-id="8b524-167">Obsahuje objekt ID Azure AD skupiny, kterých je uživatel členem.</span><span class="sxs-lookup"><span data-stu-id="8b524-167">Contains object Ids of Azure AD groups the user is a member of.</span></span> |
| <span data-ttu-id="8b524-168">Zprostředkovatel identity</span><span class="sxs-lookup"><span data-stu-id="8b524-168">Identity Provider</span></span> |<span data-ttu-id="8b524-169">Zaznamenává poskytovatele identit, předmět token k ověření.</span><span class="sxs-lookup"><span data-stu-id="8b524-169">Records the identity provider that authenticated the subject of the token.</span></span> |
| <span data-ttu-id="8b524-170">Vydané v</span><span class="sxs-lookup"><span data-stu-id="8b524-170">Issued At</span></span> |<span data-ttu-id="8b524-171">Zaznamenává dobu, kdy byl token vydán, často používají pro token aktuálnosti.</span><span class="sxs-lookup"><span data-stu-id="8b524-171">Records the time at which the token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="8b524-172">Vystavitel</span><span class="sxs-lookup"><span data-stu-id="8b524-172">Issuer</span></span> |<span data-ttu-id="8b524-173">Identifikuje služby tokenů zabezpečení, které vygenerované token, jakož i klient Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-173">Identifies the STS that emitted the token as well as the Azure AD tenant.</span></span> |
| <span data-ttu-id="8b524-174">Příjmení</span><span class="sxs-lookup"><span data-stu-id="8b524-174">Last Name</span></span> |<span data-ttu-id="8b524-175">Poskytuje sadu Přezdívka uživatele ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-175">Provides the surname of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="8b524-176">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="8b524-176">Name</span></span> |<span data-ttu-id="8b524-177">Poskytuje lidského čitelný hodnotu, která identifikuje předmět tokenu.</span><span class="sxs-lookup"><span data-stu-id="8b524-177">Provides a human readable value that identifies the subject of the token.</span></span> |
| <span data-ttu-id="8b524-178">Id objektu</span><span class="sxs-lookup"><span data-stu-id="8b524-178">Object Id</span></span> |<span data-ttu-id="8b524-179">Obsahuje neměnné jedinečný identifikátor subjektu ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-179">Contains an immutable, unique identifier of the subject in Azure AD.</span></span> |
| <span data-ttu-id="8b524-180">Role</span><span class="sxs-lookup"><span data-stu-id="8b524-180">Roles</span></span> |<span data-ttu-id="8b524-181">Obsahuje popisné názvy aplikační role Azure AD, kterému byla udělena uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-181">Contains friendly names of Azure AD Application Roles that the user has been granted.</span></span> |
| <span data-ttu-id="8b524-182">Rozsah</span><span class="sxs-lookup"><span data-stu-id="8b524-182">Scope</span></span> |<span data-ttu-id="8b524-183">Určuje oprávnění udělená aplikaci klienta.</span><span class="sxs-lookup"><span data-stu-id="8b524-183">Indicates the permissions granted to the client application.</span></span> |
| <span data-ttu-id="8b524-184">Předmět</span><span class="sxs-lookup"><span data-stu-id="8b524-184">Subject</span></span> |<span data-ttu-id="8b524-185">Určuje objekt o tom, které vyhodnotí token informace.</span><span class="sxs-lookup"><span data-stu-id="8b524-185">Indicates the principal about which the token asserts information.</span></span> |
| <span data-ttu-id="8b524-186">Id klienta</span><span class="sxs-lookup"><span data-stu-id="8b524-186">Tenant Id</span></span> |<span data-ttu-id="8b524-187">Obsahuje neměnné jedinečný identifikátor adresáře klienta, která vydala token.</span><span class="sxs-lookup"><span data-stu-id="8b524-187">Contains an immutable, unique identifier of the directory tenant that issued the token.</span></span> |
| <span data-ttu-id="8b524-188">Životnost tokenu</span><span class="sxs-lookup"><span data-stu-id="8b524-188">Token Lifetime</span></span> |<span data-ttu-id="8b524-189">Definuje časový interval, ve kterém je token platný.</span><span class="sxs-lookup"><span data-stu-id="8b524-189">Defines the time interval within which a token is valid.</span></span> |
| <span data-ttu-id="8b524-190">Hlavní název uživatele</span><span class="sxs-lookup"><span data-stu-id="8b524-190">User Principal Name</span></span> |<span data-ttu-id="8b524-191">Obsahuje hlavní název uživatele subjektu.</span><span class="sxs-lookup"><span data-stu-id="8b524-191">Contains the user principal name of the subject.</span></span> |
| <span data-ttu-id="8b524-192">Verze</span><span class="sxs-lookup"><span data-stu-id="8b524-192">Version</span></span> |<span data-ttu-id="8b524-193">Obsahuje číslo verze tokenu.</span><span class="sxs-lookup"><span data-stu-id="8b524-193">Contains the version number of the token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="8b524-194">Základní informace o registraci aplikace ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="8b524-195">Jakékoli aplikace, která outsources ověřování do služby Azure AD musí být zaregistrován v adresáři.</span><span class="sxs-lookup"><span data-stu-id="8b524-195">Any application that outsources authentication to Azure AD must be registered in a directory.</span></span> <span data-ttu-id="8b524-196">Tento krok zahrnuje informacemi o vaší aplikaci, včetně adresu URL, kde je umístěn, adresu URL pro odeslání odpovědi po ověření, identifikátor URI k identifikaci aplikace a další služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-196">This step involves telling Azure AD about your application, including the URL where it’s located, the URL to send replies after authentication, the URI to identify your application, and more.</span></span> <span data-ttu-id="8b524-197">Tyto informace jsou nezbytné pro klíče z několika důvodů:</span><span class="sxs-lookup"><span data-stu-id="8b524-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="8b524-198">Azure AD musí souřadnice ke komunikaci s aplikací při zpracování přihlášení nebo výměnou tokeny.</span><span class="sxs-lookup"><span data-stu-id="8b524-198">Azure AD needs coordinates to communicate with the application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="8b524-199">Mezi ně patří následující:</span><span class="sxs-lookup"><span data-stu-id="8b524-199">These include the following:</span></span>
  
  * <span data-ttu-id="8b524-200">Identifikátor ID URI aplikace: Identifikátor pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-200">Application ID URI: The identifier for an application.</span></span> <span data-ttu-id="8b524-201">Tato hodnota je odeslána do služby Azure AD při ověřování k označení, která aplikace chce volající token pro.</span><span class="sxs-lookup"><span data-stu-id="8b524-201">This value is sent to Azure AD during authentication to indicate which application the caller wants a token for.</span></span> <span data-ttu-id="8b524-202">Kromě toho tato hodnota je obsažena v tokenu, aby aplikace věděla, že byl zamýšleného cílového.</span><span class="sxs-lookup"><span data-stu-id="8b524-202">Additionally, this value is included in the token so that the application knows it was the intended target.</span></span>
  * <span data-ttu-id="8b524-203">Adresu URL a identifikátor URI pro přesměrování odpovědi: v případě webového rozhraní API nebo webovou aplikaci, adresa URL odpovědi je umístění, do které Azure AD odešle odpověď ověřování, a to včetně token, pokud ověření bylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="8b524-203">Reply URL and Redirect URI: In the case of a web API or web application, the Reply URL is the location to which Azure AD will send the authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="8b524-204">V případě nativní aplikace identifikátor URI pro přesměrování je jedinečný identifikátor, ke kterému se Azure AD přesměruje uživatelského agenta v jednom požadavku OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="8b524-204">In the case of a native application, the Redirect URI is a unique identifier to which Azure AD will redirect the user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="8b524-205">ID aplikace: ID pro aplikaci, která se generují pomocí Azure AD při registraci aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-205">Application ID: The ID for an application, which is generated by Azure AD when the application is registered.</span></span> <span data-ttu-id="8b524-206">Při žádosti autorizační kód nebo na tokenu, ID aplikace a klíč se odešlou do služby Azure AD během ověřování.</span><span class="sxs-lookup"><span data-stu-id="8b524-206">When requesting an authorization code or token, the Application ID and key are sent to Azure AD during authentication.</span></span>
  * <span data-ttu-id="8b524-207">Klíč: Klíč, který je odeslaný společně ID aplikace při ověřování do služby Azure AD k volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-207">Key: The key that is sent along with a Application ID when authenticating to Azure AD to call a web API.</span></span>
* <span data-ttu-id="8b524-208">Azure AD musí zajistit, že aplikace má požadovaná oprávnění pro přístup k datům vašeho adresáře, jinými aplikacemi ve vaší organizaci a tak dále</span><span class="sxs-lookup"><span data-stu-id="8b524-208">Azure AD needs to ensure the application has the required permissions to access your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="8b524-209">Zřizování se změní jasnější, pokud víte, že existují dvě kategorie aplikací, které je možné vyvinuté a integrovat se službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="8b524-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="8b524-210">Jednotné klienta aplikací: aplikace jednoho klienta je určena pro použití v jedné organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="8b524-211">Toto jsou obvykle-obchodní (LoB) aplikace napsané pomocí vývojář enterprise.</span><span class="sxs-lookup"><span data-stu-id="8b524-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="8b524-212">Jednoho klienta aplikace potřebuje pouze mít přístup uživatelé v jednom adresáři, a v důsledku toho se pouze musí být zřízená v jednom adresáři.</span><span class="sxs-lookup"><span data-stu-id="8b524-212">A single tenant application only needs to be accessed by users in one directory, and as a result, it only needs to be provisioned in one directory.</span></span> <span data-ttu-id="8b524-213">Tyto aplikace jsou běžně registrovány vývojáři v organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-213">These applications are typically registered by a developer in the organization.</span></span>
* <span data-ttu-id="8b524-214">Víceklientské aplikace: víceklientské aplikace určena pro použití v mnoha organizacích není právě jedné organizace.</span><span class="sxs-lookup"><span data-stu-id="8b524-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="8b524-215">Toto jsou obvykle softwaru jako služba (SaaS) aplikace napsané pomocí nezávislý dodavatel softwaru (ISV).</span><span class="sxs-lookup"><span data-stu-id="8b524-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="8b524-216">Víceklientské aplikace potřebují v každý adresář, kde se bude používat, který vyžaduje souhlas uživatele nebo správce k registraci jejich zřídit.</span><span class="sxs-lookup"><span data-stu-id="8b524-216">Multi-tenant applications need to be provisioned in each directory where they will be used, which requires user or administrator consent to register them.</span></span> <span data-ttu-id="8b524-217">Tento proces souhlasu spustí, když aplikace je zaregistrován v adresáři a je poskytnut přístup k rozhraní Graph API nebo možná jiné webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-217">This consent process starts when an application has been registered in the directory and is given access to the Graph API or perhaps another web API.</span></span> <span data-ttu-id="8b524-218">Pokud uživatel nebo správce z jiné organizace zaregistruje k používání aplikace, zobrazí se dialogové okno se zobrazí oprávnění, která aplikace vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="8b524-218">When a user or administrator from a different organization signs up to use the application, they are presented with a dialog that displays the permissions the application requires.</span></span> <span data-ttu-id="8b524-219">Uživatel nebo správce může pak souhlas k aplikaci, která poskytuje přístup k aplikaci stanovené dat a nakonec zaregistruje aplikaci do svého adresáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-219">The user or administrator can then consent to the application, which gives the application access to the stated data, and finally registers the application in their directory.</span></span> <span data-ttu-id="8b524-220">Další informace najdete v tématu [přehled rozhraní souhlas](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span><span class="sxs-lookup"><span data-stu-id="8b524-220">For more information, see [Overview of the Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="8b524-221">Některé další aspekty nastat při vývoji aplikace víceklientské místo jednoho klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="8b524-222">Například pokud bude se vaše aplikace k dispozici uživatelům v několika adresářích, potřebujete mechanismus k určení klientů, které jsou ve.</span><span class="sxs-lookup"><span data-stu-id="8b524-222">For example, if you are making your application available to users in multiple directories, you need a mechanism to determine which tenant they’re in.</span></span> <span data-ttu-id="8b524-223">Jednoho klienta aplikace potřebuje pouze hledat v její vlastní adresář pro uživatele, zatímco víceklientské aplikace potřebuje k identifikaci konkrétního uživatele ze všech adresářů ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-223">A single tenant application only needs to look in its own directory for a user, while a multi-tenant application needs to identify a specific user from all the directories in Azure AD.</span></span> <span data-ttu-id="8b524-224">K provedení této úlohy, Azure AD poskytuje společný koncový bod ověřování kde jakékoli víceklientské aplikace můžete nastavit žádostí o přihlášení, místo konkrétního klienta endpoint.</span><span class="sxs-lookup"><span data-stu-id="8b524-224">To accomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="8b524-225">Tento koncový bod je https://login.microsoftonline.com/common pro všechny adresáře ve službě Azure AD, že koncový bod konkrétního klienta může být https://login.microsoftonline.com/contoso.onmicrosoft.com. Běžné koncový bod je obzvláště důležité vzít v úvahu při vývoji aplikace, protože budete potřebovat pomocí potřebné logiky pro zpracování více klientů při přihlášení, odhlášení a ověření tokenu.</span><span class="sxs-lookup"><span data-stu-id="8b524-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. The common endpoint is especially important to consider when developing your application because you’ll need the necessary logic to handle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="8b524-226">Pokud jsou aktuálně vývoj aplikace s jednoho klienta, ale mají být k dispozici v mnoha organizacích, můžete snadno provedete změny aplikace a jeho konfigurace ve službě Azure AD, aby víceklientské podporující.</span><span class="sxs-lookup"><span data-stu-id="8b524-226">If you are currently developing a single tenant application but want to make it available to many organizations, you can easily make changes to the application and its configuration in Azure AD to make it multi-tenant capable.</span></span> <span data-ttu-id="8b524-227">Kromě toho Azure AD používá stejný podpisový klíč pro všechny tokeny ve všech adresářích, zda jste poskytli ověřování na jednoho klienta nebo v aplikaci víceklientské.</span><span class="sxs-lookup"><span data-stu-id="8b524-227">In addition, Azure AD uses the same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="8b524-228">Každý scénář uvedené v tomto dokumentu obsahuje dílčí oddíl, který popisuje požadavky na jeho zřizování.</span><span class="sxs-lookup"><span data-stu-id="8b524-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="8b524-229">Podrobnější informace o zřizování aplikace ve službě Azure AD a rozdíly mezi jednou či více klientů aplikace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="8b524-229">For more in-depth information about provisioning an application in Azure AD and the differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="8b524-230">Pokračujte ve čtení pochopit běžné scénáře aplikací ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-230">Continue reading to understand the common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="8b524-231">Typy aplikací a scénáře</span><span class="sxs-lookup"><span data-stu-id="8b524-231">Application Types and Scenarios</span></span>
<span data-ttu-id="8b524-232">Všechny scénáře popsaného v tomto dokumentu lze vytvořit pomocí různé jazyky a platformy.</span><span class="sxs-lookup"><span data-stu-id="8b524-232">Each of the scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="8b524-233">Všechny jsou zajišťované pomocí ukázky dokončení kódu, které jsou k dispozici v našem [Průvodce ukázky kódu](active-directory-code-samples.md), nebo přímo z odpovídající [ukázka úložišť GitHub](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span><span class="sxs-lookup"><span data-stu-id="8b524-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from the corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="8b524-234">Kromě toho pokud aplikace potřebuje konkrétní nebo segmentu začátku do konce scénáře, ve většině případů této funkce lze přidat nezávisle.</span><span class="sxs-lookup"><span data-stu-id="8b524-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="8b524-235">Například pokud máte nativní aplikaci, která volá webové rozhraní API, můžete snadno přidat webovou aplikaci, která volá webové rozhraní API také.</span><span class="sxs-lookup"><span data-stu-id="8b524-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls the web API.</span></span> <span data-ttu-id="8b524-236">Následující diagram znázorňuje tyto scénáře a typy aplikací, a jak jiné součásti, lze přidat:</span><span class="sxs-lookup"><span data-stu-id="8b524-236">The following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![Typy aplikací a scénáře](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="8b524-238">Jsou to pěti scénáře primární aplikace podporované službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="8b524-238">These are the five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="8b524-239">[Webový prohlížeč k webové aplikaci](#web-browser-to-web-application): uživatel potřebuje k přihlášení k webové aplikaci, která je zabezpečená službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-239">[Web Browser to Web Application](#web-browser-to-web-application): A user needs to sign in to a web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="8b524-240">[Jedna stránka aplikace (SPA)](#single-page-application-spa): uživatel musí pro přihlášení k jednostránkové aplikace, která je zabezpečená službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs to sign in to a single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="8b524-241">[Nativní aplikace za účelem webového rozhraní API](#native-application-to-web-api): nativní aplikaci, která běží na telefon, tablet nebo počítač potřebuje k ověření uživatele k získání prostředky z webového rozhraní API, která je zabezpečená službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-241">[Native Application to Web API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="8b524-242">[Webové aplikace do webového rozhraní API](#web-application-to-web-api): webová aplikace musí získat prostředky z webového rozhraní API, které jsou zabezpečené službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-242">[Web Application to Web API](#web-application-to-web-api): A web application needs to get resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="8b524-243">[Démon procesu nebo serverové aplikace webového rozhraní API](#daemon-or-server-application-to-web-api): démon aplikaci nebo serveru bez webového uživatelského rozhraní musí získat prostředky z webového rozhraní API, které jsou zabezpečené službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-243">[Daemon or Server Application to Web API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-to-web-application"></a><span data-ttu-id="8b524-244">Webový prohlížeč, aby webové aplikace</span><span class="sxs-lookup"><span data-stu-id="8b524-244">Web Browser to Web Application</span></span>
<span data-ttu-id="8b524-245">Tato část popisuje aplikaci, která ověřuje uživatele ve webovém prohlížeči k webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-245">This section describes an application that authenticates a user in a web browser to a web application.</span></span> <span data-ttu-id="8b524-246">V tomto scénáři bude směrovat webové aplikace prohlížeče uživatele pro jejich přihlášení k Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-246">In this scenario, the web application directs the user’s browser to sign them in to Azure AD.</span></span> <span data-ttu-id="8b524-247">Azure AD vrátí odpověď přihlášení prostřednictvím prohlížeče uživatele, který obsahuje deklarace identity o uživateli v tokenu zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="8b524-247">Azure AD returns a sign-in response through the user’s browser, which contains claims about the user in a security token.</span></span> <span data-ttu-id="8b524-248">Tento scénář podporuje přihlašování pomocí protokolů WS-Federation, SAML 2.0 a OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="8b524-248">This scenario supports sign-on using the WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="8b524-249">Diagram</span><span class="sxs-lookup"><span data-stu-id="8b524-249">Diagram</span></span>
![Tok ověření pro prohlížeče do webové aplikace](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="8b524-251">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="8b524-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="8b524-252">Pokud uživatel navštíví aplikace a musí se přihlásit, je přesměrován prostřednictvím přihlašovací požadavek na koncový bod ověřování ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-252">When a user visits the application and needs to sign in, they are redirected via a sign-in request to the authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="8b524-253">Na stránce přihlášení přihlášení uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-253">The user signs in on the sign-in page.</span></span>
3. <span data-ttu-id="8b524-254">Pokud je ověření úspěšné, Azure AD vytvoří ověřovací token a vrátí odpověď přihlašovací adresa URL odpovědi aplikace, který byl nakonfigurován na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="8b524-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response to the application’s Reply URL that was configured in the Azure Portal.</span></span> <span data-ttu-id="8b524-255">Pro produkční aplikace musí být tato adresa URL odpovědi protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="8b524-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="8b524-256">Vrácený token obsahuje deklarace identity o uživateli a Azure AD, které jsou požadované aplikací k ověření tokenu.</span><span class="sxs-lookup"><span data-stu-id="8b524-256">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
4. <span data-ttu-id="8b524-257">Aplikace ověří token pomocí veřejného podpisového klíče a vystavitele informace, které jsou k dispozici na dokument federačních metadat pro Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-257">The application validates the token by using a public signing key and issuer information available at the federation metadata document for Azure AD.</span></span> <span data-ttu-id="8b524-258">Po aplikaci ověří token, Azure AD spustí novou relaci s uživatelem.</span><span class="sxs-lookup"><span data-stu-id="8b524-258">After the application validates the token, Azure AD starts a new session with the user.</span></span> <span data-ttu-id="8b524-259">Tato relace umožňuje uživatelům přístup k aplikaci do vypršení jeho platnosti.</span><span class="sxs-lookup"><span data-stu-id="8b524-259">This session allows the user to access the application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="8b524-260">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="8b524-260">Code Samples</span></span>
<span data-ttu-id="8b524-261">Další informace najdete v ukázky kódu pro webový prohlížeč scénáře webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="8b524-261">See the code samples for Web Browser to Web Application scenarios.</span></span> <span data-ttu-id="8b524-262">A, kontrolujte pravidelně – přidáme nové ukázky vždy.</span><span class="sxs-lookup"><span data-stu-id="8b524-262">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="8b524-263">[Webový prohlížeč k webové aplikaci](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="8b524-263">[Web Browser to Web Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="8b524-264">Registrace</span><span class="sxs-lookup"><span data-stu-id="8b524-264">Registering</span></span>
* <span data-ttu-id="8b524-265">Jednoho klienta: Pokud vytváříte aplikace právě pro vaši organizaci, se musí být zaregistrován v adresáři vaší společnosti pomocí portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="8b524-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="8b524-266">Víceklientské: Pokud vytváříte aplikace, která mohou být využívána uživatelé mimo vaši organizaci, musí být zaregistrovaný v adresáři vaší společnosti, ale také musí být zaregistrovaný v adresáři každé organizace, který bude používat aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="8b524-267">Chcete-li k dispozici v jejich adresář vaší aplikace, můžete zahrnout procesu registrace pro vaše zákazníky, které umožňuje, aby souhlas do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-267">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="8b524-268">Při registraci vaší aplikace, zobrazí se dialogové okno, které zobrazuje oprávnění, která aplikace vyžaduje a možnost vyjádřit souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-268">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="8b524-269">V závislosti na požadovaných oprávnění správce v jiné organizaci může být nutné vyjádřit svůj souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-269">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="8b524-270">Když uživatel nebo správce souhlasí, aplikace se registruje v jejich adresáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-270">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="8b524-271">Další informace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="8b524-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="8b524-272">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="8b524-272">Token Expiration</span></span>
<span data-ttu-id="8b524-273">Relace uživatele vyprší po vypršení platnosti tokenem vydaným službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-273">The user’s session expires when the lifetime of the token issued by Azure AD expires.</span></span> <span data-ttu-id="8b524-274">Aplikace můžete zmenšit tohoto časového období, v případě potřeby, jako je například odhlášení uživatele založené na období nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="8b524-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="8b524-275">Když vyprší platnost relace, uživatel se vyzve k znovu přihlásit.</span><span class="sxs-lookup"><span data-stu-id="8b524-275">When the session expires, the user will be prompted to sign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="8b524-276">Jednostránkové aplikace (SPA)</span><span class="sxs-lookup"><span data-stu-id="8b524-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="8b524-277">Tato část popisuje ověřování pro jednu aplikaci, stránka, která používá Azure AD a implicitní autorizace OAuth 2.0 udělit zabezpečení jeho webového rozhraní API zpět ukončení.</span><span class="sxs-lookup"><span data-stu-id="8b524-277">This section describes authentication for a Single Page Application, that uses Azure AD and the OAuth 2.0 implicit authorization grant to secure its web API back end.</span></span> <span data-ttu-id="8b524-278">Jednostránkové aplikace mají obvykle strukturu prezentační vrstvou JavaScript (front-end), která běží v prohlížeči a webového rozhraní API back-end, který běží na serveru a implementuje obchodní logiku aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in the browser and a Web API back end that runs on a server and implements the application’s business logic.</span></span> <span data-ttu-id="8b524-279">Další informace o udělení implicitní autorizace a vám pomohou rozhodnout, zda je správný pro váš scénář aplikací najdete v tématu [pochopení OAuth2 implicitní tok v Azure Active Directory poskytování](active-directory-dev-understanding-oauth2-implicit-grant.md).</span><span class="sxs-lookup"><span data-stu-id="8b524-279">To learn more about the implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding the OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="8b524-280">V tomto scénáři, když se uživatel přihlásí, JavaScript front end používá [Active Directory Authentication Library pro jazyk JavaScript (ADAL. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) a přidělit implicitní autorizace k získání tokenu ID (požadavku id_token) z Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-280">In this scenario, when the user signs in, the JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and the implicit authorization grant to obtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="8b524-281">Token se uloží do mezipaměti a klient připojí jej k žádosti o jako token nosiče při volání jeho webového rozhraní API back-end, který zabezpečené pomocí middlewaru OWIN.</span><span class="sxs-lookup"><span data-stu-id="8b524-281">The token is cached and the client attaches it to the request as the bearer token when making calls to its Web API back end, which is secured using the OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="8b524-282">Diagram</span><span class="sxs-lookup"><span data-stu-id="8b524-282">Diagram</span></span>
![Diagram jedné stránky aplikace](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="8b524-284">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="8b524-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="8b524-285">Uživatel přejde na webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-285">The user navigates to the web application.</span></span>
2. <span data-ttu-id="8b524-286">Aplikace vrací JavaScript front-endu (prezentační vrstva) do prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="8b524-286">The application returns the JavaScript front end (presentation layer) to the browser.</span></span>
3. <span data-ttu-id="8b524-287">Uživatel spustí přihlášení, například kliknutím přihlašovací odkaz.</span><span class="sxs-lookup"><span data-stu-id="8b524-287">The user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="8b524-288">Prohlížeč odesílá GET na koncový bod autorizace Azure AD k vyžádání tokenu ID.</span><span class="sxs-lookup"><span data-stu-id="8b524-288">The browser sends a GET to the Azure AD authorization endpoint to request an ID token.</span></span> <span data-ttu-id="8b524-289">Tato žádost obsahuje adresu URL ID a odpovědi aplikace v parametry dotazu.</span><span class="sxs-lookup"><span data-stu-id="8b524-289">This request includes the application ID and reply URL in the query parameters.</span></span>
4. <span data-ttu-id="8b524-290">Azure AD ověří adresa URL odpovědi pro registrované adresa URL odpovědi, který byl nakonfigurován na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="8b524-290">Azure AD validates the Reply URL against the registered Reply URL that was configured in the Azure Portal.</span></span>
5. <span data-ttu-id="8b524-291">Na stránce přihlášení přihlášení uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-291">The user signs in on the sign-in page.</span></span>
6. <span data-ttu-id="8b524-292">Pokud je ověření úspěšné, Azure AD vytvoří ID token a vrátí se adresa URL odpovědi aplikace jako fragment adresy URL (#).</span><span class="sxs-lookup"><span data-stu-id="8b524-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) to the application’s Reply URL.</span></span> <span data-ttu-id="8b524-293">Pro produkční aplikace musí být tato adresa URL odpovědi protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="8b524-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="8b524-294">Vrácený token obsahuje deklarace identity o uživateli a Azure AD, které jsou požadované aplikací k ověření tokenu.</span><span class="sxs-lookup"><span data-stu-id="8b524-294">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
7. <span data-ttu-id="8b524-295">Kód jazyka JavaScript klienta spuštěná v prohlížeči extrahuje token z odpovědi pro použití v zabezpečení volání do webové aplikace že API zpět ukončení.</span><span class="sxs-lookup"><span data-stu-id="8b524-295">The JavaScript client code running in the browser extracts the token from the response to use in securing calls to the application’s web API back end.</span></span>
8. <span data-ttu-id="8b524-296">V prohlížeči volá webové aplikace API zpět končit přístupový token v hlavičce autorizace.</span><span class="sxs-lookup"><span data-stu-id="8b524-296">The browser calls the application’s web API back end with the access token in the authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="8b524-297">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="8b524-297">Code Samples</span></span>
<span data-ttu-id="8b524-298">Najdete v části Ukázky kódu pro scénáře jedné stránky aplikace (SPA).</span><span class="sxs-lookup"><span data-stu-id="8b524-298">See the code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="8b524-299">Zkontrolujte často – přidáme nové ukázky vždy.</span><span class="sxs-lookup"><span data-stu-id="8b524-299">Be sure to check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="8b524-300">[Jedna stránka aplikace (SPA)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="8b524-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="8b524-301">Registrace</span><span class="sxs-lookup"><span data-stu-id="8b524-301">Registering</span></span>
* <span data-ttu-id="8b524-302">Jednoho klienta: Pokud vytváříte aplikace právě pro vaši organizaci, se musí být zaregistrován v adresáři vaší společnosti pomocí portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="8b524-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="8b524-303">Víceklientské: Pokud vytváříte aplikace, která mohou být využívána uživatelé mimo vaši organizaci, musí být zaregistrovaný v adresáři vaší společnosti, ale také musí být zaregistrovaný v adresáři každé organizace, který bude používat aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="8b524-304">Chcete-li k dispozici v jejich adresář vaší aplikace, můžete zahrnout procesu registrace pro vaše zákazníky, které umožňuje, aby souhlas do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-304">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="8b524-305">Při registraci vaší aplikace, zobrazí se dialogové okno, které zobrazuje oprávnění, která aplikace vyžaduje a možnost vyjádřit souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-305">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="8b524-306">V závislosti na požadovaných oprávnění správce v jiné organizaci může být nutné vyjádřit svůj souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-306">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="8b524-307">Když uživatel nebo správce souhlasí, aplikace se registruje v jejich adresáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-307">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="8b524-308">Další informace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="8b524-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="8b524-309">Po registraci aplikace, musí být nakonfigurován pro použití protokolu OAuth 2.0 implicitní Grant.</span><span class="sxs-lookup"><span data-stu-id="8b524-309">After registering the application, it must be configured to use OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="8b524-310">Ve výchozím nastavení je tento protokol zakázaná pro aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="8b524-311">Pokud chcete povolit protokol OAuth2 implicitní udělte pro aplikaci, upravit jeho manifest aplikace z portálu Azure a nastavte hodnotu "oauth2AllowImplicitFlow" na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="8b524-311">To enable the OAuth2 Implicit Grant protocol for your application, edit its application manifest from the Azure Portal and set the “oauth2AllowImplicitFlow” value to true.</span></span> <span data-ttu-id="8b524-312">Podrobné pokyny najdete v tématu [povolení OAuth 2.0 implicitní Grant pro jednostránkové aplikace](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="8b524-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="8b524-313">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="8b524-313">Token Expiration</span></span>
<span data-ttu-id="8b524-314">Použijete-li ADAL.js ke správě ověřování s Azure AD, můžete využívat několik funkcí, které usnadňují aktualizace tokenu vypršela platnost a také jak získat tokeny pro další webové rozhraní API prostředky, které může být volána aplikací.</span><span class="sxs-lookup"><span data-stu-id="8b524-314">When you use ADAL.js to manage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by the application.</span></span> <span data-ttu-id="8b524-315">Když se uživatel ověřuje úspěšně s Azure AD, zabezpečené pomocí souboru cookie relace pro uživatele mezi prohlížečem a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-315">When the user successfully authenticates with Azure AD, a session secured by a cookie is established for the user between the browser and Azure AD.</span></span> <span data-ttu-id="8b524-316">Je důležité si uvědomit, že existuje relace mezi uživatelem a Azure AD a není mezi uživatelem a webové aplikace na serveru spuštěna.</span><span class="sxs-lookup"><span data-stu-id="8b524-316">It’s important to note that the session exists between the user and Azure AD and not between the user and the web application running on the server.</span></span> <span data-ttu-id="8b524-317">Když vyprší platnost tokenu, používá ADAL.js bezobslužně získat další token tuto relaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-317">When a token expires, ADAL.js uses this session to silently obtain another token.</span></span> <span data-ttu-id="8b524-318">Dělá to pomocí skrytá iFrame odesílat a přijímat žádosti pomocí protokolu OAuth implicitní Grant.</span><span class="sxs-lookup"><span data-stu-id="8b524-318">It does this by using a hidden iFrame to send and receive the request using the OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="8b524-319">ADAL.js můžete také použít tento stejný mechanismus bezobslužně získat přístupové tokeny z Azure AD pro jiné webové rozhraní API prostředky, které aplikace volání tak dlouho, dokud tyto prostředky podporu (CORS), sdílení prostředků různého původu jsou zaregistrované v adresáři uživatele a všechny požadované souhlasu byl zadán uživatel během přihlašování.</span><span class="sxs-lookup"><span data-stu-id="8b524-319">ADAL.js can also use this same mechanism to silently obtain access tokens from Azure AD for other web API resources that the application calls as long as these resources support cross-origin resource sharing (CORS), are registered in the user’s directory, and any required consent was given by the user during sign-in.</span></span>

### <a name="native-application-to-web-api"></a><span data-ttu-id="8b524-320">Nativní aplikace za účelem webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-320">Native Application to Web API</span></span>
<span data-ttu-id="8b524-321">Tato část popisuje nativní aplikaci, která volá webové rozhraní API jménem uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="8b524-322">Tento scénář je založený na typ udělení kódu autorizace OAuth 2.0 pomocí veřejného klienta, jak je popsáno v části 4.1 [specifikace OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="8b524-322">This scenario is built on the OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of the [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="8b524-323">Nativní aplikace získá přístupový token pro uživatele s použitím protokolu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="8b524-323">The native application obtains an access token for the user by using the OAuth 2.0 protocol.</span></span> <span data-ttu-id="8b524-324">Tento přístupový token se pak odešlou v požadavku na webové rozhraní API, která opravňují uživatele a vrátí požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="8b524-324">This access token is then sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="8b524-325">Diagram</span><span class="sxs-lookup"><span data-stu-id="8b524-325">Diagram</span></span>
![Nativní aplikace za účelem webové rozhraní API Diagram](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-to-api"></a><span data-ttu-id="8b524-327">Tok ověření pro nativní aplikace za účelem rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-327">Authentication flow for native application to API</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="8b524-328">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="8b524-328">Description of Protocol Flow</span></span>
<span data-ttu-id="8b524-329">Pokud používáte knihovny ověřování AD, jsou zpracovávány většinu podrobnosti protokolu popsané níže, například automaticky otevírané okno prohlížeče, ukládání tokenu do mezipaměti a zpracování obnovovacích tokenů.</span><span class="sxs-lookup"><span data-stu-id="8b524-329">If you are using the AD Authentication Libraries, most of the protocol details described below are handled for you, such as the browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="8b524-330">Pomocí prohlížeče automaticky otevírané okno, že nativní aplikace odešle požadavek na koncový bod autorizace ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-330">Using a browser pop-up, the native application makes a request to the authorization endpoint in Azure AD.</span></span> <span data-ttu-id="8b524-331">Tato žádost obsahuje ID aplikace a identifikátor URI nativní aplikace přesměrování, jak je znázorněno v portálu Azure a identifikátor ID URI aplikace pro webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-331">This request includes the Application ID and the redirect URI of the native application as shown in the Azure Portal, and the application ID URI for the web API.</span></span> <span data-ttu-id="8b524-332">Pokud uživatel nebyl ještě přihlášeni, budou vyzváni k přihlášení znovu</span><span class="sxs-lookup"><span data-stu-id="8b524-332">If the user hasn’t already signed in, they are prompted to sign in again</span></span>
2. <span data-ttu-id="8b524-333">Azure AD ověřuje uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-333">Azure AD authenticates the user.</span></span> <span data-ttu-id="8b524-334">Pokud je víceklientské aplikace a je požadován k používání aplikace souhlas, uživatel bude nutné nutné vyjádřit souhlas. Pokud se tak již neučinili.</span><span class="sxs-lookup"><span data-stu-id="8b524-334">If it is a multi-tenant application and consent is required to use the application, the user will be required to consent if they haven’t already done so.</span></span> <span data-ttu-id="8b524-335">Po udělení souhlasu a po úspěšném ověření Azure AD vydá autorizační kód odpověď zpět identifikátor URI přesměrování klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back to the client application’s redirect URI.</span></span>
3. <span data-ttu-id="8b524-336">Pokud Azure AD vydá autorizační kód odpověď zpět identifikátor URI přesměrování, klientská aplikace přestane interakce prohlížeče a extrahuje autorizační kód z odpovědi.</span><span class="sxs-lookup"><span data-stu-id="8b524-336">When Azure AD issues an authorization code response back to the redirect URI, the client application stops browser interaction and extracts the authorization code from the response.</span></span> <span data-ttu-id="8b524-337">Pomocí tohoto kódu autorizace, klientská aplikace odešle požadavek na token koncový bod Azure AD, která zahrnuje autorizační kód, podrobnosti o aplikaci klienta (ID aplikace a identifikátor URI pro přesměrování) a požadovaný prostředek (aplikace identifikátor ID URI pro webové rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="8b524-337">Using this authorization code, the client application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
4. <span data-ttu-id="8b524-338">Autorizační kód a informace o rozhraní API pro aplikace a webové klient se ověří pomocí Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-338">The authorization code and information about the client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="8b524-339">Po úspěšném ověření Azure AD vrátí dva tokeny: přístupový token JWT a obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="8b524-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="8b524-340">Kromě toho Azure AD vrátí základní informace o uživateli, jako jejich zobrazovaný název a klienta ID.</span><span class="sxs-lookup"><span data-stu-id="8b524-340">In addition, Azure AD returns basic information about the user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="8b524-341">Přes protokol HTTPS klientská aplikace používá přístupový token vrácená JWT k přidání JWT řetězec s označením "Nosiče" v hlavičce autorizace požadavku do webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-341">Over HTTPS, the client application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="8b524-342">Webové rozhraní API pak ověří JWT token a pokud je ověření úspěšné, vrátí požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-342">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>
6. <span data-ttu-id="8b524-343">Když vyprší platnost přístupového tokenu, klientská aplikace obdrží chybu, která označuje, že uživatel musí provést ověření znovu.</span><span class="sxs-lookup"><span data-stu-id="8b524-343">When the access token expires, the client application will receive an error that indicates the user needs to authenticate again.</span></span> <span data-ttu-id="8b524-344">Pokud aplikace má platný obnovovací token, můžete použít k získání nového tokenu přístupu bez výzvy pro uživatele se znovu přihlásit.</span><span class="sxs-lookup"><span data-stu-id="8b524-344">If the application has a valid refresh token, it can be used to acquire a new access token without prompting the user to sign in again.</span></span> <span data-ttu-id="8b524-345">Pokud token obnovení vyprší, aplikace bude nutné znovu interaktivně ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-345">If the refresh token expires, the application will need to interactively authenticate the user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="8b524-346">Obnovovací token vydán Azure AD můžete použít pro přístup k více prostředkům.</span><span class="sxs-lookup"><span data-stu-id="8b524-346">The refresh token issued by Azure AD can be used to access multiple resources.</span></span> <span data-ttu-id="8b524-347">Například pokud máte klientské aplikace, který má oprávnění k volání dva webové rozhraní API, obnovovací token slouží k získání tokenu pro jiné webové rozhraní API také přístupu.</span><span class="sxs-lookup"><span data-stu-id="8b524-347">For example, if you have a client application that has permission to call two web APIs, the refresh token can be used to get an access token to the other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="8b524-348">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="8b524-348">Code Samples</span></span>
<span data-ttu-id="8b524-349">Nativní aplikace za účelem scénáře webového rozhraní API najdete v části Ukázky kódu.</span><span class="sxs-lookup"><span data-stu-id="8b524-349">See the code samples for Native Application to Web API scenarios.</span></span> <span data-ttu-id="8b524-350">A, kontrolujte pravidelně – přidáme nové ukázky vždy.</span><span class="sxs-lookup"><span data-stu-id="8b524-350">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="8b524-351">[Nativní aplikace za účelem webového rozhraní API](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="8b524-351">[Native Application to Web API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="8b524-352">Registrace</span><span class="sxs-lookup"><span data-stu-id="8b524-352">Registering</span></span>
* <span data-ttu-id="8b524-353">Jednoho klienta: Nativního obě aplikace a webové rozhraní API musí být zaregistrovaný ve stejném adresáři v Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-353">Single Tenant: Both the native application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="8b524-354">Webové rozhraní API se dá nakonfigurovat vystavit sadu oprávnění, která se používá k omezení nativní aplikaci přístup k jeho prostředky.</span><span class="sxs-lookup"><span data-stu-id="8b524-354">The web API can be configured to expose a set of permissions, which are used to limit the native application’s access to its resources.</span></span> <span data-ttu-id="8b524-355">Klientská aplikace potom vybere požadované oprávnění z rozevírací nabídky "Oprávnění k další aplikace" na webu Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="8b524-355">The client application then selects the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span>
* <span data-ttu-id="8b524-356">Víceklientské: Nejdřív nativní aplikace vždy jen zaregistrovat ve vývojář nebo adresář vydavatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-356">Multi-Tenant: First, the native application only ever registered in the developer or publisher’s directory.</span></span> <span data-ttu-id="8b524-357">Druhý nativní aplikace je nakonfigurovaná k označení oprávnění, která se vyžaduje, aby se funkční.</span><span class="sxs-lookup"><span data-stu-id="8b524-357">Second, the native application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="8b524-358">Tento seznam požadovaných oprávnění se zobrazí v dialogové okno, pokud uživatel nebo správce v cílovém adresáři dává souhlasu pro aplikaci, že bude k dispozici pro jejich organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-358">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="8b524-359">Některé aplikace vyžadují jenom individuální oprávnění, která může každý uživatel v organizaci souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-359">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="8b524-360">Jiné aplikace vyžadují oprávnění na úrovni správce, které nelze souhlas uživatele v organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-360">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="8b524-361">Pouze správce adresáře může udělit souhlas k aplikacím, které vyžadují tato úroveň oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8b524-361">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="8b524-362">Když uživatel nebo správce souhlasí, jenom webové rozhraní API se registruje v jejich adresáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-362">When the user or administrator consents, only the web API is registered in their directory.</span></span> <span data-ttu-id="8b524-363">Další informace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="8b524-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="8b524-364">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="8b524-364">Token Expiration</span></span>
<span data-ttu-id="8b524-365">Pokud nativní aplikace používá jeho autorizační kód pro získání tokenu přístupu JWT, dále přijímá obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="8b524-365">When the native application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="8b524-366">Když vyprší platnost přístupového tokenu, token obnovení lze opakované ověření uživatele bez nutnosti jejich se znovu přihlásit.</span><span class="sxs-lookup"><span data-stu-id="8b524-366">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="8b524-367">Tento token obnovení se pak použije k ověření uživatele, což vede nový přístupový token a obnovovací token.</span><span class="sxs-lookup"><span data-stu-id="8b524-367">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-to-web-api"></a><span data-ttu-id="8b524-368">Webovou aplikaci pro webové rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-368">Web Application to Web API</span></span>
<span data-ttu-id="8b524-369">Tato část popisuje webové aplikace, které potřebuje získat prostředky z webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-369">This section describes a web application that needs to get resources from a web API.</span></span> <span data-ttu-id="8b524-370">V tomto scénáři jsou dva typy identity, které webové aplikace můžete použít k ověřování a volání webového rozhraní API: Identita aplikace, nebo delegovaný uživatel identity.</span><span class="sxs-lookup"><span data-stu-id="8b524-370">In this scenario, there are two identity types that the web application can use to authenticate and call the web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="8b524-371">*Identita aplikace:* tento scénář používá k ověření jako aplikace a přístup k webové rozhraní API udělení pověření klienta OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="8b524-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant to authenticate as the application and access the web API.</span></span> <span data-ttu-id="8b524-372">Při použití identity aplikací, webové rozhraní API pouze může zjistit, že webová aplikace je volání, jako webové rozhraní API neobdrží žádné informace o uživateli.</span><span class="sxs-lookup"><span data-stu-id="8b524-372">When using an application identity, the web API can only detect that the web application is calling it, as the web API does not receive any information about the user.</span></span> <span data-ttu-id="8b524-373">Pokud aplikace obdrží informace o uživateli, bude odeslána prostřednictvím protokolu aplikace a není podepsán serverem Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-373">If the application receives information about the user, it will be sent via the application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="8b524-374">Webové rozhraní API důvěřuje, že webová aplikace ověřil daného uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-374">The web API trusts that the web application authenticated the user.</span></span> <span data-ttu-id="8b524-375">Z tohoto důvodu se tento vzor nazývá důvěryhodný subsystém.</span><span class="sxs-lookup"><span data-stu-id="8b524-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="8b524-376">*Delegované identity uživatele:* tento scénář lze provést dvěma způsoby: OpenID Connect a udělení autorizačního kódu OAuth 2.0 pomocí důvěrné klienta.</span><span class="sxs-lookup"><span data-stu-id="8b524-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="8b524-377">Webová aplikace získá přístupový token pro uživatele, který prokáže webové rozhraní API, které uživatel úspěšně ověřen do webové aplikace a které webové aplikace bylo možné získat identitu delegovaný uživatel k volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-377">The web application obtains an access token for the user, which proves to the web API that the user successfully authenticated to the web application and that the web application was able to obtain a delegated user identity to call the web API.</span></span> <span data-ttu-id="8b524-378">Tento přístupový token je odeslaných v požadavku na webové rozhraní API, která opravňují uživatele a vrátí požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="8b524-378">This access token is sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="8b524-379">Diagram</span><span class="sxs-lookup"><span data-stu-id="8b524-379">Diagram</span></span>
![Webovou aplikaci na diagram webového rozhraní API](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="8b524-381">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="8b524-381">Description of Protocol Flow</span></span>
<span data-ttu-id="8b524-382">Identita aplikace i delegovaný uživatel identity typy jsou popsané v následující postup.</span><span class="sxs-lookup"><span data-stu-id="8b524-382">Both the application identity and delegated user identity types are discussed in the flow below.</span></span> <span data-ttu-id="8b524-383">Klíčovým rozdílem mezi nimi je, že identita uživatele delegovaný musíte nejprve získat autorizační kód předtím, než uživatel může přihlásit a získat přístup k webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-383">The key difference between them is that the delegated user identity must first acquire an authorization code before the user can sign-in and gain access to the web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="8b524-384">Udělení přihlašovací údaje Identity aplikace pomocí klienta OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="8b524-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="8b524-385">Uživatel je přihlášený do služby Azure AD ve webové aplikaci (viz [webový prohlížeč k webové aplikaci](#web-browser-to-web-application) výše).</span><span class="sxs-lookup"><span data-stu-id="8b524-385">A user is signed in to Azure AD in the web application (see the [Web Browser to Web Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="8b524-386">Webová aplikace musí získat přístupový token, aby mohli ověřit webové rozhraní API a načíst požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="8b524-386">The web application needs to acquire an access token so that it can authenticate to the web API and retrieve the desired resource.</span></span> <span data-ttu-id="8b524-387">Vytvoří žádost na Azure AD koncovému bodu tokenu, poskytuje pověření, ID aplikace a aplikace webového rozhraní API je identifikátor ID URI.</span><span class="sxs-lookup"><span data-stu-id="8b524-387">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="8b524-388">Azure AD ověřuje aplikace a vrátí přístupový token JWT, který se používá k volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-388">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
4. <span data-ttu-id="8b524-389">Přes protokol HTTPS webová aplikace používá přístupový token vrácená JWT přidat řetězec JWT s označením "Nosiče" v hlavičce autorizace požadavku do webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-389">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="8b524-390">Webové rozhraní API pak ověří JWT token a pokud je ověření úspěšné, vrátí požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-390">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="8b524-391">Identita uživatele delegovaný s OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="8b524-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="8b524-392">Uživatel je přihlášený k webové aplikaci pomocí služby Azure AD (najdete v článku [webový prohlížeč k webové aplikaci](#web-browser-to-web-application) část výše).</span><span class="sxs-lookup"><span data-stu-id="8b524-392">A user is signed in to a web application using Azure AD (see the [Web Browser to Web Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="8b524-393">Pokud uživatel webové aplikace nebyla dosud dá souhlas, povolení k volání webového rozhraní API jeho jménem webové aplikace, uživatel bude muset souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-393">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="8b524-394">Aplikace se zobrazí oprávnění, která vyžaduje, a pokud některá z těchto oprávnění na úrovni správce, nebude možné souhlas normální uživatele v adresáři.</span><span class="sxs-lookup"><span data-stu-id="8b524-394">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="8b524-395">Tento proces souhlasu platí jenom pro víceklientské aplikace, aplikace nejsou jednoho klienta, aplikace bude již mít nezbytná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8b524-395">This consent process only applies to multi-tenant applications, not single tenant applications, as the application will already have the necessary permissions.</span></span> <span data-ttu-id="8b524-396">Při přihlášení uživatele přijat webové aplikace token ID s informacemi o uživateli, jakož i autorizační kód.</span><span class="sxs-lookup"><span data-stu-id="8b524-396">When the user signed in, the web application received an ID token with information about the user, as well as an authorization code.</span></span>
2. <span data-ttu-id="8b524-397">Pomocí autorizační kód vydané službou Azure AD, webové aplikace odešle požadavek na token koncový bod Azure AD, která zahrnuje autorizační kód, podrobnosti o aplikaci klienta (ID aplikace a identifikátor URI pro přesměrování) a požadovaný prostředek (aplikace identifikátor ID URI pro webové rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="8b524-397">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
3. <span data-ttu-id="8b524-398">Autorizační kód a informace o webové aplikace a webového rozhraní API se ověří pomocí Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-398">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="8b524-399">Po úspěšném ověření Azure AD vrátí dva tokeny: přístupový token JWT a obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="8b524-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="8b524-400">Přes protokol HTTPS webová aplikace používá přístupový token vrácená JWT přidat řetězec JWT s označením "Nosiče" v hlavičce autorizace požadavku do webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-400">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="8b524-401">Webové rozhraní API pak ověří JWT token a pokud je ověření úspěšné, vrátí požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-401">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="8b524-402">Identita uživatele delegovaný s udělení autorizačního kódu OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="8b524-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="8b524-403">Uživatel je již přihlášení k webové aplikaci, jejíž mechanismus ověřování je nezávislé na Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-403">A user is already signed in to a web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="8b524-404">Webové aplikace vyžaduje autorizační kód získat přístupový token, takže ho vydává požadavek prostřednictvím prohlížeče pro koncový bod autorizace Azure AD, poskytuje ID aplikace a identifikátor URI přesměrování pro webovou aplikaci po úspěšném ověření.</span><span class="sxs-lookup"><span data-stu-id="8b524-404">The web application requires an authorization code to acquire an access token, so it issues a request through the browser to Azure AD’s authorization endpoint, providing the Application ID and redirect URI for the web application after successful authentication.</span></span> <span data-ttu-id="8b524-405">Uživatel se přihlásí ke službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-405">The user signs in to Azure AD.</span></span>
3. <span data-ttu-id="8b524-406">Pokud uživatel webové aplikace nebyla dosud dá souhlas, povolení k volání webového rozhraní API jeho jménem webové aplikace, uživatel bude muset souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-406">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="8b524-407">Aplikace se zobrazí oprávnění, která vyžaduje, a pokud některá z těchto oprávnění na úrovni správce, nebude možné souhlas normální uživatele v adresáři.</span><span class="sxs-lookup"><span data-stu-id="8b524-407">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="8b524-408">Svůj souhlas se vztahuje na jeden a více klientů aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-408">This consent applies to both single and multi-tenant application.</span></span>  <span data-ttu-id="8b524-409">V případě jednoho klienta může správce provést správce souhlas k souhlasu jménem uživatelů.</span><span class="sxs-lookup"><span data-stu-id="8b524-409">In the single tenant case, an admin can perform admin consent to consent on behalf of their users.</span></span>  <span data-ttu-id="8b524-410">To lze provést pomocí `Grant Permissions` v tlačítko [portálu Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="8b524-410">This can be done using the `Grant Permissions` button in the [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="8b524-411">Poté, co uživatel souhlasí, webová aplikace přijímá autorizační kód, který musí získat přístupový token.</span><span class="sxs-lookup"><span data-stu-id="8b524-411">After the user has consented, the web application receives the authorization code that it needs to acquire an access token.</span></span>
5. <span data-ttu-id="8b524-412">Pomocí autorizační kód vydané službou Azure AD, webové aplikace odešle požadavek na token koncový bod Azure AD, která zahrnuje autorizační kód, podrobnosti o aplikaci klienta (ID aplikace a identifikátor URI pro přesměrování) a požadovaný prostředek (aplikace identifikátor ID URI pro webové rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="8b524-412">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
6. <span data-ttu-id="8b524-413">Autorizační kód a informace o webové aplikace a webového rozhraní API se ověří pomocí Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-413">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="8b524-414">Po úspěšném ověření Azure AD vrátí dva tokeny: přístupový token JWT a obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="8b524-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="8b524-415">Přes protokol HTTPS webová aplikace používá přístupový token vrácená JWT přidat řetězec JWT s označením "Nosiče" v hlavičce autorizace požadavku do webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-415">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="8b524-416">Webové rozhraní API pak ověří JWT token a pokud je ověření úspěšné, vrátí požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-416">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="8b524-417">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="8b524-417">Code Samples</span></span>
<span data-ttu-id="8b524-418">Najdete v části Ukázky kódu pro webovou aplikaci pro scénáře webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-418">See the code samples for Web Application to Web API scenarios.</span></span> <span data-ttu-id="8b524-419">A, kontrolujte pravidelně – přidáme nové ukázky vždy.</span><span class="sxs-lookup"><span data-stu-id="8b524-419">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="8b524-420">Webové [aplikace webového rozhraní API](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="8b524-420">Web [Application to Web API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="8b524-421">Registrace</span><span class="sxs-lookup"><span data-stu-id="8b524-421">Registering</span></span>
* <span data-ttu-id="8b524-422">Jednoho klienta: Identita aplikace i delegovaný uživatel identity případů, webové aplikace a rozhraní web API musí být zaregistrován ve stejném adresáři v Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-422">Single Tenant: For both the application identity and delegated user identity cases, the web application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="8b524-423">Webové rozhraní API se dá nakonfigurovat vystavit sadu oprávnění, které se používají k omezení přístupu webové aplikace k její prostředky.</span><span class="sxs-lookup"><span data-stu-id="8b524-423">The web API can be configured to expose a set of permissions, which are used to limit the web application’s access to its resources.</span></span> <span data-ttu-id="8b524-424">Pokud se používá typ identity delegované uživatele, vyberte z rozevírací nabídky "Oprávnění k další aplikace" na webu Azure Portal požadované oprávnění musí webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-424">If a delegated user identity type is being used, the web application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="8b524-425">Tento krok se nevyžaduje, pokud se používá typ identity aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-425">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="8b524-426">Víceklientské: Nejdřív webové aplikace je nakonfigurovaná k označení oprávnění, která se vyžaduje, aby se funkční.</span><span class="sxs-lookup"><span data-stu-id="8b524-426">Multi-Tenant: First, the web application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="8b524-427">Tento seznam požadovaných oprávnění se zobrazí v dialogové okno, pokud uživatel nebo správce v cílovém adresáři dává souhlasu pro aplikaci, že bude k dispozici pro jejich organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-427">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="8b524-428">Některé aplikace vyžadují jenom individuální oprávnění, která může každý uživatel v organizaci souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-428">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="8b524-429">Jiné aplikace vyžadují oprávnění na úrovni správce, které nelze souhlas uživatele v organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-429">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="8b524-430">Pouze správce adresáře může udělit souhlas k aplikacím, které vyžadují tato úroveň oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8b524-430">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="8b524-431">Když uživatel nebo správce souhlasí, webové aplikace a webového rozhraní API jsou obě registrovány svého adresáře.</span><span class="sxs-lookup"><span data-stu-id="8b524-431">When the user or administrator consents, the web application and the web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="8b524-432">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="8b524-432">Token Expiration</span></span>
<span data-ttu-id="8b524-433">Pokud webová aplikace používá jeho autorizační kód k získání tokenu přístupu JWT, dále přijímá obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="8b524-433">When the web application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="8b524-434">Když vyprší platnost přístupového tokenu, token obnovení lze opakované ověření uživatele bez nutnosti jejich se znovu přihlásit.</span><span class="sxs-lookup"><span data-stu-id="8b524-434">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="8b524-435">Tento token obnovení se pak použije k ověření uživatele, což vede nový přístupový token a obnovovací token.</span><span class="sxs-lookup"><span data-stu-id="8b524-435">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-to-web-api"></a><span data-ttu-id="8b524-436">Démon procesu nebo serverové aplikace webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-436">Daemon or Server Application to Web API</span></span>
<span data-ttu-id="8b524-437">Tato část popisuje proces démon nebo server aplikace, která je potřeba získat prostředky z webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-437">This section describes a daemon or server application that needs to get resources from a web API.</span></span> <span data-ttu-id="8b524-438">Existují dva dílčí scénáře, které se vztahují k této části: démon, které potřebuje volat webového rozhraní API, založený na typ udělení pověření klienta OAuth 2.0; a serverová aplikace (například webové rozhraní API), které potřebuje volat webového rozhraní API, založený na specifikace koncept OAuth 2.0 On-Behalf-Of.</span><span class="sxs-lookup"><span data-stu-id="8b524-438">There are two sub-scenarios that apply to this section: A daemon that needs to call a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs to call a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="8b524-439">U scénáře, když démon aplikace potřebuje k volání webového rozhraní API, je důležité si uvědomit, pár věcí.</span><span class="sxs-lookup"><span data-stu-id="8b524-439">For the scenario when a daemon application needs to call a web API, it’s important to understand a few things.</span></span> <span data-ttu-id="8b524-440">Nejprve interakci s uživatelem není možné pomocí démon aplikace, který vyžaduje aplikací mít svůj vlastní identity.</span><span class="sxs-lookup"><span data-stu-id="8b524-440">First, user interaction is not possible with a daemon application, which requires the application to have its own identity.</span></span> <span data-ttu-id="8b524-441">Příkladem démon aplikace je dávkové úlohy nebo služby operační systém spuštěný na pozadí.</span><span class="sxs-lookup"><span data-stu-id="8b524-441">An example of a daemon application is a batch job, or an operating system service running in the background.</span></span> <span data-ttu-id="8b524-442">Tento typ aplikace požaduje přístupový token pomocí svou identitu aplikace a prezentování jeho ID aplikace, přihlašovací údaje (heslo nebo certifikát) a aplikace identifikátor ID URI do služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI to Azure AD.</span></span> <span data-ttu-id="8b524-443">Po úspěšném ověření démon obdrží token přístupu z Azure AD, která se pak použije k volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-443">After successful authentication, the daemon receives an access token from Azure AD, which is then used to call the web API.</span></span>

<span data-ttu-id="8b524-444">Pro scénář při serverová aplikace potřebuje k volání webového rozhraní API, je vhodné použít příklad.</span><span class="sxs-lookup"><span data-stu-id="8b524-444">For the scenario when a server application needs to call a web API, it’s helpful to use an example.</span></span> <span data-ttu-id="8b524-445">Představte si, že byl uživatel ověřen na nativní aplikaci a tato nativní aplikace musí volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-445">Imagine that a user has authenticated on a native application, and this native application needs to call a web API.</span></span> <span data-ttu-id="8b524-446">Azure AD vydá token JWT přístup k volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-446">Azure AD issues a JWT access token to call the web API.</span></span> <span data-ttu-id="8b524-447">Pokud webového rozhraní API potřebuje volat podřízené webové rozhraní API, může použít tok on-behalf-of delegovat identitu uživatele a ověření sekundární webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-447">If the web API needs to call another downstream web API, it can use the on-behalf-of flow to delegate the user’s identity and authenticate to the second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="8b524-448">Diagram</span><span class="sxs-lookup"><span data-stu-id="8b524-448">Diagram</span></span>
![Démon procesu nebo serverové aplikace diagram webového rozhraní API](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="8b524-450">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="8b524-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="8b524-451">Udělení přihlašovací údaje Identity aplikace pomocí klienta OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="8b524-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="8b524-452">Nejprve server potřebuje k ověření pomocí Azure AD jako samostatně, bez jakékoli zásahem ze strany například dialogovým interaktivní přihlašování.</span><span class="sxs-lookup"><span data-stu-id="8b524-452">First, the server application needs to authenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="8b524-453">Vytvoří žádost na Azure AD koncovému bodu tokenu, poskytnutí přihlašovacích údajů, ID aplikace a identifikátor ID URI aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-453">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="8b524-454">Azure AD ověřuje aplikace a vrátí přístupový token JWT, který se používá k volání webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-454">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
3. <span data-ttu-id="8b524-455">Přes protokol HTTPS webová aplikace používá přístupový token vrácená JWT přidat řetězec JWT s označením "Nosiče" v hlavičce autorizace požadavku do webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-455">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="8b524-456">Webové rozhraní API pak ověří JWT token a pokud je ověření úspěšné, vrátí požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="8b524-456">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="8b524-457">Identita uživatele delegovaný specifikace On-Behalf-Of koncept OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="8b524-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="8b524-458">Tok popsané níže předpokládá, že uživatel byl ověřen na jinou aplikaci (například nativní aplikace), a jejich identitu uživatele byla použita k získání přístupového tokenu k první vrstvu webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-458">The flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used to acquire an access token to the first-tier web API.</span></span>

1. <span data-ttu-id="8b524-459">Nativní aplikace odešle token přístupu do první vrstvu webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-459">The native application sends the access token to the first-tier web API.</span></span>
2. <span data-ttu-id="8b524-460">První vrstvu webového rozhraní API odešle požadavek do služby Azure AD koncovému bodu tokenu, poskytuje jeho ID aplikace a přihlašovací údaje, stejně jako přístupový token uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-460">The first-tier web API sends a request to Azure AD’s token endpoint, providing its Application ID and credentials, as well as the user’s access token.</span></span> <span data-ttu-id="8b524-461">Kromě toho je zaslán požadavek s on_behalf_of parametr, který určuje webového rozhraní API požaduje nové tokeny volat podřízené webové rozhraní API jménem původního uživatele.</span><span class="sxs-lookup"><span data-stu-id="8b524-461">In addition, the request is sent with an on_behalf_of parameter that indicates the web API is requesting new tokens to call a downstream web API on behalf of the original user.</span></span>
3. <span data-ttu-id="8b524-462">Azure AD ověří, že první vrstvu webového rozhraní API, má oprávnění k přístupu sekundární webové rozhraní API a ověří žádost, vrácení přístupový token JWT, a aktualizovat token JWT token, který má první vrstvu webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-462">Azure AD verifies that the first-tier web API has permissions to access the second-tier web API and validates the request, returning a JWT access token and a JWT refresh token to the first-tier web API.</span></span>
4. <span data-ttu-id="8b524-463">První vrstvu webového rozhraní API přes protokol HTTPS, pak zavolá sekundární webové rozhraní API připojením řetězec tokenu v hlavičce autorizace v požadavku.</span><span class="sxs-lookup"><span data-stu-id="8b524-463">Over HTTPS, the first-tier web API then calls the second-tier web API by appending the token string in the Authorization header in the request.</span></span> <span data-ttu-id="8b524-464">První vrstvu webového rozhraní API můžete nadále volání sekundární webové rozhraní API, dokud jsou platné přístupový token a obnovovacích tokenů.</span><span class="sxs-lookup"><span data-stu-id="8b524-464">The first-tier web API can continue to call the second-tier web API as long as the access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="8b524-465">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="8b524-465">Code Samples</span></span>
<span data-ttu-id="8b524-466">Démon procesu nebo serverové aplikace scénáře webového rozhraní API najdete v části Ukázky kódu.</span><span class="sxs-lookup"><span data-stu-id="8b524-466">See the code samples for Daemon or Server Application to Web API scenarios.</span></span> <span data-ttu-id="8b524-467">A, kontrolujte pravidelně – přidáme nové ukázky vždy.</span><span class="sxs-lookup"><span data-stu-id="8b524-467">And, check back frequently -- we add new samples all the time.</span></span> [<span data-ttu-id="8b524-468">Server nebo démon aplikaci pro webové rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8b524-468">Server or Daemon Application to Web API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="8b524-469">Registrace</span><span class="sxs-lookup"><span data-stu-id="8b524-469">Registering</span></span>
* <span data-ttu-id="8b524-470">Jednoho klienta: Identita aplikace i delegovaný uživatel identity případy, aplikace démon nebo server musí být zaregistrované ve stejném adresáři v Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b524-470">Single Tenant: For both the application identity and delegated user identity cases, the daemon or server application must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="8b524-471">Webové rozhraní API se dá nakonfigurovat vystavit sadu oprávnění, která se používá k omezení démon nebo serveru pro přístup k jeho prostředky.</span><span class="sxs-lookup"><span data-stu-id="8b524-471">The web API can be configured to expose a set of permissions, which are used to limit the daemon or server’s access to its resources.</span></span> <span data-ttu-id="8b524-472">Pokud se používá typ identity delegované uživatele, musí aplikace serveru vyberte z rozevírací nabídky "Oprávnění k další aplikace" na webu Azure Portal požadované oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8b524-472">If a delegated user identity type is being used, the server application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="8b524-473">Tento krok se nevyžaduje, pokud se používá typ identity aplikace.</span><span class="sxs-lookup"><span data-stu-id="8b524-473">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="8b524-474">Víceklientské: Nejdřív démon nebo server aplikace je nakonfigurovaná k označení oprávnění, která se vyžaduje, aby se funkční.</span><span class="sxs-lookup"><span data-stu-id="8b524-474">Multi-Tenant: First, the daemon or server application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="8b524-475">Tento seznam požadovaných oprávnění se zobrazí v dialogové okno, pokud uživatel nebo správce v cílovém adresáři dává souhlasu pro aplikaci, že bude k dispozici pro jejich organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-475">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="8b524-476">Některé aplikace vyžadují jenom individuální oprávnění, která může každý uživatel v organizaci souhlas.</span><span class="sxs-lookup"><span data-stu-id="8b524-476">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="8b524-477">Jiné aplikace vyžadují oprávnění na úrovni správce, které nelze souhlas uživatele v organizaci.</span><span class="sxs-lookup"><span data-stu-id="8b524-477">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="8b524-478">Pouze správce adresáře může udělit souhlas k aplikacím, které vyžadují tato úroveň oprávnění.</span><span class="sxs-lookup"><span data-stu-id="8b524-478">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="8b524-479">Když uživatel nebo správce souhlasí, jsou v jejich adresář zaregistrované i webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b524-479">When the user or administrator consents, both of the web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="8b524-480">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="8b524-480">Token Expiration</span></span>
<span data-ttu-id="8b524-481">Při první aplikaci jeho autorizační kód používá k získání tokenu přístupu JWT, dále přijímá obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="8b524-481">When the first application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="8b524-482">Když vyprší platnost přístupového tokenu, token obnovení lze opakované ověření uživatele bez zobrazení výzvy k zadání pověření.</span><span class="sxs-lookup"><span data-stu-id="8b524-482">When the access token expires, the refresh token can be used to re-authenticate the user without prompting for credentials.</span></span> <span data-ttu-id="8b524-483">Tento token obnovení se pak použije k ověření uživatele, což vede nový přístupový token a obnovovací token.</span><span class="sxs-lookup"><span data-stu-id="8b524-483">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="8b524-484">Viz také</span><span class="sxs-lookup"><span data-stu-id="8b524-484">See Also</span></span>
[<span data-ttu-id="8b524-485">Příručka pro vývojáře Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8b524-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="8b524-486">Ukázky kódu Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8b524-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="8b524-487">Důležité informace o podepisování výměna klíče ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="8b524-488">OAuth 2.0 ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b524-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

