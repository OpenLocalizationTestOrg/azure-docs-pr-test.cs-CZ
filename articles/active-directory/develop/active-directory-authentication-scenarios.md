---
title: "aaaAuthentication scénáře pro Azure AD | Microsoft Docs"
description: "Přehled hello pět nejběžnější scénáře ověřování pro Azure Active Directory (AAD)"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 5b391e3f096fcb52934c4a8aff08688352bfd3dc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="4b4a3-103">Scénáře ověřování pro Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="4b4a3-104">Azure Active Directory (Azure AD) zjednodušuje tím, že poskytuje identity jako služba, se podpora pro standardní protokoly například OAuth 2.0 a OpenID Connect, jakož i opensourcové knihovny pro různé platformy toohelp ověřování pro vývojáře psaní se rychle.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms toohelp you start coding quickly.</span></span> <span data-ttu-id="4b4a3-105">Tento dokument vám pomůže pochopit hello podporuje různé scénáře služby Azure AD a ukáže vám, jak tooget spuštěna.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-105">This document will help you understand hello various scenarios Azure AD supports and will show you how tooget started.</span></span> <span data-ttu-id="4b4a3-106">Je rozdělený do hello následující části:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-106">It’s divided into hello following sections:</span></span>

* [<span data-ttu-id="4b4a3-107">Základní informace o ověřování ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="4b4a3-108">Deklarace identity v tokenech zabezpečení Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="4b4a3-109">Základní informace o registraci aplikace ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="4b4a3-110">Typy aplikací a scénáře</span><span class="sxs-lookup"><span data-stu-id="4b4a3-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="4b4a3-111">Webové prohlížeče tooWeb aplikace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-111">Web Browser tooWeb Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="4b4a3-112">Jednostránkové aplikace (SPA)</span><span class="sxs-lookup"><span data-stu-id="4b4a3-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="4b4a3-113">Nativní aplikace tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-113">Native Application tooWeb API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="4b4a3-114">Webové aplikace tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-114">Web Application tooWeb API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="4b4a3-115">Démon procesu nebo serverové aplikace tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-115">Daemon or Server Application tooWeb API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="4b4a3-116">Základní informace o ověřování ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="4b4a3-117">Pokud jste obeznámeni s základní koncepty ověřování ve službě Azure AD, přečtěte si v této části.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="4b4a3-118">V ostatních případech můžete chtít tooskip dolů příliš[typy aplikací a scénáře](#application-types-and-scenarios).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-118">Otherwise, you may want tooskip down too[Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="4b4a3-119">Pojďme se hello nejzákladnější scénář, kdy je potřeba identity: uživatel ve webovém prohlížeči potřebuje tooauthenticate tooa webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-119">Let’s consider hello most basic scenario where identity is required: a user in a web browser needs tooauthenticate tooa web application.</span></span> <span data-ttu-id="4b4a3-120">Tento scénář je podrobně popsané v větší hello [webový prohlížeč tooWeb aplikace](#web-browser-to-web-application) části, ale je užitečná, pokud počáteční bod tooillustrate hello možnosti služby Azure AD a conceptualize fungování hello scénář.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-120">This scenario is described in greater detail in hello [Web Browser tooWeb Application](#web-browser-to-web-application) section, but it’s a useful starting point tooillustrate hello capabilities of Azure AD and conceptualize how hello scenario works.</span></span> <span data-ttu-id="4b4a3-121">Vezměte v úvahu hello následující diagram pro tento scénář:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-121">Consider hello following diagram for this scenario:</span></span>

![Přehled aplikace tooweb přihlášení](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="4b4a3-123">S hello diagramu výše na paměti, zde je co potřebujete tooknow o jeho různé komponenty:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-123">With hello diagram above in mind, here’s what you need tooknow about its various components:</span></span>

* <span data-ttu-id="4b4a3-124">Azure AD je zprostředkovatel identity hello, zodpovědná za ověření hello identity uživatelů a aplikací, které existují v adresáři organizace a nakonec vystavování tokenů zabezpečení po úspěšném ověření těchto uživatelů a aplikací.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-124">Azure AD is hello identity provider, responsible for verifying hello identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="4b4a3-125">Aplikace, která chce toooutsource ověřování tooAzure AD musí být zaregistrované ve službě Azure AD, která registruje a jednoznačně identifikuje aplikaci hello v adresáři hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-125">An application that wants toooutsource authentication tooAzure AD must be registered in Azure AD, which registers and uniquely identifies hello app in hello directory.</span></span>
* <span data-ttu-id="4b4a3-126">Vývojáři mohou použít hello Azure AD s otevřeným zdrojem ověřování knihovny toomake ověřování snadno zpracováním podrobností protokolu hello za vás.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-126">Developers can use hello open source Azure AD authentication libraries toomake authentication easy by handling hello protocol details for you.</span></span> <span data-ttu-id="4b4a3-127">V tématu [knihovny Azure Active Directory Authentication](active-directory-authentication-libraries.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="4b4a3-128">• Jednou uživatel byl ověřen, aplikace hello tooensure tokenu zabezpečení hello uživatele musíte ověřit, že ověření proběhlo úspěšně, pro hello určený strany.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-128">• Once a user has been authenticated, hello application must validate hello user’s security token tooensure that authentication was successful for hello intended parties.</span></span> <span data-ttu-id="4b4a3-129">Vývojáři mohou použít hello poskytuje knihovny toohandle ověřováním žádné tokenu z Azure AD, včetně webových tokenů JSON (JWT) nebo SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-129">Developers can use hello provided authentication libraries toohandle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="4b4a3-130">Pokud chcete tooperform ověření ručně, najdete v části hello [obslužná rutina tokenu JWT](https://msdn.microsoft.com/library/dn205065.aspx) dokumentaci.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-130">If you want tooperform validation manually, see hello [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4b4a3-131">Azure AD prostředky používá tokeny toosign kryptografie využívající veřejného klíče a ověřte, zda je platný.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-131">Azure AD uses public key cryptography toosign tokens and verify that they are valid.</span></span> <span data-ttu-id="4b4a3-132">V tématu [důležité informace o podpisový klíč výměny ve službě Azure AD](active-directory-signing-key-rollover.md) Další informace o potřebné logiky hello, musíte mít ve vaší aplikaci tooensure je vždy aktualizovat hello nejnovější klíče.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on hello necessary logic you must have in your application tooensure it’s always updated with hello latest keys.</span></span>
> 
> 

<span data-ttu-id="4b4a3-133">• hello toku požadavků a odpovědí pro proces ověřování hello je dáno hello ověřovací protokol, který byl použit, jako je například OAuth 2.0, OpenID Connect, WS-Federation nebo SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-133">• hello flow of requests and responses for hello authentication process is determined by hello authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="4b4a3-134">Tyto protokoly jsou podrobněji popsána v hello [Azure Active Directory ověřovací protokoly](active-directory-authentication-protocols.md) tématu a v následujících částech hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-134">These protocols are discussed in more detail in hello [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in hello sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="4b4a3-135">Azure AD podporuje hello OAuth 2.0 a OpenID Connect standardy, které rozsáhlé použití tokenů nosiče, včetně nosné tokeny vyjádřené tokeny Jwt.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-135">Azure AD supports hello OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="4b4a3-136">Token lightweight zabezpečení, že uděluje hello "nosiče" přístup tooa chráněný prostředek, je token nosiče.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-136">A bearer token is a lightweight security token that grants hello “bearer” access tooa protected resource.</span></span> <span data-ttu-id="4b4a3-137">V tomto smyslu je hello "nosiče" libovolné strany, který může být hello token.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-137">In this sense, hello “bearer” is any party that can present hello token.</span></span> <span data-ttu-id="4b4a3-138">I když může strana musí nejprve ověřit pomocí služby Azure AD tooreceive hello nosný token, zda text hello požadované kroky nejsou přijata toosecure hello token v přenos a ukládání, může být zachyceny a použity nezamýšleným strana.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-138">Though a party must first authenticate with Azure AD tooreceive hello bearer token, if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="4b4a3-139">I když některé tokeny zabezpečení má integrovanou mechanismus, který brání neoprávněným stranám jejich používání, nosné tokeny nemají tento mechanismus a musí být přenosu v zabezpečený kanál, jako je například transport layer security (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="4b4a3-140">Pokud token nosiče je přenesen v hello jasné, střední útok man-in hello mohou být využívána token škodlivý strany tooacquire hello a použít jej pro prostředek tooa chráněné neoprávněného přístupu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-140">If a bearer token is transmitted in hello clear, a man-in hello middle attack can be used by a malicious party tooacquire hello token and use it for an unauthorized access tooa protected resource.</span></span> <span data-ttu-id="4b4a3-141">Hello stejné zabezpečení zásady platí při ukládání nebo ukládání do mezipaměti nosné tokeny pro pozdější použití.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-141">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="4b4a3-142">Vždy zajistěte, aby vaše aplikace odesílá a ukládá nosné tokeny zabezpečeným způsobem.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="4b4a3-143">Další aspekty zabezpečení na nosné tokeny, najdete v části [RFC 6750 část 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="4b4a3-144">Teď, když máte přehled hello základy, přečtěte si hello oddílech toounderstand jak zřizování funguje ve službě Azure AD a hello běžné scénáře služby Azure AD podporuje.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-144">Now that you have an overview of hello basics, read hello sections below toounderstand how provisioning works in Azure AD and hello common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="4b4a3-145">Deklarace identity v tokenech zabezpečení Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="4b4a3-146">Zabezpečení tokeny vydané službou Azure AD obsahují deklarace identity a tvrzením informací o hello subjektu, který byl ověřen.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-146">Security tokens issued by Azure AD contain claims, or assertions of information about hello subject that has been authenticated.</span></span> <span data-ttu-id="4b4a3-147">Tyto deklarace lze hello aplikací pro různé úlohy.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-147">These claims can be used by hello application for various tasks.</span></span> <span data-ttu-id="4b4a3-148">Například se může být použité toovalidate hello token, identifikovat klienta directory hello předmětu, zobrazit informace o uživateli, určit hello subjektu autorizace a tak dále.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-148">For example, they can be used toovalidate hello token, identify hello subject's directory tenant, display user information, determine hello subject's authorization, and so on.</span></span> <span data-ttu-id="4b4a3-149">deklarace identity Hello nenachází v žádné tokenu zabezpečení jsou závislé na hello typ tokenu, hello typ pověření používaná tooauthenticate hello uživatele a konfigurace aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-149">hello claims present in any given security token are dependent upon hello type of token, hello type of credential used tooauthenticate hello user, and hello application configuration.</span></span> <span data-ttu-id="4b4a3-150">Stručný popis každého typu deklarace identity vygenerované službou Azure AD najdete v tabulce hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-150">A brief description of each type of claim emitted by Azure AD is provided in hello table below.</span></span> <span data-ttu-id="4b4a3-151">Další informace najdete v části příliš[podporované tokenu a typy deklarací identity](active-directory-token-and-claims.md).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-151">For more information, refer too[Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="4b4a3-152">Deklarovat</span><span class="sxs-lookup"><span data-stu-id="4b4a3-152">Claim</span></span> | <span data-ttu-id="4b4a3-153">Popis</span><span class="sxs-lookup"><span data-stu-id="4b4a3-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="4b4a3-154">ID aplikace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-154">Application ID</span></span> |<span data-ttu-id="4b4a3-155">Identifikuje hello aplikaci, která používá hello token.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-155">Identifies hello application that is using hello token.</span></span> |
| <span data-ttu-id="4b4a3-156">Cílová skupina</span><span class="sxs-lookup"><span data-stu-id="4b4a3-156">Audience</span></span> |<span data-ttu-id="4b4a3-157">Identifikuje příjemce prostředků hello hello token je určený pro.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-157">Identifies hello recipient resource hello token is intended for.</span></span> |
| <span data-ttu-id="4b4a3-158">Application Authentication Context Class Reference</span><span class="sxs-lookup"><span data-stu-id="4b4a3-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="4b4a3-159">Určuje, jak hello klienta byla ověřený (veřejné klient oproti důvěrné klienta).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-159">Indicates how hello client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="4b4a3-160">Ověřování prostřednictvím rychlých</span><span class="sxs-lookup"><span data-stu-id="4b4a3-160">Authentication Instant</span></span> |<span data-ttu-id="4b4a3-161">Zaznamenává hello datum a čas, kdy došlo k chybě ověřování hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-161">Records hello date and time when hello authentication occurred.</span></span> |
| <span data-ttu-id="4b4a3-162">Metoda ověřování</span><span class="sxs-lookup"><span data-stu-id="4b4a3-162">Authentication Method</span></span> |<span data-ttu-id="4b4a3-163">Určuje, jak byla ověřena hello subjektu hello tokenu (heslo, certifikát, atd.).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-163">Indicates how hello subject of hello token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="4b4a3-164">Jméno</span><span class="sxs-lookup"><span data-stu-id="4b4a3-164">First Name</span></span> |<span data-ttu-id="4b4a3-165">Poskytuje hello křestní jméno uživatele hello jako sada ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-165">Provides hello given name of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="4b4a3-166">Skupiny</span><span class="sxs-lookup"><span data-stu-id="4b4a3-166">Groups</span></span> |<span data-ttu-id="4b4a3-167">Obsahuje objekt skupiny ID Azure AD, které hello uživatel je členem skupiny.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-167">Contains object Ids of Azure AD groups hello user is a member of.</span></span> |
| <span data-ttu-id="4b4a3-168">Zprostředkovatel identity</span><span class="sxs-lookup"><span data-stu-id="4b4a3-168">Identity Provider</span></span> |<span data-ttu-id="4b4a3-169">Zprostředkovatel identity hello záznamy, předmět hello hello token k ověření.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-169">Records hello identity provider that authenticated hello subject of hello token.</span></span> |
| <span data-ttu-id="4b4a3-170">Vydané v</span><span class="sxs-lookup"><span data-stu-id="4b4a3-170">Issued At</span></span> |<span data-ttu-id="4b4a3-171">V které hello byl vydán token, často používají pro token aktuálnosti čas hello záznamy.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-171">Records hello time at which hello token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="4b4a3-172">Vystavitel</span><span class="sxs-lookup"><span data-stu-id="4b4a3-172">Issuer</span></span> |<span data-ttu-id="4b4a3-173">Identifikuje hello služby tokenů zabezpečení, které vygenerované hello token, jakož i hello klienta Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-173">Identifies hello STS that emitted hello token as well as hello Azure AD tenant.</span></span> |
| <span data-ttu-id="4b4a3-174">Příjmení</span><span class="sxs-lookup"><span data-stu-id="4b4a3-174">Last Name</span></span> |<span data-ttu-id="4b4a3-175">Poskytuje hello Přezdívka uživatele hello jako sada ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-175">Provides hello surname of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="4b4a3-176">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="4b4a3-176">Name</span></span> |<span data-ttu-id="4b4a3-177">Poskytuje lidského čitelný hodnotu, která identifikuje hello subjektu hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-177">Provides a human readable value that identifies hello subject of hello token.</span></span> |
| <span data-ttu-id="4b4a3-178">Id objektu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-178">Object Id</span></span> |<span data-ttu-id="4b4a3-179">Obsahuje neměnné jedinečný identifikátor hello subjektu ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-179">Contains an immutable, unique identifier of hello subject in Azure AD.</span></span> |
| <span data-ttu-id="4b4a3-180">Role</span><span class="sxs-lookup"><span data-stu-id="4b4a3-180">Roles</span></span> |<span data-ttu-id="4b4a3-181">Obsahuje popisné názvy z Azure AD aplikační role byla udělena tento uživatel hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-181">Contains friendly names of Azure AD Application Roles that hello user has been granted.</span></span> |
| <span data-ttu-id="4b4a3-182">Rozsah</span><span class="sxs-lookup"><span data-stu-id="4b4a3-182">Scope</span></span> |<span data-ttu-id="4b4a3-183">Označuje hello oprávnění udělené toohello klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-183">Indicates hello permissions granted toohello client application.</span></span> |
| <span data-ttu-id="4b4a3-184">Předmět</span><span class="sxs-lookup"><span data-stu-id="4b4a3-184">Subject</span></span> |<span data-ttu-id="4b4a3-185">Označuje hello objekt zabezpečení, o které hello token vyhodnotí informace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-185">Indicates hello principal about which hello token asserts information.</span></span> |
| <span data-ttu-id="4b4a3-186">Id klienta</span><span class="sxs-lookup"><span data-stu-id="4b4a3-186">Tenant Id</span></span> |<span data-ttu-id="4b4a3-187">Obsahuje neměnné jedinečný identifikátor klienta hello directory, která vydala hello token.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-187">Contains an immutable, unique identifier of hello directory tenant that issued hello token.</span></span> |
| <span data-ttu-id="4b4a3-188">Životnost tokenu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-188">Token Lifetime</span></span> |<span data-ttu-id="4b4a3-189">Definuje hello časový interval, ve kterém je token platný.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-189">Defines hello time interval within which a token is valid.</span></span> |
| <span data-ttu-id="4b4a3-190">Hlavní název uživatele</span><span class="sxs-lookup"><span data-stu-id="4b4a3-190">User Principal Name</span></span> |<span data-ttu-id="4b4a3-191">Obsahuje hlavní název uživatele hello subjektu hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-191">Contains hello user principal name of hello subject.</span></span> |
| <span data-ttu-id="4b4a3-192">Verze</span><span class="sxs-lookup"><span data-stu-id="4b4a3-192">Version</span></span> |<span data-ttu-id="4b4a3-193">Obsahuje číslo verze hello hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-193">Contains hello version number of hello token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="4b4a3-194">Základní informace o registraci aplikace ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="4b4a3-195">Jakékoli aplikace, která outsources tooAzure ověřování, které AD musí být zaregistrovaný v adresáři.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-195">Any application that outsources authentication tooAzure AD must be registered in a directory.</span></span> <span data-ttu-id="4b4a3-196">Tento krok zahrnuje Azure AD informacemi o vaší aplikaci, včetně hello adresu URL, kde je umístěný, adresa URL toosend hello reaguje po ověření hello URI tooidentify aplikace a další.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-196">This step involves telling Azure AD about your application, including hello URL where it’s located, hello URL toosend replies after authentication, hello URI tooidentify your application, and more.</span></span> <span data-ttu-id="4b4a3-197">Tyto informace jsou nezbytné pro klíče z několika důvodů:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="4b4a3-198">Azure AD musí souřadnice toocommunicate s aplikací hello při zpracování přihlášení nebo výměnou tokeny.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-198">Azure AD needs coordinates toocommunicate with hello application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="4b4a3-199">Mezi ně patří hello následující:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-199">These include hello following:</span></span>
  
  * <span data-ttu-id="4b4a3-200">Identifikátor ID URI aplikace: hello identifikátor pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-200">Application ID URI: hello identifier for an application.</span></span> <span data-ttu-id="4b4a3-201">Tato hodnota se odesílají tooAzure AD během tooindicate ověřování, které aplikace hello volající chce token pro.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-201">This value is sent tooAzure AD during authentication tooindicate which application hello caller wants a token for.</span></span> <span data-ttu-id="4b4a3-202">Kromě toho tato hodnota je obsažena v tokenu hello tak, aby aplikace hello ví, že bylo, že hello určené cílové.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-202">Additionally, this value is included in hello token so that hello application knows it was hello intended target.</span></span>
  * <span data-ttu-id="4b4a3-203">Adresu URL a identifikátor URI pro přesměrování odpovědi: V případě hello webového rozhraní API nebo webová aplikace hello adresa URL odpovědi je toowhich umístění hello Azure AD bude posílat odpovědi ověřování hello, včetně token, pokud ověření bylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-203">Reply URL and Redirect URI: In hello case of a web API or web application, hello Reply URL is hello location toowhich Azure AD will send hello authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="4b4a3-204">V případě hello nativní aplikace hello identifikátor URI pro přesměrování je že jedinečný identifikátor toowhich Azure AD přesměruje uživatelského agenta hello v jednom požadavku OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-204">In hello case of a native application, hello Redirect URI is a unique identifier toowhich Azure AD will redirect hello user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="4b4a3-205">ID aplikace: hello ID pro aplikaci, která se generují pomocí Azure AD při registraci aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-205">Application ID: hello ID for an application, which is generated by Azure AD when hello application is registered.</span></span> <span data-ttu-id="4b4a3-206">Při žádosti autorizační kód nebo token, jsou odesílány hello ID aplikace a klíč tooAzure AD během ověřování.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-206">When requesting an authorization code or token, hello Application ID and key are sent tooAzure AD during authentication.</span></span>
  * <span data-ttu-id="4b4a3-207">: Hello klíče odeslaný společně ID aplikace při ověřování tooAzure AD toocall webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-207">Key: hello key that is sent along with a Application ID when authenticating tooAzure AD toocall a web API.</span></span>
* <span data-ttu-id="4b4a3-208">Azure AD potřeb, které má aplikace hello tooensure hello požadovaná oprávnění tooaccess data vašeho adresáře, jinými aplikacemi ve vaší organizaci a tak dále</span><span class="sxs-lookup"><span data-stu-id="4b4a3-208">Azure AD needs tooensure hello application has hello required permissions tooaccess your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="4b4a3-209">Zřizování se změní jasnější, pokud víte, že existují dvě kategorie aplikací, které je možné vyvinuté a integrovat se službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="4b4a3-210">Jednotné klienta aplikací: aplikace jednoho klienta je určena pro použití v jedné organizaci.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="4b4a3-211">Toto jsou obvykle-obchodní (LoB) aplikace napsané pomocí vývojář enterprise.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="4b4a3-212">Jednoho klienta aplikace potřebuje pouze toobe přístup uživatelé v jednom adresáři, a v důsledku toho je nutné pouze toobe zřídit v jednom adresáři.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-212">A single tenant application only needs toobe accessed by users in one directory, and as a result, it only needs toobe provisioned in one directory.</span></span> <span data-ttu-id="4b4a3-213">Tyto aplikace jsou běžně registrovány vývojáři v organizaci hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-213">These applications are typically registered by a developer in hello organization.</span></span>
* <span data-ttu-id="4b4a3-214">Víceklientské aplikace: víceklientské aplikace určena pro použití v mnoha organizacích není právě jedné organizace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="4b4a3-215">Toto jsou obvykle softwaru jako služba (SaaS) aplikace napsané pomocí nezávislý dodavatel softwaru (ISV).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="4b4a3-216">Víceklientské aplikace potřebují toobe zřízené v každý adresář, kde se bude používat, který vyžaduje souhlas tooregister uživatel nebo správce je.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-216">Multi-tenant applications need toobe provisioned in each directory where they will be used, which requires user or administrator consent tooregister them.</span></span> <span data-ttu-id="4b4a3-217">Tento proces souhlasu spustí, když aplikace je zaregistrován v adresáři hello a je zadána přístup toohello Graph API nebo možná jiného webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-217">This consent process starts when an application has been registered in hello directory and is given access toohello Graph API or perhaps another web API.</span></span> <span data-ttu-id="4b4a3-218">Pokud uživatel nebo správce z jiné organizace zaregistruje toouse hello aplikace, zobrazí se dialogové okno se zobrazí hello oprávnění, které hello aplikace vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-218">When a user or administrator from a different organization signs up toouse hello application, they are presented with a dialog that displays hello permissions hello application requires.</span></span> <span data-ttu-id="4b4a3-219">Hello uživatel nebo správce může potom aplikaci toohello souhlasu, což dává toohello přístupu aplikace hello uvádí data a nakonec registry hello aplikace v jejich adresáře.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-219">hello user or administrator can then consent toohello application, which gives hello application access toohello stated data, and finally registers hello application in their directory.</span></span> <span data-ttu-id="4b4a3-220">Další informace najdete v tématu [přehled hello souhlas Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-220">For more information, see [Overview of hello Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="4b4a3-221">Některé další aspekty nastat při vývoji aplikace víceklientské místo jednoho klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="4b4a3-222">Například pokud bude v několika adresářích jsou k dispozici toousers vaší aplikace, musíte mechanismus toodetermine klienta, které jsou ve.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-222">For example, if you are making your application available toousers in multiple directories, you need a mechanism toodetermine which tenant they’re in.</span></span> <span data-ttu-id="4b4a3-223">Jednoho klienta potřebuje pouze toolook v její vlastní adresář pro uživatele, zatímco víceklientské aplikace potřebuje tooidentify konkrétního uživatele ze všech hello adresářů ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-223">A single tenant application only needs toolook in its own directory for a user, while a multi-tenant application needs tooidentify a specific user from all hello directories in Azure AD.</span></span> <span data-ttu-id="4b4a3-224">tooaccomplish tuto úlohu Azure AD poskytuje společný koncový bod ověřování kde jakékoli víceklientské aplikace můžete nastavit žádostí o přihlášení, místo konkrétního klienta endpoint.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-224">tooaccomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="4b4a3-225">Tento koncový bod je https://login.microsoftonline.com/common pro všechny adresáře ve službě Azure AD, že koncový bod konkrétního klienta může být https://login.microsoftonline.com/contoso.onmicrosoft.com. běžné koncový bod Hello je obzvláště důležité tooconsider při vývoji aplikace, protože budete potřebovat hello potřebné logiky toohandle více klientů při přihlášení, odhlášení a ověření tokenu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. hello common endpoint is especially important tooconsider when developing your application because you’ll need hello necessary logic toohandle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="4b4a3-226">Pokud jsou aktuálně vývoj aplikace s jednoho klienta, ale chcete toomake je k dispozici toomany organizace, můžete snadno provádět změny toohello aplikace a jeho konfigurace v Azure AD toomake ho víceklientské podporující.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-226">If you are currently developing a single tenant application but want toomake it available toomany organizations, you can easily make changes toohello application and its configuration in Azure AD toomake it multi-tenant capable.</span></span> <span data-ttu-id="4b4a3-227">Kromě toho Azure AD používá hello stejné podpisového klíče pro všechny tokeny ve všech adresářích, jestli se tím ověřování na jednoho klienta nebo v aplikaci více klientů.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-227">In addition, Azure AD uses hello same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="4b4a3-228">Každý scénář uvedené v tomto dokumentu obsahuje dílčí oddíl, který popisuje požadavky na jeho zřizování.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="4b4a3-229">Podrobnější informace o zřizování aplikace ve službě Azure AD a hello rozdíly mezi jednou či více klientů aplikace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-229">For more in-depth information about provisioning an application in Azure AD and hello differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="4b4a3-230">Pokračujte ve čtení toounderstand hello běžné scénáře aplikací ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-230">Continue reading toounderstand hello common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="4b4a3-231">Typy aplikací a scénáře</span><span class="sxs-lookup"><span data-stu-id="4b4a3-231">Application Types and Scenarios</span></span>
<span data-ttu-id="4b4a3-232">Každý z hello scénáře popsaného v tomto dokumentu lze vytvořit pomocí různé jazyky a platformy.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-232">Each of hello scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="4b4a3-233">Všechny jsou zajišťované pomocí ukázky dokončení kódu, které jsou k dispozici v našem [Průvodce ukázky kódu](active-directory-code-samples.md), nebo přímo z odpovídající hello [ukázka úložišť GitHub](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from hello corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="4b4a3-234">Kromě toho pokud aplikace potřebuje konkrétní nebo segmentu začátku do konce scénáře, ve většině případů této funkce lze přidat nezávisle.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="4b4a3-235">Například pokud máte nativní aplikaci, která volá webové rozhraní API, můžete snadno přidat webovou aplikaci, která volá také hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls hello web API.</span></span> <span data-ttu-id="4b4a3-236">Hello následující diagram znázorňuje tyto scénáře a typy aplikací, a jak jiné součásti, lze přidat:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-236">hello following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![Typy aplikací a scénáře](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="4b4a3-238">Toto jsou hello pět primární aplikace scénáře podporované službou Azure AD:</span><span class="sxs-lookup"><span data-stu-id="4b4a3-238">These are hello five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="4b4a3-239">[Webové prohlížeče tooWeb aplikace](#web-browser-to-web-application): uživatel potřebuje toosign ve tooa webové aplikaci, která je zabezpečená službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-239">[Web Browser tooWeb Application](#web-browser-to-web-application): A user needs toosign in tooa web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="4b4a3-240">[Jedna stránka aplikace (SPA)](#single-page-application-spa): uživatel potřebuje toosign tooa jednostránkové aplikace, která je zabezpečená službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs toosign in tooa single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="4b4a3-241">[Nativní aplikace tooWeb rozhraní API](#native-application-to-web-api): nativní aplikaci spuštěnou v telefonu, tabletu nebo tooauthenticate musí počítač uživatele tooget prostředky z webového rozhraní API, která je zabezpečená službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-241">[Native Application tooWeb API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs tooauthenticate a user tooget resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="4b4a3-242">[Webové rozhraní API tooWeb aplikace](#web-application-to-web-api): webová aplikace musí tooget prostředky z webového rozhraní API, které jsou zabezpečené službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-242">[Web Application tooWeb API](#web-application-to-web-api): A web application needs tooget resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="4b4a3-243">[Démon procesu nebo serverové aplikace tooWeb rozhraní API](#daemon-or-server-application-to-web-api): démon aplikaci nebo serveru bez webového uživatelského rozhraní musí tooget prostředky z webového rozhraní API, které jsou zabezpečené službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-243">[Daemon or Server Application tooWeb API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs tooget resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-tooweb-application"></a><span data-ttu-id="4b4a3-244">Webové prohlížeče tooWeb aplikace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-244">Web Browser tooWeb Application</span></span>
<span data-ttu-id="4b4a3-245">Tato část popisuje aplikaci, která ověřuje uživatele ve webové aplikaci tooa webového prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-245">This section describes an application that authenticates a user in a web browser tooa web application.</span></span> <span data-ttu-id="4b4a3-246">V tomto scénáři hello webové aplikace přesměruje toosign prohlížeče hello uživatele je v tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-246">In this scenario, hello web application directs hello user’s browser toosign them in tooAzure AD.</span></span> <span data-ttu-id="4b4a3-247">Azure AD vrátí odpověď přihlášení prostřednictvím prohlížeče hello uživatele, který obsahuje deklarace identity o uživateli hello v tokenu zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-247">Azure AD returns a sign-in response through hello user’s browser, which contains claims about hello user in a security token.</span></span> <span data-ttu-id="4b4a3-248">Tento scénář podporuje přihlašování pomocí hello protokoly WS-Federation, SAML 2.0 a OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-248">This scenario supports sign-on using hello WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="4b4a3-249">Diagram</span><span class="sxs-lookup"><span data-stu-id="4b4a3-249">Diagram</span></span>
![Tok ověření pro aplikace tooweb prohlížeče](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="4b4a3-251">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="4b4a3-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="4b4a3-252">Když uživatel navštíví hello aplikace a potřebuje toosign v, je přesměrován prostřednictvím koncový bod požádat o přihlášení toohello ověřování ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-252">When a user visits hello application and needs toosign in, they are redirected via a sign-in request toohello authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="4b4a3-253">Hello uživatel přihlásí na přihlašovací stránku hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-253">hello user signs in on hello sign-in page.</span></span>
3. <span data-ttu-id="4b4a3-254">Pokud je ověření úspěšné, Azure AD vytvoří ověřovací token a vrátí adresa URL odpovědi aplikace toohello přihlášení odpověď, který jste nakonfigurovali v hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response toohello application’s Reply URL that was configured in hello Azure Portal.</span></span> <span data-ttu-id="4b4a3-255">Pro produkční aplikace musí být tato adresa URL odpovědi protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="4b4a3-256">Vrátí token Hello obsahuje deklarace identity o uživateli hello a Azure AD, které jsou vyžadované token hello toovalidate aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-256">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
4. <span data-ttu-id="4b4a3-257">aplikace Hello ověří hello token pomocí veřejného podpisového klíče a vystavitele informace, které jsou k dispozici v hello federační metadata dokumentu pro Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-257">hello application validates hello token by using a public signing key and issuer information available at hello federation metadata document for Azure AD.</span></span> <span data-ttu-id="4b4a3-258">Po aplikace hello ověří hello token, Azure AD spustí novou relaci s hello uživatelem.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-258">After hello application validates hello token, Azure AD starts a new session with hello user.</span></span> <span data-ttu-id="4b4a3-259">Tato relace umožňuje hello uživatele tooaccess hello aplikaci do vypršení jeho platnosti.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-259">This session allows hello user tooaccess hello application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="4b4a3-260">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="4b4a3-260">Code Samples</span></span>
<span data-ttu-id="4b4a3-261">V tématu hello ukázky kódu pro scénáře aplikací tooWeb webového prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-261">See hello code samples for Web Browser tooWeb Application scenarios.</span></span> <span data-ttu-id="4b4a3-262">A, kontrolujte pravidelně – přidáme nové ukázky celou dobu hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-262">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="4b4a3-263">[Webové prohlížeče tooWeb aplikace](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-263">[Web Browser tooWeb Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="4b4a3-264">Registrace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-264">Registering</span></span>
* <span data-ttu-id="4b4a3-265">Jednoho klienta: Pokud vytváříte aplikace právě pro vaši organizaci, se musí být zaregistrován v adresáři vaší společnosti pomocí hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="4b4a3-266">Víceklientské: Pokud vytváříte aplikace, která mohou být využívána uživatelé mimo vaši organizaci, musí být zaregistrovaný v adresáři vaší společnosti, ale také musí být zaregistrovaný v adresáři každé organizace, který bude používat aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="4b4a3-267">toomake v jejich adresář vaší aplikace, můžete zahrnout procesu registrace pro vaše zákazníky, kteří jim umožňuje tooconsent tooyour aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-267">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="4b4a3-268">Při registraci vaší aplikace, zobrazí se dialogové okno, který ukazuje hello oprávnění hello aplikace vyžaduje a pak hello tooconsent možnost.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-268">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="4b4a3-269">V závislosti na hello vyžaduje oprávnění správce v hello druhé organizace může být potřeba toogive souhlasu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-269">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="4b4a3-270">Pokud souhlasí hello uživatel nebo správce, aplikace hello se registruje v jejich adresář.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-270">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="4b4a3-271">Další informace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="4b4a3-272">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-272">Token Expiration</span></span>
<span data-ttu-id="4b4a3-273">Hello uživatelské relace vyprší platnost, když vyprší platnost hello životnost hello tokenem vydaným službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-273">hello user’s session expires when hello lifetime of hello token issued by Azure AD expires.</span></span> <span data-ttu-id="4b4a3-274">Aplikace můžete zmenšit tohoto časového období, v případě potřeby, jako je například odhlášení uživatele založené na období nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="4b4a3-275">Když vyprší platnost hello relace, bude uživatel hello výzvami toosign v znovu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-275">When hello session expires, hello user will be prompted toosign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="4b4a3-276">Jednostránkové aplikace (SPA)</span><span class="sxs-lookup"><span data-stu-id="4b4a3-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="4b4a3-277">Tato část popisuje ověřování pro jednu aplikaci, stránka, která používá Azure AD a hello implicitní autorizace OAuth 2.0 udělit toosecure ukončit jeho webového rozhraní API zpět.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-277">This section describes authentication for a Single Page Application, that uses Azure AD and hello OAuth 2.0 implicit authorization grant toosecure its web API back end.</span></span> <span data-ttu-id="4b4a3-278">Jednostránkové aplikace mají obvykle strukturu prezentační vrstvou JavaScript (front-end), která běží v prohlížeči hello a webového rozhraní API back-end, který běží na serveru a implementuje hello obchodní logiku aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in hello browser and a Web API back end that runs on a server and implements hello application’s business logic.</span></span> <span data-ttu-id="4b4a3-279">toolearn Další informace o udělení hello implicitní autorizace a pomáhá můžete rozhodnout, zda je pro váš scénář aplikace správný, najdete v části [Principy hello OAuth2 implicitní tok v Azure Active Directory poskytování](active-directory-dev-understanding-oauth2-implicit-grant.md).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-279">toolearn more about hello implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding hello OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="4b4a3-280">V tomto scénáři při přihlášení uživatele hello hello používá front end JavaScript [Active Directory Authentication Library pro jazyk JavaScript (ADAL. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) a implicitní autorizace hello udělit tooobtain token ID (požadavku id_token) z Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-280">In this scenario, when hello user signs in, hello JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and hello implicit authorization grant tooobtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="4b4a3-281">Hello token se uloží do mezipaměti a hello klienta ji připojí požadavek toohello jako token nosiče hello při provádění volání tooits webového rozhraní API back-end, který zabezpečené pomocí middlewaru OWIN hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-281">hello token is cached and hello client attaches it toohello request as hello bearer token when making calls tooits Web API back end, which is secured using hello OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="4b4a3-282">Diagram</span><span class="sxs-lookup"><span data-stu-id="4b4a3-282">Diagram</span></span>
![Diagram jedné stránky aplikace](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="4b4a3-284">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="4b4a3-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="4b4a3-285">Hello uživatel přejde toohello webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-285">hello user navigates toohello web application.</span></span>
2. <span data-ttu-id="4b4a3-286">aplikace Hello vrátí hello JavaScript front-endu (prezentační vrstva) toohello prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-286">hello application returns hello JavaScript front end (presentation layer) toohello browser.</span></span>
3. <span data-ttu-id="4b4a3-287">Hello uživatel zahájí přihlášení, například kliknutím přihlašovací odkaz.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-287">hello user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="4b4a3-288">Hello prohlížeč odešle ID token toorequest koncový bod autorizace GET toohello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-288">hello browser sends a GET toohello Azure AD authorization endpoint toorequest an ID token.</span></span> <span data-ttu-id="4b4a3-289">Tato žádost obsahuje hello ID a odpovědi adresa URL aplikace v hello parametry dotazu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-289">This request includes hello application ID and reply URL in hello query parameters.</span></span>
4. <span data-ttu-id="4b4a3-290">Azure AD ověří hello adresa URL odpovědi proti hello zaregistrován adresa URL odpovědi, která byla konfigurována hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-290">Azure AD validates hello Reply URL against hello registered Reply URL that was configured in hello Azure Portal.</span></span>
5. <span data-ttu-id="4b4a3-291">Hello uživatel přihlásí na přihlašovací stránku hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-291">hello user signs in on hello sign-in page.</span></span>
6. <span data-ttu-id="4b4a3-292">Pokud je ověření úspěšné, Azure AD vytvoří ID token a vrátí ji jako adresa URL odpovědi aplikace toohello na adresu URL fragment (#).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) toohello application’s Reply URL.</span></span> <span data-ttu-id="4b4a3-293">Pro produkční aplikace musí být tato adresa URL odpovědi protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="4b4a3-294">Vrátí token Hello obsahuje deklarace identity o uživateli hello a Azure AD, které jsou vyžadované token hello toovalidate aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-294">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
7. <span data-ttu-id="4b4a3-295">Hello JavaScript klienta kód spuštěný v prohlížeči hello extrahuje hello token z toouse odpovědi hello k zabezpečení volání rozhraní API webové aplikace toohello zpět ukončení.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-295">hello JavaScript client code running in hello browser extracts hello token from hello response toouse in securing calls toohello application’s web API back end.</span></span>
8. <span data-ttu-id="4b4a3-296">volání prohlížeče Hello hello webové aplikace API zpět končit hello přístupový token v hlavičce autorizace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-296">hello browser calls hello application’s web API back end with hello access token in hello authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="4b4a3-297">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="4b4a3-297">Code Samples</span></span>
<span data-ttu-id="4b4a3-298">V tématu hello ukázky kódu pro scénáře jedné stránky aplikace (SPA).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-298">See hello code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="4b4a3-299">Zda toocheck zpět se často – přidáme nové ukázky celou dobu hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-299">Be sure toocheck back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="4b4a3-300">[Jedna stránka aplikace (SPA)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="4b4a3-301">Registrace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-301">Registering</span></span>
* <span data-ttu-id="4b4a3-302">Jednoho klienta: Pokud vytváříte aplikace právě pro vaši organizaci, se musí být zaregistrován v adresáři vaší společnosti pomocí hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="4b4a3-303">Víceklientské: Pokud vytváříte aplikace, která mohou být využívána uživatelé mimo vaši organizaci, musí být zaregistrovaný v adresáři vaší společnosti, ale také musí být zaregistrovaný v adresáři každé organizace, který bude používat aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="4b4a3-304">toomake v jejich adresář vaší aplikace, můžete zahrnout procesu registrace pro vaše zákazníky, kteří jim umožňuje tooconsent tooyour aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-304">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="4b4a3-305">Při registraci vaší aplikace, zobrazí se dialogové okno, který ukazuje hello oprávnění hello aplikace vyžaduje a pak hello tooconsent možnost.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-305">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="4b4a3-306">V závislosti na hello vyžaduje oprávnění správce v hello druhé organizace může být potřeba toogive souhlasu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-306">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="4b4a3-307">Pokud souhlasí hello uživatel nebo správce, aplikace hello se registruje v jejich adresář.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-307">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="4b4a3-308">Další informace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="4b4a3-309">Po registraci hello aplikace, musí být nakonfigurované toouse protokol OAuth 2.0 implicitní Grant.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-309">After registering hello application, it must be configured toouse OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="4b4a3-310">Ve výchozím nastavení je tento protokol zakázaná pro aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="4b4a3-311">hello tooenable protokol OAuth2 implicitní udělte pro aplikaci, upravte jeho manifest aplikace z portálu Azure hello a nastavte tootrue hodnotu "oauth2AllowImplicitFlow" hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-311">tooenable hello OAuth2 Implicit Grant protocol for your application, edit its application manifest from hello Azure Portal and set hello “oauth2AllowImplicitFlow” value tootrue.</span></span> <span data-ttu-id="4b4a3-312">Podrobné pokyny najdete v tématu [povolení OAuth 2.0 implicitní Grant pro jednostránkové aplikace](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="4b4a3-313">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-313">Token Expiration</span></span>
<span data-ttu-id="4b4a3-314">Když použijete ADAL.js toomanage ověřování s Azure AD, můžete využívat výhod několik funkcí, které usnadňují aktualizace tokenu vypršela platnost a také jak získat tokeny pro více webových rozhraní API prostředky, které může být volána aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-314">When you use ADAL.js toomanage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by hello application.</span></span> <span data-ttu-id="4b4a3-315">Když se uživatel hello úspěšně s Azure AD ověřuje, zabezpečené pomocí souboru cookie relace pro uživatele hello mezi hello prohlížeče a Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-315">When hello user successfully authenticates with Azure AD, a session secured by a cookie is established for hello user between hello browser and Azure AD.</span></span> <span data-ttu-id="4b4a3-316">Je důležité toonote, který existuje hello relace mezi hello uživatele a Azure AD a není mezi hello uživatele a hello webová aplikace běží na serveru pro hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-316">It’s important toonote that hello session exists between hello user and Azure AD and not between hello user and hello web application running on hello server.</span></span> <span data-ttu-id="4b4a3-317">Když vyprší platnost tokenu, ADAL.js používá tuto relaci toosilently získat další token.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-317">When a token expires, ADAL.js uses this session toosilently obtain another token.</span></span> <span data-ttu-id="4b4a3-318">Je to provádí pomocí toosend skrytá iFrame a přijmout žádost o hello pomocí protokolu OAuth implicitní Grant hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-318">It does this by using a hidden iFrame toosend and receive hello request using hello OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="4b4a3-319">ADAL.js můžete také použít tento stejný mechanismus toosilently získali přístupové tokeny z Azure AD pro jiné webové rozhraní API prostředky, volání aplikace hello tak dlouho, dokud tyto prostředky podporu (CORS), sdílení prostředků různého původu jsou registrované v adresáři hello uživatele, a všechny požadované souhlasu byl zadán uživatelem hello během přihlášení.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-319">ADAL.js can also use this same mechanism toosilently obtain access tokens from Azure AD for other web API resources that hello application calls as long as these resources support cross-origin resource sharing (CORS), are registered in hello user’s directory, and any required consent was given by hello user during sign-in.</span></span>

### <a name="native-application-tooweb-api"></a><span data-ttu-id="4b4a3-320">Nativní aplikace tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-320">Native Application tooWeb API</span></span>
<span data-ttu-id="4b4a3-321">Tato část popisuje nativní aplikaci, která volá webové rozhraní API jménem uživatele.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="4b4a3-322">Tento scénář je založený na hello OAuth 2.0 autorizační kód typ udělení pomocí veřejného klienta, jak je popsáno v části 4.1 hello [specifikace OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-322">This scenario is built on hello OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of hello [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="4b4a3-323">nativní aplikace Hello získá přístupový token pro uživatele hello pomocí protokolu hello OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-323">hello native application obtains an access token for hello user by using hello OAuth 2.0 protocol.</span></span> <span data-ttu-id="4b4a3-324">Tento přístupový token se pak odešlou v hello požadavek toohello webové rozhraní API, která povolí hello uživatele a vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-324">This access token is then sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="4b4a3-325">Diagram</span><span class="sxs-lookup"><span data-stu-id="4b4a3-325">Diagram</span></span>
![Nativní aplikace tooWeb Diagram rozhraní API](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-tooapi"></a><span data-ttu-id="4b4a3-327">Tok ověření pro tooAPI nativní aplikace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-327">Authentication flow for native application tooAPI</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="4b4a3-328">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="4b4a3-328">Description of Protocol Flow</span></span>
<span data-ttu-id="4b4a3-329">Pokud používáte hello AD knihovny ověřování, jsou zpracovávány většinu podrobnosti protokolu hello popsané níže, například automaticky otevírané okno prohlížeče hello, ukládání tokenu do mezipaměti a zpracování tokeny obnovení.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-329">If you are using hello AD Authentication Libraries, most of hello protocol details described below are handled for you, such as hello browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="4b4a3-330">Pomocí automaticky otevíraná okna prohlížeče, mohou nativní aplikace hello koncový bod žádosti toohello autorizace ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-330">Using a browser pop-up, hello native application makes a request toohello authorization endpoint in Azure AD.</span></span> <span data-ttu-id="4b4a3-331">Tato žádost obsahuje hello ID aplikace a identifikátor URI nativní aplikace hello hello přesměrování, jak je znázorněno v hello portálu Azure a identifikátor ID URI aplikace hello hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-331">This request includes hello Application ID and hello redirect URI of hello native application as shown in hello Azure Portal, and hello application ID URI for hello web API.</span></span> <span data-ttu-id="4b4a3-332">Pokud uživatel hello nebyla již přihlášeni, jsou výzvami toosign v znovu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-332">If hello user hasn’t already signed in, they are prompted toosign in again</span></span>
2. <span data-ttu-id="4b4a3-333">Azure AD ověřuje uživatele hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-333">Azure AD authenticates hello user.</span></span> <span data-ttu-id="4b4a3-334">Pokud je aplikace více klientů a souhlasu je požadovaná toouse hello aplikace, bude uživatel hello požadované tooconsent, pokud se tak již neučinili.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-334">If it is a multi-tenant application and consent is required toouse hello application, hello user will be required tooconsent if they haven’t already done so.</span></span> <span data-ttu-id="4b4a3-335">Po udělení souhlasu a po úspěšném ověření Azure AD vydá identifikátor URI pro přesměrování autorizační kód odpovědi back toohello klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back toohello client application’s redirect URI.</span></span>
3. <span data-ttu-id="4b4a3-336">Pokud Azure AD vydá kód odpovědi ověřování zpět toohello identifikátor URI pro přesměrování, hello klienta aplikace přestane prohlížeče interakce a extrahuje hello autorizační kód z odpovědi hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-336">When Azure AD issues an authorization code response back toohello redirect URI, hello client application stops browser interaction and extracts hello authorization code from hello response.</span></span> <span data-ttu-id="4b4a3-337">Pomocí tohoto kódu autorizace, hello klientská aplikace odešle požadavek tooAzure AD na koncový bod tokenu zahrnující hello autorizační kód, podrobnosti o hello klientská aplikace (ID aplikace a identifikátor URI pro přesměrování) a hello požadovaného prostředku (ID aplikace Identifikátor URI pro hello webového rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-337">Using this authorization code, hello client application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
4. <span data-ttu-id="4b4a3-338">Hello autorizační kód a informace o hello klientská aplikace a webové rozhraní API se ověří pomocí Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-338">hello authorization code and information about hello client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="4b4a3-339">Po úspěšném ověření Azure AD vrátí dva tokeny: přístupový token JWT a obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="4b4a3-340">Kromě toho Azure AD vrátí základní informace o hello uživateli, jako je například jejich zobrazovaný název a klienta ID.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-340">In addition, Azure AD returns basic information about hello user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="4b4a3-341">Přes protokol HTTPS klientská aplikace hello používá hello vrácená JWT přístup k tokenu tooadd hello JWT řetězec, který má označení "Nosiče" v hlavičce autorizace hello hello požadavek toohello webových rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-341">Over HTTPS, hello client application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="4b4a3-342">Hello webového rozhraní API pak ověří hello JWT token, a pokud je ověření úspěšné, vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-342">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>
6. <span data-ttu-id="4b4a3-343">Pokud hello přístupovému tokenu vyprší platnost, obdrží klientské aplikace hello k chybě, která označuje, že uživatel hello potřebuje tooauthenticate znovu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-343">When hello access token expires, hello client application will receive an error that indicates hello user needs tooauthenticate again.</span></span> <span data-ttu-id="4b4a3-344">Pokud aplikace hello má platný obnovovací token, může být použité tooacquire nový přístupový token bez zobrazení výzvy hello toosign uživatele v akci.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-344">If hello application has a valid refresh token, it can be used tooacquire a new access token without prompting hello user toosign in again.</span></span> <span data-ttu-id="4b4a3-345">Pokud vyprší platnost tokenu obnovení hello, bude nutné aplikace hello toointeractively ověření uživatele hello ještě jednou.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-345">If hello refresh token expires, hello application will need toointeractively authenticate hello user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="4b4a3-346">Hello obnovovací token vydán Azure AD může být použité tooaccess několik prostředků.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-346">hello refresh token issued by Azure AD can be used tooaccess multiple resources.</span></span> <span data-ttu-id="4b4a3-347">Například pokud máte klientské aplikace, který má oprávnění toocall dva webové rozhraní API, může být hello obnovovací token použité tooget přístupu k tokenu toohello jiných webového rozhraní API také.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-347">For example, if you have a client application that has permission toocall two web APIs, hello refresh token can be used tooget an access token toohello other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="4b4a3-348">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="4b4a3-348">Code Samples</span></span>
<span data-ttu-id="4b4a3-349">V tématu hello ukázky kódu pro scénáře rozhraní API tooWeb nativní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-349">See hello code samples for Native Application tooWeb API scenarios.</span></span> <span data-ttu-id="4b4a3-350">A, kontrolujte pravidelně – přidáme nové ukázky celou dobu hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-350">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="4b4a3-351">[Nativní aplikace tooWeb rozhraní API](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-351">[Native Application tooWeb API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="4b4a3-352">Registrace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-352">Registering</span></span>
* <span data-ttu-id="4b4a3-353">Jednoho klienta: Obě hello nativní aplikaci a hello webového rozhraní API musí být zaregistrovaný v hello stejný adresář ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-353">Single Tenant: Both hello native application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="4b4a3-354">Hello webového rozhraní API může být nakonfigurované tooexpose sadu oprávnění, které jsou používané toolimit hello nativní přístup tooits prostředky aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-354">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello native application’s access tooits resources.</span></span> <span data-ttu-id="4b4a3-355">klientská aplikace Hello potom vybere hello požadovaných oprávnění z nabídky hello rozevíracího seznamu "TooOther oprávnění aplikace" v hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-355">hello client application then selects hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span>
* <span data-ttu-id="4b4a3-356">Víceklientské: Nejdřív nativní aplikace hello vždy jen zaregistrovat ve hello vývojáře nebo adresář vydavatele.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-356">Multi-Tenant: First, hello native application only ever registered in hello developer or publisher’s directory.</span></span> <span data-ttu-id="4b4a3-357">Nativní aplikace hello druhou, je nakonfigurovaná tooindicate hello oprávnění vyžaduje toobe funkční.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-357">Second, hello native application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="4b4a3-358">Tento seznam požadovaných oprávnění se zobrazí v dialogu, když uživatel nebo správce v cílovém adresáři hello dává souhlasu toohello aplikace, takže je k dispozici tootheir organizace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-358">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="4b4a3-359">Některé aplikace vyžadují právě individuální oprávnění, které může každý uživatel v organizaci hello souhlas.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-359">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="4b4a3-360">Jiné aplikace vyžadují oprávnění na úrovni správce, které nelze souhlas uživatele v organizaci hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-360">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="4b4a3-361">Pouze správce adresáře může poskytnout tooapplications souhlasu, které vyžadují tato úroveň oprávnění.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-361">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="4b4a3-362">Pokud souhlasí hello uživatel nebo správce, pouze hello webového rozhraní API se registruje v jejich adresář.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-362">When hello user or administrator consents, only hello web API is registered in their directory.</span></span> <span data-ttu-id="4b4a3-363">Další informace najdete v tématu [integrace aplikací s Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="4b4a3-364">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-364">Token Expiration</span></span>
<span data-ttu-id="4b4a3-365">Pokud nativní aplikace hello používá jeho autorizační kód tooget přístupový token JWT, dále přijímá obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-365">When hello native application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="4b4a3-366">V případě, že hello přístupovému tokenu vyprší platnost, hello obnovovací token můžou být použité toore-ověření uživatele hello bez nutnosti jejich znovu toosign v.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-366">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="4b4a3-367">Tento token obnovení je pak použít tooauthenticate hello uživatele, výsledkem je pro přístup k nový token a aktualizujte tokenu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-367">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-tooweb-api"></a><span data-ttu-id="4b4a3-368">Webové aplikace tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-368">Web Application tooWeb API</span></span>
<span data-ttu-id="4b4a3-369">Tato část popisuje webové aplikace, které potřebuje tooget prostředky z webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-369">This section describes a web application that needs tooget resources from a web API.</span></span> <span data-ttu-id="4b4a3-370">V tomto scénáři jsou dva typy identity, které hello webové aplikace můžete použít tooauthenticate a volání webového rozhraní API hello: Identita aplikace, nebo delegovaný uživatel identity.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-370">In this scenario, there are two identity types that hello web application can use tooauthenticate and call hello web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="4b4a3-371">*Identita aplikace:* tento scénář používá pověření klienta OAuth 2.0 udělit tooauthenticate jako aplikace hello a přístup hello webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant tooauthenticate as hello application and access hello web API.</span></span> <span data-ttu-id="4b4a3-372">Při použití identity aplikací, hello webové rozhraní API pouze může zjistit, že hello webové aplikace je volání, jako hello webového rozhraní API nepřijímá žádné informace o uživateli hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-372">When using an application identity, hello web API can only detect that hello web application is calling it, as hello web API does not receive any information about hello user.</span></span> <span data-ttu-id="4b4a3-373">Pokud aplikace hello obdrží informace o uživateli hello, bude odeslána prostřednictvím protokolu aplikace hello a není podepsán serverem Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-373">If hello application receives information about hello user, it will be sent via hello application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="4b4a3-374">Hello webového rozhraní API důvěřuje, že webová aplikace hello ověřil hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-374">hello web API trusts that hello web application authenticated hello user.</span></span> <span data-ttu-id="4b4a3-375">Z tohoto důvodu se tento vzor nazývá důvěryhodný subsystém.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="4b4a3-376">*Delegované identity uživatele:* tento scénář lze provést dvěma způsoby: OpenID Connect a udělení autorizačního kódu OAuth 2.0 pomocí důvěrné klienta.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="4b4a3-377">Hello webová aplikace získá přístupový token pro hello uživatele, který prokáže toohello webové rozhraní API této hello uživatel úspěšně ověřený toohello webové aplikace a webové aplikace hello bylo možné tooobtain delegovaný uživatel identity toocall hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-377">hello web application obtains an access token for hello user, which proves toohello web API that hello user successfully authenticated toohello web application and that hello web application was able tooobtain a delegated user identity toocall hello web API.</span></span> <span data-ttu-id="4b4a3-378">Tento přístupový token se odešlou v hello požadavek toohello webové rozhraní API, která povolí hello uživatele a vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-378">This access token is sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="4b4a3-379">Diagram</span><span class="sxs-lookup"><span data-stu-id="4b4a3-379">Diagram</span></span>
![Webové aplikace tooWeb rozhraní API diagram](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="4b4a3-381">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="4b4a3-381">Description of Protocol Flow</span></span>
<span data-ttu-id="4b4a3-382">Obě hello identita aplikací a typů identit delegovaný uživatel jsou popsané v toku hello níže.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-382">Both hello application identity and delegated user identity types are discussed in hello flow below.</span></span> <span data-ttu-id="4b4a3-383">Hello klíčovým rozdílem mezi nimi je, že identita uživatele hello delegovaný musíte nejprve získat autorizační kód před hello uživatel může přihlásit a získat přístup toohello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-383">hello key difference between them is that hello delegated user identity must first acquire an authorization code before hello user can sign-in and gain access toohello web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="4b4a3-384">Udělení přihlašovací údaje Identity aplikace pomocí klienta OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="4b4a3-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="4b4a3-385">Uživatel je přihlášený tooAzure AD ve webové aplikaci hello (viz hello [webový prohlížeč tooWeb aplikace](#web-browser-to-web-application) výše).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-385">A user is signed in tooAzure AD in hello web application (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="4b4a3-386">Hello webová aplikace musí tooacquire token přístupu, aby mohli ověřit toohello webového rozhraní API a načíst hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-386">hello web application needs tooacquire an access token so that it can authenticate toohello web API and retrieve hello desired resource.</span></span> <span data-ttu-id="4b4a3-387">Umožňuje tooAzure požadavek na AD koncovému bodu tokenu, poskytnutí přihlašovacích údajů hello, ID aplikace a aplikace webového rozhraní API je identifikátor ID URI.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-387">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="4b4a3-388">Azure AD ověřuje hello aplikace a vrátí JWT přístupový token, který je použité toocall hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-388">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
4. <span data-ttu-id="4b4a3-389">Přes protokol HTTPS hello webová aplikace používá hello vrácená JWT přístup k tokenu tooadd hello JWT řetězec, který má označení "Nosiče" v hlavičce autorizace hello hello požadavek toohello webových rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-389">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="4b4a3-390">Hello webového rozhraní API pak ověří hello JWT token, a pokud je ověření úspěšné, vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-390">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="4b4a3-391">Identita uživatele delegovaný s OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="4b4a3-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="4b4a3-392">Uživatel je přihlášený tooa webové aplikace pomocí služby Azure AD (viz hello [webový prohlížeč tooWeb aplikace](#web-browser-to-web-application) část výše).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-392">A user is signed in tooa web application using Azure AD (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="4b4a3-393">Pokud uživatel hello hello webové aplikace nebyla dosud dá souhlas tooallowing hello webové aplikace toocall hello webového rozhraní API jeho jménem, je třeba uživatel hello tooconsent.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-393">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="4b4a3-394">Hello aplikace se zobrazí hello oprávnění, která vyžaduje, a pokud některá z těchto oprávnění na úrovni správce, normální uživatele v adresáři hello nebude možné tooconsent.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-394">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="4b4a3-395">Tento proces souhlasu platí jenom toomulti klienta aplikace, není jednoho klienta aplikace, jako aplikace hello budou již hello potřebná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-395">This consent process only applies toomulti-tenant applications, not single tenant applications, as hello application will already have hello necessary permissions.</span></span> <span data-ttu-id="4b4a3-396">Když hello uživatele přihlášení, hello webové aplikace přijala token ID s informacemi o hello uživatele, jakož i autorizační kód.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-396">When hello user signed in, hello web application received an ID token with information about hello user, as well as an authorization code.</span></span>
2. <span data-ttu-id="4b4a3-397">Pomocí hello autorizační kód vydané službou Azure AD, hello webové aplikace odešle požadavek tooAzure AD na koncový bod tokenu zahrnující hello autorizační kód, podrobnosti o hello klientská aplikace (ID aplikace a identifikátor URI pro přesměrování) a hello požadovaných prostředků ( ID identifikátor URI aplikace hello webového rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-397">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
3. <span data-ttu-id="4b4a3-398">Hello autorizační kód a informace o hello webové aplikace a webové rozhraní API se ověří pomocí Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-398">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="4b4a3-399">Po úspěšném ověření Azure AD vrátí dva tokeny: přístupový token JWT a obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="4b4a3-400">Přes protokol HTTPS hello webová aplikace používá hello vrácená JWT přístup k tokenu tooadd hello JWT řetězec, který má označení "Nosiče" v hlavičce autorizace hello hello požadavek toohello webových rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-400">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="4b4a3-401">Hello webového rozhraní API pak ověří hello JWT token, a pokud je ověření úspěšné, vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-401">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="4b4a3-402">Identita uživatele delegovaný s udělení autorizačního kódu OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="4b4a3-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="4b4a3-403">Uživatel již přihlášen tooa webové aplikace, jejichž mechanismus ověřování je nezávislé na Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-403">A user is already signed in tooa web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="4b4a3-404">Hello webové aplikace vyžaduje povolení kód tooacquire přístupový token, takže vydává požadavek prostřednictvím koncového bodu autorizace hello prohlížeče tooAzure na AD, poskytuje hello ID aplikace a identifikátor URI přesměrování pro webovou aplikaci hello po úspěšné ověřování.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-404">hello web application requires an authorization code tooacquire an access token, so it issues a request through hello browser tooAzure AD’s authorization endpoint, providing hello Application ID and redirect URI for hello web application after successful authentication.</span></span> <span data-ttu-id="4b4a3-405">přihlášení uživatele Hello tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-405">hello user signs in tooAzure AD.</span></span>
3. <span data-ttu-id="4b4a3-406">Pokud uživatel hello hello webové aplikace nebyla dosud dá souhlas tooallowing hello webové aplikace toocall hello webového rozhraní API jeho jménem, je třeba uživatel hello tooconsent.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-406">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="4b4a3-407">Hello aplikace se zobrazí hello oprávnění, která vyžaduje, a pokud některá z těchto oprávnění na úrovni správce, normální uživatele v adresáři hello nebude možné tooconsent.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-407">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="4b4a3-408">Svůj souhlas se vztahuje tooboth jeden a více klientů aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-408">This consent applies tooboth single and multi-tenant application.</span></span>  <span data-ttu-id="4b4a3-409">V případě hello jednoho klienta může správce provést tooconsent souhlas správce jménem uživatelů.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-409">In hello single tenant case, an admin can perform admin consent tooconsent on behalf of their users.</span></span>  <span data-ttu-id="4b4a3-410">To lze provést pomocí hello `Grant Permissions` tlačítka na hello [portálu Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-410">This can be done using hello `Grant Permissions` button in hello [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="4b4a3-411">Po hello uživatel souhlasí, obdrží hello webové aplikace hello autorizační kód, je nutné tooacquire přístupový token.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-411">After hello user has consented, hello web application receives hello authorization code that it needs tooacquire an access token.</span></span>
5. <span data-ttu-id="4b4a3-412">Pomocí hello autorizační kód vydané službou Azure AD, hello webové aplikace odešle požadavek tooAzure AD na koncový bod tokenu zahrnující hello autorizační kód, podrobnosti o hello klientská aplikace (ID aplikace a identifikátor URI pro přesměrování) a hello požadovaných prostředků ( ID identifikátor URI aplikace hello webového rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-412">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
6. <span data-ttu-id="4b4a3-413">Hello autorizační kód a informace o hello webové aplikace a webové rozhraní API se ověří pomocí Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-413">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="4b4a3-414">Po úspěšném ověření Azure AD vrátí dva tokeny: přístupový token JWT a obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="4b4a3-415">Přes protokol HTTPS hello webová aplikace používá hello vrácená JWT přístup k tokenu tooadd hello JWT řetězec, který má označení "Nosiče" v hlavičce autorizace hello hello požadavek toohello webových rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-415">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="4b4a3-416">Hello webového rozhraní API pak ověří hello JWT token, a pokud je ověření úspěšné, vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-416">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="4b4a3-417">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="4b4a3-417">Code Samples</span></span>
<span data-ttu-id="4b4a3-418">V tématu hello ukázky kódu pro webovou aplikaci tooWeb rozhraní API scénáře.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-418">See hello code samples for Web Application tooWeb API scenarios.</span></span> <span data-ttu-id="4b4a3-419">A, kontrolujte pravidelně – přidáme nové ukázky celou dobu hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-419">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="4b4a3-420">Webové [tooWeb aplikace API](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="4b4a3-420">Web [Application tooWeb API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="4b4a3-421">Registrace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-421">Registering</span></span>
* <span data-ttu-id="4b4a3-422">Jednoho klienta: Identita aplikace hello a delegovaný uživatel identity případech hello webové aplikace a hello webového rozhraní API musí být zaregistrovaný v hello stejný adresář ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-422">Single Tenant: For both hello application identity and delegated user identity cases, hello web application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="4b4a3-423">Hello webového rozhraní API může být nakonfigurované tooexpose sadu oprávnění, které jsou používané toolimit hello webové aplikace přístup k tooits prostředkům.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-423">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello web application’s access tooits resources.</span></span> <span data-ttu-id="4b4a3-424">Pokud se používá typ identity delegované uživatele, hello webová aplikace musí tooselect hello požadovaných oprávnění z nabídky hello rozevíracího seznamu "TooOther oprávnění aplikace" v hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-424">If a delegated user identity type is being used, hello web application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="4b4a3-425">Tento krok se nevyžaduje, pokud se používá typ identity aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-425">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="4b4a3-426">Víceklientské: Nejdřív hello webové aplikace je nakonfigurovaná tooindicate hello oprávnění vyžaduje toobe funkční.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-426">Multi-Tenant: First, hello web application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="4b4a3-427">Tento seznam požadovaných oprávnění se zobrazí v dialogu, když uživatel nebo správce v cílovém adresáři hello dává souhlasu toohello aplikace, takže je k dispozici tootheir organizace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-427">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="4b4a3-428">Některé aplikace vyžadují právě individuální oprávnění, které může každý uživatel v organizaci hello souhlas.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-428">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="4b4a3-429">Jiné aplikace vyžadují oprávnění na úrovni správce, které nelze souhlas uživatele v organizaci hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-429">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="4b4a3-430">Pouze správce adresáře může poskytnout tooapplications souhlasu, které vyžadují tato úroveň oprávnění.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-430">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="4b4a3-431">Když hello uživatel nebo správce souhlas všech uživatelů, hello webová aplikace a hello webové rozhraní API je zaregistrovaný v jejich adresáře.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-431">When hello user or administrator consents, hello web application and hello web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="4b4a3-432">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-432">Token Expiration</span></span>
<span data-ttu-id="4b4a3-433">Pokud webová aplikace hello používá jeho autorizační kód tooget přístupový token JWT, dále přijímá obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-433">When hello web application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="4b4a3-434">V případě, že hello přístupovému tokenu vyprší platnost, hello obnovovací token můžou být použité toore-ověření uživatele hello bez nutnosti jejich znovu toosign v.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-434">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="4b4a3-435">Tento token obnovení je pak použít tooauthenticate hello uživatele, výsledkem je pro přístup k nový token a aktualizujte tokenu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-435">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-tooweb-api"></a><span data-ttu-id="4b4a3-436">Démon procesu nebo serverové aplikace tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-436">Daemon or Server Application tooWeb API</span></span>
<span data-ttu-id="4b4a3-437">Tato část popisuje proces démon nebo server aplikace, která potřebuje tooget prostředky z webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-437">This section describes a daemon or server application that needs tooget resources from a web API.</span></span> <span data-ttu-id="4b4a3-438">Existují dva dílčí scénáře, které se vztahují části toothis: démon vyžadující toocall web API, založený na typ udělení pověření klienta OAuth 2.0; a serverová aplikace (například webové rozhraní API), který potřebuje toocall webového rozhraní API, založený na specifikaci koncept OAuth 2.0 On-Behalf-Of.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-438">There are two sub-scenarios that apply toothis section: A daemon that needs toocall a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs toocall a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="4b4a3-439">Pro scénář hello při démon aplikace potřebuje toocall webového rozhraní API, je důležité toounderstand pár věcí.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-439">For hello scenario when a daemon application needs toocall a web API, it’s important toounderstand a few things.</span></span> <span data-ttu-id="4b4a3-440">Nejprve interakci s uživatelem není možné s démon aplikací, které vyžaduje toohave aplikace hello vlastní identity.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-440">First, user interaction is not possible with a daemon application, which requires hello application toohave its own identity.</span></span> <span data-ttu-id="4b4a3-441">Příkladem démon aplikace je dávkovou úlohu nebo služba operačního systému spuštěné v pozadí hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-441">An example of a daemon application is a batch job, or an operating system service running in hello background.</span></span> <span data-ttu-id="4b4a3-442">Tento typ aplikace požadavků přístupový token pomocí svou identitu aplikace a prezentování jeho ID aplikace, přihlašovací údaje (heslo nebo certifikát) a tooAzure identifikátor ID URI aplikace AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI tooAzure AD.</span></span> <span data-ttu-id="4b4a3-443">Po úspěšném ověření hello démon obdrží token přístupu z Azure AD, která je pak použít toocall hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-443">After successful authentication, hello daemon receives an access token from Azure AD, which is then used toocall hello web API.</span></span>

<span data-ttu-id="4b4a3-444">Pro scénář hello když serverová aplikace potřebuje toocall webového rozhraní API, je užitečné toouse příklad.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-444">For hello scenario when a server application needs toocall a web API, it’s helpful toouse an example.</span></span> <span data-ttu-id="4b4a3-445">Představte si, že byl uživatel ověřen na nativní aplikaci a tato nativní aplikace musí toocall webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-445">Imagine that a user has authenticated on a native application, and this native application needs toocall a web API.</span></span> <span data-ttu-id="4b4a3-446">Azure AD vydá token JWT přístup k tokenu toocall hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-446">Azure AD issues a JWT access token toocall hello web API.</span></span> <span data-ttu-id="4b4a3-447">Pokud hello webového rozhraní API potřebuje toocall jiné podřízené webové rozhraní API, může použít hello tok on-behalf-of toodelegate hello identitu uživatele a ověření toohello sekundární webové rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-447">If hello web API needs toocall another downstream web API, it can use hello on-behalf-of flow toodelegate hello user’s identity and authenticate toohello second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="4b4a3-448">Diagram</span><span class="sxs-lookup"><span data-stu-id="4b4a3-448">Diagram</span></span>
![Diagram tooWeb rozhraní API démon nebo serverové aplikace](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="4b4a3-450">Popis protokolu toku</span><span class="sxs-lookup"><span data-stu-id="4b4a3-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="4b4a3-451">Udělení přihlašovací údaje Identity aplikace pomocí klienta OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="4b4a3-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="4b4a3-452">Aplikace serveru hello nejprve musí tooauthenticate s Azure AD jako samostatně, bez jakékoli zásahem ze strany například dialogovým interaktivní přihlašování.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-452">First, hello server application needs tooauthenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="4b4a3-453">Umožňuje tooAzure požadavek na AD koncovému bodu tokenu, poskytnutí přihlašovacích údajů hello ID aplikace a identifikátor ID URI aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-453">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="4b4a3-454">Azure AD ověřuje hello aplikace a vrátí JWT přístupový token, který je použité toocall hello webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-454">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
3. <span data-ttu-id="4b4a3-455">Přes protokol HTTPS hello webová aplikace používá hello vrácená JWT přístup k tokenu tooadd hello JWT řetězec, který má označení "Nosiče" v hlavičce autorizace hello hello požadavek toohello webových rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-455">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="4b4a3-456">Hello webového rozhraní API pak ověří hello JWT token, a pokud je ověření úspěšné, vrátí hello požadovaného prostředku.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-456">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="4b4a3-457">Identita uživatele delegovaný specifikace On-Behalf-Of koncept OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="4b4a3-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="4b4a3-458">tok Hello popsané níže předpokládá, že uživatel byl ověřen na jinou aplikaci (například nativní aplikace), a jejich identitu uživatele byl tooacquire používané přístupu k tokenu toohello první vrstvu webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-458">hello flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used tooacquire an access token toohello first-tier web API.</span></span>

1. <span data-ttu-id="4b4a3-459">nativní aplikace Hello odešle hello přístup tokenu toohello první vrstvu webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-459">hello native application sends hello access token toohello first-tier web API.</span></span>
2. <span data-ttu-id="4b4a3-460">Hello první vrstvu webového rozhraní API odešle žádost tooAzure AD na koncový bod tokenu, poskytuje jeho ID aplikace a přihlašovací údaje, stejně jako hello uživatele přístupový token.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-460">hello first-tier web API sends a request tooAzure AD’s token endpoint, providing its Application ID and credentials, as well as hello user’s access token.</span></span> <span data-ttu-id="4b4a3-461">Kromě toho je hello požadavek odeslán s on_behalf_of parametr, který určuje hello webové rozhraní API požaduje nové tokeny toocall podřízené webové rozhraní API jménem uživatele původní hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-461">In addition, hello request is sent with an on_behalf_of parameter that indicates hello web API is requesting new tokens toocall a downstream web API on behalf of hello original user.</span></span>
3. <span data-ttu-id="4b4a3-462">Azure AD ověřuje, že hello první vrstvu webového rozhraní API má oprávnění tooaccess hello sekundární webového rozhraní API a ověří žádost hello vrácení, že přístupový token JWT a token JWT aktualizace tokenu toohello první vrstvu webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-462">Azure AD verifies that hello first-tier web API has permissions tooaccess hello second-tier web API and validates hello request, returning a JWT access token and a JWT refresh token toohello first-tier web API.</span></span>
4. <span data-ttu-id="4b4a3-463">Přes protokol HTTPS hello první úroveň webová rozhraní API pak zavolá hello sekundární webové rozhraní API připojením hello tokenu řetězec v hello autorizační hlavičky v požadavku hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-463">Over HTTPS, hello first-tier web API then calls hello second-tier web API by appending hello token string in hello Authorization header in hello request.</span></span> <span data-ttu-id="4b4a3-464">Hello první vrstvu webového rozhraní API můžete dál toocall hello sekundární webové rozhraní API, dokud jsou platné hello přístupový token a obnovovacích tokenů.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-464">hello first-tier web API can continue toocall hello second-tier web API as long as hello access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="4b4a3-465">Ukázky kódů</span><span class="sxs-lookup"><span data-stu-id="4b4a3-465">Code Samples</span></span>
<span data-ttu-id="4b4a3-466">V tématu hello ukázky kódu pro scénáře tooWeb rozhraní API démon nebo serverové aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-466">See hello code samples for Daemon or Server Application tooWeb API scenarios.</span></span> <span data-ttu-id="4b4a3-467">A, kontrolujte pravidelně – přidáme nové ukázky celou dobu hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-467">And, check back frequently -- we add new samples all hello time.</span></span> [<span data-ttu-id="4b4a3-468">Server nebo aplikaci démon tooWeb rozhraní API</span><span class="sxs-lookup"><span data-stu-id="4b4a3-468">Server or Daemon Application tooWeb API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="4b4a3-469">Registrace</span><span class="sxs-lookup"><span data-stu-id="4b4a3-469">Registering</span></span>
* <span data-ttu-id="4b4a3-470">Jednoho klienta: Identita aplikace hello a delegovaný uživatel identity případech aplikace hello démon nebo server musí být zaregistrovaná v hello stejný adresář ve službě Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-470">Single Tenant: For both hello application identity and delegated user identity cases, hello daemon or server application must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="4b4a3-471">Hello webového rozhraní API může být nakonfigurované tooexpose sadu oprávnění, které jsou používané toolimit hello démon nebo prostředky tooits přístup k serveru.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-471">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello daemon or server’s access tooits resources.</span></span> <span data-ttu-id="4b4a3-472">Pokud se používá typ identity delegované uživatele, aplikace server hello musí tooselect hello požadovaných oprávnění z nabídky hello rozevíracího seznamu "TooOther oprávnění aplikace" v hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-472">If a delegated user identity type is being used, hello server application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="4b4a3-473">Tento krok se nevyžaduje, pokud se používá typ identity aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-473">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="4b4a3-474">Víceklientské: Nejdřív hello démon nebo server aplikace je nakonfigurovaná tooindicate hello oprávnění vyžaduje toobe funkční.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-474">Multi-Tenant: First, hello daemon or server application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="4b4a3-475">Tento seznam požadovaných oprávnění se zobrazí v dialogu, když uživatel nebo správce v cílovém adresáři hello dává souhlasu toohello aplikace, takže je k dispozici tootheir organizace.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-475">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="4b4a3-476">Některé aplikace vyžadují právě individuální oprávnění, které může každý uživatel v organizaci hello souhlas.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-476">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="4b4a3-477">Jiné aplikace vyžadují oprávnění na úrovni správce, které nelze souhlas uživatele v organizaci hello.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-477">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="4b4a3-478">Pouze správce adresáře může poskytnout tooapplications souhlasu, které vyžadují tato úroveň oprávnění.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-478">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="4b4a3-479">Když hello uživatel nebo správce souhlasí, obě hello webových rozhraní API jsou v jejich directory zaregistrované.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-479">When hello user or administrator consents, both of hello web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="4b4a3-480">Vypršení platnosti tokenu</span><span class="sxs-lookup"><span data-stu-id="4b4a3-480">Token Expiration</span></span>
<span data-ttu-id="4b4a3-481">Při první aplikace hello používá jeho autorizační kód tooget přístupový token JWT, dále přijímá obnovovací token JWT.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-481">When hello first application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="4b4a3-482">V případě, že hello přístupovému tokenu vyprší platnost, hello obnovovací token můžou být použité toore-ověření uživatele hello bez zobrazení výzvy k zadání pověření.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-482">When hello access token expires, hello refresh token can be used toore-authenticate hello user without prompting for credentials.</span></span> <span data-ttu-id="4b4a3-483">Tento token obnovení je pak použít tooauthenticate hello uživatele, výsledkem je pro přístup k nový token a aktualizujte tokenu.</span><span class="sxs-lookup"><span data-stu-id="4b4a3-483">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="4b4a3-484">Viz také</span><span class="sxs-lookup"><span data-stu-id="4b4a3-484">See Also</span></span>
[<span data-ttu-id="4b4a3-485">Příručka pro vývojáře Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="4b4a3-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="4b4a3-486">Ukázky kódu Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="4b4a3-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="4b4a3-487">Důležité informace o podepisování výměna klíče ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="4b4a3-488">OAuth 2.0 ve službě Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b4a3-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

