---
title: "Průvodce aaaProgramming pro Azure Event Hubs | Microsoft Docs"
description: "Zapište kód pro Azure Event Hubs pomocí hello Azure .NET SDK."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 43bebd126c2311af9e3daeb52324132b66cf0884
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="0f6c2-103">Průvodce programováním pro službu Event Hubs</span><span class="sxs-lookup"><span data-stu-id="0f6c2-103">Event Hubs programming guide</span></span>

<span data-ttu-id="0f6c2-104">Tento článek popisuje některé běžné scénáře v psaní kódu pomocí služby Azure Event Hubs a hello Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-104">This article discusses some common scenarios in writing code using Azure Event Hubs and hello Azure .NET SDK.</span></span> <span data-ttu-id="0f6c2-105">Předpokládá se předběžná znalost služby Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="0f6c2-106">Koncepční přehled služby Event Hubs naleznete v části hello [Přehled služby Event Hubs](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="0f6c2-106">For a conceptual overview of Event Hubs, see hello [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="0f6c2-107">Zdroje událostí</span><span class="sxs-lookup"><span data-stu-id="0f6c2-107">Event publishers</span></span>

<span data-ttu-id="0f6c2-108">Odešlete centra událostí tooan události buď pomocí HTTP POST, nebo prostřednictvím připojení protokolu AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-108">You send events tooan event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="0f6c2-109">Hello volbu které toouse a kdy závisí na konkrétním adresovaném scénáři hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-109">hello choice of which toouse and when depends on hello specific scenario being addressed.</span></span> <span data-ttu-id="0f6c2-110">Připojení protokolu AMQP 1.0 se měří jako zprostředkovaná připojení ve službě Service Bus. Díky tomu, že poskytují trvalý kanál pro zasílání zpráv, jsou vhodnější ve scénářích, kde se počítá s častými vysokými objemy zpráv a vyžaduje se nižší latence.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="0f6c2-111">Můžete vytvořit a spravovat služby Event Hubs pomocí hello [NamespaceManager][] třídy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-111">You create and manage Event Hubs using hello [NamespaceManager][] class.</span></span> <span data-ttu-id="0f6c2-112">Když pomocí rozhraní .NET hello spravovaná rozhraní API, hello primární vytvoří pro publikování dat tooEvent rozbočovače jsou hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) a [EventData][] třídy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-112">When using hello .NET managed APIs, hello primary constructs for publishing data tooEvent Hubs are hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="0f6c2-113">[EventHubClient][] poskytuje komunikační kanál AMQP hello za které se události posílají toohello centra událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-113">[EventHubClient][] provides hello AMQP communication channel over which events are sent toohello event hub.</span></span> <span data-ttu-id="0f6c2-114">Hello [EventData][] třída představuje událost a je centra událostí tooan použité toopublish zprávy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-114">hello [EventData][] class represents an event, and is used toopublish messages tooan event hub.</span></span> <span data-ttu-id="0f6c2-115">Tato třída obsahuje hello tělo, některá metadata a záhlaví s informacemi o události hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-115">This class includes hello body, some metadata, and header information about hello event.</span></span> <span data-ttu-id="0f6c2-116">Další vlastnosti se přidají toohello [EventData][] objektu při průchodu centra událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-116">Other properties are added toohello [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="0f6c2-117">Začínáme</span><span class="sxs-lookup"><span data-stu-id="0f6c2-117">Get started</span></span>

<span data-ttu-id="0f6c2-118">Hello rozhraní .NET třídy, které podporují službu Event Hubs jsou uvedeny v hello Microsoft.ServiceBus.dll sestavení.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-118">hello .NET classes that support Event Hubs are provided in hello Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="0f6c2-119">Hello nejjednodušší způsob, jak tooreference hello rozhraní API služby Service Bus a tooconfigure aplikaci se všemi závislostmi služby Service Bus hello služby je toodownload hello [balíček Service Bus NuGet](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="0f6c2-119">hello easiest way tooreference hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies is toodownload hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="0f6c2-120">Alternativně můžete použít hello [Konzola správce balíčků](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-120">Alternatively, you can use hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="0f6c2-121">toodo tedy vydat hello následující příkaz v hello [Konzola správce balíčků](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) okno:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-121">toodo so, issue hello following command in hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="0f6c2-122">Vytvoření centra událostí</span><span class="sxs-lookup"><span data-stu-id="0f6c2-122">Create an event hub</span></span>
<span data-ttu-id="0f6c2-123">Můžete použít hello [NamespaceManager][] třídy toocreate Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-123">You can use hello [NamespaceManager][] class toocreate Event Hubs.</span></span> <span data-ttu-id="0f6c2-124">Například:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="0f6c2-125">Ve většině případů je doporučeno používat hello [CreateEventHubIfNotExists][] metody tooavoid generování výjimek v případě restartování služby hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-125">In most cases, it is recommended that you use hello [CreateEventHubIfNotExists][] methods tooavoid generating exceptions if hello service restarts.</span></span> <span data-ttu-id="0f6c2-126">Například:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="0f6c2-127">Všechny operace vytvoření služby Event Hubs, včetně [CreateEventHubIfNotExists][], vyžadují **spravovat** oprávnění hello oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on hello namespace in question.</span></span> <span data-ttu-id="0f6c2-128">Pokud chcete toolimit hello oprávnění vydavatele nebo přijímajících aplikací, můžete zamezit volání operací vytváření v produkčním kódu použitím přihlašovacích údajů s omezenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-128">If you want toolimit hello permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="0f6c2-129">Hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) třída obsahuje podrobnosti o Centru událostí, včetně hello autorizační pravidla, intervalu uchování zpráv hello, ID oddílu, stav a cestu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-129">hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including hello authorization rules, hello message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="0f6c2-130">Tato třída tooupdate hello metadata můžete použít v Centru událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-130">You can use this class tooupdate hello metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="0f6c2-131">Vytvoření klienta pro centra událostí (Event Hubs)</span><span class="sxs-lookup"><span data-stu-id="0f6c2-131">Create an Event Hubs client</span></span>
<span data-ttu-id="0f6c2-132">Hello primární třídou pro interakci s centry událostí je [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="0f6c2-132">hello primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="0f6c2-133">Tato třída poskytuje možnosti jak pro odesílatele, tak pro příjemce.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="0f6c2-134">Můžete vytvořit instanci této třídy pomocí hello [vytvořit](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) metoda, jak ukazuje následující příklad hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-134">You can instantiate this class using hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in hello following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="0f6c2-135">Tato metoda používá informace o připojení k Service Bus hello v souboru App.config hello ve hello `appSettings` části.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-135">This method uses hello Service Bus connection information in hello App.config file, in hello `appSettings` section.</span></span> <span data-ttu-id="0f6c2-136">Příklad hello `appSettings` XML používá informace o připojení k Service Bus hello toostore, naleznete v dokumentaci k hello hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metoda.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-136">For an example of hello `appSettings` XML used toostore hello Service Bus connection information, see hello documentation for hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="0f6c2-137">Další možností je toocreate hello klienta z připojovacího řetězce.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-137">Another option is toocreate hello client from a connection string.</span></span> <span data-ttu-id="0f6c2-138">Tato možnost dobře funguje při použití rolí pracovního procesu systému Azure, protože řetězec hello můžete uložit ve vlastnosti konfigurace hello hello pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-138">This option works well when using Azure worker roles, because you can store hello string in hello configuration properties for hello worker.</span></span> <span data-ttu-id="0f6c2-139">Například:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="0f6c2-140">Hello připojovací řetězec bude mít stejný formát, jak se objevuje v souboru App.config hello u předchozích metod hello hello:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-140">hello connection string will be in hello same format as it appears in hello App.config file for hello previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="0f6c2-141">Nakonec je také možné toocreate [EventHubClient][] objektu z [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, jak ukazuje následující příklad hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-141">Finally, it is also possible toocreate an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in hello following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="0f6c2-142">Je důležité toonote, že další [EventHubClient][] objekty vytvořené z zasílání zpráv instance objektu factory bude používat hello stejné základní připojení protokolu TCP.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-142">It is important toonote that additional [EventHubClient][] objects created from a messaging factory instance will reuse hello same underlying TCP connection.</span></span> <span data-ttu-id="0f6c2-143">Tyto objekty tudíž mají omezení propustnosti na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="0f6c2-144">Hello [vytvořit](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metoda opětovně používá jedinou instanci messagingfactory.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-144">hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="0f6c2-145">Pokud u jednoho odesílatele potřebujete vysokou propustnost, tak můžete vytvořit více instancí MessagingFactory a jeden objekt [EventHubClient][] z každé z nich.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-tooan-event-hub"></a><span data-ttu-id="0f6c2-146">Odeslat centra událostí tooan události</span><span class="sxs-lookup"><span data-stu-id="0f6c2-146">Send events tooan event hub</span></span>
<span data-ttu-id="0f6c2-147">Odeslání události centra událostí tooan vytvořením [EventData][] instance a odesláním prostřednictvím hello [odeslat](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) metoda.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-147">You send events tooan event hub by creating an [EventData][] instance and sending it via hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="0f6c2-148">Tato metoda přebírá jediný [EventData][] parametr instance a synchronně ho odesílá tooan centra událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-148">This method takes a single [EventData][] instance parameter and synchronously sends it tooan event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="0f6c2-149">Serializace událostí</span><span class="sxs-lookup"><span data-stu-id="0f6c2-149">Event serialization</span></span>
<span data-ttu-id="0f6c2-150">Hello [EventData][] třída má [čtyři přetížené konstruktory](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) které přebírají různé parametry, například objekt a serializátor, pole bajtů nebo datový proud.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-150">hello [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="0f6c2-151">Je také možné tooinstantiate hello [EventData][] a nastavit datový proud obsahu hello později.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-151">It is also possible tooinstantiate hello [EventData][] class and set hello body stream afterwards.</span></span> <span data-ttu-id="0f6c2-152">Při použití formátu JSON s [EventData][], můžete použít **Encoding.UTF8.GetBytes()** tooretrieve hello pole bajtů řetězce kódovaného ve formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** tooretrieve hello byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="0f6c2-153">Klíč oddílu</span><span class="sxs-lookup"><span data-stu-id="0f6c2-153">Partition key</span></span>
<span data-ttu-id="0f6c2-154">Hello [EventData][] třída má [PartitionKey][] vlastnost, která umožňuje toospecify odesílatele hello hodnotu, která je použita hodnota hash tooproduce přiřazení k oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-154">hello [EventData][] class has a [PartitionKey][] property that enables hello sender toospecify a value that is hashed tooproduce a partition assignment.</span></span> <span data-ttu-id="0f6c2-155">Použití klíče oddílu zajišťuje všechny hello události se stejným klíčem odešlou hello toohello stejné oddílu v Centru událostí hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-155">Using a partition key ensures that all hello events with hello same key are sent toohello same partition in hello event hub.</span></span> <span data-ttu-id="0f6c2-156">Běžné klíče oddílů zahrnují ID relace uživatele a jedinečné ID odesílatele.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="0f6c2-157">Hello [PartitionKey][] vlastnost je volitelná a lze zadat při použití hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) nebo [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) metody.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-157">hello [PartitionKey][] property is optional and can be provided when using hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="0f6c2-158">Pokud nezadáte hodnotu [PartitionKey][], odeslané události jsou distribuované toopartitions pomocí modelu kruhového dotazování.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-158">If you do not provide a value for [PartitionKey][], sent events are distributed toopartitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="0f6c2-159">Aspekty dostupnosti</span><span class="sxs-lookup"><span data-stu-id="0f6c2-159">Availability considerations</span></span>

<span data-ttu-id="0f6c2-160">Použitím klíče oddílu je volitelný a měli byste pečlivě zvážit, jestli toouse jeden.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-160">Using a partition key is optional, and you should consider carefully whether or not toouse one.</span></span> <span data-ttu-id="0f6c2-161">V mnoha případech použitím klíče oddílu je vhodný, pokud řazení událostí je důležité.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="0f6c2-162">Pokud použijete klíč oddílu, tyto oddíly vyžadují dostupnosti v jednom uzlu, a můžete výpadků časem; například se při výpočetní uzly restartování a opravy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="0f6c2-163">Jako takový Pokud nastavíte ID oddílu a oddílu z nějakého důvodu nedostupný, pokusu o tooaccess hello data v tomto oddílu se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt tooaccess hello data in that partition will fail.</span></span> <span data-ttu-id="0f6c2-164">Pokud je nejdůležitější vysokou dostupnost, nezadávejte klíč oddílu; události v takovém případě budou odeslány toopartitions pomocí modelu kruhového dotazování hello popsané.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-164">If high availability is most important, do not specify a partition key; in that case events will be sent toopartitions using hello round-robin model described previously.</span></span> <span data-ttu-id="0f6c2-165">V tomto scénáři provádíte explicitní volbu mezi dostupnosti (žádné ID oddílu) a konzistence (Připnutí ID oddílu tooa událostí).</span><span class="sxs-lookup"><span data-stu-id="0f6c2-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events tooa partition ID).</span></span>

<span data-ttu-id="0f6c2-166">Potřeba vzít v úvahu zpracovává zpoždění při zpracování události.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="0f6c2-167">V některých případech se může být lepší toodrop dat a opakujte než tootry a přečtěte si o zpracování, které mohou způsobit zpoždění další zpracování příjmu dat.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-167">In some cases it might be better toodrop data and retry than tootry and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="0f6c2-168">Například s běžícími je lepší toowait pro dokončení aktuální data, ale v živé konverzace nebo VOIP scénář hello dat byste měli místo rychle, i když není úplný.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-168">For example, with a stock ticker it's better toowait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have hello data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="0f6c2-169">Zadaný těchto aspektů dostupnosti v těchto scénářích můžete vybrat jednu z následujících strategií zpracování chyb hello:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-169">Given these availability considerations, in these scenarios you might choose one of hello following error handling strategies:</span></span>

- <span data-ttu-id="0f6c2-170">Zastavení (Zastavit čtení ze služby Event Hubs, dokud se nevyřeší věcí)</span><span class="sxs-lookup"><span data-stu-id="0f6c2-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="0f6c2-171">Vyřaďte (zprávy nejsou důležité, jejich umístění)</span><span class="sxs-lookup"><span data-stu-id="0f6c2-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="0f6c2-172">Opakujte (hello opakování, které vložit jak můžete vidět, zprávy)</span><span class="sxs-lookup"><span data-stu-id="0f6c2-172">Retry (retry hello messages as you see fit)</span></span>
- <span data-ttu-id="0f6c2-173">[Nedoručených zpráv](../service-bus-messaging/service-bus-dead-letter-queues.md) (použití fronty nebo jiné toodead centra událostí písmeno jen hello zprávy, které nelze zpracovat)</span><span class="sxs-lookup"><span data-stu-id="0f6c2-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub toodead letter only hello messages you couldn’t process)</span></span>

<span data-ttu-id="0f6c2-174">Další informace a diskuzi o hello kompromis mezi dostupnosti a konzistence najdete v tématu [dostupnosti a konzistence v Event Hubs](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="0f6c2-174">For more information and a discussion about hello trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="0f6c2-175">Dávkové operace odesílání událostí</span><span class="sxs-lookup"><span data-stu-id="0f6c2-175">Batch event send operations</span></span>
<span data-ttu-id="0f6c2-176">Odesílání událostí v dávkách (batch) může výrazně zvýšit propustnost.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="0f6c2-177">Hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metoda trvá **rozhraní IEnumerable** parametr typu [EventData][] a hello odesílá celý batch jako centra událostí toohello atomické operace.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-177">hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends hello entire batch as an atomic operation toohello event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="0f6c2-178">Všimněte si, že jeden batch nesmí překročit hello 256 KB omezení pro událost.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-178">Note that a single batch must not exceed hello 256 KB limit of an event.</span></span> <span data-ttu-id="0f6c2-179">Kromě toho každá zpráva v dávce hello používá hello stejnou identitu zdroje.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-179">Additionally, each message in hello batch uses hello same publisher identity.</span></span> <span data-ttu-id="0f6c2-180">Je zodpovědností hello tooensure hello odesílatele, který hello batch nepřekračuje hello maximální velikost události.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-180">It is hello responsibility of hello sender tooensure that hello batch does not exceed hello maximum event size.</span></span> <span data-ttu-id="0f6c2-181">V případě překročení se u klienta vygeneruje chyba odeslání (**Send**).</span><span class="sxs-lookup"><span data-stu-id="0f6c2-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="0f6c2-182">Asynchronní odesílání a škálované odesílání</span><span class="sxs-lookup"><span data-stu-id="0f6c2-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="0f6c2-183">Můžete také odeslat centra událostí tooan události asynchronně.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-183">You can also send events tooan event hub asynchronously.</span></span> <span data-ttu-id="0f6c2-184">Asynchronní odesílání může zvýšit rychlost Dobrý den, kdy je klient schopný toosend události.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-184">Sending asynchronously can increase hello rate at which a client is able toosend events.</span></span> <span data-ttu-id="0f6c2-185">Obě hello [odeslat](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) a [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metody jsou k dispozici v asynchronních verzích, které vracejí [úloh](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) objektu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-185">Both hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="0f6c2-186">Když tato technika může zvýšit propustnost, se může také způsobit hello události toosend toocontinue klienta i když ho po omezení ze strany hello služby Event Hubs a můžou vést k selhání hello klienta nebo ztrátě zpráv, pokud není implementovaná správně.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-186">While this technique can increase throughput, it can also cause hello client toocontinue toosend events even while it is being throttled by hello Event Hubs service and can result in hello client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="0f6c2-187">Kromě toho můžete použít hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) vlastnost na možnosti opakování hello klienta toocontrol klienta.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-187">In addition, you can use hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on hello client toocontrol client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="0f6c2-188">Vytvoření odesílatele na oddíl</span><span class="sxs-lookup"><span data-stu-id="0f6c2-188">Create a partition sender</span></span>
<span data-ttu-id="0f6c2-189">Přestože je nejběžnější toosend události tooan centra událostí bez klíče oddílu, v některých případech můžete toosend události přímo tooa zadaný oddíl.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-189">Although it is most common toosend events tooan event hub without a partition key, in some cases you might want toosend events directly tooa given partition.</span></span> <span data-ttu-id="0f6c2-190">Například:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="0f6c2-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) vrátí [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) objektů, které můžete použít oddílu centra toopublish události tooa konkrétní události.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use toopublish events tooa specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="0f6c2-192">Příjemci událostí</span><span class="sxs-lookup"><span data-stu-id="0f6c2-192">Event consumers</span></span>
<span data-ttu-id="0f6c2-193">Služba Event Hubs má dva primární modely příjmu událostí: přímé příjemce a abstrakce vyšší úrovně, jako je například [EventProcessorHost][].</span><span class="sxs-lookup"><span data-stu-id="0f6c2-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="0f6c2-194">Přímých příjemců zodpovídají za vlastní koordinaci toopartitions přístup v rámci skupiny příjemců.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-194">Direct receivers are responsible for their own coordination of access toopartitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="0f6c2-195">Přímý příjemce</span><span class="sxs-lookup"><span data-stu-id="0f6c2-195">Direct consumer</span></span>
<span data-ttu-id="0f6c2-196">Hello Nejpřímějším způsobem tooread z oddílu v rámci skupiny příjemců je toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) třídy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-196">hello most direct way tooread from a partition within a consumer group is toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="0f6c2-197">toocreate na instance této třídy, musíte použít instanci hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) třídy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-197">toocreate an instance of this class, you must use an instance of hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="0f6c2-198">V následujícím příkladu hello ID oddílu hello je povinný při vytváření příjemce hello pro skupiny uživatelů hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-198">In hello following example, hello partition ID must be specified when creating hello receiver for hello consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="0f6c2-199">Hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) metoda má několik přetížení, které usnadňují kontrolu nad hello vytvářeného čtenáře.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-199">hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over hello reader being created.</span></span> <span data-ttu-id="0f6c2-200">Tyto metody zahrnují určení posunu jako řetězce nebo časového razítka a hello možnost toospecify jestli tooinclude tento zadaný posun v hello datového proudu, nebo po jeho spuštění.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-200">These methods include specifying an offset as either a string or timestamp, and hello ability toospecify whether tooinclude this specified offset in hello returned stream, or start after it.</span></span> <span data-ttu-id="0f6c2-201">Jakmile vytvoříte příjemce hello, můžete začít přijímat události prostřednictvím hello vrátil objekt.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-201">After you create hello receiver, you can start receiving events on hello returned object.</span></span> <span data-ttu-id="0f6c2-202">Hello [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) metoda má čtyři přetížení tento ovládací prvek hello přijímat parametry operace, jako je například velikost dávky a doba čekání.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-202">hello [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control hello receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="0f6c2-203">Můžete použít asynchronní verze těchto metod tooincrease hello propustnost příjemce hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-203">You can use hello asynchronous versions of these methods tooincrease hello throughput of a consumer.</span></span> <span data-ttu-id="0f6c2-204">Například:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="0f6c2-205">S ohledem tooa konkrétního oddílu jsou přijaty zprávy hello v hello pořadí, ve které byly odeslány toohello centra událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-205">With respect tooa specific partition, hello messages are received in hello order in which they were sent toohello event hub.</span></span> <span data-ttu-id="0f6c2-206">Posun Hello je řetězec tokenu použité tooidentify zprávy v oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-206">hello offset is a string token used tooidentify a message in a partition.</span></span>

<span data-ttu-id="0f6c2-207">Všimněte si, že oddíl v rámci skupiny příjemců neumožňuje v žádné chvíli připojení více než pěti souběžných čtenářů.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="0f6c2-208">Jak se příjemci různě připojují a odpojují, mohou jejich relace zůstat aktivní pro několik minut, než služba hello rozpozná, že se odpojili.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-208">As readers connect or become disconnected, their sessions might stay active for several minutes before hello service recognizes that they have disconnected.</span></span> <span data-ttu-id="0f6c2-209">Během této doby může selhat připojení tooa oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-209">During this time, reconnecting tooa partition may fail.</span></span> <span data-ttu-id="0f6c2-210">Kompletní příklad, jak napsat přímého příjemce pro službu Event Hubs, najdete v části hello [přímí příjemci centra událostí](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) ukázka.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-210">For a complete example of writing a direct receiver for Event Hubs, see hello [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="0f6c2-211">EventProcessorHost</span><span class="sxs-lookup"><span data-stu-id="0f6c2-211">Event processor host</span></span>
<span data-ttu-id="0f6c2-212">Hello [EventProcessorHost][] třída zpracovává data ze služby Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-212">hello [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="0f6c2-213">Tuto implementaci byste měli používat při vytváření čtenářů událostí na platformě .NET hello.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-213">You should use this implementation when building event readers on hello .NET platform.</span></span> <span data-ttu-id="0f6c2-214">Třída [EventProcessorHost][] poskytuje pro implementace zpracovatelů událostí bezpečné prostředí runtime, které umožňuje bezpečné použití vláken a více procesů. Taky poskytuje možnost vytváření kontrolních bodů a správy „půjčování“ oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="0f6c2-215">toouse hello [EventProcessorHost][] třídu, můžete implementovat [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="0f6c2-215">toouse hello [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="0f6c2-216">Toto rozhraní obsahuje tři metody:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="0f6c2-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="0f6c2-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="0f6c2-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="0f6c2-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="0f6c2-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="0f6c2-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="0f6c2-220">zpracování událostí toostart doložit [EventProcessorHost][], poskytuje hello vhodné parametry pro vaše Centrum událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-220">toostart event processing, instantiate [EventProcessorHost][], providing hello appropriate parameters for your event hub.</span></span> <span data-ttu-id="0f6c2-221">Potom zavolejte [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister vaše [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementace s hello runtime.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with hello runtime.</span></span> <span data-ttu-id="0f6c2-222">V tomto okamžiku hello hostitele pokusí tooacquire zapůjčení každý oddíl v Centru událostí hello použitím "chamtivého" algoritmu.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-222">At this point, hello host will attempt tooacquire a lease on every partition in hello event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="0f6c2-223">Tato zapůjčení vydrží po stanovenou dobu a následně musí být obnovena.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="0f6c2-224">Jako nové uzly a instancí pracovního procesu v takovém případě režimu online, se umístí své rezervace zapůjčení a časem hello zatížení posune mezi uzly jako všechny pokusy o tooacquire další zapůjčení.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time hello load shifts between nodes as each attempts tooacquire more leases.</span></span>

![Event Processor Host](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="0f6c2-226">Postupem času se dosáhne rovnováhy.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="0f6c2-227">Tato dynamická funkce umožňuje tooconsumers toobe použít automatické škálování na základě využití procesoru pro škálování nahoru a dolů.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-227">This dynamic capability enables CPU-based autoscaling toobe applied tooconsumers for both scale-up and scale-down.</span></span> <span data-ttu-id="0f6c2-228">Protože Event Hubs nemají přímým konceptem počítání zpráv, průměrné využití procesoru je často hello nejlepší mechanismus toomeasure back end nebo škálování příjemců.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often hello best mechanism toomeasure back end or consumer scale.</span></span> <span data-ttu-id="0f6c2-229">Když začnou zdroje toopublish, kterou může zpracovat další události, než příjemce, může být hello zvýšení využití procesoru na spotřebitele toocause použité k automatickému škálování počtu instancí pracovních procesů.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-229">If publishers begin toopublish more events than consumers can process, hello CPU increase on consumers can be used toocause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="0f6c2-230">Hello [EventProcessorHost][] taky implementuje mechanismus Azure na základě úložiště vytváření kontrolních bodů.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-230">hello [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="0f6c2-231">Tento mechanismus hello ukládá posun na bázi oddílu, tak, aby každý příjemce můžete určit, jaké hello poslední kontrolní bod předchozího příjemce hello se.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-231">This mechanism stores hello offset on a per partition basis, so that each consumer can determine what hello last checkpoint from hello previous consumer was.</span></span> <span data-ttu-id="0f6c2-232">Stejně jako oddíly přechod mezi uzly prostřednictvím zapůjčení, to je hello synchronizační mechanismus, který usnadňuje přesun zátěže.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-232">As partitions transition between nodes via leases, this is hello synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="0f6c2-233">Odvolání zdroje</span><span class="sxs-lookup"><span data-stu-id="0f6c2-233">Publisher revocation</span></span>
<span data-ttu-id="0f6c2-234">Kromě toho toohello pokročilé funkce běhové [EventProcessorHost][], umožňuje Služba Event Hubs odvolání zdroje v pořadí tooblock konkrétním zdrojům možnost odesílat události tooan události rozbočovače.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-234">In addition toohello advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order tooblock specific publishers from sending event tooan event hub.</span></span> <span data-ttu-id="0f6c2-235">Tyto funkce jsou zvláště užitečné, pokud došlo k ohrožení zabezpečení token vydavatele, nebo aktualizace softwaru je příčinou je toobehave nesprávně.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them toobehave inappropriately.</span></span> <span data-ttu-id="0f6c2-236">V těchto situacích může být hello vydavatele identitu, která je součástí jeho tokenu SAS, zablokováno publikování událostí.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-236">In these situations, hello publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="0f6c2-237">Další informace o odvolání zdroje a o tom, jak toosend tooEvent Hubs jako vydavatel, najdete v části hello [události rozbočovače velké škálování zabezpečeného publikování](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) ukázka.</span><span class="sxs-lookup"><span data-stu-id="0f6c2-237">For more information about publisher revocation and how toosend tooEvent Hubs as a publisher, see hello [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0f6c2-238">Další kroky</span><span class="sxs-lookup"><span data-stu-id="0f6c2-238">Next steps</span></span>
<span data-ttu-id="0f6c2-239">toolearn Další informace o scénářích služby Event Hubs naleznete pod těmito odkazy:</span><span class="sxs-lookup"><span data-stu-id="0f6c2-239">toolearn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="0f6c2-240">Přehled rozhraní API služby Event Hubs</span><span class="sxs-lookup"><span data-stu-id="0f6c2-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="0f6c2-241">Co je Služba Event Hubs</span><span class="sxs-lookup"><span data-stu-id="0f6c2-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="0f6c2-242">Dostupnost a konzistence ve službě Event Hubs</span><span class="sxs-lookup"><span data-stu-id="0f6c2-242">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="0f6c2-243">Referenční dokumentace rozhraní API třídy EventProcessorHost</span><span class="sxs-lookup"><span data-stu-id="0f6c2-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager
[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient
[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata
[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey
[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost
