---
title: "Průvodce programováním pro Azure Event Hubs | Dokumentace Microsoftu"
description: "Zapište kód pro Azure Event Hubs pomocí sady Azure .NET SDK."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 405ec2b27b488b570c4a5c86e4950ff98233360e
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="2ad0d-103">Průvodce programováním pro službu Event Hubs</span><span class="sxs-lookup"><span data-stu-id="2ad0d-103">Event Hubs programming guide</span></span>

<span data-ttu-id="2ad0d-104">Tento článek popisuje některé běžné scénáře v psaní kódu pomocí služby Azure Event Hubs a .NET SDK služby Azure.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-104">This article discusses some common scenarios in writing code using Azure Event Hubs and the Azure .NET SDK.</span></span> <span data-ttu-id="2ad0d-105">Předpokládá se předběžná znalost služby Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="2ad0d-106">Koncepční přehled služby Event Hubs naleznete v tématu [Přehled služby Event Hubs](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-106">For a conceptual overview of Event Hubs, see the [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="2ad0d-107">Zdroje událostí</span><span class="sxs-lookup"><span data-stu-id="2ad0d-107">Event publishers</span></span>

<span data-ttu-id="2ad0d-108">Můžete odesílat události do centra událostí buď pomocí HTTP POST nebo prostřednictvím připojení protokolu AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-108">You send events to an event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="2ad0d-109">Možnost, která používat a kdy závisí na konkrétním adresovaném scénáři.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-109">The choice of which to use and when depends on the specific scenario being addressed.</span></span> <span data-ttu-id="2ad0d-110">Připojení protokolu AMQP 1.0 se měří jako zprostředkovaná připojení ve službě Service Bus. Díky tomu, že poskytují trvalý kanál pro zasílání zpráv, jsou vhodnější ve scénářích, kde se počítá s častými vysokými objemy zpráv a vyžaduje se nižší latence.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="2ad0d-111">Centra událostí Event Hubs se vytváří a spravují pomocí třídy [NamespaceManager][].</span><span class="sxs-lookup"><span data-stu-id="2ad0d-111">You create and manage Event Hubs using the [NamespaceManager][] class.</span></span> <span data-ttu-id="2ad0d-112">Pokud používáte rozhraní API spravované pomocí .NET, budou primárními konstrukcemi pro publikování dat ve službě Event Hubs třídy [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) a [EventData][].</span><span class="sxs-lookup"><span data-stu-id="2ad0d-112">When using the .NET managed APIs, the primary constructs for publishing data to Event Hubs are the [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="2ad0d-113">[EventHubClient][] poskytuje komunikační kanál AMQP, přes který se události posílají do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-113">[EventHubClient][] provides the AMQP communication channel over which events are sent to the event hub.</span></span> <span data-ttu-id="2ad0d-114">[EventData][] třída představuje událost a slouží k publikování zpráv do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-114">The [EventData][] class represents an event, and is used to publish messages to an event hub.</span></span> <span data-ttu-id="2ad0d-115">Tato třída obsahuje tělo, některá metadata a záhlaví s informacemi o události.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-115">This class includes the body, some metadata, and header information about the event.</span></span> <span data-ttu-id="2ad0d-116">Ostatní vlastnosti jsou přidány do [EventData][] objektu při průchodu centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-116">Other properties are added to the [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="2ad0d-117">Začínáme</span><span class="sxs-lookup"><span data-stu-id="2ad0d-117">Get started</span></span>

<span data-ttu-id="2ad0d-118">Třídy rozhraní .NET, které podporují službu Event Hubs, poskytuje knihovna Microsoft.ServiceBus.dll.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-118">The .NET classes that support Event Hubs are provided in the Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="2ad0d-119">Nejsnadnějším způsobem, jak odkazovat na rozhraní API služby Service Bus a nakonfigurovat svou aplikaci se všemi závislostmi služby Service Bus, je stáhnout si balíček [Service Bus NuGet](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-119">The easiest way to reference the Service Bus API and to configure your application with all of the Service Bus dependencies is to download the [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="2ad0d-120">Můžete případně použít i [konzolu Správce balíčků](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) ve Visual Studiu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-120">Alternatively, you can use the [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="2ad0d-121">V tom případě je potřeba zadat v okně [konzoly Správce balíčků](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-121">To do so, issue the following command in the [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="2ad0d-122">Vytvoření centra událostí</span><span class="sxs-lookup"><span data-stu-id="2ad0d-122">Create an event hub</span></span>
<span data-ttu-id="2ad0d-123">K vytváření center událostí můžete použít třídu [NamespaceManager][].</span><span class="sxs-lookup"><span data-stu-id="2ad0d-123">You can use the [NamespaceManager][] class to create Event Hubs.</span></span> <span data-ttu-id="2ad0d-124">Příklad:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="2ad0d-125">Ve většině případů se doporučuje používat metody [CreateEventHubIfNotExists][], aby nedošlo ke generování výjimek v případě restartu služby.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-125">In most cases, it is recommended that you use the [CreateEventHubIfNotExists][] methods to avoid generating exceptions if the service restarts.</span></span> <span data-ttu-id="2ad0d-126">Příklad:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="2ad0d-127">Všechny operace vytváření pro službu Event Hubs, včetně [CreateEventHubIfNotExists][], vyžadují oprávnění pro **správu** v daném oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on the namespace in question.</span></span> <span data-ttu-id="2ad0d-128">Pokud chcete omezit oprávnění svých publikujících (zdrojových) nebo přijímajících aplikací, můžete zamezit volání operací vytváření v produkčním kódu použitím přihlašovacích údajů s omezenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-128">If you want to limit the permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="2ad0d-129">[EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) třída obsahuje podrobnosti o Centru událostí, včetně pravidla autorizace, intervalu uchování zpráv, ID oddílu, stav a cestu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-129">The [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including the authorization rules, the message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="2ad0d-130">Tuto třídu můžete použít k aktualizaci metadat centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-130">You can use this class to update the metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="2ad0d-131">Vytvoření klienta pro centra událostí (Event Hubs)</span><span class="sxs-lookup"><span data-stu-id="2ad0d-131">Create an Event Hubs client</span></span>
<span data-ttu-id="2ad0d-132">Primární třídou pro interakci s centry událostí je [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="2ad0d-132">The primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="2ad0d-133">Tato třída poskytuje možnosti jak pro odesílatele, tak pro příjemce.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="2ad0d-134">Instanci této třídy můžete vytvořit pomocí metody [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) (Vytvořit), jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-134">You can instantiate this class using the [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in the following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="2ad0d-135">Tato metoda používá informace o připojení služby Service Bus v souboru App.config v sekci `appSettings`.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-135">This method uses the Service Bus connection information in the App.config file, in the `appSettings` section.</span></span> <span data-ttu-id="2ad0d-136">Pokud se chcete podívat na příklad XML `appSettings`, které se používá k ukládání informací o připojení služby Service Bus, přečtěte si dokumentaci k metodě [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-136">For an example of the `appSettings` XML used to store the Service Bus connection information, see the documentation for the [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="2ad0d-137">Další možností je vytvoření klienta z připojovacího řetězce.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-137">Another option is to create the client from a connection string.</span></span> <span data-ttu-id="2ad0d-138">Tato možnost dobře funguje při použití rolí pracovního procesu systému Azure, protože je možné řetězec uložit ve vlastnostech konfigurace pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-138">This option works well when using Azure worker roles, because you can store the string in the configuration properties for the worker.</span></span> <span data-ttu-id="2ad0d-139">Příklad:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="2ad0d-140">Připojovací řetězec bude mít stejný formát jako v souboru App.config u předchozích metod:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-140">The connection string will be in the same format as it appears in the App.config file for the previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="2ad0d-141">Nakonec jde taky vytvořit objekt [EventHubClient][] z instance [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory), jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-141">Finally, it is also possible to create an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in the following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="2ad0d-142">Pozor, všimněte si, že další objekty [EventHubClient][] vytvořené z instance MessagingFactory znova používají stejné základní připojení protokolu TCP.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-142">It is important to note that additional [EventHubClient][] objects created from a messaging factory instance will reuse the same underlying TCP connection.</span></span> <span data-ttu-id="2ad0d-143">Tyto objekty tudíž mají omezení propustnosti na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="2ad0d-144">Metoda [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) opětovně používá jedinou instanci MessagingFactory.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-144">The [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="2ad0d-145">Pokud u jednoho odesílatele potřebujete vysokou propustnost, tak můžete vytvořit více instancí MessagingFactory a jeden objekt [EventHubClient][] z každé z nich.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-to-an-event-hub"></a><span data-ttu-id="2ad0d-146">Odesílání událostí do centra událostí</span><span class="sxs-lookup"><span data-stu-id="2ad0d-146">Send events to an event hub</span></span>
<span data-ttu-id="2ad0d-147">Odesílání událostí do centra událostí tak, že vytvoříte [EventData][] instance a odešlete pomocí [odeslat](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) metoda.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-147">You send events to an event hub by creating an [EventData][] instance and sending it via the [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="2ad0d-148">Tato metoda přebírá jediný [EventData][] parametr instance a synchronně ho odesílá do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-148">This method takes a single [EventData][] instance parameter and synchronously sends it to an event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="2ad0d-149">Serializace událostí</span><span class="sxs-lookup"><span data-stu-id="2ad0d-149">Event serialization</span></span>
<span data-ttu-id="2ad0d-150">Třída [EventData][] má [čtyři přetížené konstruktory](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_), které přebírají různé parametry, například objekt a serializátor, pole bajtů nebo datový proud.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-150">The [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="2ad0d-151">Taky je možné vytvořit instanci třídy [EventData][] a nastavit datový proud těla potom.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-151">It is also possible to instantiate the [EventData][] class and set the body stream afterwards.</span></span> <span data-ttu-id="2ad0d-152">Pokud při práci s třídou [EventData][] používáte JSON, můžete načíst pole bajtů řetězce kódovaného ve formátu JSON pomocí metody **Encoding.UTF8.GetBytes()**.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** to retrieve the byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="2ad0d-153">Klíč oddílu</span><span class="sxs-lookup"><span data-stu-id="2ad0d-153">Partition key</span></span>
<span data-ttu-id="2ad0d-154">Třída [EventData][] má vlastnost [PartitionKey][] (Klíč oddílu), která umožňuje odesílateli zadat hodnotu, která se po zahašování použije k vytvoření přiřazení k oddílu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-154">The [EventData][] class has a [PartitionKey][] property that enables the sender to specify a value that is hashed to produce a partition assignment.</span></span> <span data-ttu-id="2ad0d-155">Použití klíče oddílu zajišťuje, že všechny události se stejným klíčem odešlou do stejného oddílu události rozbočovače.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-155">Using a partition key ensures that all the events with the same key are sent to the same partition in the event hub.</span></span> <span data-ttu-id="2ad0d-156">Běžné klíče oddílů zahrnují ID relace uživatele a jedinečné ID odesílatele.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="2ad0d-157">Vlastnost [PartitionKey][] je volitelná. K dispozici je při použití metody [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) nebo metody [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-157">The [PartitionKey][] property is optional and can be provided when using the [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="2ad0d-158">Pokud hodnotu vlastnosti [PartitionKey][] nezadáte, budou odeslané události distribuovány do oddílů pomocí modelu kruhového dotazování.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-158">If you do not provide a value for [PartitionKey][], sent events are distributed to partitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="2ad0d-159">Aspekty dostupnosti</span><span class="sxs-lookup"><span data-stu-id="2ad0d-159">Availability considerations</span></span>

<span data-ttu-id="2ad0d-160">Použitím klíče oddílu je volitelný a měli byste pečlivě zvážit zda se má použít.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-160">Using a partition key is optional, and you should consider carefully whether or not to use one.</span></span> <span data-ttu-id="2ad0d-161">V mnoha případech použitím klíče oddílu je vhodný, pokud řazení událostí je důležité.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="2ad0d-162">Pokud použijete klíč oddílu, tyto oddíly vyžadují dostupnosti v jednom uzlu, a můžete výpadků časem; například se při výpočetní uzly restartování a opravy.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="2ad0d-163">Jako takový Pokud nastavíte ID oddílu a oddílu z nějakého důvodu nedostupný, se nezdaří pokus o přístup k datům v tomto oddílu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt to access the data in that partition will fail.</span></span> <span data-ttu-id="2ad0d-164">Pokud je nejdůležitější vysokou dostupnost, nezadávejte klíč oddílu; v takovém případě události odešle do oddílů pomocí modelu kruhového dotazování popsané.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-164">If high availability is most important, do not specify a partition key; in that case events will be sent to partitions using the round-robin model described previously.</span></span> <span data-ttu-id="2ad0d-165">V tomto scénáři provádíte explicitní volbu mezi dostupnosti (žádné ID oddílu) a konzistence (Připnutí události pro ID oddílu).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events to a partition ID).</span></span>

<span data-ttu-id="2ad0d-166">Potřeba vzít v úvahu zpracovává zpoždění při zpracování události.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="2ad0d-167">V některých případech může být lepší vyřazení dat a zkuste to znovu než zkuste a přečtěte si o zpracování, které může potenciálně způsobit zpoždění další podřízené zpracování.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-167">In some cases it might be better to drop data and retry than to try and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="2ad0d-168">Například s běžícími je lepší čekání na dokončení aktuální data, ale v živé konverzace nebo VOIP scénář spíše byste měli data rychle, i když není úplný.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-168">For example, with a stock ticker it's better to wait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have the data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="2ad0d-169">Zadané těchto aspektů dostupnosti v těchto scénářích můžete vybrat jednu z následujících chybových strategie zpracování:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-169">Given these availability considerations, in these scenarios you might choose one of the following error handling strategies:</span></span>

- <span data-ttu-id="2ad0d-170">Zastavení (Zastavit čtení ze služby Event Hubs, dokud se nevyřeší věcí)</span><span class="sxs-lookup"><span data-stu-id="2ad0d-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="2ad0d-171">Vyřaďte (zprávy nejsou důležité, jejich umístění)</span><span class="sxs-lookup"><span data-stu-id="2ad0d-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="2ad0d-172">Opakujte (opakování, které vložit jak můžete vidět, zprávy)</span><span class="sxs-lookup"><span data-stu-id="2ad0d-172">Retry (retry the messages as you see fit)</span></span>
- <span data-ttu-id="2ad0d-173">[Nedoručených zpráv](../service-bus-messaging/service-bus-dead-letter-queues.md) (frontu použít nebo jiné centra událostí do zpráv písmeno pouze zprávy, nelze zpracovat.)</span><span class="sxs-lookup"><span data-stu-id="2ad0d-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub to dead letter only the messages you couldn’t process)</span></span>

<span data-ttu-id="2ad0d-174">Další informace a diskuzi o kompromis mezi dostupnosti a konzistence najdete v tématu [dostupnosti a konzistence v Event Hubs](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-174">For more information and a discussion about the trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="2ad0d-175">Dávkové operace odesílání událostí</span><span class="sxs-lookup"><span data-stu-id="2ad0d-175">Batch event send operations</span></span>
<span data-ttu-id="2ad0d-176">Odesílání událostí v dávkách (batch) může výrazně zvýšit propustnost.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="2ad0d-177">[SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metoda trvá **rozhraní IEnumerable** parametr typu [EventData][] a odesílá celý batch jako atomickou operaci do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-177">The [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends the entire batch as an atomic operation to the event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="2ad0d-178">Všimněte si, že jeden batch nesmí překročit velikost 256 KB, tedy standardní omezení pro událost.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-178">Note that a single batch must not exceed the 256 KB limit of an event.</span></span> <span data-ttu-id="2ad0d-179">Kromě toho každá zpráva v batchi používá stejnou identitu zdroje.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-179">Additionally, each message in the batch uses the same publisher identity.</span></span> <span data-ttu-id="2ad0d-180">Dodržení maximálního limitu velikosti události u batche musí zajistit odesílatel.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-180">It is the responsibility of the sender to ensure that the batch does not exceed the maximum event size.</span></span> <span data-ttu-id="2ad0d-181">V případě překročení se u klienta vygeneruje chyba odeslání (**Send**).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="2ad0d-182">Asynchronní odesílání a škálované odesílání</span><span class="sxs-lookup"><span data-stu-id="2ad0d-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="2ad0d-183">Můžete také odeslat události do centra událostí asynchronně.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-183">You can also send events to an event hub asynchronously.</span></span> <span data-ttu-id="2ad0d-184">Asynchronní odesílání může zvýšit frekvenci, s jakou je klient schopný odesílat události.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-184">Sending asynchronously can increase the rate at which a client is able to send events.</span></span> <span data-ttu-id="2ad0d-185">Metody [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) i [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) jsou k dispozici v asynchronních verzích, které vrací objekt [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-185">Both the [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="2ad0d-186">I když tato technika může zvýšit propustnost, taky může způsobit, že klient bude odesílat události i po omezení ze strany služby Event Hubs, což může v případě nesprávné implementace vést k selhání klienta nebo ztrátě zpráv.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-186">While this technique can increase throughput, it can also cause the client to continue to send events even while it is being throttled by the Event Hubs service and can result in the client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="2ad0d-187">K ovládání možností opětovných pokusů klienta můžete navíc u klienta použít vlastnost [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-187">In addition, you can use the [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on the client to control client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="2ad0d-188">Vytvoření odesílatele na oddíl</span><span class="sxs-lookup"><span data-stu-id="2ad0d-188">Create a partition sender</span></span>
<span data-ttu-id="2ad0d-189">Přestože je nejčastěji odesílají události do centra událostí bez klíče oddílu, v některých případech můžete chtít odesílat události přímo na konkrétní oddíl.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-189">Although it is most common to send events to an event hub without a partition key, in some cases you might want to send events directly to a given partition.</span></span> <span data-ttu-id="2ad0d-190">Například:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="2ad0d-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) vrátí [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) objekt, můžete použít k publikování událostí do oddílu centra konkrétní události.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use to publish events to a specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="2ad0d-192">Příjemci událostí</span><span class="sxs-lookup"><span data-stu-id="2ad0d-192">Event consumers</span></span>
<span data-ttu-id="2ad0d-193">Služba Event Hubs má dva primární modely příjmu událostí: přímé příjemce a abstrakce vyšší úrovně, jako je například [EventProcessorHost][].</span><span class="sxs-lookup"><span data-stu-id="2ad0d-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="2ad0d-194">Přímí příjemci si za koordinaci přístupu k oddílům v rámci skupiny příjemců zodpovídají sami.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-194">Direct receivers are responsible for their own coordination of access to partitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="2ad0d-195">Přímý příjemce</span><span class="sxs-lookup"><span data-stu-id="2ad0d-195">Direct consumer</span></span>
<span data-ttu-id="2ad0d-196">Nejpřímějším způsobem, jak číst z oddílu v rámci skupiny příjemců, je použít třídu [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-196">The most direct way to read from a partition within a consumer group is to use the [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="2ad0d-197">Pokud chcete vytvořit instanci této třídy, musíte použít instanci třídy [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-197">To create an instance of this class, you must use an instance of the [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="2ad0d-198">V následujícím příkladu musí být při vytváření příjemce pro skupinu příjemců určeno ID oddílu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-198">In the following example, the partition ID must be specified when creating the receiver for the consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="2ad0d-199">Metoda [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) má několik přetížení, která usnadňují ovládání vytvářeného čtenáře.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-199">The [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over the reader being created.</span></span> <span data-ttu-id="2ad0d-200">Tyto metody zahrnují určení posunu jako řetězce nebo časového razítka a možnost určit, jestli má být zadaný posun ve vráceném datovém proudu, nebo se má začít až po něm.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-200">These methods include specifying an offset as either a string or timestamp, and the ability to specify whether to include this specified offset in the returned stream, or start after it.</span></span> <span data-ttu-id="2ad0d-201">Jakmile vytvoříte příjemce, můžete začít přijímat události prostřednictvím vráceného objektu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-201">After you create the receiver, you can start receiving events on the returned object.</span></span> <span data-ttu-id="2ad0d-202">Metoda [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) má čtyři přetížení, která řídí parametry operace přijímání, jako je například velikost batche (dávky) nebo doba čekání.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-202">The [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control the receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="2ad0d-203">Pokud chcete zvýšit propustnost příjemce, můžete použít asynchronní verze těchto metod.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-203">You can use the asynchronous versions of these methods to increase the throughput of a consumer.</span></span> <span data-ttu-id="2ad0d-204">Například:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="2ad0d-205">Zprávy jsou s ohledem na konkrétní oddíl přijímány v pořadí, ve které byly odeslány do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-205">With respect to a specific partition, the messages are received in the order in which they were sent to the event hub.</span></span> <span data-ttu-id="2ad0d-206">Posun je token v podobě řetězce, který se používá k identifikaci zprávy v oddílu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-206">The offset is a string token used to identify a message in a partition.</span></span>

<span data-ttu-id="2ad0d-207">Všimněte si, že oddíl v rámci skupiny příjemců neumožňuje v žádné chvíli připojení více než pěti souběžných čtenářů.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="2ad0d-208">S tím, jak se příjemci různě připojují a odpojují, mohou jejich relace zůstat ještě několik minut aktivní, než služba rozpozná, že se odpojili.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-208">As readers connect or become disconnected, their sessions might stay active for several minutes before the service recognizes that they have disconnected.</span></span> <span data-ttu-id="2ad0d-209">Během této doby může pokus o opětovné připojení k oddílu selhat.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-209">During this time, reconnecting to a partition may fail.</span></span> <span data-ttu-id="2ad0d-210">Kompletní příklad, jak napsat přímého příjemce pro službu Event Hubs, najdete v článku [přímí příjemci centra událostí](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) ukázka.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-210">For a complete example of writing a direct receiver for Event Hubs, see the [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="2ad0d-211">EventProcessorHost</span><span class="sxs-lookup"><span data-stu-id="2ad0d-211">Event processor host</span></span>
<span data-ttu-id="2ad0d-212">Třída [EventProcessorHost][] zpracovává data z center událostí (Event Hubs).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-212">The [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="2ad0d-213">Tuto implementaci byste měli používat při vytváření čtenářů událostí na platformě .NET.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-213">You should use this implementation when building event readers on the .NET platform.</span></span> <span data-ttu-id="2ad0d-214">Třída [EventProcessorHost][] poskytuje pro implementace zpracovatelů událostí bezpečné prostředí runtime, které umožňuje bezpečné použití vláken a více procesů. Taky poskytuje možnost vytváření kontrolních bodů a správy „půjčování“ oddílu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="2ad0d-215">K použití třídy [EventProcessorHost][] může být potřeba implementovat rozhraní [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-215">To use the [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="2ad0d-216">Toto rozhraní obsahuje tři metody:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="2ad0d-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="2ad0d-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="2ad0d-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="2ad0d-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="2ad0d-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="2ad0d-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="2ad0d-220">Pokud chcete zahájit zpracování událostí, vytvořte instanci [EventProcessorHost][], poskytnutím příslušných parametrů pro vaše Centrum událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-220">To start event processing, instantiate [EventProcessorHost][], providing the appropriate parameters for your event hub.</span></span> <span data-ttu-id="2ad0d-221">Potom zavolejte [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1), čímž registrujete svou implementaci [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) s modulem runtime.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) to register your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with the runtime.</span></span> <span data-ttu-id="2ad0d-222">V tomto okamžiku hostitel pokusí "zapůjčit" každý oddíl v Centru událostí s použitím "chamtivého" algoritmu.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-222">At this point, the host will attempt to acquire a lease on every partition in the event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="2ad0d-223">Tato zapůjčení vydrží po stanovenou dobu a následně musí být obnovena.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="2ad0d-224">V tomto případě se instance pracovních procesů připojí jako nové uzly a umístí své rezervace zapůjčení. Každý uzel se snaží získat další zapůjčení, a tak se v průběhu času zatížení posune.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time the load shifts between nodes as each attempts to acquire more leases.</span></span>

![Event Processor Host](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="2ad0d-226">Postupem času se dosáhne rovnováhy.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="2ad0d-227">Tato dynamická funkce umožňuje použití automatického škálování na bázi procesoru u příjemců jak pro vertikální navýšení, tak pro vertikální snížení kapacity.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-227">This dynamic capability enables CPU-based autoscaling to be applied to consumers for both scale-up and scale-down.</span></span> <span data-ttu-id="2ad0d-228">Vzhledem k tomu, že služba Event Hubs nedisponuje přímým konceptem počítání zpráv, bývá průměrné využití procesoru často nejlepším mechanismem, jak měřit back end nebo škálování příjemců.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often the best mechanism to measure back end or consumer scale.</span></span> <span data-ttu-id="2ad0d-229">Když začnou zdroje publikovat více událostí, než mohou příjemci zpracovat, může být zvýšená aktivita procesoru využita k automatickému škálování počtu instancí pracovních procesů.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-229">If publishers begin to publish more events than consumers can process, the CPU increase on consumers can be used to cause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="2ad0d-230">Třída [EventProcessorHost][] taky implementuje mechanismus vytváření kontrolních bodů Azure na bázi úložiště.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-230">The [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="2ad0d-231">Tento mechanismus ukládá posun na bázi oddílu, každý příjemce tedy může určit poslední kontrolní bod předchozího příjemce.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-231">This mechanism stores the offset on a per partition basis, so that each consumer can determine what the last checkpoint from the previous consumer was.</span></span> <span data-ttu-id="2ad0d-232">Vzhledem k tomu, že oddíly prostřednictvím zapůjčení přechází mezi uzly, usnadňuje tento synchronizační mechanismus přesun zátěže.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-232">As partitions transition between nodes via leases, this is the synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="2ad0d-233">Odvolání zdroje</span><span class="sxs-lookup"><span data-stu-id="2ad0d-233">Publisher revocation</span></span>
<span data-ttu-id="2ad0d-234">Kromě pokročilých funkcí běhové [EventProcessorHost][], umožňuje Služba Event Hubs odvolání zdroje aby bylo možné blokovat konkrétním zdrojům možnost odesílat události do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-234">In addition to the advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order to block specific publishers from sending event to an event hub.</span></span> <span data-ttu-id="2ad0d-235">Tyto funkce jsou zvláště užitečné, pokud jsou pochybnosti ohledně pravosti tokenu zdroje nebo se zdroj v důsledku aktualizace softwaru začne chovat nevhodně.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them to behave inappropriately.</span></span> <span data-ttu-id="2ad0d-236">V těchto situacích může být pro identitu zdroje, která je součástí jeho tokenu SAS, zablokováno publikování událostí.</span><span class="sxs-lookup"><span data-stu-id="2ad0d-236">In these situations, the publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="2ad0d-237">Další informace o odvolání zdroje a o tom, jak jako zdroj odesílat do centra událostí, najdete v ukázce [zabezpečeného publikování ve velkém rozsahu u služby Event Hubs](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab).</span><span class="sxs-lookup"><span data-stu-id="2ad0d-237">For more information about publisher revocation and how to send to Event Hubs as a publisher, see the [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2ad0d-238">Další kroky</span><span class="sxs-lookup"><span data-stu-id="2ad0d-238">Next steps</span></span>
<span data-ttu-id="2ad0d-239">Další informace o scénářích služby Event Hubs naleznete pod těmito odkazy:</span><span class="sxs-lookup"><span data-stu-id="2ad0d-239">To learn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="2ad0d-240">Přehled rozhraní API služby Event Hubs</span><span class="sxs-lookup"><span data-stu-id="2ad0d-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="2ad0d-241">Co je Služba Event Hubs</span><span class="sxs-lookup"><span data-stu-id="2ad0d-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="2ad0d-242">Dostupnost a konzistence ve službě Event Hubs</span><span class="sxs-lookup"><span data-stu-id="2ad0d-242">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="2ad0d-243">Referenční dokumentace rozhraní API třídy EventProcessorHost</span><span class="sxs-lookup"><span data-stu-id="2ad0d-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

<span data-ttu-id="2ad0d-244">[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager</span><span class="sxs-lookup"><span data-stu-id="2ad0d-244">[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager</span></span>
<span data-ttu-id="2ad0d-245">[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient</span><span class="sxs-lookup"><span data-stu-id="2ad0d-245">[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient</span></span>
<span data-ttu-id="2ad0d-246">[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata</span><span class="sxs-lookup"><span data-stu-id="2ad0d-246">[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata</span></span>
<span data-ttu-id="2ad0d-247">[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists</span><span class="sxs-lookup"><span data-stu-id="2ad0d-247">[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists</span></span>
<span data-ttu-id="2ad0d-248">[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey</span><span class="sxs-lookup"><span data-stu-id="2ad0d-248">[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey</span></span>
<span data-ttu-id="2ad0d-249">[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost</span><span class="sxs-lookup"><span data-stu-id="2ad0d-249">[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost</span></span>
