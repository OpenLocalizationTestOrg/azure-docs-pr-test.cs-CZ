---
title: "Přehled funkcí Azure Event Hubs | Microsoft Docs"
description: "Přehled a podrobnosti o funkcích Azure Event Hubs"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: a74d767d57eb5ce2b3a716f9ba908a451f25f538
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="34e29-103">Přehled funkcí služby Event Hubs</span><span class="sxs-lookup"><span data-stu-id="34e29-103">Event Hubs features overview</span></span>

<span data-ttu-id="34e29-104">Azure Event Hubs je škálovatelnou událostí zpracování služba, která ingestuje a zpracovává velké objemy události a data, s nízkou latencí a vysokou spolehlivostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="34e29-105">V tématu [co je Služba Event Hubs?](event-hubs-what-is-event-hubs.md) souhrnné informace služby.</span><span class="sxs-lookup"><span data-stu-id="34e29-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of the service.</span></span>

<span data-ttu-id="34e29-106">Tento článek vychází informace v [přehled](event-hubs-what-is-event-hubs.md)a poskytuje implementace a technické podrobnosti o Event Hubs komponenty a funkce.</span><span class="sxs-lookup"><span data-stu-id="34e29-106">This article builds on the information in the [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="34e29-107">Zdroje událostí</span><span class="sxs-lookup"><span data-stu-id="34e29-107">Event publishers</span></span>

<span data-ttu-id="34e29-108">Každá entita, která odesílá data do centra událostí je producent události nebo *vydavatel události*.</span><span class="sxs-lookup"><span data-stu-id="34e29-108">Any entity that sends data to an event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="34e29-109">Zdroje událostí mohou publikovat události pomocí protokolu HTTPS nebo AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="34e29-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="34e29-110">Zdroje událostí se v centru událostí identifikují pomocí tokenu sdíleného přístupového podpisu (SAS) a mohou mít jedinečnou identitu, nebo mohou používat společný token SAS.</span><span class="sxs-lookup"><span data-stu-id="34e29-110">Event publishers use a Shared Access Signature (SAS) token to identify themselves to an event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="34e29-111">Publikování události</span><span class="sxs-lookup"><span data-stu-id="34e29-111">Publishing an event</span></span>

<span data-ttu-id="34e29-112">Událost můžete publikovat prostřednictvím protokolu AMQP 1.0 nebo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="34e29-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="34e29-113">Event Hubs poskytuje [knihovny klienta a třídy](event-hubs-dotnet-framework-api-overview.md) k publikování událostí do centra událostí od klientů .NET.</span><span class="sxs-lookup"><span data-stu-id="34e29-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events to an event hub from .NET clients.</span></span> <span data-ttu-id="34e29-114">Pro jiné moduly runtime a platformy můžete použít libovolného klienta protokolu AMQP 1.0, například [Apache Qpid](http://qpid.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="34e29-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="34e29-115">Události můžete publikovat samostatně nebo v dávce.</span><span class="sxs-lookup"><span data-stu-id="34e29-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="34e29-116">Jedna publikace (instance dat události) je omezena limitem 256 KB – bez ohledu na to, jestli se jedná o jedinou událost nebo dávku (batch).</span><span class="sxs-lookup"><span data-stu-id="34e29-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="34e29-117">Publikování události větší než tato prahová hodnota dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="34e29-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="34e29-118">Nejvhodnějším postupem pro zdroje je nezajímat se o oddíly v centru událostí a specifikovat pouze *klíč oddílu* (představíme v další části) nebo svoji identitu prostřednictvím tokenu SAS.</span><span class="sxs-lookup"><span data-stu-id="34e29-118">It is a best practice for publishers to be unaware of partitions within the event hub and to only specify a *partition key* (introduced in the next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="34e29-119">Volba, jestli se použije protokol AMQP nebo HTTPS, závisí na konkrétním scénáři použití.</span><span class="sxs-lookup"><span data-stu-id="34e29-119">The choice to use AMQP or HTTPS is specific to the usage scenario.</span></span> <span data-ttu-id="34e29-120">Protokol AMQP vyžaduje nejen protokol TLS (Transport Level Security) nebo SSL/TLS, ale i vytvoření trvalého obousměrného soketu.</span><span class="sxs-lookup"><span data-stu-id="34e29-120">AMQP requires the establishment of a persistent bidirectional socket in addition to transport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="34e29-121">AMQP má vyšší náklady na síť při inicializaci relace, ale HTTPS pro každý požadavek vyžaduje další režii SSL.</span><span class="sxs-lookup"><span data-stu-id="34e29-121">AMQP has higher network costs when initializing the session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="34e29-122">AMQP má pro často používané zdroje vyšší výkon.</span><span class="sxs-lookup"><span data-stu-id="34e29-122">AMQP has higher performance for frequent publishers.</span></span>

![Event Hubs](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="34e29-124">Služba Event Hubs zajišťuje, aby se všechny události, které sdílejí hodnotu klíče oddílu, v pořádku doručily do stejného oddílu.</span><span class="sxs-lookup"><span data-stu-id="34e29-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and to the same partition.</span></span> <span data-ttu-id="34e29-125">Pokud se klíče oddílů používají společně se zásadami zdroje, musí si identita zdroje a hodnota klíče oddílu odpovídat.</span><span class="sxs-lookup"><span data-stu-id="34e29-125">If partition keys are used with publisher policies, then the identity of the publisher and the value of the partition key must match.</span></span> <span data-ttu-id="34e29-126">V opačném případě dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="34e29-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="34e29-127">Zásady zdroje</span><span class="sxs-lookup"><span data-stu-id="34e29-127">Publisher policy</span></span>

<span data-ttu-id="34e29-128">Služba Event Hubs umožňuje podrobnou kontrolu nad zdroji událostí prostřednictvím *zásad zdroje*.</span><span class="sxs-lookup"><span data-stu-id="34e29-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="34e29-129">Zásady zdroje jsou běhové funkce, které byly navržené pro usnadnění kontroly nad velkým množstvím nezávislých zdrojů událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-129">Publisher policies are run-time features designed to facilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="34e29-130">Zásady zdroje poskytují s použitím následujícího mechanismu každému zdroji vlastní identifikátor, který se používá při publikování událostí do centra událostí:</span><span class="sxs-lookup"><span data-stu-id="34e29-130">With publisher policies, each publisher uses its own unique identifier when publishing events to an event hub, using the following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="34e29-131">Názvy zdrojů není potřeba vytvářet dopředu, při publikování události ale musí odpovídat tokenu SAS, aby se zajistilo, že každý zdroj bude mít nezávislou identitu.</span><span class="sxs-lookup"><span data-stu-id="34e29-131">You don't have to create publisher names ahead of time, but they must match the SAS token used when publishing an event, in order to ensure independent publisher identities.</span></span> <span data-ttu-id="34e29-132">Při použití zásad zdroje se každému názvu zdroje nastaví hodnota **PartitionKey** (Klíč oddílu).</span><span class="sxs-lookup"><span data-stu-id="34e29-132">When using publisher policies, the **PartitionKey** value is set to the publisher name.</span></span> <span data-ttu-id="34e29-133">Aby vše správně fungovalo, musí tyto hodnoty odpovídat.</span><span class="sxs-lookup"><span data-stu-id="34e29-133">To work properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="34e29-134">Zachycování</span><span class="sxs-lookup"><span data-stu-id="34e29-134">Capture</span></span>

<span data-ttu-id="34e29-135">[Zaznamenat centra událostí](event-hubs-capture-overview.md) umožňuje automaticky zachycení dat ve službě Event Hubs a uložit ho do svého výběru účtu úložiště Blob nebo účet služby Azure Data Lake.</span><span class="sxs-lookup"><span data-stu-id="34e29-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you to automatically capture the streaming data in Event Hubs and save it to your choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="34e29-136">Můžete povolit sběr dat z portálu Azure a zadejte časové okno k zaznamenání a minimální velikost.</span><span class="sxs-lookup"><span data-stu-id="34e29-136">You can enable Capture from the Azure portal, and specify a minimum size and time window to perform the capture.</span></span> <span data-ttu-id="34e29-137">Použití funkce Capture centra událostí, je zadat vlastní účet Azure Blob Storage a kontejner nebo účet služby Azure Data Lake, který se používá k ukládání zaznamenaná data.</span><span class="sxs-lookup"><span data-stu-id="34e29-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used to store the captured data.</span></span> <span data-ttu-id="34e29-138">Zaznamenaná data je zapsaný ve formátu Apache Avro.</span><span class="sxs-lookup"><span data-stu-id="34e29-138">Captured data is written in the Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="34e29-139">Oddíly</span><span class="sxs-lookup"><span data-stu-id="34e29-139">Partitions</span></span>

<span data-ttu-id="34e29-140">Služba Event Hubs poskytuje datový proud zpráv pomocí schématu rozdělujícího datový proud na oddíly pro jednotlivé příjemce. To zajišťuje, aby každý příjemce četl jenom konkrétní podmnožinu nebo oddíl datového proudu zpráv.</span><span class="sxs-lookup"><span data-stu-id="34e29-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="34e29-141">Toto schéma umožňuje vodorovné škálování zpracování událostí a poskytuje další funkce zaměřené na datový proud, které nejsou ve frontách a tématech k dispozici.</span><span class="sxs-lookup"><span data-stu-id="34e29-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="34e29-142">Oddíl je seřazená posloupnost událostí, která se nachází v centru událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="34e29-143">Události, které nově přichází, se zařazují na konec této posloupnosti.</span><span class="sxs-lookup"><span data-stu-id="34e29-143">As newer events arrive, they are added to the end of this sequence.</span></span> <span data-ttu-id="34e29-144">Oddíl si lze představit jako „protokol transakcí“.</span><span class="sxs-lookup"><span data-stu-id="34e29-144">A partition can be thought of as a "commit log."</span></span>

![Event Hubs](./media/event-hubs-features/partition.png)

<span data-ttu-id="34e29-146">Služba Event Hubs uchovává data pro dobu nakonfigurované uchování, která platí pro všechny oddíly události rozbočovače.</span><span class="sxs-lookup"><span data-stu-id="34e29-146">Event Hubs retains data for a configured retention time that applies across all partitions in the event hub.</span></span> <span data-ttu-id="34e29-147">Události mizí na základě času, nemůžete je explicitně odstranit.</span><span class="sxs-lookup"><span data-stu-id="34e29-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="34e29-148">Vzhledem k tomu, že oddíly jsou nezávislé a obsahují vlastní posloupnost dat, často se jejich velikost mění různým tempem.</span><span class="sxs-lookup"><span data-stu-id="34e29-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Event Hubs](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="34e29-150">Počet oddílů je určený při vytvoření a musí být v rozsahu 2 až 32.</span><span class="sxs-lookup"><span data-stu-id="34e29-150">The number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="34e29-151">Počet oddílů není možné měnit. Proto je při nastavování počtu oddílů potřeba uvažovat z dlouhodobého hlediska.</span><span class="sxs-lookup"><span data-stu-id="34e29-151">The partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="34e29-152">Oddíly slouží jako mechanismus pro organizaci dat a souvisí se stupněm paralelismu příjmu dat, který vyžadují přijímací aplikace.</span><span class="sxs-lookup"><span data-stu-id="34e29-152">Partitions are a data organization mechanism that relates to the downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="34e29-153">Počet oddílů v centru událostí přímo souvisí s počtem souběžných čtenářů, které plánujete mít.</span><span class="sxs-lookup"><span data-stu-id="34e29-153">The number of partitions in an event hub directly relates to the number of concurrent readers you expect to have.</span></span> <span data-ttu-id="34e29-154">Pokud chcete použít vyšší počet oddílů než 32, kontaktujte tým služby Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="34e29-154">You can increase the number of partitions beyond 32 by contacting the Event Hubs team.</span></span>

<span data-ttu-id="34e29-155">Při oddíly identifikovat a mohou být odesílány přímo, odesílání přímo na oddíl se nedoporučuje.</span><span class="sxs-lookup"><span data-stu-id="34e29-155">While partitions are identifiable and can be sent to directly, sending directly to a partition is not recommended.</span></span> <span data-ttu-id="34e29-156">Místo toho můžete použít konstrukce vyšší úrovně, které představujeme v tématech věnovaných [zdroji událostí](#event-publishers) a [kapacitě](#capacity).</span><span class="sxs-lookup"><span data-stu-id="34e29-156">Instead, you can use higher level constructs introduced in the [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="34e29-157">Oddíly jsou naplněné posloupností dat událostí, která obsahují tělo události, uživatelem definovaný kontejner objektů a dat a různá metadata události, jako je třeba posun v rámci oddílu a pořadí v posloupnosti datového proudu.</span><span class="sxs-lookup"><span data-stu-id="34e29-157">Partitions are filled with a sequence of event data which contains the body of the event, a user-defined property bag, and metadata such as its offset in the partition and its number in the stream sequence.</span></span>

<span data-ttu-id="34e29-158">Další informace o oddílech a kompromisu mezi dostupností a spolehlivostí najdete v tématech [Průvodce programováním pro službu Event Hubs](event-hubs-programming-guide.md#partition-key) a [Dostupnost a konzistence ve službě Event Hubs](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="34e29-158">For more information about partitions and the trade-off between availability and reliability, see the [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and the [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="34e29-159">Klíč oddílu</span><span class="sxs-lookup"><span data-stu-id="34e29-159">Partition key</span></span>

<span data-ttu-id="34e29-160">[Klíč oddílu](event-hubs-programming-guide.md#partition-key) můžete použít k mapování příchozích dat událostí do konkrétních oddílů pro účely organizace dat.</span><span class="sxs-lookup"><span data-stu-id="34e29-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) to map incoming event data into specific partitions for the purpose of data organization.</span></span> <span data-ttu-id="34e29-161">Klíč oddílu je hodnota zadaná odesílatelem, která byla předaná do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-161">The partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="34e29-162">Zpracovává se pomocí statické hashovací funkce, která vytvoří přiřazení k oddílu.</span><span class="sxs-lookup"><span data-stu-id="34e29-162">It is processed through a static hashing function, which creates the partition assignment.</span></span> <span data-ttu-id="34e29-163">Pokud při publikování události nezadáte klíč oddílu, použije se přiřazení metodou kruhového dotazování.</span><span class="sxs-lookup"><span data-stu-id="34e29-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="34e29-164">Zdroj události zná jenom svůj klíč oddílu, a ne oddíl, do kterého se události publikují.</span><span class="sxs-lookup"><span data-stu-id="34e29-164">The event publisher is only aware of its partition key, not the partition to which the events are published.</span></span> <span data-ttu-id="34e29-165">Díky tomuto oddělení klíče a oddílu odesílatel toho nepotřebuje vědět o zpracování příjmu dat příliš mnoho.</span><span class="sxs-lookup"><span data-stu-id="34e29-165">This decoupling of key and partition insulates the sender from needing to know too much about the downstream processing.</span></span> <span data-ttu-id="34e29-166">Vhodným klíčem oddílu je jedinečná identita uživatele nebo zařízení, ale k seskupení souvisejících událostí do jednoho oddílu je možné použít i další atributy, například geografickou polohu.</span><span class="sxs-lookup"><span data-stu-id="34e29-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used to group related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="34e29-167">Tokeny SAS</span><span class="sxs-lookup"><span data-stu-id="34e29-167">SAS tokens</span></span>

<span data-ttu-id="34e29-168">Služba Event Hubs využívá *sdílené přístupové podpisy*, které jsou dostupné na úrovni oboru názvů a centra událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-168">Event Hubs uses *Shared Access Signatures*, which are available at the namespace and event hub level.</span></span> <span data-ttu-id="34e29-169">Token SAS, který se generuje z klíče SAS, je adresa URL, která je zašifrovaná pomocí hašovacího algoritmu SHA a zakódovaná ve specifickém formátu.</span><span class="sxs-lookup"><span data-stu-id="34e29-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="34e29-170">Služba Event Hubs může znovu vygenerovat hash kód pomocí názvu klíče (zásady) a tokenu, a ověřit tak odesílatele.</span><span class="sxs-lookup"><span data-stu-id="34e29-170">Using the name of the key (policy) and the token, Event Hubs can regenerate the hash and thus authenticate the sender.</span></span> <span data-ttu-id="34e29-171">Za normálních okolností se tokeny SAS pro zdroje událostí vytváří jen s oprávněními pro **odesílání** na konkrétní centrum událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="34e29-172">Tento mechanismus adresy URL a tokenu SAS slouží jako základ pro identifikaci zdroje, kterou představíme v části o zásadách zdroje.</span><span class="sxs-lookup"><span data-stu-id="34e29-172">This SAS token URL mechanism is the basis for publisher identification introduced in the publisher policy.</span></span> <span data-ttu-id="34e29-173">Další informace o práci s tokenem SAS naleznete v tématu o [ověřování u služby Service Bus pomocí sdíleného přístupového podpisu](../service-bus-messaging/service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="34e29-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="34e29-174">Příjemci událostí</span><span class="sxs-lookup"><span data-stu-id="34e29-174">Event consumers</span></span>

<span data-ttu-id="34e29-175">*Příjemcem událostí* je každá entita, která čte data událostí z centra událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="34e29-176">Všichni příjemci se ve službě Event Hubs připojují pomocí relace protokolu AMQP 1.0 a události se doručují tak, jak jsou postupně dostupné.</span><span class="sxs-lookup"><span data-stu-id="34e29-176">All Event Hubs consumers connect via the AMQP 1.0 session and events are delivered through the session as they become available.</span></span> <span data-ttu-id="34e29-177">Klient se na dostupnost dat nemusí dotazovat.</span><span class="sxs-lookup"><span data-stu-id="34e29-177">The client does not need to poll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="34e29-178">Skupiny příjemců</span><span class="sxs-lookup"><span data-stu-id="34e29-178">Consumer groups</span></span>

<span data-ttu-id="34e29-179">Mechanismus publikování/odebírání ve službě Event Hubs umožňují *skupiny příjemců*.</span><span class="sxs-lookup"><span data-stu-id="34e29-179">The publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="34e29-180">Skupina příjemců je zobrazení (stavu, pozice nebo posunu) celého centra událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="34e29-181">Skupiny příjemců poskytují různým přijímajícím aplikacím oddělená zobrazení datového proudu událostí a umožňují jim nezávisle číst datový proud vlastním tempem a s použitím vlastních posunů.</span><span class="sxs-lookup"><span data-stu-id="34e29-181">Consumer groups enable multiple consuming applications to each have a separate view of the event stream, and to read the stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="34e29-182">V architektuře zpracování datového proudu se každá aplikace pro příjem dat rovná skupině příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-182">In a stream processing architecture, each downstream application equates to a consumer group.</span></span> <span data-ttu-id="34e29-183">Pokud chcete zapisovat data událostí do dlouhodobého úložiště, pak je aplikace, která do úložiště zapisuje, skupinou příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-183">If you want to write event data to long-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="34e29-184">Komplexní zpracování událostí zase může provádět jiná, samostatná skupina příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="34e29-185">K oddílům můžete přistupovat pouze prostřednictvím skupiny příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="34e29-186">Může být maximálně 5 souběžných čtenářů na oddíl na skupinu uživatelů; ale **se doporučuje, zda je na oddíl na skupinu spotřebitelů pouze jeden aktivní příjemce**.</span><span class="sxs-lookup"><span data-stu-id="34e29-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="34e29-187">V centru událostí je vždy jedna výchozí skupina příjemců. Na standardní úrovni centra událostí můžete vytvořit až dvacet skupin příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-187">There is always a default consumer group in an event hub, and you can create up to 20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="34e29-188">Následují příklady konvenčního zápisu identifikátoru URI skupiny příjemců:</span><span class="sxs-lookup"><span data-stu-id="34e29-188">The following are examples of the consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="34e29-189">Následující obrázek znázorňuje architekturu zpracování datového proudu Event Hubs:</span><span class="sxs-lookup"><span data-stu-id="34e29-189">The following figure shows the Event Hubs stream processing architecture:</span></span>

![Event Hubs](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="34e29-191">Posuny datového proudu</span><span class="sxs-lookup"><span data-stu-id="34e29-191">Stream offsets</span></span>

<span data-ttu-id="34e29-192">*Posun* je pozice události v rámci oddílu.</span><span class="sxs-lookup"><span data-stu-id="34e29-192">An *offset* is the position of an event within a partition.</span></span> <span data-ttu-id="34e29-193">Posun si můžete představit jako kurzor na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="34e29-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="34e29-194">Posun je číslo bajtu události.</span><span class="sxs-lookup"><span data-stu-id="34e29-194">The offset is a byte numbering of the event.</span></span> <span data-ttu-id="34e29-195">Tento posun umožňuje příjemci události (čtenáři) určit bod v datovém proudu událostí, od kterého chce události začít číst.</span><span class="sxs-lookup"><span data-stu-id="34e29-195">This offset enables an event consumer (reader) to specify a point in the event stream from which they want to begin reading events.</span></span> <span data-ttu-id="34e29-196">Posun můžete zadat v podobě časového razítka nebo hodnoty posunu.</span><span class="sxs-lookup"><span data-stu-id="34e29-196">You can specify the offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="34e29-197">Příjemci si sami zodpovídají za uložení svých hodnot posunu mimo službu Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="34e29-197">Consumers are responsible for storing their own offset values outside of the Event Hubs service.</span></span> <span data-ttu-id="34e29-198">Každá událost v rámci oddílu zahrnuje posun.</span><span class="sxs-lookup"><span data-stu-id="34e29-198">Within a partition, each event includes an offset.</span></span>

![Event Hubs](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="34e29-200">Vytváření kontrolních bodů</span><span class="sxs-lookup"><span data-stu-id="34e29-200">Checkpointing</span></span>

<span data-ttu-id="34e29-201">*Vytváření kontrolních bodů* je proces, pomocí kterého čtenáři označují nebo potvrzují svou pozici v rámci posloupnosti událostí v oddílu.</span><span class="sxs-lookup"><span data-stu-id="34e29-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="34e29-202">Za vytváření kontrolních bodů zodpovídá příjemce. Proces probíhá na bázi oddílů ve skupinách příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-202">Checkpointing is the responsibility of the consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="34e29-203">Taková zodpovědnost znamená, že si každý čtenář oddílu v každé skupině příjemců musí udržovat přehled o své aktuální pozici v datovém proudu událostí a může informovat službu, když bude považovat datový proud za dokončený.</span><span class="sxs-lookup"><span data-stu-id="34e29-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in the event stream, and can inform the service when it considers the data stream complete.</span></span>

<span data-ttu-id="34e29-204">Pokud se čtenář z oddílu odpojí, začne při opětovném připojení číst od kontrolního bodu, který dříve zaslal poslední čtenář daného oddílu z této skupiny příjemců.</span><span class="sxs-lookup"><span data-stu-id="34e29-204">If a reader disconnects from a partition, when it reconnects it begins reading at the checkpoint that was previously submitted by the last reader of that partition in that consumer group.</span></span> <span data-ttu-id="34e29-205">Když se čtenář připojí, předá tento posun do centra událostí, a určí tak umístění, od kterého začne číst.</span><span class="sxs-lookup"><span data-stu-id="34e29-205">When the reader connects, it passes this offset to the event hub to specify the location at which to start reading.</span></span> <span data-ttu-id="34e29-206">Takto můžete vytváření kontrolních bodů použít jak k označování událostí jako „dokončených“, tak k zajištění ochrany pro případ, že nastane selhání u čtenářů spuštěných na různých strojích.</span><span class="sxs-lookup"><span data-stu-id="34e29-206">In this way, you can use checkpointing to both mark events as "complete" by downstream applications, and to provide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="34e29-207">Ke starším datům se je možné vrátit tak, že určíte nižší posun od tohoto kontrolního bodu.</span><span class="sxs-lookup"><span data-stu-id="34e29-207">It is possible to return to older data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="34e29-208">Díky tomuto mechanismu umožňuje vytváření kontrolních bodů nejen obnovu při selhání, ale i opakované přehrání datového proudu.</span><span class="sxs-lookup"><span data-stu-id="34e29-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="34e29-209">Běžné úlohy příjemce</span><span class="sxs-lookup"><span data-stu-id="34e29-209">Common consumer tasks</span></span>

<span data-ttu-id="34e29-210">Všichni příjemci Event Hubs připojení přes relaci protokolu AMQP 1.0, stav obousměrný komunikační kanál.</span><span class="sxs-lookup"><span data-stu-id="34e29-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="34e29-211">Každý oddíl má relaci AMQP 1.0, která usnadňuje transport událostí rozdělených do oddílů.</span><span class="sxs-lookup"><span data-stu-id="34e29-211">Each partition has an AMQP 1.0 session that facilitates the transport of events segregated by partition.</span></span>

#### <a name="connect-to-a-partition"></a><span data-ttu-id="34e29-212">Připojení k oddílu</span><span class="sxs-lookup"><span data-stu-id="34e29-212">Connect to a partition</span></span>

<span data-ttu-id="34e29-213">Při přímém připojení k oddílům se obvykle používá mechanismus „pronájmu“, aby se připojení čtenářů ke konkrétním oddílům koordinovala.</span><span class="sxs-lookup"><span data-stu-id="34e29-213">When connecting to partitions, it is common practice to use a leasing mechanism to coordinate reader connections to specific partitions.</span></span> <span data-ttu-id="34e29-214">Díky tomu je možné mít u každého oddílu ve skupině příjemců pouze jednoho aktivního čtenáře.</span><span class="sxs-lookup"><span data-stu-id="34e29-214">This way, it is possible for every partition in a consumer group to have only one active reader.</span></span> <span data-ttu-id="34e29-215">Použití kontrolních bodů, pronájem a správu čtenářů zjednodušuje použití třídy [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) pro klienty .NET.</span><span class="sxs-lookup"><span data-stu-id="34e29-215">Checkpointing, leasing, and managing readers are simplified by using the [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="34e29-216">EventProcessorHost je inteligentní agent příjemce.</span><span class="sxs-lookup"><span data-stu-id="34e29-216">The Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="34e29-217">Čtení událostí</span><span class="sxs-lookup"><span data-stu-id="34e29-217">Read events</span></span>

<span data-ttu-id="34e29-218">Po otevření připojení a relace AMQP 1.0 u konkrétního oddílu služba Event Hubs doručí události do klienta protokolu AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="34e29-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered to the AMQP 1.0 client by the Event Hubs service.</span></span> <span data-ttu-id="34e29-219">Tento mechanismus doručení umožňuje vyšší propustnost a nižší latenci než mechanismy založené na operaci Pull, jako je například metoda GET protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="34e29-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="34e29-220">Události se posílají klientovi a každá instance dat události obsahuje důležitá metadata, jako je posun a číslo posloupnosti, která se používají k zjednodušení vytváření kontrolních bodů v posloupnosti událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-220">As events are sent to the client, each event data instance contains important metadata such as the offset and sequence number that are used to facilitate checkpointing on the event sequence.</span></span>

<span data-ttu-id="34e29-221">Data události:</span><span class="sxs-lookup"><span data-stu-id="34e29-221">Event data:</span></span>
* <span data-ttu-id="34e29-222">Posun</span><span class="sxs-lookup"><span data-stu-id="34e29-222">Offset</span></span>
* <span data-ttu-id="34e29-223">Pořadové číslo</span><span class="sxs-lookup"><span data-stu-id="34e29-223">Sequence number</span></span>
* <span data-ttu-id="34e29-224">Tělo</span><span class="sxs-lookup"><span data-stu-id="34e29-224">Body</span></span>
* <span data-ttu-id="34e29-225">Uživatelské vlastnosti</span><span class="sxs-lookup"><span data-stu-id="34e29-225">User properties</span></span>
* <span data-ttu-id="34e29-226">Systémové vlastnosti</span><span class="sxs-lookup"><span data-stu-id="34e29-226">System properties</span></span>

<span data-ttu-id="34e29-227">Správa posunu je na vás.</span><span class="sxs-lookup"><span data-stu-id="34e29-227">It is your responsibility to manage the offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="34e29-228">Kapacita</span><span class="sxs-lookup"><span data-stu-id="34e29-228">Capacity</span></span>

<span data-ttu-id="34e29-229">Služba Event Hubs využívá vysoce škálovatelnou paralelní architekturu a při nastavování velikosti a škálování je potřeba zvážit několik klíčových aspektů.</span><span class="sxs-lookup"><span data-stu-id="34e29-229">Event Hubs has a highly scalable parallel architecture and there are several key factors to consider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="34e29-230">Jednotky propustnosti</span><span class="sxs-lookup"><span data-stu-id="34e29-230">Throughput units</span></span>

<span data-ttu-id="34e29-231">Kapacita propustnosti je ve službě Event Hubs řízená prostřednictvím *jednotek propustnosti*.</span><span class="sxs-lookup"><span data-stu-id="34e29-231">The throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="34e29-232">Jednotky propustnosti jsou předem zakoupené jednotky kapacity.</span><span class="sxs-lookup"><span data-stu-id="34e29-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="34e29-233">Jedna jednotka propustnosti zahrnuje následující kapacitu:</span><span class="sxs-lookup"><span data-stu-id="34e29-233">A single throughput unit includes the following capacity:</span></span>

* <span data-ttu-id="34e29-234">Příchozí data: Až 1 MB za sekundu nebo 1000 událostí za sekundu (podle toho, co nastane dříve)</span><span class="sxs-lookup"><span data-stu-id="34e29-234">Ingress: Up to 1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="34e29-235">Odchozí data: Až 2 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="34e29-235">Egress: Up to 2 MB per second</span></span>

<span data-ttu-id="34e29-236">Nad rámec kapacity zakoupených jednotek propustnosti je příjem příchozích dat omezen a vrátí se výjimka [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception).</span><span class="sxs-lookup"><span data-stu-id="34e29-236">Beyond the capacity of the purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="34e29-237">Odchozí data nezpůsobují takové výjimky, ale jsou omezená na objem přenosu dat, který poskytují zakoupené jednotky propustnosti.</span><span class="sxs-lookup"><span data-stu-id="34e29-237">Egress does not produce throttling exceptions, but is still limited to the capacity of the purchased throughput units.</span></span> <span data-ttu-id="34e29-238">Pokud se vám objevují výjimky související s frekvencí publikování nebo v budoucnu očekáváte větší objem odchozích dat, zkontrolujte, kolik jednotek propustnosti jste pro konkrétní obor názvů zakoupili.</span><span class="sxs-lookup"><span data-stu-id="34e29-238">If you receive publishing rate exceptions or are expecting to see higher egress, be sure to check how many throughput units you have purchased for the namespace.</span></span> <span data-ttu-id="34e29-239">Jednotky propustnosti můžete spravovat na **škálování** okno obory názvů v [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="34e29-239">You can manage throughput units on the **Scale** blade of the namespaces in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="34e29-240">Můžete také spravovat jednotky propustnosti programově pomocí [rozhraní API centra událostí](event-hubs-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="34e29-240">You can also manage throughput units programmatically using the [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="34e29-241">Jednotky propustnosti se kupují předem a účtují se po hodinách.</span><span class="sxs-lookup"><span data-stu-id="34e29-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="34e29-242">Zakoupené jednotky propustnosti se účtují minimálně za jednu hodinu.</span><span class="sxs-lookup"><span data-stu-id="34e29-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="34e29-243">Pro obor názvů služby Event Hubs můžete zakoupit až 20 jednotek propustnosti, které se sdílejí napříč všemi centry událostí v tomto oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="34e29-243">Up to 20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in the namespace.</span></span>

<span data-ttu-id="34e29-244">Další jednotky propustnosti je možné zakoupit v blocích po 20 jednotkách propustnosti (maximálně 100) po domluvě s pracovníky podpory Azure.</span><span class="sxs-lookup"><span data-stu-id="34e29-244">More throughput units can be purchased in blocks of 20, up to 100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="34e29-245">Navíc si můžete taky zakoupit bloky, které obsahují sto jednotek propustnosti.</span><span class="sxs-lookup"><span data-stu-id="34e29-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="34e29-246">Doporučujeme vám, že můžete vyrovnávat jednotky propustnosti a oddíly, abyste dosáhli optimálního škálování.</span><span class="sxs-lookup"><span data-stu-id="34e29-246">We recommend that you balance throughput units and partitions to achieve optimal scale.</span></span> <span data-ttu-id="34e29-247">Škálování jednoho oddílu dovoluje maximálně jednu jednotku propustnosti.</span><span class="sxs-lookup"><span data-stu-id="34e29-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="34e29-248">Počet jednotek propustnosti by měl být menší nebo roven počtu oddílů v centru událostí.</span><span class="sxs-lookup"><span data-stu-id="34e29-248">The number of throughput units should be less than or equal to the number of partitions in an event hub.</span></span>

<span data-ttu-id="34e29-249">Informace o cenách podrobné Event Hubs, najdete v části [cenách služby Event Hubs](https://azure.microsoft.com/pricing/details/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="34e29-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="34e29-250">Další kroky</span><span class="sxs-lookup"><span data-stu-id="34e29-250">Next steps</span></span>

<span data-ttu-id="34e29-251">Další informace o službě Event Hubs naleznete pod těmito odkazy:</span><span class="sxs-lookup"><span data-stu-id="34e29-251">For more information about Event Hubs, visit the following links:</span></span>

* <span data-ttu-id="34e29-252">Úvodní [kurz služby Event Hubs][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="34e29-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="34e29-253">Průvodce programováním pro službu Event Hubs</span><span class="sxs-lookup"><span data-stu-id="34e29-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="34e29-254">Dostupnost a konzistence ve službě Event Hubs</span><span class="sxs-lookup"><span data-stu-id="34e29-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="34e29-255">Nejčastější dotazy k Event Hubs</span><span class="sxs-lookup"><span data-stu-id="34e29-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="34e29-256">[Ukázky centra událostí][]</span><span class="sxs-lookup"><span data-stu-id="34e29-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Ukázky centra událostí]: https://github.com/Azure/azure-event-hubs/tree/master/samples
