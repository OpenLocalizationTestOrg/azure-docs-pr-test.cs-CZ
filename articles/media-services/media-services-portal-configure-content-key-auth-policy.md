---
title: "pomocí zásad autorizace klíče obsahu aaaConfigure hello portálu Azure | Microsoft Docs"
description: "Zjistěte, jak tooconfigure zásad autorizace pro klíč obsahu."
services: media-services
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.assetid: ee82a3fa-c34b-48f2-a108-8ba321f1691e
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako
ms.openlocfilehash: 157fb691b7f71f4889228817e1dc64555e327d48
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="configure-content-key-authorization-policy"></a><span data-ttu-id="e86dc-103">Nakonfigurujte zásady autorizace klíče obsahu</span><span class="sxs-lookup"><span data-stu-id="e86dc-103">Configure Content Key Authorization Policy</span></span>
[!INCLUDE [media-services-selector-content-key-auth-policy](../../includes/media-services-selector-content-key-auth-policy.md)]

## <a name="overview"></a><span data-ttu-id="e86dc-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="e86dc-104">Overview</span></span>
<span data-ttu-id="e86dc-105">Microsoft Azure Media Services umožňuje toodeliver MPEG-DASH, technologie Smooth Streaming a datové proudy HTTP-Live-Streaming (HLS) chráněné pomocí Standard AES (Advanced Encryption) (pomocí klíče 128bitové šifrování) nebo [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span><span class="sxs-lookup"><span data-stu-id="e86dc-105">Microsoft Azure Media Services enables you toodeliver MPEG-DASH, Smooth Streaming, and HTTP-Live-Streaming (HLS) streams protected with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span></span> <span data-ttu-id="e86dc-106">AMS taky umožňuje vám toodeliver datové proudy DASH šifrované pomocí Widevine DRM.</span><span class="sxs-lookup"><span data-stu-id="e86dc-106">AMS also enables you toodeliver DASH streams encrypted with Widevine DRM.</span></span> <span data-ttu-id="e86dc-107">Technologie PlayReady a Widevine jsou šifrované podle specifikace Common Encryption (ISO/IEC CENC 23001-7) hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-107">Both PlayReady and Widevine are encrypted per hello Common Encryption (ISO/IEC 23001-7 CENC) specification.</span></span>

<span data-ttu-id="e86dc-108">Služba Media Services také poskytuje **klíč nebo licenční služby doručení** ze kterých klienti můžete získat klíče AES nebo tooplay licence PlayReady nebo Widevine hello šifrovaný obsah.</span><span class="sxs-lookup"><span data-stu-id="e86dc-108">Media Services also provides a **Key/License Delivery Service** from which clients can obtain AES keys or PlayReady/Widevine licenses tooplay hello encrypted content.</span></span>

<span data-ttu-id="e86dc-109">Toto téma ukazuje, jak toouse hello zásady autorizace klíče obsahu Azure portálu tooconfigure hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-109">This topic shows how toouse hello Azure portal tooconfigure hello content key authorization policy.</span></span> <span data-ttu-id="e86dc-110">Hello klíč můžete později použít toodynamically šifrování vašeho obsahu.</span><span class="sxs-lookup"><span data-stu-id="e86dc-110">hello key can later be used toodynamically encrypt your content.</span></span> <span data-ttu-id="e86dc-111">Všimněte si, že teď můžete šifrovat hello následujících formátů streamování: HLS, MPEG DASH a technologie Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="e86dc-111">Note that currently you can encrypt hello following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="e86dc-112">Nelze zašifrovat progresivní stahování.</span><span class="sxs-lookup"><span data-stu-id="e86dc-112">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="e86dc-113">Když přehrávač vyžádá datový proud, který je nastaven toobe dynamicky šifrovat, šifrování klíče toodynamically hello nakonfigurované Media Services používá svůj obsah pomocí šifrování AES nebo DRM.</span><span class="sxs-lookup"><span data-stu-id="e86dc-113">When a player requests a stream that is set toobe dynamically encrypted, Media Services uses hello configured key toodynamically encrypt your content using AES or DRM encryption.</span></span> <span data-ttu-id="e86dc-114">datový proud hello toodecrypt, hello player bude požadovat hello klíč z hello doručení klíče služby.</span><span class="sxs-lookup"><span data-stu-id="e86dc-114">toodecrypt hello stream, hello player will request hello key from hello key delivery service.</span></span> <span data-ttu-id="e86dc-115">toodecide, jestli je uživatel hello autorizovaný tooget hello klíč, hello služba vyhodnocuje hello zásady autorizace, které jste zadali pro klíč hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-115">toodecide whether or not hello user is authorized tooget hello key, hello service evaluates hello authorization policies that you specified for hello key.</span></span>

<span data-ttu-id="e86dc-116">Plánování toohave více klíčů k obsahu nebo chcete toospecify **klíč nebo licenční služby doručení** URL než hello doručení klíče služby Media Services, pomocí sady Media Services .NET SDK nebo rozhraní REST API.</span><span class="sxs-lookup"><span data-stu-id="e86dc-116">If you plan toohave multiple content keys or want toospecify a **Key/License Delivery Service** URL other than hello Media Services key delivery service, use Media Services .NET SDK or REST APIs.</span></span>

[<span data-ttu-id="e86dc-117">Konfigurace obsahu zásad autorizace pro klíč pomocí sady Media Services .NET SDK</span><span class="sxs-lookup"><span data-stu-id="e86dc-117">Configure Content Key Authorization Policy using Media Services .NET SDK</span></span>](media-services-dotnet-configure-content-key-auth-policy.md)

[<span data-ttu-id="e86dc-118">Konfigurace obsahu zásad autorizace pro klíč pomocí Media Services REST API</span><span class="sxs-lookup"><span data-stu-id="e86dc-118">Configure Content Key Authorization Policy using Media Services REST API</span></span>](media-services-rest-configure-content-key-auth-policy.md)

### <a name="some-considerations-apply"></a><span data-ttu-id="e86dc-119">Musí být splněny určité předpoklady:</span><span class="sxs-lookup"><span data-stu-id="e86dc-119">Some considerations apply:</span></span>
* <span data-ttu-id="e86dc-120">Při vytvoření účtu AMS **výchozí** koncový bod streamování se přidá účet tooyour hello **Zastaveno** stavu.</span><span class="sxs-lookup"><span data-stu-id="e86dc-120">When your AMS account is created a **default** streaming endpoint is added  tooyour account in hello **Stopped** state.</span></span> <span data-ttu-id="e86dc-121">toostart streamování vašeho obsahu a proveďte výhod dynamického balení a dynamické šifrování, koncový bod streamování má toobe v hello **systémem** stavu.</span><span class="sxs-lookup"><span data-stu-id="e86dc-121">toostart streaming your content and take advantage of dynamic packaging and dynamic encryption, your streaming endpoint has toobe in hello **Running** state.</span></span> 
* <span data-ttu-id="e86dc-122">Váš asset musí obsahovat sadu s adaptivní přenosovou rychlostí soubory MP4 s rychlostmi nebo soubory technologie Smooth Streaming s adaptivní přenosovou rychlostí.</span><span class="sxs-lookup"><span data-stu-id="e86dc-122">Your asset must contain a set of adaptive bitrate MP4s or adaptive bitrate Smooth Streaming files.</span></span> <span data-ttu-id="e86dc-123">Další informace najdete v tématu [kódovat asset](media-services-encode-asset.md).</span><span class="sxs-lookup"><span data-stu-id="e86dc-123">For more information, see [Encode an asset](media-services-encode-asset.md).</span></span>
* <span data-ttu-id="e86dc-124">Hello služba pro přenos klíče ukládá do mezipaměti ContentKeyAuthorizationPolicy a související objekty (Možnosti zásad a omezení) pro 15 minut.</span><span class="sxs-lookup"><span data-stu-id="e86dc-124">hello Key Delivery service caches ContentKeyAuthorizationPolicy and its related objects (policy options and restrictions) for 15 minutes.</span></span>  <span data-ttu-id="e86dc-125">Pokud vytvoříte ContentKeyAuthorizationPolicy a zadejte toouse "Token" omezení, pak otestovat ji a potom aktualizovat zásady hello příliš "Otevřít" omezení, bude trvat přibližně 15 minut před hello zásad přepínače toohello "Otevřené" verze hello zásad.</span><span class="sxs-lookup"><span data-stu-id="e86dc-125">If you create a ContentKeyAuthorizationPolicy and specify toouse a “Token” restriction, then test it, and then update hello policy too“Open” restriction, it will take roughly 15 minutes before hello policy switches toohello “Open” version of hello policy.</span></span>

## <a name="how-to-configure-hello-key-authorization-policy"></a><span data-ttu-id="e86dc-126">Postupy: Konfigurace zásad autorizace pro klíč hello</span><span class="sxs-lookup"><span data-stu-id="e86dc-126">How to: configure hello key authorization policy</span></span>
<span data-ttu-id="e86dc-127">zásady autorizace pro klíč tooconfigure hello, vyberte hello **ochrana obsahu** stránky.</span><span class="sxs-lookup"><span data-stu-id="e86dc-127">tooconfigure hello key authorization policy, select hello **CONTENT PROTECTION** page.</span></span>

<span data-ttu-id="e86dc-128">Služba Media Services podporuje více způsobů ověřování uživatelů, kteří žádají o klíč.</span><span class="sxs-lookup"><span data-stu-id="e86dc-128">Media Services supports multiple ways of authenticating users who make key requests.</span></span> <span data-ttu-id="e86dc-129">zásady autorizace klíče obsahu Hello může mít **otevřete**, **tokenu**, nebo **IP** autorizace omezení (**IP** se dá nakonfigurovat s REST nebo .NET SDK).</span><span class="sxs-lookup"><span data-stu-id="e86dc-129">hello content key authorization policy can have **open**, **token**, or **IP** authorization restrictions (**IP** can be configured with REST or .NET SDK).</span></span>

### <a name="open-restriction"></a><span data-ttu-id="e86dc-130">Otevřete omezení</span><span class="sxs-lookup"><span data-stu-id="e86dc-130">Open restriction</span></span>
<span data-ttu-id="e86dc-131">Hello **otevřete** omezení znamená hello systému dodá hello tooanyone klíče, který vytváří klíče požadavek.</span><span class="sxs-lookup"><span data-stu-id="e86dc-131">hello **open** restriction means hello system will deliver hello key tooanyone who makes a key request.</span></span> <span data-ttu-id="e86dc-132">Toto omezení může být užitečná pro účely testování.</span><span class="sxs-lookup"><span data-stu-id="e86dc-132">This restriction might be useful for testing purposes.</span></span>

![Funkce OpenPolicy][open_policy]

### <a name="token-restriction"></a><span data-ttu-id="e86dc-134">Omezení s tokenem</span><span class="sxs-lookup"><span data-stu-id="e86dc-134">Token restriction</span></span>
<span data-ttu-id="e86dc-135">toochoose hello token omezený zásady, stiskněte klávesu hello **TOKENU** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="e86dc-135">toochoose hello token restricted policy, press hello **TOKEN** button.</span></span>

<span data-ttu-id="e86dc-136">Hello **tokenu** zásady omezení musí být doplněny tokenem vydaným podle **služby tokenů zabezpečení** (STS).</span><span class="sxs-lookup"><span data-stu-id="e86dc-136">hello **token** restricted policy must be accompanied by a token issued by a **Secure Token Service** (STS).</span></span> <span data-ttu-id="e86dc-137">Služba Media Services podporuje tokeny ve hello **jednoduchých webových tokenů** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) formátu a **webových tokenů JSON** formátu (JWT).</span><span class="sxs-lookup"><span data-stu-id="e86dc-137">Media Services supports tokens in hello **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format and **JSON Web Token** (JWT) format.</span></span> <span data-ttu-id="e86dc-138">Informace najdete v tématu [ověření pomocí tokenu JWT](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span><span class="sxs-lookup"><span data-stu-id="e86dc-138">For information, see [JWT token authentication](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span></span>

<span data-ttu-id="e86dc-139">Služba Media Services neposkytuje **zabezpečení tokenu služby**.</span><span class="sxs-lookup"><span data-stu-id="e86dc-139">Media Services does not provide **Secure Token Services**.</span></span> <span data-ttu-id="e86dc-140">Můžete vytvořit vlastní službu tokenů zabezpečení nebo využívat Microsoft Azure ACS tooissue tokeny.</span><span class="sxs-lookup"><span data-stu-id="e86dc-140">You can create a custom STS or leverage Microsoft Azure ACS tooissue tokens.</span></span> <span data-ttu-id="e86dc-141">Hello služby tokenů zabezpečení musí být nakonfigurované toocreate token podepsané hello zadaný klíč a vystavování deklarací identity, které jste zadali v konfiguraci omezení s tokenem hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-141">hello STS must be configured toocreate a token signed with hello specified key and issue claims that you specified in hello token restriction configuration.</span></span> <span data-ttu-id="e86dc-142">Hello doručení klíče služby Media Services vrátí hello šifrovací klíče toohello klienta Pokud hello token je platný a hello deklarace v tokenu hello odpovídají nakonfigurovaným pro klíč obsahu hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-142">hello Media Services key delivery service will return hello encryption key toohello client if hello token is valid and hello claims in hello token match those configured for hello content key.</span></span> <span data-ttu-id="e86dc-143">Další informace najdete v tématu [použití Azure ACS tooissue tokeny](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="e86dc-143">For more information, see [Use Azure ACS tooissue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

<span data-ttu-id="e86dc-144">Při konfiguraci hello **TOKENU** zásady omezení, musíte nastavit hodnoty pro **ověřovací klíč**, **vystavitele** a **cílovou skupinu**.</span><span class="sxs-lookup"><span data-stu-id="e86dc-144">When configuring hello **TOKEN** restricted policy, you must set values for **verification key**, **issuer** and **audience**.</span></span> <span data-ttu-id="e86dc-145">Hello ověření primární klíč obsahuje hello klíče, že byl podepsaný hello token, vystavitele hello zabezpečené tokenu služba, která vydá hello token.</span><span class="sxs-lookup"><span data-stu-id="e86dc-145">hello primary verification key contains hello key that hello token was signed with, issuer is hello secure token service that issues hello token.</span></span> <span data-ttu-id="e86dc-146">Cílová skupina Hello (někdy nazývané oboru) popisuje hello záměr hello tokenu nebo token hello prostředku hello povolí přístup k.</span><span class="sxs-lookup"><span data-stu-id="e86dc-146">hello audience (sometimes called scope) describes hello intent of hello token or hello resource hello token authorizes access to.</span></span> <span data-ttu-id="e86dc-147">Hello doručení klíče služby Media Services ověří, že tyto hodnoty v tokenu hello shodují s hodnotami hello v šabloně hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-147">hello Media Services key delivery service validates that these values in hello token match hello values in hello template.</span></span>

### <a name="playready"></a><span data-ttu-id="e86dc-148">PlayReady</span><span class="sxs-lookup"><span data-stu-id="e86dc-148">PlayReady</span></span>
<span data-ttu-id="e86dc-149">Při ochraně svůj obsah pomocí **PlayReady**, jeden hello věcí, je nutné toospecify ve vaší zásady autorizace je řetězec XML, který definuje šablona licence PlayReady hello.</span><span class="sxs-lookup"><span data-stu-id="e86dc-149">When protecting your content with **PlayReady**, one of hello things you need toospecify in your authorization policy is an XML string that defines hello PlayReady license template.</span></span> <span data-ttu-id="e86dc-150">Ve výchozím nastavení je nastavené hello následující zásady:</span><span class="sxs-lookup"><span data-stu-id="e86dc-150">By default, hello following policy is set:</span></span>

<span data-ttu-id="e86dc-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"><LicenseTemplates> <PlayReadyLicenseTemplate> <AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>povolené</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates></PlayReadyLicenseResponseTemplate></span><span class="sxs-lookup"><span data-stu-id="e86dc-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"> <LicenseTemplates> <PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates> </PlayReadyLicenseResponseTemplate></span></span>

<span data-ttu-id="e86dc-152">Můžete kliknout na hello **importovat zásady xml** tlačítko a zadejte jiný jazyk XML, který vyhovuje toohello XML schéma definované [zde](media-services-playready-license-template-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e86dc-152">You can click hello **import policy xml** button and provide a different XML which conforms toohello  XML Schema defined [here](media-services-playready-license-template-overview.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="e86dc-153">Další krok</span><span class="sxs-lookup"><span data-stu-id="e86dc-153">Next step</span></span>
<span data-ttu-id="e86dc-154">Prohlédněte si mapy kurzů k Media Services.</span><span class="sxs-lookup"><span data-stu-id="e86dc-154">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="e86dc-155">Poskytnutí zpětné vazby</span><span class="sxs-lookup"><span data-stu-id="e86dc-155">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[open_policy]: ./media/media-services-portal-configure-content-key-auth-policy/media-services-protect-content-with-open-restriction.png
[token_policy]: ./media/media-services-key-authorization-policy/media-services-protect-content-with-token-restriction.png

