---
title: "aaaUse Azure AD authentication tooaccess rozhraní API služby Azure Media Services se zbytkem | Microsoft Docs"
description: "Zjistěte, jak tooaccess rozhraní API služby Azure Media Services pomocí ověřování Azure Active Directory pomocí REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="18a44-103">Použití Azure AD authentication tooaccess hello rozhraní API služby Azure Media Services s REST</span><span class="sxs-lookup"><span data-stu-id="18a44-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="18a44-104">tým služby Azure Media Services Hello vydala Podpora ověřování Azure Active Directory (Azure AD) pro přístup k Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="18a44-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="18a44-105">Oznámeno také plány toodeprecate řízení přístupu Azure ověřování služby pro přístup k Media Services.</span><span class="sxs-lookup"><span data-stu-id="18a44-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="18a44-106">Protože každé předplatné služby Azure a každý účet Media Services je klient připojené tooan Azure AD, Azure AD Podpora ověřování přináší spoustu výhod, zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="18a44-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="18a44-107">Podrobnosti o této změny a migrace (Pokud používáte hello sady Media Services .NET SDK pro aplikaci), najdete v tématu hello následující příspěvky blogu a články:</span><span class="sxs-lookup"><span data-stu-id="18a44-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- [<span data-ttu-id="18a44-108">Azure Media Services ohlášen podpory pro Azure AD a vyřazení ověřování řízení přístupu</span><span class="sxs-lookup"><span data-stu-id="18a44-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="18a44-109">Přístup k Azure Media Services API pomocí ověřování Azure AD</span><span class="sxs-lookup"><span data-stu-id="18a44-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="18a44-110">Používání služby Azure AD authentication tooaccess rozhraní API služby Azure Media Services pomocí rozhraní Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="18a44-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="18a44-111">Začínáme s ověřováním Azure AD pomocí portálu Azure hello</span><span class="sxs-lookup"><span data-stu-id="18a44-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="18a44-112">Někteří zákazníci potřebovat toodevelop svá řešení Media Services v části hello následující omezení:</span><span class="sxs-lookup"><span data-stu-id="18a44-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="18a44-113">Používají programovací jazyk, který není rozhraní Microsoft .NET nebo C# nebo hello běhové prostředí není systému Windows.</span><span class="sxs-lookup"><span data-stu-id="18a44-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="18a44-114">Knihovny Azure AD, jako je například knihovny ověřování služby Active Directory nejsou k dispozici pro hello programovací jazyk nebo nelze použít pro jejich prostředí runtime.</span><span class="sxs-lookup"><span data-stu-id="18a44-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="18a44-115">Někteří zákazníci mají aplikace vyvinuté pomocí rozhraní REST API pro řízení přístupu, ověřování a přístup k Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="18a44-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="18a44-116">U těchto zákazníků potřebujete jenom hello způsob toouse REST API pro ověřování Azure AD a následné Azure Media Services přístup.</span><span class="sxs-lookup"><span data-stu-id="18a44-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="18a44-117">Je třeba toonot spoléhají na žádném z knihovny hello Azure AD nebo na hello sady Media Services .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="18a44-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="18a44-118">V tomto článku jsme popisují řešení a poskytují ukázkový kód pro tento scénář.</span><span class="sxs-lookup"><span data-stu-id="18a44-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="18a44-119">Protože kód hello je všech voláních REST API s žádná závislost na všechny Azure AD nebo knihovny Azure Media Services hello kódu můžete snadno být přeložené tooany ostatní programovací jazyk.</span><span class="sxs-lookup"><span data-stu-id="18a44-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="18a44-120">V současné době Media Services podporuje model ověřování služby Řízení přístupu Azure hello.</span><span class="sxs-lookup"><span data-stu-id="18a44-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="18a44-121">Řízení přístupu ověřování však bude zastaralá 1. června 2018.</span><span class="sxs-lookup"><span data-stu-id="18a44-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="18a44-122">Doporučujeme, abyste co nejdříve migraci model ověřování toohello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="18a44-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="18a44-123">Návrh</span><span class="sxs-lookup"><span data-stu-id="18a44-123">Design</span></span>

<span data-ttu-id="18a44-124">V tomto článku používáme hello následující návrhu ověřování a autorizace:</span><span class="sxs-lookup"><span data-stu-id="18a44-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="18a44-125">Povolení protokolu: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="18a44-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="18a44-126">OAuth 2.0 je standard zabezpečení webové, které pokrývá ověřování a autorizace.</span><span class="sxs-lookup"><span data-stu-id="18a44-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="18a44-127">Podporuje Google, Microsoft, Facebook a PayPal.</span><span class="sxs-lookup"><span data-stu-id="18a44-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="18a44-128">Ho byl ratifikován říjen 2012.</span><span class="sxs-lookup"><span data-stu-id="18a44-128">It was ratified October 2012.</span></span> <span data-ttu-id="18a44-129">Společnost Microsoft podporuje pevně OAuth 2.0 a OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="18a44-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="18a44-130">Obě tyto standardy jsou podporovány více služeb a knihovny klienta, včetně Azure Active Directory, Open Web Interface pro .NET (OWIN) Katana a knihovny Azure AD.</span><span class="sxs-lookup"><span data-stu-id="18a44-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="18a44-131">Udělit typu: Typ udělení pověření klienta.</span><span class="sxs-lookup"><span data-stu-id="18a44-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="18a44-132">Pověření klienta je jeden z typů čtyři grant hello v OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="18a44-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="18a44-133">Často se používá pro přístup k Azure AD Microsoft Graph API.</span><span class="sxs-lookup"><span data-stu-id="18a44-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="18a44-134">Režim ověřování: instanční objekt.</span><span class="sxs-lookup"><span data-stu-id="18a44-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="18a44-135">Hello jiných režim ověřování je uživatele nebo interaktivního ověřování.</span><span class="sxs-lookup"><span data-stu-id="18a44-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="18a44-136">Celkem čtyři služby nebo aplikace jsou součástí tok ověřování a autorizace hello Azure AD pro pomocí služby Media Services.</span><span class="sxs-lookup"><span data-stu-id="18a44-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="18a44-137">Hello aplikací a služeb a hello tok, jsou popsané v následující tabulce hello:</span><span class="sxs-lookup"><span data-stu-id="18a44-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="18a44-138">Typ aplikace</span><span class="sxs-lookup"><span data-stu-id="18a44-138">Application type</span></span> |<span data-ttu-id="18a44-139">Aplikace</span><span class="sxs-lookup"><span data-stu-id="18a44-139">Application</span></span> |<span data-ttu-id="18a44-140">Tok</span><span class="sxs-lookup"><span data-stu-id="18a44-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="18a44-141">Klient</span><span class="sxs-lookup"><span data-stu-id="18a44-141">Client</span></span> | <span data-ttu-id="18a44-142">Zákazník aplikace nebo řešení</span><span class="sxs-lookup"><span data-stu-id="18a44-142">Customer app or solution</span></span> | <span data-ttu-id="18a44-143">Tuto aplikaci (ve skutečnosti, jeho proxy) je zaregistrován v klientovi Azure AD hello, ve které hello Azure media předplatné a hello umístěn účet služby.</span><span class="sxs-lookup"><span data-stu-id="18a44-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="18a44-144">Hello instanční objekt hello registrované aplikace se pak udělí s vlastníkem nebo přispěvatelem rolí v hello řízení přístupu (IAM) účtu služby media hello.</span><span class="sxs-lookup"><span data-stu-id="18a44-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="18a44-145">Hello instanční objekt je reprezentována hello app ID a klienta tajný klíč klienta.</span><span class="sxs-lookup"><span data-stu-id="18a44-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="18a44-146">Zprostředkovatel identity (IDP)</span><span class="sxs-lookup"><span data-stu-id="18a44-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="18a44-147">Azure AD jako poskytovatel identity</span><span class="sxs-lookup"><span data-stu-id="18a44-147">Azure AD as IDP</span></span> | <span data-ttu-id="18a44-148">Azure AD jako hello IDP ověření objektu služby registrovaná aplikace Hello (ID klienta a tajný klíč klienta).</span><span class="sxs-lookup"><span data-stu-id="18a44-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="18a44-149">Toto ověřování se provádí interně a implicitně.</span><span class="sxs-lookup"><span data-stu-id="18a44-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="18a44-150">Jako tok přihlašovacích údajů klienta klient hello ověřen místo hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="18a44-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="18a44-151">Zabezpečení tokenu služby (STS) nebo OAuth server</span><span class="sxs-lookup"><span data-stu-id="18a44-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="18a44-152">Azure AD jako služba tokenů zabezpečení</span><span class="sxs-lookup"><span data-stu-id="18a44-152">Azure AD as STS</span></span> | <span data-ttu-id="18a44-153">Po ověření hello IDP (nebo OAuth serveru v podmínkách OAuth 2.0) na přístupový token nebo Token pro webové JSON (JWT) vydává Azure AD jako Server služby tokenů zabezpečení nebo OAuth pro prostředek střední vrstvy toohello přístupu: v našem případě hello koncový bod Media Services REST API.</span><span class="sxs-lookup"><span data-stu-id="18a44-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="18a44-154">Prostředek</span><span class="sxs-lookup"><span data-stu-id="18a44-154">Resource</span></span> | <span data-ttu-id="18a44-155">Rozhraní REST API služby Media Services</span><span class="sxs-lookup"><span data-stu-id="18a44-155">Media Services REST API</span></span> | <span data-ttu-id="18a44-156">Každé volání Media Services REST API je autorizovat přístupový token, který je vydán Azure AD jako služba tokenů zabezpečení nebo hello OAuth server.</span><span class="sxs-lookup"><span data-stu-id="18a44-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="18a44-157">Pokud spustíte hello ukázkový kód a zachycení token JWT nebo přístupový token, má hello JWT hello následující atributy:</span><span class="sxs-lookup"><span data-stu-id="18a44-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="18a44-158">Zde jsou hello mapování mezi hello atributů v hello JWT a hello čtyři aplikace nebo služby v předcházející tabulce hello:</span><span class="sxs-lookup"><span data-stu-id="18a44-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="18a44-159">Typ aplikace</span><span class="sxs-lookup"><span data-stu-id="18a44-159">Application type</span></span> |<span data-ttu-id="18a44-160">Aplikace</span><span class="sxs-lookup"><span data-stu-id="18a44-160">Application</span></span> |<span data-ttu-id="18a44-161">Atribut JWT</span><span class="sxs-lookup"><span data-stu-id="18a44-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="18a44-162">Klient</span><span class="sxs-lookup"><span data-stu-id="18a44-162">Client</span></span> |<span data-ttu-id="18a44-163">Zákazník aplikace nebo řešení</span><span class="sxs-lookup"><span data-stu-id="18a44-163">Customer app or solution</span></span> |<span data-ttu-id="18a44-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="18a44-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="18a44-165">ID klienta Hello aplikace zaregistrujete tooAzure AD v další části hello.</span><span class="sxs-lookup"><span data-stu-id="18a44-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="18a44-166">Zprostředkovatel identity (IDP)</span><span class="sxs-lookup"><span data-stu-id="18a44-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="18a44-167">Azure AD jako poskytovatel identity</span><span class="sxs-lookup"><span data-stu-id="18a44-167">Azure AD as IDP</span></span> |<span data-ttu-id="18a44-168">rozšíření IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="18a44-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="18a44-169">Hello GUID je klient ID Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="18a44-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="18a44-170">Každý klient má svou vlastní, jedinečné ID.</span><span class="sxs-lookup"><span data-stu-id="18a44-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="18a44-171">Zabezpečení tokenu služby (STS) nebo OAuth server</span><span class="sxs-lookup"><span data-stu-id="18a44-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="18a44-172">Azure AD jako služba tokenů zabezpečení</span><span class="sxs-lookup"><span data-stu-id="18a44-172">Azure AD as STS</span></span> | <span data-ttu-id="18a44-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="18a44-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="18a44-174">Hello GUID je klient ID Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="18a44-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="18a44-175">Prostředek</span><span class="sxs-lookup"><span data-stu-id="18a44-175">Resource</span></span> | <span data-ttu-id="18a44-176">Rozhraní REST API služby Media Services</span><span class="sxs-lookup"><span data-stu-id="18a44-176">Media Services REST API</span></span> |<span data-ttu-id="18a44-177">oblast: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="18a44-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="18a44-178">příjemce Hello nebo cílovou skupinou, kterou hello přístupový token.</span><span class="sxs-lookup"><span data-stu-id="18a44-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="18a44-179">Kroky pro instalaci</span><span class="sxs-lookup"><span data-stu-id="18a44-179">Steps for setup</span></span>

<span data-ttu-id="18a44-180">tooregister a nastavit aplikaci Azure AD pro ověřování Azure AD a tooobtain přístupový token pro volání hello koncový bod REST API služby Azure Media Services, dokončení hello následující kroky:</span><span class="sxs-lookup"><span data-stu-id="18a44-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="18a44-181">V hello [portál Azure classic](http://go.microsoft.com/fwlink/?LinkID=213885), registraci aplikace (například wzmediaservice) toohello Azure AD klient Azure AD (například microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="18a44-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="18a44-182">Nezáleží, jestli je zaregistrovaný jako webovou aplikaci nebo nativní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="18a44-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="18a44-183">Můžete také všechny přihlašovací adresa URL a adresa URL odpovědi (například http://wzmediaservice.com pro oba).</span><span class="sxs-lookup"><span data-stu-id="18a44-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="18a44-184">V hello [portál Azure classic](http://go.microsoft.com/fwlink/?LinkID=213885), přejděte toohello **konfigurace** kartě vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="18a44-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="18a44-185">Poznámka: hello **ID klienta**.</span><span class="sxs-lookup"><span data-stu-id="18a44-185">Note hello **client ID**.</span></span> <span data-ttu-id="18a44-186">Potom v části **klíče**, generovat **klíč klienta** (tajný klíč klienta).</span><span class="sxs-lookup"><span data-stu-id="18a44-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="18a44-187">Poznamenejte si hello tajný klíč klienta.</span><span class="sxs-lookup"><span data-stu-id="18a44-187">Take note of hello client secret.</span></span> <span data-ttu-id="18a44-188">Nebude se zobrazovat znovu.</span><span class="sxs-lookup"><span data-stu-id="18a44-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="18a44-189">V hello [portál Azure](http://ms.portal.azure.com), přejděte toohello účtu Media Services.</span><span class="sxs-lookup"><span data-stu-id="18a44-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="18a44-190">Vyberte hello **řízení přístupu** podokně (IAM).</span><span class="sxs-lookup"><span data-stu-id="18a44-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="18a44-191">Přidání nového člena, která obsahuje vlastníka hello nebo role Přispěvatel hello.</span><span class="sxs-lookup"><span data-stu-id="18a44-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="18a44-192">Pro objekt zabezpečení hello vyhledejte hello název aplikace, které zaregistrovanou v kroku 1 (v tomto příkladu wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="18a44-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="18a44-193">Informace o toocollect</span><span class="sxs-lookup"><span data-stu-id="18a44-193">Info toocollect</span></span>

<span data-ttu-id="18a44-194">tooprepare REST kódování, shromažďování hello následující body tooinclude data v hello kódu:</span><span class="sxs-lookup"><span data-stu-id="18a44-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="18a44-195">Azure AD jako koncový bod služby tokenů zabezpečení: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="18a44-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="18a44-196">Z tohoto koncového bodu se požaduje přístupový token JWT.</span><span class="sxs-lookup"><span data-stu-id="18a44-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="18a44-197">Kromě toho tooserving jako IDP, Azure AD slouží také jako služby tokenů zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="18a44-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="18a44-198">Azure AD vydá token JWT pro přístup k prostředkům (přístupový token).</span><span class="sxs-lookup"><span data-stu-id="18a44-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="18a44-199">JWT token má různé deklarace identity.</span><span class="sxs-lookup"><span data-stu-id="18a44-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="18a44-200">Azure Media Services REST API jako prostředek nebo cílové skupiny: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="18a44-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="18a44-201">ID klienta: Viz krok 2 v [kroky pro instalaci](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="18a44-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="18a44-202">Tajný klíč klienta: viz krok 2 v [kroky pro instalaci](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="18a44-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="18a44-203">Účet Media Services koncový bod REST API v hello následující formát:</span><span class="sxs-lookup"><span data-stu-id="18a44-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="18a44-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="18a44-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="18a44-205">Toto je hello koncového bodu, na které všechny Media Services REST API v aplikaci volání.</span><span class="sxs-lookup"><span data-stu-id="18a44-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="18a44-206">Například https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="18a44-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="18a44-207">Potom můžete umístit těchto pět parametry v souboru web.config nebo app.config toouse ve vašem kódu.</span><span class="sxs-lookup"><span data-stu-id="18a44-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="18a44-208">Ukázka kódu</span><span class="sxs-lookup"><span data-stu-id="18a44-208">Sample code</span></span>

<span data-ttu-id="18a44-209">Můžete najít hello ukázkový kód v [ověřování Azure AD pro Azure Media Services přístup: I přes REST API](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="18a44-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="18a44-210">Ukázkový kód Hello má dvě části:</span><span class="sxs-lookup"><span data-stu-id="18a44-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="18a44-211">Projekt knihovny DLL, který má všechny kód hello REST API pro Azure AD ověřování a autorizaci.</span><span class="sxs-lookup"><span data-stu-id="18a44-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="18a44-212">Je také metodu pro provedení volání toohello Media Services REST API koncový bod REST API, s hello přístupový token.</span><span class="sxs-lookup"><span data-stu-id="18a44-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="18a44-213">Klient test, konzoly, která zahájí ověřování Azure AD a volá jinou Media Services REST API.</span><span class="sxs-lookup"><span data-stu-id="18a44-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="18a44-214">Hello ukázkový projekt má tři funkce:</span><span class="sxs-lookup"><span data-stu-id="18a44-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="18a44-215">Ověření Azure AD pomocí pověření klienta hello udělit pomocí pouze hello REST API.</span><span class="sxs-lookup"><span data-stu-id="18a44-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="18a44-216">Azure Media Services přístup pomocí pouze hello REST API.</span><span class="sxs-lookup"><span data-stu-id="18a44-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="18a44-217">Rozhraní REST API Azure přístup k úložišti pomocí pouze hello (jako použité toocreate účet Media Services pomocí rozhraní REST API).</span><span class="sxs-lookup"><span data-stu-id="18a44-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="18a44-218">Kde je token obnovení hello?</span><span class="sxs-lookup"><span data-stu-id="18a44-218">Where is hello refresh token?</span></span>

<span data-ttu-id="18a44-219">Může požádat některé čtečky: kde je token obnovení hello?</span><span class="sxs-lookup"><span data-stu-id="18a44-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="18a44-220">Proč není zde použít token obnovení?</span><span class="sxs-lookup"><span data-stu-id="18a44-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="18a44-221">účelem Hello obnovovací token není toorefresh přístupový token.</span><span class="sxs-lookup"><span data-stu-id="18a44-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="18a44-222">Místo toho je navrženou toobypass ověřování nebo uživatele zásahu koncového uživatele a stále získat token platný přístup, když vyprší platnost tokenu starší.</span><span class="sxs-lookup"><span data-stu-id="18a44-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="18a44-223">Lepší název tokenu obnovení může být něco jako "Nepoužívat zpětný-registrace v token uživatele."</span><span class="sxs-lookup"><span data-stu-id="18a44-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="18a44-224">Pokud používáte hello tok (uživatelské jméno a heslo, které jednají jménem uživatele) poskytování autorizace OAuth 2.0, obnovovací token umožňuje získání tokenu pro přístup k obnovené bez zásahu uživatele.</span><span class="sxs-lookup"><span data-stu-id="18a44-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="18a44-225">Pro hello toku, který jsme popisují v tomto článku udělení pověření klienta OAuth 2.0, ale hello klienta funguje na vlastní účet.</span><span class="sxs-lookup"><span data-stu-id="18a44-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="18a44-226">Vůbec nepotřebujete zásahu uživatele, a server ověřování hello nepotřebuje příliš (a nebude) získáte token obnovení.</span><span class="sxs-lookup"><span data-stu-id="18a44-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="18a44-227">Pokud ladíte hello **GetUrlEncodedJWT** metoda, zjistíte, že má hello odpověď z koncového bodu token hello přístupový token, ale žádné token obnovení.</span><span class="sxs-lookup"><span data-stu-id="18a44-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="18a44-228">Další kroky</span><span class="sxs-lookup"><span data-stu-id="18a44-228">Next steps</span></span>

<span data-ttu-id="18a44-229">Začínáme s [nahrávání souborů tooyour účet](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="18a44-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
