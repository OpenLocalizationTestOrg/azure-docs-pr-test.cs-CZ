---
title: "aaaChild runbooky ve službě Azure Automation | Microsoft Docs"
description: "Popisuje hello různé metody pro spuštění sady runbook ve službě Azure Automation z jiného runbooku a sdílení informací mezi nimi."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: d3d06818d344b565d53cc4f4705b41dcfcf9a376
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="2cf6b-103">Podřízené runbooky ve službě Azure Automation</span><span class="sxs-lookup"><span data-stu-id="2cf6b-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="2cf6b-104">Je osvědčeným postupem v Azure Automation toowrite opakovaně použitelné modulární runbooky se samostatnou funkcí, které můžete používat ostatní runbooky.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-104">It is a best practice in Azure Automation toowrite reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="2cf6b-105">Nadřazená sada runbook často bude volat podřízené runbooky jeden nebo více tooperform požadované funkce.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-105">A parent runbook will often call one or more child runbooks tooperform required functionality.</span></span> <span data-ttu-id="2cf6b-106">Existují dva způsoby toocall podřízeného runbooku a jsou mezi nimi značné rozdíly, kterým byste měli porozumět, aby mohla určit, která bude vhodné pro různé scénáře.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-106">There are two ways toocall a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="2cf6b-107">Vyvolání podřízeného runbooku pomocí vložené spouštění</span><span class="sxs-lookup"><span data-stu-id="2cf6b-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="2cf6b-108">tooinvoke přiřazený runbook z jiného runbooku použijete název hello hello sady runbook a zadejte hodnoty jeho parametrů stejně, jako byste používali aktivitu nebo rutinu.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-108">tooinvoke a runbook inline from another runbook, you use hello name of hello runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="2cf6b-109">Všechny sady runbook v hello stejný účet služby Automation jsou k dispozici tooall ostatní toobe použití tímto způsobem.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-109">All runbooks in hello same Automation account are available tooall others toobe used in this manner.</span></span> <span data-ttu-id="2cf6b-110">Hello nadřazený runbook bude čekat hello podřízené sady runbook toocomplete před přesunutím toohello další řádek a jakýkoliv výstup se vrátí přímo toohello nadřazené.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-110">hello parent runbook will wait for hello child runbook toocomplete before moving toohello next line, and any output is returned directly toohello parent.</span></span>

<span data-ttu-id="2cf6b-111">Když vyvoláte přiřazený runbook běží ve stejné úloze jako nadřízený runbook hello hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-111">When you invoke a runbook inline, it runs in hello same job as hello parent runbook.</span></span> <span data-ttu-id="2cf6b-112">Budou existovat žádná informace v historii úlohy hello hello podřízeného runbooku, který byl spuštěn.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-112">There will be no indication in hello job history of hello child runbook that it ran.</span></span> <span data-ttu-id="2cf6b-113">Jakékoli výjimky a jakýkoli z podřízeného runbooku hello výstupní datový proud, budou přidruženy k nadřazené hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-113">Any exceptions and any stream output from hello child runbook will be associated with hello parent.</span></span> <span data-ttu-id="2cf6b-114">To má za následek méně úlohy a umožňuje jejich jednodušší tootrack a tootroubleshoot od jakékoli výjimky vyvolané hello podřízené sady runbook a všechny jejich výstup datového proudu jsou přidružené hello nadřazené úloze.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-114">This results in fewer jobs and makes them easier tootrack and tootroubleshoot since any exceptions thrown by hello child runbook and any of its stream output are associated with hello parent job.</span></span>

<span data-ttu-id="2cf6b-115">Při publikování runbooku musí být všechny podřízené runbooky, které volá již publikován.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="2cf6b-116">Je to proto, že Azure Automation vytvoří přidružení se všemi podřízenými runbooky při runbooku.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="2cf6b-117">Pokud nejsou, hello nadřízený runbook se objeví toopublish správně, ale vygeneruje výjimku, když je spuštěno.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-117">If they aren’t, hello parent runbook will appear toopublish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="2cf6b-118">V takovém případě můžete znovu publikovat nadřízený runbook hello v pořadí tooproperly odkaz hello podřízené runbooky.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-118">If this happens, you can republish hello parent runbook in order tooproperly reference hello child runbooks.</span></span> <span data-ttu-id="2cf6b-119">Pokud některý z podřízených runbooků hello jsou změnit, protože přidružení hello se již byly vytvořeny nepotřebujete toorepublish hello nadřízený runbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-119">You do not need toorepublish hello parent runbook if any of hello child runbooks are changed because hello association will have already been created.</span></span>

<span data-ttu-id="2cf6b-120">Hello parametry podřízeného runbooku s přiřazeným voláním můžou být jakéhokoli datového typu včetně složitých objektů a neexistuje žádný [serializace JSON](automation-starting-a-runbook.md#runbook-parameters) není při spuštění runbooku hello pomocí hello portálu pro správu Azure nebo s hello Rutina Start-AzureRmAutomationRunbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-120">hello parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start hello runbook using hello Azure Management Portal or with hello Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="2cf6b-121">Typy runbooků</span><span class="sxs-lookup"><span data-stu-id="2cf6b-121">Runbook types</span></span>
<span data-ttu-id="2cf6b-122">Typy, které můžete volat vzájemně:</span><span class="sxs-lookup"><span data-stu-id="2cf6b-122">Which types can call each other:</span></span>

* <span data-ttu-id="2cf6b-123">A [Powershellový runbook](automation-runbook-types.md#powershell-runbooks) a [grafické runbooky](automation-runbook-types.md#graphical-runbooks) můžete volat každý další vložené (obě jsou na základě prostředí PowerShell).</span><span class="sxs-lookup"><span data-stu-id="2cf6b-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="2cf6b-124">A [runbook pracovního postupu Powershellu](automation-runbook-types.md#powershell-workflow-runbooks) a runbooky pracovních postupů grafické prostředí PowerShell můžete volat každý další vložené (obě jsou na základě pracovního postupu Powershellu)</span><span class="sxs-lookup"><span data-stu-id="2cf6b-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="2cf6b-125">Hello typy prostředí PowerShell a hello, které typy pracovního postupu Powershellu nelze volat navzájem vložené a musí používat Start AzureRmAutomationRunbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-125">hello PowerShell types and hello PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="2cf6b-126">Při publikování pořadí věci:</span><span class="sxs-lookup"><span data-stu-id="2cf6b-126">When does publish order matter:</span></span>

* <span data-ttu-id="2cf6b-127">Hello publikovat pořadí záleží jenom sady runbook pro sady runbook PowerShell Workflow a pracovní postup grafické prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-127">hello publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="2cf6b-128">Při volání pomocí vložené spouštění podřízeného runbooku grafický nebo pracovního postupu Powershellu použijete právě hello název sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use hello name of hello runbook.</span></span>  <span data-ttu-id="2cf6b-129">Při volání podřízeného runbooku prostředí PowerShell, musí před jeho název s *.\\*  toospecify, který hello skript se nachází v místním adresáři hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* toospecify that hello script is located in hello local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="2cf6b-130">Příklad</span><span class="sxs-lookup"><span data-stu-id="2cf6b-130">Example</span></span>
<span data-ttu-id="2cf6b-131">Hello následující ukázka volá sadu runbook podřízené test, který přijímá tři parametry, komplexní objekt, celé číslo a logickou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-131">hello following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="2cf6b-132">výstup Hello hello podřízeného runbooku je přiřazený tooa proměnné.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-132">hello output of hello child runbook is assigned tooa variable.</span></span>  <span data-ttu-id="2cf6b-133">V takovém případě hello podřízeného runbooku je runbook pracovního postupu Powershellu</span><span class="sxs-lookup"><span data-stu-id="2cf6b-133">In this case, hello child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="2cf6b-134">Následuje hello příkladě pomocí prostředí PowerShell runbook jako podřízené hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-134">Following is hello same example using a PowerShell runbook as hello child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="2cf6b-135">Spouštění podřízeného runbooku pomocí rutiny</span><span class="sxs-lookup"><span data-stu-id="2cf6b-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="2cf6b-136">Můžete použít hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) rutiny toostart sady runbook, jak je popsáno v [toostart sady runbook pomocí prostředí Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="2cf6b-136">You can use hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet toostart a runbook as described in [toostart a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="2cf6b-137">Existují dva režimy použití pro tuto rutinu.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="2cf6b-138">V jednom režimu hello rutina vrátí id úlohy hello při vytvoření hello podřízené úlohy pro podřízený runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-138">In one mode, hello cmdlet returns hello job id as soon as hello child job is created for hello child runbook.</span></span>  <span data-ttu-id="2cf6b-139">V hello jiných režim, ve kterém povolíte zadáním hello **-počkejte** parametr rutiny hello bude odložena hello podřízené úlohy dokončení a vrátí výstup hello z podřízeného runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-139">In hello other mode, which you enable by specifying hello **-wait** parameter, hello cmdlet will wait until hello child job finishes and will return hello output from hello child runbook.</span></span>

<span data-ttu-id="2cf6b-140">Hello úloha z podřízeného runbooku spuštěná pomocí rutiny poběží v samostatné úloze z hello nadřízený runbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-140">hello job from a child runbook started with a cmdlet will run in a separate job from hello parent runbook.</span></span> <span data-ttu-id="2cf6b-141">To má za následek víc úloh než při vyvolání přiřazený runbook hello a dává je obtížnější tootrack.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-141">This results in more jobs than invoking hello runbook inline and makes them more difficult tootrack.</span></span> <span data-ttu-id="2cf6b-142">nadřazené Hello můžete spustit víc podřízených runbooků asynchronně bez čekání na každý toocomplete.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-142">hello parent can start multiple child runbooks asynchronously without waiting for each toocomplete.</span></span> <span data-ttu-id="2cf6b-143">Pro stejný druh paralelního provedení by volání přiřazených runbooků hello, hello muselo toouse hello [paralelní klíčové slovo](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="2cf6b-143">For that same kind of parallel execution calling hello child runbooks inline, hello parent runbook would need toouse hello [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="2cf6b-144">Parametry pro podřízený runbook spuštěný pomocí rutiny jsou uvedeny jako zatřiďovací tabulky, jak je popsáno v [parametry Runbooku](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="2cf6b-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="2cf6b-145">Můžete použít jenom jednoduché datové typy.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-145">Only simple data types can be used.</span></span> <span data-ttu-id="2cf6b-146">Pokud má hello runbook parametr s komplexního datového typu, pak ji musí být volaný jako přiřazený.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-146">If hello runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="2cf6b-147">Příklad</span><span class="sxs-lookup"><span data-stu-id="2cf6b-147">Example</span></span>
<span data-ttu-id="2cf6b-148">Hello následující příklad spouští podřízený runbook s parametry a potom počká pro něj toocomplete pomocí hello Start AzureRmAutomationRunbook-počkejte parametr.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-148">hello following example starts a child runbook with parameters and then waits for it toocomplete using hello Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="2cf6b-149">Po dokončení její výstup se shromažďují ze hello podřízené sady runbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-149">Once completed, its output is collected from hello child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="2cf6b-150">Porovnání metod pro volání podřízeného runbooku</span><span class="sxs-lookup"><span data-stu-id="2cf6b-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="2cf6b-151">Hello následující tabulka shrnuje hello rozdíly mezi hello dvě metody pro volání sady runbook z jiné sady runbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-151">hello following table summarizes hello differences between hello two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="2cf6b-152">Vložené</span><span class="sxs-lookup"><span data-stu-id="2cf6b-152">Inline</span></span> | <span data-ttu-id="2cf6b-153">Rutina</span><span class="sxs-lookup"><span data-stu-id="2cf6b-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="2cf6b-154">Úloha</span><span class="sxs-lookup"><span data-stu-id="2cf6b-154">Job</span></span> |<span data-ttu-id="2cf6b-155">Podřízené runbooky spuštěné ve stejné úloze jako nadřazený hello hello.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-155">Child runbooks run in hello same job as hello parent.</span></span> |<span data-ttu-id="2cf6b-156">Pro podřízený runbook hello se vytvoří samostatná úloha.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-156">A separate job is created for hello child runbook.</span></span> |
| <span data-ttu-id="2cf6b-157">Provádění</span><span class="sxs-lookup"><span data-stu-id="2cf6b-157">Execution</span></span> |<span data-ttu-id="2cf6b-158">Nadřízený runbook čeká hello podřízené sady runbook toocomplete než budete pokračovat.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-158">Parent runbook waits for hello child runbook toocomplete before continuing.</span></span> |<span data-ttu-id="2cf6b-159">Nadřízený runbook pokračuje hned po spuštění podřízeného runbooku *nebo* nadřízený runbook čeká hello podřízené úlohy toofinish.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for hello child job toofinish.</span></span> |
| <span data-ttu-id="2cf6b-160">Výstup</span><span class="sxs-lookup"><span data-stu-id="2cf6b-160">Output</span></span> |<span data-ttu-id="2cf6b-161">Nadřízený runbook může získat výstup přímo z podřízeného runbooku.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="2cf6b-162">Nadřízený runbook musí načíst výstup z úlohy podřízeného runbooku *nebo* nadřízený runbook může získat výstup přímo z podřízeného runbooku.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="2cf6b-163">Parametry</span><span class="sxs-lookup"><span data-stu-id="2cf6b-163">Parameters</span></span> |<span data-ttu-id="2cf6b-164">Hodnoty pro parametry podřízeného runbooku hello se zadávají samostatně a můžete použít jakéhokoli datového typu.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-164">Values for hello child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="2cf6b-165">Hodnoty pro hello podřízeného runbooku parametry musí zkombinovat do jedné zatřiďovací tabulky a může obsahovat jenom jednoduché, pole a objektu, že datové typy, které využívají serializaci JSON.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-165">Values for hello child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="2cf6b-166">Účet Automation</span><span class="sxs-lookup"><span data-stu-id="2cf6b-166">Automation Account</span></span> |<span data-ttu-id="2cf6b-167">Nadřízený runbook lze použít pouze podřízené sady runbook v hello stejný účet automation.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-167">Parent runbook can only use child runbook in hello same automation account.</span></span> |<span data-ttu-id="2cf6b-168">Nadřízený runbook můžete použít podřízeného runbooku z jakékoli účtu automation na hello stejného předplatného Azure a i jiné předplatné Pokud máte tooit připojení.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-168">Parent runbook can use child runbook from any automation account from hello same Azure subscription and even a different subscription if you have a connection tooit.</span></span> |
| <span data-ttu-id="2cf6b-169">Publikování</span><span class="sxs-lookup"><span data-stu-id="2cf6b-169">Publishing</span></span> |<span data-ttu-id="2cf6b-170">Podřízené sady runbook musí publikovat před publikováním nadřazené sady runbook.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="2cf6b-171">Podřízené sady runbook musí být publikovaný kdykoli před nadřízeného runbooku.</span><span class="sxs-lookup"><span data-stu-id="2cf6b-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="2cf6b-172">Další kroky</span><span class="sxs-lookup"><span data-stu-id="2cf6b-172">Next steps</span></span>
* [<span data-ttu-id="2cf6b-173">Spuštění sady runbook ve službě Azure Automation</span><span class="sxs-lookup"><span data-stu-id="2cf6b-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="2cf6b-174">Výstup a zprávy ve službě Azure Automation Runbooku</span><span class="sxs-lookup"><span data-stu-id="2cf6b-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)

