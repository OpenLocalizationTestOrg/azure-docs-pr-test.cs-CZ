---
title: "Spuštění sady Runbook ve službě Azure Automation | Microsoft Docs"
description: "Popisuje podrobnosti o způsobu zpracování sady runbook ve službě Azure Automation."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: 14f923e3f08dd3b286218ae56012ce14edcc4058
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="7cad8-103">Spuštění sady Runbook ve službě Azure Automation</span><span class="sxs-lookup"><span data-stu-id="7cad8-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="7cad8-104">Při spuštění sady runbook ve službě Azure Automation se vytvoří úloha.</span><span class="sxs-lookup"><span data-stu-id="7cad8-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="7cad8-105">Úloha je instance jednoho spuštění sady runbook.</span><span class="sxs-lookup"><span data-stu-id="7cad8-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="7cad8-106">Ke spuštění Každá úloha je přiřazen pracovního procesu automatizace Azure.</span><span class="sxs-lookup"><span data-stu-id="7cad8-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="7cad8-107">Když zaměstnanci jsou sdíleny více účtů Azure, úlohy z různých účtů Automation jsou izolované od sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="7cad8-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="7cad8-108">Můžete mít není řídit, přes které worker služby žádost o úlohu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-108">You do not have control over which worker services the request for your job.</span></span>  <span data-ttu-id="7cad8-109">Jedné sady runbook může mít několik úloh spuštěných současně.</span><span class="sxs-lookup"><span data-stu-id="7cad8-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="7cad8-110">Při zobrazení seznamu sad runbook na portálu Azure, zobrazí stav všech úloh, které byly zahájeny pro každou sadu runbook.</span><span class="sxs-lookup"><span data-stu-id="7cad8-110">When you view the list of runbooks in the Azure portal, it lists the status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="7cad8-111">Chcete-li sledovat stav každého z nich můžete zobrazit seznam úloh pro každou sadu runbook.</span><span class="sxs-lookup"><span data-stu-id="7cad8-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="7cad8-112">Popis stavy různé úlohy najdete v tématu [stavy úlohy](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="7cad8-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="7cad8-113">Následující diagram znázorňuje životní cyklus úlohy runbooku pro [grafické runbooky](automation-runbook-types.md#graphical-runbooks) a [runbooky pracovních postupů Powershellu](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="7cad8-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Stavy úlohy – pracovní postup prostředí PowerShell](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="7cad8-115">Následující diagram znázorňuje životní cyklus úlohy runbooku pro [Powershellové runbooky](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="7cad8-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Stavy úlohy - skript prostředí PowerShell](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="7cad8-117">Vaše úlohy mají přístup k prostředkům Azure tak, že připojení k předplatnému Azure.</span><span class="sxs-lookup"><span data-stu-id="7cad8-117">Your jobs have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="7cad8-118">Mají pouze přístup k prostředkům ve vašem datovém centru Pokud tyto prostředky jsou přístupné z veřejného cloudu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-118">They only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="7cad8-119">Stavy úlohy</span><span class="sxs-lookup"><span data-stu-id="7cad8-119">Job statuses</span></span>
<span data-ttu-id="7cad8-120">Následující tabulka popisuje různé stavy, které jsou u úlohy nastat.</span><span class="sxs-lookup"><span data-stu-id="7cad8-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="7cad8-121">Status</span><span class="sxs-lookup"><span data-stu-id="7cad8-121">Status</span></span> | <span data-ttu-id="7cad8-122">Popis</span><span class="sxs-lookup"><span data-stu-id="7cad8-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="7cad8-123">byla dokončena</span><span class="sxs-lookup"><span data-stu-id="7cad8-123">Completed</span></span> |<span data-ttu-id="7cad8-124">Úloha byla úspěšně dokončena.</span><span class="sxs-lookup"><span data-stu-id="7cad8-124">The job completed successfully.</span></span> |
| <span data-ttu-id="7cad8-125">Se nezdařilo</span><span class="sxs-lookup"><span data-stu-id="7cad8-125">Failed</span></span> |<span data-ttu-id="7cad8-126">Pro [pracovní postup prostředí PowerShell a grafický runbook](automation-runbook-types.md), sada runbook se nezdařilo zkompilovat.</span><span class="sxs-lookup"><span data-stu-id="7cad8-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="7cad8-127">Pro [skript prostředí PowerShell runbooky](automation-runbook-types.md), sada runbook se nepodařilo spustit nebo při provádění úlohy došlo k výjimce.</span><span class="sxs-lookup"><span data-stu-id="7cad8-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="7cad8-128">Chyba, čekání na prostředky</span><span class="sxs-lookup"><span data-stu-id="7cad8-128">Failed, waiting for resources</span></span> |<span data-ttu-id="7cad8-129">Úloha se nezdařila, protože bylo dosaženo [úloha dostatečný podíl](#fairshare) omezit třikrát a spustit z stejné kontrolního bodu nebo od začátku runbooku pokaždé, když.</span><span class="sxs-lookup"><span data-stu-id="7cad8-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="7cad8-130">Ve frontě</span><span class="sxs-lookup"><span data-stu-id="7cad8-130">Queued</span></span> |<span data-ttu-id="7cad8-131">Úloha čeká prostředky pracovního procesu automatizace připojí k dispozici, tak, aby jeho spuštění.</span><span class="sxs-lookup"><span data-stu-id="7cad8-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="7cad8-132">Spouštění</span><span class="sxs-lookup"><span data-stu-id="7cad8-132">Starting</span></span> |<span data-ttu-id="7cad8-133">Úloha byla přiřazena k pracovnímu procesu a v systému probíhá její spouštění.</span><span class="sxs-lookup"><span data-stu-id="7cad8-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="7cad8-134">Obnovení</span><span class="sxs-lookup"><span data-stu-id="7cad8-134">Resuming</span></span> |<span data-ttu-id="7cad8-135">V systému probíhá obnovování úlohy po bylo pozastaveno.</span><span class="sxs-lookup"><span data-stu-id="7cad8-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="7cad8-136">Běžící (Spuštěno)</span><span class="sxs-lookup"><span data-stu-id="7cad8-136">Running</span></span> |<span data-ttu-id="7cad8-137">Úloha je spuštěna.</span><span class="sxs-lookup"><span data-stu-id="7cad8-137">The job is running.</span></span> |
| <span data-ttu-id="7cad8-138">Spuštění, čekání na prostředky</span><span class="sxs-lookup"><span data-stu-id="7cad8-138">Running, waiting for resources</span></span> |<span data-ttu-id="7cad8-139">Úlohy byl odpojen, protože bylo dosaženo [úloha dostatečný podíl](#fairshare) limit.</span><span class="sxs-lookup"><span data-stu-id="7cad8-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="7cad8-140">Obnoví krátce od svého posledního kontrolního bodu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="7cad8-141">Zastaveno</span><span class="sxs-lookup"><span data-stu-id="7cad8-141">Stopped</span></span> |<span data-ttu-id="7cad8-142">Úloha byla zastavena uživatelem před dokončením.</span><span class="sxs-lookup"><span data-stu-id="7cad8-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="7cad8-143">Zastavování</span><span class="sxs-lookup"><span data-stu-id="7cad8-143">Stopping</span></span> |<span data-ttu-id="7cad8-144">V systému Probíhá zastavování úlohy.</span><span class="sxs-lookup"><span data-stu-id="7cad8-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="7cad8-145">pozastaveno</span><span class="sxs-lookup"><span data-stu-id="7cad8-145">Suspended</span></span> |<span data-ttu-id="7cad8-146">Úlohu pozastavil uživatel, systém nebo příkaz v runbooku.</span><span class="sxs-lookup"><span data-stu-id="7cad8-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="7cad8-147">Úlohu, která je pozastavená lze spustit znovu a pokračovat od svého posledního kontrolního bodu nebo od začátku runbooku, pokud nemá kontrolní body.</span><span class="sxs-lookup"><span data-stu-id="7cad8-147">A job that is suspended can be started again and resume from its last checkpoint or from the beginning of the runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="7cad8-148">Sada runbook bude pouze pozastaveno systémem, když dojde k výjimce.</span><span class="sxs-lookup"><span data-stu-id="7cad8-148">The runbook will only be suspended by the system when an exception occurs.</span></span> <span data-ttu-id="7cad8-149">Ve výchozím nastavení, je hodnotu ErrorActionPreference **pokračovat**, což znamená, že úloha neustále běží na chybu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-149">By default, ErrorActionPreference is set to **Continue**, meaning that the job keeps running on an error.</span></span> <span data-ttu-id="7cad8-150">Pokud je tato předvolba proměnné nastavená **Zastavit**, pak se pozastaví úlohu na chybu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-150">If this preference variable is set to **Stop**, then the job suspends on an error.</span></span>  <span data-ttu-id="7cad8-151">Platí pro [pracovní postup prostředí PowerShell a grafický runbook](automation-runbook-types.md) pouze.</span><span class="sxs-lookup"><span data-stu-id="7cad8-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="7cad8-152">Přechodem do režimu spánku</span><span class="sxs-lookup"><span data-stu-id="7cad8-152">Suspending</span></span> |<span data-ttu-id="7cad8-153">Systém se pokouší pozastavit úlohu na žádost uživatele.</span><span class="sxs-lookup"><span data-stu-id="7cad8-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="7cad8-154">Sada runbook dosažení následujícího kontrolního bodu předtím, než se může pozastavit.</span><span class="sxs-lookup"><span data-stu-id="7cad8-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="7cad8-155">Pokud již uplynul svého posledního kontrolního bodu, pak dokončí předtím, než se může pozastavit.</span><span class="sxs-lookup"><span data-stu-id="7cad8-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="7cad8-156">Platí pro [pracovní postup prostředí PowerShell a grafický runbook](automation-runbook-types.md) pouze.</span><span class="sxs-lookup"><span data-stu-id="7cad8-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="7cad8-157">Zobrazení stavu úlohy z portálu Azure</span><span class="sxs-lookup"><span data-stu-id="7cad8-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="7cad8-158">Můžete zobrazit souhrnnou stav všechny úlohy sady runbook nebo podrobnostem úlohu konkrétní sady runbook na portálu Azure nebo konfigurace integrace s pracovní prostor analýzy protokolů Microsoft Operations Management Suite (OMS) k předávání datové proudy úlohy stavu a úlohu runbook.</span><span class="sxs-lookup"><span data-stu-id="7cad8-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="7cad8-159">Další informace o integraci do OMS analýzy protokolů najdete v tématu [předávání zpráv o stavu úlohy a datové proudy úlohy z Automatizace analýzy protokolů (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="7cad8-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="7cad8-160">Souhrn úlohy sady runbook automatizace</span><span class="sxs-lookup"><span data-stu-id="7cad8-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="7cad8-161">Na pravé straně vybrané účtu Automation, můžete zobrazit souhrn všechny úlohy sady runbook pro vybraný účet automatizace v rámci **Statistika projektu** dlaždici.</span><span class="sxs-lookup"><span data-stu-id="7cad8-161">On the right of your selected Automation account, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="7cad8-162">![Dlaždice úlohy statistiky](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="7cad8-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="7cad8-163">Tuto dlaždici zobrazí počet a grafické vyjádření stavu úlohy pro všechny úlohy provést.</span><span class="sxs-lookup"><span data-stu-id="7cad8-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="7cad8-164">Kliknutím na dlaždici uvede **úlohy** okno, které obsahuje souhrnný seznam všech úloh provést, se stavem, provádění úlohy a spuštění a dokončení.</span><span class="sxs-lookup"><span data-stu-id="7cad8-164">Clicking on the tile presents the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="7cad8-165">![Okno úlohy účet Automation.](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="7cad8-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="7cad8-166">Můžete filtrovat seznam úloh tak, že vyberete **filtrujte úlohy** a filtr na konkrétní sady runbook, stav úlohy, nebo z rozevíracího seznamu, pro vyhledávání v rámci rozsahu datum a čas.</span><span class="sxs-lookup"><span data-stu-id="7cad8-166">You can filter the list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="7cad8-167">![Stav úlohy filtru](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="7cad8-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="7cad8-168">Alternativně můžete zobrazit podrobnosti souhrnu úlohy pro konkrétní sadu runbook tak, že vyberete dané sady runbook z **Runbooky** okno v účtu Automation a potom vyberte **úlohy** dlaždici.</span><span class="sxs-lookup"><span data-stu-id="7cad8-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="7cad8-169">To představuje **úlohy** okně a z ní můžete kliknutím na záznam úlohy zobrazíte její podrobnosti a výstup.</span><span class="sxs-lookup"><span data-stu-id="7cad8-169">This presents the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="7cad8-170">![Okno úlohy účet Automation.](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="7cad8-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="7cad8-171">Souhrn úlohy</span><span class="sxs-lookup"><span data-stu-id="7cad8-171">Job Summary</span></span>
<span data-ttu-id="7cad8-172">Můžete zobrazit seznam všech úloh, které byly vytvořeny pro konkrétní runbook a jejich aktuální stav.</span><span class="sxs-lookup"><span data-stu-id="7cad8-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="7cad8-173">Můžete filtrovat tento seznam podle stavu úlohy a rozsahu dat poslední změny úlohy.</span><span class="sxs-lookup"><span data-stu-id="7cad8-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="7cad8-174">Chcete-li zobrazit její podrobné informace a výstup, klikněte na název úlohy.</span><span class="sxs-lookup"><span data-stu-id="7cad8-174">To view its detailed information and output, click on the name of a job.</span></span> <span data-ttu-id="7cad8-175">V podrobném zobrazení úlohy obsahuje hodnoty parametrů runbooku poskytnuté pro tuto úlohu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="7cad8-176">Chcete-li zobrazit úlohy pro sady runbook můžete použít následující kroky.</span><span class="sxs-lookup"><span data-stu-id="7cad8-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="7cad8-177">Na portálu Azure vyberte **automatizace** a pak vyberte název účtu Automation.</span><span class="sxs-lookup"><span data-stu-id="7cad8-177">In the Azure portal, select **Automation** and then select the name of an Automation account.</span></span>
2. <span data-ttu-id="7cad8-178">Z centra, vyberte **sady Runbook** a pak na **Runbooky** okno Vybrat sadu runbook ze seznamu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-178">From the hub, select **Runbooks** and then on the **Runbooks** blade select a runbook from the list.</span></span>
3. <span data-ttu-id="7cad8-179">V okně pro vybranou sadu runbook, klikněte na **úlohy** dlaždici.</span><span class="sxs-lookup"><span data-stu-id="7cad8-179">On the blade for the selected runbook, click the **Jobs** tile.</span></span>
4. <span data-ttu-id="7cad8-180">Klikněte na jednu z úloh v seznamu a v okně podrobností úlohy runbooku můžete zobrazit podrobnosti a výstup.</span><span class="sxs-lookup"><span data-stu-id="7cad8-180">Click on one of the jobs in the list and on the runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="7cad8-181">Načtení stavu úlohy pomocí prostředí Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="7cad8-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="7cad8-182">Můžete použít [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) načíst úlohy vytvořené pro runbook a podrobnosti konkrétní úlohy.</span><span class="sxs-lookup"><span data-stu-id="7cad8-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="7cad8-183">Pokud runbook spustíte pomocí prostředí Windows PowerShell [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), a vrátí se výsledná úloha.</span><span class="sxs-lookup"><span data-stu-id="7cad8-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns the resulting job.</span></span> <span data-ttu-id="7cad8-184">Použití [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)výstupu výstupu úlohy.</span><span class="sxs-lookup"><span data-stu-id="7cad8-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="7cad8-185">Následující vzorové příkazy načíst poslední úlohu ukázkového runbooku a zobrazí její stav, hodnoty pro parametry runbooku a výstup z úlohy.</span><span class="sxs-lookup"><span data-stu-id="7cad8-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="7cad8-186">Úloha dostatečný podíl</span><span class="sxs-lookup"><span data-stu-id="7cad8-186">Fair share</span></span>
<span data-ttu-id="7cad8-187">Aby bylo možné sdílet prostředky se všechny sady runbook v cloudu, bude Azure Automation dočasně uvolnit všechny úlohy, až po spuštění tři hodiny.</span><span class="sxs-lookup"><span data-stu-id="7cad8-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="7cad8-188">Během této doby úlohy pro [sady runbook pomocí prostředí PowerShell](automation-runbook-types.md#powershell-runbooks) se zastaví a nebude ji restartovat.</span><span class="sxs-lookup"><span data-stu-id="7cad8-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="7cad8-189">Zobrazí stav úlohy **Zastaveno**.</span><span class="sxs-lookup"><span data-stu-id="7cad8-189">The job status shows **Stopped**.</span></span>  <span data-ttu-id="7cad8-190">Tento typ runbooku se vždy restartuje od začátku, vzhledem k tomu, že nepodporují kontrolní body.</span><span class="sxs-lookup"><span data-stu-id="7cad8-190">This type of runbook is always restarted from the beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="7cad8-191">[Založené na prostředí PowerShell pracovního postupu sady runbook](automation-runbook-types.md#powershell-workflow-runbooks) bude pokračovat znovu od jejich poslední [kontrolního bodu](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="7cad8-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="7cad8-192">Po spuštění tři hodiny, bude úloha sady runbook pozastaví služba a její stav ukazuje **spuštěna, čekání na prostředky**.</span><span class="sxs-lookup"><span data-stu-id="7cad8-192">After running three hours, the runbook job will be suspended by the service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="7cad8-193">Jakmile izolovaném prostoru k dispozici, sady runbook bude automaticky restartována služba Automation a obnoví z posledního kontrolního bodu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-193">When a sandbox becomes available, the runbook will be automatically restarted by the Automation service and resumes from the last checkpoint.</span></span>  <span data-ttu-id="7cad8-194">To je normální chování pracovního postupu Powershellu pozastavit nebo restartovat.</span><span class="sxs-lookup"><span data-stu-id="7cad8-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="7cad8-195">Pokud sada runbook znovu překročí tři hodiny modulu runtime, postup se opakuje, až třikrát.</span><span class="sxs-lookup"><span data-stu-id="7cad8-195">If the runbook again exceeds three hours of runtime, the process repeats, up to three times.</span></span>  <span data-ttu-id="7cad8-196">Po třetím restartování, pokud sada runbook ještě nebyla dokončena v tři hodiny, pak úloha sady runbook se nezdařilo a stav úlohy zobrazuje **se nezdařilo, čekání na prostředky**.</span><span class="sxs-lookup"><span data-stu-id="7cad8-196">After the third restart, if the runbook still has not completed in three hours, then the runbook job is failed, and the job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="7cad8-197">V takovém případě se zobrazí následující výjimky s chybou.</span><span class="sxs-lookup"><span data-stu-id="7cad8-197">In this case, you receive the following exception with the failure.</span></span>

<span data-ttu-id="7cad8-198">*Úlohu nelze pokračovat, systémem, protože bylo opakovaně vyloučeno z stejné kontrolního bodu. Zkontrolujte prosím, že vaše sada Runbook neprovádí bez zachování stavu náročná operace.*</span><span class="sxs-lookup"><span data-stu-id="7cad8-198">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="7cad8-199">Toto je chránit službu z runbooky, které běží hodně dlouho bez dokončení, protože nejsou možné provádět další kontrolního bodu bez odpojení znovu.</span><span class="sxs-lookup"><span data-stu-id="7cad8-199">This is to protect the service from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="7cad8-200">Pokud sada runbook nemá žádné kontrolní body nebo úlohy nedosáhla první kontrolní bod před odpojení, pak znovu od začátku.</span><span class="sxs-lookup"><span data-stu-id="7cad8-200">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it restarts from the beginning.</span></span>  

<span data-ttu-id="7cad8-201">Při vytváření sady runbook, měli byste zajistit, že dobu pro spuštění všech aktivit mezi dvěma kontrolních bodů není delší než 3 hodiny.</span><span class="sxs-lookup"><span data-stu-id="7cad8-201">When you create a runbook, you should ensure that the time to run any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="7cad8-202">Budete muset přidat kontrolní body do runbooku zajistit, že není dosažení maximálního počtu tři hodiny nebo rozdělit dlouho spuštěná operace.</span><span class="sxs-lookup"><span data-stu-id="7cad8-202">You may need to add checkpoints to your runbook to ensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="7cad8-203">Vaše sada runbook může například provádět nové indexování velké databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="7cad8-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="7cad8-204">Pokud tato jedné operace neskončí v rámci limitu úloha dostatečný podíl, jsou úlohy uvolněna a spuštěno znovu od začátku.</span><span class="sxs-lookup"><span data-stu-id="7cad8-204">If this single operation does not complete within the fair share limit, then the job are unloaded and restarted from the beginning.</span></span> <span data-ttu-id="7cad8-205">V takovém případě by měl rozdělit operaci nové indexování do více kroků, například novou indexaci jedna tabulka současně a vložit kontrolní bod po každé operaci, aby úloha mohly pokračovat po poslední operaci dokončit.</span><span class="sxs-lookup"><span data-stu-id="7cad8-205">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7cad8-206">Další kroky</span><span class="sxs-lookup"><span data-stu-id="7cad8-206">Next steps</span></span>
* <span data-ttu-id="7cad8-207">Další informace o různých metod, které můžete použít ke spuštění sady runbook ve službě Azure Automation najdete v tématu [spuštění sady runbook ve službě Azure Automation](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="7cad8-207">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

