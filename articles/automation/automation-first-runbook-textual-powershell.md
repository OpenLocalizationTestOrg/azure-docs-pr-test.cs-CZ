---
title: "aaaMy první Powershellový runbook ve službě Azure Automation | Microsoft Docs"
description: "Kurz vás provede hello vytvořením, otestováním a publikováním jednoduchého Powershellového runbooku."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "azure powershell, kurz k powershellovému scriptu, automatizace powershellu"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;sngun
ms.openlocfilehash: abff94abe666cd8423c35b970b4162ba9247bcf8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-runbook"></a><span data-ttu-id="6b4a1-104">Můj první powershellový runbook</span><span class="sxs-lookup"><span data-stu-id="6b4a1-104">My first PowerShell runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="6b4a1-105">Grafický</span><span class="sxs-lookup"><span data-stu-id="6b4a1-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="6b4a1-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="6b4a1-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="6b4a1-107">Pracovní postup PowerShellu</span><span class="sxs-lookup"><span data-stu-id="6b4a1-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="6b4a1-108">Tento kurz vás provede procesem vytvoření hello [Powershellový runbook](automation-runbook-types.md#powershell-runbooks) ve službě Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-108">This tutorial walks you through hello creation of a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) in Azure Automation.</span></span> <span data-ttu-id="6b4a1-109">Začneme s jednoduchým runbookem, který jsme otestujeme a publikujeme a současně vám vysvětlíme, jak tootrack hello stav úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-109">We start with a simple runbook that we test and publish while we explain how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="6b4a1-110">Potom jsme upravit hello runbook tooactually spravovat prostředky Azure, v takovém případě spuštění virtuálního počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="6b4a1-111">A konečně provedeme hello runbook robustnější přidáním parametrů.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-111">Lastly, we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="6b4a1-112">Požadavky</span><span class="sxs-lookup"><span data-stu-id="6b4a1-112">Prerequisites</span></span>
<span data-ttu-id="6b4a1-113">toocomplete tohoto kurzu budete potřebovat hello následující:</span><span class="sxs-lookup"><span data-stu-id="6b4a1-113">toocomplete this tutorial, you need hello following:</span></span>

* <span data-ttu-id="6b4a1-114">Předplatné Azure.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-114">Azure subscription.</span></span> <span data-ttu-id="6b4a1-115">Pokud nemáte účet, můžete si [aktivovat výhody pro předplatitele MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) nebo <a href="/pricing/free-account/" target="_blank">[si zaregistrovat bezplatný účet](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="6b4a1-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="6b4a1-116">[Účet Automation](automation-sec-configure-azure-runas-account.md) toohold hello sady runbook a ověření tooAzure prostředky.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="6b4a1-117">Tento účet musí mít oprávnění toostart a zastavit hello virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="6b4a1-118">Virtuální počítač Azure.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-118">An Azure virtual machine.</span></span> <span data-ttu-id="6b4a1-119">Počítač zastavíme a spustíme, proto to nesmí být produkční virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="6b4a1-120">Krok 1 – vytvoření nového runbooku</span><span class="sxs-lookup"><span data-stu-id="6b4a1-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="6b4a1-121">Začneme vytvořením jednoduchého runbooku, který zobrazí hello text *Hello, World*.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="6b4a1-122">V hello portálu Azure otevřete účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="6b4a1-123">stránka účtu Automation Hello nabízí rychlý přehled o hello prostředky v rámci tohoto účtu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="6b4a1-124">Už byste tam měli mít nějaké prostředky.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-124">You should already have some assets.</span></span> <span data-ttu-id="6b4a1-125">Většina z nich jsou moduly hello, které jsou automaticky obsažené v novém účtu Automation.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="6b4a1-126">Měli byste také mít hello asset přihlašovacích údajů, který je uvedený v hello [požadavky](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="6b4a1-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="6b4a1-127">Klikněte na tlačítko hello **Runbooky** dlaždice tooopen hello seznamu sad runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-127">Click hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="6b4a1-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span></span>  
3. <span data-ttu-id="6b4a1-129">Vytvořit novou sadu runbook kliknutím na tlačítko hello **přidat runbook** tlačítko a potom **vytvořit nový runbook**.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-129">Create a new runbook by clicking hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="6b4a1-130">Pojmenujte hello hello runbook *MyFirstRunbook-PowerShell*.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-130">Give hello runbook hello name *MyFirstRunbook-PowerShell*.</span></span>
5. <span data-ttu-id="6b4a1-131">V tomto případě vytvoříme toocreate [Powershellový runbook](automation-runbook-types.md#powershell-runbooks) tak vyberte **prostředí Powershell** pro **typ Runbooku**.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-131">In this case, we're going toocreate a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) so select **Powershell** for **Runbook type**.</span></span><br><br> <span data-ttu-id="6b4a1-132">![Typ runbooku](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span></span>  
6. <span data-ttu-id="6b4a1-133">Klikněte na tlačítko **vytvořit** toocreate hello sady runbook a otevřete hello textový editor.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="6b4a1-134">Krok 2 – přidání kódu toohello runbook</span><span class="sxs-lookup"><span data-stu-id="6b4a1-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="6b4a1-135">Můžete buď typ kódu přímo do runbooku hello, nebo můžete vybrat rutiny, runbooky a prostředky z hello prvku knihovna a je přidali toohello sada runbook se všemi souvisejícími parametry.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="6b4a1-136">V tomto návodu budeme zadejte přímo v hello runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-136">For this walkthrough, we type directly in hello runbook.</span></span>

1. <span data-ttu-id="6b4a1-137">Náš runbook je aktuálně prázdný, zadejte text *Write-Output "Hello World"*.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-137">Our runbook is currently empty, type *Write-Output "Hello World."*.</span></span><br><br> <span data-ttu-id="6b4a1-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span></span>  
2. <span data-ttu-id="6b4a1-139">Uložte hello runbook kliknutím **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-139">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="6b4a1-140">![Tlačítko Uložit](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-140">![Save Button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span></span>  

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="6b4a1-141">Krok 3: Test hello runbook</span><span class="sxs-lookup"><span data-stu-id="6b4a1-141">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="6b4a1-142">Před publikováním runbooku toomake hello je k dispozici v produkčním prostředí, chceme tootest ho toomake jisti, že funguje správně.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-142">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="6b4a1-143">Když runbook testujete, spustíte jeho  verzi **Koncept** a interaktivně zobrazíte jeho výsledek.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-143">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="6b4a1-144">Klikněte na tlačítko **testovací podokno** tooopen hello testovací podokno.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-144">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="6b4a1-145">![Testovací podokno](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span></span>  
2. <span data-ttu-id="6b4a1-146">Klikněte na tlačítko **spustit** toostart hello testu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-146">Click **Start** toostart hello test.</span></span> <span data-ttu-id="6b4a1-147">To by měl být hello povolit pouze možnost.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-147">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="6b4a1-148">Vytvoří se [úloha runbooku](automation-runbook-execution.md) a její stav se zobrazí.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-148">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="6b4a1-149">Stav úlohy Hello spustí jako *zařazeno ve frontě* označující, že se čeká na pracovního procesu runbooku v toocome cloudu hello k dispozici.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-149">hello job status starts as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="6b4a1-150">Pak ji přesune příliš*počáteční* když pracovní proces hello úlohy a potom *systémem* při hello runbook skutečně spustí.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-150">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="6b4a1-151">Po dokončení úlohy runbooku hello se zobrazí jeho výstup.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-151">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="6b4a1-152">V našem případě bychom měli vidět text *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-152">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="6b4a1-153">![Výstup testovacího podokna](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-153">![Test Pane Output](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span></span>  
5. <span data-ttu-id="6b4a1-154">Zavřete hello testovací podokno tooreturn toohello plátno.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-154">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="6b4a1-155">Krok 4 – publikování a spuštění sady runbook hello</span><span class="sxs-lookup"><span data-stu-id="6b4a1-155">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="6b4a1-156">Hello runbooku, který jsme vytvořili je stále v režimu konceptu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-156">hello runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="6b4a1-157">Potřebujeme toopublish ho před jeho spuštěním v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-157">We need toopublish it before we can run it in production.</span></span>  <span data-ttu-id="6b4a1-158">Když runbook publikujete, můžete přepsat hello stávající publikované verze hello koncept.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-158">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span>  <span data-ttu-id="6b4a1-159">V našem případě nemáme publikovanou verzi ještě vzhledem k tomu, že právě vytvořený hello runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-159">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="6b4a1-160">Klikněte na tlačítko **publikovat** toopublish hello runbook a potom **Ano** po zobrazení výzvy.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-160">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="6b4a1-161">![Tlačítko Publikovat](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-161">![Publish button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span></span>  
2. <span data-ttu-id="6b4a1-162">Pokud se posunete levém tooview hello runbook v hello **sady Runbook** podokně se teď zobrazí **stav vytváření** z **publikováno**.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-162">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="6b4a1-163">Přejděte zpět toohello správné tooview hello podokno **MyFirstRunbook-PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-163">Scroll back toohello right tooview hello pane for **MyFirstRunbook-PowerShell**.</span></span>  
   <span data-ttu-id="6b4a1-164">Hello možnosti v horní části hello nám umožňují toostart hello runbook, zobrazení hello runbooku, naplánování toostart někdy v budoucnu hello nebo vytvořit [webhooku](automation-webhooks.md) , může být spuštění prostřednictvím volání protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-164">hello options across hello top allow us toostart hello runbook, view hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="6b4a1-165">Jsme má toostart hello runbook, proto klikněte na **spustit** a pak klikněte na **Ok** po otevření okna spuštění Runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-165">We want toostart hello runbook, so click **Start** and then click **Ok** when hello Start Runbook blade opens.</span></span><br><br> <span data-ttu-id="6b4a1-166">![Tlačítko Spustit](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-166">![Start button](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span></span><br>    
5. <span data-ttu-id="6b4a1-167">Podokno úlohy je otevřené hello úlohy runbooku, který jsme vytvořili.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-167">A job pane is opened for hello runbook job that we created.</span></span> <span data-ttu-id="6b4a1-168">Toto podokno můžeme zavřít, ale v takovém případě jsme ho můžete nechat otevřený, abychom mohli sledovat průběh úlohy hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-168">We can close this pane, but in this case we leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="6b4a1-169">Stav úlohy Hello se zobrazuje v **Souhrn úlohy** a odpovídá hello stavy, které jsme viděli při testování runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-169">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="6b4a1-170">![Souhrn úlohy](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-170">![Job Summary](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span></span><br>  
7. <span data-ttu-id="6b4a1-171">Jednou hello stav runbooku zobrazí *dokončeno*, klikněte na tlačítko **výstup**.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-171">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="6b4a1-172">Otevře se podokno výstup Hello a My uvidíme náš *Hello, World*.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-172">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="6b4a1-173">![Výstup úlohy](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-173">![Job Output](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span></span><br> 
8. <span data-ttu-id="6b4a1-174">V podokně výstupu zavřít hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-174">Close hello Output pane.</span></span>
9. <span data-ttu-id="6b4a1-175">Klikněte na tlačítko **všechny protokoly** podokno datové proudy hello tooopen hello úloze runbooku.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-175">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="6b4a1-176">Bychom měli vidět jenom *Hello, World* v hello výstupní datový proud, ale můžou se zobrazit jiné datové proudy z úlohy runbooku, například podrobný nebo Chyba Pokud hello runbook zapisuje toothem.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-176">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="6b4a1-177">![Všechny protokoly](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-177">![All Logs](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span></span><br>   
10. <span data-ttu-id="6b4a1-178">Zavřete podokno datové proudy hello a hello úlohy tooreturn toohello MyFirstRunbook-PowerShell podokno.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-178">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook-PowerShell pane.</span></span>
11. <span data-ttu-id="6b4a1-179">Klikněte na tlačítko **úlohy** tooopen hello podokno úlohy pro tuto sadu runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-179">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="6b4a1-180">Seznam všech hello úloh, které tento runbook vytvořil.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-180">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="6b4a1-181">Bychom měli vidět jenom jednu úlohu, protože jsme ji spustili jenom hello úlohy jednou.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-181">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="6b4a1-182">![Seznam úloh](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-182">![Job List](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span></span>  
12. <span data-ttu-id="6b4a1-183">Tuto úlohu můžete kliknout na tooopen hello stejné podokno úlohy, které jsme zobrazili při spuštění sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-183">You can click this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="6b4a1-184">To vám umožní toogo zpět v čas a zobrazení hello podrobnosti libovolné úlohy, který byl vytvořen pro konkrétní runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-184">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="6b4a1-185">Krok 5 – Přidání ověřování toomanage prostředků Azure</span><span class="sxs-lookup"><span data-stu-id="6b4a1-185">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="6b4a1-186">Runbook jsme otestovali a publikovali, ale zatím nedělá nic užitečného.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-186">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="6b4a1-187">Chceme toohave ho spravovat prostředky Azure.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-187">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="6b4a1-188">Nebude moct toodo, že v případě, pokud máme ověřit pomocí hello přihlašovacích údajů, které jsou podle tooin hello [požadavky](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="6b4a1-188">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="6b4a1-189">Provedeme to pomocí hello **Add-AzureRmAccount** rutiny.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-189">We do that with hello **Add-AzureRmAccount** cmdlet.</span></span>

1. <span data-ttu-id="6b4a1-190">Hello otevřete textový editor kliknutím **upravit** v podokně MyFirstRunbook-PowerShell hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-190">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-PowerShell pane.</span></span><br><br> <span data-ttu-id="6b4a1-191">![Úprava runbooku](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-191">![Edit Runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span></span><br>   
2. <span data-ttu-id="6b4a1-192">Společnost Microsoft nepotřebuje hello **Write-Output** řádek už, proto pokračujte a odstraňte ji.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-192">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="6b4a1-193">Zadejte nebo zkopírujte a vložte následující kód, který zpracovává hello ověřování pomocí účtu spustit v Automation jako hello:</span><span class="sxs-lookup"><span data-stu-id="6b4a1-193">Type or copy and paste hello following code that handles hello authentication with your Automation Run As account:</span></span>
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
   <br>
4. <span data-ttu-id="6b4a1-194">Klikněte na tlačítko **testovací podokno** tak, aby abychom mohli otestovat sadu runbook hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-194">Click **Test pane** so that we can test hello runbook.</span></span>
5. <span data-ttu-id="6b4a1-195">Klikněte na tlačítko **spustit** toostart hello testu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-195">Click **Start** toostart hello test.</span></span> <span data-ttu-id="6b4a1-196">Po jeho dokončení byste měli obdržet výstup podobný toohello následující, zobrazení základní informace z vašeho účtu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-196">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="6b4a1-197">Tím se potvrzuje, že hello přihlašovací údaje jsou platné.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-197">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="6b4a1-198">![Ověření](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-198">![Authenticate](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="6b4a1-199">Krok 6 – přidání kódu toostart virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="6b4a1-199">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="6b4a1-200">Teď, když runbook umí ověřit tooour předplatné Azure, můžeme začít spravovat prostředky.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-200">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="6b4a1-201">Přidáme příkaz toostart virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-201">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="6b4a1-202">Můžete vybrat jakýkoli virtuální počítač ve vašem předplatném Azure a teď provedeme závislé tento název v hello runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-202">You can pick any virtual machine in your Azure subscription, and for now we will hardcode that name in hello runbook.</span></span>

1. <span data-ttu-id="6b4a1-203">Po *Add-AzureRmAccount*, typ *Start-AzureRmVM-Name 'VMName' - ResourceGroupName 'NameofResourceGroup'* poskytnutí hello název a název skupiny prostředků toostart hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-203">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   ```
   <br>
2. <span data-ttu-id="6b4a1-204">Uložte hello runbook a pak klikněte na tlačítko **testovací podokno** tak, aby abychom mohli otestovat.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-204">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="6b4a1-205">Klikněte na tlačítko **spustit** toostart hello testu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-205">Click **Start** toostart hello test.</span></span> <span data-ttu-id="6b4a1-206">Po jeho dokončení zkontrolujte, zda text hello virtuálního počítače byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-206">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="6b4a1-207">Krok 7 – přidání runbook toohello služby vstupní parametr</span><span class="sxs-lookup"><span data-stu-id="6b4a1-207">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="6b4a1-208">Náš runbook aktuálně spouští hello virtuální počítač, který jsme pevně kódovaný v hello runbook, ale by být užitečnější, pokud bychom při spuštění runbooku hello zadat hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-208">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="6b4a1-209">Teď přidáme vstupní parametry toohello runbook tooprovide této funkce.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-209">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="6b4a1-210">Přidání parametrů pro *VMName* a *ResourceGroupName* toohello runbook a použijte tyto proměnné s hello **Start-AzureRmVM** rutiny jako v následujícím příkladu hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-210">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>  
   
   ```
   Param(
    [string]$VMName,
    [string]$ResourceGroupName
   )
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   ```
   <br>
2. <span data-ttu-id="6b4a1-211">Uložte hello runbook a otevřete testovací podokno hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-211">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="6b4a1-212">Můžete teď poskytujete hodnoty pro hello dvou vstupních proměnných, které se používají v testu hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-212">You can now provide values for hello two input variables that are used in hello test.</span></span>
3. <span data-ttu-id="6b4a1-213">Zavřít hello testovací podokno.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-213">Close hello Test pane.</span></span>
4. <span data-ttu-id="6b4a1-214">Klikněte na tlačítko **publikovat** toopublish hello nové verze sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-214">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="6b4a1-215">Zastavte hello virtuální počítač, který jste spustili v předchozím kroku hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-215">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="6b4a1-216">Klikněte na tlačítko **spustit** toostart hello runbook.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-216">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="6b4a1-217">Typ v hello **VMName** a **ResourceGroupName** budete toostart hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-217">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="6b4a1-218">![Předání parametru](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-218">![Pass Parameter](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="6b4a1-219">Po dokončení hello runbook, zkontrolujte, zda text hello virtuálního počítače byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-219">When hello runbook completes, check that hello virtual machine was started.</span></span>

## <a name="differences-from-powershell-workflow"></a><span data-ttu-id="6b4a1-220">Odlišnosti od runbooků pracovních postupů PowerShellu</span><span class="sxs-lookup"><span data-stu-id="6b4a1-220">Differences from PowerShell Workflow</span></span>
<span data-ttu-id="6b4a1-221">Powershellové runbooky mají hello stejný životní cyklus, možnosti a správu jako runbooky pracovních postupů Powershellu, ale existují určité rozdíly a omezení:</span><span class="sxs-lookup"><span data-stu-id="6b4a1-221">PowerShell runbooks have hello same lifecycle, capabilities, and management as PowerShell Workflow runbooks but there are some differences and limitations:</span></span>

1. <span data-ttu-id="6b4a1-222">Powershellové runbooky běží rychlé porovnání tooPowerShell runbooky pracovních postupů, protože neobsahují kompilační krok.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-222">PowerShell runbooks run fast compared tooPowerShell Workflow runbooks as they don’t have compilation step.</span></span>
2. <span data-ttu-id="6b4a1-223">Runbooky pracovních postupů Powershellu podporují kontrolní body. pomocí kontrolních bodů, runbooky pracovních postupů Powershellu může pokračovat z libovolného bodu v runbooku hello, zatímco Powershellové runbooky můžou pokračovat jenom od začátku hello.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-223">PowerShell Workflow runbooks support checkpoints, using checkpoints, PowerShell Workflow runbooks can resume from any point in hello runbook whereas PowerShell runbooks can only resume from hello beginning.</span></span>
3. <span data-ttu-id="6b4a1-224">Runbooky pracovních postupů PowerShellu podporují paralelní a sériové provádění, zatímco powershellové runbooky můžou příkazy provádět jenom sériově.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-224">PowerShell Workflow runbooks support parallel and serial execution whereas PowerShell runbooks can only execute commands serially.</span></span>
4. <span data-ttu-id="6b4a1-225">V runboocích pracovních postupů PowerShellu může mít aktivita, příkaz nebo blok skriptu svoje vlastní prostředí runspace, zatímco v powershellovém runbooku běží všechno ve skriptu v jednom prostředí runspace.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-225">In a PowerShell Workflow runbook, an activity, a command, or a script block can have its own runspace whereas in a PowerShell runbook, everything in a script runs in a single runspace.</span></span> <span data-ttu-id="6b4a1-226">Existují také určité [syntaktické rozdíly](https://technet.microsoft.com/magazine/dn151046.aspx) mezi nativním powershellovým runbookem a runbookem pracovního postupu PowerShellu.</span><span class="sxs-lookup"><span data-stu-id="6b4a1-226">There are also some [syntactic differences](https://technet.microsoft.com/magazine/dn151046.aspx) between a native PowerShell runbook and a PowerShell Workflow runbook.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6b4a1-227">Další kroky</span><span class="sxs-lookup"><span data-stu-id="6b4a1-227">Next steps</span></span>
* <span data-ttu-id="6b4a1-228">tooget kroky s grafickými runbooky najdete v části [Můj první grafický runbook](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-228">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="6b4a1-229">tooget kroky s runbooky pracovních postupů Powershellu, najdete v části [Můj první runbook pracovního postupu Powershellu](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-229">tooget started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>
* <span data-ttu-id="6b4a1-230">tooknow Další informace o typech runbooků, jejich výhody a omezení, najdete v části [typy runbooků ve službě Azure Automation](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-230">tooknow more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="6b4a1-231">Další informace o funkci podpory powershellových skriptů najdete v článku [Nativní podpora powershellových skriptů ve službě Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="6b4a1-231">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>

