---
title: "aaaForward tooOMS data úlohy automatizace Azure Log Analytics | Microsoft Docs"
description: "Tento článek ukazuje, jak datové proudy toosend úlohy sady runbook a stav úlohy správy a další aspekty toodeliver tooMicrosoft Operations Management Suite Log Analytics."
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: e78b6c6677d6502711ce828e2d32b7a91922ae26
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-toolog-analytics-oms"></a><span data-ttu-id="6158b-103">Předávání zpráv o stavu úlohy a datové proudy úlohy z automatizace tooLog Analytics (OMS)</span><span class="sxs-lookup"><span data-stu-id="6158b-103">Forward job status and job streams from Automation tooLog Analytics (OMS)</span></span>
<span data-ttu-id="6158b-104">Automatizace můžete odeslat runbook úlohy stavu a úlohu datové proudy tooyour Microsoft Operations Management Suite (OMS) pracovní prostor analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="6158b-104">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="6158b-105">Protokoly úlohy a datové proudy úlohy jsou viditelné v hello portál Azure nebo v prostředí PowerShell pro jednotlivé úlohy a to vám umožní tooperform jednoduché šetření.</span><span class="sxs-lookup"><span data-stu-id="6158b-105">Job logs and job streams are visible in hello Azure portal, or with PowerShell, for individual jobs and this allows you tooperform simple investigations.</span></span> <span data-ttu-id="6158b-106">Pomocí analýzy protokolů můžete nyní:</span><span class="sxs-lookup"><span data-stu-id="6158b-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="6158b-107">Pohled na vaše úlohy automatizace</span><span class="sxs-lookup"><span data-stu-id="6158b-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="6158b-108">Aktivační událost e-mailem nebo výstrahy podle runbook stav úlohy (například chybných nebo pozastavených)</span><span class="sxs-lookup"><span data-stu-id="6158b-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="6158b-109">Zápis pokročilými dotazy napříč vaše datové proudy úlohy</span><span class="sxs-lookup"><span data-stu-id="6158b-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="6158b-110">Vazbu mezi úlohy v účtech Automation</span><span class="sxs-lookup"><span data-stu-id="6158b-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="6158b-111">Vizualizace historii úlohy v čase</span><span class="sxs-lookup"><span data-stu-id="6158b-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="6158b-112">Požadavky a důležité informace o nasazení</span><span class="sxs-lookup"><span data-stu-id="6158b-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="6158b-113">toostart odesílání vašeho automatizace v protokolech tooLog Analytics, budete potřebovat:</span><span class="sxs-lookup"><span data-stu-id="6158b-113">toostart sending your Automation logs tooLog Analytics, you need:</span></span>

1. <span data-ttu-id="6158b-114">Hello listopadu 2016 nebo novější vydání [prostředí Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="6158b-114">hello November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="6158b-115">Pracovní prostor analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="6158b-115">A Log Analytics workspace.</span></span> <span data-ttu-id="6158b-116">Další informace najdete v tématu [začít pracovat s analýzy protokolů](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="6158b-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="6158b-117">Hello ResourceId pro váš účet Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-117">hello ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="6158b-118">toofind hello ResourceId pro váš účet Azure Automation a pracovní prostor analýzy protokolů, spusťte hello následující prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="6158b-118">toofind hello ResourceId for your Azure Automation account and Log Analytics workspace, run hello following PowerShell:</span></span>

```powershell
# Find hello ResourceId for hello Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find hello ResourceId for hello Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="6158b-119">Pokud máte více účtů Automation nebo pracovní prostory, v hello výstup hello předchozích příkazů, najde hello *název* potřebovat tooconfigure a zkopírujte hodnotu hello *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="6158b-119">If you have multiple Automation accounts, or workspaces, in hello output of hello preceding commands, find hello *Name* you need tooconfigure and copy hello value for *ResourceId*.</span></span>

<span data-ttu-id="6158b-120">Pokud potřebujete toofind hello *název* účtu Automation v hello portálu Azure vyberte svůj účet Automation z hello **účet Automation** a vyberte **všechna nastavení**.</span><span class="sxs-lookup"><span data-stu-id="6158b-120">If you need toofind hello *Name* of your Automation account, in hello Azure portal select your Automation account from hello **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="6158b-121">Z hello **všechna nastavení** okno, v části **nastavení účtu** vyberte **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="6158b-121">From hello **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="6158b-122">V hello **vlastnosti** okno, můžete si poznamenejte tyto hodnoty.</span><span class="sxs-lookup"><span data-stu-id="6158b-122">In hello **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="6158b-123">![Vlastnosti účtu Automation](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="6158b-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="6158b-124">Nastavení integrace s analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="6158b-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="6158b-125">V počítači, spusťte **prostředí Windows PowerShell** z hello **spustit** obrazovky.</span><span class="sxs-lookup"><span data-stu-id="6158b-125">On your computer, start **Windows PowerShell** from hello **Start** screen.</span></span>  
2. <span data-ttu-id="6158b-126">Zkopírujte a vložte následující prostředí PowerShell hello a upravit hodnotu hello hello `$workspaceId` a `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="6158b-126">Copy and paste hello following PowerShell, and edit hello value for hello `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="6158b-127">Pro hello `-Environment` parametr platné hodnoty jsou *AzureCloud* nebo *AzureUSGovernment* v závislosti na práci v prostředí cloudu hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-127">For hello `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on hello cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="6158b-128">Po spuštění tohoto skriptu, zobrazí se záznamy v analýzy protokolů během deseti minut nové JobLogs nebo JobStreams zapisovaný.</span><span class="sxs-lookup"><span data-stu-id="6158b-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="6158b-129">toosee hello protokoly, spusťte následující dotaz ve vyhledávání protokolu analýzy protokolů hello:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="6158b-129">toosee hello logs, run hello following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="6158b-130">Ověření konfigurace</span><span class="sxs-lookup"><span data-stu-id="6158b-130">Verify configuration</span></span>
<span data-ttu-id="6158b-131">pracovní prostor analýzy protokolů tooyour v protokolech tooconfirm, který odesílá účtu Automation, zkontrolujte, jestli jsou na hello účtu Automation pomocí prostředí PowerShell následující hello správně nastavené diagnostics:</span><span class="sxs-lookup"><span data-stu-id="6158b-131">tooconfirm that your Automation account is sending logs tooyour Log Analytics workspace, check that diagnostics are set correctly on hello Automation account using hello following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="6158b-132">Ve výstupu hello zajistěte, aby:</span><span class="sxs-lookup"><span data-stu-id="6158b-132">In hello output ensure that:</span></span>
+ <span data-ttu-id="6158b-133">V části *protokoly*, hello hodnotu *povoleno* je *True*</span><span class="sxs-lookup"><span data-stu-id="6158b-133">Under *Logs*, hello value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="6158b-134">Hello hodnotu *WorkspaceId* nastavena toohello ResourceId pracovní prostor analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="6158b-134">hello value of *WorkspaceId* is set toohello ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="6158b-135">Záznamy služby Log Analytics</span><span class="sxs-lookup"><span data-stu-id="6158b-135">Log Analytics records</span></span>
<span data-ttu-id="6158b-136">Diagnostika z Azure Automation vytvoří dva typy záznamů v analýzy protokolů a jsou označené jako **typ = AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="6158b-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="6158b-137">V protokolech úloh</span><span class="sxs-lookup"><span data-stu-id="6158b-137">Job Logs</span></span>
| <span data-ttu-id="6158b-138">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="6158b-138">Property</span></span> | <span data-ttu-id="6158b-139">Popis</span><span class="sxs-lookup"><span data-stu-id="6158b-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6158b-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="6158b-140">TimeGenerated</span></span> |<span data-ttu-id="6158b-141">Datum a čas, kdy spustit úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-141">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="6158b-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="6158b-142">RunbookName_s</span></span> |<span data-ttu-id="6158b-143">Hello název sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-143">hello name of hello runbook.</span></span> |
| <span data-ttu-id="6158b-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="6158b-144">Caller_s</span></span> |<span data-ttu-id="6158b-145">Kdo je inicioval hello operaci.</span><span class="sxs-lookup"><span data-stu-id="6158b-145">Who initiated hello operation.</span></span>  <span data-ttu-id="6158b-146">Možnou hodnotou je e-mailová adresa nebo systém pro naplánované úlohy.</span><span class="sxs-lookup"><span data-stu-id="6158b-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="6158b-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="6158b-147">Tenant_g</span></span> | <span data-ttu-id="6158b-148">Identifikátor GUID, který identifikuje hello klienta pro hello volajícího.</span><span class="sxs-lookup"><span data-stu-id="6158b-148">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="6158b-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="6158b-149">JobId_g</span></span> |<span data-ttu-id="6158b-150">Identifikátor GUID, který je hello Id úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-150">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="6158b-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="6158b-151">ResultType</span></span> |<span data-ttu-id="6158b-152">Hello stav úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-152">hello status of hello runbook job.</span></span>  <span data-ttu-id="6158b-153">Možné hodnoty:</span><span class="sxs-lookup"><span data-stu-id="6158b-153">Possible values are:</span></span><br><span data-ttu-id="6158b-154">- Spuštěno</span><span class="sxs-lookup"><span data-stu-id="6158b-154">- Started</span></span><br><span data-ttu-id="6158b-155">- Zastaveno</span><span class="sxs-lookup"><span data-stu-id="6158b-155">- Stopped</span></span><br><span data-ttu-id="6158b-156">- Pozastaveno</span><span class="sxs-lookup"><span data-stu-id="6158b-156">- Suspended</span></span><br><span data-ttu-id="6158b-157">- Neúspěch</span><span class="sxs-lookup"><span data-stu-id="6158b-157">- Failed</span></span><br><span data-ttu-id="6158b-158">-Byla dokončena</span><span class="sxs-lookup"><span data-stu-id="6158b-158">- Completed</span></span> |
| <span data-ttu-id="6158b-159">Kategorie</span><span class="sxs-lookup"><span data-stu-id="6158b-159">Category</span></span> | <span data-ttu-id="6158b-160">Klasifikace datový typ hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-160">Classification of hello type of data.</span></span>  <span data-ttu-id="6158b-161">Pro automatizaci hello hodnota je JobLogs.</span><span class="sxs-lookup"><span data-stu-id="6158b-161">For Automation, hello value is JobLogs.</span></span> |
| <span data-ttu-id="6158b-162">OperationName</span><span class="sxs-lookup"><span data-stu-id="6158b-162">OperationName</span></span> | <span data-ttu-id="6158b-163">Určuje typ hello operaci provést, v Azure.</span><span class="sxs-lookup"><span data-stu-id="6158b-163">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="6158b-164">Pro automatizaci je hodnota hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="6158b-164">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="6158b-165">Prostředek</span><span class="sxs-lookup"><span data-stu-id="6158b-165">Resource</span></span> | <span data-ttu-id="6158b-166">Název hello účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-166">Name of hello Automation account</span></span> |
| <span data-ttu-id="6158b-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="6158b-167">SourceSystem</span></span> | <span data-ttu-id="6158b-168">Jak analýzy protokolů shromážděných dat hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-168">How Log Analytics collected hello data.</span></span> <span data-ttu-id="6158b-169">Vždy *Azure* Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="6158b-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="6158b-170">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="6158b-170">ResultDescription</span></span> |<span data-ttu-id="6158b-171">Popisuje stav výsledek úlohy sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-171">Describes hello runbook job result state.</span></span>  <span data-ttu-id="6158b-172">Možné hodnoty:</span><span class="sxs-lookup"><span data-stu-id="6158b-172">Possible values are:</span></span><br><span data-ttu-id="6158b-173">- Úloha se spustila</span><span class="sxs-lookup"><span data-stu-id="6158b-173">- Job is started</span></span><br><span data-ttu-id="6158b-174">- Zpracování úlohy se nezdařilo</span><span class="sxs-lookup"><span data-stu-id="6158b-174">- Job Failed</span></span><br><span data-ttu-id="6158b-175">- Úloha je dokončená</span><span class="sxs-lookup"><span data-stu-id="6158b-175">- Job Completed</span></span> |
| <span data-ttu-id="6158b-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="6158b-176">CorrelationId</span></span> |<span data-ttu-id="6158b-177">Identifikátor GUID, který je hello Id korelace hello úlohy sady runbook.</span><span class="sxs-lookup"><span data-stu-id="6158b-177">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="6158b-178">ID prostředku</span><span class="sxs-lookup"><span data-stu-id="6158b-178">ResourceId</span></span> |<span data-ttu-id="6158b-179">Určuje id prostředků účtu Azure Automation hello hello sady runbook.</span><span class="sxs-lookup"><span data-stu-id="6158b-179">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="6158b-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="6158b-180">SubscriptionId</span></span> | <span data-ttu-id="6158b-181">Hello předplatné Azure Id (GUID) pro hello účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-181">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="6158b-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="6158b-182">ResourceGroup</span></span> | <span data-ttu-id="6158b-183">Název skupiny prostředků hello hello účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-183">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="6158b-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="6158b-184">ResourceProvider</span></span> | <span data-ttu-id="6158b-185">SPOLEČNOSTI MICROSOFT. AUTOMATIZACE</span><span class="sxs-lookup"><span data-stu-id="6158b-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="6158b-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="6158b-186">ResourceType</span></span> | <span data-ttu-id="6158b-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="6158b-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="6158b-188">Datové proudy úlohy</span><span class="sxs-lookup"><span data-stu-id="6158b-188">Job Streams</span></span>
| <span data-ttu-id="6158b-189">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="6158b-189">Property</span></span> | <span data-ttu-id="6158b-190">Popis</span><span class="sxs-lookup"><span data-stu-id="6158b-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6158b-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="6158b-191">TimeGenerated</span></span> |<span data-ttu-id="6158b-192">Datum a čas, kdy spustit úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-192">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="6158b-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="6158b-193">RunbookName_s</span></span> |<span data-ttu-id="6158b-194">Hello název sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-194">hello name of hello runbook.</span></span> |
| <span data-ttu-id="6158b-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="6158b-195">Caller_s</span></span> |<span data-ttu-id="6158b-196">Kdo je inicioval hello operaci.</span><span class="sxs-lookup"><span data-stu-id="6158b-196">Who initiated hello operation.</span></span>  <span data-ttu-id="6158b-197">Možnou hodnotou je e-mailová adresa nebo systém pro naplánované úlohy.</span><span class="sxs-lookup"><span data-stu-id="6158b-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="6158b-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="6158b-198">StreamType_s</span></span> |<span data-ttu-id="6158b-199">Typ Hello stream úloh.</span><span class="sxs-lookup"><span data-stu-id="6158b-199">hello type of job stream.</span></span> <span data-ttu-id="6158b-200">Možné hodnoty:</span><span class="sxs-lookup"><span data-stu-id="6158b-200">Possible values are:</span></span><br><span data-ttu-id="6158b-201">- Průběh</span><span class="sxs-lookup"><span data-stu-id="6158b-201">-Progress</span></span><br><span data-ttu-id="6158b-202">- Výstup</span><span class="sxs-lookup"><span data-stu-id="6158b-202">- Output</span></span><br><span data-ttu-id="6158b-203">- Varování</span><span class="sxs-lookup"><span data-stu-id="6158b-203">- Warning</span></span><br><span data-ttu-id="6158b-204">- Chyba</span><span class="sxs-lookup"><span data-stu-id="6158b-204">- Error</span></span><br><span data-ttu-id="6158b-205">- Ladění</span><span class="sxs-lookup"><span data-stu-id="6158b-205">- Debug</span></span><br><span data-ttu-id="6158b-206">- Podrobné</span><span class="sxs-lookup"><span data-stu-id="6158b-206">- Verbose</span></span> |
| <span data-ttu-id="6158b-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="6158b-207">Tenant_g</span></span> | <span data-ttu-id="6158b-208">Identifikátor GUID, který identifikuje hello klienta pro hello volajícího.</span><span class="sxs-lookup"><span data-stu-id="6158b-208">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="6158b-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="6158b-209">JobId_g</span></span> |<span data-ttu-id="6158b-210">Identifikátor GUID, který je hello Id úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-210">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="6158b-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="6158b-211">ResultType</span></span> |<span data-ttu-id="6158b-212">Hello stav úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-212">hello status of hello runbook job.</span></span>  <span data-ttu-id="6158b-213">Možné hodnoty:</span><span class="sxs-lookup"><span data-stu-id="6158b-213">Possible values are:</span></span><br><span data-ttu-id="6158b-214">– V průběhu</span><span class="sxs-lookup"><span data-stu-id="6158b-214">- In Progress</span></span> |
| <span data-ttu-id="6158b-215">Kategorie</span><span class="sxs-lookup"><span data-stu-id="6158b-215">Category</span></span> | <span data-ttu-id="6158b-216">Klasifikace datový typ hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-216">Classification of hello type of data.</span></span>  <span data-ttu-id="6158b-217">Pro automatizaci hello hodnota je JobStreams.</span><span class="sxs-lookup"><span data-stu-id="6158b-217">For Automation, hello value is JobStreams.</span></span> |
| <span data-ttu-id="6158b-218">OperationName</span><span class="sxs-lookup"><span data-stu-id="6158b-218">OperationName</span></span> | <span data-ttu-id="6158b-219">Určuje typ hello operaci provést, v Azure.</span><span class="sxs-lookup"><span data-stu-id="6158b-219">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="6158b-220">Pro automatizaci je hodnota hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="6158b-220">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="6158b-221">Prostředek</span><span class="sxs-lookup"><span data-stu-id="6158b-221">Resource</span></span> | <span data-ttu-id="6158b-222">Název hello účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-222">Name of hello Automation account</span></span> |
| <span data-ttu-id="6158b-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="6158b-223">SourceSystem</span></span> | <span data-ttu-id="6158b-224">Jak analýzy protokolů shromážděných dat hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-224">How Log Analytics collected hello data.</span></span> <span data-ttu-id="6158b-225">Vždy *Azure* Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="6158b-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="6158b-226">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="6158b-226">ResultDescription</span></span> |<span data-ttu-id="6158b-227">Zahrnuje hello výstupního datového proudu z runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-227">Includes hello output stream from hello runbook.</span></span> |
| <span data-ttu-id="6158b-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="6158b-228">CorrelationId</span></span> |<span data-ttu-id="6158b-229">Identifikátor GUID, který je hello Id korelace hello úlohy sady runbook.</span><span class="sxs-lookup"><span data-stu-id="6158b-229">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="6158b-230">ID prostředku</span><span class="sxs-lookup"><span data-stu-id="6158b-230">ResourceId</span></span> |<span data-ttu-id="6158b-231">Určuje id prostředků účtu Azure Automation hello hello sady runbook.</span><span class="sxs-lookup"><span data-stu-id="6158b-231">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="6158b-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="6158b-232">SubscriptionId</span></span> | <span data-ttu-id="6158b-233">Hello předplatné Azure Id (GUID) pro hello účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-233">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="6158b-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="6158b-234">ResourceGroup</span></span> | <span data-ttu-id="6158b-235">Název skupiny prostředků hello hello účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-235">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="6158b-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="6158b-236">ResourceProvider</span></span> | <span data-ttu-id="6158b-237">SPOLEČNOSTI MICROSOFT. AUTOMATIZACE</span><span class="sxs-lookup"><span data-stu-id="6158b-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="6158b-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="6158b-238">ResourceType</span></span> | <span data-ttu-id="6158b-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="6158b-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="6158b-240">Zobrazení automatizace přihlásí analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="6158b-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="6158b-241">Teď, když jste spustili odesílání vašeho automatizace úloh protokoly tooLog analýzy, podíváme se, co můžete dělat s tyto protokoly uvnitř analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="6158b-241">Now that you have started sending your Automation job logs tooLog Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="6158b-242">toosee hello protokoly, spusťte následující dotaz hello:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="6158b-242">toosee hello logs, run hello following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="6158b-243">Odeslat e-mail, dojde k selhání úlohy runbooku nebo pozastaví</span><span class="sxs-lookup"><span data-stu-id="6158b-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="6158b-244">Jeden z našich zákazníků nejvyšší požádá, je pro hello možnost toosend e-mailu nebo textový při něco nepovede k úloze runbooku.</span><span class="sxs-lookup"><span data-stu-id="6158b-244">One of our top customer asks is for hello ability toosend an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="6158b-245">toocreate výstrahu pravidel, začněte vytvořením hledání protokolů pro sady runbook hello záznamů úlohy, které by měla vyvolat výstrahu hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-245">toocreate an alert rule, you start by creating a log search for hello runbook job records that should invoke hello alert.</span></span>  <span data-ttu-id="6158b-246">Klikněte na tlačítko hello **výstraha** tlačítko toocreate a nakonfigurujte pravidlo výstrahy hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-246">Click hello **Alert** button toocreate and configure hello alert rule.</span></span>

1. <span data-ttu-id="6158b-247">Na stránce Přehled protokolu Analytics hello, klikněte na tlačítko **hledání protokolů**.</span><span class="sxs-lookup"><span data-stu-id="6158b-247">From hello Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="6158b-248">Vytvoření vyhledávací dotaz protokolu pro upozornění zadáním hello následující hledání do pole dotazu hello: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` můžete taky Seskupit podle hello RunbookName pomocí:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="6158b-248">Create a log search query for your alert by typing hello following search into hello query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by hello RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="6158b-249">Pokud jste nastavili protokoly z více než jeden účet nebo předplatné tooyour pracovního prostoru automatizace, můžete je seskupovat vaše předplatné a účet Automation.</span><span class="sxs-lookup"><span data-stu-id="6158b-249">If you have set up logs from more than one Automation account or subscription tooyour workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="6158b-250">Název účtu Automation může být odvozen od hello prostředků pole v hello hledání JobLogs.</span><span class="sxs-lookup"><span data-stu-id="6158b-250">Automation account name can be derived from hello Resource field in hello search of JobLogs.</span></span>  
3. <span data-ttu-id="6158b-251">tooopen hello **přidat pravidlo výstrahy** obrazovky, klikněte na tlačítko **výstrahy** hello horní části stránky hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-251">tooopen hello **Add Alert Rule** screen, click **Alert** at hello top of hello page.</span></span> <span data-ttu-id="6158b-252">Další informace o hello možnosti tooconfigure hello výstrahu v [výstrahy v analýzy protokolů](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="6158b-252">For further details on hello options tooconfigure hello alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="6158b-253">Najít všechny úlohy, které byly dokončeny s chybami</span><span class="sxs-lookup"><span data-stu-id="6158b-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="6158b-254">Kromě toho tooalerting o selhání, můžete najít při úlohy runbooku se neukončující chybu.</span><span class="sxs-lookup"><span data-stu-id="6158b-254">In addition tooalerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="6158b-255">V těchto případech prostředí PowerShell vytvoří chybový proud, ale hello neukončující chyby způsobit, že vaše toosuspend úlohy nebo selhání.</span><span class="sxs-lookup"><span data-stu-id="6158b-255">In these cases PowerShell produces an error stream, but hello non-terminating errors do not cause your job toosuspend or fail.</span></span>    

1. <span data-ttu-id="6158b-256">V pracovním prostoru analýzy protokolů, klikněte na tlačítko **hledání protokolů**.</span><span class="sxs-lookup"><span data-stu-id="6158b-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="6158b-257">V poli hello dotazů, zadejte `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` a pak klikněte na **vyhledávání**.</span><span class="sxs-lookup"><span data-stu-id="6158b-257">In hello query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="6158b-258">Zobrazení datové proudy úlohy pro úlohu</span><span class="sxs-lookup"><span data-stu-id="6158b-258">View job streams for a job</span></span>
<span data-ttu-id="6158b-259">Když ladíte úlohu, můžete také toolook do datové proudy úlohy hello.</span><span class="sxs-lookup"><span data-stu-id="6158b-259">When you are debugging a job, you may also want toolook into hello job streams.</span></span>  <span data-ttu-id="6158b-260">Hello následující dotaz zobrazí všechny datové proudy hello pro jednu úlohu s identifikátorem GUID 2ebd22ea-e05e-4eb9 - 9d 76-d73cbd4356e0:</span><span class="sxs-lookup"><span data-stu-id="6158b-260">hello following query shows all hello streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="6158b-261">Zobrazit stav historie úlohy</span><span class="sxs-lookup"><span data-stu-id="6158b-261">View historical job status</span></span>
<span data-ttu-id="6158b-262">Nakonec můžete toovisualize historii úlohy v čase.</span><span class="sxs-lookup"><span data-stu-id="6158b-262">Finally, you may want toovisualize your job history over time.</span></span>  <span data-ttu-id="6158b-263">Tento dotaz toosearch pro hello stav úloh můžete použít v čase.</span><span class="sxs-lookup"><span data-stu-id="6158b-263">You can use this query toosearch for hello status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="6158b-264">![OMS historie úlohy stavu grafu](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="6158b-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="6158b-265">Souhrn</span><span class="sxs-lookup"><span data-stu-id="6158b-265">Summary</span></span>
<span data-ttu-id="6158b-266">Odesláním vaší automatizace úlohy stavu a datový proud dat tooLog Analytics můžete získat lepší přehled o hello stav automatizace úloh podle:</span><span class="sxs-lookup"><span data-stu-id="6158b-266">By sending your Automation job status and stream data tooLog Analytics, you can get better insight into hello status of your Automation jobs by:</span></span>
+ <span data-ttu-id="6158b-267">Nastavení výstrah toonotify můžete při se vyskytl problém</span><span class="sxs-lookup"><span data-stu-id="6158b-267">Setting up alerts toonotify you when there is an issue</span></span>
+ <span data-ttu-id="6158b-268">Pomocí vlastních zobrazení a hledání dotazy toovisualize vaše výsledky sady runbook, stav úlohy sady runbook a další související klíče indikátory nebo metriky.</span><span class="sxs-lookup"><span data-stu-id="6158b-268">Using custom views and search queries toovisualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="6158b-269">Analýzy protokolů poskytuje větší provozní viditelnost tooyour automatizace úloh a může pomoct adresu incidenty rychlejší.</span><span class="sxs-lookup"><span data-stu-id="6158b-269">Log Analytics provides greater operational visibility tooyour Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="6158b-270">Další kroky</span><span class="sxs-lookup"><span data-stu-id="6158b-270">Next steps</span></span>
* <span data-ttu-id="6158b-271">toolearn Další informace o tom, jak tooconstruct jiný vyhledávací dotazy a zkontrolujte hello automatizace úlohy protokoly s analýzy protokolů, najdete v části [hledání přihlásit analýzy protokolů](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="6158b-271">toolearn more about how tooconstruct different search queries and review hello Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="6158b-272">jak zjistit, toocreate a načtení výstupní a chybové zprávy ze sady runbook, toounderstand [Runbook výstup a zprávy](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="6158b-272">toounderstand how toocreate and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="6158b-273">Další informace o spuštění sady runbook, jak toomonitor úlohy a další technické podrobnosti najdete v tématu toolearn [sledovat úlohy runbooku](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="6158b-273">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="6158b-274">toolearn informace o OMS analýzy protokolů a datových zdrojů kolekce, najdete v části [shromažďování Azure úložiště dat v přehledu analýzy protokolů](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="6158b-274">toolearn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
