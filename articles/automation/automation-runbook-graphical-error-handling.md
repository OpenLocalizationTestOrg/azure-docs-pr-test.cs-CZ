---
title: "aaaError zpracování v grafické runbooky Azure Automation | Microsoft Docs"
description: "Tento článek popisuje, jak tooimplement chyba zpracování logiky v grafické runbooky Azure Automation."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: b9ff01361d2ebd9c0174b074a7a290b1cc2fd1c8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a><span data-ttu-id="76c7f-103">Zpracování chyb v grafických runboocích Azure Automation</span><span class="sxs-lookup"><span data-stu-id="76c7f-103">Error handling in Azure Automation graphical runbooks</span></span>

<span data-ttu-id="76c7f-104">Hlavní tooconsider klíče runbook návrhu je identifikace různé problémy, které může docházet k sadě runbook.</span><span class="sxs-lookup"><span data-stu-id="76c7f-104">A key runbook design principal tooconsider is identifying different issues that a runbook might experience.</span></span> <span data-ttu-id="76c7f-105">Tyto problémy mohou zahrnovat úspěch, očekávané chybové stavy a neočekávané chybové podmínky.</span><span class="sxs-lookup"><span data-stu-id="76c7f-105">These issues can include success, expected error states, and unexpected error conditions.</span></span>

<span data-ttu-id="76c7f-106">Runbooky by měly zahrnovat zpracování chyb.</span><span class="sxs-lookup"><span data-stu-id="76c7f-106">Runbooks should include error handling.</span></span> <span data-ttu-id="76c7f-107">toovalidate hello výstup aktivity nebo zpracování chyby s grafickými runbooky, můžete pomocí aktivity kód prostředí Windows PowerShell, definovat podmíněnou logiku na odkaz výstup hello hello aktivity nebo použít jinou metodu.</span><span class="sxs-lookup"><span data-stu-id="76c7f-107">toovalidate hello output of an activity or handle an error with graphical runbooks, you could use a Windows PowerShell code activity, define conditional logic on hello output link of hello activity, or apply another method.</span></span>          

<span data-ttu-id="76c7f-108">Často Pokud neukončující chybu, která vyskytuje v aktivitě sady runbook, aktivit, které řídí zpracování bez ohledu na to hello chyby.</span><span class="sxs-lookup"><span data-stu-id="76c7f-108">Often, if there is a non-terminating error that occurs with a runbook activity, any activity that follows is processed regardless of hello error.</span></span> <span data-ttu-id="76c7f-109">Hello chyba je pravděpodobně toogenerate výjimku, ale toorun je stále povolené hello další aktivity.</span><span class="sxs-lookup"><span data-stu-id="76c7f-109">hello error is likely toogenerate an exception, but hello next activity is still allowed toorun.</span></span> <span data-ttu-id="76c7f-110">Toto je hello tak, že prostředí PowerShell je navrženou toohandle chyby.</span><span class="sxs-lookup"><span data-stu-id="76c7f-110">This is hello way that PowerShell is designed toohandle errors.</span></span>    

<span data-ttu-id="76c7f-111">Hello typů chyb prostředí PowerShell, které se můžou vyskytnout během provádění se ukončuje nebo jiných ukončován.</span><span class="sxs-lookup"><span data-stu-id="76c7f-111">hello types of PowerShell errors that can occur during execution are terminating or non-terminating.</span></span> <span data-ttu-id="76c7f-112">Hello rozdíly mezi ukončující a jiných ukončován chyby jsou následující:</span><span class="sxs-lookup"><span data-stu-id="76c7f-112">hello differences between terminating and non-terminating errors are as follows:</span></span>

* <span data-ttu-id="76c7f-113">**Ukončení chyba**: závažné chyby během provádění, která zcela ukončí příkaz hello (nebo spuštění skriptu).</span><span class="sxs-lookup"><span data-stu-id="76c7f-113">**Terminating error**: A serious error during execution that halts hello command (or script execution) completely.</span></span> <span data-ttu-id="76c7f-114">Příkladem jsou neexistující rutiny, chyby syntaxe znemožňující spuštění rutiny nebo jiné závažné chyby.</span><span class="sxs-lookup"><span data-stu-id="76c7f-114">Examples include non-existent cmdlets, syntax errors that prevent a cmdlet from running, or other fatal errors.</span></span>

* <span data-ttu-id="76c7f-115">**Ukončení bez chyby**:-závažnou chybu, který umožňuje spuštění toocontinue ohledu na selhání hello.</span><span class="sxs-lookup"><span data-stu-id="76c7f-115">**Non-terminating error**: A non-serious error that allows execution toocontinue despite hello failure.</span></span> <span data-ttu-id="76c7f-116">Jedná se například o operační chyby, jako je nenalezení souboru nebo problémy s oprávněním.</span><span class="sxs-lookup"><span data-stu-id="76c7f-116">Examples include operational errors such as file not found errors and permissions problems.</span></span>

<span data-ttu-id="76c7f-117">Došlo k vylepšení grafické runbooky služby automatizace Azure s zpracování chyb tooinclude schopností hello.</span><span class="sxs-lookup"><span data-stu-id="76c7f-117">Azure Automation graphical runbooks have been improved with hello capability tooinclude error handling.</span></span> <span data-ttu-id="76c7f-118">Nyní můžete přepnout výjimky na neukončující chyby a vytvořit chybová propojení mezi aktivitami.</span><span class="sxs-lookup"><span data-stu-id="76c7f-118">You can now turn exceptions into non-terminating errors and create error links between activities.</span></span> <span data-ttu-id="76c7f-119">Tento proces umožňuje Autor sady runbook toocatch chyby a spravovat zjištěné nebo neočekávané podmínky.</span><span class="sxs-lookup"><span data-stu-id="76c7f-119">This process allows a runbook author toocatch errors and manage realized or unexpected conditions.</span></span>  

## <a name="when-toouse-error-handling"></a><span data-ttu-id="76c7f-120">Při zpracování chyb toouse</span><span class="sxs-lookup"><span data-stu-id="76c7f-120">When toouse error handling</span></span>

<span data-ttu-id="76c7f-121">Vždy, když je důležité aktivita, která vyvolá výjimku nebo výjimce, je důležité tooprevent hello další aktivitu v sadě runbook z chyby hello zpracování a toohandle správně.</span><span class="sxs-lookup"><span data-stu-id="76c7f-121">Whenever there is a critical activity that throws an error or exception, it's important tooprevent hello next activity in your runbook from processing and toohandle hello error appropriately.</span></span> <span data-ttu-id="76c7f-122">To je obzvláště důležité v případě, kdy na vašich runboocích závisí podnikový proces nebo proces servisních operací.</span><span class="sxs-lookup"><span data-stu-id="76c7f-122">This is especially critical when your runbooks are supporting a business or service operations process.</span></span>

<span data-ttu-id="76c7f-123">Pro každou aktivitu, která může dojít k chybě můžete přidat Autor sady runbook hello k chyba odkazu tooany dalších aktivit.</span><span class="sxs-lookup"><span data-stu-id="76c7f-123">For each activity that can produce an error, hello runbook author can add an error link pointing tooany other activity.</span></span>  <span data-ttu-id="76c7f-124">Cílová aktivita Hello můžou být jakéhokoli typu, včetně kódu aktivity vyvolání rutiny, vyvolání jinou sadu runbook a tak dále.</span><span class="sxs-lookup"><span data-stu-id="76c7f-124">hello destination activity can be of any type, including code activities, invoking a cmdlet, invoking another runbook, and so on.</span></span>

<span data-ttu-id="76c7f-125">Kromě toho hello cílová aktivita může mít odchozí propojení.</span><span class="sxs-lookup"><span data-stu-id="76c7f-125">In addition, hello destination activity can also have outgoing links.</span></span> <span data-ttu-id="76c7f-126">Může se jednat o běžná propojení nebo chybová propojení.</span><span class="sxs-lookup"><span data-stu-id="76c7f-126">These links can be regular links or error links.</span></span> <span data-ttu-id="76c7f-127">To znamená, že autor sady runbook hello můžete implementovat komplexní logiku zpracování chyb bez opětné řazení tooa code aktivity.</span><span class="sxs-lookup"><span data-stu-id="76c7f-127">This means hello runbook author can implement complex error-handling logic without resorting tooa code activity.</span></span> <span data-ttu-id="76c7f-128">Hello doporučuje postupem je toocreate vyhrazené runbook zpracování chyb s běžné funkce, ale není to povinné.</span><span class="sxs-lookup"><span data-stu-id="76c7f-128">hello recommended practice is toocreate a dedicated error-handling runbook with common functionality, but it's not mandatory.</span></span> <span data-ttu-id="76c7f-129">Logika zpracování chyb v aktivitě kódu prostředí PowerShell, které není hello pouze možnost.</span><span class="sxs-lookup"><span data-stu-id="76c7f-129">Error-handling logic in a PowerShell code activity it isn't hello only option.</span></span>  

<span data-ttu-id="76c7f-130">Například vezměte v úvahu sadu runbook, která se pokusí toostart virtuálního počítače a instalace aplikace na něm.</span><span class="sxs-lookup"><span data-stu-id="76c7f-130">For example, consider a runbook that tries toostart a VM and install an application on it.</span></span> <span data-ttu-id="76c7f-131">Pokud hello virtuálních počítačů nelze správně spustit, provádí dvě akce:</span><span class="sxs-lookup"><span data-stu-id="76c7f-131">If hello VM doesn't start correctly, it performs two actions:</span></span>

1. <span data-ttu-id="76c7f-132">Odešle oznámení o tomto problému.</span><span class="sxs-lookup"><span data-stu-id="76c7f-132">It sends a notification about this problem.</span></span>
2. <span data-ttu-id="76c7f-133">Spustí jiný runbook, který automaticky zřídí nový virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="76c7f-133">It starts another runbook that automatically provisions a new VM instead.</span></span>

<span data-ttu-id="76c7f-134">Jedno řešení je toohave k chybě odkazu tooan aktivita zpracovává krok jeden.</span><span class="sxs-lookup"><span data-stu-id="76c7f-134">One solution is toohave an error link pointing tooan activity that handles step one.</span></span> <span data-ttu-id="76c7f-135">Například může připojit hello **Write-Warning** rutiny tooan aktivity pro kroku 2, jako je například hello **Start-AzureRmAutomationRunbook** rutiny.</span><span class="sxs-lookup"><span data-stu-id="76c7f-135">For example, you could connect hello **Write-Warning** cmdlet tooan activity for step two, such as hello **Start-AzureRmAutomationRunbook** cmdlet.</span></span>

<span data-ttu-id="76c7f-136">Toto chování pro použití v mnoha sady runbook může také generalize umístěním tyto dvě aktivity v samostatných chyba zpracování sady runbook a pokynů hello navrhované dříve.</span><span class="sxs-lookup"><span data-stu-id="76c7f-136">You could also generalize this behavior for use in many runbooks by putting these two activities in a separate error handling runbook and following hello guidance suggested earlier.</span></span> <span data-ttu-id="76c7f-137">Před voláním této sady runbook zpracování chyb, můžete vytvořit vlastní zprávu od hello data v původní runbook hello a předejte ji jako parametr toohello zpracování chyb runbooku.</span><span class="sxs-lookup"><span data-stu-id="76c7f-137">Before calling this error-handling runbook, you could construct a custom message from hello data in hello original runbook, and then pass it as a parameter toohello error-handling runbook.</span></span>

## <a name="how-toouse-error-handling"></a><span data-ttu-id="76c7f-138">Jak toouse zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="76c7f-138">How toouse error handling</span></span>

<span data-ttu-id="76c7f-139">V nastavení konfigurace každé aktivity je možnost přepnout výjimky na neukončující chyby.</span><span class="sxs-lookup"><span data-stu-id="76c7f-139">Each activity has a configuration setting that turns exceptions into non-terminating errors.</span></span> <span data-ttu-id="76c7f-140">Standardně je toto nastavení zakázáno.</span><span class="sxs-lookup"><span data-stu-id="76c7f-140">By default, this setting is disabled.</span></span> <span data-ttu-id="76c7f-141">Doporučujeme vám povolit toto nastavení na žádnou aktivitu, kam chcete toohandle chyby.</span><span class="sxs-lookup"><span data-stu-id="76c7f-141">We recommend that you enable this setting on any activity where you want toohandle errors.</span></span>  

<span data-ttu-id="76c7f-142">Povolením této konfiguraci jsou zajistit, že ukončující i jiných ukončován chyby v aktivitě hello jsou zpracovávány jako neukončující chyby a může být zpracována s odkazem k chybě.</span><span class="sxs-lookup"><span data-stu-id="76c7f-142">By enabling this configuration, you are assuring that both terminating and non-terminating errors in hello activity are handled as non-terminating errors, and can be handled with an error link.</span></span>  

<span data-ttu-id="76c7f-143">Po konfiguraci tohoto nastavení, vytvořte aktivitu, která zpracovává chyby hello.</span><span class="sxs-lookup"><span data-stu-id="76c7f-143">After configuring this setting, you create an activity that handles hello error.</span></span> <span data-ttu-id="76c7f-144">Pokud všechny chyby vytvoří aktivita, pak hello odchozí chyba, kterou dodržíte odkazy a hello regulární odkazy nejsou, ani když hello aktivita vytváří také regulární výstup.</span><span class="sxs-lookup"><span data-stu-id="76c7f-144">If an activity produces any error, then hello outgoing error links are followed, and hello regular links are not, even if hello activity produces regular output as well.</span></span><br><br> ![Příklad chybového propojení v runbooku Automation](media/automation-runbook-graphical-error-handling/error-link-example.png)

<span data-ttu-id="76c7f-146">V následujícím příkladu hello načte runbook proměnné, která obsahuje název počítače hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="76c7f-146">In hello following example, a runbook retrieves a variable that contains hello computer name of a virtual machine.</span></span> <span data-ttu-id="76c7f-147">Pokusí toostart hello virtuální počítač s další aktivitu hello.</span><span class="sxs-lookup"><span data-stu-id="76c7f-147">It then attempts toostart hello virtual machine with hello next activity.</span></span><br><br> ![Příklad zpracování chyb v runbooku Automation](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

<span data-ttu-id="76c7f-149">Hello **Get-AutomationVariable** aktivity a **Start-AzureRmVm** jsou nakonfigurované tooconvert tooerrors výjimky.</span><span class="sxs-lookup"><span data-stu-id="76c7f-149">hello **Get-AutomationVariable** activity and **Start-AzureRmVm** are configured tooconvert exceptions tooerrors.</span></span>  <span data-ttu-id="76c7f-150">Pokud jsou problémy, získávání hello proměnnou nebo počáteční hello virtuálních počítačů a potom se generují chyby.</span><span class="sxs-lookup"><span data-stu-id="76c7f-150">If there are problems getting hello variable or starting hello VM, then errors are generated.</span></span><br><br> <span data-ttu-id="76c7f-151">![Nastavení aktivity pro zpracování chyb v runbooku Automation](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span><span class="sxs-lookup"><span data-stu-id="76c7f-151">![Automation runbook error-handling activity settings](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span></span>

<span data-ttu-id="76c7f-152">Chyba propojení toku z těchto aktivit tooa jeden **Chyba správy** aktivitu (aktivita kód).</span><span class="sxs-lookup"><span data-stu-id="76c7f-152">Error links flow from these activities tooa single **error management** activity (a code activity).</span></span> <span data-ttu-id="76c7f-153">Tato aktivita je nakonfigurován s jednoduchý výraz prostředí PowerShell, který používá hello *Throw* – klíčové slovo toostop zpracování spolu s *$Error.Exception.Message* tooget uvítací zprávu, která popisuje hello aktuální výjimku.</span><span class="sxs-lookup"><span data-stu-id="76c7f-153">This activity is configured with a simple PowerShell expression that uses hello *Throw* keyword toostop processing, along with *$Error.Exception.Message* tooget hello message that describes hello current exception.</span></span><br><br> <span data-ttu-id="76c7f-154">![Příklad kódu pro zpracování chyb v runbooku Automation](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span><span class="sxs-lookup"><span data-stu-id="76c7f-154">![Automation runbook error-handling code example](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span></span>


## <a name="next-steps"></a><span data-ttu-id="76c7f-155">Další kroky</span><span class="sxs-lookup"><span data-stu-id="76c7f-155">Next steps</span></span>

* <span data-ttu-id="76c7f-156">toolearn informace o propojení a typy odkazu v grafické runbooky najdete v části [vytváření grafického obsahu ve službě Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="76c7f-156">toolearn more about links and link types in graphical runbooks, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span></span>

* <span data-ttu-id="76c7f-157">Další informace o spuštění sady runbook, jak toomonitor úlohy a další technické podrobnosti najdete v tématu toolearn [sledovat úlohy runbooku](automation-runbook-execution.md).</span><span class="sxs-lookup"><span data-stu-id="76c7f-157">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md).</span></span>
