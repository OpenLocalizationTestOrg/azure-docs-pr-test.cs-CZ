---
title: "aaaMy první runbook pracovního postupu Powershellu ve službě Azure Automation | Microsoft Docs"
description: "Kurz vás provede procesem vytvoření Dobrý den, otestováním a publikováním jednoduchého textového runbooku pomocí prostředí PowerShell. pracovní postup."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "pracovní postup v powershellu, příklady pracovního postupu v powershellu, pracovní postup powershell"
ms.assetid: 0002d7f7-e2b5-46e3-b5eb-4596b84fd526
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;bwren
ms.openlocfilehash: b5a34d363ef4865878f3f68119833367b5280f83
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-workflow-runbook"></a><span data-ttu-id="e040e-104">Můj první runbook pracovního postupu PowerShellu</span><span class="sxs-lookup"><span data-stu-id="e040e-104">My first PowerShell Workflow runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="e040e-105">Grafický</span><span class="sxs-lookup"><span data-stu-id="e040e-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="e040e-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="e040e-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="e040e-107">Pracovní postup PowerShellu</span><span class="sxs-lookup"><span data-stu-id="e040e-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="e040e-108">Tento kurz vás provede procesem vytvoření hello [runbook pracovního postupu Powershellu](automation-runbook-types.md#powershell-workflow-runbooks) ve službě Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="e040e-108">This tutorial walks you through hello creation of a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) in Azure Automation.</span></span> <span data-ttu-id="e040e-109">Začneme s jednoduchým runbookem, který jsme testování a publikování při vysvětlením, jak tootrack hello stav úlohy runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-109">We start with a simple runbook that we test and publish while explaining how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="e040e-110">Potom jsme upravit hello runbook tooactually spravovat prostředky Azure, v takovém případě spuštění virtuálního počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="e040e-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="e040e-111">Nakonec uděláme hello runbook robustnější přidáním parametrů.</span><span class="sxs-lookup"><span data-stu-id="e040e-111">Lastly we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e040e-112">Požadavky</span><span class="sxs-lookup"><span data-stu-id="e040e-112">Prerequisites</span></span>
<span data-ttu-id="e040e-113">toocomplete tohoto kurzu budete potřebovat hello následující:</span><span class="sxs-lookup"><span data-stu-id="e040e-113">toocomplete this tutorial, you will need hello following:</span></span>

* <span data-ttu-id="e040e-114">Předplatné Azure.</span><span class="sxs-lookup"><span data-stu-id="e040e-114">Azure subscription.</span></span> <span data-ttu-id="e040e-115">Pokud nemáte účet, můžete si [aktivovat výhody pro předplatitele MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) nebo <a href="/pricing/free-account/" target="_blank">[si zaregistrovat bezplatný účet](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="e040e-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="e040e-116">[Účet Automation](automation-sec-configure-azure-runas-account.md) toohold hello sady runbook a ověření tooAzure prostředky.</span><span class="sxs-lookup"><span data-stu-id="e040e-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="e040e-117">Tento účet musí mít oprávnění toostart a zastavit hello virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="e040e-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="e040e-118">Virtuální počítač Azure.</span><span class="sxs-lookup"><span data-stu-id="e040e-118">An Azure virtual machine.</span></span> <span data-ttu-id="e040e-119">Počítač zastavíme a spustíme, proto to nesmí být produkční virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="e040e-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="e040e-120">Krok 1 – vytvoření nového runbooku</span><span class="sxs-lookup"><span data-stu-id="e040e-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="e040e-121">Začneme vytvořením jednoduchého runbooku, který zobrazí hello text *Hello, World*.</span><span class="sxs-lookup"><span data-stu-id="e040e-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="e040e-122">V hello portálu Azure otevřete účet Automation.</span><span class="sxs-lookup"><span data-stu-id="e040e-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="e040e-123">stránka účtu Automation Hello nabízí rychlý přehled o hello prostředky v rámci tohoto účtu.</span><span class="sxs-lookup"><span data-stu-id="e040e-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="e040e-124">Už byste tam měli mít nějaké prostředky.</span><span class="sxs-lookup"><span data-stu-id="e040e-124">You should already have some assets.</span></span> <span data-ttu-id="e040e-125">Většina z nich jsou moduly hello, které jsou automaticky obsažené v novém účtu Automation.</span><span class="sxs-lookup"><span data-stu-id="e040e-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="e040e-126">Měli byste také mít hello asset přihlašovacích údajů, který je uvedený v hello [požadavky](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="e040e-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="e040e-127">Klikněte na hello **Runbooky** dlaždice tooopen hello seznamu sad runbook.</span><span class="sxs-lookup"><span data-stu-id="e040e-127">Click on hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="e040e-128">![Řízení runbooků](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-128">![Runbooks control](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span></span>
3. <span data-ttu-id="e040e-129">Vytvořit nový runbook kliknutím na hello **přidat runbook** tlačítko a potom **vytvořit nový runbook**.</span><span class="sxs-lookup"><span data-stu-id="e040e-129">Create a new runbook by clicking on hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="e040e-130">Pojmenujte hello hello runbook *MyFirstRunbook-Workflow*.</span><span class="sxs-lookup"><span data-stu-id="e040e-130">Give hello runbook hello name *MyFirstRunbook-Workflow*.</span></span>
5. <span data-ttu-id="e040e-131">V tomto případě vytvoříme toocreate [runbook pracovního postupu Powershellu](automation-runbook-types.md#powershell-workflow-runbooks) tak vyberte **pracovního postupu Powershellu** pro **typ Runbooku**.</span><span class="sxs-lookup"><span data-stu-id="e040e-131">In this case, we're going toocreate a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) so select **Powershell Workflow** for **Runbook type**.</span></span><br><br> <span data-ttu-id="e040e-132">![Nový runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-132">![New runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span></span>
6. <span data-ttu-id="e040e-133">Klikněte na tlačítko **vytvořit** toocreate hello sady runbook a otevřete hello textový editor.</span><span class="sxs-lookup"><span data-stu-id="e040e-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="e040e-134">Krok 2 – přidání kódu toohello runbook</span><span class="sxs-lookup"><span data-stu-id="e040e-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="e040e-135">Můžete buď typ kódu přímo do runbooku hello, nebo můžete vybrat rutiny, runbooky a prostředky z hello prvku knihovna a je přidali toohello sada runbook se všemi souvisejícími parametry.</span><span class="sxs-lookup"><span data-stu-id="e040e-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="e040e-136">V tomto návodu budeme zapisovat přímo do runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-136">For this walkthrough, we'll type directly into hello runbook.</span></span>

1. <span data-ttu-id="e040e-137">Náš runbook je teď prázdný pouze hello požadované *pracovního postupu* – klíčové slovo, název hello naše sady runbook a hello složené závorky, které uzavřou celý pracovní postup hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-137">Our runbook is currently empty with only hello required *workflow* keyword, hello name of our runbook, and hello braces that will encase hello entire workflow.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   }
   ```
2. <span data-ttu-id="e040e-138">Napište text *Write-Output "Hello World".*</span><span class="sxs-lookup"><span data-stu-id="e040e-138">Type *Write-Output "Hello World."*</span></span> <span data-ttu-id="e040e-139">mezi složené závorky hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-139">between hello braces.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   Write-Output "Hello World"
   }
   ```
3. <span data-ttu-id="e040e-140">Uložte hello runbook kliknutím **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="e040e-140">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="e040e-141">![Uložení runbooku](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-141">![Save runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span></span>

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="e040e-142">Krok 3: Test hello runbook</span><span class="sxs-lookup"><span data-stu-id="e040e-142">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="e040e-143">Před publikováním runbooku toomake hello je k dispozici v produkčním prostředí, chceme tootest ho toomake jisti, že funguje správně.</span><span class="sxs-lookup"><span data-stu-id="e040e-143">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="e040e-144">Když runbook testujete, spustíte jeho  verzi **Koncept** a interaktivně zobrazíte jeho výsledek.</span><span class="sxs-lookup"><span data-stu-id="e040e-144">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="e040e-145">Klikněte na tlačítko **testovací podokno** tooopen hello testovací podokno.</span><span class="sxs-lookup"><span data-stu-id="e040e-145">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="e040e-146">![Testovací podokno](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-146">![Test pane](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span></span>
2. <span data-ttu-id="e040e-147">Klikněte na tlačítko **spustit** toostart hello testu.</span><span class="sxs-lookup"><span data-stu-id="e040e-147">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e040e-148">To by měl být hello povolit pouze možnost.</span><span class="sxs-lookup"><span data-stu-id="e040e-148">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="e040e-149">Vytvoří se [úloha runbooku](automation-runbook-execution.md) a její stav se zobrazí.</span><span class="sxs-lookup"><span data-stu-id="e040e-149">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="e040e-150">Počáteční stav úlohy Hello bude *zařazeno ve frontě* označující, že se čeká na pracovního procesu runbooku v toocome cloudu hello k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e040e-150">hello job status will start as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="e040e-151">Pak ji přesune příliš*počáteční* když pracovní proces hello úlohy a potom *systémem* při hello runbook skutečně spustí.</span><span class="sxs-lookup"><span data-stu-id="e040e-151">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="e040e-152">Po dokončení úlohy runbooku hello se zobrazí jeho výstup.</span><span class="sxs-lookup"><span data-stu-id="e040e-152">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="e040e-153">V našem případě bychom měli vidět text *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e040e-153">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="e040e-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span></span>
5. <span data-ttu-id="e040e-155">Zavřete hello testovací podokno tooreturn toohello plátno.</span><span class="sxs-lookup"><span data-stu-id="e040e-155">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="e040e-156">Krok 4 – publikování a spuštění sady runbook hello</span><span class="sxs-lookup"><span data-stu-id="e040e-156">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="e040e-157">Hello runbook, který jsme právě vytvořili, je stále v režimu konceptu.</span><span class="sxs-lookup"><span data-stu-id="e040e-157">hello runbook that we just created is still in Draft mode.</span></span> <span data-ttu-id="e040e-158">Potřebujeme toopublish ho před jeho spuštěním v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="e040e-158">We need toopublish it before we can run it in production.</span></span> <span data-ttu-id="e040e-159">Když runbook publikujete, můžete přepsat hello stávající publikované verze hello koncept.</span><span class="sxs-lookup"><span data-stu-id="e040e-159">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span> <span data-ttu-id="e040e-160">V našem případě nemáme publikovanou verzi ještě vzhledem k tomu, že právě vytvořený hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e040e-160">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="e040e-161">Klikněte na tlačítko **publikovat** toopublish hello runbook a potom **Ano** po zobrazení výzvy.</span><span class="sxs-lookup"><span data-stu-id="e040e-161">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="e040e-162">![Publikování](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-162">![Publish](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span></span>
2. <span data-ttu-id="e040e-163">Pokud se posunete levém tooview hello runbook v hello **sady Runbook** podokně se teď zobrazí **stav vytváření** z **publikováno**.</span><span class="sxs-lookup"><span data-stu-id="e040e-163">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="e040e-164">Přejděte zpět toohello správné tooview hello podokno **MyFirstRunbook-Workflow**.</span><span class="sxs-lookup"><span data-stu-id="e040e-164">Scroll back toohello right tooview hello pane for **MyFirstRunbook-Workflow**.</span></span>  
   <span data-ttu-id="e040e-165">Hello možnosti v horní části hello nám umožňují toostart hello runbooku, naplánování toostart někdy v budoucnu hello nebo vytvořit [webhooku](automation-webhooks.md) , může být spuštění prostřednictvím volání protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="e040e-165">hello options across hello top allow us toostart hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="e040e-166">Právě chceme toostart hello runbook proto klikněte na **spustit** a potom **Ano** po zobrazení výzvy.</span><span class="sxs-lookup"><span data-stu-id="e040e-166">We just want toostart hello runbook so click **Start** and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="e040e-167">![Spuštění runbooku](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-167">![Start runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span></span>
5. <span data-ttu-id="e040e-168">Podokno úlohy je otevřené hello úlohy runbooku, který jsme právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="e040e-168">A job pane is opened for hello runbook job that we just created.</span></span> <span data-ttu-id="e040e-169">Toto podokno můžeme zavřít, ale v takovém případě ho necháme otevřené, abychom mohli sledovat průběh úlohy hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-169">We can close this pane, but in this case we'll leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="e040e-170">Stav úlohy Hello se zobrazuje v **Souhrn úlohy** a odpovídá hello stavy, které jsme viděli při testování runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-170">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="e040e-171">![Souhrn úlohy](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-171">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span></span>
7. <span data-ttu-id="e040e-172">Jednou hello stav runbooku zobrazí *dokončeno*, klikněte na tlačítko **výstup**.</span><span class="sxs-lookup"><span data-stu-id="e040e-172">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="e040e-173">Otevře se podokno výstup Hello a My uvidíme náš *Hello, World*.</span><span class="sxs-lookup"><span data-stu-id="e040e-173">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="e040e-174">![Souhrn úlohy](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-174">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span></span>  
8. <span data-ttu-id="e040e-175">V podokně výstupu zavřít hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-175">Close hello Output pane.</span></span>
9. <span data-ttu-id="e040e-176">Klikněte na tlačítko **všechny protokoly** podokno datové proudy hello tooopen hello úloze runbooku.</span><span class="sxs-lookup"><span data-stu-id="e040e-176">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="e040e-177">Bychom měli vidět jenom *Hello, World* v hello výstupní datový proud, ale můžou se zobrazit jiné datové proudy z úlohy runbooku, například podrobný nebo Chyba Pokud hello runbook zapisuje toothem.</span><span class="sxs-lookup"><span data-stu-id="e040e-177">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="e040e-178">![Souhrn úlohy](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-178">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span></span>
10. <span data-ttu-id="e040e-179">Zavřete podokno datové proudy hello a hello úlohy tooreturn toohello MyFirstRunbook podokno.</span><span class="sxs-lookup"><span data-stu-id="e040e-179">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook pane.</span></span>
11. <span data-ttu-id="e040e-180">Klikněte na tlačítko **úlohy** tooopen hello podokno úlohy pro tuto sadu runbook.</span><span class="sxs-lookup"><span data-stu-id="e040e-180">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="e040e-181">Seznam všech hello úloh, které tento runbook vytvořil.</span><span class="sxs-lookup"><span data-stu-id="e040e-181">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="e040e-182">Bychom měli vidět jenom jednu úlohu, protože jsme ji spustili jenom hello úlohy jednou.</span><span class="sxs-lookup"><span data-stu-id="e040e-182">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="e040e-183">![Úlohy](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-183">![Jobs](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span></span>
12. <span data-ttu-id="e040e-184">Kliknutím na tuto úlohu tooopen hello stejné podokno úlohy, které jsme zobrazili při spuštění sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-184">You can click on this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="e040e-185">To vám umožní toogo zpět v čas a zobrazení hello podrobnosti libovolné úlohy, který byl vytvořen pro konkrétní runbook.</span><span class="sxs-lookup"><span data-stu-id="e040e-185">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="e040e-186">Krok 5 – Přidání ověřování toomanage prostředků Azure</span><span class="sxs-lookup"><span data-stu-id="e040e-186">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="e040e-187">Runbook jsme otestovali a publikovali, ale zatím nedělá nic užitečného.</span><span class="sxs-lookup"><span data-stu-id="e040e-187">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="e040e-188">Chceme toohave ho spravovat prostředky Azure.</span><span class="sxs-lookup"><span data-stu-id="e040e-188">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="e040e-189">Nebude moct toodo, že v případě, pokud máme ověřit pomocí hello přihlašovacích údajů, které jsou podle tooin hello [požadavky](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="e040e-189">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="e040e-190">Provedeme to pomocí hello **Add-AzureRMAccount** rutiny.</span><span class="sxs-lookup"><span data-stu-id="e040e-190">We do that with hello **Add-AzureRMAccount** cmdlet.</span></span>

1. <span data-ttu-id="e040e-191">Hello otevřete textový editor kliknutím **upravit** v podokně MyFirstRunbook-Workflow hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-191">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-Workflow pane.</span></span><br><br> <span data-ttu-id="e040e-192">![Úprava runbooku](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-192">![Edit runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span></span>
2. <span data-ttu-id="e040e-193">Společnost Microsoft nepotřebuje hello **Write-Output** řádek už, proto pokračujte a odstraňte ji.</span><span class="sxs-lookup"><span data-stu-id="e040e-193">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="e040e-194">Pozice hello kurzor na prázdný řádek mezi složené závorky hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-194">Position hello cursor on a blank line between hello braces.</span></span>
4. <span data-ttu-id="e040e-195">Zadejte nebo zkopírujte a vložte následující kód, který bude zpracovávat ověřování hello pomocí účtu spustit v Automation jako hello:</span><span class="sxs-lookup"><span data-stu-id="e040e-195">Type or copy and paste hello following code that will handle hello authentication with your Automation Run As account:</span></span>

   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
5. <span data-ttu-id="e040e-196">Klikněte na tlačítko **testovací podokno** tak, aby abychom mohli otestovat sadu runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-196">Click **Test pane** so that we can test hello runbook.</span></span>
6. <span data-ttu-id="e040e-197">Klikněte na tlačítko **spustit** toostart hello testu.</span><span class="sxs-lookup"><span data-stu-id="e040e-197">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e040e-198">Po jeho dokončení byste měli obdržet výstup podobný toohello následující, zobrazení základní informace z vašeho účtu.</span><span class="sxs-lookup"><span data-stu-id="e040e-198">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="e040e-199">Tím se potvrzuje, že hello přihlašovací údaje jsou platné.</span><span class="sxs-lookup"><span data-stu-id="e040e-199">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="e040e-200">![Ověření](media/automation-first-runbook-textual/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-200">![Authenticate](media/automation-first-runbook-textual/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="e040e-201">Krok 6 – přidání kódu toostart virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="e040e-201">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="e040e-202">Teď, když runbook umí ověřit tooour předplatné Azure, můžeme začít spravovat prostředky.</span><span class="sxs-lookup"><span data-stu-id="e040e-202">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="e040e-203">Přidáme příkaz toostart virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="e040e-203">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="e040e-204">Můžete vybrat jakýkoli virtuální počítač ve vašem předplatném Azure a prozatím jsme bude hardcoding, název v hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e040e-204">You can pick any virtual machine in your Azure subscription, and for now we will be hardcoding that name in hello runbook.</span></span>

1. <span data-ttu-id="e040e-205">Po *Add-AzureRmAccount*, typ *Start-AzureRmVM-Name 'VMName' - ResourceGroupName 'NameofResourceGroup'* poskytnutí hello název a název skupiny prostředků toostart hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="e040e-205">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  

   ```
   workflow MyFirstRunbook-Workflow
   {
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   }
   ```
2. <span data-ttu-id="e040e-206">Uložte hello runbook a pak klikněte na tlačítko **testovací podokno** tak, aby abychom mohli otestovat.</span><span class="sxs-lookup"><span data-stu-id="e040e-206">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="e040e-207">Klikněte na tlačítko **spustit** toostart hello testu.</span><span class="sxs-lookup"><span data-stu-id="e040e-207">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e040e-208">Po jeho dokončení zkontrolujte, zda text hello virtuálního počítače byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="e040e-208">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="e040e-209">Krok 7 – přidání runbook toohello služby vstupní parametr</span><span class="sxs-lookup"><span data-stu-id="e040e-209">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="e040e-210">Náš runbook aktuálně spouští hello virtuální počítač, který jsme pevně kódovaný v hello runbook, ale by být užitečnější, pokud bychom mohli zadat hello virtuální počítač při spuštění runbooku hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-210">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we could specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="e040e-211">Teď přidáme vstupní parametry toohello runbook tooprovide této funkce.</span><span class="sxs-lookup"><span data-stu-id="e040e-211">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="e040e-212">Přidání parametrů pro *VMName* a *ResourceGroupName* toohello runbook a použijte tyto proměnné s hello **Start-AzureRmVM** rutiny jako v následujícím příkladu hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-212">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>

   ```
   workflow MyFirstRunbook-Workflow
   {
    Param(
     [string]$VMName,
     [string]$ResourceGroupName
    )  
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   }
   ```
2. <span data-ttu-id="e040e-213">Uložte hello runbook a otevřete testovací podokno hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-213">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="e040e-214">Všimněte si, že teď můžete zadat hodnoty pro hello dvou vstupních proměnných, které se použijí v testu hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-214">Note that you can now provide values for hello two input variables that will be used in hello test.</span></span>
3. <span data-ttu-id="e040e-215">Zavřít hello testovací podokno.</span><span class="sxs-lookup"><span data-stu-id="e040e-215">Close hello Test pane.</span></span>
4. <span data-ttu-id="e040e-216">Klikněte na tlačítko **publikovat** toopublish hello nové verze sady runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-216">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="e040e-217">Zastavte hello virtuální počítač, který jste spustili v předchozím kroku hello.</span><span class="sxs-lookup"><span data-stu-id="e040e-217">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="e040e-218">Klikněte na tlačítko **spustit** toostart hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e040e-218">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="e040e-219">Typ v hello **VMName** a **ResourceGroupName** budete toostart hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="e040e-219">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="e040e-220">![Spuštění runbooku](media/automation-first-runbook-textual/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="e040e-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="e040e-221">Po dokončení hello runbook, zkontrolujte, zda text hello virtuálního počítače byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="e040e-221">When hello runbook completes, check that hello virtual machine was started.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="e040e-222">Další kroky</span><span class="sxs-lookup"><span data-stu-id="e040e-222">Next steps</span></span>
* <span data-ttu-id="e040e-223">tooget kroky s grafickými runbooky najdete v části [Můj první grafický runbook](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="e040e-223">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="e040e-224">tooget kroky s runbooky prostředí PowerShell najdete v části [Můj první Powershellový runbook](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="e040e-224">tooget started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="e040e-225">toolearn Další informace o typech runbooků, jejich výhody a omezení, najdete v části [typy runbooků ve službě Azure Automation](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="e040e-225">toolearn more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="e040e-226">Další informace o funkci podpory powershellových skriptů najdete v článku [Nativní podpora powershellových skriptů ve službě Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="e040e-226">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>
