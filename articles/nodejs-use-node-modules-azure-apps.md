---
title: "aaaWorking s modulů Node.js"
description: "Zjistěte, jak toowork s modulů Node.js při použití služby Azure App Service nebo cloudové služby."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="13550-103">Používání modulů Node.js s aplikacemi Azure</span><span class="sxs-lookup"><span data-stu-id="13550-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="13550-104">Tento dokument obsahuje pokyny k používání modulů Node.js s aplikacemi, které jsou hostované v Azure.</span><span class="sxs-lookup"><span data-stu-id="13550-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="13550-105">Poskytuje rady, jak zajistit, aby aplikace používala konkrétní verzi modulu, a jak používat nativní moduly s Azure.</span><span class="sxs-lookup"><span data-stu-id="13550-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="13550-106">Pokud jste již obeznámeni s použitím modulů Node.js **package.json** a **npm shrinkwrap.json** soubory, hello následující informace poskytuje rychlý přehled o co je popsané v tomto článku:</span><span class="sxs-lookup"><span data-stu-id="13550-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, hello following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="13550-107">Aplikační služba Azure rozumí **package.json** a **npm shrinkwrap.json** soubory a můžete nainstalovat moduly založené na položky v těchto souborech.</span><span class="sxs-lookup"><span data-stu-id="13550-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="13550-108">Azure Cloud Services očekávat všechny moduly toobe nainstalované na hello vývojového prostředí a hello **uzlu\_moduly** toobe adresáře, které jsou součástí balíčku pro nasazení hello.</span><span class="sxs-lookup"><span data-stu-id="13550-108">Azure Cloud Services expect all modules toobe installed on hello development environment, and hello **node\_modules** directory toobe included as part of hello deployment package.</span></span> <span data-ttu-id="13550-109">Je možné tooenable podpora pro instalaci modulů pomocí **package.json** nebo **npm shrinkwrap.json** soubory na cloudových služeb, ale tato konfigurace vyžaduje přizpůsobení hello výchozí skripty, které používá projekty cloudových služeb.</span><span class="sxs-lookup"><span data-stu-id="13550-109">It is possible tooenable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of hello default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="13550-110">Pro příklad tooconfigure tohoto prostředí najdete v části [Azure spuštění úloh toorun npm nainstalujte tooavoid nasazení uzlu moduly](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="13550-110">For an example of how tooconfigure this environment, see [Azure Startup task toorun npm install tooavoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="13550-111">Virtuální počítače Azure nejsou popsané v tomto článku jako hello možnosti nasazení do virtuálního počítače, je závislá na hello operačního systému hostované hello virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="13550-111">Azure Virtual Machines are not discussed in this article, as hello deployment experience in a VM is dependent on hello operating system hosted by hello Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="13550-112">Modulů Node.js</span><span class="sxs-lookup"><span data-stu-id="13550-112">Node.js Modules</span></span>
<span data-ttu-id="13550-113">Moduly jsou načíst JavaScript balíčky, které poskytují funkce specifická pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="13550-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="13550-114">Moduly jsou obvykle nainstalován pomocí hello **npm** příkazového řádku nástroje, ale jsou uvedeny některé moduly (jako je například modul http hello) jako součást balíčku Node.js hello jádra.</span><span class="sxs-lookup"><span data-stu-id="13550-114">Modules are usually installed using hello **npm** command-line tool, however some modules (such as hello http module) are provided as part of hello core Node.js package.</span></span>

<span data-ttu-id="13550-115">Při instalaci moduly jsou uložené v hello **uzlu\_moduly** adresář na hello kořenového adresáře aplikace adresářové struktury.</span><span class="sxs-lookup"><span data-stu-id="13550-115">When modules are installed, they are stored in hello **node\_modules** directory at hello root of your application directory structure.</span></span> <span data-ttu-id="13550-116">Každý modul v rámci hello **uzlu\_moduly** directory udržuje vlastní **uzlu\_moduly** adresář, který obsahuje všechny moduly, které závisí na a toto chování se opakuje pro každý modul všechny hello směrem dolů řetězec závislostí hello.</span><span class="sxs-lookup"><span data-stu-id="13550-116">Each module within hello **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all hello way down hello dependency chain.</span></span> <span data-ttu-id="13550-117">Toto prostředí umožňuje každý modul nainstalovaný toohave požadavky svou vlastní verzi hello moduly, že závisí na, ale může vést k poměrně velké adresářové struktury.</span><span class="sxs-lookup"><span data-stu-id="13550-117">This environment allows each module installed toohave its own version requirements for hello modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="13550-118">Nasazení hello **uzlu\_moduly** adresáři jako součást aplikace zvyšuje velikost hello hello nasazení srovnání toousing **package.json** nebo  **npm shrinkwrap.json** soubor; však zaručit, že hello verzích hello moduly používané v produkčním prostředí jsou text hello stejné jako hello moduly používané v vývoj.</span><span class="sxs-lookup"><span data-stu-id="13550-118">Deploying hello **node\_modules** directory as part of your application increases hello size of hello deployment when compared toousing a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that hello versions of hello modules used in production are hello same as hello modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="13550-119">Nativní moduly</span><span class="sxs-lookup"><span data-stu-id="13550-119">Native Modules</span></span>
<span data-ttu-id="13550-120">Většina moduly jsou soubory JavaScript jednoduše prostého textu, některé moduly jsou specifické pro platformu binární bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="13550-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="13550-121">Tyto moduly jsou kompilovány během instalace, obvykle pomocí Pythonu a gyp uzlu.</span><span class="sxs-lookup"><span data-stu-id="13550-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="13550-122">Vzhledem k tomu, že Azure Cloud Services spoléhají na hello **uzlu\_moduly** složky, které jsou nasazované jako součást aplikace hello žádné nativní modul zahrnuty jako součást hello nainstalované moduly by měly fungovat v cloudové službě, dokud se nainstalovaná a kompilovat v systému Windows, vývoj.</span><span class="sxs-lookup"><span data-stu-id="13550-122">Since Azure Cloud Services rely on hello **node\_modules** folder being deployed as part of hello application, any native module included as part of hello installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="13550-123">Aplikační služba Azure nepodporuje všechny nativní moduly a může selhat, když kompilujete modulů s konkrétní požadavky.</span><span class="sxs-lookup"><span data-stu-id="13550-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="13550-124">I když některé oblíbené moduly jako MongoDB mají volitelné nativní závislosti a bez problémů fungují bez nich, prokázat dvě řešení úspěšné s téměř všechny nativní moduly, které jsou k dispozici dnes:</span><span class="sxs-lookup"><span data-stu-id="13550-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="13550-125">Spustit **npm nainstalujte** na počítači s Windows, který má všechny hello nativního modulu nainstalovány požadované součásti.</span><span class="sxs-lookup"><span data-stu-id="13550-125">Run **npm install** on a Windows machine that has all hello native module's prerequisites installed.</span></span> <span data-ttu-id="13550-126">Potom nasaďte hello vytvořit **uzlu\_moduly** složku jako součást tooAzure hello aplikace služby App Service.</span><span class="sxs-lookup"><span data-stu-id="13550-126">Then, deploy hello created **node\_modules** folder as part of hello application tooAzure App Service.</span></span>

  * <span data-ttu-id="13550-127">Před kompilování, zkontrolujte, zda vaše místní instalace Node.js má odpovídající architektuře a verzi hello je co možná toohello používá v Azure (hello aktuální hodnoty lze zkontrolovat na runtime z vlastností **process.arch**a **process.version**).</span><span class="sxs-lookup"><span data-stu-id="13550-127">Before compiling, check that your local Node.js installation has matching architecture and hello version is as close as possible toohello one used in Azure (hello current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="13550-128">Aplikační služba Azure může být nakonfigurované tooexecute vlastní bash nebo skripty prostředí během nasazení, která poskytuje hello možnost tooexecute vlastní příkazy a přesněji nakonfigurovat hello způsob **npm nainstalujte** je spuštěn.</span><span class="sxs-lookup"><span data-stu-id="13550-128">Azure App Service can be configured tooexecute custom bash or shell scripts during deployment, giving you hello opportunity tooexecute custom commands and precisely configure hello way **npm install** is being run.</span></span> <span data-ttu-id="13550-129">Pro video znázorňující způsob tooconfigure prostředí, najdete v části [skriptů nasazení vlastní web s Kudu].</span><span class="sxs-lookup"><span data-stu-id="13550-129">For a video showing how tooconfigure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="13550-130">Pomocí souboru package.json</span><span class="sxs-lookup"><span data-stu-id="13550-130">Using a package.json file</span></span>
<span data-ttu-id="13550-131">Hello **package.json** soubor je způsob toospecify hello nejvyšší úrovně závislosti vaše aplikace vyžaduje, aby hello hostující platforma můžete nainstalovat hello závislosti, namísto nutnosti tooinclude hello **uzlu \_balíčky** složku jako součást nasazení hello.</span><span class="sxs-lookup"><span data-stu-id="13550-131">hello **package.json** file is a way toospecify hello top-level dependencies your application requires so that hello hosting platform can install hello dependencies, rather than requiring you tooinclude hello **node\_packages** folder as part of hello deployment.</span></span> <span data-ttu-id="13550-132">Po nasazení aplikace hello hello **npm nainstalujte** příkaz je použité tooparse hello **package.json** souboru a nainstalujte všechny uvedené závislosti hello.</span><span class="sxs-lookup"><span data-stu-id="13550-132">After hello application has been deployed, hello **npm install** command is used tooparse hello **package.json** file and install all hello dependencies listed.</span></span>

<span data-ttu-id="13550-133">Během vývoje, můžete použít hello **– Uložit**, **– uložit dev**, nebo **– uložit volitelné** parametry při instalaci modulů tooadd položka pro hello modulu tooyour **package.json** souboru automaticky.</span><span class="sxs-lookup"><span data-stu-id="13550-133">During development, you can use hello **--save**, **--save-dev**, or **--save-optional** parameters when installing modules tooadd an entry for hello module tooyour **package.json** file automatically.</span></span> <span data-ttu-id="13550-134">Další informace najdete v tématu [npm install](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="13550-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="13550-135">Jeden možný problém s hello **package.json** soubor je, že pouze určuje hello verze závislosti nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="13550-135">One potential problem with hello **package.json** file is that it only specifies hello version for top-level dependencies.</span></span> <span data-ttu-id="13550-136">Každý modul nainstalovaný může nebo nemusí zadejte verzi hello hello modulů, které závisí na, a proto je možné, že můžete dospět řetězem různých závislostí než hello používá v vývoj.</span><span class="sxs-lookup"><span data-stu-id="13550-136">Each module installed may or may not specify hello version of hello modules it depends on, and so it is possible that you may end up with a different dependency chain than hello one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="13550-137">Pokud se nasazuje tooAzure služby App Service vaše <b>package.json</b> soubor odkazuje na nativní modul, může dojít k chybě podobné toohello následující ukázka při publikování aplikace hello pomocí Git:</span><span class="sxs-lookup"><span data-stu-id="13550-137">When deploying tooAzure App Service, if your <b>package.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="13550-138">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="13550-138">npm ERR!</span></span> <span data-ttu-id="13550-139">module-name@0.6.0Nainstalujte: 'uzlu gyp konfigurace buildu.</span><span class="sxs-lookup"><span data-stu-id="13550-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="13550-140">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="13550-140">npm ERR!</span></span> <span data-ttu-id="13550-141">' cmd "/ c" "uzlu gyp konfigurace sestavení" ' se nezdařilo s 1</span><span class="sxs-lookup"><span data-stu-id="13550-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="13550-142">Pomocí npm shrinkwrap.json souboru.</span><span class="sxs-lookup"><span data-stu-id="13550-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="13550-143">Hello **npm shrinkwrap.json** soubor je pokusu o tooaddress hello modul Správa verzí omezení hello **package.json** souboru.</span><span class="sxs-lookup"><span data-stu-id="13550-143">hello **npm-shrinkwrap.json** file is an attempt tooaddress hello module versioning limitations of hello **package.json** file.</span></span> <span data-ttu-id="13550-144">Při hello **package.json** souboru obsahuje pouze verze pro moduly nejvyšší úrovně hello hello **npm shrinkwrap.json** soubor obsahuje hello požadavky verze pro řetězec závislostí úplné modulu hello.</span><span class="sxs-lookup"><span data-stu-id="13550-144">While hello **package.json** file only includes versions for hello top-level modules, hello **npm-shrinkwrap.json** file contains hello version requirements for hello full module dependency chain.</span></span>

<span data-ttu-id="13550-145">Když je aplikace připravená pro vydání, můžete uzamknout požadavky verze a vytvořit **npm shrinkwrap.json** souboru pomocí hello **npm shrinkwrap** příkaz.</span><span class="sxs-lookup"><span data-stu-id="13550-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using hello **npm shrinkwrap** command.</span></span> <span data-ttu-id="13550-146">Tento příkaz bude používat na hello aktuálně nainstalovaná verze hello **uzlu\_moduly** složku a zaznamenejte tyto verze toohello **npm shrinkwrap.json** souboru.</span><span class="sxs-lookup"><span data-stu-id="13550-146">This command will use hello versions currently installed in hello **node\_modules** folder, and record these versions toohello **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="13550-147">Po hello aplikace nasazené toohello hostování prostředí, hello **npm nainstalujte** příkaz je použité tooparse hello **npm shrinkwrap.json** souboru a nainstalujte všechny uvedené závislosti hello.</span><span class="sxs-lookup"><span data-stu-id="13550-147">After hello application has been deployed toohello hosting environment, hello **npm install** command is used tooparse hello **npm-shrinkwrap.json** file and install all hello dependencies listed.</span></span> <span data-ttu-id="13550-148">Další informace najdete v tématu [npm shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="13550-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="13550-149">Pokud se nasazuje tooAzure služby App Service vaše <b>npm shrinkwrap.json</b> soubor odkazuje na nativní modul, může dojít k chybě podobné toohello následující ukázka při publikování aplikace hello pomocí Git:</span><span class="sxs-lookup"><span data-stu-id="13550-149">When deploying tooAzure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="13550-150">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="13550-150">npm ERR!</span></span> <span data-ttu-id="13550-151">module-name@0.6.0Nainstalujte: 'uzlu gyp konfigurace buildu.</span><span class="sxs-lookup"><span data-stu-id="13550-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="13550-152">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="13550-152">npm ERR!</span></span> <span data-ttu-id="13550-153">' cmd "/ c" "uzlu gyp konfigurace sestavení" ' se nezdařilo s 1</span><span class="sxs-lookup"><span data-stu-id="13550-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="13550-154">Další kroky</span><span class="sxs-lookup"><span data-stu-id="13550-154">Next steps</span></span>
<span data-ttu-id="13550-155">Teď, když znáte jak toouse modulů Node.js s Azure, zjistěte, jak příliš[určení verze Node.js hello], [sestavení a nasazení webové aplikace Node.js](app-service-web/app-service-web-get-started-nodejs.md), a [jak toouse hello příkazového řádku Azure Rozhraní pro Mac a Linux].</span><span class="sxs-lookup"><span data-stu-id="13550-155">Now that you understand how toouse Node.js modules with Azure, learn how too[specify hello Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How toouse hello Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="13550-156">Další informace najdete v tématu hello [středisku pro vývojáře Node.js](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="13550-156">For more information, see hello [Node.js Developer Center](/nodejs/azure/).</span></span>

[určení verze Node.js hello]: nodejs-specify-node-version-azure-apps.md
[jak toouse hello příkazového řádku Azure Rozhraní pro Mac a Linux]:cli-install-nodejs.md
[skriptů nasazení vlastní web s Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo
