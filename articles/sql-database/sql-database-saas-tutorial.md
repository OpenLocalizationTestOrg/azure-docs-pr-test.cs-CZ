---
title: "Nasazení a prozkoumejte aplikace Wingtip SaaS více klientů, která používá Azure SQL Database | Microsoft Docs"
description: "Nasazení a prozkoumejte víceklientské aplikace Wingtip SaaS, která demonstruje SaaS vzory pro používání Azure SQL Database."
keywords: kurz k sql database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: b09bfa8a5bc22a092e963f351e99c16d0e9a57ba
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="8c1f2-104">Nasazení a prozkoumejte víceklientské aplikace, která používá Azure SQL Database – Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="8c1f2-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="8c1f2-105">V tomto kurzu nasazení a prozkoumejte Wingtip SaaS aplikace.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-105">In this tutorial, you deploy and explore the Wingtip SaaS application.</span></span> <span data-ttu-id="8c1f2-106">Aplikace používá k poskytování služeb více tenantům strukturu SaaS aplikací, tj. s jednou databází pro každého tenanta.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-106">The application uses a database-per-tenant, SaaS application pattern, to service multiple tenants.</span></span> <span data-ttu-id="8c1f2-107">Aplikace je navržená ke prezentují funkce databáze SQL Azure, které zjednodušují povolení SaaS scénáře.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-107">The application is designed to showcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="8c1f2-108">Pět minut po kliknutí na tlačítko *Nasadit do Azure* zobrazené níže budete mít k dispozici SaaS aplikaci pro více klientů využívající službu SQL Database, která bude běžet v cloudu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-108">Five minutes after clicking the *Deploy to Azure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in the cloud.</span></span> <span data-ttu-id="8c1f2-109">Aplikace se nasazuje s tři ukázkové klientů, každý s svou vlastní databázi, všechny nasazené do elastický fond SQL.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-109">The application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="8c1f2-110">Aplikace se nasadí do vašeho předplatného Azure, která poskytuje úplný přístup k prozkoumávání a pracovat jednotlivé součásti aplikace.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-110">The app is deployed to your Azure subscription, giving you full access to explore and work with the individual application components.</span></span> <span data-ttu-id="8c1f2-111">Zdrojový kód a správu skripty aplikace jsou k dispozici v úložišti WingtipSaaS GitHub.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-111">The application source code and management scripts are available in the WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="8c1f2-112">V tomto kurzu se dozvíte:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="8c1f2-113">Postup nasazení aplikace Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="8c1f2-113">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="8c1f2-114">Kde lze získat zdrojovému kódu aplikace a skripty pro správu</span><span class="sxs-lookup"><span data-stu-id="8c1f2-114">Where to get the application source code, and management scripts</span></span>
> * <span data-ttu-id="8c1f2-115">O serverech, fondech a databázích, které aplikaci tvoří</span><span class="sxs-lookup"><span data-stu-id="8c1f2-115">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="8c1f2-116">Jak klienti jsou mapované na svoje data pomocí *katalogu*</span><span class="sxs-lookup"><span data-stu-id="8c1f2-116">How tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="8c1f2-117">Jak zřídit nového klienta</span><span class="sxs-lookup"><span data-stu-id="8c1f2-117">How to provision a new tenant</span></span>
> * <span data-ttu-id="8c1f2-118">Postup sledování klientů aktivity v aplikaci</span><span class="sxs-lookup"><span data-stu-id="8c1f2-118">How to monitor tenant activity in the app</span></span>

<span data-ttu-id="8c1f2-119">K prozkoumání různých vzorů návrhu a správy SaaS aplikace máte k dispozici [řadu souvisejících kurzů](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials), které vycházejí z tohoto počátečního nasazení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-119">To explore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="8c1f2-120">Při procházení těmito kurzy se důkladně podívejte na uvedené skripty a vyzkoušejte si, jak jsou implementované různé vzory SaaS.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-120">While going through the tutorials, dive into the provided scripts, and examine how the different SaaS patterns are implemented.</span></span> <span data-ttu-id="8c1f2-121">Projděte si krok po kroku skripty v každém kurzu, abyste detailně porozuměli způsobu implementace mnoha funkcí služby SQL Database, které zjednodušují vývoj SaaS aplikací.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-121">Step through the scripts in each tutorial to gain a deeper understanding how to implement the many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8c1f2-122">Požadavky</span><span class="sxs-lookup"><span data-stu-id="8c1f2-122">Prerequisites</span></span>

<span data-ttu-id="8c1f2-123">Předpokladem dokončení tohoto kurzu je splnění následujících požadavků:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-123">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="8c1f2-124">Prostředí Azure PowerShell je nainstalované.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="8c1f2-125">Podrobnosti najdete v článku [Začínáme s prostředím Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-the-wingtip-saas-application"></a><span data-ttu-id="8c1f2-126">Nasazení aplikace Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="8c1f2-126">Deploy the Wingtip SaaS application</span></span>

<span data-ttu-id="8c1f2-127">Nasazení adresář Wingtip aplikace SaaS:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-127">Deploy the Wingtip SaaS app:</span></span>

1. <span data-ttu-id="8c1f2-128">Kliknutím **nasadit do Azure** tlačítko otevře portálu Azure do šablony nasazení Wingtip SaaS.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-128">Clicking the **Deploy to Azure** button opens the Azure portal to the Wingtip SaaS deployment template.</span></span> <span data-ttu-id="8c1f2-129">Šablona vyžaduje dvě hodnoty parametrů; název pro novou skupinu prostředků a uživatelské jméno, která odlišuje od jiných nasazení aplikace Wingtip SaaS toto nasazení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-129">The template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of the Wingtip SaaS app.</span></span> <span data-ttu-id="8c1f2-130">Dalším krokem poskytuje podrobnosti pro tyto hodnoty nastavení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-130">The next step provides details for setting these values.</span></span>

   <span data-ttu-id="8c1f2-131">Zajistěte, aby si přesné hodnoty, které chcete použít, protože budete potřebovat později je zadat do konfiguračního souboru.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-131">Make sure to note the exact values that you use, because you will need to enter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="8c1f2-132">Zadejte hodnoty parametrů požadované pro vaše nasazení:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-132">Enter required parameter values for the deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="8c1f2-133">Některá ověřování a brány firewall serveru jsou pro demonstrační účely záměrně nezabezpečené.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="8c1f2-134">**Vytvořit novou skupinu prostředků**a nepoužívejte existující skupiny prostředků, serverům nebo fondů.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="8c1f2-135">Tato aplikace nebo všechny prostředky, který vytváří, nepoužívejte pro produkční prostředí.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="8c1f2-136">Po ukončení práce s aplikací tuto skupinu prostředků odstraňte, aby se zastavilo související účtování.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-136">Delete this resource group when you are finished with the application to stop related billing.</span></span>

    * <span data-ttu-id="8c1f2-137">**Skupina prostředků** – vyberte **vytvořit nový** a poskytují **název** pro skupinu prostředků.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-137">**Resource group** - Select **Create new** and provide a **Name** for the resource group.</span></span> <span data-ttu-id="8c1f2-138">Vyberte **umístění** z rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-138">Select a **Location** from the drop-down list.</span></span>
    * <span data-ttu-id="8c1f2-139">**Uživatel** -některé prostředky, vyžadují názvy, které jsou globálně jedinečné.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="8c1f2-140">Aby jedinečnosti pokaždé, když nasazujete aplikace zadat hodnotu k odlišení prostředků, které vytvoříte, z prostředků, které jsou vytvořené nasazení Wingtip aplikace.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-140">To ensure uniqueness, each time you deploy the application provide a value to differentiate resources you create, from resources created by any other deployment of the Wingtip application.</span></span> <span data-ttu-id="8c1f2-141">Doporučuje se použít krátké **uživatel**ské jméno, třeba vaše iniciály, a číslo (například *bg1*) a to potom používat v názvu skupiny prostředků (například *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-141">It’s recommended to use a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in the resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="8c1f2-142">**Uživatele** parametru může obsahovat pouze písmena, číslice a pomlčky (bez mezer).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="8c1f2-143">První a poslední znak musí být písmeno nebo číslo (doporučuje se používat všechna písmena malá).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-143">The first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="8c1f2-144">**Nasaďte aplikaci**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-144">**Deploy the application**.</span></span>

    * <span data-ttu-id="8c1f2-145">Kliknutím na tlačítko přijmout podmínky a ujednání.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-145">Click to agree to the terms and conditions.</span></span>
    * <span data-ttu-id="8c1f2-146">Klikněte na **Koupit**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="8c1f2-147">Kliknutím na **Oznámení** (ikona zvonku napravo od vyhledávacího pole) můžete monitorovat stav nasazení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-147">Monitor deployment status by clicking **Notifications** (the bell icon right of the search box).</span></span> <span data-ttu-id="8c1f2-148">Nasazení aplikace Wingtip SaaS trvá přibližně pět minut.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-148">Deploying the Wingtip SaaS app takes approximately five minutes.</span></span>

   ![nasazení bylo úspěšné](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a><span data-ttu-id="8c1f2-150">Stáhněte si a odblokování skripty Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="8c1f2-150">Download and unblock the Wingtip SaaS scripts</span></span>

<span data-ttu-id="8c1f2-151">Zatímco je nasazení aplikace, stáhněte si skripty zdrojový kód a správu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-151">While the application is deploying, download the source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8c1f2-152">Spustitelný soubor obsah (skripty, knihovny DLL) mohou být blokovány Windows, když jsou soubory zip stažené z externího zdroje a rozbalené.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="8c1f2-153">Při extrahování skripty ze souboru zip, použijte následující postup odblokování před extrahování souboru ZIP.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-153">When extracting the scripts from a zip file, follow the steps below to unblock the .zip file before extracting.</span></span> <span data-ttu-id="8c1f2-154">Tím se zajistí, že je povoleno spustit skripty.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-154">This ensures the scripts are allowed to run.</span></span>

1. <span data-ttu-id="8c1f2-155">Přejděte do [úložiště github Wingtip SaaS](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-155">Browse to [the Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="8c1f2-156">Klikněte na tlačítko **klonovat nebo stáhnout**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="8c1f2-157">Klikněte na tlačítko **stáhnout ZIP** a soubor uložte.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-157">Click **Download ZIP** and save the file.</span></span>
1. <span data-ttu-id="8c1f2-158">Klikněte pravým tlačítkem myši **WingtipSaaS-master.zip** soubor a vyberte **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-158">Right-click the **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="8c1f2-159">Na **Obecné** vyberte **Odblokovat**a klikněte na tlačítko **použít**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-159">On the **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="8c1f2-160">Klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-160">Click **OK**.</span></span>
1. <span data-ttu-id="8c1f2-161">Extrahujte soubory.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-161">Extract the files.</span></span>

<span data-ttu-id="8c1f2-162">Skripty, které jsou umístěné v *... \\WingtipSaaS hlavní\\Learning moduly* složky.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-162">Scripts are located in the *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-the-configuration-file-for-this-deployment"></a><span data-ttu-id="8c1f2-163">Aktualizace konfiguračního souboru pro toto nasazení</span><span class="sxs-lookup"><span data-stu-id="8c1f2-163">Update the configuration file for this deployment</span></span>

<span data-ttu-id="8c1f2-164">Před spuštěním všech skriptů, nastavte *skupiny prostředků* a *uživatele* hodnoty v **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-164">Before running any scripts, set the *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="8c1f2-165">Nastavte tyto proměnné na hodnoty, které můžete zadat během nasazování.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-165">Set these variables to the values you set during deployment.</span></span>

1. <span data-ttu-id="8c1f2-166">V *prostředí PowerShell ISE* otevřete ...\\Learning Modules\\*UserConfig.psm1*.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-166">Open ...\\Learning Modules\\*UserConfig.psm1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="8c1f2-167">Aktualizace *ResourceGroupName* a *název* s konkrétními hodnotami pro vaše nasazení (na řádky 10 a 11 pouze).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-167">Update *ResourceGroupName* and *Name* with the specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="8c1f2-168">Uložte změny!</span><span class="sxs-lookup"><span data-stu-id="8c1f2-168">Save the changes!</span></span>

<span data-ttu-id="8c1f2-169">Toto nastavení tady jednoduše nebude nutné aktualizovat tyto hodnoty specifické pro nasazení v každé skriptu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-169">Setting this here simply keeps you from having to update these deployment-specific values in every script.</span></span>

## <a name="run-the-application"></a><span data-ttu-id="8c1f2-170">Spuštění aplikace</span><span class="sxs-lookup"><span data-stu-id="8c1f2-170">Run the application</span></span>

<span data-ttu-id="8c1f2-171">Aplikace prezentuje místa, například koncertní sály, jazzové kluby a sportovní kluby, ve kterých se konají akce.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-171">The app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="8c1f2-172">Místa zaregistrovat jako zákazníky (nebo klienty) na platformě Wingtip snadný způsob, jak zobrazit seznam událostí a prodej lístků.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-172">Venues register as customers (or tenants) of the Wingtip platform, for an easy way to list events and sell tickets.</span></span> <span data-ttu-id="8c1f2-173">Každé místo dostane vlastní webovou aplikaci pro správu a výpis svých akcí a prodej lístků, nezávislou a izolovanou od ostatních tenantů.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-173">Each venue gets a personalized web app to manage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="8c1f2-174">V pozadí každý klient získá databázi SQL, který je nasazený do elastický fond SQL.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-174">Under the covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="8c1f2-175">Centrální **Centrum akcí** obsahuje seznam adres URL tenantů specifických pro vaše nasazení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-175">A central **Events Hub** provides a list of tenant URLs specific to your deployment.</span></span>

1. <span data-ttu-id="8c1f2-176">Otevřete _události rozbočovače_ ve webovém prohlížeči: http://events.wtp.&lt; Uživatel&gt;. trafficmanager.net (nahraďte názvem vašeho nasazení uživatelské jméno):</span><span class="sxs-lookup"><span data-stu-id="8c1f2-176">Open the _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![centrum akcí](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="8c1f2-178">V *Centru akcí* klikněte na **Fabrikam Jazz Club**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Události](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="8c1f2-180">K řízení distribuce příchozí požadavky a používá aplikace [ *Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-180">To control the distribution of incoming requests, the app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="8c1f2-181">Stránky akcí, které jsou specifické pro každého tenanta, vyžadují, aby byly názvy tenantů součástí adres URL.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-181">The events pages, which are tenant-specific, require that tenant names are included in the URLs.</span></span> <span data-ttu-id="8c1f2-182">Všechny adresy URL tenantů zahrnují konkrétní hodnotu *uživatel* a mají tento formát: http://events.wtp.&lt;UŽIVATEL&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-182">All the tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="8c1f2-183">Aplikace akcí analyzuje název tenanta z adresy URL a z něj vytvoří klíč pro přístup ke katalogu pomocí [*správy mapování horizontálního dělení*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-183">The events app parses the tenant name from the URL and uses it to create a key to access a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="8c1f2-184">Katalog mapuje klíč klienta umístění databáze.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-184">The catalog maps the key to the tenant's database location.</span></span> <span data-ttu-id="8c1f2-185">**Události rozbočovače** používá rozšířené metadata v katalogu načíst název klienta, které jsou spojené s každou databázi, aby zajistil seznam adres URL.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-185">The **Events Hub** uses extended metadata in the catalog to retrieve the tenant’s name associated with each database to provide the list of URLs.</span></span>

<span data-ttu-id="8c1f2-186">V produkčním prostředí byste obvykle vytvořili záznam CNAME DNS k [*nasměrování internetové domény společnosti*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) na profil Traffic Manageru.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to the traffic manager profile.</span></span>

## <a name="start-generating-load-on-the-tenant-databases"></a><span data-ttu-id="8c1f2-187">Spuštění generování zatížení databází tenantů</span><span class="sxs-lookup"><span data-stu-id="8c1f2-187">Start generating load on the tenant databases</span></span>

<span data-ttu-id="8c1f2-188">Teď, když je aplikace nasazena, přidejme ho na spolupráci!</span><span class="sxs-lookup"><span data-stu-id="8c1f2-188">Now that the app is deployed, let’s put it to work!</span></span> <span data-ttu-id="8c1f2-189">*Ukázku LoadGenerator* zatížení spuštěným pro všechny databáze klienta spustí skript prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-189">The *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="8c1f2-190">Skutečné zatížení velký počet aplikací SaaS je obvykle ojediněle a nepředvídatelným.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-190">The real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="8c1f2-191">Pro simulaci tento typ zatížení, vytvoří generátor zatížení distribuovaná do všech klientů s náhodnou shluky na každého klienta, ke kterým dochází v náhodnou intervalech.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-191">To simulate this type of load, the generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="8c1f2-192">Z tohoto důvodu trvá několik minut pro vzor zatížení objeví proto je nejlepší umožníte generátor spustit alespoň tři nebo čtyři minut před monitorování zatížení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-192">Because of this it takes several minutes for the load pattern to emerge, so it’s best to let the generator run for at least three or four minutes before monitoring the load.</span></span>

1. <span data-ttu-id="8c1f2-193">V *prostředí PowerShell ISE*, otevřete... \\Learning moduly\\nástroje\\*ukázku LoadGenerator.ps1* skriptu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-193">In the *PowerShell ISE*, open the ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="8c1f2-194">Stisknutím **F5** spusťte skript s generátorem zatížení (zatím nechejte nastavené výchozí hodnoty parametrů).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-194">Press **F5** to run the script and start the load generator (leave the default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8c1f2-195">Pokud chcete spustit další skripty, otevřete nové okno prostředí PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-195">To run other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="8c1f2-196">Generátor zatížení běží jako řada úloh v místní relaci prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-196">The load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="8c1f2-197">*Ukázku LoadGenerator.ps1* skript se spustí na aktuální zatížení generátor skript, který se spouští jako úlohu popředí plus řadu úloh na pozadí generování zatížení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-197">The *Demo-LoadGenerator.ps1* script kicks off the actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="8c1f2-198">Pro každou databázi zaregistrovány v katalogu je volána úlohu generátor zatížení.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-198">A load-generator job is invoked for each database registered in the catalog.</span></span> <span data-ttu-id="8c1f2-199">Úlohy jsou spuštěny v místní relace prostředí PowerShell, takže ukončení relace prostředí PowerShell zastaví všechny úlohy.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-199">The jobs are running in your local PowerShell session, so closing the PowerShell session stops all jobs.</span></span> <span data-ttu-id="8c1f2-200">Pokud přepnete na váš počítač, generování zatížení je pozastavený a bude pokračovat, až budete probouzet svůj počítač.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="8c1f2-201">Jakmile generátor zatížení vyvolá zatížení generování úlohy pro každého klienta, úkol popředí zůstane v vyvolání úlohy stavu, kdy začne další úlohy pro jakékoli nové klienty, které jsou následně zřízené.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-201">Once the load generator invokes load-generation jobs for each tenant, the foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="8c1f2-202">Můžete použít *Ctrl-C* nebo stiskněte klávesu *Zastavit* tlačítko Zastavit úlohu popředí, ale stávající úlohy na pozadí bude pokračovat generování zatížení na každou databázi.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-202">You can use *Ctrl-C* or press the *Stop* button to stop the foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="8c1f2-203">Pokud potřebujete monitorovat a řídit úlohy na pozadí, použijte *Get-Job*, *Receive-Job* a *úlohu zastavení*.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-203">If you need to monitor and control the background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="8c1f2-204">Když je spuštěn úkol popředí nemůžete použít stejné relace prostředí PowerShell provést jiné skripty.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-204">While the foreground task is running you cannot use the same PowerShell session to execute other scripts.</span></span> <span data-ttu-id="8c1f2-205">Pokud chcete spustit další skripty, otevřete nové okno prostředí PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-205">To run other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="8c1f2-206">Pokud chcete restartovat relace generátor zatížení, například s odlišnými parametry, můžete zastavit úlohu popředí a poté znovu spusťte *ukázku LoadGenerator.ps1* skriptu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-206">If you want to restart the load generator session, for example with different parameters, you can stop the foreground task and then re-run the *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="8c1f2-207">Opětovné spuštění *ukázku LoadGenerator.ps1* první zastaví všechny aktuálně spuštěné úlohy a potom restartuje generátor, který se spustí novou sadu úloh s parametry.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts the generator, which kicks off a new set of jobs using the current parameters.</span></span>

<span data-ttu-id="8c1f2-208">Nyní ponechte generátor zatížení spuštěna ve stavu vyvolání úlohy.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-208">For now, leave the load generator running in the job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="8c1f2-209">Zřízení nového tenanta</span><span class="sxs-lookup"><span data-stu-id="8c1f2-209">Provision a new tenant</span></span>

<span data-ttu-id="8c1f2-210">Počáteční nasazení vytvoří tři ukázkové klienty, ale vytvoříme jiného klienta, pokud chcete zobrazit, jak to ovlivní nasazené aplikace.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-210">The initial deployment creates three sample tenants, but let’s create another tenant to see how this impacts the deployed application.</span></span> <span data-ttu-id="8c1f2-211">Pracovní postup zřizování klientů Wingtip SaaS je podrobně popsaná v [kurzu zřizování a katalog](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-211">The Wingtip SaaS provisioning-tenants workflow is detailed in the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="8c1f2-212">V tomto kroku rychle vytvořit nového klienta.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="8c1f2-213">V *prostředí PowerShell ISE* otevřete ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1*.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="8c1f2-214">Stiskněte klávesu **F5** pro spuštění skriptu (ponechte výchozí hodnoty pro nyní).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-214">Press **F5** to run the script (leave the default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="8c1f2-215">Použít mnoho skriptů Wingtip SaaS *$PSScriptRoot* povolit procházení složek, které chcete volat funkce v jiné skripty.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-215">Many Wingtip SaaS scripts use *$PSScriptRoot* to allow navigating folders to call functions in other scripts.</span></span> <span data-ttu-id="8c1f2-216">Tato proměnná je Vyhodnocená jenom když skript se spustí, stisknutím klávesy **F5**.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-216">This variable is only evaluated when the script is executed by pressing **F5**.</span></span>  <span data-ttu-id="8c1f2-217">Zvýraznění a spuštění výběr (**F8**) může vést k chybám, takže stiskněte **F5** při spouštění skriptů.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="8c1f2-218">Novou databázi klienta je vytvořen elastický fond SQL, inicializovat a zaregistrovány v katalogu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-218">The new tenant database is created in a SQL elastic pool, initialized and registered in the catalog.</span></span> <span data-ttu-id="8c1f2-219">Po úspěšném zřízení, je k novému klientovi prodávané ticket *události* server se zobrazí v prohlížeči:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-219">After successful provisioning, the new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Nový tenant](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="8c1f2-221">Obnovit *události rozbočovače* a k novému klientovi se teď zobrazí v seznamu.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-221">Refresh the *Events Hub* and the new tenant now appears in the list.</span></span>


## <a name="explore-the-servers-pools-and-tenant-databases"></a><span data-ttu-id="8c1f2-222">Zkoumání serverů, fondů a databází tenantů</span><span class="sxs-lookup"><span data-stu-id="8c1f2-222">Explore the servers, pools, and tenant databases</span></span>

<span data-ttu-id="8c1f2-223">Teď, když jste spuštění, spuštění zátěžového proti kolekci klientů, podíváme se na některé prostředky, které byly nasazeny:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-223">Now that you've started running a load against the collection of tenants, let’s look at some of the resources that were deployed:</span></span>

1. <span data-ttu-id="8c1f2-224">V [portál Azure](http://portal.azure.com), přejděte do seznamu serverů SQL Server a otevřete **katalogu -&lt;uživatele&gt;**  serveru.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-224">In the [Azure portal](http://portal.azure.com), browse to your list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="8c1f2-225">Na serveru katalogu jsou dvě databáze.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-225">The catalog server contains two databases.</span></span> <span data-ttu-id="8c1f2-226">**Tenantcatalog**a **basetenantdb** (prázdnou *zlaté* nebo databáze šablony, která se zkopírují k vytvoření nové klienty).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-226">The **tenantcatalog**, and the **basetenantdb** (an empty *golden* or template database that is copied to create new tenants).</span></span>

   ![databáze](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="8c1f2-228">Přejděte zpět do seznamu systému SQL Server a otevřete **tenants1 -&lt;uživatele&gt;**  serveru, který obsahuje databáze klienta.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-228">Go back to your list of SQL servers and open the **tenants1-&lt;USER&gt;** server that holds the tenant databases.</span></span> <span data-ttu-id="8c1f2-229">Každá databáze klienta je _elastické standardní_ databáze ve fondu standardní 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="8c1f2-230">Také Všimněte si, že je _Red javor Racing_ databázi, databázi klienta můžete zřízené.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-230">Also notice there is a _Red Maple Racing_ database, the tenant database you provisioned previously.</span></span>

   ![server](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-the-pool"></a><span data-ttu-id="8c1f2-232">Monitorování fondu</span><span class="sxs-lookup"><span data-stu-id="8c1f2-232">Monitor the pool</span></span>

<span data-ttu-id="8c1f2-233">Pokud generátor zatížení běžel několik minut, mělo by být k dispozici dostatek dat, abyste mohli začít sledovat některé možnosti monitorování vestavěné do fondů a databází.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-233">If the load generator has been running for several minutes, enough data should be available to start looking at some of the monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="8c1f2-234">Přejděte na server **tenants1 -&lt;uživatele&gt;**a klikněte na tlačítko **Pool1** zobrazení využití prostředků pro fond (generátor zatížení spustili jednu hodinu v následující grafy):</span><span class="sxs-lookup"><span data-stu-id="8c1f2-234">Browse to the server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for the pool (the load generator ran for an hour in the following charts):</span></span>

   ![monitorování fondu](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="8c1f2-236">Na těchto dvou grafech je krásně vidět, jak dobře se elastické fondy a databáze SQL hodí pro úlohy SaaS aplikací.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="8c1f2-237">Čtyři databáze, všechny s nárazovým zatížením až 40 eDTU, snadno zvládá fond s 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-237">Four databases that are each bursting to as much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="8c1f2-238">Pokud byly zřízení jako samostatné databáze jejich by každý musí být S2 (50 DTU) pro podporu shluky.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-238">If they were provisioned as standalone databases, they would each need to be an S2 (50 DTU) to support the bursts.</span></span> <span data-ttu-id="8c1f2-239">Náklady na 4 samostatné S2 databází by téměř 3krát cena fondu a fondu má stále dostatek prostoru pro mnoho více databází.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-239">The cost of 4 standalone S2 databases would be nearly 3 times the price of the pool, and the pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="8c1f2-240">V situacích, reálného databáze SQL zákazníků aktuálně používá až 500 databází ve fondech 200 eDTU.</span><span class="sxs-lookup"><span data-stu-id="8c1f2-240">In real-world situations, SQL Database customers are currently running up to 500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="8c1f2-241">Další informace najdete v [kurzu monitorování výkonu](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-241">For more information, see the [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="8c1f2-242">Další kroky</span><span class="sxs-lookup"><span data-stu-id="8c1f2-242">Next steps</span></span>

<span data-ttu-id="8c1f2-243">V tomto kurzu jste se dozvěděli:</span><span class="sxs-lookup"><span data-stu-id="8c1f2-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="8c1f2-244">Postup nasazení aplikace Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="8c1f2-244">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="8c1f2-245">O serverech, fondech a databázích, které aplikaci tvoří</span><span class="sxs-lookup"><span data-stu-id="8c1f2-245">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="8c1f2-246">Tenanti jsou namapovaní na svá data pomocí *katalogu*</span><span class="sxs-lookup"><span data-stu-id="8c1f2-246">Tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="8c1f2-247">Jak zřídit nové tenanty</span><span class="sxs-lookup"><span data-stu-id="8c1f2-247">How to provision new tenants</span></span>
> * <span data-ttu-id="8c1f2-248">Jak zobrazit využití fondu k monitorování aktivity tenanta</span><span class="sxs-lookup"><span data-stu-id="8c1f2-248">How to view pool utilization to monitor tenant activity</span></span>
> * <span data-ttu-id="8c1f2-249">Jak odstranit ukázkové prostředky k zastavení souvisejícího účtování</span><span class="sxs-lookup"><span data-stu-id="8c1f2-249">How to delete sample resources to stop related billing</span></span>

<span data-ttu-id="8c1f2-250">Teď si vyzkoušejte [kurz zřízení nových tenantů a jejich registrace v katalogu](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-250">Now try the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="8c1f2-251">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="8c1f2-251">Additional resources</span></span>

* <span data-ttu-id="8c1f2-252">Další [návodů, které sestavení na adresář Wingtip SaaS aplikace](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="8c1f2-252">Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="8c1f2-253">Další informace o elastických fondech najdete v tématu [*Co je elastický fond Azure*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-253">To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="8c1f2-254">Další informace o elastických úlohách najdete v tématu [*Správa cloudových databází s horizontálním navýšením kapacity*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-254">To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="8c1f2-255">Další informace o SaaS aplikacích s více tenanty najdete v tématu [*Vzory návrhu pro SaaS aplikace s více tenanty*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications).</span><span class="sxs-lookup"><span data-stu-id="8c1f2-255">To learn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
