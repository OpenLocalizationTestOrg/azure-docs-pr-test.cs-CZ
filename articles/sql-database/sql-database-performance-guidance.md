---
title: "Ladění pokyny Azure SQL Database výkonu | Microsoft Docs"
description: "Tento článek vám může pomoct určit, které úroveň služby, zvolte pro vaši aplikaci. Doporučuje také způsoby, jak ladit aplikaci získat využití služby Azure SQL Database."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: dc0244f0e0949b172c391825057f5c14893a5158
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="6c9ff-104">Ladění výkonu v Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="6c9ff-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="6c9ff-105">Databáze SQL Azure poskytuje [doporučení](sql-database-advisor.md) , můžete použít ke zlepšení výkonu databáze, nebo můžete nechat Azure SQL Database [automaticky přizpůsobit do vaší aplikace](sql-database-automatic-tuning.md) a změny, zlepší výkon vašich úloh.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use to improve performance of your database, or you can let Azure SQL Database [automatically adapt to your application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="6c9ff-106">Ve službě nemáte žádná doporučení použít a máte problémy s výkonem, můžete použít následující metody ke zlepšení přínos:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-106">In you don't have any applicable recommendations, and you still have performance issues, you might use the following methods to improve performances:</span></span>
1. <span data-ttu-id="6c9ff-107">Zvýšit [úrovních služeb](sql-database-service-tiers.md) a poskytnout další zdroje k vaší databázi.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources to your database.</span></span>
2. <span data-ttu-id="6c9ff-108">Ladění aplikace a použít některé osvědčené postupy, které může zlepšit výkon.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="6c9ff-109">Optimalizujte databázi změnou indexy a dotazy efektivněji pracovat s daty.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-109">Tune the database by changing indexes and queries to more efficiently work with data.</span></span>

<span data-ttu-id="6c9ff-110">Tyto jsou ruční metody, protože je potřeba rozhodnout se, jak [úrovních služeb](sql-database-service-tiers.md) by zvolíte nebo by třeba přepisovat kód aplikace nebo databáze a deply změny.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-110">These are manual methods because you need to decide what [service tiers](sql-database-service-tiers.md) you would choose or you would need to rewrite application or database code and deply the changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="6c9ff-111">Zvýšení úrovně výkonu databáze</span><span class="sxs-lookup"><span data-stu-id="6c9ff-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="6c9ff-112">Azure SQL Database nabízí čtyři [úrovních služeb](sql-database-service-tiers.md) ze kterých si můžete vybrat: Basic, Standard, Premium a Premium RS (výkonu se měří v jednotky propustnosti databáze, nebo [Dtu](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="6c9ff-113">Každé úrovni služeb výhradně izoluje prostředky, můžete použít SQL database a zaručuje, předvídatelný výkon této úrovně služeb.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-113">Each service tier strictly isolates the resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="6c9ff-114">V tomto článku jsme nabízí pokyny, které vám pomohou vybrat úroveň služby pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-114">In this article, we offer guidance that can help you choose the service tier for your application.</span></span> <span data-ttu-id="6c9ff-115">Můžeme také popisují způsoby, abyste mohli vyladit aplikace k plnému využití z databáze SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-115">We also discuss ways that you can tune your application to get the most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="6c9ff-116">Tento článek se zaměřuje na pokyny výkonu pro izolované databáze ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-117">Pokyny výkonu související s elastické fondy najdete v tématu [cenové a výkonové požadavky pro elastické fondy](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-117">For performance guidance related to elastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="6c9ff-118">Upozorňujeme ale, můžete použít řadu vyladění doporučení v tomto článku pro databáze v elastickém fondu a získejte výhody podobné výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-118">Note, though, that you can apply many of the tuning recommendations in this article to databases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="6c9ff-119">**Základní**: základní služby úroveň nabízí dobrý výkon předvídatelnost pro každou databázi, hodinu přes hodinu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-119">**Basic**: The Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="6c9ff-120">V databázi základní podporují dostatek prostředků dobrý výkon v malé databázi, která nemá více souběžných požadavků.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="6c9ff-121">Typické použití případy, kdy byste měli použít úroveň základní služby jsou:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="6c9ff-122">**Můžete se právě Začínáme s Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="6c9ff-123">Aplikace, které jsou často vývojem nepotřebují vysoce výkonné úrovně.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="6c9ff-124">Základní databáze jsou ideální prostředí pro vývoj databází nebo testování okamžiku nízkou cenu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="6c9ff-125">**Máte databázi s jedním uživatelem**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-125">**You have a database with a single user**.</span></span> <span data-ttu-id="6c9ff-126">Aplikace, které uživatel s jednotným přidružit databáze obvykle nemají vysokou požadavky na souběžnost a výkon.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="6c9ff-127">Tyto aplikace jsou kandidáty pro úroveň služby na úrovni Basic.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-127">These applications are candidates for the Basic service tier.</span></span>
* <span data-ttu-id="6c9ff-128">**Standardní**: ve standardu vrstvy služeb nabízí lepší výkon, předvídatelnost a poskytuje dobrý výkon u databází, které mají více souběžných žádostí, jako je pracovní skupiny a webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-128">**Standard**: The Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="6c9ff-129">Když vyberete databázi vrstvy služby na úrovni Standard, může Velikost databáze aplikace založené na předvídatelný výkon, minutu přes minutu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="6c9ff-130">**Databáze má více souběžných požadavků**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="6c9ff-131">Aplikace, které služeb více uživatelů najednou obvykle nutné vyšší úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="6c9ff-132">Například pracovní skupině nebo webové aplikace, které mají nedostatek na střední vstupně-VÝSTUPNÍMI požadavky provoz podpora více souběžných dotazů jsou vhodnými kandidáty pro úroveň služby na úrovni Standard.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-132">For example, workgroup or web applications that have low to medium IO traffic requirements supporting multiple concurrent queries are good candidates for the Standard service tier.</span></span>
* <span data-ttu-id="6c9ff-133">**Premium**: úroveň služeb Premium poskytuje předvídatelný výkon, druhý přes druhý, pro každou databázi Premium.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-133">**Premium**: The Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="6c9ff-134">Pokud vyberete úroveň služeb Premium, můžete měnit velikost databáze aplikace založené na zátěž ve špičce pro tuto databázi.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-134">When you choose the Premium service tier, you can size your database application based on the peak load for that database.</span></span> <span data-ttu-id="6c9ff-135">Plán odebere případy, ve které výkonu může způsobit odchylku malé dotazy trvá déle, než bylo očekáváno v operacích citlivý na latenci.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-135">The plan removes cases in which performance variance can cause small queries to take longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="6c9ff-136">Tento model může výrazně zjednodušit ověření cykly vývoj a produktu pro aplikace, které musí být silné prohlášení o potřebných prostředků ve špičce, odchylku výkonu nebo latence dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-136">This model can greatly simplify the development and product validation cycles for applications that need to make strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="6c9ff-137">Většina případy použití vrstvy služby Premium mít jeden nebo více z těchto vlastností:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="6c9ff-138">**Zátěž ve špičce vysokou**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-138">**High peak load**.</span></span> <span data-ttu-id="6c9ff-139">Aplikaci, která vyžaduje významné CPU, paměť či vstupní a výstupní (I/O) k dokončení operace vyžaduje úroveň vyhrazené a vysoce výkonné.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-139">An application that requires substantial CPU, memory, or input/output (I/O) to complete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="6c9ff-140">Operace databáze známé využívat několik jader procesoru po delší dobu, je třeba kandidátem na úroveň služeb Premium.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-140">For example, a database operation known to consume several CPU cores for an extended time is a candidate for the Premium service tier.</span></span>
  * <span data-ttu-id="6c9ff-141">**Mnoha souběžnými požadavky**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-141">**Many concurrent requests**.</span></span> <span data-ttu-id="6c9ff-142">Některé databáze aplikace služby mnoho souběžných žádostí, například když obsluhuje web, který má intenzivní provoz.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="6c9ff-143">Úrovně Basic a Standard úrovně služeb omezit počet souběžných požadavků na databázi.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-143">Basic and Standard service tiers limit the number of concurrent requests per database.</span></span> <span data-ttu-id="6c9ff-144">Aplikace, které vyžadují více připojení bude muset zvolit příslušné rezervace velikost pro zpracování maximální počet potřebných požadavků.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-144">Applications that require more connections would need to choose an appropriate reservation size to handle the maximum number of needed requests.</span></span>
  * <span data-ttu-id="6c9ff-145">**Nízká latence**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-145">**Low latency**.</span></span> <span data-ttu-id="6c9ff-146">Některé aplikace potřebují zaručit minimální včas odpověď z databáze.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-146">Some applications need to guarantee a response from the database in minimal time.</span></span> <span data-ttu-id="6c9ff-147">Pokud konkrétní uložená procedura je volána v rámci širší operace zákazníka, bude pravděpodobně potřeba mít návratový z tohoto volání v milisekundách více než 20, 99 procent času.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement to have a return from that call in no more than 20 milliseconds, 99 percent of the time.</span></span> <span data-ttu-id="6c9ff-148">Tento typ aplikace výhody z úroveň služeb Premium, abyste měli jistotu, že je k dispozici požadované výpočetní výkon.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-148">This type of application benefits from the Premium service tier, to make sure that the required computing power is available.</span></span>
* <span data-ttu-id="6c9ff-149">**Premium RS**: vrstvy RS Premium je určená pro úlohy náročné na vstupně-výstupní operace, které nevyžadují zaručuje nejvyšší dostupnost.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-149">**Premium RS**: The Premium RS tier is designed for IO-intensive workloads that do not require the highest availability guarantees.</span></span> <span data-ttu-id="6c9ff-150">Mezi příklady patří testování vysoce výkonné úlohy, nebo analytické úlohy, kde databáze není systému záznamu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-150">Examples include testing high-performance workloads, or an analytical workload where the database is not the system of record.</span></span>

<span data-ttu-id="6c9ff-151">Úrovně služby, které potřebujete pro vaši databázi SQL, závisí na požadavky na zatížení ve špičce Každá dimenze prostředků.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-151">The service level that you need for your SQL database depends on the peak load requirements for each resource dimension.</span></span> <span data-ttu-id="6c9ff-152">Některé aplikace využívat trivial množství jediný zdroj, ale mají významný požadavky na jiné prostředky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="6c9ff-153">Možnosti vrstvy služby a omezení</span><span class="sxs-lookup"><span data-stu-id="6c9ff-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="6c9ff-154">V jednotlivých úrovních služby nastavena úroveň výkonu, máte možnost platit pouze pro potřebnou kapacitu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-154">At each service tier, you set the performance level, so you have the flexibility to pay only for the capacity you need.</span></span> <span data-ttu-id="6c9ff-155">Můžete [upravit kapacity](sql-database-service-tiers.md), nahoru nebo dolů, jako změny zatížení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="6c9ff-156">Například pokud vaše databáze úlohy vysoké během nákupní sezóny zpět školy, můžete zvýšit úroveň výkonu pro databázi nastavit dobu, červenec prostřednictvím září.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-156">For example, if your database workload is high during the back-to-school shopping season, you might increase the performance level for the database for a set time, July through September.</span></span> <span data-ttu-id="6c9ff-157">Ho může snížit, až skončí vaše sezóny ve špičce.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="6c9ff-158">Můžete minimalizovat platíte pomocí optimalizace cloudového prostředí, abyste sezónnosti vaší firmy.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-158">You can minimize what you pay by optimizing your cloud environment to the seasonality of your business.</span></span> <span data-ttu-id="6c9ff-159">Tento model se také funguje dobře pro cykly verze softwaru produktu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="6c9ff-160">Test tým může přidělit kapacity při testování spustí a poté uvolněte tuto kapacitu, při jejich dokončení testování.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="6c9ff-161">V žádosti o modelu kapacitu platíte kapacity ho potřebujete, a vyhnout se výdaje na vyhrazených prostředcích, které můžou používat jenom občas.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="6c9ff-162">Proč úrovních služeb?</span><span class="sxs-lookup"><span data-stu-id="6c9ff-162">Why service tiers?</span></span>
<span data-ttu-id="6c9ff-163">I když každé zatížení databáze se může lišit, účelem úrovně služeb je poskytnout předvídatelnost výkonu na různé úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-163">Although each database workload can differ, the purpose of service tiers is to provide performance predictability at various performance levels.</span></span> <span data-ttu-id="6c9ff-164">Zákazníci s požadavky na prostředky ve velkém měřítku databáze můžete pracovat ve více vyhrazené výpočetním prostředí.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="6c9ff-165">Vyladění aplikace</span><span class="sxs-lookup"><span data-stu-id="6c9ff-165">Tune your application</span></span>
<span data-ttu-id="6c9ff-166">Tradiční na místním serveru SQL je proces plánování kapacity počáteční často oddělená od proces spuštění aplikace v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-166">In traditional on-premises SQL Server, the process of initial capacity planning often is separated from the process of running an application in production.</span></span> <span data-ttu-id="6c9ff-167">Hardware a produktu licence jsou nejprve zakoupit a optimalizace výkonu se provádí i později.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="6c9ff-168">Pokud používáte Azure SQL Database, je vhodné interweave proces spuštění aplikace a vyladění jeho.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-168">When you use Azure SQL Database, it's a good idea to interweave the process of running an application and tuning it.</span></span> <span data-ttu-id="6c9ff-169">S modelem platícího kapacity na vyžádání abyste mohli vyladit aplikace k používání minimální prostředky potřebné teď místo předimenzování na hardwaru podle pokusů budoucímu růstu plány pro aplikace, které často jsou nesprávné.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-169">With the model of paying for capacity on demand, you can tune your application to use the minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="6c9ff-170">Někteří zákazníci mohou zvolit nepoužívání ladit aplikace a místo toho zvolíte pro overprovision hardwarové prostředky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-170">Some customers might choose not to tune an application, and instead choose to overprovision hardware resources.</span></span> <span data-ttu-id="6c9ff-171">Tento přístup může být vhodné, pokud nechcete změnit klíče aplikace během období zaneprázdněný.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-171">This approach might be a good idea if you don't want to change a key application during a busy period.</span></span> <span data-ttu-id="6c9ff-172">Ale ladění aplikace snížit požadavky na prostředky a nižší měsíční faktur při použití úrovně služeb ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use the service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="6c9ff-173">Vlastnosti aplikace</span><span class="sxs-lookup"><span data-stu-id="6c9ff-173">Application characteristics</span></span>
<span data-ttu-id="6c9ff-174">I když Azure SQL Database úrovně služeb jsou určeny ke zlepšení výkonu stability a předvídatelnost pro aplikaci, můžete pomocí některé z osvědčených postupů ladit aplikace lépe využít prostředky na úrovni výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-174">Although Azure SQL Database service tiers are designed to improve performance stability and predictability for an application, some best practices can help you tune your application to better take advantage of the resources at a performance level.</span></span> <span data-ttu-id="6c9ff-175">I když mnoho aplikací mít výrazné zvýšení výkonu jednoduše tak, že přepnutí na vyšší úroveň výkonu nebo úroveň služby, některé aplikace potřebují odladit těžit z vyšší úrovně služby.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-175">Although many applications have significant performance gains simply by switching to a higher performance level or service tier, some applications need additional tuning to benefit from a higher level of service.</span></span> <span data-ttu-id="6c9ff-176">Pro zvýšení výkonu vezměte v úvahu další aplikaci ladění pro aplikace, které mají tyto charakteristiky:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="6c9ff-177">**Aplikace, které mají pomalý výkon z důvodu "chatty" chování**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="6c9ff-178">Chatty aplikace provést operace přístupu k nadměrnému dat, které jsou citlivá na latenci sítě.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-178">Chatty applications make excessive data access operations that are sensitive to network latency.</span></span> <span data-ttu-id="6c9ff-179">Možná budete muset upravit tyto typy aplikací a snížit počet operací přístupu k datům databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-179">You might need to modify these kinds of applications to reduce the number of data access operations to the SQL database.</span></span> <span data-ttu-id="6c9ff-180">Například může zlepšit výkon aplikace pomocí technik jako dávkování dotazů ad-hoc nebo přesunutí dotazy na uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving the queries to stored procedures.</span></span> <span data-ttu-id="6c9ff-181">Další informace najdete v tématu [dávky dotazy](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="6c9ff-182">**Databáze s náročné úlohy, která nepodporují se celý jeden počítač**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="6c9ff-183">Databáze, které překračují prostředky nejvyšší úrovně Premium výkonu mohou využít škálování zatížení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-183">Databases that exceed the resources of the highest Premium performance level might benefit from scaling out the workload.</span></span> <span data-ttu-id="6c9ff-184">Další informace najdete v tématu [horizontálního dělení mezidatabázové](#cross-database-sharding) a [funkční dělení](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="6c9ff-185">**Aplikace, které mají zhoršené dotazy**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="6c9ff-186">Aplikace, zejména v datové vrstvě přístupu, která mají špatně přizpůsobená dotazy nemusí využít vyšší úroveň výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-186">Applications, especially those in the data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="6c9ff-187">To zahrnuje dotazy, které chybí klauzule WHERE, chybějící indexy nebo zastaralé statistiky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="6c9ff-188">Tyto aplikace využít techniky optimalizace výkonu standardní dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="6c9ff-189">Další informace najdete v tématu [chybějící indexy](#identifying-and-adding-missing-indexes) a [ladění a zobrazování rad dotazů](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="6c9ff-190">**Aplikace, které mají zhoršené data přístup k návrhu**.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="6c9ff-191">Aplikace, které mají vyplývajících data potíže se souběžností přístup, například vzájemné zablokování, nemusí využít vyšší úroveň výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="6c9ff-192">Zvažte snížení odezev proti dané databázi SQL Azure pomocí ukládání dat do mezipaměti na straně klienta pomocí služby ukládání do mezipaměti Azure nebo jiné technologie ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-192">Consider reducing round trips against the Azure SQL Database by caching data on the client side with the Azure Caching service or another caching technology.</span></span> <span data-ttu-id="6c9ff-193">V tématu [ukládání do mezipaměti aplikace vrstvy](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="6c9ff-194">Vyladění databáze</span><span class="sxs-lookup"><span data-stu-id="6c9ff-194">Tune your database</span></span>
<span data-ttu-id="6c9ff-195">V této části se podíváme na některé techniky, které můžete použít k vyladění Azure SQL Database k získání nejlepší výkon pro vaši aplikaci a spusťte jej na nejnižší úrovni možný výkon.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-195">In this section, we look at some techniques that you can use to tune Azure SQL Database to gain the best performance for your application and run it at the lowest possible performance level.</span></span> <span data-ttu-id="6c9ff-196">Některé z těchto postupů odpovídat tradiční ladění osvědčené postupy systému SQL Server, ale jiné jsou specifické pro Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific to Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-197">V některých případech můžete zkontrolovat spotřebované prostředky pro databázi najít oblasti, které další ladit a rozšířit tradiční technologie SQL Server pro práci v Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-197">In some cases, you can examine the consumed resources for a database to find areas to further tune and extend traditional SQL Server techniques to work in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="6c9ff-198">Identifikovat problémy s výkonem pomocí portálu Azure</span><span class="sxs-lookup"><span data-stu-id="6c9ff-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="6c9ff-199">Následující nástroje na portálu Azure můžete analyzovat a opravit problémy s výkonem s vaší databázi SQL:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-199">The following tools in the Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="6c9ff-200">Query Performance Insight</span><span class="sxs-lookup"><span data-stu-id="6c9ff-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="6c9ff-201">SQL Database Advisor</span><span class="sxs-lookup"><span data-stu-id="6c9ff-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="6c9ff-202">Portál Azure obsahuje další informace o obou těchto nástrojů a jejich použití.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-202">The Azure portal has more information about both of these tools and how to use them.</span></span> <span data-ttu-id="6c9ff-203">Efektivní diagnostikovat a opravit problémy, doporučujeme, abyste si nejdříve zkusili nástroje na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-203">To efficiently diagnose and correct problems, we recommend that you first try the tools in the Azure portal.</span></span> <span data-ttu-id="6c9ff-204">Doporučujeme vám, že používáte metodu ručního ladění přístupy, které dál probereme chybějící indexy a dotaz optimalizace ve zvláštních případech.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-204">We recommend that you use the manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="6c9ff-205">Další informace o identifikaci problémů ve službě Azure SQL Database na [monitorování výkonu](sql-database-single-database-monitor.md) článku.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="6c9ff-206">Identifikace a přidání chybějící indexy</span><span class="sxs-lookup"><span data-stu-id="6c9ff-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="6c9ff-207">Běžné potíže s výkonem databáze OLTP má vztah k návrhu fyzická databáze.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-207">A common problem in OLTP database performance relates to the physical database design.</span></span> <span data-ttu-id="6c9ff-208">Databáze schémata jsou často, určené a dodaný bez testování ve velkém měřítku, (buď v zatížení nebo datový svazek).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="6c9ff-209">Bohužel výkon plán dotazu může být přijatelné v malém měřítku, ale podstatně snížit pod úroveň výroby datové svazky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-209">Unfortunately, the performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="6c9ff-210">Nejběžnější zdroj tohoto problému je nedostatek příslušné indexy vyhovět filtry, nebo jiná omezení v dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-210">The most common source of this issue is the lack of appropriate indexes to satisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="6c9ff-211">Často chybějící indexy manifesty jako tabulku kontrolovat může stačit indexu vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="6c9ff-212">V tomto příkladu používá plán vybraný dotaz kontrolu při by stačit seek:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-212">In this example, the selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Plán dotazu s chybějící indexy](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="6c9ff-214">Databáze SQL Azure můžete najít a opravu běžné chybí indexu podmínky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="6c9ff-215">Podívejte se na kompilace dotazu, ve kterých by indexu výrazně snížit odhadované náklady ke spuštění dotazu zobrazení dynamické správy, které jsou součástí Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce the estimated cost to run a query.</span></span> <span data-ttu-id="6c9ff-216">Během provádění dotazu SQL Database sleduje, jak často se spustí každý plán dotazu a sleduje odhadované mezery mezi provádění plán dotazu a imagined jeden kde existovaly tento index.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks the estimated gap between the executing query plan and the imagined one where that index existed.</span></span> <span data-ttu-id="6c9ff-217">Můžete použít tyto zobrazení dynamické správy snadno uhodnout které změny návrhu fyzická databáze může zlepšit celkové náklady na úlohy pro databázi a její skutečné pracovní vytížení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-217">You can use these DMVs to quickly guess which changes to your physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="6c9ff-218">Tento dotaz můžete použít k vyhodnocení potenciální chybějící indexy:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-218">You can use this query to evaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="6c9ff-219">V tomto příkladu výsledkem dotazu byl tento návrh:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-219">In this example, the query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="6c9ff-220">Po vytvoření, že stejný příkaz SELECT vybere jiný plán, který místo kontrolu používá hledání a pak efektivněji provede plánu:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes the plan more efficiently:</span></span>

![Plán dotazu s opravené indexy](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="6c9ff-222">Přehled klíčů je omezenější než počítač vyhrazený server vstupně-výstupní kapacita sdílené, komoditním systému.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-222">The key insight is that the I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="6c9ff-223">Je na minimalizovat nepotřebné vstupně-výstupních operací maximální využívat systému v jednotek DTU úrovně výkonu jednotlivých úrovní služby Azure SQL Database premium.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-223">There's a premium on minimizing unnecessary I/O to take maximum advantage of the system in the DTU of each performance level of the Azure SQL Database service tiers.</span></span> <span data-ttu-id="6c9ff-224">Fyzické databázi návrhu volby může výrazně zlepšit latenci pro jednotlivé dotazy zlepšit propustnost souběžných požadavků zpracovaných za jednotku škálování a minimalizovat náklady potřebných k tomu dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-224">Appropriate physical database design choices can significantly improve the latency for individual queries, improve the throughput of concurrent requests handled per scale unit, and minimize the costs required to satisfy the query.</span></span> <span data-ttu-id="6c9ff-225">Další informace o chybějící index zobrazení dynamické správy najdete v tématu [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-225">For more information about the missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="6c9ff-226">Ladění dotazu a zobrazování rad</span><span class="sxs-lookup"><span data-stu-id="6c9ff-226">Query tuning and hinting</span></span>
<span data-ttu-id="6c9ff-227">Optimalizátor dotazů v databázi SQL Azure je podobná tradičním Optimalizátor dotazů systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-227">The query optimizer in Azure SQL Database is similar to the traditional SQL Server query optimizer.</span></span> <span data-ttu-id="6c9ff-228">Většina osvědčených postupů pro ladění dotazy a seznámit se s odůvodněním modelu omezení pro Optimalizátor dotazů platí také pro Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-228">Most of the best practices for tuning queries and understanding the reasoning model limitations for the query optimizer also apply to Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-229">Pokud je optimalizace dotazů v databázi SQL Azure, může získat další výhody snižuje nároky na agregační prostředků.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-229">If you tune queries in Azure SQL Database, you might get the additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="6c9ff-230">Aplikace může být možné spustit při nižších nákladech, než naladěného ekvivalentní, protože můžete spustit na nižší úrovni výkonu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-230">Your application might be able to run at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="6c9ff-231">Příklad, který je běžné v systému SQL Server a který platí také pro Azure SQL Database je jak Optimalizátor dotazů "zachytává obsah" parametry.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-231">An example that is common in SQL Server and which also applies to Azure SQL Database is how the query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="6c9ff-232">Optimalizátor dotazů během kompilace, vyhodnotí aktuální hodnota parametru k určení, zda může vygenerovat víc optimální plán dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-232">During compilation, the query optimizer evaluates the current value of a parameter to determine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="6c9ff-233">I když tato strategie často může vést k plán dotazu, který je mnohem rychlejší než plán kompilovat bez parametru známé hodnoty, aktuálně funguje imperfectly i v systému SQL Server a ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-233">Although this strategy often can lead to a query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-234">Parametr není někdy zachycení a někdy zachycení parametr ale vygenerovaný plán je zhoršené úplnou sadu hodnot parametrů v zatížení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-234">Sometimes the parameter is not sniffed, and sometimes the parameter is sniffed but the generated plan is suboptimal for the full set of parameter values in a workload.</span></span> <span data-ttu-id="6c9ff-235">Microsoft zahrnuje pomocné parametry dotazu (direktivy), takže můžete zadat více úmyslně záměr a přepsat výchozí chování sledování toku dat parametr.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override the default behavior of parameter sniffing.</span></span> <span data-ttu-id="6c9ff-236">Často Pokud používáte pomocné parametry, můžete je vyřešit případy, ve které je výchozí chování systému SQL Server nebo Azure SQL Database nedokonalé pro konkrétního zákazníka zatížení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-236">Often, if you use hints, you can fix cases in which the default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="6c9ff-237">Další příklad ukazuje, jak může procesor dotazů Generovat plán, který je zhoršené pro výkon a požadavky na prostředky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-237">The next example demonstrates how the query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="6c9ff-238">Tento příklad také ukazuje, že pokud používáte pomocný parametr dotazu, můžete snížit požadavky na spuštění dotazu času a prostředků pro vaši databázi SQL:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="6c9ff-239">Instalační kód vytvoří tabulku, která má nesouměrně rozdělí distribuci dat.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-239">The setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="6c9ff-240">Plán optimální dotazu se liší podle které zablokováno.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-240">The optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="6c9ff-241">Bohužel plán chování ukládání do mezipaměti není vždy znovu zkompiluje dotaz založený na nejběžnější hodnotu parametru.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-241">Unfortunately, the plan caching behavior doesn't always recompile the query based on the most common parameter value.</span></span> <span data-ttu-id="6c9ff-242">Ano je možné pro plán zhoršené do mezipaměti a použít pro více hodnot, i v případě, že jiný plán může být vhodnější plán v průměru.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-242">So, it's possible for a suboptimal plan to be cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="6c9ff-243">Plán dotazu pak vytvoří dvě uložené procedury, které jsou stejné, s tím rozdílem, že jeden má nápovědu speciální dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-243">Then the query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="6c9ff-244">**Příklad, část 1**</span><span class="sxs-lookup"><span data-stu-id="6c9ff-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times to show the performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="6c9ff-245">**Příklad, část 2**</span><span class="sxs-lookup"><span data-stu-id="6c9ff-245">**Example, part 2**</span></span>

<span data-ttu-id="6c9ff-246">(Doporučujeme Počkejte minimálně 10 minut, než začnete, část 2 / příkladu, tak, aby byly výsledky jedinečná ve výsledné telemetrická data.)</span><span class="sxs-lookup"><span data-stu-id="6c9ff-246">(We recommend that you wait at least 10 minutes before you begin part 2 of the example, so that the results are distinct in the resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="6c9ff-247">Jednotlivých součástí v tomto příkladu se pokusí o spuštění příkazu parametrizované insert 1 000krát (ke generování dostatečná zatížení chcete použít jako testovací sada dat).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-247">Each part of this example attempts to run a parameterized insert statement 1,000 times (to generate a sufficient load to use as a test data set).</span></span> <span data-ttu-id="6c9ff-248">Pokud se provede uložené procedury, procesor dotazů prověří hodnotu parametru, který je předán postup během jeho první kompilace (parametr "sledování toku dat").</span><span class="sxs-lookup"><span data-stu-id="6c9ff-248">When it executes stored procedures, the query processor examines the parameter value that is passed to the procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="6c9ff-249">Procesor ukládá do mezipaměti výsledný plán a používá je pro pozdější volání i v případě, že hodnota parametru se liší.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-249">The processor caches the resulting plan and uses it for later invocations, even if the parameter value is different.</span></span> <span data-ttu-id="6c9ff-250">Ve všech případech se možná nepoužívají optimální plán.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-250">The optimal plan might not be used in all cases.</span></span> <span data-ttu-id="6c9ff-251">V některých případech budete muset Průvodce Optimalizátor a vyberte plán, který je lepší pro průměrnou případu, nikoli konkrétní případ z při první kompilace dotazu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-251">Sometimes you need to guide the optimizer to pick a plan that is better for the average case rather than the specific case from when the query was first compiled.</span></span> <span data-ttu-id="6c9ff-252">V tomto příkladu generuje počáteční plán "kontrola" plán, který čte všechny řádky považovat každá hodnota, která odpovídá parametru:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-252">In this example, the initial plan generates a "scan" plan that reads all rows to find each value that matches the parameter:</span></span>

![Dotaz na ladění pomocí plánu kontroly](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="6c9ff-254">Protože jsme postup provést pomocí hodnoty 1, výsledný plán byla optimální pro hodnotu 1, ale byla zhoršené pro všechny ostatní hodnoty v tabulce.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-254">Because we executed the procedure by using the value 1, the resulting plan was optimal for the value 1 but was suboptimal for all other values in the table.</span></span> <span data-ttu-id="6c9ff-255">Výsledek pravděpodobně není co vhodnější, pokud byste chtěli náhodně, vyberte každý plán, protože plán provede pomaleji a používá další prostředky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-255">The result likely isn't what you would want if you were to pick each plan randomly, because the plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="6c9ff-256">Pokud spustíte test s `SET STATISTICS IO` nastavena na `ON`, pracovní logické kontroly v tomto příkladu se provádí na pozadí.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-256">If you run the test with `SET STATISTICS IO` set to `ON`, the logical scan work in this example is done behind the scenes.</span></span> <span data-ttu-id="6c9ff-257">Můžete zjistit, že jsou 1,148 čtení provádí plán (což je neefektivní, pokud průměrná případ vrácení pouze jeden řádek):</span><span class="sxs-lookup"><span data-stu-id="6c9ff-257">You can see that there are 1,148 reads done by the plan (which is inefficient, if the average case is to return just one row):</span></span>

![Dotaz na ladění pomocí logické kontroly](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="6c9ff-259">Druhá část příkladu používá pomocný parametr dotazu říct Optimalizátor pomocí konkrétní hodnoty během kompilace.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-259">The second part of the example uses a query hint to tell the optimizer to use a specific value during the compilation process.</span></span> <span data-ttu-id="6c9ff-260">V takovém případě vynutí procesor dotazů ignorovat hodnotu, která se předá jako parametr, a místo toho předpokládat, že `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-260">In this case, it forces the query processor to ignore the value that is passed as the parameter, and instead to assume `UNKNOWN`.</span></span> <span data-ttu-id="6c9ff-261">Označuje hodnotu, která má Průměrná frekvence v tabulce (ignorována zkosení).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-261">This refers to a value that has the average frequency in the table (ignoring skew).</span></span> <span data-ttu-id="6c9ff-262">Na základě seek plán, který je rychlejší a využívá méně prostředků, v průměru, než plán v části 1 tohoto příkladu je výsledný plán:</span><span class="sxs-lookup"><span data-stu-id="6c9ff-262">The resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than the plan in part 1 of this example:</span></span>

![Ladění dotaz s použitím pomocného parametru dotazu](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="6c9ff-264">Uvidíte výsledky v **sys.resource_stats** tabulky (dochází ke zpoždění od okamžiku spuštění testu a když data naplní tabulky).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-264">You can see the effect in the **sys.resource_stats** table (there is a delay from the time that you execute the test and when the data populates the table).</span></span> <span data-ttu-id="6c9ff-265">Pro tento příklad, část 1 provést během časového okna 22:25:00 a část 2 provedená 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-265">For this example, part 1 executed during the 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="6c9ff-266">Starší časový interval použít další zdroje v dané časové okno než novější verzi (z důvodu zlepšení efektivity plánu).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-266">The earlier time window used more resources in that time window than the later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Ladění příklad výsledky dotazu](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="6c9ff-268">I když svazek v tomto příkladu je záměrně malý, může být účinku zhoršené parametry podstatné, zejména u velkých databází.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-268">Although the volume in this example is intentionally small, the effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="6c9ff-269">Rozdíl ve výjimečných případech může být v rozmezí sekund pro rychlé případy a čas pro případy, pomalé.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-269">The difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="6c9ff-270">Můžete zkontrolovat **sys.resource_stats** k určení, zda prostředek pro test používá více nebo méně prostředků než jiného testu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-270">You can examine **sys.resource_stats** to determine whether the resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="6c9ff-271">Při porovnávání dat oddělte načasování testy tak, aby se nenacházejí ve stejném okně 5 minut **sys.resource_stats** zobrazení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-271">When you compare data, separate the timing of tests so that they are not in the same 5-minute window in the **sys.resource_stats** view.</span></span> <span data-ttu-id="6c9ff-272">Cílem výkonu je minimalizovat celkový objem prostředků používá a ne minimalizovat prostředků ve špičce.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-272">The goal of the exercise is to minimize the total amount of resources used, and not to minimize the peak resources.</span></span> <span data-ttu-id="6c9ff-273">Obecně platí optimalizace úsek kódu pro latenci zmenšuje spotřeby prostředků.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="6c9ff-274">Zajistěte, aby nutných změny provedené v aplikaci a že změny neovlivní negativně zkušeností zákazníků někomu, kdo může pomocí pomocné parametry dotazu v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-274">Make sure that the changes you make to an application are necessary, and that the changes don't negatively affect the customer experience for someone who might be using query hints in the application.</span></span>

<span data-ttu-id="6c9ff-275">Pokud úloha má sadu opakujících se dotazů, často má smysl k zaznamenání a ověřit optimality zvoleného plán, protože ho jednotky jednotka velikost minimální zdroje potřebné k hostování databáze.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-275">If a workload has a set of repeating queries, often it makes sense to capture and validate the optimality of your plan choices because it drives the minimum resource size unit required to host the database.</span></span> <span data-ttu-id="6c9ff-276">Po ověření, někdy prozkoumat plánů, které vám pomohou zajistit, že nebyly degradovaný.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-276">After you validate it, occasionally reexamine the plans to help you make sure that they have not degraded.</span></span> <span data-ttu-id="6c9ff-277">Další informace o [dotaz pomocné parametry (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="6c9ff-278">Mezidatabázové horizontálního dělení</span><span class="sxs-lookup"><span data-stu-id="6c9ff-278">Cross-database sharding</span></span>
<span data-ttu-id="6c9ff-279">Vzhledem k Azure SQL Database běží na komoditním hardwaru, limity kapacity pro izolované databáze jsou nižší než v případě tradičních místních instalace SQL serveru.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-279">Because Azure SQL Database runs on commodity hardware, the capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="6c9ff-280">Někteří zákazníci využít techniky horizontálního dělení k šíření databázových operací prostřednictvím více databází, když není operace nevejde se do omezení jedné databáze ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-280">Some customers use sharding techniques to spread database operations over multiple databases when the operations don't fit inside the limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-281">Většina zákazníkům, kteří používají horizontálního dělení techniky ve službě Azure SQL Database rozdělit do několika databází svá data na jedinou dimenzí.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="6c9ff-282">Tento postup musíte pochopit, že OLTP aplikace často provádění transakcí, které se vztahují pouze jeden řádek nebo pro malou skupinu řádků ve schématu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-282">For this approach, you need to understand that OLTP applications often perform transactions that apply to only one row or to a small group of rows in the schema.</span></span>

> [!NOTE]
> <span data-ttu-id="6c9ff-283">Databáze SQL teď poskytuje knihovnu vám pomůže při horizontálního dělení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-283">SQL Database now provides a library to assist with sharding.</span></span> <span data-ttu-id="6c9ff-284">Další informace najdete v tématu [přehled klientské knihovny pro elastické databáze](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="6c9ff-285">Například pokud databáze obsahuje jméno zákazníka, pořadím a podrobnosti o pořadí (např. databáze Northwind tradiční příklad, který se dodává se systémem SQL Server), je může rozdělit tato data do více databází tím, že zákazník s související pořadí a podrobnosti pořadí informace.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-285">For example, if a database has customer name, order, and order details (like the traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with the related order and order detail information.</span></span> <span data-ttu-id="6c9ff-286">Může zaručit, že data zákazníka zůstává v jedné databáze.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-286">You can guarantee that the customer's data stays in a single database.</span></span> <span data-ttu-id="6c9ff-287">Aplikace by rozdělit různých zákazníků do databáze, efektivně šíření zatížení napříč více databází.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-287">The application would split different customers across databases, effectively spreading the load across multiple databases.</span></span> <span data-ttu-id="6c9ff-288">S horizontálního dělení zákazníci nejen se můžete vyhnout maximálního limitu velikosti, ale Azure SQL Database může také zpracovat úlohy, které jsou podstatně větší než omezení úrovně různých výkonu, tak dlouho, dokud každé jednotlivé databáze zapadá do jeho DTU.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-288">With sharding, customers not only can avoid the maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than the limits of the different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="6c9ff-289">I když horizontálního dělení databáze není snížit kapacitu agregační prostředků pro řešení, je vysoce efektivní v podpora velmi velké řešení, která jsou rozloženy více databází.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-289">Although database sharding doesn't reduce the aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="6c9ff-290">Každou databázi můžete spustit na úrovni různých výkonu pro podporu velký, "efektivní" databáze s vysokými požadavky na prostředky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-290">Each database can run at a different performance level to support very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="6c9ff-291">Funkční oddíly</span><span class="sxs-lookup"><span data-stu-id="6c9ff-291">Functional partitioning</span></span>
<span data-ttu-id="6c9ff-292">Uživatelům systému SQL Server často kombinovat mnoho funkcí v jedné databáze.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="6c9ff-293">Například pokud má aplikace logiky ke správě inventáře pro úložiště, že databáze může být logiku související s inventářem, sledování nákupních objednávek, uložené procedury a indexované nebo Vyhodnocená zobrazení, které Správa vytváření sestav koncový měsíc.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-293">For example, if an application has logic to manage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="6c9ff-294">Tento postup je snazší spravovat databáze pro operace, jako je zálohování, ale také vyžaduje, abyste velikost hardwarem pro zpracování zátěž ve špičce mezi všechny funkce aplikace.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-294">This technique makes it easier to administer the database for operations like backup, but it also requires you to size the hardware to handle the peak load across all functions of an application.</span></span>

<span data-ttu-id="6c9ff-295">Pokud používáte architekturu škálování ve službě Azure SQL Database, je vhodné k rozdělení různé funkce aplikace do různých databází.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea to split different functions of an application into different databases.</span></span> <span data-ttu-id="6c9ff-296">Pomocí tohoto postupu nezávisle škáluje každou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="6c9ff-297">Když aplikace bude Vytíženější (a zvyšuje zatížení databáze), Správce může rozhodnout úrovně nezávislé výkonu pro každou funkci v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-297">As an application becomes busier (and the load on the database increases), the administrator can choose independent performance levels for each function in the application.</span></span> <span data-ttu-id="6c9ff-298">V omezení, tato architektura aplikace může být větší než jeden komoditním počítač dokáže zpracovat, protože zatížení je rozdělena mezi více počítačů.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-298">At the limit, with this architecture, an application can be larger than a single commodity machine can handle because the load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="6c9ff-299">Batch dotazy</span><span class="sxs-lookup"><span data-stu-id="6c9ff-299">Batch queries</span></span>
<span data-ttu-id="6c9ff-300">Pro aplikace, které přístup k datům s použitím vysoký počet časté, ad hoc dotazy, vyžadovat značné množství doba odezvy je stráví na síťovou komunikaci mezi aplikační vrstvě a vrstvy databáze SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between the application tier and the Azure SQL Database tier.</span></span> <span data-ttu-id="6c9ff-301">I v případě, že aplikace i databáze SQL Azure jsou ve stejném datovém centru, latence sítě mezi těmito dvěma může zvětšit podle velké množství dat operace přístupu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-301">Even when both the application and Azure SQL Database are in the same data center, the network latency between the two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="6c9ff-302">Ke snížení sítě zpátečních cest pro operací přístupu k datům, zvažte použití možnost buď dávky ad hoc dotazy, nebo jejich kompilace jako uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-302">To reduce the network round trips for the data access operations, consider using the option to either batch the ad hoc queries, or to compile them as stored procedures.</span></span> <span data-ttu-id="6c9ff-303">Pokud jste dávky ad hoc dotazy, můžete odeslat více dotazů jako jeden velký batch v jedné cestě k databázi SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-303">If you batch the ad hoc queries, you can send multiple queries as one large batch in a single trip to Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-304">Pokud zkompilujete ad hoc dotazy v uložené proceduře, může se jako v případě, že jste dávky je dosažení stejného výsledku.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-304">If you compile ad hoc queries in a stored procedure, you could achieve the same result as if you batch them.</span></span> <span data-ttu-id="6c9ff-305">Pomocí uložené procedury poskytuje také výhodou zvyšuje šance na ukládání do mezipaměti plány dotazů v databázi SQL Azure, abyste mohli používat uloženou proceduru znovu.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-305">Using a stored procedure also gives you the benefit of increasing the chances of caching the query plans in Azure SQL Database so you can use the stored procedure again.</span></span>

<span data-ttu-id="6c9ff-306">Některé aplikace jsou náročné na zápis.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-306">Some applications are write-intensive.</span></span> <span data-ttu-id="6c9ff-307">V některých případech můžete snížit celkové zatížení vstupně-výstupních operací v databázi pomocí vzhledem k tomu, jak dávky zápisu společně.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-307">Sometimes you can reduce the total I/O load on a database by considering how to batch writes together.</span></span> <span data-ttu-id="6c9ff-308">Často je stejně jednoduché jako používání explicitních transakcí místo automatického potvrzení transakce v uložené procedury a ad hoc dávky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="6c9ff-309">Vyhodnocení různých technik, které můžete použít, najdete v části [dávkování techniky pro aplikace, databáze SQL v Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="6c9ff-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="6c9ff-310">Experimentujte s vlastními zatížení najít správné modelu pro dávkové zpracování.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-310">Experiment with your own workload to find the right model for batching.</span></span> <span data-ttu-id="6c9ff-311">Ujistěte se, abyste pochopili, že model může mít mírně odlišný transakční konzistence záruky.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-311">Be sure to understand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="6c9ff-312">Hledání správné zatížení, které snižuje využití prostředků vyžaduje hledání tu správnou kombinaci konzistencí a výkonem kompromis.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-312">Finding the right workload that minimizes resource use requires finding the right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="6c9ff-313">Ukládání do mezipaměti aplikační vrstvy</span><span class="sxs-lookup"><span data-stu-id="6c9ff-313">Application-tier caching</span></span>
<span data-ttu-id="6c9ff-314">Některé databázových aplikací mít úlohy náročné na čtení.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="6c9ff-315">Ukládání do mezipaměti vrstvy může vést ke snížení zatížení databáze a může potenciálně snížit úroveň výkonu, které jsou potřebné k podpoře databáze pomocí Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-315">Caching layers might reduce the load on the database and might potentially reduce the performance level required to support a database by using Azure SQL Database.</span></span> <span data-ttu-id="6c9ff-316">S [Azure Redis Cache](https://azure.microsoft.com/services/cache/), pokud máte úlohy náročné na čtení, můžete číst data jednou (nebo případně jednou za aplikační vrstvy počítače, v závislosti na tom, jak je nakonfigurovaná) a potom tato data mimo vaší databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read the data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="6c9ff-317">Toto je způsob, jak snížit zatížení databáze (procesoru a čtení vstupně-výstupních operací), ale není vliv na transakční konzistence, protože data se načten z mezipaměti může být synchronizována s daty v databázi.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-317">This is a way to reduce database load (CPU and read I/O), but there is an effect on transactional consistency because the data being read from the cache might be out of sync with the data in the database.</span></span> <span data-ttu-id="6c9ff-318">V mnoha aplikacích určité úrovně, ke kterému je přijatelné, není, platí pro všechny úlohy.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="6c9ff-319">Všechny požadavky aplikace byste měli plně rozumět před implementací strategie pro ukládání do mezipaměti aplikační vrstvy.</span><span class="sxs-lookup"><span data-stu-id="6c9ff-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6c9ff-320">Další kroky</span><span class="sxs-lookup"><span data-stu-id="6c9ff-320">Next steps</span></span>
* <span data-ttu-id="6c9ff-321">Další informace o úrovních služeb najdete v tématu [výkon a možnosti databáze SQL](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="6c9ff-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="6c9ff-322">Další informace o elastické fondy najdete v tématu [co je Azure elastickém fondu?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="6c9ff-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="6c9ff-323">Informace o výkonu a Elastická fondy najdete v tématu [při vzít v úvahu fondu elastické databáze](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="6c9ff-323">For information about performance and elastic pools, see [When to consider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

