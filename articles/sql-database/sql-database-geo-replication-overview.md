---
title: "aaaFailover skupin a aktivní geografickou replikaci - Azure SQL Database | Microsoft Docs"
description: "Automatické převzetí služeb při selhání skupiny s aktivní geografickou replikací umožňuje toosetup 4 repliky databáze v některém z hello datových centrech Azure a autoomatically převzetí služeb při selhání v případě hello výpadku."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="b8eb6-103">Přehled: Převzetí služeb při selhání skupiny a aktivní geografickou replikaci</span><span class="sxs-lookup"><span data-stu-id="b8eb6-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="b8eb6-104">Aktivní geografickou replikací vám umožní tooconfigure až toofour čitelný sekundární databáze v hello stejný nebo jiný datového centra umístění (oblastí).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="b8eb6-105">Sekundární databáze jsou k dispozici pro dotazování a převzetí služeb při selhání v případě hello data center výpadku nebo hello nemohou tooconnect toohello primární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="b8eb6-106">Hello převzetí služeb při selhání musí ručně zahájit hello aplikace hello uživatele.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="b8eb6-107">Po převzetí služeb při selhání má hello nový primární koncový bod jiné připojení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="b8eb6-108">Aktivní geografickou replikací je k dispozici pro všechny databáze na všech úrovních služby ve všech oblastech.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="b8eb6-109">Automatické převzetí služeb při selhání skupiny Azure SQL Database (-preview) je tooautomatically funkce určená SQL Database spravovat relace geografická replikace, připojení a převzetí služeb při selhání ve velkém měřítku.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="b8eb6-110">Pomocí něho hello zákazníkům nárůst hello možnost tooautomatically obnovit více souvisejících databáze v sekundární oblasti hello po závažné regionální chyby nebo další neplánované události, které služba SQL Database za následek úplné nebo částečné ztrátě hello dostupnost v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="b8eb6-111">Kromě toho jde pomocí úlohy hello čitelný sekundární databáze toooffload jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="b8eb6-112">Protože skupiny automatické převzetí služeb při selhání zahrnují více databází musí být nakonfigurované na primárním serveru hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="b8eb6-113">Primární a sekundární servery musí být v hello stejného předplatného.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="b8eb6-114">Automatické převzetí služeb při selhání skupiny podporují replikace všech databází v hello skupiny tooonly jednu sekundární server v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="b8eb6-115">Aktivní geografickou replikaci, bez skupiny automatické převzetí služeb při selhání umožňuje až too4 sekundární databáze v libovolné oblasti.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="b8eb6-116">Pokud používáte aktivní geografickou replikaci a u příčiny selže primární databázi, nebo jednoduše potřeby toobe do režimu offline, můžete spustit převzetí služeb při selhání tooany sekundárních databází.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="b8eb6-117">Při převzetí služeb při selhání je aktivovaná tooone hello sekundární databáze, jsou všechny ostatní sekundární repliky automaticky propojené toohello nový primární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="b8eb6-118">Pokud používáte – automatické převzetí služeb při selhání skupiny obnovení databáze (v preview) toomanage a všechny výpadek, který má dopad na jeden nebo několik hello databází ve skupině hello za následek automatické převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="b8eb6-119">Můžete nakonfigurovat zásady hello-automatické převzetí služeb při selhání, který bude nejlépe vyhovovat potřebám vaší aplikace, nebo můžete odhlásit a použít ruční aktivaci.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="b8eb6-120">Kromě toho skupiny automatické převzetí služeb při selhání (v preview) nabízí pro čtení a zápis a koncových bodů naslouchání jen pro čtení, které zůstanou beze změny během převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="b8eb6-121">Při použití aktivace ruční nebo automatické převzetí služeb při selhání, převzetí služeb při selhání přepne všechny sekundární databáze v tooprimary skupiny hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="b8eb6-122">Po dokončení převzetí služeb při selhání hello databáze je záznam DNS hello automaticky aktualizovány tooredirect hello koncových bodů toohello novou oblast.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="b8eb6-123">Můžete spravovat replikace a převzetí služeb při selhání může jedna databáze nebo sada databází na serveru nebo ve fondu elastické databáze používá aktivní geografickou replikaci.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="b8eb6-124">Můžete to, že pomocí hello [portál Azure](sql-database-geo-replication-portal.md), [prostředí PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), nebo hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="b8eb6-125">Po převzetí služeb při selhání Ujistěte se, že hello požadavky na ověřování pro server a databáze jsou nakonfigurovány na nový primární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="b8eb6-126">Podrobnosti najdete v tématu [zabezpečení SQL Database po zotavení po havárii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="b8eb6-127">To platí i tooactive geografická replikace automatické převzetí služeb při selhání skupiny a (v preview).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="b8eb6-128">Aktivní geografickou replikací využívá hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technologie SQL Server tooasynchronously replikují potvrzené transakce na hello primární databáze tooa sekundární databáze pomocí izolace snímku čtení potvrdit (RCSI).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="b8eb6-129">Automatické převzetí služeb při selhání skupiny poskytují hello skupiny sémantiku nad aktivní geografickou replikaci, ale hello, který se používá stejný mechanismus asynchronní replikaci.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="b8eb6-130">V libovolném časovém okamžiku hello sekundární databáze může být mírně za hello primární databázi, záruku, že data sekundární hello toonever mít částečné transakce.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="b8eb6-131">Mezi oblastmi redundance umožňuje obnovit tooquickly aplikace z trvalé ztrátě celého datového centra nebo částí datacentru způsobené přírodní katastrofy, lidské chyby závažné nebo škodlivý jednání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="b8eb6-132">Hello konkrétní plánovaný bod obnovení dat lze nalézt na [přehled kontinuity podnikových procesů](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="b8eb6-133">Hello následující obrázek znázorňuje příklad aktivní geografickou replikací nakonfigurované s v oblasti severní centrální nám hello primární a sekundární v oblasti hello jihu USA.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![geografická replikace relace](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="b8eb6-135">Protože jsou čitelné hello sekundární databáze, může se jednat použité toooffload jen pro čtení úlohy, jako například úlohy sestav.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="b8eb6-136">Pokud používáte aktivní geografickou replikaci, je možné toocreate hello sekundární databáze v hello nezvyšuje stejné oblasti s hello primární, ale aplikace hello odolnost toocatastrophic selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="b8eb6-137">Pokud používáte skupiny automatické převzetí služeb při selhání (v preview), je vždy vytvořit sekundární databáze v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="b8eb6-138">Kromě toho toodisaster obnovení active geografická replikace mohou být používány hello následující scénáře:</span><span class="sxs-lookup"><span data-stu-id="b8eb6-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="b8eb6-139">**Migrace databáze**: toomigrate aktivní geografickou replikaci databáze z jednoho serveru tooanother online můžete použít s minimální výpadky.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="b8eb6-140">**Upgrady aplikací**: můžete vytvořit další sekundární jako kopii back selhání během upgradů aplikací.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="b8eb6-141">tooachieve skutečné provozní kontinuitu, přidání redundance databáze mezi datovými centry je jenom část hello řešení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="b8eb6-142">Aplikaci (služba) na kompletní obnovení po závažné chybě vyžaduje obnovení všechny součásti, které tvoří hello služby a všechny závislé služby.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="b8eb6-143">Všechny tyto komponenty příklady hello klientský software (například prohlížeč s vlastní JavaScript), webové servery front-end, úložiště a DNS.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="b8eb6-144">Je důležité, aby všechny součásti jsou odolné toohello stejné chyby a bude k dispozici v cíli času obnovení (RTO) hello vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="b8eb6-145">Proto nutné tooidentify všechny závislé služby a pochopit hello záruky a možnosti, které poskytují.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="b8eb6-146">Pak je třeba provést tooensure přiměřené kroky, které hello funkcí služby během převzetí služeb při selhání hello služeb, na kterých závisí.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="b8eb6-147">Další informace o návrhu řešení pro zotavení po havárii, najdete v části [návrhu cloudové řešení pro obnovení po havárii pomocí aktivní geografickou replikaci](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="b8eb6-148">Možnosti aktivní geografickou replikaci</span><span class="sxs-lookup"><span data-stu-id="b8eb6-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="b8eb6-149">funkce aktivní geografickou replikací Hello poskytuje hello následující základní možnosti:</span><span class="sxs-lookup"><span data-stu-id="b8eb6-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="b8eb6-150">**Automatické asynchronní replikaci**: přidáním tooan existující databázi lze vytvořit pouze sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="b8eb6-151">Hello sekundární lze vytvořit v jakékoli serveru Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="b8eb6-152">Po vytvoření se zobrazí v sekundární databáze hello hello daty zkopírovanými z primární databáze hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="b8eb6-153">Tento proces se označuje jako synchronizace replik indexů.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-153">This process is known as seeding.</span></span> <span data-ttu-id="b8eb6-154">Po sekundární databáze byla vytvořena a nasadí, aktualizace toohello primární databáze jsou asynchronně replikuje toohello sekundární databáze automaticky.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="b8eb6-155">Asynchronní replikaci znamená, že transakce jsou potvrzeno u primární databáze hello předtím, než budou toohello replikované sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="b8eb6-156">**Čitelný sekundární databáze**: aplikace můžete přístup k sekundární databázi pro operace jen pro čtení pomocí hello stejné nebo objekty zabezpečení různých použité pro přístup k primární databázi hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="b8eb6-157">Hello sekundární databáze pracovat v izolaci snímku režimu tooensure replikace z hello aktualizací hello primární (protokol opětovného přehrání) není zpožděn dotazy spouštěné na sekundární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="b8eb6-158">Hello protokolu opakování zpožděno hello sekundární databáze případné aktualizace schématu přijímá z hello primární, které vyžadují zámek schématu hello sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="b8eb6-159">**Více čitelný sekundární repliky**: dvě nebo více sekundárních databází zvýšit redundance a úroveň ochrany pro primární databáze hello a aplikace.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="b8eb6-160">Existuje více sekundární databáze, i nadále aplikace hello chráněn, i když dojde k selhání jednoho hello sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="b8eb6-161">Pokud existuje pouze jedna sekundární databáze, a se nezdaří, je vystaven aplikace hello toohigher riziko, dokud nebude vytvořena nová sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="b8eb6-162">Pokud používáte aktivní geografickou replikací toobuild globálně distribuované aplikace a potřebujete přístup jen pro čtení tooprovide toodata v oblastech více než 4, můžete vytvořit sekundární sekundární (Tento proces se označuje jako řetězení).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="b8eb6-163">Tímto způsobem můžete dosáhnout prakticky neomezené škálování replikace databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="b8eb6-164">Kromě toho řetězení snižuje zatížení hello replikace z primární databáze hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="b8eb6-165">kompromis Hello je hello vyšší replikace funkce lag na hello listu většinu sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="b8eb6-166">.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-166">.</span></span> 
   >

* <span data-ttu-id="b8eb6-167">**Podpora fondu elastické databáze**: aktivní geografickou replikací je možné nakonfigurovat pro všechny databáze v každém elastického fondu.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="b8eb6-168">Hello sekundární databáze může být v jiném elastického fondu.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="b8eb6-169">Pro normální databáze lze hello sekundární fondu elastické databáze a naopak stejné hello, pokud jsou hello úrovně služeb.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="b8eb6-170">**Úroveň výkonu konfigurovat sekundární databáze hello**: sekundární databáze se dají vytvořit s nižší úroveň výkonu než hello primární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="b8eb6-171">Primární i sekundární databáze jsou požadované toohave hello stejnou úroveň služby.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="b8eb6-172">Tato možnost není doporučeno pro aplikace s aktivitou write vysoké databáze, protože hello vyšší replikace funkce lag zvyšuje hello riziko ztráty významné dat po selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="b8eb6-173">Kromě toho po ovlivní výkon aplikace hello převzetí služeb při selhání až hello nové primární je vyšší výkon upgradovaný tooa úroveň.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="b8eb6-174">Hello protokolu vstupně-výstupní operace procento grafu na portál Azure poskytuje vhodný způsob tooestimate hello minimální výkonu úroveň hello sekundární, který je požadovaný toosustain hello replikace zatížení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="b8eb6-175">Například, pokud je primární databáze P6 (1 000 DTU) a protokol vstupně-výstupní operace v procentech je 50 % hello sekundární potřebuje toobe nejméně P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="b8eb6-176">Můžete také načíst hello protokolu vstupně-výstupní operace dat pomocí [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) nebo [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) databáze zobrazení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="b8eb6-177">Další informace o hello úrovně výkonu databáze SQL najdete v tématu [výkon a možnosti databáze SQL](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="b8eb6-178">**Uživatelem řízená převzetí služeb při selhání a navrácení služeb po obnovení**: sekundární databáze může být explicitně primární roli vypnuté toohello kdykoli hello aplikace nebo uživatel hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="b8eb6-179">Během skutečné výpadku hello "neplánované" možnost by měl použít, které okamžitě zvýší úroveň primární sekundární toobe hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="b8eb6-180">Při selhání primární hello obnoví a je k dispozici znovu, hello systém automaticky značky hello obnovit primární jako sekundární a převeďte ho do aktuální s nový primární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="b8eb6-181">Z důvodu toohello asynchronní povaze replikace malé množství dat může dojít ke ztrátě během neplánované převzetí služeb při selhání primárního selže ještě před replikací hello nejnovější změny toohello sekundární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="b8eb6-182">Při selhání primárního serveru s více sekundárních hello systému automaticky změní konfiguraci relace replikace hello a odkazy hello zbývající sekundární repliky toohello nově povýší primární bez nutnosti zásahu uživatele.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="b8eb6-183">Po výpadku hello, která způsobila, že převzetí služeb při selhání hello zmírnit, může být žádoucí tooreturn hello aplikace toohello primární oblasti.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="b8eb6-184">toodo, že příkaz hello převzetí služeb při selhání by měla být volána s hello "plánované" možnost.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="b8eb6-185">**Udržování synchronizace přihlašovacích údajů a pravidel brány firewall**: doporučujeme používat [databáze pravidla brány firewall](sql-database-firewall-configure.md) pro geograficky replikované databáze, tato pravidla je možné replikovat s hello databáze tooensure všechny sekundární databáze mají Hello stejná pravidla brány firewall jako primární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="b8eb6-186">Tento přístup eliminuje potřebu hello zákazníci toomanually konfiguraci a údržbu pravidla brány firewall na servery, které hostují jak hello primární a sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="b8eb6-187">Podobně [obsažené uživatelů databáze](sql-database-manage-logins.md) pro data přístup zajišťuje primární i sekundární databáze mají vždy hello stejné uživatelské přihlašovací údaje, takže během převzetí služeb při selhání není k dispozici žádné přerušení kvůli toomismatches s přihlášení a hesla.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="b8eb6-188">Uveďte hello [Azure Active Directory](../active-directory/active-directory-whatis.md), zákazníci mohou spravovat uživatele přístup tooboth primární a sekundární databáze a odstraňuje hello potřebné pro zcela Správa přihlašovací údaje do databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="b8eb6-189">Možnosti skupiny-automatické převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="b8eb6-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="b8eb6-190">Funkce skupiny-automatické převzetí služeb při selhání poskytuje výkonné abstrakce aktivní geografickou replikací podporou úrovně replikační skupiny a automatické převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="b8eb6-191">Kromě toho se odeberou hello nezbytné toochange hello SQL připojovací řetězec po převzetí služeb při selhání tím, že poskytuje další naslouchací proces hello koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="b8eb6-192">**Převzetí služeb při selhání skupiny**: jednu nebo více skupin převzetí služeb při selhání můžete vytvořit mezi dvěma servery v různých oblastech (primární a sekundární servery).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="b8eb6-193">Každá skupina může obsahovat jednu nebo několik databází, které se obnoví jako jednotku, v případě, že všechny nebo některé primární databáze k dispozici z důvodu tooan výpadku v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="b8eb6-194">**Primární server**: server, který je hostitelem hello primární databází ve skupině hello převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="b8eb6-195">**Sekundární server**: server, který je hostitelem hello sekundární databází ve skupině hello převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="b8eb6-196">sekundární server Hello nemůže být v hello stejné oblasti jako primární server hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="b8eb6-197">**Přidání skupiny databází toofailover**: můžete umístit několik databází v rámci serveru nebo v rámci elastického fondu do hello stejné skupiny převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="b8eb6-198">Pokud chcete přidat skupinu samostatné databáze toohello, automaticky vytvoří sekundární databáze pomocí hello stejnou edici a úroveň výkonu.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="b8eb6-199">Pokud hello primární databází v elastickém fondu se hello sekundární je automaticky vytvořen ve hello elastický fond s hello stejný název.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="b8eb6-200">Pokud přidáte databázi, která už má sekundární databáze v sekundární server hello, geografická replikace zdědí hello skupiny.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="b8eb6-201">Při přidávání databázi, která už má sekundární databáze na serveru, který není součástí skupiny hello převzetí služeb při selhání, se vytvoří nový sekundární v sekundární server hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="b8eb6-202">**Naslouchací proces pro čtení a zápis převzetí služeb při selhání skupiny**: záznam DNS CNAME je vytvořen jako  **&lt;název skupiny pro převzetí služeb při selhání&gt;. database.windows.net** který odkazuje toohello aktuální adresa URL primární server.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="b8eb6-203">Umožňuje hello aplikace SQL pro čtení a zápis tootransparently připojení toohello primární databázi, jakmile hello primární změny po převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="b8eb6-204">**Převzetí služeb při selhání jen pro čtení naslouchací proces skupiny**: záznam DNS CNAME je vytvořen jako  **&lt;název skupiny pro převzetí služeb při selhání&gt;. secondary.database.windows.net** odkazující na adresu URL toohello sekundární server.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="b8eb6-205">Umožňuje hello jen pro čtení aplikace SQL připojit tootransparently toohello sekundární databáze pomocí hello zadaná pravidla Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="b8eb6-206">Volitelně můžete zadat, pokud chcete hello jen pro čtení provoz toobe automaticky znovu směrován toohello primární server po hello sekundární server není k dispozici.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="b8eb6-207">**Zásady automatické převzetí služeb při selhání**: ve výchozím nastavení je hello převzetí služeb při selhání skupiny nakonfigurovaná pomocí zásad automatické převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="b8eb6-208">Jakmile bude zjištěno selhání hello se aktivuje Hello systému převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="b8eb6-209">Pokud chcete pracovní postup převzetí služeb při selhání hello toocontrol z hello aplikace, můžete vypnout automatické převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="b8eb6-210">**Ruční převzetí služeb při selhání**: převzetí služeb při selhání můžete spustit ručně kdykoli bez ohledu na automatické převzetí služeb při selhání konfigurace hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="b8eb6-211">Pokud zásady automatické převzetí služeb při selhání není nakonfigurované ruční převzetí služeb při selhání je požadovaná toorecover databází ve skupině hello převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="b8eb6-212">Můžete zahájit vynucené nebo popisný převzetí služeb při selhání (úplná synchronizace dat).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="b8eb6-213">Hello pozdější může být použité toorelocate hello aktivní server toohello primární oblasti.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="b8eb6-214">Po dokončení převzetí služeb při selhání hello záznamy DNS jsou automaticky aktualizovány tooensure připojení toohello správný server.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="b8eb6-215">**Období odkladu ztráty dat.**: protože hello primárních a sekundárních databází se synchronizují pomocí asynchronní replikaci hello převzetí služeb při selhání může dojít ke ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="b8eb6-216">Tooreflect zásady hello automatické převzetí služeb při selhání můžete přizpůsobit ztrátě toodata tolerance vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="b8eb6-217">Nakonfigurováním **GracePeriodWithDataLossHours**, můžete řídit, jak dlouho hello systému čeká před zahájením hello převzetí služeb při selhání, je pravděpodobně tooresult ztráty dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="b8eb6-218">Když systém zjistí, že hello databází ve skupině hello je stále online (například výpadek hello pouze ovlivněn rovině řízení služby hello), ihned aktivuje hello převzetí služeb při selhání se úplná synchronizace dat (popisný převzetí služeb při selhání) bez ohledu na hodnotu hello nastavuje **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="b8eb6-219">To zaručuje, že nedochází ke ztrátě dat během obnovení hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="b8eb6-220">období odkladu Hello se projeví pouze v případě, že popisný převzetí služeb při selhání není možné.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="b8eb6-221">Pokud hello výpadku zmírnit před vypršením platnosti hello období odkladu, hello převzetí služeb při selhání není aktivována.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="b8eb6-222">**Více skupin převzetí služeb při selhání**: můžete nakonfigurovat více skupin převzetí služeb při selhání pro hello stejného páru servery toocontrol hello škálování převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="b8eb6-223">Každá skupina převezme nezávisle.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-223">Each group fails over independently.</span></span> <span data-ttu-id="b8eb6-224">Pokud vaše aplikace víceklientské používá elastické fondy, můžete v každém fondu databáze této schopnosti toomix primární a sekundární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="b8eb6-225">Tímto způsobem můžete snížit dopad hello výpadku tooonly polovinu hello klientům.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="b8eb6-226">Osvědčené postupy vytváření službu s vysokou dostupností</span><span class="sxs-lookup"><span data-stu-id="b8eb6-226">Best practices of building highly available service</span></span>

<span data-ttu-id="b8eb6-227">toobuild vysokou dostupností službu, která používá Azure SQL database hello zákazníků postupujte podle těchto pokynů:</span><span class="sxs-lookup"><span data-stu-id="b8eb6-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="b8eb6-228">**Použití převzetí služeb při selhání skupiny**: jednu nebo více skupin převzetí služeb při selhání můžete vytvořit mezi dvěma servery v různých oblastech (primární a sekundární servery).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="b8eb6-229">Každá skupina může obsahovat jednu nebo několik databází, které se obnoví jako jednotku, v případě, že všechny nebo některé primární databáze k dispozici z důvodu tooan výpadku v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="b8eb6-230">převzetí služeb při selhání skupiny Hello vytvoří geograficky sekundární databáze s hello stejné služby cíl, stejně jako hello primární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="b8eb6-231">Pokud přidáte s hello stejné služby cíle na úrovni jako je nakonfigurována existující geografická replikace vztah toohello převzetí služeb při selhání skupiny Ujistěte se, hello geograficky – sekundární hello primární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="b8eb6-232">**Použijte naslouchací proces pro čtení a zápis pro pracovní vytížení OLTP**: při provádění operace použití OLTP  **&lt;název skupiny pro převzetí služeb při selhání&gt;. database.windows.net** jak bude adresa URL serveru hello a hello připojení automaticky směrovanou toohello primární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="b8eb6-233">Tato adresa URL nedojde ke změně po převzetí služeb při selhání hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="b8eb6-234">Poznámka: hello převzetí služeb při selhání budete muset aktualizovat hello DNS záznam tak hello připojení klienta bude přesměrované toohello nové primární až po hello klientské mezipaměti DNS se aktualizují.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="b8eb6-235">**Použijte jen pro čtení naslouchací proces pro pracovní vytížení jen pro čtení**: Pokud máte logicky izolované jen pro čtení zatížení, která je typu prošlostí odolný vůči chybám toocertain dat, můžete použít hello sekundární databáze v aplikaci hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="b8eb6-236">Použijte jen pro čtení relací  **&lt;název skupiny pro převzetí služeb při selhání&gt;. secondary.database.windows.net** jako adresa URL serveru hello a hello připojení se automaticky směrovanou toohello sekundární.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="b8eb6-237">Dále je doporučeno, abyste určili v připojovacím řetězci číst záměr pomocí **ApplicationIntent = jen pro čtení**.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="b8eb6-238">**Připravit pro snížení výkonu**: je nezávislé na zbytek hello aplikace hello nebo dalších služeb používaných SQL rozhodovací převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="b8eb6-239">Hello aplikace může být "smíšený" s některé součásti v jedné oblasti a některé v jiném.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="b8eb6-240">snížení hello tooavoid, ujistěte se, nasazení redundantního aplikace hello v oblasti hello zotavení po Havárii a postupujte podle pokynů hello v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="b8eb6-241">Poznámka: aplikace hello v oblasti zotavení po Havárii hello nemá toouse různých připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="b8eb6-242">**Připravit na ztrátu dat**: Pokud je zjištěn výpadek, SQL automaticky aktivuje převzetí služeb při selhání pro čtení a zápis, pokud je nejlepší naše znalostí nulové ztráty toohello data.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="b8eb6-243">Jinak hodnota čekací dobu hello jste zadali ve **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="b8eb6-244">Pokud jste zadali **GracePeriodWithDataLossHours**, připravit ztráty dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="b8eb6-245">Obecně platí během výpadky, Azure upřednostňuje dostupnost.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="b8eb6-246">Pokud nechcete ztrátě dat, ujistěte se, že tooset **GracePeriodWithDataLossHours** dostatečně velký počet tooa, jako je například 24 hodin.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="b8eb6-247">Upgrade nebo přechod na starší verzi primární databáze</span><span class="sxs-lookup"><span data-stu-id="b8eb6-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="b8eb6-248">Můžete upgradovat nebo starší verzi úroveň výkonu různých tooa primární databáze (v rámci hello stejné úrovně služby) bez odpojení žádné sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="b8eb6-249">Při upgradu, doporučujeme nejprve upgradovat hello sekundární databáze a pak upgradovat primární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="b8eb6-250">Když přechod na starší verzi, změnit pořadí hello: nejdřív starší verzi hello primární a poté downgradovat sekundární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="b8eb6-251">Když upgradujete nebo starší verzi hello databáze tooa jinou službu vrstvy se vynucuje tohoto doporučení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="b8eb6-252">Pokud jste vytvořili sekundární databáze v rámci konfigurace skupiny hello převzetí služeb při selhání není doporučené toodowngrade hello sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="b8eb6-253">Toto je tooensure datové vrstvy má dostatečnou kapacitu tooprocess běžné zatížení po aktivaci převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="b8eb6-254">Brání hello ke ztrátě důležitých dat</span><span class="sxs-lookup"><span data-stu-id="b8eb6-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="b8eb6-255">Z důvodu toohello vysoké latenci sítě WAN průběžná kopie používá mechanismus asynchronní replikaci.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="b8eb6-256">Asynchronní replikaci lze ztrátu dat nevyhnutelné když dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="b8eb6-257">Nedošlo ke ztrátě dat však mohou vyžadovat některé aplikace.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="b8eb6-258">tooprotect tyto důležité aktualizace, vývojář aplikací můžete volat hello [uložená procedura sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) postup systému ihned po potvrzení transakce hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="b8eb6-259">Volání metody **uložená procedura sp_wait_for_database_copy_sync** bloky hello volání přístup z více vláken, dokud hello poslední potvrzené transakce byla přenášených toohello sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="b8eb6-260">Však není čekat na hello přenášených transakce toobe přehrány a potvrzeno u sekundární hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="b8eb6-261">**uložená procedura sp_wait_for_database_copy_sync** je odkaz oboru tooa konkrétní průběžná kopie.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="b8eb6-262">Tento postup můžete volat každý uživatel s hello připojení práva toohello primární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="b8eb6-263">**uložená procedura sp_wait_for_database_copy_sync** zabrání ztrátě dat. po převzetí služeb při selhání, ale jeho nebude zaručit úplnou synchronizaci pro přístup pro čtení.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="b8eb6-264">Hello prodlevy způsobené **uložená procedura sp_wait_for_database_copy_sync** volání procedur může být významný a závisí na velikosti hello hello transakčního protokolu v době hello hello volání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="b8eb6-265">Prostřednictvím kódu programu Správa skupin převzetí služeb při selhání a aktivní geografickou replikaci</span><span class="sxs-lookup"><span data-stu-id="b8eb6-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="b8eb6-266">Jak je popsáno dříve, skupiny automatické převzetí služeb při selhání (v preview) a aktivní geografická replikace můžete také spravovat programově pomocí prostředí Azure PowerShell a hello REST API.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="b8eb6-267">Hello následující tabulky popisují hello sadu příkazů, které jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="b8eb6-268">**Rozhraní API Azure Resource Manager a na základě rolí zabezpečení**: aktivní geografickou replikací zahrnuje sadu rozhraní API Správce Azure Resource Manager pro správu, včetně hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) a [Azure Rutiny prostředí PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="b8eb6-269">Tato rozhraní API vyžadují hello použití skupin prostředků a podporují zabezpečení na základě role (RBAC).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="b8eb6-270">Další informace o přístupu tooimplement rolí najdete v tématu [řízení přístupu](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="b8eb6-271">Mnoho nových funkcí aktivní geografickou replikaci podporují jenom pomocí [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) na základě [REST API služby Azure SQL](https://msdn.microsoft.com/library/azure/mt163571.aspx) a [rutiny prostředí PowerShell databáze SQL Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="b8eb6-272">Hello [(klasické) rozhraní API REST](https://msdn.microsoft.com/library/azure/dn505719.aspx) a [rutiny Azure SQL Database (klasické)](https://msdn.microsoft.com/library/azure/dn546723.aspx) jsou podporovány pro zpětnou kompatibilitu, takže pomocí rozhraní API založené na Azure Resource Manager doporučují hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="b8eb6-273">Spravovat SQL databáze převzetí služeb při selhání pomocí jazyka Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="b8eb6-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="b8eb6-274">Příkaz</span><span class="sxs-lookup"><span data-stu-id="b8eb6-274">Command</span></span> | <span data-ttu-id="b8eb6-275">Popis</span><span class="sxs-lookup"><span data-stu-id="b8eb6-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="b8eb6-276">Příkaz ALTER DATABASE (databáze Azure SQL)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="b8eb6-277">Použít přidat sekundární SERVER ON argument toocreate sekundární databáze pro databázi a spustí replikaci dat</span><span class="sxs-lookup"><span data-stu-id="b8eb6-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="b8eb6-278">Příkaz ALTER DATABASE (databáze Azure SQL)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="b8eb6-279">Použít převzetí služeb při selhání nebo FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch sekundární databáze toobe primární tooinitiate převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="b8eb6-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="b8eb6-280">Příkaz ALTER DATABASE (databáze Azure SQL)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="b8eb6-281">Použití odebrat sekundární SERVER ON tooterminate replikaci dat mezi SQL Database a hello zadat sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="b8eb6-282">Sys.geo_replication_links (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="b8eb6-283">Vrací informace o všechna existující replikační připojení pro každou databázi na hello logického serveru Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="b8eb6-284">Sys.dm_geo_replication_link_status (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="b8eb6-285">Získá text hello, čas poslední replikace, poslední replikace funkce lag a další informace o hello propojení replikace pro danou databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="b8eb6-286">Sys.dm_operation_status (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="b8eb6-287">Zobrazuje stav hello pro všechny databázové operace, včetně hello stav odkazů replikace hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="b8eb6-288">uložená procedura sp_wait_for_database_copy_sync (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="b8eb6-289">dokud všechny potvrzené transakce jsou replikována a potvrzena hello aktivní sekundární databáze způsobí, že toowait aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="b8eb6-290">Spravovat SQL databáze převzetí služeb při selhání pomocí pomocí prostředí PowerShell</span><span class="sxs-lookup"><span data-stu-id="b8eb6-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="b8eb6-291">Rutina</span><span class="sxs-lookup"><span data-stu-id="b8eb6-291">Cmdlet</span></span> | <span data-ttu-id="b8eb6-292">Popis</span><span class="sxs-lookup"><span data-stu-id="b8eb6-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="b8eb6-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="b8eb6-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="b8eb6-294">Získá jednu nebo více databází.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="b8eb6-295">Nové AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="b8eb6-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="b8eb6-296">Sekundární databáze pro databázi vytvoří a spustí replikaci dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="b8eb6-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="b8eb6-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="b8eb6-298">Přepne sekundární databáze toobe primární tooinitiate převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="b8eb6-299">Odebrat AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="b8eb6-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="b8eb6-300">Ukončí replikaci dat mezi SQL Database a hello zadaná sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="b8eb6-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="b8eb6-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="b8eb6-302">Získá hello geografická replikace propojení mezi Azure SQL Database a skupinu prostředků nebo SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="b8eb6-303">Nové AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="b8eb6-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="b8eb6-304">Tento příkaz vytvoří skupinu převzetí služeb při selhání a zaregistruje ho na primární a sekundární servery</span><span class="sxs-lookup"><span data-stu-id="b8eb6-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="b8eb6-305">Odebrat AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="b8eb6-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="b8eb6-306">Odebere skupinu hello převzetí služeb při selhání ze serveru hello a odstraní všechny sekundární databáze, které jsou zahrnuté v hello skupinu</span><span class="sxs-lookup"><span data-stu-id="b8eb6-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="b8eb6-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="b8eb6-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="b8eb6-308">Načte konfiguraci skupiny hello převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="b8eb6-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="b8eb6-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="b8eb6-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="b8eb6-310">Upraví konfiguraci hello hello převzetí služeb při selhání skupiny</span><span class="sxs-lookup"><span data-stu-id="b8eb6-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="b8eb6-311">Přepínač AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="b8eb6-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="b8eb6-312">Převzetí služeb při selhání aktivační události hello převzetí služeb při selhání skupiny toohello sekundární server</span><span class="sxs-lookup"><span data-stu-id="b8eb6-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="b8eb6-313">Ukázkové skripty, najdete v části [konfigurace a převzetí služeb při selhání jedné databáze používá aktivní geografickou replikaci](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [konfigurace a převzetí služeb při selhání ve fondu databáze používá aktivní geografickou replikaci](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), a [Konfigurace a převzetí služeb při selhání převzetí služeb při selhání skupiny pro jednu databázi (preview)] (skripty nebo sql-database-setup-geodr-failover-database-failover-skupin-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="b8eb6-314">Správa SQL databáze převzetí služeb při selhání pomocí hello REST API</span><span class="sxs-lookup"><span data-stu-id="b8eb6-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="b8eb6-315">Rozhraní API</span><span class="sxs-lookup"><span data-stu-id="b8eb6-315">API</span></span> | <span data-ttu-id="b8eb6-316">Popis</span><span class="sxs-lookup"><span data-stu-id="b8eb6-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="b8eb6-317">Vytvoření nebo aktualizace databáze (createMode = obnovit)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="b8eb6-318">Vytvoří, aktualizuje nebo obnoví primární nebo sekundární databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="b8eb6-319">Získat vytvořit nebo aktualizovat stav databáze</span><span class="sxs-lookup"><span data-stu-id="b8eb6-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="b8eb6-320">Vrátí stav hello během operace vytvoření.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="b8eb6-321">Nastavit sekundární databáze jako primární (plánované převzetí služeb při selhání)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="b8eb6-322">Nastaví které repliky databáze je primární podle převzetí služeb při selhání z hello aktuální primární repliku databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="b8eb6-323">Nastavit sekundární databáze jako primární (neplánované převzetí služeb při selhání)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="b8eb6-324">Nastaví které repliky databáze je primární podle převzetí služeb při selhání z hello aktuální primární repliku databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="b8eb6-325">Tato operace může způsobit ztrátu dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="b8eb6-326">Získání odkazu replikace</span><span class="sxs-lookup"><span data-stu-id="b8eb6-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="b8eb6-327">Získá konkrétní replikace odkaz pro danou databázi SQL ve spolupráci se geografická replikace.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="b8eb6-328">Načítá hello informace zobrazené v zobrazení katalogu sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="b8eb6-329">Propojení replikace - seznamu databáze</span><span class="sxs-lookup"><span data-stu-id="b8eb6-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="b8eb6-330">Získá všechny odkazy replikace pro danou databázi SQL ve spolupráci se geografická replikace.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="b8eb6-331">Načítá hello informace zobrazené v zobrazení katalogu sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="b8eb6-332">Odstranit propojení replikace</span><span class="sxs-lookup"><span data-stu-id="b8eb6-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="b8eb6-333">Odstraní propojení replikace databáze.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-333">Deletes a database replication link.</span></span> <span data-ttu-id="b8eb6-334">Nelze provést během převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="b8eb6-335">[Vytvořit nebo aktualizovat skupinu převzetí služeb při selhání] / rest/api/sql nebo failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="b8eb6-336">Vytvoří nebo aktualizuje skupinu převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="b8eb6-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="b8eb6-337">Odstranit skupinu převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="b8eb6-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="b8eb6-338">Odebere skupinu hello převzetí služeb při selhání ze serveru hello</span><span class="sxs-lookup"><span data-stu-id="b8eb6-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="b8eb6-339">Převzetí služeb při selhání (plánovaná)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="b8eb6-340">Selhání z hello aktuální primární server toothis server.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="b8eb6-341">Vynucené převzetí služeb při selhání povolit ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="b8eb6-342">ails přes z hello aktuální primární server toothis server.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="b8eb6-343">Tato operace může způsobit ztrátu dat.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="b8eb6-344">Get převzetí služeb při selhání skupiny</span><span class="sxs-lookup"><span data-stu-id="b8eb6-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="b8eb6-345">Načte skupinu převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="b8eb6-346">Seznam skupin převzetí služeb při selhání serverem</span><span class="sxs-lookup"><span data-stu-id="b8eb6-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="b8eb6-347">Seznam skupin hello převzetí služeb při selhání na serveru.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="b8eb6-348">Převzetí služeb při selhání skupiny aktualizací</span><span class="sxs-lookup"><span data-stu-id="b8eb6-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="b8eb6-349">Aktualizuje skupinu převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="b8eb6-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="b8eb6-350">Další kroky</span><span class="sxs-lookup"><span data-stu-id="b8eb6-350">Next steps</span></span>
* <span data-ttu-id="b8eb6-351">Ukázkové skripty najdete v části:</span><span class="sxs-lookup"><span data-stu-id="b8eb6-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="b8eb6-352">Konfigurace a převzetí služeb při selhání jedné databáze používá aktivní geografickou replikaci</span><span class="sxs-lookup"><span data-stu-id="b8eb6-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="b8eb6-353">Konfigurace a převzetí služeb při selhání ve fondu databáze používá aktivní geografickou replikaci</span><span class="sxs-lookup"><span data-stu-id="b8eb6-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="b8eb6-354">Konfigurace a převzetí služeb při selhání a převzetí služeb při selhání skupiny pro jednu databázi (preview)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="b8eb6-355">Přehled kontinuity obchodních a scénářů najdete v tématu [obchodní kontinuity přehled](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="b8eb6-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="b8eb6-356">toolearn o zálohování Azure SQL Database automatizované, najdete v části [automatizované zálohování SQL Database](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="b8eb6-357">toolearn o použití automatizované zálohování pro obnovení, najdete v části [obnovit databázi ze zálohy spouštěná služba hello](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="b8eb6-358">toolearn o požadavky na ověřování pro nový primární server a databázi, najdete v části [zabezpečení SQL Database po zotavení po havárii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="b8eb6-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

