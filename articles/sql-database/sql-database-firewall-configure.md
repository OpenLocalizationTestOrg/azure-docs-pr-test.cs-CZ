---
title: "Pravidla brány firewall ve službě Azure SQL Database | Microsoft Docs"
description: "Zjistěte, jak nakonfigurovat bránu firewall databáze SQL s pravidly brány firewall na úrovni serveru a databáze pro správu přístupu."
keywords: "brána firewall databáze"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 583c91376418d20d34db17d57d3fa14a1e71cd3b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="b6e86-104">Azure pravidla brány firewall serveru úroveň a databáze SQL Database</span><span class="sxs-lookup"><span data-stu-id="b6e86-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="b6e86-105">Microsoft Azure SQL Database poskytuje relační databázovou službu pro aplikace Azure a další internetové aplikace.</span><span class="sxs-lookup"><span data-stu-id="b6e86-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="b6e86-106">Brána firewall pomáhá chránit vaše data tím, že brání veškerému přístupu k vašemu databázovému serveru, dokud neurčíte, které počítače k tomu mají oprávnění.</span><span class="sxs-lookup"><span data-stu-id="b6e86-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="b6e86-107">Brána firewall uděluje přístup k databázím v závislosti na zdrojové IP adrese každého požadavku.</span><span class="sxs-lookup"><span data-stu-id="b6e86-107">The firewall grants access to databases based on the originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="b6e86-108">Přehled</span><span class="sxs-lookup"><span data-stu-id="b6e86-108">Overview</span></span>

<span data-ttu-id="b6e86-109">Zpočátku je veškerý přístup Transact-SQL k vašemu serveru SQL Azure blokován branou firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-109">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span></span> <span data-ttu-id="b6e86-110">Chcete-li začít používat server Azure SQL, musíte zadat jedno nebo více pravidel brány firewall na úrovni serveru, které umožňují přístup k serveru Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-110">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span></span> <span data-ttu-id="b6e86-111">Pomocí pravidel brány firewall určete, které rozsahy IP adres z internetu jsou povolené a zda se mohou aplikace Azure pokoušet připojovat k vašemu serveru SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="b6e86-111">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span></span>

<span data-ttu-id="b6e86-112">Pokud chcete selektivně udělit přístup pouze k jedné z databází na vašem serveru SQL Azure, musíte pro příslušnou databázi vytvořit pravidlo na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-112">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span></span> <span data-ttu-id="b6e86-113">Zadejte pro pravidlo brány firewall databáze rozsah IP adres, který je mimo rozsah IP adres zadaný v pravidlu brány firewall na úrovni serveru, a ujistěte se, že IP adresa klienta spadá do rozsahu zadaného v pravidlu na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-113">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span></span>

<span data-ttu-id="b6e86-114">Pokusy o připojení z internetu a z Azure musí nejdříve projít přes bránu firewall a až potom mají přístup k vašemu serveru SQL Azure nebo službě SQL Database. Znázorňuje to následující diagram:</span><span class="sxs-lookup"><span data-stu-id="b6e86-114">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span></span>

   ![Diagram popisující konfiguraci brány firewall.][1]

* <span data-ttu-id="b6e86-116">**Pravidla brány firewall na úrovni serveru:** Tato pravidla umožňují klientům přístup k celému serveru SQL Azure, jinými slovy ke všem databázím na stejném logickém serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-116">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="b6e86-117">Tato pravidla se ukládají v **hlavní** databázi.</span><span class="sxs-lookup"><span data-stu-id="b6e86-117">These rules are stored in the **master** database.</span></span> <span data-ttu-id="b6e86-118">Pravidla brány firewall na úrovni serveru můžete konfigurovat pomocí portálu nebo pomocí příkazů jazyka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-118">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="b6e86-119">Pokud chcete vytvořit pravidla brány firewall na úrovni serveru pomocí portálu Azure Portal nebo PowerShellu, musíte být vlastníkem nebo přispěvatelem předplatného.</span><span class="sxs-lookup"><span data-stu-id="b6e86-119">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span></span> <span data-ttu-id="b6e86-120">Pokud chcete vytvořit pravidlo brány firewall na úrovni serveru pomocí příkazu Transact-SQL, musíte se připojit k instanci služby SQL Database jako přihlášení objektu zabezpečení nebo správce Azure Active Directory (to znamená, že musí být pravidlo brány firewall na úrovni serveru nejdřív vytvořené uživatelem s oprávněními na úrovni Azure).</span><span class="sxs-lookup"><span data-stu-id="b6e86-120">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="b6e86-121">**Pravidla brány firewall na úrovni databáze:** tato pravidla povolit klientům přístup k určité (zabezpečení) databází v rámci stejného logického serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-121">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span></span> <span data-ttu-id="b6e86-122">Můžete vytvořit tato pravidla pro každou databázi (včetně **hlavní** database0) a jsou uložené v jednotlivých databázích.</span><span class="sxs-lookup"><span data-stu-id="b6e86-122">You can create these rules for each database (including the **master** database0) and they are stored in the individual databases.</span></span> <span data-ttu-id="b6e86-123">Pravidla brány firewall na úrovni databáze může být pouze nakonfigurovaná pomocí příkazů Transact-SQL a pouze po dokončení konfigurace první brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured the first server-level firewall.</span></span> <span data-ttu-id="b6e86-124">Pokud v pravidlu brány firewall na úrovni databáze zadáte rozsah IP adres, který je mimo rozsah zadaný v pravidlu brány firewall na úrovni serveru, budou mít k dané databázi přístup pouze klienti, jejichž IP adresa je v rozsahu na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-124">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span></span> <span data-ttu-id="b6e86-125">Pro jednu databázi můžete mít maximálně 128 pravidel brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="b6e86-126">Pravidla brány firewall na úrovni databáze pro hlavní a uživatele databáze lze pouze vytvořit a spravovat prostřednictvím jazyka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="b6e86-127">Další informace o konfiguraci pravidla brány firewall na úrovni databáze, podívejte se na příklad později v tomto článku a v tématu [sp_set_database_firewall_rule (databáze SQL Azure)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6e86-127">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="b6e86-128">**Doporučení:** Společnost Microsoft doporučuje pro zvýšení zabezpečení a přenositelnosti databází používat pravidla brány firewall na úrovni databáze kdykoli je to možné.</span><span class="sxs-lookup"><span data-stu-id="b6e86-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span></span> <span data-ttu-id="b6e86-129">Použijte pravidla brány firewall na úrovni serveru pro správce a pokud máte mnoho databází se stejnými požadavky na přístup a nechcete ztrácet čas konfigurací jednotlivých databází.</span><span class="sxs-lookup"><span data-stu-id="b6e86-129">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="b6e86-130">Informace o přenosných databázích v kontextu kontinuity podnikových procesů najdete v tématu [Požadavky na ověřování pro zotavení po havárii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="b6e86-130">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-the-internet"></a><span data-ttu-id="b6e86-131">Připojení z Internetu</span><span class="sxs-lookup"><span data-stu-id="b6e86-131">Connecting from the Internet</span></span>

<span data-ttu-id="b6e86-132">Když se počítač pokusí z internetu připojit k databázovému serveru, brána firewall nejprve u databáze, kterou připojení požaduje, pomocí pravidel brány firewall na úrovni databáze zkontroluje zdrojovou IP adresu požadavku:</span><span class="sxs-lookup"><span data-stu-id="b6e86-132">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span></span>

* <span data-ttu-id="b6e86-133">Pokud je IP adresa požadavku v jednom z rozsahů určených v pravidlech brány firewall na úrovni databáze, připojení ke službě SQL Database, která pravidlo obsahuje, je povoleno.</span><span class="sxs-lookup"><span data-stu-id="b6e86-133">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span></span>
* <span data-ttu-id="b6e86-134">Pokud IP adresa požadavku není v žádném z rozsahů určených v pravidlech brány firewall na úrovni databáze, zkontrolují se pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-134">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span></span> <span data-ttu-id="b6e86-135">Pokud je IP adresa požadavku v jednom z rozsahů určených v pravidlech brány firewall na úrovni serveru, připojení je povoleno.</span><span class="sxs-lookup"><span data-stu-id="b6e86-135">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span> <span data-ttu-id="b6e86-136">Pravidla brány firewall na úrovni serveru se vztahují na všechny databáze SQL na serveru Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-136">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span></span>  
* <span data-ttu-id="b6e86-137">Pokud IP adresa požadavku není v rámci rozsahů určených v žádné z pravidel brány firewall na úrovni databáze nebo úrovni serveru, požadavek na připojení se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="b6e86-137">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="b6e86-138">Pro přístup ke službě Azure SQL Database z místního počítače se ujistěte, že brána firewall na vaší síti i místní počítač umožňují odchozí komunikaci na portu TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="b6e86-138">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="b6e86-139">Připojení z Azure</span><span class="sxs-lookup"><span data-stu-id="b6e86-139">Connecting from Azure</span></span>
<span data-ttu-id="b6e86-140">Pokud chcete umožnit aplikacím z Azure připojení k vašemu serveru SQL Azure, musí být povolená připojení Azure.</span><span class="sxs-lookup"><span data-stu-id="b6e86-140">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="b6e86-141">Když se aplikace z Azure pokusí připojit k vašemu databázovému serveru, brána firewall ověří, zda jsou povolená připojení Azure.</span><span class="sxs-lookup"><span data-stu-id="b6e86-141">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="b6e86-142">Nastavení brány firewall s počáteční i koncovou adresou odpovídající 0.0.0.0 znamená, že jsou tato připojení povolená.</span><span class="sxs-lookup"><span data-stu-id="b6e86-142">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="b6e86-143">Pokud pokus o připojení není povolený, požadavek se k serveru služby Azure SQL Database vůbec nedostane.</span><span class="sxs-lookup"><span data-stu-id="b6e86-143">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b6e86-144">Touto možností se brána firewall nakonfiguruje tak, aby povolovala všechna připojení z Azure, včetně připojení z předplatných ostatních zákazníků.</span><span class="sxs-lookup"><span data-stu-id="b6e86-144">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span></span> <span data-ttu-id="b6e86-145">Když vyberete tuto možnost, ujistěte se, že vaše přihlašovací a uživatelská oprávnění omezují přístup pouze na autorizované uživatele.</span><span class="sxs-lookup"><span data-stu-id="b6e86-145">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="b6e86-146">Vytváření a správu pravidel brány firewall</span><span class="sxs-lookup"><span data-stu-id="b6e86-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="b6e86-147">První nastavení brány firewall na úrovni serveru můžete vytvořit pomocí [portál Azure](https://portal.azure.com/) nebo programově pomocí [prostředí Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [rozhraní příkazového řádku Azure](/cli/azure/sql/server/firewall-rule#create), nebo [ Rozhraní REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6e86-147">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or the [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="b6e86-148">Další pravidla brány firewall na úrovni serveru můžete vytvářet a spravovat těmito způsoby nebo prostřednictvím jazyka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="b6e86-149">Pravidla brány firewall na úrovni databáze mohou být vytvořeny pouze a spravovat pomocí jazyka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="b6e86-150">Pro zvýšení výkonu se pravidla brány firewall na úrovni serveru dočasně ukládají do mezipaměti na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-150">To improve performance, server-level firewall rules are temporarily cached at the database level.</span></span> <span data-ttu-id="b6e86-151">Pokud chcete mezipaměť aktualizovat, podívejte se na příkaz [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6e86-151">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="b6e86-152">Můžete použít [auditování databáze SQL](sql-database-auditing.md) auditování změn brány firewall úrovni serveru a na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-152">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="b6e86-153">portál Azure</span><span class="sxs-lookup"><span data-stu-id="b6e86-153">Azure portal</span></span>

<span data-ttu-id="b6e86-154">Pokud chcete nastavit na portálu Azure pravidlo brány firewall na úrovni serveru, můžete buď přejdete na stránku přehled pro Azure SQL database nebo stránce Přehled logického serveru Azure databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-154">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="b6e86-155">Podívejte se kurz [vytvořit pomocí portálu Azure DB](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b6e86-155">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="b6e86-156">**Na stránce Přehled databáze**</span><span class="sxs-lookup"><span data-stu-id="b6e86-156">**From database overview page**</span></span>

1. <span data-ttu-id="b6e86-157">Chcete-li nastavit pravidlo brány firewall na úrovni serveru na stránce Přehled databáze, klikněte na tlačítko **nastavení brány firewall serveru** na panelu nástrojů, jak je znázorněno na následujícím obrázku: **nastavení brány Firewall** stránky pro server databáze SQL Otevře se.</span><span class="sxs-lookup"><span data-stu-id="b6e86-157">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span></span>

      ![pravidlo brány firewall serveru](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="b6e86-159">Klikněte na tlačítko **přidat IP adresu klienta** na panelu nástrojů přidat IP adresu počítače jsou aktuálně používá a potom klikněte na **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="b6e86-159">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="b6e86-160">Vytvoří se pravidlo brány firewall na úrovni serveru pro vaši aktuální IP adresu.</span><span class="sxs-lookup"><span data-stu-id="b6e86-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![nastavení pravidla brány firewall serveru](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="b6e86-162">**Na stránce Přehled serveru**</span><span class="sxs-lookup"><span data-stu-id="b6e86-162">**From server overview page**</span></span>

<span data-ttu-id="b6e86-163">Otevře se stránka Přehled pro váš server, ukazuje název plně kvalifikovaný serveru (například **mynewserver20170403.database.windows.net**) a poskytuje možnosti pro další konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="b6e86-163">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="b6e86-164">Chcete-li nastavit pravidlo, úrovni serveru ze stránky přehled serveru, klikněte na tlačítko **brány Firewall** v levé nabídce v části nastavení jako vám ukázal na následujícím obrázku:</span><span class="sxs-lookup"><span data-stu-id="b6e86-164">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings as showed in the following image:</span></span> 

     ![Přehled logický server](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="b6e86-166">Klikněte na tlačítko **přidat IP adresu klienta** na panelu nástrojů přidat IP adresu počítače jsou aktuálně používá a potom klikněte na **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="b6e86-166">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="b6e86-167">Vytvoří se pravidlo brány firewall na úrovni serveru pro vaši aktuální IP adresu.</span><span class="sxs-lookup"><span data-stu-id="b6e86-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![nastavení pravidla brány firewall serveru](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="b6e86-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="b6e86-169">Transact-SQL</span></span>
| <span data-ttu-id="b6e86-170">Zobrazení katalogu nebo uložená procedura</span><span class="sxs-lookup"><span data-stu-id="b6e86-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="b6e86-171">Úroveň</span><span class="sxs-lookup"><span data-stu-id="b6e86-171">Level</span></span> | <span data-ttu-id="b6e86-172">Popis</span><span class="sxs-lookup"><span data-stu-id="b6e86-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="b6e86-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="b6e86-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="b6e86-174">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-174">Server</span></span> |<span data-ttu-id="b6e86-175">Zobrazí aktuální pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-175">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="b6e86-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="b6e86-177">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-177">Server</span></span> |<span data-ttu-id="b6e86-178">Vytvoří nebo aktualizuje pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="b6e86-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="b6e86-180">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-180">Server</span></span> |<span data-ttu-id="b6e86-181">Odebere pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="b6e86-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="b6e86-183">Databáze</span><span class="sxs-lookup"><span data-stu-id="b6e86-183">Database</span></span> |<span data-ttu-id="b6e86-184">Zobrazí aktuální pravidla brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-184">Displays the current database-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="b6e86-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="b6e86-186">Databáze</span><span class="sxs-lookup"><span data-stu-id="b6e86-186">Database</span></span> |<span data-ttu-id="b6e86-187">Vytvoří nebo aktualizuje pravidla brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-187">Creates or updates the database-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="b6e86-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="b6e86-189">Databáze</span><span class="sxs-lookup"><span data-stu-id="b6e86-189">Databases</span></span> |<span data-ttu-id="b6e86-190">Odebere pravidla brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="b6e86-191">Následující příklady zkontrolujte existující pravidla, povolte rozsah IP adres na serveru Contoso a odstraní pravidlo brány firewall:</span><span class="sxs-lookup"><span data-stu-id="b6e86-191">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="b6e86-192">Potom přidejte pravidlo brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="b6e86-193">Pokud chcete odstranit pravidlo brány firewall na úrovni serveru, spusťte uloženou proceduru sp_delete_firewall_rule.</span><span class="sxs-lookup"><span data-stu-id="b6e86-193">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="b6e86-194">Následující příklad odstraní pravidlo s názvem ContosoFirewallRule:</span><span class="sxs-lookup"><span data-stu-id="b6e86-194">The following example deletes the rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="b6e86-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="b6e86-195">Azure PowerShell</span></span>
| <span data-ttu-id="b6e86-196">Rutina</span><span class="sxs-lookup"><span data-stu-id="b6e86-196">Cmdlet</span></span> | <span data-ttu-id="b6e86-197">Úroveň</span><span class="sxs-lookup"><span data-stu-id="b6e86-197">Level</span></span> | <span data-ttu-id="b6e86-198">Popis</span><span class="sxs-lookup"><span data-stu-id="b6e86-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="b6e86-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="b6e86-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="b6e86-200">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-200">Server</span></span> |<span data-ttu-id="b6e86-201">Vrátí aktuální pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-201">Returns the current server-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="b6e86-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="b6e86-203">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-203">Server</span></span> |<span data-ttu-id="b6e86-204">Vytvoří nové pravidlo brány firewall na úrovni serveru</span><span class="sxs-lookup"><span data-stu-id="b6e86-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="b6e86-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="b6e86-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="b6e86-206">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-206">Server</span></span> |<span data-ttu-id="b6e86-207">Aktualizuje vlastnosti existujícího pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-207">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="b6e86-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="b6e86-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="b6e86-209">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-209">Server</span></span> |<span data-ttu-id="b6e86-210">Odebere pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="b6e86-211">Následující příklad ilustruje pravidlo brány firewall na úrovni serveru pomocí prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="b6e86-211">The following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="b6e86-212">Příklady prostředí PowerShell v kontextu systému rychle začít, najdete v části [vytvořit DB - PowerShell](sql-database-get-started-powershell.md) a [vytvářet izolované databáze a nakonfigurujte pravidlo brány firewall pomocí prostředí PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="b6e86-212">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="b6e86-213">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="b6e86-213">Azure CLI</span></span>
| <span data-ttu-id="b6e86-214">Rutina</span><span class="sxs-lookup"><span data-stu-id="b6e86-214">Cmdlet</span></span> | <span data-ttu-id="b6e86-215">Úroveň</span><span class="sxs-lookup"><span data-stu-id="b6e86-215">Level</span></span> | <span data-ttu-id="b6e86-216">Popis</span><span class="sxs-lookup"><span data-stu-id="b6e86-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="b6e86-217">Vytvoření brány firewall az sql serveru</span><span class="sxs-lookup"><span data-stu-id="b6e86-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="b6e86-218">Vytvoří pravidlo brány firewall pro povolení přístupu pro všechny SQL databáze na serveru ze zadané rozsahu IP adres.</span><span class="sxs-lookup"><span data-stu-id="b6e86-218">Creates a firewall rule to allow access to all SQL Databases on the server from the entered IP address range.</span></span>|
| [<span data-ttu-id="b6e86-219">odstranění brány firewall serveru sql az</span><span class="sxs-lookup"><span data-stu-id="b6e86-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="b6e86-220">Odstraní pravidlo brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="b6e86-221">seznam az sql serverů brány firewall</span><span class="sxs-lookup"><span data-stu-id="b6e86-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="b6e86-222">Obsahuje seznam pravidel brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-222">Lists the firewall rules.</span></span>|
| [<span data-ttu-id="b6e86-223">pravidlo brány firewall serveru sql az zobrazit</span><span class="sxs-lookup"><span data-stu-id="b6e86-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="b6e86-224">Zobrazuje podrobnosti o pravidlo brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-224">Shows the details of a firewall rule.</span></span>|
| [<span data-ttu-id="b6e86-225">AX aktualizace pravidla brány firewall serveru sql</span><span class="sxs-lookup"><span data-stu-id="b6e86-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="b6e86-226">Aktualizuje pravidlo brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-226">Updates a firewall rule.</span></span>

<span data-ttu-id="b6e86-227">Následující příklad ilustruje pravidlo brány firewall na úrovni serveru pomocí rozhraní příkazového řádku Azure:</span><span class="sxs-lookup"><span data-stu-id="b6e86-227">The following example sets a server-level firewall rule using the Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="b6e86-228">Příklad rozhraní příkazového řádku Azure v kontextu rychle začít, najdete v části [vytvořit odpis - rozhraní příkazového řádku Azure](sql-database-get-started-cli.md) a [vytvářet izolované databáze a nakonfigurujte pravidlo brány firewall pomocí rozhraní příkazového řádku Azure](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="b6e86-228">For an Azure CLI example in the context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="b6e86-229">REST API</span><span class="sxs-lookup"><span data-stu-id="b6e86-229">REST API</span></span>
| <span data-ttu-id="b6e86-230">Rozhraní API</span><span class="sxs-lookup"><span data-stu-id="b6e86-230">API</span></span> | <span data-ttu-id="b6e86-231">Úroveň</span><span class="sxs-lookup"><span data-stu-id="b6e86-231">Level</span></span> | <span data-ttu-id="b6e86-232">Popis</span><span class="sxs-lookup"><span data-stu-id="b6e86-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="b6e86-233">Výpis pravidel brány firewall</span><span class="sxs-lookup"><span data-stu-id="b6e86-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="b6e86-234">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-234">Server</span></span> |<span data-ttu-id="b6e86-235">Zobrazí aktuální pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-235">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-236">Vytvoření pravidla brány firewall</span><span class="sxs-lookup"><span data-stu-id="b6e86-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="b6e86-237">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-237">Server</span></span> |<span data-ttu-id="b6e86-238">Vytvoří nebo aktualizuje pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="b6e86-239">Nastavení pravidla brány firewall</span><span class="sxs-lookup"><span data-stu-id="b6e86-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="b6e86-240">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-240">Server</span></span> |<span data-ttu-id="b6e86-241">Aktualizuje vlastnosti existujícího pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-241">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="b6e86-242">Odstranění pravidla brány firewall</span><span class="sxs-lookup"><span data-stu-id="b6e86-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="b6e86-243">Server</span><span class="sxs-lookup"><span data-stu-id="b6e86-243">Server</span></span> |<span data-ttu-id="b6e86-244">Odebere pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="b6e86-245">Pravidlo brány firewall na úrovni serveru a pravidla brány firewall na úrovni databáze</span><span class="sxs-lookup"><span data-stu-id="b6e86-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="b6e86-246">OTÁZKY.</span><span class="sxs-lookup"><span data-stu-id="b6e86-246">Q.</span></span> <span data-ttu-id="b6e86-247">Musí být uživatelé jednu databázi plně izolovaném z jiné databáze?</span><span class="sxs-lookup"><span data-stu-id="b6e86-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="b6e86-248">Pokud ano, udělte přístup pomocí pravidel brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="b6e86-249">Tím je zabráněno pomocí pravidla brány firewall na úrovni serveru, která umožňují přístup přes bránu firewall, aby všechny databáze, snižuje hloubka svoji ochranu.</span><span class="sxs-lookup"><span data-stu-id="b6e86-249">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span></span>   
 
<span data-ttu-id="b6e86-250">OTÁZKY.</span><span class="sxs-lookup"><span data-stu-id="b6e86-250">Q.</span></span> <span data-ttu-id="b6e86-251">Mají uživatelé na IP adrese přístupu pro všechny databáze?</span><span class="sxs-lookup"><span data-stu-id="b6e86-251">Do users at the IP address’s need access to all databases?</span></span>   
  <span data-ttu-id="b6e86-252">Pomocí pravidel brány firewall na úrovni serveru můžete snížit počet, kolikrát je nutné nakonfigurovat pravidla brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-252">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="b6e86-253">OTÁZKY.</span><span class="sxs-lookup"><span data-stu-id="b6e86-253">Q.</span></span> <span data-ttu-id="b6e86-254">Osobu nebo tým konfigurace pravidel brány firewall pouze má přístup prostřednictvím portálu Azure, PowerShell nebo rozhraní REST API?</span><span class="sxs-lookup"><span data-stu-id="b6e86-254">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span></span>   
  <span data-ttu-id="b6e86-255">Je nutné použít pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="b6e86-256">Pravidla brány firewall na úrovni databáze se dá nakonfigurovat jenom pomocí jazyka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="b6e86-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="b6e86-257">OTÁZKY.</span><span class="sxs-lookup"><span data-stu-id="b6e86-257">Q.</span></span> <span data-ttu-id="b6e86-258">Je osobě nebo týmu konfigurace pravidla brány firewall zakázáno s vysoké úrovně oprávnění na úrovni databáze?</span><span class="sxs-lookup"><span data-stu-id="b6e86-258">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span></span>   
  <span data-ttu-id="b6e86-259">Pomocí pravidel brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-259">Use server-level firewall rules.</span></span> <span data-ttu-id="b6e86-260">Konfigurace pravidel brány firewall na úrovni databáze pomocí jazyka Transact-SQL, vyžaduje alespoň `CONTROL DATABASE` oprávnění na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span></span>  

<span data-ttu-id="b6e86-261">OTÁZKY.</span><span class="sxs-lookup"><span data-stu-id="b6e86-261">Q.</span></span> <span data-ttu-id="b6e86-262">Je osobě nebo týmu konfigurace nebo auditování pravidla brány firewall, centrálně spravovat pravidla brány firewall pro mnoho (možná 100s) z databáze?</span><span class="sxs-lookup"><span data-stu-id="b6e86-262">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="b6e86-263">Tento výběr závisí na konkrétních potřeb a prostředí.</span><span class="sxs-lookup"><span data-stu-id="b6e86-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="b6e86-264">Pravidla brány firewall na úrovni serveru, může být jednodušší ke konfiguraci, ale skriptování můžete nakonfigurovat pravidla, na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-264">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span></span> <span data-ttu-id="b6e86-265">I když používáte pravidla brány firewall na úrovni serveru, může být nutné auditovat pravidla firewallu databáze, a zjistěte, zda uživatelé s `CONTROL` oprávnění v databázi vytvořili pravidla brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-265">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span></span>   

<span data-ttu-id="b6e86-266">OTÁZKY.</span><span class="sxs-lookup"><span data-stu-id="b6e86-266">Q.</span></span> <span data-ttu-id="b6e86-267">Můžete použít kombinaci obou pravidla brány firewall úrovni serveru a na úrovni databáze?</span><span class="sxs-lookup"><span data-stu-id="b6e86-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="b6e86-268">Ano.</span><span class="sxs-lookup"><span data-stu-id="b6e86-268">Yes.</span></span> <span data-ttu-id="b6e86-269">Někteří uživatelé, třeba správci, může být nutné pravidla brány firewall na úrovni serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="b6e86-270">Jiných uživatelů, jako jsou uživatelé databázovou aplikaci, může být nutné pravidla brány firewall na úrovni databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="b6e86-271">Řešení potíží s branou firewall databáze</span><span class="sxs-lookup"><span data-stu-id="b6e86-271">Troubleshooting the database firewall</span></span>
<span data-ttu-id="b6e86-272">Pokud se přístup ke službě Microsoft Azure SQL Database nechová podle očekávání, zvažte následující:</span><span class="sxs-lookup"><span data-stu-id="b6e86-272">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="b6e86-273">**Konfigurace místní brány firewall:** Než bude váš počítač moci přistupovat ke službě Azure SQL Database, možná bude nutné vytvořit pro váš počítač výjimku brány firewall pro port TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="b6e86-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="b6e86-274">Pokud provádíte připojení v rámci cloudu Azure, možná bude nutné otevřít další porty.</span><span class="sxs-lookup"><span data-stu-id="b6e86-274">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span></span> <span data-ttu-id="b6e86-275">Další informace najdete v tématu **SQL Database: mimo vs uvnitř** části [porty nad rámec 1433 pro technologii ADO.NET 4.5 a SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="b6e86-275">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="b6e86-276">**Překlad adres (NAT):** Je možné, že kvůli překladu adres (NAT) se bude lišit IP adresa, kterou váš počítač používá pro připojení ke službě Azure SQL Database, a IP adresa, která se zobrazuje na vašem počítači v nastavení konfigurace IP adresy.</span><span class="sxs-lookup"><span data-stu-id="b6e86-276">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="b6e86-277">Pokud chcete zobrazit IP adresu, kterou váš počítač používá pro připojení k Azure, přihlaste se na portál a přejděte na kartu **Konfigurovat** na serveru, který je hostitelem vaší databáze.</span><span class="sxs-lookup"><span data-stu-id="b6e86-277">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span></span> <span data-ttu-id="b6e86-278">V části **Povolené IP adresy** se zobrazí **Aktuální IP adresa klienta**.</span><span class="sxs-lookup"><span data-stu-id="b6e86-278">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="b6e86-279">Kliknutím na **Přidat** mezi **Povolené IP adresy** umožníte tomuto počítači přístup k serveru.</span><span class="sxs-lookup"><span data-stu-id="b6e86-279">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span></span>
* <span data-ttu-id="b6e86-280">**Změny seznamu povolených se ještě neprojevily:** Může trvat až pět minut, než se změny konfigurace brány firewall služby Azure SQL Database projeví.</span><span class="sxs-lookup"><span data-stu-id="b6e86-280">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span></span>
* <span data-ttu-id="b6e86-281">**Přihlášení není autorizováno nebo bylo použito nesprávné heslo:** Pokud přihlášení nemá oprávnění k serveru služby Azure SQL Database nebo pokud bylo použito nesprávné heslo, připojení k serveru služby Azure SQL Database je zamítnuto.</span><span class="sxs-lookup"><span data-stu-id="b6e86-281">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span></span> <span data-ttu-id="b6e86-282">Vytvoření nastavení brány firewall klientům pouze poskytuje možnost pokusit se o připojení k vašemu serveru – každý klient musí dodat potřebné zabezpečené přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="b6e86-282">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span> <span data-ttu-id="b6e86-283">Další informace o přípravě přihlášení najdete v tématu Správa databází, přihlášení a uživatelů ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="b6e86-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="b6e86-284">**Dynamická IP adresa:** Pokud vaše internetové připojení používá dynamické přidělování IP adres a máte problémy dostat se přes bránu firewall, můžete zkusit jedno z následujících řešení:</span><span class="sxs-lookup"><span data-stu-id="b6e86-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>
  
  * <span data-ttu-id="b6e86-285">Požádejte svého poskytovatele internetových služeb (ISP) o rozsah IP adres přidělený vašim klientským počítačům, které přistupují k serveru služby Azure SQL Database, a následně přidejte tento rozsah IP adres jako pravidlo brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-285">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="b6e86-286">Získejte pro své klientské počítače statické přidělování IP adres a následně přidejte tyto IP adresy jako pravidla brány firewall.</span><span class="sxs-lookup"><span data-stu-id="b6e86-286">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b6e86-287">Další kroky</span><span class="sxs-lookup"><span data-stu-id="b6e86-287">Next steps</span></span>

- <span data-ttu-id="b6e86-288">Rychlý start na vytváření databáze a pravidlo brány firewall na úrovni serveru, najdete v části [vytvoření Azure SQL database](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b6e86-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="b6e86-289">S připojováním k databázi SQL Azure z open source aplikací nebo aplikací třetích stran vám pomůžou [Ukázky kódu pro rychlý start klientů se službou SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6e86-289">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="b6e86-290">Informace o další porty, které budete muset otevřít v tématu **SQL Database: mimo vs uvnitř** části [porty nad rámec 1433 pro technologii ADO.NET 4.5 a databáze SQL](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="b6e86-290">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="b6e86-291">Přehled zabezpečení Azure SQL Database, najdete v části [zabezpečení databáze](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="b6e86-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
