---
title: "Přehled služby Azure SQL Database elastické dotazu | Microsoft Docs"
description: "Přehled funkce elastické dotazu"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: 9b3151248a1d036117bbdc9af03a98dff71ca535
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="6ca10-103">Elastické dotazu Přehled služby Azure SQL Database (preview)</span><span class="sxs-lookup"><span data-stu-id="6ca10-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="6ca10-104">Funkce elastické dotazu (ve verzi preview) umožňuje spuštění dotazu jazyka Transact-SQL, která přesahuje více databází ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6ca10-104">The elastic query feature (in preview) enables you to run a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="6ca10-105">Umožňuje provádět dotazy mezidatabázové přístup do vzdálených tabulek, připojovat a nástroje Microsoft a třetích stran (aplikace Excel, PowerBI, Tableau atd.) k dotazování mezi datové vrstvy s více databází.</span><span class="sxs-lookup"><span data-stu-id="6ca10-105">It allows you to perform cross-database queries to access remote tables, and to connect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) to query across data tiers with multiple databases.</span></span> <span data-ttu-id="6ca10-106">Pomocí této funkce můžete škálovat dotazy do vrstev velkých objemů dat v databázi SQL a zobrazit výsledky v sestavách business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="6ca10-106">Using this feature, you can scale out queries to large data tiers in SQL Database and visualize the results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="6ca10-107">Proč používat elastické dotazy?</span><span class="sxs-lookup"><span data-stu-id="6ca10-107">Why use elastic queries?</span></span>

<span data-ttu-id="6ca10-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="6ca10-108">**Azure SQL Database**</span></span>

<span data-ttu-id="6ca10-109">Dotazování mezi databází Azure SQL zcela v T-SQL.</span><span class="sxs-lookup"><span data-stu-id="6ca10-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="6ca10-110">To umožňuje jen pro čtení dotazování vzdálené databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="6ca10-111">To poskytuje možnost pro aktuální zákazníky místní systém SQL Server k migraci aplikace, které používají tři a čtyř částečný názvy nebo odkazovaný server k databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="6ca10-111">This provides an option for current on-premises SQL Server customers to migrate applications using three- and four-part names or linked server to SQL DB.</span></span>

<span data-ttu-id="6ca10-112">**K dispozici na úrovni standard**</span><span class="sxs-lookup"><span data-stu-id="6ca10-112">**Available on standard tier**</span></span>

<span data-ttu-id="6ca10-113">Na úrovni Standard výkonu kromě úroveň výkonu Premium je podporován elastické dotaz.</span><span class="sxs-lookup"><span data-stu-id="6ca10-113">Elastic query is supported on the Standard performance tier in addition to the Premium performance tier.</span></span> <span data-ttu-id="6ca10-114">Na omezení výkonu pro nižší úrovně výkonu najdete v části na omezení verze Preview níže.</span><span class="sxs-lookup"><span data-stu-id="6ca10-114">See the section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="6ca10-115">**Odešlete do vzdálené databáze**</span><span class="sxs-lookup"><span data-stu-id="6ca10-115">**Push to remote databases**</span></span>

<span data-ttu-id="6ca10-116">Elastické dotazy můžete nyní nabízená parametry SQL vzdálené databáze pro provedení.</span><span class="sxs-lookup"><span data-stu-id="6ca10-116">Elastic queries can now push SQL parameters to the remote databases for execution.</span></span>

<span data-ttu-id="6ca10-117">**Spuštění uložené procedury**</span><span class="sxs-lookup"><span data-stu-id="6ca10-117">**Stored procedure execution**</span></span>

<span data-ttu-id="6ca10-118">Spustit volání vzdálené uložené procedury nebo funkce remote pomocí [sp\_provést \_vzdáleného](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="6ca10-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="6ca10-119">**Flexibilita**</span><span class="sxs-lookup"><span data-stu-id="6ca10-119">**Flexibility**</span></span>

<span data-ttu-id="6ca10-120">Externí tabulky s elastické dotazu mohou nyní odkazovat na vzdálených tabulek s jiné schéma nebo název tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-120">External tables with elastic query can now refer to remote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="6ca10-121">Scénáře elastické dotazu</span><span class="sxs-lookup"><span data-stu-id="6ca10-121">Elastic query scenarios</span></span>

<span data-ttu-id="6ca10-122">Cílem je usnadnit dotazování scénáře, kde více databází přispívat řádků do jednoho celkového výsledku.</span><span class="sxs-lookup"><span data-stu-id="6ca10-122">The goal is to facilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="6ca10-123">Dotaz můžete sestavit buď uživatele nebo aplikace přímo nebo nepřímo prostřednictvím nástroje, které jsou připojené k databázi.</span><span class="sxs-lookup"><span data-stu-id="6ca10-123">The query can either be composed by the user or application directly, or indirectly through tools that are connected to the database.</span></span> <span data-ttu-id="6ca10-124">To je užitečné zejména při vytváření sestav, pomocí komerční integrace nástroje BI nebo data, nebo jakékoli aplikace, kterou nelze změnit.</span><span class="sxs-lookup"><span data-stu-id="6ca10-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="6ca10-125">S elastické dotaz se můžete dotazovat napříč několika databází v nástroje, například aplikace Excel, PowerBI, Tableau nebo Cognos známou vlastnost připojení k systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6ca10-125">With an elastic query, you can query across several databases using the familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="6ca10-126">Dotaz elastické umožňuje snadný přístup k celou kolekci databáze pomocí dotazů vydaný SQL Server Management Studio nebo Visual Studio a usnadňuje mezidatabázové dotazování z Entity Framework nebo jiných ORM prostředích.</span><span class="sxs-lookup"><span data-stu-id="6ca10-126">An elastic query allows easy access to an entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="6ca10-127">Obrázek 1 ukazuje scénář, kde existující cloudových aplikací (které používá [klientské knihovny pro elastické databáze](sql-database-elastic-database-client-library.md)) staví na data Škálováním vrstvy a elastické dotazu se používá pro vytváření sestav napříč databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-127">Figure 1 shows a scenario where an existing cloud application (which uses the [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="6ca10-128">**Obrázek 1** elastické dotaz byl použit na upraveným datové vrstvy</span><span class="sxs-lookup"><span data-stu-id="6ca10-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Elastické dotaz byl použit na upraveným datové vrstvy][1]

<span data-ttu-id="6ca10-130">Zákazník scénáře pro elastické dotazu jsou charakteristické následující topologie:</span><span class="sxs-lookup"><span data-stu-id="6ca10-130">Customer scenarios for elastic query are characterized by the following topologies:</span></span>

* <span data-ttu-id="6ca10-131">**Vertikální dělení - mezidatabázové dotazy** (topologie 1): data svisle rozdělena mezi počet databází v datové vrstvě.</span><span class="sxs-lookup"><span data-stu-id="6ca10-131">**Vertical partitioning - Cross-database queries** (Topology 1): The data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="6ca10-132">Různé sady tabulek jsou obvykle umístěné na různých databází.</span><span class="sxs-lookup"><span data-stu-id="6ca10-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="6ca10-133">To znamená, že schéma se liší v různých databází.</span><span class="sxs-lookup"><span data-stu-id="6ca10-133">That means that the schema is different on different databases.</span></span> <span data-ttu-id="6ca10-134">Například všechny tabulky pro inventář je na jednu databázi, zatímco všechny tabulky související s monitorování účtů na druhý databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="6ca10-135">Běžné případy použití s touto topologií vyžadovat k dotazování mezi nebo zkompilovat sestavy mezi tabulkami v několika databází.</span><span class="sxs-lookup"><span data-stu-id="6ca10-135">Common use cases with this topology require one to query across or to compile reports across tables in several databases.</span></span>
* <span data-ttu-id="6ca10-136">**Vodorovné dělení - horizontálního dělení** (topologie 2): Data vodorovně rozdělena distribuci řádků přes škálovaný dat vrstvy.</span><span class="sxs-lookup"><span data-stu-id="6ca10-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally to distribute rows across a scaled out data tier.</span></span> <span data-ttu-id="6ca10-137">S tímto přístupem schéma je stejná na všechny zúčastněné databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-137">With this approach, the schema is identical on all participating databases.</span></span> <span data-ttu-id="6ca10-138">Tento přístup je také označován "horizontálního dělení".</span><span class="sxs-lookup"><span data-stu-id="6ca10-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="6ca10-139">Provést horizontálního dělení a spravované (1) elastické databáze pomocí nástrojů pro knihovny nebo (2) horizontálního samoobslužné dělení.</span><span class="sxs-lookup"><span data-stu-id="6ca10-139">Sharding can be performed and managed using (1) the elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="6ca10-140">Elastické dotazu se používá k dotazování nebo zkompilovat napříč mnoha horizontálních oddílů sestavy.</span><span class="sxs-lookup"><span data-stu-id="6ca10-140">An elastic query is used to query or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="6ca10-141">Elastické dotazu je nejvhodnější pro příležitostně scénáře vytváření sestav, kde lze provádět většinu zpracování na datové vrstvě.</span><span class="sxs-lookup"><span data-stu-id="6ca10-141">Elastic query works best for occasional reporting scenarios where most of the processing can be performed on the data tier.</span></span> <span data-ttu-id="6ca10-142">Pro scénáře s více složitých dotazů datových skladů nebo náročných úloh vytváření sestav, také zvažte použití [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="6ca10-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="6ca10-143">Vertikální dělení - mezidatabázové dotazy</span><span class="sxs-lookup"><span data-stu-id="6ca10-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="6ca10-144">Pokud chcete začít, kódování, najdete v části [Začínáme s mezidatabázové dotazu (vertikální dělení)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-144">To begin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="6ca10-145">Elastické dotazu je použít k datům umístěným v databázi SQL, který je k dispozici pro jiné databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="6ca10-145">An elastic query can be used to make data located in a SQL database available to other SQL databases.</span></span> <span data-ttu-id="6ca10-146">To umožňuje dotazy z jedné databáze odkazující na tabulky v jiné vzdálené databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="6ca10-146">This allows queries from one database to refer to tables in any other remote SQL database.</span></span> <span data-ttu-id="6ca10-147">Prvním krokem je definování externího zdroje dat pro každou vzdálenou databázi.</span><span class="sxs-lookup"><span data-stu-id="6ca10-147">The first step is to define an external data source for each remote database.</span></span> <span data-ttu-id="6ca10-148">Externí zdroj dat je definován v místní databázi, ze kterého chcete získat přístup k tabulkám, na které se nachází na vzdálené databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-148">The external data source is defined in the local database from which you want to gain access to tables located on the remote database.</span></span> <span data-ttu-id="6ca10-149">Žádné změny jsou nezbytné pro vzdálenou databázi.</span><span class="sxs-lookup"><span data-stu-id="6ca10-149">No changes are necessary on the remote database.</span></span> <span data-ttu-id="6ca10-150">Pro typické vertikální dělení scénáře kde různých databází mají různé schémat elastické dotazy slouží k implementaci běžné případy použití, jako je přístup k datům referenčního a mezidatabázové dotazování.</span><span class="sxs-lookup"><span data-stu-id="6ca10-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used to implement common use cases such as access to reference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6ca10-151">Musíte mít oprávnění ALTER ANY EXTERNAL DATA SOURCE.</span><span class="sxs-lookup"><span data-stu-id="6ca10-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="6ca10-152">Toto oprávnění je součástí oprávnění ALTER DATABASE.</span><span class="sxs-lookup"><span data-stu-id="6ca10-152">This permission is included with the ALTER DATABASE permission.</span></span> <span data-ttu-id="6ca10-153">K odkazování na podkladový zdroj dat jsou potřeba oprávnění ALTER ANY EXTERNAL DATA SOURCE.</span><span class="sxs-lookup"><span data-stu-id="6ca10-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed to refer to the underlying data source.</span></span>
>

<span data-ttu-id="6ca10-154">**Referenční data**: topologii se používá pro správu dat na odkaz.</span><span class="sxs-lookup"><span data-stu-id="6ca10-154">**Reference data**: The topology is used for reference data management.</span></span> <span data-ttu-id="6ca10-155">Na obrázku jsou dvě tabulky (T1 a T2) u referenčních dat ukládají na vyhrazené databázi.</span><span class="sxs-lookup"><span data-stu-id="6ca10-155">In the figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="6ca10-156">Pomocí elastické dotazu, můžete nyní přistupovat tabulky T1 a T2 vzdáleně z jiných databází, jak je znázorněno na obrázku.</span><span class="sxs-lookup"><span data-stu-id="6ca10-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in the figure.</span></span> <span data-ttu-id="6ca10-157">Použít topologii 1, pokud referenční tabulky jsou malé nebo vzdálené dotazy na referenční tabulku mít selektivní predikáty.</span><span class="sxs-lookup"><span data-stu-id="6ca10-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="6ca10-158">**Obrázek 2** vertikální dělení – pomocí elastické dotazu pro dotaz referenční data</span><span class="sxs-lookup"><span data-stu-id="6ca10-158">**Figure 2** Vertical partitioning - Using elastic query to query reference data</span></span>

![Vertikální dělení – pomocí elastické dotazu pro dotaz referenční data][3]

<span data-ttu-id="6ca10-160">**Dotazování mezidatabázové**: Elastická dotazuje povolit případy použití, které vyžadují dotazování napříč několika databází SQL.</span><span class="sxs-lookup"><span data-stu-id="6ca10-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="6ca10-161">Obrázek 3 ukazuje čtyř různých databází: CRM, inventáře, HR a produkty.</span><span class="sxs-lookup"><span data-stu-id="6ca10-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="6ca10-162">Dotazy v jedné z databází provést také potřebovat přístup k jeden nebo všechny ostatní databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-162">Queries performed in one of the databases also need access to one or all the other databases.</span></span> <span data-ttu-id="6ca10-163">Pomocí elastické dotazu, můžete nakonfigurovat databázi pro tento případ spuštěním několik jednoduchých příkazy DDL na každé čtyři databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of the four databases.</span></span> <span data-ttu-id="6ca10-164">Po této jednorázovou konfiguraci přístup k vzdálené tabulky je stejně jednoduché jako odkazující na místní tabulku z vašich dotazů T-SQL nebo z vaší nástrojů BI.</span><span class="sxs-lookup"><span data-stu-id="6ca10-164">After this one-time configuration, access to a remote table is as simple as referring to a local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="6ca10-165">Tento postup se doporučuje, když vzdálených dotazů nevrátí velké výsledky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-165">This approach is recommended if the remote queries do not return large results.</span></span>

<span data-ttu-id="6ca10-166">**Obrázek 3** vertikální dělení – pomocí Elastická dotazu pro dotaz napříč různými databázemi</span><span class="sxs-lookup"><span data-stu-id="6ca10-166">**Figure 3** Vertical partitioning - Using elastic query to query across various databases</span></span>

![Vertikální dělení – pomocí Elastická dotazu pro dotaz napříč různými databázemi][4]

<span data-ttu-id="6ca10-168">Následující kroky konfigurace dotazy elastické databáze pro vertikální dělení scénáře, které vyžadují přístup k tabulce nachází na vzdálené SQL databáze se stejným schématem:</span><span class="sxs-lookup"><span data-stu-id="6ca10-168">The following steps configure elastic database queries for vertical partitioning scenarios that require access to a table located on remote SQL databases with the same schema:</span></span>

* <span data-ttu-id="6ca10-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="6ca10-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="6ca10-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="6ca10-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="6ca10-171">[Příkaz CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource typu **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="6ca10-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="6ca10-172">[Příkaz CREATE/DROP externí tabulky](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="6ca10-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="6ca10-173">Po spuštění příkazů DDL, můžete přístup k vzdálené tabulce "mytable", jako by šlo místní tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-173">After running the DDL statements, you can access the remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="6ca10-174">Databáze SQL Azure automaticky vytvoří připojení ke vzdálené databázi, zpracuje požadavek na vzdálené databáze a vrátí výsledky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-174">Azure SQL Database automatically opens a connection to the remote database, processes your request on the remote database, and returns the results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="6ca10-175">Vodorovné rozdělení do oddílů - horizontálního dělení</span><span class="sxs-lookup"><span data-stu-id="6ca10-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="6ca10-176">Pomocí elastické dotazu úkoly generování sestav prostřednictvím horizontálně dělené tj, vodorovně rozdělena na oddíly, vyžaduje datovou vrstvu [mapy horizontálního oddílu elastické databáze](sql-database-elastic-scale-shard-map-management.md) k reprezentaci databáze datové vrstvy.</span><span class="sxs-lookup"><span data-stu-id="6ca10-176">Using elastic query to perform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) to represent the databases of the data tier .</span></span> <span data-ttu-id="6ca10-177">Obvykle v tomto scénáři se používá jenom jeden horizontálních mapu a vyhrazené databáze s možností elastické dotazu (hlavního uzlu) slouží jako vstupní bod pro vytváření sestav dotazy.</span><span class="sxs-lookup"><span data-stu-id="6ca10-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as the entry point for reporting queries.</span></span> <span data-ttu-id="6ca10-178">Pouze tuto databázi vyhrazené potřebuje přístup k mapě horizontálního oddílu.</span><span class="sxs-lookup"><span data-stu-id="6ca10-178">Only this dedicated database needs access to the shard map.</span></span> <span data-ttu-id="6ca10-179">Na obrázku 4 jsou tato topologie a jeho konfigurace s dotazu elastické databáze a horizontálního oddílu mapy.</span><span class="sxs-lookup"><span data-stu-id="6ca10-179">Figure 4 illustrates this topology and its configuration with the elastic query database and shard map.</span></span> <span data-ttu-id="6ca10-180">Databáze v datové vrstvě může mít pro všechny databáze SQL Azure verzi nebo edici.</span><span class="sxs-lookup"><span data-stu-id="6ca10-180">The databases in the data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="6ca10-181">Další informace o klientské knihovny pro elastické databáze a vytváření mapy horizontálního oddílu najdete v tématu [horizontálního oddílu mapy správu](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-181">For more information about the elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="6ca10-182">**Obrázek 4** vodorovné rozdělení do oddílů – pomocí elastické dotazu pro vytváření sestav v horizontálně dělené datové vrstvy</span><span class="sxs-lookup"><span data-stu-id="6ca10-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Vodorovné rozdělení do oddílů – pomocí elastické dotazu pro vytváření sestav v horizontálně dělené datové vrstvy][5]

> [!NOTE]
> <span data-ttu-id="6ca10-184">Elastické databáze (hlavního uzlu) dotazu může být samostatné databáze, nebo může být stejné databáze, který je hostitelem mapy horizontálního oddílu.</span><span class="sxs-lookup"><span data-stu-id="6ca10-184">Elastic Query Database (head node) can be separate database, or it can be the same database that hosts the shard map.</span></span> <span data-ttu-id="6ca10-185">Konfigurace, ať si zvolíte, zajistěte, aby tuto úroveň služby a výkon této databáze je dostatečné pro zpracování očekávaného počtu požadavků na přihlášení nebo dotazy.</span><span class="sxs-lookup"><span data-stu-id="6ca10-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough to handle the expected  amount of login/query requests.</span></span>

<span data-ttu-id="6ca10-186">Následující kroky konfigurace dotazy elastické databáze pro vodorovné rozdělení scénáře vyžadující přístup k sadě tabulky, které se nacházejí na (obvykle) několik vzdálenou databází SQL:</span><span class="sxs-lookup"><span data-stu-id="6ca10-186">The following steps configure elastic database queries for horizontal partitioning scenarios that require access to a set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="6ca10-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="6ca10-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="6ca10-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="6ca10-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="6ca10-189">Vytvoření [horizontálního oddílu mapy](sql-database-elastic-scale-shard-map-management.md) představující vaše datové vrstvy pomocí klientské knihovny elastické databáze.</span><span class="sxs-lookup"><span data-stu-id="6ca10-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using the elastic database client library.</span></span>   
* <span data-ttu-id="6ca10-190">[Příkaz CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource typu **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="6ca10-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="6ca10-191">[Příkaz CREATE/DROP externí tabulky](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="6ca10-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="6ca10-192">Po provedení těchto kroků můžete přistupovat horizontálně dělenou tabulku "mytable", jako by šlo místní tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-192">Once you have performed these steps, you can access the horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="6ca10-193">Azure SQL Database automaticky otevře více paralelních připojení k vzdálené databáze, kde se fyzicky nacházejí v tabulkách, zpracovává požadavky na vzdálenou databází a vrátí výsledky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-193">Azure SQL Database automatically opens multiple parallel connections to the remote databases where the tables are physically stored, processes the requests on the remote databases, and returns the results.</span></span>
<span data-ttu-id="6ca10-194">Další informace o kroky potřebné pro vodorovné rozdělení scénář lze nalézt v [elastické dotazu pro vodorovné rozdělení do oddílů](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-194">More information on the steps required for the horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="6ca10-195">Pokud chcete začít, kódování, najdete v části [Začínáme s elastické dotazu pro vodorovné rozdělení do oddílů (horizontálního dělení)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-195">To begin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="6ca10-196">Dotazování T-SQL</span><span class="sxs-lookup"><span data-stu-id="6ca10-196">T-SQL querying</span></span>
<span data-ttu-id="6ca10-197">Po definování zdrojů externích dat a externí tabulky můžete regulární připojovací řetězce SQL serveru pro připojení k databázím, kde definovány externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings to connect to the databases where you defined your external tables.</span></span> <span data-ttu-id="6ca10-198">Potom spuštěním příkazů T-SQL na externí tabulky na toto připojení se omezeních uvedených níže.</span><span class="sxs-lookup"><span data-stu-id="6ca10-198">You can then run T-SQL statements over your external tables on that connection with the limitations outlined below.</span></span> <span data-ttu-id="6ca10-199">Další informace a příklady dotazů T-SQL můžete najít v tématech dokumentace pro [vodorovné rozdělení do oddílů](sql-database-elastic-query-horizontal-partitioning.md) a [vertikální dělení](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-199">You can find more information and examples of T-SQL queries in the documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="6ca10-200">Připojení nástroje</span><span class="sxs-lookup"><span data-stu-id="6ca10-200">Connectivity for tools</span></span>
<span data-ttu-id="6ca10-201">Regulární řetězce připojení SQL Server můžete použít pro připojení k databázím, které mají externí tabulky vaše aplikace a nástrojů pro integraci BI nebo data.</span><span class="sxs-lookup"><span data-stu-id="6ca10-201">You can use regular SQL Server connection strings to connect your applications and BI or data integration tools to databases that have external tables.</span></span> <span data-ttu-id="6ca10-202">Ujistěte se, že systém SQL Server je podporovaný jako zdroj dat pro vaše nástroje.</span><span class="sxs-lookup"><span data-stu-id="6ca10-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="6ca10-203">Po připojení naleznete stejně, jako by provést v jiné databázi systému SQL Server, kterou je připojena vaše nástrojem pro databáze elastické dotazu a externí tabulky v databázi.</span><span class="sxs-lookup"><span data-stu-id="6ca10-203">Once connected, refer to the elastic query database and the external tables in that database just like you would do with any other SQL Server database that you connect to with your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6ca10-204">Ověřování pomocí služby Azure Active Directory s elastické dotazy není aktuálně podporován.</span><span class="sxs-lookup"><span data-stu-id="6ca10-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="6ca10-205">Náklady</span><span class="sxs-lookup"><span data-stu-id="6ca10-205">Cost</span></span>
<span data-ttu-id="6ca10-206">Elastické dotazu je zahrnut do náklady databáze Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6ca10-206">Elastic query is included into the cost of Azure SQL Database databases.</span></span> <span data-ttu-id="6ca10-207">Všimněte si, že jsou podporované topologie, kde jsou vaše vzdálené databáze v různých datových center než koncový bod elastické dotazu, ale budou se regular účtovat odchozí data ze vzdálených databází [Azure sazby](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="6ca10-207">Note that topologies where your remote databases are in a different data center than the elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="6ca10-208">Omezení verze Preview</span><span class="sxs-lookup"><span data-stu-id="6ca10-208">Preview limitations</span></span>
* <span data-ttu-id="6ca10-209">Spuštění vaší první elastické dotazu může trvat až několik minut na úrovni Standard výkonu.</span><span class="sxs-lookup"><span data-stu-id="6ca10-209">Running your first elastic query can take up to a few minutes on the Standard performance tier.</span></span> <span data-ttu-id="6ca10-210">Tato doba je nezbytný pro načtení elastické dotazovacích funkcí; načítání výkonu zlepšuje s vyšší úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="6ca10-210">This time is necessary to load the elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="6ca10-211">Externí zdroje dat nebo externí tabulky z aplikace SSMS nebo rozšíření SSDT skriptu se ještě nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="6ca10-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="6ca10-212">Import a Export pro SQL DB zatím nepodporuje externí zdroje dat a externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="6ca10-213">Pokud budete muset použít importu a exportu, vyřaďte tyto objekty před exportem a potom je znovu vytvořit po importu.</span><span class="sxs-lookup"><span data-stu-id="6ca10-213">If you need to use Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="6ca10-214">Elastické dotazu aktuálně podporuje jenom přístup jen pro čtení k externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-214">Elastic query currently only supports read-only access to external tables.</span></span> <span data-ttu-id="6ca10-215">Můžete však použít plnou funkčnost T-SQL v databázi kterých byla definována externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-215">You can, however, use full T-SQL functionality on the database where the external table is defined.</span></span> <span data-ttu-id="6ca10-216">To může být užitečné, například zachovat dočasné výsledky, které používáte, například, vyberte < column_list > do < local_table >, nebo k definování uložené procedury v databázi elastické dotazu, které odkazují na externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or to define stored procedures on the elastic query database which refer to external tables.</span></span>
* <span data-ttu-id="6ca10-217">S výjimkou nvarchar(max) typů LOB nepodporují v definicích externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="6ca10-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="6ca10-218">Jako alternativní řešení můžete vytvořit zobrazení vzdálené databáze, která vrhá typu LOB do nvarchar(max), definovat externí tabulky přes zobrazení namísto na základní tabulku a převést jej zpět do původní typu LOB v dotazech.</span><span class="sxs-lookup"><span data-stu-id="6ca10-218">As a workaround, you can create a view on the remote database that casts the LOB type into nvarchar(max), define your external table over the view instead of the base table and then cast it back into the original LOB type in your queries.</span></span>
* <span data-ttu-id="6ca10-219">Statistiky sloupce na externí tabulky nejsou aktuálně podporovány.</span><span class="sxs-lookup"><span data-stu-id="6ca10-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="6ca10-220">Tabulky statistiky jsou podporovány, ale musí ručně vytvořit.</span><span class="sxs-lookup"><span data-stu-id="6ca10-220">Tables statistics are supported, but need to be created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="6ca10-221">Váš názor</span><span class="sxs-lookup"><span data-stu-id="6ca10-221">Feedback</span></span>
<span data-ttu-id="6ca10-222">Předejte zpětná vazba týkající se vašich zkušeností s elastické dotazy s námi Disqus níže, fórech MSDN nebo v zásobníku.</span><span class="sxs-lookup"><span data-stu-id="6ca10-222">Please share feedback on your experience with elastic queries with us on Disqus below, the MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="6ca10-223">Snažíme se ve všech druhy zpětnou vazbu o službu (závad, případné nedostatky, funkce mezery).</span><span class="sxs-lookup"><span data-stu-id="6ca10-223">We are interested in all kinds of feedback about the service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6ca10-224">Další kroky</span><span class="sxs-lookup"><span data-stu-id="6ca10-224">Next steps</span></span>

* <span data-ttu-id="6ca10-225">Vertikální dělení kurzu, najdete v části [Začínáme s mezidatabázové dotazu (vertikální dělení)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="6ca10-226">Syntaxe a ukázkové dotazy pro svisle oddílů data, najdete v části [dotazování svisle na oddíly dat)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="6ca10-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="6ca10-227">Podívejte se kurz vodorovné rozdělení do oddílů (horizontálního dělení) [Začínáme s elastické dotazu pro vodorovné rozdělení do oddílů (horizontálního dělení)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="6ca10-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="6ca10-228">Syntaxe a ukázkové dotazy pro horizontálně dělenou data, najdete v části [dotazování vodorovně rozdělena na oddíly dat)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="6ca10-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="6ca10-229">V tématu [sp\_provést \_vzdáleného](https://msdn.microsoft.com/library/mt703714) pro uloženou proceduru, který spouští příkaz jazyka Transact-SQL na jedné vzdálené databáze SQL Azure nebo sadu databází, které slouží jako horizontálních oddílů v vodorovné schéma rozdělení oddílů.</span><span class="sxs-lookup"><span data-stu-id="6ca10-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
