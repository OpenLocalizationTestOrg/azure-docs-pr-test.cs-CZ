---
title: "Přehled elastické dotazu SQL Database aaaAzure | Microsoft Docs"
description: "Přehled funkce elastické dotazu hello"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="e1cbc-103">Elastické dotazu Přehled služby Azure SQL Database (preview)</span><span class="sxs-lookup"><span data-stu-id="e1cbc-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="e1cbc-104">Funkce elastické dotazu Hello (ve verzi preview) vám umožní toorun dotazu jazyka Transact-SQL, která přesahuje více databází ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="e1cbc-105">Umožní vám tooperform mezidatabázové dotazy tooaccess vzdálených tabulek a tooquery nástroje (aplikace Excel, PowerBI, Tableau atd.) společnosti Microsoft a třetích stran tooconnect napříč datové vrstvy s více databází.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="e1cbc-106">Pomocí této funkce můžete škálovat dotazy toolarge datové vrstvy v databázi SQL a vizualizace výsledků hello v sestavách business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="e1cbc-107">Proč používat elastické dotazy?</span><span class="sxs-lookup"><span data-stu-id="e1cbc-107">Why use elastic queries?</span></span>

<span data-ttu-id="e1cbc-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-108">**Azure SQL Database**</span></span>

<span data-ttu-id="e1cbc-109">Dotazování mezi databází Azure SQL zcela v T-SQL.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="e1cbc-110">To umožňuje jen pro čtení dotazování vzdálené databáze.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="e1cbc-111">To poskytuje možnost pro stávající místní aplikace toomigrate zákazníkům SQL serveru pomocí tří a čtyř částečný názvy nebo odkazovaný server tooSQL DB.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="e1cbc-112">**K dispozici na úrovni standard**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-112">**Available on standard tier**</span></span>

<span data-ttu-id="e1cbc-113">Je podporován elastické dotaz na úroveň Standard výkonu hello v přidání toohello Premium výkonu vrstvy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="e1cbc-114">O omezení výkonu pro nižší úrovně výkonu najdete v části hello na omezení verze Preview níže.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="e1cbc-115">**Push tooremote databáze**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-115">**Push tooremote databases**</span></span>

<span data-ttu-id="e1cbc-116">Elastické dotazy můžete nyní push vzdálené databáze toohello SQL parametry pro spuštění.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="e1cbc-117">**Spuštění uložené procedury**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-117">**Stored procedure execution**</span></span>

<span data-ttu-id="e1cbc-118">Spustit volání vzdálené uložené procedury nebo funkce remote pomocí [sp\_provést \_vzdáleného](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="e1cbc-119">**Flexibilita**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-119">**Flexibility**</span></span>

<span data-ttu-id="e1cbc-120">Externí tabulky s elastické dotazu teď najdete tooremote tabulky s jinou schéma nebo název tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="e1cbc-121">Scénáře elastické dotazu</span><span class="sxs-lookup"><span data-stu-id="e1cbc-121">Elastic query scenarios</span></span>

<span data-ttu-id="e1cbc-122">cílem Hello je toofacilitate dotazování scénáře, kde více databází přispívat řádků do jednoho celkového výsledku.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="e1cbc-123">dotaz Hello můžete buď skládat hello uživatele nebo aplikace přímo nebo nepřímo prostřednictvím nástrojů, které jsou připojené toohello databáze.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="e1cbc-124">To je užitečné zejména při vytváření sestav, pomocí komerční integrace nástroje BI nebo data, nebo jakékoli aplikace, kterou nelze změnit.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="e1cbc-125">S elastické dotaz se můžete dotazovat napříč několika databází v nástroje, například aplikace Excel, PowerBI, Tableau nebo Cognos hello známou vlastnost připojení k systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="e1cbc-126">Dotaz elastické umožňuje snadný přístup tooan celou kolekci databáze pomocí dotazů vydaný SQL Server Management Studio nebo Visual Studio a usnadňuje mezidatabázové dotazování z Entity Framework nebo jiných ORM prostředích.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="e1cbc-127">Obrázek 1 ukazuje scénář, kde existující cloudové aplikace (hello, který používá [klientské knihovny pro elastické databáze](sql-database-elastic-database-client-library.md)) staví na data Škálováním vrstvy a elastické dotazu se používá pro vytváření sestav napříč databáze.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="e1cbc-128">**Obrázek 1** elastické dotaz byl použit na upraveným datové vrstvy</span><span class="sxs-lookup"><span data-stu-id="e1cbc-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Elastické dotaz byl použit na upraveným datové vrstvy][1]

<span data-ttu-id="e1cbc-130">Zákazník scénáře pro elastické dotazu jsou charakteristické hello následující topologie:</span><span class="sxs-lookup"><span data-stu-id="e1cbc-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="e1cbc-131">**Vertikální dělení - mezidatabázové dotazy** (topologie 1): hello data svisle rozdělena mezi počet databází v datové vrstvě.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="e1cbc-132">Různé sady tabulek jsou obvykle umístěné na různých databází.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="e1cbc-133">To znamená, že schéma této hello se liší v různých databází.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="e1cbc-134">Například všechny tabulky pro inventář je na jednu databázi, zatímco všechny tabulky související s monitorování účtů na druhý databáze.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="e1cbc-135">Běžné případy použití s touto topologií vyžadují jednu tooquery napříč nebo toocompile sestavy mezi tabulkami v několika databází.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="e1cbc-136">**Vodorovné dělení - horizontálního dělení** (topologie 2): Data vodorovně rozdělena toodistribute řádky napříč škálovaný dat vrstvy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="e1cbc-137">S tímto přístupem hello schéma je stejná na všechny zúčastněné databáze.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="e1cbc-138">Tento přístup je také označován "horizontálního dělení".</span><span class="sxs-lookup"><span data-stu-id="e1cbc-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="e1cbc-139">Horizontálního dělení může provést a spravovat pomocí knihovny nástroje elastické databáze (1) hello nebo (2) horizontálního samoobslužné dělení.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="e1cbc-140">Elastické dotazu je používané sestavy tooquery nebo kompilace napříč mnoha horizontálních oddílů.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="e1cbc-141">Elastické dotazu je nejvhodnější pro příležitostně scénáře vytváření sestav, kde lze provádět většinu hello zpracování na datové vrstvě hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="e1cbc-142">Pro scénáře s více složitých dotazů datových skladů nebo náročných úloh vytváření sestav, také zvažte použití [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="e1cbc-143">Vertikální dělení - mezidatabázové dotazy</span><span class="sxs-lookup"><span data-stu-id="e1cbc-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="e1cbc-144">toobegin kódování, najdete v části [Začínáme s mezidatabázové dotazu (vertikální dělení)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="e1cbc-145">Elastické dotazu může být použité toomake datům umístěným v SQL databáze k dispozici tooother databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="e1cbc-146">To umožňuje dotazy z jednoho tootables toorefer databázi v jiných vzdálené databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="e1cbc-147">prvním krokem Hello je toodefine externího zdroje dat pro každou vzdálenou databázi.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="e1cbc-148">Hello externí zdroj dat je definován v místní databázi hello, ze kterého mají být tootables přístup toogain nachází na vzdálené databáze hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="e1cbc-149">Žádné změny jsou nezbytné pro vzdálenou databázi hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="e1cbc-150">Pro typické vertikální dělení scénáře kde různých databází mají různé schémat elastické dotazy může být použité tooimplement běžné případy použití, jako je přístup k datům tooreference a mezidatabázové dotazování.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e1cbc-151">Musíte mít oprávnění ALTER ANY EXTERNAL DATA SOURCE.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="e1cbc-152">Toto oprávnění je součástí hello oprávnění ALTER DATABASE.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="e1cbc-153">Oprávnění ALTER ANY externí zdroj dat se zdroji dat toohello potřebné toorefer.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="e1cbc-154">**Referenční data**: hello topologie se používá pro správu dat na odkaz.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="e1cbc-155">Hello obrázek jsou dvě tabulky (T1 a T2) u referenčních dat ukládají na vyhrazené databázi.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="e1cbc-156">Pomocí elastické dotazu, můžete nyní přistupovat tabulky T1 a T2 vzdáleně z jiných databází, jak je znázorněno na obrázku hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="e1cbc-157">Použít topologii 1, pokud referenční tabulky jsou malé nebo vzdálené dotazy na referenční tabulku mít selektivní predikáty.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="e1cbc-158">**Obrázek 2** vertikální dělení – pomocí elastické dotazu tooquery referenční data</span><span class="sxs-lookup"><span data-stu-id="e1cbc-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Vertikální dělení – pomocí elastické dotazu tooquery referenční data][3]

<span data-ttu-id="e1cbc-160">**Dotazování mezidatabázové**: Elastická dotazuje povolit případy použití, které vyžadují dotazování napříč několika databází SQL.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="e1cbc-161">Obrázek 3 ukazuje čtyř různých databází: CRM, inventáře, HR a produkty.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="e1cbc-162">Dotazy v jedné z databází hello provést také potřebovat přístup k tooone nebo všechny hello jiné databáze.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="e1cbc-163">Pomocí elastické dotazu, můžete nakonfigurovat databázi pro tento případ spuštěním několik jednoduchých příkazy DDL na každý ze čtyř databází hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="e1cbc-164">Po této jednorázovou konfiguraci je stejně jednoduché jako odkazující tooa místní tabulky z vašich dotazů T-SQL nebo z vaší nástrojů BI přístup tooa vzdálenou tabulku.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="e1cbc-165">Tento postup se doporučuje, když vzdálených dotazů hello nevrátí velké výsledky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="e1cbc-166">**Obrázek 3** vertikální dělení – pomocí elastické dotazu tooquery napříč různými databázemi</span><span class="sxs-lookup"><span data-stu-id="e1cbc-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Vertikální dělení – pomocí elastické dotazu tooquery napříč různými databázemi][4]

<span data-ttu-id="e1cbc-168">Hello následující kroky konfigurace dotazy elastické databáze pro vertikální dělení scénáře, které vyžadují přístup tooa tabulky nachází na vzdálené databáze SQL s hello stejné schéma:</span><span class="sxs-lookup"><span data-stu-id="e1cbc-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="e1cbc-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="e1cbc-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="e1cbc-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="e1cbc-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="e1cbc-171">[Příkaz CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource typu **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="e1cbc-172">[Příkaz CREATE/DROP externí tabulky](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="e1cbc-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="e1cbc-173">Po spuštění příkazy DDL hello, dostanete Vzdálená tabulka "mytable" hello, jako by šlo místní tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="e1cbc-174">Azure SQL Database automaticky otevře připojení vzdálené databáze toohello, zpracuje požadavek na vzdálené databáze hello a vrátí výsledky hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="e1cbc-175">Vodorovné rozdělení do oddílů - horizontálního dělení</span><span class="sxs-lookup"><span data-stu-id="e1cbc-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="e1cbc-176">Použití tooperform elastické dotazu úlohy sestav přes horizontálně dělené, tj., vodorovně rozdělena na oddíly, vyžaduje datovou vrstvu [mapy horizontálního oddílu elastické databáze](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databáze hello datové vrstvy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="e1cbc-177">Obvykle se v tomto scénáři se používá jenom jeden horizontálních mapu a vyhrazené databáze s možností elastické dotazu (hlavního uzlu) slouží jako hello vstupní bod pro vytváření sestav dotazy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="e1cbc-178">Pouze tuto databázi vyhrazené musí mapa horizontálního oddílu toohello přístupu.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="e1cbc-179">Na obrázku 4 jsou tato topologie a jeho konfigurace s hello dotazu elastické databáze a horizontálního oddílu mapy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="e1cbc-180">Hello databáze v datové vrstvě hello může mít pro všechny databáze SQL Azure verzi nebo edici.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="e1cbc-181">Další informace o hello klientské knihovny pro elastické databáze a vytváření mapy horizontálního oddílu najdete v tématu [horizontálního oddílu mapy správu](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="e1cbc-182">**Obrázek 4** vodorovné rozdělení do oddílů – pomocí elastické dotazu pro vytváření sestav v horizontálně dělené datové vrstvy</span><span class="sxs-lookup"><span data-stu-id="e1cbc-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Vodorovné rozdělení do oddílů – pomocí elastické dotazu pro vytváření sestav v horizontálně dělené datové vrstvy][5]

> [!NOTE]
> <span data-ttu-id="e1cbc-184">Elastické databáze (hlavního uzlu) dotazu může být samostatné databáze, nebo může být hello stejné databáze tohoto hostitele hello horizontálního oddílu mapy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="e1cbc-185">Konfigurace, ať si zvolíte, ujistěte se, že úroveň služby a výkonu této databáze je dostatečně vysoký toohandle hello očekává množství požadavků na přihlášení nebo dotazy.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="e1cbc-186">Hello následující kroky konfigurace dotazy elastické databáze pro vodorovné rozdělení scénáře vyžadující přístup tooa sadu tabulky, které se nacházejí na (obvykle) několik vzdálenou databází SQL:</span><span class="sxs-lookup"><span data-stu-id="e1cbc-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="e1cbc-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="e1cbc-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="e1cbc-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="e1cbc-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="e1cbc-189">Vytvoření [horizontálního oddílu mapy](sql-database-elastic-scale-shard-map-management.md) představující vaší datovou vrstvu pomocí klientské knihovny pro elastické databáze hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="e1cbc-190">[Příkaz CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource typu **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="e1cbc-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="e1cbc-191">[Příkaz CREATE/DROP externí tabulky](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="e1cbc-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="e1cbc-192">Po provedení těchto kroků můžete přistupovat hello horizontálně dělenou tabulku "mytable", jako by šlo místní tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="e1cbc-193">Azure SQL Database automaticky otevře více paralelních připojení toohello vzdálenou databází fyzicky úložiště tabulek hello, zpracovává hello požadavky na vzdálenou databází hello a vrátí výsledky hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="e1cbc-194">Další informace o hello kroky potřebné pro vodorovné rozdělení scénář hello lze nalézt v [elastické dotazu pro vodorovné rozdělení do oddílů](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="e1cbc-195">toobegin kódování, najdete v části [Začínáme s elastické dotazu pro vodorovné rozdělení do oddílů (horizontálního dělení)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="e1cbc-196">Dotazování T-SQL</span><span class="sxs-lookup"><span data-stu-id="e1cbc-196">T-SQL querying</span></span>
<span data-ttu-id="e1cbc-197">Po definování zdrojů externích dat a externí tabulky můžete použít normální systému SQL Server připojovací řetězce tooconnect toohello databáze, kde jste definovali externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="e1cbc-198">Potom spuštěním příkazů T-SQL na externí tabulky na toto připojení s omezeními hello uvedených níže.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="e1cbc-199">Další informace a příklady dotazů T-SQL můžete najít v tématech hello dokumentace pro [vodorovné rozdělení do oddílů](sql-database-elastic-query-horizontal-partitioning.md) a [vertikální dělení](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="e1cbc-200">Připojení nástroje</span><span class="sxs-lookup"><span data-stu-id="e1cbc-200">Connectivity for tools</span></span>
<span data-ttu-id="e1cbc-201">Vaše aplikace a BI nebo data toodatabases integrace nástrojů, které mají externí tabulky můžete regulární tooconnect řetězce připojení SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="e1cbc-202">Ujistěte se, že systém SQL Server je podporovaný jako zdroj dat pro vaše nástroje.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="e1cbc-203">Po připojení naleznete stejně, jako by provést v jiné databázi systému SQL Server připojit toowith vaše nástroje toohello dotazu elastické databáze a hello externí tabulky v databázi.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e1cbc-204">Ověřování pomocí služby Azure Active Directory s elastické dotazy není aktuálně podporován.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="e1cbc-205">Náklady</span><span class="sxs-lookup"><span data-stu-id="e1cbc-205">Cost</span></span>
<span data-ttu-id="e1cbc-206">Elastické dotazu je zahrnut do hello náklady databáze Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="e1cbc-207">Všimněte si, že jsou podporované topologie, kde jsou vaše vzdálené databáze v různých datových center než hello elastické dotazu koncový bod, ale budou se regular účtovat odchozí data ze vzdálených databází [Azure sazby](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="e1cbc-208">Omezení verze Preview</span><span class="sxs-lookup"><span data-stu-id="e1cbc-208">Preview limitations</span></span>
* <span data-ttu-id="e1cbc-209">Spuštění vaší první elastické dotazu může trvat až tooa několik minut na úroveň Standard výkonu hello.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="e1cbc-210">Tato doba je nezbytné tooload hello elastické dotazovacích funkcí; načítání výkonu zlepšuje s vyšší úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="e1cbc-211">Externí zdroje dat nebo externí tabulky z aplikace SSMS nebo rozšíření SSDT skriptu se ještě nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="e1cbc-212">Import a Export pro SQL DB zatím nepodporuje externí zdroje dat a externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="e1cbc-213">Pokud potřebujete toouse importu a exportu, vyřaďte tyto objekty před exportem a potom je znovu vytvořit po importu.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="e1cbc-214">Elastické dotazu aktuálně podporuje jenom tooexternal tabulky jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="e1cbc-215">Můžete však použít plnou funkčnost T-SQL v databázi hello kterých byla definována hello externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="e1cbc-216">To může být užitečné k, například uchování dočasné výsledky pomocí například vyberte < column_list > do < local_table > nebo toodefine uložené procedury na hello dotazu elastické databáze, která odkazují tooexternal tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="e1cbc-217">S výjimkou nvarchar(max) typů LOB nepodporují v definicích externí tabulky.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="e1cbc-218">Jako alternativní řešení můžete vytvořit zobrazení na hello vzdálené databáze, který vrhá typu LOB hello do nvarchar(max), definovat externí tabulky přes hello zobrazení namísto hello základní tabulky a převést jej zpět do původní typu LOB hello v dotazech.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="e1cbc-219">Statistiky sloupce na externí tabulky nejsou aktuálně podporovány.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="e1cbc-220">Tabulky statistiky jsou podporovány, ale potřebuje toobe ručně vytvořit.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="e1cbc-221">Váš názor</span><span class="sxs-lookup"><span data-stu-id="e1cbc-221">Feedback</span></span>
<span data-ttu-id="e1cbc-222">Předejte zpětná vazba týkající se vašich zkušeností s elastické dotazy s námi na Disqus níže, hello fórech MSDN, nebo na Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="e1cbc-223">Snažíme se ve všech druhy zpětnou vazbu týkající se služby hello (závad, případné nedostatky, funkce mezery).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e1cbc-224">Další kroky</span><span class="sxs-lookup"><span data-stu-id="e1cbc-224">Next steps</span></span>

* <span data-ttu-id="e1cbc-225">Vertikální dělení kurzu, najdete v části [Začínáme s mezidatabázové dotazu (vertikální dělení)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="e1cbc-226">Syntaxe a ukázkové dotazy pro svisle oddílů data, najdete v části [dotazování svisle na oddíly dat)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="e1cbc-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="e1cbc-227">Podívejte se kurz vodorovné rozdělení do oddílů (horizontálního dělení) [Začínáme s elastické dotazu pro vodorovné rozdělení do oddílů (horizontálního dělení)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="e1cbc-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="e1cbc-228">Syntaxe a ukázkové dotazy pro horizontálně dělenou data, najdete v části [dotazování vodorovně rozdělena na oddíly dat)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="e1cbc-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="e1cbc-229">V tématu [sp\_provést \_vzdáleného](https://msdn.microsoft.com/library/mt703714) pro uloženou proceduru, který spouští příkaz jazyka Transact-SQL na jedné vzdálené databáze SQL Azure nebo sadu databází, které slouží jako horizontálních oddílů v vodorovné schéma rozdělení oddílů.</span><span class="sxs-lookup"><span data-stu-id="e1cbc-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
