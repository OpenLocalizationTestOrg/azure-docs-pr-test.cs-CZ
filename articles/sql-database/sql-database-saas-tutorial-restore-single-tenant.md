---
title: "Obnovení databáze Azure SQL v aplikaci víceklientské | Microsoft Docs"
description: "Postup obnovení databáze SQL jeden klienty po omylem odstraňování dat"
keywords: kurz k sql database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 547851972f13ec69a8f65d01290874ad7d07f192
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="16578-104">Obnovení databáze SQL Wingtip SaaS klientů</span><span class="sxs-lookup"><span data-stu-id="16578-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="16578-105">Aplikace Wingtip SaaS vytvořená s využitím modelu databáze za klienta, kde každý klient má své vlastní databázi.</span><span class="sxs-lookup"><span data-stu-id="16578-105">The Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="16578-106">Jednou z výhod tohoto modelu je, že je snadno obnovit data jednoho klienta v izolaci bez dopadu na ostatních klientů.</span><span class="sxs-lookup"><span data-stu-id="16578-106">One of the benefits of this model is that it is easy to restore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="16578-107">V tomto kurzu zjistíte, dva vzory obnovení dat:</span><span class="sxs-lookup"><span data-stu-id="16578-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="16578-108">Obnovení databáze do paralelní databáze (-souběžného)</span><span class="sxs-lookup"><span data-stu-id="16578-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="16578-109">Obnovení databáze na místě</span><span class="sxs-lookup"><span data-stu-id="16578-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="16578-110">**Obnovení klienta do předchozího bodu v čase, do paralelní databáze**</span><span class="sxs-lookup"><span data-stu-id="16578-110">**Restore tenant to a prior point in time, into a parallel database**</span></span> | <span data-ttu-id="16578-111">Tento vzor lze klienta ke kontrole, auditování, dodržování předpisů a podobně. Původní databáze zůstane online a beze změny.</span><span class="sxs-lookup"><span data-stu-id="16578-111">This pattern can be used by the tenant for review, auditing, compliance, etc. The original database remains online and unchanged.</span></span> |
| <span data-ttu-id="16578-112">**Obnovení klienta na místě**</span><span class="sxs-lookup"><span data-stu-id="16578-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="16578-113">Tento vzor se obvykle používá k obnovení klienta do předchozího bodu v čase, poté, co klient omylem odstraní data.</span><span class="sxs-lookup"><span data-stu-id="16578-113">This pattern is typically used to recover a tenant to a prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="16578-114">Původní databáze je uveden do režimu offline a nahradit obnovenou databázi.</span><span class="sxs-lookup"><span data-stu-id="16578-114">The original database is taken offline, and replaced with the restored database.</span></span> |
|||

<span data-ttu-id="16578-115">Předpokladem dokončení tohoto kurzu je splnění následujících požadavků:</span><span class="sxs-lookup"><span data-stu-id="16578-115">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="16578-116">Adresář Wingtip SaaS aplikace je nasazená.</span><span class="sxs-lookup"><span data-stu-id="16578-116">The Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="16578-117">Nasazení za méně než pět minut najdete v tématu [nasazení a seznamte se s Wingtip SaaS aplikace](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="16578-117">To deploy in less than five minutes, see [Deploy and explore the Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="16578-118">Je nainstalované prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="16578-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="16578-119">Podrobnosti najdete v článku [Začínáme s prostředím Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="16578-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-to-the-saas-tenant-restore-pattern"></a><span data-ttu-id="16578-120">Úvod do vzoru SaaS klienta obnovení</span><span class="sxs-lookup"><span data-stu-id="16578-120">Introduction to the SaaS tenant restore pattern</span></span>

<span data-ttu-id="16578-121">Pro obnovení vzor klienta jsou dva jednoduché vzory pro obnovení dat jednoho klienta.</span><span class="sxs-lookup"><span data-stu-id="16578-121">For the tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="16578-122">Protože jsou od sebe navzájem oddělené klienta databáze, obnovení jednoho klienta nemá žádný vliv na data žádným jiným klientem na.</span><span class="sxs-lookup"><span data-stu-id="16578-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="16578-123">V prvním vzoru data obnovena do nové databáze.</span><span class="sxs-lookup"><span data-stu-id="16578-123">In the first pattern, data is restored into a new database.</span></span> <span data-ttu-id="16578-124">Klient pak je poskytnut přístup k této databáze spolu s jejich provozními daty.</span><span class="sxs-lookup"><span data-stu-id="16578-124">The tenant is then given access to this database alongside their production data.</span></span> <span data-ttu-id="16578-125">Tento vzor umožňuje Správce tenanta ke kontrole obnovená data a potenciálně ji použít k selektivně přepsat aktuální hodnoty data.</span><span class="sxs-lookup"><span data-stu-id="16578-125">This pattern allows a tenant admin to review the restored data and potentially use it to selectively overwrite current data values.</span></span> <span data-ttu-id="16578-126">Je to na návrháře SaaS aplikace k určení, jak sofistikované možnosti obnovení dat by měla být.</span><span class="sxs-lookup"><span data-stu-id="16578-126">It's up to the SaaS app designer to determine just how sophisticated the data recovery options should be.</span></span> <span data-ttu-id="16578-127">Všechno, co je potřeba v některých scénářích možná jednoduše schopnost kontrolovat data ve stavu, ve kterém se nacházel k danému bodu v čase.</span><span class="sxs-lookup"><span data-stu-id="16578-127">Simply being able to review data in the state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="16578-128">Pokud se databáze používá [geografická replikace](sql-database-geo-replication-overview.md), doporučujeme, abyste kopírování požadovaná data z obnovené kopie do původní databáze.</span><span class="sxs-lookup"><span data-stu-id="16578-128">If the database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying the required data from the restored copy into the original database.</span></span> <span data-ttu-id="16578-129">Pokud je původní databáze nahradit obnovenou databázi, budete muset překonfigurovat a poté opakujte synchronizaci geografická replikace.</span><span class="sxs-lookup"><span data-stu-id="16578-129">If you replace the original database with the restored database, you need to reconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="16578-130">V druhém vzorku, který se předpokládá, že klient má vyskytla ztráty nebo poškození dat, klienta produkční databázi obnovit do předchozího bodu v čase.</span><span class="sxs-lookup"><span data-stu-id="16578-130">In the second pattern, which assumes that the tenant has suffered a loss or corruption of data, the tenant’s production database is restored to a prior point in time.</span></span> <span data-ttu-id="16578-131">V obnovení v místě vzoru klienta do režimu offline po krátkou dobu při databáze je obnovit a znovu online.</span><span class="sxs-lookup"><span data-stu-id="16578-131">In the restore in place pattern, the tenant is taken offline for a brief time while the database is restored and brought back online.</span></span> <span data-ttu-id="16578-132">Původní databáze je odstranit, ale můžete pořád obnovit z Pokud potřebujete přejít zpět do i dřívějšího bodu v čase.</span><span class="sxs-lookup"><span data-stu-id="16578-132">The original database is deleted, but can still be restored from if you need to go back to an even earlier point in time.</span></span> <span data-ttu-id="16578-133">Varianta tohoto vzoru přejmenovat databázi místo odstranění, i když přejmenování databáze nabízí žádné další výhody z hlediska zabezpečení dat.</span><span class="sxs-lookup"><span data-stu-id="16578-133">A variation of this pattern could rename the database instead of deleting it, although renaming the database offers no additional advantage in terms of data security.</span></span>

## <a name="get-the-wingtip-application-scripts"></a><span data-ttu-id="16578-134">Získání skriptů aplikace Wingtip</span><span class="sxs-lookup"><span data-stu-id="16578-134">Get the Wingtip application scripts</span></span>

<span data-ttu-id="16578-135">Adresář Wingtip SaaS skripty a zdrojový kód aplikace, které jsou k dispozici v [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) úložiště github.</span><span class="sxs-lookup"><span data-stu-id="16578-135">The Wingtip SaaS scripts and application source code are available in the [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="16578-136">[Postup stažení skripty Wingtip SaaS](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="16578-136">[Steps to download the Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="16578-137">Simulovat klienta omylem odstraňování dat</span><span class="sxs-lookup"><span data-stu-id="16578-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="16578-138">K předvedení tyto scénáře obnovení, musíme *omylem* odstranit některá data v jedné z databází klienta.</span><span class="sxs-lookup"><span data-stu-id="16578-138">To demonstrate these recovery scenarios, we need to *accidentally* delete some data in one of the tenant databases.</span></span> <span data-ttu-id="16578-139">Když odstraníte všechny záznam, dalším krokem nastaví ukázku tak, aby metoda GET není blokován bránou porušení referenční integrity!</span><span class="sxs-lookup"><span data-stu-id="16578-139">While you can delete any record, the next step sets up the demo to not get blocked by referential integrity violations!</span></span> <span data-ttu-id="16578-140">Přidává také některé data nákupu lístku můžete později v *Wingtip SaaS Analytics kurzy*.</span><span class="sxs-lookup"><span data-stu-id="16578-140">It also adds some ticket purchase data you can use later in the *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="16578-141">Spusťte skript generátor lístku a vytvořte další data.</span><span class="sxs-lookup"><span data-stu-id="16578-141">Run the ticket generator script and create additional data.</span></span> <span data-ttu-id="16578-142">Generátor lístku záměrně není zakoupit lístky pro všechny klienty poslední události.</span><span class="sxs-lookup"><span data-stu-id="16578-142">The ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="16578-143">Otevřete... \\Učení moduly\\nástroje\\*ukázku TicketGenerator.ps1* v *prostředí PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="16578-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="16578-144">Stiskněte klávesu **F5** spusťte skript a generovat zákazníků a prodejní data lístku.</span><span class="sxs-lookup"><span data-stu-id="16578-144">Press **F5** to run the script and generate customers and ticket sales data.</span></span>


### <a name="open-the-events-app-to-review-the-current-events"></a><span data-ttu-id="16578-145">Otevřete aplikaci události ke kontrole aktuální události</span><span class="sxs-lookup"><span data-stu-id="16578-145">Open the Events app to review the current events</span></span>

1. <span data-ttu-id="16578-146">Otevřete *události rozbočovače* (http://events.wtp.&lt; Uživatel&gt;. trafficmanager.net) a klikněte na tlačítko **Contoso vzájemné součinnosti Hall**:</span><span class="sxs-lookup"><span data-stu-id="16578-146">Open the *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![centrum akcí](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="16578-148">Posuňte se seznam událostí a poznamenejte si poslední událost v seznamu:</span><span class="sxs-lookup"><span data-stu-id="16578-148">Scroll the list of events and make a note of the last event in the list:</span></span>

   ![poslední událost](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-the-demo-scenario-to-accidentally-delete-the-last-event"></a><span data-ttu-id="16578-150">Spustit ukázkový scénář se omylem odstranit poslední události</span><span class="sxs-lookup"><span data-stu-id="16578-150">Run the demo scenario to accidentally delete the last event</span></span>

1. <span data-ttu-id="16578-151">Otevřete... \\Učení moduly\\kontinuity podnikových procesů a zotavení po havárii\\RestoreTenant\\*ukázku RestoreTenant.ps1* v *prostředí PowerShell ISE*a nastavte následující hodnotu:</span><span class="sxs-lookup"><span data-stu-id="16578-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in the *PowerShell ISE*, and set the following value:</span></span>
   * <span data-ttu-id="16578-152">**$DemoScenario** = **1**, nastavte na **1** – odstranit události s žádné prodeje lístků.</span><span class="sxs-lookup"><span data-stu-id="16578-152">**$DemoScenario** = **1**, Set to **1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="16578-153">Stiskněte klávesu **F5** a spusťte skript odstranit poslední událost.</span><span class="sxs-lookup"><span data-stu-id="16578-153">Press **F5** to run the script and delete the last event.</span></span> <span data-ttu-id="16578-154">Zobrazí potvrzovací zpráva podobná této:</span><span class="sxs-lookup"><span data-stu-id="16578-154">You should see a confirmation message similar to the following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="16578-155">Otevře se stránka události Contoso.</span><span class="sxs-lookup"><span data-stu-id="16578-155">The Contoso events page opens.</span></span> <span data-ttu-id="16578-156">Posuňte se dolů a ověřte, zda že je událost pryč.</span><span class="sxs-lookup"><span data-stu-id="16578-156">Scroll down and verify the event is gone.</span></span> <span data-ttu-id="16578-157">Pokud tato událost je stále v seznamu, klikněte na tlačítko Aktualizovat a ověřte, zda že je pryč.</span><span class="sxs-lookup"><span data-stu-id="16578-157">If the event is still in the list, click refresh and verify it is gone.</span></span>

   ![poslední událost](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-the-production-database"></a><span data-ttu-id="16578-159">Obnovení databáze klienta paralelně s provozní databáze</span><span class="sxs-lookup"><span data-stu-id="16578-159">Restore a tenant database in parallel with the production database</span></span>

<span data-ttu-id="16578-160">Toto cvičení obnoví databázi Hall vzájemné součinnosti Contoso do bodu v čase před událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="16578-160">This exercise restores the Contoso Concert Hall database to a point in time before the event was deleted.</span></span> <span data-ttu-id="16578-161">Po odstranění události v předchozích krocích chcete obnovit a najdete v části odstraněná data.</span><span class="sxs-lookup"><span data-stu-id="16578-161">After the event is deleted in the previous steps, you want to recover and see the deleted data.</span></span> <span data-ttu-id="16578-162">Není nutné obnovit produkční databázi s odstraněného záznamu, ale budete muset obnovit původní databázi pro přístup k původní data z jiných důvodů firmy.</span><span class="sxs-lookup"><span data-stu-id="16578-162">You don't need to restore your production database with the deleted record, but you need to recover the old database to access the old data for other business reasons.</span></span>

 <span data-ttu-id="16578-163">*Obnovení TenantInParallel.ps1* skript vytvoří paralelní klienta databáze a paralelní položky katalogu i s názvem *ContosoConcertHall\_staré*.</span><span class="sxs-lookup"><span data-stu-id="16578-163">The *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="16578-164">Tento vzor obnovení je nejvhodnější pro obnovení před ztrátou dat menší nebo pro dodržování předpisů a auditování scénáře obnovení.</span><span class="sxs-lookup"><span data-stu-id="16578-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="16578-165">Je také o doporučený postup při použití [geografická replikace](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="16578-165">It is also the recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="16578-166">Dokončení [simulovat uživatele nechtěně odstraní data](#simulate-a-tenant-accidentally-deleting-data) části.</span><span class="sxs-lookup"><span data-stu-id="16578-166">Complete the [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="16578-167">Otevřete... \\Učení moduly\\kontinuity podnikových procesů a zotavení po havárii\\RestoreTenant\\_ukázku RestoreTenant.ps1_ v *prostředí PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="16578-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="16578-168">Nastavit **$DemoScenario** = **2**, tuto možnost nastavíte na **2** k *obnovení klienta paralelně*.</span><span class="sxs-lookup"><span data-stu-id="16578-168">Set **$DemoScenario** = **2**, Set this to **2** to *Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="16578-169">Stisknutím klávesy **F5** spusťte skript.</span><span class="sxs-lookup"><span data-stu-id="16578-169">Press **F5** to run the script.</span></span>

<span data-ttu-id="16578-170">Skript obnoví databázi klienta (k databázi paralelní) do bodu v čase před odstranit události v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="16578-170">The script restores the tenant database (to a parallel database) to a point in time before you deleted the event in the previous section.</span></span> <span data-ttu-id="16578-171">Vytvoří druhý databáze, odstraní všechny existující katalogu metadata, která existuje v této databázi a přidá do katalogu v databázi *ContosoConcertHall\_staré* položku.</span><span class="sxs-lookup"><span data-stu-id="16578-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds the database to the catalog under the *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="16578-172">Ukázkový skript se otevře stránka události v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="16578-172">The demo script opens the events page in your browser.</span></span> <span data-ttu-id="16578-173">Poznámka: z adresy URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` , to se zobrazuje data z obnovené databáze kde *_old* se přidá k názvu.</span><span class="sxs-lookup"><span data-stu-id="16578-173">Note from the URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from the restored database where *_old* is added to the name.</span></span>

<span data-ttu-id="16578-174">Posuňte se události uvedené v prohlížeči potvrďte, že byla obnovena události odstranit v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="16578-174">Scroll the events listed in the browser to confirm that the event deleted in the previous section has been restored.</span></span>

<span data-ttu-id="16578-175">Všimněte si, že vystavení obnovené klienta, jako je nepravděpodobné, že se, jak by poskytnout přístup klientů k další klienta, s vlastní aplikaci události procházet lístky obnovit data, ale slouží k snadno objasnění vzoru obnovení.</span><span class="sxs-lookup"><span data-stu-id="16578-175">Note that exposing the restored tenant as an additional tenant, with its own Events app to browse tickets, is unlikely to be how you would provide a tenant access to restored data, but serves to easily illustrate the restore pattern.</span></span>

<span data-ttu-id="16578-176">Ve skutečnosti byste pravděpodobně pouze zachovat tato obnovená databáze za definované období.</span><span class="sxs-lookup"><span data-stu-id="16578-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="16578-177">Po dokončení voláním můžete odstranit položku obnovené klienta *odebrat RestoredTenant.ps1* skriptu.</span><span class="sxs-lookup"><span data-stu-id="16578-177">You can delete the restored tenant entry once you are finished by calling the *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="16578-178">Nastavit **$DemoScenario** k **4** vyberte *klienta odebrat obnovit* scénář.</span><span class="sxs-lookup"><span data-stu-id="16578-178">Set **$DemoScenario** to **4** to select the *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="16578-179">**Spuštění** **pomocí** **F5**</span><span class="sxs-lookup"><span data-stu-id="16578-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="16578-180">*ContosoConcertHall\_staré* položka je nyní odstraněny z katalogu.</span><span class="sxs-lookup"><span data-stu-id="16578-180">The *ContosoConcertHall\_old* entry is now deleted from the catalog.</span></span> <span data-ttu-id="16578-181">Pokračujte a zavřete stránku události pro tohoto klienta v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="16578-181">Go ahead and close the events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-the-existing-tenant-database"></a><span data-ttu-id="16578-182">Obnovení klienta v místě, nahraďte existující databáze klienta</span><span class="sxs-lookup"><span data-stu-id="16578-182">Restore a tenant in place, replacing the existing tenant database</span></span>

<span data-ttu-id="16578-183">Toto cvičení obnoví Contoso vzájemné součinnosti Hall klienta k bodu v čase před událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="16578-183">This exercise restores the Contoso Concert Hall tenant to a point in time before the event was deleted.</span></span> <span data-ttu-id="16578-184">*Obnovení TenantInPlace* skript obnoví aktuální databáze klienta pro novou databázi přejdete do předchozího bodu v čase a odstraní původní databázi.</span><span class="sxs-lookup"><span data-stu-id="16578-184">The *Restore-TenantInPlace* script restores the current tenant database to a new database pointing to a previous point in time, and deletes the original database.</span></span> <span data-ttu-id="16578-185">Tento vzor obnovení je nejvhodnější pro obnovení z poškození závažné dat jako může být důležité datových ztrát klienta bude muset přizpůsobit.</span><span class="sxs-lookup"><span data-stu-id="16578-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that the tenant would have to accommodate.</span></span>

1. <span data-ttu-id="16578-186">Otevřete **ukázku RestoreTenant.ps1** souboru v integrovaném Skriptovacím prostředí PowerShell</span><span class="sxs-lookup"><span data-stu-id="16578-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="16578-187">Nastavit **$DemoScenario** k **5** vyberte *obnovení klienta v případě místní*.</span><span class="sxs-lookup"><span data-stu-id="16578-187">Set **$DemoScenario** to **5** to select the *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="16578-188">Spuštění pomocí **F5**.</span><span class="sxs-lookup"><span data-stu-id="16578-188">Execute using **F5**.</span></span>

<span data-ttu-id="16578-189">Skript obnoví databázi klienta k bodu pět minut, než událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="16578-189">The script restores the tenant database to a point five minutes before the event was deleted.</span></span> <span data-ttu-id="16578-190">Dělá to pomocí první trvá Contoso vzájemné součinnosti Hall klienta do offline režimu, nejsou k dispozici žádné další aktualizace na data.</span><span class="sxs-lookup"><span data-stu-id="16578-190">It does this by first taking the Contoso Concert Hall tenant offline so there are no further updates to the data.</span></span> <span data-ttu-id="16578-191">Paralelní databáze je pak vytvořena obnovení z bodu obnovení a s názvem s časovým razítkem zajistit, že název databáze není v konfliktu s existující databáze název klienta.</span><span class="sxs-lookup"><span data-stu-id="16578-191">Then, a parallel database is created by restoring from the restore point and named with a timestamp to ensure the database name does not conflict with the existing tenant database name.</span></span> <span data-ttu-id="16578-192">V dalším kroku staré databáze klienta se odstraní a obnovené databáze je přejmenována na původní název databáze.</span><span class="sxs-lookup"><span data-stu-id="16578-192">Next, the old tenant database is deleted, and the restored database is renamed to the original database name.</span></span> <span data-ttu-id="16578-193">Nakonec Contoso vzájemné součinnosti Hall je uvést do režimu online pro povolení přístupu aplikace k obnovené databáze.</span><span class="sxs-lookup"><span data-stu-id="16578-193">Finally, Contoso Concert Hall is brought online to allow the app access to the restored database.</span></span>

<span data-ttu-id="16578-194">Úspěšně jste obnovili databázi do bodu v čase před událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="16578-194">You successfully restored the database to a point in time before the event was deleted.</span></span> <span data-ttu-id="16578-195">Otevře stránku události, takže potvrďte poslední událost byla obnovena.</span><span class="sxs-lookup"><span data-stu-id="16578-195">The Events page opens, so confirm the last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="16578-196">Další kroky</span><span class="sxs-lookup"><span data-stu-id="16578-196">Next steps</span></span>

<span data-ttu-id="16578-197">V tomto kurzu jste se naučili:</span><span class="sxs-lookup"><span data-stu-id="16578-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="16578-198">Obnovení databáze do paralelní databáze (-souběžného)</span><span class="sxs-lookup"><span data-stu-id="16578-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="16578-199">Obnovení databáze na místě</span><span class="sxs-lookup"><span data-stu-id="16578-199">Restore a database in place</span></span>

[<span data-ttu-id="16578-200">Správa schématu databáze klienta</span><span class="sxs-lookup"><span data-stu-id="16578-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="16578-201">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="16578-201">Additional resources</span></span>

* <span data-ttu-id="16578-202">Další [návodů, které stavět na adresář Wingtip SaaS aplikace](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="16578-202">Additional [tutorials that build upon the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="16578-203">Přehled kontinuity podnikových procesů s Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="16578-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="16578-204">Další informace o zálohování databáze SQL</span><span class="sxs-lookup"><span data-stu-id="16578-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
