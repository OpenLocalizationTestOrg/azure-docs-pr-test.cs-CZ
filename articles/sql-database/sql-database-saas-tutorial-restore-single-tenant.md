---
title: "aaaRestore Azure SQL database v aplikaci víceklientské | Microsoft Docs"
description: "Zjistěte, jak toorestore jedné klienty SQL databáze po omylem odstraňování dat"
keywords: kurz k sql database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="f4f69-104">Obnovení databáze SQL Wingtip SaaS klientů</span><span class="sxs-lookup"><span data-stu-id="f4f69-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="f4f69-105">aplikace Wingtip SaaS Hello vytvořená s využitím modelu databáze za klienta, kde každý klient má své vlastní databázi.</span><span class="sxs-lookup"><span data-stu-id="f4f69-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="f4f69-106">Jednou z výhod hello tohoto modelu je to je snadno toorestore data jednoho klienta v izolaci bez dopadu na ostatních klientů.</span><span class="sxs-lookup"><span data-stu-id="f4f69-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="f4f69-107">V tomto kurzu zjistíte, dva vzory obnovení dat:</span><span class="sxs-lookup"><span data-stu-id="f4f69-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="f4f69-108">Obnovení databáze do paralelní databáze (-souběžného)</span><span class="sxs-lookup"><span data-stu-id="f4f69-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="f4f69-109">Obnovení databáze na místě</span><span class="sxs-lookup"><span data-stu-id="f4f69-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="f4f69-110">**Klienta tooa předchozí bod v čase, obnovení do paralelní databáze**</span><span class="sxs-lookup"><span data-stu-id="f4f69-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="f4f69-111">Tento vzor mohou využívat klienta hello kontrolní, auditování, dodržování předpisů, atd. hello původní databáze zůstane online a beze změny.</span><span class="sxs-lookup"><span data-stu-id="f4f69-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="f4f69-112">**Obnovení klienta na místě**</span><span class="sxs-lookup"><span data-stu-id="f4f69-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="f4f69-113">Tento vzor je obvykle používanými toorecover na klienta tooa předchozí bod v čase, poté, co klient omylem odstraní data.</span><span class="sxs-lookup"><span data-stu-id="f4f69-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="f4f69-114">Hello původní databáze je uveden do režimu offline a nahradit hello obnovené databáze.</span><span class="sxs-lookup"><span data-stu-id="f4f69-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="f4f69-115">toocomplete dokončení tohoto kurzu, ujistěte se, hello následující požadavky:</span><span class="sxs-lookup"><span data-stu-id="f4f69-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="f4f69-116">Hello Wingtip SaaS aplikace je nasazená.</span><span class="sxs-lookup"><span data-stu-id="f4f69-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="f4f69-117">toodeploy za méně než pět minut, najdete v části [nasazení a seznamte se s hello Wingtip SaaS aplikace](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="f4f69-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="f4f69-118">Je nainstalované prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f4f69-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="f4f69-119">Podrobnosti najdete v článku [Začínáme s prostředím Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="f4f69-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="f4f69-120">Úvod toohello SaaS klienta obnovení vzor</span><span class="sxs-lookup"><span data-stu-id="f4f69-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="f4f69-121">Pro klienta hello obnovení vzor, existují dva jednoduché vzory pro obnovení dat jednoho klienta.</span><span class="sxs-lookup"><span data-stu-id="f4f69-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="f4f69-122">Protože jsou od sebe navzájem oddělené klienta databáze, obnovení jednoho klienta nemá žádný vliv na data žádným jiným klientem na.</span><span class="sxs-lookup"><span data-stu-id="f4f69-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="f4f69-123">V prvním vzoru hello je obnovit data do nové databáze.</span><span class="sxs-lookup"><span data-stu-id="f4f69-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="f4f69-124">Hello klienta potom bude mít přístup k databázi toothis spolu s jejich provozními daty.</span><span class="sxs-lookup"><span data-stu-id="f4f69-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="f4f69-125">Tento vzor umožňuje klienta správce tooreview hello obnovit data a potenciálně použití tooselectively přepsat aktuální hodnoty data.</span><span class="sxs-lookup"><span data-stu-id="f4f69-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="f4f69-126">Je to toohello SaaS aplikace návrháře toodetermine právě jak sofistikované hello obnovení dat, které by měl být možnosti.</span><span class="sxs-lookup"><span data-stu-id="f4f69-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="f4f69-127">Všechno, co je potřeba v některých scénářích možná jednoduše je možné tooreview data v hello stavu, ve kterém se nacházel k danému bodu v čase.</span><span class="sxs-lookup"><span data-stu-id="f4f69-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="f4f69-128">Pokud databáze hello používá [geografická replikace](sql-database-geo-replication-overview.md), doporučujeme, abyste kopírování dat vyžaduje hello z kopie hello obnovení do původní databáze hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="f4f69-129">Pokud je původní databáze hello nahradit hello obnovit databázi, potřebujete tooreconfigure a poté proveďte opakovanou synchronizaci geografická replikace.</span><span class="sxs-lookup"><span data-stu-id="f4f69-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="f4f69-130">V druhém vzoru hello, která předpokládá, že hello klienta se vyskytla ztráty nebo poškození dat, hello klienta produkční databázi obnovit tooa předchozí bod v čase.</span><span class="sxs-lookup"><span data-stu-id="f4f69-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="f4f69-131">V hello obnovit v místě vzoru hello klienta do režimu offline po krátkou dobu při hello databáze je obnovit a vrátí do režimu online.</span><span class="sxs-lookup"><span data-stu-id="f4f69-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="f4f69-132">Hello původní databáze odstraněn, ale můžete pořád obnovit z Pokud potřebujete toogo back tooan i dřívějšího bodu v čase.</span><span class="sxs-lookup"><span data-stu-id="f4f69-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="f4f69-133">Varianta tohoto vzoru přejmenovat databázi hello místo odstraněním, i když přejmenování databáze hello nabízí žádné další výhody z hlediska zabezpečení dat.</span><span class="sxs-lookup"><span data-stu-id="f4f69-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="f4f69-134">Získat hello Wingtip aplikační skripty</span><span class="sxs-lookup"><span data-stu-id="f4f69-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="f4f69-135">Hello Wingtip SaaS skripty a zdrojový kód aplikace jsou k dispozici v hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) úložiště github.</span><span class="sxs-lookup"><span data-stu-id="f4f69-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="f4f69-136">[Kroky toodownload hello Wingtip SaaS skripty](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="f4f69-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="f4f69-137">Simulovat klienta omylem odstraňování dat</span><span class="sxs-lookup"><span data-stu-id="f4f69-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="f4f69-138">toodemonstrate tyto scénáře obnovení potřebujeme příliš*omylem* odstranit některá data v jedné z databází hello klienta.</span><span class="sxs-lookup"><span data-stu-id="f4f69-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="f4f69-139">Když odstraníte všechny záznam, získat hello další krok nastaví hello ukázku toonot blokována porušení referenční integrity!</span><span class="sxs-lookup"><span data-stu-id="f4f69-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="f4f69-140">Přidává také některé data nákupu lístku můžete použít později v hello *Wingtip SaaS Analytics kurzy*.</span><span class="sxs-lookup"><span data-stu-id="f4f69-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="f4f69-141">Spusťte skript generátor hello lístku a vytvořte další data.</span><span class="sxs-lookup"><span data-stu-id="f4f69-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="f4f69-142">Generátor lístku Hello záměrně není zakoupit lístky pro všechny klienty poslední události.</span><span class="sxs-lookup"><span data-stu-id="f4f69-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="f4f69-143">Otevřete... \\Learning moduly\\nástroje\\*ukázku TicketGenerator.ps1* v hello *prostředí PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="f4f69-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="f4f69-144">Stiskněte klávesu **F5** toorun hello skriptu a generovat zákazníků a lístek data prodeje.</span><span class="sxs-lookup"><span data-stu-id="f4f69-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="f4f69-145">Otevřete hello události aplikace tooreview hello aktuální události</span><span class="sxs-lookup"><span data-stu-id="f4f69-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="f4f69-146">Otevřete hello *události rozbočovače* (http://events.wtp.&lt; Uživatel&gt;. trafficmanager.net) a klikněte na tlačítko **Contoso vzájemné součinnosti Hall**:</span><span class="sxs-lookup"><span data-stu-id="f4f69-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![centrum akcí](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="f4f69-148">Posuňte se hello seznam událostí a poznamenejte si hello poslední událost v seznamu hello:</span><span class="sxs-lookup"><span data-stu-id="f4f69-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![poslední událost](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="f4f69-150">Spustit hello ukázkový scénář tooaccidentally odstranění hello poslední událost</span><span class="sxs-lookup"><span data-stu-id="f4f69-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="f4f69-151">Otevřete... \\Learning moduly\\kontinuity podnikových procesů a zotavení po havárii\\RestoreTenant\\*ukázku RestoreTenant.ps1* v hello *prostředí PowerShell ISE*, a sadu hello následující hodnotu:</span><span class="sxs-lookup"><span data-stu-id="f4f69-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="f4f69-152">**$DemoScenario** = **1**, nastavte příliš**1** – odstranit události s žádné prodeje lístků.</span><span class="sxs-lookup"><span data-stu-id="f4f69-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="f4f69-153">Stiskněte klávesu **F5** toorun hello skriptu a odstranit poslední událost hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="f4f69-154">Měli byste vidět podobné toohello následující zpráva potvrzení:</span><span class="sxs-lookup"><span data-stu-id="f4f69-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="f4f69-155">Otevře se stránka události Contoso Hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-155">hello Contoso events page opens.</span></span> <span data-ttu-id="f4f69-156">Přejděte dolů a ověřte, zda text hello událostí je pryč.</span><span class="sxs-lookup"><span data-stu-id="f4f69-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="f4f69-157">Pokud je stále v seznamu hello hello událost, klikněte na tlačítko Aktualizovat a ověřte, zda že je pryč.</span><span class="sxs-lookup"><span data-stu-id="f4f69-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![poslední událost](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="f4f69-159">Obnovení databáze klienta paralelně s hello provozní databáze</span><span class="sxs-lookup"><span data-stu-id="f4f69-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="f4f69-160">Toto cvičení obnoví hello Contoso vzájemné součinnosti Hall databáze tooa bodu v čase před hello událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="f4f69-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="f4f69-161">Po odstranění hello událostí v předchozích krocích hello chcete toorecover a zobrazit hello odstranit data.</span><span class="sxs-lookup"><span data-stu-id="f4f69-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="f4f69-162">Nepotřebujete toorestore vaši produkční databázi s hello odstranit záznam, ale potřebujete toorecover hello staré databáze tooaccess hello stará data z jiných důvodů firmy.</span><span class="sxs-lookup"><span data-stu-id="f4f69-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="f4f69-163">Hello *obnovení TenantInParallel.ps1* skript vytvoří paralelní klienta databáze a paralelní položky katalogu i s názvem *ContosoConcertHall\_staré*.</span><span class="sxs-lookup"><span data-stu-id="f4f69-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="f4f69-164">Tento vzor obnovení je nejvhodnější pro obnovení před ztrátou dat menší nebo pro dodržování předpisů a auditování scénáře obnovení.</span><span class="sxs-lookup"><span data-stu-id="f4f69-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="f4f69-165">Je také hello doporučenému přístupu při použití [geografická replikace](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f4f69-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="f4f69-166">Dokončení hello [simulovat uživatele nechtěně odstraní data](#simulate-a-tenant-accidentally-deleting-data) části.</span><span class="sxs-lookup"><span data-stu-id="f4f69-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="f4f69-167">Otevřete... \\Learning moduly\\kontinuity podnikových procesů a zotavení po havárii\\RestoreTenant\\_ukázku RestoreTenant.ps1_ v hello *prostředí PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="f4f69-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="f4f69-168">Nastavit **$DemoScenario** = **2**, nastavte příliš**2** příliš*obnovení klienta paralelně*.</span><span class="sxs-lookup"><span data-stu-id="f4f69-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="f4f69-169">Stiskněte klávesu **F5** toorun hello skriptu.</span><span class="sxs-lookup"><span data-stu-id="f4f69-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="f4f69-170">skript Hello obnoví hello klienta database (databáze paralelní tooa) tooa bodu v čase předtím, než jste odstranili hello událost v předchozí části hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="f4f69-171">Vytvoří druhý databáze, odstraní všechny existující katalogu metadata, která existuje v této databázi a přidá hello databáze toohello katalogu pod hello *ContosoConcertHall\_staré* položku.</span><span class="sxs-lookup"><span data-stu-id="f4f69-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="f4f69-172">Ukázkový skript Hello otevře hello události stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="f4f69-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="f4f69-173">Poznámka: z adresy URL hello: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` , to se zobrazuje data z databáze hello obnovit kde *_old* je přidali toohello název.</span><span class="sxs-lookup"><span data-stu-id="f4f69-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="f4f69-174">Posuv hello události uvedené v prohlížeči tooconfirm hello které hello událostí v předchozí části hello odstranit byla obnovena.</span><span class="sxs-lookup"><span data-stu-id="f4f69-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="f4f69-175">Poznámka: Tento zpřístupňuje hello obnovit klienta, jako další klienta, s vlastní události aplikace toobrowse lístků, je pravděpodobně toobe, jak by zadejte, že data toorestored přístupu klienta, ale slouží tooeasily znázornění vzor obnovení hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="f4f69-176">Ve skutečnosti byste pravděpodobně pouze zachovat tato obnovená databáze za definované období.</span><span class="sxs-lookup"><span data-stu-id="f4f69-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="f4f69-177">Po dokončení pomocí volání hello odstraníte záznam klienta hello obnovit *odebrat RestoredTenant.ps1* skriptu.</span><span class="sxs-lookup"><span data-stu-id="f4f69-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="f4f69-178">Nastavit **$DemoScenario** příliš**4** tooselect hello *klienta odebrat obnovit* scénář.</span><span class="sxs-lookup"><span data-stu-id="f4f69-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="f4f69-179">**Spuštění** **pomocí** **F5**</span><span class="sxs-lookup"><span data-stu-id="f4f69-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="f4f69-180">Hello *ContosoConcertHall\_staré* položka je nyní odstraněny z katalogu hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="f4f69-181">Pokračujte a zavřete stránku hello události pro tohoto klienta v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="f4f69-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="f4f69-182">Obnovení klienta v místě, nahraďte existující databázi klienta hello</span><span class="sxs-lookup"><span data-stu-id="f4f69-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="f4f69-183">Toto cvičení obnoví hello Contoso vzájemné součinnosti Hall klienta tooa bodu v čase před hello událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="f4f69-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="f4f69-184">Hello *obnovení TenantInPlace* skriptu obnoví hello aktuální klienta tooa nové databáze odkazující tooa předchozího bodu v čase a odstranění hello původní databázi.</span><span class="sxs-lookup"><span data-stu-id="f4f69-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="f4f69-185">Tento vzor obnovení je nejvhodnější pro obnovení z poškození závažné dat jako může být důležité datových ztrát hello klienta by mít tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="f4f69-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="f4f69-186">Otevřete **ukázku RestoreTenant.ps1** souboru v integrovaném Skriptovacím prostředí PowerShell</span><span class="sxs-lookup"><span data-stu-id="f4f69-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="f4f69-187">Nastavit **$DemoScenario** příliš**5** tooselect hello *obnovení klienta v případě místní*.</span><span class="sxs-lookup"><span data-stu-id="f4f69-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="f4f69-188">Spuštění pomocí **F5**.</span><span class="sxs-lookup"><span data-stu-id="f4f69-188">Execute using **F5**.</span></span>

<span data-ttu-id="f4f69-189">skript Hello obnoví hello klienta databáze tooa bodu pět minut, než hello událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="f4f69-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="f4f69-190">Dělá to pomocí prvního trvá hello Contoso vzájemné součinnosti Hall klienta do režimu offline, takže neexistují žádné další aktualizace toohello data.</span><span class="sxs-lookup"><span data-stu-id="f4f69-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="f4f69-191">Pak je paralelní databáze vytvořené obnovení z bodu obnovení hello a s názvem s časovým razítkem název tooensure hello databáze není v konfliktu s hello název existující databáze klienta.</span><span class="sxs-lookup"><span data-stu-id="f4f69-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="f4f69-192">V dalším kroku hello staré databáze klienta se odstraní a hello obnovené databáze je přejmenován toohello původní název databáze.</span><span class="sxs-lookup"><span data-stu-id="f4f69-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="f4f69-193">Nakonec Contoso vzájemné součinnosti Hall uvedena do režimu online tooallow hello aplikace přístup toohello obnovit databázi.</span><span class="sxs-lookup"><span data-stu-id="f4f69-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="f4f69-194">Úspěšně obnovil hello databáze tooa bodu v čase před hello událost byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="f4f69-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="f4f69-195">Dobrý den otevře stránka události, takže potvrďte byla obnovena poslední událost hello.</span><span class="sxs-lookup"><span data-stu-id="f4f69-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="f4f69-196">Další kroky</span><span class="sxs-lookup"><span data-stu-id="f4f69-196">Next steps</span></span>

<span data-ttu-id="f4f69-197">V tomto kurzu jste se naučili:</span><span class="sxs-lookup"><span data-stu-id="f4f69-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="f4f69-198">Obnovení databáze do paralelní databáze (-souběžného)</span><span class="sxs-lookup"><span data-stu-id="f4f69-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="f4f69-199">Obnovení databáze na místě</span><span class="sxs-lookup"><span data-stu-id="f4f69-199">Restore a database in place</span></span>

[<span data-ttu-id="f4f69-200">Správa schématu databáze klienta</span><span class="sxs-lookup"><span data-stu-id="f4f69-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="f4f69-201">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="f4f69-201">Additional resources</span></span>

* <span data-ttu-id="f4f69-202">Další [návodů, které stavějí hello Wingtip SaaS aplikace](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="f4f69-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="f4f69-203">Přehled kontinuity podnikových procesů s Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="f4f69-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="f4f69-204">Další informace o zálohování databáze SQL</span><span class="sxs-lookup"><span data-stu-id="f4f69-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
