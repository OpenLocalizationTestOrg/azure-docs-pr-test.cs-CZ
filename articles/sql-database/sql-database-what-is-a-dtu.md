---
title: 'SQL Database: Co je DTU? | Dokumentace Microsoftu'
description: "Vysvětlení jednotky transakce Azure SQL Database."
keywords: "možnosti databáze, výkon databáze"
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: CarlRabeler
ms.assetid: 89e3e9ce-2eeb-4949-b40f-6fc3bf520538
ms.service: sql-database
ms.custom: DBs & servers
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 04/13/2017
ms.author: carlrab
ms.openlocfilehash: fac947fa153d83b614dc35c3cc0d8e640bfe1c95
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="explaining-database-transaction-units-dtus-and-elastic-database-transaction-units-edtus"></a><span data-ttu-id="4af22-105">Vysvětlení jednotek databázové transakce (DTU) a elastických jednotek databázové transakce (eDTU)</span><span class="sxs-lookup"><span data-stu-id="4af22-105">Explaining Database Transaction Units (DTUs) and elastic Database Transaction Units (eDTUs)</span></span>
<span data-ttu-id="4af22-106">Tento článek vysvětluje jednotky databázové transakce (DTU) a elastické jednotky databázové transakce (eDTU). Popisuje také, co se stane při dosažení maximálního počtu DTU nebo eDTU.</span><span class="sxs-lookup"><span data-stu-id="4af22-106">This article explains Database Transaction Units (DTUs) and elastic Database Transaction Units (eDTUs) and what happens when you hit the maximum DTUs or eDTUs.</span></span>  

## <a name="what-are-database-transaction-units-dtus"></a><span data-ttu-id="4af22-107">Co jsou jednotky databázové transakce (DTU)</span><span class="sxs-lookup"><span data-stu-id="4af22-107">What are Database Transaction Units (DTUs)</span></span>
<span data-ttu-id="4af22-108">Pro jednu databázi Azure SQL na úrovni výkonu specifických v rámci [vrstvy služby](sql-database-service-tiers.md#single-database-service-tiers-and-performance-levels), Microsoft zaručuje úroveň prostředky pro tuto databázi (bez ohledu na jakékoli jiné databáze v cloudu Azure) a poskytuje předvídatelný úroveň výkonu.</span><span class="sxs-lookup"><span data-stu-id="4af22-108">For a single Azure SQL database at a specific performance level within a [service tier](sql-database-service-tiers.md#single-database-service-tiers-and-performance-levels), Microsoft guarantees a certain level of resources for that database (independent of any other database in the Azure cloud) and providing a predictable level of performance.</span></span> <span data-ttu-id="4af22-109">Toto množství prostředků počítá se jako počet jednotky transakcí databáze nebo Dtu a je kombinaci měření procesoru, paměti a vstupu a výstupu (dat a transakční protokol vstupně-výstupních operací).</span><span class="sxs-lookup"><span data-stu-id="4af22-109">This amount of resources is calculated as a number of Database Transaction Units or DTUs, and is a blended measure of CPU, memory, I/O (data and transaction log I/O).</span></span> <span data-ttu-id="4af22-110">Poměr mezi tyto prostředky se původně určený [OLTP srovnávacího testu zatížení](sql-database-benchmark-overview.md) navržený tak, aby Typická reálného OLTP úloh.</span><span class="sxs-lookup"><span data-stu-id="4af22-110">The ratio amongst these resources was originally determined by an [OLTP benchmark workload](sql-database-benchmark-overview.md) designed to be typical of real-world OLTP workloads.</span></span> <span data-ttu-id="4af22-111">Pokud vaše úlohy překročí množství kterýkoli z těchto prostředků, vaše propustnost je omezenému – což pomalejší výkon a vypršení časových limitů.</span><span class="sxs-lookup"><span data-stu-id="4af22-111">When your workload exceeds the amount of any of these resources, your throughput is throttled - resulting in slower performance and timeouts.</span></span> <span data-ttu-id="4af22-112">Prostředky používané velikosti pracovní zátěže nemá dopad na prostředky, které jsou k dispozici pro ostatní databází SQL v cloudu Azure a prostředků používá jiné úlohy nemá dopad na prostředky, které jsou k dispozici k vaší databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="4af22-112">The resources used by your workload do not impact the resources available to other SQL databases in the Azure cloud, and the resource used by other workloads do not impact the resources available to your SQL database.</span></span>

![ohraničující pole](./media/sql-database-what-is-a-dtu/bounding-box.png)

<span data-ttu-id="4af22-114">Počet jednotek Dtu jsou zvláště užitečné pro pochopení relativní objem prostředků mezi databází SQL Azure na úrovních různých výkonu a úrovně služeb.</span><span class="sxs-lookup"><span data-stu-id="4af22-114">DTUs are most useful for understanding the relative amount of resources between Azure SQL Databases at different performance levels and service tiers.</span></span> <span data-ttu-id="4af22-115">Například zvýší počet jednotek Dtu zvýšením úrovně výkonu databáze rovná zvýší sadu prostředků, které jsou k dispozici pro tuto databázi.</span><span class="sxs-lookup"><span data-stu-id="4af22-115">For example, doubling the DTUs by increasing the performance level of a database equates to doubling the set of resource available to that database.</span></span> <span data-ttu-id="4af22-116">Například databáze Premium P11 se 1 750 DTU nabízí 350x více DTU výpočetního výkonu než databáze Basic s 5 DTU.</span><span class="sxs-lookup"><span data-stu-id="4af22-116">For example, a Premium P11 database with 1750 DTUs provides 350x more DTU compute power than a Basic database with 5 DTUs.</span></span>  

<span data-ttu-id="4af22-117">Chcete-li získat podrobnější přehled o spotřeby prostředků (DTU) vašich úloh, použijte [Azure SQL Database Query Performance Insight](sql-database-query-performance.md) na:</span><span class="sxs-lookup"><span data-stu-id="4af22-117">To gain deeper insight into the resource (DTU) consumption of your workload, use [Azure SQL Database Query Performance Insight](sql-database-query-performance.md) to:</span></span>

- <span data-ttu-id="4af22-118">Identifikujte nejčastějších dotazů podle využití procesoru a doba trvání nebo provádění počtu, který lze ladit potenciálně pro zlepšení výkonu.</span><span class="sxs-lookup"><span data-stu-id="4af22-118">Identify the top queries by CPU/Duration/Execution count that can potentially be tuned for improved performance.</span></span> <span data-ttu-id="4af22-119">Například dotaz intenzivním vstupně-výstupních operací může mít užitek z použití [techniky optimalizace v paměti](sql-database-in-memory.md) lepší využití paměti k dispozici na určité služby a výkonu úrovni.</span><span class="sxs-lookup"><span data-stu-id="4af22-119">For example, an I/O intensive query might benefit from the use of [in-memory optimization techniques](sql-database-in-memory.md) to make better use of the available memory at a certain service tier and performance level.</span></span>
- <span data-ttu-id="4af22-120">Přejděte na podrobné informace o dotazu, zobrazit historii využití prostředků a text.</span><span class="sxs-lookup"><span data-stu-id="4af22-120">Drill down into the details of a query, view its text and history of resource utilization.</span></span>
- <span data-ttu-id="4af22-121">Výkon přístupu k ladění doporučení, které se zobrazí akce prováděné [Poradce pro funkci SQL Database](sql-database-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="4af22-121">Access performance tuning recommendations that show actions performed by [SQL Database Advisor](sql-database-advisor.md).</span></span>

<span data-ttu-id="4af22-122">[Změnit úrovně služeb](sql-database-service-tiers.md) můžete kdykoli s minimální odstávkou aplikace (obecně v průměru méně než čtyři sekundy).</span><span class="sxs-lookup"><span data-stu-id="4af22-122">You can [change service tiers](sql-database-service-tiers.md) at any time with minimal downtime to your application (generally averaging under four seconds).</span></span> <span data-ttu-id="4af22-123">Mnoha firmám a aplikacím stačí vytváření databází a nastavování výkonu na vyžádání, zejména v případě, že jsou vzorce používání relativně předvídatelné.</span><span class="sxs-lookup"><span data-stu-id="4af22-123">For many businesses and apps, being able to create databases and dial performance up or down on demand is enough, especially if usage patterns are relatively predictable.</span></span> <span data-ttu-id="4af22-124">Ale pokud vaše vzorce používání předvídatelné nejsou, může být správa nákladů a údržba obchodního modelu velmi těžká.</span><span class="sxs-lookup"><span data-stu-id="4af22-124">But if you have unpredictable usage patterns, it can make it hard to manage costs and your business model.</span></span> <span data-ttu-id="4af22-125">V tomto scénáři použijete fondu elastické databáze s počtem jednotek Edtu, která jsou sdílena mezi několika databáze ve fondu.</span><span class="sxs-lookup"><span data-stu-id="4af22-125">For this scenario, you use an elastic pool with a certain number of eDTUs that are shared among multiple database in the pool.</span></span>

![Úvod do služby SQL Database: DTU izolované databáze podle úrovní](./media/sql-database-what-is-a-dtu/single_db_dtus.png)

## <a name="what-are-elastic-database-transaction-units-edtus"></a><span data-ttu-id="4af22-127">Co jsou elastické jednotky databázové transakce (eDTU)</span><span class="sxs-lookup"><span data-stu-id="4af22-127">What are elastic Database Transaction Units (eDTUs)</span></span>
<span data-ttu-id="4af22-128">Spíše než poskytují vyhrazené sadu prostředků (Dtu) k databázi SQL, která je neustále dostupná bez ohledu na to, jestli není potřeba, můžete umístit do databáze [elastický fond](sql-database-elastic-pool.md) na databázi SQL serveru, který sdílí fond prostředků mezi tyto databáze.</span><span class="sxs-lookup"><span data-stu-id="4af22-128">Rather than provide a dedicated set of resources (DTUs) to a SQL Database that is always available regardless of whether needed not, you can place databases into an [elastic pool](sql-database-elastic-pool.md) on a SQL Database server that shares a pool of resources among those database.</span></span> <span data-ttu-id="4af22-129">Sdílené prostředky v elastickém fondu měří elastické jednotky transakcí databáze nebo Edtu.</span><span class="sxs-lookup"><span data-stu-id="4af22-129">The shared resources in an elastic pool measured by elastic Database Transaction Units or eDTUs.</span></span> <span data-ttu-id="4af22-130">Elastické fondy poskytují jednoduché a nákladově efektivní řešení správy výkonnostních cílů pro více databází, jejichž vzory používání se značně liší a nelze je předvídat.</span><span class="sxs-lookup"><span data-stu-id="4af22-130">Elastic pools provide a simple cost effective solution to manage the performance goals for multiple databases that have widely varying and unpredictable usage patterns.</span></span> <span data-ttu-id="4af22-131">V elastickém fondu, může zaručit, že žádné jedna databáze používá všechny prostředky ve fondu a také že minimální objem prostředků je vždy k dispozici do databáze v elastickém fondu.</span><span class="sxs-lookup"><span data-stu-id="4af22-131">In an elastic pool, you can guarantee that no one database uses all of the resources in the pool and also that a minimum amount of resources is always available to a database in an elastic pool.</span></span> <span data-ttu-id="4af22-132">V tématu [elastické fondy](sql-database-elastic-pool.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="4af22-132">See  [elastic pools](sql-database-elastic-pool.md) for more information.</span></span>

![Úvod do služby SQL Database: eDTU podle vrstvy a úrovně](./media/sql-database-what-is-a-dtu/sqldb_elastic_pools.png)

<span data-ttu-id="4af22-134">Fond obdrží stanovený počet eDTU za stanovenou cenu.</span><span class="sxs-lookup"><span data-stu-id="4af22-134">A pool is given a set number of eDTUs, for a set price.</span></span> <span data-ttu-id="4af22-135">V rámci elastického fondu disponují jednotlivé databáze flexibilní možností automatického škálování v rámci nakonfigurovaných mezí.</span><span class="sxs-lookup"><span data-stu-id="4af22-135">Within the elastic pool, individual databases are given the flexibility to auto-scale within the configured boundaries.</span></span> <span data-ttu-id="4af22-136">V případě velkého zatížení může databáze spotřebovávat více eDTU, aby splnila požadavky, zatímco při nízkém zatížení databáze spotřebovávají méně eDTU a databáze bez zatížení dokonce nespotřebovávají žádné eDTU.</span><span class="sxs-lookup"><span data-stu-id="4af22-136">Under heavy load, a database can consume more eDTUs to meet demand while databases under light loads consume less, up to the point that databases under no load consume no eDTUs.</span></span> <span data-ttu-id="4af22-137">Zřizování prostředků pro celý fond, a nikoli pro jednotlivé databáze, zjednoduše úlohy správy a umožňuje předem odhadnout náklady na fond.</span><span class="sxs-lookup"><span data-stu-id="4af22-137">By provisioning resources for the entire pool, rather than per database, management tasks are simplified and you have a predictable budget for the pool.</span></span>

<span data-ttu-id="4af22-138">Další eDTU lze do existujícího fondu přidat bez jakéhokoli výpadku databáze a bez jakéhokoli vlivu na databáze ve fondu.</span><span class="sxs-lookup"><span data-stu-id="4af22-138">Additional eDTUs can be added to an existing pool with no database downtime and with no impact on the databases in the pool.</span></span> <span data-ttu-id="4af22-139">Podobně platí, že pokud již přidané eDTU nejsou potřebné, lze je z existujícího fondu kdykoli odebrat.</span><span class="sxs-lookup"><span data-stu-id="4af22-139">Similarly, if extra eDTUs are no longer needed, they can be removed from an existing pool at any point in time.</span></span> <span data-ttu-id="4af22-140">Do fondu můžete přidávat databáze nebo je z něj odebírat, nebo můžete omezit množství eDTU, které databáze může využívat v případě velkého zatížení a vyhradit tak eDTU pro ostatní databáze.</span><span class="sxs-lookup"><span data-stu-id="4af22-140">You can add or subtract databases to the pool, or limit the amount of eDTUs a database can use under heavy load to reserve eDTUs for other databases.</span></span> <span data-ttu-id="4af22-141">Pokud databáze podle předpokladu nedostatečně využívá prostředky, můžete ji odebrat z fondu a nakonfigurovat jako izolovanou databázi s předvídatelným množstvím požadovaných prostředků.</span><span class="sxs-lookup"><span data-stu-id="4af22-141">If a database is predictably under-utilizing resources, you can move it out of the pool and configure it as a single database with predictable amount of resources it requires.</span></span>

## <a name="how-can-i-determine-the-number-of-dtus-needed-by-my-workload"></a><span data-ttu-id="4af22-142">Jak lze určit počet DTU potřebných pro určitou úlohu?</span><span class="sxs-lookup"><span data-stu-id="4af22-142">How can I determine the number of DTUs needed by my workload?</span></span>
<span data-ttu-id="4af22-143">Pokud máte v úmyslu migrovat existující úlohu místního počítače nebo virtuálního počítače SQL Server do Azure SQL Database, můžete k odhadnutí potřebného počtu DTU použít [Kalkulačku DTU](http://dtucalculator.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="4af22-143">If you are looking to migrate an existing on-premises or SQL Server virtual machine workload to Azure SQL Database, you can use the [DTU Calculator](http://dtucalculator.azurewebsites.net/) to approximate the number of DTUs needed.</span></span> <span data-ttu-id="4af22-144">Pro existující úlohy Azure SQL Database můžete použít [SQL Database Query Performance Insight](sql-database-query-performance.md), abyste pochopili spotřebu databázových prostředků (TU) a lépe porozuměli možnostem optimalizace úloh.</span><span class="sxs-lookup"><span data-stu-id="4af22-144">For an existing Azure SQL Database workload, you can use [SQL Database Query Performance Insight](sql-database-query-performance.md) to understand your database resource consumption (DTUs) to get deeper insight into how to optimize your workload.</span></span> <span data-ttu-id="4af22-145">Můžete také použít DMV [sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) a získat informace o spotřebě prostředků za poslední hodinu.</span><span class="sxs-lookup"><span data-stu-id="4af22-145">You can also use the [sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) DMV to get the resource consumption information for the last one hour.</span></span> <span data-ttu-id="4af22-146">Můžete také zadávat dotazy na zobrazení katalogu [sys.resource_stats](http://msdn.microsoft.com/library/dn269979.aspx). Získáte stejná data za posledních 14 dní, průměry za pětiminutová období ale mohou být méně přesné.</span><span class="sxs-lookup"><span data-stu-id="4af22-146">Alternatively, the catalog view [sys.resource_stats](http://msdn.microsoft.com/library/dn269979.aspx) can also be queried to get the same data for the last 14 days, although at a lower fidelity of five-minute averages.</span></span>

## <a name="how-do-i-know-if-i-could-benefit-from-an-elastic-pool-of-resources"></a><span data-ttu-id="4af22-147">Jak poznám, že by pro mě používání elastického fondu prostředků bylo výhodné?</span><span class="sxs-lookup"><span data-stu-id="4af22-147">How do I know if I could benefit from an elastic pool of resources?</span></span>
<span data-ttu-id="4af22-148">Fondy jsou vhodné pro velký počet databází s konkrétními vzory využití.</span><span class="sxs-lookup"><span data-stu-id="4af22-148">Pools are suited for a large number of databases with specific utilization patterns.</span></span> <span data-ttu-id="4af22-149">Pro danou databázi je tento vzor charakterizován nízkou mírou průměrného využití s relativně málo častými nárůsty využití.</span><span class="sxs-lookup"><span data-stu-id="4af22-149">For a given database, this pattern is characterized by low average utilization with relatively infrequent utilization spikes.</span></span> <span data-ttu-id="4af22-150">SQL Database automaticky vyhodnotí historické údaje používání prostředků databází na existujícím serveru SQL Database a doporučí odpovídající konfigurace fondu na webu Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="4af22-150">SQL Database automatically evaluates the historical resource usage of databases in an existing SQL Database server and recommends the appropriate pool configuration in the Azure portal.</span></span> <span data-ttu-id="4af22-151">Další informace najdete v tématu [Kdy je vhodné používat elastický fond?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="4af22-151">For more information, see [when should an elastic pool be used?](sql-database-elastic-pool.md)</span></span>

## <a name="what-happens-when-i-hit-my-maximum-dtus"></a><span data-ttu-id="4af22-152">Co se stane, když dosáhnu maximálního počtu DTU</span><span class="sxs-lookup"><span data-stu-id="4af22-152">What happens when I hit my maximum DTUs</span></span>
<span data-ttu-id="4af22-153">Úrovně výkonu se kalibrují a řídí tak, aby poskytovaly zdroje potřebné ke spuštění vaší úlohy databáze až po maximální limity, které jsou pro vybranou úroveň služeb či úroveň výkonu povoleny.</span><span class="sxs-lookup"><span data-stu-id="4af22-153">Performance levels are calibrated and governed to provide the needed resources to run your database workload up to the max limits allowed for your selected service tier/performance level.</span></span> <span data-ttu-id="4af22-154">Pokud úloha dosahuje limity pro procesory / datový vstup/výstup / vstup/výstup protokolu, budete i nadále využívat prostředky na maximální povolené úrovni; je ale pravděpodobné, že se u vašich dotazů zvýší latence.</span><span class="sxs-lookup"><span data-stu-id="4af22-154">If your workload is hitting the limits in one of CPU/Data IO/Log IO limits, you continue to receive the resources at the maximum allowed level, but you are likely to see increased latencies for your queries.</span></span> <span data-ttu-id="4af22-155">Tyto limity nevedou k žádným chybám, ale mohou zpomalit zpracování úlohy, pokud se zpomalení nezvýší natolik, že začne docházet k vypršení časového limitu dotazů.</span><span class="sxs-lookup"><span data-stu-id="4af22-155">These limits do not result in any errors, but rather a slowdown in the workload, unless the slowdown becomes so severe that queries start timing out.</span></span> <span data-ttu-id="4af22-156">Pokud dosahujete limitů pro maximální povolený počet souběžných relací/požadavků uživatelů (pracovních vláken), zobrazují se explicitní chyby.</span><span class="sxs-lookup"><span data-stu-id="4af22-156">If you are hitting limits of maximum allowed concurrent user sessions/requests (worker threads), you see explicit errors.</span></span> <span data-ttu-id="4af22-157">Informace o limitech jiných prostředků než procesory, paměť, datový vstup/výstup či vstup výstup protokolu transakcí najdete v článku [Limity prostředků Azure SQL Database](sql-database-resource-limits.md).</span><span class="sxs-lookup"><span data-stu-id="4af22-157">See [Azure SQL Database resource limits](sql-database-resource-limits.md) for information on limit on resources other than CPU, memory, data I/O, and transaction log I/O.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4af22-158">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4af22-158">Next steps</span></span>
* <span data-ttu-id="4af22-159">Další informace o jednotkách DTU a eDTU dostupných pro izolované databáze a elastické fondy najdete v článku [Úrovně služby](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="4af22-159">See [Service tier](sql-database-service-tiers.md) for information on the DTUs and eDTUs available for single databases and for elastic pools.</span></span>
* <span data-ttu-id="4af22-160">Informace o limitech jiných prostředků než procesory, paměť, datový vstup/výstup či vstup výstup protokolu transakcí najdete v článku [Limity prostředků Azure SQL Database](sql-database-resource-limits.md).</span><span class="sxs-lookup"><span data-stu-id="4af22-160">See [Azure SQL Database resource limits](sql-database-resource-limits.md) for information on limit on resources other than CPU, memory, data I/O, and transaction log I/O.</span></span>
* <span data-ttu-id="4af22-161">Chcete-li pochopit svou spotřebu (DTU), přečtěte si článek [SQL Database Query Performance Insight](sql-database-query-performance.md).</span><span class="sxs-lookup"><span data-stu-id="4af22-161">See [SQL Database Query Performance Insight](sql-database-query-performance.md) to understand your (DTUs) consumption.</span></span>
* <span data-ttu-id="4af22-162">Chcete-li lépe pochopit metodiku používanou úlohou srovnávacího testu OLTP k určení kombinace pro jednotku DTU, přečtěte si článek [Přehled srovnávacích testů SQL Database](sql-database-benchmark-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4af22-162">See [SQL Database benchmark overview](sql-database-benchmark-overview.md) to understand the methodology behind the OLTP benchmark workload used to determine the DTU blend.</span></span>
