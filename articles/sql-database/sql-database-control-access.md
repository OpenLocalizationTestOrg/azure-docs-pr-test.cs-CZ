---
title: "Udělení přístupu k Azure SQL Database | Dokumentace Microsoftu"
description: "Přečtěte si, jak udělit přístup ke službě Microsoft Azure SQL Database."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 8e71b04c-bc38-4153-8f83-f2b14faa31d9
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/06/2017
ms.author: rickbyh
ms.openlocfilehash: 0ca1ccd273317d67537d31724d566625a4eb2c85
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-access-control"></a><span data-ttu-id="fa64f-103">Řízení přístupu ke službě Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="fa64f-103">Azure SQL Database access control</span></span>
<span data-ttu-id="fa64f-104">Služba SQL Database zajišťuje zabezpečení řízením přístupu pomocí pravidel brány firewall omezujících připojení podle IP adresy, ověřovacích mechanismů vyžadujících po uživatelích prokázání identity a autorizačních mechanismů omezujících uživatelům přístup ke konkrétním akcím a datům.</span><span class="sxs-lookup"><span data-stu-id="fa64f-104">To provide security, SQL Database controls access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users to prove their identity, and authorization mechanisms limiting users to specific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="fa64f-105">Přehled funkcí zabezpečení služby SQL Database najdete v [přehledu zabezpečení SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-105">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="fa64f-106">Podívejte se kurz [zabezpečení vaší databázi SQL Azure](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="fa64f-107">Brána firewall a pravidla brány firewall</span><span class="sxs-lookup"><span data-stu-id="fa64f-107">Firewall and firewall rules</span></span>
<span data-ttu-id="fa64f-108">Microsoft Azure SQL Database poskytuje relační databázovou službu pro aplikace Azure a další internetové aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa64f-108">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="fa64f-109">Brána firewall pomáhá chránit vaše data tím, že brání veškerému přístupu k vašemu databázovému serveru, dokud neurčíte, které počítače k tomu mají oprávnění.</span><span class="sxs-lookup"><span data-stu-id="fa64f-109">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="fa64f-110">Brána firewall uděluje přístup k databázím v závislosti na zdrojové IP adrese každého požadavku.</span><span class="sxs-lookup"><span data-stu-id="fa64f-110">The firewall grants access to databases based on the originating IP address of each request.</span></span> <span data-ttu-id="fa64f-111">Další informace najdete v tématu [Přehled pravidel brány firewall služby Azure SQL Database](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-111">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="fa64f-112">Služba Azure SQL Database je dostupná jenom prostřednictvím portu TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="fa64f-112">The Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="fa64f-113">Pokud chcete z počítače získat přístup ke službě SQL Database, ověřte, že brána firewall vašeho klientského počítače umožňuje odchozí komunikaci TCP přes port TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="fa64f-113">To access a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="fa64f-114">Pokud ho jiné aplikace nepotřebují, zablokujte na portu TCP 1433 příchozí připojení.</span><span class="sxs-lookup"><span data-stu-id="fa64f-114">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="fa64f-115">V rámci připojovacího procesu budou připojení virtuálních počítačů Azure přesměrována na jinou IP adresu a port, které jsou pro každou roli pracovního procesu jedinečné.</span><span class="sxs-lookup"><span data-stu-id="fa64f-115">As part of the connection process, connections from Azure virtual machines are redirected to a different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="fa64f-116">Číslo portu je v rozsahu 11000 až 11999.</span><span class="sxs-lookup"><span data-stu-id="fa64f-116">The port number is in the range from 11000 to 11999.</span></span> <span data-ttu-id="fa64f-117">Další informace o portech TCP naleznete v tématu [porty nad rámec 1433 pro technologii ADO.NET 4.5 a SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-117">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="fa64f-118">Authentication</span><span class="sxs-lookup"><span data-stu-id="fa64f-118">Authentication</span></span>

<span data-ttu-id="fa64f-119">SQL Database podporuje dva typy ověřování:</span><span class="sxs-lookup"><span data-stu-id="fa64f-119">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="fa64f-120">**Ověřování SQL,** které používá uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="fa64f-120">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="fa64f-121">Když jste vytvářeli logický server databáze, zadali jste uživatelské jméno a heslo účtu „server admin“.</span><span class="sxs-lookup"><span data-stu-id="fa64f-121">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="fa64f-122">Tyto přihlašovací údaje můžete použít k ověření a přihlášení k libovolné databázi na daném serveru jako vlastník databáze neboli „dbo“.</span><span class="sxs-lookup"><span data-stu-id="fa64f-122">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo."</span></span> 
* <span data-ttu-id="fa64f-123">**Ověřování pomocí Azure Active Directory,** které používá identity spravované v Azure Active Directory a je podporované u spravovaných a integrovaných domén.</span><span class="sxs-lookup"><span data-stu-id="fa64f-123">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="fa64f-124">[Kdykoliv to půjde](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode), použijte ověřování pomocí Active Directory (integrované zabezpečení).</span><span class="sxs-lookup"><span data-stu-id="fa64f-124">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="fa64f-125">Pokud chcete k ověřování použít Azure Active Directory, musíte vytvořit jiného správce serveru, který se jmenuje „Azure AD admin“ a který smí spravovat uživatele a skupiny služby Azure AD.</span><span class="sxs-lookup"><span data-stu-id="fa64f-125">If you want to use Azure Active Directory Authentication, you must create another server admin called the "Azure AD admin," which is allowed to administer Azure AD users and groups.</span></span> <span data-ttu-id="fa64f-126">Tento správce také smí provádět všechny operace jako běžný správce serveru.</span><span class="sxs-lookup"><span data-stu-id="fa64f-126">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="fa64f-127">Postup vytvoření účtu správce služby Azure AD, který umožňuje ověřování Azure Active Directory, najdete v tématu [Připojení ke službě SQL Database s ověřením přes Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-127">See [Connecting to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how to create an Azure AD admin to enable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="fa64f-128">Databázový stroj zavře připojení, které jsou neaktivní déle než 30 minut.</span><span class="sxs-lookup"><span data-stu-id="fa64f-128">The Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="fa64f-129">Připojení se musí znovu přihlásit, aby bylo možné ho použít.</span><span class="sxs-lookup"><span data-stu-id="fa64f-129">The connection must login again before it can be used.</span></span> <span data-ttu-id="fa64f-130">Trvale aktivní připojení ke službě SQL Database vyžadují opakovanou autorizaci (prováděnou databázovým strojem) nejméně každých 10 hodin.</span><span class="sxs-lookup"><span data-stu-id="fa64f-130">Continuously active connections to SQL Database require reauthorization (performed by the database engine) at least every 10 hours.</span></span> <span data-ttu-id="fa64f-131">Databázový stroj se pokusí při opakované autorizaci použít původně zadané heslo, aby nebyl nutný zásah uživatele.</span><span class="sxs-lookup"><span data-stu-id="fa64f-131">The database engine attempts reauthorization using the originally submitted password and no user input is required.</span></span> <span data-ttu-id="fa64f-132">Při resetování hesla ve službě SQL Database se kvůli zachování výkonu připojení znovu neověřuje, i když je důvodem resetování sdružování připojení.</span><span class="sxs-lookup"><span data-stu-id="fa64f-132">For performance reasons, when a password is reset in SQL Database, the connection is not be reauthenticated, even if the connection is reset due to connection pooling.</span></span> <span data-ttu-id="fa64f-133">Toto chování se liší od místního SQL Serveru.</span><span class="sxs-lookup"><span data-stu-id="fa64f-133">This is different from the behavior of on-premises SQL Server.</span></span> <span data-ttu-id="fa64f-134">Pokud se heslo od původního ověření připojení změnilo, musí se připojení ukončit a vytvořit nové připojení pomocí nového hesla.</span><span class="sxs-lookup"><span data-stu-id="fa64f-134">If the password has been changed since the connection was initially authorized, the connection must be terminated and a new connection made using the new password.</span></span> <span data-ttu-id="fa64f-135">Uživatel s oprávněním `KILL DATABASE CONNECTION` může připojení ke službě SQL Database výslovně ukončit příkazem [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fa64f-135">A user with the `KILL DATABASE CONNECTION` permission can explicitly terminate a connection to SQL Database by using the [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="fa64f-136">Uživatelské účty je možné vytvořit v hlavní databázi a udělit jim oprávnění ve všech databázích na serveru, nebo je lze vytvořit v samotné databázi (takové účty se nazývají uživatelé s omezením).</span><span class="sxs-lookup"><span data-stu-id="fa64f-136">User accounts can be created in the master database and can be granted permissions in all databases on the server, or they can be created in the database itself (called contained users).</span></span> <span data-ttu-id="fa64f-137">Informace o vytváření a správě přihlašování najdete v tématu [Správa přihlašování](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-137">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="fa64f-138">Pokud chcete zlepšit přenositelnost a škálovatelnost, používejte uživatele databáze s omezením.</span><span class="sxs-lookup"><span data-stu-id="fa64f-138">To enhance portability and scalabilty, use contained database users to enhance scalability.</span></span> <span data-ttu-id="fa64f-139">Další informace o uživatelích s omezením najdete v tématech [Uživatelé databáze s omezením – vytvoření přenosné databáze](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql) a [Databáze s omezením](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="fa64f-139">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="fa64f-140">Doporučený postup je, aby aplikace k ověření používala vyhrazený účet – omezíte tak počet oprávnění udělených aplikaci a snížíte riziko škodlivých aktivit v případě ohrožení kódu aplikace útoky v podobě injektáže SQL.</span><span class="sxs-lookup"><span data-stu-id="fa64f-140">As a best practice your application should use a dedicated account to authenticate -- this way you can limit the permissions granted to the application and reduce the risks of malicious activity in case your application code is vulnerable to a SQL injection attack.</span></span> <span data-ttu-id="fa64f-141">Doporučený postup je vytvořit [uživatele databáze s omezením](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), který umožňuje ověřit aplikaci přímo v databázi.</span><span class="sxs-lookup"><span data-stu-id="fa64f-141">The recommended approach is to create a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app to authenticate directly to the database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="fa64f-142">Autorizace</span><span class="sxs-lookup"><span data-stu-id="fa64f-142">Authorization</span></span>

<span data-ttu-id="fa64f-143">Autorizace určuje, co může uživatel provádět ve službě Azure SQL Database. Tyto možnosti jsou dané [členstvím v databázových rolích](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) a [oprávněními k databázi na úrovni objektů](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine) vašeho účtu.</span><span class="sxs-lookup"><span data-stu-id="fa64f-143">Authorization refers to what a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="fa64f-144">Doporučený postup je udělit uživatelům co nejmenší možná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="fa64f-144">As a best practice, you should grant users the least privileges necessary.</span></span> <span data-ttu-id="fa64f-145">Účet správce serveru, který používáte k připojení, je členem skupiny db_owner. Tato skupina může s databází provádět všechny operace.</span><span class="sxs-lookup"><span data-stu-id="fa64f-145">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span></span> <span data-ttu-id="fa64f-146">Tento účet uložte kvůli nasazení upgradovaných schémat a dalším možnostem správy.</span><span class="sxs-lookup"><span data-stu-id="fa64f-146">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="fa64f-147">Použijte účet „ApplicationUser“, který má omezenější oprávnění a umožňuje připojit se z aplikace k databázi s nejnižšími oprávněními, jaké aplikace potřebuje.</span><span class="sxs-lookup"><span data-stu-id="fa64f-147">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span></span> <span data-ttu-id="fa64f-148">Další informace najdete v tématu [Správa přihlašování](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-148">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="fa64f-149">K databázi `master` většinou potřebují mít přístup jenom správci.</span><span class="sxs-lookup"><span data-stu-id="fa64f-149">Typically, only administrators need access to the `master` database.</span></span> <span data-ttu-id="fa64f-150">Pro rutinní přístup ke každé uživatelské databázi můžete použít databázové uživatele s omezením, kteří nejsou správci, ale jsou v každé databázi vytvoření.</span><span class="sxs-lookup"><span data-stu-id="fa64f-150">Routine access to each user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="fa64f-151">Když použijete tyto databázové uživatele s omezením, nepotřebujete v databázi `master` vytvářet přihlášení.</span><span class="sxs-lookup"><span data-stu-id="fa64f-151">When you use contained database users, you do not need to create logins in the `master` database.</span></span> <span data-ttu-id="fa64f-152">Další informace najdete v tématu [Uživatelé databáze s omezením – zajištění přenositelnosti databáze](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="fa64f-152">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="fa64f-153">Měli byste se seznámit s následujícími funkcemi, které jde použít k omezení nebo zvýšení oprávnění:</span><span class="sxs-lookup"><span data-stu-id="fa64f-153">You should familiarize yourself with the following features that can be used to limit or elevate permissions:</span></span>   
* <span data-ttu-id="fa64f-154">K dočasnému bezpečnému zvýšení oprávnění můžete použít [zosobnění](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) a [přihlašování k modulům](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server).</span><span class="sxs-lookup"><span data-stu-id="fa64f-154">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used to securely elevate permissions temporarily.</span></span>
* <span data-ttu-id="fa64f-155">K omezení řádků, ke kterým má uživatel přístup, můžete použít [zabezpečení na úrovni řádku](https://docs.microsoft.com/sql/relational-databases/security/row-level-security).</span><span class="sxs-lookup"><span data-stu-id="fa64f-155">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="fa64f-156">K omezení rizika ohrožení citlivých dat můžete použít [maskování dat](sql-database-dynamic-data-masking-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-156">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used to limit exposure of sensitive data.</span></span>
* <span data-ttu-id="fa64f-157">K omezení akcí, které je možné s databází provádět, můžete použít [uložené procedury](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine).</span><span class="sxs-lookup"><span data-stu-id="fa64f-157">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used to limit the actions that can be taken on the database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fa64f-158">Další kroky</span><span class="sxs-lookup"><span data-stu-id="fa64f-158">Next steps</span></span>

- <span data-ttu-id="fa64f-159">Přehled funkcí zabezpečení služby SQL Database najdete v [přehledu zabezpečení SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-159">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="fa64f-160">Další informace o pravidlech brány firewall najdete v tématu [pravidla brány Firewall](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-160">To learn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="fa64f-161">Informace o uživateli a přihlašování najdete v tématu [Správa přihlašování](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-161">To learn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="fa64f-162">Informace Proaktivní monitorování, naleznete v [auditování databáze](sql-database-auditing.md) a [detekce hrozeb databáze SQL](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-162">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="fa64f-163">Podívejte se kurz [zabezpečení vaší databázi SQL Azure](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="fa64f-163">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>
