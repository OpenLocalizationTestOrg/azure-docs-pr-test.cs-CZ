---
title: "schéma databáze SQL Azure aaaManage v víceklientské aplikace | Microsoft Docs"
description: "Správa schématu pro více tenantů v aplikaci s více tenanty využívající službu Azure SQL Database"
keywords: kurz k sql database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="72aba-104">Správa schématu pro více klientů v hello Wingtip SaaS aplikace</span><span class="sxs-lookup"><span data-stu-id="72aba-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="72aba-105">Hello [první kurz Wingtip SaaS](sql-database-saas-tutorial.md) ukazuje, jak zřídit databázi klienta a zaregistrujte ho v katalogu hello aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="72aba-106">Podobně jako všechny aplikace hello Wingtip SaaS aplikace bude momentální v čase a v některých případech bude vyžadovat změny toohello databáze.</span><span class="sxs-lookup"><span data-stu-id="72aba-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="72aba-107">Změny mohou zahrnovat nové nebo změněné schéma, nové nebo změněné referenčních dat a běžných databáze údržby úlohy tooensure optimální výkon.</span><span class="sxs-lookup"><span data-stu-id="72aba-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="72aba-108">S aplikací SaaS třeba tyto změny toobe nasazený koordinovaným způsobem na potenciálně masivní firemního vozového klienta databází.</span><span class="sxs-lookup"><span data-stu-id="72aba-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="72aba-109">Pro tyto změny toobe v budoucnosti klienta databáze, potřebují toobe součástí hello procesu zřizování.</span><span class="sxs-lookup"><span data-stu-id="72aba-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="72aba-110">Jsou zde popsány v tomto kurzu dva scénáře - nasazení aktualizací referenční data pro všechny klienty, a retuning indexu na hello tabulky obsahující hello referenční data.</span><span class="sxs-lookup"><span data-stu-id="72aba-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="72aba-111">Hello [elastické úlohy](sql-database-elastic-jobs-overview.md) funkce je použité tooexecute těchto operací ve všech klientů a hello *zlaté* klienta databáze, která se používá jako šablonu pro nové databáze.</span><span class="sxs-lookup"><span data-stu-id="72aba-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="72aba-112">V tomto kurzu se naučíte:</span><span class="sxs-lookup"><span data-stu-id="72aba-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="72aba-113">Vytvoření účtu úlohy</span><span class="sxs-lookup"><span data-stu-id="72aba-113">Create a job account</span></span>
> * <span data-ttu-id="72aba-114">Dotazování mezi několik klientů</span><span class="sxs-lookup"><span data-stu-id="72aba-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="72aba-115">Aktualizovat data ve všech databázích tenantů</span><span class="sxs-lookup"><span data-stu-id="72aba-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="72aba-116">Vytvořit index tabulky ve všech databázích tenantů</span><span class="sxs-lookup"><span data-stu-id="72aba-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="72aba-117">toocomplete splnění tohoto kurzu, ujistěte se, hello následující požadavky:</span><span class="sxs-lookup"><span data-stu-id="72aba-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="72aba-118">Hello Wingtip SaaS aplikace je nasazená.</span><span class="sxs-lookup"><span data-stu-id="72aba-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="72aba-119">toodeploy za méně než pět minut, najdete v části [nasazení a seznamte se s hello Wingtip SaaS aplikace](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="72aba-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="72aba-120">Je nainstalované prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="72aba-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="72aba-121">Podrobnosti najdete v článku [Začínáme s prostředím Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="72aba-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="72aba-122">je nainstalovaná nejnovější verze Hello systému SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="72aba-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="72aba-123">Stažení a instalace SSMS</span><span class="sxs-lookup"><span data-stu-id="72aba-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="72aba-124">*Tento kurz používá funkce hello služby databáze SQL, které jsou v omezené preview (úlohy elastické databáze). Pokud chcete v tomto kurzu toodo, zadejte svoje id předplatného tooSaaSFeedback@microsoft.com s předmětem = elastické úlohy Preview. Po přijetí potvrzení, že je povoleno vašeho předplatného, [stáhnout a nainstalovat nejnovější rutiny předběžné verze úlohy hello](https://github.com/jaredmoo/azure-powershell/releases). Tato předběžná verze je omezená, takže obraťte se na SaaSFeedback@microsoft.com pro dotazy související s ani nepodporuje.*</span><span class="sxs-lookup"><span data-stu-id="72aba-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="72aba-125">Úvod tooSaaS vzory Správa schématu</span><span class="sxs-lookup"><span data-stu-id="72aba-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="72aba-126">Hello jednoho klienta na databázi SaaS vzor výhody v mnoha směrech z izolace hello data, která způsobí, že, ale v hello současně zavádí další složitosti hello údržbu a správu velkého počtu databází.</span><span class="sxs-lookup"><span data-stu-id="72aba-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="72aba-127">[Elastické úlohy](sql-database-elastic-jobs-overview.md) usnadňuje administraci a správu hello SQL datové vrstvy.</span><span class="sxs-lookup"><span data-stu-id="72aba-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="72aba-128">Úlohy umožňují toosecurely a spolehlivě, spouštět úlohy (skriptů T-SQL) nezávislé na vstupu, nebo interakci uživatelů pro skupinu databází.</span><span class="sxs-lookup"><span data-stu-id="72aba-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="72aba-129">Tato metoda může být použité toodeploy schéma a běžných změn referenčních dat napříč všechny klienty v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="72aba-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="72aba-130">Elastické úlohy lze také použít toomaintain *zlaté* kopii databáze hello používá toocreate nové klienty, zajištění vždy obsahuje nejnovější schématu a referenčních dat hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![obrazovka](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="72aba-132">Elastic Jobs verze Limited Preview</span><span class="sxs-lookup"><span data-stu-id="72aba-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="72aba-133">K dispozici je nová verze služby Elastic Jobs. Jde o integrovanou funkci Azure SQL Database, která nevyžaduje další služby ani součásti.</span><span class="sxs-lookup"><span data-stu-id="72aba-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="72aba-134">Tato nová verze služby Elastic Jobs je v současnosti ve verzi Limited Preview.</span><span class="sxs-lookup"><span data-stu-id="72aba-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="72aba-135">Tato omezená preview aktuálně podporuje účty úlohy toocreate prostředí PowerShell a toocreate T-SQL a spravovat úlohy.</span><span class="sxs-lookup"><span data-stu-id="72aba-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="72aba-136">*Tento kurz používá funkce hello služby databáze SQL, které jsou v omezené preview (úlohy elastické databáze). Pokud chcete v tomto kurzu toodo, zadejte svoje id předplatného tooSaaSFeedback@microsoft.com s předmětem = elastické úlohy Preview. Po přijetí potvrzení, že je povoleno vašeho předplatného, [stáhnout a nainstalovat nejnovější rutiny předběžné verze úlohy hello](https://github.com/jaredmoo/azure-powershell/releases). Tato předběžná verze je omezená, takže obraťte se na SaaSFeedback@microsoft.com pro dotazy související s ani nepodporuje.*</span><span class="sxs-lookup"><span data-stu-id="72aba-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="72aba-137">Získat hello Wingtip aplikační skripty</span><span class="sxs-lookup"><span data-stu-id="72aba-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="72aba-138">Hello Wingtip SaaS skripty a zdrojový kód aplikace jsou k dispozici v hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) úložiště github.</span><span class="sxs-lookup"><span data-stu-id="72aba-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="72aba-139">[Kroky toodownload hello Wingtip SaaS skripty](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="72aba-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="72aba-140">Vytvoření databáze účtu úlohy a nového účtu úlohy</span><span class="sxs-lookup"><span data-stu-id="72aba-140">Create a job account database and new job account</span></span>

<span data-ttu-id="72aba-141">Tento kurz vyžaduje, že abyste použili prostředí PowerShell toocreate hello úlohy databáze a úlohy účtu.</span><span class="sxs-lookup"><span data-stu-id="72aba-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="72aba-142">Jako databázi MSDB a agenta serveru SQL databáze elastické úlohy používá Azure SQL toostore definice úlohy, stav úlohy a historie.</span><span class="sxs-lookup"><span data-stu-id="72aba-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="72aba-143">Po vytvoření účtu hello úlohy můžete vytvořit a monitorujte úlohy, okamžitě.</span><span class="sxs-lookup"><span data-stu-id="72aba-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="72aba-144">Otevřete... \\Learning moduly\\Správa schématu\\*ukázku SchemaManagement.ps1* v hello **prostředí PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="72aba-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="72aba-145">Stiskněte klávesu **F5** toorun hello skriptu.</span><span class="sxs-lookup"><span data-stu-id="72aba-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="72aba-146">Hello *ukázku SchemaManagement.ps1* hello volání skriptu *nasadit SchemaManagement.ps1* skriptu toocreate *S2* databáze s názvem **jobaccount** na server hello katalogu.</span><span class="sxs-lookup"><span data-stu-id="72aba-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="72aba-147">Pak vytvoří účet hello úlohy, předávání hello jobaccount databáze jako parametr toohello úlohy účet vytvoření volání.</span><span class="sxs-lookup"><span data-stu-id="72aba-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="72aba-148">Vytvořit úlohu toodeploy nový odkaz datové tooall klientů</span><span class="sxs-lookup"><span data-stu-id="72aba-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="72aba-149">Každá databáze klienta zahrnuje sadu místo typů, které definují hello druh události, které jsou hostované na místo.</span><span class="sxs-lookup"><span data-stu-id="72aba-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="72aba-150">V tomto cvičení nasadit aktualizaci tooall hello klienta databází tooadd dva další místo typy: *Motorky Racing* a *křížovou kartou plaveckých*.</span><span class="sxs-lookup"><span data-stu-id="72aba-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="72aba-151">Tyto typy místo odpovídají toohello obrázek pozadí, které se zobrazí v aplikaci události hello klienta.</span><span class="sxs-lookup"><span data-stu-id="72aba-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="72aba-152">Klikněte na tlačítko hello místo typu rozevírací nabídky a ověření, že jsou k dispozici jenom 10 možnosti Typ místo a konkrétně tento Motorky Racing a 'plaveckých křížovou kartou, nejsou zahrnuty v seznamu hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="72aba-153">Nyní vytvoříme úlohy tooupdate hello *VenueTypes* tabulky v všechny databáze hello klienta a přidat nové typy místo hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="72aba-154">toocreate novou úlohu používáme sadu úloh, které systém uložené procedury v hello jobaccount databázi vytvořena, když byl vytvořen účet projektu hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="72aba-155">Otevřete aplikaci SSMS a připojit server katalogu toohello: katalogu -\<uživatele\>. database.windows.net serveru</span><span class="sxs-lookup"><span data-stu-id="72aba-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="72aba-156">Také připojit server klienta toohello: tenants1 -\<uživatele\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="72aba-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="72aba-157">Procházet toohello *contosoconcerthall* databáze na hello *tenants1* serveru a dotaz hello *VenueTypes* tooconfirm tabulky, *Motorky Racing*  a *křížovou kartou plaveckých* **nejsou** v seznamu výsledků hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="72aba-158">Otevřete hello souboru... \\Učení moduly\\Správa schématu\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="72aba-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="72aba-159">Upravit příkaz hello: nastavte @wtpUser = &lt;uživatele&gt; a nahraďte hodnotu uživatele hello použít při nasazení aplikace Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="72aba-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="72aba-160">Ujistěte se, jsou připojené toohello jobaccount databáze a stiskněte klávesu **F5** pro spuštění skriptu hello</span><span class="sxs-lookup"><span data-stu-id="72aba-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="72aba-161">**SP\_přidat\_cíl\_skupiny** vytvoří hello cílová skupina DemoServerGroup, nyní potřebujeme tooadd cíl členy.</span><span class="sxs-lookup"><span data-stu-id="72aba-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="72aba-162">**SP\_přidat\_cíl\_skupiny\_člen** přidá *server* cíle typ člena, které považuje za všechny databáze v rámci tohoto serveru (Poznámka: Toto je hello tenants1-&lt; Uživatel&gt; server obsahující databáze klienta hello) v době úlohy spuštění by měl být součástí hello úlohy, je přidání druhý hello *databáze* cílové typ člena, konkrétně hello ("zlatá" databáze basetenantdb), se nachází v katalogu -&lt;uživatele&gt; serveru a nakonec jiné *databáze* cílové skupiny člena typu tooinclude hello adhocanalytics databázi, která se používá novější kurzu.</span><span class="sxs-lookup"><span data-stu-id="72aba-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="72aba-163">**sp\_add\_job** vytvoří úlohu s názvem „Reference Data Deployment“.</span><span class="sxs-lookup"><span data-stu-id="72aba-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="72aba-164">**SP\_přidat\_krok úlohy** vytvoří obsahující T-SQL příkazu text tooupdate hello referenční tabulku, VenueTypes krok úlohy hello</span><span class="sxs-lookup"><span data-stu-id="72aba-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="72aba-165">Zbývající zobrazení Hello ve skriptu hello zobrazení hello existenci hello objekty a provádění úlohy monitorování.</span><span class="sxs-lookup"><span data-stu-id="72aba-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="72aba-166">Tyto dotazy tooreview hello stav hodnotu použít v hello **životního cyklu** sloupec toodetermine při hello úloha úspěšně dokončí na všechny databáze klienta a hello dva další databáze, které obsahují hello referenční tabulku.</span><span class="sxs-lookup"><span data-stu-id="72aba-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="72aba-167">V aplikaci SSMS, procházet toohello *contosoconcerthall* databáze na hello *tenants1* serveru a dotaz hello *VenueTypes* tooconfirm tabulky, *Motorky Racing* a *křížovou kartou plaveckých* **jsou** nyní v seznamu výsledků hello.</span><span class="sxs-lookup"><span data-stu-id="72aba-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="72aba-168">Vytvořte index úlohy toomanage hello Referenční tabulka</span><span class="sxs-lookup"><span data-stu-id="72aba-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="72aba-169">Podobné toohello předchozím cvičení, tento postup vytvoří indexem úlohy toorebuild hello na primární klíč tabulky hello odkaz, operace správy typické databáze Správce může provádět po zatížení velkých objemů dat do tabulky.</span><span class="sxs-lookup"><span data-stu-id="72aba-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="72aba-170">Vytvoření úlohy pomocí hello stejné úlohy "systém" uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="72aba-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="72aba-171">Otevřete aplikaci SSMS a připojte toohello katalogu -&lt;uživatele&gt;. database.windows.net serveru</span><span class="sxs-lookup"><span data-stu-id="72aba-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="72aba-172">Otevřete hello souboru... \\Učení moduly\\Správa schématu\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="72aba-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="72aba-173">Klikněte pravým tlačítkem, vyberte připojení a připojení toohello katalogu -&lt;uživatele&gt;. database.windows.net serveru, pokud ještě není připojen.</span><span class="sxs-lookup"><span data-stu-id="72aba-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="72aba-174">Zkontrolujte, jestli jsou připojené toohello jobaccount databáze a stiskněte klávesu F5 toorun hello skriptu</span><span class="sxs-lookup"><span data-stu-id="72aba-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="72aba-175">sp\_add\_job vytvoří novou úlohu s názvem „Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885“.</span><span class="sxs-lookup"><span data-stu-id="72aba-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="72aba-176">SP\_přidat\_krok úlohy vytvoří krok úlohy hello obsahující T-SQL příkazu text tooupdate hello indexu</span><span class="sxs-lookup"><span data-stu-id="72aba-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="72aba-177">Další kroky</span><span class="sxs-lookup"><span data-stu-id="72aba-177">Next steps</span></span>

<span data-ttu-id="72aba-178">V tomto kurzu jste se naučili:</span><span class="sxs-lookup"><span data-stu-id="72aba-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="72aba-179">Vytvořit účet tooquery úlohy v rámci více klientů</span><span class="sxs-lookup"><span data-stu-id="72aba-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="72aba-180">Aktualizovat data ve všech databázích tenantů</span><span class="sxs-lookup"><span data-stu-id="72aba-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="72aba-181">Vytvořit index tabulky ve všech databázích tenantů</span><span class="sxs-lookup"><span data-stu-id="72aba-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="72aba-182">Kurz náhodné analýzy</span><span class="sxs-lookup"><span data-stu-id="72aba-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="72aba-183">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="72aba-183">Additional resources</span></span>

* [<span data-ttu-id="72aba-184">Další kurzy, které stavějí hello nasazení Wingtip SaaS aplikace</span><span class="sxs-lookup"><span data-stu-id="72aba-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="72aba-185">Správa cloudových databází s horizontálním navýšením kapacity</span><span class="sxs-lookup"><span data-stu-id="72aba-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="72aba-186">Vytvoření a správa databází s horizontálním navýšením kapacity</span><span class="sxs-lookup"><span data-stu-id="72aba-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
