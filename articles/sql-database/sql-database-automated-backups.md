---
title: "Azure SQL Database automatické geograficky redundantní zálohy | Microsoft Docs"
description: "SQL Database automaticky vytvoří zálohu místní databáze každých několik minut a používá Azure geograficky redundantní úložiště s přístupem pro čtení pro geografická redundance."
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: 3ee3d49d-16fa-47cf-a3ab-7b22aa491a8d
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/05/2017
ms.author: carlrab
ms.openlocfilehash: 88ee5b5c4a57b67190f3da2ebc8aed0964b804d5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="learn-about-automatic-sql-database-backups"></a><span data-ttu-id="38478-103">Další informace o automatické zálohování databáze SQL</span><span class="sxs-lookup"><span data-stu-id="38478-103">Learn about automatic SQL Database backups</span></span>

<span data-ttu-id="38478-104">SQL Database automaticky vytvoří zálohy databáze a k poskytování geografická redundance používá Azure přístup pro čtení geograficky redundantní úložiště (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="38478-104">SQL Database automatically creates database backups and uses Azure read-access geo-redundant storage (RA-GRS) to provide geo-redundancy.</span></span> <span data-ttu-id="38478-105">Tyto zálohy se vytvoří automaticky a bez dalších poplatků.</span><span class="sxs-lookup"><span data-stu-id="38478-105">These backups are created automatically and at no additional charge.</span></span> <span data-ttu-id="38478-106">Nemusíte dělat nic, aby byly dojít.</span><span class="sxs-lookup"><span data-stu-id="38478-106">You don't need to do anything to make them happen.</span></span> <span data-ttu-id="38478-107">Zálohování databáze jsou nedílnou součást vámi vyžádaných jakékoli obchodní strategie pro obnovení kontinuity a po havárii, protože se data chránit před náhodnou poškození nebo odstranění.</span><span class="sxs-lookup"><span data-stu-id="38478-107">Database backups are an essential part of any business continuity and disaster recovery strategy because they protect your data from accidental corruption or deletion.</span></span> <span data-ttu-id="38478-108">Pokud chcete zachovat zálohy v vlastní kontejner úložiště budete konfigurovat zásadu dlouhodobé uchovávání záloh.</span><span class="sxs-lookup"><span data-stu-id="38478-108">If you want to keep backups in your own storage container you can configure a long-term backup retention policy.</span></span> <span data-ttu-id="38478-109">Další informace najdete v tématu [Dlouhodobé uchovávání](sql-database-long-term-retention.md).</span><span class="sxs-lookup"><span data-stu-id="38478-109">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

## <a name="what-is-a-sql-database-backup"></a><span data-ttu-id="38478-110">Co je zálohování SQL Database?</span><span class="sxs-lookup"><span data-stu-id="38478-110">What is a SQL Database backup?</span></span>

<span data-ttu-id="38478-111">SQL Database využívá technologii SQL Server k vytvoření [úplné](https://msdn.microsoft.com/library/ms186289.aspx), [rozdílové](https://msdn.microsoft.com/library/ms175526.aspx), a [transakčního protokolu](https://msdn.microsoft.com/library/ms191429.aspx) zálohy.</span><span class="sxs-lookup"><span data-stu-id="38478-111">SQL Database uses SQL Server technology to create [full](https://msdn.microsoft.com/library/ms186289.aspx), [differential](https://msdn.microsoft.com/library/ms175526.aspx), and [transaction log](https://msdn.microsoft.com/library/ms191429.aspx) backups.</span></span> <span data-ttu-id="38478-112">Zálohování transakčního protokolu obecně dojít každých 5 až 10 minut, s četností na základě úroveň výkonu a množství databázové aktivitě.</span><span class="sxs-lookup"><span data-stu-id="38478-112">The transaction log backups generally happen every 5 - 10 minutes, with the frequency based on the performance level and amount of database activity.</span></span> <span data-ttu-id="38478-113">Zálohování transakčního protokolu v případě zálohování úplné a rozdílové umožňují obnovení databáze do konkrétní v daném okamžiku na stejný server, který je hostitelem databáze.</span><span class="sxs-lookup"><span data-stu-id="38478-113">Transaction log backups, with full and differential backups, allow you to restore a database to a specific point-in-time to the same server that hosts the database.</span></span> <span data-ttu-id="38478-114">Při obnovování databáze, na které úplné rozdíl a transakce protokolu zálohování je nutné obnovit hodnoty službu.</span><span class="sxs-lookup"><span data-stu-id="38478-114">When you restore a database, the service figures out which full, differential, and transaction log backups need to be restored.</span></span>


<span data-ttu-id="38478-115">Můžete použít tyto zálohy na:</span><span class="sxs-lookup"><span data-stu-id="38478-115">You can use these backups to:</span></span>

* <span data-ttu-id="38478-116">Obnovení databáze do v daném okamžiku v rámci dobu uchování.</span><span class="sxs-lookup"><span data-stu-id="38478-116">Restore a database to a point-in-time within the retention period.</span></span> <span data-ttu-id="38478-117">Tato operace vytvoří novou databázi ve stejném serveru jako původní databázi.</span><span class="sxs-lookup"><span data-stu-id="38478-117">This operation will create a new database in the same server as the original database.</span></span>
* <span data-ttu-id="38478-118">Obnovte odstraněnou databázi na čas, kdy byla odstraněna nebo kdykoli v rámci dobu uchování.</span><span class="sxs-lookup"><span data-stu-id="38478-118">Restore a deleted database to the time it was deleted or any time within the retention period.</span></span> <span data-ttu-id="38478-119">Odstraněné databáze lze obnovit pouze na stejném serveru, kde byl vytvořen původní databázi.</span><span class="sxs-lookup"><span data-stu-id="38478-119">The deleted database can only be restored in the same server where the original database was created.</span></span>
* <span data-ttu-id="38478-120">Obnovení databáze do jiné zeměpisné oblasti.</span><span class="sxs-lookup"><span data-stu-id="38478-120">Restore a database to another geographical region.</span></span> <span data-ttu-id="38478-121">Umožňuje provést obnovení po havárii geografické, když nelze získat přístup k serveru a databáze.</span><span class="sxs-lookup"><span data-stu-id="38478-121">This allows you to recover from a geographic disaster when you cannot access your server and database.</span></span> <span data-ttu-id="38478-122">Vytvoří novou databázi v jakékoli existující server kdekoli v celém světě.</span><span class="sxs-lookup"><span data-stu-id="38478-122">It creates a new database in any existing server anywhere in the world.</span></span> 
* <span data-ttu-id="38478-123">Obnovte databázi ze zálohy konkrétní uložené v trezoru služeb zotavení Azure.</span><span class="sxs-lookup"><span data-stu-id="38478-123">Restore a database from a specific backup stored in your Azure Recovery Services vault.</span></span> <span data-ttu-id="38478-124">Tímto způsobem lze obnovit původní verzi databáze vyhovovaly žádosti o dodržování předpisů nebo spuštění starší verzi aplikace.</span><span class="sxs-lookup"><span data-stu-id="38478-124">This allows you to restore an old version of the database to satisfy a compliance request or to run an old version of the application.</span></span> <span data-ttu-id="38478-125">V tématu [dlouhodobé uchovávání](sql-database-long-term-retention.md).</span><span class="sxs-lookup"><span data-stu-id="38478-125">See [Long-term retention](sql-database-long-term-retention.md).</span></span>
* <span data-ttu-id="38478-126">Chcete-li provést obnovení, přečtěte si téma [obnovit databázi ze zálohy](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="38478-126">To perform a restore, see [restore database from backups](sql-database-recovery-using-backups.md).</span></span>

> [!NOTE]
> <span data-ttu-id="38478-127">V úložišti Azure termín *replikace* odkazuje na kopírování souborů z jednoho umístění do druhého.</span><span class="sxs-lookup"><span data-stu-id="38478-127">In Azure storage, the term *replication* refers to copying files from one location to another.</span></span> <span data-ttu-id="38478-128">SQL *replikace databáze* odkazuje na zadáte-li více sekundárních databází synchronizovány s primární databáze.</span><span class="sxs-lookup"><span data-stu-id="38478-128">SQL's *database replication* refers to keeping to multiple secondary databases synchronized with a primary database.</span></span> 
> 

## <a name="how-much-backup-storage-is-included-at-no-cost"></a><span data-ttu-id="38478-129">Kolik úložiště zálohy je zahrnuté zdarma?</span><span class="sxs-lookup"><span data-stu-id="38478-129">How much backup storage is included at no cost?</span></span>
<span data-ttu-id="38478-130">Databáze SQL poskytuje až 200 % maximální zřízené databáze úložiště jako úložiště pro zálohu bez dalších poplatků.</span><span class="sxs-lookup"><span data-stu-id="38478-130">SQL Database provides up to 200% of your maximum provisioned database storage as backup storage at no additional cost.</span></span> <span data-ttu-id="38478-131">Například pokud máte standardní DB instance s zřízené DB velikosti 250 GB, máte 500 GB úložiště zálohování bez dalších poplatků.</span><span class="sxs-lookup"><span data-stu-id="38478-131">For example, if you have a Standard DB instance with a provisioned DB size of 250 GB, you have 500 GB of backup storage at no additional charge.</span></span> <span data-ttu-id="38478-132">Pokud vaše databáze překročí zadané úložiště záloh, můžete zkrátit dobu uchování, že se obrátíte na podporu Azure.</span><span class="sxs-lookup"><span data-stu-id="38478-132">If your database exceeds the provided backup storage, you can choose to reduce the retention period by contacting Azure Support.</span></span> <span data-ttu-id="38478-133">Další možností je platit za velmi zálohování úložiště, které se fakturuje standardní sazbou přístup pro čtení geograficky redundantní úložiště (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="38478-133">Another option is to pay for extra backup storage that is billed at the standard Read-Access Geographically Redundant Storage (RA-GRS) rate.</span></span> 

## <a name="how-often-do-backups-happen"></a><span data-ttu-id="38478-134">Jak často zálohám?</span><span class="sxs-lookup"><span data-stu-id="38478-134">How often do backups happen?</span></span>
<span data-ttu-id="38478-135">Úplná databáze zálohám týdně, rozdílové databáze obvykle zálohám každých několik hodin a transakčního protokolu, které se obecně zálohám každých 5 až 10 minut.</span><span class="sxs-lookup"><span data-stu-id="38478-135">Full database backups happen weekly, differential database backups generally happen every few hours, and transaction log backups generally happen every 5 - 10 minutes.</span></span> <span data-ttu-id="38478-136">První úplné zálohování je naplánováno ihned po vytvoření databáze.</span><span class="sxs-lookup"><span data-stu-id="38478-136">The first full backup is scheduled immediately after a database is created.</span></span> <span data-ttu-id="38478-137">Obvykle dokončení do 30 minut, ale může trvat déle, pokud je databáze značné velikosti.</span><span class="sxs-lookup"><span data-stu-id="38478-137">It usually completes within 30 minutes, but it can take longer when the database is of a significant size.</span></span> <span data-ttu-id="38478-138">Například prvotní zálohování může trvat déle na obnovené databáze nebo kopii databáze.</span><span class="sxs-lookup"><span data-stu-id="38478-138">For example, the initial backup can take longer on a restored database or a database copy.</span></span> <span data-ttu-id="38478-139">Po první úplné zálohování jsou všechny další zálohy naplánované automaticky a bezobslužně spravovat na pozadí.</span><span class="sxs-lookup"><span data-stu-id="38478-139">After the first full backup, all further backups are scheduled automatically and managed silently in the background.</span></span> <span data-ttu-id="38478-140">Služba SQL Database je určena přesné načasování všechny zálohy databáze při vyvažování celkové zatížení systému.</span><span class="sxs-lookup"><span data-stu-id="38478-140">The exact timing of all database backups is determined by the SQL Database service as it balances the overall system workload.</span></span> 

<span data-ttu-id="38478-141">Geografická replikace úložiště záloh dochází na základě plánu replikace Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="38478-141">The backup storage geo-replication occurs based on the Azure Storage replication schedule.</span></span>

## <a name="how-long-do-you-keep-my-backups"></a><span data-ttu-id="38478-142">Jak dlouho necháte Moje zálohování?</span><span class="sxs-lookup"><span data-stu-id="38478-142">How long do you keep my backups?</span></span>
<span data-ttu-id="38478-143">Doba uchování, která je založená na má každá záloha databáze SQL [vrstvy služeb](sql-database-service-tiers.md) databáze.</span><span class="sxs-lookup"><span data-stu-id="38478-143">Each SQL Database backup has a retention period that is based on the [service-tier](sql-database-service-tiers.md) of the database.</span></span> <span data-ttu-id="38478-144">Doba uchování pro databázi v:</span><span class="sxs-lookup"><span data-stu-id="38478-144">The retention period for a database in the:</span></span>


* <span data-ttu-id="38478-145">Úroveň služby na úrovni Basic je 7 dní.</span><span class="sxs-lookup"><span data-stu-id="38478-145">Basic service tier is 7 days.</span></span>
* <span data-ttu-id="38478-146">Úroveň služby na úrovni Standard je 35 dní.</span><span class="sxs-lookup"><span data-stu-id="38478-146">Standard service tier is 35 days.</span></span>
* <span data-ttu-id="38478-147">Úroveň služeb Premium je 35 dnů.</span><span class="sxs-lookup"><span data-stu-id="38478-147">Premium service tier is 35 days.</span></span>

<span data-ttu-id="38478-148">Pokud jste starší verzi databáze z úrovně služeb Standard nebo Premium na edici Basic, zálohování se uloží sedm dní.</span><span class="sxs-lookup"><span data-stu-id="38478-148">If you downgrade your database from the Standard or Premium service tiers to Basic, the backups are saved for seven days.</span></span> <span data-ttu-id="38478-149">Již nejsou k dispozici všechny stávající zálohy, které jsou starší než 7 dní.</span><span class="sxs-lookup"><span data-stu-id="38478-149">All existing backups older than seven days are no longer available.</span></span> 

<span data-ttu-id="38478-150">Pokud provádíte upgrade databáze z vrstvy služby na úrovni Basic na Standard nebo Premium, SQL Database udržuje existující zálohy, dokud nedojde k jejich 35 dní starý.</span><span class="sxs-lookup"><span data-stu-id="38478-150">If you upgrade your database from the Basic service tier to Standard or Premium, SQL Database keeps existing backups until they are 35 days old.</span></span> <span data-ttu-id="38478-151">Když k nim dojde 35 dní udržuje nových záloh.</span><span class="sxs-lookup"><span data-stu-id="38478-151">It keeps new backups as they occur for 35 days.</span></span>

<span data-ttu-id="38478-152">Pokud odstraníte databázi, SQL Database udržuje zálohování stejným způsobem, který by tomu bylo v databázi online.</span><span class="sxs-lookup"><span data-stu-id="38478-152">If you delete a database, SQL Database keeps the backups in the same way it would for an online database.</span></span> <span data-ttu-id="38478-153">Předpokládejme například, že odstraníte databáze Basic, který má dobu uchování o délce sedm dní.</span><span class="sxs-lookup"><span data-stu-id="38478-153">For example, suppose you delete a Basic database that has a retention period of seven days.</span></span> <span data-ttu-id="38478-154">Zálohy, která je čtyři dny je uložit pro další tři dny.</span><span class="sxs-lookup"><span data-stu-id="38478-154">A backup that is four days old is saved for three more days.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="38478-155">Pokud odstraníte serveru Azure SQL, který je hostitelem databází SQL, všechny databáze, které patří k serveru budou také odstraněny a nelze jej obnovit.</span><span class="sxs-lookup"><span data-stu-id="38478-155">If you delete the Azure SQL server that hosts SQL Databases, all databases that belong to the server are also deleted and cannot be recovered.</span></span> <span data-ttu-id="38478-156">Nelze obnovit odstraněné serveru.</span><span class="sxs-lookup"><span data-stu-id="38478-156">You cannot restore a deleted server.</span></span>
> 

## <a name="how-to-extend-the-backup-retention-period"></a><span data-ttu-id="38478-157">Jak prodloužit dobu uchovávání záloh?</span><span class="sxs-lookup"><span data-stu-id="38478-157">How to extend the backup retention period?</span></span>
<span data-ttu-id="38478-158">Pokud vaše aplikace vyžaduje, aby zálohování jsou k dispozici pro delší časové období můžete rozšířit dobu uchování předdefinované nakonfigurováním dlouhodobě zásady uchovávání záloh pro jednotlivé databáze (zleva doprava zásady).</span><span class="sxs-lookup"><span data-stu-id="38478-158">If your application requires that the backups are available for longer period of time you can extend the built-in retention period by configuring the Long-term backup retention policy for individual databases (LTR policy).</span></span> <span data-ttu-id="38478-159">To umožňuje rozšířit dobu uchování vytvořené it z 35 dní až 10 let.</span><span class="sxs-lookup"><span data-stu-id="38478-159">This allows you to extend the built-it retention period from 35 days to up to 10 years.</span></span> <span data-ttu-id="38478-160">Další informace najdete v tématu [Dlouhodobé uchovávání](sql-database-long-term-retention.md).</span><span class="sxs-lookup"><span data-stu-id="38478-160">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

<span data-ttu-id="38478-161">Jakmile přidáte zásad zleva doprava k databázi pomocí portálu Azure nebo rozhraní API, týdenní zálohy úplné databáze se automaticky zkopírují do vlastního úložiště služby Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="38478-161">Once you add the LTR policy to a database using Azure portal or API, the weekly full database backups will be automatically copied to your own Azure Backup Service Vault.</span></span> <span data-ttu-id="38478-162">Pokud vaše databáze je šifrován TDE zálohy se šifrují automaticky v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="38478-162">If your database is encrypted with TDE the backups are automatically encrypted at rest.</span></span>  <span data-ttu-id="38478-163">Trezor služeb se automaticky odstraní vypršela platnost záloh na základě jejich časové razítko a zásad zleva doprava.</span><span class="sxs-lookup"><span data-stu-id="38478-163">The Services Vault will automatically delete your expired backups based on their timestamp and the LTR policy.</span></span>  <span data-ttu-id="38478-164">Takže není nutné ke správě plán zálohování nebo starat o vyčištění staré soubory.</span><span class="sxs-lookup"><span data-stu-id="38478-164">So you don't need to manage the backup schedule or worry about the cleanup of the old files.</span></span> <span data-ttu-id="38478-165">Rozhraní API obnovení podporuje záloh uložených v trezoru, pokud je úložiště ve stejném předplatném jako databáze SQL.</span><span class="sxs-lookup"><span data-stu-id="38478-165">The restore API supports backups stored in the vault as long as the vault is in the same subscription as your SQL database.</span></span> <span data-ttu-id="38478-166">Portál Azure nebo prostředí PowerShell můžete použít pro přístup k tyto zálohy.</span><span class="sxs-lookup"><span data-stu-id="38478-166">You can use the Azure portal or PowerShell to access these backups.</span></span>

> [!TIP]
> <span data-ttu-id="38478-167">Postupy: informace najdete v tématu [konfigurace a obnovení ze dlouhodobé uchovávání záloh Azure SQL Database](sql-database-long-term-backup-retention-configure.md)</span><span class="sxs-lookup"><span data-stu-id="38478-167">For a How-to guide, see [Configure and restore from Azure SQL Database long-term backup retention](sql-database-long-term-backup-retention-configure.md)</span></span>
>

## <a name="are-backups-encrypted"></a><span data-ttu-id="38478-168">Jsou zálohy šifrovat?</span><span class="sxs-lookup"><span data-stu-id="38478-168">Are backups encrypted?</span></span>

<span data-ttu-id="38478-169">Když je povolené šifrování TDE pro Azure SQL database, jsou šifrované zálohování.</span><span class="sxs-lookup"><span data-stu-id="38478-169">When TDE is enabled for an Azure SQL database, backups are also encrypted.</span></span> <span data-ttu-id="38478-170">Ve výchozím nastavení povolené šifrování TDE nastaveny všechny nové databáze Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="38478-170">All new Azure SQL databases are configured with TDE enabled by default.</span></span> <span data-ttu-id="38478-171">Další informace o šifrování TDE najdete v tématu [transparentní šifrování dat s Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="38478-171">For more information on TDE, see [Transparent Data Encryption with Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).</span></span>

## <a name="next-steps"></a><span data-ttu-id="38478-172">Další kroky</span><span class="sxs-lookup"><span data-stu-id="38478-172">Next steps</span></span>

- <span data-ttu-id="38478-173">Zálohování databáze jsou nedílnou součást vámi vyžádaných jakékoli obchodní strategie pro obnovení kontinuity a po havárii, protože se data chránit před náhodnou poškození nebo odstranění.</span><span class="sxs-lookup"><span data-stu-id="38478-173">Database backups are an essential part of any business continuity and disaster recovery strategy because they protect your data from accidental corruption or deletion.</span></span> <span data-ttu-id="38478-174">Další informace o jiných Azure SQL Database obchodní kontinuity řešení najdete v tématu [obchodní kontinuity přehled](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="38478-174">To learn about the other Azure SQL Database business continuity solutions, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
- <span data-ttu-id="38478-175">Obnovit k určitému bodu v čase pomocí portálu Azure, najdete v tématu [obnovit databázi k určitému bodu v čase pomocí portálu Azure](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="38478-175">To restore to a point in time using the Azure portal, see [restore database to a point in time using the Azure portal](sql-database-recovery-using-backups.md).</span></span>
- <span data-ttu-id="38478-176">Chcete-li obnovit k určitému bodu v čase pomocí prostředí PowerShell, přečtěte si téma [obnovit databázi k určitému bodu v čase pomocí prostředí PowerShell](scripts/sql-database-restore-database-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="38478-176">To restore to a point in time using PowerShell, see [restore database to a point in time using PowerShell](scripts/sql-database-restore-database-powershell.md).</span></span>
- <span data-ttu-id="38478-177">Pokud chcete konfigurovat, spravovat a obnovit ze dlouhodobé uchovávání automatické zálohy v trezoru služeb zotavení Azure pomocí portálu Azure najdete v tématu [spravovat pomocí portálu Azure dlouhodobé uchovávání záloh](sql-database-long-term-backup-retention-configure.md).</span><span class="sxs-lookup"><span data-stu-id="38478-177">To configure, manage, and restore from long-term retention of automated backups in an Azure Recovery Services vault using the Azure portal, see [Manage long-term backup retention using the Azure portal](sql-database-long-term-backup-retention-configure.md).</span></span>
- <span data-ttu-id="38478-178">Pokud chcete konfigurovat, spravovat a obnovit ze dlouhodobé uchovávání automatické zálohování v trezoru služeb zotavení Azure pomocí prostředí PowerShell najdete v tématu [spravovat pomocí prostředí PowerShell dlouhodobé uchovávání záloh](sql-database-long-term-backup-retention-configure.md).</span><span class="sxs-lookup"><span data-stu-id="38478-178">To configure, manage, and restore from long-term retention of automated backups in an Azure Recovery Services vault using PowerShell, see [Manage long-term backup retention using PowerShell](sql-database-long-term-backup-retention-configure.md).</span></span>
