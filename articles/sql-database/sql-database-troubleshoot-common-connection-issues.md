---
title: "Řešení běžných problémů s připojením ke službě Azure SQL Database"
description: "Postup identifikovat a řešit běžné chyby připojení pro databázi SQL Azure."
services: sql-database
documentationcenter: 
author: dalechen
manager: cshepard
editor: 
ms.assetid: ac463d1c-aec8-443d-b66e-fa5eadcccfa8
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: daleche
ms.openlocfilehash: b8abf1285318e491d51aadf90f921103d84ce1a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-connection-issues-to-azure-sql-database"></a><span data-ttu-id="fa347-103">Řešení potíží s připojením k databázi SQL Azure</span><span class="sxs-lookup"><span data-stu-id="fa347-103">Troubleshoot connection issues to Azure SQL Database</span></span>
<span data-ttu-id="fa347-104">Když se připojení k databázi SQL Azure nezdaří, zobrazí se [chybové zprávy](sql-database-develop-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="fa347-104">When the connection to Azure SQL Database fails, you receive [error messages](sql-database-develop-error-messages.md).</span></span> <span data-ttu-id="fa347-105">Tento článek je centralizované téma, které vám pomůže vyřešit problémy s připojením k databázi SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="fa347-105">This article is a centralized topic that helps you troubleshoot Azure SQL Database connectivity issues.</span></span> <span data-ttu-id="fa347-106">Zavádí [běžných příčin](#cause) z problémů s připojením, doporučuje [nástroje pro odstraňování potíží](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) se vám pomůže identity problém a k řešení potíží naleznete [přechodné chyby](#troubleshoot-transient-errors) a [trvalé nebo jiných přechodná chyb](#troubleshoot-persistent-errors).</span><span class="sxs-lookup"><span data-stu-id="fa347-106">It introduces [the common causes](#cause) of connection issues, recommends [a troubleshooting tool](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) that helps you identity the problem, and provides troubleshooting steps to solve [transient errors](#troubleshoot-transient-errors) and [persistent or non-transient errors](#troubleshoot-persistent-errors).</span></span> 

<span data-ttu-id="fa347-107">Pokud narazíte potíže s připojením, opakujte kroky řešení, které jsou popsané v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="fa347-107">If you encounter the connection issues, try the troubleshoot steps that are described in this article.</span></span>
[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="cause"></a><span data-ttu-id="fa347-108">Příčina</span><span class="sxs-lookup"><span data-stu-id="fa347-108">Cause</span></span>
<span data-ttu-id="fa347-109">Potíže s připojením, může být způsobeno některé z následujících:</span><span class="sxs-lookup"><span data-stu-id="fa347-109">Connection problems may be caused by any of the following:</span></span>

* <span data-ttu-id="fa347-110">Nepodařilo se použít osvědčené postupy a pokyny k návrhu při návrhu aplikace.</span><span class="sxs-lookup"><span data-stu-id="fa347-110">Failure to apply best practices and design guidelines during the application design process.</span></span>  <span data-ttu-id="fa347-111">V tématu [přehled vývoje SQL databáze](sql-database-develop-overview.md) začít pracovat.</span><span class="sxs-lookup"><span data-stu-id="fa347-111">See [SQL Database Development Overview](sql-database-develop-overview.md) to get started.</span></span>
* <span data-ttu-id="fa347-112">Změna konfigurace Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="fa347-112">Azure SQL Database reconfiguration</span></span>
* <span data-ttu-id="fa347-113">Nastavení brány firewall</span><span class="sxs-lookup"><span data-stu-id="fa347-113">Firewall settings</span></span>
* <span data-ttu-id="fa347-114">Časový limit připojení</span><span class="sxs-lookup"><span data-stu-id="fa347-114">Connection time-out</span></span>
* <span data-ttu-id="fa347-115">Nesprávné přihlašovací údaje</span><span class="sxs-lookup"><span data-stu-id="fa347-115">Incorrect login information</span></span>
* <span data-ttu-id="fa347-116">Dosažen maximální limit na některé prostředky Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="fa347-116">Maximum limit reached on some Azure SQL Database resources</span></span>

<span data-ttu-id="fa347-117">Obecně platí potíže s připojením k databázi SQL Azure můžou být klasifikované následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="fa347-117">Generally, connection issues to Azure SQL Database can be classified as follows:</span></span>

* [<span data-ttu-id="fa347-118">Přechodné chyby (krátkodobou nebo přerušované)</span><span class="sxs-lookup"><span data-stu-id="fa347-118">Transient errors (short-lived or intermittent)</span></span>](#troubleshoot-transient-errors)
* [<span data-ttu-id="fa347-119">Trvalé nebo jiných přechodná chyb (chyby, které pravidelně opakovat)</span><span class="sxs-lookup"><span data-stu-id="fa347-119">Persistent or non-transient errors (errors that regularly recur)</span></span>](#troubleshoot-persistent-errors)

## <a name="try-the-troubleshooter-for-azure-sql-database-connectivity-issues"></a><span data-ttu-id="fa347-120">Zkuste Poradce při potížích pro problémy s připojením k databázi SQL Azure</span><span class="sxs-lookup"><span data-stu-id="fa347-120">Try the troubleshooter for Azure SQL Database connectivity issues</span></span>
<span data-ttu-id="fa347-121">Pokud narazíte na chyby konkrétních připojení, zkuste [tento nástroj](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), které vám pomohou rychle identity, který se problém lze vyřešit.</span><span class="sxs-lookup"><span data-stu-id="fa347-121">If you encounter a specific connection error, try [this tool](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), which will help you quickly identity and resolve your problem.</span></span>

## <a name="troubleshoot-transient-errors"></a><span data-ttu-id="fa347-122">Řešení potíží s přechodné chyby</span><span class="sxs-lookup"><span data-stu-id="fa347-122">Troubleshoot transient errors</span></span>

<span data-ttu-id="fa347-123">Když se aplikace připojí k databázi Azure SQL, zobrazí se následující chybová zpráva:</span><span class="sxs-lookup"><span data-stu-id="fa347-123">When an application connects to an Azure SQL database, you receive the following error message:</span></span>

```
Error code 40613: "Database <x> on server <y> is not currently available. Please retry the connection later. If the problem persists, contact customer support, and provide them the session tracing ID of <z>"
```

> [!NOTE]
> <span data-ttu-id="fa347-124">Tato chybová zpráva se nejčastěji přechodné (krátkodobou).</span><span class="sxs-lookup"><span data-stu-id="fa347-124">This error message is typically transient (short-lived).</span></span>
> 
> 

<span data-ttu-id="fa347-125">K této chybě dojde, pokud se databáze Azure přesunout (nebo překonfigurovat) a vaše aplikace ztratí připojení k databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="fa347-125">This error occurs when the Azure database is being moved (or reconfigured) and your application loses its connection to the SQL database.</span></span> <span data-ttu-id="fa347-126">Události změny konfigurace databáze SQL dojít z důvodu plánované událostí (například upgrade softwaru), nebo neplánované událost (například síť procesu havárií, nebo Vyrovnávání zatížení).</span><span class="sxs-lookup"><span data-stu-id="fa347-126">SQL database reconfiguration events occur because of a planned event (for example, a software upgrade) or an unplanned event (for example, a process crash, or load balancing).</span></span> <span data-ttu-id="fa347-127">Většina události změny konfigurace jsou obecně krátkodobou a by se měly dokončit za méně než 60 sekund nejvíce.</span><span class="sxs-lookup"><span data-stu-id="fa347-127">Most reconfiguration events are generally short-lived and should be completed in less than 60 seconds at most.</span></span> <span data-ttu-id="fa347-128">Ale tyto události může občas trvat déle dokončit, například když velké transakce způsobí obnovení dlouhodobé.</span><span class="sxs-lookup"><span data-stu-id="fa347-128">However, these events can occasionally take longer to finish, such as when a large transaction causes a long-running recovery.</span></span>

### <a name="steps-to-resolve-transient-connectivity-issues"></a><span data-ttu-id="fa347-129">Kroky řešení potíží s přechodný připojení</span><span class="sxs-lookup"><span data-stu-id="fa347-129">Steps to resolve transient connectivity issues</span></span>

1. <span data-ttu-id="fa347-130">Zkontrolujte [řídicího panelu služby Microsoft Azure](https://azure.microsoft.com/status) pro všechny známé výpadkům, které došlo k chybě během doby, během které ohlášeny chyby v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="fa347-130">Check the [Microsoft Azure Service Dashboard](https://azure.microsoft.com/status) for any known outages that occurred during the time during which the errors were reported by the application.</span></span>
2. <span data-ttu-id="fa347-131">Aplikace, které se připojují ke cloudové službě, jako je Azure SQL Database by měl očekávat pravidelné Rekonfigurace události a implementovat opakujte logiku ke zpracování těchto chyb místo zpřístupnění jako chyby aplikace pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="fa347-131">Applications that connect to a cloud service such as Azure SQL Database should expect periodic reconfiguration events and implement retry logic to handle these errors instead of surfacing these as application errors to users.</span></span> <span data-ttu-id="fa347-132">Zkontrolujte [přechodné chyby](sql-database-connectivity-issues.md) části a osvědčené postupy a pokyny k návrhu na [přehled vývoje SQL databáze](sql-database-develop-overview.md) Další informace a obecné opakujte strategie.</span><span class="sxs-lookup"><span data-stu-id="fa347-132">Review the [Transient errors](sql-database-connectivity-issues.md) section and the best practices and design guidelines at [SQL Database Development Overview](sql-database-develop-overview.md) for more information and general retry strategies.</span></span> <span data-ttu-id="fa347-133">Potom, najdete v části Ukázky kódu v [knihovny připojení k databázi SQL a SQL Server](sql-database-libraries.md) pro konkrétní.</span><span class="sxs-lookup"><span data-stu-id="fa347-133">Then, see code samples at [Connection Libraries for SQL Database and SQL Server](sql-database-libraries.md) for specifics.</span></span>
3. <span data-ttu-id="fa347-134">Jako databázi blíží jeho omezení prostředků, může to vypadat jako přechodný problém s připojením.</span><span class="sxs-lookup"><span data-stu-id="fa347-134">As a database approaches its resource limits, it can seem to be a transient connectivity issue.</span></span> <span data-ttu-id="fa347-135">V tématu [řešení potíží s výkonem](sql-database-troubleshoot-performance.md).</span><span class="sxs-lookup"><span data-stu-id="fa347-135">See [Troubleshooting Performance Issues](sql-database-troubleshoot-performance.md).</span></span>
4. <span data-ttu-id="fa347-136">Pokud se potíže s připojením k pokračovat, nebo pokud doba, pro kterou vaše aplikace naráží na chybu překročí 60 sekund nebo pokud se zobrazí více výskyty chyby v daný den, soubor žádost o podporu Azure tak, že vyberete **získat podporu** na [podporu Azure](https://azure.microsoft.com/support/options) lokality.</span><span class="sxs-lookup"><span data-stu-id="fa347-136">If connectivity problems continue, or if the duration for which your application encounters the error exceeds 60 seconds or if you see multiple occurrences of the error in a given day, file an Azure support request by selecting **Get Support** on the [Azure Support](https://azure.microsoft.com/support/options) site.</span></span>

## <a name="troubleshoot-persistent-errors"></a><span data-ttu-id="fa347-137">Řešení potíží s trvalé chyby</span><span class="sxs-lookup"><span data-stu-id="fa347-137">Troubleshoot persistent errors</span></span>
<span data-ttu-id="fa347-138">Pokud aplikace se trvale nepodaří připojit k databázi SQL Azure, obvykle označuje potíže s jedním z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="fa347-138">If the application persistently fails to connect to Azure SQL Database, it usually indicates an issue with one of the following:</span></span>

* <span data-ttu-id="fa347-139">Konfigurace brány firewall.</span><span class="sxs-lookup"><span data-stu-id="fa347-139">Firewall configuration.</span></span> <span data-ttu-id="fa347-140">Azure SQL database nebo klienta brána firewall blokuje připojení k databázi SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="fa347-140">The Azure SQL database or client-side firewall is blocking connections to Azure SQL Database.</span></span>
* <span data-ttu-id="fa347-141">Změna konfigurace na straně klienta sítě: například novou IP adresu nebo proxy server.</span><span class="sxs-lookup"><span data-stu-id="fa347-141">Network reconfiguration on the client side: for example, a new IP address or a proxy server.</span></span>
* <span data-ttu-id="fa347-142">Uživatelskou chybu: například chybně připojení parametrů, třeba název serveru v připojovacím řetězci.</span><span class="sxs-lookup"><span data-stu-id="fa347-142">User error: for example, mistyped connection parameters, such as the server name in the connection string.</span></span>

### <a name="steps-to-resolve-persistent-connectivity-issues"></a><span data-ttu-id="fa347-143">Kroky řešení potíží s trvalé připojení</span><span class="sxs-lookup"><span data-stu-id="fa347-143">Steps to resolve persistent connectivity issues</span></span>
1. <span data-ttu-id="fa347-144">Nastavit [pravidla brány firewall](sql-database-configure-firewall-settings.md) umožňuje klientovi IP adresu.</span><span class="sxs-lookup"><span data-stu-id="fa347-144">Set up [firewall rules](sql-database-configure-firewall-settings.md) to allow the client IP address.</span></span> <span data-ttu-id="fa347-145">Pro dočasné pro účely testování nastavte pravidla brány firewall používání 0.0.0.0 jako počáteční rozsah IP adres a 255.255.255.255 jako koncová rozsah IP adres.</span><span class="sxs-lookup"><span data-stu-id="fa347-145">For temporary testing purposes, set up a firewall rule using 0.0.0.0 as the starting IP address range and using 255.255.255.255 as the ending IP address range.</span></span> <span data-ttu-id="fa347-146">Otevře se server pro všechny IP adresy.</span><span class="sxs-lookup"><span data-stu-id="fa347-146">This will open the server to all IP addresses.</span></span> <span data-ttu-id="fa347-147">Pokud to řeší problém s připojením, toto pravidlo odebrat a vytvořte pravidlo brány firewall pro správně omezené IP adresu nebo rozsah adres.</span><span class="sxs-lookup"><span data-stu-id="fa347-147">If this resolves your connectivity issue, remove this rule and create a firewall rule for an appropriately limited IP address or address range.</span></span> 
2. <span data-ttu-id="fa347-148">Na všechny brány firewall mezi klientem a Internetu Ujistěte se, že port 1433 je otevřený pro odchozí připojení.</span><span class="sxs-lookup"><span data-stu-id="fa347-148">On all firewalls between the client and the Internet, make sure that port 1433 is open for outbound connections.</span></span> <span data-ttu-id="fa347-149">Zkontrolujte [konfigurace brány Windows Firewall a povolit přístup k serveru SQL](https://msdn.microsoft.com/library/cc646023.aspx) a [hybridní Identity požadované porty a protokoly](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) pro další ukazatele související s další porty, které budete muset otevřít pro ověřování Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fa347-149">Review [Configure the Windows Firewall to Allow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) and [Hybrid Identity Required Ports and Protocols](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) for additional pointers related to additional ports that you need to open for Azure Active Directory authentication.</span></span>
3. <span data-ttu-id="fa347-150">Ověřte připojovací řetězec a další nastavení připojení.</span><span class="sxs-lookup"><span data-stu-id="fa347-150">Verify your connection string and other connection settings.</span></span> <span data-ttu-id="fa347-151">Najdete v části připojovací řetězec v [tématu problémy s připojením](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="fa347-151">See the Connection String section in the [connectivity issues topic](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span></span>
4. <span data-ttu-id="fa347-152">Zkontrolujte stav služby v řídicím panelu.</span><span class="sxs-lookup"><span data-stu-id="fa347-152">Check service health in the dashboard.</span></span> <span data-ttu-id="fa347-153">Pokud se domníváte, že je místní výpadku, přečtěte si téma [zotavit výpadku](sql-database-disaster-recovery.md) pokyny k obnovení do nové oblasti.</span><span class="sxs-lookup"><span data-stu-id="fa347-153">If you think there’s a regional outage, see [Recover from an outage](sql-database-disaster-recovery.md) for steps to recover to a new region.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fa347-154">Další kroky</span><span class="sxs-lookup"><span data-stu-id="fa347-154">Next steps</span></span>
* [<span data-ttu-id="fa347-155">Řešení potíží s výkonem databáze SQL Azure</span><span class="sxs-lookup"><span data-stu-id="fa347-155">Troubleshoot Azure SQL Database performance issues</span></span>](sql-database-troubleshoot-performance.md)
* [<span data-ttu-id="fa347-156">Hledání v dokumentaci v Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="fa347-156">Search the documentation on Microsoft Azure</span></span>](http://azure.microsoft.com/search/documentation/)
* [<span data-ttu-id="fa347-157">Zobrazit nejnovější aktualizace služby databáze SQL Azure</span><span class="sxs-lookup"><span data-stu-id="fa347-157">View the latest updates to the Azure SQL Database service</span></span>](http://azure.microsoft.com/updates/?service=sql-database)

## <a name="additional-resources"></a><span data-ttu-id="fa347-158">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="fa347-158">Additional resources</span></span>
* [<span data-ttu-id="fa347-159">Přehled vývoje SQL databáze</span><span class="sxs-lookup"><span data-stu-id="fa347-159">SQL Database Development Overview</span></span>](sql-database-develop-overview.md)
* [<span data-ttu-id="fa347-160">Obecné pokyny přechodné selhání zpracování</span><span class="sxs-lookup"><span data-stu-id="fa347-160">General transient fault-handling guidance</span></span>](../best-practices-retry-general.md)
* [<span data-ttu-id="fa347-161">Knihovny připojení k databázi SQL a SQL Server</span><span class="sxs-lookup"><span data-stu-id="fa347-161">Connection libraries for SQL Database and SQL Server</span></span>](sql-database-libraries.md)

