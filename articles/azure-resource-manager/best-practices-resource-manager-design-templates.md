---
title: "aaaDesign Azure šablon pro komplexní řešení | Microsoft Docs"
description: "Ukazuje osvědčené postupy pro navrhování šablon Azure Resource Manageru pro komplexní scénáře"
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: aa45e9a46d79a6336b696cff8fd37f65fa449f11
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="2d256-103">Vzory návrhu pro šablony Azure Resource Manager při nasazení komplexní řešení</span><span class="sxs-lookup"><span data-stu-id="2d256-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="2d256-104">Pomocí flexibilní přístup na základě šablon Azure Resource Manager, můžete nasadit komplexních topologiích rychle a konzistentně.</span><span class="sxs-lookup"><span data-stu-id="2d256-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="2d256-105">Můžete přizpůsobit tato nasazení snadno jako jádra, které nabídky momentální nebo tooaccommodate varianty pro scénáře outlier nebo zákazníků.</span><span class="sxs-lookup"><span data-stu-id="2d256-105">You can adapt these deployments easily as core offerings evolve or tooaccommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="2d256-106">Toto téma je součástí větší dokument White Paper.</span><span class="sxs-lookup"><span data-stu-id="2d256-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="2d256-107">Stáhnout tooread hello úplné papír [World – třída Azure Resource Manager šablony požadavky a osvědčené postupy](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="2d256-107">tooread hello full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="2d256-108">Šablony kombinovat hello výhod hello základní Azure Resource Manager s hello přizpůsobivost a čitelnost z JSON JavaScript Object Notation ().</span><span class="sxs-lookup"><span data-stu-id="2d256-108">Templates combine hello benefits of hello underlying Azure Resource Manager with hello adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="2d256-109">Pomocí šablony, můžete:</span><span class="sxs-lookup"><span data-stu-id="2d256-109">Using templates, you can:</span></span>

* <span data-ttu-id="2d256-110">Topologie a jejich úloh nasaďte konzistentně.</span><span class="sxs-lookup"><span data-stu-id="2d256-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="2d256-111">Spravovat všechny prostředky v aplikaci společně použití skupin prostředků.</span><span class="sxs-lookup"><span data-stu-id="2d256-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="2d256-112">Použijte pro přístup na základě rolí k řízení (RBAC) toogrant odpovídající přístup toousers, skupiny a služby.</span><span class="sxs-lookup"><span data-stu-id="2d256-112">Apply role-based access control (RBAC) toogrant appropriate access toousers, groups, and services.</span></span>
* <span data-ttu-id="2d256-113">Použijte označování přidružení toostreamline úloh fakturace souhrny.</span><span class="sxs-lookup"><span data-stu-id="2d256-113">Use tagging associations toostreamline tasks such as billing rollups.</span></span>

<span data-ttu-id="2d256-114">Tento článek poskytuje podrobné informace o spotřebě scénáře, architekturu a vzory implementace identifikované při našich relace návrhu a implementace reálného šablony u zákazníků Azure poradní tým (AzureCAT).</span><span class="sxs-lookup"><span data-stu-id="2d256-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="2d256-115">Daleko od academic, jsou tyto přístupy osvědčené postupy o tom informováni prostřednictvím hello vývoj šablon pro 12 hello horní operačních systémů se systémem Linux technologií, včetně: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise s technologií Apache Cassandra, Elasticsearch, volaných, MongoDB, PostgreSQL, Redis a Nagios.</span><span class="sxs-lookup"><span data-stu-id="2d256-115">Far from academic, these approaches are proven practices informed by hello development of templates for 12 of hello top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="2d256-116">Tento článek sdílí tyto osvědčené postupy toohelp architektury šablony Azure Resource Manager třídy world.</span><span class="sxs-lookup"><span data-stu-id="2d256-116">This article shares these proven practices toohelp you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="2d256-117">V našem práce se zákazníky jsme určili několik možnosti spotřeby šablony správce prostředků mezi podniky, s systémových Integrátorech (SI) a sdílené svazky clusteru.</span><span class="sxs-lookup"><span data-stu-id="2d256-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="2d256-118">Hello následující části obsahují základní přehled běžné scénáře a vzory pro typy různých zákazníků.</span><span class="sxs-lookup"><span data-stu-id="2d256-118">hello following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="2d256-119">Podniky a integrátory systémů</span><span class="sxs-lookup"><span data-stu-id="2d256-119">Enterprises and system integrators</span></span>
<span data-ttu-id="2d256-120">Ve velkých organizacích, vidíme běžně dvě příjemci šablony Resource Manageru: vnitřní softwaru vývojové týmy a podnikové IT.</span><span class="sxs-lookup"><span data-stu-id="2d256-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="2d256-121">Jsme zjistili, že hello scénáře pro hello SIs mapování toohello scénáře pro firmy, takže hello stejné aspekty platí.</span><span class="sxs-lookup"><span data-stu-id="2d256-121">We've found that hello scenarios for hello SIs map toohello scenarios for Enterprises, so hello same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="2d256-122">Interní softwaru vývojové týmy</span><span class="sxs-lookup"><span data-stu-id="2d256-122">Internal software development teams</span></span>
<span data-ttu-id="2d256-123">Pokud váš tým sama vyvinula softwaru toosupport vaši firmu, šablony poskytují snadný způsob tooquickly nasazení technologie pro použití v řešeních pro specifické pro firmy.</span><span class="sxs-lookup"><span data-stu-id="2d256-123">If your team develops software toosupport your business, templates provide an easy way tooquickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="2d256-124">Můžete také použít šablony toorapidly vytvořte školení prostředí, které umožňují team členy toogain nezbytné dovednosti.</span><span class="sxs-lookup"><span data-stu-id="2d256-124">You can also use templates toorapidly create training environments that enable team members toogain necessary skills.</span></span>

<span data-ttu-id="2d256-125">Můžete použít šablony jako-je rozšířit nebo tvoří jejich tooaccommodate vašim potřebám.</span><span class="sxs-lookup"><span data-stu-id="2d256-125">You can use templates as-is or extend or compose them tooaccommodate your needs.</span></span> <span data-ttu-id="2d256-126">Pomocí označování šablony, můžete poskytnout fakturace souhrn různých zobrazení, například jako tým, projektu, jednotlivé a vzdělávání.</span><span class="sxs-lookup"><span data-stu-id="2d256-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="2d256-127">Podnikům chtít často vývoj softwaru týmy toocreate šablonu pro konzistentní nasazení řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-127">Businesses often want software development teams toocreate a template for consistent deployment of a solution.</span></span> <span data-ttu-id="2d256-128">Šablona Hello usnadňuje omezení tak, aby některé položky v rámci prostředí pevná a nelze přepsat.</span><span class="sxs-lookup"><span data-stu-id="2d256-128">hello template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="2d256-129">Například banka mohou vyžadovat šablony tooinclude RBAC programátorem nelze zkontrolovat, jestli řešení bankovní účet toosend data tooa osobní úložiště.</span><span class="sxs-lookup"><span data-stu-id="2d256-129">For example, a bank might require a template tooinclude RBAC so a programmer can’t revise a banking solution toosend data tooa personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="2d256-130">Podnikové IT</span><span class="sxs-lookup"><span data-stu-id="2d256-130">Corporate IT</span></span>
<span data-ttu-id="2d256-131">Podniková oddělení IT se obvykle používají šablony pro doručování cloudu možnosti kapacity a hostovaných v cloudu.</span><span class="sxs-lookup"><span data-stu-id="2d256-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="2d256-132">Kapacita cloudu</span><span class="sxs-lookup"><span data-stu-id="2d256-132">Cloud capacity</span></span>
<span data-ttu-id="2d256-133">Běžný způsob pro podnikové IT skupiny tooprovide kapacity cloudu pro týmy je s "tričko velikostí", které jsou standardní nabídky velikosti například malé, střední a velké.</span><span class="sxs-lookup"><span data-stu-id="2d256-133">A common way for corporate IT groups tooprovide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="2d256-134">Hello tričko velikost nabídky můžete kombinovat různé typy prostředků a počty při současném poskytování úrovně standardizaci, díky které je možné toouse šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-134">hello t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible toouse templates.</span></span> <span data-ttu-id="2d256-135">šablony Hello poskytovat kapacity konzistentní způsobem, který vynucuje podnikové zásady a používá označování tooprovide vrácení peněz tooconsuming organizace.</span><span class="sxs-lookup"><span data-stu-id="2d256-135">hello templates deliver capacity in a consistent way that enforces corporate policies and uses tagging tooprovide chargeback tooconsuming organizations.</span></span>

<span data-ttu-id="2d256-136">Může být například nutné tooprovide vývoj, testovací nebo produkční prostředí v rámci které hello můžete nasadit software vývojové týmy jejich řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-136">For example, you may need tooprovide development, test, or production environments within which hello software development teams can deploy their solutions.</span></span> <span data-ttu-id="2d256-137">Hello prostředí má předdefinované síťové topologie a elementy, které hello softwaru vývojové týmy nelze změnit, jako například pravidla, kterými se řídí kontroly toohello přístup veřejného Internetu a paketu.</span><span class="sxs-lookup"><span data-stu-id="2d256-137">hello environment has a predefined network topology and elements that hello software development teams cannot change, such as rules governing access toohello public internet and packet inspection.</span></span> <span data-ttu-id="2d256-138">Můžete mít rovněž organizace specifické role u těchto prostředí s odlišné přístupová práva pro prostředí hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-138">You may also have organization-specific roles for these environments with distinct access rights for hello environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="2d256-139">Možnosti hostovaných v cloudu</span><span class="sxs-lookup"><span data-stu-id="2d256-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="2d256-140">Můžete vytvořit šablony toosupport hostovaných v cloudu funkcí, včetně jednotlivých softwarových balíčků nebo složený nabídky, které nabízí toointernal odvětví podnikání.</span><span class="sxs-lookup"><span data-stu-id="2d256-140">You can use templates toosupport cloud-hosted capabilities, including individual software packages or composite offerings that are offered toointernal lines of business.</span></span> <span data-ttu-id="2d256-141">Příkladem složené nabídky může být analýza jako služby – analýzy, vizualizace a další technologie – doručit v konfiguraci optimalizované, propojených na předdefinované síťové topologie.</span><span class="sxs-lookup"><span data-stu-id="2d256-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="2d256-142">Možnosti hostovaných v cloudu se týká hello zabezpečení a důležité informace o roli vymezenému kapacity cloudu hello nabídky na kterém jste vytvořené.</span><span class="sxs-lookup"><span data-stu-id="2d256-142">Cloud-hosted capabilities are affected by hello security and role considerations established by hello cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="2d256-143">Tyto možnosti jsou nabízena, jak jsou, nebo jako spravovanou službu.</span><span class="sxs-lookup"><span data-stu-id="2d256-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="2d256-144">Pro pozdější hello, se vyžaduje omezeného přístupu role tooenable přístup do hello prostředí pro účely správy.</span><span class="sxs-lookup"><span data-stu-id="2d256-144">For hello latter, access-constrained roles are required tooenable access into hello environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="2d256-145">Dodavatelé cloudové služby</span><span class="sxs-lookup"><span data-stu-id="2d256-145">Cloud service vendors</span></span>
<span data-ttu-id="2d256-146">Až po rozhovoru toomany sdílené svazky clusteru, myslíme, že více přístupů, které můžete provést toodeploy služby pro vaše zákazníky a přidružené požadavky.</span><span class="sxs-lookup"><span data-stu-id="2d256-146">After talking toomany CSVs, we identified multiple approaches you can take toodeploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="2d256-147">CSV hostované nabídky</span><span class="sxs-lookup"><span data-stu-id="2d256-147">CSV-hosted offering</span></span>
<span data-ttu-id="2d256-148">Pokud hostujete vaší nabídky v předplatného Azure, jsou společné hostování dva přístupy: nasazení odlišné nasazení pro každý zákazníka nebo nasazování jednotek škálování, které jsou základem sdílené infrastruktury používá pro všechny zákazníky.</span><span class="sxs-lookup"><span data-stu-id="2d256-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="2d256-149">**Odlišné nasazení pro každého zákazníka.**</span><span class="sxs-lookup"><span data-stu-id="2d256-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="2d256-150">Odlišné nasazení na zákazníka vyžadují pevné topologie různé známé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="2d256-151">Tato nasazení může mít jiný virtuální počítač (VM) velikosti, proměnlivým počtem uzlů a různé množství přidruženého úložiště.</span><span class="sxs-lookup"><span data-stu-id="2d256-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="2d256-152">Označení nasazení se používá pro fakturaci souhrnné jednotlivých zákazníků.</span><span class="sxs-lookup"><span data-stu-id="2d256-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="2d256-153">RBAC může být povoleno tooallow zákazníkům přístup tooaspects jejich cloudového prostředí.</span><span class="sxs-lookup"><span data-stu-id="2d256-153">RBAC may be enabled tooallow customers access tooaspects of their cloud environment.</span></span>
* <span data-ttu-id="2d256-154">**Jednotky škálování ve sdíleném víceklientské prostředí.**</span><span class="sxs-lookup"><span data-stu-id="2d256-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="2d256-155">Jednotka škálování pro prostředí s více klientů může představovat šablonu.</span><span class="sxs-lookup"><span data-stu-id="2d256-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="2d256-156">V takovém případě hello stejné infrastruktury, jako je použité toosupport všem zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="2d256-156">In this case, hello same infrastructure is used toosupport all customers.</span></span> <span data-ttu-id="2d256-157">nasazení Hello představují skupinu prostředků, které doručují úroveň kapacity pro hello hostované nabídky, jako je počet uživatelů a počet transakcí.</span><span class="sxs-lookup"><span data-stu-id="2d256-157">hello deployments represent a group of resources that deliver a level of capacity for hello hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="2d256-158">Tyto jednotky škálování jsou zvětšit nebo zmenšit, protože vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="2d256-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="2d256-159">Nabídka CSV vloženy do předplatné zákazníka</span><span class="sxs-lookup"><span data-stu-id="2d256-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="2d256-160">Můžete chtít toodeploy váš software do odběrů vlastníkem koncovým zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="2d256-160">You may want toodeploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="2d256-161">Můžete vytvořit šablony toodeploy odlišné nasazení do Azure účtu zákazníka.</span><span class="sxs-lookup"><span data-stu-id="2d256-161">You can use templates toodeploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="2d256-162">Tato nasazení používat funkci RBAC, abyste mohli aktualizovat a spravovat nasazení hello v rámci účtu hello zákazníka.</span><span class="sxs-lookup"><span data-stu-id="2d256-162">These deployments use RBAC so you can update and manage hello deployment within hello customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="2d256-163">Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="2d256-163">Azure Marketplace</span></span>
<span data-ttu-id="2d256-164">tooadvertise a prodeje nabídkami přes marketplace, jako je například Azure Marketplace, můžete vyvíjet šablony toodeliver odlišné typy nasazení, které běží v Azure účtu zákazníka.</span><span class="sxs-lookup"><span data-stu-id="2d256-164">tooadvertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates toodeliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="2d256-165">Tato odlišné nasazení mohou obvykle popsané jako velikost trička (malé, střední, velký), typ produktu nebo cílové skupiny (komunity, developer, enterprise) nebo typ funkce (základní, vysoké dostupnosti).</span><span class="sxs-lookup"><span data-stu-id="2d256-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="2d256-166">V některých případech se tyto typy umožňují toospecify určité atributy hello nasazení, například typ virtuálního počítače nebo počet disků.</span><span class="sxs-lookup"><span data-stu-id="2d256-166">In some cases, these types allow you toospecify certain attributes of hello deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="2d256-167">Projekty operačních systémů</span><span class="sxs-lookup"><span data-stu-id="2d256-167">OSS projects</span></span>
<span data-ttu-id="2d256-168">V rámci projekty s otevřeným zdrojem šablony Resource Manageru povolte komunity toodeploy řešení rychle pomocí osvědčené postupy.</span><span class="sxs-lookup"><span data-stu-id="2d256-168">Within open source projects, Resource Manager templates enable a community toodeploy a solution quickly using proven practices.</span></span> <span data-ttu-id="2d256-169">Šablony můžete ukládat v úložišti GitHub, hello komunity můžete zkontrolovat, jestli je v čase.</span><span class="sxs-lookup"><span data-stu-id="2d256-169">You can store templates in a GitHub repository so hello community can revise them over time.</span></span> <span data-ttu-id="2d256-170">Uživatelé nasazení těchto šablon do svých vlastních předplatných Azure.</span><span class="sxs-lookup"><span data-stu-id="2d256-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="2d256-171">Hello následujících částech jsou uvedené hello věcí, které budete potřebovat tooconsider před navržením řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-171">hello following sections identify hello things you need tooconsider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="2d256-172">Identifikace, co je mimo a uvnitř virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="2d256-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="2d256-173">Při navrhování vaší šablony, je užitečné toolook v hello požadavky z hlediska novinky mimo a uvnitř hello virtuální počítače (VM):</span><span class="sxs-lookup"><span data-stu-id="2d256-173">As you design your template, it’s helpful toolook at hello requirements in terms of what's outside and inside hello virtual machines (VMs):</span></span>

* <span data-ttu-id="2d256-174">Mimo znamená hello virtuálním počítačům a dalším prostředkům vaše nasazení, jako je například hello síťové topologie, označování, odkazy na toohello certifikátů nebo tajemství a řízení přístupu na základě rolí.</span><span class="sxs-lookup"><span data-stu-id="2d256-174">Outside means hello VMs and other resources of your deployment, such as hello network topology, tagging, references toohello certs/secrets, and role-based access control.</span></span> <span data-ttu-id="2d256-175">Všechny tyto prostředky jsou součástí šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="2d256-176">Uvnitř znamená hello nainstalovaný software a celkové požadovaného stavu konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-176">Inside means hello installed software and overall desired state configuration.</span></span> <span data-ttu-id="2d256-177">Jiné mechanismy, jako je například rozšíření virtuálního počítače nebo skripty, se používají v celé nebo částečně.</span><span class="sxs-lookup"><span data-stu-id="2d256-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="2d256-178">Tyto mechanismy může identifikovat a provedený hello šablony, ale nejsou v ní.</span><span class="sxs-lookup"><span data-stu-id="2d256-178">These mechanisms may be identified and executed by hello template but aren’t in it.</span></span>

<span data-ttu-id="2d256-179">Běžné činnosti, které by se "uvnitř hello pole" Příklady-</span><span class="sxs-lookup"><span data-stu-id="2d256-179">Common examples of activities you would do “inside hello box” include -</span></span>  

* <span data-ttu-id="2d256-180">Instalace nebo odebrání rolí a funkcí serveru</span><span class="sxs-lookup"><span data-stu-id="2d256-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="2d256-181">Instalace a konfigurace softwaru na úrovni clusteru nebo uzel hello</span><span class="sxs-lookup"><span data-stu-id="2d256-181">Install and configure software at hello node or cluster level</span></span>
* <span data-ttu-id="2d256-182">Nasazení webů na webovém serveru</span><span class="sxs-lookup"><span data-stu-id="2d256-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="2d256-183">Nasazení databáze schémata</span><span class="sxs-lookup"><span data-stu-id="2d256-183">Deploy database schemas</span></span>
* <span data-ttu-id="2d256-184">Správa registru nebo jiné typy nastavení konfigurace</span><span class="sxs-lookup"><span data-stu-id="2d256-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="2d256-185">Správa souborů a adresářů</span><span class="sxs-lookup"><span data-stu-id="2d256-185">Manage files and directories</span></span>
* <span data-ttu-id="2d256-186">Spuštění, zastavení a správu procesů a služeb</span><span class="sxs-lookup"><span data-stu-id="2d256-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="2d256-187">Správa místních skupin a uživatelských účtů</span><span class="sxs-lookup"><span data-stu-id="2d256-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="2d256-188">Instalaci a správě balíčků (.msi, .exe, yum atd.)</span><span class="sxs-lookup"><span data-stu-id="2d256-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="2d256-189">Spravovat proměnné prostředí</span><span class="sxs-lookup"><span data-stu-id="2d256-189">Manage environment variables</span></span>
* <span data-ttu-id="2d256-190">Spouštění skriptů nativní (prostředí Windows PowerShell, bash, atd.)</span><span class="sxs-lookup"><span data-stu-id="2d256-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="2d256-191">Konfigurace požadovaného stavu (DSC)</span><span class="sxs-lookup"><span data-stu-id="2d256-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="2d256-192">Přemýšlíte o hello vnitřní stav virtuálních počítačů nad rámec nasazení, budete chtít toomake, že toto nasazení nebude "soubor" z hello konfigurace, který jste definovali a zaškrtnutí do správy zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="2d256-192">Thinking about hello internal state of your VMs beyond deployment, you want toomake sure this deployment doesn’t "drift" from hello configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="2d256-193">Tento přístup zajišťuje vaše vývojáři nebo provozní personál nevytvářejte ad hoc změny tooan prostředí, které nejsou vetted, testovat nebo zaznamenávají do správy zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="2d256-193">This approach ensures your developers or operations staff don’t make ad-hoc changes tooan environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="2d256-194">Tento ovládací prvek je důležité, protože nejsou hello ručních změn ve správě zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="2d256-194">This control is important, because hello manual changes are not in source control.</span></span> <span data-ttu-id="2d256-195">Nejsou také součástí standardní nasazení hello a ovlivní budoucí automatizované nasazení softwaru hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-195">They are also not part of hello standard deployment and will impact future automated deployments of hello software.</span></span>

<span data-ttu-id="2d256-196">Nad rámec zaměstnancům vnitřní konfigurace požadovaného stavu taky je důležité z hlediska zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="2d256-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="2d256-197">Hackerům pravidelně zkoušíte toocompromise a zneužití systémy softwaru.</span><span class="sxs-lookup"><span data-stu-id="2d256-197">Hackers are regularly trying toocompromise and exploit software systems.</span></span> <span data-ttu-id="2d256-198">Po úspěšné, je běžné tooinstall soubory a v opačném případě změňte stav hello ohrožení zabezpečení systému.</span><span class="sxs-lookup"><span data-stu-id="2d256-198">When successful, it's common tooinstall files and otherwise change hello state of a compromised system.</span></span> <span data-ttu-id="2d256-199">Konfigurace požadovaného stavu můžete identifikovat rozdílů mezi hello potřeby a skutečný stav a obnovení známé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-199">Using desired state configuration, you can identify deltas between hello desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="2d256-200">Existují rozšíření prostředků pro hello nejoblíbenější mechanismy pro DSC - PowerShell DSC, Chef a Puppet.</span><span class="sxs-lookup"><span data-stu-id="2d256-200">There are resource extensions for hello most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="2d256-201">Každý z těchto rozšíření můžete nasadit hello počáteční stav virtuálního počítače a také být použité toomake se, že hello potřeby, že stav je zachován.</span><span class="sxs-lookup"><span data-stu-id="2d256-201">Each of these extensions can deploy hello initial state of your VM and also be used toomake sure hello desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="2d256-202">Běžné obory šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-202">Common template scopes</span></span>
<span data-ttu-id="2d256-203">V našich zkušeností jsme viděli tři obory šablony klíče řešení vznikat.</span><span class="sxs-lookup"><span data-stu-id="2d256-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="2d256-204">Tyto tři obory – kapacitu, funkce a řešení pro kompletní – jsou popsané v následující části hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-204">These three scopes – capacity, capability, and end-to-end solution – are described in hello following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="2d256-205">Kapacity oboru</span><span class="sxs-lookup"><span data-stu-id="2d256-205">Capacity scope</span></span>
<span data-ttu-id="2d256-206">Obor kapacity přináší sadu prostředků v topologii standardní, který je předem nakonfigurovaný toobe v souladu s předpisy a zásadami.</span><span class="sxs-lookup"><span data-stu-id="2d256-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured toobe in compliance with regulations and policies.</span></span> <span data-ttu-id="2d256-207">Příklad nejběžnější Hello nasazuje standardní vývojové prostředí v případě pomocí podnikové IT nebo SI.</span><span class="sxs-lookup"><span data-stu-id="2d256-207">hello most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="2d256-208">Obor funkce</span><span class="sxs-lookup"><span data-stu-id="2d256-208">Capability scope</span></span>
<span data-ttu-id="2d256-209">Obor funkce se zaměřuje na nasazení a konfiguraci topologie pro danou technologii.</span><span class="sxs-lookup"><span data-stu-id="2d256-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="2d256-210">Běžné scénáře, včetně technologií, jako je například SQL Server, Cassandra, Hadoop.</span><span class="sxs-lookup"><span data-stu-id="2d256-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="2d256-211">Komplexní řešení rozsahu</span><span class="sxs-lookup"><span data-stu-id="2d256-211">End-to-end solution scope</span></span>
<span data-ttu-id="2d256-212">Rozsah začátku do konce řešení je cílem nad rámec jednoho schopnosti a místo toho se zaměřuje na řešení s end tooend skládá z více možností.</span><span class="sxs-lookup"><span data-stu-id="2d256-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end tooend solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="2d256-213">Obor s rozsahem řešení šablony projevuje jako sadu jeden nebo více obor funkce šablon s prostředky pro konkrétní řešení, logiku a požadovaný stav.</span><span class="sxs-lookup"><span data-stu-id="2d256-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="2d256-214">Příklad šablony obor řešení je šablonu end tooend datového kanálu řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-214">An example of a solution-scoped template is an end tooend data pipeline solution template.</span></span> <span data-ttu-id="2d256-215">Šablona Hello může kombinovat specifické řešení topologie a stavu s více šablon funkce obor řešení například Kafka, Storm a Hadoop.</span><span class="sxs-lookup"><span data-stu-id="2d256-215">hello template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="2d256-216">Výběr vlastní oproti známé konfigurace</span><span class="sxs-lookup"><span data-stu-id="2d256-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="2d256-217">Může zpočátku myslíte šablonu měl dát příjemci hello co nejvíce flexibilitu, ale několik rozhodnutí ovlivnit volbu hello jestli toouse vlastní konfigurace oproti známé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-217">You might initially think a template should give consumers hello utmost flexibility, but many considerations affect hello choice of whether toouse free-form configurations vs. known configurations.</span></span> <span data-ttu-id="2d256-218">Tato část popisuje požadavky zákazníků hello a technické aspekty, které ve tvaru hello přístup sdílené v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="2d256-218">This section identifies hello key customer requirements and technical considerations that shaped hello approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="2d256-219">Vlastní konfigurace</span><span class="sxs-lookup"><span data-stu-id="2d256-219">Free-form configurations</span></span>
<span data-ttu-id="2d256-220">Na ploše hello zvukových ideální vlastní konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-220">On hello surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="2d256-221">Umožňují tooselect typ virtuálního počítače a poskytují libovolný počet uzlů a připojené disky pro tyto uzly – a učinit jako parametry tooa šablonu.</span><span class="sxs-lookup"><span data-stu-id="2d256-221">They allow you tooselect a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters tooa template.</span></span> <span data-ttu-id="2d256-222">Tento přístup je však není ideální pro některé scénáře.</span><span class="sxs-lookup"><span data-stu-id="2d256-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="2d256-223">V [velikosti virtuálních počítačů](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello různé typy virtuálních počítačů a dostupných velikostí jsou identifikovány a každý z hello počet trvale disky (2, 4, 8, 16 nebo 32), který lze připojit.</span><span class="sxs-lookup"><span data-stu-id="2d256-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello different VM types and available sizes are identified, and each of hello number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="2d256-224">Každý připojený disk poskytuje 500 IOPS a násobků, které z těchto disků může být ve fondu pro násobitel tohoto počtu IOPS.</span><span class="sxs-lookup"><span data-stu-id="2d256-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="2d256-225">Například 16 disků může být ve fondu tooprovide 8000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="2d256-225">For example, 16 disks can be pooled tooprovide 8,000 IOPS.</span></span> <span data-ttu-id="2d256-226">Sdružování se provádí s konfigurací v hello operačního systému, pomocí prostorů úložiště Microsoft Windows nebo redundantní pole málo nákladných disků (RAID) v systému Linux.</span><span class="sxs-lookup"><span data-stu-id="2d256-226">Pooling is done with configuration in hello operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="2d256-227">Vlastní konfigurace umožňuje výběr hello několik instancí virtuálních počítačů, virtuální počítač různé typy a velikosti pro tyto instance různých disků pro hello typ virtuálního počítače a jeden nebo více skriptů tooconfigure hello virtuálních počítačů obsah.</span><span class="sxs-lookup"><span data-stu-id="2d256-227">A free-form configuration enables hello selection several VM instances, various VM types and sizes for those instances, various disks for hello VM type, and one or more scripts tooconfigure hello VM contents.</span></span>

<span data-ttu-id="2d256-228">Je běžné, že nasazení může mít víc typů uzlů, jako je hlavní server a datové uzly, tak tuto flexibilitu potřebují je často poskytnuté pro každý typ uzlu.</span><span class="sxs-lookup"><span data-stu-id="2d256-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="2d256-229">Když začnete toodeploy clustery žádné násobek, začnete toowork se tyto složité scénáře.</span><span class="sxs-lookup"><span data-stu-id="2d256-229">As you start toodeploy clusters of any significance, you begin toowork with these complex scenarios.</span></span> <span data-ttu-id="2d256-230">Pokud byly nasazení clusteru Hadoop, například s 8 řídicí uzly a uzly 200 dat a ve fondu 4 připojených disků na každý hlavní uzel a ve fondu 16 připojených disků na jeden uzel dat by máte 208 virtuální počítače a toomanage 3,232 disky.</span><span class="sxs-lookup"><span data-stu-id="2d256-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks toomanage.</span></span>

<span data-ttu-id="2d256-231">Účet úložiště bude omezení jeho identifikovaných 20 000 transakcí za sekundu omezit, tak, aby měli podívejte se na vytváření oddílů účtu úložiště a výpočty, že toodetermine hello odpovídající počet úložiště účtů tooaccommodate Tato topologie, použijte výše uvedené požadavky.</span><span class="sxs-lookup"><span data-stu-id="2d256-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations toodetermine hello appropriate number of storage accounts tooaccommodate this topology.</span></span> <span data-ttu-id="2d256-232">Zadané hello velkého množství kombinace nepodporuje hello volného formátu přístup, dynamické výpočty jsou požadované toodetermine hello příslušné oddíly.</span><span class="sxs-lookup"><span data-stu-id="2d256-232">Given hello multitude of combinations supported by hello free-form approach, dynamic calculations are required toodetermine hello appropriate partitioning.</span></span> <span data-ttu-id="2d256-233">Hello jazyk šablony Azure Resource Manager v současné době neposkytuje matematické funkce, takže je nutné provést tyto výpočty v kódu, generování šablonu jedinečné, pevně s hello příslušné podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="2d256-233">hello Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with hello appropriate details.</span></span>

<span data-ttu-id="2d256-234">V podnikovém IT a ve scénářích někdo musí udržovat hello šablony a podporovat hello nasazené topologie pro jeden nebo více organizace.</span><span class="sxs-lookup"><span data-stu-id="2d256-234">In enterprise IT and SI scenarios, someone must maintain hello templates and support hello deployed topologies for one or more organizations.</span></span> <span data-ttu-id="2d256-235">Tato další režii – různých konfigurací a šablony pro každého zákazníka – je daleko od žádoucí.</span><span class="sxs-lookup"><span data-stu-id="2d256-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="2d256-236">Můžete použít tyto šablony toodeploy prostředí v rámci předplatného Azure vašich zákazníků, ale podnikové IT týmy i sdílené svazky clusteru obvykle nasazení je do svých vlastních předplatných, pomocí funkce toobill vrácení peněz zákazníků.</span><span class="sxs-lookup"><span data-stu-id="2d256-236">You can use these templates toodeploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function toobill their customers.</span></span> <span data-ttu-id="2d256-237">V těchto scénářích hello cílem je toodeploy kapacity pro několik zákazníků napříč fond odběry a udržování nasazení hustě importují do živelný hello odběry toominimize předplatné růst – to znamená další toomanage odběry.</span><span class="sxs-lookup"><span data-stu-id="2d256-237">In these scenarios, hello goal is toodeploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into hello subscriptions toominimize subscription sprawl—that is, more subscriptions toomanage.</span></span> <span data-ttu-id="2d256-238">S velikostí skutečně dynamické nasazení dosažení tento typ hustotu vyžaduje pečlivé plánování a další vývoj pro generování uživatelského rozhraní pracovní jménem organizace hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of hello organization.</span></span>

<span data-ttu-id="2d256-239">Kromě toho nelze vytvářet odběry prostřednictvím volání rozhraní API ale musíte to provést ručně přes portál hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-239">In addition, you can’t create subscriptions via an API call but must do so manually through hello portal.</span></span> <span data-ttu-id="2d256-240">Při rostoucí hello počet odběrů, všechny výsledné živelný růst předplatné vyžaduje lidského zásahu – nelze je možné automatizovat.</span><span class="sxs-lookup"><span data-stu-id="2d256-240">As hello number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="2d256-241">S mnoho variabilita hello velikosti nasazení byste měli toopre-provision počet odběrů ručně tooensure odběry jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="2d256-241">With so much variability in hello sizes of deployments, you would have toopre-provision a number of subscriptions manually tooensure subscriptions are available.</span></span>

<span data-ttu-id="2d256-242">S ohledem na tyto faktory je přitažlivými méně než v první blush skutečně vlastní konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--hello-t-shirt-sizing-approach"></a><span data-ttu-id="2d256-243">Známé konfigurace – hello tričko velikosti přístup</span><span class="sxs-lookup"><span data-stu-id="2d256-243">Known configurations — hello t-shirt sizing approach</span></span>
<span data-ttu-id="2d256-244">Spíše než nabízí šablonu, která poskytuje celkový flexibilitu a obrovském množství variant, v našich zkušeností běžný vzor je tooprovide hello možnost tooselect známé konfigurace – ve skutečnosti standardní tričko velikosti například izolovaného prostoru, malé, střední a velké.</span><span class="sxs-lookup"><span data-stu-id="2d256-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is tooprovide hello ability tooselect known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="2d256-245">Další příklady tričko velikosti jsou nabídky produktů, jako je například community edition nebo enterprise edition.</span><span class="sxs-lookup"><span data-stu-id="2d256-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="2d256-246">V jiných případech může být určeného pro konkrétní úlohy konfigurace technologii – například mapy snížit nebo žádné sql.</span><span class="sxs-lookup"><span data-stu-id="2d256-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="2d256-247">Mnoho podnikových IT organizace, operačních systémů dodavatelů a SIs zpřístupnit jejich nabídky dnes tímto způsobem ve virtualizovaných prostředích (podniky) na místě, nebo jako nabídek softwaru jako služby (SaaS), (sdílené svazky clusteru a OSVs).</span><span class="sxs-lookup"><span data-stu-id="2d256-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="2d256-248">Tento přístup poskytuje dobrý, známé konfigurace různou velikost předem konfigurovaných pro zákazníky.</span><span class="sxs-lookup"><span data-stu-id="2d256-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="2d256-249">Bez známé konfigurace musí koncovým zákazníkům určení velikosti clusteru samostatně, zohlednit v omezení prostředků platformy a proveďte matematické tooidentify hello výsledná oddíly účty úložiště a dalším prostředkům (z důvodu toocluster velikost a prostředků omezení).</span><span class="sxs-lookup"><span data-stu-id="2d256-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math tooidentify hello resulting partitioning of storage accounts and other resources (due toocluster size and resource constraints).</span></span> <span data-ttu-id="2d256-250">Známé konfigurace povolit zákazníkům tooeasily vyberte hello správnou tričko velikost – to znamená, dané nasazení.</span><span class="sxs-lookup"><span data-stu-id="2d256-250">Known configurations enable customers tooeasily select hello right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="2d256-251">Kromě toho toomaking lepší prostředí pro hello zákazníka, malý počet známé konfigurace je snazší toosupport a mohou vám pomoci poskytovat vyšší úroveň hustotou.</span><span class="sxs-lookup"><span data-stu-id="2d256-251">In addition toomaking a better experience for hello customer, a small number of known configurations is easier toosupport and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="2d256-252">O přístupu známé konfigurace zaměřené na velikosti tričko také může mít různý počet uzlů v rámci velikost.</span><span class="sxs-lookup"><span data-stu-id="2d256-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="2d256-253">Malá velikost trička může být například mezi uzly 3 až 10.</span><span class="sxs-lookup"><span data-stu-id="2d256-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="2d256-254">Velikost trička Hello by být navrženou tooaccommodate až too10 uzly a zadejte příjemce hello možnost toomake volného formátu výběr až toohello maximální velikost identifikovat hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-254">hello t-shirt size would be designed tooaccommodate up too10 nodes and provide hello consumer hello ability toomake free form selections up toohello maximum size identified.</span></span>  

<span data-ttu-id="2d256-255">Velikost trička, v závislosti na typu úloh, může být více volného formátu ve své podstatě z hlediska hello počet uzlů, které mohou být nasazeny, ale bude mít odlišné uzlu velikosti pracovního vytížení a konfigurace softwaru hello na uzlu hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-255">A t-shirt size based on workload type, may be more free form in nature in terms of hello number of nodes that can be deployed but will have workload distinct node size and configuration of hello software on hello node.</span></span>

<span data-ttu-id="2d256-256">Tričko velikosti podle nabídky produktů, například komunity nebo Enterprise, může mít typy různých prostředků a maximální počet uzlů, které mohou být nasazeny, obvykle svázané toolicensing aspekty nebo dostupnosti funkce napříč hello jiné nabídky.</span><span class="sxs-lookup"><span data-stu-id="2d256-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied toolicensing considerations or feature availability across hello different offerings.</span></span>

<span data-ttu-id="2d256-257">Bylo možné ošetřit zákazníků s jedinečný variant pomocí šablon na základě JSON hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-257">You can also accommodate customers with unique variants using hello JSON-based templates.</span></span> <span data-ttu-id="2d256-258">Při plánování práce s odlehlé hodnoty, můžete začlenit hello odpovídající plánování a důležité informace pro vývoj, podpory a výpočet nákladů.</span><span class="sxs-lookup"><span data-stu-id="2d256-258">When dealing with outliers, you can incorporate hello appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="2d256-259">Na základě hello zákazníka šablony spotřeba scénáře a požadavky identifikovat při spuštění hello tohoto dokumentu se myslíme, vzor šablony rozložením.</span><span class="sxs-lookup"><span data-stu-id="2d256-259">Based on hello customer template consumption scenarios, and requirements identified at hello start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="2d256-260">Kapacity a schopností obor řešení šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="2d256-261">Rozložením poskytuje vývoj tootemplate modulární přístup, který podporuje opakované použití, rozšiřitelnosti, testování a nástrojů.</span><span class="sxs-lookup"><span data-stu-id="2d256-261">Decomposition provides a modular approach tootemplate development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="2d256-262">Tato část obsahuje podrobnosti o jak rozložením přístup může být použité tootemplates s rozsahem kapacity nebo funkce.</span><span class="sxs-lookup"><span data-stu-id="2d256-262">This section provides detail on how a decomposition approach can be applied tootemplates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="2d256-263">V tento postup hlavní šablonu přijímá hodnoty parametrů z šablony příjemce, a potom po proudu odkazy tooseveral typů šablon a skripty, jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="2d256-263">In this approach, a main template receives parameter values from a template consumer, then links tooseveral types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="2d256-264">Parametry, statické proměnné a vygenerovaný proměnné jsou hodnoty používané tooprovide směřující hello propojené šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-264">Parameters, static variables, and generated variables are used tooprovide values in and out of hello linked templates.</span></span>

![Parametry šablony](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="2d256-266">**Parametry se jí předávají tooa hlavní šablony pak toolinked šablony**</span><span class="sxs-lookup"><span data-stu-id="2d256-266">**Parameters are passed tooa main template then toolinked templates**</span></span>

<span data-ttu-id="2d256-267">Následující části fokus na hello typů šablon a skripty, které je jediné šabloně rozložit na Hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-267">hello following sections focus on hello types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="2d256-268">Hello části jsou uvedeny přístupy k předání informace o stavu mezi hello šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-268">hello sections present approaches for passing state information among hello templates.</span></span> <span data-ttu-id="2d256-269">Každý typ skriptu šablony a hello hello obrázku jsou popsány společně s příklady.</span><span class="sxs-lookup"><span data-stu-id="2d256-269">Each template and hello script types in hello image are described along with examples.</span></span> <span data-ttu-id="2d256-270">Kontextová příklad najdete v tématu "jeho uvedení společně: Ukázka implementace" dále v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="2d256-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="2d256-271">Metadata šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-271">Template metadata</span></span>
<span data-ttu-id="2d256-272">Metadata šablony (soubor metadata.json hello) obsahuje dvojice klíč/hodnota, které popisují šablonu ve formátu JSON, který může číst člověkem a systémy softwaru.</span><span class="sxs-lookup"><span data-stu-id="2d256-272">Template metadata (hello metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Metadata šablony](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="2d256-274">**Metadata šablony je popsaný v souboru metadata.json hello**</span><span class="sxs-lookup"><span data-stu-id="2d256-274">**Template metadata is described in hello metadata.json file**</span></span>

<span data-ttu-id="2d256-275">Agenti softwaru můžete načíst soubor metadata.json hello a publikovat hello informace a šablonu toohello odkaz na webovou stránku nebo adresář.</span><span class="sxs-lookup"><span data-stu-id="2d256-275">Software agents can retrieve hello metadata.json file and publish hello information and a link toohello template in a web page or directory.</span></span> <span data-ttu-id="2d256-276">Prvky patří *itemDisplayName*, *popis*, *souhrnné*, *githubUsername*, a *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="2d256-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="2d256-277">Příklad souboru jsou uvedeny níže v celé jeho šíři.</span><span class="sxs-lookup"><span data-stu-id="2d256-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. hello database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="2d256-278">Hlavní šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-278">Main template</span></span>
<span data-ttu-id="2d256-279">Hlavní šablona Hello přijímá parametry od uživatele, používá proměnné komplexní objekt toopopulate této informace a provede hello propojené šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-279">hello main template receives parameters from a user, uses that information toopopulate complex object variables, and executes hello linked templates.</span></span>

![Hlavní šablony](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="2d256-281">**hlavní šablonu Hello přijímá parametry od uživatele.**</span><span class="sxs-lookup"><span data-stu-id="2d256-281">**hello main template receives parameters from a user**</span></span>

<span data-ttu-id="2d256-282">Jeden parametr, který je k dispozici je typ známé konfigurace také označované jako hello parametr velikosti tričko z důvodu jeho standardizované hodnoty, například malé, střední nebo velké.</span><span class="sxs-lookup"><span data-stu-id="2d256-282">One parameter that is provided is a known configuration type also known as hello t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="2d256-283">V praxi můžete tento parametr několika způsoby.</span><span class="sxs-lookup"><span data-stu-id="2d256-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="2d256-284">Podrobnosti najdete v tématu "Známé konfigurace prostředků šablona" dál v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="2d256-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="2d256-285">Některé prostředky nasadí bez ohledu na to hello známé konfigurace určený parametrem uživatele.</span><span class="sxs-lookup"><span data-stu-id="2d256-285">Some resources are deployed regardless of hello known configuration specified by a user parameter.</span></span> <span data-ttu-id="2d256-286">Tyto prostředky se zřizují pomocí šablony jeden sdílený prostředek a jsou sdíleny jiné šablony, takže hello sdílený prostředek šablony je spustit jako první.</span><span class="sxs-lookup"><span data-stu-id="2d256-286">These resources are provisioned using a single shared resource template and are shared by other templates, so hello shared resource template is run first.</span></span>

<span data-ttu-id="2d256-287">Některé prostředky jsou nasazeny volitelně bez ohledu na zadaný známé konfigurace hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-287">Some resources are deployed optionally regardless of hello specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="2d256-288">Sdílené prostředky šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-288">Shared resources template</span></span>
<span data-ttu-id="2d256-289">Tato šablona poskytuje prostředky, které jsou společné pro všechny známé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="2d256-290">Obsahuje hello virtuální sítě, skupiny dostupnosti a další prostředky, které se vyžadují bez ohledu na to hello známé konfigurace šablony, která je nasazena.</span><span class="sxs-lookup"><span data-stu-id="2d256-290">It contains hello virtual network, availability sets, and other resources that are required regardless of hello known configuration template that is deployed.</span></span>

![Šablony prostředků](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="2d256-292">**Sdílené prostředky šablony**</span><span class="sxs-lookup"><span data-stu-id="2d256-292">**Shared resources template**</span></span>

<span data-ttu-id="2d256-293">Názvy prostředků, jako je například hello název virtuální sítě, jsou založené na šabloně hlavní hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-293">Resource names, such as hello virtual network name, are based on hello main template.</span></span> <span data-ttu-id="2d256-294">Můžete je zadat jako proměnné v rámci dané šablony nebo přijímat jako parametr od uživatele hello podle požadavků vaší organizace.</span><span class="sxs-lookup"><span data-stu-id="2d256-294">You can specify them as a variable within that template or receive them as a parameter from hello user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="2d256-295">Volitelné prostředků šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-295">Optional resources template</span></span>
<span data-ttu-id="2d256-296">Šablona Hello volitelné prostředků obsahuje prostředky, které jsou nasazeny prostřednictvím kódu programu na základě hodnoty hello parametr nebo proměnná.</span><span class="sxs-lookup"><span data-stu-id="2d256-296">hello optional resources template contains resources that are programmatically deployed based on hello value of a parameter or variable.</span></span>

![Volitelné prostředky](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="2d256-298">**Volitelné prostředků šablony**</span><span class="sxs-lookup"><span data-stu-id="2d256-298">**Optional resources template**</span></span>

<span data-ttu-id="2d256-299">Například můžete použít volitelné prostředků šablony tooconfigure jumpbox, která umožňuje prostředí tooa nasazené nepřímý přístup z hello veřejného Internetu.</span><span class="sxs-lookup"><span data-stu-id="2d256-299">For example, you can use an optional resources template tooconfigure a jumpbox that enables indirect access tooa deployed environment from hello public Internet.</span></span> <span data-ttu-id="2d256-300">Parametr nebo proměnná tooidentify byste použili, zda by měla být povolená hello jumpbox a hello *concat* funkce, jako název cílového hello toobuild hello šablony *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="2d256-300">You would use a parameter or variable tooidentify whether hello jumpbox should be enabled and hello *concat* function toobuild hello target name for hello template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="2d256-301">Propojování šablony využije hello výsledné proměnné tooinstall hello jumpbox.</span><span class="sxs-lookup"><span data-stu-id="2d256-301">Template linking would use hello resulting variable tooinstall hello jumpbox.</span></span>

<span data-ttu-id="2d256-302">Můžete propojit hello šablony volitelné prostředky z několika míst:</span><span class="sxs-lookup"><span data-stu-id="2d256-302">You can link hello optional resources template from multiple places:</span></span>

* <span data-ttu-id="2d256-303">Při nasazení příslušné tooevery vytvořit odkaz řízené parametry z hello sdílených prostředků šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-303">When applicable tooevery deployment, create a parameter-driven link from hello shared resources template.</span></span>
* <span data-ttu-id="2d256-304">Pokud příslušné tooselect známé konfigurace – například nainstalovat pouze na velkých nasazeních – vytvořit odkaz řízené parametr nebo proměnná řízené z hello známé konfigurace šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-304">When applicable tooselect known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from hello known configuration template.</span></span>

<span data-ttu-id="2d256-305">Zda je daný prostředek volitelné nemusí bude týkat hello šablony příjemce ale poskytovatelem hello šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-305">Whether a given resource is optional may not be driven by hello template consumer but instead by hello template provider.</span></span> <span data-ttu-id="2d256-306">Například může potřebovat toosatisfy požadavek konkrétní produkt nebo doplňkem produktu (společné pro sdílené svazky clusteru) nebo zásady tooenforce (common pro službu SIs a enterprise IT skupiny).</span><span class="sxs-lookup"><span data-stu-id="2d256-306">For example, you may need toosatisfy a particular product requirement or product add-on (common for CSVs) or tooenforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="2d256-307">V těchto případech můžete proměnné tooidentify, zda by měly být nasazeny hello prostředků.</span><span class="sxs-lookup"><span data-stu-id="2d256-307">In these cases, you can use a variable tooidentify whether hello resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="2d256-308">Známé konfigurace prostředků šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-308">Known configuration resources template</span></span>
<span data-ttu-id="2d256-309">V šabloně hlavní hello může být parametr zveřejněné tooallow hello šablony příjemce toospecify toodeploy požadované známé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-309">In hello main template, a parameter can be exposed tooallow hello template consumer toospecify a desired known configuration toodeploy.</span></span> <span data-ttu-id="2d256-310">Tato známé konfigurace často používá o přístupu velikost tričko s nastavenou velikostí pevné konfigurace, například izolovaného prostoru, malé, střední a velké.</span><span class="sxs-lookup"><span data-stu-id="2d256-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Známé konfigurace prostředků](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="2d256-312">**Známé konfigurace prostředků šablony**</span><span class="sxs-lookup"><span data-stu-id="2d256-312">**Known configuration resources template**</span></span>

<span data-ttu-id="2d256-313">Hello tričko velikost přístup se běžně používá, ale parametry hello může představovat libovolnou sadu známé konfigurace.</span><span class="sxs-lookup"><span data-stu-id="2d256-313">hello t-shirt size approach is commonly used, but hello parameters can represent any set of known configurations.</span></span> <span data-ttu-id="2d256-314">Můžete například zadat sadu prostředí pro podniková aplikace například vývoj, testování a produktu.</span><span class="sxs-lookup"><span data-stu-id="2d256-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="2d256-315">Nebo můžete ho použít pro toorepresent cloudové služby, jiný škálování jednotky, verze produktu nebo konfigurace produktu, jako je například komunity, Developer a Enterprise.</span><span class="sxs-lookup"><span data-stu-id="2d256-315">Or you could use it for a cloud service toorepresent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="2d256-316">Stejně jako u hello sdílený prostředek šablony, jsou proměnné předat toohello známé konfigurace šablony z buď:</span><span class="sxs-lookup"><span data-stu-id="2d256-316">As with hello shared resource template, variables are passed toohello known configurations template from either:</span></span>

* <span data-ttu-id="2d256-317">Koncový uživatel – to znamená, hello parametry odeslané toohello hlavní šablony.</span><span class="sxs-lookup"><span data-stu-id="2d256-317">An end user—that is, hello parameters sent toohello main template.</span></span>
* <span data-ttu-id="2d256-318">Organizace – to znamená, hello variables v šabloně hlavní hello, které představují vnitřní požadavky nebo zásady.</span><span class="sxs-lookup"><span data-stu-id="2d256-318">An organization—that is, hello variables in hello main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="2d256-319">Člen prostředků šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-319">Member resources template</span></span>
<span data-ttu-id="2d256-320">V rámci známé konfigurace jsou často jeden nebo více typů člen uzlu zahrnuty.</span><span class="sxs-lookup"><span data-stu-id="2d256-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="2d256-321">Například s Hadoop máte řídicí uzly a datové uzly.</span><span class="sxs-lookup"><span data-stu-id="2d256-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="2d256-322">Pokud instalujete MongoDB, máte datové uzly a arbiter.</span><span class="sxs-lookup"><span data-stu-id="2d256-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="2d256-323">Pokud nasazujete DataStax, máte datové uzly a virtuální počítač s OpsCenter nainstalována.</span><span class="sxs-lookup"><span data-stu-id="2d256-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Členové zdroje](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="2d256-325">**Člen prostředků šablony**</span><span class="sxs-lookup"><span data-stu-id="2d256-325">**Member resources template**</span></span>

<span data-ttu-id="2d256-326">Každý typ uzly mají různé velikosti virtuálních počítačů, počtu připojených disků, tooinstall skripty a nastavit hello uzlů, konfigurace portů pro hello virtuálních počítačů, počet instancí a další podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="2d256-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts tooinstall and set up hello nodes, port configurations for hello VMs, number of instances, and other details.</span></span> <span data-ttu-id="2d256-327">Tak, že každý typ uzlu získá svůj vlastní člen prostředku šablony, která obsahuje hello podrobnosti o nasazení a konfiguraci infrastruktury a také provádění toodeploy skripty a nakonfigurujte software v rámci hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="2d256-327">So each node type gets its own member resource template, which contains hello details for deploying and configuring an infrastructure as well as executing scripts toodeploy and configure software within hello VM.</span></span>

<span data-ttu-id="2d256-328">U virtuálních počítačů jsou obvykle dva typy skripty použité, široce opakovaně použitelný a vlastní skripty.</span><span class="sxs-lookup"><span data-stu-id="2d256-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="2d256-329">Široce opakovaně použitelné skripty</span><span class="sxs-lookup"><span data-stu-id="2d256-329">Widely reusable scripts</span></span>
<span data-ttu-id="2d256-330">Široce opakovaně použitelné skripty lze napříč více typů šablon.</span><span class="sxs-lookup"><span data-stu-id="2d256-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="2d256-331">Jeden z hello lepší příklady tyto skripty široce opakovaně použitelné nastaví RAID na discích toopool Linux a získat větší počet IOPS.</span><span class="sxs-lookup"><span data-stu-id="2d256-331">One of hello better examples of these widely reusable scripts sets up RAID on Linux toopool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="2d256-332">Bez ohledu na to hello software instalován v hello virtuálních počítačů poskytuje tento skript opakované použití osvědčené postupy pro běžné scénáře.</span><span class="sxs-lookup"><span data-stu-id="2d256-332">Regardless of hello software being installed in hello VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Skriptů pro opakované použití](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="2d256-334">**Šablony členských prostředků můžete volat široce opakovaně použitelné skripty**</span><span class="sxs-lookup"><span data-stu-id="2d256-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="2d256-335">Vlastní skripty</span><span class="sxs-lookup"><span data-stu-id="2d256-335">Custom scripts</span></span>
<span data-ttu-id="2d256-336">Šablony běžně volání jeden nebo více skripty, které instalace a konfigurace softwaru v rámci virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="2d256-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="2d256-337">Běžný vzor se seznámili s velké topologie, kde jsou nasazeny více instancí jedné nebo více typy členů.</span><span class="sxs-lookup"><span data-stu-id="2d256-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="2d256-338">Instalační skript se zahájí pro každý virtuální počítač, který může běžet paralelně, za nímž následuje instalační skript, která je volána po všech virtuálních počítačů (nebo všech virtuálních počítačů typu daný člen) jsou nasazeny.</span><span class="sxs-lookup"><span data-stu-id="2d256-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Vlastní skripty](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="2d256-340">**Šablony členských prostředků můžete volat skripty pro specifické účely, například konfigurace virtuálního počítače**</span><span class="sxs-lookup"><span data-stu-id="2d256-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="2d256-341">Příklad šablony funkce obor řešení - Redis</span><span class="sxs-lookup"><span data-stu-id="2d256-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="2d256-342">tooshow způsobu implementace mohou fungovat, podíváme se na praktický příklad vytvoření šablony, která usnadňuje hello nasazení a konfiguraci Redis v standardní tričko velikosti.</span><span class="sxs-lookup"><span data-stu-id="2d256-342">tooshow how an implementation might work, let's look at a practical example of building a template that facilitates hello deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="2d256-343">Pro nasazení hello jsou sadu sdílené prostředky (virtuální sítě, účet úložiště, skupiny dostupnosti) a prostředek volitelné (jumpbox).</span><span class="sxs-lookup"><span data-stu-id="2d256-343">For hello deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="2d256-344">Existuje více známé konfigurace vyjádřené tričko velikosti (malé, střední, velký), ale každý do jednoho uzlu zadejte.</span><span class="sxs-lookup"><span data-stu-id="2d256-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="2d256-345">Existují také dva skripty zaměřené na konkrétní účel (instalace, konfigurace).</span><span class="sxs-lookup"><span data-stu-id="2d256-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-hello-template-files"></a><span data-ttu-id="2d256-346">Vytváření hello šablony souborů</span><span class="sxs-lookup"><span data-stu-id="2d256-346">Creating hello template files</span></span>
<span data-ttu-id="2d256-347">Vytvoříte hlavní šablonu s názvem azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="2d256-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="2d256-348">Vytvoření sdílené prostředky šablony s názvem sdílené resources.json</span><span class="sxs-lookup"><span data-stu-id="2d256-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="2d256-349">Vytvořte volitelné šablony prostředků tooenable hello nasazení jumpbox, s názvem jumpbox_enabled.json</span><span class="sxs-lookup"><span data-stu-id="2d256-349">You create an Optional Resource Template tooenable hello deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="2d256-350">Redis používá jenom jeden uzel typu, takže vytvoříte jeden šablonu prostředků člen s názvem resources.json uzlu.</span><span class="sxs-lookup"><span data-stu-id="2d256-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="2d256-351">S Redis má tooinstall každé jednotlivé uzel a potom nastavte hello cluster.</span><span class="sxs-lookup"><span data-stu-id="2d256-351">With Redis, you want tooinstall each individual node, and then set up hello cluster.</span></span>  <span data-ttu-id="2d256-352">Máte skripty tooaccommodate hello instalace a nastavení, redis-cluster-install.sh a redis-cluster-setup.sh.</span><span class="sxs-lookup"><span data-stu-id="2d256-352">You have scripts tooaccommodate hello installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-hello-templates"></a><span data-ttu-id="2d256-353">Propojování hello šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-353">Linking hello templates</span></span>
<span data-ttu-id="2d256-354">Pomocí šablony propojení, hello hlavní šablonu odkazy na šablony toohello sdílené prostředky, které vytváří hello virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="2d256-354">Using template linking, hello main template links out toohello shared resources template, which establishes hello virtual network.</span></span>

<span data-ttu-id="2d256-355">Zda mají být nasazeny jumpbox, přidá se logiky v rámci hello hlavní šablonu tooenable spotřebiteli toospecify šablony hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-355">Logic is added within hello main template tooenable consumers of hello template toospecify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="2d256-356">*Povoleno* hodnotu hello *EnableJumpbox* parametr označuje tohoto zákazníka hello chce toodeploy jumpbox.</span><span class="sxs-lookup"><span data-stu-id="2d256-356">An *enabled* value for hello *EnableJumpbox* parameter indicates that hello customer wants toodeploy a jumpbox.</span></span> <span data-ttu-id="2d256-357">Pokud je tato hodnota je zadaný, šablony hello zřetězí *_enabled* jako název příponu tooa základní šablony pro funkci jumpbox hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-357">When this value is provided, hello template concatenates *_enabled* as a suffix tooa base template name for hello jumpbox capability.</span></span>

<span data-ttu-id="2d256-358">Hlavní šablona Hello platí hello *velké* parametr hodnotu jako název základní šablony tooa příponu tričko velikosti a pak používá tuto hodnotu v šabloně propojení se příliš*technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="2d256-358">hello main template applies hello *large* parameter value as a suffix tooa base template name for t-shirt sizes, and then uses that value in a template link out too*technology_on_os_large.json*.</span></span>

<span data-ttu-id="2d256-359">topologie Hello by vypadat podobně jako na obrázku.</span><span class="sxs-lookup"><span data-stu-id="2d256-359">hello topology would resemble this illustration.</span></span>

![Redis šablony](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="2d256-361">**Struktura šablony pro šablonu Redis**</span><span class="sxs-lookup"><span data-stu-id="2d256-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="2d256-362">Konfigurace stavu</span><span class="sxs-lookup"><span data-stu-id="2d256-362">Configuring state</span></span>
<span data-ttu-id="2d256-363">Pro hello uzly v clusteru hello existují dva kroky tooconfiguring hello stavu, obě reprezentována skriptů pro konkrétní účel.</span><span class="sxs-lookup"><span data-stu-id="2d256-363">For hello nodes in hello cluster, there are two steps tooconfiguring hello state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="2d256-364">Redis nainstaluje "redis-cluster-install.sh" a "redis-cluster-setup.sh" nastavuje hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="2d256-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up hello cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="2d256-365">Podpora nasazení jinou velikost</span><span class="sxs-lookup"><span data-stu-id="2d256-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="2d256-366">Uvnitř proměnné, hello tričko velikost šablona určuje hello počet uzlů každého typu toodeploy pro hello zadat velikost (*velké*).</span><span class="sxs-lookup"><span data-stu-id="2d256-366">Inside variables, hello t-shirt size template specifies hello number of nodes of each type toodeploy for hello specified size (*large*).</span></span> <span data-ttu-id="2d256-367">Se pak nasadí počet instancí virtuálního počítače pomocí smyčky prostředků, poskytuje jedinečné názvy tooresources připojením název uzlu s číslem číselného pořadí z *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="2d256-367">It then deploys that number of VM instances using resource loops, providing unique names tooresources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="2d256-368">Nemá těchto kroků pro oba virtuální počítače horká a záložním zóny, jak jsou definovány v hello tričko název šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-368">It does these steps for both hot and warm zone VMs, as defined in hello t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="2d256-369">Rozložením a začátku do konce řešení obor šablony</span><span class="sxs-lookup"><span data-stu-id="2d256-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="2d256-370">Šablona řešení s oborem začátku do konce řešení se zaměřuje na-komplexní řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="2d256-371">Tento přístup je obvykle složení více šablon funkce obor s další prostředky, logiku a stavu.</span><span class="sxs-lookup"><span data-stu-id="2d256-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="2d256-372">Jak je znázorněno v následující obrázek hello hello stejný model používá pro šablony funkce obor je rozšířeno pro šablony s oborem řešení začátku do konce.</span><span class="sxs-lookup"><span data-stu-id="2d256-372">As highlighted in hello image below, hello same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="2d256-373">Sdílené prostředky šablony a volitelné šablony prostředků slouží hello stejnou funkci jako hello kapacity a schopností obor přístupy šablony, ale jsou určené pro hello end tooend řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-373">A Shared Resources Template and Optional Resources Templates serve hello same function as in hello capacity and capability scoped template approaches, but are scoped for hello end tooend solution.</span></span>

<span data-ttu-id="2d256-374">Jako obor end tooend řešení šablony také můžete obvykle mají i tričko velikosti, hello známé konfigurace prostředků šablony odráží se požaduje pro danou konfiguraci známé hello řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-374">As end tooend solution scoped templates also can typically have t-shirt sizes, hello Known Configuration Resources template reflects what is required for a given known configuration of hello solution.</span></span>

<span data-ttu-id="2d256-375">Hello známé konfigurace prostředků šablony odkazy tooone nebo další schopnosti obor šablony řešení, které jsou relevantní toohello end tooend řešení, jakož i hello šablony členských prostředků, které jsou požadovány pro hello end tooend řešení.</span><span class="sxs-lookup"><span data-stu-id="2d256-375">hello Known Configuration Resources Template links tooone or more capability scoped solution templates that are relevant toohello end tooend solution as well as hello Member Resource Templates that are required for hello end tooend solution.</span></span>

<span data-ttu-id="2d256-376">Velikost trička hello hello řešení může být jiný než hello jednotlivé funkce obor šablona, jsou proměnné v rámci hello známé konfigurace prostředků šablony použité tooprovide hello odpovídající hodnoty pro příjem dat schopností obor řešení šablony toodeploy hello odpovídající tričko velikost.</span><span class="sxs-lookup"><span data-stu-id="2d256-376">As hello t-shirt size of hello solution may be different than hello individual capability-scoped template, variables within hello Known Configuration Resources Template are used tooprovide hello appropriate values for downstream capability scoped solution templates toodeploy hello appropriate t-shirt size.</span></span>

![Klient server](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="2d256-378">**Hello model používá kapacity nebo schopností obor řešení šablony lze snadno rozšířit pro koncové tooend řešení šablony obory**</span><span class="sxs-lookup"><span data-stu-id="2d256-378">**hello model used for capacity or capability scoped solution templates can be readily extended for end tooend solution template scopes**</span></span>

## <a name="preparing-templates-for-hello-marketplace"></a><span data-ttu-id="2d256-379">Příprava šablony hello Marketplace.</span><span class="sxs-lookup"><span data-stu-id="2d256-379">Preparing templates for hello Marketplace</span></span>
<span data-ttu-id="2d256-380">Hello předcházející přístup snadno přizpůsobí situací, které podniky, SIs a sdílené svazky clusteru chcete tooeither nasazení šablon hello, sami nebo povolit jejich zákazníky toodeploy na své vlastní.</span><span class="sxs-lookup"><span data-stu-id="2d256-380">hello preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want tooeither deploy hello templates themselves or enable their customers toodeploy on their own.</span></span>

<span data-ttu-id="2d256-381">Další požadované scénář se nasazení šablony prostřednictvím hello marketplace.</span><span class="sxs-lookup"><span data-stu-id="2d256-381">Another desired scenario is deploying a template via hello marketplace.</span></span>  <span data-ttu-id="2d256-382">Tento přístup rozložením funguje pro hello marketplace taky s menšími změnami.</span><span class="sxs-lookup"><span data-stu-id="2d256-382">This decomposition approach works for hello marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="2d256-383">Jak je uvedeno nahoře, šablony může být odlišné nasazení typy používané toooffer pro prodej hello Marketplace.</span><span class="sxs-lookup"><span data-stu-id="2d256-383">As mentioned previously, templates can be used toooffer distinct deployment types for sale in hello marketplace.</span></span> <span data-ttu-id="2d256-384">Typy nasazení DISTINCT může být tričko velikosti (malé, střední, velký), typ produktu nebo cílové skupiny (komunity, developer, enterprise) nebo typ funkce (základní, vysoké dostupnosti).</span><span class="sxs-lookup"><span data-stu-id="2d256-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="2d256-385">Řešení nebo funkci, kterou vymezená šablony lze snadno použít jako vidíte níže, hello stávající koncové tooend toolist hello různé známé konfigurace hello Marketplace.</span><span class="sxs-lookup"><span data-stu-id="2d256-385">As shown below, hello existing end tooend solution or capability scoped templates can be readily utilized toolist hello different known configurations in hello marketplace.</span></span>

<span data-ttu-id="2d256-386">Hello parametry toohello hlavní šablona jsou nejprve změněna tooremove hello příchozí parametr s názvem tshirtSize.</span><span class="sxs-lookup"><span data-stu-id="2d256-386">hello parameters toohello main template are first modified tooremove hello inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="2d256-387">Při různých typů hello namapovat toohello známé konfigurace prostředků šablony, potřebují hello společných prostředků a konfigurace v nalezena hello sdílené prostředky šablony a potenciálně těmi ve volitelné šablony prostředků.</span><span class="sxs-lookup"><span data-stu-id="2d256-387">While hello distinct deployment types map toohello Known Configuration Resources Template, they also need hello common resources and configuration found in hello Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="2d256-388">Pokud chcete toopublish vaše šablona toohello marketplace, můžete vytvořit odlišné kopie vaší hlavní šablony, který nahrazuje hello dříve k dispozici příchozí parametr tshirtSize tooa proměnné vložené v šabloně hello.</span><span class="sxs-lookup"><span data-stu-id="2d256-388">If you want toopublish your template toohello marketplace, you establish distinct copies of your Main template that replaces hello previously available inbound parameter of tshirtSize tooa variable embedded within hello template.</span></span>

![Marketplace](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="2d256-390">**Přizpůsobení řešení obor šablonu pro hello marketplace**</span><span class="sxs-lookup"><span data-stu-id="2d256-390">**Adapting a solution scoped template for hello marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="2d256-391">Další kroky</span><span class="sxs-lookup"><span data-stu-id="2d256-391">Next steps</span></span>
* <span data-ttu-id="2d256-392">toolearn o sdílení stavu do a z šablony, najdete v části [sdílení stavu v šablonách Azure Resource Manager](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="2d256-392">toolearn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="2d256-393">Pokyny k použití Resource Manager tooeffectively podniky můžou spravovat předplatná najdete v tématu [Azure enterprise vygenerované uživatelské rozhraní – zásady správného řízení doporučený předplatné](resource-manager-subscription-governance.md).</span><span class="sxs-lookup"><span data-stu-id="2d256-393">For guidance on how enterprises can use Resource Manager tooeffectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

