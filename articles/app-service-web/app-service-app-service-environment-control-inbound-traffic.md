---
title: "aaaHow tooControl příchozí provoz tooan App Service Environment"
description: "Informace o tom, jak toocontrol pravidla zabezpečení sítě tooconfigure příchozí provoz tooan App Service Environment."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: e7c6e6201db6a1ea77f7a2eee29a3b5445175495
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="how-toocontrol-inbound-traffic-tooan-app-service-environment"></a><span data-ttu-id="ec72c-103">Jak tooControl příchozí provoz tooan App Service Environment</span><span class="sxs-lookup"><span data-stu-id="ec72c-103">How tooControl Inbound Traffic tooan App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="ec72c-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="ec72c-104">Overview</span></span>
<span data-ttu-id="ec72c-105">Služby App Service Environment se dají vytvářet v **buď** virtuální síť Azure Resource Manager **nebo** modelu nasazení classic [virtuální sítě][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="ec72c-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="ec72c-106">V době hello vytváření služby App Service Environment lze definovat nové virtuální sítě a novou podsíť.</span><span class="sxs-lookup"><span data-stu-id="ec72c-106">A new virtual network and new subnet can be defined at hello time an App Service Environment is created.</span></span>  <span data-ttu-id="ec72c-107">Služby App Service Environment Alternativně lze vytvořit v existující virtuální síť a existující podsíť.</span><span class="sxs-lookup"><span data-stu-id="ec72c-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="ec72c-108">S změny provedené v červnu 2016 ASEs také lze nasadit do virtuálních sítí, které používají rozsahů veřejných adres nebo RFC1918 adresní prostory (tj. privátní adresy).</span><span class="sxs-lookup"><span data-stu-id="ec72c-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span>  <span data-ttu-id="ec72c-109">Podrobnosti o vytvoření služby App Service Environment najdete v části [jak tooCreate služby App Service Environment][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="ec72c-109">For more details on creating an App Service Environment see [How tooCreate an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="ec72c-110">Služby App Service Environment musí vždy vytvořit v podsíti, protože podsíť poskytuje hranici sítě, který lze použít toolock dolů příchozí provoz za nadřazeného zařízení a služeb tak, aby přenosů dat HTTP a HTTPS je pouze přijímán z konkrétní nadřazeného IP adresy.</span><span class="sxs-lookup"><span data-stu-id="ec72c-110">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used toolock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="ec72c-111">Příchozí a odchozí síťový provoz na podsíť je řízena pomocí [skupinu zabezpečení sítě][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="ec72c-111">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="ec72c-112">Řízení příchozí provoz vyžaduje vytvoření pravidla zabezpečení sítě ve skupině zabezpečení sítě a pak přiřazení hello sítě zabezpečení skupiny hello podsíť obsahující hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-112">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning hello network security group hello subnet containing hello App Service Environment.</span></span>

<span data-ttu-id="ec72c-113">Jakmile skupinu zabezpečení sítě je přidělen tooa podsíť, tooapps příchozí provoz v App Service Environment není povolené nebo blokované podle hello hello povolit a zakázat pravidla definovaná v hello skupinu zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="ec72c-113">Once a network security group is assigned tooa subnet, inbound traffic tooapps in hello App Service Environment is allowed/blocked based on hello allow and deny rules defined in hello network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="ec72c-114">Příchozí síťové porty používané v prostředí služby App Service</span><span class="sxs-lookup"><span data-stu-id="ec72c-114">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="ec72c-115">Před zamykání příchozí síťový provoz s skupinu zabezpečení sítě, je důležité tooknow hello sadu požadované a volitelné síťové porty používané služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-115">Before locking down inbound network traffic with a network security group, it is important tooknow hello set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="ec72c-116">Omylem zavřením vypnout porty toosome provozu může dojít ke ztrátě funkcí ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-116">Accidentally closing off traffic toosome ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="ec72c-117">Hello následuje seznam portů používaných služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-117">hello following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="ec72c-118">Všechny porty jsou **TCP**, pokud není uvedeno jinak jasně:</span><span class="sxs-lookup"><span data-stu-id="ec72c-118">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="ec72c-119">454: **požadované port** používá infrastrukturu Azure pro správu a údržbu prostředí App Service přes SSL.</span><span class="sxs-lookup"><span data-stu-id="ec72c-119">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="ec72c-120">Provoz toothis portu nejsou blokovány.</span><span class="sxs-lookup"><span data-stu-id="ec72c-120">Do not block traffic toothis port.</span></span>  <span data-ttu-id="ec72c-121">Tento port je vždy vázané toohello veřejných virtuálních IP adres služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-121">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="ec72c-122">455: **požadované port** používá infrastrukturu Azure pro správu a údržbu prostředí App Service přes SSL.</span><span class="sxs-lookup"><span data-stu-id="ec72c-122">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="ec72c-123">Provoz toothis portu nejsou blokovány.</span><span class="sxs-lookup"><span data-stu-id="ec72c-123">Do not block traffic toothis port.</span></span>  <span data-ttu-id="ec72c-124">Tento port je vždy vázané toohello veřejných virtuálních IP adres služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-124">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="ec72c-125">80: výchozí port pro příchozí provoz tooapps HTTP spuštěné v plány služby App Service ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-125">80:  Default port for inbound HTTP traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="ec72c-126">Na povoleno ILB App Service Environment tento port je vázané toohello ILB adresa hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-126">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="ec72c-127">443: výchozí port pro příchozí provoz tooapps SSL spuštěné v plány služby App Service ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-127">443: Default port for inbound SSL traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="ec72c-128">Na povoleno ILB App Service Environment tento port je vázané toohello ILB adresa hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-128">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="ec72c-129">21: řídicí kanál pro službu FTP.</span><span class="sxs-lookup"><span data-stu-id="ec72c-129">21:  Control channel for FTP.</span></span>  <span data-ttu-id="ec72c-130">Tento port můžete bezpečně zablokuje, pokud není používán FTP.</span><span class="sxs-lookup"><span data-stu-id="ec72c-130">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="ec72c-131">Na povoleno ILB App Service Environment může být tento port vázané toohello ILB adresu pro App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-131">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="ec72c-132">990: řídicí kanál pro FTPS.</span><span class="sxs-lookup"><span data-stu-id="ec72c-132">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="ec72c-133">Tento port můžete bezpečně zablokuje, pokud není používán FTPS.</span><span class="sxs-lookup"><span data-stu-id="ec72c-133">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="ec72c-134">Na povoleno ILB App Service Environment může být tento port vázané toohello ILB adresu pro App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-134">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="ec72c-135">10001-10020: datové kanály pro službu FTP.</span><span class="sxs-lookup"><span data-stu-id="ec72c-135">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="ec72c-136">Jako s hello řídicí kanál, tyto porty lze bezpečně blokovat Pokud není používán FTP.</span><span class="sxs-lookup"><span data-stu-id="ec72c-136">As with hello control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="ec72c-137">Na povoleno ILB App Service Environment může být tento port vázané toohello App Service Environment pro ILB adresu.</span><span class="sxs-lookup"><span data-stu-id="ec72c-137">On an ILB-enabled ASE, this port can be bound toohello ASE's ILB address.</span></span>
* <span data-ttu-id="ec72c-138">4016: používá pro vzdálené ladění pomocí sady Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="ec72c-138">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="ec72c-139">Tento port můžete bezpečně zablokuje, pokud není používán hello funkce.</span><span class="sxs-lookup"><span data-stu-id="ec72c-139">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="ec72c-140">Na povoleno ILB App Service Environment tento port je vázané toohello ILB adresa hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-140">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="ec72c-141">4018: používá pro vzdálené ladění pomocí sady Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="ec72c-141">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="ec72c-142">Tento port můžete bezpečně zablokuje, pokud není používán hello funkce.</span><span class="sxs-lookup"><span data-stu-id="ec72c-142">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="ec72c-143">Na povoleno ILB App Service Environment tento port je vázané toohello ILB adresa hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-143">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="ec72c-144">4020: používá pro vzdálené ladění pomocí sady Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="ec72c-144">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="ec72c-145">Tento port můžete bezpečně zablokuje, pokud není používán hello funkce.</span><span class="sxs-lookup"><span data-stu-id="ec72c-145">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="ec72c-146">Na povoleno ILB App Service Environment tento port je vázané toohello ILB adresa hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-146">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="ec72c-147">Odchozí připojení a požadavky na DNS</span><span class="sxs-lookup"><span data-stu-id="ec72c-147">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="ec72c-148">Pro App Service Environment toofunction správně, je také vyžaduje odchozí přístup toovarious koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="ec72c-148">For an App Service Environment toofunction properly, it also requires outbound access toovarious endpoints.</span></span> <span data-ttu-id="ec72c-149">Úplný seznam hello externí koncové body používané App Service Environment je v části "Vyžaduje připojení k síti" hello hello [konfiguraci sítě pro ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) článku.</span><span class="sxs-lookup"><span data-stu-id="ec72c-149">A full list of hello external endpoints used by an ASE is in hello "Required Network Connectivity" section of hello [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="ec72c-150">Prostředí služby App Service vyžaduje platnou konfiguraci pro virtuální síť hello infrastruktury služby DNS.</span><span class="sxs-lookup"><span data-stu-id="ec72c-150">App Service Environments require a valid DNS infrastructure configured for hello virtual network.</span></span>  <span data-ttu-id="ec72c-151">Pokud pro všechny důvod hello dojde ke změně konfigurace DNS po vytvoření služby App Service Environment, vývojáři vynutit App Service Environment toopick až hello novou konfiguraci DNS.</span><span class="sxs-lookup"><span data-stu-id="ec72c-151">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="ec72c-152">Aktivuje restartu postupného prostředí pomocí hello "Restartovat" ikonu hello horní části okna Správa služby App Service Environment hello v hello [portál Azure] [ NewPortal] způsobí, že toopick prostředí hello až hello novou konfiguraci DNS.</span><span class="sxs-lookup"><span data-stu-id="ec72c-152">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="ec72c-153">Dále je doporučeno, aby žádné vlastní servery DNS v hello virtuální síti vnet se instalační program před čas předchozí toocreating služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-153">It is also recommended that any custom DNS servers on hello vnet be setup ahead of time prior toocreating an App Service Environment.</span></span>  <span data-ttu-id="ec72c-154">Pokud je při vytváření služby App Service Environment se změnila konfigurace DNS virtuální sítě, které způsobí selhání procesu vytvoření služby App Service Environment hello.</span><span class="sxs-lookup"><span data-stu-id="ec72c-154">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in hello App Service Environment creation process failing.</span></span>  <span data-ttu-id="ec72c-155">V souvislosti podobnou Pokud vlastní server DNS existuje na hello druhém konci VPN gateway a hello DNS server je nedostupná nebo není k dispozici, hello selžou i proces vytvoření služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-155">In a similar vein, if a custom DNS server exists on hello other end of a VPN gateway, and hello DNS server is unreachable or unavailable, hello App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="ec72c-156">Vytvoření skupiny zabezpečení sítě</span><span class="sxs-lookup"><span data-stu-id="ec72c-156">Creating a Network Security Group</span></span>
<span data-ttu-id="ec72c-157">Úplné podrobnosti o tom, jak fungují skupiny zabezpečení sítě najdete v tématu hello následující [informace][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="ec72c-157">For full details on how network security groups work see hello following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="ec72c-158">označuje níže úpravy v příkladu Azure Service Management Hello skupin zabezpečení sítě, se zaměřením na konfiguraci a použití podsíť tooa skupiny zabezpečení sítě, který obsahuje služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-158">hello Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group tooa subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="ec72c-159">**Poznámka:** skupin zabezpečení sítě pomocí se dají konfigurovat graficky hello [portálu Azure](https://portal.azure.com) nebo pomocí prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ec72c-159">**Note:** Network security groups can be configured graphically using hello [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="ec72c-160">Skupiny zabezpečení sítě jsou nejprve vytvořit jako samostatné entity přidružené předplatnému.</span><span class="sxs-lookup"><span data-stu-id="ec72c-160">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="ec72c-161">Vzhledem k tomu, že skupiny zabezpečení sítě je vytvořeno v oblasti Azure, zkontrolujte tuto skupinu zabezpečení sítě hello se vytvoří v hello stejné oblasti jako hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-161">Since network security groups are created in an Azure region, ensure that hello network security group is created in hello same region as hello App Service Environment.</span></span>

<span data-ttu-id="ec72c-162">Následující Hello ukazuje vytvoření skupiny zabezpečení sítě:</span><span class="sxs-lookup"><span data-stu-id="ec72c-162">hello following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="ec72c-163">Po vytvoření skupiny zabezpečení sítě je jeden nebo více pravidel zabezpečení sítě se přidají tooit.</span><span class="sxs-lookup"><span data-stu-id="ec72c-163">Once a network security group is created, one or more network security rules are added tooit.</span></span>  <span data-ttu-id="ec72c-164">Vzhledem k tomu, že hello sadu pravidel v průběhu času mění, doporučujeme toospace out hello schématu číslování se použijí pro pravidlo priority toomake ho snadno tooinsert další pravidla v čase.</span><span class="sxs-lookup"><span data-stu-id="ec72c-164">Since hello set of rules may change over time, it is recommended toospace out hello numbering scheme used for rule priorities toomake it easy tooinsert additional rules over time.</span></span>

<span data-ttu-id="ec72c-165">Následující příklad Hello ukazuje pravidlo, které explicitně udělí přístup toohello správu porty vyžadované toomanage hello infrastrukturu Azure a spravovat služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-165">hello example below shows a rule that explicitly grants access toohello management ports needed by hello Azure infrastructure toomanage and maintain an App Service Environment.</span></span>  <span data-ttu-id="ec72c-166">Všimněte si, že veškerý provoz správy probíhá přes protokol SSL a je zabezpečená službou klientské certifikáty, takže i když jsou otevřené porty hello budou nepřístupné všechny entita než infrastruktury pro správu Azure.</span><span class="sxs-lookup"><span data-stu-id="ec72c-166">Note that all management traffic flows over SSL and is secured by client certificates, so even though hello ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="ec72c-167">Při zamykání přístup tooport 80 a 443 příliš "schovat" služby App Service Environment za nadřazeného zařízení nebo služby, budete potřebovat tooknow hello nadřazeného IP adresu.</span><span class="sxs-lookup"><span data-stu-id="ec72c-167">When locking down access tooport 80 and 443 too"hide" an App Service Environment behind upstream devices or services, you will need tooknow hello upstream IP address.</span></span>  <span data-ttu-id="ec72c-168">Například pokud používáte brány firewall webových aplikací (firewall webových aplikací), hello firewall webových aplikací bude mít svůj vlastní IP adresu (nebo adresy), které používá při připojení přes proxy server provoz tooa podřízené App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-168">For example, if you are using a web application firewall (WAF), hello WAF will have its own IP address (or addresses) which it uses when proxying traffic tooa downstream App Service Environment.</span></span>  <span data-ttu-id="ec72c-169">Budete potřebovat toouse tuto IP adresu v hello *SourceAddressPrefix* parametr pravidla zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="ec72c-169">You will need toouse this IP address in hello *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="ec72c-170">V příkladu hello níže příchozí provoz z konkrétní IP adresu nadřazeného výslovně povolené.</span><span class="sxs-lookup"><span data-stu-id="ec72c-170">In hello example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="ec72c-171">Hello adresu *1.2.3.4* slouží jako zástupný symbol pro IP adresu hello nadřazenému firewall webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="ec72c-171">hello address *1.2.3.4* is used as a placeholder for hello IP address of an upstream WAF.</span></span>  <span data-ttu-id="ec72c-172">Změnit hello hodnota toomatch hello adresa použitá nadřazeného zařízení nebo službou.</span><span class="sxs-lookup"><span data-stu-id="ec72c-172">Change hello value toomatch hello address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="ec72c-173">V případě potřeby podpora FTP hello následující pravidla slouží jako šablona toogrant přístup toohello FTP řízení port a portů datového kanálu.</span><span class="sxs-lookup"><span data-stu-id="ec72c-173">If FTP support is desired, hello following rules can be used as a template toogrant access toohello FTP control port and data channel ports.</span></span>  <span data-ttu-id="ec72c-174">Vzhledem k tomu, že FTP je stavová protokol, nemusí být možné tooroute FTP přenosy přes tradiční zařízení brány firewall nebo proxy protokolu HTTP nebo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="ec72c-174">Since FTP is a stateful protocol, you may not be able tooroute FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="ec72c-175">V takovém případě budete potřebovat tooset hello *SourceAddressPrefix* rozsahu vývojáře nebo nasazení počítačů, na které FTP klientských počítačích jinou hodnotu tooa – například hello IP adres.</span><span class="sxs-lookup"><span data-stu-id="ec72c-175">In this case you will need tooset hello *SourceAddressPrefix* tooa different value - for example hello IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="ec72c-176">(**Poznámka:** rozsah portů datového kanálu hello může změnit během období preview hello.)</span><span class="sxs-lookup"><span data-stu-id="ec72c-176">(**Note:**  hello data channel port range may change during hello preview period.)</span></span>

<span data-ttu-id="ec72c-177">Pokud se používá vzdálené ladění pomocí sady Visual Studio, hello následující pravidla ukazují, jak přistupovat k toogrant.</span><span class="sxs-lookup"><span data-stu-id="ec72c-177">If remote debugging with Visual Studio is used, hello following rules demonstrate how toogrant access.</span></span>  <span data-ttu-id="ec72c-178">Vzhledem k tomu, že každou verzi používá jiný port pro vzdálené ladění je samostatné pravidlo pro všechny podporované verze sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ec72c-178">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="ec72c-179">Stejně jako u přístup FTP, nemusí vzdálené ladění provoz procházet skrz tradiční firewall webových aplikací nebo zařízení proxy správně.</span><span class="sxs-lookup"><span data-stu-id="ec72c-179">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="ec72c-180">Hello *SourceAddressPrefix* můžete místo toho nastavit rozsah IP adres toohello počítačů vývojáře Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ec72c-180">hello *SourceAddressPrefix* can instead be set toohello IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-tooa-subnet"></a><span data-ttu-id="ec72c-181">Přiřazení skupiny zabezpečení sítě tooa podsítě</span><span class="sxs-lookup"><span data-stu-id="ec72c-181">Assigning a Network Security Group tooa Subnet</span></span>
<span data-ttu-id="ec72c-182">Skupina zabezpečení sítě má výchozí pravidlo zabezpečení, čímž se odmítne přístup tooall externích přenosů.</span><span class="sxs-lookup"><span data-stu-id="ec72c-182">A network security group has a default security rule which denies access tooall external traffic.</span></span>  <span data-ttu-id="ec72c-183">Hello výsledek z kombinace pravidla zabezpečení sítě hello popsané výše a hello výchozí pravidlo zabezpečení blokuje příchozí přenos, je, že pouze provoz z rozsahů adres zdroje přidružené *povolit* akce bude mít tooapps provoz toosend spuštěná ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-183">hello result from combining hello network security rules described above, and hello default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able toosend traffic tooapps running in an App Service Environment.</span></span>

<span data-ttu-id="ec72c-184">Po naplnění skupinu zabezpečení sítě pomocí pravidel zabezpečení musí toobe přiřazené podsítě toohello obsahující hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-184">After a network security group is populated with security rules, it needs toobe assigned toohello subnet containing hello App Service Environment.</span></span>  <span data-ttu-id="ec72c-185">příkaz přiřazení Hello odkazuje na název obou hello hello virtuální sítě, které se hello App Service Environment nachází, a také název hello hello podsítě, které bylo vytvořeno hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-185">hello assignment command references both hello name of hello virtual network where hello App Service Environment resides, as well as hello name of hello subnet where hello App Service Environment was created.</span></span>  

<span data-ttu-id="ec72c-186">Následující příklad Hello ukazuje skupinu zabezpečení sítě, který je právě přiřazován tooa podsíť a virtuální sítě:</span><span class="sxs-lookup"><span data-stu-id="ec72c-186">hello example below shows a network security group being assigned tooa subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="ec72c-187">Po úspěšném přiřazení skupiny zabezpečení sítě hello (přiřazení hello je dlouhotrvající operace a může trvat několik minut toocomplete), pouze příchozí provoz odpovídající *povolit* pravidla se úspěšně připojit aplikace hello aplikace Prostředí služby.</span><span class="sxs-lookup"><span data-stu-id="ec72c-187">Once hello network security group assignment succeeds (hello assignment is a long-running operations and can take a few minutes toocomplete), only inbound traffic matching *Allow* rules will successfully reach apps in hello App Service Environment.</span></span>

<span data-ttu-id="ec72c-188">Pro úplnost hello následující příklad ukazuje, jak tooremove a proto DIS přidružení zabezpečení sítě hello skupinu z podsítě hello:</span><span class="sxs-lookup"><span data-stu-id="ec72c-188">For completeness hello following example shows how tooremove and thus dis-associate hello network security group from hello subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="ec72c-189">Zvláštní upozornění pro explicitní IP SSL</span><span class="sxs-lookup"><span data-stu-id="ec72c-189">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="ec72c-190">Pokud aplikace je konfigurován s adresou IP SSL explicitní (použít *pouze* tooASEs, které mají veřejné VIP), místo použití hello výchozí IP adresu hello App Service Environment, HTTP a HTTPS provozu, pokračovat v podsíti hello v rámci jiné sady jiné porty než porty 80 a 443.</span><span class="sxs-lookup"><span data-stu-id="ec72c-190">If an app is configured with an explicit IP-SSL address (applicable *only* tooASEs that have a public VIP), instead of using hello default IP address of hello App Service Environment, both HTTP and HTTPS traffic flows into hello subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="ec72c-191">jednotlivé dvojice Hello porty používané každou adresu IP SSL naleznete v hello portálu uživatelské rozhraní v okně UX hello App Service Environment na podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="ec72c-191">hello individual pair of ports used by each IP-SSL address can be found in hello portal user interface from hello App Service Environment's details UX blade.</span></span>  <span data-ttu-id="ec72c-192">Vyberte možnost "všechna nastavení"--> "IP adresy".</span><span class="sxs-lookup"><span data-stu-id="ec72c-192">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="ec72c-193">okno Hello "IP adresy" je příklad všechny explicitně nakonfigurovanou IP SSL adresy pro hello App Service Environment, společně s pár hello speciální port, který je použité tooroute přenosů dat HTTP a HTTPS přidružené každou IP SSL adresu.</span><span class="sxs-lookup"><span data-stu-id="ec72c-193">hello "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for hello App Service Environment, along with hello special port pair that is used tooroute HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="ec72c-194">Je tento pár port, který potřebuje toobe používá se pro parametry DestinationPortRange hello při konfiguraci pravidel ve skupině zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="ec72c-194">It is this port pair that needs toobe used for hello DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="ec72c-195">Když aplikace v App Service Environment je nakonfigurované toouse IP SSL, externí zákazníky, se nezobrazí a není třeba tooworry o hello speciální port pár mapování.</span><span class="sxs-lookup"><span data-stu-id="ec72c-195">When an app on an ASE is configured toouse IP-SSL, external customers will not see and do not need tooworry about hello special port pair mapping.</span></span>  <span data-ttu-id="ec72c-196">Provoz toohello aplikace bude procházet normálně toohello nakonfigurované IP SSL adresu.</span><span class="sxs-lookup"><span data-stu-id="ec72c-196">Traffic toohello apps will flow normally toohello configured IP-SSL address.</span></span>  <span data-ttu-id="ec72c-197">Hello překlad toohello speciální port pár automaticky provede interně při hello konečné fáze směrování provozu do hello podsíť obsahující hello App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="ec72c-197">hello translation toohello special port pair automatically happens internally during hello final leg of routing traffic into hello subnet containing hello ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="ec72c-198">Začínáme</span><span class="sxs-lookup"><span data-stu-id="ec72c-198">Getting started</span></span>
<span data-ttu-id="ec72c-199">tooget začít s prostředí App Service najdete v části [Úvod tooApp Service Environment][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="ec72c-199">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="ec72c-200">Všechny články a jak – do této pro App Service Environment jsou dostupné v hello [soubor README pro prostředí aplikačních služeb](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="ec72c-200">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="ec72c-201">Podrobnosti ohledně aplikace ze služby App Service Environment bezpečně připojené toobackend prostředků najdete v tématu [bezpečně připojení tooBackend prostředky ze služby App Service Environment][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="ec72c-201">For details around apps securely connecting toobackend resource from an App Service Environment, see [Securely connecting tooBackend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="ec72c-202">Další informace o platformě Azure App Service hello najdete v tématu [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="ec72c-202">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

