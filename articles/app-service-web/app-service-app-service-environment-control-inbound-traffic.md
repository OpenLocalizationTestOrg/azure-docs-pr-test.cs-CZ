---
title: "Tom, jak řídit příchozí přenosy do služby App Service Environment"
description: "Další informace o tom, jak nakonfigurovat pravidla zabezpečení sítě k řízení příchozí přenosy do služby App Service Environment."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: ee0a2248a1cd5d76f87b280de05410b94f96c8af
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-control-inbound-traffic-to-an-app-service-environment"></a><span data-ttu-id="a43f6-103">Tom, jak řídit příchozí přenosy do služby App Service Environment</span><span class="sxs-lookup"><span data-stu-id="a43f6-103">How To Control Inbound Traffic to an App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="a43f6-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="a43f6-104">Overview</span></span>
<span data-ttu-id="a43f6-105">Služby App Service Environment se dají vytvářet v **buď** virtuální síť Azure Resource Manager **nebo** modelu nasazení classic [virtuální sítě][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="a43f6-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="a43f6-106">V době, kdy se vytvoří služby App Service Environment lze definovat nové virtuální sítě a novou podsíť.</span><span class="sxs-lookup"><span data-stu-id="a43f6-106">A new virtual network and new subnet can be defined at the time an App Service Environment is created.</span></span>  <span data-ttu-id="a43f6-107">Služby App Service Environment Alternativně lze vytvořit v existující virtuální síť a existující podsíť.</span><span class="sxs-lookup"><span data-stu-id="a43f6-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="a43f6-108">S změny provedené v červnu 2016 mohou být nasazeny ASEs do virtuální sítě, které používají rozsahů veřejných adres nebo RFC1918 adresní prostory (tj.)</span><span class="sxs-lookup"><span data-stu-id="a43f6-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="a43f6-109">privátní adresy).</span><span class="sxs-lookup"><span data-stu-id="a43f6-109">private addresses).</span></span>  <span data-ttu-id="a43f6-110">Podrobnosti o vytvoření služby App Service Environment najdete v části [postup vytvoření služby App Service Environment][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="a43f6-110">For more details on creating an App Service Environment see [How To Create an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="a43f6-111">Služby App Service Environment musí vždy vytvořit v rámci jedné podsítě, protože podsíť poskytuje hranici sítě, který můžete použít zamknout příchozí provoz za nadřazeného zařízení a služeb tak, aby přenosů dat HTTP a HTTPS je pouze přijímán z konkrétní nadřazeného IP adresy.</span><span class="sxs-lookup"><span data-stu-id="a43f6-111">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used to lock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="a43f6-112">Příchozí a odchozí síťový provoz na podsíť je řízena pomocí [skupinu zabezpečení sítě][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="a43f6-112">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="a43f6-113">Řízení příchozí provoz vyžaduje vytvoření pravidla zabezpečení sítě ve skupině zabezpečení sítě a pak přiřazení zabezpečení sítě skupiny podsíť obsahující App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-113">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning the network security group the subnet containing the App Service Environment.</span></span>

<span data-ttu-id="a43f6-114">Jakmile skupinu zabezpečení sítě je přiřazen k podsíti, příchozí přenosy na aplikace v App Service Environment je povolené nebo blokované podle povolit a odepřít pravidla definovaná v skupinu zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="a43f6-114">Once a network security group is assigned to a subnet, inbound traffic to apps in the App Service Environment is allowed/blocked based on the allow and deny rules defined in the network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="a43f6-115">Příchozí síťové porty používané v prostředí služby App Service</span><span class="sxs-lookup"><span data-stu-id="a43f6-115">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="a43f6-116">Před zamykání příchozí síťový provoz s skupinu zabezpečení sítě, je důležité vědět, sadu požadované a volitelné síťové porty používané služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-116">Before locking down inbound network traffic with a network security group, it is important to know the set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="a43f6-117">Omylem zavřením mimo provoz na některé porty může dojít ke ztrátě funkcí ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-117">Accidentally closing off traffic to some ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="a43f6-118">Následuje seznam portů používaných služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-118">The following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="a43f6-119">Všechny porty jsou **TCP**, pokud není uvedeno jinak jasně:</span><span class="sxs-lookup"><span data-stu-id="a43f6-119">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="a43f6-120">454: **požadované port** používá infrastrukturu Azure pro správu a údržbu prostředí App Service přes SSL.</span><span class="sxs-lookup"><span data-stu-id="a43f6-120">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="a43f6-121">Nebrání provoz na tento port.</span><span class="sxs-lookup"><span data-stu-id="a43f6-121">Do not block traffic to this port.</span></span>  <span data-ttu-id="a43f6-122">Tento port je vždy vázána veřejné VIP App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-122">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="a43f6-123">455: **požadované port** používá infrastrukturu Azure pro správu a údržbu prostředí App Service přes SSL.</span><span class="sxs-lookup"><span data-stu-id="a43f6-123">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="a43f6-124">Nebrání provoz na tento port.</span><span class="sxs-lookup"><span data-stu-id="a43f6-124">Do not block traffic to this port.</span></span>  <span data-ttu-id="a43f6-125">Tento port je vždy vázána veřejné VIP App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-125">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="a43f6-126">80: výchozí port pro příchozí provoz protokolu HTTP pro aplikace běžící v plány služby App Service ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-126">80:  Default port for inbound HTTP traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="a43f6-127">Na povoleno ILB App Service Environment tento port je vázána na adresu ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-127">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="a43f6-128">443: výchozí port pro příchozí provoz protokolu SSL pro aplikace běžící v plány služby App Service ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-128">443: Default port for inbound SSL traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="a43f6-129">Na povoleno ILB App Service Environment tento port je vázána na adresu ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-129">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="a43f6-130">21: řídicí kanál pro službu FTP.</span><span class="sxs-lookup"><span data-stu-id="a43f6-130">21:  Control channel for FTP.</span></span>  <span data-ttu-id="a43f6-131">Tento port můžete bezpečně zablokuje, pokud není používán FTP.</span><span class="sxs-lookup"><span data-stu-id="a43f6-131">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="a43f6-132">Na povoleno ILB App Service Environment tento port vázat na adresu ILB pro App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-132">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="a43f6-133">990: řídicí kanál pro FTPS.</span><span class="sxs-lookup"><span data-stu-id="a43f6-133">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="a43f6-134">Tento port můžete bezpečně zablokuje, pokud není používán FTPS.</span><span class="sxs-lookup"><span data-stu-id="a43f6-134">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="a43f6-135">Na povoleno ILB App Service Environment tento port vázat na adresu ILB pro App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-135">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="a43f6-136">10001-10020: datové kanály pro službu FTP.</span><span class="sxs-lookup"><span data-stu-id="a43f6-136">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="a43f6-137">Stejně jako u řídicí kanál, tyto porty lze bezpečně blokovat Pokud není používán FTP.</span><span class="sxs-lookup"><span data-stu-id="a43f6-137">As with the control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="a43f6-138">Na povoleno ILB App Service Environment tento port vázat na adresu ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-138">On an ILB-enabled ASE, this port can be bound to the ASE's ILB address.</span></span>
* <span data-ttu-id="a43f6-139">4016: používá pro vzdálené ladění pomocí sady Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="a43f6-139">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="a43f6-140">Tento port můžete bezpečně zablokuje, pokud se nepoužívají funkci.</span><span class="sxs-lookup"><span data-stu-id="a43f6-140">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="a43f6-141">Na povoleno ILB App Service Environment tento port je vázána na adresu ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-141">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="a43f6-142">4018: používá pro vzdálené ladění pomocí sady Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="a43f6-142">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="a43f6-143">Tento port můžete bezpečně zablokuje, pokud se nepoužívají funkci.</span><span class="sxs-lookup"><span data-stu-id="a43f6-143">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="a43f6-144">Na povoleno ILB App Service Environment tento port je vázána na adresu ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-144">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="a43f6-145">4020: používá pro vzdálené ladění pomocí sady Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="a43f6-145">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="a43f6-146">Tento port můžete bezpečně zablokuje, pokud se nepoužívají funkci.</span><span class="sxs-lookup"><span data-stu-id="a43f6-146">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="a43f6-147">Na povoleno ILB App Service Environment tento port je vázána na adresu ILB App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-147">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="a43f6-148">Odchozí připojení a požadavky na DNS</span><span class="sxs-lookup"><span data-stu-id="a43f6-148">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="a43f6-149">Pro služby App Service Environment ke správnému fungování vyžaduje také odchozí přístup k různým koncové body.</span><span class="sxs-lookup"><span data-stu-id="a43f6-149">For an App Service Environment to function properly, it also requires outbound access to various endpoints.</span></span> <span data-ttu-id="a43f6-150">Úplný seznam externí koncové body používané App Service Environment je v části "Vyžaduje připojení k síti" [konfiguraci sítě pro ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) článku.</span><span class="sxs-lookup"><span data-stu-id="a43f6-150">A full list of the external endpoints used by an ASE is in the "Required Network Connectivity" section of the [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="a43f6-151">Prostředí služby App Service vyžaduje platnou konfiguraci pro virtuální síť infrastruktury služby DNS.</span><span class="sxs-lookup"><span data-stu-id="a43f6-151">App Service Environments require a valid DNS infrastructure configured for the virtual network.</span></span>  <span data-ttu-id="a43f6-152">Pokud z nějakého důvodu dojde ke změně konfigurace DNS po vytvoření služby App Service Environment, vývojáři vynutit služby App Service Environment načíst novou konfiguraci DNS.</span><span class="sxs-lookup"><span data-stu-id="a43f6-152">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="a43f6-153">Aktivuje restartu postupného prostředí pomocí ikony "Restartovat" nachází v horní části okna Správa služby App Service Environment ve [portál Azure] [ NewPortal] způsobí, že prostředí tak, aby se vyzvedávat novou konfiguraci DNS.</span><span class="sxs-lookup"><span data-stu-id="a43f6-153">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="a43f6-154">Dále je doporučeno, aby žádné vlastní servery DNS na virtuální sítě se instalační program dopředu před vytvořením služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-154">It is also recommended that any custom DNS servers on the vnet be setup ahead of time prior to creating an App Service Environment.</span></span>  <span data-ttu-id="a43f6-155">Pokud je při vytváření služby App Service Environment se změnila konfigurace DNS virtuální sítě, které způsobí selhání procesu vytvoření služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-155">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in the App Service Environment creation process failing.</span></span>  <span data-ttu-id="a43f6-156">V souvislosti podobnou Pokud na druhém konci brány VPN existuje vlastního serveru DNS a serveru DNS je nedostupná nebo není k dispozici, procesu vytváření služby App Service Environment se také nezdaří.</span><span class="sxs-lookup"><span data-stu-id="a43f6-156">In a similar vein, if a custom DNS server exists on the other end of a VPN gateway, and the DNS server is unreachable or unavailable, the App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="a43f6-157">Vytvoření skupiny zabezpečení sítě</span><span class="sxs-lookup"><span data-stu-id="a43f6-157">Creating a Network Security Group</span></span>
<span data-ttu-id="a43f6-158">Úplné podrobnosti o tom, jak fungují skupiny zabezpečení sítě najdete v následujících [informace][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="a43f6-158">For full details on how network security groups work see the following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="a43f6-159">Pro správu služby Azure, které příklad dotykem na označuje skupin zabezpečení sítě, se zaměřením na konfiguraci a použití skupinu zabezpečení sítě pro podsíť, která obsahuje služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-159">The Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group to a subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="a43f6-160">**Poznámka:** skupin zabezpečení sítě pomocí se dají konfigurovat graficky [portálu Azure](https://portal.azure.com) nebo pomocí prostředí Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a43f6-160">**Note:** Network security groups can be configured graphically using the [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="a43f6-161">Skupiny zabezpečení sítě jsou nejprve vytvořit jako samostatné entity přidružené předplatnému.</span><span class="sxs-lookup"><span data-stu-id="a43f6-161">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="a43f6-162">Vzhledem k tomu, že skupiny zabezpečení sítě je vytvořeno v oblasti Azure, zajistěte, aby skupina zabezpečení sítě je vytvořená ve stejné oblasti jako služba App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-162">Since network security groups are created in an Azure region, ensure that the network security group is created in the same region as the App Service Environment.</span></span>

<span data-ttu-id="a43f6-163">Následující část ukazuje vytvoření skupiny zabezpečení sítě:</span><span class="sxs-lookup"><span data-stu-id="a43f6-163">The following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="a43f6-164">Po vytvoření skupiny zabezpečení sítě je jeden nebo více pravidel zabezpečení sítě se přidají k němu.</span><span class="sxs-lookup"><span data-stu-id="a43f6-164">Once a network security group is created, one or more network security rules are added to it.</span></span>  <span data-ttu-id="a43f6-165">Vzhledem k tomu, že sadu pravidel v průběhu času mění, doporučujeme místo out používané pro priority pravidel snadno vložit další pravidla časem číslování schéma.</span><span class="sxs-lookup"><span data-stu-id="a43f6-165">Since the set of rules may change over time, it is recommended to space out the numbering scheme used for rule priorities to make it easy to insert additional rules over time.</span></span>

<span data-ttu-id="a43f6-166">Následující příklad ukazuje pravidlo, které explicitně udělí přístup k portům správy vyžaduje infrastrukturu Azure ke správě a údržbě služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-166">The example below shows a rule that explicitly grants access to the management ports needed by the Azure infrastructure to manage and maintain an App Service Environment.</span></span>  <span data-ttu-id="a43f6-167">Všimněte si, že veškerý provoz správy probíhá přes protokol SSL a je zabezpečená službou klientské certifikáty, takže i když jsou otevřené porty budou nepřístupné všechny entita než infrastruktury pro správu Azure.</span><span class="sxs-lookup"><span data-stu-id="a43f6-167">Note that all management traffic flows over SSL and is secured by client certificates, so even though the ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="a43f6-168">Při zamykání přístup k portu 80 a 443 pro "schovat" služby App Service Environment za nadřazeného zařízení nebo služby, musíte znát nadřazeného IP adresu.</span><span class="sxs-lookup"><span data-stu-id="a43f6-168">When locking down access to port 80 and 443 to "hide" an App Service Environment behind upstream devices or services, you will need to know the upstream IP address.</span></span>  <span data-ttu-id="a43f6-169">Například pokud používáte brány firewall webových aplikací (firewall webových aplikací), firewall webových aplikací bude mít svůj vlastní IP adresu (nebo adresy), které používá při provozu připojení přes proxy server pro příjem dat App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-169">For example, if you are using a web application firewall (WAF), the WAF will have its own IP address (or addresses) which it uses when proxying traffic to a downstream App Service Environment.</span></span>  <span data-ttu-id="a43f6-170">Budete muset použít tuto IP adresu v *SourceAddressPrefix* parametr pravidla zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="a43f6-170">You will need to use this IP address in the *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="a43f6-171">V následujícím příkladu je výslovně povoleno příchozí provoz z konkrétní IP adresu nadřazený.</span><span class="sxs-lookup"><span data-stu-id="a43f6-171">In the example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="a43f6-172">Adresa *1.2.3.4* slouží jako zástupný symbol pro IP adresu nadřazenému firewall webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="a43f6-172">The address *1.2.3.4* is used as a placeholder for the IP address of an upstream WAF.</span></span>  <span data-ttu-id="a43f6-173">Změňte hodnotu tak, aby odpovídaly je adresa použitá nadřazeného zařízení nebo službou.</span><span class="sxs-lookup"><span data-stu-id="a43f6-173">Change the value to match the address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="a43f6-174">V případě potřeby podpora FTP následující pravidla můžou sloužit jako šablona pro udělení přístupu k řízení port protokolu FTP a data kanál porty.</span><span class="sxs-lookup"><span data-stu-id="a43f6-174">If FTP support is desired, the following rules can be used as a template to grant access to the FTP control port and data channel ports.</span></span>  <span data-ttu-id="a43f6-175">Vzhledem k tomu, že FTP je stavová protokol, nemusí být schopny směrovat přenos FTP prostřednictvím tradiční zařízení brány firewall nebo proxy protokolu HTTP nebo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="a43f6-175">Since FTP is a stateful protocol, you may not be able to route FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="a43f6-176">V takovém případě budete muset nastavit *SourceAddressPrefix* na jinou hodnotu – například IP adresa rozsahu vývojáře nebo nasazení počítačů, na které FTP klientských počítačích.</span><span class="sxs-lookup"><span data-stu-id="a43f6-176">In this case you will need to set the *SourceAddressPrefix* to a different value - for example the IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="a43f6-177">(**Poznámka:** rozsah portů datového kanálu se může změnit během období preview.)</span><span class="sxs-lookup"><span data-stu-id="a43f6-177">(**Note:**  the data channel port range may change during the preview period.)</span></span>

<span data-ttu-id="a43f6-178">Pokud se používá vzdálené ladění pomocí sady Visual Studio, následující pravidla ukazují, jak k udělení přístupu.</span><span class="sxs-lookup"><span data-stu-id="a43f6-178">If remote debugging with Visual Studio is used, the following rules demonstrate how to grant access.</span></span>  <span data-ttu-id="a43f6-179">Vzhledem k tomu, že každou verzi používá jiný port pro vzdálené ladění je samostatné pravidlo pro všechny podporované verze sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a43f6-179">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="a43f6-180">Stejně jako u přístup FTP, nemusí vzdálené ladění provoz procházet skrz tradiční firewall webových aplikací nebo zařízení proxy správně.</span><span class="sxs-lookup"><span data-stu-id="a43f6-180">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="a43f6-181">*SourceAddressPrefix* místo toho může být nastaven na rozsah IP adres počítačů vývojáře Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a43f6-181">The *SourceAddressPrefix* can instead be set to the IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-to-a-subnet"></a><span data-ttu-id="a43f6-182">Přiřazení skupiny zabezpečení sítě k podsíti</span><span class="sxs-lookup"><span data-stu-id="a43f6-182">Assigning a Network Security Group to a Subnet</span></span>
<span data-ttu-id="a43f6-183">Skupina zabezpečení sítě má výchozí pravidlo zabezpečení, čímž se odmítne přístup k externí veškerý provoz.</span><span class="sxs-lookup"><span data-stu-id="a43f6-183">A network security group has a default security rule which denies access to all external traffic.</span></span>  <span data-ttu-id="a43f6-184">Výsledek z kombinace výše popsané pravidla zabezpečení sítě a zabezpečení výchozí pravidlo blokuje příchozí přenos, je tento jenom přenosy z rozsahů adres zdroje přidružené *povolit* akce bude moct posílat přenosy na aplikace běžící ve službě App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-184">The result from combining the network security rules described above, and the default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able to send traffic to apps running in an App Service Environment.</span></span>

<span data-ttu-id="a43f6-185">Po naplnění skupinu zabezpečení sítě s pravidla zabezpečení se musí přiřadit k podsíti obsahující App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-185">After a network security group is populated with security rules, it needs to be assigned to the subnet containing the App Service Environment.</span></span>  <span data-ttu-id="a43f6-186">Příkaz přiřazení odkazuje na název virtuální sítě, které se nachází App Service Environment, jak název podsítě, které bylo vytvořeno App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-186">The assignment command references both the name of the virtual network where the App Service Environment resides, as well as the name of the subnet where the App Service Environment was created.</span></span>  

<span data-ttu-id="a43f6-187">Následující příklad ukazuje skupinu zabezpečení sítě nejsou přiřazeny virtuální sítě a podsítě:</span><span class="sxs-lookup"><span data-stu-id="a43f6-187">The example below shows a network security group being assigned to a subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="a43f6-188">Po úspěšném přiřazení skupiny zabezpečení sítě (přiřazení je dlouhotrvající operace a může trvat několik minut na dokončení), pouze příchozí provoz odpovídající *povolit* pravidla se úspěšně připojit aplikace v App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-188">Once the network security group assignment succeeds (the assignment is a long-running operations and can take a few minutes to complete), only inbound traffic matching *Allow* rules will successfully reach apps in the App Service Environment.</span></span>

<span data-ttu-id="a43f6-189">Pro úplnost následující příklad ukazuje, jak odebrat a proto dis-přidružte skupinu zabezpečení sítě z podsítě:</span><span class="sxs-lookup"><span data-stu-id="a43f6-189">For completeness the following example shows how to remove and thus dis-associate the network security group from the subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="a43f6-190">Zvláštní upozornění pro explicitní IP SSL</span><span class="sxs-lookup"><span data-stu-id="a43f6-190">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="a43f6-191">Pokud aplikace je konfigurován s adresou IP SSL explicitní (použít *pouze* k ASEs, které mají veřejné VIP), místo použití výchozí IP adresu App Service Environment, provoz protokolu HTTP a HTTPS, pokračovat v podsíti přes jinou sadu jiné porty než porty 80 a 443.</span><span class="sxs-lookup"><span data-stu-id="a43f6-191">If an app is configured with an explicit IP-SSL address (applicable *only* to ASEs that have a public VIP), instead of using the default IP address of the App Service Environment, both HTTP and HTTPS traffic flows into the subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="a43f6-192">Jednotlivé dvojice porty používané každou adresu IP SSL naleznete v portálu uživatelského rozhraní v okně UX podrobnosti App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-192">The individual pair of ports used by each IP-SSL address can be found in the portal user interface from the App Service Environment's details UX blade.</span></span>  <span data-ttu-id="a43f6-193">Vyberte možnost "všechna nastavení"--> "IP adresy".</span><span class="sxs-lookup"><span data-stu-id="a43f6-193">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="a43f6-194">V okně "IP adresy" je příklad všechny explicitně nakonfigurovanou IP SSL adresy pro App Service Environment, společně s pár speciální port, který slouží ke směrování HTTP a HTTPS provozy, které jsou spojené s každou IP SSL adresu.</span><span class="sxs-lookup"><span data-stu-id="a43f6-194">The "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for the App Service Environment, along with the special port pair that is used to route HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="a43f6-195">Je tento pár port, který se musí použít pro parametry DestinationPortRange při konfiguraci pravidel ve skupině zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="a43f6-195">It is this port pair that needs to be used for the DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="a43f6-196">Když aplikace v App Service Environment je nakonfigurovaný na použití IP-SSL, externí zákazníky, se nezobrazí a nemusíte se starat o mapování pár speciální portů.</span><span class="sxs-lookup"><span data-stu-id="a43f6-196">When an app on an ASE is configured to use IP-SSL, external customers will not see and do not need to worry about the special port pair mapping.</span></span>  <span data-ttu-id="a43f6-197">Provoz aplikace bude procházet obvykle nakonfigurované IP SSL adresu.</span><span class="sxs-lookup"><span data-stu-id="a43f6-197">Traffic to the apps will flow normally to the configured IP-SSL address.</span></span>  <span data-ttu-id="a43f6-198">Překlad na pár speciální port automaticky provede interně při konečné fáze směrování provozu do podsíť obsahující App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="a43f6-198">The translation to the special port pair automatically happens internally during the final leg of routing traffic into the subnet containing the ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="a43f6-199">Začínáme</span><span class="sxs-lookup"><span data-stu-id="a43f6-199">Getting started</span></span>
<span data-ttu-id="a43f6-200">Chcete-li začít pracovat s prostředí App Service, přečtěte si téma [Úvod do služby App Service Environment][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="a43f6-200">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="a43f6-201">Všechny články a jak – do této pro App Service Environment jsou dostupné v [soubor README pro prostředí aplikačních služeb](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="a43f6-201">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="a43f6-202">Podrobnosti ohledně aplikace zabezpečené připojení k back-end prostředků ze služby App Service Environment najdete v tématu [bezpečně připojování k back-endové prostředky ze služby App Service Environment][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="a43f6-202">For details around apps securely connecting to backend resource from an App Service Environment, see [Securely connecting to Backend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="a43f6-203">Další informace o platformě Azure App Service najdete v tématu [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="a43f6-203">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

