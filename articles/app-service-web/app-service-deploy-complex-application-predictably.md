---
title: "Zřídit a nasadit mikroslužeb předvídatelné v Azure"
description: "Informace o nasazení aplikace skládá z mikroslužeb v Azure App Service jako na jednu jednotku a předvídatelný způsobem pomocí šablony pro skupiny prostředků JSON a skriptů prostředí PowerShell."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: 844f42e61ba443a4b74a52f622113e87a7781913
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="675c6-103">Zřídit a nasadit mikroslužeb předvídatelné v Azure</span><span class="sxs-lookup"><span data-stu-id="675c6-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="675c6-104">Tento kurz ukazuje, jak zřídit a nasadit aplikace skládá z [mikroslužeb](https://en.wikipedia.org/wiki/Microservices) v [Azure App Service](/services/app-service/) jako na jednu jednotku a předvídatelný způsobem pomocí šablony pro skupiny prostředků JSON a skriptů prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="675c6-104">This tutorial shows how to provision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="675c6-105">Při zřizování a nasazování aplikací špičkové, které se skládají z vysoce odpojené mikroslužeb, opakovatelnost a předvídatelnost jsou klíčové pro úspěch.</span><span class="sxs-lookup"><span data-stu-id="675c6-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial to success.</span></span> <span data-ttu-id="675c6-106">[Aplikační služba Azure](/services/app-service/) umožňuje vytvářet mikroslužeb, které zahrnují webové aplikace, mobilní aplikace, aplikace API a logic apps.</span><span class="sxs-lookup"><span data-stu-id="675c6-106">[Azure App Service](/services/app-service/) enables you to create microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="675c6-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) vám umožňuje spravovat všechny mikroslužeb jako celek, společně s závislosti prostředků, jako jsou databáze a nastavení řízení zdroje.</span><span class="sxs-lookup"><span data-stu-id="675c6-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you to manage all the microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="675c6-108">Teď můžete nasadit taky takové aplikace pomocí šablony JSON a jednoduchý skriptů prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="675c6-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="675c6-109">Co provedete</span><span class="sxs-lookup"><span data-stu-id="675c6-109">What you will do</span></span>
<span data-ttu-id="675c6-110">V tomto kurzu nasazujete aplikaci, která zahrnuje:</span><span class="sxs-lookup"><span data-stu-id="675c6-110">In the tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="675c6-111">Dva webové aplikace (tj. dva mikroslužeb)</span><span class="sxs-lookup"><span data-stu-id="675c6-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="675c6-112">Back-end databáze SQL</span><span class="sxs-lookup"><span data-stu-id="675c6-112">A backend SQL Database</span></span>
* <span data-ttu-id="675c6-113">Nastavení aplikace, připojovací řetězce a Správa zdrojového kódu</span><span class="sxs-lookup"><span data-stu-id="675c6-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="675c6-114">Application insights, výstrahy, nastavení automatického škálování</span><span class="sxs-lookup"><span data-stu-id="675c6-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="675c6-115">Nástroje, které budete používat</span><span class="sxs-lookup"><span data-stu-id="675c6-115">Tools you will use</span></span>
<span data-ttu-id="675c6-116">V tomto kurzu budete používat následující nástroje.</span><span class="sxs-lookup"><span data-stu-id="675c6-116">In this tutorial, you will use the following tools.</span></span> <span data-ttu-id="675c6-117">Vzhledem k tomu, že není komplexní zabývat nástroje, kliknete na přilepit do začátku do konce scénáře a právě získáte stručný úvod ke každému, a kde můžete najít další informace o jeho.</span><span class="sxs-lookup"><span data-stu-id="675c6-117">Since it’s not comprehensive discussion on tools, I’m going to stick to the end-to-end scenario and just give you a brief intro to each, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="675c6-118">Šablony Azure Resource Manageru (JSON)</span><span class="sxs-lookup"><span data-stu-id="675c6-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="675c6-119">Pokaždé, když vytvoříte webovou aplikaci v Azure App Service, například Azure Resource Manager používá k vytvoření skupiny celý prostředků s prostředky součást šablonu JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template to create the entire resource group with the component resources.</span></span> <span data-ttu-id="675c6-120">Komplexní šablony z [Azure Marketplace](/marketplace) jako [škálovatelné WordPress](/marketplace/partners/wordpress/scalablewordpress/) aplikace může obsahovat databáze MySQL, účty úložiště, plán služby App Service, webové aplikace, pravidla výstrah, nastavení aplikace, nastavení automatického škálování a další, a všechny tyto šablony jsou k dispozici prostřednictvím prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="675c6-120">A complex template from the [Azure Marketplace](/marketplace) like the [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include the MySQL database, storage accounts, the App Service plan, the web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available to you through PowerShell.</span></span> <span data-ttu-id="675c6-121">Informace o tom, jak stáhnout a použít tyto šablony najdete v tématu [použití Azure Powershellu s Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="675c6-121">For information on how to download and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="675c6-122">Další informace o šablonách Azure Resource Manager, najdete v části [vytváření šablon Azure Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="675c6-122">For more information on the Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="675c6-123">2.6 Azure SDK pro Visual Studio</span><span class="sxs-lookup"><span data-stu-id="675c6-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="675c6-124">Nejnovější SDK obsahuje vylepšení podpory šablony správce prostředků v editoru JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-124">The newest SDK contains improvements to the Resource Manager template support in the JSON editor.</span></span> <span data-ttu-id="675c6-125">Používejte rychle vytvořit šablonu skupiny prostředků od nuly nebo otevřete stávající šablonu JSON (například šablonu stažené galerie) pro úpravy, naplnění souboru parametrů a i nasazení skupiny prostředků přímo z řešení skupiny prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="675c6-125">You can use this to quickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate the parameters file, and even deploy the resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="675c6-126">Další informace najdete v tématu [2.6 Azure SDK pro Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="675c6-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="675c6-127">Prostředí Azure PowerShell 0.8.0 nebo novější</span><span class="sxs-lookup"><span data-stu-id="675c6-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="675c6-128">Počínaje verzí 0.8.0 je součástí instalace prostředí Azure PowerShell modulu Azure Resource Manager kromě modulu Azure.</span><span class="sxs-lookup"><span data-stu-id="675c6-128">Beginning in version 0.8.0, the Azure PowerShell installation includes the Azure Resource Manager module in addition to the Azure module.</span></span> <span data-ttu-id="675c6-129">Tento nový modul umožňuje skript nasazení skupiny prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-129">This new module enables you to script the deployment of resource groups.</span></span>

<span data-ttu-id="675c6-130">Další informace najdete v tématu [použití Azure Powershellu s Azure Resource Manager](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="675c6-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="675c6-131">Průzkumník prostředků Azure</span><span class="sxs-lookup"><span data-stu-id="675c6-131">Azure Resource Explorer</span></span>
<span data-ttu-id="675c6-132">To [nástroje preview](https://resources.azure.com) umožňuje prozkoumat JSON definice všech skupin prostředků v předplatného a jednotlivých zdrojů.</span><span class="sxs-lookup"><span data-stu-id="675c6-132">This [preview tool](https://resources.azure.com) enables you to explore the JSON definitions of all the resource groups in your subscription and the individual resources.</span></span> <span data-ttu-id="675c6-133">V nástroji můžete upravovat JSON definice prostředku, odstranit celou hierarchii prostředků a vytvořit nové prostředky.</span><span class="sxs-lookup"><span data-stu-id="675c6-133">In the tool, you can edit the JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="675c6-134">Snadno dostupné v tomto nástroji informace jsou velmi užitečné při vytváření šablony, protože zobrazuje jaké vlastnosti je třeba nastavit pro konkrétní typ prostředku, správné hodnoty, atd. Můžete například vytvořit vaší skupiny prostředků v [portálu Azure](https://portal.azure.com/), zkontrolujte jeho definice JSON v nástroj Průzkumník můžete templatize skupině prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-134">The information readily available in this tool is very helpful for template authoring because it shows you what properties you need to set for a particular type of resource, the correct values, etc. You can even create your resource group in the [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in the explorer tool to help you templatize the resource group.</span></span>

### <a name="deploy-to-azure-button"></a><span data-ttu-id="675c6-135">Nasazení do Azure tlačítko</span><span class="sxs-lookup"><span data-stu-id="675c6-135">Deploy to Azure button</span></span>
<span data-ttu-id="675c6-136">Pokud používáte GitHub pro řízení zdrojů, které můžete vložit [nasadit do Azure tlačítko](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) do vašeho souboru README. MD, což umožňuje nasazení klíč uživatelského rozhraní do Azure.</span><span class="sxs-lookup"><span data-stu-id="675c6-136">If you use GitHub for source control, you can put a [Deploy to Azure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI to Azure.</span></span> <span data-ttu-id="675c6-137">Zatímco můžete provést pro všechny jednoduché webové aplikace, můžete rozšířit na povolit nasazení celé skupiny prostředků umístěním souboru azuredeploy.json v kořenovém adresáři úložiště.</span><span class="sxs-lookup"><span data-stu-id="675c6-137">While you can do this for any simple web app, you can extend this to enable deploying an entire resource group by putting an azuredeploy.json file in the repository root.</span></span> <span data-ttu-id="675c6-138">Tento soubor JSON, který obsahuje šablony skupiny prostředků, použije nasadit do Azure tlačítko pro vytvoření skupiny prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-138">This JSON file, which contains the resource group template, will be used by the Deploy to Azure button to create the resource group.</span></span> <span data-ttu-id="675c6-139">Příklad, naleznete v části [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) vzorku, který budete používat v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="675c6-139">For an example, see the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-the-sample-resource-group-template"></a><span data-ttu-id="675c6-140">Získat šablonu ukázka skupiny prostředků</span><span class="sxs-lookup"><span data-stu-id="675c6-140">Get the sample resource group template</span></span>
<span data-ttu-id="675c6-141">Proto nyní Pojďme vpravo na ni.</span><span class="sxs-lookup"><span data-stu-id="675c6-141">So now let’s get right to it.</span></span>

1. <span data-ttu-id="675c6-142">Přejděte na [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) Ukázka aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="675c6-142">Navigate to the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="675c6-143">V readme.md, klikněte na **nasadit do Azure**.</span><span class="sxs-lookup"><span data-stu-id="675c6-143">In readme.md, click **Deploy to Azure**.</span></span>
3. <span data-ttu-id="675c6-144">Se [nasadit do azure](https://deploy.azure.com) lokality a výzva k vstupní parametry nasazení.</span><span class="sxs-lookup"><span data-stu-id="675c6-144">You’re taken to the [deploy-to-azure](https://deploy.azure.com) site and asked to input deployment parameters.</span></span> <span data-ttu-id="675c6-145">Všimněte si, že většina polí se naplní název úložiště a některé náhodného řetězce pro vás.</span><span class="sxs-lookup"><span data-stu-id="675c6-145">Notice that most of the fields are populated with the repository name and some random strings for you.</span></span> <span data-ttu-id="675c6-146">Všechna pole můžete změnit, pokud chcete, ale pouze věcí, je nutné zadat jsou přihlášení správce systému SQL Server a heslo a pak klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="675c6-146">You can change all the fields if you want, but the only things you have to enter are the SQL Server administrative login and the password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="675c6-147">Klikněte na tlačítko **nasadit** k zahájení procesu nasazení.</span><span class="sxs-lookup"><span data-stu-id="675c6-147">Next, click **Deploy** to start the deployment process.</span></span> <span data-ttu-id="675c6-148">Jakmile se spustí proces dokončen, klikněte na tlačítko http://todoapp*XXXX*. azurewebsites.net odkaz na Procházet nasazené aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-148">Once the process runs to completion, click the http://todoapp*XXXX*.azurewebsites.net link to browse the deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="675c6-149">Uživatelské rozhraní by být trochu pomalé, pokud nejprve procházení vzhledem k tomu, že se aplikace právě spuštění, ale přimět sami, že je plně funkční aplikaci.</span><span class="sxs-lookup"><span data-stu-id="675c6-149">The UI would be a little slow when you first browse to it because the apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="675c6-150">Zpět na stránce nasadit, klikněte **spravovat** odkaz zobrazíte novou aplikaci na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="675c6-150">Back in the Deploy page, click the **Manage** link to see the new application in the Azure Portal.</span></span>
6. <span data-ttu-id="675c6-151">V **Essentials** rozevíracího seznamu, klikněte na odkaz skupiny prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-151">In the **Essentials** dropdown, click the resource group link.</span></span> <span data-ttu-id="675c6-152">Všimněte si také, že webová aplikace je již připojen k úložišti GitHub pod **externí projektu**.</span><span class="sxs-lookup"><span data-stu-id="675c6-152">Note also that the web app is already connected to the GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="675c6-153">V okně skupiny prostředků Všimněte si, že již existují dva webové aplikace a jedna databáze SQL ve skupině prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-153">In the resource group blade, note that there are already two web apps and one SQL Database in the resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="675c6-154">Vše, co jste viděli pouze za pár minut krátké plně nasazené dva mikroslužbu aplikace, se všechny součásti, závislosti, nastavení, databáze a průběžné publikování nastavil automatizované orchestration ve službě Správce prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="675c6-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all the components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="675c6-155">Všechny tomu bylo potřeba dvě věci:</span><span class="sxs-lookup"><span data-stu-id="675c6-155">All this was done by two things:</span></span>

* <span data-ttu-id="675c6-156">Nasadit do Azure tlačítko</span><span class="sxs-lookup"><span data-stu-id="675c6-156">The Deploy to Azure button</span></span>
* <span data-ttu-id="675c6-157">azuredeploy.JSON v kořenovém úložišti</span><span class="sxs-lookup"><span data-stu-id="675c6-157">azuredeploy.json in the repo root</span></span>

<span data-ttu-id="675c6-158">Můžete nasadit stejná aplikace desítek, stovek nebo tisíců časy a přesně stejnou konfiguraci pokaždé, když máte.</span><span class="sxs-lookup"><span data-stu-id="675c6-158">You can deploy this same application tens, hundreds, or thousands of times and have the exact same configuration every time.</span></span> <span data-ttu-id="675c6-159">Opakovatelnost a předvídatelnost tento přístup umožňuje nasadit špičkové aplikace s jednoduchosti a spolehlivosti.</span><span class="sxs-lookup"><span data-stu-id="675c6-159">The repeatability and the predictability of this approach enables you to deploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="675c6-160">Zkontrolujte (nebo upravit) AZUREDEPLOY. JSON</span><span class="sxs-lookup"><span data-stu-id="675c6-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="675c6-161">Nyní podíváme, jak bylo nastaveno úložiště GitHub.</span><span class="sxs-lookup"><span data-stu-id="675c6-161">Now let’s look at how the GitHub repository was set up.</span></span> <span data-ttu-id="675c6-162">Budete používat JSON editor v .NET SDK služby Azure, takže pokud jste ještě nenainstalovali [Azure .NET SDK 2.6](/downloads/), udělejte teď.</span><span class="sxs-lookup"><span data-stu-id="675c6-162">You will be using the JSON editor in the Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="675c6-163">Klon [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) úložiště pomocí vaše oblíbené git nástroje.</span><span class="sxs-lookup"><span data-stu-id="675c6-163">Clone the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="675c6-164">Na tomto snímku obrazovky to bude to v Průzkumník týmových projektů v sadě Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="675c6-164">In the screenshot below, I’m doing this in the Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="675c6-165">Na kořenovém adresáři úložiště spusťte azuredeploy.json v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="675c6-165">From the repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="675c6-166">Pokud nevidíte v podokně osnovou JSON, budete muset nainstalovat sadu Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="675c6-166">If you don’t see the JSON Outline pane, you need to install Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="675c6-167">Není, který bude popisují každou podrobností formátu JSON, ale [více prostředků](#resources) část obsahuje odkazy pro učení jazyka šablony skupiny prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-167">I’m not going to describe every detail of the JSON format, but the [More Resources](#resources) section has links for learning the resource group template language.</span></span> <span data-ttu-id="675c6-168">Právě zde bude ukázat vám, že zajímavé funkce, které vám pomůžou začít při vytvoření vlastní šablony pro nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-168">Here, I’m just going to show you the interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="675c6-169">Parametry</span><span class="sxs-lookup"><span data-stu-id="675c6-169">Parameters</span></span>
<span data-ttu-id="675c6-170">Podívejte se na části Parametry uvidíte, že většina tyto parametry jsou co **nasadit do Azure** tlačítko vás vyzve, abyste vstup.</span><span class="sxs-lookup"><span data-stu-id="675c6-170">Take a look at the parameters section to see that most of these parameters are what the **Deploy to Azure** button prompts you to input.</span></span> <span data-ttu-id="675c6-171">Lokality za **nasadit do Azure** tlačítko naplní vstupní parametry definované v azuredeploy.json pomocí uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="675c6-171">The site behind the **Deploy to Azure** button populates the input UI using the parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="675c6-172">Tyto parametry se používají v definicích prostředků, jako je například názvy prostředků, hodnoty vlastností, atd.</span><span class="sxs-lookup"><span data-stu-id="675c6-172">These parameters are used throughout the resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="675c6-173">Zdroje</span><span class="sxs-lookup"><span data-stu-id="675c6-173">Resources</span></span>
<span data-ttu-id="675c6-174">V uzlu prostředků uvidíte, že jsou definovány 4 nejvyšší úrovně prostředky, včetně instance systému SQL Server, plán služby App Service a dva webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-174">In the resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="675c6-175">Plán služby App Service</span><span class="sxs-lookup"><span data-stu-id="675c6-175">App Service plan</span></span>
<span data-ttu-id="675c6-176">Začněme jednoduché prostředků úrovni kořenového adresáře v kódu JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-176">Let’s start with a simple root-level resource in the JSON.</span></span> <span data-ttu-id="675c6-177">V osnovou JSON, klikněte na plán služby App Service s názvem **[hostingPlanName]** zvýrazněte odpovídající kód JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-177">In the JSON Outline, click the App Service plan named **[hostingPlanName]** to highlight the corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="675c6-178">Všimněte si, že `type` element určuje řetězec pro plán služby App Service (byla volána v serverové farmě dlouhý, dlouhou dobou) a další prvky a vlastnosti jsou vyplněny pomocí parametry definované v souboru JSON a tento prostředek neobsahuje žádné vnořené prostředky.</span><span class="sxs-lookup"><span data-stu-id="675c6-178">Note that the `type` element specifies the string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using the parameters defined in the JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="675c6-179">Poznámka: hodnota `apiVersion` informuje Azure, která verze rozhraní REST API použijte JSON definice prostředků s ale může mít vliv na způsob formátování prostředek uvnitř `{}`.</span><span class="sxs-lookup"><span data-stu-id="675c6-179">Note also that the value of `apiVersion` tells Azure which version of the REST API to use the JSON resource definition with, and it can affect how the resource should be formatted inside the `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="675c6-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="675c6-180">SQL Server</span></span>
<span data-ttu-id="675c6-181">Potom klikněte na prostředek systému SQL Server s názvem **SQLServer** osnovy JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-181">Next, click on the SQL Server resource named **SQLServer** in the JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="675c6-182">Vezměte na vědomí následující skutečnosti související zvýrazněný kód JSON:</span><span class="sxs-lookup"><span data-stu-id="675c6-182">Note the following about the highlighted JSON code:</span></span>

* <span data-ttu-id="675c6-183">Použití parametrů zajišťuje, že jsou vytvořené prostředky s názvem a nakonfigurovat tak, že jsou konzistentní s jednu na druhou.</span><span class="sxs-lookup"><span data-stu-id="675c6-183">The use of parameters ensures that the created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="675c6-184">Prostředek SQLServer má dva vnořených prostředků, každá z nich má jinou hodnotu pro `type`.</span><span class="sxs-lookup"><span data-stu-id="675c6-184">The SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="675c6-185">Vnořených prostředků uvnitř `“resources”: […]`, kde jsou definovány databáze a pravidla brány firewall, mají `dependsOn` element, který určuje ID prostředku prostředku SQLServer kořenové úrovni.</span><span class="sxs-lookup"><span data-stu-id="675c6-185">The nested resources inside `“resources”: […]`, where the database and the firewall rules are defined, have a `dependsOn` element that specifies the resource ID of the root-level SQLServer resource.</span></span> <span data-ttu-id="675c6-186">Tato hodnota informuje Azure Resource Manager, "před vytvořením tohoto prostředku, který už musí existovat jiný prostředek; a pokud tento jiný prostředek je definován v šabloně, vytvořte než nejprve".</span><span class="sxs-lookup"><span data-stu-id="675c6-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in the template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="675c6-187">Podrobné informace o tom, jak používat `resourceId()` funkce najdete v tématu [funkce šablon Azure Resource Manager](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="675c6-187">For detailed information on how to use the `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="675c6-188">Účinek `dependsOn` element je, že Azure Resource Manager mohli zjistit prostředky, ke kterým může být vytvořen paralelně a prostředky, ke kterým musí být vytvořený postupně.</span><span class="sxs-lookup"><span data-stu-id="675c6-188">The effect of the `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="675c6-189">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="675c6-189">Web app</span></span>
<span data-ttu-id="675c6-190">Nyní můžeme přesunout k skutečné webové aplikace, sami, které jsou složitější.</span><span class="sxs-lookup"><span data-stu-id="675c6-190">Now, let’s move on to the actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="675c6-191">Klikněte na tlačítko webové aplikace [variables('apiSiteName')] do osnovou JSON, abyste měli na očích jeho kód JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-191">Click the [variables(‘apiSiteName’)] web app in the JSON Outline to highlight its JSON code.</span></span> <span data-ttu-id="675c6-192">Můžete si všimnout, že jsou získávání věcí mnohem víc zajímavé.</span><span class="sxs-lookup"><span data-stu-id="675c6-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="675c6-193">Pro tento účel I mluvit o funkcích jeden po druhém:</span><span class="sxs-lookup"><span data-stu-id="675c6-193">For this purpose, I’ll talk about the features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="675c6-194">Kořenové prostředků</span><span class="sxs-lookup"><span data-stu-id="675c6-194">Root resource</span></span>
<span data-ttu-id="675c6-195">Webové aplikace, závisí na dvou různých prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-195">The web app depends on two different resources.</span></span> <span data-ttu-id="675c6-196">To znamená, že bude Azure Resource Manager až po, vytvoří se plán služby App Service a instance systému SQL Server vytvořit webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-196">This means that Azure Resource Manager will create the web app only after both the App Service plan and the SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="675c6-197">Nastavení aplikace</span><span class="sxs-lookup"><span data-stu-id="675c6-197">App settings</span></span>
<span data-ttu-id="675c6-198">Nastavení aplikace jsou také definovat jako vnořeného prostředku.</span><span class="sxs-lookup"><span data-stu-id="675c6-198">The app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="675c6-199">V `properties` element pro `config/appsettings`, máte dvě nastavení aplikace ve formátu `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="675c6-199">In the `properties` element for `config/appsettings`, you have two app settings in the format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="675c6-200">`PROJECT`je [KUDU nastavení](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) které sděluje nasazení Azure, které projektu pro použití v sadě Visual Studio řešení vícenásobného projektu.</span><span class="sxs-lookup"><span data-stu-id="675c6-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project to use in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="675c6-201">I vám ukáže, později zdrojového kódu konfiguraci, ale vzhledem k tomu, že kód ToDoApp je v sadě Visual Studio řešení vícenásobného projektu, je třeba, aby toto nastavení.</span><span class="sxs-lookup"><span data-stu-id="675c6-201">I will show you later how source control is configured, but since the ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="675c6-202">`clientUrl`je jednoduše aplikace nastavení, která kódu aplikace používá.</span><span class="sxs-lookup"><span data-stu-id="675c6-202">`clientUrl` is simply an app setting that the application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="675c6-203">Připojovací řetězce</span><span class="sxs-lookup"><span data-stu-id="675c6-203">Connection strings</span></span>
<span data-ttu-id="675c6-204">Připojovací řetězce, je definována jako vnořeného prostředku.</span><span class="sxs-lookup"><span data-stu-id="675c6-204">The connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="675c6-205">V `properties` element pro `config/connectionstrings`, každý připojovací řetězec je také definován jako dvojice názvu a hodnoty, s konkrétní formát `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="675c6-205">In the `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with the specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="675c6-206">Pro `type` elementu možné hodnoty jsou `MySql`, `SQLServer`, `SQLAzure`, a `Custom`.</span><span class="sxs-lookup"><span data-stu-id="675c6-206">For the `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="675c6-207">Pro konečné seznam typů řetězec připojení, spusťte následující příkaz v prostředí Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="675c6-207">For a definitive list of the connection string types, run the following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="675c6-208">Správa zdrojového kódu</span><span class="sxs-lookup"><span data-stu-id="675c6-208">Source control</span></span>
<span data-ttu-id="675c6-209">Nastavení správy zdrojů, je definována jako vnořeného prostředku.</span><span class="sxs-lookup"><span data-stu-id="675c6-209">The source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="675c6-210">Azure Resource Manager používá tento prostředek konfigurace průběžné publikování (viz přímý přístup paměti na `IsManualIntegration` později) a taky ji nasazování kódu aplikace automaticky během zpracování souboru JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-210">Azure Resource Manager uses this resource to configure continuous publishing (see caveat on `IsManualIntegration` later) and also to kick off the deployment of application code automatically during the processing of the JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="675c6-211">`RepoUrl`a `branch` by měl být poměrně intuitivní a by měla odkazovat na název větve pro publikování z a úložiště Git.</span><span class="sxs-lookup"><span data-stu-id="675c6-211">`RepoUrl` and `branch` should be pretty intuitive and should point to the Git repository and the name of the branch to publish from.</span></span> <span data-ttu-id="675c6-212">Opakujte tyto jsou definované vstupní parametry.</span><span class="sxs-lookup"><span data-stu-id="675c6-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="675c6-213">Poznámka: v `dependsOn` element, který kromě webovým prostředkům aplikace samostatně, `sourcecontrols/web` závisí také na `config/appsettings` a `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="675c6-213">Note in the `dependsOn` element that, in addition to the web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="675c6-214">Důvodem je, že po `sourcecontrols/web` je nakonfigurován, proces nasazení Azure budou snažit o automatické nasazení, sestavit a spustit kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-214">This is because once `sourcecontrols/web` is configured, the Azure deployment process will automatically attempt to deploy, build, and start the application code.</span></span> <span data-ttu-id="675c6-215">Proto vkládání tuto závislost vám pomůže Ujistěte se, že aplikace má přístup k nastavení požadovaná aplikace a připojovací řetězce, před spuštěním kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-215">Therefore, inserting this dependency helps you make sure that the application has access to the required app settings and connection strings before the application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="675c6-216">Všimněte si také, že `IsManualIntegration` je nastaven na `true`.</span><span class="sxs-lookup"><span data-stu-id="675c6-216">Note also that `IsManualIntegration` is set to `true`.</span></span> <span data-ttu-id="675c6-217">Tato vlastnost je nutné v tomto kurzu, protože ve skutečnosti nevlastníte úložiště GitHub a proto nelze udělit ve skutečnosti oprávnění k Azure a nakonfigurovat nepřetržité publikování z [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (tj.)</span><span class="sxs-lookup"><span data-stu-id="675c6-217">This property is necessary in this tutorial because you do not actually own the GitHub repository, and thus cannot actually grant permission to Azure to configure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e.</span></span> <span data-ttu-id="675c6-218">nabízená aktualizace automatické úložiště Azure).</span><span class="sxs-lookup"><span data-stu-id="675c6-218">push automatic repository updates to Azure).</span></span> <span data-ttu-id="675c6-219">Můžete použít výchozí hodnotu `false` pro zadané úložiště jenom v případě, že jste nakonfigurovali přihlašovací údaje Githubu vlastníka v [portál Azure](https://portal.azure.com/) před.</span><span class="sxs-lookup"><span data-stu-id="675c6-219">You can use the default value `false` for the specified repository only if you have configured the owner’s GitHub credentials in the [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="675c6-220">Jinými slovy Pokud jste nastavili zdrojového kódu pro libovolnou aplikaci v GitHub nebo BitBucket [portálu Azure](https://portal.azure.com/) dříve, pomocí vaší uživatelské přihlašovací údaje, pak Azure bude pamatovat přihlašovací údaje a použít je vždy, když nasazujete žádné aplikace z webu GitHub nebo BitBucket v budoucnu.</span><span class="sxs-lookup"><span data-stu-id="675c6-220">In other words, if you have set up source control to GitHub or BitBucket for any app in the [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember the credentials and use them whenever you deploy any app from GitHub or BitBucket in the future.</span></span> <span data-ttu-id="675c6-221">Ale pokud jste to ještě neudělali, nasazení šablony JSON se nezdaří když Azure Resource Manager pokusí konfigurovat nastavení správy zdrojů webové aplikace, protože se nemůžete přihlásit do GitHub nebo BitBucket s přihlašovacími údaji úložiště vlastníka.</span><span class="sxs-lookup"><span data-stu-id="675c6-221">However, if you haven’t done this already, deployment of the JSON template will fail when Azure Resource Manager tries to configure the web app’s source control settings because it cannot log into GitHub or BitBucket with the repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-the-json-template-with-deployed-resource-group"></a><span data-ttu-id="675c6-222">Porovnání šablona JSON se skupinou nasazené prostředků</span><span class="sxs-lookup"><span data-stu-id="675c6-222">Compare the JSON template with deployed resource group</span></span>
<span data-ttu-id="675c6-223">Zde můžete přejít pomocí okna všechny webové aplikace v [portálu Azure](https://portal.azure.com/), ale existuje jiný nástroj, který není stejně jako užitečné, pokud informace.</span><span class="sxs-lookup"><span data-stu-id="675c6-223">Here, you can go through all the web app’s blades in the [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="675c6-224">Přejděte na [Průzkumníka prostředků Azure](https://resources.azure.com) preview nástroj, který poskytuje reprezentaci JSON všech skupin prostředků v rámci vašich předplatných, které jsou ve skutečnosti v Azure back-end.</span><span class="sxs-lookup"><span data-stu-id="675c6-224">Go to the [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all the resource groups in your subscriptions, as they actually exist in the Azure backend.</span></span> <span data-ttu-id="675c6-225">Můžete také zjistit, jak odpovídá hierarchii JSON skupině prostředků v Azure s hierarchií v souboru šablony, který se používá k jeho vytvoření.</span><span class="sxs-lookup"><span data-stu-id="675c6-225">You can also see how the resource group’s JSON hierarchy in Azure corresponds with the hierarchy in the template file that’s used to create it.</span></span>

<span data-ttu-id="675c6-226">Například když přejít k [Průzkumníka prostředků Azure](https://resources.azure.com) nástroje a rozbalte uzly v Průzkumníku, zobrazují se skupina prostředků a prostředky úrovni kořenového adresáře, které se shromažďují v jejich typy příslušných prostředků.</span><span class="sxs-lookup"><span data-stu-id="675c6-226">For example, when I go to the [Azure Resource Explorer](https://resources.azure.com) tool and expand the nodes in the explorer, I can see the resource group and the root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="675c6-227">Pokud můžete přejít k podrobnostem a webovou aplikaci, byste měli vidět podrobnosti konfigurace webové aplikace podobně jako následující snímek obrazovky:</span><span class="sxs-lookup"><span data-stu-id="675c6-227">If you drill down to a web app, you should be able to see web app configuration details similar to the below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="675c6-228">Znovu vnořených prostředků by měl mít velmi podobná těm v souboru šablony JSON hierarchie a měli byste vidět nastavení aplikace, připojovací řetězce, atd., správně odrážela v podokně JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-228">Again, the nested resources should have a hierarchy very similar to those in your JSON template file, and you should see the app settings, connection strings, etc., properly reflected in the JSON pane.</span></span> <span data-ttu-id="675c6-229">Nastavení v tomto poli chybí může značit problém s souboru JSON a může pomoci při odstraňování souboru šablony JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-229">The absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-the-resource-group-template-yourself"></a><span data-ttu-id="675c6-230">Nasazení šablony skupiny prostředků sami</span><span class="sxs-lookup"><span data-stu-id="675c6-230">Deploy the resource group template yourself</span></span>
<span data-ttu-id="675c6-231">**Nasadit do Azure** tlačítko je skvělé, ale umožňuje nasadit šablony skupiny prostředků v azuredeploy.json pouze v případě, že jste již nabídnutých azuredeploy.json do Githubu.</span><span class="sxs-lookup"><span data-stu-id="675c6-231">The **Deploy to Azure** button is great, but it allows you to deploy the resource group template in azuredeploy.json only if you have already pushed azuredeploy.json to GitHub.</span></span> <span data-ttu-id="675c6-232">.NET SDK služby Azure také poskytuje nástroje, které můžete nasadit všechny soubor šablony JSON přímo z vašeho místního počítače.</span><span class="sxs-lookup"><span data-stu-id="675c6-232">The Azure .NET SDK also provides the tools for you to deploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="675c6-233">Chcete-li to provést, postupujte následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="675c6-233">To do this, follow the steps below:</span></span>

1. <span data-ttu-id="675c6-234">V sadě Visual Studio, klikněte na tlačítko **soubor** > **nový** > **projektu**.</span><span class="sxs-lookup"><span data-stu-id="675c6-234">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="675c6-235">Klikněte na tlačítko **Visual C#** > **cloudu** > **skupiny prostředků Azure**, pak klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="675c6-235">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="675c6-236">V **vybrat šablonu Azure**, vyberte **prázdné šablonu** a klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="675c6-236">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="675c6-237">Přetáhněte azuredeploy.json do **šablony** složky nový projekt.</span><span class="sxs-lookup"><span data-stu-id="675c6-237">Drag azuredeploy.json into the **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="675c6-238">V Průzkumníku řešení otevřete zkopírovaný azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="675c6-238">From Solution Explorer, open the copied azuredeploy.json.</span></span>
6. <span data-ttu-id="675c6-239">Pouze z důvodu ukázky, přidejme některé standardní prostředky aplikace vhled do našich souboru JSON, kliknutím na **přidat prostředek**.</span><span class="sxs-lookup"><span data-stu-id="675c6-239">Just for the sake of the demonstration, let’s add some standard Application Insight resources to our JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="675c6-240">Pokud vás zajímá jenom nasazení souboru JSON, pokračujte kroky nasazení.</span><span class="sxs-lookup"><span data-stu-id="675c6-240">If you’re just interested in deploying the JSON file, skip to the deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="675c6-241">Vyberte **Application Insights pro webové aplikace**, pak se ujistěte, že je vybrána existující aplikaci plán a webové služby App Service a pak klikněte na tlačítko **přidat**.</span><span class="sxs-lookup"><span data-stu-id="675c6-241">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="675c6-242">Nyní budete moct najdete několik nových prostředků, který v závislosti na prostředek a jakým způsobem, jsou závislé na plán služby App Service nebo webovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="675c6-242">You’ll now be able to see several new resources that, depending on the resource and what it does, have dependencies on either the App Service plan or the web app.</span></span> <span data-ttu-id="675c6-243">Tyto prostředky nejsou povolené podle jejich stávající definice a změnit, který se chystáte.</span><span class="sxs-lookup"><span data-stu-id="675c6-243">These resources are not enabled by their existing definition and you’re going to change that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="675c6-244">V osnovou JSON, klikněte na **appInsights škálování** zvýrazněte jeho kód JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-244">In the JSON Outline, click **appInsights AutoScale** to highlight its JSON code.</span></span> <span data-ttu-id="675c6-245">Toto je nastavení škálování pro plán služby App Service.</span><span class="sxs-lookup"><span data-stu-id="675c6-245">This is the scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="675c6-246">Vyhledejte ve zvýrazněný kód JSON `location` a `enabled` vlastnosti a nastavte je, jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="675c6-246">In the highlighted JSON code, locate the `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="675c6-247">V osnovou JSON, klikněte na **CPUHigh appInsights** zvýrazněte jeho kód JSON.</span><span class="sxs-lookup"><span data-stu-id="675c6-247">In the JSON Outline, click **CPUHigh appInsights** to highlight its JSON code.</span></span> <span data-ttu-id="675c6-248">Toto je upozornění.</span><span class="sxs-lookup"><span data-stu-id="675c6-248">This is an alert.</span></span>
11. <span data-ttu-id="675c6-249">Vyhledejte `location` a `isEnabled` vlastnosti a nastavte je, jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="675c6-249">Locate the `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="675c6-250">Totéž pro další tři výstrahy (fialové žárovky).</span><span class="sxs-lookup"><span data-stu-id="675c6-250">Do the same for the other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="675c6-251">Teď jste připravení nasadit.</span><span class="sxs-lookup"><span data-stu-id="675c6-251">You’re now ready to deploy.</span></span> <span data-ttu-id="675c6-252">Klikněte pravým tlačítkem na projekt a vyberte **nasadit** > **nové nasazení**.</span><span class="sxs-lookup"><span data-stu-id="675c6-252">Right-click the project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="675c6-253">Přihlaste se k účtu Azure, pokud jste tak již neučinili.</span><span class="sxs-lookup"><span data-stu-id="675c6-253">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="675c6-254">Vyberte existující skupinu prostředků ve vašem předplatném nebo vytvořte novou jeden, vyberte **azuredeploy.json**a potom klikněte na **upravit parametry**.</span><span class="sxs-lookup"><span data-stu-id="675c6-254">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="675c6-255">Nyní budete moci upravit všechny parametry definované v souboru šablony dobrý tabulky.</span><span class="sxs-lookup"><span data-stu-id="675c6-255">You’ll now be able to edit all the parameters defined in the template file in a nice table.</span></span> <span data-ttu-id="675c6-256">Parametry, které definují výchozí hodnoty budou již máte výchozí hodnoty a parametry, které definují seznam povolených hodnot se zobrazí jako rozevírací seznamy.</span><span class="sxs-lookup"><span data-stu-id="675c6-256">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="675c6-257">Zadejte všechny prázdné parametry a použít [adresu úložišti GitHub pro ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) v **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="675c6-257">Fill in all the empty parameters, and use the [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="675c6-258">Potom klikněte na **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="675c6-258">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="675c6-259">Automatické škálování je funkce, které nabízí v **standardní** vrstvě nebo vyšší a plán úroveň výstrahy jsou funkce nenabízí **základní** úroveň, nebo vyšší, budete muset nastavit **sku** parametru **standardní** nebo **Premium** Chcete-li zobrazit všechny nové aplikace Insights prostředky světla nahoru.</span><span class="sxs-lookup"><span data-stu-id="675c6-259">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need to set the **sku** parameter to **Standard** or **Premium** in order to see all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="675c6-260">Klikněte na tlačítko **nasazení**.</span><span class="sxs-lookup"><span data-stu-id="675c6-260">Click **Deploy**.</span></span> <span data-ttu-id="675c6-261">Pokud jste vybrali **ukládat hesla**, heslo bude uloženo v souboru parametrů **ve formátu prostého textu**.</span><span class="sxs-lookup"><span data-stu-id="675c6-261">If you selected **Save passwords**, the password will be saved in the parameter file **in plain text**.</span></span> <span data-ttu-id="675c6-262">Jinak budete požádáni o zadání hesla databáze během procesu nasazení.</span><span class="sxs-lookup"><span data-stu-id="675c6-262">Otherwise, you’ll be asked to input the database password during the deployment process.</span></span>

<span data-ttu-id="675c6-263">A to je vše!</span><span class="sxs-lookup"><span data-stu-id="675c6-263">That’s it!</span></span> <span data-ttu-id="675c6-264">Teď stačí přejít na [portálu Azure](https://portal.azure.com/) a [Průzkumníka prostředků Azure](https://resources.azure.com) nástroj zobrazíte nové výstrahy a nastavení automatického škálování přidán do vaší JSON nasazené aplikace.</span><span class="sxs-lookup"><span data-stu-id="675c6-264">Now you just need to go to the [Azure Portal](https://portal.azure.com/) and the [Azure Resource Explorer](https://resources.azure.com) tool to see the new alerts and autoscale settings added to your JSON deployed application.</span></span>

<span data-ttu-id="675c6-265">Vaše kroky v této části především udělat následující:</span><span class="sxs-lookup"><span data-stu-id="675c6-265">Your steps in this section mainly accomplished the following:</span></span>

1. <span data-ttu-id="675c6-266">Připravený soubor šablony</span><span class="sxs-lookup"><span data-stu-id="675c6-266">Prepared the template file</span></span>
2. <span data-ttu-id="675c6-267">Vytvořit soubor parametr pomocí souboru šablony</span><span class="sxs-lookup"><span data-stu-id="675c6-267">Created a parameter file to go with the template file</span></span>
3. <span data-ttu-id="675c6-268">Nasadit soubor šablony s soubor parametrů</span><span class="sxs-lookup"><span data-stu-id="675c6-268">Deployed the template file with the parameter file</span></span>

<span data-ttu-id="675c6-269">Posledním krokem je snadno provádí rutiny prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="675c6-269">The last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="675c6-270">Chcete-li zjistit, co Visual Studio se po jeho nasazení vaší aplikace, otevřete Scripts\Deploy AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="675c6-270">To see what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="675c6-271">Existuje mnoho kódu existuje, ale právě přechod do zvýrazněte všechny příslušné kód, který potřebujete k nasazení šablony souborů a parametr.</span><span class="sxs-lookup"><span data-stu-id="675c6-271">There’s a lot of code there, but I’m just going to highlight all the pertinent code you need to deploy the template file with the parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="675c6-272">Rutinu poslední `New-AzureResourceGroup`, je ten, který ve skutečnosti provádí akce.</span><span class="sxs-lookup"><span data-stu-id="675c6-272">The last cmdlet, `New-AzureResourceGroup`, is the one that actually performs the action.</span></span> <span data-ttu-id="675c6-273">To vše prokázat vám, že s pomocí nástrojů, je relativně jednoduché nasazení cloudových aplikací předvídatelné.</span><span class="sxs-lookup"><span data-stu-id="675c6-273">All this should demonstrate to you that, with the help of tooling, it is relatively straightforward to deploy your cloud application predictably.</span></span> <span data-ttu-id="675c6-274">Pokaždé, když spustíte rutinu na stejné šablony s stejný soubor parametrů, budete získáte stejný výsledek.</span><span class="sxs-lookup"><span data-stu-id="675c6-274">Every time you run the cmdlet on the same template with the same parameter file, you’re going to get the same result.</span></span>

## <a name="summary"></a><span data-ttu-id="675c6-275">Souhrn</span><span class="sxs-lookup"><span data-stu-id="675c6-275">Summary</span></span>
<span data-ttu-id="675c6-276">V DevOps opakovatelnost a předvídatelnost jsou klíče pro všechny úspěšné nasazení velkého rozsahu aplikace skládá z mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="675c6-276">In DevOps, repeatability and predictability are keys to any successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="675c6-277">V tomto kurzu jste nasadili dva mikroslužbu aplikaci do Azure jako jedna skupina prostředků pomocí šablony Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="675c6-277">In this tutorial, you have deployed a two-microservice application to Azure as a single resource group using the Azure Resource Manager template.</span></span> <span data-ttu-id="675c6-278">Doufáme ho udělil znalosti, které potřebujete, aby bylo možné spustit převodu šablonu aplikace v Azure a můžete zřídit a nasadit ji předvídatelné.</span><span class="sxs-lookup"><span data-stu-id="675c6-278">Hopefully, it has given you the knowledge you need in order to start converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="675c6-279">Další kroky</span><span class="sxs-lookup"><span data-stu-id="675c6-279">Next Steps</span></span>
<span data-ttu-id="675c6-280">Zjistěte, jak [použít agilní metod a průběžně snadno publikovat svoji aplikaci mikroslužeb](app-service-agile-software-development.md) a pokročilé techniky nasazení jako [flighting nasazení](app-service-web-test-in-production-controlled-test-flight.md) snadno.</span><span class="sxs-lookup"><span data-stu-id="675c6-280">Find out how to [apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="675c6-281">Další zdroje informací</span><span class="sxs-lookup"><span data-stu-id="675c6-281">More resources</span></span>
* [<span data-ttu-id="675c6-282">Jazyk šablony Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="675c6-282">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="675c6-283">Vytváření šablon Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="675c6-283">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="675c6-284">Funkce šablony Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="675c6-284">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="675c6-285">Nasazení aplikace pomocí šablony Azure Resource Manageru</span><span class="sxs-lookup"><span data-stu-id="675c6-285">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="675c6-286">Použití Azure PowerShellu s Azure Resource Managerem</span><span class="sxs-lookup"><span data-stu-id="675c6-286">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="675c6-287">Řešení potíží s nasazením skupin prostředků v Azure</span><span class="sxs-lookup"><span data-stu-id="675c6-287">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

