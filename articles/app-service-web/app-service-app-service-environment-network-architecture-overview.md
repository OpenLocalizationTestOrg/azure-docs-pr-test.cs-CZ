---
title: "Přehled síťové architektury ve službě App Service Environment"
description: "Přehled architektury ofApp topologie sítě služby prostředí."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: b2afe86d8774b449a257312d4e60b5f6125336ca
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="8ff22-103">Přehled síťové architektury ve službě App Service Environment</span><span class="sxs-lookup"><span data-stu-id="8ff22-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="8ff22-104">Úvod</span><span class="sxs-lookup"><span data-stu-id="8ff22-104">Introduction</span></span>
<span data-ttu-id="8ff22-105">Prostředí App Service se vytváří vždy v rámci podsítí [virtuální sítě] [ virtualnetwork] -aplikace běžící ve službě App Service Environment může komunikovat s privátní koncové body umístěné v rámci stejné virtuální topologie sítě.</span><span class="sxs-lookup"><span data-stu-id="8ff22-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within the same virtual network topology.</span></span>  <span data-ttu-id="8ff22-106">Vzhledem k tomu, že zákazníci můžou zamknout součástí infrastruktury svojí virtuální sítě, je důležité si uvědomit, typy síťovými toky komunikace, které se služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-106">Since customers may lock down parts of their virtual network infrastructure, it is important to understand the types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="8ff22-107">Tok obecné sítě</span><span class="sxs-lookup"><span data-stu-id="8ff22-107">General Network Flow</span></span>
<span data-ttu-id="8ff22-108">Používá-li aplikaci služby prostředí řízení, veřejné virtuální adresy IP (VIP) pro aplikace, všechny příchozí přenos dorazí na tuto veřejnou virtuální IP.</span><span class="sxs-lookup"><span data-stu-id="8ff22-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="8ff22-109">To zahrnuje přenosů dat HTTP a HTTPS pro aplikace, a také ostatní přenosy FTP, funkce vzdáleného ladění a operace správy Azure.</span><span class="sxs-lookup"><span data-stu-id="8ff22-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="8ff22-110">Úplný seznam určité porty (požadované a volitelné), které jsou k dispozici na veřejných virtuálních IP adres najdete v článku na [řízení příchozí provoz] [ controllinginboundtraffic] do služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-110">For a full list of the specific ports (both required and optional) that are available on the public VIP see the article on [controlling inbound traffic][controllinginboundtraffic] to an App Service Environment.</span></span> 

<span data-ttu-id="8ff22-111">Služby App Service Environment také podporují spuštěné aplikace, které jsou vázány jenom na interní adresu virtuální sítě, také označuje jako adresu ILB (nástroj pro vyrovnávání zatížení pro vnitřní).</span><span class="sxs-lookup"><span data-stu-id="8ff22-111">App Service Environments also support running apps that are bound only to a virtual network internal address, also referred to as an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="8ff22-112">Na ILB povoleno App Service Environment, HTTP a HTTPS provozy pro aplikace a také vzdáleného ladění volání dorazí na adrese ILB.</span><span class="sxs-lookup"><span data-stu-id="8ff22-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on the ILB address.</span></span>  <span data-ttu-id="8ff22-113">U většiny běžných konfigurací s ILB App Service Environment přenosy FTP/FTPS také dorazí na adrese ILB.</span><span class="sxs-lookup"><span data-stu-id="8ff22-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on the ILB address.</span></span>  <span data-ttu-id="8ff22-114">Operace správy Azure bude stále procházet na porty 454/455 veřejná virtuální IP adresu z ILB, ale povoleno App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-114">However Azure management operations will still flow to ports 454/455 on the public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="8ff22-115">Následující diagram ukazuje přehled různých příchozí a odchozí síťovými toky pro služby App Service Environment, kde aplikace je vázána na veřejné virtuální IP adresy:</span><span class="sxs-lookup"><span data-stu-id="8ff22-115">The diagram below shows an overview of the various inbound and outbound network flows for an App Service Environment where the apps are bound to a public virtual IP address:</span></span>

![Obecné síťovými toky][GeneralNetworkFlows]

<span data-ttu-id="8ff22-117">Služby App Service Environment může komunikovat s celou řadu koncové body privátní zákazníka.</span><span class="sxs-lookup"><span data-stu-id="8ff22-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="8ff22-118">Aplikace běžící v App Service Environment může například připojení k databázi servery spuštěné v virtuální počítače IaaS ve stejné virtuální síťové topologie.</span><span class="sxs-lookup"><span data-stu-id="8ff22-118">For example, apps running in the App Service Environment can connect to database server(s) running on IaaS virtual machines in the same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8ff22-119">Vyhledávání v diagramu sítě, jsou v jiné podsíti ze služby App Service Environment nasazené "Ostatní výpočetní prostředky".</span><span class="sxs-lookup"><span data-stu-id="8ff22-119">Looking at the network diagram, the "Other Compute Resources" are deployed in a different Subnet from the App Service Environment.</span></span> <span data-ttu-id="8ff22-120">Nasazení prostředků ve stejné podsíti s App Service Environment bude blokovat připojení z App Service Environment na tyto prostředky (s výjimkou směrování konkrétní intra-App Service Environment).</span><span class="sxs-lookup"><span data-stu-id="8ff22-120">Deploying resources in the same Subnet with the ASE will block connectivity from ASE to those resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="8ff22-121">Nasaďte do jiné podsítě místo toho (ve stejné virtuální síti).</span><span class="sxs-lookup"><span data-stu-id="8ff22-121">Deploy to a different Subnet instead (in the same VNET).</span></span> <span data-ttu-id="8ff22-122">Služba App Service Environment pak bude moct připojit.</span><span class="sxs-lookup"><span data-stu-id="8ff22-122">The App Service Environment will then be able to connect.</span></span> <span data-ttu-id="8ff22-123">Není potřeba žádná další konfigurace.</span><span class="sxs-lookup"><span data-stu-id="8ff22-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="8ff22-124">Služby App Service Environment také komunikovat s databáze Sql a Azure Storage prostředky potřebné pro správu a provozování služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="8ff22-125">Některé prostředky Sql a úložiště, které služby App Service Environment komunikuje se nacházejí ve stejné oblasti jako služba App Service Environment, zatímco jiné jsou umístěny v vzdálené oblastech Azure.</span><span class="sxs-lookup"><span data-stu-id="8ff22-125">Some of the Sql and Storage resources that an App Service Environment communicates with are located in the same region as the App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="8ff22-126">Odchozí připojení k Internetu je proto vždy vyžaduje pro správné fungování služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-126">As a result, outbound connectivity to the Internet is always required for an App Service Environment to function properly.</span></span> 

<span data-ttu-id="8ff22-127">Vzhledem k tomu, že služby App Service Environment je nasazený na podsíť, skupiny zabezpečení sítě můžete použít k řízení příchozí provoz do podsítě.</span><span class="sxs-lookup"><span data-stu-id="8ff22-127">Since an App Service Environment is deployed in a subnet, network security groups can be used to control inbound traffic to the subnet.</span></span>  <span data-ttu-id="8ff22-128">Podrobnosti o tom, jak řídit příchozí přenosy do služby App Service Environment, naleznete v následujících [článku][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="8ff22-128">For details on how to control inbound traffic to an App Service Environment, see the following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="8ff22-129">Podrobné informace o tom, jak povolit odchozí připojení k Internetu z služby App Service Environment, najdete v následujícím článku o práci s [Express Route][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="8ff22-129">For details on how to allow outbound Internet connectivity from an App Service Environment, see the following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="8ff22-130">Ve stejný přístup popsané v článku platí při práci s připojení Site-to-Site a použití vynuceného tunelování.</span><span class="sxs-lookup"><span data-stu-id="8ff22-130">The same approach described in the article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="8ff22-131">Odchozí síťové adresy</span><span class="sxs-lookup"><span data-stu-id="8ff22-131">Outbound Network Addresses</span></span>
<span data-ttu-id="8ff22-132">Pokud služby App Service Environment provede odchozí volání, je vždy přidružen odchozí volání IP adresu.</span><span class="sxs-lookup"><span data-stu-id="8ff22-132">When an App Service Environment makes outbound calls, an IP Address is always associated with the outbound calls.</span></span>  <span data-ttu-id="8ff22-133">Konkrétní IP adresu, která se používá závisí na tom, jestli se nachází v rámci virtuální síťové topologie, nebo mimo virtuální síťové topologie volané koncový bod.</span><span class="sxs-lookup"><span data-stu-id="8ff22-133">The specific IP address that is used depends on whether the endpoint being called is located within the virtual network topology, or outside of the virtual network topology.</span></span>

<span data-ttu-id="8ff22-134">Pokud je koncovým bodem volané **mimo** topologie virtuální sítě, je odchozí adresu (neboli odchozí adres NAT), která se používá veřejné VIP App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-134">If the endpoint being called is **outside** of the virtual network topology, then the outbound address (aka the outbound NAT address) that is used is the public VIP of the App Service Environment.</span></span>  <span data-ttu-id="8ff22-135">Tato adresa naleznete v portálu uživatelské rozhraní App Service Environment v okně Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="8ff22-135">This address can be found in the portal user interface for the App Service Environment in Properties blade.</span></span>

![Odchozí IP adresu][OutboundIPAddress]

<span data-ttu-id="8ff22-137">Tuto adresu můžete také určit pro ASEs, které mají pouze veřejné VIP vytváření aplikace v App Service Environment, a pak provedením *nslookup* na adrese aplikace.</span><span class="sxs-lookup"><span data-stu-id="8ff22-137">This address can also be determined for ASEs that only have a public VIP by creating an app in the App Service Environment, and then performing an *nslookup* on the app's address.</span></span> <span data-ttu-id="8ff22-138">Výsledná IP adresa je veřejná virtuální IP adresu, jak odchozí adres NAT App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-138">The resultant IP address is both the public VIP, as well as the App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="8ff22-139">Pokud je koncovým bodem volané **uvnitř** o virtuální síťové topologie, adresu odchozí volání aplikace bude na interní IP adresu jednotlivých výpočetních prostředků, ve kterém aplikace běží.</span><span class="sxs-lookup"><span data-stu-id="8ff22-139">If the endpoint being called is **inside** of the virtual network topology, the outbound address of the calling app will be the internal IP address of the individual compute resource running the app.</span></span>  <span data-ttu-id="8ff22-140">Ale není trvalé mapování virtuální sítě interní IP adresy pro aplikace.</span><span class="sxs-lookup"><span data-stu-id="8ff22-140">However there is not a persistent mapping of virtual network internal IP addresses to apps.</span></span>  <span data-ttu-id="8ff22-141">Aplikace lze pohybovat mezi různé výpočetní prostředky a fondu k dispozici výpočetních prostředků ve službě App Service Environment, můžete změnit z důvodu operace škálování.</span><span class="sxs-lookup"><span data-stu-id="8ff22-141">Apps can move around across different compute resources, and the pool of available compute resources in an App Service Environment can change due to scaling operations.</span></span>

<span data-ttu-id="8ff22-142">Ale vzhledem k tomu, že služby App Service Environment se vždy nachází v rámci jedné podsítě, že je zaručeno, že na interní IP adresu výpočtový prostředek spuštění aplikace bude vždy ležet v rozsahu CIDR podsítě.</span><span class="sxs-lookup"><span data-stu-id="8ff22-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that the internal IP address of a compute resource running an app will always lie within the CIDR range of the subnet.</span></span>  <span data-ttu-id="8ff22-143">V důsledku toho-když podrobných seznamů řízení přístupu nebo skupiny zabezpečení sítě se používají k zabezpečení přístupu k další koncové body v rámci virtuální sítě, rozsahu podsítě obsahující App Service Environment musí mít udělen přístup.</span><span class="sxs-lookup"><span data-stu-id="8ff22-143">As a result, when fine-grained ACLs or network security groups are used to secure access to other endpoints within the virtual network, the subnet range containing the App Service Environment needs to be granted access.</span></span>

<span data-ttu-id="8ff22-144">Následující diagram znázorňuje tyto koncepty podrobněji:</span><span class="sxs-lookup"><span data-stu-id="8ff22-144">The following diagram shows these concepts in more detail:</span></span>

![Odchozí síťové adresy][OutboundNetworkAddresses]

<span data-ttu-id="8ff22-146">V diagramu:</span><span class="sxs-lookup"><span data-stu-id="8ff22-146">In the above diagram:</span></span>

* <span data-ttu-id="8ff22-147">Vzhledem k tomu, že veřejný VIP App Service Environment je 192.23.1.2, který je odchozí adresa IP použitá při volání koncové body "Internet".</span><span class="sxs-lookup"><span data-stu-id="8ff22-147">Since the public VIP of the App Service Environment is 192.23.1.2, that is the outbound IP address used when making calls to "Internet" endpoints.</span></span>
* <span data-ttu-id="8ff22-148">Rozsah CIDR obsahující podsítě pro App Service Environment je 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="8ff22-148">The CIDR range of the containing subnet for the App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="8ff22-149">Další koncové body v rámci stejné infrastruktury virtuální sítě se zobrazí volání z aplikace jako pocházející z někde v tomto rozsahu adres.</span><span class="sxs-lookup"><span data-stu-id="8ff22-149">Other endpoints within the same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="8ff22-150">Volání mezi služby App Service Environment</span><span class="sxs-lookup"><span data-stu-id="8ff22-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="8ff22-151">Složitější situace může nastat, pokud nasadíte více prostředí App Service ve stejné virtuální síti a odchozí volání z jednoho App Service Environment do jiné App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-151">A more complex scenario can occur if you deploy multiple App Service Environments in the same virtual network, and make outbound calls from one App Service Environment to another App Service Environment.</span></span>  <span data-ttu-id="8ff22-152">Tyto typy křížová volání bude také považována za "Internet" volání služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="8ff22-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="8ff22-153">Následující diagram ukazuje příklad Vrstvená architektura aplikace na jeden App Service Environment (např.) "Přední dveře" webové aplikace) na (třeba interní aplikace API back-end není by měla být přístupný z Internetu) druhý App Service Environment volání aplikace.</span><span class="sxs-lookup"><span data-stu-id="8ff22-153">The following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended to be accessible from the Internet).</span></span> 

![Volání mezi služby App Service Environment][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="8ff22-155">V předchozím příkladu má služba App Service Environment "App Service Environment jeden" 192.23.1.2 odchozí IP adresu.</span><span class="sxs-lookup"><span data-stu-id="8ff22-155">In the example above the App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="8ff22-156">Pokud aplikace spuštěná na tomto App Service Environment budou díky odchozí volání do aplikace druhý App Service Environment ("App Service Environment dvě") a systémem umístěný ve stejné virtuální síti, odchozí volání se považuje za volání "Internet".</span><span class="sxs-lookup"><span data-stu-id="8ff22-156">If an app running on this App Service Environment makes an outbound call to an app running on a second App Service Environment ("ASE Two") located in the same virtual network, the outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="8ff22-157">V důsledku síťový provoz přicházejících na druhé stránce App Service Environment zobrazí jako pocházející z 192.23.1.2 (tj. není podsítě rozsah adres první App Service Environment).</span><span class="sxs-lookup"><span data-stu-id="8ff22-157">As a result the network traffic arriving on the second App Service Environment will show as originating from 192.23.1.2 (i.e. not the subnet address range of the first App Service Environment).</span></span>

<span data-ttu-id="8ff22-158">I když volání mezi různé prostředí App Service jsou považovány za "Internet" volání, pokud obě prostředí App Service jsou umístěny ve stejné oblasti Azure, síťový provoz zůstanou v místní síti Azure a není fyzicky toku přes veřejného Internetu.</span><span class="sxs-lookup"><span data-stu-id="8ff22-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in the same Azure region the network traffic will remain on the regional Azure network and will not physically flow over the public Internet.</span></span>  <span data-ttu-id="8ff22-159">V důsledku použít skupinu zabezpečení sítě v podsíti, druhý App Service Environment a Povolit jenom příchozí volání z první App Service Environment (jehož odchozí IP adresa je 192.23.1.2), čímž zajišťuje zabezpečenou komunikaci mezi aplikace Prostředí služby.</span><span class="sxs-lookup"><span data-stu-id="8ff22-159">As a result you can use a network security group on the subnet of the second App Service Environment to only allow inbound calls from the first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between the App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="8ff22-160">Další odkazy a informace</span><span class="sxs-lookup"><span data-stu-id="8ff22-160">Additional Links and Information</span></span>
<span data-ttu-id="8ff22-161">Všechny články a jak – do této pro App Service Environment jsou dostupné v [soubor README pro prostředí aplikačních služeb](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="8ff22-161">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="8ff22-162">Podrobnosti o příchozí porty používané prostředí App Service a použití skupin zabezpečení sítě k řízení příchozího provozu je k dispozici [sem][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="8ff22-162">Details on inbound ports used by App Service Environments and using network security groups to control inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="8ff22-163">Podrobnosti o použití uživatele definované trasy udělit přístup k prostředí App Service Internetu je k dispozici v tomto [článku][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="8ff22-163">Details on using user defined routes to grant outbound Internet access to App Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png

