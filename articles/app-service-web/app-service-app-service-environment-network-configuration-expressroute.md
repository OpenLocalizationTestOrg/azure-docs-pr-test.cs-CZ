---
title: "Podrobnosti konfigurace sítě pro práci s Express Route"
description: "Podrobnosti konfigurace sítě pro spuštění prostředí App Service ve virtuální sítě připojen k okruhu ExpressRoute."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: de1d998ee86c127149dee18e9df577705054ddb4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="7eb63-103">Podrobnosti o konfiguraci sítě pro službu App Service Environment používající ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="7eb63-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="7eb63-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="7eb63-104">Overview</span></span>
<span data-ttu-id="7eb63-105">Zákazníci mohou připojit [Azure ExpressRoute] [ ExpressRoute] okruhu jejich infrastruktury virtuální sítě, tak rozšířit jejich místní sítě do Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb63-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit to their virtual network infrastructure, thus extending their on-premises network to Azure.</span></span>  <span data-ttu-id="7eb63-106">Služby App Service Environment lze vytvořit v této podsíti [virtuální sítě] [ virtualnetwork] infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="7eb63-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="7eb63-107">Aplikace běžící na App Service Environment pak může navázat zabezpečené připojení k back endové prostředky, které jsou přístupné pouze prostřednictvím připojení ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7eb63-107">Apps running on the App Service Environment can then establish secure connections to back-end resources accessible only over the ExpressRoute connection.</span></span>  

<span data-ttu-id="7eb63-108">Služby App Service Environment se dají vytvářet v **buď** virtuální síť Azure Resource Manager **nebo** virtuální síť modelu nasazení classic.</span><span class="sxs-lookup"><span data-stu-id="7eb63-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="7eb63-109">Nedávné změny provedené v června 2016, ASEs také teď můžou být nasazené do virtuální sítě, které používají rozsahů veřejných adres nebo RFC1918 adresní prostory (tj.)</span><span class="sxs-lookup"><span data-stu-id="7eb63-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="7eb63-110">privátní adresy).</span><span class="sxs-lookup"><span data-stu-id="7eb63-110">private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="7eb63-111">Vyžaduje síťové připojení</span><span class="sxs-lookup"><span data-stu-id="7eb63-111">Required Network Connectivity</span></span>
<span data-ttu-id="7eb63-112">Existují požadavky na síťové připojení pro prostředí App Service, která nemusí být splněna původně ve virtuální síti připojené k ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7eb63-112">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected to an ExpressRoute.</span></span>  <span data-ttu-id="7eb63-113">Služby App Service Environment vyžadují ke správnému všechny z následujících:</span><span class="sxs-lookup"><span data-stu-id="7eb63-113">App Service Environments require all of the following in order to function properly:</span></span>

* <span data-ttu-id="7eb63-114">Odchozí síťové připojení k Azure Storage koncových bodů po celém světě na oba porty 80 a 443.</span><span class="sxs-lookup"><span data-stu-id="7eb63-114">Outbound network connectivity to Azure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="7eb63-115">To zahrnuje koncové body umístěné ve stejné oblasti jako služba App Service Environment, stejně jako koncové body úložiště, které jsou umístěné v **jiných** oblastech Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb63-115">This includes endpoints located in the same region as the App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="7eb63-116">Koncové body Azure úložiště vyřešit v rámci z následujících domén DNS: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* a *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="7eb63-116">Azure Storage endpoints resolve under the following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="7eb63-117">Odchozí síťové připojení ke službě Azure soubory na port 445.</span><span class="sxs-lookup"><span data-stu-id="7eb63-117">Outbound network connectivity to the Azure Files service on port 445.</span></span>
* <span data-ttu-id="7eb63-118">Odchozí síťové připojení k databázi Sql koncové body umístěné ve stejné oblasti jako služba App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-118">Outbound network connectivity to Sql DB endpoints located in the same region as the App Service Environment.</span></span>  <span data-ttu-id="7eb63-119">Koncové body SQL DB vyřešit pod následující domény: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="7eb63-119">Sql DB endpoints resolve under the following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="7eb63-120">To vyžaduje přístup k portům 1433, 11000 11999 a 14000 14999 otevření.</span><span class="sxs-lookup"><span data-stu-id="7eb63-120">This requires opening access to ports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="7eb63-121">Podrobnosti najdete v části [Tento článek na použití portu Sql Database verze 12](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="7eb63-121">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="7eb63-122">Odchozí síťové připojení ke koncovým bodům roviny Azure management (ASM i ARM koncových bodů).</span><span class="sxs-lookup"><span data-stu-id="7eb63-122">Outbound network connectivity to the Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="7eb63-123">To zahrnuje odchozí připojení pro obě *management.core.windows.net* a *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="7eb63-123">This includes outbound connectivity to both *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="7eb63-124">Odchozí síťové připojení k *ocsp.msocsp.com*, *mscrl.microsoft.com* a *crl.microsoft.com*.</span><span class="sxs-lookup"><span data-stu-id="7eb63-124">Outbound network connectivity to *ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.</span></span>  <span data-ttu-id="7eb63-125">To je potřeba k podpoře funkce SSL.</span><span class="sxs-lookup"><span data-stu-id="7eb63-125">This is needed to support SSL functionality.</span></span>
* <span data-ttu-id="7eb63-126">Konfiguraci DNS pro virtuální síť musí být schopen překladu všechny koncové body a domény uvedený v dřívějších bodů.</span><span class="sxs-lookup"><span data-stu-id="7eb63-126">The DNS configuration for the virtual network must be capable of resolving all of the endpoints and domains mentioned in the earlier points.</span></span>  <span data-ttu-id="7eb63-127">Pokud tyto koncové body nelze přeložit, se nezdaří pokusy o vytvoření služby App Service Environment a budou označeny stávající prostředí App Service není v pořádku.</span><span class="sxs-lookup"><span data-stu-id="7eb63-127">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="7eb63-128">Je nutný pro komunikaci se servery DNS odchozí přístup na port 53.</span><span class="sxs-lookup"><span data-stu-id="7eb63-128">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="7eb63-129">Pokud na druhém konci brány VPN existuje vlastního serveru DNS, DNS server musí být dostupný z podsítě obsahující App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-129">If a custom DNS server exists on the other end of a VPN gateway, the DNS server must be reachable from the subnet containing the App Service Environment.</span></span> 
* <span data-ttu-id="7eb63-130">Odchozí síťovou cestu nelze procházet i podnikové interní proxy, ani lze vynutit tunelovým propojením místně.</span><span class="sxs-lookup"><span data-stu-id="7eb63-130">The outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled to on-premises.</span></span>  <span data-ttu-id="7eb63-131">Díky tomu změní adresu efektivní NAT odchozího provozu z App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-131">Doing so changes the effective NAT address of outbound network traffic from the App Service Environment.</span></span>  <span data-ttu-id="7eb63-132">Změna adres NAT odchozího provozu služby App Service Environment způsobí selhání připojení k mnoha koncových bodů uvedené výše.</span><span class="sxs-lookup"><span data-stu-id="7eb63-132">Changing the NAT address of an App Service Environment's outbound network traffic will cause connectivity failures to many of the endpoints listed above.</span></span>  <span data-ttu-id="7eb63-133">Výsledkem neúspěšných pokusech o vytvoření služby App Service Environment, stejně jako dříve pořádku prostředí App Service bude označena jako není v pořádku.</span><span class="sxs-lookup"><span data-stu-id="7eb63-133">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="7eb63-134">Příchozí síťový přístup k požadované porty pro prostředí App Service musí být povoleno, jak je popsáno v tomto [článku][requiredports].</span><span class="sxs-lookup"><span data-stu-id="7eb63-134">Inbound network access to required ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="7eb63-135">Požadavky na DNS můžete splnit zajištěním platný infrastruktura DNS je nakonfigurován a udržuje pro virtuální síť.</span><span class="sxs-lookup"><span data-stu-id="7eb63-135">The DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for the virtual network.</span></span>  <span data-ttu-id="7eb63-136">Pokud z nějakého důvodu dojde ke změně konfigurace DNS po vytvoření služby App Service Environment, vývojáři vynutit služby App Service Environment načíst novou konfiguraci DNS.</span><span class="sxs-lookup"><span data-stu-id="7eb63-136">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="7eb63-137">Aktivuje restartu postupného prostředí pomocí ikony "Restartovat" nachází v horní části okna Správa služby App Service Environment ve [portál Azure] [ NewPortal] způsobí, že prostředí tak, aby se vyzvedávat novou konfiguraci DNS.</span><span class="sxs-lookup"><span data-stu-id="7eb63-137">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="7eb63-138">Nelze splnit požadavky na přístup příchozích síťových konfigurací [skupinu zabezpečení sítě] [ NetworkSecurityGroups] v podsíti App Service Environment umožňující požadovaný přístup, jak je popsáno v tomto [článku][requiredports].</span><span class="sxs-lookup"><span data-stu-id="7eb63-138">The inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on the App Service Environment's subnet to allow the required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="7eb63-139">Povolení odchozího síťového připojení pro služby App Service Environment</span><span class="sxs-lookup"><span data-stu-id="7eb63-139">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="7eb63-140">Ve výchozím nastavení nově vytvořený okruh ExpressRoute inzeruje výchozí trasu, která umožňuje odchozí připojení k Internetu.</span><span class="sxs-lookup"><span data-stu-id="7eb63-140">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="7eb63-141">Pomocí této konfigurace bude moci připojit k jiné koncové body Azure App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-141">With this configuration an App Service Environment will be able to connect to other Azure endpoints.</span></span>

<span data-ttu-id="7eb63-142">Obvyklé konfigurace zákazníka je ale definovat vlastní výchozí trasa (0.0.0.0/0), který vynutí odchozí přenosy z Internetu do místo toku místní.</span><span class="sxs-lookup"><span data-stu-id="7eb63-142">However a common customer configuration is to define their own default route (0.0.0.0/0) which forces outbound Internet traffic to instead flow on-premises.</span></span>  <span data-ttu-id="7eb63-143">Tento tok provozu vždy dělí prostředí App Service, protože odchozí provoz je blokované místně nebo NAT by nerozpoznatelný sadu adresy, které přestane fungovat v různých koncové body Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb63-143">This traffic flow invariably breaks App Service Environments because the outbound traffic is either blocked on-premises, or NAT'd to an unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="7eb63-144">Řešení je definovat jeden (nebo více) trasy definované uživatelem (udr) v podsíti, který obsahuje App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-144">The solution is to define one (or more) user defined routes (UDRs) on the subnet that contains the App Service Environment.</span></span>  <span data-ttu-id="7eb63-145">UDR definuje tras konkrétní podsítě, které bude dodržení místo výchozí trasu.</span><span class="sxs-lookup"><span data-stu-id="7eb63-145">A UDR defines subnet-specific routes that will be honored instead of the default route.</span></span>

<span data-ttu-id="7eb63-146">Pokud je to možné doporučujeme použít následující konfigurace:</span><span class="sxs-lookup"><span data-stu-id="7eb63-146">If possible, it is recommended to use the following configuration:</span></span>

* <span data-ttu-id="7eb63-147">Konfigurace ExpressRoute inzeruje 0.0.0.0/0 a ve výchozím nastavení vynucené tunelových propojení všechny odchozí přenosy na místě.</span><span class="sxs-lookup"><span data-stu-id="7eb63-147">The ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="7eb63-148">UDR použije na podsíť obsahující App Service Environment definuje 0.0.0.0/0 s další typ směrování Internet (příkladem je dále dolů v tomto článku).</span><span class="sxs-lookup"><span data-stu-id="7eb63-148">The UDR applied to the subnet containing the App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="7eb63-149">Celkové požadavky tyto kroky je, že úrovni podsítě UDR bude mít přednost přes ExpressRoute vynucené tunelování, čímž zajišťuje odchozí přístup k Internetu z App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-149">The combined effect of these steps is that the subnet level UDR will take precedence over the ExpressRoute forced tunneling, thus ensuring outbound Internet access from the App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7eb63-150">Trasy definované v UDR **musí** být dost konkrétní, aby mají přednost před všechny trasy inzerované konfigurace ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7eb63-150">The routes defined in a UDR **must** be specific enough to  take precedence over any routes advertised by the ExpressRoute configuration.</span></span>  <span data-ttu-id="7eb63-151">Následující příklad používá rozsah adres široký 0.0.0.0/0 a jako takový se dá potenciálně omylem přepsat inzerování tras pomocí podrobnější rozsahy adres.</span><span class="sxs-lookup"><span data-stu-id="7eb63-151">The example below uses the broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="7eb63-152">Prostředí App Service nejsou podporovány s konfigurací ExpressRoute, **mezi Inzerovat trasy z cesty veřejného partnerského vztahu k cestou soukromého partnerského vztahu**.</span><span class="sxs-lookup"><span data-stu-id="7eb63-152">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from the public peering path to the private peering path**.</span></span>  <span data-ttu-id="7eb63-153">Konfigurace ExpressRoute, které mají veřejné partnerské vztahy nakonfigurované, obdrží inzerování trasy od společnosti Microsoft pro velké sady rozsahů adres Microsoft Azure IP.</span><span class="sxs-lookup"><span data-stu-id="7eb63-153">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="7eb63-154">Pokud tyto rozsahy adres ohlášené mezi na cestou soukromého partnerského vztahu, konečným výsledkem je, že všechny odchozí síťových paketů z podsítě App Service Environment bude tunelovým propojením force zákazníka místní síťové infrastruktuře.</span><span class="sxs-lookup"><span data-stu-id="7eb63-154">If these address ranges are cross-advertised on the private peering path, the end result is that all outbound network packets from the App Service Environment's subnet will be force-tunneled to a customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="7eb63-155">Tento tok sítě se aktuálně nepodporuje s prostředí App Service.</span><span class="sxs-lookup"><span data-stu-id="7eb63-155">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="7eb63-156">Jedno řešení tohoto problému je zastavit směrování mezi – reklamu z cesty veřejného partnerského vztahu cestou soukromého partnerského vztahu.</span><span class="sxs-lookup"><span data-stu-id="7eb63-156">One solution to this problem is to stop cross-advertising routes from the public peering path to the private peering path.</span></span>
> 
> 

<span data-ttu-id="7eb63-157">Základní informace o trasy definované uživatelem je k dispozici v tomto [přehled][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="7eb63-157">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="7eb63-158">Informace o vytváření a konfigurace trasy definované uživatelem je k dispozici v tomto [jak pro průvodce][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="7eb63-158">Details on creating and configuring user defined routes is available in this [How To Guide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="7eb63-159">Ukázková konfigurace UDR služby App Service Environment</span><span class="sxs-lookup"><span data-stu-id="7eb63-159">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="7eb63-160">**Předpoklady**</span><span class="sxs-lookup"><span data-stu-id="7eb63-160">**Pre-requisites**</span></span>

1. <span data-ttu-id="7eb63-161">Nainstalovat Azure Powershell z [Azure stáhne stránky] [ AzureDownloads] (s datem červen 2015 nebo novější).</span><span class="sxs-lookup"><span data-stu-id="7eb63-161">Install Azure Powershell from the [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="7eb63-162">V části "Nástroje příkazového řádku" existuje propojení "Instalace" v části "Windows Powershell", který bude instalovat nejnovější rutiny prostředí Powershell.</span><span class="sxs-lookup"><span data-stu-id="7eb63-162">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install the latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="7eb63-163">Doporučuje se, že jedinečnou podsíť je vytvořený pro výhradní použití služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-163">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="7eb63-164">To zaručuje, že udr použije na podsíť pouze otevřít odchozí přenosy App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-164">This ensures that the UDRs applied to the subnet will only open outbound traffic for the App Service Environment.</span></span>
3. <span data-ttu-id="7eb63-165">**Důležité**: nenasazujte App Service Environment, dokud **po** dodržíte následující kroky konfigurace.</span><span class="sxs-lookup"><span data-stu-id="7eb63-165">**Important**:  do not deploy the App Service Environment until **after** the following configuration steps are followed.</span></span>  <span data-ttu-id="7eb63-166">To zajišťuje, že odchozí síťové připojení k dispozici před pokusem o nasazení služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-166">This ensures that outbound network connectivity is available before attempting to deploy an App Service Environment.</span></span>

<span data-ttu-id="7eb63-167">**Krok 1: Vytvoření tabulky pojmenovanou trasu**</span><span class="sxs-lookup"><span data-stu-id="7eb63-167">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="7eb63-168">Následující fragment kódu vytvoří směrovací tabulku v oblasti Azure USA – Západ jako "DirectInternetRouteTable":</span><span class="sxs-lookup"><span data-stu-id="7eb63-168">The following snippet creates a route table called "DirectInternetRouteTable" in the West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="7eb63-169">**Krok 2: Vytvoření jednu nebo víc tras ve směrovací tabulce**</span><span class="sxs-lookup"><span data-stu-id="7eb63-169">**Step 2:  Create one or more routes in the route table**</span></span>

<span data-ttu-id="7eb63-170">Musíte přidat jeden nebo více trasy do směrovací tabulky. Chcete-li povolit odchozí přístup k Internetu.</span><span class="sxs-lookup"><span data-stu-id="7eb63-170">You will need to add one or more routes to the route table in order to enable outbound Internet access.</span></span>  

<span data-ttu-id="7eb63-171">Doporučený postup pro konfiguraci odchozí přístup k Internetu je definovat trasu pro 0.0.0.0/0, jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="7eb63-171">The recommended approach for configuring outbound access to the Internet is to define a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="7eb63-172">Mějte na paměti, že 0.0.0.0/0 je adresa široký rozsah a jako takový bude přepsáno podrobnější rozsahy adres inzerovaných ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7eb63-172">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by the ExpressRoute.</span></span>  <span data-ttu-id="7eb63-173">Znovu iteraci starší doporučení, UDR s trasou 0.0.0.0/0 by měl používat ve spojení s konfigurací ExressRoute, pouze inzeruje 0.0.0.0/0 také.</span><span class="sxs-lookup"><span data-stu-id="7eb63-173">To re-iterate the earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="7eb63-174">Jako alternativu můžete si stáhnout seznam rozsahy CIDR používá Azure komplexní a aktualizované.</span><span class="sxs-lookup"><span data-stu-id="7eb63-174">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="7eb63-175">Soubor Xml obsahující všechny rozsahy Azure IP adres je k dispozici z [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="7eb63-175">The Xml file containing all of the Azure IP address ranges is available from the [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="7eb63-176">Všimněte si ale, že tyto rozsahy časem změnit, proto očekávání pravidelné ruční aktualizace trasy definované uživatelem pro synchronizaci.</span><span class="sxs-lookup"><span data-stu-id="7eb63-176">Note though that these ranges change over time, thus necessitating periodic manual updates to the user defined routes to keep in sync.</span></span>  <span data-ttu-id="7eb63-177">Navíc vzhledem k tomu, že je výchozí maximální limit je 100 trasy v jednom UDR, budete muset "shrnout" rozsahů adres Azure IP nevejde se do limit 100 trasy, pamatujte, že UDR definované trasy musejí být konkrétnější než trasy inzerované podle vaší ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7eb63-177">Also, since there is a default upper limit of 100 routes in a single UDR, you will need to "summarize" the Azure IP address ranges to fit within the 100 route limit, keeping in mind that UDR defined routes need to be more specific than the routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="7eb63-178">**Krok 3: Přidružení tabulku směrování pro podsíť obsahující App Service Environment**</span><span class="sxs-lookup"><span data-stu-id="7eb63-178">**Step 3:  Associate the route table to the subnet containing the App Service Environment**</span></span>

<span data-ttu-id="7eb63-179">Poslední krok konfigurace je přidružit k podsíti směrovací tabulka, kde bude nasazen App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-179">The last  configuration step is to associate the route table to the subnet where the App Service Environment will be deployed.</span></span>  <span data-ttu-id="7eb63-180">Následující příkaz přidruží "DirectInternetRouteTable" na "ASESubnet", bude obsahovat nakonec služby App Service Environment.</span><span class="sxs-lookup"><span data-stu-id="7eb63-180">The following command associates the "DirectInternetRouteTable" to the "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="7eb63-181">**Krok 4: Závěrečné kroky**</span><span class="sxs-lookup"><span data-stu-id="7eb63-181">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="7eb63-182">Jakmile směrovací tabulka je vázána k podsíti, doporučujeme nejprve testování a potvrďte zamýšlený účinek.</span><span class="sxs-lookup"><span data-stu-id="7eb63-182">Once the route table is bound to the subnet, it is recommended to first test and confirm the intended effect.</span></span>  <span data-ttu-id="7eb63-183">Například nasazení virtuálního počítače do podsítě a ověřte, že:</span><span class="sxs-lookup"><span data-stu-id="7eb63-183">For example, deploy a virtual machine into the subnet and confirm that:</span></span>

* <span data-ttu-id="7eb63-184">Odchozí přenosy na Azure a koncové body mimo Azure uvedených výše v otázce Tento článek je **není** toku okruhu ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7eb63-184">Outbound traffic to both Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down the ExpressRoute circuit.</span></span>  <span data-ttu-id="7eb63-185">Je velmi důležité ověřit toto chování vzhledem k tomu, že pokud odchozí provoz z podsítě je stále vynucené tunelovým propojením na místních počítačích App Service Environment vytvoření vždycky selže.</span><span class="sxs-lookup"><span data-stu-id="7eb63-185">It is very important to verify this behavior, since if outbound traffic from the subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="7eb63-186">Vyhledávání DNS pro koncové body již bylo zmíněno dříve všechny řešíme správně.</span><span class="sxs-lookup"><span data-stu-id="7eb63-186">DNS lookups for the endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="7eb63-187">Jakmile se potvrzují výše uvedené kroky, musíte odstranit virtuální počítač, protože podsíť musí být v době, kdy se vytvoří služba App Service Environment "prázdný".</span><span class="sxs-lookup"><span data-stu-id="7eb63-187">Once the above steps are confirmed, you will need to delete the virtual machine because the subnet needs to be "empty" at the time the App Service Environment is created.</span></span>

<span data-ttu-id="7eb63-188">Potom pokračujte ve vytváření služby App Service Environment!</span><span class="sxs-lookup"><span data-stu-id="7eb63-188">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="7eb63-189">Začínáme</span><span class="sxs-lookup"><span data-stu-id="7eb63-189">Getting started</span></span>
<span data-ttu-id="7eb63-190">Všechny články a jak – do této pro App Service Environment jsou dostupné v [soubor README pro prostředí aplikačních služeb](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="7eb63-190">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="7eb63-191">Chcete-li začít pracovat s prostředí App Service, přečtěte si téma [Úvod do služby App Service Environment][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="7eb63-191">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="7eb63-192">Další informace o platformě Azure App Service najdete v tématu [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="7eb63-192">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
