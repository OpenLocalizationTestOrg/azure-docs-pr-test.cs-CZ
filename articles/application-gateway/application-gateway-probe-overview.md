---
title: "Přehled monitorování pro Azure Application Gateway aaaHealth | Microsoft Docs"
description: "Další informace o hello funkcemi sledováním v Azure Application Gateway"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="18469-103">Monitorování přehled stavu aplikace brány</span><span class="sxs-lookup"><span data-stu-id="18469-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="18469-104">Ve výchozím nastavení služba Azure Application Gateway monitoruje stav hello všechny prostředky v jeho fond back-end a automaticky odebere všechny prostředků z fondu hello považoval za poškozený.</span><span class="sxs-lookup"><span data-stu-id="18469-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="18469-105">Aplikační brána pokračuje toomonitor hello není v pořádku instancí a přidá je zpět toohello pořádku fond back-end, jakmile budou k dispozici a reakce toohealth testy.</span><span class="sxs-lookup"><span data-stu-id="18469-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="18469-106">Aplikační brána odešle sondy stavu hello s hello stejný port, který je definován v nastavení HTTP back-end hello.</span><span class="sxs-lookup"><span data-stu-id="18469-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="18469-107">Tato konfigurace zajistí, že tento test hello je testování hello stejný port, že zákazníci by pomocí tooconnect toohello back-end.</span><span class="sxs-lookup"><span data-stu-id="18469-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![Příklad testu brány aplikace][1]

<span data-ttu-id="18469-109">Přidání toousing výchozí stav testu monitorování, můžete také přizpůsobit toosuit test stavu hello požadavky vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="18469-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="18469-110">V tomto článku jsou popsané výchozí i vlastní stavu sondy.</span><span class="sxs-lookup"><span data-stu-id="18469-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="18469-111">Pokud je skupina NSG na podsítě brány aplikace, musí být otevřen rozsahy portů 65503 65534 v podsíti hello aplikační brány pro příchozí provoz.</span><span class="sxs-lookup"><span data-stu-id="18469-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="18469-112">Tyto porty jsou povinné pro hello back-end stavu rozhraní API toowork.</span><span class="sxs-lookup"><span data-stu-id="18469-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="18469-113">Výchozí kontroly stavu</span><span class="sxs-lookup"><span data-stu-id="18469-113">Default health probe</span></span>

<span data-ttu-id="18469-114">Služby application gateway automaticky nakonfiguruje výchozí kontrolu stavu, když nemáte nastavíte žádnou konfiguraci vlastní test paměti.</span><span class="sxs-lookup"><span data-stu-id="18469-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="18469-115">monitorování chování Hello funguje tak, že, ze kterého navázalo HTTP žádost toohello IP adresy nakonfigurované pro fond back-end hello.</span><span class="sxs-lookup"><span data-stu-id="18469-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="18469-116">Pro výchozí sondy Pokud jsou nastavení http back-end hello nakonfigurovány pro protokol HTTPS, test hello používá protokol HTTPS jako dobře tootest stav back-EndY hello.</span><span class="sxs-lookup"><span data-stu-id="18469-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="18469-117">Příklad: konfigurace vaší aplikace brány toouse back-end serverů A, B a C tooreceive HTTP síťový provoz na portu 80.</span><span class="sxs-lookup"><span data-stu-id="18469-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="18469-118">sledování stavu výchozí Hello testy tři servery hello každých 30 sekund pro pořádku odpověď HTTP.</span><span class="sxs-lookup"><span data-stu-id="18469-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="18469-119">Je v pořádku odpovědi HTTP [stavový kód](https://msdn.microsoft.com/library/aa287675.aspx) 200 až 399.</span><span class="sxs-lookup"><span data-stu-id="18469-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="18469-120">Pokud kontrola test výchozí hello nezdaří pro server A, hello Aplikační brána se odebere z jeho fond back-end a síťový provoz bude zastaven toothis serveru.</span><span class="sxs-lookup"><span data-stu-id="18469-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="18469-121">Hello výchozí kontroly stále přetrvává toocheck pro server každých 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="18469-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="18469-122">Server A odpovídá úspěšně tooone žádosti z výchozí kontrolu stavu, je znovu přidal jako v pořádku toohello fond back-end a provoz začnou komunikovat toohello server znovu.</span><span class="sxs-lookup"><span data-stu-id="18469-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="18469-123">Výchozí nastavení kontroly stavu</span><span class="sxs-lookup"><span data-stu-id="18469-123">Default health probe settings</span></span>

| <span data-ttu-id="18469-124">Vlastnost testu</span><span class="sxs-lookup"><span data-stu-id="18469-124">Probe property</span></span> | <span data-ttu-id="18469-125">Hodnota</span><span class="sxs-lookup"><span data-stu-id="18469-125">Value</span></span> | <span data-ttu-id="18469-126">Popis</span><span class="sxs-lookup"><span data-stu-id="18469-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="18469-127">Adresa URL testu</span><span class="sxs-lookup"><span data-stu-id="18469-127">Probe URL</span></span> |<span data-ttu-id="18469-128">http://127.0.0.1:\<portu\>/</span><span class="sxs-lookup"><span data-stu-id="18469-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="18469-129">Cesta adresy URL</span><span class="sxs-lookup"><span data-stu-id="18469-129">URL path</span></span> |
| <span data-ttu-id="18469-130">Interval</span><span class="sxs-lookup"><span data-stu-id="18469-130">Interval</span></span> |<span data-ttu-id="18469-131">30</span><span class="sxs-lookup"><span data-stu-id="18469-131">30</span></span> |<span data-ttu-id="18469-132">Interval testu paměti v sekundách</span><span class="sxs-lookup"><span data-stu-id="18469-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="18469-133">Časový limit</span><span class="sxs-lookup"><span data-stu-id="18469-133">Time-out</span></span> |<span data-ttu-id="18469-134">30</span><span class="sxs-lookup"><span data-stu-id="18469-134">30</span></span> |<span data-ttu-id="18469-135">Časový limit testu v sekundách</span><span class="sxs-lookup"><span data-stu-id="18469-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="18469-136">Prahová hodnota špatného stavu</span><span class="sxs-lookup"><span data-stu-id="18469-136">Unhealthy threshold</span></span> |<span data-ttu-id="18469-137">3</span><span class="sxs-lookup"><span data-stu-id="18469-137">3</span></span> |<span data-ttu-id="18469-138">Počet opakování testu.</span><span class="sxs-lookup"><span data-stu-id="18469-138">Probe retry count.</span></span> <span data-ttu-id="18469-139">Hello back-end serveru je označena po počet po sobě jdoucích test selhání hello dosáhne hello prahová hodnota špatného stavu.</span><span class="sxs-lookup"><span data-stu-id="18469-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="18469-140">Hello portu je hello stejný port jako nastavení HTTP back-end hello.</span><span class="sxs-lookup"><span data-stu-id="18469-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="18469-141">Hello výchozí kontroly zjistí pouze http://127.0.0.1:\<port\> toodetermine stav.</span><span class="sxs-lookup"><span data-stu-id="18469-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="18469-142">Pokud potřebujete tooconfigure hello stav testu toogo tooa vlastní adresu URL nebo změnit další nastavení, musíte použít vlastní testy paměti, jak je popsáno v hello následující kroky:</span><span class="sxs-lookup"><span data-stu-id="18469-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="18469-143">Test vlastní stavu</span><span class="sxs-lookup"><span data-stu-id="18469-143">Custom health probe</span></span>

<span data-ttu-id="18469-144">Vlastní testy paměti umožní toohave podrobnější řídit hello sledování stavu.</span><span class="sxs-lookup"><span data-stu-id="18469-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="18469-145">Pokud používáte vlastní testy paměti, můžete nakonfigurovat interval testu hello hello adresy URL a cesty tootest a kolik neúspěšných odpovědí tooaccept před označením hello fond back-end instance jako chybné.</span><span class="sxs-lookup"><span data-stu-id="18469-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="18469-146">Nastavení testu vlastní stavu</span><span class="sxs-lookup"><span data-stu-id="18469-146">Custom health probe settings</span></span>

<span data-ttu-id="18469-147">Hello následující tabulka obsahuje definice pro vlastnosti hello vlastní stav kontroly.</span><span class="sxs-lookup"><span data-stu-id="18469-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="18469-148">Vlastnost testu</span><span class="sxs-lookup"><span data-stu-id="18469-148">Probe property</span></span> | <span data-ttu-id="18469-149">Popis</span><span class="sxs-lookup"><span data-stu-id="18469-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="18469-150">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="18469-150">Name</span></span> |<span data-ttu-id="18469-151">Název testu hello.</span><span class="sxs-lookup"><span data-stu-id="18469-151">Name of hello probe.</span></span> <span data-ttu-id="18469-152">Tento název je použité toorefer toohello testu v nastavení HTTP back-end.</span><span class="sxs-lookup"><span data-stu-id="18469-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="18469-153">Protocol (Protokol)</span><span class="sxs-lookup"><span data-stu-id="18469-153">Protocol</span></span> |<span data-ttu-id="18469-154">Používá protokol toosend hello testu.</span><span class="sxs-lookup"><span data-stu-id="18469-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="18469-155">Test Hello používá protokol hello definované v nastavení HTTP back-end hello</span><span class="sxs-lookup"><span data-stu-id="18469-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="18469-156">Hostitel</span><span class="sxs-lookup"><span data-stu-id="18469-156">Host</span></span> |<span data-ttu-id="18469-157">Hostitele název toosend hello testu.</span><span class="sxs-lookup"><span data-stu-id="18469-157">Host name toosend hello probe.</span></span> <span data-ttu-id="18469-158">Platí jenom v případě více lokalit je nakonfigurovaná na aplikační bránu, v opačném případě použijte "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="18469-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="18469-159">Tato hodnota se liší od název hostitele virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="18469-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="18469-160">Cesta</span><span class="sxs-lookup"><span data-stu-id="18469-160">Path</span></span> |<span data-ttu-id="18469-161">Relativní cesta hello kontroly.</span><span class="sxs-lookup"><span data-stu-id="18469-161">Relative path of hello probe.</span></span> <span data-ttu-id="18469-162">platná cesta Hello spustí z '/'.</span><span class="sxs-lookup"><span data-stu-id="18469-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="18469-163">Interval</span><span class="sxs-lookup"><span data-stu-id="18469-163">Interval</span></span> |<span data-ttu-id="18469-164">Interval testu paměti v sekundách.</span><span class="sxs-lookup"><span data-stu-id="18469-164">Probe interval in seconds.</span></span> <span data-ttu-id="18469-165">Tato hodnota je hello časový interval mezi dvě po sobě jdoucích sondy.</span><span class="sxs-lookup"><span data-stu-id="18469-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="18469-166">Časový limit</span><span class="sxs-lookup"><span data-stu-id="18469-166">Time-out</span></span> |<span data-ttu-id="18469-167">Časový limit testu v sekundách.</span><span class="sxs-lookup"><span data-stu-id="18469-167">Probe time-out in seconds.</span></span> <span data-ttu-id="18469-168">Pokud není platnou odpověď v rámci tento časový limit, hello probe je označen jako se nezdařilo.</span><span class="sxs-lookup"><span data-stu-id="18469-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="18469-169">Prahová hodnota špatného stavu</span><span class="sxs-lookup"><span data-stu-id="18469-169">Unhealthy threshold</span></span> |<span data-ttu-id="18469-170">Počet opakování testu.</span><span class="sxs-lookup"><span data-stu-id="18469-170">Probe retry count.</span></span> <span data-ttu-id="18469-171">Hello back-end serveru je označena po počet po sobě jdoucích test selhání hello dosáhne hello prahová hodnota špatného stavu.</span><span class="sxs-lookup"><span data-stu-id="18469-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="18469-172">Pokud aplikace brána je nakonfigurovaná pro jednu lokalitu, ve výchozím nastavení hello hostitele název musí být zadán jako "127.0.0.1", pokud nebudou jinak nakonfigurovaná v vlastní test paměti.</span><span class="sxs-lookup"><span data-stu-id="18469-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="18469-173">Pro referenci vlastní test paměti se odesílají příliš\<protokol\>://\<hostitele\>:\<port\>\<cestu\>.</span><span class="sxs-lookup"><span data-stu-id="18469-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="18469-174">Hello port používá, bude text hello stejný port, jak jsou definovány v nastavení HTTP back-end hello.</span><span class="sxs-lookup"><span data-stu-id="18469-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="18469-175">Další kroky</span><span class="sxs-lookup"><span data-stu-id="18469-175">Next steps</span></span>
<span data-ttu-id="18469-176">Po informací o sledování stavu Application Gateway, můžete nakonfigurovat [test vlastní stavu](application-gateway-create-probe-portal.md) v hello portál Azure nebo [test vlastní stavu](application-gateway-create-probe-ps.md) pomocí prostředí PowerShell a hello Azure Resource Manager model nasazení.</span><span class="sxs-lookup"><span data-stu-id="18469-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
