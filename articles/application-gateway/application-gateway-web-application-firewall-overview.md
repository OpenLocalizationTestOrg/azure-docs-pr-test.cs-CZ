---
title: "Úvod do Firewallu webových aplikací (WAF) služby Azure Application Gateway | Dokumentace Microsoftu"
description: "Na této stránce najdete přehled firewallu webových aplikací (WAF) služby Application Gateway."
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 50863b60f2843f033bdb07f4564d937cd6f0b7be
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="c78d4-103">Firewall webových aplikací (WAF)</span><span class="sxs-lookup"><span data-stu-id="c78d4-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="c78d4-104">Firewall webových aplikací (WAF) je funkce služby Application Gateway poskytující centralizovanou ochranu webových aplikací před běžným zneužitím a ohrožením zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c78d4-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="c78d4-105">Firewall webových aplikací je založený na základě [základní sady pravidel OWASP](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 nebo 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c78d4-105">Web application firewall is based on rules from the [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="c78d4-106">Webové aplikace se čím dál častěji stávají cílem škodlivých útoků, které zneužívají běžně známé chyby zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c78d4-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="c78d4-107">Mezi tyto běžné typy zneužití patří mimo jiné například útoky prostřednictvím injektáže SQL nebo skriptování mezi weby.</span><span class="sxs-lookup"><span data-stu-id="c78d4-107">Common among these exploits are SQL injection attacks, cross site scripting attacks to name a few.</span></span> <span data-ttu-id="c78d4-108">Předcházet takovým útokům v kódu aplikace může být náročné a může vyžadovat pečlivou údržbu, opravy a monitorování několika vrstev topologie aplikace.</span><span class="sxs-lookup"><span data-stu-id="c78d4-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of the application topology.</span></span> <span data-ttu-id="c78d4-109">Centralizovaný firewall webových aplikací značně zjednodušuje správu zabezpečení a nabízí správcům lepší ochranu aplikací před hrozbami neoprávněného vniknutí.</span><span class="sxs-lookup"><span data-stu-id="c78d4-109">A centralized web application firewall helps make security management much simpler and gives better assurance to application administrators against threats or intrusions.</span></span> <span data-ttu-id="c78d4-110">Řešení Firewall webových aplikací (WAF) může také rychleji reagovat na ohrožení zabezpečení, protože opravuje známé chyby zabezpečení v centrálním umístění, namísto zabezpečování jednotlivých webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="c78d4-110">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="c78d4-111">Stávající aplikační brány je možné jednoduše převést na aplikační brány doplněné webovým aplikačním firewallem.</span><span class="sxs-lookup"><span data-stu-id="c78d4-111">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="c78d4-113">Application Gateway funguje jako řadič doručování aplikací a zajišťuje zakončení protokolu SSL, spřažení relace na základě souborů cookie, distribuci zatížení pomocí kruhového dotazování, směrování na základě obsahu, schopnost hostovat více webů a vylepšení zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c78d4-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability to host multiple websites and security enhancements.</span></span> <span data-ttu-id="c78d4-114">Vylepšení zabezpečení nabízená službou Application Gateway zahrnují správu zásad protokolu SSL a podporu koncového šifrování protokolu SSL.</span><span class="sxs-lookup"><span data-stu-id="c78d4-114">Security enhancements offered by Application Gateway include SSL policy management, end to end SSL support.</span></span> <span data-ttu-id="c78d4-115">Zabezpečení aplikací je nyní posíleno integrací firewallu webových aplikací (WAF) přímo do nabídky ADC.</span><span class="sxs-lookup"><span data-stu-id="c78d4-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into the ADC offering.</span></span> <span data-ttu-id="c78d4-116">Získáte tak snadno konfigurovatelné centrální umístění pro správu a ochranu svých webových aplikací před běžnými webovými chybami zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c78d4-116">This provides an easy to configure central location to manage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="c78d4-117">Výhody</span><span class="sxs-lookup"><span data-stu-id="c78d4-117">Benefits</span></span>

<span data-ttu-id="c78d4-118">Tady jsou základní výhody, které poskytují Application Gateway s firewallem webových aplikací:</span><span class="sxs-lookup"><span data-stu-id="c78d4-118">The following are the core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="c78d4-119">Ochrana</span><span class="sxs-lookup"><span data-stu-id="c78d4-119">Protection</span></span>

* <span data-ttu-id="c78d4-120">Ochráníte své webové aplikace před webovými chybami zabezpečení a útoky bez nutnosti upravovat back-endový kód.</span><span class="sxs-lookup"><span data-stu-id="c78d4-120">Protect your web application from web vulnerabilities and attacks without modification to backend code.</span></span>

* <span data-ttu-id="c78d4-121">Ochráníte více webových aplikací současně za službou Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="c78d4-121">Protect multiple web applications at the same time behind an application gateway.</span></span> <span data-ttu-id="c78d4-122">Služba Application Gateway podporuje za jednou bránou hostování až 20 webů, které můžete ochránit před webovými útoky pomocí WAF.</span><span class="sxs-lookup"><span data-stu-id="c78d4-122">Application gateway supports hosting up to 20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="c78d4-123">Monitorování</span><span class="sxs-lookup"><span data-stu-id="c78d4-123">Monitoring</span></span>

* <span data-ttu-id="c78d4-124">Můžete monitorovat útoky na své webové aplikace pomocí protokolu WAF generovaného v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="c78d4-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="c78d4-125">Tento protokol je integrovaný s [Azure Monitorem](../monitoring-and-diagnostics/monitoring-overview.md) a umožňuje sledování výstrah a protokolů WAF a snadnou identifikaci trendů.</span><span class="sxs-lookup"><span data-stu-id="c78d4-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) to track WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="c78d4-126">Brzy budeme integrovat WAF do služby Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="c78d4-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="c78d4-127">Azure Security Center vám poskytne centrální přehled o stavu zabezpečení všech vašich prostředků Azure.</span><span class="sxs-lookup"><span data-stu-id="c78d4-127">Azure Security Center allows for a central view of the security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="c78d4-128">Přizpůsobení</span><span class="sxs-lookup"><span data-stu-id="c78d4-128">Customization</span></span>

* <span data-ttu-id="c78d4-129">Díky možnosti přizpůsobit pravidla firewallu webových aplikací a pravidla skupin podle potřeb vaší aplikace můžete eliminovat falešně pozitivní nálezy.</span><span class="sxs-lookup"><span data-stu-id="c78d4-129">The ability to customize WAF rules and rule groups to suit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="c78d4-130">Funkce</span><span class="sxs-lookup"><span data-stu-id="c78d4-130">Features</span></span>

<span data-ttu-id="c78d4-131">Firewall webových aplikací se poskytuje s předem nakonfigurovanou sadou pravidel CRS 3.0, nebo můžete použít verzi 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c78d4-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose to use 2.2.9.</span></span> <span data-ttu-id="c78d4-132">CRS 3.0 dosahuje menšího počtu falešně pozitivních nálezů oproti verzi 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c78d4-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="c78d4-133">Je zajištěna možnost [přizpůsobit si pravidla, podle vašich potřeb](application-gateway-customize-waf-rules-portal.md).</span><span class="sxs-lookup"><span data-stu-id="c78d4-133">The ability to [customize rules to suit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="c78d4-134">Mezi běžné webové zranitelnosti, proti kterým firewall webových aplikací chrání, patří tyto:</span><span class="sxs-lookup"><span data-stu-id="c78d4-134">Some of the common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="c78d4-135">Ochrana před útoky prostřednictvím injektáže SQL.</span><span class="sxs-lookup"><span data-stu-id="c78d4-135">SQL injection protection</span></span>
* <span data-ttu-id="c78d4-136">Ochrana před skriptováním mezi weby.</span><span class="sxs-lookup"><span data-stu-id="c78d4-136">Cross site scripting protection</span></span>
* <span data-ttu-id="c78d4-137">Ochrana před běžnými webovými útoky, jako je například injektáž příkazů, pronášení požadavků HTTP, rozdělování odpovědí protokolu HTTP a útok pomocí vložení vzdáleného souboru.</span><span class="sxs-lookup"><span data-stu-id="c78d4-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="c78d4-138">Ochrana před narušením protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="c78d4-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="c78d4-139">Ochrana před anomáliemi protokolu HTTP, jako například chybějící údaj user-agent hostitele nebo hlavičky Accept.</span><span class="sxs-lookup"><span data-stu-id="c78d4-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="c78d4-140">Ochrana před roboty, prohledávacími moduly a skenery.</span><span class="sxs-lookup"><span data-stu-id="c78d4-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="c78d4-141">Detekce běžných chyb v konfiguraci aplikací (tj. Apache, IIS atd.).</span><span class="sxs-lookup"><span data-stu-id="c78d4-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="c78d4-142">Podrobnější seznam pravidel a ochrany, kterou poskytují, naleznete v popisu [základních sad pravidel](#core-rule-sets).</span><span class="sxs-lookup"><span data-stu-id="c78d4-142">For a more detailed list of rules and their protections see the following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="c78d4-143">Základní sady pravidel</span><span class="sxs-lookup"><span data-stu-id="c78d4-143">Core rule sets</span></span>

<span data-ttu-id="c78d4-144">Application Gateway podporuje dvě sady pravidel, CRS 3.0 a CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="c78d4-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="c78d4-145">Tyto základní sady pravidel jsou kolekce pravidel, které chrání vaše webové aplikace před škodlivými aktivitami.</span><span class="sxs-lookup"><span data-stu-id="c78d4-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="c78d4-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="c78d4-146">OWASP_3.0</span></span>

<span data-ttu-id="c78d4-147">Základní sada pravidel 3.0 má 13 skupin pravidel, shrnutých v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="c78d4-147">The 3.0 core rule set provided has 13 rule groups as shown in the following table.</span></span> <span data-ttu-id="c78d4-148">Každá z těchto skupin obsahuje několik pravidel, která mohou být zakázána.</span><span class="sxs-lookup"><span data-stu-id="c78d4-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="c78d4-149">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="c78d4-149">RuleGroup</span></span>|<span data-ttu-id="c78d4-150">Popis</span><span class="sxs-lookup"><span data-stu-id="c78d4-150">Description</span></span>|
|---|---|
|<span data-ttu-id="c78d4-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="c78d4-152">Obsahuje pravidla chránící před známými spammery a škodlivou aktivitou.</span><span class="sxs-lookup"><span data-stu-id="c78d4-152">Contains rules to protect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="c78d4-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="c78d4-154">Obsahuje pravidla pro uzamčení metod (PUT, PATCH< ..)</span><span class="sxs-lookup"><span data-stu-id="c78d4-154">Contains rules to lock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="c78d4-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="c78d4-156">Obsahuje pravidla pro ochranu před útoky DoS (Denial of Service).</span><span class="sxs-lookup"><span data-stu-id="c78d4-156">Contains rules to protect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="c78d4-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="c78d4-158">Obsahuje pravidla pro ochranu před skenery portů a prostředí.</span><span class="sxs-lookup"><span data-stu-id="c78d4-158">Contains rules to protect against port and environment scanners.</span></span>|
|<span data-ttu-id="c78d4-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="c78d4-160">Obsahuje pravidla pro ochranu před problémy s protokoly a kódováním.</span><span class="sxs-lookup"><span data-stu-id="c78d4-160">Contains rules to protect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="c78d4-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="c78d4-162">Obsahuje pravidla s cílem zajistit ochranu proti vkládání záhlaví, podvržení požadavku a rozdělení odpovědi.</span><span class="sxs-lookup"><span data-stu-id="c78d4-162">Contains rules to protect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="c78d4-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="c78d4-164">Obsahuje pravidla pro ochranu před útoky na soubory a cesty.</span><span class="sxs-lookup"><span data-stu-id="c78d4-164">Contains rules to protect against file and path attacks.</span></span>|
|<span data-ttu-id="c78d4-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="c78d4-166">Obsahuje pravidla pro ochranu před útoky RFI (Remote File Inclusion).</span><span class="sxs-lookup"><span data-stu-id="c78d4-166">Contains rules to protect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="c78d4-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="c78d4-168">Obsahuje pravidla pro ochranu před vzdáleným spuštěním kódu.</span><span class="sxs-lookup"><span data-stu-id="c78d4-168">Contains rules to protect again Remote Code Execution.</span></span>|
|<span data-ttu-id="c78d4-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="c78d4-170">Obsahuje pravidla pro ochranu před útoky vkládáním kódu PHP.</span><span class="sxs-lookup"><span data-stu-id="c78d4-170">Contains rules to protect against PHP injection attacks.</span></span>|
|<span data-ttu-id="c78d4-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="c78d4-172">Obsahuje pravidla pro ochranu před křížovým skriptováním.</span><span class="sxs-lookup"><span data-stu-id="c78d4-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="c78d4-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="c78d4-174">Obsahuje pravidla pro ochranu před injektáží SQL.</span><span class="sxs-lookup"><span data-stu-id="c78d4-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="c78d4-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="c78d4-176">Obsahuje pravidla pro ochranu před útokem fixací na relaci.</span><span class="sxs-lookup"><span data-stu-id="c78d4-176">Contains rules to protect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="c78d4-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="c78d4-177">OWASP_2.2.9</span></span>

<span data-ttu-id="c78d4-178">Základní sada pravidel 2.2.9 má 10 skupin pravidel, shrnutých v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="c78d4-178">The 2.2.9 core rule set provided has 10 rule groups as shown in the following table.</span></span> <span data-ttu-id="c78d4-179">Každá z těchto skupin obsahuje několik pravidel, která mohou být zakázána.</span><span class="sxs-lookup"><span data-stu-id="c78d4-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="c78d4-180">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="c78d4-180">RuleGroup</span></span>|<span data-ttu-id="c78d4-181">Popis</span><span class="sxs-lookup"><span data-stu-id="c78d4-181">Description</span></span>|
|---|---|
|<span data-ttu-id="c78d4-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="c78d4-183">Obsahuje pravidla pro ochranu před porušením protokolu (neplatné znaky, GET s tělem žádosti atd.)</span><span class="sxs-lookup"><span data-stu-id="c78d4-183">Contains rules to protect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="c78d4-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="c78d4-185">Obsahuje pravidla pro ochranu před nesprávným obsahem záhlaví.</span><span class="sxs-lookup"><span data-stu-id="c78d4-185">Contains rules to protect against incorrect header information.</span></span>|
|<span data-ttu-id="c78d4-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="c78d4-187">Obsahuje pravidla pro ochranu před argumenty nebo soubory, které překračují omezení.</span><span class="sxs-lookup"><span data-stu-id="c78d4-187">Contains rules to protect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="c78d4-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="c78d4-189">Obsahuje pravidla pro ochranu před omezenými metodami, záhlavími a typy souborů.</span><span class="sxs-lookup"><span data-stu-id="c78d4-189">Contains rules to protect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="c78d4-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="c78d4-191">Obsahuje pravidla pro ochranu před roboty procházejícími web a před skenery.</span><span class="sxs-lookup"><span data-stu-id="c78d4-191">Contains rules to protect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="c78d4-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="c78d4-193">Obsahuje pravidla pro ochranu před obecnými útoky (fixace na relaci, zahrnutí vzdáleného souboru, vkládání kódu PHP atd.)</span><span class="sxs-lookup"><span data-stu-id="c78d4-193">Contains rules to protect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="c78d4-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="c78d4-195">Obsahuje pravidla pro ochranu před injektáží SQL.</span><span class="sxs-lookup"><span data-stu-id="c78d4-195">Contains rules to protect against SQL injection attacks</span></span>|
|<span data-ttu-id="c78d4-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="c78d4-197">Obsahuje pravidla pro ochranu před křížovým skriptováním.</span><span class="sxs-lookup"><span data-stu-id="c78d4-197">Contains rules to protect against cross site scripting.</span></span>|
|<span data-ttu-id="c78d4-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="c78d4-199">Obsahuje pravidla pro ochranu před útoky typu path traversal.</span><span class="sxs-lookup"><span data-stu-id="c78d4-199">Contains a rule to protect against path traversal attacks</span></span>|
|<span data-ttu-id="c78d4-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="c78d4-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="c78d4-201">Obsahuje pravidla pro ochranu před trojskými koni.</span><span class="sxs-lookup"><span data-stu-id="c78d4-201">Contains rules to protect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="c78d4-202">Režimy WAF</span><span class="sxs-lookup"><span data-stu-id="c78d4-202">WAF Modes</span></span>

<span data-ttu-id="c78d4-203">Firewall webových aplikací (WAF) služby Application Gateway lze nakonfigurovat ke spuštění v těchto dvou režimech:</span><span class="sxs-lookup"><span data-stu-id="c78d4-203">Application Gateway WAF can be configured to run in the following two modes:</span></span>

* <span data-ttu-id="c78d4-204">**Režim detekce** – Když je nakonfigurován ke spuštění v režimu detekce, WAF služby Application Gateway monitoruje a protokoluje všechny výstrahy na hrozby do souboru protokolu.</span><span class="sxs-lookup"><span data-stu-id="c78d4-204">**Detection mode** – When configured to run in detection mode, Application Gateway WAF monitors and logs all threat alerts in to a log file.</span></span> <span data-ttu-id="c78d4-205">Diagnostika protokolování pro službu Application Gateway by měla být v části **Diagnostika** zapnutá.</span><span class="sxs-lookup"><span data-stu-id="c78d4-205">Logging diagnostics for Application Gateway should be turned on using the **Diagnostics** section.</span></span> <span data-ttu-id="c78d4-206">Bude také třeba zajistit, aby byl vybrán a zapnut protokol WAF.</span><span class="sxs-lookup"><span data-stu-id="c78d4-206">You also need to ensure that the WAF log is selected and turned on.</span></span> <span data-ttu-id="c78d4-207">když je firewall webových aplikací spuštěný v režimu detekce, neblokuje příchozí požadavky.</span><span class="sxs-lookup"><span data-stu-id="c78d4-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="c78d4-208">**Režim prevence** – Když je nakonfigurován ke spuštění v režimu prevence, služba Application Gateway aktivně blokuje vniknutí a útoky detekované pomocí svých pravidel.</span><span class="sxs-lookup"><span data-stu-id="c78d4-208">**Prevention mode** – When configured to run in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="c78d4-209">Útočník obdrží výjimku 403 – Neoprávněný přístup a připojení se ukončí.</span><span class="sxs-lookup"><span data-stu-id="c78d4-209">The attacker receives a 403 unauthorized access exception and the connection is terminated.</span></span> <span data-ttu-id="c78d4-210">Režim prevence takové útoky nadále protokoluje do protokolů WAF.</span><span class="sxs-lookup"><span data-stu-id="c78d4-210">Prevention mode continues to log such attacks in the WAF logs.</span></span>

### <span data-ttu-id="c78d4-211"><a name="application-gateway-waf-reports"></a>Monitorování WAF</span><span class="sxs-lookup"><span data-stu-id="c78d4-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="c78d4-212">Monitorování stavu službu Application Gateway je velmi důležité.</span><span class="sxs-lookup"><span data-stu-id="c78d4-212">Monitoring the health of your application gateway is important.</span></span> <span data-ttu-id="c78d4-213">Monitorování stavu vašeho firewallu webových aplikací a aplikací, které chrání, je zajišťována protokolováním a integrací se službami Azure Monitor, Azure Security Center (už brzy) a Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="c78d4-213">Monitoring the health of your web application firewall and the applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![Diagnostika](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="c78d4-215">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="c78d4-215">Azure Monitor</span></span>

<span data-ttu-id="c78d4-216">Každý protokol aplikační brány je integrovaný do služby [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c78d4-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="c78d4-217">To umožňuje sledovat diagnostické informace, včetně výstrah a protokolů WAF.</span><span class="sxs-lookup"><span data-stu-id="c78d4-217">This allows you to track diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="c78d4-218">Tato možnost je poskytována v rámci prostředku Application Gateway na portálu na kartě **Diagnostika** nebo přímo prostřednictvím služby Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="c78d4-218">This capability is provided within the Application Gateway resource in the portal under the **Diagnostics** tab or through the Azure Monitor service directly.</span></span> <span data-ttu-id="c78d4-219">Další informace o povolení diagnostických protokolů pro službu Application Gateway najdete na stránkách o [diagnostice služby Application Gateway](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="c78d4-219">To learn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="c78d4-220">Azure Security Center</span><span class="sxs-lookup"><span data-stu-id="c78d4-220">Azure Security Center</span></span>

<span data-ttu-id="c78d4-221">[Azure Security Center](../security-center/security-center-intro.md) pomáhá předcházet hrozbám, rozpoznávat je a reagovat na ně a nabízí lepší přehled o zabezpečení prostředků Azure a kontrolu nad nimi.</span><span class="sxs-lookup"><span data-stu-id="c78d4-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond to threats with increased visibility into and control over the security of your Azure resources.</span></span> <span data-ttu-id="c78d4-222">Služba Application Gateway je nyní [integrována do služby Azure Security Center](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="c78d4-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="c78d4-223">Azure Security Center prohledává vaše prostředí a rozpoznává nechráněné webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="c78d4-223">Azure Security Center scans your environment to detect unprotected web applications.</span></span> <span data-ttu-id="c78d4-224">Nyní může doporučovat firewall webových aplikací (WAF) služby Application Gateway k ochraně těchto citlivých prostředků.</span><span class="sxs-lookup"><span data-stu-id="c78d4-224">It can now recommend application gateway WAF to protect these vulnerable resources.</span></span> <span data-ttu-id="c78d4-225">Firewall webových aplikací (WAF) služby Application Gateway můžete vytvořit přímo ve službě Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="c78d4-225">You can directly create application gateway WAF from the Azure Security Center.</span></span>  <span data-ttu-id="c78d4-226">Tyto instance firewallu webových aplikací (WAF) jsou integrovány se službou Azure Security Center a budou posílat upozornění a informace o stavu zpět do služby Azure Security Center za účelem vytváření sestav.</span><span class="sxs-lookup"><span data-stu-id="c78d4-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back to Azure Security Center for reporting.</span></span>

![Obrázek 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="c78d4-228">Protokolování</span><span class="sxs-lookup"><span data-stu-id="c78d4-228">Logging</span></span>

<span data-ttu-id="c78d4-229">Firewall webových aplikací (WAF) služby Application Gateway poskytuje podrobné generování sestav o každém útoky, který detekuje.</span><span class="sxs-lookup"><span data-stu-id="c78d4-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="c78d4-230">Protokolování je integrované v protokolech diagnostiky Azure a výstrahy se zaznamenávají ve formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="c78d4-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="c78d4-231">Tyto protokoly je možné integrovat se službou [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="c78d4-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="c78d4-233">Ceny SKU WAF služby Application Gateway</span><span class="sxs-lookup"><span data-stu-id="c78d4-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="c78d4-234">Firewall webových aplikací je k dispozici jako nová položka WAF SKU.</span><span class="sxs-lookup"><span data-stu-id="c78d4-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="c78d4-235">Tato položka SKU je k dispozici pouze v modelu zřizování Azure Resource Manager, nikoli v rámci klasického modelu nasazení.</span><span class="sxs-lookup"><span data-stu-id="c78d4-235">This SKU is available only in Azure Resource Manager provisioning model and not under the classic deployment model.</span></span> <span data-ttu-id="c78d4-236">WAF SKU je navíc dostupný jen pro střední a velké instance aplikační brány.</span><span class="sxs-lookup"><span data-stu-id="c78d4-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="c78d4-237">Všechna omezení pro aplikační brány platí také pro WAF SKU.</span><span class="sxs-lookup"><span data-stu-id="c78d4-237">All the limits for application gateway also apply to the WAF SKU.</span></span> <span data-ttu-id="c78d4-238">Ceny jsou založeny na hodinové sazbě za instanci brány a na poplatcích za zpracování dat.</span><span class="sxs-lookup"><span data-stu-id="c78d4-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="c78d4-239">Hodinová sazba za bránu se pro položku WAF SKU liší od sazby pro standardní položky SKU. Sazby jsou uvedeny v článku [Podrobnosti o cenách Application Gateway](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="c78d4-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="c78d4-240">Poplatky za zpracování dat zůstávají stejné.</span><span class="sxs-lookup"><span data-stu-id="c78d4-240">Data processing charges remain the same.</span></span> <span data-ttu-id="c78d4-241">Neexistují žádné poplatky za pravidla nebo skupiny pravidel.</span><span class="sxs-lookup"><span data-stu-id="c78d4-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="c78d4-242">Jedna aplikační brána může chránit několik webových aplikací a další aplikace nejsou zpoplatněny.</span><span class="sxs-lookup"><span data-stu-id="c78d4-242">You can protect multiple web applications behind the same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="c78d4-243">Fakturace za WAF bude zahájena 5. 5. 2017, do té doby budou položky WAF SKU fakturovány podle standardních sazeb.</span><span class="sxs-lookup"><span data-stu-id="c78d4-243">Billing for WAF starts effectively 5/5/2017, until then the WAF SKU gateways continues to be charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c78d4-244">Další kroky</span><span class="sxs-lookup"><span data-stu-id="c78d4-244">Next steps</span></span>

<span data-ttu-id="c78d4-245">Až se podrobněji seznámíte se schopnostmi WAF, přečtěte si článek [Postup konfigurace Firewallu webových aplikací ve službě Application Gateway](application-gateway-web-application-firewall-portal.md).</span><span class="sxs-lookup"><span data-stu-id="c78d4-245">After learning more about the capabilities of WAF, visit [How to configure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>

