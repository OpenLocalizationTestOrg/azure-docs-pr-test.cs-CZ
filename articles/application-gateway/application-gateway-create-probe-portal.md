---
title: "Vytvoření vlastní test paměti - Azure Application Gateway - portálu Azure | Microsoft Docs"
description: "Naučte se vytvářet vlastní test paměti pro službu Application Gateway pomocí portálu"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 65e9bba4ce9ac41ae2a9a8c3fa7f661165fc1403
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-the-portal"></a><span data-ttu-id="6bc82-103">Vytvořit vlastní test paměti pro službu Application Gateway pomocí portálu</span><span class="sxs-lookup"><span data-stu-id="6bc82-103">Create a custom probe for Application Gateway by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="6bc82-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="6bc82-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="6bc82-105">Azure Resource Manager PowerShell</span><span class="sxs-lookup"><span data-stu-id="6bc82-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="6bc82-106">Azure Classic PowerShell</span><span class="sxs-lookup"><span data-stu-id="6bc82-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="6bc82-107">V tomto článku přidejte vlastní test paměti pro existující bránu aplikace prostřednictvím portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="6bc82-107">In this article, you add a custom probe to an existing application gateway through the Azure portal.</span></span> <span data-ttu-id="6bc82-108">Vlastní testy paměti jsou užitečné pro aplikace, které mají na stránce Kontrola konkrétní stav nebo pro aplikace, které neposkytuje úspěšné odpovědi na výchozí webovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6bc82-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on the default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="6bc82-109">Než začnete</span><span class="sxs-lookup"><span data-stu-id="6bc82-109">Before you begin</span></span>

<span data-ttu-id="6bc82-110">Pokud již nemáte služby application gateway, navštivte [vytvoření služby Application Gateway](application-gateway-create-gateway-portal.md) k vytvoření aplikační brány pro práci s.</span><span class="sxs-lookup"><span data-stu-id="6bc82-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) to create an application gateway to work with.</span></span>

## <span data-ttu-id="6bc82-111"><a name="createprobe"></a>Vytvoření sonda</span><span class="sxs-lookup"><span data-stu-id="6bc82-111"><a name="createprobe"></a>Create the probe</span></span>

<span data-ttu-id="6bc82-112">Sondy jsou nakonfigurované ve dvou krocích prostřednictvím portálu.</span><span class="sxs-lookup"><span data-stu-id="6bc82-112">Probes are configured in a two-step process through the portal.</span></span> <span data-ttu-id="6bc82-113">Prvním krokem je vytvoření sonda.</span><span class="sxs-lookup"><span data-stu-id="6bc82-113">The first step is to create the probe.</span></span> <span data-ttu-id="6bc82-114">V druhém kroku přidejte k kontroly nastavení http back-end aplikační brány.</span><span class="sxs-lookup"><span data-stu-id="6bc82-114">In the second step, you add the probe to the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="6bc82-115">Přihlaste se k portálu [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="6bc82-115">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="6bc82-116">Pokud účet nemáte, můžete si zaregistrovat [bezplatnou zkušební verzi jeden měsíc](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="6bc82-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="6bc82-117">V podokně Azure Oblíbené portálu klikněte na možnost všechny prostředky.</span><span class="sxs-lookup"><span data-stu-id="6bc82-117">In the Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="6bc82-118">Klikněte na službu application gateway v okně všechny prostředky.</span><span class="sxs-lookup"><span data-stu-id="6bc82-118">Click the application gateway in the All resources blade.</span></span> <span data-ttu-id="6bc82-119">Pokud odběr, který jste již vybrali neobsahuje několik prostředků, můžete zadat partners.contoso.net ve filtru podle názvu...</span><span class="sxs-lookup"><span data-stu-id="6bc82-119">If the subscription you selected already has several resources in it, you can enter partners.contoso.net in the Filter by name…</span></span> <span data-ttu-id="6bc82-120">pro snadný přístup ke službě Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="6bc82-120">box to easily access the application gateway.</span></span>

1. <span data-ttu-id="6bc82-121">Klikněte na tlačítko **sondy** a klikněte na tlačítko **přidat** tlačítko, které chcete přidat sondu.</span><span class="sxs-lookup"><span data-stu-id="6bc82-121">Click **Probes** and click the **Add** button to add a probe.</span></span>

  ![Přidat test okno s informacemi o doplnit][1]

1. <span data-ttu-id="6bc82-123">Na **test stavu přidat** okno, zadejte požadované informace pro kontrolu a po dokončení klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="6bc82-123">On the **Add health probe** blade, fill out the required information for the probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="6bc82-124">**Nastavení**</span><span class="sxs-lookup"><span data-stu-id="6bc82-124">**Setting**</span></span> | <span data-ttu-id="6bc82-125">**Hodnota**</span><span class="sxs-lookup"><span data-stu-id="6bc82-125">**Value**</span></span> | <span data-ttu-id="6bc82-126">**Podrobnosti**</span><span class="sxs-lookup"><span data-stu-id="6bc82-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="6bc82-127">**Název**</span><span class="sxs-lookup"><span data-stu-id="6bc82-127">**Name**</span></span>|<span data-ttu-id="6bc82-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="6bc82-128">customProbe</span></span>|<span data-ttu-id="6bc82-129">Tato hodnota je popisný název, který test, který je přístupný na portálu.</span><span class="sxs-lookup"><span data-stu-id="6bc82-129">This value is a friendly name to the probe that is accessible in the portal.</span></span>|
  |<span data-ttu-id="6bc82-130">**Protokol**</span><span class="sxs-lookup"><span data-stu-id="6bc82-130">**Protocol**</span></span>|<span data-ttu-id="6bc82-131">Protokol HTTP nebo HTTPS</span><span class="sxs-lookup"><span data-stu-id="6bc82-131">HTTP or HTTPS</span></span> | <span data-ttu-id="6bc82-132">Protokol, který používá test stavu.</span><span class="sxs-lookup"><span data-stu-id="6bc82-132">The protocol that the health probe uses.</span></span>|
  |<span data-ttu-id="6bc82-133">**Hostitele**</span><span class="sxs-lookup"><span data-stu-id="6bc82-133">**Host**</span></span>|<span data-ttu-id="6bc82-134">jednofaktorovému</span><span class="sxs-lookup"><span data-stu-id="6bc82-134">i.e</span></span> <span data-ttu-id="6bc82-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="6bc82-135">contoso.com</span></span>|<span data-ttu-id="6bc82-136">Tato hodnota je název hostitele, který se používá pro kontrolu.</span><span class="sxs-lookup"><span data-stu-id="6bc82-136">This value is the host name that is used for the probe.</span></span> <span data-ttu-id="6bc82-137">Platí jenom v případě více lokalit je nakonfigurovaná na aplikační bránu, v opačném případě použijte "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="6bc82-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="6bc82-138">Tato hodnota se liší od názvu hostitele virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6bc82-138">This value is different from the VM host name.</span></span>|
  |<span data-ttu-id="6bc82-139">**Cesta**</span><span class="sxs-lookup"><span data-stu-id="6bc82-139">**Path**</span></span>|<span data-ttu-id="6bc82-140">/ nebo jiné cesty</span><span class="sxs-lookup"><span data-stu-id="6bc82-140">/ or another path</span></span>|<span data-ttu-id="6bc82-141">Zbývající část úplnou adresu url pro vlastní test paměti.</span><span class="sxs-lookup"><span data-stu-id="6bc82-141">The remainder of the full url for the custom probe.</span></span> <span data-ttu-id="6bc82-142">Platná cesta začíná '/'.</span><span class="sxs-lookup"><span data-stu-id="6bc82-142">A valid path starts with '/'.</span></span> <span data-ttu-id="6bc82-143">Bude použita výchozí cesta http://contoso.com stačí použít '/'</span><span class="sxs-lookup"><span data-stu-id="6bc82-143">For the default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="6bc82-144">**Interval (sekundy)**</span><span class="sxs-lookup"><span data-stu-id="6bc82-144">**Interval (secs)**</span></span>|<span data-ttu-id="6bc82-145">30</span><span class="sxs-lookup"><span data-stu-id="6bc82-145">30</span></span>|<span data-ttu-id="6bc82-146">Jak často se spustí sondy, aby kontrolovat stav.</span><span class="sxs-lookup"><span data-stu-id="6bc82-146">How often the probe is run to check for health.</span></span> <span data-ttu-id="6bc82-147">Není doporučeno nastavit nižší než 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="6bc82-147">It is not recommended to set the lower than 30 seconds.</span></span>|
  |<span data-ttu-id="6bc82-148">**Časový limit (sekundy)**</span><span class="sxs-lookup"><span data-stu-id="6bc82-148">**Timeout (secs)**</span></span>|<span data-ttu-id="6bc82-149">30</span><span class="sxs-lookup"><span data-stu-id="6bc82-149">30</span></span>|<span data-ttu-id="6bc82-150">Množství času sondy čeká, než vyprší časový limit.</span><span class="sxs-lookup"><span data-stu-id="6bc82-150">The amount of time the probe waits before timing out.</span></span> <span data-ttu-id="6bc82-151">Interval vypršení časového limitu musí být dostatečně vysoká, že volání protokolu http lze zajistit, že stránka stavu back-end je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="6bc82-151">The timeout interval needs to be high enough that an http call can be made to ensure the backend health page is available.</span></span>|
  |<span data-ttu-id="6bc82-152">**Prahová hodnota špatného stavu**</span><span class="sxs-lookup"><span data-stu-id="6bc82-152">**Unhealthy threshold**</span></span>|<span data-ttu-id="6bc82-153">3</span><span class="sxs-lookup"><span data-stu-id="6bc82-153">3</span></span>|<span data-ttu-id="6bc82-154">Počet neúspěšných pokusech o považovat za není v pořádku.</span><span class="sxs-lookup"><span data-stu-id="6bc82-154">Number of failed attempts to be considered unhealthy.</span></span> <span data-ttu-id="6bc82-155">Prahová hodnota 0 znamená, pokud se nezdaří Kontrola stavu back-end je určen není v pořádku okamžitě.</span><span class="sxs-lookup"><span data-stu-id="6bc82-155">A threshold of 0 means that if a health check fails the back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="6bc82-156">Název hostitele není stejný jako název serveru.</span><span class="sxs-lookup"><span data-stu-id="6bc82-156">The host name is not the same as server name.</span></span> <span data-ttu-id="6bc82-157">Tato hodnota je název virtuálního hostitele na serveru aplikace spuštěna.</span><span class="sxs-lookup"><span data-stu-id="6bc82-157">This value is the name of the virtual host running on the application server.</span></span> <span data-ttu-id="6bc82-158">Http://(host name):(port from httpsetting)/urlPath posílá sonda</span><span class="sxs-lookup"><span data-stu-id="6bc82-158">The probe is sent to http://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-to-the-gateway"></a><span data-ttu-id="6bc82-159">Přidat test k bráně.</span><span class="sxs-lookup"><span data-stu-id="6bc82-159">Add probe to the gateway</span></span>

<span data-ttu-id="6bc82-160">Teď, když test byl vytvořen, je čas ji přidejte k bráně.</span><span class="sxs-lookup"><span data-stu-id="6bc82-160">Now that the probe has been created, it is time to add it to the gateway.</span></span> <span data-ttu-id="6bc82-161">Nastavení testu se nastavují v nastavení http back-end aplikační brány.</span><span class="sxs-lookup"><span data-stu-id="6bc82-161">Probe settings are set on the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="6bc82-162">Klikněte na tlačítko **nastavení HTTP** ve službě application gateway se zprovoznit a klikněte na okno Konfigurace back-end aktuální nastavení http uvedené v okně.</span><span class="sxs-lookup"><span data-stu-id="6bc82-162">Click **HTTP settings** on the application gateway, to bring up the configuration blade click the current backend http settings listed in the window.</span></span>

  ![okno nastavení protokolu HTTPS][2]

1. <span data-ttu-id="6bc82-164">Na **appGatewayBackEndHttpSettings** okno nastavení, zaškrtněte **použití vlastní test paměti** zaškrtávací políčko a zvolte testu vytvořené v [vytvořit sondy](#createprobe) části na **vlastní test** rozevíracího seznamu...</span><span class="sxs-lookup"><span data-stu-id="6bc82-164">On the **appGatewayBackEndHttpSettings** settings blade, check the **Use custom probe** checkbox and choose the probe created in the [Create the probe](#createprobe) section on the **Custom probe** drop-down..</span></span>
<span data-ttu-id="6bc82-165">Po dokončení klikněte na tlačítko **Uložit** a nastavení se použijí.</span><span class="sxs-lookup"><span data-stu-id="6bc82-165">When complete, click **Save** and the settings are applied.</span></span>

<span data-ttu-id="6bc82-166">Výchozí kontroly kontroluje výchozí úroveň přístupu k webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6bc82-166">The default probe checks the default access to the web application.</span></span> <span data-ttu-id="6bc82-167">Teď, když vlastní test paměti byl vytvořen, služby application gateway používá vlastní cestu definovanou pro sledování stavu pro back-end serverů.</span><span class="sxs-lookup"><span data-stu-id="6bc82-167">Now that a custom probe has been created, the application gateway uses the custom path defined to monitor health for the backend servers.</span></span> <span data-ttu-id="6bc82-168">Podle kritérií, která byla definována, služby application gateway kontroluje cesta zadaná v sonda.</span><span class="sxs-lookup"><span data-stu-id="6bc82-168">Based on the criteria that was defined, the application gateway checks the path specified in the probe.</span></span> <span data-ttu-id="6bc82-169">Pokud volání hostitele a portu / cesta nevrací HTTP 200 399 stav odpovědi, server se dostala mimo otočení po dosažení prahová hodnota špatného stavu.</span><span class="sxs-lookup"><span data-stu-id="6bc82-169">If the call to host:Port/path does not return an HTTP 200-399 status response, the server is taken out of rotation after the unhealthy threshold is reached.</span></span> <span data-ttu-id="6bc82-170">Zjišťování bude pokračovat na není v pořádku instance k určení, kdy bude znovu v pořádku.</span><span class="sxs-lookup"><span data-stu-id="6bc82-170">Probing continues on the unhealthy instance to determine when it becomes healthy again.</span></span> <span data-ttu-id="6bc82-171">Po přidání instance zpět do fondu serverů v pořádku provoz začne znovu předávaných do něj a zjišťování k instanci pokračuje v zadaném intervalu uživatele jako normální.</span><span class="sxs-lookup"><span data-stu-id="6bc82-171">Once the instance is added back to healthy server pool, traffic begins flowing to it again and probing to the instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6bc82-172">Další kroky</span><span class="sxs-lookup"><span data-stu-id="6bc82-172">Next steps</span></span>

<span data-ttu-id="6bc82-173">Další postup konfigurace snižování zátěže protokolu SSL s Azure Application Gateway najdete v tématu [konfigurovat přesměrování zpracování SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="6bc82-173">To learn how to configure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

