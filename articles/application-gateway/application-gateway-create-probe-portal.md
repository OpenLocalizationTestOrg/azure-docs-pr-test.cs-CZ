---
title: "aaaCreate vlastní probe - Azure Application Gateway - Azure Portal | Microsoft Docs"
description: "Zjistěte, jak toocreate vlastní sběru dat pro službu Application Gateway pomocí portálu hello"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 9e9309045ef33ba1010868783949b4fde31619ec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-hello-portal"></a><span data-ttu-id="ceda0-103">Vytvořit vlastní test paměti pro službu Application Gateway pomocí portálu hello</span><span class="sxs-lookup"><span data-stu-id="ceda0-103">Create a custom probe for Application Gateway by using hello portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="ceda0-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="ceda0-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="ceda0-105">Azure Resource Manager PowerShell</span><span class="sxs-lookup"><span data-stu-id="ceda0-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="ceda0-106">Azure Classic PowerShell</span><span class="sxs-lookup"><span data-stu-id="ceda0-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="ceda0-107">V tomto článku můžete přidat vlastní test paměti tooan existující aplikace bránu prostřednictvím hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="ceda0-107">In this article, you add a custom probe tooan existing application gateway through hello Azure portal.</span></span> <span data-ttu-id="ceda0-108">Vlastní testy paměti jsou užitečné pro aplikace, které mají na stránce Kontrola konkrétní stav nebo pro aplikace, které neposkytuje úspěšné odpovědi na hello výchozí webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="ceda0-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on hello default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="ceda0-109">Než začnete</span><span class="sxs-lookup"><span data-stu-id="ceda0-109">Before you begin</span></span>

<span data-ttu-id="ceda0-110">Pokud již nemáte služby application gateway, navštivte [vytvoření služby Application Gateway](application-gateway-create-gateway-portal.md) toocreate toowork brány aplikaci s.</span><span class="sxs-lookup"><span data-stu-id="ceda0-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) toocreate an application gateway toowork with.</span></span>

## <span data-ttu-id="ceda0-111"><a name="createprobe"></a>Vytvořit test paměti hello</span><span class="sxs-lookup"><span data-stu-id="ceda0-111"><a name="createprobe"></a>Create hello probe</span></span>

<span data-ttu-id="ceda0-112">Sondy jsou nakonfigurované ve dvou krocích prostřednictvím portálu hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-112">Probes are configured in a two-step process through hello portal.</span></span> <span data-ttu-id="ceda0-113">prvním krokem Hello je toocreate hello testu.</span><span class="sxs-lookup"><span data-stu-id="ceda0-113">hello first step is toocreate hello probe.</span></span> <span data-ttu-id="ceda0-114">V druhém kroku hello přidejte nastavení http hello testu toohello back-end brány aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-114">In hello second step, you add hello probe toohello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="ceda0-115">Přihlaste se toohello [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="ceda0-115">Log in toohello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="ceda0-116">Pokud účet nemáte, můžete si zaregistrovat [bezplatnou zkušební verzi jeden měsíc](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="ceda0-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="ceda0-117">V hello portál Azure podokno Oblíbené klepněte na všechny prostředky.</span><span class="sxs-lookup"><span data-stu-id="ceda0-117">In hello Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="ceda0-118">Všechny prostředky okně klikněte na tlačítko hello Aplikační brána v hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-118">Click hello application gateway in hello All resources blade.</span></span> <span data-ttu-id="ceda0-119">Pokud hello odběr, který jste již vybrali neobsahuje několik prostředků, můžete zadat partners.contoso.net v hello filtr podle názvu...</span><span class="sxs-lookup"><span data-stu-id="ceda0-119">If hello subscription you selected already has several resources in it, you can enter partners.contoso.net in hello Filter by name…</span></span> <span data-ttu-id="ceda0-120">pole tooeasily přístup hello aplikační brány.</span><span class="sxs-lookup"><span data-stu-id="ceda0-120">box tooeasily access hello application gateway.</span></span>

1. <span data-ttu-id="ceda0-121">Klikněte na tlačítko **sondy** a klikněte na tlačítko hello **přidat** tlačítko tooadd sondu.</span><span class="sxs-lookup"><span data-stu-id="ceda0-121">Click **Probes** and click hello **Add** button tooadd a probe.</span></span>

  ![Přidat test okno s informacemi o doplnit][1]

1. <span data-ttu-id="ceda0-123">Na hello **test stavu přidat** okno, zadejte informace požadované hello u testu paměti hello a po dokončení klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="ceda0-123">On hello **Add health probe** blade, fill out hello required information for hello probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="ceda0-124">**Nastavení**</span><span class="sxs-lookup"><span data-stu-id="ceda0-124">**Setting**</span></span> | <span data-ttu-id="ceda0-125">**Hodnota**</span><span class="sxs-lookup"><span data-stu-id="ceda0-125">**Value**</span></span> | <span data-ttu-id="ceda0-126">**Podrobnosti**</span><span class="sxs-lookup"><span data-stu-id="ceda0-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="ceda0-127">**Název**</span><span class="sxs-lookup"><span data-stu-id="ceda0-127">**Name**</span></span>|<span data-ttu-id="ceda0-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="ceda0-128">customProbe</span></span>|<span data-ttu-id="ceda0-129">Tato hodnota je sondu toohello popisný název, který je přístupný hello portálu.</span><span class="sxs-lookup"><span data-stu-id="ceda0-129">This value is a friendly name toohello probe that is accessible in hello portal.</span></span>|
  |<span data-ttu-id="ceda0-130">**Protokol**</span><span class="sxs-lookup"><span data-stu-id="ceda0-130">**Protocol**</span></span>|<span data-ttu-id="ceda0-131">Protokol HTTP nebo HTTPS</span><span class="sxs-lookup"><span data-stu-id="ceda0-131">HTTP or HTTPS</span></span> | <span data-ttu-id="ceda0-132">Hello protokol, který hello test stavu používá.</span><span class="sxs-lookup"><span data-stu-id="ceda0-132">hello protocol that hello health probe uses.</span></span>|
  |<span data-ttu-id="ceda0-133">**Hostitele**</span><span class="sxs-lookup"><span data-stu-id="ceda0-133">**Host**</span></span>|<span data-ttu-id="ceda0-134">jednofaktorovému</span><span class="sxs-lookup"><span data-stu-id="ceda0-134">i.e</span></span> <span data-ttu-id="ceda0-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="ceda0-135">contoso.com</span></span>|<span data-ttu-id="ceda0-136">Tato hodnota je hello název hostitele, který se používá pro test hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-136">This value is hello host name that is used for hello probe.</span></span> <span data-ttu-id="ceda0-137">Platí jenom v případě více lokalit je nakonfigurovaná na aplikační bránu, v opačném případě použijte "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="ceda0-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="ceda0-138">Tato hodnota se liší od hello název hostitele virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="ceda0-138">This value is different from hello VM host name.</span></span>|
  |<span data-ttu-id="ceda0-139">**Cesta**</span><span class="sxs-lookup"><span data-stu-id="ceda0-139">**Path**</span></span>|<span data-ttu-id="ceda0-140">/ nebo jiné cesty</span><span class="sxs-lookup"><span data-stu-id="ceda0-140">/ or another path</span></span>|<span data-ttu-id="ceda0-141">Hello zbytek hello úplnou adresu url pro vlastní test paměti hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-141">hello remainder of hello full url for hello custom probe.</span></span> <span data-ttu-id="ceda0-142">Platná cesta začíná '/'.</span><span class="sxs-lookup"><span data-stu-id="ceda0-142">A valid path starts with '/'.</span></span> <span data-ttu-id="ceda0-143">Na výchozí cestu hello http://contoso.com stačí použít '/'</span><span class="sxs-lookup"><span data-stu-id="ceda0-143">For hello default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="ceda0-144">**Interval (sekundy)**</span><span class="sxs-lookup"><span data-stu-id="ceda0-144">**Interval (secs)**</span></span>|<span data-ttu-id="ceda0-145">30</span><span class="sxs-lookup"><span data-stu-id="ceda0-145">30</span></span>|<span data-ttu-id="ceda0-146">Jak často hello test běží toocheck pro stavu.</span><span class="sxs-lookup"><span data-stu-id="ceda0-146">How often hello probe is run toocheck for health.</span></span> <span data-ttu-id="ceda0-147">Není doporučeno tooset hello nižší než 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="ceda0-147">It is not recommended tooset hello lower than 30 seconds.</span></span>|
  |<span data-ttu-id="ceda0-148">**Časový limit (sekundy)**</span><span class="sxs-lookup"><span data-stu-id="ceda0-148">**Timeout (secs)**</span></span>|<span data-ttu-id="ceda0-149">30</span><span class="sxs-lookup"><span data-stu-id="ceda0-149">30</span></span>|<span data-ttu-id="ceda0-150">Hello množství času hello testu čeká, než vyprší časový limit. Hello časový limit intervalu potřebám toobe dostatečně vysoký, že volání protokolu http můžete provedeny tooensure hello back-end stavu stránka je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="ceda0-150">hello amount of time hello probe waits before timing out. hello timeout interval needs toobe high enough that an http call can be made tooensure hello backend health page is available.</span></span>|
  |<span data-ttu-id="ceda0-151">**Prahová hodnota špatného stavu**</span><span class="sxs-lookup"><span data-stu-id="ceda0-151">**Unhealthy threshold**</span></span>|<span data-ttu-id="ceda0-152">3</span><span class="sxs-lookup"><span data-stu-id="ceda0-152">3</span></span>|<span data-ttu-id="ceda0-153">Počet nezdařených pokusů o toobe považoval za poškozený.</span><span class="sxs-lookup"><span data-stu-id="ceda0-153">Number of failed attempts toobe considered unhealthy.</span></span> <span data-ttu-id="ceda0-154">Prahová hodnota 0 znamená, že pokud se nezdaří Kontrola stavu hello back-end je určen okamžitě není v pořádku.</span><span class="sxs-lookup"><span data-stu-id="ceda0-154">A threshold of 0 means that if a health check fails hello back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="ceda0-155">název hostitele Hello není hello stejný jako název serveru.</span><span class="sxs-lookup"><span data-stu-id="ceda0-155">hello host name is not hello same as server name.</span></span> <span data-ttu-id="ceda0-156">Tato hodnota je hello název virtuálního hostitele hello běží na serveru aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-156">This value is hello name of hello virtual host running on hello application server.</span></span> <span data-ttu-id="ceda0-157">Test Hello je odeslán toohttp: / /(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="ceda0-157">hello probe is sent toohttp://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-toohello-gateway"></a><span data-ttu-id="ceda0-158">Přidání brány toohello testu</span><span class="sxs-lookup"><span data-stu-id="ceda0-158">Add probe toohello gateway</span></span>

<span data-ttu-id="ceda0-159">Teď, když hello test byl vytvořen, je čas tooadd ho toohello brány.</span><span class="sxs-lookup"><span data-stu-id="ceda0-159">Now that hello probe has been created, it is time tooadd it toohello gateway.</span></span> <span data-ttu-id="ceda0-160">Test nastavení je nastaveno na nastavení http back-end hello hello aplikační brány.</span><span class="sxs-lookup"><span data-stu-id="ceda0-160">Probe settings are set on hello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="ceda0-161">Klikněte na tlačítko **nastavení HTTP** ve hello application gateway, toobring až hello konfigurace okna klikněte na tlačítko hello aktuální back-end http nastavení uvedené v okně hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-161">Click **HTTP settings** on hello application gateway, toobring up hello configuration blade click hello current backend http settings listed in hello window.</span></span>

  ![okno nastavení protokolu HTTPS][2]

1. <span data-ttu-id="ceda0-163">Na hello **appGatewayBackEndHttpSettings** okno nastavení, zkontrolujte hello **použití vlastní test paměti** zaškrtávací políčko a zvolte hello testu vytvořené v hello [vytvořit hello testu](#createprobe) části na hello **vlastní test** rozevíracího seznamu...</span><span class="sxs-lookup"><span data-stu-id="ceda0-163">On hello **appGatewayBackEndHttpSettings** settings blade, check hello **Use custom probe** checkbox and choose hello probe created in hello [Create hello probe](#createprobe) section on hello **Custom probe** drop-down..</span></span>
<span data-ttu-id="ceda0-164">Po dokončení klikněte na tlačítko **Uložit** a hello nastavení se použijí.</span><span class="sxs-lookup"><span data-stu-id="ceda0-164">When complete, click **Save** and hello settings are applied.</span></span>

<span data-ttu-id="ceda0-165">Hello výchozí kontroly kontroluje hello výchozí přístup toohello webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="ceda0-165">hello default probe checks hello default access toohello web application.</span></span> <span data-ttu-id="ceda0-166">Teď, když byla vytvořena vlastní test paměti, brána aplikace hello používá hello vlastní cestu definovanou toomonitor stavu pro hello back-end serverů.</span><span class="sxs-lookup"><span data-stu-id="ceda0-166">Now that a custom probe has been created, hello application gateway uses hello custom path defined toomonitor health for hello backend servers.</span></span> <span data-ttu-id="ceda0-167">Podle hello kritéria, která byla definována, hello aplikační brány ověří hello cesta zadaná v testu hello.</span><span class="sxs-lookup"><span data-stu-id="ceda0-167">Based on hello criteria that was defined, hello application gateway checks hello path specified in hello probe.</span></span> <span data-ttu-id="ceda0-168">Pokud hello volání toohost:Port / cesta nevrací HTTP 200 399 stav odpovědi, hello server se dostala mimo otočení po dosažení hello prahová hodnota špatného stavu.</span><span class="sxs-lookup"><span data-stu-id="ceda0-168">If hello call toohost:Port/path does not return an HTTP 200-399 status response, hello server is taken out of rotation after hello unhealthy threshold is reached.</span></span> <span data-ttu-id="ceda0-169">Zjišťování bude pokračovat na toodetermine hello instance není v pořádku, když se stane znovu v pořádku.</span><span class="sxs-lookup"><span data-stu-id="ceda0-169">Probing continues on hello unhealthy instance toodetermine when it becomes healthy again.</span></span> <span data-ttu-id="ceda0-170">Po přidání fondu serverů back toohealthy hello instance provoz začne znovu průchodu tooit a testování toohello instance pokračuje v zadaném intervalu uživatele jako normální.</span><span class="sxs-lookup"><span data-stu-id="ceda0-170">Once hello instance is added back toohealthy server pool, traffic begins flowing tooit again and probing toohello instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ceda0-171">Další kroky</span><span class="sxs-lookup"><span data-stu-id="ceda0-171">Next steps</span></span>

<span data-ttu-id="ceda0-172">jak tooconfigure s Azure Application Gateway, snižování zátěže protokolu SSL najdete v části toolearn [konfigurovat přesměrování zpracování SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="ceda0-172">toolearn how tooconfigure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

