---
title: aaaAuthentication a autorizace API Apps v Azure App Service | Microsoft Docs
description: "Další informace o hello ověřování a autorizace služby, které poskytuje Azure App Service API Apps."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="bb5f5-103">Ověřování a autorizace API Apps v Azure App Service</span><span class="sxs-lookup"><span data-stu-id="bb5f5-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="bb5f5-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="bb5f5-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="bb5f5-105">Toto téma bude migrované tooa konsolidovat [aplikace služby ověřování / autorizace](../app-service/app-service-authentication-overview.md) téma, které obsahuje webové, mobilní a aplikace API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="bb5f5-106">Aplikační služba Azure nabízí integrované ověřování a autorizace služby, které implementují [OAuth 2.0](#oauth) a [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="bb5f5-107">Tento článek popisuje hello služeb a možnosti, které jsou k dispozici pro API Apps v Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="bb5f5-108">Hello následující diagram znázorňuje některé klíčové vlastnosti ověřování služby App Service:</span><span class="sxs-lookup"><span data-stu-id="bb5f5-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="bb5f5-109">Se upraví příchozích žádostí o rozhraní API, což znamená, že funguje s libovolném jazyce nebo rozhraní podporované službou App Service.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="bb5f5-110">Nabízí, které mají několik možností, kolik ověřování můžete použít toodo v kódu.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="bb5f5-111">Funguje pro koncové uživatele a ověřování účtu služby.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="bb5f5-112">Podporuje pět poskytovatelů identit: Azure Active Directory, Facebook, Google, Twitter a Account Microsoft.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="bb5f5-113">Ho hello stejné funguje pro aplikace API, webové aplikace a mobilní aplikace.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="bb5f5-114">Bez ohledu na jazyk</span><span class="sxs-lookup"><span data-stu-id="bb5f5-114">Language agnostic</span></span>
<span data-ttu-id="bb5f5-115">Zpracování ověřování služby App Service se stane, než požadavky spojit aplikace API, což znamená, že funkce ověřování hello fungovat pro aplikace API, které jsou napsané v libovolném jazyce nebo rozhraní.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="bb5f5-116">Rozhraní API může být založen na technologii ASP.NET, Java, Node.js nebo libovolnou architekturu, který podporuje služby App Service.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="bb5f5-117">Předá služby App Service na hello JSON web token (JWT) v hello autorizační hlavičky požadavku HTTP a kód napsaný v libovolném jazyce nebo rozhraní můžete získat hello informace, které je nutné z hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="bb5f5-118">Kromě toho služby App Service umožňuje snazší přístup toohello nejčastěji používaná deklarací nastavením některé speciální hlavičky, jako je například hello následující:</span><span class="sxs-lookup"><span data-stu-id="bb5f5-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="bb5f5-119">X-MS-KLIENTA HLAVNÍ NÁZEV</span><span class="sxs-lookup"><span data-stu-id="bb5f5-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="bb5f5-120">X-MS-CLIENT-HLAVNÍ ID</span><span class="sxs-lookup"><span data-stu-id="bb5f5-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="bb5f5-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="bb5f5-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="bb5f5-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="bb5f5-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="bb5f5-123">V rozhraní .NET API, můžete použít hello `Authorize` atribut a pro jemně odstupňovaných autorizace můžete napsat snadno kódu na základě deklarace identity, protože informace deklarace identity se importují pro vás v rozhraní .NET třídy.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="bb5f5-124">Více možností ochrany</span><span class="sxs-lookup"><span data-stu-id="bb5f5-124">Multiple protection options</span></span>
<span data-ttu-id="bb5f5-125">Služby App Service může zabránit anonymních požadavků protokolu HTTP v dosažení aplikace API, můžete předat na všechny požadavky a ověřovat tokeny pro požadavky, které je obsahují, nebo ji nechat přes všechny požadavky bez provedení akce na ně:</span><span class="sxs-lookup"><span data-stu-id="bb5f5-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="bb5f5-126">Povolit pouze ověřené žádosti tooreach aplikace API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="bb5f5-127">Pokud byl přijat požadavek na anonymní z prohlížeče služby App Service přesměruje tooa přihlašovací stránku hello zprostředkovatele ověřování (Azure AD, Google, Twitter, atd.), které zvolíte.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="bb5f5-128">Tato možnost není nutné toowrite žádné ověřovací kód vůbec ve vaší aplikaci a autorizační kód je jednodušší, protože hello nejdůležitější deklarace identity jsou uvedeny v záhlaví hello HTTP.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="bb5f5-129">Povolit všechny tooreach požadavků vaší aplikace API, ale ověření ověřené žádosti a předávají informace o ověřování v hlavičkách hello HTTP.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="bb5f5-130">Tato možnost vám dává větší flexibilitu při zpracování anonymních požadavků, ale máte toowrite kódu, pokud chcete, aby anonymní uživatelé tooprevent pomocí rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="bb5f5-131">Vzhledem k tomu, že hello nejoblíbenější deklarace identity se předávají v hello hlaviček požadavků HTTP, je relativně jednoduché autorizační kód.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="bb5f5-132">Povolit všechny požadavky tooreach vaše rozhraní API, provádět žádnou akci na informace o ověřování v žádostech o hello.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="bb5f5-133">Tato možnost zanechává hello úlohy ověřování a autorizace zcela až tooyour kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="bb5f5-134">V hello [portál Azure](https://portal.azure.com/), vyberte možnost hello, kterou chcete na hello **ověřování / autorizace** okno.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="bb5f5-135">Možnosti 1 a 2, zapnout **ověřování služby aplikace**a v hello **tootake akce, když požadavek nebude ověřený** rozevíracího seznamu vyberte **přihlásit** nebo **Povolit požadavku (žádná akce)**.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="bb5f5-136">Pokud se rozhodnete **přihlásit**, máte toochoose zprostředkovatele ověřování a konfiguraci tohoto zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="bb5f5-137">Podrobné informace o ověřování tooconfigure, najdete v části [jak tooconfigure přihlášení vaší služby App Service toouse aplikace Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="bb5f5-138">Hello článek se týká tooAPI aplikace a také mobilní aplikace, a propojí tooother články pro hello dalších zprostředkovatelů ověření.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="bb5f5-139"><a id="internal"></a>Ověřování účtu služby</span><span class="sxs-lookup"><span data-stu-id="bb5f5-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="bb5f5-140">Ověřování služby App Service funguje pro interní scénáře, jako pro volání z jedné aplikace tooanother rozhraní API aplikace API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="bb5f5-141">V tomto scénáři můžete získat token pomocí přihlašovacích údajů pro účet služby místo přihlašovacích údajů koncového uživatele.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="bb5f5-142">Je také označován jako účet služby *instanční objekt* v Azure Active Directory a ověřování pomocí uvedený účet je také označován jako scénáři service-to-service.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="bb5f5-143">Pro scénáře service-to-service chránit hello volá aplikaci API pomocí Azure Active Directory a poskytovat služby hlavní autorizační token AAD při volání aplikace hello rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="bb5f5-144">Získat token zadáním hello ID klienta a klient tajný z hello AAD aplikace.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="bb5f5-145">Žádné speciální jen Azure kód je povinné, například využité toobe hodnotu true pro zpracování tokenu hello záhlaví Zumo Mobile Services.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="bb5f5-146">Příklad tohoto scénáře použití aplikací rozhraní API technologie ASP.NET je popsaná v kurzu hello [objekt zabezpečení ověřování služby pro aplikace API](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="bb5f5-147">Pokud chcete toohandle scénáři service-to-service bez použití ověřování služby App Service, můžete použít klientské certifikáty nebo základní ověřování.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="bb5f5-148">Informace o klientské certifikáty v Azure najdete v tématu [jak tooConfigure vzájemné ověřování TLS pro webové aplikace](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="bb5f5-149">Informace o základní ověřování v technologii ASP.NET najdete v tématu [filtry ověřování ve webovém rozhraní API 2 ASP.NET](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="bb5f5-150">Ověřování účtu služby z aplikace služby App Service logic app tooan rozhraní API je zvláštní případ, která je vysvětlená v [používání vlastního rozhraní API hostovaného v App Service pomocí aplikací logiky](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="bb5f5-151">Ověření mobilního klienta</span><span class="sxs-lookup"><span data-stu-id="bb5f5-151">Mobile client authentication</span></span>
<span data-ttu-id="bb5f5-152">Informace o ověřování toohandle z mobilních klientů, najdete v části hello [dokumentaci o ověřování pro mobilní aplikace](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="bb5f5-153">Ověřování služby App Service funguje hello stejným způsobem jako pro mobilní aplikace a aplikace API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="bb5f5-154">Další informace</span><span class="sxs-lookup"><span data-stu-id="bb5f5-154">More information</span></span>
<span data-ttu-id="bb5f5-155">Další informace o ověřování a autorizace ve službě Azure App Service najdete v tématu hello následující prostředky:</span><span class="sxs-lookup"><span data-stu-id="bb5f5-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="bb5f5-156">Se zvětšující služby App Service ověřování / autorizace</span><span class="sxs-lookup"><span data-stu-id="bb5f5-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="bb5f5-157">[Jak tooconfigure přihlášení vaší služby App Service toouse aplikace Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (obsahuje odkazy pro ostatní zprostředkovatelé ověřování v horní části hello hello stránky.)</span><span class="sxs-lookup"><span data-stu-id="bb5f5-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="bb5f5-158">Další informace o protokolu OAuth 2.0, OpenID Connect a webové tokeny JSON (JWT) najdete v tématu hello následující prostředky.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="bb5f5-159">Začínáme s OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="bb5f5-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "Začínáme s OAuth 2.0") 
* [<span data-ttu-id="bb5f5-160">Úvod tooOAuth2, OpenID Connect a JSON webové tokeny (JWT) - Pluralsight kurzu</span><span class="sxs-lookup"><span data-stu-id="bb5f5-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="bb5f5-161">Vytváření a zabezpečení rozhraní RESTful API pro více klientů v technologii ASP.NET - Pluralsight kurzu</span><span class="sxs-lookup"><span data-stu-id="bb5f5-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="bb5f5-162">Další informace o službě Azure Active Directory najdete v tématu hello následující prostředky.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="bb5f5-163">Scénáře služby Azure AD</span><span class="sxs-lookup"><span data-stu-id="bb5f5-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="bb5f5-164">Průvodce Azure AD vývojářům</span><span class="sxs-lookup"><span data-stu-id="bb5f5-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="bb5f5-165">Ukázek Azure AD</span><span class="sxs-lookup"><span data-stu-id="bb5f5-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="bb5f5-166">Další kroky</span><span class="sxs-lookup"><span data-stu-id="bb5f5-166">Next steps</span></span>
<span data-ttu-id="bb5f5-167">Tento článek obsahuje vysvětlení funkce ověřování a autorizace služby App Service, který můžete použít pro aplikace API.</span><span class="sxs-lookup"><span data-stu-id="bb5f5-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="bb5f5-168">Další kurz Hello při získávání hello spuštění řady ukazuje jak tooimplement [ověřování uživatelů v App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="bb5f5-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>

