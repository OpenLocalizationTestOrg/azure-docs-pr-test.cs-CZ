---
title: "plán oprav aaaConfigure operačního systému pro clustery HDInsight se systémem Linux - Azure | Microsoft Docs"
description: "Zjistěte, jak tooconfigure OS oprav plán pro HDInsight se systémem Linux clusterů."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: 1598d64e594d7e8a68573fc63dd86051a5a9d025
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="10010-103">Opravy chyb pro HDInsight operačního systému</span><span class="sxs-lookup"><span data-stu-id="10010-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="10010-104">Služba se spravuje Hadoop HDInsight má na starosti opravy hello OS hello základní virtuální počítače používané clustery HDInsight.</span><span class="sxs-lookup"><span data-stu-id="10010-104">As a managed Hadoop service, HDInsight takes care of patching hello OS of hello underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="10010-105">Od 1. srpna 2016 jsme změnili oprav zásad hello hostovaného operačního systému pro clustery HDInsight se systémem Linux (verze 3.4 nebo novější).</span><span class="sxs-lookup"><span data-stu-id="10010-105">As of August 1, 2016, we have changed hello guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="10010-106">cílem Hello nové zásady hello je toosignificantly snížit hello počet restartování kvůli toopatching.</span><span class="sxs-lookup"><span data-stu-id="10010-106">hello goal of hello new policy is toosignificantly reduce hello number of reboots due toopatching.</span></span> <span data-ttu-id="10010-107">nové zásady Hello bude pokračovat toopatch virtuální počítače (VM) v systému Linux clusterů každé pondělí a čtvrtek začínající na 12: 00 UTC postupný způsobem mezi uzly v jakémkoliv daného clusteru.</span><span class="sxs-lookup"><span data-stu-id="10010-107">hello new policy will continue toopatch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="10010-108">Všechny daného virtuálního počítače se však pouze restartuje maximálně jednou za 30 dní z důvodu opravy tooguest operačního systému.</span><span class="sxs-lookup"><span data-stu-id="10010-108">However, any given VM will only reboot at most once every 30 days due tooguest OS patching.</span></span> <span data-ttu-id="10010-109">Kromě toho hello první restartování pro nově vytvořený cluster neprovede dřív než 30 dní od data vytvoření clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="10010-109">In addition, hello first reboot for a newly created cluster will not happen sooner than 30 days from hello cluster creation date.</span></span> <span data-ttu-id="10010-110">Jakmile hello virtuální počítače se restartují, bude platit opravy.</span><span class="sxs-lookup"><span data-stu-id="10010-110">Patches will be effective once hello VMs are rebooted.</span></span>

## <a name="how-tooconfigure-hello-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="10010-111">Jak tooconfigure hello plánu oprav operačního systému pro clustery HDInsight se systémem Linux</span><span class="sxs-lookup"><span data-stu-id="10010-111">How tooconfigure hello OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="10010-112">třeba Hello virtuální počítače v clusteru služby HDInsight toobe příležitostně restartovat, aby se opravy důležité zabezpečení můžete nainstalovat.</span><span class="sxs-lookup"><span data-stu-id="10010-112">hello virtual machines in an HDInsight cluster need toobe rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="10010-113">Od 1. srpna 2016 se restartují nových clusterů HDInsight se systémem Linux (verze 3.4 nebo novější,), pomocí následujících plán hello:</span><span class="sxs-lookup"><span data-stu-id="10010-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using hello following schedule:</span></span>

1. <span data-ttu-id="10010-114">Virtuální počítač v clusteru hello můžete pouze po restartování počítače opravy maximálně jednou v období 30 dnů.</span><span class="sxs-lookup"><span data-stu-id="10010-114">A virtual machine in hello cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="10010-115">Hello restartování nastane začínající UTC 12: 00.</span><span class="sxs-lookup"><span data-stu-id="10010-115">hello reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="10010-116">Hello restartování procesu rozložena mezi virtuální počítače v clusteru hello, takže hello clusteru je stále k dispozici během procesu restartování hello.</span><span class="sxs-lookup"><span data-stu-id="10010-116">hello reboot process is staggered across virtual machines in hello cluster, so hello cluster is still available during hello reboot process.</span></span>
4. <span data-ttu-id="10010-117">Hello první restartování pro nově vytvořený cluster neprovede dřív než 30 dní od data vytvoření clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="10010-117">hello first reboot for a newly created cluster will not happen sooner than 30 days after hello cluster creation date.</span></span>

<span data-ttu-id="10010-118">Pomocí akce skriptu hello popsané v tomto článku, můžete upravit plán oprav hello OS následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="10010-118">Using hello script action described in this article, you can modify hello OS patching schedule as follows:</span></span>
1. <span data-ttu-id="10010-119">Povolit nebo zakázat automatické restartování počítače</span><span class="sxs-lookup"><span data-stu-id="10010-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="10010-120">Frekvence hello sadu restartuje (ve dnech mezi jednotlivými restartováními)</span><span class="sxs-lookup"><span data-stu-id="10010-120">Set hello frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="10010-121">Nastavit hello den týdnu hello, pokud dojde k restartu</span><span class="sxs-lookup"><span data-stu-id="10010-121">Set hello day of hello week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="10010-122">Tato akce skriptu budou fungovat jenom s clustery HDInsight se systémem Linux, které jsou vytvořené po 1. srpna 2016.</span><span class="sxs-lookup"><span data-stu-id="10010-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="10010-123">Opravy bude platit pouze v případě, že jsou virtuální počítače restartovat.</span><span class="sxs-lookup"><span data-stu-id="10010-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-toouse-hello-script"></a><span data-ttu-id="10010-124">Jak toouse hello skriptu</span><span class="sxs-lookup"><span data-stu-id="10010-124">How toouse hello script</span></span> 

<span data-ttu-id="10010-125">Při použití tohoto skriptu vyžaduje hello následující informace:</span><span class="sxs-lookup"><span data-stu-id="10010-125">When using this script requires hello following information:</span></span>
1. <span data-ttu-id="10010-126">Hello umístění skriptu: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight používá tento identifikátor URI toofind a spusťte skript hello na všechny hello virtuální počítače v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="10010-126">hello script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight uses this URI toofind and run hello script on all hello virtual machines in hello cluster.</span></span>
  
2. <span data-ttu-id="10010-127">Hello typy uzlů clusteru, použité hello skriptu: headnode, workernode, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="10010-127">hello cluster node types that hello script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="10010-128">Tento skript musí být použité tooall typy uzlů v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="10010-128">This script must be applied tooall node types in hello cluster.</span></span> <span data-ttu-id="10010-129">Pokud není typ uzlu použité tooa pak hello virtuálních počítačů pro daný typ uzlu bude toouse hello předchozí oprav plán.</span><span class="sxs-lookup"><span data-stu-id="10010-129">If it is not applied tooa node type, then hello virtual machines for that node type will continue toouse hello previous patching schedule.</span></span>


3.  <span data-ttu-id="10010-130">Parametr: Tento skript přijímá tři číselné parametry:</span><span class="sxs-lookup"><span data-stu-id="10010-130">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="10010-131">Parametr</span><span class="sxs-lookup"><span data-stu-id="10010-131">Parameter</span></span> | <span data-ttu-id="10010-132">Definice</span><span class="sxs-lookup"><span data-stu-id="10010-132">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="10010-133">Povolit nebo zakázat automatické restartování počítače</span><span class="sxs-lookup"><span data-stu-id="10010-133">Enable/disable automatic reboots</span></span> |<span data-ttu-id="10010-134">0 nebo 1.</span><span class="sxs-lookup"><span data-stu-id="10010-134">0 or 1.</span></span> <span data-ttu-id="10010-135">Hodnota 0 zakáže automatické restartování počítače během 1 povolí automatické restartování počítače.</span><span class="sxs-lookup"><span data-stu-id="10010-135">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="10010-136">frekvence</span><span class="sxs-lookup"><span data-stu-id="10010-136">Frequency</span></span> |<span data-ttu-id="10010-137">7 too90 (včetně).</span><span class="sxs-lookup"><span data-stu-id="10010-137">7 too90 (inclusive).</span></span> <span data-ttu-id="10010-138">Hello počet dní toowait před restartování hello virtuálních počítačů pro opravy, které vyžadují restart počítače.</span><span class="sxs-lookup"><span data-stu-id="10010-138">hello number of days toowait before rebooting hello virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="10010-139">Den v týdnu</span><span class="sxs-lookup"><span data-stu-id="10010-139">Day of week</span></span> |<span data-ttu-id="10010-140">1 too7 (včetně).</span><span class="sxs-lookup"><span data-stu-id="10010-140">1 too7 (inclusive).</span></span> <span data-ttu-id="10010-141">Hodnota 1 znamená hello restartování provedeno v pondělí a 7 označuje Sunday.For příklad, pomocí parametrů 1 60 2 výsledky v automaticky restartuje každých 60 dnů (maximálně) úterý.</span><span class="sxs-lookup"><span data-stu-id="10010-141">A value of 1 indicates hello reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="10010-142">Trvalost</span><span class="sxs-lookup"><span data-stu-id="10010-142">Persistence</span></span> |<span data-ttu-id="10010-143">Při použití existující cluster skript akce tooan, můžete označit hello skriptu jako trvalé.</span><span class="sxs-lookup"><span data-stu-id="10010-143">When applying a script action tooan existing cluster, you can mark hello script as persisted.</span></span> <span data-ttu-id="10010-144">Trvalý skripty se používají při přidání nové workernodes toohello clusteru prostřednictvím operace škálování.</span><span class="sxs-lookup"><span data-stu-id="10010-144">Persisted scripts are applied when new workernodes are added toohello cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="10010-145">Tento skript je třeba označit jako trvalý při použití tooan existujícího clusteru.</span><span class="sxs-lookup"><span data-stu-id="10010-145">You must mark this script as persisted when applying tooan existing cluster.</span></span> <span data-ttu-id="10010-146">Všechny nové uzly, které jsou vytvořené pomocí operace škálování, jinak hodnota použije výchozí hello opravy plán.</span><span class="sxs-lookup"><span data-stu-id="10010-146">Otherwise, any new nodes created through scaling      operations will use hello default patching schedule.</span></span>
<span data-ttu-id="10010-147">Pokud použijete hello skript jako součást procesu vytváření clusteru hello, je automaticky trvalá.</span><span class="sxs-lookup"><span data-stu-id="10010-147">If you apply hello script as part of hello cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="10010-148">Další kroky</span><span class="sxs-lookup"><span data-stu-id="10010-148">Next steps</span></span>

<span data-ttu-id="10010-149">Konkrétní kroky pomocí akce skriptu hello, naleznete v následujících částech hello hello [HDInsight se systémem Linuz přizpůsobit clustery pomocí akce skriptu](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="10010-149">For specific steps on using hello script action, see hello following sections in hello [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="10010-150">Použití akce skriptu při vytváření clusteru</span><span class="sxs-lookup"><span data-stu-id="10010-150">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="10010-151">Použít tooa akce skriptu spuštění clusteru</span><span class="sxs-lookup"><span data-stu-id="10010-151">Apply a script action tooa running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
