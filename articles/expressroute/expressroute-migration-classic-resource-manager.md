---
title: "Migrace z classic tooResource Manager ExpressRoute přidružené virtuální sítě: Azure: prostředí PowerShell | Microsoft Docs"
description: "Tato stránka popisuje, jak toomigrate přidružené virtuální sítě tooResource Manager po přesunutí okruhu."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="3c22d-103">Migrace z classic tooResource Manager ExpressRoute přidružené virtuální sítě</span><span class="sxs-lookup"><span data-stu-id="3c22d-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="3c22d-104">Tento článek vysvětluje, jak toomigrate Azure ExpressRoute přidružené virtuální sítě z modelu nasazení classic hello, toohello modelu nasazení Azure Resource Manager po přesunutí okruhu ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3c22d-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="3c22d-105">Než začnete</span><span class="sxs-lookup"><span data-stu-id="3c22d-105">Before you begin</span></span>
* <span data-ttu-id="3c22d-106">Ověřte, zda máte nejnovější verzi modulů prostředí Azure PowerShell hello hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="3c22d-107">Další informace najdete v tématu [jak tooinstall a konfigurace prostředí Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="3c22d-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="3c22d-108">Ujistěte se, že jste si přečetli hello [požadavky](expressroute-prerequisites.md), [požadavky na směrování](expressroute-routing.md), a [pracovních](expressroute-workflows.md) před zahájením konfigurace.</span><span class="sxs-lookup"><span data-stu-id="3c22d-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="3c22d-109">Zkontrolujte hello informace jsou poskytovány na základě [přesun okruhu ExpressRoute z classic tooResource Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="3c22d-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="3c22d-110">Ujistěte se, že rozumíte plně hello limity a omezení.</span><span class="sxs-lookup"><span data-stu-id="3c22d-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="3c22d-111">Ověřte, že hello okruh v modelu nasazení classic hello plně funkční.</span><span class="sxs-lookup"><span data-stu-id="3c22d-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="3c22d-112">Ujistěte se, že máte skupinu prostředků, který byl vytvořen v modelu nasazení Resource Manager hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="3c22d-113">Projděte si následující dokumentace k migraci prostředků hello:</span><span class="sxs-lookup"><span data-stu-id="3c22d-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="3c22d-114">Podporované platformy migrace prostředky infrastruktury z classic tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="3c22d-115">Technické podrobné informace o platformy podporované migrace z klasického tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="3c22d-116">Nejčastější dotazy: Migrace podporované platformy IaaS prostředků z classic tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="3c22d-117">Zkontrolujte nejběžnějších chyb, migrace a jejich zmírnění</span><span class="sxs-lookup"><span data-stu-id="3c22d-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="3c22d-118">Podporované a nepodporované scénáře</span><span class="sxs-lookup"><span data-stu-id="3c22d-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="3c22d-119">Z prostředí Resource Manager classic toohello hello bez odstávky můžete přesunout okruh ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3c22d-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="3c22d-120">Jakýkoli okruh ExpressRoute můžete přesunout z hello classic toohello Resource Manager prostředí bez výpadků.</span><span class="sxs-lookup"><span data-stu-id="3c22d-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="3c22d-121">Postupujte podle pokynů hello v [přesun okruhů ExpressRoute z hello toohello klasického modelu nasazení Resource Manager pomocí prostředí PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="3c22d-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="3c22d-122">Toto je virtuální sítě připojený toohello požadovaných toomove prostředky.</span><span class="sxs-lookup"><span data-stu-id="3c22d-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="3c22d-123">Virtuální sítě, bran a přidružené nasazení v rámci hello virtuální sítě, které jsou připojené tooan okruh ExpressRoute v hello, který může být stejné předplatné migrovat toohello Resource Manager prostředí bez odstávky.</span><span class="sxs-lookup"><span data-stu-id="3c22d-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="3c22d-124">Můžete postupovat podle hello kroky popsané novější toomigrate prostředkům, například virtuální sítě, bran a virtuálních počítačů nasazených v rámci virtuální sítě hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="3c22d-125">Je nutné zajistit, že hello virtuální sítě jsou správně nakonfigurovaná, před jejich migrací.</span><span class="sxs-lookup"><span data-stu-id="3c22d-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="3c22d-126">Virtuální sítě, bran a související nasazení v rámci hello virtuální sítě, které nejsou v hello stejného předplatného jako hello okruh ExpressRoute, vyžadují některé výpadek toocomplete hello migraci.</span><span class="sxs-lookup"><span data-stu-id="3c22d-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="3c22d-127">poslední část Hello hello dokumentu popisuje prostředky toomigrate toobe postupovali podle kroků hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="3c22d-128">Nelze migrovat virtuální síť s bránu ExpressRoute i bránu VPN.</span><span class="sxs-lookup"><span data-stu-id="3c22d-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="3c22d-129">Přesun okruhu ExpressRoute z classic tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="3c22d-130">Je třeba přesunout, že okruhu ExpressRoute z hello classic toohello prostředí správce prostředků, než se pokusíte toomigrate prostředky, které jsou připojené toohello okruh ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3c22d-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="3c22d-131">tooaccomplish to úloh, najdete v části hello následující články:</span><span class="sxs-lookup"><span data-stu-id="3c22d-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="3c22d-132">Zkontrolujte hello informace jsou poskytovány na základě [přesun okruhu ExpressRoute z classic tooResource Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="3c22d-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="3c22d-133">[Přesun okruhu z classic tooResource Manager pomocí Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="3c22d-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="3c22d-134">Pomocí portálu Azure Service Management hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="3c22d-135">Můžete postupovat podle pracovního postupu hello příliš[vytvořit nové okruh ExpressRoute](expressroute-howto-circuit-portal-resource-manager.md) a zvolte možnost importovat hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="3c22d-136">Tato operace nezahrnuje výpadku.</span><span class="sxs-lookup"><span data-stu-id="3c22d-136">This operation does not involve downtime.</span></span> <span data-ttu-id="3c22d-137">Tootransfer dat mezi místním a společnosti Microsoft můžete pokračovat, zatímco probíhá migrace hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="3c22d-138">Migrovat virtuální sítě, bran a související nasazení</span><span class="sxs-lookup"><span data-stu-id="3c22d-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="3c22d-139">Hello kroky podle toomigrate závisí na tom, jestli vaše prostředky jsou v hello stejného předplatného, různých předplatných nebo obojí.</span><span class="sxs-lookup"><span data-stu-id="3c22d-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="3c22d-140">Migrujte virtuální sítě, brány, a související nasazení v hello stejného předplatného jako hello okruh ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="3c22d-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="3c22d-141">Tato část popisuje toomigrate toobe postupovali podle kroků hello virtuální sítě, bránu a přidružené nasazení v hello stejného předplatného jako hello okruh ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3c22d-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="3c22d-142">Odstávka je přidružen k této migrace.</span><span class="sxs-lookup"><span data-stu-id="3c22d-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="3c22d-143">Můžete dál toouse všechny prostředky procesem migrace hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="3c22d-144">Hello správu roviny uzamčeno, když probíhá migrace hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="3c22d-145">Ujistěte se, že okruh ExpressRoute hello přesunula z prostředí Resource Manager classic toohello hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="3c22d-146">Zajistěte, aby že správně připraven hello virtuální síti pro migraci hello.</span><span class="sxs-lookup"><span data-stu-id="3c22d-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="3c22d-147">Registrace předplatného pro migraci prostředků.</span><span class="sxs-lookup"><span data-stu-id="3c22d-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="3c22d-148">tooregister vaše předplatné pro migraci prostředků, použijte hello následující fragment kódu prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="3c22d-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="3c22d-149">Ověření, přípravě a migrovat.</span><span class="sxs-lookup"><span data-stu-id="3c22d-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="3c22d-150">toomove hello virtuální síť, použijte hello následující fragment kódu prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="3c22d-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="3c22d-151">Migrace může přerušit také spuštěním následující rutiny prostředí PowerShell hello:</span><span class="sxs-lookup"><span data-stu-id="3c22d-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="3c22d-152">Další kroky</span><span class="sxs-lookup"><span data-stu-id="3c22d-152">Next steps</span></span>
* [<span data-ttu-id="3c22d-153">Podporované platformy migrace prostředky infrastruktury z classic tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="3c22d-154">Technické podrobné informace o platformy podporované migrace z klasického tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="3c22d-155">Nejčastější dotazy: Migrace podporované platformy IaaS prostředků z classic tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3c22d-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="3c22d-156">Zkontrolujte nejběžnějších chyb, migrace a jejich zmírnění</span><span class="sxs-lookup"><span data-stu-id="3c22d-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
