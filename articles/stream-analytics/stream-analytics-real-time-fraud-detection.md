# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="a9e1f-101">Začněte používat Azure Stream Analytics: odhalování podvodů v reálném čase</span><span class="sxs-lookup"><span data-stu-id="a9e1f-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="a9e1f-102">V tomto kurzu poskytuje začátku do konce obrázek o tom, jak používat Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-102">This tutorial provides an end-to-end illustration of how to use Azure Stream Analytics.</span></span> <span data-ttu-id="a9e1f-103">Získáte informace o těchto tématech:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-103">You learn how to:</span></span> 

* <span data-ttu-id="a9e1f-104">Přepněte do instance služby Azure Event Hubs vysílání datových proudů.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="a9e1f-105">V tomto kurzu budete používat aplikaci, která poskytujeme která simuluje proud záznamů metadat mobilního telefonu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="a9e1f-106">Psát dotazy podobné jazyku SQL Stream Analytics k transformaci dat, agregace informací o nebo hledáte vzory.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-106">Write SQL-like Stream Analytics queries to transform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="a9e1f-107">Zobrazí se k ověření příchozího datového proudu a vyhledejte volání, které mohou být podvodné použití dotazu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-107">You will see how to use a query to examine the incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="a9e1f-108">Odešlou výsledky do výstupní jímku (úložiště), abyste mohli analyzovat další statistiky.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-108">Send the results to an output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="a9e1f-109">V takovém případě budete odesílat data podezřelé volání do úložiště objektů Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-109">In this case, you'll send the suspicious call data to Azure Blob storage.</span></span>

<span data-ttu-id="a9e1f-110">V tomto kurzu používáme v příkladu odhalování podvodů v reálném čase, které jsou na základě dat telefonního hovoru.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-110">In  this tutorial, we use the example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="a9e1f-111">Ale technik, které jsme ilustrují vhodná taky pro jiné typy odhalování podvodů, jako je krádež platební karty podvodu nebo identity.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-111">But the technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="a9e1f-112">Scénář: Telecommunications a SIM odhalování podvodů v reálném čase</span><span class="sxs-lookup"><span data-stu-id="a9e1f-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="a9e1f-113">Společnost telecommunications má velký objem dat pro příchozí volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="a9e1f-114">Společnost chce k rozpoznání podvodné volání v reálném čase, tak, aby oznámit zákazníků nebo vypnout službu pro specifické číslo.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-114">The company wants to detect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="a9e1f-115">Jeden typ SIM podvodů zahrnuje několik volání z stejnou identitu přibližně ve stejnou dobu, ale v geograficky různých umístěních.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-115">One type of SIM fraud involves multiple calls from the same identity around the same time but in geographically different locations.</span></span> <span data-ttu-id="a9e1f-116">Ke zjištění tento typ podvodů, společnost potřebuje ke zkoumání příchozí phone záznamy a vyhledat konkrétní vzory – v takovém případě pro volání provedená v různých zemí přibližně ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-116">To detect this type of fraud, the company needs to examine incoming phone records and look for specific patterns—in this case, for calls made around the same time in different countries.</span></span> <span data-ttu-id="a9e1f-117">Všechny záznamy phone, které do této kategorie patří se zapisují do úložiště pro další analýzu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-117">Any phone records that fall into this category are written to storage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a9e1f-118">Požadavky</span><span class="sxs-lookup"><span data-stu-id="a9e1f-118">Prerequisites</span></span>

<span data-ttu-id="a9e1f-119">V tomto kurzu budete simulovat telefonní hovor dat pomocí klientskou aplikaci, která generuje ukázka telefonní hovor metadat.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="a9e1f-120">Některé záznamy, které vytváří aplikace vypadat jako podvodné volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-120">Some of the records that the app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="a9e1f-121">Než začnete, ujistěte se, že máte následující:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-121">Before you start, make sure you have the following:</span></span>

* <span data-ttu-id="a9e1f-122">Účet Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-122">An Azure account.</span></span>
* <span data-ttu-id="a9e1f-123">Generátor aplikace události volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-123">The call-event generator app.</span></span> <span data-ttu-id="a9e1f-124">To můžete získat tak, že stáhnete [TelcoGenerator.zip soubor](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) z webu Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-124">You can get this by downloading the [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from the Microsoft Download Center.</span></span> <span data-ttu-id="a9e1f-125">Rozbalte tento balíček do složky v počítači.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="a9e1f-126">Pokud chcete zobrazit zdrojový kód a spusťte aplikaci v ladicí program, můžete získat zdrojovém kódu aplikace z [Githubu](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-126">If you want to see the source code and run the app in a debugger, you can get the app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="a9e1f-127">Windows mohou blokovat soubor stažený .zip.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-127">Windows might block the downloaded .zip file.</span></span> <span data-ttu-id="a9e1f-128">Pokud nelze rozbalte ji, klikněte pravým tlačítkem na soubor a vyberte **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-128">If you can't unzip it, right-click the file and select **Properties**.</span></span> <span data-ttu-id="a9e1f-129">Pokud se zobrazí zpráva "Tento soubor pochází z jiného počítače a mohou být blokovány k ochraně tohoto počítače", vyberte **Odblokovat** a potom klikněte na **použít**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-129">If you see the "This file came from another computer and might be blocked to help protect this computer" message, select the **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="a9e1f-130">Pokud chcete podívejte se na výsledky úlohy streamování Analytics, musíte taky nástroj pro zobrazení obsahu kontejner úložiště objektů Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-130">If you want to examine the results of the Streaming Analytics job, you also need a tool for viewing the contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="a9e1f-131">Pokud používáte Visual Studio, můžete použít [nástroje Azure pro sadu Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) nebo [cloudu Průzkumníka Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="a9e1f-132">Alternativně můžete nainstalovat samostatných nástrojů, jako je například [Azure Storage Explorer](http://storageexplorer.com/) nebo [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-to-ingest-events"></a><span data-ttu-id="a9e1f-133">Vytvoření Azure event hubs pro načítání událostí</span><span class="sxs-lookup"><span data-stu-id="a9e1f-133">Create an Azure event hubs to ingest events</span></span>

<span data-ttu-id="a9e1f-134">Analyzovat datový proud je *ingestování* do Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-134">To analyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="a9e1f-135">Typické způsob pro načítání dat je použití [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), což vám umožní přijímat miliony událostí za sekundu a pak zpracování a ukládání informací o události.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-135">A typical way to ingest data is to use [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store the event information.</span></span> <span data-ttu-id="a9e1f-136">V tomto kurzu vytvoříte centra událostí a pak mít události volání generátor aplikace posílat data volání do tohoto centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-136">For this tutorial, you create an event hub and then have the call-event generator app send call data to that event hub.</span></span> <span data-ttu-id="a9e1f-137">Další informace o službě event hubs naleznete v tématu [dokumentace Azure Service Bus](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-137">For more about event hubs, see the [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="a9e1f-138">Podrobnější verzi tohoto postupu, naleznete v části [vytvořit obor názvů Event Hubs a centra událostí pomocí portálu Azure](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using the Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="a9e1f-139">Vytvořit obor názvů a události rozbočovače</span><span class="sxs-lookup"><span data-stu-id="a9e1f-139">Create a namespace and event hub</span></span>
<span data-ttu-id="a9e1f-140">V tomto postupu nejprve vytvoříte na obor názvů centra událostí a pak přidáte do této namepsace centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-140">In this procedure, you first create an event hub namespace, and then you add an event hub to that namepsace.</span></span> <span data-ttu-id="a9e1f-141">Obory názvů centra událostí se používají k logickému seskupení souvisejících událostí sběrnice instancí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-141">Event hub namespaces are used to logically group related event bus instances.</span></span> 

1. <span data-ttu-id="a9e1f-142">Přihlaste se k portálu Azure a klikněte na tlačítko **nový** > **Internet věcí** > **centra událostí**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-142">Log  into the Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="a9e1f-143">V **vytvoření oboru názvů** okno, zadejte název oboru názvů, jako `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-143">In the **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="a9e1f-144">Můžete použít libovolný název pro obor názvů, ale název musí být platné adresy URL a musí být jedinečný v Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-144">You can use any name for the namespace, but the name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="a9e1f-145">Vyberte předplatné a vytvořit nebo vybrat skupinu prostředků a potom klikněte na tlačítko **vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Vytvoření oboru názvů události rozbočovače](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="a9e1f-147">Po dokončení nasazení obor názvů v seznamu prostředků Azure najdete názvový prostor události rozbočovače.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-147">When the namespace has finished deploying, find the event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="a9e1f-148">Klikněte na tlačítko Nový obor názvů a v okně obor názvů, klikněte na tlačítko  **+ &nbsp;centra událostí**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-148">Click the new namespace, and in the namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="a9e1f-149">Tlačítko Přidat centra událostí pro vytvoření nového centra událostí</span><span class="sxs-lookup"><span data-stu-id="a9e1f-149">The Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="a9e1f-150">Název nového centra událostí `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-150">Name the new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="a9e1f-151">Můžete použít jiný název.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-151">You can use a different name.</span></span> <span data-ttu-id="a9e1f-152">Pokud tak učiníte, poznamenejte si, protože potřebujete název později.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-152">If you do, make a note of it, because you need the name later.</span></span> <span data-ttu-id="a9e1f-153">Nemusíte nyní nastavte další možnosti pro centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-153">You don't need to set any other options for the event hub right now.</span></span>

    ![Okno pro vytvoření nového centra událostí](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="a9e1f-155">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-155">Click **Create**.</span></span>
### <a name="grant-access-to-the-event-hub-and-get-a-connection-string"></a><span data-ttu-id="a9e1f-156">Udělit přístup k Centru událostí a získat připojovací řetězec</span><span class="sxs-lookup"><span data-stu-id="a9e1f-156">Grant access to the event hub and get a connection string</span></span>

<span data-ttu-id="a9e1f-157">Předtím, než se proces může odesílat data do centra událostí, musí mít centra událostí zásadu, která umožňuje odpovídající přístup.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-157">Before a process can send data to an event hub, the event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="a9e1f-158">Zásady přístupu vytvoří připojovací řetězec, který obsahuje informace o ověření.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-158">The access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="a9e1f-159">V okně oboru názvů událostí, klikněte na tlačítko **Event Hubs** a pak klikněte na název vašeho nového centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-159">In the event namespace blade, click **Event Hubs** and then click the name of your new event hub.</span></span>

2.  <span data-ttu-id="a9e1f-160">V okně centra událostí, klikněte na **zásady sdíleného přístupu** a pak klikněte na  **+ &nbsp;přidat**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-160">In the event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="a9e1f-161">Ujistěte se, že pracujete s centrem událostí, není oboru názvů centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-161">Make sure you're working with the event hub, not the event hub namespace.</span></span>

3.  <span data-ttu-id="a9e1f-162">Přidat zásadu s názvem `sa-policy-manage-demo` a **deklarace identity**, vyberte **spravovat**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Okno pro vytvoření nové zásady přístupu centra událostí](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="a9e1f-164">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-164">Click **Create**.</span></span>

5.  <span data-ttu-id="a9e1f-165">Po nasazení zásady, klikněte na něj v seznamu zásady sdíleného přístupu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-165">After the policy has been deployed, click it in the list of shared access policies.</span></span>

6.  <span data-ttu-id="a9e1f-166">Vyhledejte seznam **PŘIPOJOVACÍ řetězec primární klíč** a klikněte na tlačítko Kopírovat vedle připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-166">Find the box labeled **CONNECTION STRING-PRIMARY KEY** and click the copy button next to the connection string.</span></span> 
    
    ![Kopírování klíče primární připojovací řetězec ze zásad přístupu](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="a9e1f-168">Vložte připojovací řetězec do textového editoru.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-168">Paste the connection string into a text editor.</span></span> <span data-ttu-id="a9e1f-169">Tento připojovací řetězec pro další části, musíte po provedení některé malé úpravy.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-169">You need this connection string for the next section, after you make some small edits to it.</span></span>

    <span data-ttu-id="a9e1f-170">Připojovací řetězec vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-170">The connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="a9e1f-171">Všimněte si, že připojovací řetězec obsahuje více párů klíč hodnota oddělené středníky: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, a `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-171">Notice that the connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-the-event-generator-application"></a><span data-ttu-id="a9e1f-172">Nakonfigurujte a spusťte aplikaci generátor událostí</span><span class="sxs-lookup"><span data-stu-id="a9e1f-172">Configure and start the event generator application</span></span>

<span data-ttu-id="a9e1f-173">Než začnete TelcoGenerator aplikace, musíte ho nakonfigurovat tak, aby se budou odesílat záznamy volání do centra událostí, který jste právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-173">Before you start the TelcoGenerator app, you configure it so that it will send call records to the event hub you just created.</span></span>

### <a name="configure-the-telcogeneratorapp"></a><span data-ttu-id="a9e1f-174">Konfigurace TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="a9e1f-174">Configure the TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="a9e1f-175">V editoru, kam jste zkopírovali připojovací řetězec, poznamenejte si `EntityPath` hodnotu a pak odeberte `EntityPath` pár (Nezapomeňte odebrat středník předcházejícího).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-175">In the editor where you copied the connection string, make a note of the `EntityPath` value, and then remove the `EntityPath` pair (don't forget to remove the semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="a9e1f-176">Ve složce, kde unzipped soubor TelcoGenerator.zip otevřete soubor telcodatagen.exe.config v editoru.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-176">In the folder where you unzipped the TelcoGenerator.zip file, open the telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="a9e1f-177">(Existuje více než jeden soubor .config, proto se ujistěte, že otevřete ten správný.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-177">(There is more than one .config file, so be sure that you open the right one.)</span></span>

3.  <span data-ttu-id="a9e1f-178">V `<appSettings>` elementu, to udělat:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-178">In the `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="a9e1f-179">Nastavte hodnotu `EventHubName` klíče na název centra událostí (tedy na hodnotu cesty entity).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-179">Set the value of the `EventHubName` key to the event hub name (that is, to the value of the entity path).</span></span>
    * <span data-ttu-id="a9e1f-180">Nastavte hodnotu `Microsoft.ServiceBus.ConnectionString` klíče připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-180">Set the value of the `Microsoft.ServiceBus.ConnectionString` key to the connection string.</span></span> 

    <span data-ttu-id="a9e1f-181">`<appSettings>` Části bude vypadat jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-181">The `<appSettings>` section will look like the following example.</span></span> <span data-ttu-id="a9e1f-182">(Pro přehlednost, jsme zabalená čar a odebrat některé znaky z tokenu autorizace.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-182">(For clarity, we wrapped the lines and removed some characters from the authorization token.)</span></span>

    ![Soubor konfigurace aplikace TelcoGenerator zobrazující event hub název a připojovací řetězec](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="a9e1f-184">Uložte soubor.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-184">Save the file.</span></span> 

### <a name="start-the-app"></a><span data-ttu-id="a9e1f-185">Spusťte aplikaci</span><span class="sxs-lookup"><span data-stu-id="a9e1f-185">Start the app</span></span>
1.  <span data-ttu-id="a9e1f-186">Otevřete okno příkazového řádku a přejděte do složky, kde je rozbalené TelcoGenerator aplikace.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-186">Open a command window and change to the folder where the TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="a9e1f-187">Zadejte následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-187">Enter the following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="a9e1f-188">Parametry jsou:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-188">The parameters are:</span></span> 

    * <span data-ttu-id="a9e1f-189">Počet disky CDR za hodinu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="a9e1f-190">SIM karta podvod pravděpodobnosti: Jak často jako procento všechna volání, že aplikace má simulovat podvodné volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that the app should simulate a fraudulent call.</span></span> <span data-ttu-id="a9e1f-191">Hodnota.2 znamená, že který přibližně 20 % záznamy volání bude vypadat podvodné.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-191">The value .2 means that about 20% of the call records will look fraudulent.</span></span>
    * <span data-ttu-id="a9e1f-192">Doba v hodinách.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-192">Duration in hours.</span></span> <span data-ttu-id="a9e1f-193">Počet hodin, které by měla spustit aplikace.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-193">The number of hours that the app should run.</span></span> <span data-ttu-id="a9e1f-194">Můžete také zastavit aplikaci kdykoli stisknutím kombinace kláves Ctrl + C na příkazovém řádku.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-194">You can also stop the app any time by pressing Ctrl+C at the command line.</span></span>

    <span data-ttu-id="a9e1f-195">Za několik sekund spuštění aplikace zobrazení záznamů telefonního hovoru na obrazovce, jako je odešle do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-195">After a few seconds, the app starts displaying phone call records on the screen as it sends them to the event hub.</span></span>

<span data-ttu-id="a9e1f-196">Některá pole klíče, které budete používat v této aplikaci zjišťování podvodů v reálném čase jsou následující:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-196">Some of the key fields that you will be using in this real-time fraud detection application are the following:</span></span>

|<span data-ttu-id="a9e1f-197">**Záznam**</span><span class="sxs-lookup"><span data-stu-id="a9e1f-197">**Record**</span></span>|<span data-ttu-id="a9e1f-198">**Definice**</span><span class="sxs-lookup"><span data-stu-id="a9e1f-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="a9e1f-199">Časové razítko pro volání počáteční čas.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-199">The timestamp for the call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="a9e1f-200">Přepínač telefonní používaná k připojení volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-200">The telephone switch used to connect the call.</span></span> <span data-ttu-id="a9e1f-201">V tomto příkladu přepínače jsou řetězce, které představují země původu (USA, Čína, UK, Německu nebo Austrálie).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-201">For this example, the switches are strings that represent the country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="a9e1f-202">Telefonní číslo volajícího.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-202">The phone number of the caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="a9e1f-203">Mezinárodní mobilní odběratele Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-203">The International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="a9e1f-204">Toto je jedinečný identifikátor volajícím.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-204">This is the Unique identifier of the caller.</span></span> |
|`CalledNum`|<span data-ttu-id="a9e1f-205">Telefonní číslo příjemce volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-205">The phone number of the call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="a9e1f-206">Mezinárodní mobilní odběratele Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="a9e1f-207">Toto je jedinečný identifikátor hovoru příjemce.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-207">This is the unique identifier of the call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-to-manage-streaming-data"></a><span data-ttu-id="a9e1f-208">Vytvořit úlohu služby Stream Analytics ke správě dat</span><span class="sxs-lookup"><span data-stu-id="a9e1f-208">Create a Stream Analytics job to manage streaming data</span></span>

<span data-ttu-id="a9e1f-209">Teď, když máte datový proud událostí volání, můžete nastavit úlohu služby Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="a9e1f-210">Úloha bude číst data z centra událostí, které jste nastavili.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-210">The job will read data from the event hub that you set up.</span></span> 

### <a name="create-the-job"></a><span data-ttu-id="a9e1f-211">Vytvoření úlohy</span><span class="sxs-lookup"><span data-stu-id="a9e1f-211">Create the job</span></span> 

1. <span data-ttu-id="a9e1f-212">Na portálu Azure klikněte na tlačítko **nový** > **Internet věcí** > **úlohy služby Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-212">In the Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="a9e1f-213">Název úlohy `sa_frauddetection_job_demo`, určete předplatné, skupinu prostředků a umístění.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-213">Name the job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="a9e1f-214">Je vhodné umístit úlohy a centra událostí ve stejné oblasti pro nejlepší výkon, a tak, že nemáte platíte k přenosu dat mezi oblastmi.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-214">It's a good idea to place the job and the event hub in the same region for best performance and so that you don't pay to transfer data between regions.</span></span>

    ![Vytvoření nové úlohy Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="a9e1f-216">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-216">Click **Create**.</span></span>

    <span data-ttu-id="a9e1f-217">Vytvoření úlohy a na portálu se zobrazí podrobnosti úlohy.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-217">The job is created and the portal displays job details.</span></span> <span data-ttu-id="a9e1f-218">Nic běží ještě, přestože – budete muset nakonfigurovat úloha může být zahájena.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-218">Nothing is running yet, though—you have to configure the job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="a9e1f-219">Konfigurace úlohy vstup</span><span class="sxs-lookup"><span data-stu-id="a9e1f-219">Configure job input</span></span>

1. <span data-ttu-id="a9e1f-220">Na řídicím panelu nebo **všechny prostředky** okno, vyhledejte a vyberte `sa_frauddetection_job_demo` úlohy služby Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-220">In the dashboard or the **All resources** blade, find and select the `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="a9e1f-221">V **úlohy topologie** části okno úlohy Stream Analytics, klikněte na tlačítko **vstup** pole.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-221">In the **Job Topology** section of the Stream Analytics job blade, click the **Input** box.</span></span>

    ![Vstupní pole v části topologie v okně úlohy streamování Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="a9e1f-223">Klikněte na tlačítko  **+ &nbsp;přidat** a potom vyplňte v okně s těmito hodnotami:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-223">Click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="a9e1f-224">**Vstupní alias**: použijte název `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-224">**Input alias**: Use the name `CallStream`.</span></span> <span data-ttu-id="a9e1f-225">Pokud použijete jiný název, poznamenejte si jeho vzhledem k tomu, že ho budete potřebovat později.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="a9e1f-226">**Typ zdroje**: vyberte **datový proud**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="a9e1f-227">(**Referenční data** vztahuje se k datům statickou vyhledávání, který nebudete používat v tomto kurzu.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-227">(**Reference data** refers to static lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="a9e1f-228">**Zdroj**: vyberte **centra událostí**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="a9e1f-229">**Import možnost**: vyberte **použijte Centrum událostí z aktuálního předplatného**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="a9e1f-230">**Obor názvů sběrnice**: Vyberte obor názvů centra událostí, který jste vytvořili dříve (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-230">**Service bus namespace**: Select the event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="a9e1f-231">**Centra událostí**: Vyberte centra událostí, které jste vytvořili dříve (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-231">**Event hub**: Select the event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="a9e1f-232">**Název zásady centra událostí**: vyberte zásady přístupu, které jste vytvořili dříve (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-232">**Event hub policy name**: Select the access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Vytvořit nový vstupní úlohy streamování Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="a9e1f-234">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-234">Click **Create**.</span></span>

## <a name="create-queries-to-transform-real-time-data"></a><span data-ttu-id="a9e1f-235">Vytváření dotazů k transformaci dat v reálném čase</span><span class="sxs-lookup"><span data-stu-id="a9e1f-235">Create queries to transform real-time data</span></span>

<span data-ttu-id="a9e1f-236">V tuto chvíli máte úloha Stream Analytics nastavit tak, aby číst příchozí datový proud.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-236">At this point, you have a Stream Analytics job set up to read an incoming data stream.</span></span> <span data-ttu-id="a9e1f-237">Dalším krokem je vytvoření transformaci, která analyzuje data v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-237">The next step is to create a transformation that analyzes the data in real time.</span></span> <span data-ttu-id="a9e1f-238">To uděláte tak, že vytvoříte dotaz.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-238">You do this by creating a query.</span></span> <span data-ttu-id="a9e1f-239">Stream Analytics podporuje jednoduchý a deklarativní dotazu model, který popisuje transformace pro zpracování v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="a9e1f-240">Dotazy pomocí SQL jako jazyk, který má některé rozšíření konkrétní do služby stream analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-240">The queries use a SQL-like language that has some extensions specific to stream analytics.</span></span> 

<span data-ttu-id="a9e1f-241">Velmi jednoduchý dotaz může být jednoduše načíst všechna příchozí data.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-241">A very simple query might simply read all the incoming data.</span></span> <span data-ttu-id="a9e1f-242">Ale často vytvořit dotazy, které vypadají pro konkrétní data, nebo pro vztahy v datech.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-242">However, you often create queries that look for specific data or for relationships in the data.</span></span> <span data-ttu-id="a9e1f-243">V této části kurzu vytvoříte a otestovat několik dotazů další několik způsobů, ve kterých můžete převést vstupní datový proud pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-243">In this section of the tutorial, you will create and test several queries to learn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="a9e1f-244">Dotazy, které zde vytvoříte, se zobrazí právě Transformovaná data na obrazovku.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-244">The queries you create here will just display the transformed data to the screen.</span></span> <span data-ttu-id="a9e1f-245">V další části nakonfigurujete výstupní jímku a dotaz, který zapíše Transformovaná data do tohoto jímky.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-245">In a later section, you'll configure an output sink and a query that writes the transformed data to that sink.</span></span>

<span data-ttu-id="a9e1f-246">Další informace o jazyk, najdete v článku [referenční příručka Azure Stream Analytics Query Language](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-246">To learn more about the language, see the [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="a9e1f-247">Načíst ukázková data pro testování dotazů</span><span class="sxs-lookup"><span data-stu-id="a9e1f-247">Get sample data for testing queries</span></span>

<span data-ttu-id="a9e1f-248">TelcoGenerator aplikace odesílá záznamy volání do centra událostí a vaše úlohy služby Stream Analytics je konfigurován ke čtení z centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-248">The TelcoGenerator app is sending call records to the event hub, and your Stream Analytics job is configured to read from the event hub.</span></span> <span data-ttu-id="a9e1f-249">Dotaz můžete použít k testování úlohy, abyste měli jistotu, že je správně čtení.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-249">You can use a query to test the job to make sure that it's reading correctly.</span></span> <span data-ttu-id="a9e1f-250">Chcete-li otestovat dotazu v konzole Azure, musíte ukázková data.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-250">To  test a query in the Azure console, you need sample data.</span></span> <span data-ttu-id="a9e1f-251">V tomto návodu budete extrahovat ukázková data z datového proudu, který přichází do centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-251">For this walkthrough, you'll extract sample data from the stream that's coming into the event hub.</span></span>

1. <span data-ttu-id="a9e1f-252">Ujistěte se, že je spuštěna a vytváření záznamů volání TelcoGenerator aplikace.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-252">Make sure that the TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="a9e1f-253">Na portálu vraťte se k okno úloha streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-253">In the portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="a9e1f-254">(Pokud jste zavřeli okna, vyhledejte `sa_frauddetection_job_demo` v **všechny prostředky** okno.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-254">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
3. <span data-ttu-id="a9e1f-255">Klikněte **dotazu** pole.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-255">Click the **Query** box.</span></span> <span data-ttu-id="a9e1f-256">Azure uvádí vstupy a výstupy, které jsou nakonfigurovány pro úlohy a umožňuje vám vytvořit dotaz, který vám umožňuje transformovat vstupní datový proud, jako jsou odeslána do výstupu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-256">Azure lists the inputs and outputs that are configured for the job, and lets you create a query that lets you transform the input stream as it is sent to the output.</span></span>
4. <span data-ttu-id="a9e1f-257">V **dotazu** okně klikněte na tlačítko se tečkami vedle `CallStream` vstup a pak vyberte **vzorová data ze vstupu**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-257">In the **Query** blade, click the dots next to the `CallStream` input and then select **Sample data from input**.</span></span>

    ![Položka, s "Ukázkových dat ze vstupu" vybrané úlohy možnosti nabídky ukázková data pro analýzy datových proudů](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="a9e1f-259">Otevře se okno, které umožňuje určit, kolik ukázková data získat, definována v tom, jak dlouho ke čtení vstupního datového proudu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-259">This opens a blade that lets you specify how much sample data to get, defined in terms of how long to read the input stream.</span></span>

5. <span data-ttu-id="a9e1f-260">Nastavit **minut** na 3 a pak klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-260">Set **Minutes** to 3 and then click **OK**.</span></span> 
    
    ![Možnosti vzorkování vstupního datového proudu s vybrané "3 minut".](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="a9e1f-262">Azure ukázky data z vstupního datového proudu za 3 minuty a vás upozorní, jakmile je připraven ukázková data.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-262">Azure samples 3 minutes' worth of data from the input stream and notifies you when the sample data is ready.</span></span> <span data-ttu-id="a9e1f-263">(To trvá nějakou dobu.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-263">(This takes a short while.)</span></span> 

<span data-ttu-id="a9e1f-264">Ukázková data jsou ukládána dočasně a je k dispozici při otevření okna dotazu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-264">The sample data is stored temporarily and is available while you have the query window open.</span></span> <span data-ttu-id="a9e1f-265">Pokud zavřete okno dotazu se zahodí ukázkových dat a budete muset vytvořit novou sadu ukázková data.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-265">If you close the query window, the sample data is discarded, and you'll have to create a new set of sample data.</span></span> 

<span data-ttu-id="a9e1f-266">Jako alternativu můžete získat soubor .json, který se nachází ukázková data [z Githubu](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json)a pak tento soubor .json, který bude použit jako ukázková data pro nahrajte `CallStream` vstupní.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file to use as sample data for the `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="a9e1f-267">Testování pomocí předávacího dotazu</span><span class="sxs-lookup"><span data-stu-id="a9e1f-267">Test using a pass-through query</span></span>

<span data-ttu-id="a9e1f-268">Pokud chcete archivovat každé události, můžete načíst všechna pole v datové části události předávací dotaz.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-268">If you want to archive every event, you can use a pass-through query to read all the fields in the payload of the event.</span></span>

1. <span data-ttu-id="a9e1f-269">V okně dotazu zadejte tento dotaz:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-269">In the query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="a9e1f-270">Stejně jako u SQL, klíčová slova nejsou velká a malá písmena a prázdný znak není důležité.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="a9e1f-271">V tomto dotazu `CallStream` je alias, kterou jste zadali při vytvoření vstupu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-271">In this query, `CallStream` is the alias that you specified when you created the input.</span></span> <span data-ttu-id="a9e1f-272">Pokud jste použili jiný alias, použijte tento název.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="a9e1f-273">Klikněte na tlačítko **Test**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-273">Click **Test**.</span></span>

    <span data-ttu-id="a9e1f-274">Úloha Stream Analytics spouští dotaz ukázkových dat a zobrazí výstup v dolní části okna.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-274">The Stream Analytics job runs the query against the sample data and displays the output at the bottom of the window.</span></span> <span data-ttu-id="a9e1f-275">Znamená to, zda jsou správně nakonfigurovány centra událostí a úlohy streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-275">This tells you that the event hub and the Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="a9e1f-276">(Jak je uvedeno, později vytvoříte výstupní jímku který dotaz může zapisovat data.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-276">(As noted, later you'll create an output sink that the query can write data to.)</span></span>

    ![Úlohy Stream Analytics se výstup, zobrazují se 73 záznamy vygenerované](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="a9e1f-278">Přesný počet záznamů, které vidíte bude záviset na počet záznamů zaznamenalo v 3 minut ukázky.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-278">The exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-the-number-of-fields-using-a-column-projection"></a><span data-ttu-id="a9e1f-279">Snižte počet polí pomocí sloupce projekce</span><span class="sxs-lookup"><span data-stu-id="a9e1f-279">Reduce the number of fields using a column projection</span></span>

<span data-ttu-id="a9e1f-280">V mnoha případech nepotřebuje analýzy všechny sloupce ze vstupního datového proudu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-280">In many cases, your analysis doesn't need all the columns from the input stream.</span></span> <span data-ttu-id="a9e1f-281">Dotaz můžete projektu menší sadu vrácený pole než v předávací dotaz.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-281">You can use a query to project a smaller set of returned fields than in the pass-through query.</span></span>

1. <span data-ttu-id="a9e1f-282">Změna dotazu v editoru kódu takto:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-282">Change the query in the code editor to the following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="a9e1f-283">Klikněte na tlačítko **Test** znovu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-283">Click **Test** again.</span></span> 

    ![Úlohy Stream Analytics se výstup. pro projekci, zobrazují se 25 záznamy vygenerované](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="a9e1f-285">Počet příchozích volání podle oblasti: Přeskakující okno s průběhem</span><span class="sxs-lookup"><span data-stu-id="a9e1f-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="a9e1f-286">Předpokládejme, že chcete zjistit počet příchozích hovorů každou oblast.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-286">Suppose you want to count the number of incoming calls per region.</span></span> <span data-ttu-id="a9e1f-287">Potřebujete v streamovaných dat užitečné, když chcete provést agregační funkce, jako je počítání, segmentovat datový proud do dočasné jednotky (protože je datový proud samotné efektivně nekonečná).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-287">In streaming data, when you want to perform aggregate functions like counting, you need to segment the stream into temporal units (since the data stream itself is effectively endless).</span></span> <span data-ttu-id="a9e1f-288">Můžete to udělat pomocí Analytics se streamování [oddílovou funkci](stream-analytics-window-functions.md).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="a9e1f-289">Potom můžete pracovat s daty v dané okno jako jednotku.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-289">You can then work with the data inside that window as a unit.</span></span>

<span data-ttu-id="a9e1f-290">Tato transformace se má pořadí dočasné Windows, které nepřekrývaly – každé okno bude mít diskrétní sadu dat, která můžete seskupovat a agregaci.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="a9e1f-291">Tento typ okna se označuje jako *Přeskakující okno* .</span><span class="sxs-lookup"><span data-stu-id="a9e1f-291">This type of window is referred to as a *Tumbling window* .</span></span> <span data-ttu-id="a9e1f-292">V rámci Přeskakující okno, můžete získat počet příchozích hovorů seskupené podle `SwitchNum`, která představuje zemi, kde volání vytvořena.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-292">Within the Tumbling window, you can get a count of the incoming calls grouped by `SwitchNum`, which represents the country where the call originated.</span></span> 

1. <span data-ttu-id="a9e1f-293">Změna dotazu v editoru kódu takto:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-293">Change the query in the code editor to the following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="a9e1f-294">Tento dotaz používá `Timestamp By` – klíčové slovo v `FROM` klauzule určete kterých časové razítko pole v vstupního datového proudu k definování Přeskakující okno.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-294">This query uses the `Timestamp By` keyword in the `FROM` clause to specify which timestamp field in the input stream to use to define the Tumbling window.</span></span> <span data-ttu-id="a9e1f-295">V takovém případě okno rozděluje data do segmentů pomocí `CallRecTime` pole všechny záznamy.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-295">In this case, the window divides the data into segments by the `CallRecTime` field in each record.</span></span> <span data-ttu-id="a9e1f-296">(V případě žádné pole operaci oddílová používá čas, všechny události dorazí na centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-296">(If no field is specified, the windowing operation uses the time that each event arrives at the event hub.</span></span> <span data-ttu-id="a9e1f-297">V části "Čas aplikace Vs čas doručení" v [Stream Analytics referenční příručka jazyka dotazů](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="a9e1f-298">Projekce zahrnuje `System.Timestamp`, která vrací časového razítka na konci každého období.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-298">The projection includes `System.Timestamp`, which returns a timestamp for the end of each window.</span></span> 

    <span data-ttu-id="a9e1f-299">Chcete-li určit, zda chcete použít Přeskakující okno, je použít [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) fungovat v `GROUP BY `klauzule.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-299">To specify that you want to use a Tumbling window, you use the [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in the `GROUP BY `clause.</span></span> <span data-ttu-id="a9e1f-300">Ve funkci zadejte časovou jednotku (od mikrosekund na den) a velikost okna (počet jednotek).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-300">In the function, you specify a time unit (anywhere from a microsecond to a day) and a window size (how many units).</span></span> <span data-ttu-id="a9e1f-301">V tomto příkladu Přeskakující okno se skládá z 5 sekund intervalech, zobrazí se počet podle země pro volání za každých 5 sekund.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-301">In this example, the Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="a9e1f-302">Klikněte na tlačítko **Test** znovu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-302">Click **Test** again.</span></span> <span data-ttu-id="a9e1f-303">Ve výsledcích, Všimněte si, že časová razítka v části **WindowEnd** jsou v přírůstcích po 5 sekund.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-303">In the results, notice that the timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Úlohy Stream Analytics se výstup za účelem agregace, zobrazují se 13 záznamy vygenerované](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="a9e1f-305">Odhalování podvodů SIM pomocí vlastní spojení</span><span class="sxs-lookup"><span data-stu-id="a9e1f-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="a9e1f-306">V tomto příkladu jsme Zvažte podvodné použití být volání, které pocházejí ze stejného uživatele, ale v různých umístěních do 5 sekund od sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-306">For this example, we can consider fraudulent usage to be calls that originate from the same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="a9e1f-307">Například stejného uživatele nelze vytvořit legálně volání z USA a Austrálie ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-307">For example, the same user can't legitimately make a call from the US and Australia at the same time.</span></span> 

<span data-ttu-id="a9e1f-308">Pokud chcete zkontrolovat pro tyto případy, můžete vlastní spojení dat spojení, datový proud na základě `CallRecTime` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-308">To check for these cases, you can use a self-join of the streaming data to join the stream to itself based on the `CallRecTime` value.</span></span> <span data-ttu-id="a9e1f-309">Potom můžete vyhledat volání záznamy, kde `CallingIMSI` hodnotu (výchozí číslo) je stejné, ale `SwitchNum` hodnotu (země původu) není stejný.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-309">You can then look for call records where the `CallingIMSI` value (the originating number) is the same, but the `SwitchNum` value (country of origin) is not the same.</span></span>

<span data-ttu-id="a9e1f-310">Když použijete ke spojení s streamovaných dat užitečné, spojení musíte zadat, že některá omezení na tom, jak úplně odpovídající řádky je možné oddělit v čase.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-310">When you use a join with streaming data, the join must provide some limits on how far the matching rows can be separated in time.</span></span> <span data-ttu-id="a9e1f-311">(Jak již bylo uvedeno dříve, streamování dat je efektivně nekonečná.) Zadat čas hranice pro relaci v rámci `ON` klauzuli spojení, pomocí `DATEDIFF` funkce.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-311">(As noted earlier, the streaming data is effectively endless.) The time bounds for the relationship are specified inside the `ON` clause of the join, using the `DATEDIFF` function .</span></span> <span data-ttu-id="a9e1f-312">V takovém případě spojení je založena na 5 sekund intervalu dat volání.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-312">In this case, the join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="a9e1f-313">Změna dotazu v editoru kódu takto:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-313">Change the query in the code editor to the following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="a9e1f-314">Tento dotaz není třeba žádné připojení k SQL s výjimkou pro `DATEDIFF` funkce ve spojení.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-314">This query is like any SQL join except for the `DATEDIFF` function in the join.</span></span> <span data-ttu-id="a9e1f-315">Toto je verze `DATEDIFF` která je specifická pro analýzy datových proudů, a musí se nacházet v `ON...BETWEEN` klauzule.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-315">This is a version of `DATEDIFF` that's specific to Streaming Analytics, and it must appear in the `ON...BETWEEN` clause.</span></span> <span data-ttu-id="a9e1f-316">Parametry jsou časovou jednotku (v sekundách v tomto příkladu) a aliasy dvou zdrojů pro spojení.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-316">The parameters are a time unit (seconds in this example) and the aliases of the two sources for the join.</span></span> <span data-ttu-id="a9e1f-317">(To se liší od standardní SQL `DATEDIFF` funkce.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-317">(This is different from the standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="a9e1f-318">`WHERE` Klauzule zahrnuje podmínku, která flags podvodné volání: původní přepínače nejsou stejné.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-318">The `WHERE` clause includes the condition that flags the fraudulent call: the originating switches are not the same.</span></span> 

2. <span data-ttu-id="a9e1f-319">Klikněte na tlačítko **Test** znovu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-319">Click **Test** again.</span></span> 

    ![Výstup pro spojení sama na sebe, zobrazení 6 záznamů vygenerovaných úlohy Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="a9e1f-321">Klikněte na **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-321">Click **Save**.</span></span> <span data-ttu-id="a9e1f-322">To umožňuje ušetřit dotazu spojení sama na sebe jako součást úlohy streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-322">This saves the self-join query as part of the Streaming Analytics job.</span></span> <span data-ttu-id="a9e1f-323">(Ho nebude uložen ukázková data.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-323">(It doesn't save the sample data.)</span></span>

    ![Uložit úlohu služby Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-to-store-transformed-data"></a><span data-ttu-id="a9e1f-325">Vytvoření výstupní jímku pro ukládání Transformovaná data</span><span class="sxs-lookup"><span data-stu-id="a9e1f-325">Create an output sink to store transformed data</span></span>

<span data-ttu-id="a9e1f-326">Jste definovali datového proudu událostí, centra událostí vstup pro načítání událostí a dotaz, který provádět prostřednictvím datového proudu transformace.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-326">You've defined an event stream, an event hub input to ingest events, and a query to perform a transformation over the stream.</span></span> <span data-ttu-id="a9e1f-327">Posledním krokem je definování výstupní jímku pro úlohu – to znamená, místo pro zápis transformovaný datový proud do.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-327">The last step is to define an output sink for the job—that is, a place to write the transformed stream to.</span></span> 

<span data-ttu-id="a9e1f-328">Mnoho prostředků můžete použít jako výstup jímky – databázi systému SQL Server, úložiště table, úložiště Data Lake, Power BI a i jiné centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="a9e1f-329">V tomto kurzu napíšete datový proud do úložiště objektů Blob Azure, což je typické volbou pro shromažďování informací o události pro pozdější analýzu, protože počítá Nestrukturovaná data.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-329">For this tutorial, you'll write the stream to Azure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="a9e1f-330">Pokud máte stávající účet úložiště objektů blob, můžete použít, který.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="a9e1f-331">V tomto kurzu jsme budete ukazují, jak vytvořit nový účet úložiště jenom pro účely tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-331">For this tutorial, we'll show you how to create a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="a9e1f-332">Vytvoření účtu Azure Blob Storage</span><span class="sxs-lookup"><span data-stu-id="a9e1f-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="a9e1f-333">V portálu Azure vrátíte do okna úlohy streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-333">In the Azure portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="a9e1f-334">(Pokud jste zavřeli okna, vyhledejte `sa_frauddetection_job_demo` v **všechny prostředky** okno.)</span><span class="sxs-lookup"><span data-stu-id="a9e1f-334">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
2. <span data-ttu-id="a9e1f-335">V **úlohy topologie** klikněte na položku **výstup** pole.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-335">In the **Job Topology** section, click the **Output** box.</span></span> 
3. <span data-ttu-id="a9e1f-336">V **výstupy** okně klikněte na tlačítko  **+ &nbsp;přidat** a potom vyplňte v okně s těmito hodnotami:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-336">In the **Outputs** blade, click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="a9e1f-337">**Alias pro výstup**: použijte název `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-337">**Output alias**: Use the name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="a9e1f-338">**Jímky**: vyberte **úložiště objektů Blob**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="a9e1f-339">**Možnosti importu**: vyberte **pomocí úložiště objektů blob z aktuálního předplatného**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="a9e1f-340">**Účet úložiště**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-340">**Storage account**.</span></span> <span data-ttu-id="a9e1f-341">Vyberte **vytvořit nový účet úložiště.**</span><span class="sxs-lookup"><span data-stu-id="a9e1f-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="a9e1f-342">**Účet úložiště** (druhé pole).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-342">**Storage account** (second box).</span></span> <span data-ttu-id="a9e1f-343">Zadejte `YOURNAMEsademo`, kde `YOURNAME` je název vaší nebo jiné jedinečné řetězce.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="a9e1f-344">Název můžete použít jenom malá písmena a čísla a musí být jedinečný v Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-344">The name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="a9e1f-345">**Kontejner**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-345">**Container**.</span></span> <span data-ttu-id="a9e1f-346">Zadejte `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="a9e1f-347">Název účtu úložiště a název kontejneru se používají společně zajistit identifikátor URI pro úložiště objektů blob, například takto:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-347">The storage account name and container name are used together to provide a URI for the blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    !["Nové výstup" okno úlohy Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="a9e1f-349">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-349">Click **Create**.</span></span> 

    <span data-ttu-id="a9e1f-350">Azure vytvoří účet úložiště a automaticky vygeneruje klíč.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-350">Azure creates the storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="a9e1f-351">Zavřít **výstupy** okno.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-351">Close the **Outputs** blade.</span></span> 

## <a name="start-the-streaming-analytics-job"></a><span data-ttu-id="a9e1f-352">Spustit úlohu streamování Analytics</span><span class="sxs-lookup"><span data-stu-id="a9e1f-352">Start the Streaming Analytics job</span></span>

<span data-ttu-id="a9e1f-353">Úloha je nyní nakonfigurována.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-353">The job is now configured.</span></span> <span data-ttu-id="a9e1f-354">Zadané vstup (centra událostí), transformaci (dotazu k vyhledání podvodné volání) a výstup (úložiště objektů blob).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-354">You've specified an input (the event hub), a transformation (the query to look for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="a9e1f-355">Nyní můžete spustit úlohu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-355">You can now start the job.</span></span> 

1. <span data-ttu-id="a9e1f-356">Zajistěte, aby že telcogenerator aplikace běží.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-356">Make sure the TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="a9e1f-357">V okně úlohy klikněte na tlačítko **spustit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-357">In the job blade, click **Start**.</span></span>

    ![Spustit úlohu služby Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="a9e1f-359">V **spuštění úlohy** okně pro výstup čas spuštění úlohy, vyberte **nyní**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-359">In the **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="a9e1f-360">Klikněte na tlačítko **spustit**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-360">Click **Start**.</span></span> 

    !["Spuštění úlohy" okno pro úlohu služby Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="a9e1f-362">Azure vás upozorní, jakmile byla úloha spuštěna, a v okně úlohy, stav se zobrazí jako **systémem**.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-362">Azure notifies you when the job has started, and in the job blade, the status is displayed as **Running**.</span></span>

    ![Stav úlohy Stream Analytics, zobrazující "Spuštěný"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-the-transformed-data"></a><span data-ttu-id="a9e1f-364">Zkontrolujte Transformovaná data</span><span class="sxs-lookup"><span data-stu-id="a9e1f-364">Examine the transformed data</span></span>

<span data-ttu-id="a9e1f-365">Nyní máte dokončení úlohy streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="a9e1f-366">Úloha je zkoumání proud metadata telefonní hovor, hledá podvodné telefonní hovory v reálném čase a zápis informace o těchto podvodné volání do úložiště.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-366">The job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls to storage.</span></span> 

<span data-ttu-id="a9e1f-367">K dokončení tohoto kurzu, můžete se podívat na získanými v úloze streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-367">To complete this tutorial, you might want to look at the data being captured by the Streaming Analytics job.</span></span> <span data-ttu-id="a9e1f-368">Probíhá zápis dat do služby Azure Blog Storage v bloky dat (soubory).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-368">The data is being written to Azure Blog Storage in chunks (files).</span></span> <span data-ttu-id="a9e1f-369">Můžete použít jakýkoli nástroj, který čte Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="a9e1f-370">Jak jsme uvedli v části požadavky, můžete použít rozšíření Azure v sadě Visual Studio, nebo můžete použít nástroje, jako je [Azure Storage Explorer](http://storageexplorer.com/) nebo [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-370">As noted in the Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="a9e1f-371">Pokud byste zkontrolovat obsah souboru v úložišti objektů blob, zobrazí přibližně takto:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-371">When you examine the contents of a file in blob storage, you see something like the following :</span></span>

![Úložiště objektů blob v Azure s výstupem analýzy datových proudů](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="a9e1f-373">Vyčištění prostředků</span><span class="sxs-lookup"><span data-stu-id="a9e1f-373">Clean up resources</span></span>

<span data-ttu-id="a9e1f-374">Máme další články, které dál se scénářem odhalování podvodů a které používají prostředky, které jste vytvořili v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-374">We have additional articles that continue with the fraud-detection scenario and that use the resources that you've created in this tutorial.</span></span> <span data-ttu-id="a9e1f-375">Pokud chcete pokračovat, přečtěte si téma návrhy pod **další kroky** později.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-375">If you want to continue, see the suggestions under **Next steps** later.</span></span>

<span data-ttu-id="a9e1f-376">Ale pokud s tím budete hotovi a nepotřebujete prostředky, které jste vytvořili, odstraněním je tak, aby vám zbytečně nenabíhaly poplatky nepotřebné Azure.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-376">However, if you're done and you don't need the resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="a9e1f-377">V takovém případě doporučujeme, abyste provedli následující:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-377">In that case, we suggest that you do the following:</span></span>

1. <span data-ttu-id="a9e1f-378">Zastavte úlohu streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-378">Stop the Streaming Analytics job.</span></span> <span data-ttu-id="a9e1f-379">V **úlohy** okně klikněte na tlačítko **Zastavit** v horní části.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-379">In the **Jobs** blade, click **Stop** at the top.</span></span>
2. <span data-ttu-id="a9e1f-380">Zastavit Telco generátor aplikace.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-380">Stop the Telco Generator app.</span></span> <span data-ttu-id="a9e1f-381">V příkazovém okně, kde jste spustili aplikaci stiskněte kombinaci kláves Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-381">In the command window where you started the app, press Ctrl+C.</span></span>
3. <span data-ttu-id="a9e1f-382">Pokud jste vytvořili nový účet úložiště objektů blob jenom pro účely tohoto kurzu, odstraňte jej.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="a9e1f-383">Odstraňte úlohu streamování Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-383">Delete the Streaming Analytics job.</span></span>
5. <span data-ttu-id="a9e1f-384">Odstraňte centra událostí.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-384">Delete the event hub.</span></span>
6. <span data-ttu-id="a9e1f-385">Odstraňte názvový prostor události rozbočovače.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-385">Delete the event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="a9e1f-386">Získat podporu</span><span class="sxs-lookup"><span data-stu-id="a9e1f-386">Get support</span></span>

<span data-ttu-id="a9e1f-387">Pro další pomoc, vyzkoušejte naše [fórum Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a9e1f-388">Další kroky</span><span class="sxs-lookup"><span data-stu-id="a9e1f-388">Next steps</span></span>

<span data-ttu-id="a9e1f-389">Můžete pokračovat v tomto kurzu v následujících článcích:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-389">You can continue this tutorial with the following articles:</span></span>

* <span data-ttu-id="a9e1f-390">[Stream Analytics a Power BI: řídicí panel analýzy v reálném čase pro datový proud](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="a9e1f-391">Tento článek ukazuje, jak odeslat TelCo výstup úlohy Stream Analytics k Power BI pro v reálném čase vizualizaci a analýzu.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-391">This article shows you how to send the TelCo output of the Stream Analytics job to Power BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="a9e1f-392">[Tom, jak ukládat data z Azure Stream Analytics v Azure Redis Cache pomocí Azure Functions](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="a9e1f-392">[How to store data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="a9e1f-393">Tento článek ukazuje, jak používat Azure Functions k zápisu podvodné volání k Azure Redis cache prostřednictvím fronty Service Bus.</span><span class="sxs-lookup"><span data-stu-id="a9e1f-393">This article shows how to use Azure Functions to write fraudulent calls to an Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="a9e1f-394">Další informace o Stream Analytics obecně platí, zkuste tyto články:</span><span class="sxs-lookup"><span data-stu-id="a9e1f-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="a9e1f-395">Úvod do služby Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a9e1f-395">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="a9e1f-396">Škálování služby Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a9e1f-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="a9e1f-397">Referenční příručka k jazyku Azure Stream Analytics Query Language</span><span class="sxs-lookup"><span data-stu-id="a9e1f-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="a9e1f-398">Referenční příručka k rozhraní REST API pro správu služby Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="a9e1f-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
