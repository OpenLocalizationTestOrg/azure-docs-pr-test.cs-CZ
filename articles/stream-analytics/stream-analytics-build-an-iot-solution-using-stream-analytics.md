---
title: "Vytvoření řešení IoT pomocí služby Stream Analytics | Microsoft Docs"
description: "Úvodní kurz pro řešení Stream Analytics IoT mýtná celnice scénáře"
keywords: "řešení IOT, okno funkce"
documentationcenter: 
services: stream-analytics
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: a473ea0a-3eaa-4e5b-aaa1-fec7e9069f20
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: a93693ef7d40025fa96846594a8eb525a50b6885
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="build-an-iot-solution-by-using-stream-analytics"></a><span data-ttu-id="7ed01-104">Vytvoření řešení IoT pomocí služby Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="7ed01-104">Build an IoT solution by using Stream Analytics</span></span>
## <a name="introduction"></a><span data-ttu-id="7ed01-105">Úvod</span><span class="sxs-lookup"><span data-stu-id="7ed01-105">Introduction</span></span>
<span data-ttu-id="7ed01-106">V tomto kurzu se dozvíte, jak získat přehledy v reálném čase z vašich dat pomocí Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-106">In this tutorial, you will learn how to use Azure Stream Analytics to get real-time insights from your data.</span></span> <span data-ttu-id="7ed01-107">Datové proudy dat, například klikněte na tlačítko-datové proudy, protokoly a události generované zařízení mohou vývojáři kombinovat snadno s staré záznamy nebo referenční data odvození informací o podniku.</span><span class="sxs-lookup"><span data-stu-id="7ed01-107">Developers can easily combine streams of data, such as click-streams, logs, and device-generated events, with historical records or reference data to derive business insights.</span></span> <span data-ttu-id="7ed01-108">Jako výpočetní služba plně spravovaná, v reálném čase datový proud, který je hostován v Microsoft Azure Azure Stream Analytics poskytuje integrované odolnost proti chybám, s nízkou latencí a škálovatelnost, které jste si a spustit v minutách.</span><span class="sxs-lookup"><span data-stu-id="7ed01-108">As a fully managed, real-time stream computation service that's hosted in Microsoft Azure, Azure Stream Analytics provides built-in resiliency, low latency, and scalability to get you up and running in minutes.</span></span>

<span data-ttu-id="7ed01-109">Po dokončení tohoto kurzu, budete moci:</span><span class="sxs-lookup"><span data-stu-id="7ed01-109">After completing this tutorial, you will be able to:</span></span>

* <span data-ttu-id="7ed01-110">Seznamte se s portálem Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-110">Familiarize yourself with the Azure Stream Analytics portal.</span></span>
* <span data-ttu-id="7ed01-111">Nakonfigurujte a nasaďte úlohu streamování.</span><span class="sxs-lookup"><span data-stu-id="7ed01-111">Configure and deploy a streaming job.</span></span>
* <span data-ttu-id="7ed01-112">Vyjádřete reálného problémy a řešení je pomocí dotazovacího jazyka pro Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-112">Articulate real-world problems and solve them by using the Stream Analytics query language.</span></span>
* <span data-ttu-id="7ed01-113">Vývoj streamování řešení pro vaše zákazníky pomocí služby Stream Analytics s jistotou.</span><span class="sxs-lookup"><span data-stu-id="7ed01-113">Develop streaming solutions for your customers by using Stream Analytics with confidence.</span></span>
* <span data-ttu-id="7ed01-114">Sledování a protokolování prostředí používejte k řešení potíží.</span><span class="sxs-lookup"><span data-stu-id="7ed01-114">Use the monitoring and logging experience to troubleshoot issues.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7ed01-115">Požadavky</span><span class="sxs-lookup"><span data-stu-id="7ed01-115">Prerequisites</span></span>
<span data-ttu-id="7ed01-116">Budete potřebovat k dokončení tohoto kurzu následující požadavky:</span><span class="sxs-lookup"><span data-stu-id="7ed01-116">You will need the following prerequisites to complete this tutorial:</span></span>

* <span data-ttu-id="7ed01-117">Nejnovější verzi [prostředí Azure PowerShell](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="7ed01-117">The latest version of [Azure PowerShell](/powershell/azure/overview)</span></span>
* <span data-ttu-id="7ed01-118">2017 Visual Studio 2015, nebo bezplatnou [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span><span class="sxs-lookup"><span data-stu-id="7ed01-118">Visual Studio 2017, 2015, or the free [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span></span>
* <span data-ttu-id="7ed01-119">[Předplatného Azure](https://azure.microsoft.com/pricing/free-trial/)</span><span class="sxs-lookup"><span data-stu-id="7ed01-119">An [Azure subscription](https://azure.microsoft.com/pricing/free-trial/)</span></span>
* <span data-ttu-id="7ed01-120">Oprávnění správce na počítači</span><span class="sxs-lookup"><span data-stu-id="7ed01-120">Administrative privileges on the computer</span></span>
* <span data-ttu-id="7ed01-121">Stažení [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) z webu Microsoft Download Center</span><span class="sxs-lookup"><span data-stu-id="7ed01-121">Download of [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) from the Microsoft Download Center</span></span>
* <span data-ttu-id="7ed01-122">Volitelné: Zdrojový kód pro generátor TollApp událostí v [Githubu](https://aka.ms/azure-stream-analytics-toll-source)</span><span class="sxs-lookup"><span data-stu-id="7ed01-122">Optional: Source code for the TollApp event generator in [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span></span>

## <a name="scenario-introduction-hello-toll"></a><span data-ttu-id="7ed01-123">Scénář Úvod: "Hello, Projedou!"</span><span class="sxs-lookup"><span data-stu-id="7ed01-123">Scenario introduction: “Hello, Toll!”</span></span>
<span data-ttu-id="7ed01-124">Stanice projedou je běžné jevu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-124">A toll station is a common phenomenon.</span></span> <span data-ttu-id="7ed01-125">Narazíte je na mnoha rychlostních, mosty a tunely po celém světě.</span><span class="sxs-lookup"><span data-stu-id="7ed01-125">You encounter them on many expressways, bridges, and tunnels across the world.</span></span> <span data-ttu-id="7ed01-126">Každé stanici projedou má více kabin projedou.</span><span class="sxs-lookup"><span data-stu-id="7ed01-126">Each toll station has multiple toll booths.</span></span> <span data-ttu-id="7ed01-127">Na ruční kabin zastavíte platit projedou k průvodcem.</span><span class="sxs-lookup"><span data-stu-id="7ed01-127">At manual booths, you stop to pay the toll to an attendant.</span></span> <span data-ttu-id="7ed01-128">Senzor nad každý stánek na automatizované kabin kontroluje RFID kartu, která je opatřit čelního skla z vaší vehicle, jak předat stánek projedou.</span><span class="sxs-lookup"><span data-stu-id="7ed01-128">At automated booths, a sensor on top of each booth scans an RFID card that's affixed to the windshield of your vehicle as you pass the toll booth.</span></span> <span data-ttu-id="7ed01-129">Je snadné k vizualizaci průchod vozidel přes tyto stanice projedou jako datového proudu událostí za které zajímavé operace lze provádět.</span><span class="sxs-lookup"><span data-stu-id="7ed01-129">It is easy to visualize the passage of vehicles through these toll stations as an event stream over which interesting operations can be performed.</span></span>

![Obrázek automobilů na projedou kabin](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image1.jpg)

## <a name="incoming-data"></a><span data-ttu-id="7ed01-131">Příchozí data</span><span class="sxs-lookup"><span data-stu-id="7ed01-131">Incoming data</span></span>
<span data-ttu-id="7ed01-132">V tomto kurzu pracuje se dvěma datových proudů.</span><span class="sxs-lookup"><span data-stu-id="7ed01-132">This tutorial works with two streams of data.</span></span> <span data-ttu-id="7ed01-133">Nainstalovaných ve vstupu a ukončení stanice projedou vytvořit první datového proudu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-133">Sensors installed in the entrance and exit of the toll stations produce the first stream.</span></span> <span data-ttu-id="7ed01-134">Druhý datový proud je statický vyhledávání datovou sadu, která má vehicle registrační data.</span><span class="sxs-lookup"><span data-stu-id="7ed01-134">The second stream is a static lookup dataset that has vehicle registration data.</span></span>

### <a name="entry-data-stream"></a><span data-ttu-id="7ed01-135">Vstupní datový proud</span><span class="sxs-lookup"><span data-stu-id="7ed01-135">Entry data stream</span></span>
<span data-ttu-id="7ed01-136">Vstupní datový proud obsahuje informace o aut při vstupu projedou stanice.</span><span class="sxs-lookup"><span data-stu-id="7ed01-136">The entry data stream contains information about cars as they enter toll stations.</span></span>

| <span data-ttu-id="7ed01-137">TollID</span><span class="sxs-lookup"><span data-stu-id="7ed01-137">TollID</span></span> | <span data-ttu-id="7ed01-138">EntryTime</span><span class="sxs-lookup"><span data-stu-id="7ed01-138">EntryTime</span></span> | <span data-ttu-id="7ed01-139">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="7ed01-139">LicensePlate</span></span> | <span data-ttu-id="7ed01-140">Stav</span><span class="sxs-lookup"><span data-stu-id="7ed01-140">State</span></span> | <span data-ttu-id="7ed01-141">Ujistěte se</span><span class="sxs-lookup"><span data-stu-id="7ed01-141">Make</span></span> | <span data-ttu-id="7ed01-142">Model</span><span class="sxs-lookup"><span data-stu-id="7ed01-142">Model</span></span> | <span data-ttu-id="7ed01-143">VehicleType</span><span class="sxs-lookup"><span data-stu-id="7ed01-143">VehicleType</span></span> | <span data-ttu-id="7ed01-144">VehicleWeight</span><span class="sxs-lookup"><span data-stu-id="7ed01-144">VehicleWeight</span></span> | <span data-ttu-id="7ed01-145">Projedou</span><span class="sxs-lookup"><span data-stu-id="7ed01-145">Toll</span></span> | <span data-ttu-id="7ed01-146">Značka</span><span class="sxs-lookup"><span data-stu-id="7ed01-146">Tag</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="7ed01-147">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-147">1</span></span> |<span data-ttu-id="7ed01-148">2014-09-10 12:01:00.000</span><span class="sxs-lookup"><span data-stu-id="7ed01-148">2014-09-10 12:01:00.000</span></span> |<span data-ttu-id="7ed01-149">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="7ed01-149">JNB 7001</span></span> |<span data-ttu-id="7ed01-150">NY</span><span class="sxs-lookup"><span data-stu-id="7ed01-150">NY</span></span> |<span data-ttu-id="7ed01-151">Honda</span><span class="sxs-lookup"><span data-stu-id="7ed01-151">Honda</span></span> |<span data-ttu-id="7ed01-152">CRV</span><span class="sxs-lookup"><span data-stu-id="7ed01-152">CRV</span></span> |<span data-ttu-id="7ed01-153">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-153">1</span></span> |<span data-ttu-id="7ed01-154">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-154">0</span></span> |<span data-ttu-id="7ed01-155">7</span><span class="sxs-lookup"><span data-stu-id="7ed01-155">7</span></span> | |
| <span data-ttu-id="7ed01-156">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-156">1</span></span> |<span data-ttu-id="7ed01-157">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="7ed01-157">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="7ed01-158">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="7ed01-158">YXZ 1001</span></span> |<span data-ttu-id="7ed01-159">NY</span><span class="sxs-lookup"><span data-stu-id="7ed01-159">NY</span></span> |<span data-ttu-id="7ed01-160">Toyota</span><span class="sxs-lookup"><span data-stu-id="7ed01-160">Toyota</span></span> |<span data-ttu-id="7ed01-161">Camry</span><span class="sxs-lookup"><span data-stu-id="7ed01-161">Camry</span></span> |<span data-ttu-id="7ed01-162">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-162">1</span></span> |<span data-ttu-id="7ed01-163">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-163">0</span></span> |<span data-ttu-id="7ed01-164">4</span><span class="sxs-lookup"><span data-stu-id="7ed01-164">4</span></span> |<span data-ttu-id="7ed01-165">123456789</span><span class="sxs-lookup"><span data-stu-id="7ed01-165">123456789</span></span> |
| <span data-ttu-id="7ed01-166">3</span><span class="sxs-lookup"><span data-stu-id="7ed01-166">3</span></span> |<span data-ttu-id="7ed01-167">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="7ed01-167">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="7ed01-168">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="7ed01-168">ABC 1004</span></span> |<span data-ttu-id="7ed01-169">BERTE</span><span class="sxs-lookup"><span data-stu-id="7ed01-169">CT</span></span> |<span data-ttu-id="7ed01-170">Ford</span><span class="sxs-lookup"><span data-stu-id="7ed01-170">Ford</span></span> |<span data-ttu-id="7ed01-171">Taurus</span><span class="sxs-lookup"><span data-stu-id="7ed01-171">Taurus</span></span> |<span data-ttu-id="7ed01-172">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-172">1</span></span> |<span data-ttu-id="7ed01-173">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-173">0</span></span> |<span data-ttu-id="7ed01-174">5</span><span class="sxs-lookup"><span data-stu-id="7ed01-174">5</span></span> |<span data-ttu-id="7ed01-175">456789123</span><span class="sxs-lookup"><span data-stu-id="7ed01-175">456789123</span></span> |
| <span data-ttu-id="7ed01-176">2</span><span class="sxs-lookup"><span data-stu-id="7ed01-176">2</span></span> |<span data-ttu-id="7ed01-177">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="7ed01-177">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="7ed01-178">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="7ed01-178">XYZ 1003</span></span> |<span data-ttu-id="7ed01-179">BERTE</span><span class="sxs-lookup"><span data-stu-id="7ed01-179">CT</span></span> |<span data-ttu-id="7ed01-180">Toyota</span><span class="sxs-lookup"><span data-stu-id="7ed01-180">Toyota</span></span> |<span data-ttu-id="7ed01-181">Koruny</span><span class="sxs-lookup"><span data-stu-id="7ed01-181">Corolla</span></span> |<span data-ttu-id="7ed01-182">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-182">1</span></span> |<span data-ttu-id="7ed01-183">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-183">0</span></span> |<span data-ttu-id="7ed01-184">4</span><span class="sxs-lookup"><span data-stu-id="7ed01-184">4</span></span> | |
| <span data-ttu-id="7ed01-185">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-185">1</span></span> |<span data-ttu-id="7ed01-186">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="7ed01-186">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="7ed01-187">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="7ed01-187">BNJ 1007</span></span> |<span data-ttu-id="7ed01-188">NY</span><span class="sxs-lookup"><span data-stu-id="7ed01-188">NY</span></span> |<span data-ttu-id="7ed01-189">Honda</span><span class="sxs-lookup"><span data-stu-id="7ed01-189">Honda</span></span> |<span data-ttu-id="7ed01-190">CRV</span><span class="sxs-lookup"><span data-stu-id="7ed01-190">CRV</span></span> |<span data-ttu-id="7ed01-191">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-191">1</span></span> |<span data-ttu-id="7ed01-192">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-192">0</span></span> |<span data-ttu-id="7ed01-193">5</span><span class="sxs-lookup"><span data-stu-id="7ed01-193">5</span></span> |<span data-ttu-id="7ed01-194">789123456</span><span class="sxs-lookup"><span data-stu-id="7ed01-194">789123456</span></span> |
| <span data-ttu-id="7ed01-195">2</span><span class="sxs-lookup"><span data-stu-id="7ed01-195">2</span></span> |<span data-ttu-id="7ed01-196">2014-09-10 12:05:00.000</span><span class="sxs-lookup"><span data-stu-id="7ed01-196">2014-09-10 12:05:00.000</span></span> |<span data-ttu-id="7ed01-197">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="7ed01-197">CDE 1007</span></span> |<span data-ttu-id="7ed01-198">NI</span><span class="sxs-lookup"><span data-stu-id="7ed01-198">NJ</span></span> |<span data-ttu-id="7ed01-199">Toyota</span><span class="sxs-lookup"><span data-stu-id="7ed01-199">Toyota</span></span> |<span data-ttu-id="7ed01-200">4 x 4</span><span class="sxs-lookup"><span data-stu-id="7ed01-200">4x4</span></span> |<span data-ttu-id="7ed01-201">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-201">1</span></span> |<span data-ttu-id="7ed01-202">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-202">0</span></span> |<span data-ttu-id="7ed01-203">6</span><span class="sxs-lookup"><span data-stu-id="7ed01-203">6</span></span> |<span data-ttu-id="7ed01-204">321987654</span><span class="sxs-lookup"><span data-stu-id="7ed01-204">321987654</span></span> |

<span data-ttu-id="7ed01-205">Zde je stručný popis sloupce:</span><span class="sxs-lookup"><span data-stu-id="7ed01-205">Here is a short description of the columns:</span></span>

| <span data-ttu-id="7ed01-206">Sloupec</span><span class="sxs-lookup"><span data-stu-id="7ed01-206">Column</span></span> | <span data-ttu-id="7ed01-207">Popis</span><span class="sxs-lookup"><span data-stu-id="7ed01-207">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7ed01-208">TollID</span><span class="sxs-lookup"><span data-stu-id="7ed01-208">TollID</span></span> |<span data-ttu-id="7ed01-209">ID stánek projedou, která jednoznačně identifikuje stánek projedou</span><span class="sxs-lookup"><span data-stu-id="7ed01-209">The toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="7ed01-210">EntryTime</span><span class="sxs-lookup"><span data-stu-id="7ed01-210">EntryTime</span></span> |<span data-ttu-id="7ed01-211">Datum a čas položky vehicle k stánek projedou v UTC</span><span class="sxs-lookup"><span data-stu-id="7ed01-211">The date and time of entry of the vehicle to the toll booth in UTC</span></span> |
| <span data-ttu-id="7ed01-212">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="7ed01-212">LicensePlate</span></span> |<span data-ttu-id="7ed01-213">Počet registrační nástroj</span><span class="sxs-lookup"><span data-stu-id="7ed01-213">The license plate number of the vehicle</span></span> |
| <span data-ttu-id="7ed01-214">Stav</span><span class="sxs-lookup"><span data-stu-id="7ed01-214">State</span></span> |<span data-ttu-id="7ed01-215">Stav v USA</span><span class="sxs-lookup"><span data-stu-id="7ed01-215">A state in United States</span></span> |
| <span data-ttu-id="7ed01-216">Ujistěte se</span><span class="sxs-lookup"><span data-stu-id="7ed01-216">Make</span></span> |<span data-ttu-id="7ed01-217">Výrobce daného automobilu</span><span class="sxs-lookup"><span data-stu-id="7ed01-217">The manufacturer of the automobile</span></span> |
| <span data-ttu-id="7ed01-218">Model</span><span class="sxs-lookup"><span data-stu-id="7ed01-218">Model</span></span> |<span data-ttu-id="7ed01-219">Číslo modelu daného automobilu</span><span class="sxs-lookup"><span data-stu-id="7ed01-219">The model number of the automobile</span></span> |
| <span data-ttu-id="7ed01-220">VehicleType</span><span class="sxs-lookup"><span data-stu-id="7ed01-220">VehicleType</span></span> |<span data-ttu-id="7ed01-221">Buď 1 pro osobní vozidel či 2 pro komerční vozidel</span><span class="sxs-lookup"><span data-stu-id="7ed01-221">Either 1 for passenger vehicles or 2 for commercial vehicles</span></span> |
| <span data-ttu-id="7ed01-222">WeightType</span><span class="sxs-lookup"><span data-stu-id="7ed01-222">WeightType</span></span> |<span data-ttu-id="7ed01-223">Vehicle váhy v tunách; 0 pro osobní vozidel</span><span class="sxs-lookup"><span data-stu-id="7ed01-223">Vehicle weight in tons; 0 for passenger vehicles</span></span> |
| <span data-ttu-id="7ed01-224">Projedou</span><span class="sxs-lookup"><span data-stu-id="7ed01-224">Toll</span></span> |<span data-ttu-id="7ed01-225">Hodnota projedou v USD</span><span class="sxs-lookup"><span data-stu-id="7ed01-225">The toll value in USD</span></span> |
| <span data-ttu-id="7ed01-226">Značka</span><span class="sxs-lookup"><span data-stu-id="7ed01-226">Tag</span></span> |<span data-ttu-id="7ed01-227">E-Tag na automobilu, který zautomatizuje platebních; prázdné, kde je platba bylo provedeno ručně</span><span class="sxs-lookup"><span data-stu-id="7ed01-227">The e-Tag on the automobile that automates payment; blank where the payment was done manually</span></span> |

### <a name="exit-data-stream"></a><span data-ttu-id="7ed01-228">Výstupní datový proud</span><span class="sxs-lookup"><span data-stu-id="7ed01-228">Exit data stream</span></span>
<span data-ttu-id="7ed01-229">Výstupní datový proud obsahuje informace o aut ponechat projedou stanice.</span><span class="sxs-lookup"><span data-stu-id="7ed01-229">The exit data stream contains information about cars leaving the toll station.</span></span>

| <span data-ttu-id="7ed01-230">**TollId**</span><span class="sxs-lookup"><span data-stu-id="7ed01-230">**TollId**</span></span> | <span data-ttu-id="7ed01-231">**ExitTime**</span><span class="sxs-lookup"><span data-stu-id="7ed01-231">**ExitTime**</span></span> | <span data-ttu-id="7ed01-232">**LicensePlate**</span><span class="sxs-lookup"><span data-stu-id="7ed01-232">**LicensePlate**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7ed01-233">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-233">1</span></span> |<span data-ttu-id="7ed01-234">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="7ed01-234">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="7ed01-235">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="7ed01-235">JNB 7001</span></span> |
| <span data-ttu-id="7ed01-236">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-236">1</span></span> |<span data-ttu-id="7ed01-237">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="7ed01-237">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="7ed01-238">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="7ed01-238">YXZ 1001</span></span> |
| <span data-ttu-id="7ed01-239">3</span><span class="sxs-lookup"><span data-stu-id="7ed01-239">3</span></span> |<span data-ttu-id="7ed01-240">2014-09-10T12:04:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="7ed01-240">2014-09-10T12:04:00.0000000Z</span></span> |<span data-ttu-id="7ed01-241">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="7ed01-241">ABC 1004</span></span> |
| <span data-ttu-id="7ed01-242">2</span><span class="sxs-lookup"><span data-stu-id="7ed01-242">2</span></span> |<span data-ttu-id="7ed01-243">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="7ed01-243">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="7ed01-244">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="7ed01-244">XYZ 1003</span></span> |
| <span data-ttu-id="7ed01-245">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-245">1</span></span> |<span data-ttu-id="7ed01-246">2014-09-10T12:08:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="7ed01-246">2014-09-10T12:08:00.0000000Z</span></span> |<span data-ttu-id="7ed01-247">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="7ed01-247">BNJ 1007</span></span> |
| <span data-ttu-id="7ed01-248">2</span><span class="sxs-lookup"><span data-stu-id="7ed01-248">2</span></span> |<span data-ttu-id="7ed01-249">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="7ed01-249">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="7ed01-250">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="7ed01-250">CDE 1007</span></span> |

<span data-ttu-id="7ed01-251">Zde je stručný popis sloupce:</span><span class="sxs-lookup"><span data-stu-id="7ed01-251">Here is a short description of the columns:</span></span>

| <span data-ttu-id="7ed01-252">Sloupec</span><span class="sxs-lookup"><span data-stu-id="7ed01-252">Column</span></span> | <span data-ttu-id="7ed01-253">Popis</span><span class="sxs-lookup"><span data-stu-id="7ed01-253">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7ed01-254">TollID</span><span class="sxs-lookup"><span data-stu-id="7ed01-254">TollID</span></span> |<span data-ttu-id="7ed01-255">ID stánek projedou, která jednoznačně identifikuje stánek projedou</span><span class="sxs-lookup"><span data-stu-id="7ed01-255">The toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="7ed01-256">ExitTime</span><span class="sxs-lookup"><span data-stu-id="7ed01-256">ExitTime</span></span> |<span data-ttu-id="7ed01-257">Datum a čas ukončení nástroj z projedou stánek v UTC</span><span class="sxs-lookup"><span data-stu-id="7ed01-257">The date and time of exit of the vehicle from toll booth in UTC</span></span> |
| <span data-ttu-id="7ed01-258">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="7ed01-258">LicensePlate</span></span> |<span data-ttu-id="7ed01-259">Počet registrační nástroj</span><span class="sxs-lookup"><span data-stu-id="7ed01-259">The license plate number of the vehicle</span></span> |

### <a name="commercial-vehicle-registration-data"></a><span data-ttu-id="7ed01-260">Vehicle komerční registrační data</span><span class="sxs-lookup"><span data-stu-id="7ed01-260">Commercial vehicle registration data</span></span>
<span data-ttu-id="7ed01-261">Tento kurz používá statický snímek databáze komerční vehicle registrace.</span><span class="sxs-lookup"><span data-stu-id="7ed01-261">The tutorial uses a static snapshot of a commercial vehicle registration database.</span></span>

| <span data-ttu-id="7ed01-262">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="7ed01-262">LicensePlate</span></span> | <span data-ttu-id="7ed01-263">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="7ed01-263">RegistrationId</span></span> | <span data-ttu-id="7ed01-264">Platnost</span><span class="sxs-lookup"><span data-stu-id="7ed01-264">Expired</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7ed01-265">SVT 6023</span><span class="sxs-lookup"><span data-stu-id="7ed01-265">SVT 6023</span></span> |<span data-ttu-id="7ed01-266">285429838</span><span class="sxs-lookup"><span data-stu-id="7ed01-266">285429838</span></span> |<span data-ttu-id="7ed01-267">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-267">1</span></span> |
| <span data-ttu-id="7ed01-268">XLZ 3463</span><span class="sxs-lookup"><span data-stu-id="7ed01-268">XLZ 3463</span></span> |<span data-ttu-id="7ed01-269">362715656</span><span class="sxs-lookup"><span data-stu-id="7ed01-269">362715656</span></span> |<span data-ttu-id="7ed01-270">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-270">0</span></span> |
| <span data-ttu-id="7ed01-271">ZÁ 1005</span><span class="sxs-lookup"><span data-stu-id="7ed01-271">BAC 1005</span></span> |<span data-ttu-id="7ed01-272">876133137</span><span class="sxs-lookup"><span data-stu-id="7ed01-272">876133137</span></span> |<span data-ttu-id="7ed01-273">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-273">1</span></span> |
| <span data-ttu-id="7ed01-274">RIV 8632</span><span class="sxs-lookup"><span data-stu-id="7ed01-274">RIV 8632</span></span> |<span data-ttu-id="7ed01-275">992711956</span><span class="sxs-lookup"><span data-stu-id="7ed01-275">992711956</span></span> |<span data-ttu-id="7ed01-276">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-276">0</span></span> |
| <span data-ttu-id="7ed01-277">SNY 7188</span><span class="sxs-lookup"><span data-stu-id="7ed01-277">SNY 7188</span></span> |<span data-ttu-id="7ed01-278">592133890</span><span class="sxs-lookup"><span data-stu-id="7ed01-278">592133890</span></span> |<span data-ttu-id="7ed01-279">0</span><span class="sxs-lookup"><span data-stu-id="7ed01-279">0</span></span> |
| <span data-ttu-id="7ed01-280">ELH 9896</span><span class="sxs-lookup"><span data-stu-id="7ed01-280">ELH 9896</span></span> |<span data-ttu-id="7ed01-281">678427724</span><span class="sxs-lookup"><span data-stu-id="7ed01-281">678427724</span></span> |<span data-ttu-id="7ed01-282">1</span><span class="sxs-lookup"><span data-stu-id="7ed01-282">1</span></span> |

<span data-ttu-id="7ed01-283">Zde je stručný popis sloupce:</span><span class="sxs-lookup"><span data-stu-id="7ed01-283">Here is a short description of the columns:</span></span>

| <span data-ttu-id="7ed01-284">Sloupec</span><span class="sxs-lookup"><span data-stu-id="7ed01-284">Column</span></span> | <span data-ttu-id="7ed01-285">Popis</span><span class="sxs-lookup"><span data-stu-id="7ed01-285">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7ed01-286">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="7ed01-286">LicensePlate</span></span> |<span data-ttu-id="7ed01-287">Počet registrační nástroj</span><span class="sxs-lookup"><span data-stu-id="7ed01-287">The license plate number of the vehicle</span></span> |
| <span data-ttu-id="7ed01-288">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="7ed01-288">RegistrationId</span></span> |<span data-ttu-id="7ed01-289">ID registrace vehicle</span><span class="sxs-lookup"><span data-stu-id="7ed01-289">The vehicle's registration ID</span></span> |
| <span data-ttu-id="7ed01-290">Platnost</span><span class="sxs-lookup"><span data-stu-id="7ed01-290">Expired</span></span> |<span data-ttu-id="7ed01-291">Stav registrace nástroj: 0, pokud je aktivní, vehicle registrace 1, pokud platnost registrace</span><span class="sxs-lookup"><span data-stu-id="7ed01-291">The registration status of the vehicle: 0 if vehicle registration is active, 1 if registration is expired</span></span> |

## <a name="set-up-the-environment-for-azure-stream-analytics"></a><span data-ttu-id="7ed01-292">Nastavení prostředí pro Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="7ed01-292">Set up the environment for Azure Stream Analytics</span></span>
<span data-ttu-id="7ed01-293">K dokončení tohoto kurzu potřebujete předplatné Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="7ed01-293">To complete this tutorial, you need a Microsoft Azure subscription.</span></span> <span data-ttu-id="7ed01-294">Společnost Microsoft nabízí bezplatné zkušební verze pro služby Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="7ed01-294">Microsoft offers free trial for Microsoft Azure services.</span></span>

<span data-ttu-id="7ed01-295">Pokud účet Azure nemáte, můžete [požadavku bezplatná zkušební verze](http://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="7ed01-295">If you do not have an Azure account, you can [request a free trial version](http://azure.microsoft.com/pricing/free-trial/).</span></span>

> [!NOTE]
> <span data-ttu-id="7ed01-296">Chcete-li zaregistrovat k bezplatné zkušební verzi, musíte mobilní zařízení, které může přijímat textové zprávy a platná platební karta.</span><span class="sxs-lookup"><span data-stu-id="7ed01-296">To sign up for a free trial, you need a mobile device that can receive text messages and a valid credit card.</span></span>
> 
> 

<span data-ttu-id="7ed01-297">Ujistěte se, postupujte podle kroků v části "Vyčištění účtu Azure" na konci tohoto článku, tak, aby bylo možné provést doporučené použití Azure kreditu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-297">Be sure to follow the steps in the “Clean up your Azure account” section at the end of this article so that you can make the best use of your Azure credit.</span></span>

## <a name="provision-azure-resources-required-for-the-tutorial"></a><span data-ttu-id="7ed01-298">Zřízení prostředků Azure, vyžaduje se pro tento kurz</span><span class="sxs-lookup"><span data-stu-id="7ed01-298">Provision Azure resources required for the tutorial</span></span>
<span data-ttu-id="7ed01-299">Tento kurz vyžaduje dva události rozbočovače pro příjem *položka* a *ukončete* datových proudů.</span><span class="sxs-lookup"><span data-stu-id="7ed01-299">This tutorial requires two event hubs to receive *entry* and *exit* data streams.</span></span> <span data-ttu-id="7ed01-300">Azure SQL Database výstupy výsledky úlohy Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-300">Azure SQL Database outputs the results of the Stream Analytics jobs.</span></span> <span data-ttu-id="7ed01-301">Azure Storage ukládá referenční data o vehicle registrace.</span><span class="sxs-lookup"><span data-stu-id="7ed01-301">Azure Storage stores reference data about vehicle registrations.</span></span>

<span data-ttu-id="7ed01-302">Setup.ps1 skript ve složce TollApp na Githubu slouží k vytvoření všechny požadované prostředky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-302">You can use the Setup.ps1 script in the TollApp folder on GitHub to create all required resources.</span></span> <span data-ttu-id="7ed01-303">V zájmu čas doporučujeme ho spustíte.</span><span class="sxs-lookup"><span data-stu-id="7ed01-303">In the interest of time, we recommend that you run it.</span></span> <span data-ttu-id="7ed01-304">Pokud chcete získat další informace o tom, jak nakonfigurovat tyto prostředky na portálu Azure, podívejte se na Příloha "Konfigurace kurz prostředků na portálu Azure".</span><span class="sxs-lookup"><span data-stu-id="7ed01-304">If you would like to learn more about how to configure these resources in the Azure portal, refer to the “Configuring tutorial resources in Azure portal” appendix.</span></span>

<span data-ttu-id="7ed01-305">Stáhněte a uložte v podporu [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) složky a soubory.</span><span class="sxs-lookup"><span data-stu-id="7ed01-305">Download and save the supporting [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) folder and files.</span></span>

<span data-ttu-id="7ed01-306">Otevřete **Microsoft Azure PowerShell** okno *jako správce*.</span><span class="sxs-lookup"><span data-stu-id="7ed01-306">Open a **Microsoft Azure PowerShell** window *as an administrator*.</span></span> <span data-ttu-id="7ed01-307">Pokud ještě nemáte prostředí Azure PowerShell, postupujte podle pokynů v [instalace a konfigurace prostředí Azure PowerShell](/powershell/azure/overview) k její instalaci.</span><span class="sxs-lookup"><span data-stu-id="7ed01-307">If you do not yet have Azure PowerShell, follow the instructions in [Install and configure Azure PowerShell](/powershell/azure/overview) to install it.</span></span>

<span data-ttu-id="7ed01-308">Protože Windows automaticky blokuje soubory .exe, .dll a .ps1, budete muset nastavte zásady spouštění, před spuštěním skriptu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-308">Because Windows automatically blocks .ps1, .dll, and .exe files, you need to set the execution policy before you run the script.</span></span> <span data-ttu-id="7ed01-309">Zkontrolujte, že je spuštěný okno Azure PowerShell *jako správce*.</span><span class="sxs-lookup"><span data-stu-id="7ed01-309">Make sure the Azure PowerShell window is running *as an administrator*.</span></span> <span data-ttu-id="7ed01-310">Spustit **Set-ExecutionPolicy unrestricted**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-310">Run **Set-ExecutionPolicy unrestricted**.</span></span> <span data-ttu-id="7ed01-311">Po zobrazení výzvy zadejte **Y**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-311">When prompted, type **Y**.</span></span>

![Snímek obrazovky "Set-ExecutionPolicy unrestricted" spuštěné v okno Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image2.png)

<span data-ttu-id="7ed01-313">Spustit **Get-ExecutionPolicy** a ujistěte se, že příkaz fungovala.</span><span class="sxs-lookup"><span data-stu-id="7ed01-313">Run **Get-ExecutionPolicy** to make sure that the command worked.</span></span>

![Snímek obrazovky "Get-ExecutionPolicy" spuštěné v okno Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image3.png)

<span data-ttu-id="7ed01-315">Přejděte do adresáře, který má generátor aplikace a skripty.</span><span class="sxs-lookup"><span data-stu-id="7ed01-315">Go to the directory that has the scripts and generator application.</span></span>

![Snímek obrazovky "cd .\TollApp\TollApp" spuštěna v okně prostředí Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image4.png)

<span data-ttu-id="7ed01-317">Typ **.\\ Setup.ps1** nastavení účtu Azure, vytvořit a nakonfigurovat všechny požadované prostředky a začít generovat události.</span><span class="sxs-lookup"><span data-stu-id="7ed01-317">Type **.\\Setup.ps1** to set up your Azure account, create and configure all required resources, and start to generate events.</span></span> <span data-ttu-id="7ed01-318">Skript náhodně oblasti převezme vytvoření vašich prostředků.</span><span class="sxs-lookup"><span data-stu-id="7ed01-318">The script randomly picks up a region to create your resources.</span></span> <span data-ttu-id="7ed01-319">K explicitnímu zadání oblast, můžete předat **-umístění** parametr jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="7ed01-319">To explicitly specify a region, you can pass the **-location** parameter as in the following example:</span></span>

<span data-ttu-id="7ed01-320">**. \\Setup.ps1-umístění "Střed USA"**</span><span class="sxs-lookup"><span data-stu-id="7ed01-320">**.\\Setup.ps1 -location “Central US”**</span></span>

![Snímek obrazovky stránky Azure přihlášení](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image5.png)

<span data-ttu-id="7ed01-322">Skript se otevře **přihlásit** stránky pro Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="7ed01-322">The script opens the **Sign In** page for Microsoft Azure.</span></span> <span data-ttu-id="7ed01-323">Zadejte přihlašovací údaje účtu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-323">Enter your account credentials.</span></span>

> [!NOTE]
> <span data-ttu-id="7ed01-324">Pokud má váš účet přístup k více předplatných, budete vyzváni k zadání názvu odběru, který chcete použít pro tento kurz.</span><span class="sxs-lookup"><span data-stu-id="7ed01-324">If your account has access to multiple subscriptions, you will be asked to enter the subscription name that you want to use for the tutorial.</span></span>
> 
> 

<span data-ttu-id="7ed01-325">Skript může trvat několik minut.</span><span class="sxs-lookup"><span data-stu-id="7ed01-325">The script can take several minutes to run.</span></span> <span data-ttu-id="7ed01-326">Po dokončení výstup by měl vypadat jako na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-326">After it finishes, the output should look like the following screenshot.</span></span>

![Snímek obrazovky výstupu skriptu v okně prostředí Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image6.PNG)

<span data-ttu-id="7ed01-328">Zobrazí se také další okno, který je podobný na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-328">You will also see another window that's similar to the following screenshot.</span></span> <span data-ttu-id="7ed01-329">Tato aplikace je odesílání událostí do centra událostí Azure, který je vyžadován ke spuštění tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-329">This application is sending events to Azure Event Hubs, which is required to run the tutorial.</span></span> <span data-ttu-id="7ed01-330">Ano nezadávejte zastavte aplikaci, nebo toto okno zavřít, dokud nedokončíte tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-330">So, do not stop the application or close this window until you finish the tutorial.</span></span>

![Snímek obrazovky "Odesílající event hub data"](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image7.png)

<span data-ttu-id="7ed01-332">Nyní byste měli mít vašich prostředků na portálu Azure nyní zobrazeny.</span><span class="sxs-lookup"><span data-stu-id="7ed01-332">You should be able to see your resources in Azure portal now.</span></span> <span data-ttu-id="7ed01-333">Přejděte na <https://portal.azure.com>a přihlaste se pomocí přihlašovacích údajů účtu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-333">Go to <https://portal.azure.com>, and sign in with your account credentials.</span></span> <span data-ttu-id="7ed01-334">Všimněte si, že aktuálně některé funkce využívá portálu classic.</span><span class="sxs-lookup"><span data-stu-id="7ed01-334">Note that currently some functionality utilizes the classic portal.</span></span> <span data-ttu-id="7ed01-335">Tyto kroky bude jasně označen.</span><span class="sxs-lookup"><span data-stu-id="7ed01-335">These steps will be clearly indicated.</span></span>

### <a name="azure-event-hubs"></a><span data-ttu-id="7ed01-336">Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="7ed01-336">Azure Event Hubs</span></span>
<span data-ttu-id="7ed01-337">Na portálu Azure klikněte na tlačítko **další služby** na spodní části podokna levém správy.</span><span class="sxs-lookup"><span data-stu-id="7ed01-337">In the Azure portal, click **More services** on the bottom of the left management pane.</span></span> <span data-ttu-id="7ed01-338">Typ **služby Event hubs** zadané v poli a klikněte na tlačítko **služby Event hubs**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-338">Type **Event hubs** in the field provided and click **Event hubs**.</span></span> <span data-ttu-id="7ed01-339">Spustí se nové okno prohlížeče zobrazíte **SERVICE BUS** oblasti v **portálu classic**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-339">This launches a new browser window to display the **SERVICE BUS** area in the **classic portal**.</span></span> <span data-ttu-id="7ed01-340">Zde se zobrazí vytvořen skriptem Setup.ps1 centra událostí.</span><span class="sxs-lookup"><span data-stu-id="7ed01-340">Here you can see the Event Hub created by the Setup.ps1 script.</span></span>

![Service Bus](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image8.png)

<span data-ttu-id="7ed01-342">Klikněte na ten, který začíná *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="7ed01-342">Click the one that starts with *tolldata*.</span></span> <span data-ttu-id="7ed01-343">Klikněte **EVENT HUBS** kartě. Zobrazí se dva centra událostí s názvem *položka* a *ukončete* vytvořit v tomto oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="7ed01-343">Click the **EVENT HUBS** tab. You will see two event hubs named *entry* and *exit* created in this namespace.</span></span>

![Karta centra událostí portálu classic](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image9.png)

### <a name="azure-storage-container"></a><span data-ttu-id="7ed01-345">Kontejner úložiště Azure</span><span class="sxs-lookup"><span data-stu-id="7ed01-345">Azure Storage container</span></span>
1. <span data-ttu-id="7ed01-346">Přejděte zpět na kartu ve vaší otevřete prohlížeč na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="7ed01-346">Go back to the tab in your browser open to Azure portal.</span></span> <span data-ttu-id="7ed01-347">Klikněte na tlačítko **úložiště** na levé straně na portálu Azure zobrazíte kontejner Azure Storage, který je použit v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-347">Click **STORAGE** on the left side of the Azure portal to see the Azure Storage container that's used in the tutorial.</span></span>
   
    ![Položky nabídky úložiště](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image11.png)
2. <span data-ttu-id="7ed01-349">Klikněte na jeden, který bude začínat *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="7ed01-349">Click the one that start with *tolldata*.</span></span> <span data-ttu-id="7ed01-350">Klikněte **kontejnery** karty zobrazíte vytvořený kontejner.</span><span class="sxs-lookup"><span data-stu-id="7ed01-350">Click the **CONTAINERS** tab to see the created container.</span></span>
   
    ![Karta kontejnery na portálu Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image10.png)
3. <span data-ttu-id="7ed01-352">Klikněte **tolldata** kontejneru zobrazíte nahrávaný soubor JSON, který má vehicle registrační data.</span><span class="sxs-lookup"><span data-stu-id="7ed01-352">Click the **tolldata** container to see the uploaded JSON file that has vehicle registration data.</span></span>
   
    ![Snímek obrazovky registration.json soubor v kontejneru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image12.png)

### <a name="azure-sql-database"></a><span data-ttu-id="7ed01-354">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="7ed01-354">Azure SQL Database</span></span>
1. <span data-ttu-id="7ed01-355">Přejděte zpět na portál Azure na první kartě, kterou jste otevřeli v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="7ed01-355">Go back to the Azure portal on the first tab that was opened in the browser.</span></span> <span data-ttu-id="7ed01-356">Klikněte na tlačítko **databází SQL** na levé straně na portálu Azure SQL database, která se použije v tomto kurzu a klikněte na tlačítko Zobrazit **tolldatadb**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-356">Click **SQL DATABASES** on the left side of the Azure portal to see the SQL database that will be used in the tutorial and click **tolldatadb**.</span></span>
   
    ![Snímek obrazovky vytvořené databáze SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15.png)
2. <span data-ttu-id="7ed01-358">Zkopírujte název serveru bez číslo portu (*servername*. database.windows.net, např.).</span><span class="sxs-lookup"><span data-stu-id="7ed01-358">Copy the server name without the port number (*servername*.database.windows.net, for example).</span></span>
    <span data-ttu-id="7ed01-359">![Snímek obrazovky vytvoření databáze SQL db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span><span class="sxs-lookup"><span data-stu-id="7ed01-359">![Screenshot of the created SQL database db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span></span>

## <a name="connect-to-the-database-from-visual-studio"></a><span data-ttu-id="7ed01-360">Připojení k databázi ze sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7ed01-360">Connect to the database from Visual Studio</span></span>
<span data-ttu-id="7ed01-361">Pomocí sady Visual Studio pro přístup k výsledky dotazu v databázi výstup.</span><span class="sxs-lookup"><span data-stu-id="7ed01-361">Use Visual Studio to access query results in the output database.</span></span>

<span data-ttu-id="7ed01-362">Připojení k databázi SQL (cíl) ze sady Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="7ed01-362">Connect to the SQL database (the destination) from Visual Studio:</span></span>

1. <span data-ttu-id="7ed01-363">Otevřete Visual Studio a pak klikněte na tlačítko **nástroje** > **připojit k databázi**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-363">Open Visual Studio, and then click **Tools** > **Connect to Database**.</span></span>
2. <span data-ttu-id="7ed01-364">Pokud se zobrazí dotaz, klikněte na tlačítko **Microsoft SQL Server** jako zdroj dat.</span><span class="sxs-lookup"><span data-stu-id="7ed01-364">If asked, click **Microsoft SQL Server** as a data source.</span></span>
   
    ![Dialogové okno Změnit zdroj dat](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image16.png)
3. <span data-ttu-id="7ed01-366">V **název serveru** pole, vložte název, který jste zkopírovali v předchozí části z portálu Azure (to znamená, *servername*. database.windows.net).</span><span class="sxs-lookup"><span data-stu-id="7ed01-366">In the **Server name** field, paste the name that you copied in the previous section from the Azure portal (that is, *servername*.database.windows.net).</span></span>
4. <span data-ttu-id="7ed01-367">Klikněte na tlačítko **použít ověřování systému SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-367">Click **Use SQL Server Authentication**.</span></span>
5. <span data-ttu-id="7ed01-368">Zadejte **tolladmin** v **uživatelské jméno** pole a **123toll!**</span><span class="sxs-lookup"><span data-stu-id="7ed01-368">Enter **tolladmin** in the **User name** field and **123toll!**</span></span> <span data-ttu-id="7ed01-369">v **heslo** pole.</span><span class="sxs-lookup"><span data-stu-id="7ed01-369">in the **Password** field.</span></span>
6. <span data-ttu-id="7ed01-370">Klikněte na tlačítko **vyberte nebo zadejte název databáze**a vyberte **TollDataDB** jako databáze.</span><span class="sxs-lookup"><span data-stu-id="7ed01-370">Click **Select or enter a database name**, and select **TollDataDB** as the database.</span></span>
   
    ![Přidat dialogové okno připojení](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image17.jpg)
7. <span data-ttu-id="7ed01-372">Klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-372">Click **OK**.</span></span>
8. <span data-ttu-id="7ed01-373">Otevřete Průzkumníka serveru.</span><span class="sxs-lookup"><span data-stu-id="7ed01-373">Open Server Explorer.</span></span>
   
    ![Průzkumník serveru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image18.png)
9. <span data-ttu-id="7ed01-375">V tématu čtyři tabulek v databázi TollDataDB.</span><span class="sxs-lookup"><span data-stu-id="7ed01-375">See four tables in the TollDataDB database.</span></span>
   
    ![Tabulky v databázi TollDataDB](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image19.jpg)

## <a name="event-generator-tollapp-sample-project"></a><span data-ttu-id="7ed01-377">Generátor událostí: TollApp ukázkový projekt</span><span class="sxs-lookup"><span data-stu-id="7ed01-377">Event generator: TollApp sample project</span></span>
<span data-ttu-id="7ed01-378">Odesílat události pomocí programu TollApp ukázkové aplikace se automaticky spustí skript prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7ed01-378">The PowerShell script automatically starts to send events by using the TollApp sample application program.</span></span> <span data-ttu-id="7ed01-379">Nemusíte provádět žádné další kroky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-379">You don’t need to perform any additional steps.</span></span>

<span data-ttu-id="7ed01-380">Ale pokud vás zajímají podrobnosti implementace najdete zdrojový kód aplikace TollApp v Githubu [ukázky/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span><span class="sxs-lookup"><span data-stu-id="7ed01-380">However, if you are interested in implementation details, you can find the source code of the TollApp application in GitHub [samples/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span></span>

![Snímek obrazovky ukázkový kód zobrazený v sadě Visual Studio](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image20.png)

## <a name="create-a-stream-analytics-job"></a><span data-ttu-id="7ed01-382">Vytvoření úlohy Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="7ed01-382">Create a Stream Analytics job</span></span>
1. <span data-ttu-id="7ed01-383">Na portálu Azure klikněte na zelenou znaménko plus v levém horním rohu stránky vytvořte novou úlohu služby Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-383">In the Azure portal, click the green plus sign in the top-left corner of the page to create a new Stream Analytics job.</span></span> <span data-ttu-id="7ed01-384">Vyberte **Intelligence + analýzy** a pak klikněte na **úlohy služby Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-384">Select **Intelligence + Analytics** and then click **Stream Analytics job**.</span></span>
   
    ![tlačítko Nový](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image21.png)
2. <span data-ttu-id="7ed01-386">Zadejte název úlohy, ověření předplatného opravte a potom vytvořit novou skupinu prostředků ve stejné oblasti jako úložiště centra událostí (výchozí hodnota je jihu USA pro skript).</span><span class="sxs-lookup"><span data-stu-id="7ed01-386">Provide a job name, validate the subscription is correct and then create a new Resource group in the same region as the Event hub storage (default is South Central US for the script).</span></span>
3. <span data-ttu-id="7ed01-387">Klikněte na tlačítko **připnout na řídicí panel** a potom **vytvořit** v dolní části stránky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-387">Click **Pin to dashboard** and then **CREATE** at the bottom of the page.</span></span>
   
    ![Vytvoření úlohy Stream Analytics možnost](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image22.png)

## <a name="define-input-sources"></a><span data-ttu-id="7ed01-389">Definování vstupních zdrojů</span><span class="sxs-lookup"><span data-stu-id="7ed01-389">Define input sources</span></span>
1. <span data-ttu-id="7ed01-390">Úloha vytvoří a otevře stránka úlohy.</span><span class="sxs-lookup"><span data-stu-id="7ed01-390">The job will create and open the job page.</span></span> <span data-ttu-id="7ed01-391">Nebo můžete kliknout na úlohy vytvořené analytics na řídicím panelu portálu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-391">Or you can click the created analytics job on the portal dashboard.</span></span>

2. <span data-ttu-id="7ed01-392">Klikněte **VSTUPY** a definujte zdrojová data.</span><span class="sxs-lookup"><span data-stu-id="7ed01-392">Click the **INPUTS** tab to define the source data.</span></span>
   
    ![Na kartě vstupy](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image24.png)
3. <span data-ttu-id="7ed01-394">Klikněte na tlačítko **přidat vstup**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-394">Click **ADD AN INPUT**.</span></span>
   
    ![Přidat vstup možnost](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image25.png)
4. <span data-ttu-id="7ed01-396">Zadejte **EntryStream** jako **vstupní ALIAS**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-396">Enter **EntryStream** as **INPUT ALIAS**.</span></span>
5. <span data-ttu-id="7ed01-397">Typ zdroje je **datový proud**</span><span class="sxs-lookup"><span data-stu-id="7ed01-397">Source Type is **Data Stream**</span></span>
6. <span data-ttu-id="7ed01-398">Zdroj je **centra událostí**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-398">Source is **Event hub**.</span></span>
7. <span data-ttu-id="7ed01-399">**Obor názvů sběrnice** TollData, jeden v rozevírací by měla být mimo provoz.</span><span class="sxs-lookup"><span data-stu-id="7ed01-399">**Service bus namespace** should be the TollData one in the drop down.</span></span>
8. <span data-ttu-id="7ed01-400">**Název centra událostí** musí být nastavena na **položka**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-400">**Event hub name** should be set to **entry**.</span></span>
9. <span data-ttu-id="7ed01-401">**Název zásady centra událostí*je **RootManageSharedAccessKey** (výchozí hodnota).</span><span class="sxs-lookup"><span data-stu-id="7ed01-401">**Event hub policy name*is **RootManageSharedAccessKey**  (the default value).</span></span>
10. <span data-ttu-id="7ed01-402">Vyberte **JSON** pro **formát SERIALIZACE událostí** a **UTF8** pro **kódování**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-402">Select **JSON** for **EVENT SERIALIZATION FORMAT** and **UTF8** for **ENCODING**.</span></span>
   
    <span data-ttu-id="7ed01-403">Nastavení bude vypadat jako:</span><span class="sxs-lookup"><span data-stu-id="7ed01-403">Your settings will look like:</span></span>
   
    ![Nastavení centra událostí](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image28.png)

10. <span data-ttu-id="7ed01-405">Klikněte na tlačítko **vytvořit** v dolní části stránky průvodce ukončíte.</span><span class="sxs-lookup"><span data-stu-id="7ed01-405">Click **Create** at the bottom of the page to finish the wizard.</span></span>
    
    <span data-ttu-id="7ed01-406">Teď, když jste vytvořili vstupní datový proud, postupujte podle stejných kroků vytvořte výstupní datový proud.</span><span class="sxs-lookup"><span data-stu-id="7ed01-406">Now that you've created the entry stream, you will follow the same steps to create the exit stream.</span></span> <span data-ttu-id="7ed01-407">Ujistěte se, že zadejte hodnoty jako na následujícím snímku obrazovky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-407">Be sure to enter values as on the following screenshot.</span></span>
    
    ![Nastavení pro výstupní datový proud](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image31.png)
    
    <span data-ttu-id="7ed01-409">Jste definovali dva vstupní datové proudy:</span><span class="sxs-lookup"><span data-stu-id="7ed01-409">You have defined two input streams:</span></span>
    
    ![Definované vstupní datové proudy na portálu Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image32.png)
    
    <span data-ttu-id="7ed01-411">V dalším kroku přidáte referenčního datového vstupu pro objekt blob, který obsahuje car registrační data.</span><span class="sxs-lookup"><span data-stu-id="7ed01-411">Next, you will add reference data input for the blob file that contains car registration data.</span></span>
11. <span data-ttu-id="7ed01-412">Klikněte na tlačítko **přidat**a pak opakujte stejný postup pro datový proud vstupy ale vyberte **referenční DATA** místo **datový proud** a **vstupní Alias** je **registrace**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-412">Click **ADD**, and then follow the same process for the stream inputs but select **REFERENCE DATA** instead of **Data Stream** and the **Input Alias** is **Registration**.</span></span>

12. <span data-ttu-id="7ed01-413">účet úložiště, který začíná **tolldata**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-413">storage account that starts with **tolldata**.</span></span> <span data-ttu-id="7ed01-414">Název kontejneru musí být **tolldata**a **vzorek cesty** by měla být **registration.json**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-414">The container name should be **tolldata**, and the **PATH PATTERN** should be **registration.json**.</span></span> <span data-ttu-id="7ed01-415">Tento název souboru je velká a malá písmena a musí být **malá**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-415">This file name is case sensitive and should be **lowercase**.</span></span>
    
    ![Nastavení úložiště blog](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image34.png)
13. <span data-ttu-id="7ed01-417">Klikněte na tlačítko **vytvořit** ukončíte průvodce.</span><span class="sxs-lookup"><span data-stu-id="7ed01-417">Click **Create** to finish the wizard.</span></span>

<span data-ttu-id="7ed01-418">Nyní jsou definovány všechny vstupy.</span><span class="sxs-lookup"><span data-stu-id="7ed01-418">Now all inputs are defined.</span></span>

## <a name="define-output"></a><span data-ttu-id="7ed01-419">Definujte výstupní</span><span class="sxs-lookup"><span data-stu-id="7ed01-419">Define output</span></span>
1. <span data-ttu-id="7ed01-420">V podokně přehled úlohy Stream Analytics vyberte **výstupy**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-420">On the Stream Analytics job overview pane, select **OUTPUTS**.</span></span>
   
    ![Karta Výstup a možnost "Přidat výstup"](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image37.png)
2. <span data-ttu-id="7ed01-422">Klikněte na tlačítko **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-422">Click **Add**.</span></span>
3. <span data-ttu-id="7ed01-423">Nastavte **alias pro výstup** k "výstupní" a potom **jímky** k **databáze SQL**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-423">Set the **Output alias** to 'output' and then **Sink** to **SQL database**.</span></span>
3. <span data-ttu-id="7ed01-424">Vyberte název serveru, který se používal v části "Připojení k databázi ze sady Visual Studio" v článku.</span><span class="sxs-lookup"><span data-stu-id="7ed01-424">Select the server name that was used in the “Connect to Database from Visual Studio” section of the article.</span></span> <span data-ttu-id="7ed01-425">Název databáze je **TollDataDB**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-425">The database name is **TollDataDB**.</span></span>
4. <span data-ttu-id="7ed01-426">Zadejte **tolladmin** v **uživatelské jméno** pole, **123toll!**</span><span class="sxs-lookup"><span data-stu-id="7ed01-426">Enter **tolladmin** in the **USERNAME** field, **123toll!**</span></span> <span data-ttu-id="7ed01-427">v **heslo** pole, a **TollDataRefJoin** v **tabulky** pole.</span><span class="sxs-lookup"><span data-stu-id="7ed01-427">in the **PASSWORD** field, and **TollDataRefJoin** in the **TABLE** field.</span></span>
   
    ![Nastavení databáze SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image38.png)
5. <span data-ttu-id="7ed01-429">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-429">Click **Create**.</span></span>

## <a name="azure-stream-analytics-query"></a><span data-ttu-id="7ed01-430">Azure Stream analytics dotazu</span><span class="sxs-lookup"><span data-stu-id="7ed01-430">Azure Stream analytics query</span></span>
<span data-ttu-id="7ed01-431">**Dotazu** karta obsahuje dotaz SQL, který transformuje příchozí data.</span><span class="sxs-lookup"><span data-stu-id="7ed01-431">The **QUERY** tab contains a SQL query that transforms the incoming data.</span></span>

![Dotaz, přidat na kartu dotaz](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image39.png)

<span data-ttu-id="7ed01-433">V tomto kurzu se pokusí odpovězte několik obchodní otázky, které se vztahují k datům a konstrukce Stream Analytics dotazy, které lze použít v Azure Stream Analytics k poskytování příslušných odpovědí pro výběr poplatků.</span><span class="sxs-lookup"><span data-stu-id="7ed01-433">This tutorial attempts to answer several business questions that are related to toll data and constructs Stream Analytics queries that can be used in Azure Stream Analytics to provide a relevant answer.</span></span>

<span data-ttu-id="7ed01-434">Než začnete vaše první práce Stream Analytics, podíváme se na několik scénářů a syntaxe dotazu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-434">Before you start your first Stream Analytics job, let’s explore a few scenarios and the query syntax.</span></span>

## <a name="introduction-to-azure-stream-analytics-query-language"></a><span data-ttu-id="7ed01-435">Úvod do Azure Stream Analytics query language</span><span class="sxs-lookup"><span data-stu-id="7ed01-435">Introduction to Azure Stream Analytics query language</span></span>
- - -
<span data-ttu-id="7ed01-436">Řekněme, že je potřeba počítat počet vozidel, které projedou stánek zadejte.</span><span class="sxs-lookup"><span data-stu-id="7ed01-436">Let’s say that you need to count the number of vehicles that enter a toll booth.</span></span> <span data-ttu-id="7ed01-437">Protože to je nepřetržitý proud událostí, musíte definovat "v časovém intervalu."</span><span class="sxs-lookup"><span data-stu-id="7ed01-437">Because this is a continuous stream of events, you have to define a “period of time.”</span></span> <span data-ttu-id="7ed01-438">Pojďme upravit dotaz a "jak množství prostředků zadejte projedou stánek každé tři minuty?".</span><span class="sxs-lookup"><span data-stu-id="7ed01-438">Let's modify the question to be “How many vehicles enter a toll booth every three minutes?”.</span></span> <span data-ttu-id="7ed01-439">To se obvykle označuje jako počet přeskakující.</span><span class="sxs-lookup"><span data-stu-id="7ed01-439">This is commonly referred to as the tumbling count.</span></span>

<span data-ttu-id="7ed01-440">Podívejme se na Azure Stream Analytics dotaz, který odpoví na tuto otázku:</span><span class="sxs-lookup"><span data-stu-id="7ed01-440">Let’s look at the Azure Stream Analytics query that answers this question:</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*) AS Count
    FROM EntryStream TIMESTAMP BY EntryTime
    GROUP BY TUMBLINGWINDOW(minute, 3), TollId

<span data-ttu-id="7ed01-441">Jak vidíte, Azure Stream Analytics používá dotazovací jazyk, který je například SQL a přidává několik rozšíření k určení souvisejících s časem aspekty dotazu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-441">As you can see, Azure Stream Analytics uses a query language that's like SQL and adds a few extensions to specify time-related aspects of the query.</span></span>

<span data-ttu-id="7ed01-442">Další podrobnosti najdete v tématu o [Správa času](https://msdn.microsoft.com/library/azure/mt582045.aspx) a [Oddílová](https://msdn.microsoft.com/library/azure/dn835019.aspx) konstrukce použitý v dotazu z webu MSDN.</span><span class="sxs-lookup"><span data-stu-id="7ed01-442">For more details, read about [Time Management](https://msdn.microsoft.com/library/azure/mt582045.aspx) and [Windowing](https://msdn.microsoft.com/library/azure/dn835019.aspx) constructs used in the query from MSDN.</span></span>

## <a name="testing-azure-stream-analytics-queries"></a><span data-ttu-id="7ed01-443">Testování dotazů Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="7ed01-443">Testing Azure Stream Analytics queries</span></span>
<span data-ttu-id="7ed01-444">Teď, když jste napsali svůj první dotaz Azure Stream Analytics, je třeba otestovat pomocí ukázkových datových souborů umístěné ve složce TollApp v následující cestě:</span><span class="sxs-lookup"><span data-stu-id="7ed01-444">Now that you have written your first Azure Stream Analytics query, it is time to test it by using sample data files located in your TollApp folder in the following path:</span></span>

<span data-ttu-id="7ed01-445">**.. \\TollApp\\TollApp\\dat**</span><span class="sxs-lookup"><span data-stu-id="7ed01-445">**..\\TollApp\\TollApp\\Data**</span></span>

<span data-ttu-id="7ed01-446">Tato složka obsahuje následující soubory:</span><span class="sxs-lookup"><span data-stu-id="7ed01-446">This folder contains the following files:</span></span>

* <span data-ttu-id="7ed01-447">Entry.JSON</span><span class="sxs-lookup"><span data-stu-id="7ed01-447">Entry.json</span></span>
* <span data-ttu-id="7ed01-448">Exit.JSON</span><span class="sxs-lookup"><span data-stu-id="7ed01-448">Exit.json</span></span>
* <span data-ttu-id="7ed01-449">Registration.JSON</span><span class="sxs-lookup"><span data-stu-id="7ed01-449">Registration.json</span></span>

## <a name="question-1-number-of-vehicles-entering-a-toll-booth"></a><span data-ttu-id="7ed01-450">Otázka č. 1: Počet vozidel zadávání stánek projedou</span><span class="sxs-lookup"><span data-stu-id="7ed01-450">Question 1: Number of vehicles entering a toll booth</span></span>
1. <span data-ttu-id="7ed01-451">Otevřete portál Azure a přejděte na vytvořenou úlohu Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-451">Open the Azure portal and go to your created Azure Stream Analytics job.</span></span> <span data-ttu-id="7ed01-452">Klikněte **dotazu** kartě a vložte dotaz z předchozí části.</span><span class="sxs-lookup"><span data-stu-id="7ed01-452">Click the **QUERY** tab and paste query from the previous section.</span></span>

2. <span data-ttu-id="7ed01-453">K ověření tohoto dotazu proti ukázková data, nahrát data do vstupu EntryStream kliknutím... symbolů a výběr **nahrát ukázková data ze souboru**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-453">To validate this query against sample data, upload the data into the EntryStream input by clicking the ... symbol and selecting **Upload sample data from file**.</span></span>

    ![Snímek obrazovky Entry.json souboru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image41.png)
3. <span data-ttu-id="7ed01-455">V podokně se zobrazí, vyberte soubor (Entry.json) na místním počítači a klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-455">In the pane that appears select the file (Entry.json) on your local machine and click **OK**.</span></span> <span data-ttu-id="7ed01-456">**Test** ikonu teď osvětlení a možné klepnout.</span><span class="sxs-lookup"><span data-stu-id="7ed01-456">The **Test** icon will now illuminate and be clickable.</span></span>
   
    ![Snímek obrazovky Entry.json souboru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image42.png)
3. <span data-ttu-id="7ed01-458">Ověřte, že výstup dotaz podle očekávání:</span><span class="sxs-lookup"><span data-stu-id="7ed01-458">Validate that the output of the query is as expected:</span></span>
   
    ![Výsledky testu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image43.png)

## <a name="question-2-report-total-time-for-each-car-to-pass-through-the-toll-booth"></a><span data-ttu-id="7ed01-460">Otázka č. 2: Sestava celkovou dobu pro každý car předávat stánek projedou</span><span class="sxs-lookup"><span data-stu-id="7ed01-460">Question 2: Report total time for each car to pass through the toll booth</span></span>
<span data-ttu-id="7ed01-461">Průměrná doba, které je nutné pro automobilu předávat projedou pomáhá vyhodnocení efektivitu proces a zkušeností zákazníků.</span><span class="sxs-lookup"><span data-stu-id="7ed01-461">The average time that's required for a car to pass through the toll helps to assess the efficiency of the process and the customer experience.</span></span>

<span data-ttu-id="7ed01-462">Najít celkovou dobu, je nutné připojit datový proud EntryTime s ExitTime datového proudu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-462">To find the total time, you need to join the EntryTime stream with the ExitTime stream.</span></span> <span data-ttu-id="7ed01-463">Datové proudy pro TollId a LicencePlate sloupce se připojí.</span><span class="sxs-lookup"><span data-stu-id="7ed01-463">You will join the streams on TollId and LicencePlate columns.</span></span> <span data-ttu-id="7ed01-464">**Připojení** operátor vyžaduje, abyste zadejte dočasné volnost, který popisuje přijatelný časový rozdíl mezi připojené k události.</span><span class="sxs-lookup"><span data-stu-id="7ed01-464">The **JOIN** operator requires you to specify temporal leeway that describes the acceptable time difference between the joined events.</span></span> <span data-ttu-id="7ed01-465">Budete používat **DATEDIFF** funkce k určení, že události musí být delší než 15 minut od sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="7ed01-465">You will use **DATEDIFF** function to specify that events should be no more than 15 minutes from each other.</span></span> <span data-ttu-id="7ed01-466">Také použijete **DATEDIFF** funkce ukončíte a časy položku k výpočtu skutečnou času stráví automobilu projedou stanice.</span><span class="sxs-lookup"><span data-stu-id="7ed01-466">You will also apply the **DATEDIFF** function to exit and entry times to compute the actual time that a car spends in the toll station.</span></span> <span data-ttu-id="7ed01-467">Všimněte si rozdílu použití **DATEDIFF** při použití v **vyberte** příkaz ne **připojení** podmínku.</span><span class="sxs-lookup"><span data-stu-id="7ed01-467">Note the difference of the use of **DATEDIFF** when it's used in a **SELECT** statement rather than a **JOIN** condition.</span></span>

    SELECT EntryStream.TollId, EntryStream.EntryTime, ExitStream.ExitTime, EntryStream.LicensePlate, DATEDIFF (minute , EntryStream.EntryTime, ExitStream.ExitTime) AS DurationInMinutes
    FROM EntryStream TIMESTAMP BY EntryTime
    JOIN ExitStream TIMESTAMP BY ExitTime
    ON (EntryStream.TollId= ExitStream.TollId AND EntryStream.LicensePlate = ExitStream.LicensePlate)
    AND DATEDIFF (minute, EntryStream, ExitStream ) BETWEEN 0 AND 15

1. <span data-ttu-id="7ed01-468">K otestování tohoto dotazu, aktualizovat dotaz na **dotazu** pro úlohu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-468">To test this query, update the query on the **QUERY** for the job.</span></span> <span data-ttu-id="7ed01-469">Přidejte soubor testu pro **ExitStream** stejně jako **EntryStream** byla zadaná výše.</span><span class="sxs-lookup"><span data-stu-id="7ed01-469">Add the test file for **ExitStream** just like **EntryStream** was entered above.</span></span>
   
2. <span data-ttu-id="7ed01-470">Klikněte na tlačítko **Test**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-470">Click **Test**.</span></span>

3. <span data-ttu-id="7ed01-471">Zaškrtněte políčko Zobrazit výstup a otestujte dotaz:</span><span class="sxs-lookup"><span data-stu-id="7ed01-471">Select the check box to test the query and view the output:</span></span>
   
    ![Výstup testu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image45.png)

## <a name="question-3-report-all-commercial-vehicles-with-expired-registration"></a><span data-ttu-id="7ed01-473">Otázka č. 3: Sestavy všech komerční vozidel s vypršenou platností registrace</span><span class="sxs-lookup"><span data-stu-id="7ed01-473">Question 3: Report all commercial vehicles with expired registration</span></span>
<span data-ttu-id="7ed01-474">Azure Stream Analytics můžete použít statické snímky dat spojení s dočasné datové proudy.</span><span class="sxs-lookup"><span data-stu-id="7ed01-474">Azure Stream Analytics can use static snapshots of data to join with temporal data streams.</span></span> <span data-ttu-id="7ed01-475">K předvedení tato možnost, použijte následující ukázkový dotaz.</span><span class="sxs-lookup"><span data-stu-id="7ed01-475">To demonstrate this capability, use the following sample question.</span></span>

<span data-ttu-id="7ed01-476">Pokud komerční vehicle je registrován ve společnosti projedou, můžete předat prostřednictvím stánek projedou bez zastavení pro kontroly.</span><span class="sxs-lookup"><span data-stu-id="7ed01-476">If a commercial vehicle is registered with the toll company, it can pass through the toll booth without being stopped for inspection.</span></span> <span data-ttu-id="7ed01-477">Registrace komerční Vehicle vyhledávací tabulky budete používat k identifikaci všech vozidel komerční, jejichž platnost vypršela registrace.</span><span class="sxs-lookup"><span data-stu-id="7ed01-477">You will use Commercial Vehicle Registration lookup table to identify all commercial vehicles that have expired registrations.</span></span>

```
SELECT EntryStream.EntryTime, EntryStream.LicensePlate, EntryStream.TollId, Registration.RegistrationId
FROM EntryStream TIMESTAMP BY EntryTime
JOIN Registration
ON EntryStream.LicensePlate = Registration.LicensePlate
WHERE Registration.Expired = '1'
```

<span data-ttu-id="7ed01-478">Při testování dotazu pomocí referenční data, musíte definovat vstupní zdroj pro referenční data, která jste již dokončili.</span><span class="sxs-lookup"><span data-stu-id="7ed01-478">To test a query by using reference data, you need to define an input source for the reference data, which you have done already.</span></span>

<span data-ttu-id="7ed01-479">K otestování tohoto dotazu, vložte dotaz do **dotazu** , klikněte na **testování**a určete dvou vstupních zdrojů a registraci vzorová data a klikněte na tlačítko **testování**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-479">To test this query, paste the query into the **QUERY** tab, click **Test**, and specify the two input sources and the registration sample data and click **Test**.</span></span>  
   
![Výstup testu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image46.png)

## <a name="start-the-stream-analytics-job"></a><span data-ttu-id="7ed01-481">Spustit úlohu služby Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="7ed01-481">Start the Stream Analytics job</span></span>
<span data-ttu-id="7ed01-482">Nyní je čas na dokončení konfigurace a spustit úlohu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-482">Now it's time to finish the configuration and start the job.</span></span> <span data-ttu-id="7ed01-483">Uložení dotazu z 3 otázku, která vytvoří výstupu, který odpovídá schématu **TollDataRefJoin** výstupní tabulka.</span><span class="sxs-lookup"><span data-stu-id="7ed01-483">Save the query from Question 3, which will produce output that matches the schema of the **TollDataRefJoin** output table.</span></span>

<span data-ttu-id="7ed01-484">Přejděte do úlohy **řídicí panel**a klikněte na tlačítko **spustit**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-484">Go to the job **DASHBOARD**, and click **START**.</span></span>

![Snímek obrazovky tlačítka Start na řídicím panelu úlohy](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image48.png)

<span data-ttu-id="7ed01-486">V dialogovém okně, které se otevře, změňte **spustit výstup** čas k **vlastní čas**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-486">In the dialog box that opens, change the **START OUTPUT** time to **CUSTOM TIME**.</span></span> <span data-ttu-id="7ed01-487">Změňte hodinu na jednu hodinu před aktuálním časem.</span><span class="sxs-lookup"><span data-stu-id="7ed01-487">Change the hour to one hour before the current time.</span></span> <span data-ttu-id="7ed01-488">Tato změna zajistí, že všechny události z centra událostí jsou zpracovány od spuštění k vygenerování události na začátku tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-488">This change ensures that all events from the event hub are processed since you started to generate the events at the beginning of the tutorial.</span></span> <span data-ttu-id="7ed01-489">Klikněte na tlačítko **spustit** tlačítko Spustit úlohu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-489">Now click the **Start** button to start the job.</span></span>

![Výběr vlastních času](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image49.png)

<span data-ttu-id="7ed01-491">Spouštění úlohy může trvat několik minut.</span><span class="sxs-lookup"><span data-stu-id="7ed01-491">Starting the job can take a few minutes.</span></span> <span data-ttu-id="7ed01-492">Stav můžete zobrazit na stránce nejvyšší úrovně pro Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-492">You can see the status on the top-level page for Stream Analytics.</span></span>

![Snímek obrazovky stav úlohy](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image50.png)

## <a name="check-results-in-visual-studio"></a><span data-ttu-id="7ed01-494">Výsledky kontroly v sadě Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7ed01-494">Check results in Visual Studio</span></span>
1. <span data-ttu-id="7ed01-495">Otevřete Průzkumníka serveru Visual Studia a klikněte pravým tlačítkem myši **TollDataRefJoin** tabulky.</span><span class="sxs-lookup"><span data-stu-id="7ed01-495">Open Visual Studio Server Explorer, and right-click the **TollDataRefJoin** table.</span></span>
2. <span data-ttu-id="7ed01-496">Klikněte na tlačítko **zobrazit Data tabulky** na zobrazení výstupu úlohy.</span><span class="sxs-lookup"><span data-stu-id="7ed01-496">Click **Show Table Data** to see the output of your job.</span></span>
   
    ![Výběr "Zobrazit tabulku Data" v Průzkumníku serveru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image51.jpg)

## <a name="scale-out-azure-stream-analytics-jobs"></a><span data-ttu-id="7ed01-498">Horizontální navýšení kapacity Azure Stream Analytics úlohy</span><span class="sxs-lookup"><span data-stu-id="7ed01-498">Scale out Azure Stream Analytics jobs</span></span>
<span data-ttu-id="7ed01-499">Azure Stream Analytics je určena pro pružně škálování tak, aby ho může zpracovávat velké množství dat.</span><span class="sxs-lookup"><span data-stu-id="7ed01-499">Azure Stream Analytics is designed to elastically scale so that it can handle a lot of data.</span></span> <span data-ttu-id="7ed01-500">Můžete použít Azure Stream Analytics dotaz **PARTITION BY** klauzule systému říct, že bude tento krok škálovat. **PartitionId** je speciální sloupec, který přidá systému tak, aby odpovídaly ID oddílu vstupu (Centrum událostí).</span><span class="sxs-lookup"><span data-stu-id="7ed01-500">The Azure Stream Analytics query can use a **PARTITION BY** clause to tell the system that this step will scale out. **PartitionId** is a special column that the system adds to match the partition ID of the input (event hub).</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*)AS Count
    FROM EntryStream TIMESTAMP BY EntryTime PARTITION BY PartitionId
    GROUP BY TUMBLINGWINDOW(minute,3), TollId, PartitionId

1. <span data-ttu-id="7ed01-501">Zastavení aktuální úlohy, aktualizaci dotazu ve **dotazu** a otevřete **nastavení** zařízení na řídicím panelu úloh.</span><span class="sxs-lookup"><span data-stu-id="7ed01-501">Stop the current job, update the query in the **QUERY** tab, and open the **Settings** gear in the job dashboard.</span></span> <span data-ttu-id="7ed01-502">Klikněte na tlačítko **škálování**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-502">Click **Scale**.</span></span>
   
    <span data-ttu-id="7ed01-503">**JEDNOTEK STREAMING** definovat množství výpočetního výkonu, který může přijímat úlohy.</span><span class="sxs-lookup"><span data-stu-id="7ed01-503">**STREAMING UNITS** define the amount of compute power that the job can receive.</span></span>
2. <span data-ttu-id="7ed01-504">Změňte rozevíracího z 1 z verze 6.</span><span class="sxs-lookup"><span data-stu-id="7ed01-504">Change the drop down from 1 from 6.</span></span>
   
    ![Snímek obrazovky výběru 6 jednotky streamování](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image52.png)
3. <span data-ttu-id="7ed01-506">Přejděte na **výstupy** kartě a změňte název tabulky SQL na **TollDataTumblingCountPartitioned**.</span><span class="sxs-lookup"><span data-stu-id="7ed01-506">Go to the **OUTPUTS** tab and change the name of the SQL table to **TollDataTumblingCountPartitioned**.</span></span>

<span data-ttu-id="7ed01-507">Je-li spustit úlohu nyní může Azure Stream Analytics rozložení práce mezi víc zdrojích výpočtů a dosáhnout lepší propustnosti.</span><span class="sxs-lookup"><span data-stu-id="7ed01-507">If you start the job now, Azure Stream Analytics can distribute work across more compute resources and achieve better throughput.</span></span> <span data-ttu-id="7ed01-508">Upozorňujeme, že aplikace TollApp také odesílá události podle TollId na oddíly.</span><span class="sxs-lookup"><span data-stu-id="7ed01-508">Please note that the TollApp application is also sending events partitioned by TollId.</span></span>

## <a name="monitor"></a><span data-ttu-id="7ed01-509">Monitorování</span><span class="sxs-lookup"><span data-stu-id="7ed01-509">Monitor</span></span>
<span data-ttu-id="7ed01-510">**Monitorování** oblast obsahuje statistiku spuštěná úloha.</span><span class="sxs-lookup"><span data-stu-id="7ed01-510">The **MONITOR** area contains statistics about the running job.</span></span> <span data-ttu-id="7ed01-511">Prvním konfigurace je potřeba k použití úložiště účet ve stejné oblasti (název poplatků jako zbytek tohoto dokumentu).</span><span class="sxs-lookup"><span data-stu-id="7ed01-511">First time configuration is needed to use the storage account in the same region (name toll like the rest of this document).</span></span>   

![Snímek obrazovky monitorování](media/stream-analytics-build-an-iot-solution-using-stream-analytics/monitoring.png)

<span data-ttu-id="7ed01-513">Dostanete **protokoly aktivity** z řídicího panelu úloha **nastavení** také oblasti.</span><span class="sxs-lookup"><span data-stu-id="7ed01-513">You can access **Activity Logs** from the job dashboard **Settings** area as well.</span></span>


## <a name="conclusion"></a><span data-ttu-id="7ed01-514">Závěr</span><span class="sxs-lookup"><span data-stu-id="7ed01-514">Conclusion</span></span>
<span data-ttu-id="7ed01-515">V tomto kurzu jste zavedly ve službě Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-515">This tutorial introduced you to the Azure Stream Analytics service.</span></span> <span data-ttu-id="7ed01-516">Je prokázat, jak nakonfigurovat vstupy a výstupy úlohy Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-516">It demonstrated how to configure inputs and outputs for the Stream Analytics job.</span></span> <span data-ttu-id="7ed01-517">Pomocí dat Projedou scénář, kurz popsaných nejběžnějších problémů, které jsou vyvolány v prostoru dat v provozu a jak lze vyřešit pomocí jednoduchého dotazy podobné jazyku SQL v Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-517">Using the Toll Data scenario, the tutorial explained common types of problems that arise in the space of data in motion and how they can be solved with simple SQL-like queries in Azure Stream Analytics.</span></span> <span data-ttu-id="7ed01-518">Tento kurz popisuje konstrukce rozšíření SQL pro práci s dočasná data.</span><span class="sxs-lookup"><span data-stu-id="7ed01-518">The tutorial described SQL extension constructs for working with temporal data.</span></span> <span data-ttu-id="7ed01-519">Vám ukázal, jak propojit datové proudy, jak zlepšit komunikaci oddělení datový proud s statická referenční data a postup škálování dotazů k dosažení vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="7ed01-519">It showed how to join data streams, how to enrich the data stream with static reference data, and how to scale out a query to achieve higher throughput.</span></span>

<span data-ttu-id="7ed01-520">I když tento kurz představuje dobrou úvod, není kompletní, a to jakýmkoli způsobem.</span><span class="sxs-lookup"><span data-stu-id="7ed01-520">Although this tutorial provides a good introduction, it is not complete by any means.</span></span> <span data-ttu-id="7ed01-521">Můžete najít další typy dotazů pomocí jazyka SAQL v [dotaz příkladů běžných vzorů využití Stream Analytics](stream-analytics-stream-analytics-query-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="7ed01-521">You can find more query patterns using the SAQL language at [Query examples for common Stream Analytics usage patterns](stream-analytics-stream-analytics-query-patterns.md).</span></span>
<span data-ttu-id="7ed01-522">Odkazovat [online dokumentaci](https://azure.microsoft.com/documentation/services/stream-analytics/) Další informace o Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7ed01-522">Refer to the [online documentation](https://azure.microsoft.com/documentation/services/stream-analytics/) to learn more about Azure Stream Analytics.</span></span>

## <a name="clean-up-your-azure-account"></a><span data-ttu-id="7ed01-523">Vyčištění účtu Azure</span><span class="sxs-lookup"><span data-stu-id="7ed01-523">Clean up your Azure account</span></span>
1. <span data-ttu-id="7ed01-524">Zastavte úlohu služby Stream Analytics na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="7ed01-524">Stop the Stream Analytics job in the Azure portal.</span></span>
   
    <span data-ttu-id="7ed01-525">Skript Setup.ps1 vytvoří dvě centrům událostí a databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="7ed01-525">The Setup.ps1 script creates two event hubs and a SQL database.</span></span> <span data-ttu-id="7ed01-526">Následující pokyny vám pomůžou vyčištění prostředků na konci tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="7ed01-526">The following instructions help you clean up resources at the end of the tutorial.</span></span>
2. <span data-ttu-id="7ed01-527">V okně prostředí PowerShell, zadejte **.\\ CleanUp.ps1** spustit skript, který odstraní prostředky v tomto kurzu použili.</span><span class="sxs-lookup"><span data-stu-id="7ed01-527">In a PowerShell window, type **.\\Cleanup.ps1** to start the script that deletes resources used in the tutorial.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="7ed01-528">Prostředky jsou identifikovány názvem.</span><span class="sxs-lookup"><span data-stu-id="7ed01-528">Resources are identified by the name.</span></span> <span data-ttu-id="7ed01-529">Ujistěte se, že jednotlivé položky pečlivě zkontrolovat před potvrzením odebrání.</span><span class="sxs-lookup"><span data-stu-id="7ed01-529">Make sure you carefully review each item before confirming removal.</span></span>
   > 
   > 


