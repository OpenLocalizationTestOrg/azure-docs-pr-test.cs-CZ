---
title: "aaaBuild řešení IoT pomocí služby Stream Analytics | Microsoft Docs"
description: "Úvodní kurz pro hello řešení Stream Analytics IoT mýtná celnice scénáře"
keywords: "řešení IOT, okno funkce"
documentationcenter: 
services: stream-analytics
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: a473ea0a-3eaa-4e5b-aaa1-fec7e9069f20
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: e37fc5b56c4ffc4a2d7b820afe0c17631e577ea0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="build-an-iot-solution-by-using-stream-analytics"></a><span data-ttu-id="291e4-104">Vytvoření řešení IoT pomocí služby Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="291e4-104">Build an IoT solution by using Stream Analytics</span></span>
## <a name="introduction"></a><span data-ttu-id="291e4-105">Úvod</span><span class="sxs-lookup"><span data-stu-id="291e4-105">Introduction</span></span>
<span data-ttu-id="291e4-106">V tomto kurzu se dozvíte, jak toouse Azure Stream Analytics tooget v reálném čase přehled o vašich datech.</span><span class="sxs-lookup"><span data-stu-id="291e4-106">In this tutorial, you will learn how toouse Azure Stream Analytics tooget real-time insights from your data.</span></span> <span data-ttu-id="291e4-107">Datové proudy dat, například klikněte na tlačítko-datové proudy, protokoly a události generované zařízení mohou vývojáři kombinovat snadno s staré záznamy nebo referenční data tooderive podnikových statistik.</span><span class="sxs-lookup"><span data-stu-id="291e4-107">Developers can easily combine streams of data, such as click-streams, logs, and device-generated events, with historical records or reference data tooderive business insights.</span></span> <span data-ttu-id="291e4-108">Jako výpočetní služba plně spravovaná, v reálném čase datový proud, který je hostován v Microsoft Azure Azure Stream Analytics poskytuje integrované odolnost proti chybám, s nízkou latencí a škálovatelnost tooget jste nahoru a spouštění v minutách.</span><span class="sxs-lookup"><span data-stu-id="291e4-108">As a fully managed, real-time stream computation service that's hosted in Microsoft Azure, Azure Stream Analytics provides built-in resiliency, low latency, and scalability tooget you up and running in minutes.</span></span>

<span data-ttu-id="291e4-109">Po dokončení tohoto kurzu, budete moci:</span><span class="sxs-lookup"><span data-stu-id="291e4-109">After completing this tutorial, you will be able to:</span></span>

* <span data-ttu-id="291e4-110">Seznamte se s portál Azure Stream Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-110">Familiarize yourself with hello Azure Stream Analytics portal.</span></span>
* <span data-ttu-id="291e4-111">Nakonfigurujte a nasaďte úlohu streamování.</span><span class="sxs-lookup"><span data-stu-id="291e4-111">Configure and deploy a streaming job.</span></span>
* <span data-ttu-id="291e4-112">Vyjádřete reálného problémy a řešení je pomocí dotazovacího jazyka pro hello Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-112">Articulate real-world problems and solve them by using hello Stream Analytics query language.</span></span>
* <span data-ttu-id="291e4-113">Vývoj streamování řešení pro vaše zákazníky pomocí služby Stream Analytics s jistotou.</span><span class="sxs-lookup"><span data-stu-id="291e4-113">Develop streaming solutions for your customers by using Stream Analytics with confidence.</span></span>
* <span data-ttu-id="291e4-114">Použijte hello sledování a protokolování prostředí tootroubleshoot problémy.</span><span class="sxs-lookup"><span data-stu-id="291e4-114">Use hello monitoring and logging experience tootroubleshoot issues.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="291e4-115">Požadavky</span><span class="sxs-lookup"><span data-stu-id="291e4-115">Prerequisites</span></span>
<span data-ttu-id="291e4-116">Můžete se třeba hello následující toocomplete požadavky v tomto kurzu:</span><span class="sxs-lookup"><span data-stu-id="291e4-116">You will need hello following prerequisites toocomplete this tutorial:</span></span>

* <span data-ttu-id="291e4-117">nejnovější verze Hello [prostředí Azure PowerShell](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="291e4-117">hello latest version of [Azure PowerShell](/powershell/azure/overview)</span></span>
* <span data-ttu-id="291e4-118">2017 Visual Studio 2015, nebo hello volné [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span><span class="sxs-lookup"><span data-stu-id="291e4-118">Visual Studio 2017, 2015, or hello free [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span></span>
* <span data-ttu-id="291e4-119">[Předplatného Azure](https://azure.microsoft.com/pricing/free-trial/)</span><span class="sxs-lookup"><span data-stu-id="291e4-119">An [Azure subscription](https://azure.microsoft.com/pricing/free-trial/)</span></span>
* <span data-ttu-id="291e4-120">Oprávnění správce na počítači hello</span><span class="sxs-lookup"><span data-stu-id="291e4-120">Administrative privileges on hello computer</span></span>
* <span data-ttu-id="291e4-121">Stažení [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) z hello Microsoft Download Center</span><span class="sxs-lookup"><span data-stu-id="291e4-121">Download of [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) from hello Microsoft Download Center</span></span>
* <span data-ttu-id="291e4-122">Volitelné: Zdrojový kód pro hello TollApp událostí generátor v [Githubu](https://aka.ms/azure-stream-analytics-toll-source)</span><span class="sxs-lookup"><span data-stu-id="291e4-122">Optional: Source code for hello TollApp event generator in [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span></span>

## <a name="scenario-introduction-hello-toll"></a><span data-ttu-id="291e4-123">Scénář Úvod: "Hello, Projedou!"</span><span class="sxs-lookup"><span data-stu-id="291e4-123">Scenario introduction: “Hello, Toll!”</span></span>
<span data-ttu-id="291e4-124">Stanice projedou je běžné jevu.</span><span class="sxs-lookup"><span data-stu-id="291e4-124">A toll station is a common phenomenon.</span></span> <span data-ttu-id="291e4-125">Narazíte je na mnoha rychlostních, mosty a tunely mezi hello, world.</span><span class="sxs-lookup"><span data-stu-id="291e4-125">You encounter them on many expressways, bridges, and tunnels across hello world.</span></span> <span data-ttu-id="291e4-126">Každé stanici projedou má více kabin projedou.</span><span class="sxs-lookup"><span data-stu-id="291e4-126">Each toll station has multiple toll booths.</span></span> <span data-ttu-id="291e4-127">Při ruční kabin zastavíte toopay hello projedou tooan průvodce.</span><span class="sxs-lookup"><span data-stu-id="291e4-127">At manual booths, you stop toopay hello toll tooan attendant.</span></span> <span data-ttu-id="291e4-128">Senzor nad každý stánek na automatizované kabin kontroluje RFID karta, která je čelního skla připojené toohello vaše vozidel jako předáte stánek projedou hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-128">At automated booths, a sensor on top of each booth scans an RFID card that's affixed toohello windshield of your vehicle as you pass hello toll booth.</span></span> <span data-ttu-id="291e4-129">Je snadno toovisualize hello průchod vozidel přes tyto stanice projedou jako datového proudu událostí za které zajímavé operace lze provádět.</span><span class="sxs-lookup"><span data-stu-id="291e4-129">It is easy toovisualize hello passage of vehicles through these toll stations as an event stream over which interesting operations can be performed.</span></span>

![Obrázek automobilů na projedou kabin](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image1.jpg)

## <a name="incoming-data"></a><span data-ttu-id="291e4-131">Příchozí data</span><span class="sxs-lookup"><span data-stu-id="291e4-131">Incoming data</span></span>
<span data-ttu-id="291e4-132">V tomto kurzu pracuje se dvěma datových proudů.</span><span class="sxs-lookup"><span data-stu-id="291e4-132">This tutorial works with two streams of data.</span></span> <span data-ttu-id="291e4-133">Snímače nainstalována v hello vstupu a ukončení hello projedou stanic vytvořit hello první datového proudu.</span><span class="sxs-lookup"><span data-stu-id="291e4-133">Sensors installed in hello entrance and exit of hello toll stations produce hello first stream.</span></span> <span data-ttu-id="291e4-134">druhý datový proud Hello je statický vyhledávání datovou sadu, která má vehicle registrační data.</span><span class="sxs-lookup"><span data-stu-id="291e4-134">hello second stream is a static lookup dataset that has vehicle registration data.</span></span>

### <a name="entry-data-stream"></a><span data-ttu-id="291e4-135">Vstupní datový proud</span><span class="sxs-lookup"><span data-stu-id="291e4-135">Entry data stream</span></span>
<span data-ttu-id="291e4-136">Hello vstupní datový proud obsahuje informace o aut při vstupu projedou stanice.</span><span class="sxs-lookup"><span data-stu-id="291e4-136">hello entry data stream contains information about cars as they enter toll stations.</span></span>

| <span data-ttu-id="291e4-137">TollID</span><span class="sxs-lookup"><span data-stu-id="291e4-137">TollID</span></span> | <span data-ttu-id="291e4-138">EntryTime</span><span class="sxs-lookup"><span data-stu-id="291e4-138">EntryTime</span></span> | <span data-ttu-id="291e4-139">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="291e4-139">LicensePlate</span></span> | <span data-ttu-id="291e4-140">Stav</span><span class="sxs-lookup"><span data-stu-id="291e4-140">State</span></span> | <span data-ttu-id="291e4-141">Ujistěte se</span><span class="sxs-lookup"><span data-stu-id="291e4-141">Make</span></span> | <span data-ttu-id="291e4-142">Model</span><span class="sxs-lookup"><span data-stu-id="291e4-142">Model</span></span> | <span data-ttu-id="291e4-143">VehicleType</span><span class="sxs-lookup"><span data-stu-id="291e4-143">VehicleType</span></span> | <span data-ttu-id="291e4-144">VehicleWeight</span><span class="sxs-lookup"><span data-stu-id="291e4-144">VehicleWeight</span></span> | <span data-ttu-id="291e4-145">Projedou</span><span class="sxs-lookup"><span data-stu-id="291e4-145">Toll</span></span> | <span data-ttu-id="291e4-146">Značka</span><span class="sxs-lookup"><span data-stu-id="291e4-146">Tag</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="291e4-147">1</span><span class="sxs-lookup"><span data-stu-id="291e4-147">1</span></span> |<span data-ttu-id="291e4-148">2014-09-10 12:01:00.000</span><span class="sxs-lookup"><span data-stu-id="291e4-148">2014-09-10 12:01:00.000</span></span> |<span data-ttu-id="291e4-149">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="291e4-149">JNB 7001</span></span> |<span data-ttu-id="291e4-150">NY</span><span class="sxs-lookup"><span data-stu-id="291e4-150">NY</span></span> |<span data-ttu-id="291e4-151">Honda</span><span class="sxs-lookup"><span data-stu-id="291e4-151">Honda</span></span> |<span data-ttu-id="291e4-152">CRV</span><span class="sxs-lookup"><span data-stu-id="291e4-152">CRV</span></span> |<span data-ttu-id="291e4-153">1</span><span class="sxs-lookup"><span data-stu-id="291e4-153">1</span></span> |<span data-ttu-id="291e4-154">0</span><span class="sxs-lookup"><span data-stu-id="291e4-154">0</span></span> |<span data-ttu-id="291e4-155">7</span><span class="sxs-lookup"><span data-stu-id="291e4-155">7</span></span> | |
| <span data-ttu-id="291e4-156">1</span><span class="sxs-lookup"><span data-stu-id="291e4-156">1</span></span> |<span data-ttu-id="291e4-157">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="291e4-157">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="291e4-158">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="291e4-158">YXZ 1001</span></span> |<span data-ttu-id="291e4-159">NY</span><span class="sxs-lookup"><span data-stu-id="291e4-159">NY</span></span> |<span data-ttu-id="291e4-160">Toyota</span><span class="sxs-lookup"><span data-stu-id="291e4-160">Toyota</span></span> |<span data-ttu-id="291e4-161">Camry</span><span class="sxs-lookup"><span data-stu-id="291e4-161">Camry</span></span> |<span data-ttu-id="291e4-162">1</span><span class="sxs-lookup"><span data-stu-id="291e4-162">1</span></span> |<span data-ttu-id="291e4-163">0</span><span class="sxs-lookup"><span data-stu-id="291e4-163">0</span></span> |<span data-ttu-id="291e4-164">4</span><span class="sxs-lookup"><span data-stu-id="291e4-164">4</span></span> |<span data-ttu-id="291e4-165">123456789</span><span class="sxs-lookup"><span data-stu-id="291e4-165">123456789</span></span> |
| <span data-ttu-id="291e4-166">3</span><span class="sxs-lookup"><span data-stu-id="291e4-166">3</span></span> |<span data-ttu-id="291e4-167">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="291e4-167">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="291e4-168">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="291e4-168">ABC 1004</span></span> |<span data-ttu-id="291e4-169">BERTE</span><span class="sxs-lookup"><span data-stu-id="291e4-169">CT</span></span> |<span data-ttu-id="291e4-170">Ford</span><span class="sxs-lookup"><span data-stu-id="291e4-170">Ford</span></span> |<span data-ttu-id="291e4-171">Taurus</span><span class="sxs-lookup"><span data-stu-id="291e4-171">Taurus</span></span> |<span data-ttu-id="291e4-172">1</span><span class="sxs-lookup"><span data-stu-id="291e4-172">1</span></span> |<span data-ttu-id="291e4-173">0</span><span class="sxs-lookup"><span data-stu-id="291e4-173">0</span></span> |<span data-ttu-id="291e4-174">5</span><span class="sxs-lookup"><span data-stu-id="291e4-174">5</span></span> |<span data-ttu-id="291e4-175">456789123</span><span class="sxs-lookup"><span data-stu-id="291e4-175">456789123</span></span> |
| <span data-ttu-id="291e4-176">2</span><span class="sxs-lookup"><span data-stu-id="291e4-176">2</span></span> |<span data-ttu-id="291e4-177">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="291e4-177">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="291e4-178">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="291e4-178">XYZ 1003</span></span> |<span data-ttu-id="291e4-179">BERTE</span><span class="sxs-lookup"><span data-stu-id="291e4-179">CT</span></span> |<span data-ttu-id="291e4-180">Toyota</span><span class="sxs-lookup"><span data-stu-id="291e4-180">Toyota</span></span> |<span data-ttu-id="291e4-181">Koruny</span><span class="sxs-lookup"><span data-stu-id="291e4-181">Corolla</span></span> |<span data-ttu-id="291e4-182">1</span><span class="sxs-lookup"><span data-stu-id="291e4-182">1</span></span> |<span data-ttu-id="291e4-183">0</span><span class="sxs-lookup"><span data-stu-id="291e4-183">0</span></span> |<span data-ttu-id="291e4-184">4</span><span class="sxs-lookup"><span data-stu-id="291e4-184">4</span></span> | |
| <span data-ttu-id="291e4-185">1</span><span class="sxs-lookup"><span data-stu-id="291e4-185">1</span></span> |<span data-ttu-id="291e4-186">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="291e4-186">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="291e4-187">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="291e4-187">BNJ 1007</span></span> |<span data-ttu-id="291e4-188">NY</span><span class="sxs-lookup"><span data-stu-id="291e4-188">NY</span></span> |<span data-ttu-id="291e4-189">Honda</span><span class="sxs-lookup"><span data-stu-id="291e4-189">Honda</span></span> |<span data-ttu-id="291e4-190">CRV</span><span class="sxs-lookup"><span data-stu-id="291e4-190">CRV</span></span> |<span data-ttu-id="291e4-191">1</span><span class="sxs-lookup"><span data-stu-id="291e4-191">1</span></span> |<span data-ttu-id="291e4-192">0</span><span class="sxs-lookup"><span data-stu-id="291e4-192">0</span></span> |<span data-ttu-id="291e4-193">5</span><span class="sxs-lookup"><span data-stu-id="291e4-193">5</span></span> |<span data-ttu-id="291e4-194">789123456</span><span class="sxs-lookup"><span data-stu-id="291e4-194">789123456</span></span> |
| <span data-ttu-id="291e4-195">2</span><span class="sxs-lookup"><span data-stu-id="291e4-195">2</span></span> |<span data-ttu-id="291e4-196">2014-09-10 12:05:00.000</span><span class="sxs-lookup"><span data-stu-id="291e4-196">2014-09-10 12:05:00.000</span></span> |<span data-ttu-id="291e4-197">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="291e4-197">CDE 1007</span></span> |<span data-ttu-id="291e4-198">NI</span><span class="sxs-lookup"><span data-stu-id="291e4-198">NJ</span></span> |<span data-ttu-id="291e4-199">Toyota</span><span class="sxs-lookup"><span data-stu-id="291e4-199">Toyota</span></span> |<span data-ttu-id="291e4-200">4 x 4</span><span class="sxs-lookup"><span data-stu-id="291e4-200">4x4</span></span> |<span data-ttu-id="291e4-201">1</span><span class="sxs-lookup"><span data-stu-id="291e4-201">1</span></span> |<span data-ttu-id="291e4-202">0</span><span class="sxs-lookup"><span data-stu-id="291e4-202">0</span></span> |<span data-ttu-id="291e4-203">6</span><span class="sxs-lookup"><span data-stu-id="291e4-203">6</span></span> |<span data-ttu-id="291e4-204">321987654</span><span class="sxs-lookup"><span data-stu-id="291e4-204">321987654</span></span> |

<span data-ttu-id="291e4-205">Zde je stručný popis hello sloupce:</span><span class="sxs-lookup"><span data-stu-id="291e4-205">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="291e4-206">Sloupec</span><span class="sxs-lookup"><span data-stu-id="291e4-206">Column</span></span> | <span data-ttu-id="291e4-207">Popis</span><span class="sxs-lookup"><span data-stu-id="291e4-207">Description</span></span> |
| --- | --- |
| <span data-ttu-id="291e4-208">TollID</span><span class="sxs-lookup"><span data-stu-id="291e4-208">TollID</span></span> |<span data-ttu-id="291e4-209">Hello projedou stánek ID, která jednoznačně identifikuje stánek projedou</span><span class="sxs-lookup"><span data-stu-id="291e4-209">hello toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="291e4-210">EntryTime</span><span class="sxs-lookup"><span data-stu-id="291e4-210">EntryTime</span></span> |<span data-ttu-id="291e4-211">Hello datum a čas položky hello vehicle toohello projedou stánek v UTC</span><span class="sxs-lookup"><span data-stu-id="291e4-211">hello date and time of entry of hello vehicle toohello toll booth in UTC</span></span> |
| <span data-ttu-id="291e4-212">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="291e4-212">LicensePlate</span></span> |<span data-ttu-id="291e4-213">Hello registrační počet hello vehicle</span><span class="sxs-lookup"><span data-stu-id="291e4-213">hello license plate number of hello vehicle</span></span> |
| <span data-ttu-id="291e4-214">Stav</span><span class="sxs-lookup"><span data-stu-id="291e4-214">State</span></span> |<span data-ttu-id="291e4-215">Stav v USA</span><span class="sxs-lookup"><span data-stu-id="291e4-215">A state in United States</span></span> |
| <span data-ttu-id="291e4-216">Ujistěte se</span><span class="sxs-lookup"><span data-stu-id="291e4-216">Make</span></span> |<span data-ttu-id="291e4-217">výrobce Hello automobilu hello</span><span class="sxs-lookup"><span data-stu-id="291e4-217">hello manufacturer of hello automobile</span></span> |
| <span data-ttu-id="291e4-218">Model</span><span class="sxs-lookup"><span data-stu-id="291e4-218">Model</span></span> |<span data-ttu-id="291e4-219">číslo modelu Hello automobilu hello</span><span class="sxs-lookup"><span data-stu-id="291e4-219">hello model number of hello automobile</span></span> |
| <span data-ttu-id="291e4-220">VehicleType</span><span class="sxs-lookup"><span data-stu-id="291e4-220">VehicleType</span></span> |<span data-ttu-id="291e4-221">Buď 1 pro osobní vozidel či 2 pro komerční vozidel</span><span class="sxs-lookup"><span data-stu-id="291e4-221">Either 1 for passenger vehicles or 2 for commercial vehicles</span></span> |
| <span data-ttu-id="291e4-222">WeightType</span><span class="sxs-lookup"><span data-stu-id="291e4-222">WeightType</span></span> |<span data-ttu-id="291e4-223">Vehicle váhy v tunách; 0 pro osobní vozidel</span><span class="sxs-lookup"><span data-stu-id="291e4-223">Vehicle weight in tons; 0 for passenger vehicles</span></span> |
| <span data-ttu-id="291e4-224">Projedou</span><span class="sxs-lookup"><span data-stu-id="291e4-224">Toll</span></span> |<span data-ttu-id="291e4-225">Hodnota projedou Hello v USD</span><span class="sxs-lookup"><span data-stu-id="291e4-225">hello toll value in USD</span></span> |
| <span data-ttu-id="291e4-226">Značka</span><span class="sxs-lookup"><span data-stu-id="291e4-226">Tag</span></span> |<span data-ttu-id="291e4-227">Hello e-Tag na hello automobilu, který zautomatizuje platebních; prázdný, kde byla hello platebních provést ručně</span><span class="sxs-lookup"><span data-stu-id="291e4-227">hello e-Tag on hello automobile that automates payment; blank where hello payment was done manually</span></span> |

### <a name="exit-data-stream"></a><span data-ttu-id="291e4-228">Výstupní datový proud</span><span class="sxs-lookup"><span data-stu-id="291e4-228">Exit data stream</span></span>
<span data-ttu-id="291e4-229">Hello výstupní datový proud obsahuje informace o aut ponechat hello projedou stanice.</span><span class="sxs-lookup"><span data-stu-id="291e4-229">hello exit data stream contains information about cars leaving hello toll station.</span></span>

| <span data-ttu-id="291e4-230">**TollId**</span><span class="sxs-lookup"><span data-stu-id="291e4-230">**TollId**</span></span> | <span data-ttu-id="291e4-231">**ExitTime**</span><span class="sxs-lookup"><span data-stu-id="291e4-231">**ExitTime**</span></span> | <span data-ttu-id="291e4-232">**LicensePlate**</span><span class="sxs-lookup"><span data-stu-id="291e4-232">**LicensePlate**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="291e4-233">1</span><span class="sxs-lookup"><span data-stu-id="291e4-233">1</span></span> |<span data-ttu-id="291e4-234">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="291e4-234">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="291e4-235">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="291e4-235">JNB 7001</span></span> |
| <span data-ttu-id="291e4-236">1</span><span class="sxs-lookup"><span data-stu-id="291e4-236">1</span></span> |<span data-ttu-id="291e4-237">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="291e4-237">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="291e4-238">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="291e4-238">YXZ 1001</span></span> |
| <span data-ttu-id="291e4-239">3</span><span class="sxs-lookup"><span data-stu-id="291e4-239">3</span></span> |<span data-ttu-id="291e4-240">2014-09-10T12:04:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="291e4-240">2014-09-10T12:04:00.0000000Z</span></span> |<span data-ttu-id="291e4-241">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="291e4-241">ABC 1004</span></span> |
| <span data-ttu-id="291e4-242">2</span><span class="sxs-lookup"><span data-stu-id="291e4-242">2</span></span> |<span data-ttu-id="291e4-243">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="291e4-243">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="291e4-244">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="291e4-244">XYZ 1003</span></span> |
| <span data-ttu-id="291e4-245">1</span><span class="sxs-lookup"><span data-stu-id="291e4-245">1</span></span> |<span data-ttu-id="291e4-246">2014-09-10T12:08:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="291e4-246">2014-09-10T12:08:00.0000000Z</span></span> |<span data-ttu-id="291e4-247">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="291e4-247">BNJ 1007</span></span> |
| <span data-ttu-id="291e4-248">2</span><span class="sxs-lookup"><span data-stu-id="291e4-248">2</span></span> |<span data-ttu-id="291e4-249">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="291e4-249">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="291e4-250">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="291e4-250">CDE 1007</span></span> |

<span data-ttu-id="291e4-251">Zde je stručný popis hello sloupce:</span><span class="sxs-lookup"><span data-stu-id="291e4-251">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="291e4-252">Sloupec</span><span class="sxs-lookup"><span data-stu-id="291e4-252">Column</span></span> | <span data-ttu-id="291e4-253">Popis</span><span class="sxs-lookup"><span data-stu-id="291e4-253">Description</span></span> |
| --- | --- |
| <span data-ttu-id="291e4-254">TollID</span><span class="sxs-lookup"><span data-stu-id="291e4-254">TollID</span></span> |<span data-ttu-id="291e4-255">Hello projedou stánek ID, která jednoznačně identifikuje stánek projedou</span><span class="sxs-lookup"><span data-stu-id="291e4-255">hello toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="291e4-256">ExitTime</span><span class="sxs-lookup"><span data-stu-id="291e4-256">ExitTime</span></span> |<span data-ttu-id="291e4-257">Hello datum a čas ukončení hello vehicle z projedou stánek v UTC</span><span class="sxs-lookup"><span data-stu-id="291e4-257">hello date and time of exit of hello vehicle from toll booth in UTC</span></span> |
| <span data-ttu-id="291e4-258">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="291e4-258">LicensePlate</span></span> |<span data-ttu-id="291e4-259">Hello registrační počet hello vehicle</span><span class="sxs-lookup"><span data-stu-id="291e4-259">hello license plate number of hello vehicle</span></span> |

### <a name="commercial-vehicle-registration-data"></a><span data-ttu-id="291e4-260">Vehicle komerční registrační data</span><span class="sxs-lookup"><span data-stu-id="291e4-260">Commercial vehicle registration data</span></span>
<span data-ttu-id="291e4-261">kurz Hello používá statický snímek databáze komerční vehicle registrace.</span><span class="sxs-lookup"><span data-stu-id="291e4-261">hello tutorial uses a static snapshot of a commercial vehicle registration database.</span></span>

| <span data-ttu-id="291e4-262">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="291e4-262">LicensePlate</span></span> | <span data-ttu-id="291e4-263">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="291e4-263">RegistrationId</span></span> | <span data-ttu-id="291e4-264">Platnost</span><span class="sxs-lookup"><span data-stu-id="291e4-264">Expired</span></span> |
| --- | --- | --- |
| <span data-ttu-id="291e4-265">SVT 6023</span><span class="sxs-lookup"><span data-stu-id="291e4-265">SVT 6023</span></span> |<span data-ttu-id="291e4-266">285429838</span><span class="sxs-lookup"><span data-stu-id="291e4-266">285429838</span></span> |<span data-ttu-id="291e4-267">1</span><span class="sxs-lookup"><span data-stu-id="291e4-267">1</span></span> |
| <span data-ttu-id="291e4-268">XLZ 3463</span><span class="sxs-lookup"><span data-stu-id="291e4-268">XLZ 3463</span></span> |<span data-ttu-id="291e4-269">362715656</span><span class="sxs-lookup"><span data-stu-id="291e4-269">362715656</span></span> |<span data-ttu-id="291e4-270">0</span><span class="sxs-lookup"><span data-stu-id="291e4-270">0</span></span> |
| <span data-ttu-id="291e4-271">ZÁ 1005</span><span class="sxs-lookup"><span data-stu-id="291e4-271">BAC 1005</span></span> |<span data-ttu-id="291e4-272">876133137</span><span class="sxs-lookup"><span data-stu-id="291e4-272">876133137</span></span> |<span data-ttu-id="291e4-273">1</span><span class="sxs-lookup"><span data-stu-id="291e4-273">1</span></span> |
| <span data-ttu-id="291e4-274">RIV 8632</span><span class="sxs-lookup"><span data-stu-id="291e4-274">RIV 8632</span></span> |<span data-ttu-id="291e4-275">992711956</span><span class="sxs-lookup"><span data-stu-id="291e4-275">992711956</span></span> |<span data-ttu-id="291e4-276">0</span><span class="sxs-lookup"><span data-stu-id="291e4-276">0</span></span> |
| <span data-ttu-id="291e4-277">SNY 7188</span><span class="sxs-lookup"><span data-stu-id="291e4-277">SNY 7188</span></span> |<span data-ttu-id="291e4-278">592133890</span><span class="sxs-lookup"><span data-stu-id="291e4-278">592133890</span></span> |<span data-ttu-id="291e4-279">0</span><span class="sxs-lookup"><span data-stu-id="291e4-279">0</span></span> |
| <span data-ttu-id="291e4-280">ELH 9896</span><span class="sxs-lookup"><span data-stu-id="291e4-280">ELH 9896</span></span> |<span data-ttu-id="291e4-281">678427724</span><span class="sxs-lookup"><span data-stu-id="291e4-281">678427724</span></span> |<span data-ttu-id="291e4-282">1</span><span class="sxs-lookup"><span data-stu-id="291e4-282">1</span></span> |

<span data-ttu-id="291e4-283">Zde je stručný popis hello sloupce:</span><span class="sxs-lookup"><span data-stu-id="291e4-283">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="291e4-284">Sloupec</span><span class="sxs-lookup"><span data-stu-id="291e4-284">Column</span></span> | <span data-ttu-id="291e4-285">Popis</span><span class="sxs-lookup"><span data-stu-id="291e4-285">Description</span></span> |
| --- | --- |
| <span data-ttu-id="291e4-286">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="291e4-286">LicensePlate</span></span> |<span data-ttu-id="291e4-287">Hello registrační počet hello vehicle</span><span class="sxs-lookup"><span data-stu-id="291e4-287">hello license plate number of hello vehicle</span></span> |
| <span data-ttu-id="291e4-288">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="291e4-288">RegistrationId</span></span> |<span data-ttu-id="291e4-289">ID registrace Hello vehicle</span><span class="sxs-lookup"><span data-stu-id="291e4-289">hello vehicle's registration ID</span></span> |
| <span data-ttu-id="291e4-290">Platnost</span><span class="sxs-lookup"><span data-stu-id="291e4-290">Expired</span></span> |<span data-ttu-id="291e4-291">Stav registrace hello vehicle Hello: 0, pokud je aktivní, vehicle registrace 1, pokud platnost registrace</span><span class="sxs-lookup"><span data-stu-id="291e4-291">hello registration status of hello vehicle: 0 if vehicle registration is active, 1 if registration is expired</span></span> |

## <a name="set-up-hello-environment-for-azure-stream-analytics"></a><span data-ttu-id="291e4-292">Nastavení hello prostředí pro Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="291e4-292">Set up hello environment for Azure Stream Analytics</span></span>
<span data-ttu-id="291e4-293">toocomplete tento kurz, musíte mít předplatné Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="291e4-293">toocomplete this tutorial, you need a Microsoft Azure subscription.</span></span> <span data-ttu-id="291e4-294">Společnost Microsoft nabízí bezplatné zkušební verze pro služby Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="291e4-294">Microsoft offers free trial for Microsoft Azure services.</span></span>

<span data-ttu-id="291e4-295">Pokud účet Azure nemáte, můžete [požadavku bezplatná zkušební verze](http://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="291e4-295">If you do not have an Azure account, you can [request a free trial version](http://azure.microsoft.com/pricing/free-trial/).</span></span>

> [!NOTE]
> <span data-ttu-id="291e4-296">toosign pro bezplatnou zkušební verzi, musíte mobilní zařízení, které může přijímat textové zprávy a platná platební karta.</span><span class="sxs-lookup"><span data-stu-id="291e4-296">toosign up for a free trial, you need a mobile device that can receive text messages and a valid credit card.</span></span>
> 
> 

<span data-ttu-id="291e4-297">Ujistěte se, že toofollow hello kroky v části "Vyčištění účtu Azure" hello na konci hello tohoto článku tak, aby bylo možné vytvořit hello nejlepší využívání Azure kreditu.</span><span class="sxs-lookup"><span data-stu-id="291e4-297">Be sure toofollow hello steps in hello “Clean up your Azure account” section at hello end of this article so that you can make hello best use of your Azure credit.</span></span>

## <a name="provision-azure-resources-required-for-hello-tutorial"></a><span data-ttu-id="291e4-298">Zřídit prostředky Azure potřebné pro kurz hello</span><span class="sxs-lookup"><span data-stu-id="291e4-298">Provision Azure resources required for hello tutorial</span></span>
<span data-ttu-id="291e4-299">Tento kurz vyžaduje dva tooreceive centra událostí *položka* a *ukončete* datových proudů.</span><span class="sxs-lookup"><span data-stu-id="291e4-299">This tutorial requires two event hubs tooreceive *entry* and *exit* data streams.</span></span> <span data-ttu-id="291e4-300">Azure SQL Database výstupy hello výsledky úlohy Stream Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-300">Azure SQL Database outputs hello results of hello Stream Analytics jobs.</span></span> <span data-ttu-id="291e4-301">Azure Storage ukládá referenční data o vehicle registrace.</span><span class="sxs-lookup"><span data-stu-id="291e4-301">Azure Storage stores reference data about vehicle registrations.</span></span>

<span data-ttu-id="291e4-302">Můžete použít hello Setup.ps1 skript ve složce TollApp hello na Githubu toocreate všechny požadované prostředky.</span><span class="sxs-lookup"><span data-stu-id="291e4-302">You can use hello Setup.ps1 script in hello TollApp folder on GitHub toocreate all required resources.</span></span> <span data-ttu-id="291e4-303">V zájmu hello času doporučujeme ho spustíte.</span><span class="sxs-lookup"><span data-stu-id="291e4-303">In hello interest of time, we recommend that you run it.</span></span> <span data-ttu-id="291e4-304">Pokud vás zajímají další informace o tom, jak tooconfigure těchto prostředků ve hello portál Azure, najdete v toolearn příloha toohello "Konfigurace kurz prostředků na portálu Azure".</span><span class="sxs-lookup"><span data-stu-id="291e4-304">If you would like toolearn more about how tooconfigure these resources in hello Azure portal, refer toohello “Configuring tutorial resources in Azure portal” appendix.</span></span>

<span data-ttu-id="291e4-305">Stáhněte a uložte hello podpora [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) složky a soubory.</span><span class="sxs-lookup"><span data-stu-id="291e4-305">Download and save hello supporting [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) folder and files.</span></span>

<span data-ttu-id="291e4-306">Otevřete **Microsoft Azure PowerShell** okno *jako správce*.</span><span class="sxs-lookup"><span data-stu-id="291e4-306">Open a **Microsoft Azure PowerShell** window *as an administrator*.</span></span> <span data-ttu-id="291e4-307">Pokud ještě nemáte prostředí Azure PowerShell, postupujte podle pokynů hello v [nainstalovat a nakonfigurovat Azure PowerShell](/powershell/azure/overview) tooinstall ho.</span><span class="sxs-lookup"><span data-stu-id="291e4-307">If you do not yet have Azure PowerShell, follow hello instructions in [Install and configure Azure PowerShell](/powershell/azure/overview) tooinstall it.</span></span>

<span data-ttu-id="291e4-308">Protože Windows automaticky blokuje soubory .exe, .dll a .ps1, je třeba zásady spouštění hello tooset před spuštěním skriptu hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-308">Because Windows automatically blocks .ps1, .dll, and .exe files, you need tooset hello execution policy before you run hello script.</span></span> <span data-ttu-id="291e4-309">Zkontrolujte, že je spuštěný okno Azure PowerShell hello *jako správce*.</span><span class="sxs-lookup"><span data-stu-id="291e4-309">Make sure hello Azure PowerShell window is running *as an administrator*.</span></span> <span data-ttu-id="291e4-310">Spustit **Set-ExecutionPolicy unrestricted**.</span><span class="sxs-lookup"><span data-stu-id="291e4-310">Run **Set-ExecutionPolicy unrestricted**.</span></span> <span data-ttu-id="291e4-311">Po zobrazení výzvy zadejte **Y**.</span><span class="sxs-lookup"><span data-stu-id="291e4-311">When prompted, type **Y**.</span></span>

![Snímek obrazovky "Set-ExecutionPolicy unrestricted" spuštěné v okno Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image2.png)

<span data-ttu-id="291e4-313">Spustit **Get-ExecutionPolicy** toomake jistotu, že příkaz hello fungovala.</span><span class="sxs-lookup"><span data-stu-id="291e4-313">Run **Get-ExecutionPolicy** toomake sure that hello command worked.</span></span>

![Snímek obrazovky "Get-ExecutionPolicy" spuštěné v okno Azure PowerShell](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image3.png)

<span data-ttu-id="291e4-315">Přejděte toohello adresář, který má hello skripty a generátor aplikace.</span><span class="sxs-lookup"><span data-stu-id="291e4-315">Go toohello directory that has hello scripts and generator application.</span></span>

![Snímek obrazovky "cd .\TollApp\TollApp" spuštěné v okno Azure PowerShell hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image4.png)

<span data-ttu-id="291e4-317">Typ **.\\ Setup.ps1** tooset si účet Azure, vytvořit a nakonfigurovat všechny požadované prostředky a spustit toogenerate události.</span><span class="sxs-lookup"><span data-stu-id="291e4-317">Type **.\\Setup.ps1** tooset up your Azure account, create and configure all required resources, and start toogenerate events.</span></span> <span data-ttu-id="291e4-318">až toocreate oblast Hello skriptu náhodně vybere vašich prostředků.</span><span class="sxs-lookup"><span data-stu-id="291e4-318">hello script randomly picks up a region toocreate your resources.</span></span> <span data-ttu-id="291e4-319">tooexplicitly určit oblasti, můžete předat hello **-umístění** parametr jako hello následující ukázka:</span><span class="sxs-lookup"><span data-stu-id="291e4-319">tooexplicitly specify a region, you can pass hello **-location** parameter as in hello following example:</span></span>

<span data-ttu-id="291e4-320">**. \\Setup.ps1-umístění "Střed USA"**</span><span class="sxs-lookup"><span data-stu-id="291e4-320">**.\\Setup.ps1 -location “Central US”**</span></span>

![Snímek obrazovky stránky hello Azure přihlášení](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image5.png)

<span data-ttu-id="291e4-322">Hello skript se otevře hello **přihlásit** stránky pro Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="291e4-322">hello script opens hello **Sign In** page for Microsoft Azure.</span></span> <span data-ttu-id="291e4-323">Zadejte přihlašovací údaje účtu.</span><span class="sxs-lookup"><span data-stu-id="291e4-323">Enter your account credentials.</span></span>

> [!NOTE]
> <span data-ttu-id="291e4-324">Pokud má váš účet přístup toomultiple odběry, bude název odběru hello kladené tooenter chcete toouse hello kurzu.</span><span class="sxs-lookup"><span data-stu-id="291e4-324">If your account has access toomultiple subscriptions, you will be asked tooenter hello subscription name that you want toouse for hello tutorial.</span></span>
> 
> 

<span data-ttu-id="291e4-325">skript Hello může trvat několik minut toorun.</span><span class="sxs-lookup"><span data-stu-id="291e4-325">hello script can take several minutes toorun.</span></span> <span data-ttu-id="291e4-326">Po dokončení hello výstup by měl vypadat jako následující snímek obrazovky hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-326">After it finishes, hello output should look like hello following screenshot.</span></span>

![Snímek obrazovky výstupu skriptu hello v okně prostředí Azure PowerShell hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image6.PNG)

<span data-ttu-id="291e4-328">Zobrazí se také další okno, které je podobné toohello následující snímek obrazovky.</span><span class="sxs-lookup"><span data-stu-id="291e4-328">You will also see another window that's similar toohello following screenshot.</span></span> <span data-ttu-id="291e4-329">Tato aplikace odesílá události tooAzure Event Hubs, což je požadovaná toorun hello kurzu.</span><span class="sxs-lookup"><span data-stu-id="291e4-329">This application is sending events tooAzure Event Hubs, which is required toorun hello tutorial.</span></span> <span data-ttu-id="291e4-330">Ano nezadávejte zastavení aplikace hello nebo toto okno zavřít, dokud nedokončíte hello kurzu.</span><span class="sxs-lookup"><span data-stu-id="291e4-330">So, do not stop hello application or close this window until you finish hello tutorial.</span></span>

![Snímek obrazovky "Odesílající event hub data"](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image7.png)

<span data-ttu-id="291e4-332">Můžete musí být schopný toosee vašich prostředků na portálu Azure nyní.</span><span class="sxs-lookup"><span data-stu-id="291e4-332">You should be able toosee your resources in Azure portal now.</span></span> <span data-ttu-id="291e4-333">Přejděte příliš<https://portal.azure.com>a přihlaste se pomocí přihlašovacích údajů účtu.</span><span class="sxs-lookup"><span data-stu-id="291e4-333">Go too<https://portal.azure.com>, and sign in with your account credentials.</span></span> <span data-ttu-id="291e4-334">Všimněte si, že aktuálně některé funkce využívá portálu classic hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-334">Note that currently some functionality utilizes hello classic portal.</span></span> <span data-ttu-id="291e4-335">Tyto kroky bude jasně označen.</span><span class="sxs-lookup"><span data-stu-id="291e4-335">These steps will be clearly indicated.</span></span>

### <a name="azure-event-hubs"></a><span data-ttu-id="291e4-336">Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="291e4-336">Azure Event Hubs</span></span>
<span data-ttu-id="291e4-337">V hello portálu Azure, klikněte na **další služby** na hello dolní části hello správy v levém podokně.</span><span class="sxs-lookup"><span data-stu-id="291e4-337">In hello Azure portal, click **More services** on hello bottom of hello left management pane.</span></span> <span data-ttu-id="291e4-338">Typ **služby Event hubs** v hello zadaná pole a klikněte na tlačítko **služby Event hubs**.</span><span class="sxs-lookup"><span data-stu-id="291e4-338">Type **Event hubs** in hello field provided and click **Event hubs**.</span></span> <span data-ttu-id="291e4-339">Spustí se nové hello toodisplay okno prohlížeče **SERVICE BUS** oblasti v hello **portálu classic**.</span><span class="sxs-lookup"><span data-stu-id="291e4-339">This launches a new browser window toodisplay hello **SERVICE BUS** area in hello **classic portal**.</span></span> <span data-ttu-id="291e4-340">Zde se zobrazí hello Centrum událostí vytvořené hello Setup.ps1 skriptu.</span><span class="sxs-lookup"><span data-stu-id="291e4-340">Here you can see hello Event Hub created by hello Setup.ps1 script.</span></span>

![Service Bus](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image8.png)

<span data-ttu-id="291e4-342">Klikněte na tlačítko hello ten, který začíná *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="291e4-342">Click hello one that starts with *tolldata*.</span></span> <span data-ttu-id="291e4-343">Klikněte na tlačítko hello **EVENT HUBS** kartě. Zobrazí se dva centra událostí s názvem *položka* a *ukončete* vytvořit v tomto oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="291e4-343">Click hello **EVENT HUBS** tab. You will see two event hubs named *entry* and *exit* created in this namespace.</span></span>

![Karta centra událostí portálu classic hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image9.png)

### <a name="azure-storage-container"></a><span data-ttu-id="291e4-345">Kontejner úložiště Azure</span><span class="sxs-lookup"><span data-stu-id="291e4-345">Azure Storage container</span></span>
1. <span data-ttu-id="291e4-346">Vraťte se zpátky toohello karta prohlížeče otevřete tooAzure portál.</span><span class="sxs-lookup"><span data-stu-id="291e4-346">Go back toohello tab in your browser open tooAzure portal.</span></span> <span data-ttu-id="291e4-347">Klikněte na tlačítko **úložiště** na levé straně hello Azure portálu toosee hello Azure Storage kontejneru, který se používá v kurzu hello hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-347">Click **STORAGE** on hello left side of hello Azure portal toosee hello Azure Storage container that's used in hello tutorial.</span></span>
   
    ![Položky nabídky úložiště](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image11.png)
2. <span data-ttu-id="291e4-349">Klikněte na tlačítko hello jeden, který bude začínat *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="291e4-349">Click hello one that start with *tolldata*.</span></span> <span data-ttu-id="291e4-350">Klikněte na tlačítko hello **kontejnery** kartě toosee hello vytvořit kontejner.</span><span class="sxs-lookup"><span data-stu-id="291e4-350">Click hello **CONTAINERS** tab toosee hello created container.</span></span>
   
    ![Karta kontejnery v hello portálu Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image10.png)
3. <span data-ttu-id="291e4-352">Klikněte na tlačítko hello **tolldata** kontejneru toosee hello nahrát soubor JSON, který má vehicle registrační data.</span><span class="sxs-lookup"><span data-stu-id="291e4-352">Click hello **tolldata** container toosee hello uploaded JSON file that has vehicle registration data.</span></span>
   
    ![Snímek obrazovky aplikace hello registration.json souboru v kontejneru hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image12.png)

### <a name="azure-sql-database"></a><span data-ttu-id="291e4-354">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="291e4-354">Azure SQL Database</span></span>
1. <span data-ttu-id="291e4-355">Zpět na první kartě hello, kterou jste otevřeli v prohlížeči hello toohello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="291e4-355">Go back toohello Azure portal on hello first tab that was opened in hello browser.</span></span> <span data-ttu-id="291e4-356">Klikněte na tlačítko **databází SQL** na levé straně hello Azure portálu toosee hello SQL database, která bude použita v kurzu hello a klikněte na tlačítko hello **tolldatadb**.</span><span class="sxs-lookup"><span data-stu-id="291e4-356">Click **SQL DATABASES** on hello left side of hello Azure portal toosee hello SQL database that will be used in hello tutorial and click **tolldatadb**.</span></span>
   
    ![Snímek obrazovky hello vytvoření databáze SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15.png)
2. <span data-ttu-id="291e4-358">Název serveru hello kopie bez hello číslo portu (*servername*. database.windows.net, např.).</span><span class="sxs-lookup"><span data-stu-id="291e4-358">Copy hello server name without hello port number (*servername*.database.windows.net, for example).</span></span>
    <span data-ttu-id="291e4-359">![Snímek obrazovky hello vytvořit databázi databáze SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span><span class="sxs-lookup"><span data-stu-id="291e4-359">![Screenshot of hello created SQL database db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span></span>

## <a name="connect-toohello-database-from-visual-studio"></a><span data-ttu-id="291e4-360">Připojit databáze toohello ze sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="291e4-360">Connect toohello database from Visual Studio</span></span>
<span data-ttu-id="291e4-361">Pomocí výsledků dotazu v sadě Visual Studio tooaccess v databázi výstup hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-361">Use Visual Studio tooaccess query results in hello output database.</span></span>

<span data-ttu-id="291e4-362">Připojte databáze SQL toohello (hello cíl) ze sady Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="291e4-362">Connect toohello SQL database (hello destination) from Visual Studio:</span></span>

1. <span data-ttu-id="291e4-363">Otevřete Visual Studio a pak klikněte na tlačítko **nástroje** > **připojit tooDatabase**.</span><span class="sxs-lookup"><span data-stu-id="291e4-363">Open Visual Studio, and then click **Tools** > **Connect tooDatabase**.</span></span>
2. <span data-ttu-id="291e4-364">Pokud se zobrazí dotaz, klikněte na tlačítko **Microsoft SQL Server** jako zdroj dat.</span><span class="sxs-lookup"><span data-stu-id="291e4-364">If asked, click **Microsoft SQL Server** as a data source.</span></span>
   
    ![Dialogové okno Změnit zdroj dat](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image16.png)
3. <span data-ttu-id="291e4-366">V hello **název serveru** pole, vložte hello název, který jste zkopírovali v předchozím oddílu hello ze hello portálu Azure (to znamená, *servername*. database.windows.net).</span><span class="sxs-lookup"><span data-stu-id="291e4-366">In hello **Server name** field, paste hello name that you copied in hello previous section from hello Azure portal (that is, *servername*.database.windows.net).</span></span>
4. <span data-ttu-id="291e4-367">Klikněte na tlačítko **použít ověřování systému SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="291e4-367">Click **Use SQL Server Authentication**.</span></span>
5. <span data-ttu-id="291e4-368">Zadejte **tolladmin** v hello **uživatelské jméno** pole a **123toll!**</span><span class="sxs-lookup"><span data-stu-id="291e4-368">Enter **tolladmin** in hello **User name** field and **123toll!**</span></span> <span data-ttu-id="291e4-369">v hello **heslo** pole.</span><span class="sxs-lookup"><span data-stu-id="291e4-369">in hello **Password** field.</span></span>
6. <span data-ttu-id="291e4-370">Klikněte na tlačítko **vyberte nebo zadejte název databáze**a vyberte **TollDataDB** jako hello databáze.</span><span class="sxs-lookup"><span data-stu-id="291e4-370">Click **Select or enter a database name**, and select **TollDataDB** as hello database.</span></span>
   
    ![Přidat dialogové okno připojení](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image17.jpg)
7. <span data-ttu-id="291e4-372">Klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="291e4-372">Click **OK**.</span></span>
8. <span data-ttu-id="291e4-373">Otevřete Průzkumníka serveru.</span><span class="sxs-lookup"><span data-stu-id="291e4-373">Open Server Explorer.</span></span>
   
    ![Průzkumník serveru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image18.png)
9. <span data-ttu-id="291e4-375">Viz čtyři tabulky v databázi TollDataDB hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-375">See four tables in hello TollDataDB database.</span></span>
   
    ![Tabulky v databázi TollDataDB hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image19.jpg)

## <a name="event-generator-tollapp-sample-project"></a><span data-ttu-id="291e4-377">Generátor událostí: TollApp ukázkový projekt</span><span class="sxs-lookup"><span data-stu-id="291e4-377">Event generator: TollApp sample project</span></span>
<span data-ttu-id="291e4-378">Hello skript prostředí PowerShell automaticky spustí toosend události pomocí programu hello TollApp ukázkové aplikace.</span><span class="sxs-lookup"><span data-stu-id="291e4-378">hello PowerShell script automatically starts toosend events by using hello TollApp sample application program.</span></span> <span data-ttu-id="291e4-379">Tooperform nepotřebujete žádné další kroky.</span><span class="sxs-lookup"><span data-stu-id="291e4-379">You don’t need tooperform any additional steps.</span></span>

<span data-ttu-id="291e4-380">Ale pokud vás zajímají podrobnosti implementace najdete hello zdrojový kód hello TollApp aplikace v Githubu [ukázky/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span><span class="sxs-lookup"><span data-stu-id="291e4-380">However, if you are interested in implementation details, you can find hello source code of hello TollApp application in GitHub [samples/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span></span>

![Snímek obrazovky ukázkový kód zobrazený v sadě Visual Studio](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image20.png)

## <a name="create-a-stream-analytics-job"></a><span data-ttu-id="291e4-382">Vytvoření úlohy Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="291e4-382">Create a Stream Analytics job</span></span>
1. <span data-ttu-id="291e4-383">V hello portálu Azure klikněte na tlačítko hello zeleného znaménka v levém horním rohu hello toocreate stránku hello nové úlohy Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-383">In hello Azure portal, click hello green plus sign in hello top-left corner of hello page toocreate a new Stream Analytics job.</span></span> <span data-ttu-id="291e4-384">Vyberte **Intelligence + analýzy** a pak klikněte na **úlohy služby Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="291e4-384">Select **Intelligence + Analytics** and then click **Stream Analytics job**.</span></span>
   
    ![tlačítko Nový](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image21.png)
2. <span data-ttu-id="291e4-386">Zadejte název úlohy, ověřování odběru hello opravte a potom vytvořit novou skupinu prostředků v hello stejné oblasti jako hello úložiště centra událostí (výchozí hodnota je jihu USA pro skript hello).</span><span class="sxs-lookup"><span data-stu-id="291e4-386">Provide a job name, validate hello subscription is correct and then create a new Resource group in hello same region as hello Event hub storage (default is South Central US for hello script).</span></span>
3. <span data-ttu-id="291e4-387">Klikněte na tlačítko **Pin toodashboard** a potom **vytvořit** v hello dolní části stránky hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-387">Click **Pin toodashboard** and then **CREATE** at hello bottom of hello page.</span></span>
   
    ![Vytvoření úlohy Stream Analytics možnost](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image22.png)

## <a name="define-input-sources"></a><span data-ttu-id="291e4-389">Definování vstupních zdrojů</span><span class="sxs-lookup"><span data-stu-id="291e4-389">Define input sources</span></span>
1. <span data-ttu-id="291e4-390">Úloha Hello vytvoříte a otevřete stránku hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-390">hello job will create and open hello job page.</span></span> <span data-ttu-id="291e4-391">Nebo můžete kliknout na hello vytvořil úlohu analýzy na řídicí panel portálu hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-391">Or you can click hello created analytics job on hello portal dashboard.</span></span>

2. <span data-ttu-id="291e4-392">Klikněte na tlačítko hello **VSTUPY** kartě toodefine hello zdrojová data.</span><span class="sxs-lookup"><span data-stu-id="291e4-392">Click hello **INPUTS** tab toodefine hello source data.</span></span>
   
    ![Karta vstupy Hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image24.png)
3. <span data-ttu-id="291e4-394">Klikněte na tlačítko **přidat vstup**.</span><span class="sxs-lookup"><span data-stu-id="291e4-394">Click **ADD AN INPUT**.</span></span>
   
    ![Hello přidat vstup možnost](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image25.png)
4. <span data-ttu-id="291e4-396">Zadejte **EntryStream** jako **vstupní ALIAS**.</span><span class="sxs-lookup"><span data-stu-id="291e4-396">Enter **EntryStream** as **INPUT ALIAS**.</span></span>
5. <span data-ttu-id="291e4-397">Typ zdroje je **datový proud**</span><span class="sxs-lookup"><span data-stu-id="291e4-397">Source Type is **Data Stream**</span></span>
6. <span data-ttu-id="291e4-398">Zdroj je **centra událostí**.</span><span class="sxs-lookup"><span data-stu-id="291e4-398">Source is **Event hub**.</span></span>
7. <span data-ttu-id="291e4-399">**Obor názvů sběrnice** by měla být hello TollData, jeden v hello rozevírací nabídku.</span><span class="sxs-lookup"><span data-stu-id="291e4-399">**Service bus namespace** should be hello TollData one in hello drop down.</span></span>
8. <span data-ttu-id="291e4-400">**Název centra událostí** by mělo být nastavené příliš**položka**.</span><span class="sxs-lookup"><span data-stu-id="291e4-400">**Event hub name** should be set too**entry**.</span></span>
9. <span data-ttu-id="291e4-401">**Název zásady centra událostí*je **RootManageSharedAccessKey** (hello výchozí hodnota).</span><span class="sxs-lookup"><span data-stu-id="291e4-401">**Event hub policy name*is **RootManageSharedAccessKey**  (hello default value).</span></span>
10. <span data-ttu-id="291e4-402">Vyberte **JSON** pro **formát SERIALIZACE událostí** a **UTF8** pro **kódování**.</span><span class="sxs-lookup"><span data-stu-id="291e4-402">Select **JSON** for **EVENT SERIALIZATION FORMAT** and **UTF8** for **ENCODING**.</span></span>
   
    <span data-ttu-id="291e4-403">Nastavení bude vypadat jako:</span><span class="sxs-lookup"><span data-stu-id="291e4-403">Your settings will look like:</span></span>
   
    ![Nastavení centra událostí](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image28.png)

10. <span data-ttu-id="291e4-405">Klikněte na tlačítko **vytvořit** dole hello v Průvodci hello toofinish stránku hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-405">Click **Create** at hello bottom of hello page toofinish hello wizard.</span></span>
    
    <span data-ttu-id="291e4-406">Teď, když jste vytvořili hello vstupního datového proudu, postupujte podle hello stejné kroky toocreate hello konec datového proudu.</span><span class="sxs-lookup"><span data-stu-id="291e4-406">Now that you've created hello entry stream, you will follow hello same steps toocreate hello exit stream.</span></span> <span data-ttu-id="291e4-407">Být jisti tooenter hodnoty jako na následující snímek obrazovky hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-407">Be sure tooenter values as on hello following screenshot.</span></span>
    
    ![Nastavení pro hello výstupní proud](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image31.png)
    
    <span data-ttu-id="291e4-409">Jste definovali dva vstupní datové proudy:</span><span class="sxs-lookup"><span data-stu-id="291e4-409">You have defined two input streams:</span></span>
    
    ![Vstupní datové proudy definované v hello portálu Azure](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image32.png)
    
    <span data-ttu-id="291e4-411">V dalším kroku přidáte referenčního datového vstupu pro soubor hello objektů blob, který obsahuje car registrační data.</span><span class="sxs-lookup"><span data-stu-id="291e4-411">Next, you will add reference data input for hello blob file that contains car registration data.</span></span>
11. <span data-ttu-id="291e4-412">Klikněte na tlačítko **přidat**a pak postupujte podle hello stejný proces pro vstupy datového proudu hello ale vybrat **referenční DATA** místo **datový proud** a hello **vstupní Alias**  je **registrace**.</span><span class="sxs-lookup"><span data-stu-id="291e4-412">Click **ADD**, and then follow hello same process for hello stream inputs but select **REFERENCE DATA** instead of **Data Stream** and hello **Input Alias** is **Registration**.</span></span>

12. <span data-ttu-id="291e4-413">účet úložiště, který začíná **tolldata**.</span><span class="sxs-lookup"><span data-stu-id="291e4-413">storage account that starts with **tolldata**.</span></span> <span data-ttu-id="291e4-414">název kontejneru Hello by měl být **tolldata**a hello **vzorek cesty** by měla být **registration.json**.</span><span class="sxs-lookup"><span data-stu-id="291e4-414">hello container name should be **tolldata**, and hello **PATH PATTERN** should be **registration.json**.</span></span> <span data-ttu-id="291e4-415">Tento název souboru je velká a malá písmena a musí být **malá**.</span><span class="sxs-lookup"><span data-stu-id="291e4-415">This file name is case sensitive and should be **lowercase**.</span></span>
    
    ![Nastavení úložiště blog](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image34.png)
13. <span data-ttu-id="291e4-417">Klikněte na tlačítko **vytvořit** toofinish hello průvodce.</span><span class="sxs-lookup"><span data-stu-id="291e4-417">Click **Create** toofinish hello wizard.</span></span>

<span data-ttu-id="291e4-418">Nyní jsou definovány všechny vstupy.</span><span class="sxs-lookup"><span data-stu-id="291e4-418">Now all inputs are defined.</span></span>

## <a name="define-output"></a><span data-ttu-id="291e4-419">Definujte výstupní</span><span class="sxs-lookup"><span data-stu-id="291e4-419">Define output</span></span>
1. <span data-ttu-id="291e4-420">V podokně přehled úlohy Stream Analytics hello vyberte **výstupy**.</span><span class="sxs-lookup"><span data-stu-id="291e4-420">On hello Stream Analytics job overview pane, select **OUTPUTS**.</span></span>
   
    ![Karta Výstup Hello a možnost "Přidat výstup"](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image37.png)
2. <span data-ttu-id="291e4-422">Klikněte na tlačítko **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="291e4-422">Click **Add**.</span></span>
3. <span data-ttu-id="291e4-423">Sada hello **alias pro výstup** too'output a potom **jímky** příliš**databáze SQL**.</span><span class="sxs-lookup"><span data-stu-id="291e4-423">Set hello **Output alias** too'output' and then **Sink** too**SQL database**.</span></span>
3. <span data-ttu-id="291e4-424">Vyberte název serveru hello, která byla použita v hello hello článku v části "Connect tooDatabase ze sady Visual Studio".</span><span class="sxs-lookup"><span data-stu-id="291e4-424">Select hello server name that was used in hello “Connect tooDatabase from Visual Studio” section of hello article.</span></span> <span data-ttu-id="291e4-425">Název databáze Hello je **TollDataDB**.</span><span class="sxs-lookup"><span data-stu-id="291e4-425">hello database name is **TollDataDB**.</span></span>
4. <span data-ttu-id="291e4-426">Zadejte **tolladmin** v hello **uživatelské jméno** pole, **123toll!**</span><span class="sxs-lookup"><span data-stu-id="291e4-426">Enter **tolladmin** in hello **USERNAME** field, **123toll!**</span></span> <span data-ttu-id="291e4-427">v hello **heslo** pole, a **TollDataRefJoin** v hello **tabulky** pole.</span><span class="sxs-lookup"><span data-stu-id="291e4-427">in hello **PASSWORD** field, and **TollDataRefJoin** in hello **TABLE** field.</span></span>
   
    ![Nastavení databáze SQL](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image38.png)
5. <span data-ttu-id="291e4-429">Klikněte na možnost **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="291e4-429">Click **Create**.</span></span>

## <a name="azure-stream-analytics-query"></a><span data-ttu-id="291e4-430">Azure Stream analytics dotazu</span><span class="sxs-lookup"><span data-stu-id="291e4-430">Azure Stream analytics query</span></span>
<span data-ttu-id="291e4-431">Hello **dotazu** karta obsahuje dotaz SQL, transformací hello příchozí data.</span><span class="sxs-lookup"><span data-stu-id="291e4-431">hello **QUERY** tab contains a SQL query that transforms hello incoming data.</span></span>

![Dotaz přidat karta toohello dotazů](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image39.png)

<span data-ttu-id="291e4-433">V tomto kurzu pokusí tooanswer několik obchodní otázky, které se týkají tootoll dat a konstrukce Stream Analytics dotazy, které lze použít v Azure Stream Analytics tooprovide příslušných odpovědí.</span><span class="sxs-lookup"><span data-stu-id="291e4-433">This tutorial attempts tooanswer several business questions that are related tootoll data and constructs Stream Analytics queries that can be used in Azure Stream Analytics tooprovide a relevant answer.</span></span>

<span data-ttu-id="291e4-434">Než začnete vaše první práce Stream Analytics, podíváme se na několik scénáře a syntaxe dotazů hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-434">Before you start your first Stream Analytics job, let’s explore a few scenarios and hello query syntax.</span></span>

## <a name="introduction-tooazure-stream-analytics-query-language"></a><span data-ttu-id="291e4-435">Úvod tooAzure Stream Analytics query language</span><span class="sxs-lookup"><span data-stu-id="291e4-435">Introduction tooAzure Stream Analytics query language</span></span>
- - -
<span data-ttu-id="291e4-436">Řekněme, že je potřeba toocount hello počet vozidel, které projedou stánek zadejte.</span><span class="sxs-lookup"><span data-stu-id="291e4-436">Let’s say that you need toocount hello number of vehicles that enter a toll booth.</span></span> <span data-ttu-id="291e4-437">Protože to je nepřetržitý proud událostí, máte toodefine "období času."</span><span class="sxs-lookup"><span data-stu-id="291e4-437">Because this is a continuous stream of events, you have toodefine a “period of time.”</span></span> <span data-ttu-id="291e4-438">Pojďme upravit toobe otázku hello "kolik vozidel zadejte projedou stánek každé tři minuty?".</span><span class="sxs-lookup"><span data-stu-id="291e4-438">Let's modify hello question toobe “How many vehicles enter a toll booth every three minutes?”.</span></span> <span data-ttu-id="291e4-439">To je obvykle označují tooas hello přeskakujícího počet.</span><span class="sxs-lookup"><span data-stu-id="291e4-439">This is commonly referred tooas hello tumbling count.</span></span>

<span data-ttu-id="291e4-440">Podívejme se na hello Azure Stream Analytics dotaz, který odpoví na tuto otázku:</span><span class="sxs-lookup"><span data-stu-id="291e4-440">Let’s look at hello Azure Stream Analytics query that answers this question:</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*) AS Count
    FROM EntryStream TIMESTAMP BY EntryTime
    GROUP BY TUMBLINGWINDOW(minute, 3), TollId

<span data-ttu-id="291e4-441">Jak vidíte, Azure Stream Analytics používá dotazovací jazyk, který je například SQL a přidává několik rozšíření toospecify souvisejících s časem aspektů hello dotazu.</span><span class="sxs-lookup"><span data-stu-id="291e4-441">As you can see, Azure Stream Analytics uses a query language that's like SQL and adds a few extensions toospecify time-related aspects of hello query.</span></span>

<span data-ttu-id="291e4-442">Další podrobnosti najdete v tématu o [Správa času](https://msdn.microsoft.com/library/azure/mt582045.aspx) a [Oddílová](https://msdn.microsoft.com/library/azure/dn835019.aspx) konstrukce používaných v dotazu hello z webu MSDN.</span><span class="sxs-lookup"><span data-stu-id="291e4-442">For more details, read about [Time Management](https://msdn.microsoft.com/library/azure/mt582045.aspx) and [Windowing](https://msdn.microsoft.com/library/azure/dn835019.aspx) constructs used in hello query from MSDN.</span></span>

## <a name="testing-azure-stream-analytics-queries"></a><span data-ttu-id="291e4-443">Testování dotazů Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="291e4-443">Testing Azure Stream Analytics queries</span></span>
<span data-ttu-id="291e4-444">Teď, když jste napsali svůj první dotaz Azure Stream Analytics, je čas tootest pomocí ukázkových datových souborů umístěná ve složce TollApp aplikace hello následující cesty:</span><span class="sxs-lookup"><span data-stu-id="291e4-444">Now that you have written your first Azure Stream Analytics query, it is time tootest it by using sample data files located in your TollApp folder in hello following path:</span></span>

<span data-ttu-id="291e4-445">**.. \\TollApp\\TollApp\\dat**</span><span class="sxs-lookup"><span data-stu-id="291e4-445">**..\\TollApp\\TollApp\\Data**</span></span>

<span data-ttu-id="291e4-446">Tato složka obsahuje hello následující soubory:</span><span class="sxs-lookup"><span data-stu-id="291e4-446">This folder contains hello following files:</span></span>

* <span data-ttu-id="291e4-447">Entry.JSON</span><span class="sxs-lookup"><span data-stu-id="291e4-447">Entry.json</span></span>
* <span data-ttu-id="291e4-448">Exit.JSON</span><span class="sxs-lookup"><span data-stu-id="291e4-448">Exit.json</span></span>
* <span data-ttu-id="291e4-449">Registration.JSON</span><span class="sxs-lookup"><span data-stu-id="291e4-449">Registration.json</span></span>

## <a name="question-1-number-of-vehicles-entering-a-toll-booth"></a><span data-ttu-id="291e4-450">Otázka č. 1: Počet vozidel zadávání stánek projedou</span><span class="sxs-lookup"><span data-stu-id="291e4-450">Question 1: Number of vehicles entering a toll booth</span></span>
1. <span data-ttu-id="291e4-451">Otevřete hello portál Azure a přejděte tooyour vytvořit úlohy Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-451">Open hello Azure portal and go tooyour created Azure Stream Analytics job.</span></span> <span data-ttu-id="291e4-452">Klikněte na tlačítko hello **dotazu** kartě a vložte dotaz z předchozí části hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-452">Click hello **QUERY** tab and paste query from hello previous section.</span></span>

2. <span data-ttu-id="291e4-453">toovalidate tento dotaz ukázková data, nahrávání dat hello do hello EntryStream vstup kliknutím hello... symbolů a výběr **nahrát ukázková data ze souboru**.</span><span class="sxs-lookup"><span data-stu-id="291e4-453">toovalidate this query against sample data, upload hello data into hello EntryStream input by clicking hello ... symbol and selecting **Upload sample data from file**.</span></span>

    ![Snímek obrazovky hello Entry.json souboru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image41.png)
3. <span data-ttu-id="291e4-455">V podokně hello, který se zobrazí vyberte hello souboru (Entry.json) na místní počítač a klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="291e4-455">In hello pane that appears select hello file (Entry.json) on your local machine and click **OK**.</span></span> <span data-ttu-id="291e4-456">Hello **Test** ikonu teď osvětlení a možné klepnout.</span><span class="sxs-lookup"><span data-stu-id="291e4-456">hello **Test** icon will now illuminate and be clickable.</span></span>
   
    ![Snímek obrazovky hello Entry.json souboru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image42.png)
3. <span data-ttu-id="291e4-458">Ověřte, že výstup hello hello dotazu podle očekávání:</span><span class="sxs-lookup"><span data-stu-id="291e4-458">Validate that hello output of hello query is as expected:</span></span>
   
    ![Výsledky testu hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image43.png)

## <a name="question-2-report-total-time-for-each-car-toopass-through-hello-toll-booth"></a><span data-ttu-id="291e4-460">Otázka č. 2: Sestava celkovou dobu pro každý car toopass prostřednictvím stánek projedou hello</span><span class="sxs-lookup"><span data-stu-id="291e4-460">Question 2: Report total time for each car toopass through hello toll booth</span></span>
<span data-ttu-id="291e4-461">Průměrná doba Hello, které je nutné pro car toopass prostřednictvím projedou hello pomáhá tooassess hello efektivitu hello proces a zkušeností zákazníků se hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-461">hello average time that's required for a car toopass through hello toll helps tooassess hello efficiency of hello process and hello customer experience.</span></span>

<span data-ttu-id="291e4-462">toofind hello celkový čas, je nutné toojoin hello EntryTime datový proud s hello ExitTime datového proudu.</span><span class="sxs-lookup"><span data-stu-id="291e4-462">toofind hello total time, you need toojoin hello EntryTime stream with hello ExitTime stream.</span></span> <span data-ttu-id="291e4-463">Datové proudy hello na sloupce TollId a LicencePlate se připojí.</span><span class="sxs-lookup"><span data-stu-id="291e4-463">You will join hello streams on TollId and LicencePlate columns.</span></span> <span data-ttu-id="291e4-464">Hello **připojení** operátor vyžaduje, abyste toospecify dočasné volnost, který popisuje hello přijatelný časový rozdíl mezi hello připojené k události.</span><span class="sxs-lookup"><span data-stu-id="291e4-464">hello **JOIN** operator requires you toospecify temporal leeway that describes hello acceptable time difference between hello joined events.</span></span> <span data-ttu-id="291e4-465">Budete používat **DATEDIFF** funkce toospecify, že události musí být delší než 15 minut od sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="291e4-465">You will use **DATEDIFF** function toospecify that events should be no more than 15 minutes from each other.</span></span> <span data-ttu-id="291e4-466">Použijí se taky hello **DATEDIFF** tooexit funkce a záznam časy toocompute hello skutečný čas automobilu stráví v hello výběr poplatků stanice.</span><span class="sxs-lookup"><span data-stu-id="291e4-466">You will also apply hello **DATEDIFF** function tooexit and entry times toocompute hello actual time that a car spends in hello toll station.</span></span> <span data-ttu-id="291e4-467">Všimněte si hello rozdíl hello použití **DATEDIFF** při použití v **vyberte** příkaz ne **připojení** podmínku.</span><span class="sxs-lookup"><span data-stu-id="291e4-467">Note hello difference of hello use of **DATEDIFF** when it's used in a **SELECT** statement rather than a **JOIN** condition.</span></span>

    SELECT EntryStream.TollId, EntryStream.EntryTime, ExitStream.ExitTime, EntryStream.LicensePlate, DATEDIFF (minute , EntryStream.EntryTime, ExitStream.ExitTime) AS DurationInMinutes
    FROM EntryStream TIMESTAMP BY EntryTime
    JOIN ExitStream TIMESTAMP BY ExitTime
    ON (EntryStream.TollId= ExitStream.TollId AND EntryStream.LicensePlate = ExitStream.LicensePlate)
    AND DATEDIFF (minute, EntryStream, ExitStream ) BETWEEN 0 AND 15

1. <span data-ttu-id="291e4-468">tootest tento dotaz aktualizace hello dotaz na hello **dotazu** pro úlohu hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-468">tootest this query, update hello query on hello **QUERY** for hello job.</span></span> <span data-ttu-id="291e4-469">Přidat hello testovací soubor pro **ExitStream** stejně jako **EntryStream** byla zadaná výše.</span><span class="sxs-lookup"><span data-stu-id="291e4-469">Add hello test file for **ExitStream** just like **EntryStream** was entered above.</span></span>
   
2. <span data-ttu-id="291e4-470">Klikněte na tlačítko **Test**.</span><span class="sxs-lookup"><span data-stu-id="291e4-470">Click **Test**.</span></span>

3. <span data-ttu-id="291e4-471">Vyberte hello políčko tootest hello dotazů a zobrazení hello výstup:</span><span class="sxs-lookup"><span data-stu-id="291e4-471">Select hello check box tootest hello query and view hello output:</span></span>
   
    ![Výstup hello testu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image45.png)

## <a name="question-3-report-all-commercial-vehicles-with-expired-registration"></a><span data-ttu-id="291e4-473">Otázka č. 3: Sestavy všech komerční vozidel s vypršenou platností registrace</span><span class="sxs-lookup"><span data-stu-id="291e4-473">Question 3: Report all commercial vehicles with expired registration</span></span>
<span data-ttu-id="291e4-474">Azure Stream Analytics můžete použít statické snímky dat toojoin s dočasné datové proudy.</span><span class="sxs-lookup"><span data-stu-id="291e4-474">Azure Stream Analytics can use static snapshots of data toojoin with temporal data streams.</span></span> <span data-ttu-id="291e4-475">toodemonstrate tato funkce, které hello použijte následující ukázkový dotaz.</span><span class="sxs-lookup"><span data-stu-id="291e4-475">toodemonstrate this capability, use hello following sample question.</span></span>

<span data-ttu-id="291e4-476">Pokud komerční vehicle je registrován s hello projedou společnosti, můžete předat prostřednictvím hello projedou stánek bez zastavení pro kontroly.</span><span class="sxs-lookup"><span data-stu-id="291e4-476">If a commercial vehicle is registered with hello toll company, it can pass through hello toll booth without being stopped for inspection.</span></span> <span data-ttu-id="291e4-477">Registrace komerční Vehicle vyhledávací tabulka tooidentify použijete všechny vozidel komerční, jejichž platnost vypršela registrace.</span><span class="sxs-lookup"><span data-stu-id="291e4-477">You will use Commercial Vehicle Registration lookup table tooidentify all commercial vehicles that have expired registrations.</span></span>

```
SELECT EntryStream.EntryTime, EntryStream.LicensePlate, EntryStream.TollId, Registration.RegistrationId
FROM EntryStream TIMESTAMP BY EntryTime
JOIN Registration
ON EntryStream.LicensePlate = Registration.LicensePlate
WHERE Registration.Expired = '1'
```

<span data-ttu-id="291e4-478">tootest dotazu pomocí referenční data, musíte toodefine vstupní zdroj pro hello referenční data, která jste již dokončili.</span><span class="sxs-lookup"><span data-stu-id="291e4-478">tootest a query by using reference data, you need toodefine an input source for hello reference data, which you have done already.</span></span>

<span data-ttu-id="291e4-479">tootest tento dotaz dotaz hello vložení do hello **dotazu** , klikněte na **Test**a zadejte hello dva vstupní zdroje a hello registrace vzorová data a klikněte na tlačítko **Test**.</span><span class="sxs-lookup"><span data-stu-id="291e4-479">tootest this query, paste hello query into hello **QUERY** tab, click **Test**, and specify hello two input sources and hello registration sample data and click **Test**.</span></span>  
   
![Výstup hello testu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image46.png)

## <a name="start-hello-stream-analytics-job"></a><span data-ttu-id="291e4-481">Spuštění úlohy Stream Analytics hello</span><span class="sxs-lookup"><span data-stu-id="291e4-481">Start hello Stream Analytics job</span></span>
<span data-ttu-id="291e4-482">Nyní je čas toofinish hello konfiguraci a spuštění hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-482">Now it's time toofinish hello configuration and start hello job.</span></span> <span data-ttu-id="291e4-483">Uložit hello dotazů od 3 otázku, která bude vytvoření výstupu, odpovídá hello schéma hello **TollDataRefJoin** výstupní tabulka.</span><span class="sxs-lookup"><span data-stu-id="291e4-483">Save hello query from Question 3, which will produce output that matches hello schema of hello **TollDataRefJoin** output table.</span></span>

<span data-ttu-id="291e4-484">Úloha přejděte toohello **řídicí panel**a klikněte na tlačítko **spustit**.</span><span class="sxs-lookup"><span data-stu-id="291e4-484">Go toohello job **DASHBOARD**, and click **START**.</span></span>

![Snímek obrazovky hello tlačítko Start na řídicím panelu úlohy hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image48.png)

<span data-ttu-id="291e4-486">V poli hello dialogové okno, které se otevře, změnit hello **spustit výstup** čas příliš**vlastní čas**.</span><span class="sxs-lookup"><span data-stu-id="291e4-486">In hello dialog box that opens, change hello **START OUTPUT** time too**CUSTOM TIME**.</span></span> <span data-ttu-id="291e4-487">Změňte hodinu tooone hello hodinu před hello aktuální čas.</span><span class="sxs-lookup"><span data-stu-id="291e4-487">Change hello hour tooone hour before hello current time.</span></span> <span data-ttu-id="291e4-488">Tato změna zajistí, že jsou všechny události z centra událostí hello zpracovaných od spuštění toogenerate hello události od začátku hello hello kurzu.</span><span class="sxs-lookup"><span data-stu-id="291e4-488">This change ensures that all events from hello event hub are processed since you started toogenerate hello events at hello beginning of hello tutorial.</span></span> <span data-ttu-id="291e4-489">Klikněte na tlačítko hello **spustit** tlačítko toostart hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-489">Now click hello **Start** button toostart hello job.</span></span>

![Výběr vlastních času](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image49.png)

<span data-ttu-id="291e4-491">Počáteční hello úlohy může trvat několik minut.</span><span class="sxs-lookup"><span data-stu-id="291e4-491">Starting hello job can take a few minutes.</span></span> <span data-ttu-id="291e4-492">Stav hello můžete zobrazit na stránku hello nejvyšší úrovně pro Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-492">You can see hello status on hello top-level page for Stream Analytics.</span></span>

![Snímek obrazovky hello stav úlohy hello](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image50.png)

## <a name="check-results-in-visual-studio"></a><span data-ttu-id="291e4-494">Výsledky kontroly v sadě Visual Studio</span><span class="sxs-lookup"><span data-stu-id="291e4-494">Check results in Visual Studio</span></span>
1. <span data-ttu-id="291e4-495">Otevřete Průzkumníka serveru Visual Studia a klikněte pravým tlačítkem na hello **TollDataRefJoin** tabulky.</span><span class="sxs-lookup"><span data-stu-id="291e4-495">Open Visual Studio Server Explorer, and right-click hello **TollDataRefJoin** table.</span></span>
2. <span data-ttu-id="291e4-496">Klikněte na tlačítko **zobrazit Data tabulky** toosee hello výstupu úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-496">Click **Show Table Data** toosee hello output of your job.</span></span>
   
    ![Výběr "Zobrazit tabulku Data" v Průzkumníku serveru](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image51.jpg)

## <a name="scale-out-azure-stream-analytics-jobs"></a><span data-ttu-id="291e4-498">Horizontální navýšení kapacity Azure Stream Analytics úlohy</span><span class="sxs-lookup"><span data-stu-id="291e4-498">Scale out Azure Stream Analytics jobs</span></span>
<span data-ttu-id="291e4-499">Azure Stream Analytics je navržený tak, tooelastically škálovat tak, aby ho může zpracovávat velké množství dat.</span><span class="sxs-lookup"><span data-stu-id="291e4-499">Azure Stream Analytics is designed tooelastically scale so that it can handle a lot of data.</span></span> <span data-ttu-id="291e4-500">Hello Azure Stream Analytics dotazu lze použít **PARTITION BY** klauzule tootell hello systém, který bude tento krok škálovat. **PartitionId** je speciální sloupec, který hello systému přidá ID oddílu hello toomatch vstupu hello (Centrum událostí).</span><span class="sxs-lookup"><span data-stu-id="291e4-500">hello Azure Stream Analytics query can use a **PARTITION BY** clause tootell hello system that this step will scale out. **PartitionId** is a special column that hello system adds toomatch hello partition ID of hello input (event hub).</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*)AS Count
    FROM EntryStream TIMESTAMP BY EntryTime PARTITION BY PartitionId
    GROUP BY TUMBLINGWINDOW(minute,3), TollId, PartitionId

1. <span data-ttu-id="291e4-501">Aktuální úlohu zastavení hello, aktualizace hello dotaz hello **dotazu** kartě a otevřete hello **nastavení** zařízení na řídicím panelu hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-501">Stop hello current job, update hello query in hello **QUERY** tab, and open hello **Settings** gear in hello job dashboard.</span></span> <span data-ttu-id="291e4-502">Klikněte na tlačítko **škálování**.</span><span class="sxs-lookup"><span data-stu-id="291e4-502">Click **Scale**.</span></span>
   
    <span data-ttu-id="291e4-503">**JEDNOTEK STREAMING** definovat může přijímat hello množství výpočetního výkonu, který hello úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-503">**STREAMING UNITS** define hello amount of compute power that hello job can receive.</span></span>
2. <span data-ttu-id="291e4-504">Změna hello rozevíracího seznamu od 1 z 6.</span><span class="sxs-lookup"><span data-stu-id="291e4-504">Change hello drop down from 1 from 6.</span></span>
   
    ![Snímek obrazovky výběru 6 jednotky streamování](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image52.png)
3. <span data-ttu-id="291e4-506">Přejděte toohello **výstupy** kartě a změňte název hello tabulky SQL hello příliš**TollDataTumblingCountPartitioned**.</span><span class="sxs-lookup"><span data-stu-id="291e4-506">Go toohello **OUTPUTS** tab and change hello name of hello SQL table too**TollDataTumblingCountPartitioned**.</span></span>

<span data-ttu-id="291e4-507">Pokud spustíte úlohu hello nyní může Azure Stream Analytics rozložení práce mezi víc zdrojích výpočtů a dosáhnout lepší propustnosti.</span><span class="sxs-lookup"><span data-stu-id="291e4-507">If you start hello job now, Azure Stream Analytics can distribute work across more compute resources and achieve better throughput.</span></span> <span data-ttu-id="291e4-508">Upozorňujeme, že tento hello TollApp aplikace také odesílá události podle TollId na oddíly.</span><span class="sxs-lookup"><span data-stu-id="291e4-508">Please note that hello TollApp application is also sending events partitioned by TollId.</span></span>

## <a name="monitor"></a><span data-ttu-id="291e4-509">Monitorování</span><span class="sxs-lookup"><span data-stu-id="291e4-509">Monitor</span></span>
<span data-ttu-id="291e4-510">Hello **monitorování** oblast obsahuje statistiku hello spuštění úlohy.</span><span class="sxs-lookup"><span data-stu-id="291e4-510">hello **MONITOR** area contains statistics about hello running job.</span></span> <span data-ttu-id="291e4-511">Prvním konfigurace je potřeba účet úložiště hello toouse hello stejné oblasti (název poplatků jako hello zbytek tohoto dokumentu).</span><span class="sxs-lookup"><span data-stu-id="291e4-511">First time configuration is needed toouse hello storage account in hello same region (name toll like hello rest of this document).</span></span>   

![Snímek obrazovky monitorování](media/stream-analytics-build-an-iot-solution-using-stream-analytics/monitoring.png)

<span data-ttu-id="291e4-513">Dostanete **protokoly aktivity** z řídicího panelu úloha hello **nastavení** také oblasti.</span><span class="sxs-lookup"><span data-stu-id="291e4-513">You can access **Activity Logs** from hello job dashboard **Settings** area as well.</span></span>


## <a name="conclusion"></a><span data-ttu-id="291e4-514">Závěr</span><span class="sxs-lookup"><span data-stu-id="291e4-514">Conclusion</span></span>
<span data-ttu-id="291e4-515">V tomto kurzu se zavedl toohello služby Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-515">This tutorial introduced you toohello Azure Stream Analytics service.</span></span> <span data-ttu-id="291e4-516">Je prokázat, jak tooconfigure vstupy a výstupy pro hello úlohy služby Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-516">It demonstrated how tooconfigure inputs and outputs for hello Stream Analytics job.</span></span> <span data-ttu-id="291e4-517">Pomocí hello Projedou Data scénář, hello kurzu popsaných nejběžnějších problémů, které vznikají v prostoru hello dat v provozu a o tom, jak lze vyřešit pomocí jednoduchého dotazy podobné jazyku SQL v Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-517">Using hello Toll Data scenario, hello tutorial explained common types of problems that arise in hello space of data in motion and how they can be solved with simple SQL-like queries in Azure Stream Analytics.</span></span> <span data-ttu-id="291e4-518">kurz Hello popsané konstrukce rozšíření SQL pro práci s dočasná data.</span><span class="sxs-lookup"><span data-stu-id="291e4-518">hello tutorial described SQL extension constructs for working with temporal data.</span></span> <span data-ttu-id="291e4-519">Vám ukázal, jak toojoin datových proudů, jak tooenrich hello datový proud statická referenční data a jak tooscale na vyšší propustnost tooachieve dotazu.</span><span class="sxs-lookup"><span data-stu-id="291e4-519">It showed how toojoin data streams, how tooenrich hello data stream with static reference data, and how tooscale out a query tooachieve higher throughput.</span></span>

<span data-ttu-id="291e4-520">I když tento kurz představuje dobrou úvod, není kompletní, a to jakýmkoli způsobem.</span><span class="sxs-lookup"><span data-stu-id="291e4-520">Although this tutorial provides a good introduction, it is not complete by any means.</span></span> <span data-ttu-id="291e4-521">Můžete najít další typy dotazů pomocí jazyka SAQL hello v [dotaz příkladů běžných vzorů využití Stream Analytics](stream-analytics-stream-analytics-query-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="291e4-521">You can find more query patterns using hello SAQL language at [Query examples for common Stream Analytics usage patterns](stream-analytics-stream-analytics-query-patterns.md).</span></span>
<span data-ttu-id="291e4-522">Odkazovat toohello [online dokumentaci](https://azure.microsoft.com/documentation/services/stream-analytics/) toolearn Další informace o Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="291e4-522">Refer toohello [online documentation](https://azure.microsoft.com/documentation/services/stream-analytics/) toolearn more about Azure Stream Analytics.</span></span>

## <a name="clean-up-your-azure-account"></a><span data-ttu-id="291e4-523">Vyčištění účtu Azure</span><span class="sxs-lookup"><span data-stu-id="291e4-523">Clean up your Azure account</span></span>
1. <span data-ttu-id="291e4-524">Zastavení úlohy Stream Analytics hello v hello portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="291e4-524">Stop hello Stream Analytics job in hello Azure portal.</span></span>
   
    <span data-ttu-id="291e4-525">Hello Setup.ps1 skript vytvoří dvě centrům událostí a databázi SQL.</span><span class="sxs-lookup"><span data-stu-id="291e4-525">hello Setup.ps1 script creates two event hubs and a SQL database.</span></span> <span data-ttu-id="291e4-526">Následující pokyny vám pomohou vyčištění prostředků na konci hello tohoto kurzu hello Hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-526">hello following instructions help you clean up resources at hello end of hello tutorial.</span></span>
2. <span data-ttu-id="291e4-527">V okně prostředí PowerShell, zadejte **.\\ CleanUp.ps1** toostart hello skript, který odstraní prostředky využívané v kurzu hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-527">In a PowerShell window, type **.\\Cleanup.ps1** toostart hello script that deletes resources used in hello tutorial.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="291e4-528">Prostředky jsou identifikovány názvem hello.</span><span class="sxs-lookup"><span data-stu-id="291e4-528">Resources are identified by hello name.</span></span> <span data-ttu-id="291e4-529">Ujistěte se, že jednotlivé položky pečlivě zkontrolovat před potvrzením odebrání.</span><span class="sxs-lookup"><span data-stu-id="291e4-529">Make sure you carefully review each item before confirming removal.</span></span>
   > 
   > 


