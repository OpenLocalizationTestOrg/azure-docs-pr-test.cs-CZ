---
title: "Průvodci odstraňováním potíží Azure Stream Analytics | Microsoft Docs"
description: "Řešení potíží s vaší úloze Stream Analytics"
keywords: "řešení potíží s Průvodce"
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 8ecf279047f06691cef1bc0db06888974405a9f0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshooting-guide-for-azure-stream-analytics"></a><span data-ttu-id="cc676-104">Průvodce řešením potíží pro Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cc676-104">Troubleshooting guide for Azure Stream Analytics</span></span>

<span data-ttu-id="cc676-105">Řešení potíží Azure Stream Analytics můžete zobrazí jako komplexní úsilí na první pohled.</span><span class="sxs-lookup"><span data-stu-id="cc676-105">Azure Stream Analytics troubleshooting can appear to be a complex effort at first glance.</span></span> <span data-ttu-id="cc676-106">Po dokončení práce s mnoha uživateli, vytvořili jsme Tato příručka ke zjednodušení procesu a odebrat průběhu o vstupy, výstupy, dotazů a funkce.</span><span class="sxs-lookup"><span data-stu-id="cc676-106">After working with many users, we have created this guide to help streamline the process and remove the guesswork about your inputs, outputs, queries, and functions.</span></span>

## <a name="troubleshoot-your-stream-analytics-job"></a><span data-ttu-id="cc676-107">Řešení potíží s vaší úloze Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cc676-107">Troubleshoot your Stream Analytics job</span></span>

<span data-ttu-id="cc676-108">Chcete-li dosáhnout nejlepších výsledků při řešení potíží úlohu služby Stream Analytics použijte následující pokyny:</span><span class="sxs-lookup"><span data-stu-id="cc676-108">For best results in troubleshooting your Stream Analytics job, use the following guidelines:</span></span>

1.  <span data-ttu-id="cc676-109">Test připojení:</span><span class="sxs-lookup"><span data-stu-id="cc676-109">Test your connectivity:</span></span>
    - <span data-ttu-id="cc676-110">Ověření připojení k vstupů a výstupů pomocí **Test připojení** tlačítko pro každý vstup a výstup.</span><span class="sxs-lookup"><span data-stu-id="cc676-110">Verify connectivity to inputs and outputs by using the **Test Connection** button for each input and output.</span></span>

2.  <span data-ttu-id="cc676-111">Zkontrolujte vstupní data:</span><span class="sxs-lookup"><span data-stu-id="cc676-111">Examine your input data:</span></span>
    - <span data-ttu-id="cc676-112">Chcete-li ověřit, že je vstupních dat odesílaných do centra událostí, použijte [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) k připojení do centra událostí Azure (Pokud se používá Centrum událostí vstupu).</span><span class="sxs-lookup"><span data-stu-id="cc676-112">To verify that input data is flowing into Event Hub, use [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) to connect to Azure Event Hub (if Event Hub input is used).</span></span>  
    - <span data-ttu-id="cc676-113">Použití [ **ukázková Data** ](stream-analytics-sample-data-input.md) tlačítko pro každý vstupní a stáhněte si vstupní ukázková data.</span><span class="sxs-lookup"><span data-stu-id="cc676-113">Use the [**Sample Data**](stream-analytics-sample-data-input.md) button for each input, and download the input sample data.</span></span>
    - <span data-ttu-id="cc676-114">Zkontrolujte ukázková data pochopit tvaru dat: schéma a [datové typy](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc676-114">Inspect the sample data to understand the shape of the data: the schema and the [data types](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span></span>

3.  <span data-ttu-id="cc676-115">Otestování dotazu:</span><span class="sxs-lookup"><span data-stu-id="cc676-115">Test your query:</span></span>
    - <span data-ttu-id="cc676-116">Na **dotazu** pomocí **testování** tlačítko otestujte dotaz a použijte stažené ukázková data [otestujte dotaz](stream-analytics-test-query.md).</span><span class="sxs-lookup"><span data-stu-id="cc676-116">On the **Query** tab, use the **Test** button to test the query, and use the downloaded sample data to [test the query](stream-analytics-test-query.md).</span></span> <span data-ttu-id="cc676-117">Zkontrolujte případné chyby a pokus o opravte je.</span><span class="sxs-lookup"><span data-stu-id="cc676-117">Examine any errors and attempt to correct them.</span></span>
    - <span data-ttu-id="cc676-118">Pokud používáte [ **Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), ověřte, že události větší než časová razítka [čas spuštění úlohy](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="cc676-118">If you use [**Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), verify that the events have timestamps greater than the [job start time](stream-analytics-out-of-order-and-late-events.md).</span></span>

4.  <span data-ttu-id="cc676-119">Ladění dotazu:</span><span class="sxs-lookup"><span data-stu-id="cc676-119">Debug your query:</span></span>
    - <span data-ttu-id="cc676-120">Znovu sestavte dotaz progresivně z jednoduchého příkazu select složitější agregace pomocí kroků.</span><span class="sxs-lookup"><span data-stu-id="cc676-120">Rebuild the query progressively from simple select statement to more complex aggregates by using steps.</span></span> <span data-ttu-id="cc676-121">Chcete-li vytvářet logice dotazu krok za krokem, použijte [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) klauzule.</span><span class="sxs-lookup"><span data-stu-id="cc676-121">To build up the query logic step by step, use [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) clauses.</span></span>
    - <span data-ttu-id="cc676-122">Použití [SELECT INTO](stream-analytics-select-into.md) k ladění kroky dotazu.</span><span class="sxs-lookup"><span data-stu-id="cc676-122">Use [SELECT INTO](stream-analytics-select-into.md) to debug query steps.</span></span>

5.  <span data-ttu-id="cc676-123">Eliminovat běžné nástrahy, jako například:</span><span class="sxs-lookup"><span data-stu-id="cc676-123">Eliminate common pitfalls, such as:</span></span>
    - <span data-ttu-id="cc676-124">A [ **kde** ](https://msdn.microsoft.com/library/azure/dn835048.aspx) klauzule dotazu odfiltrovat všechny události, brání generován žádný výstup.</span><span class="sxs-lookup"><span data-stu-id="cc676-124">A [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) clause in the query filtered out all events, preventing any output from being generated.</span></span>
    - <span data-ttu-id="cc676-125">Při použití funkce okno, počkejte, než po dobu trvání celé okno zobrazíte výstup z dotazu.</span><span class="sxs-lookup"><span data-stu-id="cc676-125">When you use window functions, wait for the entire window duration to see an output from the query.</span></span>
    - <span data-ttu-id="cc676-126">Časové razítko pro události předchází čas spuštění úlohy, a proto jsou vyřazována události.</span><span class="sxs-lookup"><span data-stu-id="cc676-126">The timestamp for events precedes the job start time and, therefore, events are being dropped.</span></span>

6.  <span data-ttu-id="cc676-127">Použijte řazení událostí:</span><span class="sxs-lookup"><span data-stu-id="cc676-127">Use event ordering:</span></span>
    - <span data-ttu-id="cc676-128">Pokud všechny předchozí kroky fungovala správně, přejděte na **nastavení** a vyberte [ **řazení událostí**](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="cc676-128">If all the previous steps worked fine, go to the **Settings** blade and select [**Event Ordering**](stream-analytics-out-of-order-and-late-events.md).</span></span> <span data-ttu-id="cc676-129">Ověřte, že je tato zásada povolena pro co smysl ve vašem scénáři.</span><span class="sxs-lookup"><span data-stu-id="cc676-129">Verify that this policy is configured for what makes sense in your scenario.</span></span> <span data-ttu-id="cc676-130">Tato zásada je *není* použít při použití **testování** tlačítko a otestujte dotaz.</span><span class="sxs-lookup"><span data-stu-id="cc676-130">The policy is *not* applied when you use the **Test** button to test the query.</span></span> <span data-ttu-id="cc676-131">Tento výsledek je jeden rozdíl mezi testování v prohlížeči a spustit úlohu v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="cc676-131">This result is one difference between testing in-browser versus running the job in production.</span></span>

7.  <span data-ttu-id="cc676-132">Ladění pomocí metriky:</span><span class="sxs-lookup"><span data-stu-id="cc676-132">Debug by using metrics:</span></span>
    - <span data-ttu-id="cc676-133">Pokud žádný výstup získáte po očekávané trvání (založené na dotazu), zkuste následující postup:</span><span class="sxs-lookup"><span data-stu-id="cc676-133">If you obtain no output after the expected duration (based on the query), try the following:</span></span>
        - <span data-ttu-id="cc676-134">Podívejte se na [ **monitorování metriky** ](stream-analytics-monitoring.md) na **monitorování** kartě. Protože hodnoty nejsou agregovány, metriky zpožděn několik minut.</span><span class="sxs-lookup"><span data-stu-id="cc676-134">Look at [**Monitoring Metrics**](stream-analytics-monitoring.md) on the **Monitor** tab. Because the values are aggregated, the metrics are delayed by a few minutes.</span></span>
            - <span data-ttu-id="cc676-135">Pokud vstupní události > 0, úloha se bude moct číst vstupní data.</span><span class="sxs-lookup"><span data-stu-id="cc676-135">If Input Events > 0, the job is able to read input data.</span></span> <span data-ttu-id="cc676-136">Pokud události vstup není pak > 0:</span><span class="sxs-lookup"><span data-stu-id="cc676-136">If Input Events is not > 0, then:</span></span>
                - <span data-ttu-id="cc676-137">Chcete-li zjistit, zda má platný datový zdroj dat, zkontrolujte pomocí [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span><span class="sxs-lookup"><span data-stu-id="cc676-137">To see whether the data source has valid data, check it by using [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span></span> <span data-ttu-id="cc676-138">Tato kontrola platí, pokud úloha používá jako vstup centra událostí.</span><span class="sxs-lookup"><span data-stu-id="cc676-138">This check applies if the job is using Event Hub as input.</span></span>
                - <span data-ttu-id="cc676-139">Zkontrolujte, zda je formát serializace dat a dat kódování podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="cc676-139">Check to see whether the data serialization format and data encoding are as expected.</span></span>
                - <span data-ttu-id="cc676-140">Pokud úloha používá centra událostí, zkontrolujte, zda text zprávy je *Null*.</span><span class="sxs-lookup"><span data-stu-id="cc676-140">If the job is using an Event Hub, check to see whether the body of the message is *Null*.</span></span>
            - <span data-ttu-id="cc676-141">Pokud chyb při převodu dat > 0 a stoupající, může platit následující:</span><span class="sxs-lookup"><span data-stu-id="cc676-141">If Data Conversion Errors > 0 and climbing, the following might be true:</span></span>
                - <span data-ttu-id="cc676-142">Úloha nemusí být možné deserializovat události.</span><span class="sxs-lookup"><span data-stu-id="cc676-142">The job might not be able to de-serialize the events.</span></span>
                - <span data-ttu-id="cc676-143">Schéma událost nemusí odpovídat schéma definované nebo se očekává událostí v dotazu.</span><span class="sxs-lookup"><span data-stu-id="cc676-143">The event schema might not match the defined or expected schema of the events in the query.</span></span>
                - <span data-ttu-id="cc676-144">Datové typy některých polí události nemusí odpovídat očekávání.</span><span class="sxs-lookup"><span data-stu-id="cc676-144">The datatypes of some of the fields in the event might not match expectations.</span></span>
            - <span data-ttu-id="cc676-145">Pokud chyby za běhu > 0, znamená, že úloha může přijímat data, ale generuje chyby při zpracování dotazu.</span><span class="sxs-lookup"><span data-stu-id="cc676-145">If Runtime Errors > 0, it means that the job can receive the data but is generating errors while processing the query.</span></span>
                - <span data-ttu-id="cc676-146">Chyby, najdete [protokoly auditu](../azure-resource-manager/resource-group-audit.md) a filtrujte *se nezdařilo* stavu.</span><span class="sxs-lookup"><span data-stu-id="cc676-146">To find the errors, go to the [Audit Logs](../azure-resource-manager/resource-group-audit.md) and filter on *Failed* status.</span></span>
            - <span data-ttu-id="cc676-147">Pokud InputEvents > 0 a OutputEvents = 0, znamená, že je hodnota true, jednu z následujících:</span><span class="sxs-lookup"><span data-stu-id="cc676-147">If InputEvents > 0 and OutputEvents = 0, it means that one of the following is true:</span></span>
                - <span data-ttu-id="cc676-148">Zpracování dotazu mělo za výsledek nulu výstupních událostí.</span><span class="sxs-lookup"><span data-stu-id="cc676-148">Query processing resulted in zero output events.</span></span>
                - <span data-ttu-id="cc676-149">Události nebo jeho pole může být poškozený, což vede k nulové výstup po zpracování dotazu.</span><span class="sxs-lookup"><span data-stu-id="cc676-149">Events or its fields might be malformed, resulting in zero output after query processing.</span></span>
                - <span data-ttu-id="cc676-150">Úlohu se nepodařilo vložit data do [výstupní jímku](stream-analytics-select-into.md) důvodů připojení nebo ověřování.</span><span class="sxs-lookup"><span data-stu-id="cc676-150">The job was unable to push data to the [output sink](stream-analytics-select-into.md) for connectivity or authentication reasons.</span></span>
        - <span data-ttu-id="cc676-151">Ve všech případech výše uvedené chyby zprávy protokolu operací popisují další podrobnosti (včetně, co se děje), s výjimkou případů, kdy logice dotazu odfiltrovat všechny události.</span><span class="sxs-lookup"><span data-stu-id="cc676-151">In all the previously mentioned error cases, operations log messages explain additional details (including what is happening), except in cases where the query logic filtered out all events.</span></span> <span data-ttu-id="cc676-152">Pokud zpracování více událostí generuje chyby, Stream Analytics zaznamená do 10 minut do protokolů operací první tři chybové zprávy stejného typu.</span><span class="sxs-lookup"><span data-stu-id="cc676-152">If the processing of multiple events generates errors, Stream Analytics logs the first three error messages of the same type within 10 minutes to Operations logs.</span></span> <span data-ttu-id="cc676-153">Potlačí další identické chyby se zprávou, který čte "Chyby se děje příliš rychle že tyto potlačeno."</span><span class="sxs-lookup"><span data-stu-id="cc676-153">It then suppresses additional identical errors with a message that reads “Errors are happening too rapidly, these are being suppressed.”</span></span>

8. <span data-ttu-id="cc676-154">Ladění pomocí auditu a diagnostické protokoly:</span><span class="sxs-lookup"><span data-stu-id="cc676-154">Debug by using audit and diagnostic logs:</span></span>
    - <span data-ttu-id="cc676-155">Použití [protokoly auditu](../azure-resource-manager/resource-group-audit.md)a filtr k určení a ladění chyb.</span><span class="sxs-lookup"><span data-stu-id="cc676-155">Use [Audit Logs](../azure-resource-manager/resource-group-audit.md), and filter to identify and debug errors.</span></span>
    - <span data-ttu-id="cc676-156">Použití [úlohy diagnostické protokoly](stream-analytics-job-diagnostic-logs.md) k určení a ladění chyb.</span><span class="sxs-lookup"><span data-stu-id="cc676-156">Use [job diagnostic logs](stream-analytics-job-diagnostic-logs.md) to identify and debug errors.</span></span>

9. <span data-ttu-id="cc676-157">Zkontrolujte výstupy:</span><span class="sxs-lookup"><span data-stu-id="cc676-157">Examine the outputs:</span></span>
    - <span data-ttu-id="cc676-158">Když stav úlohy je *systémem*, v závislosti na dobu, která je stanoveno v dotazu, uvidíte výstup ve zdroji dat jímky.</span><span class="sxs-lookup"><span data-stu-id="cc676-158">When the job status is *Running*, depending on the duration that's stipulated in the query, you can see the output in the sink data source.</span></span>
    - <span data-ttu-id="cc676-159">Pokud nevidíte výstupů, které se chystáte konkrétní výstupní typ, přesměruje je to typ výstupu, který je méně složitých, jako je například objektu Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="cc676-159">If you cannot see outputs that are going to a specific output type, redirect them to an output type that is less complex, such as an Azure Blob.</span></span> <span data-ttu-id="cc676-160">Pomocí Průzkumníka úložiště, zkontrolujte, zda se zobrazí výstup.</span><span class="sxs-lookup"><span data-stu-id="cc676-160">By using Storage Explorer, check to see whether the output can be seen.</span></span> <span data-ttu-id="cc676-161">Kromě toho ověřte, zda omezení omezení výstup brání data přijímání.</span><span class="sxs-lookup"><span data-stu-id="cc676-161">Additionally, verify whether throttling limits at the output are preventing data from being received.</span></span>

10. <span data-ttu-id="cc676-162">Tok dat analysis pomocí úlohy diagram metriky:</span><span class="sxs-lookup"><span data-stu-id="cc676-162">Use data-flow analysis with job diagram metrics:</span></span>
    - <span data-ttu-id="cc676-163">Chcete-li analyzovat tok dat a identifikovat problémy, použijte [diagram úlohy s metriky](stream-analytics-job-diagram-with-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="cc676-163">To analyze data flow and identify issues, use the [job diagram with metrics](stream-analytics-job-diagram-with-metrics.md).</span></span>

11. <span data-ttu-id="cc676-164">Otevřete případu podpory:</span><span class="sxs-lookup"><span data-stu-id="cc676-164">Open a support case:</span></span>
    - <span data-ttu-id="cc676-165">Navíc pokud selžou všechny ostatní postupy, otevřete případu podpory společnosti Microsoft pomocí ID odběru, která obsahuje úlohu.</span><span class="sxs-lookup"><span data-stu-id="cc676-165">Finally, if all else fails, open a Microsoft support case by using the SubscriptionID that contains your job.</span></span>

## <a name="get-help"></a><span data-ttu-id="cc676-166">Podpora</span><span class="sxs-lookup"><span data-stu-id="cc676-166">Get help</span></span>

<span data-ttu-id="cc676-167">Pro další pomoc, vyzkoušejte naše [fórum Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="cc676-167">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="cc676-168">Další kroky</span><span class="sxs-lookup"><span data-stu-id="cc676-168">Next steps</span></span>

* [<span data-ttu-id="cc676-169">Úvod do služby Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cc676-169">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="cc676-170">Začínáme používat službu Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cc676-170">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="cc676-171">Škálování služby Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cc676-171">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="cc676-172">Referenční příručka k jazyku Azure Stream Analytics Query Language</span><span class="sxs-lookup"><span data-stu-id="cc676-172">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="cc676-173">Referenční příručka k rozhraní REST API pro správu služby Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cc676-173">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
