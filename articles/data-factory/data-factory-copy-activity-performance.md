---
title: "aaaCopy aktivity vyladění průvodce a výkonu | Microsoft Docs"
description: "Další informace o klíčových faktorů, které ovlivňují výkon hello přesun dat v Azure Data Factory při použití aktivity kopírování."
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: monicar
ms.assetid: 4b9a6a4f-8cf5-4e0a-a06f-8133a2b7bc58
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/10/2017
ms.author: jingwang
ms.openlocfilehash: b0fb5a76c34752d07e8ddfffbb799a05fb5d6be6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="copy-activity-performance-and-tuning-guide"></a><span data-ttu-id="4e089-103">Zkopírujte aktivity výkonu a vyladění Průvodce</span><span class="sxs-lookup"><span data-stu-id="4e089-103">Copy Activity performance and tuning guide</span></span>
<span data-ttu-id="4e089-104">Aktivita kopírování Azure Data Factory nabízí prvotřídní dat zabezpečeným, spolehlivým a vysoce výkonné načítání řešení.</span><span class="sxs-lookup"><span data-stu-id="4e089-104">Azure Data Factory Copy Activity delivers a first-class secure, reliable, and high-performance data loading solution.</span></span> <span data-ttu-id="4e089-105">Ji budete toocopy desítkami terabajtů dat každý den s bohatou různých cloudové a místní úložiště dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-105">It enables you toocopy tens of terabytes of data every day across a rich variety of cloud and on-premises data stores.</span></span> <span data-ttu-id="4e089-106">Výkon při načítání dat svěží fast je klíče tooensure, můžete se zaměřit na problém "velkých objemů dat" základní hello: vytváření řešení pro pokročilou analýzu a získávání hlubšímu porozumění z všechno, co data.</span><span class="sxs-lookup"><span data-stu-id="4e089-106">Blazing-fast data loading performance is key tooensure you can focus on hello core “big data” problem: building advanced analytics solutions and getting deep insights from all that data.</span></span>

<span data-ttu-id="4e089-107">Azure poskytuje sadu podnikové úrovni řešení pro úložiště a datového skladu dat a aktivity kopírování nabízí vysoce optimalizovaného data načítání prostředí, které je snadno tooconfigure a nastavení.</span><span class="sxs-lookup"><span data-stu-id="4e089-107">Azure provides a set of enterprise-grade data storage and data warehouse solutions, and Copy Activity offers a highly optimized data loading experience that is easy tooconfigure and set up.</span></span> <span data-ttu-id="4e089-108">Jenom jedna kopie aktivity můžete dosáhnout:</span><span class="sxs-lookup"><span data-stu-id="4e089-108">With just a single copy activity, you can achieve:</span></span>

* <span data-ttu-id="4e089-109">Načítání dat do **Azure SQL Data Warehouse** v **1,2 GB/s**.</span><span class="sxs-lookup"><span data-stu-id="4e089-109">Loading data into **Azure SQL Data Warehouse** at **1.2 GBps**.</span></span> <span data-ttu-id="4e089-110">Návod s případu použití najdete v tématu [načíst 1 TB do Azure SQL Data Warehouse pomocí Azure Data Factory v části 15 minut](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="4e089-110">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>
* <span data-ttu-id="4e089-111">Načítání dat do **úložiště objektů Azure Blob** v **1.0 GB/s**</span><span class="sxs-lookup"><span data-stu-id="4e089-111">Loading data into **Azure Blob storage** at **1.0 GBps**</span></span>
* <span data-ttu-id="4e089-112">Načítání dat do **Azure Data Lake Store** v **1.0 GB/s**</span><span class="sxs-lookup"><span data-stu-id="4e089-112">Loading data into **Azure Data Lake Store** at **1.0 GBps**</span></span>

<span data-ttu-id="4e089-113">Tento článek popisuje:</span><span class="sxs-lookup"><span data-stu-id="4e089-113">This article describes:</span></span>

* <span data-ttu-id="4e089-114">[Výkon referenční čísla](#performance-reference) pro podporované zdroj a jímka toohelp úložiště dat máte v plánu projektu;</span><span class="sxs-lookup"><span data-stu-id="4e089-114">[Performance reference numbers](#performance-reference) for supported source and sink data stores toohelp you plan your project;</span></span>
* <span data-ttu-id="4e089-115">Funkce, které může zvýšit hello kopie propustnost v různých scénářích, včetně [jednotky přesun dat v cloudu](#cloud-data-movement-units), [paralelní kopie](#parallel-copy), a [připravený kopie](#staged-copy);</span><span class="sxs-lookup"><span data-stu-id="4e089-115">Features that can boost hello copy throughput in different scenarios, including [cloud data movement units](#cloud-data-movement-units), [parallel copy](#parallel-copy), and [staged Copy](#staged-copy);</span></span>
* <span data-ttu-id="4e089-116">[Ladění pokyny výkonu](#performance-tuning-steps) na tom, jak zkopírovat tootune hello výkon a hello klíčové faktory, které může mít vliv na výkon.</span><span class="sxs-lookup"><span data-stu-id="4e089-116">[Performance tuning guidance](#performance-tuning-steps) on how tootune hello performance and hello key factors that can impact copy performance.</span></span>

> [!NOTE]
> <span data-ttu-id="4e089-117">Pokud nejste obeznámeni s aktivitou kopírování obecně, přečtěte si téma [přesun dat pomocí aktivity kopírování](data-factory-data-movement-activities.md) před přečtení tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="4e089-117">If you are not familiar with Copy Activity in general, see [Move data by using Copy Activity](data-factory-data-movement-activities.md) before reading this article.</span></span>
>

## <a name="performance-reference"></a><span data-ttu-id="4e089-118">Referenční dokumentace výkonu</span><span class="sxs-lookup"><span data-stu-id="4e089-118">Performance reference</span></span>

<span data-ttu-id="4e089-119">Jako odkaz níže uvedená tabulka ukazuje hello kopie propustnost číslo v MB/s pro zadaný zdrojový a podřízený páry založené na interní testování hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-119">As a reference, below table shows hello copy throughput number in MBps for hello given source and sink pairs based on in-house testing.</span></span> <span data-ttu-id="4e089-120">Pro porovnání, také ukazuje, jak budou různí nastavení [jednotky přesun dat v cloudu](#cloud-data-movement-units) nebo [Brána pro správu dat škálovatelnost](data-factory-data-management-gateway-high-availability-scalability.md) (více uzlů brány) může pomoct na výkon kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-120">For comparison, it also demonstrates how different settings of [cloud data movement units](#cloud-data-movement-units) or [Data Management Gateway scalability](data-factory-data-management-gateway-high-availability-scalability.md) (multiple gateway nodes) can help on copy performance.</span></span>

![Matice výkonu](./media/data-factory-copy-activity-performance/CopyPerfRef.png)


<span data-ttu-id="4e089-122">**Toonote body:**</span><span class="sxs-lookup"><span data-stu-id="4e089-122">**Points toonote:**</span></span>
* <span data-ttu-id="4e089-123">Propustnost se vypočítává pomocí hello následující vzorec: [velikost dat číst ze zdroje] / [spustit doba trvání aktivity kopírování].</span><span class="sxs-lookup"><span data-stu-id="4e089-123">Throughput is calculated by using hello following formula: [size of data read from source]/[Copy Activity run duration].</span></span>
* <span data-ttu-id="4e089-124">Hello výkonu referenční čísla v tabulce hello se měří pomocí [TPC-H](http://www.tpc.org/tpch/) datové sady v jedna kopie aktivity při spuštění.</span><span class="sxs-lookup"><span data-stu-id="4e089-124">hello performance reference numbers in hello table were measured using [TPC-H](http://www.tpc.org/tpch/) data set in a single copy activity run.</span></span>
* <span data-ttu-id="4e089-125">V úložištích dat Azure, jsou v hello hello zdroj a jímka stejné oblasti Azure.</span><span class="sxs-lookup"><span data-stu-id="4e089-125">In Azure data stores, hello source and sink are in hello same Azure region.</span></span>
* <span data-ttu-id="4e089-126">Pro hybridní kopírování mezi místními a cloudovými úložiště dat, každý uzel brány byla spuštěna na počítači, který byl odděleně od hello místní datové úložiště se pod specifikaci.</span><span class="sxs-lookup"><span data-stu-id="4e089-126">For hybrid copy between on-premises and cloud data stores, each gateway node was running on a machine that was separate from hello on-premises data store with below specification.</span></span> <span data-ttu-id="4e089-127">Při spuštění jediné aktivity v brány, operace kopírování hello spotřebováno pouze malou část hello testovací počítač CPU, paměť či šířku pásma sítě.</span><span class="sxs-lookup"><span data-stu-id="4e089-127">When a single activity was running on gateway, hello copy operation consumed only a small portion of hello test machine's CPU, memory, or network bandwidth.</span></span> <span data-ttu-id="4e089-128">Další informace z [aspekt Brána pro správu dat](#considerations-for-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="4e089-128">Learn more from [consideration for Data Management Gateway](#considerations-for-data-management-gateway).</span></span>
    <table>
    <tr>
        <td><span data-ttu-id="4e089-129">Procesor</span><span class="sxs-lookup"><span data-stu-id="4e089-129">CPU</span></span></td>
        <td><span data-ttu-id="4e089-130">32 jader 2,20 GHz Intel Xeon E5-2660 v2</span><span class="sxs-lookup"><span data-stu-id="4e089-130">32 cores 2.20 GHz Intel Xeon E5-2660 v2</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="4e089-131">Memory (Paměť)</span><span class="sxs-lookup"><span data-stu-id="4e089-131">Memory</span></span></td>
        <td><span data-ttu-id="4e089-132">128 GB</span><span class="sxs-lookup"><span data-stu-id="4e089-132">128 GB</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="4e089-133">Síť</span><span class="sxs-lookup"><span data-stu-id="4e089-133">Network</span></span></td>
        <td><span data-ttu-id="4e089-134">Internetové rozhraní: 10 GB/s; rozhraní sítě intranet: 40 GB/s</span><span class="sxs-lookup"><span data-stu-id="4e089-134">Internet interface: 10 Gbps; intranet interface: 40 Gbps</span></span></td>
    </tr>
    </table>


> [!TIP]
> <span data-ttu-id="4e089-135">Vyšší propustnost můžete dosáhnout využitím jednotky další přesun dat (DMUs) než hello výchozí maximální DMUs, což je 32 pro spuštění aktivity kopírování cloudu do cloudu.</span><span class="sxs-lookup"><span data-stu-id="4e089-135">You can achieve higher throughput by leveraging more data movement units (DMUs) than hello default maximum DMUs, which is 32 for a cloud-to-cloud copy activity run.</span></span> <span data-ttu-id="4e089-136">Například s 100 DMUs, můžete dosáhnout kopírování dat z objektu Blob Azure do Azure Data Lake Store v **1.0GBps**.</span><span class="sxs-lookup"><span data-stu-id="4e089-136">For example, with 100 DMUs, you can achieve copying data from Azure Blob into Azure Data Lake Store at **1.0GBps**.</span></span> <span data-ttu-id="4e089-137">V tématu hello [jednotky přesun dat v cloudu](#cloud-data-movement-units) část Podrobnosti o této funkci a hello Podporované scénáře.</span><span class="sxs-lookup"><span data-stu-id="4e089-137">See hello [Cloud data movement units](#cloud-data-movement-units) section for details about this feature and hello supported scenario.</span></span> <span data-ttu-id="4e089-138">Obraťte se na [podporu Azure](https://azure.microsoft.com/support/) toorequest další DMUs.</span><span class="sxs-lookup"><span data-stu-id="4e089-138">Contact [Azure support](https://azure.microsoft.com/support/) toorequest more DMUs.</span></span>

## <a name="parallel-copy"></a><span data-ttu-id="4e089-139">Paralelní kopie</span><span class="sxs-lookup"><span data-stu-id="4e089-139">Parallel copy</span></span>
<span data-ttu-id="4e089-140">Můžete si přečíst zdroje dat z hello nebo zapisovat data toohello cílové **paralelně v rámci aktivity kopírování spustit**.</span><span class="sxs-lookup"><span data-stu-id="4e089-140">You can read data from hello source or write data toohello destination **in parallel within a Copy Activity run**.</span></span> <span data-ttu-id="4e089-141">Tato funkce vylepšuje hello propustnosti operace kopírování a snižuje hello doba trvání toomove data.</span><span class="sxs-lookup"><span data-stu-id="4e089-141">This feature enhances hello throughput of a copy operation and reduces hello time it takes toomove data.</span></span>

<span data-ttu-id="4e089-142">Toto nastavení se liší od hello **souběžnosti** vlastnost v definici aktivity hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-142">This setting is different from hello **concurrency** property in hello activity definition.</span></span> <span data-ttu-id="4e089-143">Hello **souběžnosti** vlastnost určuje počet hello **spouští souběžné aktivity kopírování** tooprocess data z jiné aktivity windows (1 AM too2 AM, se 2 AM too3, se 3 AM too4, a tak dále).</span><span class="sxs-lookup"><span data-stu-id="4e089-143">hello **concurrency** property determines hello number of **concurrent Copy Activity runs** tooprocess data from different activity windows (1 AM too2 AM, 2 AM too3 AM, 3 AM too4 AM, and so on).</span></span> <span data-ttu-id="4e089-144">Tato možnost je užitečná při provádění historických zatížení.</span><span class="sxs-lookup"><span data-stu-id="4e089-144">This capability is helpful when you perform a historical load.</span></span> <span data-ttu-id="4e089-145">Funkce paralelní kopie Hello platí tooa **jednotné aktivity při spuštění**.</span><span class="sxs-lookup"><span data-stu-id="4e089-145">hello parallel copy capability applies tooa **single activity run**.</span></span>

<span data-ttu-id="4e089-146">Podívejme se na vzorový scénář.</span><span class="sxs-lookup"><span data-stu-id="4e089-146">Let's look at a sample scenario.</span></span> <span data-ttu-id="4e089-147">V následujícím příkladu hello třeba více řezů z posledních hello toobe zpracovat.</span><span class="sxs-lookup"><span data-stu-id="4e089-147">In hello following example, multiple slices from hello past need toobe processed.</span></span> <span data-ttu-id="4e089-148">Objekt pro vytváření dat běží instance aktivity kopírování (aktivita spustit) pro každý řez:</span><span class="sxs-lookup"><span data-stu-id="4e089-148">Data Factory runs an instance of Copy Activity (an activity run) for each slice:</span></span>

* <span data-ttu-id="4e089-149">datový řez Hello z první okno aktivity hello (1 AM too2 mě) == > aktivita běžet 1</span><span class="sxs-lookup"><span data-stu-id="4e089-149">hello data slice from hello first activity window (1 AM too2 AM) ==> Activity run 1</span></span>
* <span data-ttu-id="4e089-150">datový řez Hello z okna aktivita druhý hello (2 AM too3 mě) == > aktivita běžet 2</span><span class="sxs-lookup"><span data-stu-id="4e089-150">hello data slice from hello second activity window (2 AM too3 AM) ==> Activity run 2</span></span>
* <span data-ttu-id="4e089-151">datový řez Hello z okna aktivita druhý hello (3 AM too4 mě) == > aktivita běžet 3</span><span class="sxs-lookup"><span data-stu-id="4e089-151">hello data slice from hello second activity window (3 AM too4 AM) ==> Activity run 3</span></span>

<span data-ttu-id="4e089-152">A tak dále.</span><span class="sxs-lookup"><span data-stu-id="4e089-152">And so on.</span></span>

<span data-ttu-id="4e089-153">V tomto příkladu, když hello **souběžnosti** too2, je nastavena hodnota **aktivita běžet 1** a **aktivita běžet 2** kopírování dat z okna dvě aktivity **současně**  výkonu přesun dat tooimprove.</span><span class="sxs-lookup"><span data-stu-id="4e089-153">In this example, when hello **concurrency** value is set too2, **Activity run 1** and **Activity run 2** copy data from two activity windows **concurrently** tooimprove data movement performance.</span></span> <span data-ttu-id="4e089-154">Ale pokud více souborů jsou spojené s aktivity při spuštění 1, služba pro přesun dat hello zkopíruje soubory z hello zdroj toohello cílový jeden soubor současně.</span><span class="sxs-lookup"><span data-stu-id="4e089-154">However, if multiple files are associated with Activity run 1, hello data movement service copies files from hello source toohello destination one file at a time.</span></span>

### <a name="cloud-data-movement-units"></a><span data-ttu-id="4e089-155">Jednotky přesun dat cloudu</span><span class="sxs-lookup"><span data-stu-id="4e089-155">Cloud data movement units</span></span>
<span data-ttu-id="4e089-156">A **jednotky přesun dat cloudu (DMU)** je míra, která reprezentuje hello výkon (kombinaci procesoru, paměti a přidělení prostředků sítě) v objektu pro vytváření dat na jednu jednotku.</span><span class="sxs-lookup"><span data-stu-id="4e089-156">A **cloud data movement unit (DMU)** is a measure that represents hello power (a combination of CPU, memory, and network resource allocation) of a single unit in Data Factory.</span></span> <span data-ttu-id="4e089-157">DMU se dají používat v operace kopírování cloudu do cloudu, ale není v hybridní kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-157">A DMU might be used in a cloud-to-cloud copy operation, but not in a hybrid copy.</span></span>

<span data-ttu-id="4e089-158">Ve výchozím nastavení používá pro vytváření dat jeden cloud DMU tooperform jediné kopie aktivity spustit.</span><span class="sxs-lookup"><span data-stu-id="4e089-158">By default, Data Factory uses a single cloud DMU tooperform a single Copy Activity run.</span></span> <span data-ttu-id="4e089-159">toooverride toto výchozí nastavení, zadejte hodnotu pro hello **cloudDataMovementUnits** vlastnost následujícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="4e089-159">toooverride this default, specify a value for hello **cloudDataMovementUnits** property as follows.</span></span> <span data-ttu-id="4e089-160">Informace o hello úroveň výkonnější se mohou objevit, když konfigurujete další jednotky pro konkrétní kopie zdroj a jímka najdete v tématu hello [referenční dokumentace výkonu](#performance-reference).</span><span class="sxs-lookup"><span data-stu-id="4e089-160">For information about hello level of performance gain you might get when you configure more units for a specific copy source and sink, see hello [performance reference](#performance-reference).</span></span>

```json
"activities":[  
    {
        "name": "Sample copy activity",
        "description": "",
        "type": "Copy",
        "inputs": [{ "name": "InputDataset" }],
        "outputs": [{ "name": "OutputDataset" }],
        "typeProperties": {
            "source": {
                "type": "BlobSource",
            },
            "sink": {
                "type": "AzureDataLakeStoreSink"
            },
            "cloudDataMovementUnits": 32
        }
    }
]
```
<span data-ttu-id="4e089-161">Hello **povolené hodnoty** pro hello **cloudDataMovementUnits** vlastnost jsou 1 (výchozí), 2, 4, 8, 16, 32.</span><span class="sxs-lookup"><span data-stu-id="4e089-161">hello **allowed values** for hello **cloudDataMovementUnits** property are 1 (default), 2, 4, 8, 16, 32.</span></span> <span data-ttu-id="4e089-162">Hello **skutečný počet cloudu DMUs** , operace kopírování hello používá v době běhu je rovna tooor nižší než hello nakonfigurovaná hodnota, v závislosti na vaší vzorek dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-162">hello **actual number of cloud DMUs** that hello copy operation uses at run time is equal tooor less than hello configured value, depending on your data pattern.</span></span>

> [!NOTE]
> <span data-ttu-id="4e089-163">Pokud potřebujete další cloudu DMUs pro vyšší propustnost, obraťte se na [podporu Azure](https://azure.microsoft.com/support/).</span><span class="sxs-lookup"><span data-stu-id="4e089-163">If you need more cloud DMUs for a higher throughput, contact [Azure support](https://azure.microsoft.com/support/).</span></span> <span data-ttu-id="4e089-164">Nastavení 8 a vyšší aktuálně funguje pouze tehdy, když jste **zkopírovat soubory z objektu Blob úložiště, Data Lake Store nebo Amazon S3 nebo cloudem FTP nebo cloudem SFTP tooBlob úložiště nebo Data Lake Store nebo Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="4e089-164">Setting of 8 and above currently works only when you **copy multiple files from Blob storage/Data Lake Store/Amazon S3/cloud FTP/cloud SFTP tooBlob storage/Data Lake Store/Azure SQL Database**.</span></span>
>

### <a name="parallelcopies"></a><span data-ttu-id="4e089-165">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="4e089-165">parallelCopies</span></span>
<span data-ttu-id="4e089-166">Můžete použít hello **parallelCopies** paralelismus hello tooindicate vlastnosti, které chcete toouse aktivity kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-166">You can use hello **parallelCopies** property tooindicate hello parallelism that you want Copy Activity toouse.</span></span> <span data-ttu-id="4e089-167">Tato vlastnost si můžete představit jako hello maximální počet vláken v rámci aktivitu kopírování, který může číst ze zdroje nebo zápisu úložiště dat podřízený tooyour paralelně.</span><span class="sxs-lookup"><span data-stu-id="4e089-167">You can think of this property as hello maximum number of threads within Copy Activity that can read from your source or write tooyour sink data stores in parallel.</span></span>

<span data-ttu-id="4e089-168">Pro každou aktivitu kopírování, spuštění objekt pro vytváření dat určuje hello počet paralelní zkopíruje toouse toocopy data z úložiště dat hello zdrojového a cílového úložiště dat toohello.</span><span class="sxs-lookup"><span data-stu-id="4e089-168">For each Copy Activity run, Data Factory determines hello number of parallel copies toouse toocopy data from hello source data store and toohello destination data store.</span></span> <span data-ttu-id="4e089-169">Hello výchozí počet paralelní kopie, které používá závisí na typu hello zdroj a jímka, který používáte.</span><span class="sxs-lookup"><span data-stu-id="4e089-169">hello default number of parallel copies that it uses depends on hello type of source and sink that you are using.</span></span>  

| <span data-ttu-id="4e089-170">Zdroj a jímka</span><span class="sxs-lookup"><span data-stu-id="4e089-170">Source and sink</span></span> | <span data-ttu-id="4e089-171">Výchozí paralelní kopie počet určit službou</span><span class="sxs-lookup"><span data-stu-id="4e089-171">Default parallel copy count determined by service</span></span> |
| --- | --- |
| <span data-ttu-id="4e089-172">Kopírovat data mezi souborové úložiště (úložiště objektů Blob; Data Lake Store; Amazon S3; systému souborů na místě. místní službě HDFS)</span><span class="sxs-lookup"><span data-stu-id="4e089-172">Copy data between file-based stores (Blob storage; Data Lake Store; Amazon S3; an on-premises file system; an on-premises HDFS)</span></span> |<span data-ttu-id="4e089-173">Mezi 1 a 32.</span><span class="sxs-lookup"><span data-stu-id="4e089-173">Between 1 and 32.</span></span> <span data-ttu-id="4e089-174">Závisí na velikosti hello hello souborů a hello počet jednotek přesun dat cloudu (DMUs) používané toocopy data mezi dvěma úložišti dat cloud nebo hello konfiguraci fyzických hello počítači brány pro hybridní kopírování (tooor data toocopy součásti z místního úložiště dat ).</span><span class="sxs-lookup"><span data-stu-id="4e089-174">Depends on hello size of hello files and hello number of cloud data movement units (DMUs) used toocopy data between two cloud data stores, or hello physical configuration of hello Gateway machine used for a hybrid copy (toocopy data tooor from an on-premises data store).</span></span> |
| <span data-ttu-id="4e089-175">Kopírování dat z **tooAzure Table storage úložiště všechny zdroje dat**</span><span class="sxs-lookup"><span data-stu-id="4e089-175">Copy data from **any source data store tooAzure Table storage**</span></span> |<span data-ttu-id="4e089-176">4</span><span class="sxs-lookup"><span data-stu-id="4e089-176">4</span></span> |
| <span data-ttu-id="4e089-177">Všechny ostatní zdroj a jímka páry</span><span class="sxs-lookup"><span data-stu-id="4e089-177">All other source and sink pairs</span></span> |<span data-ttu-id="4e089-178">1</span><span class="sxs-lookup"><span data-stu-id="4e089-178">1</span></span> |

<span data-ttu-id="4e089-179">Obvykle hello výchozí chování měl dát hello nejlepší propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-179">Usually, hello default behavior should give you hello best throughput.</span></span> <span data-ttu-id="4e089-180">Ale toocontrol hello načíst na počítačích tohoto hostitele vaší tootune kopie výkon nebo úložiště dat, můžete zvolit toooverride hello výchozí hodnotu a zadejte hodnotu pro hello **parallelCopies** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-180">However, toocontrol hello load on machines that host your data stores, or tootune copy performance, you may choose toooverride hello default value and specify a value for hello **parallelCopies** property.</span></span> <span data-ttu-id="4e089-181">Hello hodnota musí být mezi 1 a 32 (obě včetně).</span><span class="sxs-lookup"><span data-stu-id="4e089-181">hello value must be between 1 and 32 (both inclusive).</span></span> <span data-ttu-id="4e089-182">V době běhu pro zajištění nejlepšího výkonu hello aktivity kopírování používá hodnotu, která je menší než nebo rovna toohello hodnotu, která nastavíte.</span><span class="sxs-lookup"><span data-stu-id="4e089-182">At run time, for hello best performance, Copy Activity uses a value that is less than or equal toohello value that you set.</span></span>

```json
"activities":[  
    {
        "name": "Sample copy activity",
        "description": "",
        "type": "Copy",
        "inputs": [{ "name": "InputDataset" }],
        "outputs": [{ "name": "OutputDataset" }],
        "typeProperties": {
            "source": {
                "type": "BlobSource",
            },
            "sink": {
                "type": "AzureDataLakeStoreSink"
            },
            "parallelCopies": 8
        }
    }
]
```
<span data-ttu-id="4e089-183">Toonote body:</span><span class="sxs-lookup"><span data-stu-id="4e089-183">Points toonote:</span></span>

* <span data-ttu-id="4e089-184">Při kopírování dat mezi úložišti na základě souborů hello **parallelCopies** určení stupně paralelního zpracování hello na úrovni souborů hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-184">When you copy data between file-based stores, hello **parallelCopies** determine hello parallelism at hello file level.</span></span> <span data-ttu-id="4e089-185">Hello rozdělování v rámci jednoho souboru by se stalo pod automaticky a transparentně a je navržena toouse hello velikost na nejlepší vhodný bloku pro zadaná zdrojová úložiště dat typů tooload data v paralelní a ortogonální tooparallelCopies.</span><span class="sxs-lookup"><span data-stu-id="4e089-185">hello chunking within a single file would happen underneath automatically and transparently, and it's designed toouse hello best suitable chunk size for a given source data store type tooload data in parallel and orthogonal tooparallelCopies.</span></span> <span data-ttu-id="4e089-186">Hello skutečný počet kopií paralelní hello data přesun služba používá pro operace kopírování hello v době běhu je pouze hello počet souborů, které máte.</span><span class="sxs-lookup"><span data-stu-id="4e089-186">hello actual number of parallel copies hello data movement service uses for hello copy operation at run time is no more than hello number of files you have.</span></span> <span data-ttu-id="4e089-187">Pokud je kopie chování hello **mergeFile**, aktivity kopírování nemohou využívat paralelismus úrovni souborů.</span><span class="sxs-lookup"><span data-stu-id="4e089-187">If hello copy behavior is **mergeFile**, Copy Activity cannot take advantage of file-level parallelism.</span></span>
* <span data-ttu-id="4e089-188">Pokud zadáte hodnotu hello **parallelCopies** vlastnost, zvažte zvýšení zatížení hello na zdroj a jímka úložiště dat a toogateway, pokud je hybridní kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-188">When you specify a value for hello **parallelCopies** property, consider hello load increase on your source and sink data stores, and toogateway if it is a hybrid copy.</span></span> <span data-ttu-id="4e089-189">To se stane, zejména pokud máte více aktivit nebo souběžných spustí hello stejné aktivity, které spouštění hello stejné úložiště dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-189">This happens especially when you have multiple activities or concurrent runs of hello same activities that run against hello same data store.</span></span> <span data-ttu-id="4e089-190">Pokud si všimnete, že úložiště dat hello nebo brány je zahlcen hello zatížení, snížit hello **parallelCopies** hodnotu toorelieve hello zatížení.</span><span class="sxs-lookup"><span data-stu-id="4e089-190">If you notice that either hello data store or Gateway is overwhelmed with hello load, decrease hello **parallelCopies** value toorelieve hello load.</span></span>
* <span data-ttu-id="4e089-191">Při kopírování dat z úložiště, které nejsou toostores na základě souborů, které jsou na základě souborů, služba pro přesun dat hello ignoruje hello **parallelCopies** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-191">When you copy data from stores that are not file-based toostores that are file-based, hello data movement service ignores hello **parallelCopies** property.</span></span> <span data-ttu-id="4e089-192">I když je zadán paralelismus, není použita v tomto případě.</span><span class="sxs-lookup"><span data-stu-id="4e089-192">Even if parallelism is specified, it's not applied in this case.</span></span>

> [!NOTE]
> <span data-ttu-id="4e089-193">Je nutné použít hello toouse 1.11 nebo novější verze brány pro správu dat **parallelCopies** funkce při hybridní kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-193">You must use Data Management Gateway version 1.11 or later toouse hello **parallelCopies** feature when you do a hybrid copy.</span></span>
>
>

<span data-ttu-id="4e089-194">toobetter použít tyto dvě vlastnosti a tooenhance vaše propustnost přesun dat najdete v tématu hello [ukázkové případy použití](#case-study-use-parallel-copy).</span><span class="sxs-lookup"><span data-stu-id="4e089-194">toobetter use these two properties, and tooenhance your data movement throughput, see hello [sample use cases](#case-study-use-parallel-copy).</span></span> <span data-ttu-id="4e089-195">Nepotřebujete tooconfigure **parallelCopies** tootake výhod hello výchozí chování.</span><span class="sxs-lookup"><span data-stu-id="4e089-195">You don't need tooconfigure **parallelCopies** tootake advantage of hello default behavior.</span></span> <span data-ttu-id="4e089-196">Pokud nakonfigurujete a **parallelCopies** je příliš malá, více cloudu DMUs nemusí budou plně využívat.</span><span class="sxs-lookup"><span data-stu-id="4e089-196">If you do configure and **parallelCopies** is too small, multiple cloud DMUs might not be fully utilized.</span></span>  

### <a name="billing-impact"></a><span data-ttu-id="4e089-197">Dopad fakturace</span><span class="sxs-lookup"><span data-stu-id="4e089-197">Billing impact</span></span>
<span data-ttu-id="4e089-198">Má **důležité** tooremember, který vám účtovat podle hello celkový čas operace kopírování hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-198">It's **important** tooremember that you are charged based on hello total time of hello copy operation.</span></span> <span data-ttu-id="4e089-199">Pokud úlohu kopírování použít tootake jednu hodinu s jednotkou k jednomu cloudu a teď bude trvat 15 minut s čtyři jednotky cloudu, hello celkové faktury zůstane téměř hello stejné.</span><span class="sxs-lookup"><span data-stu-id="4e089-199">If a copy job used tootake one hour with one cloud unit and now it takes 15 minutes with four cloud units, hello overall bill remains almost hello same.</span></span> <span data-ttu-id="4e089-200">Například můžete použít čtyři jednotky cloudu.</span><span class="sxs-lookup"><span data-stu-id="4e089-200">For example, you use four cloud units.</span></span> <span data-ttu-id="4e089-201">první jednotky cloudu Hello stráví 10 minut, hello druhý, 10 minut, hello třetí jeden, 5 minut a hello čtvrtý jeden, 5 minut, všechny v jedné kopie aktivity při spuštění.</span><span class="sxs-lookup"><span data-stu-id="4e089-201">hello first cloud unit spends 10 minutes, hello second one, 10 minutes, hello third one, 5 minutes, and hello fourth one, 5 minutes, all in one Copy Activity run.</span></span> <span data-ttu-id="4e089-202">Budou se vám účtovat dobu hello celkový kopírování (přesun dat), což je 10 + 10 + 5 + 5 = 30 minut.</span><span class="sxs-lookup"><span data-stu-id="4e089-202">You are charged for hello total copy (data movement) time, which is 10 + 10 + 5 + 5 = 30 minutes.</span></span> <span data-ttu-id="4e089-203">Pomocí **parallelCopies** nemá vliv na fakturace.</span><span class="sxs-lookup"><span data-stu-id="4e089-203">Using **parallelCopies** does not affect billing.</span></span>

## <a name="staged-copy"></a><span data-ttu-id="4e089-204">Kopírování dvoufázové instalace</span><span class="sxs-lookup"><span data-stu-id="4e089-204">Staged copy</span></span>
<span data-ttu-id="4e089-205">Při kopírování dat z úložiště zdroje dat úložiště tooa jímku dat, můžete zvolit úložiště objektů Blob toouse jako dočasné pracovní úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-205">When you copy data from a source data store tooa sink data store, you might choose toouse Blob storage as an interim staging store.</span></span> <span data-ttu-id="4e089-206">Pracovní je zvlášť užitečné v následujících případech hello:</span><span class="sxs-lookup"><span data-stu-id="4e089-206">Staging is especially useful in hello following cases:</span></span>

1. <span data-ttu-id="4e089-207">**Chcete-li tooingest data z různých úložišť dat do SQL Data Warehouse pomocí PolyBase**.</span><span class="sxs-lookup"><span data-stu-id="4e089-207">**You want tooingest data from various data stores into SQL Data Warehouse via PolyBase**.</span></span> <span data-ttu-id="4e089-208">SQL Data Warehouse PolyBase používá jako mechanismus vysokou propustností tooload velké množství dat do SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="4e089-208">SQL Data Warehouse uses PolyBase as a high-throughput mechanism tooload a large amount of data into SQL Data Warehouse.</span></span> <span data-ttu-id="4e089-209">Ale hello zdroje dat musí být v úložišti objektů Blob a musí splňovat další kritéria.</span><span class="sxs-lookup"><span data-stu-id="4e089-209">However, hello source data must be in Blob storage, and it must meet additional criteria.</span></span> <span data-ttu-id="4e089-210">Při načítání dat z úložiště dat než úložiště objektů Blob, můžete aktivovat data kopírování prostřednictvím dočasné pracovní úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="4e089-210">When you load data from a data store other than Blob storage, you can activate data copying via interim staging Blob storage.</span></span> <span data-ttu-id="4e089-211">V takovém případě objekt pro vytváření dat provádí tooensure transformace dat hello požadované splňuje požadavky hello PolyBase.</span><span class="sxs-lookup"><span data-stu-id="4e089-211">In that case, Data Factory performs hello required data transformations tooensure that it meets hello requirements of PolyBase.</span></span> <span data-ttu-id="4e089-212">Poté použije PolyBase tooload dat do SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="4e089-212">Then it uses PolyBase tooload data into SQL Data Warehouse.</span></span> <span data-ttu-id="4e089-213">Další podrobnosti najdete v tématu [použijte PolyBase tooload data do Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse).</span><span class="sxs-lookup"><span data-stu-id="4e089-213">For more details, see [Use PolyBase tooload data into Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse).</span></span> <span data-ttu-id="4e089-214">Návod s případu použití najdete v tématu [načíst 1 TB do Azure SQL Data Warehouse pomocí Azure Data Factory v části 15 minut](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="4e089-214">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>
2. <span data-ttu-id="4e089-215">**Někdy trvá chvíli tooperform přesun dat hybridní (tedy toocopy mezi úložišti dat místní a cloudové úložiště dat), přes pomalé síťové připojení**.</span><span class="sxs-lookup"><span data-stu-id="4e089-215">**Sometimes it takes a while tooperform a hybrid data movement (that is, toocopy between an on-premises data store and a cloud data store) over a slow network connection**.</span></span> <span data-ttu-id="4e089-216">tooimprove výkonu lze komprimovat hello data místně tak, aby trvá méně času toomove data toohello pracovní datové úložiště v cloudu hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-216">tooimprove performance, you can compress hello data on-premises so that it takes less time toomove data toohello staging data store in hello cloud.</span></span> <span data-ttu-id="4e089-217">Potom můžete dekomprimaci dat hello v hello pracovní úložiště před načtením do cílového úložiště dat hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-217">Then you can decompress hello data in hello staging store before you load it into hello destination data store.</span></span>
3. <span data-ttu-id="4e089-218">**Nechcete, aby porty tooopen jiné než port 80 a portu 443 v bráně firewall kvůli podnikové zásady IT**.</span><span class="sxs-lookup"><span data-stu-id="4e089-218">**You don't want tooopen ports other than port 80 and port 443 in your firewall, because of corporate IT policies**.</span></span> <span data-ttu-id="4e089-219">Například při kopírování dat z Azure SQL Database jímky místní úložiště dat tooan nebo jímky Azure SQL Data Warehouse, je nutné tooactivate odchozí komunikaci TCP na portu 1433 pro brány firewall systému Windows hello i váš podnikový firewall.</span><span class="sxs-lookup"><span data-stu-id="4e089-219">For example, when you copy data from an on-premises data store tooan Azure SQL Database sink or an Azure SQL Data Warehouse sink, you need tooactivate outbound TCP communication on port 1433 for both hello Windows firewall and your corporate firewall.</span></span> <span data-ttu-id="4e089-220">V tomto scénáři Využijte výhod hello toofirst kopírování dat tooa objektu Blob úložiště pracovní instance brány pomocí protokolu HTTP nebo HTTPS na portu 443.</span><span class="sxs-lookup"><span data-stu-id="4e089-220">In this scenario, take advantage of hello gateway toofirst copy data tooa Blob storage staging instance over HTTP or HTTPS on port 443.</span></span> <span data-ttu-id="4e089-221">Potom načtení hello dat do SQL Database nebo SQL Data Warehouse z pracovní databáze úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="4e089-221">Then, load hello data into SQL Database or SQL Data Warehouse from Blob storage staging.</span></span> <span data-ttu-id="4e089-222">V tomto toku nepotřebujete tooenable port 1433.</span><span class="sxs-lookup"><span data-stu-id="4e089-222">In this flow, you don't need tooenable port 1433.</span></span>

### <a name="how-staged-copy-works"></a><span data-ttu-id="4e089-223">Kopírování funguje jak dvoufázové instalace</span><span class="sxs-lookup"><span data-stu-id="4e089-223">How staged copy works</span></span>
<span data-ttu-id="4e089-224">Když aktivujete hello pracovní funkce, první hello data budou zkopírována z hello zdroje dat úložiště toohello pracovní úložiště dat (funkce přineste si vlastní).</span><span class="sxs-lookup"><span data-stu-id="4e089-224">When you activate hello staging feature, first hello data is copied from hello source data store toohello staging data store (bring your own).</span></span> <span data-ttu-id="4e089-225">V dalším kroku hello data budou zkopírována z hello pracovní dat úložiště toohello jímku dat úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-225">Next, hello data is copied from hello staging data store toohello sink data store.</span></span> <span data-ttu-id="4e089-226">Objekt pro vytváření dat automaticky spravuje hello dvoufázová toku za vás.</span><span class="sxs-lookup"><span data-stu-id="4e089-226">Data Factory automatically manages hello two-stage flow for you.</span></span> <span data-ttu-id="4e089-227">Objekt pro vytváření dat také vyčistí dočasná data z hello pracovní úložiště po dokončení přesunu dat hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-227">Data Factory also cleans up temporary data from hello staging storage after hello data movement is complete.</span></span>

<span data-ttu-id="4e089-228">V kopii scénář cloudu hello (zdroj a jímka data, která jsou úložiště v cloudu hello) se nepoužije brány.</span><span class="sxs-lookup"><span data-stu-id="4e089-228">In hello cloud copy scenario (both source and sink data stores are in hello cloud), gateway is not used.</span></span> <span data-ttu-id="4e089-229">operace kopírování hello provádí Hello služba Data Factory.</span><span class="sxs-lookup"><span data-stu-id="4e089-229">hello Data Factory service performs hello copy operations.</span></span>

![Dvoufázové instalace kopírování: scénář cloudu](media/data-factory-copy-activity-performance/staged-copy-cloud-scenario.png)

<span data-ttu-id="4e089-231">Ve scénáři kopie hybridní hello (je místní zdroj a jímka je v cloudu hello), hello gateway se přesune tooa pracovní úložiště dat úložiště dat ze zdrojových dat hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-231">In hello hybrid copy scenario (source is on-premises and sink is in hello cloud), hello gateway moves data from hello source data store tooa staging data store.</span></span> <span data-ttu-id="4e089-232">Služba data Factory přesouvá data z hello dat pracovních úložiště toohello podřízený data.</span><span class="sxs-lookup"><span data-stu-id="4e089-232">Data Factory service moves data from hello staging data store toohello sink data store.</span></span> <span data-ttu-id="4e089-233">Kopírování dat z tooan úložiště dat cloudu místní úložiště dat prostřednictvím přípravy je podporováno také s tokem hello vrátit zpět.</span><span class="sxs-lookup"><span data-stu-id="4e089-233">Copying data from a cloud data store tooan on-premises data store via staging also is supported with hello reversed flow.</span></span>

![Dvoufázové instalace kopírování: hybridní scénář](media/data-factory-copy-activity-performance/staged-copy-hybrid-scenario.png)

<span data-ttu-id="4e089-235">Když aktivujete přesun dat s použitím pracovní úložiště, můžete určete, jestli má toobe data hello komprimované před přesun dat ze zdroje hello data ukládat tooan provizorní nebo přípravu úložiště dat a pak dekomprimovat před přesouvání dat od jako dočasné nebo pracovní datové úložiště toohello jímku dat úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-235">When you activate data movement by using a staging store, you can specify whether you want hello data toobe compressed before moving data from hello source data store tooan interim or staging data store, and then decompressed before moving data from an interim or staging data store toohello sink data store.</span></span>

<span data-ttu-id="4e089-236">V současné době nelze kopírovat data mezi dvěma místní úložišti dat pomocí pracovní úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-236">Currently, you can't copy data between two on-premises data stores by using a staging store.</span></span> <span data-ttu-id="4e089-237">Očekáváme, že tato možnost toobe k dispozici brzy k dispozici.</span><span class="sxs-lookup"><span data-stu-id="4e089-237">We expect this option toobe available soon.</span></span>

### <a name="configuration"></a><span data-ttu-id="4e089-238">Konfigurace</span><span class="sxs-lookup"><span data-stu-id="4e089-238">Configuration</span></span>
<span data-ttu-id="4e089-239">Konfigurace hello **enableStaging** nastavení v aktivitě kopírování toospecify, jestli se mají toobe data hello dvoufázové instalace v úložišti objektů Blob před načtením do cílového úložiště dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-239">Configure hello **enableStaging** setting in Copy Activity toospecify whether you want hello data toobe staged in Blob storage before you load it into a destination data store.</span></span> <span data-ttu-id="4e089-240">Když nastavíte **enableStaging** tooTRUE, zadejte další vlastnosti hello uvedené v další tabulce hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-240">When you set **enableStaging** tooTRUE, specify hello additional properties listed in hello next table.</span></span> <span data-ttu-id="4e089-241">Pokud nemáte, musíte taky toocreate Azure Storage nebo úložiště sdíleného přístupu podpis propojené služby pro přípravu.</span><span class="sxs-lookup"><span data-stu-id="4e089-241">If you don’t have one, you also need toocreate an Azure Storage or Storage shared access signature-linked service for staging.</span></span>

| <span data-ttu-id="4e089-242">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="4e089-242">Property</span></span> | <span data-ttu-id="4e089-243">Popis</span><span class="sxs-lookup"><span data-stu-id="4e089-243">Description</span></span> | <span data-ttu-id="4e089-244">Výchozí hodnota</span><span class="sxs-lookup"><span data-stu-id="4e089-244">Default value</span></span> | <span data-ttu-id="4e089-245">Požaduje se</span><span class="sxs-lookup"><span data-stu-id="4e089-245">Required</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="4e089-246">**enableStaging**</span><span class="sxs-lookup"><span data-stu-id="4e089-246">**enableStaging**</span></span> |<span data-ttu-id="4e089-247">Zadejte, zda chcete, aby toocopy data prostřednictvím jako dočasné pracovní úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-247">Specify whether you want toocopy data via an interim staging store.</span></span> |<span data-ttu-id="4e089-248">False</span><span class="sxs-lookup"><span data-stu-id="4e089-248">False</span></span> |<span data-ttu-id="4e089-249">Ne</span><span class="sxs-lookup"><span data-stu-id="4e089-249">No</span></span> |
| <span data-ttu-id="4e089-250">**linkedServiceName**</span><span class="sxs-lookup"><span data-stu-id="4e089-250">**linkedServiceName**</span></span> |<span data-ttu-id="4e089-251">Zadejte název hello [azurestorage](data-factory-azure-blob-connector.md#azure-storage-linked-service) nebo [AzureStorageSas](data-factory-azure-blob-connector.md#azure-storage-sas-linked-service) propojené služby, která odkazuje toohello instanci úložiště, který používáte jako dočasné pracovní úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-251">Specify hello name of an [AzureStorage](data-factory-azure-blob-connector.md#azure-storage-linked-service) or [AzureStorageSas](data-factory-azure-blob-connector.md#azure-storage-sas-linked-service) linked service, which refers toohello instance of Storage that you use as an interim staging store.</span></span> <br/><br/> <span data-ttu-id="4e089-252">Úložiště nelze použít s sdílený přístupový podpis tooload dat do SQL Data Warehouse pomocí PolyBase.</span><span class="sxs-lookup"><span data-stu-id="4e089-252">You cannot use Storage with a shared access signature tooload data into SQL Data Warehouse via PolyBase.</span></span> <span data-ttu-id="4e089-253">Můžete ji v jiných scénářích.</span><span class="sxs-lookup"><span data-stu-id="4e089-253">You can use it in all other scenarios.</span></span> |<span data-ttu-id="4e089-254">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="4e089-254">N/A</span></span> |<span data-ttu-id="4e089-255">Ano, když **enableStaging** nastavena tooTRUE</span><span class="sxs-lookup"><span data-stu-id="4e089-255">Yes, when **enableStaging** is set tooTRUE</span></span> |
| <span data-ttu-id="4e089-256">**Cesta**</span><span class="sxs-lookup"><span data-stu-id="4e089-256">**path**</span></span> |<span data-ttu-id="4e089-257">Zadejte cestu úložiště objektů Blob hello má data toocontain hello dvoufázové instalace.</span><span class="sxs-lookup"><span data-stu-id="4e089-257">Specify hello Blob storage path that you want toocontain hello staged data.</span></span> <span data-ttu-id="4e089-258">Pokud nezadáte cestu, služba hello vytvoří kontejner dočasná data toostore.</span><span class="sxs-lookup"><span data-stu-id="4e089-258">If you do not provide a path, hello service creates a container toostore temporary data.</span></span> <br/><br/> <span data-ttu-id="4e089-259">Zadejte cestu, pouze v případě, že používáte úložiště s sdílený přístupový podpis, nebo vyžadujete toobe dočasná data v určitém umístění.</span><span class="sxs-lookup"><span data-stu-id="4e089-259">Specify a path only if you use Storage with a shared access signature, or you require temporary data toobe in a specific location.</span></span> |<span data-ttu-id="4e089-260">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="4e089-260">N/A</span></span> |<span data-ttu-id="4e089-261">Ne</span><span class="sxs-lookup"><span data-stu-id="4e089-261">No</span></span> |
| <span data-ttu-id="4e089-262">**enableCompression**</span><span class="sxs-lookup"><span data-stu-id="4e089-262">**enableCompression**</span></span> |<span data-ttu-id="4e089-263">Určuje, zda by měl předtím, než je cílový zkopírovaný toohello komprimována data.</span><span class="sxs-lookup"><span data-stu-id="4e089-263">Specifies whether data should be compressed before it is copied toohello destination.</span></span> <span data-ttu-id="4e089-264">Toto nastavení omezuje hello objem přenášených dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-264">This setting reduces hello volume of data being transferred.</span></span> |<span data-ttu-id="4e089-265">False</span><span class="sxs-lookup"><span data-stu-id="4e089-265">False</span></span> |<span data-ttu-id="4e089-266">Ne</span><span class="sxs-lookup"><span data-stu-id="4e089-266">No</span></span> |

<span data-ttu-id="4e089-267">Zde je ukázka definice aktivity kopírování hello vlastnostmi, které jsou popsané v předcházející tabulce hello:</span><span class="sxs-lookup"><span data-stu-id="4e089-267">Here's a sample definition of Copy Activity with hello properties that are described in hello preceding table:</span></span>

```json
"activities":[  
{
    "name": "Sample copy activity",
    "type": "Copy",
    "inputs": [{ "name": "OnpremisesSQLServerInput" }],
    "outputs": [{ "name": "AzureSQLDBOutput" }],
    "typeProperties": {
        "source": {
            "type": "SqlSource",
        },
        "sink": {
            "type": "SqlSink"
        },
        "enableStaging": true,
        "stagingSettings": {
            "linkedServiceName": "MyStagingBlob",
            "path": "stagingcontainer/path",
            "enableCompression": true
        }
    }
}
]
```

### <a name="billing-impact"></a><span data-ttu-id="4e089-268">Dopad fakturace</span><span class="sxs-lookup"><span data-stu-id="4e089-268">Billing impact</span></span>
<span data-ttu-id="4e089-269">Budou se vám účtovat na základě dva kroky: kopírování doba trvání a zkopírujte typu.</span><span class="sxs-lookup"><span data-stu-id="4e089-269">You are charged based on two steps: copy duration and copy type.</span></span>

* <span data-ttu-id="4e089-270">Při použití pracovní během kopírování cloudu (kopírování dat z úložiště dat, které cloudové data store tooanother cloudu), vám budou účtovat hello [Celková doba trvání kopie kroky 1 a 2] x [cloudové kopírování jednotkové ceny].</span><span class="sxs-lookup"><span data-stu-id="4e089-270">When you use staging during a cloud copy (copying data from a cloud data store tooanother cloud data store), you are charged hello [sum of copy duration for step 1 and step 2] x [cloud copy unit price].</span></span>
* <span data-ttu-id="4e089-271">Při použití pracovní během hybridní kopírování (kopírování dat z úložiště místní data store tooa cloudu data), budeme vám účtovat [kopírování hybridní doba trvání] x [cena za jednotku hybridního kopie] + [cloudu kopie trvání] x [cloudové kopírování jednotkové ceny].</span><span class="sxs-lookup"><span data-stu-id="4e089-271">When you use staging during a hybrid copy (copying data from an on-premises data store tooa cloud data store), you are charged for [hybrid copy duration] x [hybrid copy unit price] + [cloud copy duration] x [cloud copy unit price].</span></span>

## <a name="performance-tuning-steps"></a><span data-ttu-id="4e089-272">Postup ladění výkonu</span><span class="sxs-lookup"><span data-stu-id="4e089-272">Performance tuning steps</span></span>
<span data-ttu-id="4e089-273">Doporučujeme provést tyto kroky tootune hello výkonu služby Data Factory s aktivitou kopírování:</span><span class="sxs-lookup"><span data-stu-id="4e089-273">We suggest that you take these steps tootune hello performance of your Data Factory service with Copy Activity:</span></span>

1. <span data-ttu-id="4e089-274">**Stanovení základní úrovně**.</span><span class="sxs-lookup"><span data-stu-id="4e089-274">**Establish a baseline**.</span></span> <span data-ttu-id="4e089-275">V průběhu fáze vývoje hello Otestujte svůj kanál pomocí aktivity kopírování proti data reprezentativní ukázka.</span><span class="sxs-lookup"><span data-stu-id="4e089-275">During hello development phase, test your pipeline by using Copy Activity against a representative data sample.</span></span> <span data-ttu-id="4e089-276">Můžete použít hello Data Factory [řezů modelu](data-factory-scheduling-and-execution.md) toolimit hello množství dat, můžete pracovat.</span><span class="sxs-lookup"><span data-stu-id="4e089-276">You can use hello Data Factory [slicing model](data-factory-scheduling-and-execution.md) toolimit hello amount of data you work with.</span></span>

   <span data-ttu-id="4e089-277">Shromažďovat dobu provádění a výkonové charakteristiky pomocí hello **monitorování a správu aplikací**.</span><span class="sxs-lookup"><span data-stu-id="4e089-277">Collect execution time and performance characteristics by using hello **Monitoring and Management App**.</span></span> <span data-ttu-id="4e089-278">Zvolte **monitorování a správa** na domovské stránce objektu pro vytváření dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-278">Choose **Monitor & Manage** on your Data Factory home page.</span></span> <span data-ttu-id="4e089-279">V zobrazení stromu hello, zvolte hello **výstupní datovou sadu**.</span><span class="sxs-lookup"><span data-stu-id="4e089-279">In hello tree view, choose hello **output dataset**.</span></span> <span data-ttu-id="4e089-280">V hello **aktivity Windows** vyberte hello kopie aktivity při spuštění.</span><span class="sxs-lookup"><span data-stu-id="4e089-280">In hello **Activity Windows** list, choose hello Copy Activity run.</span></span> <span data-ttu-id="4e089-281">**Aktivity Windows** uvádí dobu trvání aktivity kopírování hello a hello velikost hello dat, která se zkopírují.</span><span class="sxs-lookup"><span data-stu-id="4e089-281">**Activity Windows** lists hello Copy Activity duration and hello size of hello data that's copied.</span></span> <span data-ttu-id="4e089-282">Hello propustnost je uvedena v **aktivity okno Průzkumníka**.</span><span class="sxs-lookup"><span data-stu-id="4e089-282">hello throughput is listed in **Activity Window Explorer**.</span></span> <span data-ttu-id="4e089-283">najdete v části toolearn Další informace o aplikaci hello [monitorování a Správa kanálů služby Azure Data Factory pomocí hello monitorování a správu aplikací](data-factory-monitor-manage-app.md).</span><span class="sxs-lookup"><span data-stu-id="4e089-283">toolearn more about hello app, see [Monitor and manage Azure Data Factory pipelines by using hello Monitoring and Management App](data-factory-monitor-manage-app.md).</span></span>

   ![Podrobnosti o spuštění aktivit](./media/data-factory-copy-activity-performance/mmapp-activity-run-details.png)

   <span data-ttu-id="4e089-285">Dále v článku hello, můžete porovnat výkon hello a konfiguraci váš scénář tooCopy aktivity na [referenční dokumentace výkonu](#performance-reference) z našich testů.</span><span class="sxs-lookup"><span data-stu-id="4e089-285">Later in hello article, you can compare hello performance and configuration of your scenario tooCopy Activity’s [performance reference](#performance-reference) from our tests.</span></span>
2. <span data-ttu-id="4e089-286">**Diagnostika a optimalizace výkonu**.</span><span class="sxs-lookup"><span data-stu-id="4e089-286">**Diagnose and optimize performance**.</span></span> <span data-ttu-id="4e089-287">Pokud zjistíte výkonu hello nevyhovuje vašim požadavkům, je nutné kritické body tooidentify.</span><span class="sxs-lookup"><span data-stu-id="4e089-287">If hello performance you observe doesn't meet your expectations, you need tooidentify performance bottlenecks.</span></span> <span data-ttu-id="4e089-288">Potom optimalizovat výkon tooremove nebo snižte hello účinku kritická místa.</span><span class="sxs-lookup"><span data-stu-id="4e089-288">Then, optimize performance tooremove or reduce hello effect of bottlenecks.</span></span> <span data-ttu-id="4e089-289">Úplný popis diagnostiku výkonu, je nad rámec hello rámec tohoto článku, ale tady jsou některé společné aspekty:</span><span class="sxs-lookup"><span data-stu-id="4e089-289">A full description of performance diagnosis is beyond hello scope of this article, but here are some common considerations:</span></span>

   * <span data-ttu-id="4e089-290">Funkce výkonu:</span><span class="sxs-lookup"><span data-stu-id="4e089-290">Performance features:</span></span>
     * [<span data-ttu-id="4e089-291">Paralelní kopie</span><span class="sxs-lookup"><span data-stu-id="4e089-291">Parallel copy</span></span>](#parallel-copy)
     * [<span data-ttu-id="4e089-292">Jednotky přesun dat cloudu</span><span class="sxs-lookup"><span data-stu-id="4e089-292">Cloud data movement units</span></span>](#cloud-data-movement-units)
     * [<span data-ttu-id="4e089-293">Kopírování dvoufázové instalace</span><span class="sxs-lookup"><span data-stu-id="4e089-293">Staged copy</span></span>](#staged-copy)
     * [<span data-ttu-id="4e089-294">Škálovatelnost Brána pro správu dat</span><span class="sxs-lookup"><span data-stu-id="4e089-294">Data Management Gateway scalability</span></span>](data-factory-data-management-gateway-high-availability-scalability.md)
   * [<span data-ttu-id="4e089-295">Brána správy dat</span><span class="sxs-lookup"><span data-stu-id="4e089-295">Data Management Gateway</span></span>](#considerations-for-data-management-gateway)
   * [<span data-ttu-id="4e089-296">Zdroj</span><span class="sxs-lookup"><span data-stu-id="4e089-296">Source</span></span>](#considerations-for-the-source)
   * [<span data-ttu-id="4e089-297">Podřízený</span><span class="sxs-lookup"><span data-stu-id="4e089-297">Sink</span></span>](#considerations-for-the-sink)
   * [<span data-ttu-id="4e089-298">Serializace a deserializace</span><span class="sxs-lookup"><span data-stu-id="4e089-298">Serialization and deserialization</span></span>](#considerations-for-serialization-and-deserialization)
   * [<span data-ttu-id="4e089-299">Komprese</span><span class="sxs-lookup"><span data-stu-id="4e089-299">Compression</span></span>](#considerations-for-compression)
   * [<span data-ttu-id="4e089-300">Mapování sloupce</span><span class="sxs-lookup"><span data-stu-id="4e089-300">Column mapping</span></span>](#considerations-for-column-mapping)
   * [<span data-ttu-id="4e089-301">Další důležité informace</span><span class="sxs-lookup"><span data-stu-id="4e089-301">Other considerations</span></span>](#other-considerations)
3. <span data-ttu-id="4e089-302">**Rozbalte položku konfigurace hello tooyour celé datové sady**.</span><span class="sxs-lookup"><span data-stu-id="4e089-302">**Expand hello configuration tooyour entire data set**.</span></span> <span data-ttu-id="4e089-303">Až budete spokojeni s výsledky spuštění hello a výkonu, můžete rozbalit hello Definice a toocover aktivní období kanálu celé datové sady.</span><span class="sxs-lookup"><span data-stu-id="4e089-303">When you're satisfied with hello execution results and performance, you can expand hello definition and pipeline active period toocover your entire data set.</span></span>

## <a name="considerations-for-data-management-gateway"></a><span data-ttu-id="4e089-304">Důležité informace týkající se Brána pro správu dat</span><span class="sxs-lookup"><span data-stu-id="4e089-304">Considerations for Data Management Gateway</span></span>
<span data-ttu-id="4e089-305">**Instalační program brány**: doporučujeme použít vyhrazený počítač toohost Brána pro správu dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-305">**Gateway setup**: We recommend that you use a dedicated machine toohost Data Management Gateway.</span></span> <span data-ttu-id="4e089-306">V tématu [předpoklady pro použití brány pro správu dat](data-factory-data-management-gateway.md#considerations-for-using-gateway).</span><span class="sxs-lookup"><span data-stu-id="4e089-306">See [Considerations for using Data Management Gateway](data-factory-data-management-gateway.md#considerations-for-using-gateway).</span></span>  

<span data-ttu-id="4e089-307">**Monitorování brány a nahoru nebo škálování**: jeden logické brány se jeden nebo více uzlů brány může obsluhovat několik aktivity kopírování běží na hello stejný čas současně.</span><span class="sxs-lookup"><span data-stu-id="4e089-307">**Gateway monitoring and scale-up/out**: A single logical gateway with one or more gateway nodes can serve multiple Copy Activity runs at hello same time concurrently.</span></span> <span data-ttu-id="4e089-308">Skoro v reálném čase snímek využití prostředků (procesor, paměť, network(in/out) atd.) můžete zobrazit na počítači brány i hello počet souběžných úloh spuštěných versus limit v hello portál Azure, najdete v části [monitorování brány portálu hello](data-factory-data-management-gateway.md#monitor-gateway-in-the-portal).</span><span class="sxs-lookup"><span data-stu-id="4e089-308">You can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on a gateway machine as well as hello number of concurrent jobs running versus limit in hello Azure portal, see [Monitor gateway in hello portal](data-factory-data-management-gateway.md#monitor-gateway-in-the-portal).</span></span> <span data-ttu-id="4e089-309">Pokud nemáte velkou požadavky na přesun dat hybridní buď velký počet souběžných kopie aktivity spustí nebo s velkým množstvím dat toocopy, zvažte příliš[vertikální navýšení kapacity nebo škálovat. brána](data-factory-data-management-gateway-high-availability-scalability.md#scale-considerations) tak jako toobetter využívat prostředku nebo tooprovision zkopírujte tooempower více prostředků.</span><span class="sxs-lookup"><span data-stu-id="4e089-309">If you have heavy need on hybrid data movement either with large number of concurrent copy activity runs or with large volume of data toocopy, consider too[scale up or scale out gateway](data-factory-data-management-gateway-high-availability-scalability.md#scale-considerations) so as toobetter utilize your resource or tooprovision more resource tooempower copy.</span></span> 

## <a name="considerations-for-hello-source"></a><span data-ttu-id="4e089-310">Důležité informace týkající se zdrojové hello</span><span class="sxs-lookup"><span data-stu-id="4e089-310">Considerations for hello source</span></span>
### <a name="general"></a><span data-ttu-id="4e089-311">Obecné</span><span class="sxs-lookup"><span data-stu-id="4e089-311">General</span></span>
<span data-ttu-id="4e089-312">Ujistěte se, že tento hello základní úložiště dat není zahlcen jiné úlohy, které jsou spuštěné na nebo před ním.</span><span class="sxs-lookup"><span data-stu-id="4e089-312">Be sure that hello underlying data store is not overwhelmed by other workloads that are running on or against it.</span></span>

<span data-ttu-id="4e089-313">Pro úložiště dat společnosti Microsoft, najdete v části [sledování a ladění témata](#performance-reference) konkrétní toodata úložiště a pomáhá pochopit ukládání výkonové charakteristiky, minimalizovat dobu odezvy a maximalizovat propustnost dat, které jsou.</span><span class="sxs-lookup"><span data-stu-id="4e089-313">For Microsoft data stores, see [monitoring and tuning topics](#performance-reference) that are specific toodata stores, and help you understand data store performance characteristics, minimize response times, and maximize throughput.</span></span>

<span data-ttu-id="4e089-314">Při kopírování dat z objektu Blob úložiště tooSQL datového skladu, zvažte použití **PolyBase** tooboost výkonu.</span><span class="sxs-lookup"><span data-stu-id="4e089-314">If you copy data from Blob storage tooSQL Data Warehouse, consider using **PolyBase** tooboost performance.</span></span> <span data-ttu-id="4e089-315">V tématu [použijte PolyBase tooload data do Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="4e089-315">See [Use PolyBase tooload data into Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) for details.</span></span> <span data-ttu-id="4e089-316">Návod s případu použití najdete v tématu [načíst 1 TB do Azure SQL Data Warehouse pomocí Azure Data Factory v části 15 minut](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="4e089-316">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>

### <a name="file-based-data-stores"></a><span data-ttu-id="4e089-317">Úložiště dat na základě souborů</span><span class="sxs-lookup"><span data-stu-id="4e089-317">File-based data stores</span></span>
<span data-ttu-id="4e089-318">*(Včetně úložiště objektů Blob, Data Lake Store, Amazon S3, systémy souborů na místě a místní HDFS)*</span><span class="sxs-lookup"><span data-stu-id="4e089-318">*(Includes Blob storage, Data Lake Store, Amazon S3, on-premises file systems, and on-premises HDFS)*</span></span>

* <span data-ttu-id="4e089-319">**Průměrná velikost souboru a počet souborů**: aktivita kopírování přenosy dat jeden soubor současně.</span><span class="sxs-lookup"><span data-stu-id="4e089-319">**Average file size and file count**: Copy Activity transfers data one file at a time.</span></span> <span data-ttu-id="4e089-320">S hello stejné množství dat toobe přesunout hello celkovou propustnost je nižší, pokud hello dat obsahuje mnoho malých souborů než několik velkých souborů z důvodu toohello fáze zavedení pro každý soubor.</span><span class="sxs-lookup"><span data-stu-id="4e089-320">With hello same amount of data toobe moved, hello overall throughput is lower if hello data consists of many small files rather than a few large files due toohello bootstrap phase for each file.</span></span> <span data-ttu-id="4e089-321">Pokud je to možné, kombinovat proto malé soubory do větší soubory toogain vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-321">Therefore, if possible, combine small files into larger files toogain higher throughput.</span></span>
* <span data-ttu-id="4e089-322">**Soubor formátu a komprese**: Další způsoby tooimprove výkonu, najdete v části hello [důležité informace týkající se serializace a deserializace](#considerations-for-serialization-and-deserialization) a [důležité informace týkající se komprese](#considerations-for-compression) oddíly.</span><span class="sxs-lookup"><span data-stu-id="4e089-322">**File format and compression**: For more ways tooimprove performance, see hello [Considerations for serialization and deserialization](#considerations-for-serialization-and-deserialization) and [Considerations for compression](#considerations-for-compression) sections.</span></span>
* <span data-ttu-id="4e089-323">Pro hello **místní systém souborů** scénář, ve kterém **Brána pro správu dat** je potřeba, najdete v části hello [důležité informace týkající se Brána pro správu dat](#considerations-for-data-management-gateway) části.</span><span class="sxs-lookup"><span data-stu-id="4e089-323">For hello **on-premises file system** scenario, in which **Data Management Gateway** is required, see hello [Considerations for Data Management Gateway](#considerations-for-data-management-gateway) section.</span></span>

### <a name="relational-data-stores"></a><span data-ttu-id="4e089-324">Relační datové úložiště</span><span class="sxs-lookup"><span data-stu-id="4e089-324">Relational data stores</span></span>
<span data-ttu-id="4e089-325">*(Zahrnuje SQL Database; SQL Data Warehouse; Amazon Redshift; Databáze systému SQL Server; a Oracle, MySQL, DB2, Teradata, Sybase a PostgreSQL databáze atd.)*</span><span class="sxs-lookup"><span data-stu-id="4e089-325">*(Includes SQL Database; SQL Data Warehouse; Amazon Redshift; SQL Server databases; and Oracle, MySQL, DB2, Teradata, Sybase, and PostgreSQL databases, etc.)*</span></span>

* <span data-ttu-id="4e089-326">**Vzorek dat**: schéma tabulky ovlivňuje kopie propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-326">**Data pattern**: Your table schema affects copy throughput.</span></span> <span data-ttu-id="4e089-327">Velikost velké řádku získáte lepší výkon než velikost řádku malé, toocopy hello stejné množství dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-327">A large row size gives you a better performance than small row size, toocopy hello same amount of data.</span></span> <span data-ttu-id="4e089-328">Hello důvodem je, že databáze hello můžete načíst efektivněji méně dávek dat, která obsahují menší počet řádků.</span><span class="sxs-lookup"><span data-stu-id="4e089-328">hello reason is that hello database can more efficiently retrieve fewer batches of data that contain fewer rows.</span></span>
* <span data-ttu-id="4e089-329">**Dotazu nebo uložené proceduře**: optimalizace hello logiku hello dotazu nebo uložené proceduře zadáte hello aktivity kopírování zdrojová toofetch data, efektivněji.</span><span class="sxs-lookup"><span data-stu-id="4e089-329">**Query or stored procedure**: Optimize hello logic of hello query or stored procedure you specify in hello Copy Activity source toofetch data more efficiently.</span></span>
* <span data-ttu-id="4e089-330">Pro **místní relační databáze**, jako je SQL Server a Oracle, které vyžadují použití hello **Brána pro správu dat**, najdete v části hello [důležité informace týkající se Brána pro správu dat](#considerations-on-data-management-gateway) části.</span><span class="sxs-lookup"><span data-stu-id="4e089-330">For **on-premises relational databases**, such as SQL Server and Oracle, which require hello use of **Data Management Gateway**, see hello [Considerations for Data Management Gateway](#considerations-on-data-management-gateway) section.</span></span>

## <a name="considerations-for-hello-sink"></a><span data-ttu-id="4e089-331">Důležité informace pro hello sink</span><span class="sxs-lookup"><span data-stu-id="4e089-331">Considerations for hello sink</span></span>
### <a name="general"></a><span data-ttu-id="4e089-332">Obecné</span><span class="sxs-lookup"><span data-stu-id="4e089-332">General</span></span>
<span data-ttu-id="4e089-333">Ujistěte se, že tento hello základní úložiště dat není zahlcen jiné úlohy, které jsou spuštěné na nebo před ním.</span><span class="sxs-lookup"><span data-stu-id="4e089-333">Be sure that hello underlying data store is not overwhelmed by other workloads that are running on or against it.</span></span>

<span data-ttu-id="4e089-334">Úložiště dat společnosti Microsoft, najdete v části příliš[sledování a ladění témata](#performance-reference) konkrétní toodata úložiště, které jsou.</span><span class="sxs-lookup"><span data-stu-id="4e089-334">For Microsoft data stores, refer too[monitoring and tuning topics](#performance-reference) that are specific toodata stores.</span></span> <span data-ttu-id="4e089-335">Tato témata vám může pomoct pochopit ukazatele výkonu úložiště, a jak času odezvy toominimize a maximalizovat propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-335">These topics can help you understand data store performance characteristics and how toominimize response times and maximize throughput.</span></span>

<span data-ttu-id="4e089-336">Pokud chcete kopírovat data z **úložiště objektů Blob** příliš**SQL Data Warehouse**, zvažte použití **PolyBase** tooboost výkonu.</span><span class="sxs-lookup"><span data-stu-id="4e089-336">If you are copying data from **Blob storage** too**SQL Data Warehouse**, consider using **PolyBase** tooboost performance.</span></span> <span data-ttu-id="4e089-337">V tématu [použijte PolyBase tooload data do Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="4e089-337">See [Use PolyBase tooload data into Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) for details.</span></span> <span data-ttu-id="4e089-338">Návod s případu použití najdete v tématu [načíst 1 TB do Azure SQL Data Warehouse pomocí Azure Data Factory v části 15 minut](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="4e089-338">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>

### <a name="file-based-data-stores"></a><span data-ttu-id="4e089-339">Úložiště dat na základě souborů</span><span class="sxs-lookup"><span data-stu-id="4e089-339">File-based data stores</span></span>
<span data-ttu-id="4e089-340">*(Včetně úložiště objektů Blob, Data Lake Store, Amazon S3, systémy souborů na místě a místní HDFS)*</span><span class="sxs-lookup"><span data-stu-id="4e089-340">*(Includes Blob storage, Data Lake Store, Amazon S3, on-premises file systems, and on-premises HDFS)*</span></span>

* <span data-ttu-id="4e089-341">**Zkopírujte chování**: Při kopírování dat z jiné na základě souborů datové úložiště, aktivity kopírování má tři možnosti prostřednictvím hello **copyBehavior** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-341">**Copy behavior**: If you copy data from a different file-based data store, Copy Activity has three options via hello **copyBehavior** property.</span></span> <span data-ttu-id="4e089-342">Zachovává hierarchie, vyrovná hierarchie nebo sloučí soubory.</span><span class="sxs-lookup"><span data-stu-id="4e089-342">It preserves hierarchy, flattens hierarchy, or merges files.</span></span> <span data-ttu-id="4e089-343">Buď se zachováním nebo vyrovnání hierarchie má žádné nebo téměř žádné nároky na výkon, ale sloučení souborů způsobí, že tooincrease režijní výkon.</span><span class="sxs-lookup"><span data-stu-id="4e089-343">Either preserving or flattening hierarchy has little or no performance overhead, but merging files causes performance overhead tooincrease.</span></span>
* <span data-ttu-id="4e089-344">**Soubor formátu a komprese**: viz hello [důležité informace týkající se serializace a deserializace](#considerations-for-serialization-and-deserialization) a [důležité informace týkající se komprese](#considerations-for-compression) oddíly pro další způsoby tooimprove výkonu .</span><span class="sxs-lookup"><span data-stu-id="4e089-344">**File format and compression**: See hello [Considerations for serialization and deserialization](#considerations-for-serialization-and-deserialization) and [Considerations for compression](#considerations-for-compression) sections for more ways tooimprove performance.</span></span>
* <span data-ttu-id="4e089-345">**Úložiště objektů blob**: v současné době podporuje úložiště objektů Blob blokovat jenom objekty BLOB pro přenos dat optimalizované a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="4e089-345">**Blob storage**: Currently, Blob storage supports only block blobs for optimized data transfer and throughput.</span></span>
* <span data-ttu-id="4e089-346">Pro **systémy souborů místní** scénáře, které vyžadují použití hello **Brána pro správu dat**, najdete v části hello [důležité informace týkající se Brána pro správu dat](#considerations-for-data-management-gateway) části.</span><span class="sxs-lookup"><span data-stu-id="4e089-346">For **on-premises file systems** scenarios that require hello use of **Data Management Gateway**, see hello [Considerations for Data Management Gateway](#considerations-for-data-management-gateway) section.</span></span>

### <a name="relational-data-stores"></a><span data-ttu-id="4e089-347">Relační datové úložiště</span><span class="sxs-lookup"><span data-stu-id="4e089-347">Relational data stores</span></span>
<span data-ttu-id="4e089-348">*(Zahrnuje SQL Database, SQL datového skladu, databáze systému SQL Server a Oracle – databáze)*</span><span class="sxs-lookup"><span data-stu-id="4e089-348">*(Includes SQL Database, SQL Data Warehouse, SQL Server databases, and Oracle databases)*</span></span>

* <span data-ttu-id="4e089-349">**Zkopírujte chování**: v závislosti na vlastnosti hello jste nastavili pro **sqlSink**, aktivity kopírování zapíše data toohello cílové databáze různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="4e089-349">**Copy behavior**: Depending on hello properties you've set for **sqlSink**, Copy Activity writes data toohello destination database in different ways.</span></span>
  * <span data-ttu-id="4e089-350">Ve výchozím nastavení hello hello data přesun služby používá hello hromadné kopírování API tooinsert dat v připojení režimu, který poskytuje nejlepší výkon.</span><span class="sxs-lookup"><span data-stu-id="4e089-350">By default, hello data movement service uses hello Bulk Copy API tooinsert data in append mode, which provides hello best performance.</span></span>
  * <span data-ttu-id="4e089-351">Pokud nakonfigurujete uložené procedury Sink hello, platí hello databáze hello dat jeden řádek v době místo jako hromadného načtení.</span><span class="sxs-lookup"><span data-stu-id="4e089-351">If you configure a stored procedure in hello sink, hello database applies hello data one row at a time instead of as a bulk load.</span></span> <span data-ttu-id="4e089-352">Výkon výrazně zahodí.</span><span class="sxs-lookup"><span data-stu-id="4e089-352">Performance drops significantly.</span></span> <span data-ttu-id="4e089-353">Pokud sadu dat velká, v případě potřeby, zvažte toousing hello **sqlWriterCleanupScript** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-353">If your data set is large, when applicable, consider switching toousing hello **sqlWriterCleanupScript** property.</span></span>
  * <span data-ttu-id="4e089-354">Pokud nakonfigurujete hello **sqlWriterCleanupScript** spouštět vlastnosti pro každou aktivitu kopírování, aktivační události služby hello hello skriptu a pak použijete hello hromadné kopírování API tooinsert hello data.</span><span class="sxs-lookup"><span data-stu-id="4e089-354">If you configure hello **sqlWriterCleanupScript** property for each Copy Activity run, hello service triggers hello script, and then you use hello Bulk Copy API tooinsert hello data.</span></span> <span data-ttu-id="4e089-355">Například hello celou tabulku toooverwrite s hello nejnovější data, můžete skript toofirst odstranit všechny záznamy před hromadného načtení hello nová data ze zdroje hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-355">For example, toooverwrite hello entire table with hello latest data, you can specify a script toofirst delete all records before bulk-loading hello new data from hello source.</span></span>
* <span data-ttu-id="4e089-356">**Velikost dat vzor a batch**:</span><span class="sxs-lookup"><span data-stu-id="4e089-356">**Data pattern and batch size**:</span></span>
  * <span data-ttu-id="4e089-357">Schéma tabulky ovlivňuje kopie propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-357">Your table schema affects copy throughput.</span></span> <span data-ttu-id="4e089-358">toocopy hello stejné množství dat, velikost velké řádku umožňuje lepší výkon než velikost malých řádku, protože databáze hello můžete potvrdit efektivněji méně dávky data.</span><span class="sxs-lookup"><span data-stu-id="4e089-358">toocopy hello same amount of data, a large row size gives you better performance than a small row size because hello database can more efficiently commit fewer batches of data.</span></span>
  * <span data-ttu-id="4e089-359">Aktivita kopírování vkládá data v řadě dávek.</span><span class="sxs-lookup"><span data-stu-id="4e089-359">Copy Activity inserts data in a series of batches.</span></span> <span data-ttu-id="4e089-360">Můžete nastavit hello počet řádků v dávce pomocí hello **writeBatchSize** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-360">You can set hello number of rows in a batch by using hello **writeBatchSize** property.</span></span> <span data-ttu-id="4e089-361">Pokud data obsahují malé řádky, můžete nastavit hello **writeBatchSize** vlastnost s vyšší toobenefit hodnotu z nižší režijní náklady na dávky a vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-361">If your data has small rows, you can set hello **writeBatchSize** property with a higher value toobenefit from lower batch overhead and higher throughput.</span></span> <span data-ttu-id="4e089-362">Pokud velikost řádku hello data velká, dávejte pozor, když zvýšíte **writeBatchSize**.</span><span class="sxs-lookup"><span data-stu-id="4e089-362">If hello row size of your data is large, be careful when you increase **writeBatchSize**.</span></span> <span data-ttu-id="4e089-363">Vysoká hodnota můžou způsobit selhání kopírování tooa způsobené přetížení hello databáze.</span><span class="sxs-lookup"><span data-stu-id="4e089-363">A high value might lead tooa copy failure caused by overloading hello database.</span></span>
* <span data-ttu-id="4e089-364">Pro **místní relační databáze** , jako třeba SQL Server a Oracle, které vyžadují použití hello **Brána pro správu dat**, najdete v části hello [důležité informace týkající se Brána pro správu dat](#considerations-for-data-management-gateway) části.</span><span class="sxs-lookup"><span data-stu-id="4e089-364">For **on-premises relational databases** like SQL Server and Oracle, which require hello use of **Data Management Gateway**, see hello [Considerations for Data Management Gateway](#considerations-for-data-management-gateway) section.</span></span>

### <a name="nosql-stores"></a><span data-ttu-id="4e089-365">NoSQL úložiště</span><span class="sxs-lookup"><span data-stu-id="4e089-365">NoSQL stores</span></span>
<span data-ttu-id="4e089-366">*(Zahrnuje Table storage a Azure Cosmos DB)*</span><span class="sxs-lookup"><span data-stu-id="4e089-366">*(Includes Table storage and Azure Cosmos DB )*</span></span>

* <span data-ttu-id="4e089-367">Pro **tabulky úložiště**:</span><span class="sxs-lookup"><span data-stu-id="4e089-367">For **Table storage**:</span></span>
  * <span data-ttu-id="4e089-368">**Oddíl**: zápis dat toointerleaved oddíly výrazně snižuje výkon.</span><span class="sxs-lookup"><span data-stu-id="4e089-368">**Partition**: Writing data toointerleaved partitions dramatically degrades performance.</span></span> <span data-ttu-id="4e089-369">Zdrojová data seřadit klíč oddílu tak, aby hello vloží se data efektivně do jednoho oddílu po druhém, nebo upravte hello logiku toowrite hello data tooa jeden oddíl.</span><span class="sxs-lookup"><span data-stu-id="4e089-369">Sort your source data by partition key so that hello data is inserted efficiently into one partition after another, or adjust hello logic toowrite hello data tooa single partition.</span></span>
* <span data-ttu-id="4e089-370">Pro **Azure Cosmos DB**:</span><span class="sxs-lookup"><span data-stu-id="4e089-370">For **Azure Cosmos DB**:</span></span>
  * <span data-ttu-id="4e089-371">**Velikost dávky**: hello **writeBatchSize** vlastnost nastaví hello počet požadavků na paralelní toohello Azure Cosmos DB služby toocreate dokumenty.</span><span class="sxs-lookup"><span data-stu-id="4e089-371">**Batch size**: hello **writeBatchSize** property sets hello number of parallel requests toohello Azure Cosmos DB service toocreate documents.</span></span> <span data-ttu-id="4e089-372">Lepšího výkonu můžete očekávat, když zvýšíte **writeBatchSize** další paralelní žádosti jsou odesílány tooAzure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4e089-372">You can expect better performance when you increase **writeBatchSize** because more parallel requests are sent tooAzure Cosmos DB.</span></span> <span data-ttu-id="4e089-373">Omezení při psaní tooAzure Cosmos DB však sledovat (hello chybová zpráva je "Požadavků je velká").</span><span class="sxs-lookup"><span data-stu-id="4e089-373">However, watch for throttling when you write tooAzure Cosmos DB (hello error message is "Request rate is large").</span></span> <span data-ttu-id="4e089-374">Různé faktory může způsobit, že omezení velikosti dokumentu, včetně hello počet podmínky v dokumentech hello a hello zásady indexování cílovou kolekci.</span><span class="sxs-lookup"><span data-stu-id="4e089-374">Various factors can cause throttling, including document size, hello number of terms in hello documents, and hello target collection's indexing policy.</span></span> <span data-ttu-id="4e089-375">vyšší propustnost kopie tooachieve, zvažte použití lepší kolekci, například S3.</span><span class="sxs-lookup"><span data-stu-id="4e089-375">tooachieve higher copy throughput, consider using a better collection, for example, S3.</span></span>

## <a name="considerations-for-serialization-and-deserialization"></a><span data-ttu-id="4e089-376">Důležité informace týkající se serializace a deserializace</span><span class="sxs-lookup"><span data-stu-id="4e089-376">Considerations for serialization and deserialization</span></span>
<span data-ttu-id="4e089-377">Serializace a deserializace může dojít, když vaše vstupní datové sady nebo výstupní datové sady není soubor.</span><span class="sxs-lookup"><span data-stu-id="4e089-377">Serialization and deserialization can occur when your input data set or output data set is a file.</span></span> <span data-ttu-id="4e089-378">V tématu [podporované formáty souborů a komprese](data-factory-supported-file-and-compression-formats.md) s informace o podporovaných formátech souborů pomocí aktivity kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-378">See [Supported file and compression formats](data-factory-supported-file-and-compression-formats.md) with details on supported file formats by Copy Activity.</span></span>

<span data-ttu-id="4e089-379">**Zkopírujte chování**:</span><span class="sxs-lookup"><span data-stu-id="4e089-379">**Copy behavior**:</span></span>

* <span data-ttu-id="4e089-380">Kopírování souborů mezi úložišti dat na základě souborů:</span><span class="sxs-lookup"><span data-stu-id="4e089-380">Copying files between file-based data stores:</span></span>
  * <span data-ttu-id="4e089-381">Když hello vstupní a výstupní datové sady, které mají stejné nebo žádné nastavení formátu souboru, služba pro přesun dat hello provede binární kopie bez jakýchkoli serializaci nebo deserializaci.</span><span class="sxs-lookup"><span data-stu-id="4e089-381">When input and output data sets both have hello same or no file format settings, hello data movement service executes a binary copy without any serialization or deserialization.</span></span> <span data-ttu-id="4e089-382">Zobrazí vyšší propustnost porovnání toohello scénáři, ve které hello se liší od sebe navzájem zdroj a jímka nastavení formátu souboru.</span><span class="sxs-lookup"><span data-stu-id="4e089-382">You see a higher throughput compared toohello scenario, in which hello source and sink file format settings are different from each other.</span></span>
  * <span data-ttu-id="4e089-383">Pokud vstupní a výstupní datové sady obě jsou ve formátu textu a pouze kódování hello typ je jiné, služba pro přesun dat hello pouze nepodporuje kódování převod.</span><span class="sxs-lookup"><span data-stu-id="4e089-383">When input and output data sets both are in text format and only hello encoding type is different, hello data movement service only does encoding conversion.</span></span> <span data-ttu-id="4e089-384">Neprovádí žádné serializace a deserializace, což způsobí, že některé výkonu režie porovná tooa binární kopie.</span><span class="sxs-lookup"><span data-stu-id="4e089-384">It doesn't do any serialization and deserialization, which causes some performance overhead compared tooa binary copy.</span></span>
  * <span data-ttu-id="4e089-385">Pokud vstupní a výstupní datové sady oba mají jiné formáty souborů nebo různé konfigurace, jako oddělovače, hello služba pro přesun dat deserializuje toostream zdroje dat, transformace a pak ho serializaci do formátu výstup hello, kterou jste uvedli.</span><span class="sxs-lookup"><span data-stu-id="4e089-385">When input and output data sets both have different file formats or different configurations, like delimiters, hello data movement service deserializes source data toostream, transform, and then serialize it into hello output format you indicated.</span></span> <span data-ttu-id="4e089-386">Výsledkem operace režie mnohem větších výkon ve srovnání tooother scénáře.</span><span class="sxs-lookup"><span data-stu-id="4e089-386">This operation results in a much more significant performance overhead compared tooother scenarios.</span></span>
* <span data-ttu-id="4e089-387">Při kopírování souborů z úložiště dat, který není na základě souborů (například z tooa souborové úložiště relační úložiště) hello serializaci nebo deserializaci krok je povinný.</span><span class="sxs-lookup"><span data-stu-id="4e089-387">When you copy files to/from a data store that is not file-based (for example, from a file-based store tooa relational store), hello serialization or deserialization step is required.</span></span> <span data-ttu-id="4e089-388">Tento krok vede režijní náklady na významně zvýšit výkon.</span><span class="sxs-lookup"><span data-stu-id="4e089-388">This step results in significant performance overhead.</span></span>

<span data-ttu-id="4e089-389">**Formát souboru**: formát souboru hello zvolíte může ovlivnit výkon kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-389">**File format**: hello file format you choose might affect copy performance.</span></span> <span data-ttu-id="4e089-390">Například je Avro kompaktní binární formát, který ukládá metadata s daty.</span><span class="sxs-lookup"><span data-stu-id="4e089-390">For example, Avro is a compact binary format that stores metadata with data.</span></span> <span data-ttu-id="4e089-391">Rozsáhlá podpora má v hello ekosystém Hadoop pro zpracování a dotazování.</span><span class="sxs-lookup"><span data-stu-id="4e089-391">It has broad support in hello Hadoop ecosystem for processing and querying.</span></span> <span data-ttu-id="4e089-392">Je však nákladnější k serializaci a deserializaci, výsledkem nižší propustnost kopie porovnání tootext formát Avro.</span><span class="sxs-lookup"><span data-stu-id="4e089-392">However, Avro is more expensive for serialization and deserialization, which results in lower copy throughput compared tootext format.</span></span> <span data-ttu-id="4e089-393">Zkontrolujte výběr formátu souboru v rámci hello komplexní zpracování toku.</span><span class="sxs-lookup"><span data-stu-id="4e089-393">Make your choice of file format throughout hello processing flow holistically.</span></span> <span data-ttu-id="4e089-394">Spustit s co formuláře hello data se ukládají do, zdrojové úložiště dat nebo toobe extrahovat z externích systémů; Hello nejlepší formát pro úložiště, analytického zpracování a dotazování; a jaký formát hello data mají být exportovány do datových tržišť nástrojů pro vytváření sestav a vizualizace nástroje.</span><span class="sxs-lookup"><span data-stu-id="4e089-394">Start with what form hello data is stored in, source data stores or toobe extracted from external systems; hello best format for storage, analytical processing, and querying; and in what format hello data should be exported into data marts for reporting and visualization tools.</span></span> <span data-ttu-id="4e089-395">Někdy formát souboru, který je zhoršené pro čtení a zápisu, výkon může být vhodné použít při zvažování hello celkové analytical procesu.</span><span class="sxs-lookup"><span data-stu-id="4e089-395">Sometimes a file format that is suboptimal for read and write performance might be a good choice when you consider hello overall analytical process.</span></span>

## <a name="considerations-for-compression"></a><span data-ttu-id="4e089-396">Důležité informace pro kompresi</span><span class="sxs-lookup"><span data-stu-id="4e089-396">Considerations for compression</span></span>
<span data-ttu-id="4e089-397">Pokud vstupní nebo výstupní datové sady je soubor, můžete nastavit aktivitu kopírování tooperform kompresi nebo dekompresi jako zapíše data toohello cílový.</span><span class="sxs-lookup"><span data-stu-id="4e089-397">When your input or output data set is a file, you can set Copy Activity tooperform compression or decompression as it writes data toohello destination.</span></span> <span data-ttu-id="4e089-398">Když zvolíte komprese, můžete udělat kompromis mezi vstupně výstupní (I/O) a procesoru.</span><span class="sxs-lookup"><span data-stu-id="4e089-398">When you choose compression, you make a tradeoff between input/output (I/O) and CPU.</span></span> <span data-ttu-id="4e089-399">Komprese dat hello náklady navíc v výpočetní prostředky.</span><span class="sxs-lookup"><span data-stu-id="4e089-399">Compressing hello data costs extra in compute resources.</span></span> <span data-ttu-id="4e089-400">Ale na oplátku omezuje sítě vstupně-výstupních operací a úložiště.</span><span class="sxs-lookup"><span data-stu-id="4e089-400">But in return, it reduces network I/O and storage.</span></span> <span data-ttu-id="4e089-401">V závislosti na vašich dat se může zobrazit nárůst v celkovou propustnost kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-401">Depending on your data, you may see a boost in overall copy throughput.</span></span>

<span data-ttu-id="4e089-402">**Kodeků**: aktivita kopírování podporuje typy kompresi Deflate, bzip2 a gzip.</span><span class="sxs-lookup"><span data-stu-id="4e089-402">**Codec**: Copy Activity supports gzip, bzip2, and Deflate compression types.</span></span> <span data-ttu-id="4e089-403">Azure HDInsight můžete využívat všechny tři typy zpracování.</span><span class="sxs-lookup"><span data-stu-id="4e089-403">Azure HDInsight can consume all three types for processing.</span></span> <span data-ttu-id="4e089-404">Každý komprese kodek obsahuje výhody.</span><span class="sxs-lookup"><span data-stu-id="4e089-404">Each compression codec has advantages.</span></span> <span data-ttu-id="4e089-405">Například bzip2 má hello nejnižší kopie propustnost, ale můžete získat hello Hive dotazy vracely co nejlepší s bzip2, protože je možné rozdělit pro zpracování.</span><span class="sxs-lookup"><span data-stu-id="4e089-405">For example, bzip2 has hello lowest copy throughput, but you get hello best Hive query performance with bzip2 because you can split it for processing.</span></span> <span data-ttu-id="4e089-406">GZIP je hello nejvíce vyrovnáváním možnost a používá se nejčastěji používá hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-406">Gzip is hello most balanced option, and it is used hello most often.</span></span> <span data-ttu-id="4e089-407">Zvolte hello kodeků, který nejlépe vyhovuje danému typu klient server.</span><span class="sxs-lookup"><span data-stu-id="4e089-407">Choose hello codec that best suits your end-to-end scenario.</span></span>

<span data-ttu-id="4e089-408">**Úroveň**: můžete vybrat z dvě možnosti pro každý komprese kodeků: nejrychlejších komprimované a optimálně komprimované.</span><span class="sxs-lookup"><span data-stu-id="4e089-408">**Level**: You can choose from two options for each compression codec: fastest compressed and optimally compressed.</span></span> <span data-ttu-id="4e089-409">Hello nejrychlejších komprimované možnost komprimuje hello data co nejrychleji, i když hello výsledný soubor není komprimována optimálně.</span><span class="sxs-lookup"><span data-stu-id="4e089-409">hello fastest compressed option compresses hello data as quickly as possible, even if hello resulting file is not optimally compressed.</span></span> <span data-ttu-id="4e089-410">Hello optimálně komprimované možnost stráví více času na komprese a výsledkem minimální množství dat.</span><span class="sxs-lookup"><span data-stu-id="4e089-410">hello optimally compressed option spends more time on compression and yields a minimal amount of data.</span></span> <span data-ttu-id="4e089-411">Obě možnosti toosee, který poskytuje lepší celkový výkon ve vašem případě můžete otestovat.</span><span class="sxs-lookup"><span data-stu-id="4e089-411">You can test both options toosee which provides better overall performance in your case.</span></span>

<span data-ttu-id="4e089-412">**Zabývat**: toocopy velké množství dat mezi místnímu úložišti a cloudu hello, zvažte použití úložiště objektů blob v mezičase s kompresí.</span><span class="sxs-lookup"><span data-stu-id="4e089-412">**A consideration**: toocopy a large amount of data between an on-premises store and hello cloud, consider using interim blob storage with compression.</span></span> <span data-ttu-id="4e089-413">Použití dočasné úložiště je užitečné, když hello šířky pásma sítě a služeb Azure je hello omezující faktor, který chcete hello vstupní datové sady a výstupní data nastavit obě toobe nekomprimované formuláře.</span><span class="sxs-lookup"><span data-stu-id="4e089-413">Using interim storage is helpful when hello bandwidth of your corporate network and your Azure services is hello limiting factor, and you want hello input data set and output data set both toobe in uncompressed form.</span></span> <span data-ttu-id="4e089-414">Jedna kopie aktivity přesněji řečeno, lze rozdělit na dvě kopie aktivity.</span><span class="sxs-lookup"><span data-stu-id="4e089-414">More specifically, you can break a single copy activity into two copy activities.</span></span> <span data-ttu-id="4e089-415">Hello první kopie aktivity se zkopíruje z hello zdroj tooan provizorní nebo pracovní objekt blob v komprimované formě.</span><span class="sxs-lookup"><span data-stu-id="4e089-415">hello first copy activity copies from hello source tooan interim or staging blob in compressed form.</span></span> <span data-ttu-id="4e089-416">Druhá aktivita kopírování Hello zkopíruje hello komprimována data z pracovní databáze a pak dekomprimuje při zapíše toohello podřízený.</span><span class="sxs-lookup"><span data-stu-id="4e089-416">hello second copy activity copies hello compressed data from staging, and then decompresses while it writes toohello sink.</span></span>

## <a name="considerations-for-column-mapping"></a><span data-ttu-id="4e089-417">Důležité informace týkající se mapování sloupců</span><span class="sxs-lookup"><span data-stu-id="4e089-417">Considerations for column mapping</span></span>
<span data-ttu-id="4e089-418">Můžete nastavit hello **columnMappings** vlastnost v aktivitě kopírování toomap všechny nebo jen některé hello vstupní sloupce toohello výstupní sloupce.</span><span class="sxs-lookup"><span data-stu-id="4e089-418">You can set hello **columnMappings** property in Copy Activity toomap all or a subset of hello input columns toohello output columns.</span></span> <span data-ttu-id="4e089-419">Poté, co služba pro přesun dat hello načte hello data ze zdroje hello, musí tooperform mapování sloupců na hello data před zapíše jímku toohello dat hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-419">After hello data movement service reads hello data from hello source, it needs tooperform column mapping on hello data before it writes hello data toohello sink.</span></span> <span data-ttu-id="4e089-420">Další zpracování snižuje kopie propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-420">This extra processing reduces copy throughput.</span></span>

<span data-ttu-id="4e089-421">Pokud zdrojového úložiště dat dotazovatelné, například pokud je relační úložiště, jako je SQL Database nebo SQL Server, nebo pokud je úložiště typu NoSQL jako Table storage nebo Azure Cosmos DB, zvažte vkládání hello sloupec filtrování a změna logiku toohello **dotazu**  vlastnost místo použití mapování sloupců.</span><span class="sxs-lookup"><span data-stu-id="4e089-421">If your source data store is queryable, for example, if it's a relational store like SQL Database or SQL Server, or if it's a NoSQL store like Table storage or Azure Cosmos DB, consider pushing hello column filtering and reordering logic toohello **query** property instead of using column mapping.</span></span> <span data-ttu-id="4e089-422">Tímto způsobem hello projekce provádí služba pro přesun dat hello přečte úložiště dat z hello zdroje dat, kde je mnohem efektivnější.</span><span class="sxs-lookup"><span data-stu-id="4e089-422">This way, hello projection occurs while hello data movement service reads data from hello source data store, where it is much more efficient.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="4e089-423">Další důležité informace</span><span class="sxs-lookup"><span data-stu-id="4e089-423">Other considerations</span></span>
<span data-ttu-id="4e089-424">Pokud hello velikost dat, které chcete toocopy je velká, můžete nastavit obchodní logiky toofurther oddílu hello data pomocí hello řezů mechanismus v datové továrně.</span><span class="sxs-lookup"><span data-stu-id="4e089-424">If hello size of data you want toocopy is large, you can adjust your business logic toofurther partition hello data using hello slicing mechanism in Data Factory.</span></span> <span data-ttu-id="4e089-425">Poté naplánujte aktivity kopírování toorun častěji spouštět tooreduce hello velikost dat pro každou aktivitu kopírování.</span><span class="sxs-lookup"><span data-stu-id="4e089-425">Then, schedule Copy Activity toorun more frequently tooreduce hello data size for each Copy Activity run.</span></span>

<span data-ttu-id="4e089-426">Být opatrní při hello počet datových sad a kopie aktivity nutnosti Data Factory tooconnector toohello stejné úložiště dat v hello stejný čas.</span><span class="sxs-lookup"><span data-stu-id="4e089-426">Be cautious about hello number of data sets and copy activities requiring Data Factory tooconnector toohello same data store at hello same time.</span></span> <span data-ttu-id="4e089-427">Mnoho souběžných kopírování úlohy může omezení úložiště dat a vést toodegraded výkonu, zkopírujte interní opakování úlohy a v některých případech selhání spuštění.</span><span class="sxs-lookup"><span data-stu-id="4e089-427">Many concurrent copy jobs might throttle a data store and lead toodegraded performance, copy job internal retries, and in some cases, execution failures.</span></span>

## <a name="sample-scenario-copy-from-an-on-premises-sql-server-tooblob-storage"></a><span data-ttu-id="4e089-428">Vzorový scénář: kopírování z místního úložiště tooBlob systému SQL Server</span><span class="sxs-lookup"><span data-stu-id="4e089-428">Sample scenario: Copy from an on-premises SQL Server tooBlob storage</span></span>
<span data-ttu-id="4e089-429">**Scénář**: kanál vychází toocopy data z místního úložiště tooBlob systému SQL Server ve formátu CSV.</span><span class="sxs-lookup"><span data-stu-id="4e089-429">**Scenario**: A pipeline is built toocopy data from an on-premises SQL Server tooBlob storage in CSV format.</span></span> <span data-ttu-id="4e089-430">toomake hello úlohu kopírování rychleji, soubory CSV hello by měl komprimované do bzip2 formátu.</span><span class="sxs-lookup"><span data-stu-id="4e089-430">toomake hello copy job faster, hello CSV files should be compressed into bzip2 format.</span></span>

<span data-ttu-id="4e089-431">**Test a analýzy**: hello propustnost aktivity kopírování je menší než 2 MB/s, což je mnohem nižší než srovnávacího testu výkonu hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-431">**Test and analysis**: hello throughput of Copy Activity is less than 2 MBps, which is much slower than hello performance benchmark.</span></span>

<span data-ttu-id="4e089-432">**Analýza výkonu a ladění**: tootroubleshoot hello týkající se výkonu, podíváme se na způsobu zpracování a přesunout hello data.</span><span class="sxs-lookup"><span data-stu-id="4e089-432">**Performance analysis and tuning**: tootroubleshoot hello performance issue, let’s look at how hello data is processed and moved.</span></span>

1. <span data-ttu-id="4e089-433">**Čtení dat**: Brána otevře připojení tooSQL serveru a odešle hello dotazu.</span><span class="sxs-lookup"><span data-stu-id="4e089-433">**Read data**: Gateway opens a connection tooSQL Server and sends hello query.</span></span> <span data-ttu-id="4e089-434">SQL Server odpoví odesláním hello datový proud tooGateway prostřednictvím intranetu hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-434">SQL Server responds by sending hello data stream tooGateway via hello intranet.</span></span>
2. <span data-ttu-id="4e089-435">**Serializuje a komprese dat**: brány serializuje hello datový proud tooCSV formátu, a zkomprimuje hello datový proud bzip2 tooa.</span><span class="sxs-lookup"><span data-stu-id="4e089-435">**Serialize and compress data**: Gateway serializes hello data stream tooCSV format, and compresses hello data tooa bzip2 stream.</span></span>
3. <span data-ttu-id="4e089-436">**Zápis dat**: brány odešle hello bzip2 datového proudu tooBlob úložiště prostřednictvím hello Internetu.</span><span class="sxs-lookup"><span data-stu-id="4e089-436">**Write data**: Gateway uploads hello bzip2 stream tooBlob storage via hello Internet.</span></span>

<span data-ttu-id="4e089-437">Jak vidíte, hello dat se zpracovat a přesunout způsobem streamování sekvenční: SQL Server > LAN > brány > WAN > úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="4e089-437">As you can see, hello data is being processed and moved in a streaming sequential manner: SQL Server > LAN > Gateway > WAN > Blob storage.</span></span> <span data-ttu-id="4e089-438">**Hello celkový výkon jsou závislé na minimální propustnost hello napříč hello kanálu**.</span><span class="sxs-lookup"><span data-stu-id="4e089-438">**hello overall performance is gated by hello minimum throughput across hello pipeline**.</span></span>

![Tok dat](./media/data-factory-copy-activity-performance/case-study-pic-1.png)

<span data-ttu-id="4e089-440">Přetížení hello může způsobit jeden nebo více hello následující faktory:</span><span class="sxs-lookup"><span data-stu-id="4e089-440">One or more of hello following factors might cause hello performance bottleneck:</span></span>

* <span data-ttu-id="4e089-441">**Zdroj**: samotný SQL Server má nízkou propustnost kvůli velkým zatížením.</span><span class="sxs-lookup"><span data-stu-id="4e089-441">**Source**: SQL Server itself has low throughput because of heavy loads.</span></span>
* <span data-ttu-id="4e089-442">**Brána pro správu dat**:</span><span class="sxs-lookup"><span data-stu-id="4e089-442">**Data Management Gateway**:</span></span>
  * <span data-ttu-id="4e089-443">**LAN**: brány se nachází daleko od hello počítači serveru SQL Server a má připojení s malou šířkou pásma.</span><span class="sxs-lookup"><span data-stu-id="4e089-443">**LAN**: Gateway is located far from hello SQL Server machine and has a low-bandwidth connection.</span></span>
  * <span data-ttu-id="4e089-444">**Brána**: brány bylo dosaženo jeho zatížení hello tooperform omezení následující operace:</span><span class="sxs-lookup"><span data-stu-id="4e089-444">**Gateway**: Gateway has reached its load limitations tooperform hello following operations:</span></span>
    * <span data-ttu-id="4e089-445">**Serializace**: serializaci hello datový proud tooCSV formátu má pomalé propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-445">**Serialization**: Serializing hello data stream tooCSV format has slow throughput.</span></span>
    * <span data-ttu-id="4e089-446">**Komprese**: jste zvolili pomalé kompresní kodek (například bzip2, což je 2,8 MB/s s i7 jádra).</span><span class="sxs-lookup"><span data-stu-id="4e089-446">**Compression**: You chose a slow compression codec (for example, bzip2, which is 2.8 MBps with Core i7).</span></span>
  * <span data-ttu-id="4e089-447">**WAN**: hello šířky pásma mezi podnikovou sítí hello a služeb Azure je nízká (například T1 = 1,544 kbps; T2 = 6,312 kb/s).</span><span class="sxs-lookup"><span data-stu-id="4e089-447">**WAN**: hello bandwidth between hello corporate network and your Azure services is low (for example, T1 = 1,544 kbps; T2 = 6,312 kbps).</span></span>
* <span data-ttu-id="4e089-448">**Jímky**: úložiště objektů Blob má nízkou propustnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-448">**Sink**: Blob storage has low throughput.</span></span> <span data-ttu-id="4e089-449">(Tento scénář nepravděpodobné, protože jeho SLA zaručuje minimálně 60 MB/s.)</span><span class="sxs-lookup"><span data-stu-id="4e089-449">(This scenario is unlikely because its SLA guarantees a minimum of 60 MBps.)</span></span>

<span data-ttu-id="4e089-450">V takovém případě může komprese dat bzip2 zpomalení hello celého kanálu.</span><span class="sxs-lookup"><span data-stu-id="4e089-450">In this case, bzip2 data compression might be slowing down hello entire pipeline.</span></span> <span data-ttu-id="4e089-451">Přepínání kodek pro kompresi gzip tooa může usnadňují tyto potíže.</span><span class="sxs-lookup"><span data-stu-id="4e089-451">Switching tooa gzip compression codec might ease this bottleneck.</span></span>

## <a name="sample-scenarios-use-parallel-copy"></a><span data-ttu-id="4e089-452">Ukázkové scénáře: použití paralelních kopie</span><span class="sxs-lookup"><span data-stu-id="4e089-452">Sample scenarios: Use parallel copy</span></span>
<span data-ttu-id="4e089-453">**Scénář I:** kopírování 1 000 1 MB souborů z úložiště tooBlob hello místní soubor systému.</span><span class="sxs-lookup"><span data-stu-id="4e089-453">**Scenario I:** Copy 1,000 1-MB files from hello on-premises file system tooBlob storage.</span></span>

<span data-ttu-id="4e089-454">**Analýzy a optimalizace výkonu**: pro příklad, pokud jste nainstalovali bránu na počítači čtyřjádrový, objekt pro vytváření dat používá 16 toomove paralelní zkopíruje soubory z úložiště tooBlob systému souboru hello současně.</span><span class="sxs-lookup"><span data-stu-id="4e089-454">**Analysis and performance tuning**: For an example, if you have installed gateway on a quad core machine, Data Factory uses 16 parallel copies toomove files from hello file system tooBlob storage concurrently.</span></span> <span data-ttu-id="4e089-455">Paralelní spuštění tohoto by měl mít za následek vysoké propustnosti.</span><span class="sxs-lookup"><span data-stu-id="4e089-455">This parallel execution should result in high throughput.</span></span> <span data-ttu-id="4e089-456">Také lze explicitně zadat počet kopií paralelní hello.</span><span class="sxs-lookup"><span data-stu-id="4e089-456">You also can explicitly specify hello parallel copies count.</span></span> <span data-ttu-id="4e089-457">Při kopírování mnoho malých souborů paralelní kopie výrazně pomoct propustnost pomocí prostředků efektivněji.</span><span class="sxs-lookup"><span data-stu-id="4e089-457">When you copy many small files, parallel copies dramatically help throughput by using resources more effectively.</span></span>

![Scénář 1](./media/data-factory-copy-activity-performance/scenario-1.png)

<span data-ttu-id="4e089-459">**Scénář II**: Zkopírujte 20 objekty BLOB 500 MB z objektu Blob úložiště tooData Lake Analytics úložiště a pak optimalizaci výkonu.</span><span class="sxs-lookup"><span data-stu-id="4e089-459">**Scenario II**: Copy 20 blobs of 500 MB each from Blob storage tooData Lake Store Analytics, and then tune performance.</span></span>

<span data-ttu-id="4e089-460">**Analýzy a optimalizace výkonu**: V tomto scénáři pro vytváření dat zkopíruje hello data z objektu Blob úložiště tooData Lake Store pomocí jedné kopie (**parallelCopies** nastavit too1) a data v cloudu jedním přesun jednotek.</span><span class="sxs-lookup"><span data-stu-id="4e089-460">**Analysis and performance tuning**: In this scenario, Data Factory copies hello data from Blob storage tooData Lake Store by using single-copy (**parallelCopies** set too1) and single-cloud data movement units.</span></span> <span data-ttu-id="4e089-461">Hello propustnost zjistíte bude zavřít toothat popsané v hello [výkonu referenčním oddílu](#performance-reference).</span><span class="sxs-lookup"><span data-stu-id="4e089-461">hello throughput you observe will be close toothat described in hello [performance reference section](#performance-reference).</span></span>   

![Scénář 2](./media/data-factory-copy-activity-performance/scenario-2.png)

<span data-ttu-id="4e089-463">**Scénář III**: velikost jednotlivých souborů je větší než desítek MB a celkového objemu velký.</span><span class="sxs-lookup"><span data-stu-id="4e089-463">**Scenario III**: Individual file size is greater than dozens of MBs and total volume is large.</span></span>

<span data-ttu-id="4e089-464">**Analýzy a výkonu měnící**: zvýšení **parallelCopies** nevede k lepší výkon kopírování kvůli omezení prostředků hello DMU jeden cloud.</span><span class="sxs-lookup"><span data-stu-id="4e089-464">**Analysis and performance turning**: Increasing **parallelCopies** doesn't result in better copy performance because of hello resource limitations of a single-cloud DMU.</span></span> <span data-ttu-id="4e089-465">Místo toho musíte zadat další cloudu DMUs tooget přesun tooperform dat hello další prostředky.</span><span class="sxs-lookup"><span data-stu-id="4e089-465">Instead, you should specify more cloud DMUs tooget more resources tooperform hello data movement.</span></span> <span data-ttu-id="4e089-466">Nezadávejte hodnotu pro hello **parallelCopies** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="4e089-466">Do not specify a value for hello **parallelCopies** property.</span></span> <span data-ttu-id="4e089-467">Objekt pro vytváření dat zpracovává hello paralelismus za vás.</span><span class="sxs-lookup"><span data-stu-id="4e089-467">Data Factory handles hello parallelism for you.</span></span> <span data-ttu-id="4e089-468">V tomto případě, pokud jste nastavili **cloudDataMovementUnits** too4, propustnost o čtyřikrát dojde.</span><span class="sxs-lookup"><span data-stu-id="4e089-468">In this case, if you set **cloudDataMovementUnits** too4, a throughput of about four times occurs.</span></span>

![Scénář 3](./media/data-factory-copy-activity-performance/scenario-3.png)

## <a name="reference"></a><span data-ttu-id="4e089-470">Referenční informace</span><span class="sxs-lookup"><span data-stu-id="4e089-470">Reference</span></span>
<span data-ttu-id="4e089-471">Zde jsou sledování výkonu a optimalizace odkazy pro některé podporované hello datová úložiště:</span><span class="sxs-lookup"><span data-stu-id="4e089-471">Here are performance monitoring and tuning references for some of hello supported data stores:</span></span>

* <span data-ttu-id="4e089-472">Úložiště Azure (včetně úložiště objektů Blob a Table storage): [cíle škálovatelnosti Azure Storage](../storage/common/storage-scalability-targets.md) a [kontrolní seznam výkonu a škálovatelnosti Azure Storage](../storage/common/storage-performance-checklist.md)</span><span class="sxs-lookup"><span data-stu-id="4e089-472">Azure Storage (including Blob storage and Table storage): [Azure Storage scalability targets](../storage/common/storage-scalability-targets.md) and [Azure Storage performance and scalability checklist](../storage/common/storage-performance-checklist.md)</span></span>
* <span data-ttu-id="4e089-473">Azure SQL Database: Můžete [sledovat výkon hello](../sql-database/sql-database-single-database-monitor.md) a zkontrolujte hello databáze transakce (DTU) jednotky procento</span><span class="sxs-lookup"><span data-stu-id="4e089-473">Azure SQL Database: You can [monitor hello performance](../sql-database/sql-database-single-database-monitor.md) and check hello database transaction unit (DTU) percentage</span></span>
* <span data-ttu-id="4e089-474">Azure SQL Data Warehouse: Jeho schopnosti se měří v jednotky datového skladu (Dwu); v tématu [spravovat výpočetní výkon v Azure SQL Data Warehouse (přehled)](../sql-data-warehouse/sql-data-warehouse-manage-compute-overview.md)</span><span class="sxs-lookup"><span data-stu-id="4e089-474">Azure SQL Data Warehouse: Its capability is measured in data warehouse units (DWUs); see [Manage compute power in Azure SQL Data Warehouse (Overview)](../sql-data-warehouse/sql-data-warehouse-manage-compute-overview.md)</span></span>
* <span data-ttu-id="4e089-475">Azure Cosmos DB: [úrovně výkonu v Azure Cosmos DB](../documentdb/documentdb-performance-levels.md)</span><span class="sxs-lookup"><span data-stu-id="4e089-475">Azure Cosmos DB: [Performance levels in Azure Cosmos DB](../documentdb/documentdb-performance-levels.md)</span></span>
* <span data-ttu-id="4e089-476">Místní SQL Server: [monitorování a optimalizace výkonu](https://msdn.microsoft.com/library/ms189081.aspx)</span><span class="sxs-lookup"><span data-stu-id="4e089-476">On-premises SQL Server: [Monitor and tune for performance](https://msdn.microsoft.com/library/ms189081.aspx)</span></span>
* <span data-ttu-id="4e089-477">Místní souborový server: [optimalizace výkonu pro souborové servery](https://msdn.microsoft.com/library/dn567661.aspx)</span><span class="sxs-lookup"><span data-stu-id="4e089-477">On-premises file server: [Performance tuning for file servers](https://msdn.microsoft.com/library/dn567661.aspx)</span></span>
