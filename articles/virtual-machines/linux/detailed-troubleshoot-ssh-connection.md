---
title: "Podrobné řešení potíží SSH pro virtuální počítač Azure | Microsoft Docs"
description: "Podrobnější SSH řešení potíží s kroky pro připojení k virtuální počítač Azure"
keywords: "SSH připojení odmítnuto, ssh chyby, azure ssh, připojení SSH se nezdařilo"
services: virtual-machines-linux
documentationcenter: 
author: iainfoulds
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: b8e8be5f-e8a6-489d-9922-9df8de32e839
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: support-article
ms.date: 07/06/2017
ms.author: iainfou
ms.openlocfilehash: 9ccdb3fbca21264065eeb1c4e46314c62af4c2e8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="detailed-ssh-troubleshooting-steps-for-issues-connecting-to-a-linux-vm-in-azure"></a><span data-ttu-id="2bb92-104">Podrobné SSH řešení potíží s kroky pro připojení k virtuální počítač s Linuxem v Azure</span><span class="sxs-lookup"><span data-stu-id="2bb92-104">Detailed SSH troubleshooting steps for issues connecting to a Linux VM in Azure</span></span>
<span data-ttu-id="2bb92-105">Existuje mnoho možných příčin, které použije klient SSH nemusí být možné kontaktovat službu SSH ve virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="2bb92-105">There are many possible reasons that the SSH client might not be able to reach the SSH service on the VM.</span></span> <span data-ttu-id="2bb92-106">Pokud jste provedli prostřednictvím Čím více [obecné SSH při řešení potíží](troubleshoot-ssh-connection.md), budete muset dále řešit potíže s připojením.</span><span class="sxs-lookup"><span data-stu-id="2bb92-106">If you have followed through the more [general SSH troubleshooting steps](troubleshoot-ssh-connection.md), you need to further troubleshoot the connection issue.</span></span> <span data-ttu-id="2bb92-107">Tento článek vás provede podrobný postup řešení potíží k určení, kde se nedaří připojení SSH a jak je vyřešit.</span><span class="sxs-lookup"><span data-stu-id="2bb92-107">This article guides you through detailed troubleshooting steps to determine where the SSH connection is failing and how to resolve it.</span></span>

## <a name="take-preliminary-steps"></a><span data-ttu-id="2bb92-108">Proveďte předběžnou kroky</span><span class="sxs-lookup"><span data-stu-id="2bb92-108">Take preliminary steps</span></span>
<span data-ttu-id="2bb92-109">Následující diagram znázorňuje komponenty, které se podílejí.</span><span class="sxs-lookup"><span data-stu-id="2bb92-109">The following diagram shows the components that are involved.</span></span>

![Diagram zobrazující komponenty služby SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

<span data-ttu-id="2bb92-111">Následující kroky umožňují izolovat příčinu selhání a zjistěte řešení či alternativní řešení.</span><span class="sxs-lookup"><span data-stu-id="2bb92-111">The following steps help you isolate the source of the failure and figure out solutions or workarounds.</span></span>

1. <span data-ttu-id="2bb92-112">Zkontrolujte stav virtuálního počítače na portálu.</span><span class="sxs-lookup"><span data-stu-id="2bb92-112">Check the status of the VM in the portal.</span></span>
   <span data-ttu-id="2bb92-113">V [portál Azure](https://portal.azure.com), vyberte **virtuální počítače** > *název virtuálního počítače*.</span><span class="sxs-lookup"><span data-stu-id="2bb92-113">In the [Azure portal](https://portal.azure.com), select **Virtual machines** > *VM name*.</span></span>

   <span data-ttu-id="2bb92-114">V podokně Stav pro virtuální počítač by měl zobrazit **systémem**.</span><span class="sxs-lookup"><span data-stu-id="2bb92-114">The status pane for the VM should show **Running**.</span></span> <span data-ttu-id="2bb92-115">Posuňte se dolů a zobrazit poslední aktivitu na účtu pro výpočty, úložiště a síťové prostředky.</span><span class="sxs-lookup"><span data-stu-id="2bb92-115">Scroll down to show recent activity for compute, storage, and network resources.</span></span>

2. <span data-ttu-id="2bb92-116">Vyberte **nastavení** prozkoumat koncových bodů, IP adres, skupiny zabezpečení sítě a další nastavení.</span><span class="sxs-lookup"><span data-stu-id="2bb92-116">Select **Settings** to examine endpoints, IP addresses, network security groups, and other settings.</span></span>

   <span data-ttu-id="2bb92-117">Virtuální počítač by měl mít koncový bod definované pro SSH provoz, který si můžete prohlédnout v **koncové body** nebo  **[skupinu zabezpečení sítě](../../virtual-network/virtual-networks-nsg.md)**.</span><span class="sxs-lookup"><span data-stu-id="2bb92-117">The VM should have an endpoint defined for SSH traffic that you can view in **Endpoints** or **[Network security group](../../virtual-network/virtual-networks-nsg.md)**.</span></span> <span data-ttu-id="2bb92-118">Koncové body ve virtuálních počítačích, které byly vytvořeny pomocí Resource Manageru se ukládají na skupinu zabezpečení sítě.</span><span class="sxs-lookup"><span data-stu-id="2bb92-118">Endpoints in VMs that were created by using Resource Manager are stored in a network security group.</span></span> <span data-ttu-id="2bb92-119">Také ověřte, zda byla použita pravidla na skupinu zabezpečení sítě a že se odkazuje v podsíti.</span><span class="sxs-lookup"><span data-stu-id="2bb92-119">Also, verify that the rules have been applied to the network security group and that they're referenced in the subnet.</span></span>

<span data-ttu-id="2bb92-120">Chcete-li ověřit připojení k síti, kontrolu nakonfigurované koncové body a zjistěte, pokud se lze připojit virtuální počítač pomocí jiného protokolu, jako je například HTTP nebo jiné služby.</span><span class="sxs-lookup"><span data-stu-id="2bb92-120">To verify network connectivity, check the configured endpoints and see if you can reach the VM through another protocol, such as HTTP or another service.</span></span>

<span data-ttu-id="2bb92-121">Po provedení těchto kroků zkuste to znovu připojení SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-121">After these steps, try the SSH connection again.</span></span>

## <a name="find-the-source-of-the-issue"></a><span data-ttu-id="2bb92-122">Najít zdroj problému</span><span class="sxs-lookup"><span data-stu-id="2bb92-122">Find the source of the issue</span></span>
<span data-ttu-id="2bb92-123">Klient SSH v počítači se nemusí podařit připojit službu SSH pro virtuální počítač Azure kvůli problémům nebo nesprávné konfigurace v těchto oblastech:</span><span class="sxs-lookup"><span data-stu-id="2bb92-123">The SSH client on your computer might fail to reach the SSH service on the Azure VM due to issues or misconfigurations in the following areas:</span></span>

* [<span data-ttu-id="2bb92-124">Klientský počítač SSH</span><span class="sxs-lookup"><span data-stu-id="2bb92-124">SSH client computer</span></span>](#source-1-ssh-client-computer)
* [<span data-ttu-id="2bb92-125">Hraniční zařízení organizace</span><span class="sxs-lookup"><span data-stu-id="2bb92-125">Organization edge device</span></span>](#source-2-organization-edge-device)
* [<span data-ttu-id="2bb92-126">Koncový bod služby v cloudu a přístup k seznamu řízení (ACL)</span><span class="sxs-lookup"><span data-stu-id="2bb92-126">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="2bb92-127">Skupiny zabezpečení sítě</span><span class="sxs-lookup"><span data-stu-id="2bb92-127">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="2bb92-128">Na základě Linux virtuálního počítače Azure</span><span class="sxs-lookup"><span data-stu-id="2bb92-128">Linux-based Azure VM</span></span>](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a><span data-ttu-id="2bb92-129">Zdroj 1: SSH klientského počítače</span><span class="sxs-lookup"><span data-stu-id="2bb92-129">Source 1: SSH client computer</span></span>
<span data-ttu-id="2bb92-130">Omezit počítače jako zdroj selhání, ověřte, že mohl zajistit připojení SSH pro jinou místní, počítač se systémem Linux.</span><span class="sxs-lookup"><span data-stu-id="2bb92-130">To eliminate your computer as the source of the failure, verify that it can make SSH connections to another on-premises, Linux-based computer.</span></span>

![Diagram, který označuje SSH klientské počítače komponenty](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

<span data-ttu-id="2bb92-132">Pokud připojení nezdaří, zkontrolujte následující problémy ve vašem počítači:</span><span class="sxs-lookup"><span data-stu-id="2bb92-132">If the connection fails, check for the following issues on your computer:</span></span>

* <span data-ttu-id="2bb92-133">Nastavení místní brány firewall, která blokuje příchozí nebo odchozí SSH provoz (port TCP 22)</span><span class="sxs-lookup"><span data-stu-id="2bb92-133">A local firewall setting that is blocking inbound or outbound SSH traffic (TCP 22)</span></span>
* <span data-ttu-id="2bb92-134">Místně nainstalován klientský software proxy serveru, který brání připojení SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-134">Locally installed client proxy software that is preventing SSH connections</span></span>
* <span data-ttu-id="2bb92-135">Místně nainstalovaný software, který brání připojení SSH monitorování sítě</span><span class="sxs-lookup"><span data-stu-id="2bb92-135">Locally installed network monitoring software that is preventing SSH connections</span></span>
* <span data-ttu-id="2bb92-136">Jiné typy zabezpečení softwaru, které monitorování provozu nebo povolí nebo zakáže určité typy přenosů</span><span class="sxs-lookup"><span data-stu-id="2bb92-136">Other types of security software that either monitor traffic or allow/disallow specific types of traffic</span></span>

<span data-ttu-id="2bb92-137">Pokud platí jedna z těchto podmínek, dočasně zakázat softwaru a zkuste připojení SSH do místního počítače a zjistěte důvod, proč připojení je blokován v počítači.</span><span class="sxs-lookup"><span data-stu-id="2bb92-137">If one of these conditions apply, temporarily disable the software and try an SSH connection to an on-premises computer to find out the reason the connection is being blocked on your computer.</span></span> <span data-ttu-id="2bb92-138">Pak se pokuste se na správce sítě a opravte nastavení softwaru, které povolí připojení SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-138">Then work with your network administrator to correct the software settings to allow SSH connections.</span></span>

<span data-ttu-id="2bb92-139">Pokud používáte ověřování pomocí certifikátu, ověřte zda máte tato oprávnění ke složce .ssh v domovském adresáři:</span><span class="sxs-lookup"><span data-stu-id="2bb92-139">If you are using certificate authentication, verify that you have these permissions to the .ssh folder in your home directory:</span></span>

* <span data-ttu-id="2bb92-140">Chmod – 700 ~/.ssh</span><span class="sxs-lookup"><span data-stu-id="2bb92-140">Chmod 700 ~/.ssh</span></span>
* <span data-ttu-id="2bb92-141">Chmod – 644 ~/.ssh/\*.pub</span><span class="sxs-lookup"><span data-stu-id="2bb92-141">Chmod 644 ~/.ssh/\*.pub</span></span>
* <span data-ttu-id="2bb92-142">Chmod – 600 ~/.ssh/id_rsa (nebo všechny soubory, které mají vaši privátní klíče uložené v nich)</span><span class="sxs-lookup"><span data-stu-id="2bb92-142">Chmod 600 ~/.ssh/id_rsa (or any other files that have your private keys stored in them)</span></span>
* <span data-ttu-id="2bb92-143">Chmod – 644 ~/.ssh/known_hosts (obsahuje hostitele, na které jste připojeni prostřednictvím SSH.)</span><span class="sxs-lookup"><span data-stu-id="2bb92-143">Chmod 644 ~/.ssh/known_hosts (contains hosts that you’ve connected to via SSH)</span></span>

## <a name="source-2-organization-edge-device"></a><span data-ttu-id="2bb92-144">Zdroj 2: Hraniční zařízení organizace</span><span class="sxs-lookup"><span data-stu-id="2bb92-144">Source 2: Organization edge device</span></span>
<span data-ttu-id="2bb92-145">Vaše organizace hraniční zařízení odstranit jako zdroj selhání, ověřte, že počítač, který je přímo připojený k Internetu může vytvořit připojení SSH k svého virtuálního počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="2bb92-145">To eliminate your organization edge device as the source of the failure, verify that a computer that's directly connected to the Internet can make SSH connections to your Azure VM.</span></span> <span data-ttu-id="2bb92-146">Pokud přistupujete k virtuálnímu počítači přes síť site-to-site VPN nebo připojení k Azure ExpressRoute, přejděte k [zdroj 4: skupin zabezpečení sítě](#nsg).</span><span class="sxs-lookup"><span data-stu-id="2bb92-146">If you are accessing the VM over a site-to-site VPN or an Azure ExpressRoute connection, skip to [Source 4: Network security groups](#nsg).</span></span>

![Diagram, který označuje organizace hraniční zařízení](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

<span data-ttu-id="2bb92-148">Pokud nemáte počítač, který je přímo připojené k Internetu, vytvořte nový virtuální počítač Azure v vlastní skupině prostředků nebo Cloudová služba a použít.</span><span class="sxs-lookup"><span data-stu-id="2bb92-148">If you don't have a computer that is directly connected to the Internet, create a new Azure VM in its own resource group or cloud service and use it.</span></span> <span data-ttu-id="2bb92-149">Další informace najdete v tématu [vytvoření virtuálního počítače s Linuxem v Azure](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="2bb92-149">For more information, see [Create a virtual machine running Linux in Azure](quick-create-cli.md).</span></span> <span data-ttu-id="2bb92-150">Odstraňte skupinu prostředků nebo virtuálního počítače a cloudové služby, když jste hotovi s testování.</span><span class="sxs-lookup"><span data-stu-id="2bb92-150">Delete the resource group or VM and cloud service when you're done with your testing.</span></span>

<span data-ttu-id="2bb92-151">Pokud vytvoříte připojení SSH s počítači, který je přímo připojený k Internetu, zkontrolujte vaši organizaci hraniční zařízení pro:</span><span class="sxs-lookup"><span data-stu-id="2bb92-151">If you can create an SSH connection with a computer that's directly connected to the Internet, check your organization edge device for:</span></span>

* <span data-ttu-id="2bb92-152">Vnitřní brána firewall, která blokuje provoz SSH s Internetem</span><span class="sxs-lookup"><span data-stu-id="2bb92-152">An internal firewall that's blocking SSH traffic with the Internet</span></span>
* <span data-ttu-id="2bb92-153">Proxy server, který brání připojení SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-153">A proxy server that's preventing SSH connections</span></span>
* <span data-ttu-id="2bb92-154">Zjišťování neoprávněných vniknutí nebo software spuštěný na zařízeních ve vaší hraniční síť, která brání připojení SSH monitorování sítě</span><span class="sxs-lookup"><span data-stu-id="2bb92-154">Intrusion detection or network monitoring software running on devices in your edge network that's preventing SSH connections</span></span>

<span data-ttu-id="2bb92-155">Práce se správcem vaší sítě a opravte nastavení vaší organizace hraniční zařízení umožňující SSH přenos přes Internet.</span><span class="sxs-lookup"><span data-stu-id="2bb92-155">Work with your network administrator to correct the settings of your organization edge devices to allow SSH traffic with the Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="2bb92-156">Zdroj 3: Koncový bod služby Cloud a seznamu ACL</span><span class="sxs-lookup"><span data-stu-id="2bb92-156">Source 3: Cloud service endpoint and ACL</span></span>
> [!NOTE]
> <span data-ttu-id="2bb92-157">Tento zdroj se vztahuje pouze na virtuální počítače, které byly vytvořeny pomocí modelu nasazení classic.</span><span class="sxs-lookup"><span data-stu-id="2bb92-157">This source applies only to VMs that were created by using the classic deployment model.</span></span> <span data-ttu-id="2bb92-158">Pro virtuální počítače, které byly vytvořeny pomocí Resource Manageru, přejděte k [zdroje 4: skupin zabezpečení sítě](#nsg).</span><span class="sxs-lookup"><span data-stu-id="2bb92-158">For VMs that were created by using Resource Manager, skip to [source 4: Network security groups](#nsg).</span></span>

<span data-ttu-id="2bb92-159">Chcete-li vyloučit jako zdroj selhání koncového bodu služby cloud a seznamu ACL, ověřte, že další virtuální počítač Azure ve stejné virtuální síti může vytvořit připojení SSH k virtuálnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="2bb92-159">To eliminate the cloud service endpoint and ACL as the source of the failure, verify that another Azure VM in the same virtual network can make SSH connections to your VM.</span></span>

![Diagram, který označuje koncového bodu služby cloud a seznamu ACL](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

<span data-ttu-id="2bb92-161">Pokud nemáte jiného virtuálního počítače ve stejné virtuální síti, můžete snadno vytvořit jednu.</span><span class="sxs-lookup"><span data-stu-id="2bb92-161">If you don't have another VM in the same virtual network, you can easily create one.</span></span> <span data-ttu-id="2bb92-162">Další informace najdete v tématu [vytvoření virtuálního počítače s Linuxem v Azure pomocí rozhraní příkazového řádku](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="2bb92-162">For more information, see [Create a Linux VM on Azure using the CLI](quick-create-cli.md).</span></span> <span data-ttu-id="2bb92-163">Odstraňte další virtuální počítač, když jste hotovi s testování.</span><span class="sxs-lookup"><span data-stu-id="2bb92-163">Delete the extra VM when you are done with your testing.</span></span>

<span data-ttu-id="2bb92-164">Pokud vytvoříte připojení SSH s virtuálního počítače ve stejné virtuální síti, zkontrolujte následující oblasti:</span><span class="sxs-lookup"><span data-stu-id="2bb92-164">If you can create an SSH connection with a VM in the same virtual network, check the following areas:</span></span>

* <span data-ttu-id="2bb92-165">**Konfigurace koncového bodu pro komunikaci SSH na cílovém virtuálním počítači.**</span><span class="sxs-lookup"><span data-stu-id="2bb92-165">**The endpoint configuration for SSH traffic on the target VM.**</span></span> <span data-ttu-id="2bb92-166">Port TCP, na kterém naslouchá službě SSH na virtuální počítač by měl odpovídat privátní port TCP koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="2bb92-166">The private TCP port of the endpoint should match the TCP port on which the SSH service on the VM is listening.</span></span> <span data-ttu-id="2bb92-167">(Výchozí port je 22.)</span><span class="sxs-lookup"><span data-stu-id="2bb92-167">(The default port is 22).</span></span> <span data-ttu-id="2bb92-168">Zkontrolujte číslo portu SSH TCP na portálu Azure tak, že vyberete **virtuální počítače** > *název virtuálního počítače* > **nastavení**  >   **Koncové body**.</span><span class="sxs-lookup"><span data-stu-id="2bb92-168">Verify the SSH TCP port number in the Azure portal by selecting **Virtual machines** > *VM name* > **Settings** > **Endpoints**.</span></span>
* <span data-ttu-id="2bb92-169">**Seznam ACL pro koncový bod SSH provoz na cílový virtuální počítač.**</span><span class="sxs-lookup"><span data-stu-id="2bb92-169">**The ACL for the SSH traffic endpoint on the target virtual machine.**</span></span> <span data-ttu-id="2bb92-170">Seznam ACL umožňuje určit povolené nebo zakázané příchozí přenosy z Internetu, na základě jeho zdrojové IP adresy.</span><span class="sxs-lookup"><span data-stu-id="2bb92-170">An ACL enables you to specify allowed or denied incoming traffic from the Internet, based on its source IP address.</span></span> <span data-ttu-id="2bb92-171">Nesprávně nakonfigurované seznamy ACL můžete zabránit příchozí provoz SSH ke koncovému bodu.</span><span class="sxs-lookup"><span data-stu-id="2bb92-171">Misconfigured ACLs can prevent incoming SSH traffic to the endpoint.</span></span> <span data-ttu-id="2bb92-172">Zkontrolujte vaše seznamy ACL zajistit, aby příchozí provoz z veřejné IP adresy vašeho proxy serveru nebo jiné hraniční server je povolen.</span><span class="sxs-lookup"><span data-stu-id="2bb92-172">Check your ACLs to ensure that incoming traffic from the public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="2bb92-173">Další informace najdete v tématu [o přístup k síti řízení seznamy ACL](../../virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="2bb92-173">For more information, see [About network access control lists (ACLs)](../../virtual-network/virtual-networks-acl.md).</span></span>

<span data-ttu-id="2bb92-174">Chcete odstranit koncový bod jako zdroj problému, odeberte aktuální koncový bod, vytvořte jiný koncový bod a zadejte název SSH (port TCP 22 pro veřejné a privátní port číslo).</span><span class="sxs-lookup"><span data-stu-id="2bb92-174">To eliminate the endpoint as a source of the problem, remove the current endpoint, create another endpoint, and specify the SSH name (TCP port 22 for the public and private port number).</span></span> <span data-ttu-id="2bb92-175">Další informace najdete v tématu [nastavení koncových bodů na virtuálním počítači v Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="2bb92-175">For more information, see [Set up endpoints on a virtual machine in Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<a id="nsg"></a>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="2bb92-176">Zdroje 4: Skupiny zabezpečení sítě</span><span class="sxs-lookup"><span data-stu-id="2bb92-176">Source 4: Network security groups</span></span>
<span data-ttu-id="2bb92-177">Skupiny zabezpečení sítě umožňují mít členitější řízení toho povolené příchozí a odchozí přenosy.</span><span class="sxs-lookup"><span data-stu-id="2bb92-177">Network security groups enable you to have more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="2bb92-178">Můžete vytvořit pravidla, která span podsítě a cloudových služeb v virtuální sítě Azure.</span><span class="sxs-lookup"><span data-stu-id="2bb92-178">You can create rules that span subnets and cloud services in an Azure virtual network.</span></span> <span data-ttu-id="2bb92-179">Zkontrolujte vaše pravidel skupiny zabezpečení sítě pro zajistit, že je povolené SSH provoz do a z Internetu.</span><span class="sxs-lookup"><span data-stu-id="2bb92-179">Check your network security group rules to ensure that SSH traffic to and from the Internet is allowed.</span></span>
<span data-ttu-id="2bb92-180">Další informace najdete v tématu [o skupinách zabezpečení sítě](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="2bb92-180">For more information, see [About network security groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

<span data-ttu-id="2bb92-181">Můžete taky ověřit IP pro ověření konfigurace NSG.</span><span class="sxs-lookup"><span data-stu-id="2bb92-181">You can also use IP Verify to validate the NSG configuration.</span></span> <span data-ttu-id="2bb92-182">Další informace najdete v tématu [síť Azure Přehled monitorování](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="2bb92-182">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="source-5-linux-based-azure-virtual-machine"></a><span data-ttu-id="2bb92-183">Zdroj 5: Systémem Linux virtuálního počítače Azure</span><span class="sxs-lookup"><span data-stu-id="2bb92-183">Source 5: Linux-based Azure virtual machine</span></span>
<span data-ttu-id="2bb92-184">Poslední zdroj možné problémy je virtuální počítač Azure, sám sebe.</span><span class="sxs-lookup"><span data-stu-id="2bb92-184">The last source of possible problems is the Azure virtual machine itself.</span></span>

![Diagram, který označuje systémem Linux virtuálního počítače Azure](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

<span data-ttu-id="2bb92-186">Pokud jste tak ještě neučinili, postupujte podle pokynů [resetovat heslo nebo SSH pro virtuální počítače se systémem Linux](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="2bb92-186">If you haven't done so already, follow the instructions [to reset a password or SSH for Linux-based virtual machines](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="2bb92-187">Zkuste se znovu připojit z vašeho počítače.</span><span class="sxs-lookup"><span data-stu-id="2bb92-187">Try connecting from your computer again.</span></span> <span data-ttu-id="2bb92-188">Pokud stále selže, toto jsou některé z možných problémů:</span><span class="sxs-lookup"><span data-stu-id="2bb92-188">If it still fails, the following are some of the possible issues:</span></span>

* <span data-ttu-id="2bb92-189">V cílovém virtuálním počítači není spuštěna služba SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-189">The SSH service is not running on the target virtual machine.</span></span>
* <span data-ttu-id="2bb92-190">Služba SSH nenaslouchá na portu TCP 22.</span><span class="sxs-lookup"><span data-stu-id="2bb92-190">The SSH service is not listening on TCP port 22.</span></span> <span data-ttu-id="2bb92-191">K testování, nainstalujte klient služby telnet v místním počítači a spusťte "telnet *cloudServiceName*. cloudapp.net 22".</span><span class="sxs-lookup"><span data-stu-id="2bb92-191">To test, install a telnet client on your local computer and run "telnet *cloudServiceName*.cloudapp.net 22".</span></span> <span data-ttu-id="2bb92-192">Tento krok určuje, pokud je virtuální počítač umožňuje příchozí a odchozí komunikace na koncový bod SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-192">This step determines if the virtual machine allows inbound and outbound communication to the SSH endpoint.</span></span>
* <span data-ttu-id="2bb92-193">V místní bráně firewall na cílový virtuální počítač obsahuje pravidla, která brání příchozích a odchozích přenosů SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-193">The local firewall on the target virtual machine has rules that are preventing inbound or outbound SSH traffic.</span></span>
* <span data-ttu-id="2bb92-194">Zjišťování neoprávněných vniknutí nebo software, který běží na virtuálním počítači Azure monitorování sítě brání připojení SSH.</span><span class="sxs-lookup"><span data-stu-id="2bb92-194">Intrusion detection or network monitoring software that's running on the Azure virtual machine is preventing SSH connections.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="2bb92-195">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="2bb92-195">Additional resources</span></span>
<span data-ttu-id="2bb92-196">Další informace o odstraňování potíží s přístup k aplikaci najdete v tématu [řešení potíží s přístupem k aplikaci spuštěné na virtuálním počítači Azure](troubleshoot-app-connection.md)</span><span class="sxs-lookup"><span data-stu-id="2bb92-196">For more information about troubleshooting application access, see [Troubleshoot access to an application running on an Azure virtual machine](troubleshoot-app-connection.md)</span></span>
