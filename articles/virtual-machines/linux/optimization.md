---
title: "Optimalizace virtuálním počítačům s Linuxem v Azure | Microsoft Docs"
description: "Další tipy optimalizace a ujistěte se, že jste nastavili virtuálním počítačům s Linuxem pro optimální výkon na Azure"
keywords: "virtuální počítač Linux, virtuální počítač linux, ubuntu virtuálního počítače"
services: virtual-machines-linux
documentationcenter: 
author: rickstercdn
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 8baa30c8-d40e-41ac-93d0-74e96fe18d4c
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: rclaus
ms.openlocfilehash: eb79d574fd4dddfb986660cc338bc8748f2082c2
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="optimize-your-linux-vm-on-azure"></a><span data-ttu-id="e759d-104">Optimalizace virtuálního počítače s Linuxem v Azure</span><span class="sxs-lookup"><span data-stu-id="e759d-104">Optimize your Linux VM on Azure</span></span>
<span data-ttu-id="e759d-105">Vytvoření virtuálního počítače (VM) Linux je snadné provést z příkazového řádku nebo z portálu.</span><span class="sxs-lookup"><span data-stu-id="e759d-105">Creating a Linux virtual machine (VM) is easy to do from the command line or from the portal.</span></span> <span data-ttu-id="e759d-106">V tomto kurzu se dozvíte, jak zajistit jste ho nastavili za účelem optimalizace jeho výkon na platformě Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e759d-106">This tutorial shows you how to ensure you have set it up to optimize its performance on the Microsoft Azure platform.</span></span> <span data-ttu-id="e759d-107">Toto téma používá virtuálního počítače s Ubuntu Server, ale můžete vytvořit také pomocí virtuálních počítačů Linux [vlastní Image jako šablona](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e759d-107">This topic uses an Ubuntu Server VM, but you can also create Linux virtual machine using [your own images as templates](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="e759d-108">Požadavky</span><span class="sxs-lookup"><span data-stu-id="e759d-108">Prerequisites</span></span>
<span data-ttu-id="e759d-109">Toto téma předpokládá, že již máte funkční předplatné Azure ([bezplatné zkušební verze registrace](https://azure.microsoft.com/pricing/free-trial/)) a již zřídit virtuální počítač do vašeho předplatného Azure.</span><span class="sxs-lookup"><span data-stu-id="e759d-109">This topic assumes you already have a working Azure subscription ([free trial signup](https://azure.microsoft.com/pricing/free-trial/)) and have already provisioned a VM into your Azure subscription.</span></span> <span data-ttu-id="e759d-110">Ujistěte se, že máte nejnovější [Azure CLI 2.0](/cli/azure/install-az-cli2) nainstalován a přihlášení k předplatnému Azure s [az přihlášení](/cli/azure/#login) před [vytvoření virtuálního počítače](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e759d-110">Make sure that you have the latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in to your Azure subscription with [az login](/cli/azure/#login) before you [create a VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-os-disk"></a><span data-ttu-id="e759d-111">Azure Disk operačního systému</span><span class="sxs-lookup"><span data-stu-id="e759d-111">Azure OS Disk</span></span>
<span data-ttu-id="e759d-112">Po vytvoření virtuálního počítače s Linuxem v Azure, má dva disky, které jsou s ním spojená.</span><span class="sxs-lookup"><span data-stu-id="e759d-112">Once you create a Linux VM in Azure, it has two disks associated with it.</span></span> <span data-ttu-id="e759d-113">**/ dev/sda** je disk operačního systému, **/dev/sdb** je dočasným diskovým.</span><span class="sxs-lookup"><span data-stu-id="e759d-113">**/dev/sda** is your OS disk, **/dev/sdb** is your temporary disk.</span></span>  <span data-ttu-id="e759d-114">Nepoužívejte hlavní disk operačního systému (**/dev/sda**) pro všechno, co s výjimkou operačního systému, protože je optimalizovaná pro rychlé spuštění virtuálního počítače a neposkytuje dobrý výkon pro zatížení.</span><span class="sxs-lookup"><span data-stu-id="e759d-114">Do not use the main OS disk (**/dev/sda**) for anything except the operating system as it is optimized for fast VM boot time and does not provide good performance for your workloads.</span></span> <span data-ttu-id="e759d-115">Chcete připojit k virtuálnímu počítači získat trvalé jeden nebo více disků a optimalizované úložiště pro vaše data.</span><span class="sxs-lookup"><span data-stu-id="e759d-115">You want to attach one or more disks to your VM to get persistent and optimized storage for your data.</span></span> 

## <a name="adding-disks-for-size-and-performance-targets"></a><span data-ttu-id="e759d-116">Přidání disků pro velikost a cílech výkonnosti</span><span class="sxs-lookup"><span data-stu-id="e759d-116">Adding Disks for Size and Performance targets</span></span>
<span data-ttu-id="e759d-117">Podle velikosti virtuálního počítače, můžete připojit až 16 další disky na A-Series, 32 disky na D-Series a 64 disků na řadu G počítače – velikost každý až 1 TB.</span><span class="sxs-lookup"><span data-stu-id="e759d-117">Based on the VM size, you can attach up to 16 additional disks on an A-Series, 32 disks on a D-Series and 64 disks on a G-Series machine - each up to 1 TB in size.</span></span> <span data-ttu-id="e759d-118">Podle potřeby na místa a požadavky na IOps přidáte další disky.</span><span class="sxs-lookup"><span data-stu-id="e759d-118">You add extra disks as needed per your space and IOps requirements.</span></span> <span data-ttu-id="e759d-119">Každý disk má výkonu cílem 500 IOps pro standardní úložiště a až 5000 IOps na disku pro Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="e759d-119">Each disk has a performance target of 500 IOps for Standard Storage and up to 5000 IOps per disk for Premium Storage.</span></span>  <span data-ttu-id="e759d-120">Další informace o discích Premium Storage najdete v tématu [úložiště Premium: vysoce výkonné úložiště pro virtuální počítače Azure](../../storage/common/storage-premium-storage.md)</span><span class="sxs-lookup"><span data-stu-id="e759d-120">For more information about Premium Storage disks, see [Premium Storage: High-Performance Storage for Azure VMs](../../storage/common/storage-premium-storage.md)</span></span>

<span data-ttu-id="e759d-121">K dosažení nejvyšší IOps na discích úložiště Premium, kde jejich mezipaměti nastavení buď **jen pro čtení** nebo **žádné**, je nutné zakázat **překážek** při připojování systém souborů v systému Linux.</span><span class="sxs-lookup"><span data-stu-id="e759d-121">To achieve the highest IOps on Premium Storage disks where their cache settings have been set to either **ReadOnly** or **None**, you must disable **barriers** while mounting the file system in Linux.</span></span> <span data-ttu-id="e759d-122">Protože jsou zápisy na disky úložiště Premium zálohovaný trvanlivý pro tato nastavení mezipaměti nepotřebujete překážek.</span><span class="sxs-lookup"><span data-stu-id="e759d-122">You do not need barriers because the writes to Premium Storage backed disks are durable for these cache settings.</span></span>

* <span data-ttu-id="e759d-123">Pokud používáte **reiserFS**, zakažte překážek pomocí možnosti připojení `barrier=none` (pro povolení překážek, použijte `barrier=flush`)</span><span class="sxs-lookup"><span data-stu-id="e759d-123">If you use **reiserFS**, disable barriers using the mount option `barrier=none` (For enabling barriers, use `barrier=flush`)</span></span>
* <span data-ttu-id="e759d-124">Pokud používáte **ext3/ext4**, zakažte překážek pomocí možnosti připojení `barrier=0` (pro povolení překážek, použijte `barrier=1`)</span><span class="sxs-lookup"><span data-stu-id="e759d-124">If you use **ext3/ext4**, disable barriers using the mount option `barrier=0` (For enabling barriers, use `barrier=1`)</span></span>
* <span data-ttu-id="e759d-125">Pokud používáte **XFS**, zakažte překážek pomocí možnosti připojení `nobarrier` (pro povolení překážek, použijte možnost `barrier`)</span><span class="sxs-lookup"><span data-stu-id="e759d-125">If you use **XFS**, disable barriers using the mount option `nobarrier` (For enabling barriers, use the option `barrier`)</span></span>

## <a name="unmanaged-storage-account-considerations"></a><span data-ttu-id="e759d-126">Důležité informace o účtu nespravovaného úložiště</span><span class="sxs-lookup"><span data-stu-id="e759d-126">Unmanaged storage account considerations</span></span>
<span data-ttu-id="e759d-127">Výchozí akcí při vytváření virtuálního počítače pomocí Azure CLI 2.0, je použít Azure spravované disky.</span><span class="sxs-lookup"><span data-stu-id="e759d-127">The default action when you create a VM with the Azure CLI 2.0 is to use Azure Managed Disks.</span></span>  <span data-ttu-id="e759d-128">Tyto disky jsou zpracovávány platformy Azure a nevyžadují, aby všechny přípravné nebo umístění pro uložení.</span><span class="sxs-lookup"><span data-stu-id="e759d-128">These disks are handled by the Azure platform and do not require any preparation or location to store them.</span></span>  <span data-ttu-id="e759d-129">Nespravované disky se vyžaduje účet úložiště a mají některé další výkonem.</span><span class="sxs-lookup"><span data-stu-id="e759d-129">Unmanaged disks require a storage account and have some additional performance considerations.</span></span>  <span data-ttu-id="e759d-130">Další informace o spravovaných discích najdete v tématu [Přehled služby Azure Managed Disks](../windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e759d-130">For more information about managed disks, see [Azure Managed Disks overview](../windows/managed-disks-overview.md).</span></span>  <span data-ttu-id="e759d-131">V následující části jsou nastíněné aspekty výkonu, jenom když použijete nespravované disky.</span><span class="sxs-lookup"><span data-stu-id="e759d-131">The following section outlines performance considerations only when you use unmanaged disks.</span></span>  <span data-ttu-id="e759d-132">Znovu, výchozí a doporučený úložiště řešením je použití spravovaných disky.</span><span class="sxs-lookup"><span data-stu-id="e759d-132">Again, the default and recommended storage solution is to use managed disks.</span></span>

<span data-ttu-id="e759d-133">Pokud vytvoříte virtuální počítač s nespravované disky, ujistěte se, připojit disky z účty úložiště, které se nacházejí ve stejné oblasti jako virtuální počítač k zajištění těsné blízkosti a minimalizaci latence sítě.</span><span class="sxs-lookup"><span data-stu-id="e759d-133">If you create a VM with unmanaged disks, make sure that you attach disks from storage accounts residing in the same region as your VM to ensure close proximity and minimize network latency.</span></span>  <span data-ttu-id="e759d-134">Každý účet standardního úložiště má maximálně 20 tisíc IOps a kapacitou velikost 500 TB.</span><span class="sxs-lookup"><span data-stu-id="e759d-134">Each Standard storage account has a maximum of 20k IOps and a 500 TB size capacity.</span></span>  <span data-ttu-id="e759d-135">Tento limit funguje na přibližně 40 vytíženou disky, včetně disku operačního systému a všech datových disků, které vytvoříte.</span><span class="sxs-lookup"><span data-stu-id="e759d-135">This  limit works out to approximately 40 heavily used disks including both the OS disk and any data disks you create.</span></span> <span data-ttu-id="e759d-136">Pro účty služby Premium Storage neexistuje žádné omezení maximální IOps, ale existuje omezení velikosti 32 TB.</span><span class="sxs-lookup"><span data-stu-id="e759d-136">For Premium Storage accounts, there is no Maximum IOps limit but there is a 32 TB size limit.</span></span> 

<span data-ttu-id="e759d-137">Při práci s vysoké zatížení IOps a vybrali standardní úložiště pro disky, možná budete muset rozdělit disky do více účtů úložiště a ujistěte se, že nebyly dosáhl limit IOps 20 000 pro účty úložiště Standard Storage.</span><span class="sxs-lookup"><span data-stu-id="e759d-137">When dealing with high IOps workloads and you have chosen Standard Storage for your disks, you might need to split the disks across multiple storage accounts to make sure you have not hit the 20,000 IOps limit for Standard Storage accounts.</span></span> <span data-ttu-id="e759d-138">Virtuální počítač může obsahovat kombinaci disků z mezi typy účtů úložiště zajistit optimální konfiguraci a jiným účtům úložiště.</span><span class="sxs-lookup"><span data-stu-id="e759d-138">Your VM can contain a mix of disks from across different storage accounts and storage account types to achieve your optimal configuration.</span></span>
 

## <a name="your-vm-temporary-drive"></a><span data-ttu-id="e759d-139">Virtuální počítač dočasné jednotce</span><span class="sxs-lookup"><span data-stu-id="e759d-139">Your VM Temporary drive</span></span>
<span data-ttu-id="e759d-140">Ve výchozím nastavení při vytváření virtuálního počítače, Azure poskytuje disk s operačním systémem (**/dev/sda**) a dočasným diskovým (**/dev/sdb**).</span><span class="sxs-lookup"><span data-stu-id="e759d-140">By default when you create a VM, Azure provides you with an OS disk (**/dev/sda**) and a temporary disk (**/dev/sdb**).</span></span>  <span data-ttu-id="e759d-141">Všechny další disky přidat zobrazit si jako **/dev/sdc**, **/dev/sdd**, **/dev/sde** a tak dále.</span><span class="sxs-lookup"><span data-stu-id="e759d-141">All additional disks you add show up as **/dev/sdc**, **/dev/sdd**, **/dev/sde** and so on.</span></span> <span data-ttu-id="e759d-142">Všechna data na dočasné disku (**/dev/sdb**) není odolné a může dojít ke ztrátě, pokud konkrétní události, například změna velikosti virtuálních počítačů, opakované nasazení, nebo údržby vynutí restartování virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="e759d-142">All data on your temporary disk (**/dev/sdb**) is not durable, and can be lost if specific events like VM Resizing, redeployment, or maintenance forces a restart of your VM.</span></span>  <span data-ttu-id="e759d-143">Velikost a typ dočasné disku souvisí s velikost virtuálního počítače, které jste zvolili v době nasazení.</span><span class="sxs-lookup"><span data-stu-id="e759d-143">The size and type of your temporary disk is related to the VM size you chose at deployment time.</span></span> <span data-ttu-id="e759d-144">Všechny premium velikost dočasné jednotce jsou zajišťované místní SSD pro další výkonu až 48 kb virtuálních počítačů (řady DS, G a DS_V2) IOps.</span><span class="sxs-lookup"><span data-stu-id="e759d-144">All of the premium size VMs (DS, G, and DS_V2 series) the temporary drive are backed by a local SSD for additional performance of up to 48k IOps.</span></span> 

## <a name="linux-swap-file"></a><span data-ttu-id="e759d-145">Linux odkládací soubor</span><span class="sxs-lookup"><span data-stu-id="e759d-145">Linux Swap File</span></span>
<span data-ttu-id="e759d-146">Pokud virtuální počítač Azure z image Ubuntu nebo CoreOS CustomData můžete použít k odeslání do cloudu init cloudu config.</span><span class="sxs-lookup"><span data-stu-id="e759d-146">If your Azure VM is from an Ubuntu or CoreOS image, then you can use CustomData to send a cloud-config to cloud-init.</span></span> <span data-ttu-id="e759d-147">Pokud jste [nahrát vlastní image Linux](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) init cloudu, který používá, je také nakonfigurovat oddíly odkládacího souboru v cloudu init.</span><span class="sxs-lookup"><span data-stu-id="e759d-147">If you [uploaded a custom Linux image](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that uses cloud-init, you also configure swap partitions using cloud-init.</span></span>

<span data-ttu-id="e759d-148">Ubuntu cloudu Image musíte použít cloudové init ke konfiguraci oddílu odkládacího souboru.</span><span class="sxs-lookup"><span data-stu-id="e759d-148">On Ubuntu Cloud Images, you must use cloud-init to configure the swap partition.</span></span> <span data-ttu-id="e759d-149">Další informace najdete v tématu [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span><span class="sxs-lookup"><span data-stu-id="e759d-149">For more information, see [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span></span>

<span data-ttu-id="e759d-150">Pro Image bez podpory cloudu init být Image virtuálních počítačů nasadit v Azure Marketplace Agent virtuálních počítačů Linux integrované s operačním systémem.</span><span class="sxs-lookup"><span data-stu-id="e759d-150">For images without cloud-init support, VM images deployed from the Azure Marketplace have a VM Linux Agent integrated with the OS.</span></span> <span data-ttu-id="e759d-151">Tento agent umožňuje virtuálnímu počítači komunikovat s různými službami Azure.</span><span class="sxs-lookup"><span data-stu-id="e759d-151">This agent allows the VM to interact with various Azure services.</span></span> <span data-ttu-id="e759d-152">Za předpokladu, že jste nasadili standardní bitové kopie z Azure Marketplace, museli byste ji správně nakonfigurovat Linux odkládací soubor následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="e759d-152">Assuming you have deployed a standard image from the Azure Marketplace, you would need to do the following to correctly configure your Linux swap file settings:</span></span>

<span data-ttu-id="e759d-153">Vyhledejte a upravit dvě položky v **/etc/waagent.conf** souboru.</span><span class="sxs-lookup"><span data-stu-id="e759d-153">Locate and modify two entries in the **/etc/waagent.conf** file.</span></span> <span data-ttu-id="e759d-154">Tím i určovat existenci vyhrazené odkládací soubor a velikost odkládacího souboru.</span><span class="sxs-lookup"><span data-stu-id="e759d-154">They control the existence of a dedicated swap file and size of the swap file.</span></span> <span data-ttu-id="e759d-155">Hledáte upravit parametry jsou `ResourceDisk.EnableSwap=N` a`ResourceDisk.SwapSizeMB=0`</span><span class="sxs-lookup"><span data-stu-id="e759d-155">The parameters you are looking to modify are `ResourceDisk.EnableSwap=N` and `ResourceDisk.SwapSizeMB=0`</span></span> 

<span data-ttu-id="e759d-156">Změňte parametry následující nastavení:</span><span class="sxs-lookup"><span data-stu-id="e759d-156">Change the parameters to the following settings:</span></span>

* <span data-ttu-id="e759d-157">ResourceDisk.EnableSwap=Y</span><span class="sxs-lookup"><span data-stu-id="e759d-157">ResourceDisk.EnableSwap=Y</span></span>
* <span data-ttu-id="e759d-158">ResourceDisk.SwapSizeMB={size v MB pro podle svých potřeb}</span><span class="sxs-lookup"><span data-stu-id="e759d-158">ResourceDisk.SwapSizeMB={size in MB to meet your needs}</span></span> 

<span data-ttu-id="e759d-159">Po provedení změn, budete muset restartovat příkaz waagent nebo restartujte virtuálním počítačům s Linuxem tak, aby odrážela tyto změny.</span><span class="sxs-lookup"><span data-stu-id="e759d-159">Once you have made the change, you need to restart the waagent or restart your Linux VM to reflect those changes.</span></span>  <span data-ttu-id="e759d-160">Víte, byly provedeny změny a odkládací soubor byl vytvořen při použití `free` příkazu zobrazte volného místa.</span><span class="sxs-lookup"><span data-stu-id="e759d-160">You know the changes have been implemented and a swap file has been created when you use the `free` command to view free space.</span></span> <span data-ttu-id="e759d-161">V následujícím příkladu má odkládací soubor 512MB vytvořeny v důsledku změny **waagent.conf** souboru:</span><span class="sxs-lookup"><span data-stu-id="e759d-161">The following example has a 512MB swap file created as a result of modifying the **waagent.conf** file:</span></span>

```bash
azuseruser@myVM:~$ free
            total       used       free     shared    buffers     cached
Mem:       3525156     804168    2720988        408       8428     633192
-/+ buffers/cache:     162548    3362608
Swap:       524284          0     524284
```

## <a name="io-scheduling-algorithm-for-premium-storage"></a><span data-ttu-id="e759d-162">Plánování algoritmus vstupně-výstupních operací pro Storage úrovně Premium</span><span class="sxs-lookup"><span data-stu-id="e759d-162">I/O scheduling algorithm for Premium Storage</span></span>
<span data-ttu-id="e759d-163">Pomocí 2.6.18 Linux jádra, výchozí vstupně-výstupních operací plánování algoritmus byl změněn z konečný termín na CFQ (algoritmus úplně správného řízení front).</span><span class="sxs-lookup"><span data-stu-id="e759d-163">With the 2.6.18 Linux kernel, the default I/O scheduling algorithm was changed from Deadline to CFQ (Completely fair queuing algorithm).</span></span> <span data-ttu-id="e759d-164">Pro vzory vstupů/výstupů náhodný přístup je nepatrné rozdíl ve výkonu rozdíly mezi CFQ a konečným termínem.</span><span class="sxs-lookup"><span data-stu-id="e759d-164">For random access I/O patterns, there is negligible difference in performance differences between CFQ and Deadline.</span></span>  <span data-ttu-id="e759d-165">Pro založená na SSD disky, kde je převážně sekvenčních vstupně-výstupních operací vzoru disku, přepnutím zpět algoritmus nedojde k žádné akci nebo termín lepšího výkonu můžete dosáhnout vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="e759d-165">For SSD-based disks where the disk I/O pattern is predominantly sequential, switching back to the NOOP or Deadline algorithm can achieve better I/O performance.</span></span>

### <a name="view-the-current-io-scheduler"></a><span data-ttu-id="e759d-166">Zobrazení aktuálního plánovače vstupně-výstupních operací</span><span class="sxs-lookup"><span data-stu-id="e759d-166">View the current I/O scheduler</span></span>
<span data-ttu-id="e759d-167">Použijte následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="e759d-167">Use the following command:</span></span>  

```bash
cat /sys/block/sda/queue/scheduler
```

<span data-ttu-id="e759d-168">Zobrazí se následující výstup, který označuje aktuálního plánovače.</span><span class="sxs-lookup"><span data-stu-id="e759d-168">You see following output, which indicates the current scheduler.</span></span>  

```bash
noop [deadline] cfq
```

### <a name="change-the-current-device-devsda-of-io-scheduling-algorithm"></a><span data-ttu-id="e759d-169">Změňte aktuální zařízení (/ dev/sda) plánování algoritmus vstupně-výstupních operací</span><span class="sxs-lookup"><span data-stu-id="e759d-169">Change the current device (/dev/sda) of I/O scheduling algorithm</span></span>
<span data-ttu-id="e759d-170">Použijte následující příkazy:</span><span class="sxs-lookup"><span data-stu-id="e759d-170">Use the following commands:</span></span>  

```bash
azureuser@myVM:~$ sudo su -
root@myVM:~# echo "noop" >/sys/block/sda/queue/scheduler
root@myVM:~# sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"/g' /etc/default/grub
root@myVM:~# update-grub
```

> [!NOTE]
> <span data-ttu-id="e759d-171">Toto nastavení pro použití **/dev/sda** samostatně není užitečné.</span><span class="sxs-lookup"><span data-stu-id="e759d-171">Applying this setting for **/dev/sda** alone is not useful.</span></span> <span data-ttu-id="e759d-172">Nastavte u všech datových disků, kde sekvenčních vstupně-výstupních operací dominuje vzoru vstupně-výstupních operací.</span><span class="sxs-lookup"><span data-stu-id="e759d-172">Set on all data disks where sequential I/O dominates the I/O pattern.</span></span>  

<span data-ttu-id="e759d-173">Byste měli vidět následující výstup, což indikuje, že **grub.cfg** byla znovu sestavena úspěšně a že se aktualizovalo výchozí Plánovač a nedojde k žádné akci.</span><span class="sxs-lookup"><span data-stu-id="e759d-173">You should see the following output, indicating that **grub.cfg** has been rebuilt successfully and that the default scheduler has been updated to NOOP.</span></span>  

```bash
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.13.0-34-generic
Found initrd image: /boot/initrd.img-3.13.0-34-generic
Found linux image: /boot/vmlinuz-3.13.0-32-generic
Found initrd image: /boot/initrd.img-3.13.0-32-generic
Found memtest86+ image: /memtest86+.elf
Found memtest86+ image: /memtest86+.bin
done
```

<span data-ttu-id="e759d-174">Pro řadu distribuční Redhat stačí pouze následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="e759d-174">For the Redhat distribution family, you only need the following command:</span></span>   

```bash
echo 'echo noop >/sys/block/sda/queue/scheduler' >> /etc/rc.local
```

## <a name="using-software-raid-to-achieve-higher-iops"></a><span data-ttu-id="e759d-175">Pomocí softwaru diskového pole RAID k dosažení vyšší I / Ops</span><span class="sxs-lookup"><span data-stu-id="e759d-175">Using Software RAID to achieve higher I/Ops</span></span>
<span data-ttu-id="e759d-176">Pokud vaše úlohy vyžadují více procesorů, než může poskytnout jeden disk, budete muset použít konfiguraci RAID softwaru několik disků.</span><span class="sxs-lookup"><span data-stu-id="e759d-176">If your workloads require more IOps than a single disk can provide, you need to use a software RAID configuration of multiple disks.</span></span> <span data-ttu-id="e759d-177">Protože Azure již provádí odolnosti disku ve vrstvě místní infrastruktury, můžete dosáhnout nejvyšší úroveň výkonu z proložení konfigurace RAID-0.</span><span class="sxs-lookup"><span data-stu-id="e759d-177">Because Azure already performs disk resiliency at the local fabric layer, you achieve the highest level of performance from a RAID-0 striping configuration.</span></span>  <span data-ttu-id="e759d-178">Zřídit a vytvořit disků v prostředí Azure a připojte je k virtuálním počítačům s Linuxem před rozdělení do oddílů, formátování a připojení jednotky.</span><span class="sxs-lookup"><span data-stu-id="e759d-178">Provision and create disks in the Azure environment and attach them to your Linux VM before partitioning, formatting and mounting the drives.</span></span>  <span data-ttu-id="e759d-179">Další informace o konfiguraci instalace softwaru diskového pole RAID na virtuálním počítačům s Linuxem v azure najdete v  **[konfigurace RAID softwaru v systému Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**  dokumentu.</span><span class="sxs-lookup"><span data-stu-id="e759d-179">More details on configuring a software RAID setup on your Linux VM in azure can be found in the **[Configuring Software RAID on Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)** document.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e759d-180">Další kroky</span><span class="sxs-lookup"><span data-stu-id="e759d-180">Next Steps</span></span>
<span data-ttu-id="e759d-181">Pamatujte si, jak se všechny diskuse optimalizace, potřebujete provést testy před a po každé změně k měření dopad, který má změnu.</span><span class="sxs-lookup"><span data-stu-id="e759d-181">Remember, as with all optimization discussions, you need to perform tests before and after each change to measure the impact the change has.</span></span>  <span data-ttu-id="e759d-182">Optimalizace je krok za krokem proces, který má odlišné výsledky v různých počítačích ve vašem prostředí.</span><span class="sxs-lookup"><span data-stu-id="e759d-182">Optimization is a step by step process that has different results across different machines in your environment.</span></span>  <span data-ttu-id="e759d-183">Co funguje pro jednu konfiguraci nemusí fungovat pro ostatní.</span><span class="sxs-lookup"><span data-stu-id="e759d-183">What works for one configuration may not work for others.</span></span>

<span data-ttu-id="e759d-184">Některé užitečné odkazy na další zdroje informací:</span><span class="sxs-lookup"><span data-stu-id="e759d-184">Some useful links to additional resources:</span></span> 

* [<span data-ttu-id="e759d-185">Storage úrovně Premium: Vysoce výkonné úložiště pro úlohy virtuálních počítačů Azure</span><span class="sxs-lookup"><span data-stu-id="e759d-185">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../../storage/common/storage-premium-storage.md)
* [<span data-ttu-id="e759d-186">Uživatelská příručka k Azure Linux Agent</span><span class="sxs-lookup"><span data-stu-id="e759d-186">Azure Linux Agent User Guide</span></span>](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="e759d-187">Optimalizace výkonu databáze MySQL na virtuálních počítačích Azure Linux</span><span class="sxs-lookup"><span data-stu-id="e759d-187">Optimizing MySQL Performance on Azure Linux VMs</span></span>](classic/optimize-mysql.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)
* [<span data-ttu-id="e759d-188">Konfigurace softwaru diskového pole RAID v systému Linux</span><span class="sxs-lookup"><span data-stu-id="e759d-188">Configure Software RAID on Linux</span></span>](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

