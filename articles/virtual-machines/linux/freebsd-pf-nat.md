---
title: "Filtr paketů toocreate aaaUse FreeBSD bránou firewall v Azure | Microsoft Docs"
description: "Zjistěte, jak toodeploy NAT brány firewall pomocí na FreeBSD PF v Azure."
services: virtual-machines-linux
documentationcenter: 
author: KylieLiang
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 02/20/2017
ms.author: kyliel
ms.openlocfilehash: 3d3a5dde2ca03ba6fc384581c786f5eb746e6d92
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="how-toouse-freebsds-packet-filter-toocreate-a-secure-firewall-in-azure"></a><span data-ttu-id="6fb56-103">Jak filtr paketů toocreate toouse FreeBSD zabezpečené brány firewall v Azure</span><span class="sxs-lookup"><span data-stu-id="6fb56-103">How toouse FreeBSD's Packet Filter toocreate a secure firewall in Azure</span></span>
<span data-ttu-id="6fb56-104">Tento článek představuje jak toodeploy brány firewall NAT. pomocí filtru na FreeBSD balírna pomocí šablony Azure Resource Manageru pro běžný scénář webového serveru.</span><span class="sxs-lookup"><span data-stu-id="6fb56-104">This article introduces how toodeploy a NAT firewall using FreeBSD’s Packer Filter through Azure Resource Manager template for common web server scenario.</span></span>

## <a name="what-is-pf"></a><span data-ttu-id="6fb56-105">Co je PF?</span><span class="sxs-lookup"><span data-stu-id="6fb56-105">What is PF?</span></span>
<span data-ttu-id="6fb56-106">PF (filtr paketů, zapisují také pf) je filtr licencovanou paketů BSD, centrální softwarového produktu pro fungující brána firewall může.</span><span class="sxs-lookup"><span data-stu-id="6fb56-106">PF (Packet Filter, also written pf) is a BSD licensed stateful packet filter, a central piece of software for firewalling.</span></span> <span data-ttu-id="6fb56-107">PF od vyvinul rychle a teď má několik výhod oproti další dostupné brány firewall.</span><span class="sxs-lookup"><span data-stu-id="6fb56-107">PF has since evolved quickly and now has several advantages over other available firewalls.</span></span> <span data-ttu-id="6fb56-108">Překlad adres (NAT) je v souboru PF od jeden den, pak Plánovač paketů a správu active fronty integrována do souboru PF, integrací hello ALTQ a díky tomu lze změnit v nastavení konfigurace na PF.</span><span class="sxs-lookup"><span data-stu-id="6fb56-108">Network Address Translation (NAT) is in PF since day one, then packet scheduler and active queue management have been integrated into PF, by integrating hello ALTQ and making it configurable through PF's configuration.</span></span> <span data-ttu-id="6fb56-109">Funkce jako je například pfsync a CARP pro převzetí služeb při selhání a redundance, authpf relace ověřování a proxy server ftp tooease fungující brána firewall může hello obtížné protokolu FTP, také rozšířili PF.</span><span class="sxs-lookup"><span data-stu-id="6fb56-109">Features such as pfsync and CARP for failover and redundancy, authpf for session authentication, and ftp-proxy tooease firewalling hello difficult FTP protocol, have also extended PF.</span></span> <span data-ttu-id="6fb56-110">Stručně řečeno PF je výkonný a bohaté funkce Brána firewall.</span><span class="sxs-lookup"><span data-stu-id="6fb56-110">In short, PF is a powerful and feature-rich firewall.</span></span> 

## <a name="get-started"></a><span data-ttu-id="6fb56-111">Začínáme</span><span class="sxs-lookup"><span data-stu-id="6fb56-111">Get started</span></span>
<span data-ttu-id="6fb56-112">Pokud mají zájem o nastavení zabezpečení brány firewall v cloudu hello pro webové servery a potom můžeme začít.</span><span class="sxs-lookup"><span data-stu-id="6fb56-112">If you are interested in setting up a secure firewall in hello cloud for your web servers, then let’s get started.</span></span> <span data-ttu-id="6fb56-113">Můžete taky použít skripty hello použité v této tooset šablony Azure Resource Manageru si topologii vaší sítě.</span><span class="sxs-lookup"><span data-stu-id="6fb56-113">You can also apply hello scripts used in this Azure Resource Manager template tooset up your networking topology.</span></span>
<span data-ttu-id="6fb56-114">šablony Azure Resource Manageru Hello nastavte FreeBSD virtuální počítač, který provede NAT /redirection PF a dva virtuální počítače FreeBSD pomocí hello Nginx webový server nainstalován a nakonfigurován.</span><span class="sxs-lookup"><span data-stu-id="6fb56-114">hello Azure Resource Manager template set up a FreeBSD virtual machine that performs NAT /redirection using PF and two FreeBSD virtual machines with hello Nginx web server installed and configured.</span></span> <span data-ttu-id="6fb56-115">Kromě toho tooperforming NAT pro dva webové servery hello výstupních provoz, hello NAT/přesměrování virtuálního počítače zachytí požadavků HTTP a přesměruje je toohello dva webové servery v kruhového dotazování.</span><span class="sxs-lookup"><span data-stu-id="6fb56-115">In addition tooperforming NAT for hello two web servers egress traffic, hello NAT/redirection virtual machine intercepts HTTP requests and redirect them toohello two web servers in round-robin fashion.</span></span> <span data-ttu-id="6fb56-116">Hello virtuální sítě používá hello privátní směrovat IP adres místo 10.0.0.2/24 a můžete změnit parametry hello hello šablony.</span><span class="sxs-lookup"><span data-stu-id="6fb56-116">hello VNet uses hello private non-routable IP address space 10.0.0.2/24 and you can modify hello parameters of hello template.</span></span> <span data-ttu-id="6fb56-117">šablony Azure Resource Manageru Hello také definuje tabulka směrování pro hello celý virtuální síť, což je kolekce jednotlivých tras použít toooverride Azure výchozích tras na základě hello cílové IP adresy.</span><span class="sxs-lookup"><span data-stu-id="6fb56-117">hello Azure Resource Manager template also defines a route table for hello whole VNet, which is a collection of individual routes used toooverride Azure default routes based on hello destination IP address.</span></span> 

![pf_topology](./media/freebsd-pf-nat/pf_topology.jpg)
    
### <a name="deploy-through-azure-cli"></a><span data-ttu-id="6fb56-119">Nasazení pomocí rozhraní příkazového řádku Azure</span><span class="sxs-lookup"><span data-stu-id="6fb56-119">Deploy through Azure CLI</span></span>
<span data-ttu-id="6fb56-120">Je třeba hello nejnovější [Azure CLI 2.0](/cli/azure/install-az-cli2) nainstalován a přihlášení pomocí účtu Azure tooan [az přihlášení](/cli/azure/#login).</span><span class="sxs-lookup"><span data-stu-id="6fb56-120">You need hello latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in tooan Azure account using [az login](/cli/azure/#login).</span></span> <span data-ttu-id="6fb56-121">Vytvořte skupinu prostředků pomocí příkazu [az group create](/cli/azure/group#create).</span><span class="sxs-lookup"><span data-stu-id="6fb56-121">Create a resource group with [az group create](/cli/azure/group#create).</span></span> <span data-ttu-id="6fb56-122">Hello následující příklad vytvoří název skupiny prostředků `myResourceGroup` v hello `West US` umístění.</span><span class="sxs-lookup"><span data-stu-id="6fb56-122">hello following example creates a resource group name `myResourceGroup` in hello `West US` location.</span></span>

```azurecli
az group create --name myResourceGroup --location westus
```

<span data-ttu-id="6fb56-123">V dalším kroku nasaďte šablonu hello [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) s [vytvořit nasazení skupiny az](/cli/azure/group/deployment#create).</span><span class="sxs-lookup"><span data-stu-id="6fb56-123">Next, deploy hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) with [az group deployment create](/cli/azure/group/deployment#create).</span></span> <span data-ttu-id="6fb56-124">Stáhněte si [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) v části hello stejnou cestu a definovat vlastní hodnoty prostředků, jako například `adminPassword`, `networkPrefix`, a `domainNamePrefix`.</span><span class="sxs-lookup"><span data-stu-id="6fb56-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) under hello same path and define your own resource values, such as `adminPassword`, `networkPrefix`, and `domainNamePrefix`.</span></span> 

```azurecli
az group deployment create --resource-group myResourceGroup --name myDeploymentName \
    --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/pf-freebsd-setup/azuredeploy.json \
    --parameters '@azuredeploy.parameters.json' --verbose
```

<span data-ttu-id="6fb56-125">Po přibližně pět minut, zobrazí se informace hello `"provisioningState": "Succeeded"`.</span><span class="sxs-lookup"><span data-stu-id="6fb56-125">After about five minutes, you will get hello information of `"provisioningState": "Succeeded"`.</span></span> <span data-ttu-id="6fb56-126">Pak můžete ssh toohello front-endu virtuálních počítačů (NAT) nebo přístup Nginx webovému serveru v prohlížeči pomocí hello veřejnou IP adresu nebo plně kvalifikovaný název domény hello front-endu virtuálních počítačů (NAT).</span><span class="sxs-lookup"><span data-stu-id="6fb56-126">Then you can ssh toohello frontend VM (NAT) or access Nginx web server in a browser using hello public IP address or FQDN of hello frontend VM (NAT).</span></span> <span data-ttu-id="6fb56-127">Hello následující příklad vypíše plně kvalifikovaný název domény a veřejnou IP adresu, která přiřazená toohello front-endu virtuálních počítačů (NAT) v hello `myResourceGroup` skupinu prostředků.</span><span class="sxs-lookup"><span data-stu-id="6fb56-127">hello following example lists FQDN and public IP address that assigned toohello frontend VM (NAT) in hello `myResourceGroup` resource group.</span></span> 

```azurecli
az network public-ip list --resource-group myResourceGroup
```
    
## <a name="next-steps"></a><span data-ttu-id="6fb56-128">Další kroky</span><span class="sxs-lookup"><span data-stu-id="6fb56-128">Next steps</span></span>
<span data-ttu-id="6fb56-129">Chcete tooset si vlastní NAT v Azure?</span><span class="sxs-lookup"><span data-stu-id="6fb56-129">Do you want tooset up your own NAT in Azure?</span></span> <span data-ttu-id="6fb56-130">Otevřít zdroj, bezplatné ale výkonné?</span><span class="sxs-lookup"><span data-stu-id="6fb56-130">Open Source, free but powerful?</span></span> <span data-ttu-id="6fb56-131">Potom PF je vhodné použít.</span><span class="sxs-lookup"><span data-stu-id="6fb56-131">Then PF is a good choice.</span></span> <span data-ttu-id="6fb56-132">Pomocí šablony hello [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), stačí pouze pět minut tooset brány firewall NAT. s vyrovnávání pomocí FreeBSD na zatížení pomocí kruhového dotazování PF v Azure pro běžný scénář webového serveru.</span><span class="sxs-lookup"><span data-stu-id="6fb56-132">By using hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), you only need five minutes tooset up a NAT firewall with round-robin load balancing using FreeBSD's PF in Azure for common web server scenario.</span></span> 

<span data-ttu-id="6fb56-133">Pokud chcete, aby toolearn hello nabízení FreeBSD v Azure, podívejte se příliš[tooFreeBSD Úvod v Azure](freebsd-intro-on-azure.md).</span><span class="sxs-lookup"><span data-stu-id="6fb56-133">If you want toolearn hello offering of FreeBSD in Azure, refer too[introduction tooFreeBSD on Azure](freebsd-intro-on-azure.md).</span></span>

<span data-ttu-id="6fb56-134">Pokud chcete více informací o souboru PF tooknow, podívejte se příliš[FreeBSD k používání](https://www.freebsd.org/doc/handbook/firewalls-pf.html) nebo [PF – uživatelská příručka](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span><span class="sxs-lookup"><span data-stu-id="6fb56-134">If you want tooknow more about PF, refer too[FreeBSD handbook](https://www.freebsd.org/doc/handbook/firewalls-pf.html) or [PF-User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span></span>
