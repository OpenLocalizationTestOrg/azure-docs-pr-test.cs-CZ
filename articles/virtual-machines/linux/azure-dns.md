---
title: "aaaDNS možnosti překladu pro virtuální počítače s Linuxem v Azure"
description: "Název služby DNS scénáře pro virtuální počítače s Linuxem v Azure IaaS, včetně poskytuje řešení, hybridní externí DNS a přineste si vlastní DNS server."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: 7df2320b6f6b42b479bf4070ea60fe5770a78a41
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="6fdb5-103">Možnosti překlad názvů DNS pro virtuální počítače s Linuxem v Azure</span><span class="sxs-lookup"><span data-stu-id="6fdb5-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="6fdb5-104">Azure poskytuje překlad názvu DNS ve výchozím nastavení pro všechny virtuální počítače, které se nacházejí v jedné virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="6fdb5-105">Vlastní řešení rozlišení názvu DNS můžete implementovat podle konfigurace služby DNS pro vaše virtuální počítače Azure který je hostitelem.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="6fdb5-106">Hello následující scénáře by vám pomohou zvolit ten, který se dá použít pro vaši situaci hello.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-106">hello following scenarios should help you choose hello one that works for your situation.</span></span>

* [<span data-ttu-id="6fdb5-107">Rozlišení názvů, které poskytuje Azure</span><span class="sxs-lookup"><span data-stu-id="6fdb5-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="6fdb5-108">Překlad názvů pomocí serveru DNS</span><span class="sxs-lookup"><span data-stu-id="6fdb5-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="6fdb5-109">Typ Hello překlad, který používáte závisí na tom, jak vaše virtuální počítače a instance rolí musí toocommunicate mezi sebou.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-109">hello type of name resolution that you use depends on how your virtual machines and role instances need toocommunicate with each other.</span></span>

<span data-ttu-id="6fdb5-110">Hello následující tabulka uvádí scénáře a odpovídající název řešení řešení:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-110">hello following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="6fdb5-111">**Scénář**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-111">**Scenario**</span></span> | <span data-ttu-id="6fdb5-112">**Řešení**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-112">**Solution**</span></span> | <span data-ttu-id="6fdb5-113">**Přípona**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6fdb5-114">Překlad mezi instance rolí virtuálních počítačů v hello stejné virtuální síti</span><span class="sxs-lookup"><span data-stu-id="6fdb5-114">Name resolution between role instances or virtual machines in hello same virtual network</span></span> |[<span data-ttu-id="6fdb5-115">Rozlišení názvů, které poskytuje Azure</span><span class="sxs-lookup"><span data-stu-id="6fdb5-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="6fdb5-116">název hostitele nebo plně kvalifikovaný název domény (FQDN)</span><span class="sxs-lookup"><span data-stu-id="6fdb5-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="6fdb5-117">Překlad mezi instance rolí virtuálních počítačů v různých virtuálních sítích</span><span class="sxs-lookup"><span data-stu-id="6fdb5-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="6fdb5-118">Spravované zákazníkem serverů DNS, které předávání dotazů mezi virtuálními sítěmi pro řešení Azure (DNS proxy).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="6fdb5-119">V tématu [překladu IP adresy serveru DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="6fdb5-120">Pouze plně kvalifikovaný název domény</span><span class="sxs-lookup"><span data-stu-id="6fdb5-120">FQDN only</span></span> |
| <span data-ttu-id="6fdb5-121">Řešení místní počítačů a názvy služby z role instance nebo virtuálních počítačů v Azure</span><span class="sxs-lookup"><span data-stu-id="6fdb5-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="6fdb5-122">Spravované zákazníkem servery DNS (například místní řadič domény, řadiče místní domény jen pro čtení nebo sekundární DNS synchronizovat pomocí přenosy zóny).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="6fdb5-123">V tématu [překladu IP adresy serveru DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="6fdb5-124">Pouze plně kvalifikovaný název domény</span><span class="sxs-lookup"><span data-stu-id="6fdb5-124">FQDN only</span></span> |
| <span data-ttu-id="6fdb5-125">Řešení Azure názvy hostitelů z místního počítače</span><span class="sxs-lookup"><span data-stu-id="6fdb5-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="6fdb5-126">Předávání dotazů tooa spravované zákazníkem proxy server DNS v hello odpovídající virtuální síť.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-126">Forward queries tooa customer-managed DNS proxy server in hello corresponding virtual network.</span></span> <span data-ttu-id="6fdb5-127">Hello proxy server předává tooAzure dotazy pro překlad.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-127">hello proxy server forwards queries tooAzure for resolution.</span></span> <span data-ttu-id="6fdb5-128">V tématu [překladu IP adresy serveru DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="6fdb5-129">Pouze plně kvalifikovaný název domény</span><span class="sxs-lookup"><span data-stu-id="6fdb5-129">FQDN only</span></span> |
| <span data-ttu-id="6fdb5-130">Reverse DNS pro interní IP adresy</span><span class="sxs-lookup"><span data-stu-id="6fdb5-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="6fdb5-131">Překlad názvů pomocí serveru DNS</span><span class="sxs-lookup"><span data-stu-id="6fdb5-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="6fdb5-132">neuvedeno</span><span class="sxs-lookup"><span data-stu-id="6fdb5-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="6fdb5-133">Rozlišení názvů, které poskytuje Azure</span><span class="sxs-lookup"><span data-stu-id="6fdb5-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="6fdb5-134">Společně s překladu názvů DNS veřejné Azure poskytuje interní překlad adres pro virtuální počítače a instance rolí, které jsou v hello stejné virtuální síti.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in hello same virtual network.</span></span> <span data-ttu-id="6fdb5-135">Ve virtuálních sítích, které jsou založeny na Azure Resource Manager hello přípona DNS je konzistentní napříč hello virtuální sítě; Hello plně kvalifikovaný název domény není potřeba.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-135">In virtual networks that are based on Azure Resource Manager, hello DNS suffix is consistent across hello virtual network; hello FQDN is not needed.</span></span> <span data-ttu-id="6fdb5-136">Názvy DNS se dá přiřadit tooboth karty síťového rozhraní (NIC) a virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-136">DNS names can be assigned tooboth network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="6fdb5-137">I když hello překladu, který poskytuje Azure nevyžaduje žádnou konfiguraci, není hello příslušnou volbu pro všechny scénáře nasazení, jak vidíte v předcházející tabulce hello.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-137">Although hello name resolution that Azure provides does not require any configuration, it is not hello appropriate choice for all deployment scenarios, as seen on hello preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="6fdb5-138">Funkce a důležité informace</span><span class="sxs-lookup"><span data-stu-id="6fdb5-138">Features and considerations</span></span>
<span data-ttu-id="6fdb5-139">**Funkce:**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-139">**Features:**</span></span>

* <span data-ttu-id="6fdb5-140">Překlad názvu požadované toouse, které Azure poskytuje není žádná konfigurace.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-140">No configuration is required toouse name resolution that Azure provides.</span></span>
* <span data-ttu-id="6fdb5-141">Hello název řešení služba, která poskytuje Azure je vysoce dostupný.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-141">hello name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="6fdb5-142">Nebudete potřebovat toocreate a spravovat clustery serverů DNS.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-142">You don't need toocreate and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="6fdb5-143">Hello název řešení služba, která poskytuje Azure můžete použít společně s vlastními tooresolve servery DNS místní i Azure názvy hostitelů.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-143">hello name resolution service that Azure provides can be used along with your own DNS servers tooresolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="6fdb5-144">Název řešení je k dispozici mezi virtuálními počítači ve virtuálních sítích bez nutnosti hello plně kvalifikovaný název domény.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-144">Name resolution is provided between virtual machines in virtual networks without need for hello FQDN.</span></span>
* <span data-ttu-id="6fdb5-145">Můžete použít názvy hostitelů, které nejlépe popisují vaše nasazení místo práce s automaticky generovaných názvů.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="6fdb5-146">**Aspekty:**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-146">**Considerations:**</span></span>

* <span data-ttu-id="6fdb5-147">nemůže být upraven Hello příponu DNS, který vytvoří Azure.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-147">hello DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="6fdb5-148">Nelze ručně zaregistrovat vlastní záznamy.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="6fdb5-149">Služba WINS a NetBIOS nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="6fdb5-150">Názvy hostitelů musí být kompatibilní s DNS.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="6fdb5-151">Názvy musí používat pouze 0 – 9,-z, a '-', a nesmí začínat ani končit '-'.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="6fdb5-152">Najdete v dokumentu RFC 3696 části 2.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="6fdb5-153">Pro každý virtuální počítač je omezen provoz dotazu DNS.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="6fdb5-154">Omezení by nemělo mít vliv na většinu aplikací.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="6fdb5-155">Pokud je dodržena omezení požadavků, ujistěte se, zda je povoleno ukládání do mezipaměti na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="6fdb5-156">Další informace najdete v tématu [získávání hello většina rozlišování názvů, které Azure poskytuje](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-156">For more information, see [Getting hello most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-hello-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="6fdb5-157">Získávání hello většina rozlišování názvů, které poskytuje Azure</span><span class="sxs-lookup"><span data-stu-id="6fdb5-157">Getting hello most from name resolution that Azure provides</span></span>
<span data-ttu-id="6fdb5-158">**Ukládání do mezipaměti klienta:**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-158">**Client-side caching:**</span></span>

<span data-ttu-id="6fdb5-159">Některé dotazy DNS se neodesílají v síti hello.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-159">Some DNS queries are not sent across hello network.</span></span> <span data-ttu-id="6fdb5-160">Ukládání do mezipaměti na straně klienta pomáhá snížit latenci a zlepšit odolnost toonetwork nekonzistence vyřešte opakující se dotazy DNS z místní mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-160">Client-side caching helps reduce latency and improve resilience toonetwork inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="6fdb5-161">Záznamy DNS obsahovat Time To Live (TTL), která umožňuje hello mezipaměti toostore hello záznam pro stejně dlouho bez dopadu na záznamů aktuálnosti.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-161">DNS records contain a Time-To-Live (TTL), which enables hello cache toostore hello record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="6fdb5-162">V důsledku toho ukládání do mezipaměti na straně klienta je vhodná pro většinu situace.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="6fdb5-163">Některé Linuxových distribucích nezahrnují ukládání do mezipaměti ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="6fdb5-164">Doporučujeme, abyste po je zkontrolovat, že není k dispozici místní mezipaměti již přidání mezipaměti tooeach Linux virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-164">We recommend that you add a cache tooeach Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="6fdb5-165">Několik různých DNS ukládání do mezipaměti balíčků, jako je například dnsmasq, jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="6fdb5-166">Zde jsou dnsmasq tooinstall hello kroků na nejběžnější distribuce hello:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-166">Here are hello steps tooinstall dnsmasq on hello most common distributions:</span></span>

<span data-ttu-id="6fdb5-167">**Ubuntu (používá resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="6fdb5-168">Instalovat balíček dnsmasq hello ("sudo instalace výstižný get dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-168">Install hello dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="6fdb5-169">**SUSE (používá netconf)**:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="6fdb5-170">Instalovat balíček dnsmasq hello ("sudo zypper instalace dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-170">Install hello dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="6fdb5-171">Povolte službu dnsmasq hello ("Povolit dnsmasq.service systemctl").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-171">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="6fdb5-172">Spusťte službu dnsmasq hello ("systemctl počáteční dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-172">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="6fdb5-173">Upravit "/ atd/sysconfig/síť/config" a změňte NETCONFIG_DNS_FORWARDER = "" příliš "dnsmasq".</span><span class="sxs-lookup"><span data-stu-id="6fdb5-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" too”dnsmasq”.</span></span>
5. <span data-ttu-id="6fdb5-174">Aktualizace resolv.conf ("netconfig update") tooset hello mezipaměti jako hello místní překladač služby DNS.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-174">Update resolv.conf ("netconfig update") tooset hello cache as hello local DNS resolver.</span></span>

<span data-ttu-id="6fdb5-175">**CentOS softwarem podvodný Wave (dříve OpenLogic; používá NetworkManager)**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="6fdb5-176">Instalovat balíček dnsmasq hello ("sudo yum instalace dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-176">Install hello dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="6fdb5-177">Povolte službu dnsmasq hello ("Povolit dnsmasq.service systemctl").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-177">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="6fdb5-178">Spusťte službu dnsmasq hello ("systemctl počáteční dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="6fdb5-178">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="6fdb5-179">Přidání "předřazení domény názvové servery 127.0.0.1;" too"/etc/dhclient-eth0.conf".</span><span class="sxs-lookup"><span data-stu-id="6fdb5-179">Add “prepend domain-name-servers 127.0.0.1;” too“/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="6fdb5-180">Restartujte hello síťové služby ("sítě restartování služby") tooset hello mezipaměti jako hello místní překladač služby DNS</span><span class="sxs-lookup"><span data-stu-id="6fdb5-180">Restart hello network service (“service network restart”) tooset hello cache as hello local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="6fdb5-181">: balíček 'dnsmasq' hello je pouze jeden z hello mnoho DNS ukládá do mezipaměti, které jsou k dispozici pro Linux.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-181">: hello 'dnsmasq' package is only one of hello many DNS caches that are available for Linux.</span></span> <span data-ttu-id="6fdb5-182">Dříve, než ho použijete, zkontrolujte jeho vhodnosti pro vaše potřeby a žádné jiné mezipaměti nainstalovaného.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="6fdb5-183">**Opakování na straně klienta**</span><span class="sxs-lookup"><span data-stu-id="6fdb5-183">**Client-side retries**</span></span>

<span data-ttu-id="6fdb5-184">DNS je primárně protokol UDP.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="6fdb5-185">Protože hello protokolu UDP nezaručuje doručení zpráv, hello samotný protokol DNS zpracovává logiku opakovaných pokusů.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-185">Because hello UDP protocol doesn't guarantee message delivery, hello DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="6fdb5-186">Každý klient DNS (operačního systému) může vykazovat různé opakování logiku v závislosti na předvoleb hello creator:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-186">Each DNS client (operating system) can exhibit different retry logic depending on hello creator's preference:</span></span>

* <span data-ttu-id="6fdb5-187">Operační systémy Windows opakujte po jeden druhý a pak znovu po další dva, čtyři a jiné čtyři sekund.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="6fdb5-188">Hello výchozí Linux instalace opakování po pět sekund.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-188">hello default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="6fdb5-189">Měli byste změnit toto tooretry pětkrát v intervalech jednu sekundu.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-189">You should change this tooretry five times at one-second intervals.</span></span>  

<span data-ttu-id="6fdb5-190">toocheck hello aktuální nastavení na virtuální počítač s Linuxem, 'cat /etc/resolv.conf' a podívejte se na řádku "možnosti" hello, například:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-190">toocheck hello current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at hello 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="6fdb5-191">soubor resolv.conf Hello se generuje automaticky a by neměla být upravována.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-191">hello resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="6fdb5-192">konkrétní kroky, které přidat hello položku Možnosti' řádek se liší podle distribuční Hello:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-192">hello specific steps that add hello 'options' line vary by distribution:</span></span>

<span data-ttu-id="6fdb5-193">**Ubuntu** (používá resolvconf)</span><span class="sxs-lookup"><span data-stu-id="6fdb5-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="6fdb5-194">Přidat too'/etc/resolveconf/resolv.conf.d/head řádku možnosti hello ".</span><span class="sxs-lookup"><span data-stu-id="6fdb5-194">Add hello options line too'/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="6fdb5-195">Spusťte tooupdate "resolvconf -u".</span><span class="sxs-lookup"><span data-stu-id="6fdb5-195">Run 'resolvconf -u' tooupdate.</span></span>

<span data-ttu-id="6fdb5-196">**SUSE** (používá netconf)</span><span class="sxs-lookup"><span data-stu-id="6fdb5-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="6fdb5-197">Přidejte 'timeout:1 pokusů: 5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS = "" parametr v/atd/sysconfig nebo sítě nebo konfigurace.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-197">Add 'timeout:1 attempts:5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="6fdb5-198">Spusťte tooupdate 'netconfig aktualizace'.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-198">Run 'netconfig update' tooupdate.</span></span>

<span data-ttu-id="6fdb5-199">**CentOS softwarem Wave podvodný (dříve OpenLogic)** (používá NetworkManager)</span><span class="sxs-lookup"><span data-stu-id="6fdb5-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="6fdb5-200">Přidat too'/etc/NetworkManager/dispatcher.d/11-dhclient "echo" možnosti timeout:1 pokusů: 5",".</span><span class="sxs-lookup"><span data-stu-id="6fdb5-200">Add 'echo "options timeout:1 attempts:5"' too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="6fdb5-201">Spusťte tooupdate, restart služby sítě".</span><span class="sxs-lookup"><span data-stu-id="6fdb5-201">Run 'service network restart' tooupdate.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="6fdb5-202">Překlad názvů pomocí serveru DNS</span><span class="sxs-lookup"><span data-stu-id="6fdb5-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="6fdb5-203">Potřeb název řešení může přesahovat hello funkce, které poskytuje Azure.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-203">Your name resolution needs may go beyond hello features that Azure provides.</span></span> <span data-ttu-id="6fdb5-204">Například může vyžadovat překlad DNS mezi virtuálními sítěmi.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="6fdb5-205">toocover v tomto scénáři můžete použít vlastní servery DNS.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-205">toocover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="6fdb5-206">Servery DNS v rámci virtuální sítě může předat dál DNS dotazuje toorecursive překladače z Azure tooresolve názvy hostitelů, které jsou v hello stejné virtuální síti.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-206">DNS servers within a virtual network can forward DNS queries toorecursive resolvers of Azure tooresolve hostnames that are in hello same virtual network.</span></span> <span data-ttu-id="6fdb5-207">Server DNS, který běží v Azure můžete například reagovat tooDNS dotazy pro vlastní DNS zóny soubory a předávat všechny ostatní tooAzure dotazy.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-207">For example, a DNS server that runs in Azure can respond tooDNS queries for its own DNS zone files and forward all other queries tooAzure.</span></span> <span data-ttu-id="6fdb5-208">Tato funkce umožňuje toosee virtuální počítače, vaše záznamy v zóně soubory a názvy hostitelů, které Azure poskytuje (prostřednictvím předávání hello).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-208">This functionality enables virtual machines toosee both your entries in your zone files and hostnames that Azure provides (via hello forwarder).</span></span> <span data-ttu-id="6fdb5-209">Přístup k toohello rekurzivní překladače Azure je k dispozici prostřednictvím hello virtuální IP adresy 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-209">Access toohello recursive resolvers of Azure is provided via hello virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="6fdb5-210">Předávání DNS také umožňuje překlad DNS mezi virtuálními sítěmi a umožňuje vaší místní počítače tooresolve názvy hostitelů, které poskytuje Azure.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines tooresolve hostnames that Azure provides.</span></span> <span data-ttu-id="6fdb5-211">tooresolve název hostitele virtuálního počítače, virtuální počítač serveru DNS hello musí nacházet v hello stejné virtuální síti a mít nakonfigurované tooforward hostname dotazy tooAzure.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-211">tooresolve a virtual machine's hostname, hello DNS server virtual machine must reside in hello same virtual network and be configured tooforward hostname queries tooAzure.</span></span> <span data-ttu-id="6fdb5-212">Protože hello přípona DNS se liší v každé virtuální sítě, můžete použít podmíněné předávání pravidla toosend DNS dotazuje toohello opravte virtuální sítě pro překlad.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-212">Because hello DNS suffix is different in each virtual network, you can use conditional forwarding rules toosend DNS queries toohello correct virtual network for resolution.</span></span> <span data-ttu-id="6fdb5-213">Hello následující obrázek ukazuje dvě virtuální sítě a k místní síti provádění překlad DNS mezi virtuálními sítěmi pomocí této metody:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-213">hello following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![Překlad DNS mezi virtuálními sítěmi](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="6fdb5-215">Při použití rozlišení názvů, které Azure poskytuje interní příponu DNS hello zajišťuje tooeach virtuálního počítače pomocí systému DHCP.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-215">When you use name resolution that Azure provides, hello internal DNS suffix is provided tooeach virtual machine by using DHCP.</span></span> <span data-ttu-id="6fdb5-216">Pokud použijete vlastní název řešení řešení, tuto příponu není zadaná toovirtual počítače protože hello příponu naruší jiné DNS architektury.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-216">When you use your own name resolution solution, this suffix is not supplied toovirtual machines because hello suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="6fdb5-217">toorefer toomachines ve plně kvalifikovaný název domény nebo tooconfigure příponu hello na virtuální počítače, můžete použít PowerShell nebo hello příponu hello toodetermine rozhraní API:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-217">toorefer toomachines by FQDN or tooconfigure hello suffix on your virtual machines, you can use PowerShell or hello API toodetermine hello suffix:</span></span>

* <span data-ttu-id="6fdb5-218">Pro virtuální sítě, které jsou spravovány nástrojem Azure Resource Manager, je k dispozici prostřednictvím hello hello příponu [karty síťového rozhraní](https://msdn.microsoft.com/library/azure/mt163668.aspx) prostředků.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-218">For virtual networks that are managed by Azure Resource Manager, hello suffix is available via hello [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="6fdb5-219">Můžete taky spustit hello `azure network public-ip show <resource group> <pip name>` příkaz toodisplay hello podrobnosti o vaší veřejné IP adresy, která zahrnuje hello plně kvalifikovaný název domény hello síťový adaptér.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-219">You can also run hello `azure network public-ip show <resource group> <pip name>` command toodisplay hello details of your public IP, which includes hello FQDN of hello NIC.</span></span>

<span data-ttu-id="6fdb5-220">Pokud předávání dotazy tooAzure nebude vyhovovat vašim potřebám, musíte tooprovide řešení DNS.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-220">If forwarding queries tooAzure doesn't suit your needs, you need tooprovide your own DNS solution.</span></span>  <span data-ttu-id="6fdb5-221">Musí vaše řešení DNS:</span><span class="sxs-lookup"><span data-stu-id="6fdb5-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="6fdb5-222">Zadejte odpovídající název hostitele řešení, například prostřednictvím [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="6fdb5-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="6fdb5-223">Pokud používáte DDNS, bude pravděpodobně nutné, proces úklidu záznamů DNS toodisable.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-223">If you use DDNS, you might need toodisable DNS record scavenging.</span></span> <span data-ttu-id="6fdb5-224">Zapůjčení DHCP ve službě Azure jsou velmi dlouhé a proces úklidu může odebrat záznamy DNS předčasně.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="6fdb5-225">Zadejte odpovídající rekurzivní překlad názvů tooallow rozlišení názvů externí domény.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-225">Provide appropriate recursive resolution tooallow resolution of external domain names.</span></span>
* <span data-ttu-id="6fdb5-226">Být přístupné (TCP a UDP na port 53) z klientů hello, kterému slouží a být schopný tooaccess hello Internetu.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-226">Be accessible (TCP and UDP on port 53) from hello clients it serves and be able tooaccess hello Internet.</span></span>
* <span data-ttu-id="6fdb5-227">Nutné zabezpečit před přístupem z hello Internet toomitigate hrozbami v podobě externí agenty.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-227">Be secured against access from hello Internet toomitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="6fdb5-228">Pro nejlepší výkon, pokud používáte virtuální počítače v Azure DNS servery, zakažte IPv6 a přiřadit [veřejná IP adresa na úrovni Instance](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS serveru virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="6fdb5-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual machine.</span></span>  
>
>
