---
title: "aaaTroubleshoot klasický nasazení virtuálního počítače s Linuxem | Microsoft Docs"
description: "Řešení problémů nasazení classic, když vytvoříte nový virtuální počítač Linux v Azure"
services: virtual-machines-linux
documentationcenter: 
author: JiangChen79
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: c8a963fa-6b2a-4c7a-a1f4-7793adb02b19
ms.service: virtual-machines-linux
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: cjiang
ms.openlocfilehash: a642bfd9a543cd6d2104b03fe04193d9352ccae1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-classic-deployment-issues-with-creating-a-new-linux-virtual-machine-in-azure"></a><span data-ttu-id="48b99-103">Řešení problémů nasazení classic s vytvoření nového virtuálního počítače Linux v Azure</span><span class="sxs-lookup"><span data-stu-id="48b99-103">Troubleshoot classic deployment issues with creating a new Linux virtual machine in Azure</span></span>
[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-selectors](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-selectors-include.md)]

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-opening](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-opening-include.md)]

> [!IMPORTANT] 
> <span data-ttu-id="48b99-104">Azure má dva různé modely nasazení pro vytváření a práci s prostředky: [Resource Manager a klasický](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="48b99-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="48b99-105">Tento článek se zabývá pomocí modelu nasazení Classic hello.</span><span class="sxs-lookup"><span data-stu-id="48b99-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="48b99-106">Společnost Microsoft doporučuje, aby většina nových nasazení používala model Resource Manager hello.</span><span class="sxs-lookup"><span data-stu-id="48b99-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="48b99-107">Hello Resource Manager verzi v tomto článku, naleznete v části [zde](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="48b99-107">For hello Resource Manager version of this article, see [here](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

[!INCLUDE [support-disclaimer](../../../../includes/support-disclaimer.md)]

## <a name="collect-audit-logs"></a><span data-ttu-id="48b99-108">Protokoly auditu shromáždit</span><span class="sxs-lookup"><span data-stu-id="48b99-108">Collect audit logs</span></span>
<span data-ttu-id="48b99-109">řešení potíží, toostart auditu shromáždit hello zaznamená tooidentify hello chyby související s problémem hello.</span><span class="sxs-lookup"><span data-stu-id="48b99-109">toostart troubleshooting, collect hello audit logs tooidentify hello error associated with hello issue.</span></span>

<span data-ttu-id="48b99-110">V hello portálu Azure, klikněte na **Procházet** > **virtuální počítače** > *virtuálního počítače Windows*  >   **Nastavení** > **protokoly auditu**.</span><span class="sxs-lookup"><span data-stu-id="48b99-110">In hello Azure portal, click **Browse** > **Virtual machines** > *your Windows virtual machine* > **Settings** > **Audit logs**.</span></span>

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-issue1](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-issue1-include.md)]

[!INCLUDE [virtual-machines-linux-troubleshoot-deployment-new-vm-table](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-table.md)]

<span data-ttu-id="48b99-111">**/ Y:** Pokud hello operačního systému Linux zobecněn a se nahrál nebo zachytit pomocí hello zobecněn nastavení, potom nebudou všechny chyby.</span><span class="sxs-lookup"><span data-stu-id="48b99-111">**Y:** If hello OS is Linux generalized, and it is uploaded and/or captured with hello generalized setting, then there won’t be any errors.</span></span> <span data-ttu-id="48b99-112">Podobně pokud hello operačního systému Linux specializuje a je nahrál nebo zachytit pomocí hello speciální nastavení, pak nebude existovat žádné chyby.</span><span class="sxs-lookup"><span data-stu-id="48b99-112">Similarly, if hello OS is Linux specialized, and it is uploaded and/or captured with hello specialized setting, then there won’t be any errors.</span></span>

<span data-ttu-id="48b99-113">**Odešlete chyby:**</span><span class="sxs-lookup"><span data-stu-id="48b99-113">**Upload Errors:**</span></span>

<span data-ttu-id="48b99-114">**N<sup>1</sup>:** Pokud hello operačního systému Linux zobecněn, a nahraje jako specializovaný, zobrazí se zřizování vypršení časového limitu protože hello virtuálních počítačů zasekl ve fázi zřizování hello.</span><span class="sxs-lookup"><span data-stu-id="48b99-114">**N<sup>1</sup>:** If hello OS is Linux generalized, and it is uploaded as specialized, you will get a provisioning timeout error because hello VM is stuck at hello provisioning stage.</span></span>

<span data-ttu-id="48b99-115">**N<sup>2</sup>:** Pokud hello operačního systému Linux specializuje a nahraje jako zobecněn, zřizování selhání chyba se zobrazí, protože hello nový virtuální počítač je spuštěn s hello původní název počítače, uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="48b99-115">**N<sup>2</sup>:** If hello OS is Linux specialized, and it is uploaded as generalized, you will get a provisioning failure error because hello new VM is running with hello original computer name, username and password.</span></span>

<span data-ttu-id="48b99-116">**Řešení:**</span><span class="sxs-lookup"><span data-stu-id="48b99-116">**Resolution:**</span></span>

<span data-ttu-id="48b99-117">tooresolve obě tyto chyby, odeslat hello původní virtuální pevný disk, k dispozici místní, s hello stejné nastavení jako hello operačního systému (zobecněn/specializuje).</span><span class="sxs-lookup"><span data-stu-id="48b99-117">tooresolve both these errors, upload hello original VHD, available on-prem, with hello same setting as that for hello OS (generalized/specialized).</span></span> <span data-ttu-id="48b99-118">tooupload jako zobecněn, mějte na paměti, toorun-nejprve zrušit jejich zřízení.</span><span class="sxs-lookup"><span data-stu-id="48b99-118">tooupload as generalized, remember toorun -deprovision first.</span></span> <span data-ttu-id="48b99-119">V tématu [vytvoření a nahrání virtuálního pevného disku tohoto hello obsahuje operační systém Linux](create-upload-vhd.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="48b99-119">See [Create and Upload a Virtual Hard Disk that Contains hello Linux Operating System](create-upload-vhd.md) for more information.</span></span>

<span data-ttu-id="48b99-120">**Zaznamenat chyby:**</span><span class="sxs-lookup"><span data-stu-id="48b99-120">**Capture Errors:**</span></span>

<span data-ttu-id="48b99-121">**N<sup>3</sup>:** Pokud hello operačního systému Linux zobecněn, a se zaznamená jako specializovaný, zobrazí se zřizování vypršení časového limitu protože hello původní virtuální počítač je nepoužitelný je označen jako zobecněn.</span><span class="sxs-lookup"><span data-stu-id="48b99-121">**N<sup>3</sup>:** If hello OS is Linux generalized, and it is captured as specialized, you will get a provisioning timeout error because hello original VM is not usable as it is marked as generalized.</span></span>

<span data-ttu-id="48b99-122">**N<sup>4</sup>:** Pokud hello operačního systému Linux specializuje a z něj zachytí jako zobecněn, zřizování selhání chyba se zobrazí, protože hello nový virtuální počítač je spuštěn s hello původní název počítače, uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="48b99-122">**N<sup>4</sup>:** If hello OS is Linux specialized, and it is captured as generalized, you will get a provisioning failure error because hello new VM is running with hello original computer name, username and password.</span></span> <span data-ttu-id="48b99-123">Navíc hello původní virtuální počítač je nepoužitelný, protože je označeno jako specializované.</span><span class="sxs-lookup"><span data-stu-id="48b99-123">Also, hello original VM is not usable because it is marked as specialized.</span></span>

<span data-ttu-id="48b99-124">**Řešení:**</span><span class="sxs-lookup"><span data-stu-id="48b99-124">**Resolution:**</span></span>

<span data-ttu-id="48b99-125">tooresolve obě tyto chyby odstranit hello aktuální image z portálu hello a [kopii z hello aktuální virtuální pevné disky](capture-image.md) s hello stejné nastavení jako hello operačního systému (zobecněn/specializuje).</span><span class="sxs-lookup"><span data-stu-id="48b99-125">tooresolve both these errors, delete hello current image from hello portal, and [recapture it from hello current VHDs](capture-image.md) with hello same setting as that for hello OS (generalized/specialized).</span></span>

## <a name="issue-custom-gallery-marketplace-image-allocation-failure"></a><span data-ttu-id="48b99-126">Problém: Vlastní nebo Galerie / marketplace obrázku; došlo k chybě přidělení</span><span class="sxs-lookup"><span data-stu-id="48b99-126">Issue: Custom/ gallery/ marketplace image; allocation failure</span></span>
<span data-ttu-id="48b99-127">Tato chyba nastane v situacích, při hello novou žádost o virtuální počítač je odeslání tooa clusteru, který buď nemá dostupné volné místo tooaccommodate hello požadavek, nebo nepodporuje požadovanou velikost virtuálního počítače hello.</span><span class="sxs-lookup"><span data-stu-id="48b99-127">This error arises in situations when hello new VM request is sent tooa cluster that either does not have available free space tooaccommodate hello request, or cannot support hello VM size being requested.</span></span> <span data-ttu-id="48b99-128">Není možné toomix jinou sérii virtuálních počítačů v hello stejné cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="48b99-128">It is not possible toomix different series of VMs in hello same cloud service.</span></span> <span data-ttu-id="48b99-129">Takže pokud chcete toocreate nový virtuální počítač je jiný než co cloudové služby může podporovat velikost, požadavek na výpočetní hello se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="48b99-129">So if you want toocreate a new VM of a different size than what your cloud service can support, hello compute request will fail.</span></span>

<span data-ttu-id="48b99-130">V závislosti na omezení hello hello cloudové služby používáte toocreate hello nového virtuálního počítače, může dojít k chybě způsobené dvou situacích.</span><span class="sxs-lookup"><span data-stu-id="48b99-130">Depending on hello constraints of hello cloud service you use toocreate hello new VM, you might encounter an error caused by one of two situations.</span></span>

<span data-ttu-id="48b99-131">**Příčina 1:** hello Cloudová služba se definovaného tooa konkrétní clusteru, nebo je propojené tooan skupiny vztahů a proto definovaného tooa konkrétní cluster záměrné.</span><span class="sxs-lookup"><span data-stu-id="48b99-131">**Cause 1:** hello cloud service is pinned tooa specific cluster, or it is linked tooan affinity group, and hence pinned tooa specific cluster by design.</span></span> <span data-ttu-id="48b99-132">Proto si vyžádá novou výpočetních prostředků v této skupině vztahů jsou použity v hello stejný cluster, kde jsou hostované hello existující prostředky.</span><span class="sxs-lookup"><span data-stu-id="48b99-132">So new compute resource requests in that affinity group are tried in hello same cluster where hello existing resources are hosted.</span></span> <span data-ttu-id="48b99-133">Nicméně hello stejného clusteru může buď není podpora hello požadovaná velikost virtuálního počítače nebo mít není dostatek volného místa, což vede k chybě přidělení.</span><span class="sxs-lookup"><span data-stu-id="48b99-133">However, hello same cluster may either not support hello requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="48b99-134">To platí, jestli jsou vytvořeny nové prostředky hello prostřednictvím novou cloudovou službu nebo stávající cloudovou službu.</span><span class="sxs-lookup"><span data-stu-id="48b99-134">This is true whether hello new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="48b99-135">**Řešení 1:**</span><span class="sxs-lookup"><span data-stu-id="48b99-135">**Resolution 1:**</span></span>

* <span data-ttu-id="48b99-136">Vytvořte novou cloudovou službu a přidružit ji k oblasti nebo na základě oblast virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="48b99-136">Create a new cloud service and associate it with either a region or a region-based virtual network.</span></span>
* <span data-ttu-id="48b99-137">Vytvoření nového virtuálního počítače v hello novou cloudovou službu.</span><span class="sxs-lookup"><span data-stu-id="48b99-137">Create a new VM in hello new cloud service.</span></span>
  <span data-ttu-id="48b99-138">Pokud dojde k chybě při pokusu o toocreate novou cloudovou službu, opakujte později nebo změnit hello oblast hello cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="48b99-138">If you get an error when trying toocreate a new cloud service, either retry at a later time or change hello region for hello cloud service.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="48b99-139">Pokud se pokoušeli toocreate nového virtuálního počítače ve stávající cloudovou službu, ale nelze a měl toocreate novou cloudovou službu pro nový virtuální počítač, můžete tooconsolidate všechny virtuální počítače v hello stejné cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="48b99-139">If you were trying toocreate a new VM in an existing cloud service but couldn’t, and had toocreate a new cloud service for your new VM, you can choose tooconsolidate all your VMs in hello same cloud service.</span></span> <span data-ttu-id="48b99-140">toodo Ano, odstraňte hello virtuálních počítačů v hello stávající cloudovou službu a jejich kopii z jejich disků ve hello novou cloudovou službu.</span><span class="sxs-lookup"><span data-stu-id="48b99-140">toodo so, delete hello VMs in hello existing cloud service, and recapture them from their disks in hello new cloud service.</span></span> <span data-ttu-id="48b99-141">Je však důležité tooremember, hello nová Cloudová služba bude mít nový název a VIP, takže bude potřeba tooupdate tyto pro všechny hello závislosti, které používají tyto informace pro hello stávající cloudovou službu.</span><span class="sxs-lookup"><span data-stu-id="48b99-141">However, it is important tooremember that hello new cloud service will have a new name and VIP, so you will need tooupdate these for all hello dependencies that currently use this information for hello existing cloud service.</span></span>
> 
> 

<span data-ttu-id="48b99-142">**Příčina 2:** hello Cloudová služba je přidružený virtuální síť, která je propojená tooan skupin vztahů, tak, aby byl definovaného tooa konkrétní clusteru záměrné.</span><span class="sxs-lookup"><span data-stu-id="48b99-142">**Cause 2:** hello cloud service is associated with a virtual network that is linked tooan affinity group, so it is pinned tooa specific cluster by design.</span></span> <span data-ttu-id="48b99-143">Všechny nové požadavky výpočetních prostředků v této skupině vztahů jsou proto se pokusila hello stejný cluster, kde jsou hostované hello existující prostředky.</span><span class="sxs-lookup"><span data-stu-id="48b99-143">All new compute resource requests in that affinity group are therefore tried in hello same cluster where hello existing resources are hosted.</span></span> <span data-ttu-id="48b99-144">Nicméně hello stejného clusteru může buď není podpora hello požadovaná velikost virtuálního počítače nebo mít není dostatek volného místa, což vede k chybě přidělení.</span><span class="sxs-lookup"><span data-stu-id="48b99-144">However, hello same cluster may either not support hello requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="48b99-145">To platí, jestli jsou vytvořeny nové prostředky hello prostřednictvím novou cloudovou službu nebo stávající cloudovou službu.</span><span class="sxs-lookup"><span data-stu-id="48b99-145">This is true whether hello new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="48b99-146">**Řešení 2:**</span><span class="sxs-lookup"><span data-stu-id="48b99-146">**Resolution 2:**</span></span>

* <span data-ttu-id="48b99-147">Vytvořte nový regionální virtuální síť.</span><span class="sxs-lookup"><span data-stu-id="48b99-147">Create a new regional virtual network.</span></span>
* <span data-ttu-id="48b99-148">Vytvořit nový virtuální počítač v nové virtuální sítě hello hello.</span><span class="sxs-lookup"><span data-stu-id="48b99-148">Create hello new VM in hello new virtual network.</span></span>
* <span data-ttu-id="48b99-149">[Připojit existující virtuální síť](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) toohello nové virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="48b99-149">[Connect your existing virtual network](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) toohello new virtual network.</span></span> <span data-ttu-id="48b99-150">Další informace [regionálních virtuálních sítí](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span><span class="sxs-lookup"><span data-stu-id="48b99-150">See more about [regional virtual networks](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span></span> <span data-ttu-id="48b99-151">Alternativně můžete [migrace vaší virtuální sítě na základě vztahů skupiny tooa regionální virtuální síť](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/)a poté vytvořit hello nového virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="48b99-151">Alternatively, you can [migrate your affinity-group-based virtual network tooa regional virtual network](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/), and then create hello new VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="48b99-152">Další kroky</span><span class="sxs-lookup"><span data-stu-id="48b99-152">Next steps</span></span>
<span data-ttu-id="48b99-153">Pokud dojde k potížím při spuštění zastavený virtuální počítač s Linuxem nebo změnit jeho velikost existující virtuální počítač s Linuxem v Azure, najdete v části [nasazení classic potíží s restartováním nebo změnou velikosti existující virtuální počítač Linux v Azure](restart-resize-error-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="48b99-153">If you encounter issues when you start a stopped Linux VM or resize an existing Linux VM in Azure, see [Troubleshoot classic deployment issues with restarting or resizing an existing Linux Virtual Machine in Azure](restart-resize-error-troubleshooting.md).</span></span>

