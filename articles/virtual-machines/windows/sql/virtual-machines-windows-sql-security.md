---
title: "Důležité informace o zabezpečení pro Server SQL v Azure | Microsoft Docs"
description: "Toto téma obsahuje obecné pokyny pro zabezpečení SQL Server běžící virtuálním počítači Azure."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: d710c296-e490-43e7-8ca9-8932586b71da
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/02/2017
ms.author: jroth
ms.openlocfilehash: 4ad9156e481eac0bae32bca35a2b126363e5d8b6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="security-considerations-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="d3f29-103">Informace o zabezpečení pro SQL Server v Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="d3f29-103">Security Considerations for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="d3f29-104">Toto téma obsahuje celkový pokyny pro zabezpečení, které pomáhají vytvořit zabezpečený přístup k instance systému SQL Server v Azure virtuální počítač (VM).</span><span class="sxs-lookup"><span data-stu-id="d3f29-104">This topic includes overall security guidelines that help establish secure access to SQL Server instances in an Azure virtual machine (VM).</span></span>

<span data-ttu-id="d3f29-105">Azure v souladu se několik oborové směrnice brát a standardů, které můžete povolit sestavení řešení kompatibilní se systémem SQL Server běží na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="d3f29-105">Azure complies with several industry regulations and standards that can enable you to build a compliant solution with SQL Server running in a virtual machine.</span></span> <span data-ttu-id="d3f29-106">Informace o dodržování legislativní předpisů s Azure najdete v tématu [Centrum zabezpečení Azure](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="d3f29-106">For information about regulatory compliance with Azure, see [Azure Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="control-access-to-the-sql-vm"></a><span data-ttu-id="d3f29-107">Řízení přístupu k virtuálnímu počítači SQL</span><span class="sxs-lookup"><span data-stu-id="d3f29-107">Control access to the SQL VM</span></span>

<span data-ttu-id="d3f29-108">Při vytváření virtuálního počítače systému SQL Server, zvážit, jakým způsobem pečlivě řízení, kdo má přístup k počítači a k systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d3f29-108">When you create your SQL Server virtual machine, consider how to carefully control who has access to the machine and to SQL Server.</span></span> <span data-ttu-id="d3f29-109">Obecně platí proveďte následující:</span><span class="sxs-lookup"><span data-stu-id="d3f29-109">In general, you should do the following:</span></span>

- <span data-ttu-id="d3f29-110">Omezte přístup k systému SQL Server jenom na aplikace a klienti, kteří ho potřebují.</span><span class="sxs-lookup"><span data-stu-id="d3f29-110">Restrict access to SQL Server to only the applications and clients that need it.</span></span>
- <span data-ttu-id="d3f29-111">Dodržujte doporučené postupy pro správu uživatelské účty a hesla.</span><span class="sxs-lookup"><span data-stu-id="d3f29-111">Follow best practices for managing user accounts and passwords.</span></span>

<span data-ttu-id="d3f29-112">Následující části obsahují návrhy na přemýšlení prostřednictvím těchto bodů.</span><span class="sxs-lookup"><span data-stu-id="d3f29-112">The following sections provide suggestions on thinking through these points.</span></span>

## <a name="secure-connections"></a><span data-ttu-id="d3f29-113">Zabezpečené připojení</span><span class="sxs-lookup"><span data-stu-id="d3f29-113">Secure connections</span></span>

<span data-ttu-id="d3f29-114">Při vytváření virtuálního počítače s SQL serverem pomocí bitovou kopii Galerie **připojení k serveru SQL** možnost vám dává možnost **místní (uvnitř virtuálního počítače)**, **privátní (uvnitř virtuální sítě)**, nebo **veřejné (Internet)**.</span><span class="sxs-lookup"><span data-stu-id="d3f29-114">When you create a SQL Server virtual machine with a gallery image, the **SQL Server Connectivity** option gives you the choice of **Local (inside VM)**, **Private (within Virtual Network)**, or **Public (Internet)**.</span></span>

![Připojení k SQL serveru](./media/virtual-machines-windows-sql-security/sql-vm-connectivity-option.png)

<span data-ttu-id="d3f29-116">Nejvyšší zabezpečení zvolte možnost nejvíc omezující pro váš scénář.</span><span class="sxs-lookup"><span data-stu-id="d3f29-116">For the best security, choose the most restrictive option for your scenario.</span></span> <span data-ttu-id="d3f29-117">Například pokud používáte aplikaci který přistupuje k systému SQL Server na stejný virtuální počítač, pak **místní** je nejbezpečnější volbou.</span><span class="sxs-lookup"><span data-stu-id="d3f29-117">For example, if you are running an application that accesses SQL Server on the same VM, then **Local** is the most secure choice.</span></span> <span data-ttu-id="d3f29-118">Pokud používáte aplikaci Azure, která vyžaduje přístup k systému SQL Server, pak **privátní** zabezpečuje komunikaci pro SQL Server pouze v rámci zadaného [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d3f29-118">If you are running an Azure application that requires access to the SQL Server, then **Private** secures communication to SQL Server only within the specified [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="d3f29-119">Pokud budete potřebovat **veřejné** (internest) přístup k systému SQL Server virtuální počítač, pak proveďte dodržujte ostatní osvědčené postupy v tomto tématu, snížit útoku útoku.</span><span class="sxs-lookup"><span data-stu-id="d3f29-119">If you require **Public** (internest) access to the SQL Server VM, then make sure to follow other best practices in this topic to reduce your attack surface area.</span></span>

<span data-ttu-id="d3f29-120">Vybrané možnosti portálu použít pravidla zabezpečení příchozích na virtuálních počítačích [skupinu zabezpečení sítě](../../../virtual-network/virtual-networks-nsg.md) (NSG), aby povolili nebo zakázali síťový provoz do virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="d3f29-120">The selected options in the portal use inbound security rules on the VMs [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) (NSG) to allow or deny network traffic to your virtual machine.</span></span> <span data-ttu-id="d3f29-121">Můžete upravit nebo vytvořit nový příchozí pravidla NSG, které chcete povolit přenosy na portu SQL Server (standardně 1433).</span><span class="sxs-lookup"><span data-stu-id="d3f29-121">You can modify or create new inbound NSG rules to allow traffic to the SQL Server port (default 1433).</span></span> <span data-ttu-id="d3f29-122">Můžete také zadat konkrétní IP adresy, které jsou povoleny pro komunikaci prostřednictvím tohoto portu.</span><span class="sxs-lookup"><span data-stu-id="d3f29-122">You can also specify specific IP addresses that are allowed to communicate over this port.</span></span>

![Pravidla skupiny zabezpečení sítě](./media/virtual-machines-windows-sql-security/sql-vm-network-security-group-rules.png)

<span data-ttu-id="d3f29-124">Kromě pravidel NSG omezit síťový provoz můžete také použít brány Windows Firewall na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="d3f29-124">In addition to NSG rules to restrict network traffic, you can also use the Windows Firewall on the virtual machine.</span></span>

<span data-ttu-id="d3f29-125">Pokud používáte koncových bodů s modelem nasazení classic, odeberte žádné koncové body na virtuálním počítači, pokud je nepoužíváte.</span><span class="sxs-lookup"><span data-stu-id="d3f29-125">If you are using endpoints with the classic deployment model, remove any endpoints on the virtual machine if you do not use them.</span></span> <span data-ttu-id="d3f29-126">Pokyny pro koncové body pomocí seznamů řízení přístupu, v tématu [spravovat seznam ACL u koncového bodu](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span><span class="sxs-lookup"><span data-stu-id="d3f29-126">For instructions on using ACLs with endpoints, see [Manage the ACL on an endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span></span> <span data-ttu-id="d3f29-127">To není nutné pro virtuální počítače, které používají Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d3f29-127">This is not necessary for VMs that use the Resource Manager.</span></span>

<span data-ttu-id="d3f29-128">Nakonec je třeba zvážit povolení šifrované připojení pro instanci databázového stroje SQL Server ve virtuálním počítači Azure.</span><span class="sxs-lookup"><span data-stu-id="d3f29-128">Finally, consider enabling encrypted connections for the instance of the SQL Server Database Engine in your Azure virtual machine.</span></span> <span data-ttu-id="d3f29-129">Instance systému SQL server nakonfigurujte certifikát podepsaný držitelem.</span><span class="sxs-lookup"><span data-stu-id="d3f29-129">Configure SQL server instance with a signed certificate.</span></span> <span data-ttu-id="d3f29-130">Další informace najdete v tématu [povolit šifrované připojení k databázovému stroji](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) a [syntaxi připojovacího řetězce](https://msdn.microsoft.com/library/ms254500.aspx).</span><span class="sxs-lookup"><span data-stu-id="d3f29-130">For more information, see [Enable Encrypted Connections to the Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) and [Connection String Syntax](https://msdn.microsoft.com/library/ms254500.aspx).</span></span>

## <a name="use-a-non-default-port"></a><span data-ttu-id="d3f29-131">Použijte jiný než výchozí port</span><span class="sxs-lookup"><span data-stu-id="d3f29-131">Use a non-default port</span></span>

<span data-ttu-id="d3f29-132">Ve výchozím nastavení SQL Server naslouchá na dobře známé port 1433.</span><span class="sxs-lookup"><span data-stu-id="d3f29-132">By default, SQL Server listens on a well-known port, 1433.</span></span> <span data-ttu-id="d3f29-133">Pro zvýšení zabezpečení nakonfigurujte SQL Server tak, aby naslouchala na jiný než výchozí port, jako je například 1401.</span><span class="sxs-lookup"><span data-stu-id="d3f29-133">For increased security, configure SQL Server to listen on a non-default port, such as 1401.</span></span> <span data-ttu-id="d3f29-134">Pokud zřizujete Galerie bitovou kopii systému SQL Server na portálu Azure, můžete zadat Tento port v **nastavení systému SQL Server** okno.</span><span class="sxs-lookup"><span data-stu-id="d3f29-134">If you provision a SQL Server gallery image in the Azure portal, you can specify this port in the **SQL Server settings** blade.</span></span>

<span data-ttu-id="d3f29-135">Chcete-li konfiguraci po zřízení, máte dvě možnosti:</span><span class="sxs-lookup"><span data-stu-id="d3f29-135">To configure this after provisioning, you have two options:</span></span>

- <span data-ttu-id="d3f29-136">Pro virtuální počítače správce prostředků, můžete vybrat **konfigurace systému SQL Server** v okně Přehled virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="d3f29-136">For Resource Manager VMs, you can select **SQL Server configuration** from the VM overview blade.</span></span> <span data-ttu-id="d3f29-137">To nabízí možnost, chcete-li změnit port.</span><span class="sxs-lookup"><span data-stu-id="d3f29-137">This provides an option to change the port.</span></span>

  ![Změnit TCP port portálu](./media/virtual-machines-windows-sql-security/sql-vm-change-tcp-port.png)

- <span data-ttu-id="d3f29-139">Klasické virtuální počítače nebo virtuální počítače serveru SQL, které nebyly zřízeny na portálu můžete ručně nakonfigurovat port vzdálené připojení k virtuálnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="d3f29-139">For Classic VMs or for SQL Server VMs that were not provisioned with the portal, you can manually configure the port by connecting remotely to the VM.</span></span> <span data-ttu-id="d3f29-140">Postup konfigurace najdete v tématu [konfigurace serveru pro naslouchání na specifickém portu TCP](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span><span class="sxs-lookup"><span data-stu-id="d3f29-140">For the configuration steps, see [Configure a Server to Listen on a Specific TCP Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span></span> <span data-ttu-id="d3f29-141">Pokud použijete tento Ruční postup, musíte taky přidat pravidlo brány Windows Firewall povolit příchozí přenosy na portu TCP.</span><span class="sxs-lookup"><span data-stu-id="d3f29-141">If you use this manual technique, you also need to add a Windows Firewall rule to allow incoming traffic on that TCP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d3f29-142">Určení jiný než výchozí port je vhodné, pokud vaše port serveru SQL Server je otevřená a veřejného připojení k Internetu.</span><span class="sxs-lookup"><span data-stu-id="d3f29-142">Specifying a non-default port is a good idea if your SQL Server port is open to public internet connections.</span></span>

<span data-ttu-id="d3f29-143">Pokud SQL Server naslouchá na jiný než výchozí port, musíte zadat port při připojení.</span><span class="sxs-lookup"><span data-stu-id="d3f29-143">When SQL Server is listening on a non-default port, you must specify the port when you connect.</span></span> <span data-ttu-id="d3f29-144">Zvažte například scénář, kde je IP adresa serveru je 13.55.255.255 a SQL Server naslouchá na portu 1401.</span><span class="sxs-lookup"><span data-stu-id="d3f29-144">For example, consider a scenario where the server IP address is 13.55.255.255 and SQL Server is listening on port 1401.</span></span> <span data-ttu-id="d3f29-145">Pro připojení k systému SQL Server, zadejte `13.55.255.255,1401` v připojovacím řetězci.</span><span class="sxs-lookup"><span data-stu-id="d3f29-145">To connect to SQL Server, you would specify `13.55.255.255,1401` in the connection string.</span></span>

## <a name="manage-accounts"></a><span data-ttu-id="d3f29-146">Správa účtů</span><span class="sxs-lookup"><span data-stu-id="d3f29-146">Manage accounts</span></span>

<span data-ttu-id="d3f29-147">Nechcete, aby útočníci snadno uhodnout názvy účtů nebo hesel.</span><span class="sxs-lookup"><span data-stu-id="d3f29-147">You don't want attackers to easily guess account names or passwords.</span></span> <span data-ttu-id="d3f29-148">Chcete, použijte následující tipy:</span><span class="sxs-lookup"><span data-stu-id="d3f29-148">Use the following tips to help:</span></span>

- <span data-ttu-id="d3f29-149">Vytvořte účet jedinečný místního správce, který není s názvem **správce**.</span><span class="sxs-lookup"><span data-stu-id="d3f29-149">Create a unique local administrator account that is not named **Administrator**.</span></span>

- <span data-ttu-id="d3f29-150">Používejte silná hesla, komplexní pro všechny účty.</span><span class="sxs-lookup"><span data-stu-id="d3f29-150">Use complex strong passwords for all your accounts.</span></span> <span data-ttu-id="d3f29-151">Další informace o tom, jak vytvořit silné heslo, najdete v části [vytvořit silné heslo](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) článku.</span><span class="sxs-lookup"><span data-stu-id="d3f29-151">For more information about how to create a strong password, see [Create a strong password](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) article.</span></span>

- <span data-ttu-id="d3f29-152">Ve výchozím nastavení vybere Azure ověřování systému Windows během instalace virtuálního počítače systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d3f29-152">By default, Azure selects Windows Authentication during SQL Server Virtual Machine setup.</span></span> <span data-ttu-id="d3f29-153">Proto **SA** přihlášení je zakázané a heslo přiděluje instalační program.</span><span class="sxs-lookup"><span data-stu-id="d3f29-153">Therefore, the **SA** login is disabled and a password is assigned by setup.</span></span> <span data-ttu-id="d3f29-154">Doporučujeme, aby **SA** přihlášení by neměly být použít nebo povoleno.</span><span class="sxs-lookup"><span data-stu-id="d3f29-154">We recommend that the **SA** login should not be used or enabled.</span></span> <span data-ttu-id="d3f29-155">Pokud máte přihlašovací jméno SQL, použijte jednu z následujících strategií:</span><span class="sxs-lookup"><span data-stu-id="d3f29-155">If you must have a SQL login, use one of the following strategies:</span></span>

  - <span data-ttu-id="d3f29-156">Vytvoření účtu SQL s jedinečným názvem, který má **sysadmin** členství.</span><span class="sxs-lookup"><span data-stu-id="d3f29-156">Create a SQL account with a unique name that has **sysadmin** membership.</span></span> <span data-ttu-id="d3f29-157">Můžete k tomu z portálu povolením **ověřování SQL** během zřizování.</span><span class="sxs-lookup"><span data-stu-id="d3f29-157">You can do this from the portal by enabling **SQL Authentication** during provisioning.</span></span>

    > [!TIP] 
    > <span data-ttu-id="d3f29-158">Pokud nepovolíte ověřování SQL při zřizování, musíte ručně změnit režim ověřování systému **systému SQL Server a režim ověřování systému Windows**.</span><span class="sxs-lookup"><span data-stu-id="d3f29-158">If you do not enable SQL Authentication during provisioning, you must manually change the authentication mode to **SQL Server and Windows Authentication Mode**.</span></span> <span data-ttu-id="d3f29-159">Další informace najdete v tématu [Změna režimu ověřování serveru](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="d3f29-159">For more information, see [Change Server Authentication Mode](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span></span>

  - <span data-ttu-id="d3f29-160">Pokud je nutné použít **SA** přihlášení, povolit přihlášení po zřízení a přiřazení nové silné heslo.</span><span class="sxs-lookup"><span data-stu-id="d3f29-160">If you must use the **SA** login, enable the login after provisioning and assign a new strong password.</span></span>

## <a name="follow-on-premises-best-practices"></a><span data-ttu-id="d3f29-161">Použijte místní osvědčené postupy</span><span class="sxs-lookup"><span data-stu-id="d3f29-161">Follow on-premises best practices</span></span>

<span data-ttu-id="d3f29-162">Kromě postupů popsaných v tomto tématu doporučujeme zkontrolovat a implementovat tradičních místních postupy zabezpečení, kde je to možné.</span><span class="sxs-lookup"><span data-stu-id="d3f29-162">In addition to the practices described in this topic, we recommend that you review and implement the traditional on-premises security practices where applicable.</span></span> <span data-ttu-id="d3f29-163">Další informace najdete v tématu [důležité informace o zabezpečení pro instalaci serveru SQL](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span><span class="sxs-lookup"><span data-stu-id="d3f29-163">For more information, see [Security Considerations for a SQL Server Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span></span>

## <a name="next-steps"></a><span data-ttu-id="d3f29-164">Další kroky</span><span class="sxs-lookup"><span data-stu-id="d3f29-164">Next Steps</span></span>

<span data-ttu-id="d3f29-165">Pokud vás zajímá také osvědčené postupy týkající se výkonu, najdete v části [osvědčené postupy z hlediska výkonu pro SQL Server v Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="d3f29-165">If you are also interested in best practices around performance, see [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="d3f29-166">Další témata související se systémem SQL Server ve virtuálních počítačích Azure, najdete v části [SQL Server na virtuálních počítačích Azure přehled](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d3f29-166">For other topics related to running SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

