---
title: "Migrace databáze SQL serveru do systému SQL Server na virtuálním počítači | Microsoft Docs"
description: "Další informace o tom, jak migrovat databázi místní uživatele k systému SQL Server ve virtuálním počítači Azure."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 68767534298783083a441aa295611914d0df9db0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="migrate-a-sql-server-database-to-sql-server-in-an-azure-vm"></a><span data-ttu-id="ef2cd-103">Migrovat databázi SQL Serveru na SQL Server na virtuálním počítači Azure</span><span class="sxs-lookup"><span data-stu-id="ef2cd-103">Migrate a SQL Server database to SQL Server in an Azure VM</span></span>

<span data-ttu-id="ef2cd-104">Existuje několik metod pro migraci databáze uživatelů technologie místní systém SQL Server do systému SQL Server ve virtuálním počítači Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-104">There are a number of methods to migrate an on-premises SQL Server user database to SQL Server in an Azure VM.</span></span> <span data-ttu-id="ef2cd-105">Tento článek se stručně popisují různé metody a doporučuje nejlepší metody pro různé scénáře.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-105">This article will briefly discuss various methods and recommend the best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-the-primary-migration-methods"></a><span data-ttu-id="ef2cd-106">Jaké jsou metody primární migrace?</span><span class="sxs-lookup"><span data-stu-id="ef2cd-106">What are the primary migration methods?</span></span>
<span data-ttu-id="ef2cd-107">Primární migrace metody jsou následující:</span><span class="sxs-lookup"><span data-stu-id="ef2cd-107">The primary migration methods are:</span></span>

* <span data-ttu-id="ef2cd-108">Místní zálohování pomocí komprese a ručně zkopírujte záložní soubor do virtuálního počítače Azure</span><span class="sxs-lookup"><span data-stu-id="ef2cd-108">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>
* <span data-ttu-id="ef2cd-109">Proveďte zálohu adresy URL a obnovení do virtuálního počítače Azure z adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef2cd-109">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>
* <span data-ttu-id="ef2cd-110">Odpojte a poté zkopírujte soubory protokolu a data do Azure blob storage a pak připojte k serveru SQL Server ve virtuálním počítači Azure z adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef2cd-110">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="ef2cd-111">Převod fyzického počítače na místní disk VHD Hyper-V, odešle do úložiště objektů Blob v Azure a pak nasadit jako nový virtuální počítač pomocí nahrát virtuální pevný disk</span><span class="sxs-lookup"><span data-stu-id="ef2cd-111">Convert on-premises physical machine to Hyper-V VHD, upload to Azure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="ef2cd-112">Dodávat pevný disk pomocí služby Windows importu a exportu</span><span class="sxs-lookup"><span data-stu-id="ef2cd-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="ef2cd-113">Pokud máte nasazení AlwaysOn místně, použijte [Průvodce přidáním Azure repliky](../classic/sql-onprem-availability.md) vytvoření repliky ve službě Azure a pak převzetí služeb při selhání, přejdete na příkaz uživatelé instance databáze Azure</span><span class="sxs-lookup"><span data-stu-id="ef2cd-113">If you have an AlwaysOn deployment on-premises, use the [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) to create a replica in Azure and then failover, pointing users to the Azure database instance</span></span>
* <span data-ttu-id="ef2cd-114">Pomocí systému SQL Server [transakční replikace](https://msdn.microsoft.com/library/ms151176.aspx) konfigurovat instanci serveru SQL Azure jako odběratele a potom zakažte replikaci, přejdete na příkaz uživatelé instance databáze Azure</span><span class="sxs-lookup"><span data-stu-id="ef2cd-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) to configure the Azure SQL Server instance as a subscriber and then disable replication, pointing users to the Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="ef2cd-115">Stejné postupy můžete použít také k přesunutí databází mezi virtuálním počítačům systému SQL Server v Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-115">You can also use these same techniques to move databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="ef2cd-116">Není třeba žádné podporované způsob, jak upgradovat Galerie image virtuálního počítače systému SQL Server z jedné verzi nebo edici do jiného.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-116">For example, there is no supported way to upgrade a SQL Server gallery-image VM from one version/edition to another.</span></span> <span data-ttu-id="ef2cd-117">V takovém případě by měl vytvořit nový virtuální počítač SQL Server s novou verzi nebo edici a pak použijte jednu z techniky migrace v tomto článku Přesunutí databází.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-117">In this case, you should create a new SQL Server VM with the new version/edition, and then use one of the migration techniques in this article to move your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="ef2cd-118">Volba způsob migrace</span><span class="sxs-lookup"><span data-stu-id="ef2cd-118">Choosing your migration method</span></span>
<span data-ttu-id="ef2cd-119">Pro optimální data výkonu přenosu migrace soubory databáze do virtuálního počítače Azure komprimované záložního souboru.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-119">For optimum data transfer performance, migrate the database files into the Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="ef2cd-120">Chcete-li minimalizovat prostoje během procesu migrace databáze, použijte možnost AlwaysOn nebo transakční replikace.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-120">To minimize downtime during the database migration process, use either the AlwaysOn option or the transactional replication option.</span></span>

<span data-ttu-id="ef2cd-121">Pokud není možné použít výše uvedené metody, ruční migraci databáze.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-121">If it is not possible to use the above methods, manually migrate your database.</span></span> <span data-ttu-id="ef2cd-122">Tuto metodu použijete, se obecně začínat zálohu databáze, za nímž následuje kopii zálohy databáze do Azure a poté proveďte obnovení databáze.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-122">Using this method, you will generally start with a database backup followed by a copy of the database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="ef2cd-123">Můžete také zkopírovat soubory databáze sami do Azure a připojte je.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-123">You can also copy the database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="ef2cd-124">Existuje několik metod, které můžete provést tento ruční proces migrace databáze do virtuálního počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="ef2cd-125">Když upgradujete SQL Server 2014 nebo SQL Server 2016 ze starších verzí systému SQL Server, měli byste zvážit, zda je nutné provést změny.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-125">When you upgrade to SQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="ef2cd-126">Doporučujeme, abyste předem vyřešili všechny závislosti na funkcích nepodporuje novou verzi systému SQL Server jako součást migrace projektu.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-126">We recommend that you address all dependencies on features not supported by the new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="ef2cd-127">Další informace o podporovaných edicích a scénáře, najdete v části [upgradujte na SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-127">For more information on the supported editions and scenarios, see [Upgrade to SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="ef2cd-128">Následující tabulka obsahuje seznam všech metod primární migrace a popisuje, když je nejvhodnější použití každé metody.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-128">The following table lists each of the primary migration methods and discusses when the use of each method is most appropriate.</span></span>

| <span data-ttu-id="ef2cd-129">Metoda</span><span class="sxs-lookup"><span data-stu-id="ef2cd-129">Method</span></span> | <span data-ttu-id="ef2cd-130">Verze databáze zdroje</span><span class="sxs-lookup"><span data-stu-id="ef2cd-130">Source database version</span></span> | <span data-ttu-id="ef2cd-131">Verze cíle pro databáze</span><span class="sxs-lookup"><span data-stu-id="ef2cd-131">Destination database version</span></span> | <span data-ttu-id="ef2cd-132">Omezení velikosti zálohy zdrojové databáze</span><span class="sxs-lookup"><span data-stu-id="ef2cd-132">Source database backup size constraint</span></span> | <span data-ttu-id="ef2cd-133">Poznámky</span><span class="sxs-lookup"><span data-stu-id="ef2cd-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="ef2cd-134">Místní zálohování pomocí komprese a ručně zkopírujte záložní soubor do virtuálního počítače Azure</span><span class="sxs-lookup"><span data-stu-id="ef2cd-134">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="ef2cd-135">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="ef2cd-136">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="ef2cd-137">Azure limitu úložiště virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ef2cd-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="ef2cd-138">To je velmi jednoduché a dobře otestované technika pro přesunutí databází mezi počítače.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="ef2cd-139">Proveďte zálohu adresy URL a obnovení do virtuálního počítače Azure z adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef2cd-139">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="ef2cd-140">SQL Server 2012 SP1 CU2 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="ef2cd-141">SQL Server 2012 SP1 CU2 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="ef2cd-142">< 12,8 TB pro SQL Server 2016, jinak < 1 TB</span><span class="sxs-lookup"><span data-stu-id="ef2cd-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="ef2cd-143">Tato metoda je další způsob, jak přesunout záložní soubor k virtuálnímu počítači pomocí úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-143">This method is just another way to move the backup file to the VM using Azure storage.</span></span> |
| [<span data-ttu-id="ef2cd-144">Odpojte a poté zkopírujte soubory protokolu a data do Azure blob storage a pak připojte k serveru SQL Server ve virtuálním počítači Azure z adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef2cd-144">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="ef2cd-145">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="ef2cd-146">SQL Server 2014 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="ef2cd-147">Azure limitu úložiště virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ef2cd-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="ef2cd-148">Tuto metodu použijte, když plánujete [ukládání těchto souborů pomocí služby Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx) a připojte je k SQL Server běžící ve virtuálním počítači Azure, zejména s velmi velké databáze</span><span class="sxs-lookup"><span data-stu-id="ef2cd-148">Use this method when you plan to [store these files using the Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them to SQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="ef2cd-149">Převést na místním počítači na virtuální pevné disky Hyper-V, odešle do úložiště objektů Blob v Azure a pak nasadit nové virtuální počítač pomocí nahraný virtuální pevný disk</span><span class="sxs-lookup"><span data-stu-id="ef2cd-149">Convert on-premises machine to Hyper-V VHDs, upload to Azure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="ef2cd-150">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="ef2cd-151">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="ef2cd-152">Azure limitu úložiště virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ef2cd-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="ef2cd-153">Použijte, když [přinesou vlastní licenci na SQL Server](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), při migraci databáze, která se spustí ve starší verzi systému SQL Server nebo při migraci databáze systému a uživatele společně jako součást migrace závisí na jiné databáze uživatel databáze nebo systémové databáze.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of the migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="ef2cd-154">Dodávat pevný disk pomocí služby Windows importu a exportu</span><span class="sxs-lookup"><span data-stu-id="ef2cd-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="ef2cd-155">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="ef2cd-156">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="ef2cd-157">Azure limitu úložiště virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ef2cd-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="ef2cd-158">Použití [importu/exportu služby systému Windows](../../../storage/common/storage-import-export-service.md) po příliš pomalé, například s velmi velké databáze ruční copy – metoda</span><span class="sxs-lookup"><span data-stu-id="ef2cd-158">Use the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="ef2cd-159">Použití Azure repliky Průvodce přidáním</span><span class="sxs-lookup"><span data-stu-id="ef2cd-159">Use the Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="ef2cd-160">SQL Server 2012 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="ef2cd-161">SQL Server 2012 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="ef2cd-162">Azure limitu úložiště virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ef2cd-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="ef2cd-163">Minimalizuje prostoje, použijte v případě nasazení místní AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="ef2cd-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="ef2cd-164">Pomocí transakční replikace systému SQL Server</span><span class="sxs-lookup"><span data-stu-id="ef2cd-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="ef2cd-165">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="ef2cd-166">SQL Server 2005 nebo vyšší</span><span class="sxs-lookup"><span data-stu-id="ef2cd-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="ef2cd-167">Azure limitu úložiště virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ef2cd-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="ef2cd-168">Použijte, pokud budete muset minimalizovat prostoje a nemají místní nasazení AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="ef2cd-168">Use when you need to minimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="ef2cd-169">Zálohování a obnovení</span><span class="sxs-lookup"><span data-stu-id="ef2cd-169">Backup and restore</span></span>
<span data-ttu-id="ef2cd-170">Zálohovat databázi s kompresí zkopírujte zálohování na virtuální počítač a potom obnovit databázi.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-170">Back up your database with compression, copy the backup to the VM, and then restore the database.</span></span> <span data-ttu-id="ef2cd-171">Pokud záložní soubor je větší než 1 TB, musí ho rozkládají, protože maximální velikost disku virtuálního počítače je 1 TB.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-171">If your backup file is larger than 1 TB, you must stripe it because the maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="ef2cd-172">Použijte následující obecné kroky pro migraci uživatele databáze pomocí této metody Ruční:</span><span class="sxs-lookup"><span data-stu-id="ef2cd-172">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="ef2cd-173">Proveďte úplnou zálohu databáze do místního umístění.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-173">Perform a full database backup to an on-premises location.</span></span>
2. <span data-ttu-id="ef2cd-174">Vytvořit nebo nahrát virtuální počítač s verzí systému SQL Server potřeby.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-174">Create or upload a virtual machine with the version of SQL Server desired.</span></span>
3. <span data-ttu-id="ef2cd-175">Nastavte připojení podle svých požadavků.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="ef2cd-176">V tématu [připojit k virtuálnímu počítači serveru SQL v Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-176">See [Connect to a SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="ef2cd-177">Zkopírujte záložní soubory do virtuálního počítače pomocí vzdálené plochy, Průzkumníka Windows nebo kopírování příkazu z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-177">Copy your backup file(s) to your VM using remote desktop, Windows Explorer or the copy command from a command prompt.</span></span>

## <a name="backup-to-url-and-restore"></a><span data-ttu-id="ef2cd-178">Zálohování na adresu URL a obnovení</span><span class="sxs-lookup"><span data-stu-id="ef2cd-178">Backup to URL and restore</span></span>
<span data-ttu-id="ef2cd-179">Namísto zálohování do místního souboru, můžete použít [zálohování na adresu URL](https://msdn.microsoft.com/library/dn435916.aspx) a potom obnovte virtuální počítač z adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-179">Instead of backing up to a local file, you can use the [backup to URL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL to the VM.</span></span> <span data-ttu-id="ef2cd-180">Pomocí SQL serveru 2016 prokládané zálohovací sklady jsou podporovány, jsou doporučené pro výkon a musí překračovat limity velikosti za objektů blob.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required to exceed the size limits per blob.</span></span> <span data-ttu-id="ef2cd-181">Pro velké databáze, použití [importu/exportu služby systému Windows](../../../storage/common/storage-import-export-service.md) se doporučuje.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-181">For very large databases, the use of the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="ef2cd-182">Odpojit a připojit z adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef2cd-182">Detach and attach from URL</span></span>
<span data-ttu-id="ef2cd-183">Odpojení vaší databáze a soubory protokolu a jejich přenos [úložiště objektů Azure Blob](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-183">Detach your database and log files and transfer them to [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="ef2cd-184">Pak připojili databázi z adresy URL na vašem virtuálním počítači Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-184">Then attach the database from the URL on your Azure VM.</span></span> <span data-ttu-id="ef2cd-185">Použijte, pokud chcete soubory fyzické databáze jsou umístěny v úložišti objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-185">Use this if you want the physical database files to reside in Blob storage.</span></span> <span data-ttu-id="ef2cd-186">To může být užitečná pro velké databáze.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-186">This might be useful for very large databases.</span></span> <span data-ttu-id="ef2cd-187">Použijte následující obecné kroky pro migraci uživatele databáze pomocí této metody Ruční:</span><span class="sxs-lookup"><span data-stu-id="ef2cd-187">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="ef2cd-188">Odpojte soubory databáze z místní instanci databáze.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-188">Detach the database files from the on-premises database instance.</span></span>
2. <span data-ttu-id="ef2cd-189">Zkopírujte soubory odpojit databáze do úložiště objektů blob v Azure pomocí [příkazového řádku azcopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-189">Copy the detached database files into Azure blob storage using the [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="ef2cd-190">Připojte soubory databáze z adresy URL Azure k instanci systému SQL Server ve virtuálním počítači Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-190">Attach the database files from the Azure URL to the SQL Server instance in the Azure VM.</span></span>

## <a name="convert-to-vm-and-upload-to-url-and-deploy-as-new-vm"></a><span data-ttu-id="ef2cd-191">Převést na virtuální počítač a nahrát na URL a nasadit jako nový virtuální počítač</span><span class="sxs-lookup"><span data-stu-id="ef2cd-191">Convert to VM and upload to URL and deploy as new VM</span></span>
<span data-ttu-id="ef2cd-192">Tuto metodu použijte k migraci všech systému a uživatele databáze v instanci systému SQL Server místní na virtuální počítač Azure.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-192">Use this method to migrate all system and user databases in an on-premises SQL Server instance to Azure virtual machine.</span></span> <span data-ttu-id="ef2cd-193">Použijte následující obecné kroky pro migraci instanci systému SQL Server pomocí této metody Ruční:</span><span class="sxs-lookup"><span data-stu-id="ef2cd-193">Use the following general steps to migrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="ef2cd-194">Převést fyzické nebo virtuální počítače Hyper-V virtuální pevné disky pomocí [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-194">Convert physical or virtual machines to Hyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="ef2cd-195">Odesílat soubory virtuálního pevného disku do úložiště Azure pomocí [rutinu Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-195">Upload VHD files to Azure Storage by using the [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="ef2cd-196">Nasazení nového virtuálního počítače pomocí nahraný virtuální pevný disk.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-196">Deploy a new virtual machine by using the uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="ef2cd-197">Pokud chcete migrovat celou aplikaci, zvažte použití [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="ef2cd-197">To migrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="ef2cd-198">Dodávat pevný disk</span><span class="sxs-lookup"><span data-stu-id="ef2cd-198">Ship hard drive</span></span>
<span data-ttu-id="ef2cd-199">Použití [metoda importu/exportu služby systému Windows](../../../storage/common/storage-import-export-service.md) přenos velkých objemů dat souborů do úložiště objektů Blob v Azure v situacích, kde odesílání přes síť je výtažkovými nebo není vhodný.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-199">Use the [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) to transfer large amounts of file data to Azure Blob storage in situations where uploading over the network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="ef2cd-200">S touto službou odeslat jeden nebo více pevné disky obsahující data pro datové centrum Azure, kde bude vaše data nahrán do účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-200">With this service, you send one or more hard drives containing that data to an Azure data center, where your data will be uploaded to your storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ef2cd-201">Další kroky</span><span class="sxs-lookup"><span data-stu-id="ef2cd-201">Next Steps</span></span>
<span data-ttu-id="ef2cd-202">Další informace o spuštění systému SQL Server na virtuálních počítačích Azure najdete v tématu [SQL Server na virtuálních počítačích Azure přehled](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ef2cd-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="ef2cd-203">Pokyny pro vytvoření virtuálního počítače serveru SQL Azure ze zaznamenané bitové kopie, naleznete v části [tipy a triky na klonování virtuálních počítačích Azure SQL ze zaznamenané bitové kopie](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) na blogu technici serveru SQL šablon stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="ef2cd-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on the CSS SQL Server Engineers blog.</span></span>

