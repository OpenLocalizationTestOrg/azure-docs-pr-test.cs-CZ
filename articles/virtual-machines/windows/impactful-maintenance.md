---
title: "Zvládat údržby pro virtuální počítače Windows v Azure | Microsoft Docs"
description: "Zvládat údržby pro virtuální počítače s Windows."
services: virtual-machines-windows
documentationcenter: 
author: zivr
manager: timlt
editor: 
tags: azure-service-management,azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 03/27/2017
ms.author: zivr
ms.openlocfilehash: 75cd4d567deb98e5d2498dc607b43dae483f1c94
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="impactful-maintenance-for-virtual-machines"></a><span data-ttu-id="40801-103">Zvládat údržby pro virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="40801-103">Impactful maintenance for virtual machines</span></span>

<span data-ttu-id="40801-104">Existuje několik případů, kdy jsou virtuální počítače restartovat z důvodu plánované údržby základní infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="40801-104">There are few cases where your VMs are rebooted due to planned maintenance to the underlying infrastructure.</span></span> <span data-ttu-id="40801-105">Probíhá zvládat na dostupnost virtuální počítače hostované v Azure, tady jsou nyní k dispozici pro použití:</span><span class="sxs-lookup"><span data-stu-id="40801-105">Being impactful to the availability of your VMs hosted in Azure, the following are now available for you to use:</span></span>

-   <span data-ttu-id="40801-106">Minimálně 30 dnů před dopad odesláno oznámení.</span><span class="sxs-lookup"><span data-stu-id="40801-106">Notification sent at least 30 days before the impact.</span></span>

-   <span data-ttu-id="40801-107">Přehled a viditelnost pro údržbu na každý virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="40801-107">Visibility to the maintenance windows per each VM.</span></span>

-   <span data-ttu-id="40801-108">Flexibilita a řízení v nastavení přesný čas údržby měly týkat virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-108">Flexibility and control in setting the exact time for maintenance to impact your VMs.</span></span>

<span data-ttu-id="40801-109">Údržby v Microsoft Azure je naplánován v iterací.</span><span class="sxs-lookup"><span data-stu-id="40801-109">Maintenance in Microsoft Azure is scheduled in iterations.</span></span> <span data-ttu-id="40801-110">Počáteční iterací mít menší obor snižte riziko při zavádění nové opravy a funkce.</span><span class="sxs-lookup"><span data-stu-id="40801-110">Initial iterations have smaller scope in order to reduce the risk involved in rolling out new fixes and capabilities.</span></span> <span data-ttu-id="40801-111">Novější iterací může span více oblastí (nikdy ze stejného páru oblasti).</span><span class="sxs-lookup"><span data-stu-id="40801-111">Later iterations may span multiple regions (never from the same region pair).</span></span> <span data-ttu-id="40801-112">Virtuální počítač je součástí jedné údržby iterací.</span><span class="sxs-lookup"><span data-stu-id="40801-112">A VM is included in a single maintenance iteration.</span></span> <span data-ttu-id="40801-113">Pokud byl přerušen iterace, zbývající virtuální počítače jsou součástí jiného, budoucí, iterací.</span><span class="sxs-lookup"><span data-stu-id="40801-113">If an iteration is aborted, remaining VMs are included in another, future, iteration.</span></span>

<span data-ttu-id="40801-114">Iterace plánované údržby má dvě fáze: Pre-emptive údržby a naplánovaná údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-114">The planned maintenance iteration has two phases: Pre-emptive Maintenance Window and a Scheduled-Maintenance Window.</span></span>

<span data-ttu-id="40801-115">**Pre-emptive údržby** vám poskytuje flexibilitu při zahájení údržby na virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-115">The **Pre-emptive Maintenance Window** provides you with the flexibility to initiate the maintenance on your VMs.</span></span> <span data-ttu-id="40801-116">Díky tomu můžete určit, kdy jsou dopad na virtuální počítače, pořadí aktualizace a čas mezi jednotlivé virtuální počítače, které neudržují.</span><span class="sxs-lookup"><span data-stu-id="40801-116">By doing so, you can determine when your VMs are impacted, the sequence of the update, and the time between each VM being maintained.</span></span> <span data-ttu-id="40801-117">Se můžete dotazovat každý virtuální počítač, který chcete zobrazit, zda je plánovaná pro údržbu a zkontrolujte výsledek vaší poslední žádosti initiated údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-117">You can query each VM to see whether it is planned for maintenance and check the result of your last initiated maintenance request.</span></span>

<span data-ttu-id="40801-118">**Naplánované údržby** je Azure má plánu pro údržbu virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-118">The **Scheduled Maintenance Window** is when Azure has scheduled your VMs for the maintenance.</span></span> <span data-ttu-id="40801-119">Během této doby čas, který následuje preemptivní údržby, můžete stále dotazu pro okna údržby, ale již nebude možné k orchestraci údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-119">During this time window, which follows the pre-emptive maintenance window, you can still query for the maintenance window, but no longer be able to orchestrate the maintenance.</span></span>

## <a name="availability-considerations-during-planned-maintenance"></a><span data-ttu-id="40801-120">Důležité informace o dostupnosti během plánované údržby</span><span class="sxs-lookup"><span data-stu-id="40801-120">Availability Considerations during Planned Maintenance</span></span> 

### <a name="paired-regions"></a><span data-ttu-id="40801-121">Spárované oblastí</span><span class="sxs-lookup"><span data-stu-id="40801-121">Paired Regions</span></span>

<span data-ttu-id="40801-122">Každé oblasti Azure je spárován s jinou oblast v rámci stejné geography, společně provedení pár místní.</span><span class="sxs-lookup"><span data-stu-id="40801-122">Each Azure region is paired with another region within the same geography, together making a regional pair.</span></span> <span data-ttu-id="40801-123">Při provádění údržby, bude Azure aktualizovat pouze instance virtuálních počítačů v jedné oblasti jeho dvojic.</span><span class="sxs-lookup"><span data-stu-id="40801-123">When executing maintenance, Azure will only update the Virtual Machine instances in a single region of its pair.</span></span> <span data-ttu-id="40801-124">Například při aktualizaci virtuálních počítačů v oblasti Střed USA – sever nebude Azure zároveň aktualizovat žádné virtuální počítače v oblasti Střed USA – jih.</span><span class="sxs-lookup"><span data-stu-id="40801-124">For example, when updating the Virtual Machines in North Central US, Azure will not update any Virtual Machines in South Central US at the same time.</span></span> <span data-ttu-id="40801-125">To se naplánuje na jindy – díky tomu je umožněno převzetí služeb při selhání nebo vyrovnávání zatížení mezi oblastmi.</span><span class="sxs-lookup"><span data-stu-id="40801-125">This will be scheduled at a separate time, enabling failover or load balancing between regions.</span></span> <span data-ttu-id="40801-126">V ostatních oblastech, jako je Severní Evropa, však může údržba probíhat ve stejnou dobu jako v oblasti Východní USA.</span><span class="sxs-lookup"><span data-stu-id="40801-126">However, other regions such as North Europe can be under maintenance at the same time as East US.</span></span>
<span data-ttu-id="40801-127">Další informace o [oblast Azure páry](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="40801-127">Read more about [Azure region pairs](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span></span>

### <a name="single-instance-vms-vs-availability-set-or-vm-scale-set"></a><span data-ttu-id="40801-128">Vs jedné Instance virtuálních počítačů. Sadu škálování virtuálního počítače nebo sady dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="40801-128">Single Instance VMs vs. Availability Set or VM scale set</span></span>

<span data-ttu-id="40801-129">Pokud nasazujete zatížení používání virtuálních počítačů v Azure, můžete vytvořit virtuální počítače v rámci dostupnosti nastavit k zajištění vysoké dostupnosti do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="40801-129">When deploying a workload using virtual machines in Azure, you can create the VMs within an availability set in order to provide high availability to your application.</span></span> <span data-ttu-id="40801-130">Tato konfigurace zajistí, že během výpadku nebo údržby událostí, je k dispozici alespoň jeden virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="40801-130">This configuration ensures that during either an outage or maintenance events, at least one virtual machine is available.</span></span>

<span data-ttu-id="40801-131">V rámci skupiny dostupnosti jednotlivé virtuální počítače jsou rozloženy až 20 aktualizaci domény.</span><span class="sxs-lookup"><span data-stu-id="40801-131">Within an availability set, individual VMs are spread across up to 20 update domains.</span></span> <span data-ttu-id="40801-132">Během plánované údržby je v každém okamžiku dopad pouze jednu aktualizaci domény.</span><span class="sxs-lookup"><span data-stu-id="40801-132">During planned maintenance, only a single update domain is impacted at any given time.</span></span> <span data-ttu-id="40801-133">Pořadí aktualizace domén ovlivněný nemusí pokračovat postupně během plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-133">The order of update domains being impacted may not proceed sequentially during planned maintenance.</span></span> <span data-ttu-id="40801-134">Pro virtuální počítače jediné instance (není součástí skupiny dostupnosti) neexistuje žádný způsob, jak předpovědi nebo určit, který a společně dopad na tom, kolik virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-134">For single instance VMs (not part of availability set), there is no way to predict or determine which and how many VMs are impacted together.</span></span>

<span data-ttu-id="40801-135">Sady škálování virtuálního počítače se Azure výpočtový prostředek, který umožňuje nasadit a spravovat sadu identické virtuální počítače jako jeden prostředek.</span><span class="sxs-lookup"><span data-stu-id="40801-135">Virtual machine scale sets are an Azure compute resource that enables you to deploy and manage a set of identical VMs as a single resource.</span></span>
<span data-ttu-id="40801-136">Škálovací sada poskytuje podobné záruky na dostupnosti nastavit ve formě aktualizaci domény.</span><span class="sxs-lookup"><span data-stu-id="40801-136">The scale set provides similar guarantees to an availability set in the form of update domains.</span></span> 

<span data-ttu-id="40801-137">Další informace o konfiguraci virtuálních počítačů pro zajištění vysoké dostupnosti najdete v tématu [ *Správa dostupnosti virtuálních počítačů Windows*](../linux/manage-availability.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="40801-137">For more information about configuring your virtual machines for high availability, see [*Manage the availability of your Windows virtual machines*](../linux/manage-availability.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

### <a name="scheduled-events"></a><span data-ttu-id="40801-138">Naplánované události</span><span class="sxs-lookup"><span data-stu-id="40801-138">Scheduled Events</span></span>

<span data-ttu-id="40801-139">Služba Azure Metadata umožňuje zjišťovat informace o virtuální počítač hostovaný v Azure.</span><span class="sxs-lookup"><span data-stu-id="40801-139">Azure Metadata Service enables you to discover information about your Virtual Machine hosted in Azure.</span></span> <span data-ttu-id="40801-140">Naplánované události, některou z vystaveného kategorií, povrchy informace týkající se nadcházející události (například restartování) tak, aby vaše aplikace můžete připravit pro ně a omezit přerušení.</span><span class="sxs-lookup"><span data-stu-id="40801-140">Scheduled Events, one of the exposed categories, surfaces information regarding upcoming events (for example, reboot) so your application can prepare for them and limit disruption.</span></span>

<span data-ttu-id="40801-141">Další informace o naplánované události, najdete v části [Azure Metadata Service - naplánované události](../virtual-machines-scheduled-events.md).</span><span class="sxs-lookup"><span data-stu-id="40801-141">For more information about scheduled events, refer to [Azure Metadata Service - Scheduled Events](../virtual-machines-scheduled-events.md).</span></span>

## <a name="maintenance-discovery-and-notifications"></a><span data-ttu-id="40801-142">Zjišťování údržby a oznámení</span><span class="sxs-lookup"><span data-stu-id="40801-142">Maintenance Discovery and Notifications</span></span>

<span data-ttu-id="40801-143">Plán údržby je viditelná pro zákazníky na úrovni jednotlivých virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-143">Maintenance schedule is visible to customers at the level of individual VMs.</span></span> <span data-ttu-id="40801-144">Můžete portál Azure, rozhraní API, Powershellu nebo rozhraní příkazového řádku k dotazu pro systém windows preemptivní a plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-144">You can use Azure portal, API, PowerShell, or CLI to query for the pre-emptive and scheduled maintenance windows.</span></span> <span data-ttu-id="40801-145">Kromě toho očekávají pro příjem oznámení (e-mailu) v případě, že tam, kde jsou během procesu dopad (minimálně) z virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-145">In addition, expect to receive a notification (email) in the case where one (or more) of your VMs are impacted during the process.</span></span>

<span data-ttu-id="40801-146">Preemptivní údržby a plánované údržby fáze začínat oznámení.</span><span class="sxs-lookup"><span data-stu-id="40801-146">Both pre-emptive maintenance and scheduled maintenance phases begin with a notification.</span></span> <span data-ttu-id="40801-147">Očekáváte jeden oznámení za předplatné Azure.</span><span class="sxs-lookup"><span data-stu-id="40801-147">Expect to receive a single notification per Azure subscription.</span></span> <span data-ttu-id="40801-148">Oznámení se posílá správce a spolusprávce odběru ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="40801-148">The notification is sent to the subscription’s admin and co-admin by default.</span></span> <span data-ttu-id="40801-149">Můžete také nakonfigurovat cílovou skupinu pro oznámení údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-149">You can also configure the audience for the maintenance notification.</span></span>

### <a name="view-the-maintenance-window-in-the-portal"></a><span data-ttu-id="40801-150">Zobrazit na portálu pro správu a údržbu</span><span class="sxs-lookup"><span data-stu-id="40801-150">View the Maintenance Window in the portal</span></span> 

<span data-ttu-id="40801-151">Můžete použít portál Azure a vyhledejte naplánována údržba virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-151">You can use the Azure portal and look for VMs scheduled for maintenance.</span></span>

1.  <span data-ttu-id="40801-152">Přihlaste se k portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="40801-152">Sign in to the Azure portal.</span></span>

2.  <span data-ttu-id="40801-153">Klikněte na tlačítko a otevřete **virtuální počítače** okno.</span><span class="sxs-lookup"><span data-stu-id="40801-153">Click and open the **Virtual Machines** blade.</span></span>

3.  <span data-ttu-id="40801-154">Klikněte **sloupce** tlačítko otevřete seznam dostupných sloupců lze vybírat</span><span class="sxs-lookup"><span data-stu-id="40801-154">Click the **Columns** button to open the list of available columns to choose from</span></span>

4.  <span data-ttu-id="40801-155">Vyberte a přidejte **údržby** sloupce.</span><span class="sxs-lookup"><span data-stu-id="40801-155">Select and add the **Maintenance Window** columns.</span></span> <span data-ttu-id="40801-156">Virtuální počítače, které jsou naplánovány pro údržbu mít prezentované údržby windows.</span><span class="sxs-lookup"><span data-stu-id="40801-156">VMs that are scheduled for maintenance have the maintenance windows surfaced.</span></span> <span data-ttu-id="40801-157">Jakmile je byla dokončena nebo přerušena z důvodu údržby a, časové období údržby se už nebude zobrazovat.</span><span class="sxs-lookup"><span data-stu-id="40801-157">Once maintenance is completed or aborted for a, the maintenance window is no longer be presented.</span></span>

### <a name="query-maintenance-details-using-the-azure-api"></a><span data-ttu-id="40801-158">Podrobnosti o údržby dotazu pomocí rozhraní API služby Azure</span><span class="sxs-lookup"><span data-stu-id="40801-158">Query maintenance details using the Azure API</span></span>

<span data-ttu-id="40801-159">Použití [získat informace o virtuálních počítačů API](https://docs.microsoft.com/rest/api/compute/virtualmachines/virtualmachines-get) a vyhledejte zobrazení instance k zjištění podrobností údržby na jednotlivých virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="40801-159">Use the [get VM information API](https://docs.microsoft.com/rest/api/compute/virtualmachines/virtualmachines-get) and look for the instance view to discover the maintenance details on an individual VM.</span></span> <span data-ttu-id="40801-160">Odpověď obsahuje následující prvky:</span><span class="sxs-lookup"><span data-stu-id="40801-160">The response includes the following elements:</span></span>

  - <span data-ttu-id="40801-161">isCustomerInitiatedMaintenanceAllowed: Určuje, zda nyní můžete zahájit preemptivní znovu ho zaveďte ve virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="40801-161">isCustomerInitiatedMaintenanceAllowed: Indicates whether you can now initiate pre-emptive redeploy on the VM.</span></span>

  - <span data-ttu-id="40801-162">preMaintenanceWindowStartTime: čas zahájení preemptivní údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-162">preMaintenanceWindowStartTime: The start time of the pre-emptive maintenance window.</span></span>

  - <span data-ttu-id="40801-163">preMaintenanceWindowEndTime: koncový čas pro správu a údržbu preemptivní.</span><span class="sxs-lookup"><span data-stu-id="40801-163">preMaintenanceWindowEndTime: The end time of the pre-emptive maintenance window.</span></span> <span data-ttu-id="40801-164">Po této době jste už nebude moct iniciovat údržby na tomto virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="40801-164">After this time, you will no longer be able to initiate maintenance on this VM.</span></span>
    
  - <span data-ttu-id="40801-165">maintenanceWindowStartTime: čas zahájení okno plánované údržby při dopad na virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="40801-165">maintenanceWindowStartTime: The start time of the scheduled maintenance window when your VM are impacted.</span></span>

  - <span data-ttu-id="40801-166">maintenanceWindowEndTime: koncový čas okno plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-166">maintenanceWindowEndTime: The end time of the scheduled maintenance window.</span></span>
  
  - <span data-ttu-id="40801-167">lastOperationResultCode: výsledek vaší poslední operace údržby-znovu ho zaveďte.</span><span class="sxs-lookup"><span data-stu-id="40801-167">lastOperationResultCode: The result of your last Maintenance-Redeploy operation.</span></span>
 
  - <span data-ttu-id="40801-168">lastOperationMessage: zpráva popisující výsledek vaší poslední operace údržby-znovu ho zaveďte.</span><span class="sxs-lookup"><span data-stu-id="40801-168">lastOperationMessage:  Message describing the result of your last Maintenance-Redeploy operation.</span></span>

## <a name="pre-emptive-redeploy"></a><span data-ttu-id="40801-169">Preemptivní znovu ho zaveďte</span><span class="sxs-lookup"><span data-stu-id="40801-169">Pre-emptive Redeploy</span></span>

<span data-ttu-id="40801-170">Preemptivní znovu ho zaveďte akce poskytuje flexibilní možnost určit čas, kdy se použije údržby pro virtuální počítače v Azure.</span><span class="sxs-lookup"><span data-stu-id="40801-170">Pre-emptive redeploy action provides the flexibility to control the time when maintenance is applied to your VMs in Azure.</span></span> <span data-ttu-id="40801-171">Plánovaná údržba začíná preemptivní údržby kde se můžete rozhodnout na přesný čas pro jednotlivé virtuální počítače restartovat.</span><span class="sxs-lookup"><span data-stu-id="40801-171">Planned maintenance begins with a pre-emptive maintenance window where you can decide on the exact time for each of your VMs to be rebooted.</span></span> <span data-ttu-id="40801-172">Tady jsou případy použití, kde je užitečné tyto funkce:</span><span class="sxs-lookup"><span data-stu-id="40801-172">The following are use cases where such a functionality is useful:</span></span>

-   <span data-ttu-id="40801-173">Údržby musí být zajistí koordinaci se koncového zákazníka.</span><span class="sxs-lookup"><span data-stu-id="40801-173">Maintenance need to be coordinated with the end customer.</span></span>

-   <span data-ttu-id="40801-174">Okno plánované údržby, které nabízí Azure není dostatečná.</span><span class="sxs-lookup"><span data-stu-id="40801-174">The scheduled maintenance window offered by Azure is not sufficient.</span></span>
    <span data-ttu-id="40801-175">Je možné, že okno se stane, jako na nejvytíženější času v týdnu nebo je příliš dlouhá.</span><span class="sxs-lookup"><span data-stu-id="40801-175">It could be that the window happens to be on the busiest time of the week or it is too long.</span></span>

-   <span data-ttu-id="40801-176">Pro více instancemi nebo vícevrstvé aplikace budete potřebovat dostatečnou dobu mezi dva virtuální počítače nebo určité pořadí podle.</span><span class="sxs-lookup"><span data-stu-id="40801-176">For multi-instance or multi-tier applications, you need sufficient time between two VMs or a certain sequence to follow.</span></span>

<span data-ttu-id="40801-177">Při volání pro preemptivní znovu ho zaveďte na virtuálním počítači, přesune virtuální počítač již aktualizovaný uzel a potom zapne ji zpět, zachování všech možností konfigurace a přidružených prostředků.</span><span class="sxs-lookup"><span data-stu-id="40801-177">When you call for pre-emptive redeploy on a VM, it moves the VM to an already updated node and then powers it back on, retaining all your configuration options and associated resources.</span></span> <span data-ttu-id="40801-178">Když to uděláte, dočasným diskovým dojde ke ztrátě a dynamické IP adresy přidružené k rozhraní virtuální sítě se aktualizují.</span><span class="sxs-lookup"><span data-stu-id="40801-178">While doing so, the temporary disk is lost and dynamic IP addresses associated with virtual network interface are updated.</span></span>

<span data-ttu-id="40801-179">Preemptivní znovu ho zaveďte je povoleno jednou na virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="40801-179">Pre-emptive redeploy is enabled once per VM.</span></span> <span data-ttu-id="40801-180">Pokud dojde k chybě během procesu, operace byla zrušena, virtuální počítač není ovlivněná a je vyloučen z iterace plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="40801-180">If there is an error during the process, the operation is aborted, the VM is not impacted and it is excluded from the planned maintenance iteration.</span></span> <span data-ttu-id="40801-181">Můžete se kontaktovat v později pomocí nového plánu a nabízí nové příležitosti k plánování a pořadí dopad na virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="40801-181">You will be contacted in a later time with a new schedule and offered a new opportunity to schedule and sequence the impact on your VMs.</span></span>