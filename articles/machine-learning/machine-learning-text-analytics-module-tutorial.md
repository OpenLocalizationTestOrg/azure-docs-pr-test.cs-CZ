---
title: "Vytvoření textu analýzy v nástroji Azure Machine Learning Studio | Microsoft Docs"
description: "Postup vytvoření textu analýzy v Azure Machine Learning Studio pomocí moduly pro předzpracování text, N-gram nebo hashování"
services: machine-learning
documentationcenter: 
author: rastala
manager: jhubbard
editor: 
ms.assetid: 08cd6723-3ae6-4e99-a924-e650942e461b
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/06/2016
ms.author: roastala
ms.openlocfilehash: 342e81e2497d292ca730bea59e03182d316ffec3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="create-text-analytics-models-in-azure-machine-learning-studio"></a><span data-ttu-id="36453-103">Vytvoření modelů analýzy textu v nástroji Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="36453-103">Create text analytics models in Azure Machine Learning Studio</span></span>
<span data-ttu-id="36453-104">Azure Machine Learning můžete vytvářet a zprovoznit modely analytics text.</span><span class="sxs-lookup"><span data-stu-id="36453-104">You can use Azure Machine Learning to build and operationalize text analytics models.</span></span> <span data-ttu-id="36453-105">Tyto modely vám může pomoct vyřešit, například problémy analýzy dokumentu klasifikace nebo postojích.</span><span class="sxs-lookup"><span data-stu-id="36453-105">These models can help you solve, for example, document classification or sentiment analysis problems.</span></span>

<span data-ttu-id="36453-106">V analýzy text experimentu byste obvykle:</span><span class="sxs-lookup"><span data-stu-id="36453-106">In a text analytics experiment, you would typically:</span></span>

1. <span data-ttu-id="36453-107">Vyčistěte a předběžně zpracovat datovou sadu textu</span><span class="sxs-lookup"><span data-stu-id="36453-107">Clean and preprocess text dataset</span></span>
2. <span data-ttu-id="36453-108">Extrahování vektory číselné funkce z předem zpracovaných textu</span><span class="sxs-lookup"><span data-stu-id="36453-108">Extract numeric feature vectors from pre-processed text</span></span>
3. <span data-ttu-id="36453-109">Train klasifikační nebo regresní model</span><span class="sxs-lookup"><span data-stu-id="36453-109">Train classification or regression model</span></span>
4. <span data-ttu-id="36453-110">Stanovení skóre a ověření modelu</span><span class="sxs-lookup"><span data-stu-id="36453-110">Score and validate the model</span></span>
5. <span data-ttu-id="36453-111">Model nasadit do produkčního prostředí</span><span class="sxs-lookup"><span data-stu-id="36453-111">Deploy the model to production</span></span>

<span data-ttu-id="36453-112">V tomto kurzu zjistíte podle jsme provede model analysis postojích pomocí Amazon kniha recenze datovou sadu, tyto kroky (najdete v tomto dokumentu research "biografie, Bollywood, výložníku polí a Blenders: přizpůsobení a domény pro klasifikaci postojích" Jan Blitzer, označit Dredze a Fernando Pereira; Přidružení výpočetní Linguistics (ACL), 2007.) Tato datová sada se skládá z Zkontrolujte skóre (1 – 2 nebo 4 až 5) a vlastní text.</span><span class="sxs-lookup"><span data-stu-id="36453-112">In this tutorial, you learn these steps as we walk through a sentiment analysis model using Amazon Book Reviews dataset (see this research paper “Biographies, Bollywood, Boom-boxes and Blenders: Domain Adaptation for Sentiment Classification” by John Blitzer, Mark Dredze, and Fernando Pereira; Association of Computational Linguistics (ACL), 2007.) This dataset consists of review scores (1-2 or 4-5) and a free-form text.</span></span> <span data-ttu-id="36453-113">Cílem je k předvídání Zkontrolujte skóre: nízkou (1 - 2) nebo vysokou (4 až 5).</span><span class="sxs-lookup"><span data-stu-id="36453-113">The goal is to predict the review score: low (1-2) or high (4-5).</span></span>

<span data-ttu-id="36453-114">Můžete najít experimenty, které jsou popsané v tomto kurzu na webu Cortana Intelligence Gallery:</span><span class="sxs-lookup"><span data-stu-id="36453-114">You can find experiments covered in this tutorial at Cortana Intelligence Gallery:</span></span>

[<span data-ttu-id="36453-115">Předpověď recenze adresáře</span><span class="sxs-lookup"><span data-stu-id="36453-115">Predict Book Reviews</span></span>](https://gallery.cortanaintelligence.com/Experiment/Predict-Book-Reviews-1)

[<span data-ttu-id="36453-116">Předpověď kniha recenze - prediktivní Experiment</span><span class="sxs-lookup"><span data-stu-id="36453-116">Predict Book Reviews - Predictive Experiment</span></span>](https://gallery.cortanaintelligence.com/Experiment/Predict-Book-Reviews-Predictive-Experiment-1)

## <a name="step-1-clean-and-preprocess-text-dataset"></a><span data-ttu-id="36453-117">Krok 1: Vyčištění a předběžně zpracovat datovou sadu textu</span><span class="sxs-lookup"><span data-stu-id="36453-117">Step 1: Clean and preprocess text dataset</span></span>
<span data-ttu-id="36453-118">Začneme experimentu vydělením skóre zkontrolujte do kategorií nízkou a vysokou kbelíků formulace problému jako dvě třídy klasifikace.</span><span class="sxs-lookup"><span data-stu-id="36453-118">We begin the experiment by dividing the review scores into categorical low and high buckets to formulate the problem as two-class classification.</span></span> <span data-ttu-id="36453-119">Používáme [upravit Metadata](https://msdn.microsoft.com/library/azure/dn905986.aspx) a [skupiny kategorií hodnoty](https://msdn.microsoft.com/library/azure/dn906014.aspx) moduly.</span><span class="sxs-lookup"><span data-stu-id="36453-119">We use [Edit Metadata](https://msdn.microsoft.com/library/azure/dn905986.aspx) and [Group Categorical Values](https://msdn.microsoft.com/library/azure/dn906014.aspx) modules.</span></span>

![Vytvoření popisku](./media/machine-learning-text-analytics-module-tutorial/create-label.png)

<span data-ttu-id="36453-121">Potom jsme vyčistit text pomocí [předběžně zpracovat Text](https://msdn.microsoft.com/library/azure/mt762915.aspx) modulu.</span><span class="sxs-lookup"><span data-stu-id="36453-121">Then, we clean the text using [Preprocess Text](https://msdn.microsoft.com/library/azure/mt762915.aspx) module.</span></span> <span data-ttu-id="36453-122">Čištění snižuje šumu v datové sadě, pomáhají najít nejdůležitějších funkcích a zvyšte tak přesnost konečné modelu.</span><span class="sxs-lookup"><span data-stu-id="36453-122">The cleaning reduces the noise in the dataset, help you find the most important features, and improve the accuracy of the final model.</span></span> <span data-ttu-id="36453-123">Jsme odebrat stopslova - běžná slova, jako je například "na" nebo "a" - a čísla, speciální znaky, znaky duplicitní, e-mailové adresy a adresy URL.</span><span class="sxs-lookup"><span data-stu-id="36453-123">We remove stopwords - common words such as "the" or "a" - and numbers, special characters, duplicated characters, email addresses, and URLs.</span></span> <span data-ttu-id="36453-124">Jsme také převést text na malá písmena, lemmatize slova a zjišťovat hranice věty, které jsou pak indikován "|||" symbol v předem zpracovaných text.</span><span class="sxs-lookup"><span data-stu-id="36453-124">We also convert the text to lowercase, lemmatize the words, and detect sentence boundaries that are then indicated by "|||" symbol in pre-processed text.</span></span>

![Předběžné zpracování textu](./media/machine-learning-text-analytics-module-tutorial/preprocess-text.png)

<span data-ttu-id="36453-126">Co dělat, pokud chcete použít vlastní seznam stopslova?</span><span class="sxs-lookup"><span data-stu-id="36453-126">What if you want to use a custom list of stopwords?</span></span> <span data-ttu-id="36453-127">Můžete ho v předat jako volitelné vstup.</span><span class="sxs-lookup"><span data-stu-id="36453-127">You can pass it in as optional input.</span></span> <span data-ttu-id="36453-128">Můžete také použít vlastní C# syntaxe regulární výraz k nahrazení dílčích řetězců a odeberte slova slovní: podstatná jména, operace nebo přídavných jmen.</span><span class="sxs-lookup"><span data-stu-id="36453-128">You can also use custom C# syntax regular expression to replace substrings, and remove words by part of speech: nouns, verbs, or adjectives.</span></span>

<span data-ttu-id="36453-129">Po dokončení předběžném zpracování jsme rozdělení dat do vlaku a testování sad.</span><span class="sxs-lookup"><span data-stu-id="36453-129">After the preprocessing is complete, we split the data into train and test sets.</span></span>

## <a name="step-2-extract-numeric-feature-vectors-from-pre-processed-text"></a><span data-ttu-id="36453-130">Krok 2: Extrahování vektory číselné funkce z předem zpracovaných textu</span><span class="sxs-lookup"><span data-stu-id="36453-130">Step 2: Extract numeric feature vectors from pre-processed text</span></span>
<span data-ttu-id="36453-131">Pokud chcete vytvořit model pro textová data, máte obvykle převést textové vektory číselné funkce.</span><span class="sxs-lookup"><span data-stu-id="36453-131">To build a model for text data, you typically have to convert free-form text into numeric feature vectors.</span></span> <span data-ttu-id="36453-132">V tomto příkladu používáme [funkce N-Gram extrahovat z textu](https://msdn.microsoft.com/library/azure/mt762916.aspx) modulu pro transformaci dat text na takový formát.</span><span class="sxs-lookup"><span data-stu-id="36453-132">In this example, we use [Extract N-Gram Features from Text](https://msdn.microsoft.com/library/azure/mt762916.aspx) module to transform the text data to such format.</span></span> <span data-ttu-id="36453-133">Tento modul trvá sloupec oddělené prázdný znak slova a vypočítá slovník výrazů nebo N-gram slov, které se zobrazují v datovou sadu.</span><span class="sxs-lookup"><span data-stu-id="36453-133">This module takes a column of whitespace-separated words and computes a dictionary of words, or N-grams of words, that appear in your dataset.</span></span> <span data-ttu-id="36453-134">Potom udává, kolik časy každé aplikace word nebo N-gram, se zobrazí všechny záznamy a vytvoří funkci vektory od těch, počty.</span><span class="sxs-lookup"><span data-stu-id="36453-134">Then, it counts how many times each word, or N-gram, appears in each record, and creates feature vectors from those counts.</span></span> <span data-ttu-id="36453-135">V tomto kurzu jsme nastavené velikost N-gram na 2, takže naše vektory funkce zahrnují jednoho slova a kombinací dvou dalších slov.</span><span class="sxs-lookup"><span data-stu-id="36453-135">In this tutorial, we set N-gram size to 2, so our feature vectors include single words and combinations of two subsequent words.</span></span>

![Extrahování N-gram](./media/machine-learning-text-analytics-module-tutorial/extract-ngrams.png)

<span data-ttu-id="36453-137">Použijeme TF * počty IDF (termín frekvence inverzní dokumentu frekvenci) vážení do N-gram.</span><span class="sxs-lookup"><span data-stu-id="36453-137">We apply TF*IDF (Term Frequency Inverse Document Frequency) weighting to N-gram counts.</span></span> <span data-ttu-id="36453-138">Tento postup přidá váhu slova, která zobrazí často v jeden záznam, ale vyskytují jen vzácně napříč celou datovou sadu.</span><span class="sxs-lookup"><span data-stu-id="36453-138">This approach adds weight of words that appear frequently in a single record but are rare across the entire dataset.</span></span> <span data-ttu-id="36453-139">Další možnosti zahrnují binární TF a graf vážení.</span><span class="sxs-lookup"><span data-stu-id="36453-139">Other options include binary, TF, and graph weighing.</span></span>

<span data-ttu-id="36453-140">Funkce text mají často vysokou dimenzionalitu.</span><span class="sxs-lookup"><span data-stu-id="36453-140">Such text features often have high dimensionality.</span></span> <span data-ttu-id="36453-141">Například pokud vaše svátek má 100 000 jedinečných slov, váš prostor funkce by mít dimenze 100 000 nebo více pokud používají N-gram.</span><span class="sxs-lookup"><span data-stu-id="36453-141">For example, if your corpus has 100,000 unique words, your feature space would have 100,000 dimensions, or more if N-grams are used.</span></span> <span data-ttu-id="36453-142">Modul extrahovat funkce N-Gram poskytuje sadu možností ke snížení dimenzionalitě.</span><span class="sxs-lookup"><span data-stu-id="36453-142">The Extract N-Gram Features module gives you a set of options to reduce the dimensionality.</span></span> <span data-ttu-id="36453-143">Můžete vyloučit slova, která krátký nebo dlouhý, nebo příliš neobvyklé nebo příliš časté významné prediktivní hodnotou.</span><span class="sxs-lookup"><span data-stu-id="36453-143">You can choose to exclude words that are short or long, or too uncommon or too frequent to have significant predictive value.</span></span> <span data-ttu-id="36453-144">V tomto kurzu jsme vyloučit N-gram, které se zobrazují v méně než 5 záznamy nebo ve víc než 80 % záznamy.</span><span class="sxs-lookup"><span data-stu-id="36453-144">In this tutorial, we exclude N-grams that appear in fewer than 5 records or in more than 80% of records.</span></span>

<span data-ttu-id="36453-145">Navíc můžete výběr funkce Vybrat jenom ty funkce, které jsou nejvíce korelační s cílem vaší předpovědi.</span><span class="sxs-lookup"><span data-stu-id="36453-145">Also, you can use feature selection to select only those features that are the most correlated with your prediction target.</span></span> <span data-ttu-id="36453-146">Výběr chí-kvadrát funkce používáme k výběru funkcí 1000.</span><span class="sxs-lookup"><span data-stu-id="36453-146">We use Chi-Squared feature selection to select 1000 features.</span></span> <span data-ttu-id="36453-147">Slovník vybrané slova nebo N-gram můžete zobrazit kliknutím pravého výstup modulu extrakce N-gram.</span><span class="sxs-lookup"><span data-stu-id="36453-147">You can view the vocabulary of selected words or N-grams by clicking the right output of Extract N-grams module.</span></span>

<span data-ttu-id="36453-148">Jako alternativní způsob používání funkcí N-Gram extrahovat můžete použít modul funkce algoritmu hash.</span><span class="sxs-lookup"><span data-stu-id="36453-148">As an alternative approach to using Extract N-Gram Features, you can use Feature Hashing module.</span></span> <span data-ttu-id="36453-149">Všimněte si ale, že [Hashování](https://msdn.microsoft.com/library/azure/dn906018.aspx) nemá sestavení ve funkci Výběr možnosti nebo TF * IDF vážení.</span><span class="sxs-lookup"><span data-stu-id="36453-149">Note though that [Feature Hashing](https://msdn.microsoft.com/library/azure/dn906018.aspx) does not have build-in feature selection capabilities, or TF*IDF weighing.</span></span>

## <a name="step-3-train-classification-or-regression-model"></a><span data-ttu-id="36453-150">Krok 3: Train klasifikační nebo regresní model</span><span class="sxs-lookup"><span data-stu-id="36453-150">Step 3: Train classification or regression model</span></span>
<span data-ttu-id="36453-151">Text má nyní převedeny na funkce číselné sloupce.</span><span class="sxs-lookup"><span data-stu-id="36453-151">Now the text has been transformed to numeric feature columns.</span></span> <span data-ttu-id="36453-152">Datovou sadu stále obsahuje řetězec sloupců z předchozí fázích, proto používáme výběr sloupců v datové sadě je z nich vyloučit.</span><span class="sxs-lookup"><span data-stu-id="36453-152">The dataset still contains string columns from previous stages, so we use Select Columns in Dataset to exclude them.</span></span>

<span data-ttu-id="36453-153">Potom pomocí [Logistic Regression Two-Class](https://msdn.microsoft.com/library/azure/dn905994.aspx) k předvídání naše cíl: vysoká nebo Nízká Zkontrolujte skóre.</span><span class="sxs-lookup"><span data-stu-id="36453-153">We then use [Two-Class Logistic Regression](https://msdn.microsoft.com/library/azure/dn905994.aspx) to predict our target: high or low review score.</span></span> <span data-ttu-id="36453-154">V tomto okamžiku problém analytics text transformaci do regulární klasifikace problému.</span><span class="sxs-lookup"><span data-stu-id="36453-154">At this point, the text analytics problem has been transformed into a regular classification problem.</span></span> <span data-ttu-id="36453-155">Můžete nástrojů dostupných v Azure Machine Learning se model vylepšit.</span><span class="sxs-lookup"><span data-stu-id="36453-155">You can use the tools available in Azure Machine Learning to improve the model.</span></span> <span data-ttu-id="36453-156">Například můžete experimentovat s jinou třídění a zjistěte, jak přesné výsledky uvedou nebo použít hyperparameter ladění k zajištění přesnosti.</span><span class="sxs-lookup"><span data-stu-id="36453-156">For example, you can experiment with different classifiers to find out how accurate results they give, or use hyperparameter tuning to improve the accuracy.</span></span>

![Train a skóre](./media/machine-learning-text-analytics-module-tutorial/scoring-text.png)

## <a name="step-4-score-and-validate-the-model"></a><span data-ttu-id="36453-158">Krok 4: Stanovení skóre a ověření modelu</span><span class="sxs-lookup"><span data-stu-id="36453-158">Step 4: Score and validate the model</span></span>
<span data-ttu-id="36453-159">Jak by ověření pro cvičný model?</span><span class="sxs-lookup"><span data-stu-id="36453-159">How would you validate the trained model?</span></span> <span data-ttu-id="36453-160">Jsme skóre podle datové sady testů a vyhodnotit jeho přesnost.</span><span class="sxs-lookup"><span data-stu-id="36453-160">We score it against the test dataset and evaluate the accuracy.</span></span> <span data-ttu-id="36453-161">Model ale zjistili termínů N-gram a jejich váhu z trénovací datové sady.</span><span class="sxs-lookup"><span data-stu-id="36453-161">However, the model learned the vocabulary of N-grams and their weights from the training dataset.</span></span> <span data-ttu-id="36453-162">Proto jsme měli používat tuto termínů a tyto váhu při extrahování funkce z testovací data a vytváření slovníku znovu.</span><span class="sxs-lookup"><span data-stu-id="36453-162">Therefore, we should use that vocabulary and those weights when extracting features from test data, as opposed to creating the vocabulary anew.</span></span> <span data-ttu-id="36453-163">Proto jsme přidat modul extrahovat N-Gram funkce pro výpočet skóre větev experiment, připojit termínů výstup z větve školení a nastavit režim slovník jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="36453-163">Therefore, we add Extract N-Gram Features module to the scoring branch of the experiment, connect the output vocabulary from training branch, and set the vocabulary mode to read-only.</span></span> <span data-ttu-id="36453-164">Můžeme také zakázat filtrování N-gram frekvenci nastavením minimální na 1 instance a maximální na 100 % a vypnout nastavení výběr funkce.</span><span class="sxs-lookup"><span data-stu-id="36453-164">We also disable the filtering of N-grams by frequency by setting the minimum to 1 instance and maximum to 100%, and turn off the feature selection.</span></span>

<span data-ttu-id="36453-165">Po transformaci textového sloupce v testovací data na číselné funkce sloupce, jsme z předchozích fází jako v školení větvi vyloučit řetězcové sloupce.</span><span class="sxs-lookup"><span data-stu-id="36453-165">After the text column in test data has been transformed to numeric feature columns, we exclude the string columns from previous stages like in training branch.</span></span> <span data-ttu-id="36453-166">Potom používáme modulu Evaluate Model vyhodnotit jeho přesnost a modul určení skóre modelu provádět předpovědi.</span><span class="sxs-lookup"><span data-stu-id="36453-166">We then use Score Model module to make predictions and Evaluate Model module to evaluate the accuracy.</span></span>

## <a name="step-5-deploy-the-model-to-production"></a><span data-ttu-id="36453-167">Krok 5: Model nasadit do produkčního prostředí</span><span class="sxs-lookup"><span data-stu-id="36453-167">Step 5: Deploy the model to production</span></span>
<span data-ttu-id="36453-168">Model je téměř připravená k nasazení do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="36453-168">The model is almost ready to be deployed to production.</span></span> <span data-ttu-id="36453-169">Při nasazení jako webové služby, přebírá textové řetězce jako vstup a vrátí předpovědi "vysoká" nebo "nízká".</span><span class="sxs-lookup"><span data-stu-id="36453-169">When deployed as web service, it takes free-form text string as input, and return a prediction "high" or "low."</span></span> <span data-ttu-id="36453-170">Zjištěné termínů N-gram používá k transformaci text, který má funkce a vyškolení logistic regresní model k předpovědím na tyto funkce.</span><span class="sxs-lookup"><span data-stu-id="36453-170">It uses the learned N-gram vocabulary to transform the text to features, and trained logistic regression model to make a prediction from those features.</span></span> 

<span data-ttu-id="36453-171">Pokud chcete nastavit prediktivní experiment, nejprve uložíme termínů N-gram jako datové sady a vyškolení logistic regresní model z větve školení experimentu.</span><span class="sxs-lookup"><span data-stu-id="36453-171">To set up the predictive experiment, we first save the N-gram vocabulary as dataset, and the trained logistic regression model from the training branch of the experiment.</span></span> <span data-ttu-id="36453-172">Potom jsme uložit experimentu pomocí "Uložit jako" k vytvoření grafu experiment prediktivní experimentu.</span><span class="sxs-lookup"><span data-stu-id="36453-172">Then, we save the experiment using "Save As" to create an experiment graph for predictive experiment.</span></span> <span data-ttu-id="36453-173">Jsme odebrat modul rozdělení dat a školení větev z experimentu.</span><span class="sxs-lookup"><span data-stu-id="36453-173">We remove the Split Data module and the training branch from the experiment.</span></span> <span data-ttu-id="36453-174">Jsme se potom připojují dříve uloženou N-gram termínů a modelu k funkcím N-Gram extrahovat a Score Model modulů, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="36453-174">We then connect the previously saved N-gram vocabulary and model to Extract N-Gram Features and Score Model modules, respectively.</span></span> <span data-ttu-id="36453-175">Můžeme také odebrat modulu Evaluate Model.</span><span class="sxs-lookup"><span data-stu-id="36453-175">We also remove the Evaluate Model module.</span></span>

<span data-ttu-id="36453-176">Nemůžeme vložit výběr sloupců v datové sadě modulu před modulu předběžně zpracovat Text odebrat popisek sloupce a zrušte výběr možnost "Sloupec skóre připojení k datové sadě" v modulu skóre.</span><span class="sxs-lookup"><span data-stu-id="36453-176">We insert Select Columns in Dataset module before Preprocess Text module to remove the label column, and unselect "Append score column to dataset" option in Score Module.</span></span> <span data-ttu-id="36453-177">Tímto způsobem, webovou službu neuvede v požadavku popiskem, který se pokouší předvídat a nemá není echo vstup funkce v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="36453-177">That way, the web service does not request the label it is trying to predict, and does not echo the input features in response.</span></span>

![Prediktivní Experiment](./media/machine-learning-text-analytics-module-tutorial/predictive-text.png)

<span data-ttu-id="36453-179">Máme teď experimentu, který umožňuje publikovat jako webovou službu a volat pomocí požadavků a odpovědí nebo dávkového spuštění rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="36453-179">Now we have an experiment that can be published as a web service and called using request-response or batch execution APIs.</span></span>

## <a name="next-steps"></a><span data-ttu-id="36453-180">Další kroky</span><span class="sxs-lookup"><span data-stu-id="36453-180">Next Steps</span></span>
<span data-ttu-id="36453-181">Další informace o modulech analytics text z [dokumentace MSDN](https://msdn.microsoft.com/library/azure/dn905886.aspx).</span><span class="sxs-lookup"><span data-stu-id="36453-181">Learn about text analytics modules from [MSDN documentation](https://msdn.microsoft.com/library/azure/dn905886.aspx).</span></span>

