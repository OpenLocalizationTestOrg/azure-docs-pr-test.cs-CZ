---
title: "Spuštění skriptů Python machine learning | Microsoft Docs"
description: "Obsahuje přehled návrhu zásadami pro Podpora skriptů Python v Azure Machine Learning a základní informace o využití scénáře, možnosti a omezení."
keywords: "Python machine learningu pandas, python pandas, skriptů python, spuštění skriptů python"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: e8d6377bc939e6711a96e521b5f574fc8d060929
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="19c7d-104">Spouštění skriptů strojového učení v Pythonu v nástroji Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="19c7d-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="19c7d-105">Toto téma popisuje zásady designu základní aktuální podporu pro skripty jazyka Python v Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="19c7d-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="19c7d-106">Hlavní možnosti poskytované jsou také uvedeny, včetně:</span><span class="sxs-lookup"><span data-stu-id="19c7d-106">The main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="19c7d-107">spuštění scénáře základní informace o využití</span><span class="sxs-lookup"><span data-stu-id="19c7d-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="19c7d-108">stanovení skóre experimentu ve webové službě</span><span class="sxs-lookup"><span data-stu-id="19c7d-108">score an experiment in a web service</span></span>
- <span data-ttu-id="19c7d-109">Podpora pro import existujícího kódu</span><span class="sxs-lookup"><span data-stu-id="19c7d-109">support for importing existing code</span></span>
- <span data-ttu-id="19c7d-110">Export vizualizace</span><span class="sxs-lookup"><span data-stu-id="19c7d-110">export visualizations</span></span>
- <span data-ttu-id="19c7d-111">proveďte výběr pod dohledem funkce</span><span class="sxs-lookup"><span data-stu-id="19c7d-111">perform supervised feature selection</span></span>
- <span data-ttu-id="19c7d-112">pochopení určitá omezení</span><span class="sxs-lookup"><span data-stu-id="19c7d-112">understand some limitations</span></span>

<span data-ttu-id="19c7d-113">[Python](https://www.python.org/) je nepostradatelným prostředkem nástroj hrudník mnoho datových vědců.</span><span class="sxs-lookup"><span data-stu-id="19c7d-113">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span></span> <span data-ttu-id="19c7d-114">Obsahuje:</span><span class="sxs-lookup"><span data-stu-id="19c7d-114">It has:</span></span>

* <span data-ttu-id="19c7d-115">Elegantní a stručným syntaxe,</span><span class="sxs-lookup"><span data-stu-id="19c7d-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="19c7d-116">Podpora více platforem</span><span class="sxs-lookup"><span data-stu-id="19c7d-116">cross-platform support,</span></span> 
* <span data-ttu-id="19c7d-117">velká kolekce výkonné knihovny, a</span><span class="sxs-lookup"><span data-stu-id="19c7d-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="19c7d-118">Vyspělá vývojové nástroje.</span><span class="sxs-lookup"><span data-stu-id="19c7d-118">mature development tools.</span></span> 

<span data-ttu-id="19c7d-119">Python se používá ve všech fázích obvykle používaných v machine learning modelování pracovního postupu:</span><span class="sxs-lookup"><span data-stu-id="19c7d-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="19c7d-120">ingestování dat a zpracování</span><span class="sxs-lookup"><span data-stu-id="19c7d-120">data ingest and processing</span></span> 
- <span data-ttu-id="19c7d-121">Funkce vytváření</span><span class="sxs-lookup"><span data-stu-id="19c7d-121">feature construction</span></span>
- <span data-ttu-id="19c7d-122">model školení</span><span class="sxs-lookup"><span data-stu-id="19c7d-122">model training</span></span> 
- <span data-ttu-id="19c7d-123">ověření modelu</span><span class="sxs-lookup"><span data-stu-id="19c7d-123">model validation</span></span>
- <span data-ttu-id="19c7d-124">nasazení modelů</span><span class="sxs-lookup"><span data-stu-id="19c7d-124">deployment of the models</span></span>

<span data-ttu-id="19c7d-125">Azure Machine Learning Studio podporuje vnoření skriptů Python do různých částí počítače učení experiment a také bezproblémově publikováním jako webové služby v Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="19c7d-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="19c7d-126">Principy návrhu skriptů Python v Machine Learning</span><span class="sxs-lookup"><span data-stu-id="19c7d-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="19c7d-127">Uživatelského rozhraní jazyka Python v Azure Machine Learning Studio je prostřednictvím [Execute Python Script] [ execute-python-script] modulu na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="19c7d-127">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="19c7d-130">Obrázek 1.</span><span class="sxs-lookup"><span data-stu-id="19c7d-130">Figure 1.</span></span> <span data-ttu-id="19c7d-131">**Execute Python Script** modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-131">The **Execute Python Script** module.</span></span>

<span data-ttu-id="19c7d-132">[Execute Python Script] [ execute-python-script] modulu v Azure ML Studio přijímá až tři vstupy a vytváří až dvě výstupy (popsané v následující části), jako je jeho analogovým R [spustit skript jazyka R] [ execute-r-script] modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-132">The [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up to three inputs and produces up to two outputs (discussed in the following section), like its R analogue, the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="19c7d-133">Kód jazyka Python, který bude proveden zadání do pole parametr jako speciálně pojmenovanou vstupní bod volaná funkce `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="19c7d-133">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="19c7d-134">Tady jsou klíčové zásady použít k implementaci tento modul:</span><span class="sxs-lookup"><span data-stu-id="19c7d-134">Here are the key design principles used to implement this module:</span></span>

1. <span data-ttu-id="19c7d-135">*Musí být idiomatickou pro Python uživatele.*</span><span class="sxs-lookup"><span data-stu-id="19c7d-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="19c7d-136">Většina uživatelů Python dvoufaktorového svůj kód jako funkce uvnitř modulů.</span><span class="sxs-lookup"><span data-stu-id="19c7d-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="19c7d-137">Proto uvedení spoustu spustitelné příkazy v modulu nejvyšší úrovně je relativně vzácné.</span><span class="sxs-lookup"><span data-stu-id="19c7d-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="19c7d-138">Pole skript v důsledku toho trvá speciálně pojmenovanou funkce Python oproti právě posloupnost příkazy.</span><span class="sxs-lookup"><span data-stu-id="19c7d-138">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span></span> <span data-ttu-id="19c7d-139">Objekty zveřejněné ve funkci, jako jsou typy standardní knihovny jazyka Python [Pandas](http://pandas.pydata.org/) datových rámců a [NumPy](http://www.numpy.org/) pole.</span><span class="sxs-lookup"><span data-stu-id="19c7d-139">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="19c7d-140">*Musí mít zachováním mezi místním a cloudovým spuštěních.*</span><span class="sxs-lookup"><span data-stu-id="19c7d-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="19c7d-141">Back-end používají ke spouštění kódu Python je založena na [Anaconda](https://store.continuum.io/cshop/anaconda/), nejběžněji používané scientific distribuci jazyka Python a platformy.</span><span class="sxs-lookup"><span data-stu-id="19c7d-141">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="19c7d-142">Se dodává s blízko 200 nejběžnější balíčků Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-142">It comes with close to 200 of the most common Python packages.</span></span> <span data-ttu-id="19c7d-143">Proto můžete datových vědců ladění a kvalifikaci svůj kód na jejich místním prostředí Azure Machine Learning kompatibilní Anaconda.</span><span class="sxs-lookup"><span data-stu-id="19c7d-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="19c7d-144">Použít existující vývojové prostředí, například [IPython](http://ipython.org/) poznámkového bloku nebo [Python Tools pro Visual Studio](http://aka.ms/ptvs), ke spuštění v rámci Azure ML experimentu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), to run it as part of an Azure ML experiment.</span></span> <span data-ttu-id="19c7d-145">`azureml_main` Vstupní bod je vanilla Python funkce a tak *** tvořit bez kódu pro konkrétní Azure ML nebo sadu SDK nainstalovat.</span><span class="sxs-lookup"><span data-stu-id="19c7d-145">The `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or the SDK installed.</span></span>
3. <span data-ttu-id="19c7d-146">*Musí být bezproblémově složení s další moduly Azure Machine Learning.*</span><span class="sxs-lookup"><span data-stu-id="19c7d-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="19c7d-147">[Execute Python Script] [ execute-python-script] modul přijímá jako vstupy a výstupy, standardní datové sady Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="19c7d-147">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="19c7d-148">Základní architektury transparentně a efektivně přemosťuje moduly runtime Azure ML a Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-148">The underlying framework transparently and efficiently bridges the Azure ML and Python runtimes.</span></span> <span data-ttu-id="19c7d-149">Proto Python můžete použít ve spojení s stávajících pracovními postupy Azure ML, včetně těch, které volají do R a SQLite.</span><span class="sxs-lookup"><span data-stu-id="19c7d-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="19c7d-150">Ve výsledku vědecký pracovník data tvoří pracovních který:</span><span class="sxs-lookup"><span data-stu-id="19c7d-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="19c7d-151">použití jazyka Python a Pandas pro data předem zpracování a čištění</span><span class="sxs-lookup"><span data-stu-id="19c7d-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="19c7d-152">informační kanál dat SQL transformace, připojení více datových sad do formuláře funkce</span><span class="sxs-lookup"><span data-stu-id="19c7d-152">feed the data to a SQL transformation, joining multiple datasets to form features</span></span>
   * <span data-ttu-id="19c7d-153">cvičení modelů pomocí algoritmech v Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="19c7d-153">train models using the algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="19c7d-154">vyhodnocení a po zpracování pomocí R.</span><span class="sxs-lookup"><span data-stu-id="19c7d-154">evaluate and post-process the results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="19c7d-155">Základní informace o využití scénáře v ML skriptů Python</span><span class="sxs-lookup"><span data-stu-id="19c7d-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="19c7d-156">V této části jsme některé základní použití zjišťování [Execute Python Script] [ execute-python-script] modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-156">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="19c7d-157">Vstupy pro modul Python jsou zveřejněné jako Pandas datové rámce.</span><span class="sxs-lookup"><span data-stu-id="19c7d-157">Inputs to the Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="19c7d-158">Funkce musí vracet jeden snímek dat Pandas zabalené uvnitř Python [pořadí](https://docs.python.org/2/c-api/sequence.html) například řazené kolekce členů, seznamu nebo NumPy pole.</span><span class="sxs-lookup"><span data-stu-id="19c7d-158">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="19c7d-159">V první výstupní port modulu je pak vrácen první prvek toto pořadí.</span><span class="sxs-lookup"><span data-stu-id="19c7d-159">The first element of this sequence is then returned in the first output port of the module.</span></span> <span data-ttu-id="19c7d-160">Toto schéma je znázorněno na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="19c7d-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="19c7d-162">Obrázek 2.</span><span class="sxs-lookup"><span data-stu-id="19c7d-162">Figure 2.</span></span> <span data-ttu-id="19c7d-163">Mapování vstupní porty, které se parametry a vrátí hodnotu na výstupní port.</span><span class="sxs-lookup"><span data-stu-id="19c7d-163">Mapping of input ports to parameters and return value to output port.</span></span>

<span data-ttu-id="19c7d-164">Podrobnější sémantiku jak získat vstupních portů mapované na parametry `azureml_main` funkce jsou uvedené v tabulce 1:</span><span class="sxs-lookup"><span data-stu-id="19c7d-164">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="19c7d-166">Tabulka 1.</span><span class="sxs-lookup"><span data-stu-id="19c7d-166">Table 1.</span></span> <span data-ttu-id="19c7d-167">Mapování vstupních portů na parametry funkce.</span><span class="sxs-lookup"><span data-stu-id="19c7d-167">Mapping of input ports to function parameters.</span></span>

<span data-ttu-id="19c7d-168">Mapování mezi vstupních portů a parametry funkce je poziční:</span><span class="sxs-lookup"><span data-stu-id="19c7d-168">The mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="19c7d-169">První připojené vstupní port je namapována na první parametr funkce.</span><span class="sxs-lookup"><span data-stu-id="19c7d-169">The first connected input port is mapped to the first parameter of the function.</span></span> 
- <span data-ttu-id="19c7d-170">Druhý vstup (Pokud je připojeno) je namapována na druhý parametr funkce.</span><span class="sxs-lookup"><span data-stu-id="19c7d-170">The second input (if connected) is mapped to the second parameter of the function.</span></span>

<span data-ttu-id="19c7d-171">V tématu *Python pro analýzu dat* (O'Reilly, 2012) podle západní McKinney pro další informace o Python Pandas a na tom, jak lze použít k manipulaci s daty efektivnější.</span><span class="sxs-lookup"><span data-stu-id="19c7d-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used to manipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="19c7d-172">Překlad vstupní a výstupní typů</span><span class="sxs-lookup"><span data-stu-id="19c7d-172">Translation of input and output types</span></span> 
<span data-ttu-id="19c7d-173">Vstupní datové sady v Azure ML se převedou na datové rámce v Pandas.</span><span class="sxs-lookup"><span data-stu-id="19c7d-173">Input datasets in Azure ML are converted to data frames in Pandas.</span></span> <span data-ttu-id="19c7d-174">Výstupní datové rámce převedou zpět do Azure ML datové sady.</span><span class="sxs-lookup"><span data-stu-id="19c7d-174">Output data frames are converted back to Azure ML datasets.</span></span> <span data-ttu-id="19c7d-175">Jsou prováděny následující převody:</span><span class="sxs-lookup"><span data-stu-id="19c7d-175">The following conversions are performed:</span></span>

1. <span data-ttu-id="19c7d-176">Řetězec a číselné sloupce se převedou jako-je a chybějící hodnoty v datové sadě jsou převedeny na hodnoty "NA" v Pandas.</span><span class="sxs-lookup"><span data-stu-id="19c7d-176">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span></span> <span data-ttu-id="19c7d-177">Dojde k stejné převodu na zpět způsob (chybějící hodnoty v Azure ML se převedou NA hodnoty v Pandas).</span><span class="sxs-lookup"><span data-stu-id="19c7d-177">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure ML).</span></span>
2. <span data-ttu-id="19c7d-178">Index vektorů v Pandas nejsou podporovány v Azure ML.</span><span class="sxs-lookup"><span data-stu-id="19c7d-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="19c7d-179">Všechny snímky vstupní data ve funkci Python mít vždy 64-bit index číselné od 0 do počet řádků minus 1.</span><span class="sxs-lookup"><span data-stu-id="19c7d-179">All input data frames in the Python function always have a 64-bit numerical index from 0 to the number of rows minus 1.</span></span> 
3. <span data-ttu-id="19c7d-180">Datové sady Azure ML nemůže mít duplicitní názvy sloupců a názvy sloupců, které nejsou typu řetězec.</span><span class="sxs-lookup"><span data-stu-id="19c7d-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="19c7d-181">Pokud již výstupní data rámečku obsahuje jiné než číselné sloupce, volá framework `str` na názvy sloupců.</span><span class="sxs-lookup"><span data-stu-id="19c7d-181">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span></span> <span data-ttu-id="19c7d-182">Stejně tak všechny duplicitní názvy sloupců jsou automaticky pozměnění zajistit, že jsou jedinečné názvy.</span><span class="sxs-lookup"><span data-stu-id="19c7d-182">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span></span> <span data-ttu-id="19c7d-183">Přípona (2) se přidá do první duplicitní, (3) na druhý duplicitní a tak dále.</span><span class="sxs-lookup"><span data-stu-id="19c7d-183">The suffix (2) is added to the first duplicate, (3) to the second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="19c7d-184">Zprovozňování skriptů Python</span><span class="sxs-lookup"><span data-stu-id="19c7d-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="19c7d-185">Všechny [Execute Python Script] [ execute-python-script] moduly používané v vyhodnocování experimentu jsou volány při publikovat jako webovou službu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="19c7d-186">Obrázek 3 ukazuje například vyhodnocování experimentu, který obsahuje kód pro vyhodnocení jeden výraz Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-186">For example, Figure 3 shows a scoring experiment that contains the code to evaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![image5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="19c7d-189">Obrázek 3.</span><span class="sxs-lookup"><span data-stu-id="19c7d-189">Figure 3.</span></span> <span data-ttu-id="19c7d-190">Webové služby pro vyhodnocení výrazu jazyka Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="19c7d-191">Webové služby vytvořené z tohoto experimentu:</span><span class="sxs-lookup"><span data-stu-id="19c7d-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="19c7d-192">přijímá jako vstup výraz Python (jako řetězec)</span><span class="sxs-lookup"><span data-stu-id="19c7d-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="19c7d-193">odešle ji do překladač Pythonu</span><span class="sxs-lookup"><span data-stu-id="19c7d-193">sends it to the Python interpreter</span></span> 
- <span data-ttu-id="19c7d-194">Vrátí tabulku obsahující ve výrazu a vyhodnotí výsledek.</span><span class="sxs-lookup"><span data-stu-id="19c7d-194">returns a table containing both the expression and the evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="19c7d-195">Import existující moduly skriptu jazyka Python</span><span class="sxs-lookup"><span data-stu-id="19c7d-195">Importing existing Python script modules</span></span>

<span data-ttu-id="19c7d-196">Běžné případ použití pro mnoho datových vědců je do Azure ML experimenty zahrnout stávající skriptů Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-196">A common use-case for many data scientists is to incorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="19c7d-197">Místo nutnosti, že veškerý kód zřetězených a vložit do jednoho skriptu pole, [Execute Python Script] [ execute-python-script] modul přijímá soubor zip, který obsahuje moduly jazyka Python na třetí vstupní port.</span><span class="sxs-lookup"><span data-stu-id="19c7d-197">Instead of requiring that all code be concatenated and pasted into a single script box, the [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at the third input port.</span></span> <span data-ttu-id="19c7d-198">Soubor je rozbalené rámcem provádění za běhu a obsah se přidají do knihovny cestu překladač Pythonu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-198">The file is unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span></span> <span data-ttu-id="19c7d-199">`azureml_main` Vstupní bod funkce můžete poté importovat tyto moduly přímo.</span><span class="sxs-lookup"><span data-stu-id="19c7d-199">The `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="19c7d-200">Jako příklad zvažte soubor Hello.py obsahující jednoduché funkci "Hello, World".</span><span class="sxs-lookup"><span data-stu-id="19c7d-200">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="19c7d-202">Obrázek 4.</span><span class="sxs-lookup"><span data-stu-id="19c7d-202">Figure 4.</span></span> <span data-ttu-id="19c7d-203">Uživatelem definované funkce v souboru Hello.py.</span><span class="sxs-lookup"><span data-stu-id="19c7d-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="19c7d-204">V dalším kroku vytvoříme soubor Hello.zip, který obsahuje Hello.py:</span><span class="sxs-lookup"><span data-stu-id="19c7d-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="19c7d-206">Obrázek 5.</span><span class="sxs-lookup"><span data-stu-id="19c7d-206">Figure 5.</span></span> <span data-ttu-id="19c7d-207">Soubor ZIP obsahující uživatelem definované kód Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="19c7d-208">Nahrajte soubor zip jako datové sady do Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="19c7d-208">Upload the zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="19c7d-209">Pak vytvořte a spusťte experimentu, který používá Python kód v souboru Hello.zip připojením k třetí vstupní port **Execute Python Script** modulu, jak je vidět na tomto obrázku.</span><span class="sxs-lookup"><span data-stu-id="19c7d-209">Then create and run an experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the **Execute Python Script** module, as shown in this figure.</span></span>

![image8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="19c7d-212">Obrázek 6.</span><span class="sxs-lookup"><span data-stu-id="19c7d-212">Figure 6.</span></span> <span data-ttu-id="19c7d-213">Ukázkový experiment s uživatelem definovaný kód Python uloženo jako soubor zip.</span><span class="sxs-lookup"><span data-stu-id="19c7d-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="19c7d-214">Výstup modulu ukazuje, že byl soubor zip nezabalené a které funkce `print_hello` byl spuštěn.</span><span class="sxs-lookup"><span data-stu-id="19c7d-214">The module output shows that the zip file has been unpackaged and that the function `print_hello` has been run.</span></span>
<span data-ttu-id="19c7d-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="19c7d-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="19c7d-216">Na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="19c7d-216">Figure 7.</span></span> <span data-ttu-id="19c7d-217">Uživatelem definované funkce používá uvnitř [Execute Python Script] [ execute-python-script] modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-217">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="19c7d-218">Práce s vizualizacemi</span><span class="sxs-lookup"><span data-stu-id="19c7d-218">Working with visualizations</span></span>

<span data-ttu-id="19c7d-219">Pozemků vytvořený MatplotLib, který můžete vizualizovat v prohlížeči může být vrácen pouze [Execute Python Script][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="19c7d-219">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="19c7d-220">Ale pozemků nejsou automaticky přesměrována na Image jako při použití R. Proto uživatel musí explicitně uložte jakékoli pozemků do soubory PNG Pokud mají být vráceny zpět do Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="19c7d-220">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span></span> 

<span data-ttu-id="19c7d-221">Ke generování bitových kopií z MatplotLib, musíte provést následující postup:</span><span class="sxs-lookup"><span data-stu-id="19c7d-221">To generate images from MatplotLib, you must complete the following procedure:</span></span>

* <span data-ttu-id="19c7d-222">Přepněte back-end "%{AGG/" z výchozí na základě rt vykreslování</span><span class="sxs-lookup"><span data-stu-id="19c7d-222">switch the backend to “AGG” from the default Qt-based renderer</span></span> 
* <span data-ttu-id="19c7d-223">Vytvořit nový objekt obrázku</span><span class="sxs-lookup"><span data-stu-id="19c7d-223">create a new figure object</span></span> 
* <span data-ttu-id="19c7d-224">získat ose a generovat všechny pozemků do ní</span><span class="sxs-lookup"><span data-stu-id="19c7d-224">get the axis and generate all plots into it</span></span> 
* <span data-ttu-id="19c7d-225">Uložit obrázek na soubor PNG</span><span class="sxs-lookup"><span data-stu-id="19c7d-225">save the figure to a PNG file</span></span> 

<span data-ttu-id="19c7d-226">Tento proces je znázorněn na následující obrázek 8, která vytvoří pomocí funkce scatter_matrix v Pandas bodové vykreslení matice.</span><span class="sxs-lookup"><span data-stu-id="19c7d-226">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="19c7d-228">Obrázek 8.</span><span class="sxs-lookup"><span data-stu-id="19c7d-228">Figure 8.</span></span> <span data-ttu-id="19c7d-229">Kód k uložení MatplotLib obrázky do bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="19c7d-229">Code to save MatplotLib figures to images.</span></span>

<span data-ttu-id="19c7d-230">Obrázek 9 ukazuje, že experimentu, který používá skript uvedený výše vrátit ukazuje zeměpisný prostřednictvím druhý výstupní port.</span><span class="sxs-lookup"><span data-stu-id="19c7d-230">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="19c7d-233">Obrázek 9.</span><span class="sxs-lookup"><span data-stu-id="19c7d-233">Figure 9.</span></span> <span data-ttu-id="19c7d-234">Vizualizace pozemků generované z kódu jazyka Python.</span><span class="sxs-lookup"><span data-stu-id="19c7d-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="19c7d-235">Je možné vrátit více útvarů jejich uložením do různých obrázků, modul runtime Azure Machine Learning převezme všechny bitové kopie a je zřetězí pro vizualizaci.</span><span class="sxs-lookup"><span data-stu-id="19c7d-235">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="19c7d-236">Pokročilé příklady</span><span class="sxs-lookup"><span data-stu-id="19c7d-236">Advanced examples</span></span>

<span data-ttu-id="19c7d-237">Anaconda prostředí nainstalován v Azure Machine Learning obsahuje běžné balíčků, jako jsou NumPy, SciPy a další Scikits.</span><span class="sxs-lookup"><span data-stu-id="19c7d-237">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="19c7d-238">Tyto balíčky můžete efektivně použít pro různé úlohy zpracování dat v machine learning kanálu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="19c7d-239">Jako příklad následující experiment a skript ilustrují použití inteligentních algoritmů komplet v Scikits informace k výpočtu skóre důležitosti funkce pro datovou sadu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-239">As an example, the following experiment and script illustrate the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span></span> <span data-ttu-id="19c7d-240">Skóre lze použít k provedení před se předány do jiného modelu ML výběr pod dohledem funkce.</span><span class="sxs-lookup"><span data-stu-id="19c7d-240">The scores can be used to perform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="19c7d-241">Tady je funkce Python slouží k výpočtu skóre důležitosti a pořadí funkcí podle skóre:</span><span class="sxs-lookup"><span data-stu-id="19c7d-241">Here is the Python function used to compute the importance scores and order the features based on the scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="19c7d-243">Obrázek 10.</span><span class="sxs-lookup"><span data-stu-id="19c7d-243">Figure 10.</span></span> <span data-ttu-id="19c7d-244">Funkce rank funkcí podle skóre.</span><span class="sxs-lookup"><span data-stu-id="19c7d-244">Function to rank features by scores.</span></span>
<span data-ttu-id="19c7d-245"> Následující experimentu pak vypočítá a vrátí skóre důležitosti funkcí v datové sadě "Pima indickém Diabetes" v Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="19c7d-245">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="19c7d-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="19c7d-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="19c7d-247">Obrázek 11.</span><span class="sxs-lookup"><span data-stu-id="19c7d-247">Figure 11.</span></span> <span data-ttu-id="19c7d-248">Experiment rank funkcí v datové sadě Pima indickém Diabetes.</span><span class="sxs-lookup"><span data-stu-id="19c7d-248">Experiment to rank features in the Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="19c7d-249">Omezení</span><span class="sxs-lookup"><span data-stu-id="19c7d-249">Limitations</span></span>
<span data-ttu-id="19c7d-250">[Execute Python Script] [ execute-python-script] aktuálně má následující omezení:</span><span class="sxs-lookup"><span data-stu-id="19c7d-250">The [Execute Python Script][execute-python-script] currently has the following limitations:</span></span>

1. <span data-ttu-id="19c7d-251">*V izolovaném prostoru provádění.*</span><span class="sxs-lookup"><span data-stu-id="19c7d-251">*Sandboxed execution.*</span></span> <span data-ttu-id="19c7d-252">Modul Python runtime je aktuálně v izolovaném prostoru a v důsledku toho neumožňuje přístup k síti nebo k místnímu systému souborů trvalé způsobem.</span><span class="sxs-lookup"><span data-stu-id="19c7d-252">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span></span> <span data-ttu-id="19c7d-253">Všechny soubory, které jsou uloženy v místním počítači jsou izolované a odstranit po dokončení modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-253">All files saved locally are isolated and deleted once the module finishes.</span></span> <span data-ttu-id="19c7d-254">Kód jazyka Python nemá přístup k většině adresářů v počítači, na kterém běží na, s výjimkou aktuálního adresáře a jejích podadresářů.</span><span class="sxs-lookup"><span data-stu-id="19c7d-254">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span></span>
2. <span data-ttu-id="19c7d-255">*Chybí sofistikované vývoji a ladění podpory.*</span><span class="sxs-lookup"><span data-stu-id="19c7d-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="19c7d-256">Modul Python aktuálně nepodporuje IDE funkce jako je například technologie intellisense a ladění.</span><span class="sxs-lookup"><span data-stu-id="19c7d-256">The Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="19c7d-257">Úplné trasování zásobníku Python je k dispozici také v případě selhání modulu za běhu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-257">Also, if the module fails at runtime, the full Python stack trace is available.</span></span> <span data-ttu-id="19c7d-258">Je však nutné ji zobrazit v protokolu výstup modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-258">But it must be viewed in the output log for the module.</span></span> <span data-ttu-id="19c7d-259">Doporučujeme aktuálně vyvíjet a ladit Python skripty v prostředí, jako je například IPython a pak importovat kód do modulu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import the code into the module.</span></span>
3. <span data-ttu-id="19c7d-260">*Single – datový výstup rámce.*</span><span class="sxs-lookup"><span data-stu-id="19c7d-260">*Single data frame output.*</span></span> <span data-ttu-id="19c7d-261">Vstupní bod Python je povolená jenom vrátit jednoho datového rámce jako výstup.</span><span class="sxs-lookup"><span data-stu-id="19c7d-261">The Python entry point is only permitted to return a single data frame as output.</span></span> <span data-ttu-id="19c7d-262">Není aktuálně možné vrátit zpět do Azure Machine Learning runtime libovolný Python objekty, například trénované modely přímo.</span><span class="sxs-lookup"><span data-stu-id="19c7d-262">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span></span> <span data-ttu-id="19c7d-263">Jako [spustit skript jazyka R][execute-r-script], který má stejné omezení, je možné v mnoha případech okurky objekty do bajtového pole a pak, vraťte uvnitř datové rámce.</span><span class="sxs-lookup"><span data-stu-id="19c7d-263">Like [Execute R Script][execute-r-script], which has the same limitation, it is possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="19c7d-264">*Neschopnost Python instalaci přizpůsobit*.</span><span class="sxs-lookup"><span data-stu-id="19c7d-264">*Inability to customize Python installation*.</span></span> <span data-ttu-id="19c7d-265">V současné době je jediný způsob, jak přidat vlastní moduly jazyka Python přes mechanismus soubor zip popsané výše.</span><span class="sxs-lookup"><span data-stu-id="19c7d-265">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span></span> <span data-ttu-id="19c7d-266">To je vhodná pro malé moduly, je nevhodnou pro velké moduly (především těch s nativních knihoven DLL) nebo velký počet modulů.</span><span class="sxs-lookup"><span data-stu-id="19c7d-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="19c7d-267">Závěrů</span><span class="sxs-lookup"><span data-stu-id="19c7d-267">Conclusions</span></span>
<span data-ttu-id="19c7d-268">[Execute Python Script] [ execute-python-script] modulu umožňuje data vědecký pracovník začlenit existující kód Python do pracovních hostovaných v cloudu machine learning v Azure Machine Learning a bezproblémově zprovoznit je jako součást webové služby.</span><span class="sxs-lookup"><span data-stu-id="19c7d-268">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="19c7d-269">Modul Python skriptu přirozeně spolupracuje s dalších modulů v Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="19c7d-269">The Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="19c7d-270">Modul můžete použít pro celou řadu úloh z zkoumání dat předběžné zpracování a funkce extrakce a pak vyhodnocení a po zpracování výsledků.</span><span class="sxs-lookup"><span data-stu-id="19c7d-270">The module can be used for a range of tasks from data exploration to pre-processing and feature extraction, and then to evaluation and post-processing of the results.</span></span> <span data-ttu-id="19c7d-271">Modul runtime back-end používá pro spuštění je založena na Anacondu, distribuci jazyka Python dobře otestované a často používaný.</span><span class="sxs-lookup"><span data-stu-id="19c7d-271">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="19c7d-272">Tento back-end zjednodušuje pro vás k prostředkům integrovaného existující kód do cloudu.</span><span class="sxs-lookup"><span data-stu-id="19c7d-272">This backend makes it simple for you to on-board existing code assets into the cloud.</span></span>

<span data-ttu-id="19c7d-273">Očekáváme, že poskytuje další funkce k [Execute Python Script] [ execute-python-script] modulu například umožňuje trénování a zprovoznit modely v Pythonu a přidat lepší podporu pro vývoj a ladění kódu v Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="19c7d-273">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="19c7d-274">Další kroky</span><span class="sxs-lookup"><span data-stu-id="19c7d-274">Next steps</span></span>
<span data-ttu-id="19c7d-275">Další informace naleznete ve [Středisku pro vývojáře Python](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="19c7d-275">For more information, see the [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
