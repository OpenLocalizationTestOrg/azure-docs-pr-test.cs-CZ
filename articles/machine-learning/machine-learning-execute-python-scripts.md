---
title: "aaaExecute Pythonových skriptů strojového učení | Microsoft Docs"
description: "Obsahuje přehled návrhu zásadami pro Podpora skriptů Python v Azure Machine Learning a základní informace o využití scénáře, možnosti a omezení."
keywords: "Python machine learningu pandas, python pandas, skriptů python, spuštění skriptů python"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: 8d23aaa972a46cb1a07ea0f18cc1e24933fe3e6f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="ed610-104">Spouštění skriptů strojového učení v Pythonu v nástroji Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="ed610-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="ed610-105">Toto téma popisuje zásady designu hello základní hello aktuální podpora skriptů Python v Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed610-105">This topic describes hello design principles underlying hello current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="ed610-106">Hello zadaný hlavní funkce jsou také uvedeny, včetně:</span><span class="sxs-lookup"><span data-stu-id="ed610-106">hello main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="ed610-107">spuštění scénáře základní informace o využití</span><span class="sxs-lookup"><span data-stu-id="ed610-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="ed610-108">stanovení skóre experimentu ve webové službě</span><span class="sxs-lookup"><span data-stu-id="ed610-108">score an experiment in a web service</span></span>
- <span data-ttu-id="ed610-109">Podpora pro import existujícího kódu</span><span class="sxs-lookup"><span data-stu-id="ed610-109">support for importing existing code</span></span>
- <span data-ttu-id="ed610-110">Export vizualizace</span><span class="sxs-lookup"><span data-stu-id="ed610-110">export visualizations</span></span>
- <span data-ttu-id="ed610-111">proveďte výběr pod dohledem funkce</span><span class="sxs-lookup"><span data-stu-id="ed610-111">perform supervised feature selection</span></span>
- <span data-ttu-id="ed610-112">pochopení určitá omezení</span><span class="sxs-lookup"><span data-stu-id="ed610-112">understand some limitations</span></span>

<span data-ttu-id="ed610-113">[Python](https://www.python.org/) je nepostradatelným prostředkem hello nástroj hrudník mnoho datových vědců.</span><span class="sxs-lookup"><span data-stu-id="ed610-113">[Python](https://www.python.org/) is an indispensable tool in hello tool chest of many data scientists.</span></span> <span data-ttu-id="ed610-114">Obsahuje:</span><span class="sxs-lookup"><span data-stu-id="ed610-114">It has:</span></span>

* <span data-ttu-id="ed610-115">Elegantní a stručným syntaxe,</span><span class="sxs-lookup"><span data-stu-id="ed610-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="ed610-116">Podpora více platforem</span><span class="sxs-lookup"><span data-stu-id="ed610-116">cross-platform support,</span></span> 
* <span data-ttu-id="ed610-117">velká kolekce výkonné knihovny, a</span><span class="sxs-lookup"><span data-stu-id="ed610-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="ed610-118">Vyspělá vývojové nástroje.</span><span class="sxs-lookup"><span data-stu-id="ed610-118">mature development tools.</span></span> 

<span data-ttu-id="ed610-119">Python se používá ve všech fázích obvykle používaných v machine learning modelování pracovního postupu:</span><span class="sxs-lookup"><span data-stu-id="ed610-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="ed610-120">ingestování dat a zpracování</span><span class="sxs-lookup"><span data-stu-id="ed610-120">data ingest and processing</span></span> 
- <span data-ttu-id="ed610-121">Funkce vytváření</span><span class="sxs-lookup"><span data-stu-id="ed610-121">feature construction</span></span>
- <span data-ttu-id="ed610-122">model školení</span><span class="sxs-lookup"><span data-stu-id="ed610-122">model training</span></span> 
- <span data-ttu-id="ed610-123">ověření modelu</span><span class="sxs-lookup"><span data-stu-id="ed610-123">model validation</span></span>
- <span data-ttu-id="ed610-124">nasazení modelů hello</span><span class="sxs-lookup"><span data-stu-id="ed610-124">deployment of hello models</span></span>

<span data-ttu-id="ed610-125">Azure Machine Learning Studio podporuje vnoření skriptů Python do různých částí počítače učení experiment a také bezproblémově publikováním jako webové služby v Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="ed610-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="ed610-126">Principy návrhu skriptů Python v Machine Learning</span><span class="sxs-lookup"><span data-stu-id="ed610-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="ed610-127">Hello tooPython primární rozhraní v nástroji Azure Machine Learning Studio je prostřednictvím hello [Execute Python Script] [ execute-python-script] modulu na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="ed610-127">hello primary interface tooPython in Azure Machine Learning Studio is via hello [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="ed610-130">Obrázek 1.</span><span class="sxs-lookup"><span data-stu-id="ed610-130">Figure 1.</span></span> <span data-ttu-id="ed610-131">Hello **Execute Python Script** modulu.</span><span class="sxs-lookup"><span data-stu-id="ed610-131">hello **Execute Python Script** module.</span></span>

<span data-ttu-id="ed610-132">Hello [Execute Python Script] [ execute-python-script] modulu v Azure ML Studio přijímá až toothree vstupy a vytvoří si tootwo výstupy (popsané v následující části hello), jako jeho analogovým R hello [ Spuštění skriptu R] [ execute-r-script] modulu.</span><span class="sxs-lookup"><span data-stu-id="ed610-132">hello [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up toothree inputs and produces up tootwo outputs (discussed in hello following section), like its R analogue, hello [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="ed610-133">Hello toobe kód Python provést zadání do pole parametr hello jako speciálně pojmenovanou vstupní bod volaná funkce `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="ed610-133">hello Python code toobe executed is entered into hello parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="ed610-134">Zde jsou hello klíče návrhu zásady použít tooimplement tento modul:</span><span class="sxs-lookup"><span data-stu-id="ed610-134">Here are hello key design principles used tooimplement this module:</span></span>

1. <span data-ttu-id="ed610-135">*Musí být idiomatickou pro Python uživatele.*</span><span class="sxs-lookup"><span data-stu-id="ed610-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="ed610-136">Většina uživatelů Python dvoufaktorového svůj kód jako funkce uvnitř modulů.</span><span class="sxs-lookup"><span data-stu-id="ed610-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="ed610-137">Proto uvedení spoustu spustitelné příkazy v modulu nejvyšší úrovně je relativně vzácné.</span><span class="sxs-lookup"><span data-stu-id="ed610-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="ed610-138">V důsledku toho hello skriptu zadejte také vezme speciálně pojmenovanou funkce Python jako názvem na rozdíl od toojust posloupnost příkazy.</span><span class="sxs-lookup"><span data-stu-id="ed610-138">As a result, hello script box also takes a specially named Python function as opposed toojust a sequence of statements.</span></span> <span data-ttu-id="ed610-139">Hello objekty v hello funkce jsou typy standardní knihovny jazyka Python, jako [Pandas](http://pandas.pydata.org/) datových rámců a [NumPy](http://www.numpy.org/) pole.</span><span class="sxs-lookup"><span data-stu-id="ed610-139">hello objects exposed in hello function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="ed610-140">*Musí mít zachováním mezi místním a cloudovým spuštěních.*</span><span class="sxs-lookup"><span data-stu-id="ed610-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="ed610-141">Hello hello tooexecute back-end použít kód Python je založena na [Anaconda](https://store.continuum.io/cshop/anaconda/), nejběžněji používané scientific distribuci jazyka Python a platformy.</span><span class="sxs-lookup"><span data-stu-id="ed610-141">hello backend used tooexecute hello Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="ed610-142">Součástí zavřít too200 hello nejběžnější balíčků Python.</span><span class="sxs-lookup"><span data-stu-id="ed610-142">It comes with close too200 of hello most common Python packages.</span></span> <span data-ttu-id="ed610-143">Proto můžete datových vědců ladění a kvalifikaci svůj kód na jejich místním prostředí Azure Machine Learning kompatibilní Anaconda.</span><span class="sxs-lookup"><span data-stu-id="ed610-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="ed610-144">Použít existující vývojové prostředí, například [IPython](http://ipython.org/) poznámkového bloku nebo [Python Tools pro Visual Studio](http://aka.ms/ptvs), toorun ji jako součást Azure ML experimentu.</span><span class="sxs-lookup"><span data-stu-id="ed610-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), toorun it as part of an Azure ML experiment.</span></span> <span data-ttu-id="ed610-145">Hello `azureml_main` vstupní bod je vanilla Python funkce a tak *** bez kódu pro konkrétní Azure ML se můžou vytvořit nebo hello SDK nainstalována.</span><span class="sxs-lookup"><span data-stu-id="ed610-145">hello `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or hello SDK installed.</span></span>
3. <span data-ttu-id="ed610-146">*Musí být bezproblémově složení s další moduly Azure Machine Learning.*</span><span class="sxs-lookup"><span data-stu-id="ed610-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="ed610-147">Hello [Execute Python Script] [ execute-python-script] modul přijímá jako vstupy a výstupy, standardní datové sady Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed610-147">hello [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="ed610-148">základní architektury Hello transparentně a efektivně přemosťuje moduly runtime hello Azure ML a Python.</span><span class="sxs-lookup"><span data-stu-id="ed610-148">hello underlying framework transparently and efficiently bridges hello Azure ML and Python runtimes.</span></span> <span data-ttu-id="ed610-149">Proto Python můžete použít ve spojení s stávajících pracovními postupy Azure ML, včetně těch, které volají do R a SQLite.</span><span class="sxs-lookup"><span data-stu-id="ed610-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="ed610-150">Ve výsledku vědecký pracovník data tvoří pracovních který:</span><span class="sxs-lookup"><span data-stu-id="ed610-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="ed610-151">použití jazyka Python a Pandas pro data předem zpracování a čištění</span><span class="sxs-lookup"><span data-stu-id="ed610-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="ed610-152">informačního kanálu hello tooa SQL transformaci dat, připojení více funkcí tooform datové sady</span><span class="sxs-lookup"><span data-stu-id="ed610-152">feed hello data tooa SQL transformation, joining multiple datasets tooform features</span></span>
   * <span data-ttu-id="ed610-153">cvičení modelů pomocí hello algoritmy v Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="ed610-153">train models using hello algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="ed610-154">vyhodnocení a po zpracování výsledků hello pomocí R.</span><span class="sxs-lookup"><span data-stu-id="ed610-154">evaluate and post-process hello results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="ed610-155">Základní informace o využití scénáře v ML skriptů Python</span><span class="sxs-lookup"><span data-stu-id="ed610-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="ed610-156">V této části jsme některé základní použití hello hello zjišťování [Execute Python Script] [ execute-python-script] modulu.</span><span class="sxs-lookup"><span data-stu-id="ed610-156">In this section, we survey some of hello basic uses of hello [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="ed610-157">Modul Python toohello vstupy jsou zveřejněné jako Pandas datové rámce.</span><span class="sxs-lookup"><span data-stu-id="ed610-157">Inputs toohello Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="ed610-158">Hello funkce musí vracet jeden snímek dat Pandas zabalené uvnitř Python [pořadí](https://docs.python.org/2/c-api/sequence.html) například řazené kolekce členů, seznamu nebo NumPy pole.</span><span class="sxs-lookup"><span data-stu-id="ed610-158">hello function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="ed610-159">první prvek Hello toto pořadí je pak vrácen v hello první výstupní port modulu hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-159">hello first element of this sequence is then returned in hello first output port of hello module.</span></span> <span data-ttu-id="ed610-160">Toto schéma je znázorněno na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="ed610-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="ed610-162">Obrázek 2.</span><span class="sxs-lookup"><span data-stu-id="ed610-162">Figure 2.</span></span> <span data-ttu-id="ed610-163">Mapování vstupních portů tooparameters a vrátí hodnotu toooutput portu.</span><span class="sxs-lookup"><span data-stu-id="ed610-163">Mapping of input ports tooparameters and return value toooutput port.</span></span>

<span data-ttu-id="ed610-164">Podrobnější sémantiku jak vstupních portů hello získat namapované tooparameters hello `azureml_main` funkce jsou uvedené v tabulce 1:</span><span class="sxs-lookup"><span data-stu-id="ed610-164">More detailed semantics of how hello input ports get mapped tooparameters of hello `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="ed610-166">Tabulka 1.</span><span class="sxs-lookup"><span data-stu-id="ed610-166">Table 1.</span></span> <span data-ttu-id="ed610-167">Mapování parametrů toofunction vstupních portů.</span><span class="sxs-lookup"><span data-stu-id="ed610-167">Mapping of input ports toofunction parameters.</span></span>

<span data-ttu-id="ed610-168">je poziční Hello mapování mezi vstupních portů a parametry funkce:</span><span class="sxs-lookup"><span data-stu-id="ed610-168">hello mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="ed610-169">Hello první připojené vstupní port je namapované toohello první parametr funkce hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-169">hello first connected input port is mapped toohello first parameter of hello function.</span></span> 
- <span data-ttu-id="ed610-170">druhý vstup Hello (Pokud je připojeno) je namapované toohello druhý parametr funkce hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-170">hello second input (if connected) is mapped toohello second parameter of hello function.</span></span>

<span data-ttu-id="ed610-171">V tématu *Python pro analýzu dat* (O'Reilly, 2012) podle západní McKinney pro další informace o Python Pandas a na tom, jak může být dat použité toomanipulate efektivnější.</span><span class="sxs-lookup"><span data-stu-id="ed610-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used toomanipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="ed610-172">Překlad vstupní a výstupní typů</span><span class="sxs-lookup"><span data-stu-id="ed610-172">Translation of input and output types</span></span> 
<span data-ttu-id="ed610-173">Vstupní datové sady v Azure ML jsou snímky převedený toodata v Pandas.</span><span class="sxs-lookup"><span data-stu-id="ed610-173">Input datasets in Azure ML are converted toodata frames in Pandas.</span></span> <span data-ttu-id="ed610-174">Výstupní datové rámce se převedou back tooAzure ML datové sady.</span><span class="sxs-lookup"><span data-stu-id="ed610-174">Output data frames are converted back tooAzure ML datasets.</span></span> <span data-ttu-id="ed610-175">jsou prováděny následující převody Hello:</span><span class="sxs-lookup"><span data-stu-id="ed610-175">hello following conversions are performed:</span></span>

1. <span data-ttu-id="ed610-176">Řetězec a číselné sloupce se převedou jako-je a jsou převedené too'NA chybějící hodnoty v datové sadě ' hodnoty v Pandas.</span><span class="sxs-lookup"><span data-stu-id="ed610-176">String and numeric columns are converted as-is and missing values in a dataset are converted too‘NA’ values in Pandas.</span></span> <span data-ttu-id="ed610-177">Hello stejné dojde k převodu na zpět způsobem hello (NA hodnoty v Pandas jsou převedené toomissing hodnoty v Azure ML).</span><span class="sxs-lookup"><span data-stu-id="ed610-177">hello same conversion happens on hello way back (NA values in Pandas are converted toomissing values in Azure ML).</span></span>
2. <span data-ttu-id="ed610-178">Index vektorů v Pandas nejsou podporovány v Azure ML.</span><span class="sxs-lookup"><span data-stu-id="ed610-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="ed610-179">Všechny snímky vstupní data v hello Python funkce mít vždy 64-bit číselné index z 0 toohello počet řádků minus 1.</span><span class="sxs-lookup"><span data-stu-id="ed610-179">All input data frames in hello Python function always have a 64-bit numerical index from 0 toohello number of rows minus 1.</span></span> 
3. <span data-ttu-id="ed610-180">Datové sady Azure ML nemůže mít duplicitní názvy sloupců a názvy sloupců, které nejsou typu řetězec.</span><span class="sxs-lookup"><span data-stu-id="ed610-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="ed610-181">Pokud již výstupní data rámečku obsahuje jiné než číselné sloupce, hello framework volání `str` na názvy sloupců hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-181">If an output data frame contains non-numeric columns, hello framework calls `str` on hello column names.</span></span> <span data-ttu-id="ed610-182">Stejně tak všechny duplicitní názvy sloupců jsou automaticky pozměnění tooinsure hello názvy jsou jedinečné.</span><span class="sxs-lookup"><span data-stu-id="ed610-182">Likewise, any duplicate column names are automatically mangled tooinsure hello names are unique.</span></span> <span data-ttu-id="ed610-183">přidá přípona Hello (2) toohello první duplicitní, (3) druhý duplicitní toohello a tak dále.</span><span class="sxs-lookup"><span data-stu-id="ed610-183">hello suffix (2) is added toohello first duplicate, (3) toohello second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="ed610-184">Zprovozňování skriptů Python</span><span class="sxs-lookup"><span data-stu-id="ed610-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="ed610-185">Všechny [Execute Python Script] [ execute-python-script] moduly používané v vyhodnocování experimentu jsou volány při publikovat jako webovou službu.</span><span class="sxs-lookup"><span data-stu-id="ed610-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="ed610-186">Obrázek 3 ukazuje například vyhodnocování experimentu, který obsahuje hello kódu tooevaluate jeden výraz Python.</span><span class="sxs-lookup"><span data-stu-id="ed610-186">For example, Figure 3 shows a scoring experiment that contains hello code tooevaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![image5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="ed610-189">Obrázek 3.</span><span class="sxs-lookup"><span data-stu-id="ed610-189">Figure 3.</span></span> <span data-ttu-id="ed610-190">Webové služby pro vyhodnocení výrazu jazyka Python.</span><span class="sxs-lookup"><span data-stu-id="ed610-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="ed610-191">Webové služby vytvořené z tohoto experimentu:</span><span class="sxs-lookup"><span data-stu-id="ed610-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="ed610-192">přijímá jako vstup výraz Python (jako řetězec)</span><span class="sxs-lookup"><span data-stu-id="ed610-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="ed610-193">odešle ji překladač Pythonu toohello</span><span class="sxs-lookup"><span data-stu-id="ed610-193">sends it toohello Python interpreter</span></span> 
- <span data-ttu-id="ed610-194">Vrátí tabulku obsahující hello výraz a hello vyhodnotit výsledek.</span><span class="sxs-lookup"><span data-stu-id="ed610-194">returns a table containing both hello expression and hello evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="ed610-195">Import existující moduly skriptu jazyka Python</span><span class="sxs-lookup"><span data-stu-id="ed610-195">Importing existing Python script modules</span></span>

<span data-ttu-id="ed610-196">Běžné případ použití pro mnoho datových vědců je tooincorporate existující skriptů Python do Azure ML experimenty.</span><span class="sxs-lookup"><span data-stu-id="ed610-196">A common use-case for many data scientists is tooincorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="ed610-197">Místo aby se, že veškerý kód zřetězených a vložit do jednoho skriptu pole, hello [Execute Python Script] [ execute-python-script] modul přijímá soubor zip, který obsahuje moduly jazyka Python na třetí vstupní port hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-197">Instead of requiring that all code be concatenated and pasted into a single script box, hello [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at hello third input port.</span></span> <span data-ttu-id="ed610-198">soubor Hello je rozbalené rámcem hello provádění za běhu a hello obsahu se přidají cesta knihovny toohello překladač Pythonu hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-198">hello file is unzipped by hello execution framework at runtime and hello contents are added toohello library path of hello Python interpreter.</span></span> <span data-ttu-id="ed610-199">Hello `azureml_main` vstupní bod funkce můžete poté importovat tyto moduly přímo.</span><span class="sxs-lookup"><span data-stu-id="ed610-199">hello `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="ed610-200">Jako příklad zvažte hello soubor Hello.py obsahující jednoduché funkci "Hello, World".</span><span class="sxs-lookup"><span data-stu-id="ed610-200">As an example, consider hello file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="ed610-202">Obrázek 4.</span><span class="sxs-lookup"><span data-stu-id="ed610-202">Figure 4.</span></span> <span data-ttu-id="ed610-203">Uživatelem definované funkce v souboru Hello.py.</span><span class="sxs-lookup"><span data-stu-id="ed610-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="ed610-204">V dalším kroku vytvoříme soubor Hello.zip, který obsahuje Hello.py:</span><span class="sxs-lookup"><span data-stu-id="ed610-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="ed610-206">Obrázek 5.</span><span class="sxs-lookup"><span data-stu-id="ed610-206">Figure 5.</span></span> <span data-ttu-id="ed610-207">Soubor ZIP obsahující uživatelem definované kód Python.</span><span class="sxs-lookup"><span data-stu-id="ed610-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="ed610-208">Nahrajte soubor zip hello jako datové sady do Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ed610-208">Upload hello zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="ed610-209">Pak vytvořte a spusťte experimentu, který používá hello Python kód v souboru Hello.zip hello tak, že ho připojíte toohello třetí vstupní port hello **Execute Python Script** modulu, jak je vidět na tomto obrázku.</span><span class="sxs-lookup"><span data-stu-id="ed610-209">Then create and run an experiment that uses hello Python code in hello Hello.zip file by attaching it toohello third input port of hello **Execute Python Script** module, as shown in this figure.</span></span>

![image8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="ed610-212">Obrázek 6.</span><span class="sxs-lookup"><span data-stu-id="ed610-212">Figure 6.</span></span> <span data-ttu-id="ed610-213">Ukázkový experiment s uživatelem definovaný kód Python uloženo jako soubor zip.</span><span class="sxs-lookup"><span data-stu-id="ed610-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="ed610-214">Hello modulu výstup ukazuje, že soubor zip hello nezabalené a že fungují hello `print_hello` byl spuštěn.</span><span class="sxs-lookup"><span data-stu-id="ed610-214">hello module output shows that hello zip file has been unpackaged and that hello function `print_hello` has been run.</span></span>
<span data-ttu-id="ed610-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="ed610-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="ed610-216">Na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="ed610-216">Figure 7.</span></span> <span data-ttu-id="ed610-217">Uživatelem definované funkce používá uvnitř hello [Execute Python Script] [ execute-python-script] modulu.</span><span class="sxs-lookup"><span data-stu-id="ed610-217">User-defined function in use inside hello [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="ed610-218">Práce s vizualizacemi</span><span class="sxs-lookup"><span data-stu-id="ed610-218">Working with visualizations</span></span>

<span data-ttu-id="ed610-219">Pozemků vytvořený MatplotLib, který můžete vizualizovat v prohlížeči hello se může vracet hello [Execute Python Script][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="ed610-219">Plots created using MatplotLib that can be visualized on hello browser can be returned by hello [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="ed610-220">Ale hello pozemků nejsou automaticky přesměrovaného tooimages jako při použití R. Takže hello uživatel musí explicitně uložit všechny pozemků tooPNG soubory Pokud jsou toobe vrátil zpět tooAzure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed610-220">But hello plots are not automatically redirected tooimages as they are when using R. So hello user must explicitly save any plots tooPNG files if they are toobe returned back tooAzure Machine Learning.</span></span> 

<span data-ttu-id="ed610-221">toogenerate obrázky z MatplotLib, musíte provést následující postup hello:</span><span class="sxs-lookup"><span data-stu-id="ed610-221">toogenerate images from MatplotLib, you must complete hello following procedure:</span></span>

* <span data-ttu-id="ed610-222">přepínač back-end hello příliš "%{AGG/" z hello výchozí na základě rt zobrazovací jednotky</span><span class="sxs-lookup"><span data-stu-id="ed610-222">switch hello backend too“AGG” from hello default Qt-based renderer</span></span> 
* <span data-ttu-id="ed610-223">Vytvořit nový objekt obrázku</span><span class="sxs-lookup"><span data-stu-id="ed610-223">create a new figure object</span></span> 
* <span data-ttu-id="ed610-224">získat hello osy a generovat všechny pozemků do ní</span><span class="sxs-lookup"><span data-stu-id="ed610-224">get hello axis and generate all plots into it</span></span> 
* <span data-ttu-id="ed610-225">Uložte soubor PNG tooa obrázek hello</span><span class="sxs-lookup"><span data-stu-id="ed610-225">save hello figure tooa PNG file</span></span> 

<span data-ttu-id="ed610-226">Tento proces je znázorněn v následujícím obrázek 8, která vytvoří matice bodové vykreslení pomocí funkce scatter_matrix hello v Pandas hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-226">This process is illustrated in hello following Figure 8 that creates a scatter plot matrix using hello scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="ed610-228">Obrázek 8.</span><span class="sxs-lookup"><span data-stu-id="ed610-228">Figure 8.</span></span> <span data-ttu-id="ed610-229">Kód toosave, které MatplotLib obrázky tooimages.</span><span class="sxs-lookup"><span data-stu-id="ed610-229">Code toosave MatplotLib figures tooimages.</span></span>

<span data-ttu-id="ed610-230">Obrázek 9 ukazuje experimentu používá skript hello uvedený výše, že tooreturn ukazuje zeměpisný prostřednictvím hello druhý výstupní port.</span><span class="sxs-lookup"><span data-stu-id="ed610-230">Figure 9 shows an experiment that uses hello script shown previously tooreturn plots via hello second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="ed610-233">Obrázek 9.</span><span class="sxs-lookup"><span data-stu-id="ed610-233">Figure 9.</span></span> <span data-ttu-id="ed610-234">Vizualizace pozemků generované z kódu jazyka Python.</span><span class="sxs-lookup"><span data-stu-id="ed610-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="ed610-235">Je možné tooreturn více obrázků jejich uložením do různých obrázků, hello Azure Machine Learning runtime příjmem všechny bitové kopie a je zřetězí pro vizualizaci.</span><span class="sxs-lookup"><span data-stu-id="ed610-235">It is possible tooreturn multiple figures by saving them into different images, hello Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="ed610-236">Pokročilé příklady</span><span class="sxs-lookup"><span data-stu-id="ed610-236">Advanced examples</span></span>

<span data-ttu-id="ed610-237">Hello Anaconda prostředí nainstalován v Azure Machine Learning obsahuje běžné balíčků, jako jsou NumPy, SciPy a další Scikits.</span><span class="sxs-lookup"><span data-stu-id="ed610-237">hello Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="ed610-238">Tyto balíčky můžete efektivně použít pro různé úlohy zpracování dat v machine learning kanálu.</span><span class="sxs-lookup"><span data-stu-id="ed610-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="ed610-239">Jako příklad hello následující experiment a skript ilustrují použití hello inteligentních algoritmů komplet v další Scikits toocompute funkce důležitosti skóre pro datovou sadu.</span><span class="sxs-lookup"><span data-stu-id="ed610-239">As an example, hello following experiment and script illustrate hello use of ensemble learners in Scikits-Learn toocompute feature importance scores for a dataset.</span></span> <span data-ttu-id="ed610-240">Výběr použité tooperform pod dohledem funkce před se předány do jiného modelu ML může být Hello skóre.</span><span class="sxs-lookup"><span data-stu-id="ed610-240">hello scores can be used tooperform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="ed610-241">Tady je hello Python funkce použitá toocompute hello důležitosti skóre a funkce hello pořadí podle skóre hello:</span><span class="sxs-lookup"><span data-stu-id="ed610-241">Here is hello Python function used toocompute hello importance scores and order hello features based on hello scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="ed610-243">Obrázek 10.</span><span class="sxs-lookup"><span data-stu-id="ed610-243">Figure 10.</span></span> <span data-ttu-id="ed610-244">Funkce funkce toorank podle skóre.</span><span class="sxs-lookup"><span data-stu-id="ed610-244">Function toorank features by scores.</span></span>
<span data-ttu-id="ed610-245"> Hello následující experimentu pak vypočítá a vrátí hello důležitosti skóre funkcí v datové sadě "Pima indickém Diabetes" hello v Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="ed610-245">  hello following experiment then computes and returns hello importance scores of features in hello “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="ed610-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="ed610-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="ed610-247">Obrázek 11.</span><span class="sxs-lookup"><span data-stu-id="ed610-247">Figure 11.</span></span> <span data-ttu-id="ed610-248">Funkce toorank experimentu v datové sadě Pima indickém Diabetes hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-248">Experiment toorank features in hello Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="ed610-249">Omezení</span><span class="sxs-lookup"><span data-stu-id="ed610-249">Limitations</span></span>
<span data-ttu-id="ed610-250">Hello [Execute Python Script] [ execute-python-script] má v současné době hello následující omezení:</span><span class="sxs-lookup"><span data-stu-id="ed610-250">hello [Execute Python Script][execute-python-script] currently has hello following limitations:</span></span>

1. <span data-ttu-id="ed610-251">*V izolovaném prostoru provádění.*</span><span class="sxs-lookup"><span data-stu-id="ed610-251">*Sandboxed execution.*</span></span> <span data-ttu-id="ed610-252">modul Python runtime Hello je aktuálně v izolovaném prostoru a v důsledku toho neumožňuje přístup toohello sítě nebo toohello místního systému souborů trvalé způsobem.</span><span class="sxs-lookup"><span data-stu-id="ed610-252">hello Python runtime is currently sandboxed and, as a result, does not allow access toohello network or toohello local file system in a persistent manner.</span></span> <span data-ttu-id="ed610-253">Všechny soubory, které jsou uloženy v místním počítači jsou izolované a odstranit po dokončení modulu hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-253">All files saved locally are isolated and deleted once hello module finishes.</span></span> <span data-ttu-id="ed610-254">Hello kód Python nemůže získat přístup k většině adresářů v počítači hello, na kterém běží na, se výjimka hello hello aktuálního adresáře a jejích podadresářů.</span><span class="sxs-lookup"><span data-stu-id="ed610-254">hello Python code cannot access most directories on hello machine it runs on, hello exception being hello current directory and its subdirectories.</span></span>
2. <span data-ttu-id="ed610-255">*Chybí sofistikované vývoji a ladění podpory.*</span><span class="sxs-lookup"><span data-stu-id="ed610-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="ed610-256">modul Python Hello aktuálně nepodporuje IDE funkce jako je například technologie intellisense a ladění.</span><span class="sxs-lookup"><span data-stu-id="ed610-256">hello Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="ed610-257">Také v případě selhání modulu hello za běhu hello úplné trasování zásobníku Python je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="ed610-257">Also, if hello module fails at runtime, hello full Python stack trace is available.</span></span> <span data-ttu-id="ed610-258">Je však nutné ji zobrazit v protokolu výstup hello hello modulu.</span><span class="sxs-lookup"><span data-stu-id="ed610-258">But it must be viewed in hello output log for hello module.</span></span> <span data-ttu-id="ed610-259">Doporučujeme aktuálně vyvíjet a ladit Python skripty v prostředí, jako je například IPython a pak importovat hello kódu do modulu hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import hello code into hello module.</span></span>
3. <span data-ttu-id="ed610-260">*Single – datový výstup rámce.*</span><span class="sxs-lookup"><span data-stu-id="ed610-260">*Single data frame output.*</span></span> <span data-ttu-id="ed610-261">Hello Python vstupní bod je pouze povolené tooreturn rámec jednoho datového jako výstup.</span><span class="sxs-lookup"><span data-stu-id="ed610-261">hello Python entry point is only permitted tooreturn a single data frame as output.</span></span> <span data-ttu-id="ed610-262">Není aktuálně možné tooreturn, který libovolný Python objekty, jako je trénované modely přímo zpět toohello Azure Machine Learning runtime.</span><span class="sxs-lookup"><span data-stu-id="ed610-262">It is not currently possible tooreturn arbitrary Python objects such as trained models directly back toohello Azure Machine Learning runtime.</span></span> <span data-ttu-id="ed610-263">Jako [spustit skript jazyka R][execute-r-script], který má hello stejné omezení, je možné v mnoha případech toopickle objektů do bajt pole a pak, vraťte uvnitř datové rámce.</span><span class="sxs-lookup"><span data-stu-id="ed610-263">Like [Execute R Script][execute-r-script], which has hello same limitation, it is possible in many cases toopickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="ed610-264">*Nemohou toocustomize Python instalace*.</span><span class="sxs-lookup"><span data-stu-id="ed610-264">*Inability toocustomize Python installation*.</span></span> <span data-ttu-id="ed610-265">V současné době hello pouze způsob tooadd vlastní moduly jazyka Python je přes mechanismus soubor zip hello popsané výše.</span><span class="sxs-lookup"><span data-stu-id="ed610-265">Currently, hello only way tooadd custom Python modules is via hello zip file mechanism described earlier.</span></span> <span data-ttu-id="ed610-266">To je vhodná pro malé moduly, je nevhodnou pro velké moduly (především těch s nativních knihoven DLL) nebo velký počet modulů.</span><span class="sxs-lookup"><span data-stu-id="ed610-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="ed610-267">Závěrů</span><span class="sxs-lookup"><span data-stu-id="ed610-267">Conclusions</span></span>
<span data-ttu-id="ed610-268">Hello [Execute Python Script] [ execute-python-script] modulu umožňuje vědecký pracovník data existující kód Python tooincorporate do pracovních postupů hostovaných v cloudu machine learning v Azure Machine Learning a tooseamlessly zprovoznění je jako součást webové služby.</span><span class="sxs-lookup"><span data-stu-id="ed610-268">hello [Execute Python Script][execute-python-script] module allows a data scientist tooincorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and tooseamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="ed610-269">modul skriptu Python Hello přirozeně spolupracuje s dalších modulů v Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ed610-269">hello Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="ed610-270">modul Hello lze použít pro celou řadu úloh z zpracování toopre zkoumání dat a funkce extrakce a poté tooevaluation a po zpracování výsledků hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-270">hello module can be used for a range of tasks from data exploration toopre-processing and feature extraction, and then tooevaluation and post-processing of hello results.</span></span> <span data-ttu-id="ed610-271">modul runtime back-end Hello používá pro spuštění je založena na Anacondu, distribuci jazyka Python dobře otestované a často používaný.</span><span class="sxs-lookup"><span data-stu-id="ed610-271">hello backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="ed610-272">Tento back-end zjednodušuje pro vás tooon Tabule existující kód prostředky do cloudu hello.</span><span class="sxs-lookup"><span data-stu-id="ed610-272">This backend makes it simple for you tooon-board existing code assets into hello cloud.</span></span>

<span data-ttu-id="ed610-273">Očekáváme, že další funkce toohello tooprovide [Execute Python Script] [ execute-python-script] modulu, jako hello možnost tootrain a zprovoznit modely v Pythonu a tooadd lepší podporu hello vývoj a ladění kódu v Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ed610-273">We expect tooprovide additional functionality toohello [Execute Python Script][execute-python-script] module such as hello ability tootrain and operationalize models in Python and tooadd better support for hello development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ed610-274">Další kroky</span><span class="sxs-lookup"><span data-stu-id="ed610-274">Next steps</span></span>
<span data-ttu-id="ed610-275">Další informace najdete v tématu hello [středisku pro vývojáře Python](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="ed610-275">For more information, see hello [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
