---
title: "aaaIIS přihlásí Log Analytics | Microsoft Docs"
description: "Internetové informační služby (IIS) ukládá aktivity uživatelů v souborech protokolů, které může shromáždit analýzy protokolů.  Tento článek popisuje, jak tooconfigure shromažďování protokolů služby IIS a podrobnosti záznamů hello vytvoří v úložišti OMS hello."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: cec5ff0a-01f5-4262-b2e8-e3db7b7467d2
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: bwren
ms.openlocfilehash: c5575351090cdabaf651bcb49867794ee3a4b6e6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="iis-logs-in-log-analytics"></a><span data-ttu-id="894c4-104">Služba IIS přihlásí analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="894c4-104">IIS logs in Log Analytics</span></span>
<span data-ttu-id="894c4-105">Internetové informační služby (IIS) ukládá aktivity uživatelů v souborech protokolů, které může shromáždit analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="894c4-105">Internet Information Services (IIS) stores user activity in log files that can be collected by Log Analytics.</span></span>  

![Protokoly IIS](media/log-analytics-data-sources-iis-logs/overview.png)

## <a name="configuring-iis-logs"></a><span data-ttu-id="894c4-107">Konfigurace služby IIS protokoly</span><span class="sxs-lookup"><span data-stu-id="894c4-107">Configuring IIS logs</span></span>
<span data-ttu-id="894c4-108">Analýzy protokolů shromáždí položky z soubory protokolů vytvořené službou IIS, takže musíte [konfigurace IIS pro protokolování](https://technet.microsoft.com/library/hh831775.aspx).</span><span class="sxs-lookup"><span data-stu-id="894c4-108">Log Analytics collects entries from log files created by IIS, so you must [configure IIS for logging](https://technet.microsoft.com/library/hh831775.aspx).</span></span>

<span data-ttu-id="894c4-109">Analýzy protokolů pouze podporuje uložený ve formátu W3C souborech protokolu služby IIS a nepodporuje vlastní pole nebo rozšířené protokolování internetové informační služby.</span><span class="sxs-lookup"><span data-stu-id="894c4-109">Log Analytics only supports IIS log files stored in W3C format and does not support custom fields or IIS Advanced Logging.</span></span>  
<span data-ttu-id="894c4-110">Analýzy protokolů neshromažďuje protokoly ve formátu NCSA nebo IIS nativní.</span><span class="sxs-lookup"><span data-stu-id="894c4-110">Log Analytics does not collect logs in NCSA or IIS native format.</span></span>

<span data-ttu-id="894c4-111">Konfigurace služby IIS protokolů v analýzy protokolů z hello [nabídce Data v nastavení analýzy protokolů](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="894c4-111">Configure IIS logs in Log Analytics from hello [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>  <span data-ttu-id="894c4-112">Není nutná žádná konfigurace, jiné než vyberete **souborů protokolu W3C shromažďovat formátu služby IIS**.</span><span class="sxs-lookup"><span data-stu-id="894c4-112">There is no configuration required other than selecting **Collect W3C format IIS log files**.</span></span>

<span data-ttu-id="894c4-113">Doporučujeme vám, že pokud povolíte kolekce protokolu služby IIS, byste měli na každém serveru nakonfigurovat nastavení výměny protokolu služby IIS hello.</span><span class="sxs-lookup"><span data-stu-id="894c4-113">We recommend that when you enable IIS log collection, you should configure hello IIS log rollover setting on each server.</span></span>

## <a name="data-collection"></a><span data-ttu-id="894c4-114">Shromažďování dat</span><span class="sxs-lookup"><span data-stu-id="894c4-114">Data collection</span></span>
<span data-ttu-id="894c4-115">Analýzy protokolů shromažďuje položky protokolu služby IIS z každého připojeného zdroje přibližně každých 15 minut.</span><span class="sxs-lookup"><span data-stu-id="894c4-115">Log Analytics collects IIS log entries from each connected source approximately every 15 minutes.</span></span>  <span data-ttu-id="894c4-116">Hello agent zaznamenává jeho místo v každém protokolu událostí, shromažďující z.</span><span class="sxs-lookup"><span data-stu-id="894c4-116">hello agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="894c4-117">Pokud agenta hello přejde do režimu offline, pak analýzy protokolů shromažďuje události od poslední místa vypnout, i v případě, že tyto události byly vytvořeny v době, kdy hello agent offline.</span><span class="sxs-lookup"><span data-stu-id="894c4-117">If hello agent goes offline, then Log Analytics collects events from where it last left off, even if those events were created while hello agent was offline.</span></span>

## <a name="iis-log-record-properties"></a><span data-ttu-id="894c4-118">Vlastnosti záznamu protokolu služby IIS</span><span class="sxs-lookup"><span data-stu-id="894c4-118">IIS log record properties</span></span>
<span data-ttu-id="894c4-119">Záznamy protokolu služby IIS mít typ **W3CIISLog** a mít hello vlastnosti v hello následující tabulka:</span><span class="sxs-lookup"><span data-stu-id="894c4-119">IIS log records have a type of **W3CIISLog** and have hello properties in hello following table:</span></span>

| <span data-ttu-id="894c4-120">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="894c4-120">Property</span></span> | <span data-ttu-id="894c4-121">Popis</span><span class="sxs-lookup"><span data-stu-id="894c4-121">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="894c4-122">Počítač</span><span class="sxs-lookup"><span data-stu-id="894c4-122">Computer</span></span> |<span data-ttu-id="894c4-123">Název hello počítače, který hello událost nebyla shromážděna z.</span><span class="sxs-lookup"><span data-stu-id="894c4-123">Name of hello computer that hello event was collected from.</span></span> |
| <span data-ttu-id="894c4-124">cIP</span><span class="sxs-lookup"><span data-stu-id="894c4-124">cIP</span></span> |<span data-ttu-id="894c4-125">IP adresa klienta hello.</span><span class="sxs-lookup"><span data-stu-id="894c4-125">IP address of hello client.</span></span> |
| <span data-ttu-id="894c4-126">csMethod</span><span class="sxs-lookup"><span data-stu-id="894c4-126">csMethod</span></span> |<span data-ttu-id="894c4-127">Metoda požadavku hello například GET nebo POST.</span><span class="sxs-lookup"><span data-stu-id="894c4-127">Method of hello request such as GET or POST.</span></span> |
| <span data-ttu-id="894c4-128">csReferer</span><span class="sxs-lookup"><span data-stu-id="894c4-128">csReferer</span></span> |<span data-ttu-id="894c4-129">Lokality této hello uživatele použili odkaz z aktuální lokality toohello.</span><span class="sxs-lookup"><span data-stu-id="894c4-129">Site that hello user followed a link from toohello current site.</span></span> |
| <span data-ttu-id="894c4-130">csUserAgent</span><span class="sxs-lookup"><span data-stu-id="894c4-130">csUserAgent</span></span> |<span data-ttu-id="894c4-131">Typ prohlížeče klienta hello.</span><span class="sxs-lookup"><span data-stu-id="894c4-131">Browser type of hello client.</span></span> |
| <span data-ttu-id="894c4-132">csUserName</span><span class="sxs-lookup"><span data-stu-id="894c4-132">csUserName</span></span> |<span data-ttu-id="894c4-133">Název hello ověřeného uživatele, který se připojil hello serveru.</span><span class="sxs-lookup"><span data-stu-id="894c4-133">Name of hello authenticated user that accessed hello server.</span></span> <span data-ttu-id="894c4-134">Anonymní uživatelé se označují pomlčkou.</span><span class="sxs-lookup"><span data-stu-id="894c4-134">Anonymous users are indicated by a hyphen.</span></span> |
| <span data-ttu-id="894c4-135">csUriStem</span><span class="sxs-lookup"><span data-stu-id="894c4-135">csUriStem</span></span> |<span data-ttu-id="894c4-136">Cíl hello požadavku, jako je například na webové stránce.</span><span class="sxs-lookup"><span data-stu-id="894c4-136">Target of hello request such as a web page.</span></span> |
| <span data-ttu-id="894c4-137">csUriQuery</span><span class="sxs-lookup"><span data-stu-id="894c4-137">csUriQuery</span></span> |<span data-ttu-id="894c4-138">Dotaz, pokud existuje, že klient hello pokoušel tooperform.</span><span class="sxs-lookup"><span data-stu-id="894c4-138">Query, if any, that hello client was trying tooperform.</span></span> |
| <span data-ttu-id="894c4-139">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="894c4-139">ManagementGroupName</span></span> |<span data-ttu-id="894c4-140">Název skupiny pro správu hello agenty nástroje Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="894c4-140">Name of hello management group for Operations Manager agents.</span></span>  <span data-ttu-id="894c4-141">Pro jiné agenty jde AOI -\<ID pracovního prostoru\></span><span class="sxs-lookup"><span data-stu-id="894c4-141">For other agents, this is AOI-\<workspace ID\></span></span> |
| <span data-ttu-id="894c4-142">RemoteIPCountry</span><span class="sxs-lookup"><span data-stu-id="894c4-142">RemoteIPCountry</span></span> |<span data-ttu-id="894c4-143">Země hello IP adresy klienta hello.</span><span class="sxs-lookup"><span data-stu-id="894c4-143">Country of hello IP address of hello client.</span></span> |
| <span data-ttu-id="894c4-144">RemoteIPLatitude</span><span class="sxs-lookup"><span data-stu-id="894c4-144">RemoteIPLatitude</span></span> |<span data-ttu-id="894c4-145">Zeměpisná šířka hello klienta IP adresy.</span><span class="sxs-lookup"><span data-stu-id="894c4-145">Latitude of hello client IP address.</span></span> |
| <span data-ttu-id="894c4-146">RemoteIPLongitude</span><span class="sxs-lookup"><span data-stu-id="894c4-146">RemoteIPLongitude</span></span> |<span data-ttu-id="894c4-147">Zeměpisná délka hello klienta IP adresy.</span><span class="sxs-lookup"><span data-stu-id="894c4-147">Longitude of hello client IP address.</span></span> |
| <span data-ttu-id="894c4-148">scStatus</span><span class="sxs-lookup"><span data-stu-id="894c4-148">scStatus</span></span> |<span data-ttu-id="894c4-149">Stavový kód HTTP.</span><span class="sxs-lookup"><span data-stu-id="894c4-149">HTTP status code.</span></span> |
| <span data-ttu-id="894c4-150">scSubStatus</span><span class="sxs-lookup"><span data-stu-id="894c4-150">scSubStatus</span></span> |<span data-ttu-id="894c4-151">Druhotný stavový kód chyby.</span><span class="sxs-lookup"><span data-stu-id="894c4-151">Substatus error code.</span></span> |
| <span data-ttu-id="894c4-152">scWin32Status</span><span class="sxs-lookup"><span data-stu-id="894c4-152">scWin32Status</span></span> |<span data-ttu-id="894c4-153">Stavový kód Windows.</span><span class="sxs-lookup"><span data-stu-id="894c4-153">Windows status code.</span></span> |
| <span data-ttu-id="894c4-154">sIP</span><span class="sxs-lookup"><span data-stu-id="894c4-154">sIP</span></span> |<span data-ttu-id="894c4-155">IP adresa hello webového serveru.</span><span class="sxs-lookup"><span data-stu-id="894c4-155">IP address of hello web server.</span></span> |
| <span data-ttu-id="894c4-156">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="894c4-156">SourceSystem</span></span> |<span data-ttu-id="894c4-157">Nástroj OpsMgr</span><span class="sxs-lookup"><span data-stu-id="894c4-157">OpsMgr</span></span> |
| <span data-ttu-id="894c4-158">sPort</span><span class="sxs-lookup"><span data-stu-id="894c4-158">sPort</span></span> |<span data-ttu-id="894c4-159">Port na hello server hello klient připojen.</span><span class="sxs-lookup"><span data-stu-id="894c4-159">Port on hello server hello client connected to.</span></span> |
| <span data-ttu-id="894c4-160">sSiteName</span><span class="sxs-lookup"><span data-stu-id="894c4-160">sSiteName</span></span> |<span data-ttu-id="894c4-161">Název webu IIS hello.</span><span class="sxs-lookup"><span data-stu-id="894c4-161">Name of hello IIS site.</span></span> |
| <span data-ttu-id="894c4-162">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="894c4-162">TimeGenerated</span></span> |<span data-ttu-id="894c4-163">Datum a čas hello položka byla zaprotokolována.</span><span class="sxs-lookup"><span data-stu-id="894c4-163">Date and time hello entry was logged.</span></span> |
| <span data-ttu-id="894c4-164">timeTaken</span><span class="sxs-lookup"><span data-stu-id="894c4-164">TimeTaken</span></span> |<span data-ttu-id="894c4-165">Požádat o délce hello tooprocess čas v milisekundách.</span><span class="sxs-lookup"><span data-stu-id="894c4-165">Length of time tooprocess hello request in milliseconds.</span></span> |

## <a name="log-searches-with-iis-logs"></a><span data-ttu-id="894c4-166">Protokol hledání s protokoly služby IIS</span><span class="sxs-lookup"><span data-stu-id="894c4-166">Log searches with IIS logs</span></span>
<span data-ttu-id="894c4-167">Hello následující tabulka obsahuje různé příklady dotazů protokolu, které načtení záznamů protokolu služby IIS.</span><span class="sxs-lookup"><span data-stu-id="894c4-167">hello following table provides different examples of log queries that retrieve IIS log records.</span></span>

| <span data-ttu-id="894c4-168">Dotaz</span><span class="sxs-lookup"><span data-stu-id="894c4-168">Query</span></span> | <span data-ttu-id="894c4-169">Popis</span><span class="sxs-lookup"><span data-stu-id="894c4-169">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="894c4-170">Typ = W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="894c4-170">Type=W3CIISLog</span></span> |<span data-ttu-id="894c4-171">Všechny záznamy protokolu služby IIS.</span><span class="sxs-lookup"><span data-stu-id="894c4-171">All IIS log records.</span></span> |
| <span data-ttu-id="894c4-172">Typ = W3CIISLog scStatus = 500</span><span class="sxs-lookup"><span data-stu-id="894c4-172">Type=W3CIISLog scStatus=500</span></span> |<span data-ttu-id="894c4-173">Všechny záznamy protokolu služby IIS s návratový stav 500.</span><span class="sxs-lookup"><span data-stu-id="894c4-173">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="894c4-174">Typ = W3CIISLog &#124; Míra count() podle cIP</span><span class="sxs-lookup"><span data-stu-id="894c4-174">Type=W3CIISLog &#124; Measure count() by cIP</span></span> |<span data-ttu-id="894c4-175">Počet služby IIS protokolu položky podle IP adresy klienta.</span><span class="sxs-lookup"><span data-stu-id="894c4-175">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="894c4-176">Typ = W3CIISLog csHost = "www.contoso.com" &#124; Míra count() podle csUriStem</span><span class="sxs-lookup"><span data-stu-id="894c4-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span></span> |<span data-ttu-id="894c4-177">Počet z protokolu služby IIS položky podle adresy URL pro www.contoso.com hello hostitele.</span><span class="sxs-lookup"><span data-stu-id="894c4-177">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="894c4-178">Typ = W3CIISLog &#124; Míra Sum(csBytes) podle počítače &#124; horní 500000</span><span class="sxs-lookup"><span data-stu-id="894c4-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span></span> |<span data-ttu-id="894c4-179">Celkový počet přijatých bajtů na každém počítači služby IIS.</span><span class="sxs-lookup"><span data-stu-id="894c4-179">Total bytes received by each IIS computer.</span></span> |

>[!NOTE]
> <span data-ttu-id="894c4-180">Pokud pracovní prostor byl upgradovaný toohello [nové analýzy protokolů dotazu jazyka](log-analytics-log-search-upgrade.md), pak změní následující toohello hello výše dotazy.</span><span class="sxs-lookup"><span data-stu-id="894c4-180">If your workspace has been upgraded toohello [new Log Analytics query language](log-analytics-log-search-upgrade.md), then hello above queries would change toohello following.</span></span>

> | <span data-ttu-id="894c4-181">Dotaz</span><span class="sxs-lookup"><span data-stu-id="894c4-181">Query</span></span> | <span data-ttu-id="894c4-182">Popis</span><span class="sxs-lookup"><span data-stu-id="894c4-182">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="894c4-183">W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="894c4-183">W3CIISLog</span></span> |<span data-ttu-id="894c4-184">Všechny záznamy protokolu služby IIS.</span><span class="sxs-lookup"><span data-stu-id="894c4-184">All IIS log records.</span></span> |
| <span data-ttu-id="894c4-185">W3CIISLog &#124; kde scStatus == 500</span><span class="sxs-lookup"><span data-stu-id="894c4-185">W3CIISLog &#124; where scStatus==500</span></span> |<span data-ttu-id="894c4-186">Všechny záznamy protokolu služby IIS s návratový stav 500.</span><span class="sxs-lookup"><span data-stu-id="894c4-186">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="894c4-187">W3CIISLog &#124; shrnout count() podle cIP</span><span class="sxs-lookup"><span data-stu-id="894c4-187">W3CIISLog &#124; summarize count() by cIP</span></span> |<span data-ttu-id="894c4-188">Počet služby IIS protokolu položky podle IP adresy klienta.</span><span class="sxs-lookup"><span data-stu-id="894c4-188">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="894c4-189">W3CIISLog &#124; kde csHost == "www.contoso.com" &#124; shrnout count() podle csUriStem</span><span class="sxs-lookup"><span data-stu-id="894c4-189">W3CIISLog &#124; where csHost=="www.contoso.com" &#124; summarize count() by csUriStem</span></span> |<span data-ttu-id="894c4-190">Počet z protokolu služby IIS položky podle adresy URL pro www.contoso.com hello hostitele.</span><span class="sxs-lookup"><span data-stu-id="894c4-190">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="894c4-191">W3CIISLog &#124; shrnout sum(csBytes) podle počítače &#124; trvat 500000</span><span class="sxs-lookup"><span data-stu-id="894c4-191">W3CIISLog &#124; summarize sum(csBytes) by Computer &#124; take 500000</span></span> |<span data-ttu-id="894c4-192">Celkový počet přijatých bajtů na každém počítači služby IIS.</span><span class="sxs-lookup"><span data-stu-id="894c4-192">Total bytes received by each IIS computer.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="894c4-193">Další kroky</span><span class="sxs-lookup"><span data-stu-id="894c4-193">Next steps</span></span>
* <span data-ttu-id="894c4-194">Konfigurace analýzy protokolů toocollect jiných [zdroje dat](log-analytics-data-sources.md) pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="894c4-194">Configure Log Analytics toocollect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="894c4-195">Další informace o [protokolu hledání](log-analytics-log-searches.md) tooanalyze hello data budou shromažďovat ze zdroje dat a řešení.</span><span class="sxs-lookup"><span data-stu-id="894c4-195">Learn about [log searches](log-analytics-log-searches.md) tooanalyze hello data collected from data sources and solutions.</span></span>
* <span data-ttu-id="894c4-196">Konfigurace výstrah v analýzy protokolů tooproactively upozorňují na důležité podmínky najít v protokolech služby IIS.</span><span class="sxs-lookup"><span data-stu-id="894c4-196">Configure alerts in Log Analytics tooproactively notify you of important conditions found in IIS logs.</span></span>
