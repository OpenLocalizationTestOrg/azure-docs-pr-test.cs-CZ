---
title: "Řešení VMware monitorování v Log Analytics | Microsoft Docs"
description: "Informace o jak řešení VMware monitorování vám mohou pomoci sledovat hostitelích ESXi a spravovat protokoly."
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 16516639-cc1e-465c-a22f-022f3be297f1
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: banders
ms.openlocfilehash: 17072c4b6e4fdf6e4dc2b7a6a4ded7fa9f9f6fde
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="vmware-monitoring-preview-solution-in-log-analytics"></a><span data-ttu-id="4300f-103">Řešení VMware monitorování (Preview) v analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="4300f-103">VMware Monitoring (Preview) solution in Log Analytics</span></span>

![VMware – symbol](./media/log-analytics-vmware/vmware-symbol.png)

<span data-ttu-id="4300f-105">Řešení VMware monitorování v analýzy protokolů je řešení, které vám pomůže vytvořit centralizované protokolování a monitorování přístup pro velké protokoly VMware.</span><span class="sxs-lookup"><span data-stu-id="4300f-105">The VMware Monitoring solution in Log Analytics is a solution that helps you create a centralized logging and monitoring approach for large VMware logs.</span></span> <span data-ttu-id="4300f-106">Tento článek popisuje, jak můžete řešení, zaznamenat a spravovat hostitele ESXi na jednom místě pomocí řešení.</span><span class="sxs-lookup"><span data-stu-id="4300f-106">This article describes how you can troubleshoot, capture, and manage the ESXi hosts in a single location using the solution.</span></span> <span data-ttu-id="4300f-107">Pomocí tohoto řešení uvidíte podrobná data pro všechny hostitele ESXi na jednom místě.</span><span class="sxs-lookup"><span data-stu-id="4300f-107">With the solution, you can see detailed data for all your ESXi hosts in a single location.</span></span> <span data-ttu-id="4300f-108">Se zobrazí počty nejvyšší událostí, stav a trendy hostitelů virtuálních počítačů a ESXi poskytované prostřednictvím protokolů hostitele ESXi.</span><span class="sxs-lookup"><span data-stu-id="4300f-108">You can see top event counts, status, and trends of VM and ESXi hosts provided through the ESXi host logs.</span></span> <span data-ttu-id="4300f-109">Řešení potíží s zobrazením a hledání centralizované protokoly hostitele ESXi.</span><span class="sxs-lookup"><span data-stu-id="4300f-109">You can troubleshoot by viewing and searching centralized ESXi host logs.</span></span> <span data-ttu-id="4300f-110">A můžete vytvářet výstrahy založené na protokolu vyhledávací dotazy.</span><span class="sxs-lookup"><span data-stu-id="4300f-110">And, you can create alerts based on log search queries.</span></span>

<span data-ttu-id="4300f-111">Toto řešení využívá funkce nativní syslog hostitele ESXi a nabízí data na cíl, virtuální počítač, který má OMS Agent.</span><span class="sxs-lookup"><span data-stu-id="4300f-111">The solution uses native syslog functionality of the ESXi host to push data to a target VM, which has OMS Agent.</span></span> <span data-ttu-id="4300f-112">Toto řešení však není zapisovat soubory do protokolu syslog v cílovém virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="4300f-112">However, the solution doesn't write files into syslog within the target VM.</span></span> <span data-ttu-id="4300f-113">OMS agent otevře port 1514 a naslouchá na to.</span><span class="sxs-lookup"><span data-stu-id="4300f-113">The OMS agent opens port 1514 and listens to this.</span></span> <span data-ttu-id="4300f-114">Jakmile obdrží data, OMS agent doručí data do OMS.</span><span class="sxs-lookup"><span data-stu-id="4300f-114">Once it receives the data, the OMS agent pushes the data into OMS.</span></span>

## <a name="installing-and-configuring-the-solution"></a><span data-ttu-id="4300f-115">Instalace a konfigurace řešení</span><span class="sxs-lookup"><span data-stu-id="4300f-115">Installing and configuring the solution</span></span>
<span data-ttu-id="4300f-116">Použijte následující informace k instalaci a konfiguraci řešení.</span><span class="sxs-lookup"><span data-stu-id="4300f-116">Use the following information to install and configure the solution.</span></span>

* <span data-ttu-id="4300f-117">Přidat řešení monitorování VMware do pracovního prostoru OMS pomocí procesu popsaného v tématu [řešení přidat analýzy protokolů z Galerie řešení](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="4300f-117">Add the VMware Monitoring solution to your OMS workspace using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>

#### <a name="supported-vmware-esxi-hosts"></a><span data-ttu-id="4300f-118">Podporované hostitelé VMware ESXi</span><span class="sxs-lookup"><span data-stu-id="4300f-118">Supported VMware ESXi hosts</span></span>
<span data-ttu-id="4300f-119">vSphere 5.5 hostitele ESXi a 6.0</span><span class="sxs-lookup"><span data-stu-id="4300f-119">vSphere ESXi Host 5.5 and 6.0</span></span>

#### <a name="prepare-a-linux-server"></a><span data-ttu-id="4300f-120">Připravte Linux server</span><span class="sxs-lookup"><span data-stu-id="4300f-120">Prepare a Linux server</span></span>
<span data-ttu-id="4300f-121">Vytvořte operační systém Linux virtuálního počítače z hostitele ESXi přijímat všechna data syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-121">Create a Linux operating system VM to receive all syslog data from the ESXi hosts.</span></span> <span data-ttu-id="4300f-122">[Agenta OMS Linux](log-analytics-linux-agents.md) je bod kolekce pro všechna data syslog hostitele ESXi.</span><span class="sxs-lookup"><span data-stu-id="4300f-122">The [OMS Linux Agent](log-analytics-linux-agents.md) is the collection point for all ESXi host syslog data.</span></span> <span data-ttu-id="4300f-123">Několika hostitelích ESXi slouží k předávání protokolů do jednoho serveru Linux, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="4300f-123">You can use multiple ESXi hosts to forward logs to a single Linux server, as in the following example.</span></span>  

   ![tok procesu Syslog](./media/log-analytics-vmware/diagram.png)

### <a name="configure-syslog-collection"></a><span data-ttu-id="4300f-125">Konfigurace sběru syslog</span><span class="sxs-lookup"><span data-stu-id="4300f-125">Configure syslog collection</span></span>
1. <span data-ttu-id="4300f-126">Nastavte syslog předávání VSphere.</span><span class="sxs-lookup"><span data-stu-id="4300f-126">Set up syslog forwarding for VSphere.</span></span> <span data-ttu-id="4300f-127">Podrobné informace, které pomohou nastavit předávání syslog, najdete v části [konfigurace syslog na ESXi 5.x a 6.0 (2003322)](https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2003322).</span><span class="sxs-lookup"><span data-stu-id="4300f-127">For detailed information to help set up syslog forwarding, see [Configuring syslog on ESXi 5.x and 6.0 (2003322)](https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2003322).</span></span> <span data-ttu-id="4300f-128">Přejděte na **konfigurace hostitele ESXi** > **softwaru** > **upřesňující nastavení** > **Syslog**.</span><span class="sxs-lookup"><span data-stu-id="4300f-128">Go to **ESXi Host Configuration** > **Software** > **Advanced Settings** > **Syslog**.</span></span>
   <span data-ttu-id="4300f-129">![vsphereconfig](./media/log-analytics-vmware/vsphere1.png)</span><span class="sxs-lookup"><span data-stu-id="4300f-129">![vsphereconfig](./media/log-analytics-vmware/vsphere1.png)</span></span>  
2. <span data-ttu-id="4300f-130">V *Syslog.global.logHost* pole, přidejte Linux server a číslo portu *1514*.</span><span class="sxs-lookup"><span data-stu-id="4300f-130">In the *Syslog.global.logHost* field, add your Linux server and the port number *1514*.</span></span> <span data-ttu-id="4300f-131">Například `tcp://hostname:1514` nebo`tcp://123.456.789.101:1514`</span><span class="sxs-lookup"><span data-stu-id="4300f-131">For example, `tcp://hostname:1514` or `tcp://123.456.789.101:1514`</span></span>
3. <span data-ttu-id="4300f-132">Otevřete bránu firewall hostitele ESXi pro syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-132">Open the ESXi host firewall for syslog.</span></span> <span data-ttu-id="4300f-133">**Konfigurace hostitele ESXi** > **softwaru** > **profil zabezpečení** > **brány Firewall** a otevřete  **Vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="4300f-133">**ESXi Host Configuration** > **Software** > **Security Profile** > **Firewall** and open **Properties**.</span></span>  

    ![vspherefw](./media/log-analytics-vmware/vsphere2.png)  

    ![vspherefwproperties](./media/log-analytics-vmware/vsphere3.png)  
4. <span data-ttu-id="4300f-136">Zkontrolujte vSphere konzoly ověřte, zda tento syslog správně nastavená.</span><span class="sxs-lookup"><span data-stu-id="4300f-136">Check the vSphere Console to verify that that syslog is properly set up.</span></span> <span data-ttu-id="4300f-137">Potvrďte na hostiteli ESXI tento port **1514** je nakonfigurovaný.</span><span class="sxs-lookup"><span data-stu-id="4300f-137">Confirm on the ESXI host that port **1514** is configured.</span></span>
5. <span data-ttu-id="4300f-138">Stáhněte a nainstalujte agenta OMS pro Linux na Linux server.</span><span class="sxs-lookup"><span data-stu-id="4300f-138">Download and install the OMS Agent for Linux on the Linux server.</span></span> <span data-ttu-id="4300f-139">Další informace najdete v tématu [dokumentace pro OMS agenta pro Linux](https://github.com/Microsoft/OMS-Agent-for-Linux).</span><span class="sxs-lookup"><span data-stu-id="4300f-139">For more information, see the [Documentation for OMS Agent for Linux](https://github.com/Microsoft/OMS-Agent-for-Linux).</span></span>
6. <span data-ttu-id="4300f-140">Po instalaci agenta OMS pro Linux, přejděte do adresáře /etc/opt/microsoft/omsagent/sysconf/omsagent.d a zkopírujte soubor vmware_esxi.conf adresáři /etc/opt/microsoft/omsagent/conf/omsagent.d a změna vlastníka nebo skupiny a oprávnění souboru.</span><span class="sxs-lookup"><span data-stu-id="4300f-140">After the OMS Agent for Linux is installed, go to the  /etc/opt/microsoft/omsagent/sysconf/omsagent.d directory and copy the vmware_esxi.conf file to the /etc/opt/microsoft/omsagent/conf/omsagent.d directory and the change the owner/group and permissions of the file.</span></span> <span data-ttu-id="4300f-141">Například:</span><span class="sxs-lookup"><span data-stu-id="4300f-141">For example:</span></span>

    ```
    sudo cp /etc/opt/microsoft/omsagent/sysconf/omsagent.d/vmware_esxi.conf /etc/opt/microsoft/omsagent/conf/omsagent.d
   sudo chown omsagent:omiusers /etc/opt/microsoft/omsagent/conf/omsagent.d/vmware_esxi.conf
    ```
7. <span data-ttu-id="4300f-142">Restartujte agenta OMS pro Linux spuštěním `sudo /opt/microsoft/omsagent/bin/service_control restart`.</span><span class="sxs-lookup"><span data-stu-id="4300f-142">Restart the OMS Agent for Linux by running `sudo /opt/microsoft/omsagent/bin/service_control restart`.</span></span>
8. <span data-ttu-id="4300f-143">Testovací připojení mezi serverem pro Linux a hostitele ESXi pomocí `nc` příkazu na hostiteli ESXi.</span><span class="sxs-lookup"><span data-stu-id="4300f-143">Test the connectivity between the Linux server and the ESXi host by using the `nc` command on the ESXi Host.</span></span> <span data-ttu-id="4300f-144">Například:</span><span class="sxs-lookup"><span data-stu-id="4300f-144">For example:</span></span>

    ```
    [root@ESXiHost:~] nc -z 123.456.789.101 1514
    Connection to 123.456.789.101 1514 port [tcp/*] succeeded!
    ```

9. <span data-ttu-id="4300f-145">Na portálu OMS hledání protokolu pro `Type=VMware_CL`.</span><span class="sxs-lookup"><span data-stu-id="4300f-145">In the OMS Portal, perform a log search for `Type=VMware_CL`.</span></span> <span data-ttu-id="4300f-146">Když OMS shromažďuje syslog data, zachová formátu syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-146">When OMS collects the syslog data, it retains the syslog format.</span></span> <span data-ttu-id="4300f-147">Na portálu, některé konkrétních polí zaznamenání, jako například *Hostname* a *název_procesu*.</span><span class="sxs-lookup"><span data-stu-id="4300f-147">In the portal, some specific fields are captured, such as *Hostname* and *ProcessName*.</span></span>  

    ![type](./media/log-analytics-vmware/type.png)  

    <span data-ttu-id="4300f-149">Pokud výsledky zobrazení protokolu hledání podobně jako na obrázku výše, jste nastavena na řídicí panel řešení monitorování VMware OMS.</span><span class="sxs-lookup"><span data-stu-id="4300f-149">If your view log search results are similar to the image above, you're set to use the OMS VMware Monitoring solution dashboard.</span></span>  

## <a name="vmware-data-collection-details"></a><span data-ttu-id="4300f-150">Podrobnosti kolekce dat VMware</span><span class="sxs-lookup"><span data-stu-id="4300f-150">VMware data collection details</span></span>
<span data-ttu-id="4300f-151">Řešení VMware monitorování shromažďuje různé metriky a protokolu údaje o výkonu z hostitele ESXi pomocí OMS agentů pro Linux, které jste povolili.</span><span class="sxs-lookup"><span data-stu-id="4300f-151">The VMware Monitoring solution collects various performance metrics and log data from ESXi hosts using the OMS Agents for Linux that you have enabled.</span></span>

<span data-ttu-id="4300f-152">Následující tabulka uvádí metody shromažďování dat a další podrobnosti o tom, jak se data shromažďují.</span><span class="sxs-lookup"><span data-stu-id="4300f-152">The following table shows data collection methods and other details about how data is collected.</span></span>

| <span data-ttu-id="4300f-153">Platforma</span><span class="sxs-lookup"><span data-stu-id="4300f-153">platform</span></span> | <span data-ttu-id="4300f-154">OMS agenta pro Linux</span><span class="sxs-lookup"><span data-stu-id="4300f-154">OMS Agent for Linux</span></span> | <span data-ttu-id="4300f-155">Agenta nástroje SCOM</span><span class="sxs-lookup"><span data-stu-id="4300f-155">SCOM agent</span></span> | <span data-ttu-id="4300f-156">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="4300f-156">Azure Storage</span></span> | <span data-ttu-id="4300f-157">SCOM vyžaduje?</span><span class="sxs-lookup"><span data-stu-id="4300f-157">SCOM required?</span></span> | <span data-ttu-id="4300f-158">Data agenta SCOM odeslána prostřednictvím skupiny pro správu</span><span class="sxs-lookup"><span data-stu-id="4300f-158">SCOM agent data sent via management group</span></span> | <span data-ttu-id="4300f-159">Frekvence kolekce</span><span class="sxs-lookup"><span data-stu-id="4300f-159">collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="4300f-160">Linux</span><span class="sxs-lookup"><span data-stu-id="4300f-160">Linux</span></span> |<span data-ttu-id="4300f-161">&#8226;</span><span class="sxs-lookup"><span data-stu-id="4300f-161">&#8226;</span></span> |  |  |  |  |<span data-ttu-id="4300f-162">každé 3 minuty</span><span class="sxs-lookup"><span data-stu-id="4300f-162">every 3 minutes</span></span> |

<span data-ttu-id="4300f-163">Následující tabulka obsahuje příklady datová pole shromážděných řešením pro monitorování VMware:</span><span class="sxs-lookup"><span data-stu-id="4300f-163">The following table show examples of data fields collected by the VMware Monitoring solution:</span></span>

| <span data-ttu-id="4300f-164">Název pole</span><span class="sxs-lookup"><span data-stu-id="4300f-164">field name</span></span> | <span data-ttu-id="4300f-165">Popis</span><span class="sxs-lookup"><span data-stu-id="4300f-165">description</span></span> |
| --- | --- |
| <span data-ttu-id="4300f-166">Device_s</span><span class="sxs-lookup"><span data-stu-id="4300f-166">Device_s</span></span> |<span data-ttu-id="4300f-167">Zařízení úložiště VMware</span><span class="sxs-lookup"><span data-stu-id="4300f-167">VMware storage devices</span></span> |
| <span data-ttu-id="4300f-168">ESXIFailure_s</span><span class="sxs-lookup"><span data-stu-id="4300f-168">ESXIFailure_s</span></span> |<span data-ttu-id="4300f-169">selhání typy</span><span class="sxs-lookup"><span data-stu-id="4300f-169">failure types</span></span> |
| <span data-ttu-id="4300f-170">EventTime_t</span><span class="sxs-lookup"><span data-stu-id="4300f-170">EventTime_t</span></span> |<span data-ttu-id="4300f-171">čas výskytu události</span><span class="sxs-lookup"><span data-stu-id="4300f-171">time when event occurred</span></span> |
| <span data-ttu-id="4300f-172">HostName_s</span><span class="sxs-lookup"><span data-stu-id="4300f-172">HostName_s</span></span> |<span data-ttu-id="4300f-173">Název hostitele ESXi</span><span class="sxs-lookup"><span data-stu-id="4300f-173">ESXi host name</span></span> |
| <span data-ttu-id="4300f-174">Operation_s</span><span class="sxs-lookup"><span data-stu-id="4300f-174">Operation_s</span></span> |<span data-ttu-id="4300f-175">Vytvoření virtuálního počítače nebo odstranění virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="4300f-175">create VM or delete VM</span></span> |
| <span data-ttu-id="4300f-176">ProcessName_s</span><span class="sxs-lookup"><span data-stu-id="4300f-176">ProcessName_s</span></span> |<span data-ttu-id="4300f-177">Název události</span><span class="sxs-lookup"><span data-stu-id="4300f-177">event name</span></span> |
| <span data-ttu-id="4300f-178">ResourceId_s</span><span class="sxs-lookup"><span data-stu-id="4300f-178">ResourceId_s</span></span> |<span data-ttu-id="4300f-179">název hostitele VMware</span><span class="sxs-lookup"><span data-stu-id="4300f-179">name of the VMware host</span></span> |
| <span data-ttu-id="4300f-180">ResourceLocation_s</span><span class="sxs-lookup"><span data-stu-id="4300f-180">ResourceLocation_s</span></span> |<span data-ttu-id="4300f-181">VMware</span><span class="sxs-lookup"><span data-stu-id="4300f-181">VMware</span></span> |
| <span data-ttu-id="4300f-182">ResourceName_s</span><span class="sxs-lookup"><span data-stu-id="4300f-182">ResourceName_s</span></span> |<span data-ttu-id="4300f-183">VMware</span><span class="sxs-lookup"><span data-stu-id="4300f-183">VMware</span></span> |
| <span data-ttu-id="4300f-184">ResourceType_s</span><span class="sxs-lookup"><span data-stu-id="4300f-184">ResourceType_s</span></span> |<span data-ttu-id="4300f-185">Hyper-V</span><span class="sxs-lookup"><span data-stu-id="4300f-185">Hyper-V</span></span> |
| <span data-ttu-id="4300f-186">SCSIStatus_s</span><span class="sxs-lookup"><span data-stu-id="4300f-186">SCSIStatus_s</span></span> |<span data-ttu-id="4300f-187">Stav VMware SCSI</span><span class="sxs-lookup"><span data-stu-id="4300f-187">VMware SCSI status</span></span> |
| <span data-ttu-id="4300f-188">SyslogMessage_s</span><span class="sxs-lookup"><span data-stu-id="4300f-188">SyslogMessage_s</span></span> |<span data-ttu-id="4300f-189">Syslog data</span><span class="sxs-lookup"><span data-stu-id="4300f-189">Syslog data</span></span> |
| <span data-ttu-id="4300f-190">UserName_s</span><span class="sxs-lookup"><span data-stu-id="4300f-190">UserName_s</span></span> |<span data-ttu-id="4300f-191">uživatel, který vytvořené nebo odstraněné virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="4300f-191">user who created or deleted VM</span></span> |
| <span data-ttu-id="4300f-192">VMName_s</span><span class="sxs-lookup"><span data-stu-id="4300f-192">VMName_s</span></span> |<span data-ttu-id="4300f-193">název virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="4300f-193">VM name</span></span> |
| <span data-ttu-id="4300f-194">Počítač</span><span class="sxs-lookup"><span data-stu-id="4300f-194">Computer</span></span> |<span data-ttu-id="4300f-195">hostitelský počítač</span><span class="sxs-lookup"><span data-stu-id="4300f-195">host computer</span></span> |
| <span data-ttu-id="4300f-196">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="4300f-196">TimeGenerated</span></span> |<span data-ttu-id="4300f-197">čas, který byl vygenerován data</span><span class="sxs-lookup"><span data-stu-id="4300f-197">time the data was generated</span></span> |
| <span data-ttu-id="4300f-198">DataCenter_s</span><span class="sxs-lookup"><span data-stu-id="4300f-198">DataCenter_s</span></span> |<span data-ttu-id="4300f-199">Datové centrum VMware</span><span class="sxs-lookup"><span data-stu-id="4300f-199">VMware datacenter</span></span> |
| <span data-ttu-id="4300f-200">StorageLatency_s</span><span class="sxs-lookup"><span data-stu-id="4300f-200">StorageLatency_s</span></span> |<span data-ttu-id="4300f-201">úložiště latence (ms)</span><span class="sxs-lookup"><span data-stu-id="4300f-201">storage latency (ms)</span></span> |

## <a name="vmware-monitoring-solution-overview"></a><span data-ttu-id="4300f-202">Přehled řešení VMware monitorování</span><span class="sxs-lookup"><span data-stu-id="4300f-202">VMware Monitoring solution overview</span></span>
<span data-ttu-id="4300f-203">Na dlaždici VMware se zobrazí na portálu OMS.</span><span class="sxs-lookup"><span data-stu-id="4300f-203">The VMware tile appears in the OMS portal.</span></span> <span data-ttu-id="4300f-204">Poskytuje podrobný pohled případných selhání.</span><span class="sxs-lookup"><span data-stu-id="4300f-204">It provides a high-level view of any failures.</span></span> <span data-ttu-id="4300f-205">Když kliknete na dlaždici, přejděte do zobrazení řídicího panelu.</span><span class="sxs-lookup"><span data-stu-id="4300f-205">When you click the tile, you go into a dashboard view.</span></span>

![Dlaždice](./media/log-analytics-vmware/tile.png)

#### <a name="navigate-the-dashboard-view"></a><span data-ttu-id="4300f-207">Přejděte zobrazení řídicího panelu</span><span class="sxs-lookup"><span data-stu-id="4300f-207">Navigate the dashboard view</span></span>
<span data-ttu-id="4300f-208">V **VMware** zobrazení řídicího panelu okna jsou uspořádané podle:</span><span class="sxs-lookup"><span data-stu-id="4300f-208">In the **VMware** dashboard view, blades are organized by:</span></span>

* <span data-ttu-id="4300f-209">Počet selhání stav</span><span class="sxs-lookup"><span data-stu-id="4300f-209">Failure Status Count</span></span>
* <span data-ttu-id="4300f-210">Počty nejvyšší hostitele událostí</span><span class="sxs-lookup"><span data-stu-id="4300f-210">Top Host by Event Counts</span></span>
* <span data-ttu-id="4300f-211">Počty nejvyšší událostí</span><span class="sxs-lookup"><span data-stu-id="4300f-211">Top Event Counts</span></span>
* <span data-ttu-id="4300f-212">Aktivity virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="4300f-212">Virtual Machine Activities</span></span>
* <span data-ttu-id="4300f-213">Události hostitele ESXi disku</span><span class="sxs-lookup"><span data-stu-id="4300f-213">ESXi Host Disk Events</span></span>

![solution1](./media/log-analytics-vmware/solutionview1-1.png)

![solution2](./media/log-analytics-vmware/solutionview1-2.png)

<span data-ttu-id="4300f-216">Klikněte na libovolné okno otevřete podokno hledání analýzy protokolů, které jsou uvedeny podrobné informace specifické pro okno.</span><span class="sxs-lookup"><span data-stu-id="4300f-216">Click any blade to open Log Analytics search pane that shows detailed information specific for the blade.</span></span>

<span data-ttu-id="4300f-217">Zde můžete upravit vyhledávací dotaz upravit pro určitý objekt.</span><span class="sxs-lookup"><span data-stu-id="4300f-217">From here, you can edit the search query to modify it for something specific.</span></span> <span data-ttu-id="4300f-218">Kurz týkající se základy OMS vyhledávání, podívejte se [kurzu vyhledávání protokolu OMS.](log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="4300f-218">For a tutorial on the basics of OMS search, check out the [OMS log search tutorial.](log-analytics-log-searches.md)</span></span>

#### <a name="find-esxi-host-events"></a><span data-ttu-id="4300f-219">Najít události hostitele ESXi</span><span class="sxs-lookup"><span data-stu-id="4300f-219">Find ESXi host events</span></span>
<span data-ttu-id="4300f-220">Jednom hostiteli ESXi generuje více protokolů, na základě jejich procesů.</span><span class="sxs-lookup"><span data-stu-id="4300f-220">A single ESXi host generates multiple logs, based on their processes.</span></span> <span data-ttu-id="4300f-221">Řešení VMware monitorování je centralizuje a shrnuje počtu událostí.</span><span class="sxs-lookup"><span data-stu-id="4300f-221">The VMware Monitoring solution centralizes them and summarizes the event counts.</span></span> <span data-ttu-id="4300f-222">Toto zobrazení centralizované vám pomůže pochopit hostitele ESXi, v němž má k velkému počtu událostí a událostech, které se vyskytují nejčastěji ve vašem prostředí.</span><span class="sxs-lookup"><span data-stu-id="4300f-222">This centralized view helps you understand which ESXi host has a high volume of events and what events occur most frequently in your environment.</span></span>

![Události](./media/log-analytics-vmware/events.png)

<span data-ttu-id="4300f-224">Můžete zobrazit další podrobnosti Další kliknutím na hostiteli ESXi nebo typ události.</span><span class="sxs-lookup"><span data-stu-id="4300f-224">You can drill further by clicking an ESXi host or an event type.</span></span>

<span data-ttu-id="4300f-225">Když kliknete na název hostitele ESXi, zobrazí se informace z tohoto hostitele ESXi.</span><span class="sxs-lookup"><span data-stu-id="4300f-225">When you click an ESXi host name, you view information from that ESXi host.</span></span> <span data-ttu-id="4300f-226">Pokud chcete, chcete-li zúžit výsledky typu události, přidejte `“ProcessName_s=EVENT TYPE”` v dotazu hledání.</span><span class="sxs-lookup"><span data-stu-id="4300f-226">If you want to narrow results with the event type, add `“ProcessName_s=EVENT TYPE”` in your search query.</span></span> <span data-ttu-id="4300f-227">Můžete vybrat **název_procesu** ve vyhledávací filtr.</span><span class="sxs-lookup"><span data-stu-id="4300f-227">You can select **ProcessName** in the search filter.</span></span> <span data-ttu-id="4300f-228">Informace pro vás, který zúží.</span><span class="sxs-lookup"><span data-stu-id="4300f-228">That narrows the information for you.</span></span>

![Přejít k podrobnostem](./media/log-analytics-vmware/eventhostdrilldown.png)

#### <a name="find-high-vm-activities"></a><span data-ttu-id="4300f-230">Najít vysoké aktivity virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="4300f-230">Find high VM activities</span></span>
<span data-ttu-id="4300f-231">Virtuální počítač můžete vytvořit a na každém hostiteli ESXi odstraněn.</span><span class="sxs-lookup"><span data-stu-id="4300f-231">A virtual machine can be created and deleted on any ESXi host.</span></span> <span data-ttu-id="4300f-232">Je užitečné pro správce k identifikaci hostiteli ESXi vytvoří kolik virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="4300f-232">It's helpful for an administrator to identify how many VMs an ESXi host creates.</span></span> <span data-ttu-id="4300f-233">Že naopak, pomáhá pochopit, výkonu a plánování kapacity.</span><span class="sxs-lookup"><span data-stu-id="4300f-233">That in-turn, helps to understand performance and capacity planning.</span></span> <span data-ttu-id="4300f-234">Udržování přehledu o události aktivity virtuálního počítače je důležitá při správě prostředí.</span><span class="sxs-lookup"><span data-stu-id="4300f-234">Keeping track of VM activity events is crucial when managing your environment.</span></span>

![Přejít k podrobnostem](./media/log-analytics-vmware/vmactivities1.png)

<span data-ttu-id="4300f-236">Pokud chcete zobrazit další data vytvoření virtuálního počítače hostitele ESXi, klikněte na název hostitele ESXi.</span><span class="sxs-lookup"><span data-stu-id="4300f-236">If you want to see additional ESXi host VM creation data, click an ESXi host name.</span></span>

![Přejít k podrobnostem](./media/log-analytics-vmware/createvm.png)

#### <a name="common-search-queries"></a><span data-ttu-id="4300f-238">Běžné dotazy vyhledávání</span><span class="sxs-lookup"><span data-stu-id="4300f-238">Common search queries</span></span>
<span data-ttu-id="4300f-239">Řešení obsahuje další užitečné dotazy, které vám může pomoci spravovat hostitele ESXi, jako je prostor úložiště s vysokou latencí úložiště a selhání cestu.</span><span class="sxs-lookup"><span data-stu-id="4300f-239">The solution includes other useful queries that can help you manage your ESXi hosts, such as high storage space, storage latency, and path failure.</span></span>

[!include[log-analytics-log-search-nextgeneration](../../includes/log-analytics-log-search-nextgeneration.md)]

![Dotazy](./media/log-analytics-vmware/queries.png)


#### <a name="save-queries"></a><span data-ttu-id="4300f-241">Uložení dotazů</span><span class="sxs-lookup"><span data-stu-id="4300f-241">Save queries</span></span>
<span data-ttu-id="4300f-242">Ukládání Vyhledávací dotazy je standardní funkce v OMS a vám pomůže uchovávat žádné dotazy, které jste najít užitečné.</span><span class="sxs-lookup"><span data-stu-id="4300f-242">Saving search queries is a standard feature in OMS and can help you keep any queries that you’ve found useful.</span></span> <span data-ttu-id="4300f-243">Jakmile vytvoříte dotaz, který pro vás užitečné, uložte kliknutím **Oblíbené**.</span><span class="sxs-lookup"><span data-stu-id="4300f-243">After you create a query that you find useful, save it by clicking the **Favorites**.</span></span> <span data-ttu-id="4300f-244">Uložený dotaz, můžete snadno znovu použít později z [vlastní řídicí panel](log-analytics-dashboards.md) stránku, kde můžete vytvořit vlastní řídicí panely.</span><span class="sxs-lookup"><span data-stu-id="4300f-244">A saved query lets you easily reuse it later from the [My Dashboard](log-analytics-dashboards.md) page where you can create your own custom dashboards.</span></span>

![DockerDashboardView](./media/log-analytics-vmware/dockerdashboardview.png)

#### <a name="create-alerts-from-queries"></a><span data-ttu-id="4300f-246">Vytvářet výstrahy z dotazů</span><span class="sxs-lookup"><span data-stu-id="4300f-246">Create alerts from queries</span></span>
<span data-ttu-id="4300f-247">Po vytvoření můžete své dotazy, můžete chtít použít dotazy k upozornění, když konkrétní události.</span><span class="sxs-lookup"><span data-stu-id="4300f-247">After you’ve created your queries, you might want to use the queries to alert you when specific events occur.</span></span> <span data-ttu-id="4300f-248">V tématu [výstrahy v analýzy protokolů](log-analytics-alerts.md) informace o tom, jak vytvářet výstrahy.</span><span class="sxs-lookup"><span data-stu-id="4300f-248">See [Alerts in Log Analytics](log-analytics-alerts.md) for information about how to create alerts.</span></span> <span data-ttu-id="4300f-249">Příkladem výstrahy dotazy a další příklady dotazů, najdete v článku [VMware monitorování pomocí analýzy protokolů OMS](https://blogs.technet.microsoft.com/msoms/2016/06/15/monitor-vmware-using-oms-log-analytics) příspěvku na blogu.</span><span class="sxs-lookup"><span data-stu-id="4300f-249">For examples of alerting queries and other query examples, see the [Monitor VMware using OMS Log Analytics](https://blogs.technet.microsoft.com/msoms/2016/06/15/monitor-vmware-using-oms-log-analytics) blog post.</span></span>

## <a name="frequently-asked-questions"></a><span data-ttu-id="4300f-250">Nejčastější dotazy</span><span class="sxs-lookup"><span data-stu-id="4300f-250">Frequently asked questions</span></span>
### <a name="what-do-i-need-to-do-on-the-esxi-host-setting-what-impact-will-it-have-on-my-current-environment"></a><span data-ttu-id="4300f-251">Co je potřeba na ESXi hostitelském nastavení?</span><span class="sxs-lookup"><span data-stu-id="4300f-251">What do I need to do on the ESXi host setting?</span></span> <span data-ttu-id="4300f-252">Jaký dopad bude mít na moje aktuální prostředí?</span><span class="sxs-lookup"><span data-stu-id="4300f-252">What impact will it have on my current environment?</span></span>
<span data-ttu-id="4300f-253">Toto řešení využívá nativní Syslog hostitele ESXi předávání mechanismus.</span><span class="sxs-lookup"><span data-stu-id="4300f-253">The solution uses the native ESXi Host Syslog forwarding mechanism.</span></span> <span data-ttu-id="4300f-254">Nepotřebujete žádný další software společnosti Microsoft na hostiteli ESXi k zachycení protokoly.</span><span class="sxs-lookup"><span data-stu-id="4300f-254">You don't need any additional Microsoft software on the ESXi Host to capture the logs.</span></span> <span data-ttu-id="4300f-255">Měl by mít nízkou vliv na vaše stávající prostředí.</span><span class="sxs-lookup"><span data-stu-id="4300f-255">It should have a low impact to your existing environment.</span></span> <span data-ttu-id="4300f-256">Však musíte nastavit předávání syslog, což je funkce ESXI.</span><span class="sxs-lookup"><span data-stu-id="4300f-256">However, you do need to set syslog forwarding, which is ESXI functionality.</span></span>

### <a name="do-i-need-to-restart-my-esxi-host"></a><span data-ttu-id="4300f-257">Je nutné restartovat Moje hostitele ESXi?</span><span class="sxs-lookup"><span data-stu-id="4300f-257">Do I need to restart my ESXi host?</span></span>
<span data-ttu-id="4300f-258">Ne.</span><span class="sxs-lookup"><span data-stu-id="4300f-258">No.</span></span> <span data-ttu-id="4300f-259">Tento proces nevyžaduje restartování.</span><span class="sxs-lookup"><span data-stu-id="4300f-259">This process does not require a restart.</span></span> <span data-ttu-id="4300f-260">V některých případech vSphere správně neaktualizuje syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-260">Sometimes, vSphere does not properly update the syslog.</span></span> <span data-ttu-id="4300f-261">V takovém případě Přihlaste se k hostiteli ESXi a znovu načtěte syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-261">In such a case, log on to the ESXi host and reload the syslog.</span></span> <span data-ttu-id="4300f-262">Nemáte znovu, restartujte hostitele, takže tento proces není rušivé pro vaše prostředí.</span><span class="sxs-lookup"><span data-stu-id="4300f-262">Again, you don't have to restart the host, so this process isn't disruptive to your environment.</span></span>

### <a name="can-i-increase-or-decrease-the-volume-of-log-data-sent-to-oms"></a><span data-ttu-id="4300f-263">Můžete zvýšit nebo snížit objem dat protokolu posílá OMS?</span><span class="sxs-lookup"><span data-stu-id="4300f-263">Can I increase or decrease the volume of log data sent to OMS?</span></span>
<span data-ttu-id="4300f-264">Ano, můžete.</span><span class="sxs-lookup"><span data-stu-id="4300f-264">Yes you can.</span></span> <span data-ttu-id="4300f-265">Můžete použít nastavení úroveň protokolu hostitele ESXi v vSphere.</span><span class="sxs-lookup"><span data-stu-id="4300f-265">You can use the ESXi Host Log Level settings in vSphere.</span></span> <span data-ttu-id="4300f-266">Protokol kolekce je založena na *informace* úroveň.</span><span class="sxs-lookup"><span data-stu-id="4300f-266">Log collection is based on the *info* level.</span></span> <span data-ttu-id="4300f-267">Ano, pokud chcete auditovat vytvoření virtuálního počítače nebo odstranění, budete muset zachovat *informace* úrovni na Hostd.</span><span class="sxs-lookup"><span data-stu-id="4300f-267">So, if you want to audit VM creation or deletion, you need to keep the *info* level on Hostd.</span></span> <span data-ttu-id="4300f-268">Další informace najdete v tématu [VMware znalostní báze](https://kb.vmware.com/selfservice/microsites/search.do?&cmd=displayKC&externalId=1017658).</span><span class="sxs-lookup"><span data-stu-id="4300f-268">For more information, see the [VMware Knowledge Base](https://kb.vmware.com/selfservice/microsites/search.do?&cmd=displayKC&externalId=1017658).</span></span>

### <a name="why-is-hostd-not-providing-data-to-oms-my-log-setting-is-set-to-info"></a><span data-ttu-id="4300f-269">Proč není Hostd poskytuje data k OMS?</span><span class="sxs-lookup"><span data-stu-id="4300f-269">Why is Hostd not providing data to OMS?</span></span> <span data-ttu-id="4300f-270">Moje nastavení protokolu nastavena na informace.</span><span class="sxs-lookup"><span data-stu-id="4300f-270">My log setting is set to info.</span></span>
<span data-ttu-id="4300f-271">Došlo chyb hostitele ESXi pro časové razítko syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-271">There was an ESXi host bug for the syslog timestamp.</span></span> <span data-ttu-id="4300f-272">Další informace najdete v tématu [VMware znalostní báze](https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2111202).</span><span class="sxs-lookup"><span data-stu-id="4300f-272">For more information, see the [VMware Knowledge Base](https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2111202).</span></span> <span data-ttu-id="4300f-273">Po použití alternativní řešení Hostd by měla fungovat normálně.</span><span class="sxs-lookup"><span data-stu-id="4300f-273">After you apply the workaround, Hostd should function normally.</span></span>

### <a name="can-i-have-multiple-esxi-hosts-forwarding-syslog-data-to-a-single-vm-with-omsagent"></a><span data-ttu-id="4300f-274">Může mít víc hostitelích ESXi předávající syslog data jeden virtuální počítač s omsagent?</span><span class="sxs-lookup"><span data-stu-id="4300f-274">Can I have multiple ESXi hosts forwarding syslog data to a single VM with omsagent?</span></span>
<span data-ttu-id="4300f-275">Ano.</span><span class="sxs-lookup"><span data-stu-id="4300f-275">Yes.</span></span> <span data-ttu-id="4300f-276">Můžete mít víc hostitelích ESXi předávání jeden virtuální počítač s omsagent.</span><span class="sxs-lookup"><span data-stu-id="4300f-276">You can have multiple ESXi hosts forwarding to a single VM with omsagent.</span></span>

### <a name="why-dont-i-see-data-flowing-into-oms"></a><span data-ttu-id="4300f-277">Proč nevidím dat odesílaných do OMS?</span><span class="sxs-lookup"><span data-stu-id="4300f-277">Why don't I see data flowing into OMS?</span></span>
<span data-ttu-id="4300f-278">Může být z několika důvodů:</span><span class="sxs-lookup"><span data-stu-id="4300f-278">There can be multiple reasons:</span></span>

* <span data-ttu-id="4300f-279">Hostitele ESXi není správně předání dat do virtuálního počítače s omsagent.</span><span class="sxs-lookup"><span data-stu-id="4300f-279">The ESXi host is not correctly pushing data to the VM running omsagent.</span></span> <span data-ttu-id="4300f-280">Chcete-li otestovat, proveďte následující kroky:</span><span class="sxs-lookup"><span data-stu-id="4300f-280">To test, perform the following steps:</span></span>

  1. <span data-ttu-id="4300f-281">Pokud chcete potvrdit, přihlaste se do hostitele ESXi pomocí ssh a spusťte následující příkaz:`nc -z ipaddressofVM 1514`</span><span class="sxs-lookup"><span data-stu-id="4300f-281">To confirm, log on to the ESXi host using ssh and run the following command: `nc -z ipaddressofVM 1514`</span></span>

      <span data-ttu-id="4300f-282">Pokud neproběhne úspěšně, jsou nastavení vSphere v pokročilé konfiguraci pravděpodobně není opravte.</span><span class="sxs-lookup"><span data-stu-id="4300f-282">If this is not successful, vSphere settings in the Advanced Configuration are likely not correct.</span></span> <span data-ttu-id="4300f-283">V tématu [konfigurace sběru syslog](#configure-syslog-collection) informace o tom, jak nastavit ESXi hostitele pro předávání syslog.</span><span class="sxs-lookup"><span data-stu-id="4300f-283">See [Configure syslog collection](#configure-syslog-collection) for information about how to set up the ESXi host for syslog forwarding.</span></span>
  2. <span data-ttu-id="4300f-284">Pokud připojení port syslog je úspěšné, ale stále se nezobrazí žádná data, potom ho znovu načtěte syslog na hostiteli ESXi pomocí ssh spusťte následující příkaz:` esxcli system syslog reload`</span><span class="sxs-lookup"><span data-stu-id="4300f-284">If syslog port connectivity is successful, but you don't still see any data, then reload the syslog on the ESXi host by using ssh to run the following command: ` esxcli system syslog reload`</span></span>
* <span data-ttu-id="4300f-285">Virtuální počítač s agentem OMS není správně nastaven.</span><span class="sxs-lookup"><span data-stu-id="4300f-285">The VM with OMS Agent is not set correctly.</span></span> <span data-ttu-id="4300f-286">Abyste to mohli otestovat, proveďte následující kroky:</span><span class="sxs-lookup"><span data-stu-id="4300f-286">To test this, perform the following steps:</span></span>

  1. <span data-ttu-id="4300f-287">OMS naslouchá na portu 1514 a zapisuje data do OMS.</span><span class="sxs-lookup"><span data-stu-id="4300f-287">OMS listens to the port 1514 and pushes data into OMS.</span></span> <span data-ttu-id="4300f-288">Pokud chcete ověřit, že je otevřen, spusťte následující příkaz:`netstat -a | grep 1514`</span><span class="sxs-lookup"><span data-stu-id="4300f-288">To verify that it is open, run the following command: `netstat -a | grep 1514`</span></span>
  2. <span data-ttu-id="4300f-289">Měli byste vidět port `1514/tcp` otevřete.</span><span class="sxs-lookup"><span data-stu-id="4300f-289">You should see port `1514/tcp` open.</span></span> <span data-ttu-id="4300f-290">Pokud ho použít nechcete, ověřte, zda je omsagent správně nainstalován.</span><span class="sxs-lookup"><span data-stu-id="4300f-290">If you do not, verify that the omsagent is installed correctly.</span></span> <span data-ttu-id="4300f-291">Pokud nevidíte informace o portu, není syslog port otevřete ve virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="4300f-291">If you do not see the port information, then the syslog port is not open on the VM.</span></span>

     1. <span data-ttu-id="4300f-292">Ověřte, zda je OMS Agent spuštěna pomocí `ps -ef | grep oms`.</span><span class="sxs-lookup"><span data-stu-id="4300f-292">Verify that the OMS Agent is running by using `ps -ef | grep oms`.</span></span> <span data-ttu-id="4300f-293">Pokud není spuštěná, spusťte proces spuštěním příkazu` sudo /opt/microsoft/omsagent/bin/service_control start`</span><span class="sxs-lookup"><span data-stu-id="4300f-293">If it is not running, start the process by running the command ` sudo /opt/microsoft/omsagent/bin/service_control start`</span></span>
     2. <span data-ttu-id="4300f-294">Otevřete soubor `/etc/opt/microsoft/omsagent/conf/omsagent.d/vmware_esxi.conf`.</span><span class="sxs-lookup"><span data-stu-id="4300f-294">Open the `/etc/opt/microsoft/omsagent/conf/omsagent.d/vmware_esxi.conf` file.</span></span>

         <span data-ttu-id="4300f-295">Ověřte, že správné uživatele a skupiny nastavení je platný, podobně jako:`-rw-r--r-- 1 omsagent omiusers 677 Sep 20 16:46 vmware_esxi.conf`</span><span class="sxs-lookup"><span data-stu-id="4300f-295">Verify that the proper user and group setting is valid, similar to: `-rw-r--r-- 1 omsagent omiusers 677 Sep 20 16:46 vmware_esxi.conf`</span></span>

         <span data-ttu-id="4300f-296">Pokud soubor neexistuje nebo není správný, uživatele a skupiny nastavení podniknout kroky podle [Příprava serveru Linux](#prepare-a-linux-server).</span><span class="sxs-lookup"><span data-stu-id="4300f-296">If the file does not exist or the user and group setting is wrong, take corrective action by [Preparing a Linux server](#prepare-a-linux-server).</span></span>

## <a name="next-steps"></a><span data-ttu-id="4300f-297">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4300f-297">Next steps</span></span>
* <span data-ttu-id="4300f-298">Použití [protokolu hledání](log-analytics-log-searches.md) v analýzy protokolů, chcete-li zobrazit podrobné VMware hostují data.</span><span class="sxs-lookup"><span data-stu-id="4300f-298">Use [Log Searches](log-analytics-log-searches.md) in Log Analytics to view detailed VMware host data.</span></span>
* <span data-ttu-id="4300f-299">[Vytvořit vlastní řídicí panely](log-analytics-dashboards.md) zobrazující data hostitele VMware.</span><span class="sxs-lookup"><span data-stu-id="4300f-299">[Create your own dashboards](log-analytics-dashboards.md) showing VMware host data.</span></span>
* <span data-ttu-id="4300f-300">[Vytvářet výstrahy](log-analytics-alerts.md) při výskytu určité události hostitele VMware.</span><span class="sxs-lookup"><span data-stu-id="4300f-300">[Create alerts](log-analytics-alerts.md) when specific VMware host events occur.</span></span>
