---
title: "Shromažďovat vlastní protokoly v OMS Log Analytics | Microsoft Docs"
description: "Analýzy protokolů můžete shromažďovat události z textových souborů v počítačích Windows a Linux.  Tento článek popisuje, jak definovat nový vlastní protokol a podrobnosti záznamů, které vytvoří v úložišti OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: aca7f6bb-6f53-4fd4-a45c-93f12ead4ae1
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: b7f28868e3ffdf95dbe39872f382e7c97eae692c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="custom-logs-in-log-analytics"></a><span data-ttu-id="fba14-104">Vlastní protokoly v analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="fba14-104">Custom logs in Log Analytics</span></span>
<span data-ttu-id="fba14-105">Zdroj dat vlastní protokoly ve analýzy protokolů umožňuje shromažďování událostí z textových souborů v počítačích Windows a Linux.</span><span class="sxs-lookup"><span data-stu-id="fba14-105">The Custom Logs data source in Log Analytics allows you to collect events from text files on both Windows and Linux computers.</span></span> <span data-ttu-id="fba14-106">Mnoho aplikací protokolování informací k textovým souborům místo standardní protokolování služby, jako je například protokol událostí systému Windows nebo Syslog.</span><span class="sxs-lookup"><span data-stu-id="fba14-106">Many applications log information to text files instead of standard logging services such as Windows Event log or Syslog.</span></span>  <span data-ttu-id="fba14-107">Jakmile se shromažďují, můžete analyzovat každý záznam v protokolu v jednotlivých polí pomocí [vlastní pole](log-analytics-custom-fields.md) funkce analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="fba14-107">Once collected, you can parse each record in the log in to individual fields using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

![Vlastní protokol kolekce](media/log-analytics-data-sources-custom-logs/overview.png)

<span data-ttu-id="fba14-109">Soubory protokolů, které se mají shromažďovat musí splňují následující kritéria.</span><span class="sxs-lookup"><span data-stu-id="fba14-109">The log files to be collected must match the following criteria.</span></span>

- <span data-ttu-id="fba14-110">Protokol musí mít jednu položku na každý řádek nebo používat časové razítko odpovídající jednu z následujících formátů na začátku každé položky.</span><span class="sxs-lookup"><span data-stu-id="fba14-110">The log must either have a single entry per line or use a timestamp matching one of the following formats at the start of each entry.</span></span>

    <span data-ttu-id="fba14-111">RRRR MM-DD HH: MM:</span><span class="sxs-lookup"><span data-stu-id="fba14-111">YYYY-MM-DD HH:MM:SS</span></span><br><span data-ttu-id="fba14-112">M/D/RRRR HH: MM: SS DOP. / ODP</span><span class="sxs-lookup"><span data-stu-id="fba14-112">M/D/YYYY HH:MM:SS AM/PM</span></span> <br><span data-ttu-id="fba14-113">MON DD, rrrr hh: mm:</span><span class="sxs-lookup"><span data-stu-id="fba14-113">Mon DD,YYYY HH:MM:SS</span></span>

- <span data-ttu-id="fba14-114">Soubor protokolu nesmí povolit cyklické aktualizací, kde je soubor přepsán pomocí nové položky.</span><span class="sxs-lookup"><span data-stu-id="fba14-114">The log file must not allow circular updates where the file is overwritten with new entries.</span></span>
- <span data-ttu-id="fba14-115">Soubor protokolu musí používat kódování ASCII nebo UTF-8.</span><span class="sxs-lookup"><span data-stu-id="fba14-115">The log file must use ASCII or UTF-8 encoding.</span></span>  <span data-ttu-id="fba14-116">Ostatní formáty například UTF-16 nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="fba14-116">Other formats such as UTF-16 are not supported.</span></span>

>[!NOTE]
><span data-ttu-id="fba14-117">Pokud existují duplicitní položky v souboru protokolu, bude shromažďovat analýzy protokolů je.</span><span class="sxs-lookup"><span data-stu-id="fba14-117">If there are duplicate entries in the log file, Log Analytics will collect them.</span></span>  <span data-ttu-id="fba14-118">Výsledky hledání však bude být nekonzistentní kde výsledky filtru zobrazit další události než počet výsledků.</span><span class="sxs-lookup"><span data-stu-id="fba14-118">However, the search results will be inconsistent where the filter results show more events than the result count.</span></span>  <span data-ttu-id="fba14-119">Je důležité, abyste ověřili protokolu, který chcete zjistit, zda je aplikace, která ji vytvoří, příčinou toto chování a je-li to možné adres před vytvořením definice kolekce vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-119">It will be important that you validate the log to determine if the application that creates it is causing this behavior and address it if possible before creating the custom log collection definition.</span></span>  
>
  
## <a name="defining-a-custom-log"></a><span data-ttu-id="fba14-120">Definování vlastní protokol</span><span class="sxs-lookup"><span data-stu-id="fba14-120">Defining a custom log</span></span>
<span data-ttu-id="fba14-121">Následující postup použijte k definování vlastní soubor protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-121">Use the following procedure to define a custom log file.</span></span>  <span data-ttu-id="fba14-122">Přejděte na konci tohoto článku podrobný ukázkové přidání vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-122">Scroll to the end of this article for a walkthrough of a sample of adding a custom log.</span></span>

### <a name="step-1-open-the-custom-log-wizard"></a><span data-ttu-id="fba14-123">Krok 1.</span><span class="sxs-lookup"><span data-stu-id="fba14-123">Step 1.</span></span> <span data-ttu-id="fba14-124">Otevřete Průvodce vlastního protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-124">Open the Custom Log Wizard</span></span>
<span data-ttu-id="fba14-125">Vlastní Průvodce protokolu běží na portálu OMS a umožňuje definovat vlastní nový protokol ke shromažďování.</span><span class="sxs-lookup"><span data-stu-id="fba14-125">The Custom Log Wizard runs in the OMS portal and allows you to define a new custom log to collect.</span></span>

1. <span data-ttu-id="fba14-126">Na portálu OMS, přejděte na **nastavení**.</span><span class="sxs-lookup"><span data-stu-id="fba14-126">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="fba14-127">Klikněte na **Data** a potom **vlastní protokoly**.</span><span class="sxs-lookup"><span data-stu-id="fba14-127">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="fba14-128">Ve výchozím nastavení všechny změny konfigurace automaticky odesílají na všechny agenty.</span><span class="sxs-lookup"><span data-stu-id="fba14-128">By default, all configuration changes are automatically pushed to all agents.</span></span>  <span data-ttu-id="fba14-129">Pro agenty Linux konfigurační soubor posílá kolekcí dat Fluentd.</span><span class="sxs-lookup"><span data-stu-id="fba14-129">For Linux agents, a configuration file is sent to the Fluentd data collector.</span></span>  <span data-ttu-id="fba14-130">Pokud chcete upravit soubor ručně na každý agenta systému Linux, poté zrušte zaškrtnutí políčka *použít dole uvedenou konfiguraci u mých Linuxových počítačů*.</span><span class="sxs-lookup"><span data-stu-id="fba14-130">If you wish to modify this file manually on each Linux agent, then uncheck the box *Apply below configuration to my Linux machines*.</span></span>
4. <span data-ttu-id="fba14-131">Klikněte na tlačítko **přidat +** otevřete Průvodce vlastní protokol.</span><span class="sxs-lookup"><span data-stu-id="fba14-131">Click **Add+** to open the Custom Log Wizard.</span></span>

### <a name="step-2-upload-and-parse-a-sample-log"></a><span data-ttu-id="fba14-132">Krok 2.</span><span class="sxs-lookup"><span data-stu-id="fba14-132">Step 2.</span></span> <span data-ttu-id="fba14-133">Nahrání a analyzovat ukázkový protokol</span><span class="sxs-lookup"><span data-stu-id="fba14-133">Upload and parse a sample log</span></span>
<span data-ttu-id="fba14-134">Můžete začít odesílání vzorku vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-134">You start by uploading a sample of the custom log.</span></span>  <span data-ttu-id="fba14-135">Průvodce analyzovat a zobrazit položky v tomto souboru můžete ověřit.</span><span class="sxs-lookup"><span data-stu-id="fba14-135">The wizard will parse and display the entries in this file for you to validate.</span></span>  <span data-ttu-id="fba14-136">Analýzy protokolů použije oddělovač, který určíte k identifikaci jednotlivých záznamů.</span><span class="sxs-lookup"><span data-stu-id="fba14-136">Log Analytics will use the delimiter that you specify to identify each record.</span></span>

<span data-ttu-id="fba14-137">**Nový řádek** oddělovač výchozí a slouží pro soubory protokolů, které mají jednu položku na každý řádek.</span><span class="sxs-lookup"><span data-stu-id="fba14-137">**New Line** is the default delimiter and is used for log files that have a single entry per line.</span></span>  <span data-ttu-id="fba14-138">Pokud řádek začíná datum a čas v jednom z formátů k dispozici, pak můžete zadat **časové razítko** oddělovač, který podporuje položky, které jsou rozmístěny více než jeden řádek.</span><span class="sxs-lookup"><span data-stu-id="fba14-138">If the line starts with a date and time in one of the available formats, then you can specify a **Timestamp** delimiter which supports entries that span more than one line.</span></span>

<span data-ttu-id="fba14-139">Pokud se používá oddělovač časové razítko, bude vlastnost TimeGenerated každý záznam uložený v OMS vyplňovat datum a čas zadaný pro tuto položku v souboru protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-139">If a timestamp delimiter is used, then the TimeGenerated property of each record stored in OMS will be populated with the date/time specified for that entry in the log file.</span></span>  <span data-ttu-id="fba14-140">Pokud se používá nový řádek oddělovač, pak TimeGenerated naplněný datum a čas, analýzy protokolů shromážděných položku.</span><span class="sxs-lookup"><span data-stu-id="fba14-140">If a new line delimiter is used, then TimeGenerated is populated with date and time that Log Analytics collected the entry.</span></span>

> [!NOTE]
> <span data-ttu-id="fba14-141">Analýzy protokolů aktuálně zpracovává data a času shromážděných z protokolu pomocí časového razítka oddělovač ve formátu UTC.</span><span class="sxs-lookup"><span data-stu-id="fba14-141">Log Analytics currently treats the date/time collected from a log using a timestamp delimiter as UTC.</span></span>  <span data-ttu-id="fba14-142">To bude brzy změnit použít časové pásmo na agentovi.</span><span class="sxs-lookup"><span data-stu-id="fba14-142">This will soon be changed to use the time zone on the agent.</span></span>
>
>

1. <span data-ttu-id="fba14-143">Klikněte na tlačítko **Procházet** a přejděte do ukázkový soubor.</span><span class="sxs-lookup"><span data-stu-id="fba14-143">Click **Browse** and browse to a sample file.</span></span>  <span data-ttu-id="fba14-144">Všimněte si, že to může tlačítko může být označeno jako **zvolit soubor** v některé prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="fba14-144">Note that this may button may be labeled **Choose File** in some browsers.</span></span>
2. <span data-ttu-id="fba14-145">Klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="fba14-145">Click **Next**.</span></span>
3. <span data-ttu-id="fba14-146">Vlastní Průvodce protokolu nahrát soubor a seznam záznamů, které ji identifikuje.</span><span class="sxs-lookup"><span data-stu-id="fba14-146">The Custom Log Wizard will upload the file and list the records that it identifies.</span></span>
4. <span data-ttu-id="fba14-147">Změňte oddělovač, který se používá k identifikaci nový záznam a vyberte oddělovač, který nejlépe identifikuje záznamy v souboru protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-147">Change the delimiter that is used to identify a new record and select the delimiter that best identifies the records in your log file.</span></span>
5. <span data-ttu-id="fba14-148">Klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="fba14-148">Click **Next**.</span></span>

### <a name="step-3-add-log-collection-paths"></a><span data-ttu-id="fba14-149">Krok 3.</span><span class="sxs-lookup"><span data-stu-id="fba14-149">Step 3.</span></span> <span data-ttu-id="fba14-150">Přidat cesty ke kolekcím protokolů</span><span class="sxs-lookup"><span data-stu-id="fba14-150">Add log collection paths</span></span>
<span data-ttu-id="fba14-151">Je nutné zadat jednu nebo více cest v agentovi, kde najdou vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-151">You must define one or more paths on the agent where it can locate the custom log.</span></span>  <span data-ttu-id="fba14-152">Můžete buď zadat konkrétní cestu a název souboru protokolu, nebo se zástupnými znaky pro název můžete zadat cestu.</span><span class="sxs-lookup"><span data-stu-id="fba14-152">You can either provide a specific path and name for the log file, or you can specify a path with a wildcard for the name.</span></span>  <span data-ttu-id="fba14-153">To podporuje aplikace, které každý den nebo pokud jeden soubor dosáhne určité velikosti, vytvořte nový soubor.</span><span class="sxs-lookup"><span data-stu-id="fba14-153">This supports applications that create a new file each day or when one file reaches a certain size.</span></span>  <span data-ttu-id="fba14-154">Můžete zadat také více cest pro jeden soubor protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-154">You can also provide multiple paths for a single log file.</span></span>

<span data-ttu-id="fba14-155">Například aplikace může vytvořit soubor protokolu každý den s datem součástí název jako log20100316.txt.</span><span class="sxs-lookup"><span data-stu-id="fba14-155">For example, an application might create a log file each day with the date included in the name as in log20100316.txt.</span></span> <span data-ttu-id="fba14-156">Vzor takové protokolu může být *protokolu\*.txt* které bude platit pro všechny souboru protokolu následující aplikace je pojmenování schématu.</span><span class="sxs-lookup"><span data-stu-id="fba14-156">A pattern for such a log might be *log\*.txt* which would apply to any log file following the application’s naming scheme.</span></span>

<span data-ttu-id="fba14-157">Následující tabulka obsahuje příklady platných vzorů k určení různých protokolových souborech.</span><span class="sxs-lookup"><span data-stu-id="fba14-157">The following table provides examples of valid patterns to specify different log files.</span></span>

| <span data-ttu-id="fba14-158">Popis</span><span class="sxs-lookup"><span data-stu-id="fba14-158">Description</span></span> | <span data-ttu-id="fba14-159">Cesta</span><span class="sxs-lookup"><span data-stu-id="fba14-159">Path</span></span> |
|:--- |:--- |
| <span data-ttu-id="fba14-160">Všechny soubory v *C:\Logs* s příponou .txt pro agenta služby Windows</span><span class="sxs-lookup"><span data-stu-id="fba14-160">All files in *C:\Logs* with .txt extension on Windows agent</span></span> |<span data-ttu-id="fba14-161">C:\Logs\\\*.txt</span><span class="sxs-lookup"><span data-stu-id="fba14-161">C:\Logs\\\*.txt</span></span> |
| <span data-ttu-id="fba14-162">Všechny soubory v *C:\Logs* s názvem počínaje protokolu a příponu .txt pro agenta služby Windows</span><span class="sxs-lookup"><span data-stu-id="fba14-162">All files in *C:\Logs* with a name starting with log and a .txt extension on Windows agent</span></span> |<span data-ttu-id="fba14-163">C:\Logs\log\*.txt</span><span class="sxs-lookup"><span data-stu-id="fba14-163">C:\Logs\log\*.txt</span></span> |
| <span data-ttu-id="fba14-164">Všechny soubory v */var/log/audit* s příponou .txt na agenta systému Linux</span><span class="sxs-lookup"><span data-stu-id="fba14-164">All files in */var/log/audit* with .txt extension on Linux agent</span></span> |<span data-ttu-id="fba14-165">/var/log/audit/*.txt</span><span class="sxs-lookup"><span data-stu-id="fba14-165">/var/log/audit/*.txt</span></span> |
| <span data-ttu-id="fba14-166">Všechny soubory v */var/log/audit* s názvem počínaje protokolu a příponu .txt na agenta systému Linux</span><span class="sxs-lookup"><span data-stu-id="fba14-166">All files in */var/log/audit* with a name starting with log and a .txt extension on Linux agent</span></span> |<span data-ttu-id="fba14-167">/var/log/audit/log\*.txt</span><span class="sxs-lookup"><span data-stu-id="fba14-167">/var/log/audit/log\*.txt</span></span> |

1. <span data-ttu-id="fba14-168">Chcete-li určit formát cesty vyberte systému Windows nebo Linux, které přidáváte.</span><span class="sxs-lookup"><span data-stu-id="fba14-168">Select Windows or Linux to specify which path format you are adding.</span></span>
2. <span data-ttu-id="fba14-169">Zadejte cestu a klikněte na  **+**  tlačítko.</span><span class="sxs-lookup"><span data-stu-id="fba14-169">Type in the path and click the **+** button.</span></span>
3. <span data-ttu-id="fba14-170">Opakujte postup pro žádné další cesty.</span><span class="sxs-lookup"><span data-stu-id="fba14-170">Repeat the process for any additional paths.</span></span>

### <a name="step-4-provide-a-name-and-description-for-the-log"></a><span data-ttu-id="fba14-171">Krok 4.</span><span class="sxs-lookup"><span data-stu-id="fba14-171">Step 4.</span></span> <span data-ttu-id="fba14-172">Zadejte název a popis pro protokol</span><span class="sxs-lookup"><span data-stu-id="fba14-172">Provide a name and description for the log</span></span>
<span data-ttu-id="fba14-173">Název, který zadáte, se použije pro typ protokolu, jak je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="fba14-173">The name that you specify will be used for the log type as described above.</span></span>  <span data-ttu-id="fba14-174">Bude vždy končit _CL odlišující jej jako vlastní protokol.</span><span class="sxs-lookup"><span data-stu-id="fba14-174">It will always end with _CL to distinguish it as a custom log.</span></span>

1. <span data-ttu-id="fba14-175">Zadejte název pro protokol.</span><span class="sxs-lookup"><span data-stu-id="fba14-175">Type in a name for the log.</span></span>  <span data-ttu-id="fba14-176"> **\_CL** automaticky zajištěna příponu.</span><span class="sxs-lookup"><span data-stu-id="fba14-176">The **\_CL** suffix is automatically provided.</span></span>
2. <span data-ttu-id="fba14-177">Přidejte volitelné **popis**.</span><span class="sxs-lookup"><span data-stu-id="fba14-177">Add an optional **Description**.</span></span>
3. <span data-ttu-id="fba14-178">Klikněte na tlačítko **Další** se uložit definici vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-178">Click **Next** to save the custom log definition.</span></span>

### <a name="step-5-validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="fba14-179">Krok 5.</span><span class="sxs-lookup"><span data-stu-id="fba14-179">Step 5.</span></span> <span data-ttu-id="fba14-180">Ověřte, že vlastní protokoly jsou shromažďovány</span><span class="sxs-lookup"><span data-stu-id="fba14-180">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="fba14-181">Ho může trvat hodinu počáteční data z nové vlastní protokol se objeví v analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="fba14-181">It may take up to an hour for the initial data from a new custom log to appear in Log Analytics.</span></span>  <span data-ttu-id="fba14-182">Spustí shromažďování položky z protokolů najít v cestě, který jste zadali z bodu, že jste definovali vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-182">It will start collecting entries from the logs found in the path you specified from the point that you defined the custom log.</span></span>  <span data-ttu-id="fba14-183">Nezachovají položky, které jste odeslali při vytváření vlastního protokolu, ale shromáždí již existující položky v souborech protokolů, které je možné vyhledat.</span><span class="sxs-lookup"><span data-stu-id="fba14-183">It will not retain the entries that you uploaded during the custom log creation, but it will collect already existing entries in the log files that it locates.</span></span>

<span data-ttu-id="fba14-184">Jakmile analýzy protokolů spustí shromažďování z vlastního protokolu, bude k dispozici s hledání protokolů svoje záznamy.</span><span class="sxs-lookup"><span data-stu-id="fba14-184">Once Log Analytics starts collecting from the custom log, its records will be available with a Log Search.</span></span>  <span data-ttu-id="fba14-185">Použijte název, který jste zadali vlastní protokol jako **typ** v dotazu.</span><span class="sxs-lookup"><span data-stu-id="fba14-185">Use the name that you gave the custom log as the **Type** in your query.</span></span>

> [!NOTE]
> <span data-ttu-id="fba14-186">Pokud hledání chybí vlastnost RawData, můžete zavřít a znovu otevřít prohlížeč.</span><span class="sxs-lookup"><span data-stu-id="fba14-186">If the RawData property is missing from the search, you may need to close and reopen your browser.</span></span>
>
>

### <a name="step-6-parse-the-custom-log-entries"></a><span data-ttu-id="fba14-187">Krok 6.</span><span class="sxs-lookup"><span data-stu-id="fba14-187">Step 6.</span></span> <span data-ttu-id="fba14-188">Analyzovat položky vlastní protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-188">Parse the custom log entries</span></span>
<span data-ttu-id="fba14-189">Záznam celý protokolu bude uložen v jedné vlastnost s názvem **RawData**.</span><span class="sxs-lookup"><span data-stu-id="fba14-189">The entire log entry will be stored in a single property called **RawData**.</span></span>  <span data-ttu-id="fba14-190">Budete pravděpodobně chtít oddělit různé části informací v každé položky do jednotlivé vlastnosti, které jsou uložené v záznamu.</span><span class="sxs-lookup"><span data-stu-id="fba14-190">You will most likely want to separate the different pieces of information in each entry into individual properties stored in the record.</span></span>  <span data-ttu-id="fba14-191">To provedete pomocí [vlastní pole](log-analytics-custom-fields.md) funkce analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="fba14-191">You do this using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

<span data-ttu-id="fba14-192">Podrobné kroky k analýze záznam vlastní protokolu nejsou uvedeny zde.</span><span class="sxs-lookup"><span data-stu-id="fba14-192">Detailed steps for parsing the custom log entry are not provided here.</span></span>  <span data-ttu-id="fba14-193">Podrobnosti najdete [vlastní pole](log-analytics-custom-fields.md) dokumentaci pro tyto informace.</span><span class="sxs-lookup"><span data-stu-id="fba14-193">Please refer to the [Custom Fields](log-analytics-custom-fields.md) documentation for this information.</span></span>

## <a name="disabling-a-custom-log"></a><span data-ttu-id="fba14-194">Zakázání vlastního protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-194">Disabling a custom log</span></span>
<span data-ttu-id="fba14-195">Definice vlastního protokolu nelze odebrat, jakmile je byla vytvořena, ale můžete ji zakázat odebráním všech jeho cesty ke kolekcím.</span><span class="sxs-lookup"><span data-stu-id="fba14-195">You cannot remove a custom log definition once it's been created, but you can disable it by removing all of its collection paths.</span></span>

1. <span data-ttu-id="fba14-196">Na portálu OMS, přejděte na **nastavení**.</span><span class="sxs-lookup"><span data-stu-id="fba14-196">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="fba14-197">Klikněte na **Data** a potom **vlastní protokoly**.</span><span class="sxs-lookup"><span data-stu-id="fba14-197">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="fba14-198">Klikněte na tlačítko **podrobnosti** vedle definici vlastní protokol zakázat.</span><span class="sxs-lookup"><span data-stu-id="fba14-198">Click **Details** next to the custom log definition to disable.</span></span>
4. <span data-ttu-id="fba14-199">Odeberte všechny cesty ke kolekcím pro definice vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-199">Remove each of the collection paths for the custom log definition.</span></span>

## <a name="data-collection"></a><span data-ttu-id="fba14-200">Shromažďování dat</span><span class="sxs-lookup"><span data-stu-id="fba14-200">Data collection</span></span>
<span data-ttu-id="fba14-201">Analýzy protokolů bude shromažďovat nové položky z každé vlastní protokolu přibližně každých 5 minut.</span><span class="sxs-lookup"><span data-stu-id="fba14-201">Log Analytics will collect new entries from each custom log approximately every 5 minutes.</span></span>  <span data-ttu-id="fba14-202">Agent zaznamená v jednotlivých souborů protokolu, který shromáždí z jeho místo.</span><span class="sxs-lookup"><span data-stu-id="fba14-202">The agent will record its place in each log file that it collects from.</span></span>  <span data-ttu-id="fba14-203">Pokud agenta přejde do režimu offline dobu, bude položky od posledního místa vypnutý, shromažďovat analýzy protokolů i v případě, že tyto položky byly vytvořeny v době, kdy agent offline.</span><span class="sxs-lookup"><span data-stu-id="fba14-203">If the agent goes offline for a period of time, then Log Analytics will collect entries from where it last left off, even if those entries were created while the agent was offline.</span></span>

<span data-ttu-id="fba14-204">Celý obsah položky protokolu se zapisují do jednoho vlastnost s názvem **RawData**.</span><span class="sxs-lookup"><span data-stu-id="fba14-204">The entire contents of the log entry are written to a single property called **RawData**.</span></span>  <span data-ttu-id="fba14-205">To můžete analyzovat na více vlastností, které mohou být analyzován a vyhledávat samostatně definováním [vlastní pole](log-analytics-custom-fields.md) po vytvoření vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-205">You can parse this into multiple properties that can be analyzed and searched separately by defining [Custom Fields](log-analytics-custom-fields.md) after you have created the custom log.</span></span>

## <a name="custom-log-record-properties"></a><span data-ttu-id="fba14-206">Vlastnosti záznamu vlastní protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-206">Custom log record properties</span></span>
<span data-ttu-id="fba14-207">Vlastní protokol záznamů mít typ s názvem protokolu, které poskytujete a vlastnosti v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="fba14-207">Custom log records have a type with the log name that you provide and the properties in the following table.</span></span>

| <span data-ttu-id="fba14-208">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="fba14-208">Property</span></span> | <span data-ttu-id="fba14-209">Popis</span><span class="sxs-lookup"><span data-stu-id="fba14-209">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="fba14-210">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="fba14-210">TimeGenerated</span></span> |<span data-ttu-id="fba14-211">Datum a čas, které záznam byl shromáždit pomocí analýzy protokolů.</span><span class="sxs-lookup"><span data-stu-id="fba14-211">Date and time that the record was collected by Log Analytics.</span></span>  <span data-ttu-id="fba14-212">Pokud protokol používá oddělovač založené na čase Toto je čas shromážděných z položky.</span><span class="sxs-lookup"><span data-stu-id="fba14-212">If the log uses a time-based delimiter then this is the time collected from the entry.</span></span> |
| <span data-ttu-id="fba14-213">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="fba14-213">SourceSystem</span></span> |<span data-ttu-id="fba14-214">Typ agenta záznamu nebyla shromážděna z.</span><span class="sxs-lookup"><span data-stu-id="fba14-214">Type of agent the record was collected from.</span></span> <br> <span data-ttu-id="fba14-215">Připojit OpsManager – agent systému Windows, buď přímo nebo System Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="fba14-215">OpsManager – Windows agent, either direct connect or System Center Operations Manager</span></span> <br> <span data-ttu-id="fba14-216">Linux – všechny agenty Linux</span><span class="sxs-lookup"><span data-stu-id="fba14-216">Linux – All Linux agents</span></span> |
| <span data-ttu-id="fba14-217">RawData</span><span class="sxs-lookup"><span data-stu-id="fba14-217">RawData</span></span> |<span data-ttu-id="fba14-218">Úplný text shromážděných položky.</span><span class="sxs-lookup"><span data-stu-id="fba14-218">Full text of the collected entry.</span></span> |
| <span data-ttu-id="fba14-219">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="fba14-219">ManagementGroupName</span></span> |<span data-ttu-id="fba14-220">Název skupiny pro správu pro System Center Operations spravovat agenty.</span><span class="sxs-lookup"><span data-stu-id="fba14-220">Name of the management group for System Center Operations Manage agents.</span></span>  <span data-ttu-id="fba14-221">Pro jiné agenty jde AOI -\<ID pracovního prostoru\></span><span class="sxs-lookup"><span data-stu-id="fba14-221">For other agents, this is AOI-\<workspace ID\></span></span> |

## <a name="log-searches-with-custom-log-records"></a><span data-ttu-id="fba14-222">Protokol hledání se záznamy vlastního protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-222">Log searches with custom log records</span></span>
<span data-ttu-id="fba14-223">V úložišti OMS stejně jako záznamy z jiného zdroje dat jsou uloženy záznamy ze vlastní protokoly.</span><span class="sxs-lookup"><span data-stu-id="fba14-223">Records from custom logs are stored in the OMS repository just like records from any other data source.</span></span>  <span data-ttu-id="fba14-224">Budou mít typ odpovídající název, který zadáte, když definujete protokol, abyste mohli používat vlastnost Type v hledání pro načtení záznamů shromážděné z konkrétní protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-224">They will have a type matching the name that you provide when you define the log, so you can use the Type property in your search to retrieve records collected from a specific log.</span></span>

<span data-ttu-id="fba14-225">Následující tabulka obsahuje různé příklady vyhledávání protokolu, které načtení záznamů z vlastní protokoly.</span><span class="sxs-lookup"><span data-stu-id="fba14-225">The following table provides different examples of log searches that retrieve records from custom logs.</span></span>

| <span data-ttu-id="fba14-226">Dotaz</span><span class="sxs-lookup"><span data-stu-id="fba14-226">Query</span></span> | <span data-ttu-id="fba14-227">Popis</span><span class="sxs-lookup"><span data-stu-id="fba14-227">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="fba14-228">Typ = MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="fba14-228">Type=MyApp_CL</span></span> |<span data-ttu-id="fba14-229">Všechny události z vlastní protokolu s názvem MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="fba14-229">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="fba14-230">Typ = MyApp_CL Severity_CF = chyby</span><span class="sxs-lookup"><span data-stu-id="fba14-230">Type=MyApp_CL Severity_CF=error</span></span> |<span data-ttu-id="fba14-231">Všechny události z vlastní protokolu s názvem MyApp_CL s hodnotou *chyba* do vlastní pole s názvem *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="fba14-231">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |

>[!NOTE]
> <span data-ttu-id="fba14-232">Pokud byl váš pracovní prostor upgradován na [nový dotazovací jazyk Log Analytics](log-analytics-log-search-upgrade.md), výše uvedené dotazy se změní na následující.</span><span class="sxs-lookup"><span data-stu-id="fba14-232">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="fba14-233">Dotaz</span><span class="sxs-lookup"><span data-stu-id="fba14-233">Query</span></span> | <span data-ttu-id="fba14-234">Popis</span><span class="sxs-lookup"><span data-stu-id="fba14-234">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="fba14-235">MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="fba14-235">MyApp_CL</span></span> |<span data-ttu-id="fba14-236">Všechny události z vlastní protokolu s názvem MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="fba14-236">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="fba14-237">MyApp_CL &#124; kde Severity_CF == "error.</span><span class="sxs-lookup"><span data-stu-id="fba14-237">MyApp_CL &#124; where Severity_CF=="error"</span></span> |<span data-ttu-id="fba14-238">Všechny události z vlastní protokolu s názvem MyApp_CL s hodnotou *chyba* do vlastní pole s názvem *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="fba14-238">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |


## <a name="sample-walkthrough-of-adding-a-custom-log"></a><span data-ttu-id="fba14-239">Ukázka návod přidání vlastního protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-239">Sample walkthrough of adding a custom log</span></span>
<span data-ttu-id="fba14-240">V následující části vás provede příklad vytvoření vlastního protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-240">The following section walks through an example of creating a custom log.</span></span>  <span data-ttu-id="fba14-241">Příklad protokolu shromažďovaných má jednu položku na každý řádek počínaje datum a čas a potom oddělených čárkou pole pro kód, stav a zprávy.</span><span class="sxs-lookup"><span data-stu-id="fba14-241">The sample log being collected has a single entry on each line starting with a date and time and then comma-delimited fields for code, status, and message.</span></span>  <span data-ttu-id="fba14-242">Níže jsou uvedeny několik položek příkladu.</span><span class="sxs-lookup"><span data-stu-id="fba14-242">Several sample entries are shown below.</span></span>

    2016-03-10 01:34:36 207,Success,Client 05a26a97-272a-4bc9-8f64-269d154b0e39 connected
    2016-03-10 01:33:33 208,Warning,Client ec53d95c-1c88-41ae-8174-92104212de5d disconnected
    2016-03-10 01:35:44 209,Success,Transaction 10d65890-b003-48f8-9cfc-9c74b51189c8 succeeded
    2016-03-10 01:38:22 302,Error,Application could not connect to database
    2016-03-10 01:31:34 303,Error,Application lost connection to database

### <a name="upload-and-parse-a-sample-log"></a><span data-ttu-id="fba14-243">Nahrání a analyzovat ukázkový protokol</span><span class="sxs-lookup"><span data-stu-id="fba14-243">Upload and parse a sample log</span></span>
<span data-ttu-id="fba14-244">Poskytujeme jeden ze souborů protokolu a zobrazit události, které bude shromažďování.</span><span class="sxs-lookup"><span data-stu-id="fba14-244">We provide one of the log files and can see the events that it will be collecting.</span></span>  <span data-ttu-id="fba14-245">Nový řádek v tomto případě je dostatečná oddělovač.</span><span class="sxs-lookup"><span data-stu-id="fba14-245">In this case New Line is a sufficient delimiter.</span></span>  <span data-ttu-id="fba14-246">Pokud jeden záznam v protokolu může zahrnovat více řádků ale nutné časové razítko oddělovač, který se má použít.</span><span class="sxs-lookup"><span data-stu-id="fba14-246">If a single entry in the log could span multiple lines though, then a timestamp delimiter would need to be used.</span></span>

![Nahrání a analyzovat ukázkový protokol](media/log-analytics-data-sources-custom-logs/delimiter.png)

### <a name="add-log-collection-paths"></a><span data-ttu-id="fba14-248">Přidat cesty ke kolekcím protokolů</span><span class="sxs-lookup"><span data-stu-id="fba14-248">Add log collection paths</span></span>
<span data-ttu-id="fba14-249">Soubory protokolu budou umístěny v *C:\MyApp\Logs*.</span><span class="sxs-lookup"><span data-stu-id="fba14-249">The log files will be located in *C:\MyApp\Logs*.</span></span>  <span data-ttu-id="fba14-250">Nový soubor se vytvoří každý den s názvem, který obsahuje data ve vzoru *appYYYYMMDD.log*.</span><span class="sxs-lookup"><span data-stu-id="fba14-250">A new file will be created each day with a name that includes the date in the pattern *appYYYYMMDD.log*.</span></span>  <span data-ttu-id="fba14-251">Dostatečná vzor pro tento protokol by *C:\MyApp\Logs\\\*.log*.</span><span class="sxs-lookup"><span data-stu-id="fba14-251">A sufficient pattern for this log would be *C:\MyApp\Logs\\\*.log*.</span></span>

![Cesta kolekce protokolu](media/log-analytics-data-sources-custom-logs/collection-path.png)

### <a name="provide-a-name-and-description-for-the-log"></a><span data-ttu-id="fba14-253">Zadejte název a popis pro protokol</span><span class="sxs-lookup"><span data-stu-id="fba14-253">Provide a name and description for the log</span></span>
<span data-ttu-id="fba14-254">Používáme název *MyApp_CL* a zadejte **popis**.</span><span class="sxs-lookup"><span data-stu-id="fba14-254">We use a name of *MyApp_CL* and type in a **Description**.</span></span>

![Název protokolu](media/log-analytics-data-sources-custom-logs/log-name.png)

### <a name="validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="fba14-256">Ověřte, že vlastní protokoly jsou shromažďovány</span><span class="sxs-lookup"><span data-stu-id="fba14-256">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="fba14-257">Používáme dotaz *typ = MyApp_CL* chcete zobrazit všechny záznamy z shromážděných protokolu.</span><span class="sxs-lookup"><span data-stu-id="fba14-257">We use a query of *Type=MyApp_CL* to return all records from the collected log.</span></span>

![Dotaz protokolu s žádné vlastní pole](media/log-analytics-data-sources-custom-logs/query-01.png)

### <a name="parse-the-custom-log-entries"></a><span data-ttu-id="fba14-259">Analyzovat položky vlastní protokolu</span><span class="sxs-lookup"><span data-stu-id="fba14-259">Parse the custom log entries</span></span>
<span data-ttu-id="fba14-260">Používáme vlastní pole definovat *EventTime*, *kód*, *stav*, a *zpráva* pole a jsme viděli rozdíl v záznamech který jsou vrácených dotazem.</span><span class="sxs-lookup"><span data-stu-id="fba14-260">We use Custom Fields to define the *EventTime*, *Code*, *Status*, and *Message* fields and we can see the difference in the records that are returned by the query.</span></span>

![Protokol dotazu s vlastními poli](media/log-analytics-data-sources-custom-logs/query-02.png)

## <a name="next-steps"></a><span data-ttu-id="fba14-262">Další kroky</span><span class="sxs-lookup"><span data-stu-id="fba14-262">Next steps</span></span>
* <span data-ttu-id="fba14-263">Použití [vlastní pole](log-analytics-custom-fields.md) analyzovat položky vlastní protokolu v jednotlivých polí.</span><span class="sxs-lookup"><span data-stu-id="fba14-263">Use [Custom Fields](log-analytics-custom-fields.md) to parse the entries in the custom log in to individual fields.</span></span>
* <span data-ttu-id="fba14-264">Další informace o [protokolu hledání](log-analytics-log-searches.md) analyzovat data shromážděná ze zdrojů dat a řešení.</span><span class="sxs-lookup"><span data-stu-id="fba14-264">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>
