---
title: "aaaInput ověření - Microsoft Threat modelování nástroj – Azure | Microsoft Docs"
description: "způsoby zmírnění hrozeb v hello nástroj modelování hrozeb"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 823503881f4bae292ef021834d5e64acf2a0f54a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="54353-103">Rámce zabezpečení: Ověřování vstupu | Způsoby zmírnění rizik</span><span class="sxs-lookup"><span data-stu-id="54353-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="54353-104">Produktům a službám</span><span class="sxs-lookup"><span data-stu-id="54353-104">Product/Service</span></span> | <span data-ttu-id="54353-105">Článek</span><span class="sxs-lookup"><span data-stu-id="54353-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="54353-106">**Webové aplikace**</span><span class="sxs-lookup"><span data-stu-id="54353-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="54353-107">Zakázat XSLT skriptování všechny transformací pomocí nedůvěryhodné šablony stylů</span><span class="sxs-lookup"><span data-stu-id="54353-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="54353-108">Ujistěte se, že každé stránce, která může obsahovat uživatele ovladatelné obsah výslovný nesouhlas automatické sledování toku dat MIME</span><span class="sxs-lookup"><span data-stu-id="54353-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="54353-109">Posílení zabezpečení nebo zakázat řešení Entity XML</span><span class="sxs-lookup"><span data-stu-id="54353-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="54353-110">Aplikace využívá ovladač http.sys provést ověření kanonizace adresy URL</span><span class="sxs-lookup"><span data-stu-id="54353-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="54353-111">Zajistěte, aby byl příslušný ovládací prvky jsou zavedené při přijetí soubory od uživatelů</span><span class="sxs-lookup"><span data-stu-id="54353-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="54353-112">Ujistěte se, jestli je pro přístup k datům ve webové aplikaci používají bezpečnost typů parametrů</span><span class="sxs-lookup"><span data-stu-id="54353-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="54353-113">Používat samostatný model vazby třídy nebo filtr vazeb vypíše tooprevent MVC velkokapacitního přiřazení ohrožení zabezpečení</span><span class="sxs-lookup"><span data-stu-id="54353-113">Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="54353-114">Kódování předchozí toorendering nedůvěryhodné webové výstup</span><span class="sxs-lookup"><span data-stu-id="54353-114">Encode untrusted web output prior toorendering</span></span>](#rendering)</li><li>[<span data-ttu-id="54353-115">Provedení ověření vstupu a filtrování u všech řetězec typu vlastnosti modelu</span><span class="sxs-lookup"><span data-stu-id="54353-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="54353-116">Čištění bude použito na pole formuláře, které přijímají všechny znaky, např, bohaté textového editoru</span><span class="sxs-lookup"><span data-stu-id="54353-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="54353-117">Nepřiřazujte toosinks DOM elementy, které nemají integrované kódování</span><span class="sxs-lookup"><span data-stu-id="54353-117">Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="54353-118">Ověřit, zda všechny jsou uzavřeny nebo bezpečně provést přesměrování v rámci aplikace hello</span><span class="sxs-lookup"><span data-stu-id="54353-118">Validate all redirects within hello application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="54353-119">Implementace ověření vstupu na všechny parametry typu řetězec akceptovat metody Kontroleru</span><span class="sxs-lookup"><span data-stu-id="54353-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="54353-120">Nastavit časový limit horní limit pro regulární výraz zpracování tooprevent DoS z důvodu toobad regulární výrazy</span><span class="sxs-lookup"><span data-stu-id="54353-120">Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="54353-121">Nepoužívejte Html.Raw v zobrazení syntaxe Razor</span><span class="sxs-lookup"><span data-stu-id="54353-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="54353-122">**Database**</span><span class="sxs-lookup"><span data-stu-id="54353-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="54353-123">Nepoužívejte dynamické dotazy v uložené procedury</span><span class="sxs-lookup"><span data-stu-id="54353-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="54353-124">**Webové rozhraní API**</span><span class="sxs-lookup"><span data-stu-id="54353-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="54353-125">Zajistit, aby ověření modelu pro metody webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="54353-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="54353-126">Implementace ověření vstupu na všechny parametry typu řetězec přijata metodami webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="54353-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="54353-127">Ujistěte se, že bezpečnost typů parametrů se používají v webového rozhraní API pro přístup k datům</span><span class="sxs-lookup"><span data-stu-id="54353-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="54353-128">**Azure Documentdb**</span><span class="sxs-lookup"><span data-stu-id="54353-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="54353-129">Použít umožňující dotazy SQL pro DocumentDB</span><span class="sxs-lookup"><span data-stu-id="54353-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="54353-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="54353-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="54353-131">Ověření vstupu WCF prostřednictvím vazbou schématu</span><span class="sxs-lookup"><span data-stu-id="54353-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="54353-132">Ověření vstupu WCF prostřednictvím parametru kontroly</span><span class="sxs-lookup"><span data-stu-id="54353-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="54353-133"><a id="disable-xslt"></a>Zakázat XSLT skriptování všechny transformací pomocí nedůvěryhodné šablony stylů</span><span class="sxs-lookup"><span data-stu-id="54353-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="54353-134">Název</span><span class="sxs-lookup"><span data-stu-id="54353-134">Title</span></span>                   | <span data-ttu-id="54353-135">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-136">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-136">**Component**</span></span>               | <span data-ttu-id="54353-137">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-137">Web Application</span></span> | 
| <span data-ttu-id="54353-138">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-138">**SDL Phase**</span></span>               | <span data-ttu-id="54353-139">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-139">Build</span></span> |  
| <span data-ttu-id="54353-140">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-140">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-141">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-141">Generic</span></span> |
| <span data-ttu-id="54353-142">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-142">**Attributes**</span></span>              | <span data-ttu-id="54353-143">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-143">N/A</span></span>  |
| <span data-ttu-id="54353-144">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-144">**References**</span></span>              | <span data-ttu-id="54353-145">[Zabezpečení XSLT](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript vlastnost](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="54353-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="54353-146">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-146">**Steps**</span></span> | <span data-ttu-id="54353-147">XSLT podporuje skriptování uvnitř stylů pomocí hello `<msxml:script>` elementu.</span><span class="sxs-lookup"><span data-stu-id="54353-147">XSLT supports scripting inside style sheets using hello `<msxml:script>` element.</span></span> <span data-ttu-id="54353-148">To umožňuje používat v transformaci XSLT toobe vlastní funkce.</span><span class="sxs-lookup"><span data-stu-id="54353-148">This allows custom functions toobe used in an XSLT transformation.</span></span> <span data-ttu-id="54353-149">Hello skript se spustí v kontextu hello procesu hello provádění hello transformace.</span><span class="sxs-lookup"><span data-stu-id="54353-149">hello script is executed under hello context of hello process performing hello transform.</span></span> <span data-ttu-id="54353-150">XSLT skriptu musí být zakázáno v nedůvěryhodných prostředí spuštění tooprevent nedůvěryhodné kódu.</span><span class="sxs-lookup"><span data-stu-id="54353-150">XSLT script must be disabled when in an untrusted environment tooprevent execution of untrusted code.</span></span> <span data-ttu-id="54353-151">*Pokud pomocí rozhraní .NET:* skriptování XSLT je ve výchozím nastavení zakázané; ale ujistěte se, že ho nebylo povoleno explicitně prostřednictvím hello `XsltSettings.EnableScript` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="54353-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="54353-152">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="54353-153">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-153">Example</span></span>
<span data-ttu-id="54353-154">Pokud používáte pomocí MSXML 6.0, skriptování XSLT je zakázané ve výchozím nastavení; Nicméně je nutné zajistit, aby ho nebylo povoleno explicitně prostřednictvím vlastnosti objektu XML DOM hello AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="54353-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="54353-155">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-155">Example</span></span>
<span data-ttu-id="54353-156">Pokud používáte MSXML 5 nebo níže, XSLT je povoleno skriptování ve výchozím nastavení je potřeba explicitně zakážete.</span><span class="sxs-lookup"><span data-stu-id="54353-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="54353-157">Nastavte hello XML DOM objektu vlastnost AllowXsltScript toofalse.</span><span class="sxs-lookup"><span data-stu-id="54353-157">Set hello XML DOM object property AllowXsltScript toofalse.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting toofalse disables XSLT scripting.
```

## <span data-ttu-id="54353-158"><a id="out-sniffing"></a>Ujistěte se, že každé stránce, která může obsahovat uživatele ovladatelné obsah výslovný nesouhlas automatické sledování toku dat MIME</span><span class="sxs-lookup"><span data-stu-id="54353-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="54353-159">Název</span><span class="sxs-lookup"><span data-stu-id="54353-159">Title</span></span>                   | <span data-ttu-id="54353-160">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-161">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-161">**Component**</span></span>               | <span data-ttu-id="54353-162">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-162">Web Application</span></span> | 
| <span data-ttu-id="54353-163">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-163">**SDL Phase**</span></span>               | <span data-ttu-id="54353-164">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-164">Build</span></span> |  
| <span data-ttu-id="54353-165">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-165">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-166">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-166">Generic</span></span> |
| <span data-ttu-id="54353-167">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-167">**Attributes**</span></span>              | <span data-ttu-id="54353-168">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-168">N/A</span></span>  |
| <span data-ttu-id="54353-169">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-169">**References**</span></span>              | [<span data-ttu-id="54353-170">IE8 V části zabezpečení - komplexní ochranu</span><span class="sxs-lookup"><span data-stu-id="54353-170">IE8 Security Part V - Comprehensive Protection</span></span>](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)  |
| <span data-ttu-id="54353-171">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-171">**Steps**</span></span> | <p><span data-ttu-id="54353-172">Pro jednotlivé stránky, která by mohla obsahovat ovladatelné obsah uživatele, je nutné použít hello hlavičky protokolu HTTP `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="54353-172">For each page that could contain user controllable content, you must use hello HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="54353-173">toocomply s tímto požadavkem, můžete buď sadu hello požadovaná hlavička pro pouze stránky, které může obsahovat uživatele ovladatelné obsahu stránce stránky, nebo můžete ho nastavit globálně pro všechny stránky v aplikaci hello.</span><span class="sxs-lookup"><span data-stu-id="54353-173">toocomply with this requirement, you can either set hello required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in hello application.</span></span></p><p><span data-ttu-id="54353-174">Každý typ souboru doručit z webového serveru má přidruženou [typ MIME](http://en.wikipedia.org/wiki/Mime_type) (označované taky jako *typu obsahu*), který popisuje hello povaha hello obsah (to znamená, obrázek, text, aplikace, atd.)</span><span class="sxs-lookup"><span data-stu-id="54353-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes hello nature of hello content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="54353-175">záhlaví Hello X obsah typu možnosti je hlavičky protokolu HTTP, která vývojářům umožní toospecify, že jejich obsah by neměl být MIME zachycení.</span><span class="sxs-lookup"><span data-stu-id="54353-175">hello X-Content-Type-Options header is an HTTP header that allows developers toospecify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="54353-176">Tuto hlavičku je navrženou toomitigate sledování toku dat MIME útoky.</span><span class="sxs-lookup"><span data-stu-id="54353-176">This header is designed toomitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="54353-177">Přidala se podpora pro tuto hlavičku v aplikaci Internet Explorer 8 (IE8)</span><span class="sxs-lookup"><span data-stu-id="54353-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="54353-178">Jenom uživatelé aplikace Internet Explorer 8 (IE8) budou využívat X obsah typu možnosti.</span><span class="sxs-lookup"><span data-stu-id="54353-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="54353-179">Předchozí verze aplikace Internet Explorer nerespektují aktuálně Hlavička X-obsah-typ-Options hello</span><span class="sxs-lookup"><span data-stu-id="54353-179">Previous versions of Internet Explorer do not currently respect hello X-Content-Type-Options header</span></span></p><p><span data-ttu-id="54353-180">Internet Explorer 8 (nebo novější) jsou hello pouze hlavní prohlížeče MIME-sledování toku dat tooimplement výslovný nesouhlas s funkcí.</span><span class="sxs-lookup"><span data-stu-id="54353-180">Internet Explorer 8 (and later) are hello only major browsers tooimplement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="54353-181">Pokud další hlavní prohlížeče (Firefox, Safari, Chrome) implementovat podobné funkce, toto doporučení budou aktualizované tooinclude syntaxe také tyto prohlížeče</span><span class="sxs-lookup"><span data-stu-id="54353-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated tooinclude syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="54353-182">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-182">Example</span></span>
<span data-ttu-id="54353-183">hello požadovaná hlavička tooenable globálně pro všechny stránky v aplikaci hello, můžete provést jednu z následujících akcí hello:</span><span class="sxs-lookup"><span data-stu-id="54353-183">tooenable hello required header globally for all pages in hello application, you can do one of hello following:</span></span> 

* <span data-ttu-id="54353-184">Přidat hlavičku hello v souboru web.config hello, pokud je aplikace hello hostovaná pomocí Internetové informační služby (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="54353-184">Add hello header in hello web.config file if hello application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="54353-185">Přidat hlavičku hello prostřednictvím hello globální aplikace\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="54353-185">Add hello header through hello global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="54353-186">Implementace vlastního modulu HTTP</span><span class="sxs-lookup"><span data-stu-id="54353-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="54353-187">Požadovaná hlavička hello pouze pro konkrétní stránky můžete povolit přidáním tooindividual odpovědí:</span><span class="sxs-lookup"><span data-stu-id="54353-187">You can enable hello required header only for specific pages by adding it tooindividual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="54353-188"><a id="xml-resolution"></a>Posílení zabezpečení nebo zakázat řešení Entity XML</span><span class="sxs-lookup"><span data-stu-id="54353-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="54353-189">Název</span><span class="sxs-lookup"><span data-stu-id="54353-189">Title</span></span>                   | <span data-ttu-id="54353-190">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-191">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-191">**Component**</span></span>               | <span data-ttu-id="54353-192">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-192">Web Application</span></span> | 
| <span data-ttu-id="54353-193">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-193">**SDL Phase**</span></span>               | <span data-ttu-id="54353-194">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-194">Build</span></span> |  
| <span data-ttu-id="54353-195">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-195">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-196">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-196">Generic</span></span> |
| <span data-ttu-id="54353-197">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-197">**Attributes**</span></span>              | <span data-ttu-id="54353-198">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-198">N/A</span></span>  |
| <span data-ttu-id="54353-199">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-199">**References**</span></span>              | <span data-ttu-id="54353-200">[Rozšíření Entity XML](http://capec.mitre.org/data/definitions/197.html), [útoků a obrany XML útok DoS](http://msdn.microsoft.com/magazine/ee335713.aspx), [Přehled zabezpečení MSXML](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [osvědčené postupy pro zabezpečení MSXML kódu](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [referenci na protokol NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [řešení externí odkazy](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="54353-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="54353-201">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-201">**Steps**</span></span>| <p><span data-ttu-id="54353-202">I když není využívány často, je funkce XML, který umožňuje tooexpand analyzátor XML hello makro entity s hodnotami, které jsou definované v rámci samotného hello dokumentu nebo z externích zdrojů.</span><span class="sxs-lookup"><span data-stu-id="54353-202">Although it is not widely used, there is a feature of XML that allows hello XML parser tooexpand macro entities with values defined either within hello document itself or from external sources.</span></span> <span data-ttu-id="54353-203">Například hello dokument může definovat entity "NázevSpolečnosti" s hodnotou hello "Microsoft", aby pokaždé, když hello text "&companyname;" se zobrazí v dokumentu hello se automaticky nahradí textem hello. Microsoft.</span><span class="sxs-lookup"><span data-stu-id="54353-203">For example, hello document might define an entity "companyname" with hello value "Microsoft," so that every time hello text "&companyname;" appears in hello document, it is automatically replaced with hello text Microsoft.</span></span> <span data-ttu-id="54353-204">Nebo hello dokument může definovat entity "MSFTStock", který odkazuje externí webovou službu toofetch hello aktuální hodnota Microsoft stock.</span><span class="sxs-lookup"><span data-stu-id="54353-204">Or, hello document might define an entity "MSFTStock" that references an external web service toofetch hello current value of Microsoft stock.</span></span></p><p><span data-ttu-id="54353-205">Pak kdykoli "&MSFTStock;" se zobrazí v dokumentu hello se automaticky nahradí aktuální uložených cena hello.</span><span class="sxs-lookup"><span data-stu-id="54353-205">Then any time "&MSFTStock;" appears in hello document, it is automatically replaced with hello current stock price.</span></span> <span data-ttu-id="54353-206">Tato funkce se však může být překročen toocreate odepření služby (DoS) podmínek.</span><span class="sxs-lookup"><span data-stu-id="54353-206">However, this functionality can be abused toocreate denial of service (DoS) conditions.</span></span> <span data-ttu-id="54353-207">Útočník může vnořit více entit toocreate bomb XML exponenciální rozšíření, které zabírá všechny dostupné paměti v systému hello.</span><span class="sxs-lookup"><span data-stu-id="54353-207">An attacker can nest multiple entities toocreate an exponential expansion XML bomb that consumes all available memory on hello system.</span></span> </p><p><span data-ttu-id="54353-208">Alternativně může udělat externího odkazu, který datové proudy zpět nekonečné množství dat nebo která jednoduše přestane reagovat hello přístup z více vláken.</span><span class="sxs-lookup"><span data-stu-id="54353-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs hello thread.</span></span> <span data-ttu-id="54353-209">Všechny týmy v důsledku toho musíte zakázat interní nebo externí řešení entity XML, zcela, pokud jejich aplikace nemá ho použít, nebo ručně omezit hello množství paměti a dobu, po kterou hello aplikace můžou využívat pro překlad entity, pokud je tato funkce nezbytně nutné.</span><span class="sxs-lookup"><span data-stu-id="54353-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit hello amount of memory and time that hello application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="54353-210">Pokud řešení entity není vyžadován na základě vaší aplikace, potom jej vypněte.</span><span class="sxs-lookup"><span data-stu-id="54353-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="54353-211">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-211">Example</span></span>
<span data-ttu-id="54353-212">Pro kód .NET Framework můžete použít hello následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="54353-212">For .NET Framework code, you can use hello following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="54353-213">Všimněte si, že hello výchozí hodnotu `ProhibitDtd` v `XmlReaderSettings` má hodnotu true, ale v `XmlTextReader` je false.</span><span class="sxs-lookup"><span data-stu-id="54353-213">Note that hello default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="54353-214">Pokud používáte XmlReaderSettings, tooset ProhibitDtd tootrue není nutné explicitně, ale se doporučuje pro zabezpečení saké, abyste provedli.</span><span class="sxs-lookup"><span data-stu-id="54353-214">If you are using XmlReaderSettings, you do not need tooset ProhibitDtd tootrue explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="54353-215">Všimněte si také, že třídy XmlDocument hello umožňuje entity řešení ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="54353-215">Also note that hello XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="54353-216">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-216">Example</span></span>
<span data-ttu-id="54353-217">toodisable entity řešení pro XmlDocuments, použijte hello `XmlDocument.Load(XmlReader)` přetížení hello Load – metoda a nastavte hello příslušné vlastnosti hello XmlReader argument toodisable rozlišení, jak je znázorněno v následujícím kódu hello:</span><span class="sxs-lookup"><span data-stu-id="54353-217">toodisable entity resolution for XmlDocuments, use hello `XmlDocument.Load(XmlReader)` overload of hello Load method and set hello appropriate properties in hello XmlReader argument toodisable resolution, as illustrated in hello following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="54353-218">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-218">Example</span></span>
<span data-ttu-id="54353-219">Pokud zakázání řešení entity není možné pro vaši aplikaci, nastavte hello XmlReaderSettings.MaxCharactersFromEntities tooa přiměřenou hodnotu vlastnosti podle potřeb tooyour aplikace.</span><span class="sxs-lookup"><span data-stu-id="54353-219">If disabling entity resolution is not possible for your application, set hello XmlReaderSettings.MaxCharactersFromEntities property tooa reasonable value according tooyour application's needs.</span></span> <span data-ttu-id="54353-220">To bude omezovat hello dopad útoků DoS potenciální exponenciální rozšíření.</span><span class="sxs-lookup"><span data-stu-id="54353-220">This will limit hello impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="54353-221">Hello následující kód představuje příklad tohoto přístupu:</span><span class="sxs-lookup"><span data-stu-id="54353-221">hello following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="54353-222">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-222">Example</span></span>
<span data-ttu-id="54353-223">Pokud třeba tooresolve vložené entity, ale není nutné tooresolve externí entity, nastavte toonull vlastnost XmlReaderSettings.XmlResolver hello.</span><span class="sxs-lookup"><span data-stu-id="54353-223">If you need tooresolve inline entities but do not need tooresolve external entities, set hello XmlReaderSettings.XmlResolver property toonull.</span></span> <span data-ttu-id="54353-224">Například:</span><span class="sxs-lookup"><span data-stu-id="54353-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="54353-225">Všimněte si, že v MSXML6, ProhibitDTD tootrue (zakázání zpracování souboru DTD protokolu) ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="54353-225">Note that in MSXML6, ProhibitDTD is set tootrue (disabling DTD processing) by default.</span></span> <span data-ttu-id="54353-226">Pro kód Apple OSX/iOS jsou dvě analyzátory jazyka XML, můžete použít: NSXMLParser a libXML2.</span><span class="sxs-lookup"><span data-stu-id="54353-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="54353-227"><a id="app-verification"></a>Aplikace využívá ovladač http.sys provést ověření kanonizace adresy URL</span><span class="sxs-lookup"><span data-stu-id="54353-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="54353-228">Název</span><span class="sxs-lookup"><span data-stu-id="54353-228">Title</span></span>                   | <span data-ttu-id="54353-229">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-230">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-230">**Component**</span></span>               | <span data-ttu-id="54353-231">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-231">Web Application</span></span> | 
| <span data-ttu-id="54353-232">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-232">**SDL Phase**</span></span>               | <span data-ttu-id="54353-233">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-233">Build</span></span> |  
| <span data-ttu-id="54353-234">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-234">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-235">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-235">Generic</span></span> |
| <span data-ttu-id="54353-236">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-236">**Attributes**</span></span>              | <span data-ttu-id="54353-237">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-237">N/A</span></span>  |
| <span data-ttu-id="54353-238">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-238">**References**</span></span>              | <span data-ttu-id="54353-239">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-239">N/A</span></span>  |
| <span data-ttu-id="54353-240">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-240">**Steps**</span></span> | <p><span data-ttu-id="54353-241">Všechny aplikace, která používá soubor http.sys postupujte podle těchto pokynů:</span><span class="sxs-lookup"><span data-stu-id="54353-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="54353-242">Omezte toono délka adresy URL hello více než 16 384 znaky (ASCII nebo Unicode).</span><span class="sxs-lookup"><span data-stu-id="54353-242">Limit hello URL length toono more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="54353-243">Toto je hello absolutní maximální délka adresy URL na základě nastavení Internetové informační služby (IIS) 6 výchozí hello.</span><span class="sxs-lookup"><span data-stu-id="54353-243">This is hello absolute maximum URL length based on hello default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="54353-244">Weby musí zajistit dobu kratší než to, pokud je to možné</span><span class="sxs-lookup"><span data-stu-id="54353-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="54353-245">Použijte hello standardní rozhraní .NET Framework vstupně-výstupní třídy (například FileStream), jak tyto budou využívat výhod hello kanonizace pravidla v rozhraní .NET FX hello</span><span class="sxs-lookup"><span data-stu-id="54353-245">Use hello standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of hello canonicalization rules in hello .NET FX</span></span></li><li><span data-ttu-id="54353-246">Explicitně sestavit seznam povolených známé názvů souborů</span><span class="sxs-lookup"><span data-stu-id="54353-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="54353-247">Explicitně odmítnout známý typ souborů, neprovede UrlScan odmítne: exe bat, cmd, com, htw, ida, idq, htr, idc, shtm [l], stm, tiskárny, ini, pol, soubory dat</span><span class="sxs-lookup"><span data-stu-id="54353-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="54353-248">Catch hello následující výjimky:</span><span class="sxs-lookup"><span data-stu-id="54353-248">Catch hello following exceptions:</span></span><ul><li><span data-ttu-id="54353-249">System.ArgumentException (pro názvy zařízení)</span><span class="sxs-lookup"><span data-stu-id="54353-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="54353-250">System.NotSupportedException (pro datové proudy)</span><span class="sxs-lookup"><span data-stu-id="54353-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="54353-251">System.IO.FileNotFoundException (pro neplatný uvozený názvy souborů)</span><span class="sxs-lookup"><span data-stu-id="54353-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="54353-252">System.IO.DirectoryNotFoundException (pro neplatný uvozený adresáře)</span><span class="sxs-lookup"><span data-stu-id="54353-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="54353-253">*Nechcete* vyvolávající tooWin32 souborů API vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="54353-253">*Do not* call out tooWin32 file I/O APIs.</span></span> <span data-ttu-id="54353-254">Při neplatná adresa URL elegantně vrátí uživatele toohello Chyba 400 a protokolu hello skutečné chyby.</span><span class="sxs-lookup"><span data-stu-id="54353-254">On an invalid URL gracefully return a 400 error toohello user, and log hello real error.</span></span></li></ul>|

## <span data-ttu-id="54353-255"><a id="controls-users"></a>Zajistěte, aby byl příslušný ovládací prvky jsou zavedené při přijetí soubory od uživatelů</span><span class="sxs-lookup"><span data-stu-id="54353-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="54353-256">Název</span><span class="sxs-lookup"><span data-stu-id="54353-256">Title</span></span>                   | <span data-ttu-id="54353-257">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-258">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-258">**Component**</span></span>               | <span data-ttu-id="54353-259">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-259">Web Application</span></span> | 
| <span data-ttu-id="54353-260">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-260">**SDL Phase**</span></span>               | <span data-ttu-id="54353-261">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-261">Build</span></span> |  
| <span data-ttu-id="54353-262">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-262">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-263">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-263">Generic</span></span> |
| <span data-ttu-id="54353-264">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-264">**Attributes**</span></span>              | <span data-ttu-id="54353-265">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-265">N/A</span></span>  |
| <span data-ttu-id="54353-266">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-266">**References**</span></span>              | <span data-ttu-id="54353-267">[Neomezený nahrávání souborů](https://www.owasp.org/index.php/Unrestricted_File_Upload), [soubor podpisu tabulky](http://www.garykessler.net/library/file_sigs.html)</span><span class="sxs-lookup"><span data-stu-id="54353-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="54353-268">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-268">**Steps**</span></span> | <p><span data-ttu-id="54353-269">Odeslané soubory představují tooapplications významné riziko.</span><span class="sxs-lookup"><span data-stu-id="54353-269">Uploaded files represent a significant risk tooapplications.</span></span></p><p><span data-ttu-id="54353-270">prvním krokem Hello v řada útoků je tooget některé kód toohello systému toobe napadení.</span><span class="sxs-lookup"><span data-stu-id="54353-270">hello first step in many attacks is tooget some code toohello system toobe attacked.</span></span> <span data-ttu-id="54353-271">Potom hello útoku stačí toofind kód hello tooget způsob, jak provést.</span><span class="sxs-lookup"><span data-stu-id="54353-271">Then hello attack only needs toofind a way tooget hello code executed.</span></span> <span data-ttu-id="54353-272">Použití nahrávání souborů pomáhá hello útočník provést první krok hello.</span><span class="sxs-lookup"><span data-stu-id="54353-272">Using a file upload helps hello attacker accomplish hello first step.</span></span> <span data-ttu-id="54353-273">Hello důsledcích při nahrávání souborů neomezený se může lišit, včetně převzetí celý systém, databáze, předávání útoky tooback-end systémy a jednoduchý poškození vzhledu aplikace systému přetížené souborů nebo.</span><span class="sxs-lookup"><span data-stu-id="54353-273">hello consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks tooback-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="54353-274">To závisí na jaké aplikace hello nepodporuje souborem hello nahrán a hlavně kde je uložen.</span><span class="sxs-lookup"><span data-stu-id="54353-274">It depends on what hello application does with hello uploaded file and especially where it is stored.</span></span> <span data-ttu-id="54353-275">Ověřování na straně serveru z nahrávání souborů nebyla nalezena.</span><span class="sxs-lookup"><span data-stu-id="54353-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="54353-276">Následující kontrolní mechanismy zabezpečení, by měla být implementována pro nahrání souboru funkce:</span><span class="sxs-lookup"><span data-stu-id="54353-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="54353-277">Soubor rozšíření kontrolu (jenom platnou sadu povolený typ měli accepted)</span><span class="sxs-lookup"><span data-stu-id="54353-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="54353-278">Maximální limit velikosti souboru</span><span class="sxs-lookup"><span data-stu-id="54353-278">Maximum file size limit</span></span></li><li><span data-ttu-id="54353-279">Soubor by neměl být nahrané toowebroot; Hello umístění musí být adresáře na nesystémové jednotky</span><span class="sxs-lookup"><span data-stu-id="54353-279">File should not be uploaded toowebroot; hello location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="54353-280">Zásady vytváření názvů musí být sledována, tak, aby hello nahrávaný soubor název měly některé náhodnost tak jako tooprevent přepíše soubor</span><span class="sxs-lookup"><span data-stu-id="54353-280">Naming convention should be followed, such that hello uploaded file name have some randomness, so as tooprevent file overwrites</span></span></li><li><span data-ttu-id="54353-281">Soubory by měl být kontrolována antivirový před zápisem toohello disku</span><span class="sxs-lookup"><span data-stu-id="54353-281">Files should be scanned for anti-virus before writing toohello disk</span></span></li><li><span data-ttu-id="54353-282">Aby se zajistilo hello název souboru a všechny další metadata (například cesta k souboru) ověření škodlivý znaků</span><span class="sxs-lookup"><span data-stu-id="54353-282">Ensure that hello file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="54353-283">Zkontrolovat podpis formát souboru, tooprevent uživatele z nahrávání masqueraded souboru (například odeslat soubor exe změnou tootxt rozšíření)</span><span class="sxs-lookup"><span data-stu-id="54353-283">File format signature should be checked, tooprevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension tootxt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="54353-284">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-284">Example</span></span>
<span data-ttu-id="54353-285">Hello posledního bodu týkající se ověřování podpisu formát souboru najdete v části toohello třída následující podrobnosti:</span><span class="sxs-lookup"><span data-stu-id="54353-285">For hello last point regarding file format signature validation, refer toohello class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="54353-286"><a id="typesafe"></a>Ujistěte se, jestli je pro přístup k datům ve webové aplikaci používají bezpečnost typů parametrů</span><span class="sxs-lookup"><span data-stu-id="54353-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="54353-287">Název</span><span class="sxs-lookup"><span data-stu-id="54353-287">Title</span></span>                   | <span data-ttu-id="54353-288">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-289">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-289">**Component**</span></span>               | <span data-ttu-id="54353-290">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-290">Web Application</span></span> | 
| <span data-ttu-id="54353-291">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-291">**SDL Phase**</span></span>               | <span data-ttu-id="54353-292">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-292">Build</span></span> |  
| <span data-ttu-id="54353-293">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-293">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-294">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-294">Generic</span></span> |
| <span data-ttu-id="54353-295">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-295">**Attributes**</span></span>              | <span data-ttu-id="54353-296">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-296">N/A</span></span>  |
| <span data-ttu-id="54353-297">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-297">**References**</span></span>              | <span data-ttu-id="54353-298">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-298">N/A</span></span>  |
| <span data-ttu-id="54353-299">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-299">**Steps**</span></span> | <p><span data-ttu-id="54353-300">Pokud používáte hello parametry kolekce, vstup hello vyhodnotí SQL je jako hodnotu literálu místo pak jako spustitelný kód.</span><span class="sxs-lookup"><span data-stu-id="54353-300">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="54353-301">Hello kolekce parametrů lze použít tooenforce typ a délku omezení na vstupní data.</span><span class="sxs-lookup"><span data-stu-id="54353-301">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="54353-302">Hodnoty mimo rozsah hello aktivovat výjimku.</span><span class="sxs-lookup"><span data-stu-id="54353-302">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="54353-303">Pokud se nepoužívají bezpečnost typů parametrů SQL, může být útočníci možné tooexecute vkládání útoků, které jsou součástí hello nefiltrovaná vstup.</span><span class="sxs-lookup"><span data-stu-id="54353-303">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="54353-304">Při vytváření SQL dotazuje tooavoid možné SQL vkládání útoků, které mohou nastat u nefiltrované vstup, použijte bezpečné parametry typu.</span><span class="sxs-lookup"><span data-stu-id="54353-304">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="54353-305">Parametry typu bezpečné můžete použít s uložené procedury a dynamických příkazů SQL.</span><span class="sxs-lookup"><span data-stu-id="54353-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="54353-306">Parametry jsou zpracovány jako literálových hodnot hello databáze a ne jako spustitelný kód.</span><span class="sxs-lookup"><span data-stu-id="54353-306">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="54353-307">Parametry jsou zaškrtnutá políčka, typ a délku.</span><span class="sxs-lookup"><span data-stu-id="54353-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="54353-308">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-308">Example</span></span> 
<span data-ttu-id="54353-309">Hello následující kód ukazuje, jak toouse bezpečné parametry typu s hello SqlParameterCollection při volání uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="54353-309">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="54353-310">V předchozím příkladu kódu hello hello vstupní hodnota nemůže být delší než 11 znaků.</span><span class="sxs-lookup"><span data-stu-id="54353-310">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="54353-311">Pokud hello data neodpovídá typu toohello nebo délka definované parametrem hello, hello SqlParameter třída vyvolá výjimku.</span><span class="sxs-lookup"><span data-stu-id="54353-311">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="54353-312"><a id="binding-mvc"></a>Používat samostatný model vazby třídy nebo filtr vazeb vypíše tooprevent MVC velkokapacitního přiřazení ohrožení zabezpečení</span><span class="sxs-lookup"><span data-stu-id="54353-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="54353-313">Název</span><span class="sxs-lookup"><span data-stu-id="54353-313">Title</span></span>                   | <span data-ttu-id="54353-314">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-315">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-315">**Component**</span></span>               | <span data-ttu-id="54353-316">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-316">Web Application</span></span> | 
| <span data-ttu-id="54353-317">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-317">**SDL Phase**</span></span>               | <span data-ttu-id="54353-318">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-318">Build</span></span> |  
| <span data-ttu-id="54353-319">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-319">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-320">MVC5 MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="54353-321">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-321">**Attributes**</span></span>              | <span data-ttu-id="54353-322">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-322">N/A</span></span>  |
| <span data-ttu-id="54353-323">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-323">**References**</span></span>              | <span data-ttu-id="54353-324">[Atributy metadat](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [veřejný klíč ohrožení zabezpečení a snížení rizika zabezpečení](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [tooMass kompletní Příručka pro přiřazení v aplikaci ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Začínáme s EF pomocí MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="54353-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide tooMass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="54353-325">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-325">**Steps**</span></span> | <ul><li><span data-ttu-id="54353-326">**Pokud by měl vypadat pro typu overpost ohrožení zabezpečení? -** Typu overpost ohrožení zabezpečení může dojít, všechny místní vázat třídy modelu ze vstupu uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="54353-327">Architektury, jako je MVC může představovat uživatelská data ve vlastní třídy rozhraní .NET, včetně prostý staré objekty CLR (POCOs).</span><span class="sxs-lookup"><span data-stu-id="54353-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="54353-328">MVC automaticky naplní tyto třídy modelu s daty z požadavku hello poskytuje pohodlné reprezentaci pro práci s vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-328">MVC automatically populates these model classes with data from hello request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="54353-329">Pokud tyto třídy obsahovat vlastnosti, které by neměl být nastavený uživatelem hello, hello aplikace může být snadno napadnutelný tooover zveřejňování útoků, které povolí uživatelský ovládací prvek dat, která aplikace hello nikdy určena.</span><span class="sxs-lookup"><span data-stu-id="54353-329">When these classes include properties that should not be set by hello user, hello application can be vulnerable tooover-posting attacks, which allow user control of data that hello application never intended.</span></span> <span data-ttu-id="54353-330">Jako vazby modelu MVC, například objekt nebo relační mappers jako Entity Framework technologie pro přístup k databázi často také podporují, pomocí dat objektů POCO objekty toorepresent databáze.</span><span class="sxs-lookup"><span data-stu-id="54353-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects toorepresent database data.</span></span> <span data-ttu-id="54353-331">Tyto třídy modelu dat poskytují hello stejné pohodlí při plánování práce s data databáze stejně MVC v práci s vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-331">These data model classes provide hello same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="54353-332">Vzhledem k tomu MVC a hello databáze podporují podobné modely jako objektů POCO, se zdá být snadno tooreuse hello stejné třídy pro oba účely.</span><span class="sxs-lookup"><span data-stu-id="54353-332">Because both MVC and hello database support similar models, like POCO objects, it seems easy tooreuse hello same classes for both purposes.</span></span> <span data-ttu-id="54353-333">Tento postup selže, toopreserve oddělení otázky ale je jeden běžné oblasti, kde nezamýšleným vlastnosti zveřejněné toomodel vazby, povolení přečerpání příspěvků útoky.</span><span class="sxs-lookup"><span data-stu-id="54353-333">This practice fails toopreserve separation of concerns, and it is one common area where unintended properties are exposed toomodel binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="54353-334">**Proč by neměl používat Můj třídy modelu nefiltrované databáze jako parametry toomy MVC akce? -** Vazby modelu MVC protože nic vazby v dané třídě.</span><span class="sxs-lookup"><span data-stu-id="54353-334">**Why shouldn't I use my unfiltered database model classes as parameters toomy MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="54353-335">I když hello data nezobrazí v zobrazení, že uživatel se zlými úmysly může odeslat požadavek HTTP s těmito daty zahrnuté a MVC bude Ochotně navázat jej protože akci říká, že třída databáze je tvar hello dat musí přijmout na vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-335">Even if hello data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is hello shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="54353-336">**Proč by měla vědět o hello tvaru používanou pro vazbu modelu? -** Vazby modelu pomocí ASP.NET MVC s příliš široká modely zpřístupní útoky tooover příspěvků aplikaci.</span><span class="sxs-lookup"><span data-stu-id="54353-336">**Why should I care about hello shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application tooover-posting attacks.</span></span> <span data-ttu-id="54353-337">Přečerpání příspěvků by mohl útočník toochange aplikace dat přesahující jaké hello vývojáře určený, jako je například přepsání hello ceny pro položku nebo hello zabezpečení oprávnění pro účet.</span><span class="sxs-lookup"><span data-stu-id="54353-337">Over-posting could enable attackers toochange application data beyond what hello developer intended, such as overriding hello price for an item or hello security privileges for an account.</span></span> <span data-ttu-id="54353-338">Aplikace by měly používat konkrétní akce vazby modelů (nebo seznamy filtrů určitou vlastnost povolené) tooprovide explicitní kontrakt, pro jaké nedůvěryhodné vstupní tooallow prostřednictvím vazby modelu.</span><span class="sxs-lookup"><span data-stu-id="54353-338">Applications should use action-specific binding models (or specific allowed property filter lists) tooprovide an explicit contract for what untrusted input tooallow via model binding.</span></span></li><li><span data-ttu-id="54353-339">**Má samostatnou vazbu modely právě duplikování kód? -** Ne, je otázka jsou oddělené oblasti zájmu.</span><span class="sxs-lookup"><span data-stu-id="54353-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="54353-340">Použijete-li opakovaně modely databáze v metody akce, můžete si všechny vlastnosti (nebo dílčí vlastnosti) třída může být nastavena uživatelem hello v požadavku HTTP.</span><span class="sxs-lookup"><span data-stu-id="54353-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by hello user in an HTTP request.</span></span> <span data-ttu-id="54353-341">Pokud nechcete MVC toodo, potřebujete seznam filtrů nebo samostatné třídy tvar tooshow MVC, jaká data mohou pocházet z místo vstupu uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-341">If that is not what you want MVC toodo, you need a filter list or a separate class shape tooshow MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="54353-342">**Pokud je nutné modely samostatnou vazbu na vstup uživatele, je nutné provést tooduplicate všechny moje atributy poznámky dat? -** Nemusí.</span><span class="sxs-lookup"><span data-stu-id="54353-342">**If I have separate binding models for user input, do I have tooduplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="54353-343">Můžete vytvořit MetadataTypeAttribute hello databáze třída toolink toohello metadat modelu na třídu vazby modelu.</span><span class="sxs-lookup"><span data-stu-id="54353-343">You can use MetadataTypeAttribute on hello database model class toolink toohello metadata on a model binding class.</span></span> <span data-ttu-id="54353-344">Jenom Všimněte si, že hello typ odkazuje hello MetadataTypeAttribute musí být podmnožinou hello odkazující na typ (může mít méně vlastností, ale ne více).</span><span class="sxs-lookup"><span data-stu-id="54353-344">Just note that hello type referenced by hello MetadataTypeAttribute must be a subset of hello referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="54353-345">**Přesunutí dat a zpět mezi modely vstupu uživatele a modely databáze je zdlouhavé. Je možné pouze kopírovat přes všechny vlastnosti pomocí reflexe? -** Ano.</span><span class="sxs-lookup"><span data-stu-id="54353-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="54353-346">Hello pouze vlastnosti, které se zobrazují v hello vazby modely jsou hello ty, které jsou zjistíte toobe bezpečné pro vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-346">hello only properties that appear in hello binding models are hello ones you have determined toobe safe for user input.</span></span> <span data-ttu-id="54353-347">Neexistuje žádný důvod zabezpečení, která zabraňuje pomocí reflexe toocopy přes všechny vlastnosti, které existují společné mezi tyto dva modely.</span><span class="sxs-lookup"><span data-stu-id="54353-347">There is no security reason that prevents using reflection toocopy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="54353-348">**Co se chystáte [Bind (vyloučit = "WinMgmt€ ¦")]. Můžete použít, místo nutnosti modely samostatnou vazbu? -** Tento přístup se nedoporučuje.</span><span class="sxs-lookup"><span data-stu-id="54353-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="54353-349">Použití [Bind (vyloučit = "WinMgmt€ ¦")] znamená, že se všechny nové vlastnosti vazbu ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="54353-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="54353-350">Při přidání nové vlastnosti je bezpečné další krok tooremember tookeep věcí, nikoli s hello návrhu se ve výchozím nastavení zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="54353-350">When a new property is added, there is an extra step tooremember tookeep things secure, rather than having hello design be secure by default.</span></span> <span data-ttu-id="54353-351">V závislosti na vývojáře hello pokaždé, když je vlastnost přidána kontrola tento seznam je rizikové.</span><span class="sxs-lookup"><span data-stu-id="54353-351">Depending on hello developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="54353-352">**Je [Bind (zahrnout = "WinMgmt€ ¦")] užitečné pro operace upravit? -** Ne.</span><span class="sxs-lookup"><span data-stu-id="54353-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="54353-353">[Bind (zahrnout = "WinMgmt€ ¦")] je vhodný pro operace INSERT stylu (přidání nových dat).</span><span class="sxs-lookup"><span data-stu-id="54353-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="54353-354">Operace aktualizace stylu (Úprava existující data) použijte jiný přístup, jako má samostatnou vazbu modely nebo předání explicitní seznam povolených vlastnosti tooUpdateModel nebo TryUpdateModel.</span><span class="sxs-lookup"><span data-stu-id="54353-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties tooUpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="54353-355">Přidání [Bind (zahrnout = "¦ €")] atribut u operace úpravy znamená, že MVC se vytvořit instanci objektu a nastavit jen hello uvedené vlastnosti, a všechny ostatní na jejich výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="54353-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only hello listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="54353-356">Při hello dat, nahradí zcela stávající entity hello resetování hello hodnoty pro všechny výchozí hodnoty tootheir vynechání vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="54353-356">When hello data is persisted, it will entirely replace hello existing entity, resetting hello values for any omitted properties tootheir defaults.</span></span> <span data-ttu-id="54353-357">Například, pokud byl IsAdmin vynechaný [Bind (zahrnout = "¦ €")] atribut u operace úpravy, každý uživatel, jehož název byl upraven přes tato akce by tooIsAdmin resetování = false (všechny upravená uživatel ztratí přihlášeni jako správce).</span><span class="sxs-lookup"><span data-stu-id="54353-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset tooIsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="54353-358">Pokud chcete tooprevent aktualizací toocertain vlastnosti, použijte jednu z hello jiné postupy výše.</span><span class="sxs-lookup"><span data-stu-id="54353-358">If you want tooprevent updates toocertain properties, use one of hello other approaches above.</span></span> <span data-ttu-id="54353-359">Všimněte si, že některé verze nástrojů pro MVC generovat řadiče tříd pomocí [Bind (zahrnout = "¦ €")] upravit akce a neznamená, že odebrání vlastnosti z tohoto seznamu, bude zabránit útokům přečerpání účtování.</span><span class="sxs-lookup"><span data-stu-id="54353-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="54353-360">Ale jak je popsáno výše, nefunguje tak, jak má tento přístup a místo toho resetuje všechna data v hello vynechání vlastnosti tootheir výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="54353-360">However, as described above, that approach does not work as intended and instead will reset any data in hello omitted properties tootheir default values.</span></span></li><li><span data-ttu-id="54353-361">**Pro operace vytvoření, existují jakékoli upozornění pomocí [Bind (zahrnout = "WinMgmt€ ¦")] místo modely samostatnou vazbu? -** Ano.</span><span class="sxs-lookup"><span data-stu-id="54353-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="54353-362">Nejprve tento přístup nefunguje pro scénářům, úpravy, které vyžadují zachování dva samostatné přístupy pro minimalizaci všechna ohrožení zabezpečení přečerpání příspěvků.</span><span class="sxs-lookup"><span data-stu-id="54353-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="54353-363">Druhou, samostatnou vazbu modely vynutit oddělené oblasti zájmu mezi hello tvaru používanou pro vstup a hello tvar uživatele používané pro trvalost, něco [Bind (zahrnout = "WinMgmt€ ¦")] neprovádí.</span><span class="sxs-lookup"><span data-stu-id="54353-363">Second, separate binding models enforce separation of concerns between hello shape used for user input and hello shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="54353-364">Třetí, Všimněte si, že [Bind (zahrnout = "WinMgmt€ ¦")] lze zpracovat pouze nejvyšší úrovně vlastnosti; v atributu hello nemůže povolit jenom části dílčí vlastnosti (například "Details.Name").</span><span class="sxs-lookup"><span data-stu-id="54353-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in hello attribute.</span></span> <span data-ttu-id="54353-365">Nakonec a případně co je nejdůležitější – pomocí [Bind (zahrnout = "WinMgmt€ ¦")] Přidá další krok, který musí mít na paměti, všechny time hello třída se používá pro vazbu modelu.</span><span class="sxs-lookup"><span data-stu-id="54353-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time hello class is used for model binding.</span></span> <span data-ttu-id="54353-366">Pokud nové metody akce váže třída dat toohello přímo a zapomene tooinclude [vazby (zahrnout = "¦ €")] atribut, mohou být zranitelné v důsledku tooover zveřejňování útoky, takže hello [Bind (zahrnout = "¦ €")] přístup je méně zabezpečené ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="54353-366">If a new action method binds toohello data class directly and forgets tooinclude a [Bind(Include ="â€¦")] attribute, it can be vulnerable tooover-posting attacks, so hello [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="54353-367">Pokud používáte [Bind (zahrnout = "WinMgmt€ ¦")], tooremember toospecify vždy postará se pokaždé, když vaše data třídy se zobrazí jako parametry metody akce.</span><span class="sxs-lookup"><span data-stu-id="54353-367">If you use [Bind(Include ="â€¦")], take care always tooremember toospecify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="54353-368">**Pro operace vytvoření, co o spojování hello [Bind (zahrnout = "WinMgmt€ ¦")] atributu na vlastní třídy modelu hello? Není tento přístup vyhnout hello nutné tooremember uváděním hello atribut na každou metodu akce? -** Tento postup funguje v některých případech.</span><span class="sxs-lookup"><span data-stu-id="54353-368">**For Create operations, what about putting hello [Bind(Include ="â€¦")] attribute on hello model class itself? Does not this approach avoid hello need tooremember putting hello attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="54353-369">Pomocí [Bind (zahrnout = "WinMgmt€ ¦")] na vlastní typ modelu hello (ne na parametry akci pomocí této třídy), vyhněte se hello nutné tooremember tooinclude hello [Bind (zahrnout = "WinMgmt€ ¦")] atribut na každou metodu akce.</span><span class="sxs-lookup"><span data-stu-id="54353-369">Using [Bind(Include ="â€¦")] on hello model type itself (rather than on action parameters using this class), does avoid hello need tooremember tooinclude hello [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="54353-370">Pomocí atributu hello přímo na třídě hello efektivně vytvoří samostatné oblasti plochy této třídy pro účely vazby modelu.</span><span class="sxs-lookup"><span data-stu-id="54353-370">Using hello attribute directly on hello class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="54353-371">Však tento přístup umožňuje pouze pro jeden tvar vazby modelu za třídu modelu.</span><span class="sxs-lookup"><span data-stu-id="54353-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="54353-372">Pokud musí jedna metoda akce vazby modelu tooallow pole (například pouze správce akci, která aktualizuje rolí uživatele) a další akce musí vazby modelu tooprevent tohoto pole, tento postup nebude fungovat.</span><span class="sxs-lookup"><span data-stu-id="54353-372">If one action method needs tooallow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need tooprevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="54353-373">Každá třída může mít pouze jeden tvar vazby modelu; Pokud různé akce potřebovat tvarů vazbu jiného modelu, které potřebují toorepresent tyto samostatné obrazců pomocí třídy vazby buď samostatné modelu nebo oddělení [Bind (zahrnout = "WinMgmt€ ¦")] atributů na hello metody akce.</span><span class="sxs-lookup"><span data-stu-id="54353-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need toorepresent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on hello action methods.</span></span></li><li><span data-ttu-id="54353-374">**Co jsou vazby modelů? Jsou že jejich hello samé jako Zobrazit modely? -** Toto jsou dva související koncepty.</span><span class="sxs-lookup"><span data-stu-id="54353-374">**What are binding models? Are they hello same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="54353-375">termín Hello odkazuje vazba modelu tooa modelu třída používaná v akce je seznam parametrů (hello tvaru předat z metody akce toohello vazby modelu MVC).</span><span class="sxs-lookup"><span data-stu-id="54353-375">hello term binding model refers tooa model class used in an action is parameter list (hello shape passed from MVC model binding toohello action method).</span></span> <span data-ttu-id="54353-376">model zobrazení termín Hello odkazuje třídu modelu tooa předán ze zobrazení tooa metoda akce.</span><span class="sxs-lookup"><span data-stu-id="54353-376">hello term view model refers tooa model class passed from an action method tooa view.</span></span> <span data-ttu-id="54353-377">Použití modelu specifické pro zobrazení je běžný postup pro předávání dat ze zobrazení tooa metoda akce.</span><span class="sxs-lookup"><span data-stu-id="54353-377">Using a view-specific model is a common approach for passing data from an action method tooa view.</span></span> <span data-ttu-id="54353-378">Často tento tvar je také vhodná pro vazby modelu a modelu zobrazení hello podmínek může být použité toorefer hello používá stejný model na obou místech.</span><span class="sxs-lookup"><span data-stu-id="54353-378">Often, this shape is also suitable for model binding, and hello term view model can be used toorefer hello same model used in both places.</span></span> <span data-ttu-id="54353-379">toobe přesné, tento postup bude zmíněn konkrétně vazby modely, které jsou zaměřené na tvar hello předán toohello akce, která je to důležité pro účely velkokapacitního přiřazení.</span><span class="sxs-lookup"><span data-stu-id="54353-379">toobe precise, this procedure talks specifically about binding models, focusing on hello shape passed toohello action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="54353-380"><a id="rendering"></a>Kódování předchozí toorendering nedůvěryhodné webové výstup</span><span class="sxs-lookup"><span data-stu-id="54353-380"><a id="rendering"></a>Encode untrusted web output prior toorendering</span></span>

| <span data-ttu-id="54353-381">Název</span><span class="sxs-lookup"><span data-stu-id="54353-381">Title</span></span>                   | <span data-ttu-id="54353-382">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-383">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-383">**Component**</span></span>               | <span data-ttu-id="54353-384">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-384">Web Application</span></span> | 
| <span data-ttu-id="54353-385">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-385">**SDL Phase**</span></span>               | <span data-ttu-id="54353-386">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-386">Build</span></span> |  
| <span data-ttu-id="54353-387">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-387">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-388">Obecné, webových formulářů, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="54353-389">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-389">**Attributes**</span></span>              | <span data-ttu-id="54353-390">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-390">N/A</span></span>  |
| <span data-ttu-id="54353-391">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-391">**References**</span></span>              | <span data-ttu-id="54353-392">[Jak tooprevent webů skriptování v technologii ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [skriptování mezi](http://cwe.mitre.org/data/definitions/79.html), [list cheaty prevence XSS (skriptování mezi weby)](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="54353-392">[How tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="54353-393">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-393">**Steps**</span></span> | <span data-ttu-id="54353-394">Skriptování mezi (často se používá zkratka jako XSS) je způsob útoku pro online služby nebo jakékoli aplikace nebo součásti, která využívá vstup z webové hello.</span><span class="sxs-lookup"><span data-stu-id="54353-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from hello web.</span></span> <span data-ttu-id="54353-395">Skriptování XSS může útočníkovi tooexecute skriptu v počítači jiného uživatele prostřednictvím ohrožené webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="54353-395">XSS vulnerabilities may allow an attacker tooexecute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="54353-396">Škodlivých skriptů může být toosteal použité soubory cookie a jinak manipulovat s počítači napadeného počítače prostřednictvím jazyka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="54353-396">Malicious scripts can be used toosteal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="54353-397">XSS brání ověřování uživatelského vstupu, zajistíte, že je správně vytvořen a kódování před vykreslením na webové stránce.</span><span class="sxs-lookup"><span data-stu-id="54353-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="54353-398">Pomocí webové ochrany knihovny lze provést ověření vstupu a výstupu kódování.</span><span class="sxs-lookup"><span data-stu-id="54353-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="54353-399">Pro spravovaný kód (C\#, VB.net, atd.), použít jeden nebo více vhodné kódování metody z hello knihovny webové ochrany (Anti-XSS), v závislosti na kontextu hello kde získá označované hello uživatelský vstup:</span><span class="sxs-lookup"><span data-stu-id="54353-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from hello Web Protection (Anti-XSS) Library, depending on hello context where hello user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="54353-400">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="54353-401"><a id="typemodel"></a>Provedení ověření vstupu a filtrování u všech řetězec typu vlastnosti modelu</span><span class="sxs-lookup"><span data-stu-id="54353-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="54353-402">Název</span><span class="sxs-lookup"><span data-stu-id="54353-402">Title</span></span>                   | <span data-ttu-id="54353-403">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-404">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-404">**Component**</span></span>               | <span data-ttu-id="54353-405">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-405">Web Application</span></span> | 
| <span data-ttu-id="54353-406">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-406">**SDL Phase**</span></span>               | <span data-ttu-id="54353-407">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-407">Build</span></span> |  
| <span data-ttu-id="54353-408">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-408">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-409">Obecné, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="54353-410">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-410">**Attributes**</span></span>              | <span data-ttu-id="54353-411">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-411">N/A</span></span>  |
| <span data-ttu-id="54353-412">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-412">**References**</span></span>              | <span data-ttu-id="54353-413">[Přidání ověřování](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [ověřování modelu dat v aplikaci MVC](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [hlavní zásady pro vaše aplikace ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="54353-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="54353-414">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-414">**Steps**</span></span> | <p><span data-ttu-id="54353-415">Všechny hello vstupní parametry musí být ověřený, než jsou použity v tooensure aplikace hello, aplikace hello zabezpečení proti vstupy uživatel se zlými úmysly.</span><span class="sxs-lookup"><span data-stu-id="54353-415">All hello input parameters must be validated before they are used in hello application tooensure that hello application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="54353-416">Ověření hello vstupní hodnoty pomocí regulárního výrazu ověření na straně serveru s strategie ověření seznamu povolených IP adres.</span><span class="sxs-lookup"><span data-stu-id="54353-416">Validate hello input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="54353-417">Unsanitized uživatelské vstupy / parametry předané metody toohello, může způsobit kódu chyby vkládání.</span><span class="sxs-lookup"><span data-stu-id="54353-417">Unsanitized user inputs / parameters passed toohello methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="54353-418">Pro webové aplikace vstupní body zahrnují také polí formuláře, QueryStrings, soubory cookie, hlaviček protokolu HTTP a parametry webové služby.</span><span class="sxs-lookup"><span data-stu-id="54353-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="54353-419">Následující kontroly ověření vstupu Hello musí provést při vazby modelu:</span><span class="sxs-lookup"><span data-stu-id="54353-419">hello following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="54353-420">Vlastnosti modelu Hello by měl být označený poznámkou s poznámkou regulární výraz pro přijetí povolený počet znaků a maximální povolenou délku</span><span class="sxs-lookup"><span data-stu-id="54353-420">hello model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="54353-421">metody kontroleru Hello proveďte ModelState platnosti</span><span class="sxs-lookup"><span data-stu-id="54353-421">hello controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="54353-422"><a id="richtext"></a>Čištění bude použito na pole formuláře, které přijímají všechny znaky, např, bohaté textového editoru</span><span class="sxs-lookup"><span data-stu-id="54353-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="54353-423">Název</span><span class="sxs-lookup"><span data-stu-id="54353-423">Title</span></span>                   | <span data-ttu-id="54353-424">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-425">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-425">**Component**</span></span>               | <span data-ttu-id="54353-426">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-426">Web Application</span></span> | 
| <span data-ttu-id="54353-427">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-427">**SDL Phase**</span></span>               | <span data-ttu-id="54353-428">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-428">Build</span></span> |  
| <span data-ttu-id="54353-429">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-429">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-430">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-430">Generic</span></span> |
| <span data-ttu-id="54353-431">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-431">**Attributes**</span></span>              | <span data-ttu-id="54353-432">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-432">N/A</span></span>  |
| <span data-ttu-id="54353-433">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-433">**References**</span></span>              | <span data-ttu-id="54353-434">[Kódování Unsafe vstup](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizér](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="54353-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="54353-435">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-435">**Steps**</span></span> | <p><span data-ttu-id="54353-436">Identifikujte všechny značky statické značek, které chcete toouse.</span><span class="sxs-lookup"><span data-stu-id="54353-436">Identify all static markup tags that you want toouse.</span></span> <span data-ttu-id="54353-437">Běžnou praxí je toorestrict formátování toosafe HTML prvky, jako například `<b>` (tučné) a `<i>` (kurzíva).</span><span class="sxs-lookup"><span data-stu-id="54353-437">A common practice is toorestrict formatting toosafe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="54353-438">Před zápisem hello data, kódování HTML ho.</span><span class="sxs-lookup"><span data-stu-id="54353-438">Before writing hello data, HTML-encode it.</span></span> <span data-ttu-id="54353-439">Tato díky všech škodlivý skriptů bezpečné tím, že ho na toobe spravovány jako text, ne jako spustitelný kód.</span><span class="sxs-lookup"><span data-stu-id="54353-439">This makes any malicious script safe by causing it toobe handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="54353-440">Zakázat žádost ASP.NET ověření přidáním hello hello ValidateRequest = "false" atribut toohello @ Page – direktiva</span><span class="sxs-lookup"><span data-stu-id="54353-440">Disable ASP.NET request validation by hello adding hello ValidateRequest="false" attribute toohello @ Page directive</span></span></li><li><span data-ttu-id="54353-441">Kódování hello vstupní řetězec pomocí metody HtmlEncode hello</span><span class="sxs-lookup"><span data-stu-id="54353-441">Encode hello string input with hello HtmlEncode method</span></span></li><li><span data-ttu-id="54353-442">Použití StringBuilder a jeho tooselectively metoda nahradit odebrat hello kódování u elementů hello HTML, které chcete toopermit volání</span><span class="sxs-lookup"><span data-stu-id="54353-442">Use a StringBuilder and call its Replace method tooselectively remove hello encoding on hello HTML elements that you want toopermit</span></span></li></ol><p><span data-ttu-id="54353-443">Hello odkazů na stránky v hello zakáže ověření požadavku ASP.NET nastavením `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="54353-443">hello page-in hello references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="54353-444">Ji umístí kódování HTML hello vstup a umožňuje selektivně hello `<b>` a `<i>` Alternativně knihovny .NET pro čištění HTML mohou být využity také.</span><span class="sxs-lookup"><span data-stu-id="54353-444">It HTML-encodes hello input and selectively allows hello `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="54353-445">HtmlSanitizer je knihovna pro .NET pro čištění fragmentů kódu HTML a dokumenty z konstrukce, které můžou vést útoky tooXSS.</span><span class="sxs-lookup"><span data-stu-id="54353-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead tooXSS attacks.</span></span> <span data-ttu-id="54353-446">Používá AngleSharp tooparse, manipulaci a vykreslení HTML a CSS.</span><span class="sxs-lookup"><span data-stu-id="54353-446">It uses AngleSharp tooparse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="54353-447">HtmlSanitizer je možné nainstalovat jako balíčku NuGet a hello uživatelský vstup může být předána relevantní HTML nebo šablon stylů CSS čištění metody, jako příslušné na straně serveru hello.</span><span class="sxs-lookup"><span data-stu-id="54353-447">HtmlSanitizer can be installed as a NuGet package, and hello user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on hello server side.</span></span> <span data-ttu-id="54353-448">Upozorňujeme, který čištění jako ovládací prvek zabezpečení by měl být považován za pouze jako poslední možnost.</span><span class="sxs-lookup"><span data-stu-id="54353-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="54353-449">Ověření vstupu a výstupu kódování jsou považovány za lepší kontrolních mechanismů pro zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="54353-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="54353-450"><a id="inbuilt-encode"></a>Nepřiřazujte toosinks DOM elementy, které nemají integrované kódování</span><span class="sxs-lookup"><span data-stu-id="54353-450"><a id="inbuilt-encode"></a>Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="54353-451">Název</span><span class="sxs-lookup"><span data-stu-id="54353-451">Title</span></span>                   | <span data-ttu-id="54353-452">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-453">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-453">**Component**</span></span>               | <span data-ttu-id="54353-454">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-454">Web Application</span></span> | 
| <span data-ttu-id="54353-455">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-455">**SDL Phase**</span></span>               | <span data-ttu-id="54353-456">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-456">Build</span></span> |  
| <span data-ttu-id="54353-457">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-457">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-458">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-458">Generic</span></span> |
| <span data-ttu-id="54353-459">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-459">**Attributes**</span></span>              | <span data-ttu-id="54353-460">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-460">N/A</span></span>  |
| <span data-ttu-id="54353-461">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-461">**References**</span></span>              | <span data-ttu-id="54353-462">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-462">N/A</span></span>  |
| <span data-ttu-id="54353-463">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-463">**Steps**</span></span> | <span data-ttu-id="54353-464">Mnoho funkcí javascript nedělají nic kódování ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="54353-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="54353-465">Při přiřazování nedůvěryhodné vstupní tooDOM elementy prostřednictvím takové funkce, může vést k křížové spouštění skriptů (XSS) lokality.</span><span class="sxs-lookup"><span data-stu-id="54353-465">When assigning untrusted input tooDOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="54353-466">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-466">Example</span></span>
<span data-ttu-id="54353-467">Následuje několik příkladů, nezabezpečené:</span><span class="sxs-lookup"><span data-stu-id="54353-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="54353-468">Nepoužívejte `innerHtml`; místo toho použijte `innerText`.</span><span class="sxs-lookup"><span data-stu-id="54353-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="54353-469">Podobně, místo provedení `$("#elm").html()`, použijte`$("#elm").text()`</span><span class="sxs-lookup"><span data-stu-id="54353-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="54353-470"><a id="redirect-safe"></a>Ověřit, zda všechny jsou uzavřeny nebo bezpečně provést přesměrování v rámci aplikace hello</span><span class="sxs-lookup"><span data-stu-id="54353-470"><a id="redirect-safe"></a>Validate all redirects within hello application are closed or done safely</span></span>

| <span data-ttu-id="54353-471">Název</span><span class="sxs-lookup"><span data-stu-id="54353-471">Title</span></span>                   | <span data-ttu-id="54353-472">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-473">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-473">**Component**</span></span>               | <span data-ttu-id="54353-474">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-474">Web Application</span></span> | 
| <span data-ttu-id="54353-475">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-475">**SDL Phase**</span></span>               | <span data-ttu-id="54353-476">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-476">Build</span></span> |  
| <span data-ttu-id="54353-477">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-477">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-478">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-478">Generic</span></span> |
| <span data-ttu-id="54353-479">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-479">**Attributes**</span></span>              | <span data-ttu-id="54353-480">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-480">N/A</span></span>  |
| <span data-ttu-id="54353-481">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-481">**References**</span></span>              | [<span data-ttu-id="54353-482">Hello Framework autorizace OAuth 2.0 - otevřete přesměrovačů</span><span class="sxs-lookup"><span data-stu-id="54353-482">hello OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="54353-483">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-483">**Steps**</span></span> | <p><span data-ttu-id="54353-484">Návrh aplikace, které vyžadují přesměrování tooa uživatelem zadané umístění musí omezit hello možné přesměrování cíle tooa předdefinovaného "bezpečnou" seznamu sítě nebo domény.</span><span class="sxs-lookup"><span data-stu-id="54353-484">Application design requiring redirection tooa user-supplied location must constrain hello possible redirection targets tooa predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="54353-485">Všechny přesměrování aplikace hello musí být uzavřen nebo bezpečné.</span><span class="sxs-lookup"><span data-stu-id="54353-485">All redirects in hello application must be closed/safe.</span></span></p><p><span data-ttu-id="54353-486">toodo toto:</span><span class="sxs-lookup"><span data-stu-id="54353-486">toodo this:</span></span></p><ul><li><span data-ttu-id="54353-487">Identifikujte všechny přesměrování</span><span class="sxs-lookup"><span data-stu-id="54353-487">Identify all redirects</span></span></li><li><span data-ttu-id="54353-488">Implementujte příslušné zmírnění dopadů pro každou funkci přesměrování.</span><span class="sxs-lookup"><span data-stu-id="54353-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="54353-489">Odpovídající jejich zmírnění zahrnují přesměrování potvrzení seznamu povolených IP adres nebo uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="54353-490">Pokud webové stránky nebo služby s chybou otevřete přesměrování umožňující používá zprostředkovatelů identity Facebook nebo OAuth/OpenID, může útočník ukrást token přihlášení uživatele a zosobnit uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="54353-491">To je nese riziko při použití OAuth, které jsou uvedené v RFC 6749 "hello Framework autorizace OAuth 2.0", podobně jako část 10.15 "otevřete přesměruje", přihlašovací údaje uživatelů můžete ohroženy útoky spear phishing pomocí otevřete přesměrování</span><span class="sxs-lookup"><span data-stu-id="54353-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "hello OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="54353-492"><a id="string-method"></a>Implementace ověření vstupu na všechny parametry typu řetězec akceptovat metody Kontroleru</span><span class="sxs-lookup"><span data-stu-id="54353-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="54353-493">Název</span><span class="sxs-lookup"><span data-stu-id="54353-493">Title</span></span>                   | <span data-ttu-id="54353-494">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-495">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-495">**Component**</span></span>               | <span data-ttu-id="54353-496">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-496">Web Application</span></span> | 
| <span data-ttu-id="54353-497">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-497">**SDL Phase**</span></span>               | <span data-ttu-id="54353-498">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-498">Build</span></span> |  
| <span data-ttu-id="54353-499">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-499">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-500">Obecné, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="54353-501">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-501">**Attributes**</span></span>              | <span data-ttu-id="54353-502">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-502">N/A</span></span>  |
| <span data-ttu-id="54353-503">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-503">**References**</span></span>              | <span data-ttu-id="54353-504">[Ověřování dat modelu v aplikaci MVC](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [hlavní zásady pro vaše aplikace ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="54353-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="54353-505">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-505">**Steps**</span></span> | <span data-ttu-id="54353-506">Pro metody, které právě přijímají primitivní datový typ a ne modely jako argument by mělo být provedeno ověření vstupu pomocí regulárního výrazu.</span><span class="sxs-lookup"><span data-stu-id="54353-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="54353-507">Regex.IsMatch – v tomto poli musí být použit s vzor platný regulární výraz.</span><span class="sxs-lookup"><span data-stu-id="54353-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="54353-508">Pokud vstup hello neodpovídá hello určený regulární výraz, řízení neměli pokračovat a má být zobrazena odpovídajícího upozornění týkající se chyby ověření.</span><span class="sxs-lookup"><span data-stu-id="54353-508">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="54353-509"><a id="dos-expression"></a>Nastavit časový limit horní limit pro regulární výraz zpracování tooprevent DoS z důvodu toobad regulární výrazy</span><span class="sxs-lookup"><span data-stu-id="54353-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>

| <span data-ttu-id="54353-510">Název</span><span class="sxs-lookup"><span data-stu-id="54353-510">Title</span></span>                   | <span data-ttu-id="54353-511">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-512">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-512">**Component**</span></span>               | <span data-ttu-id="54353-513">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-513">Web Application</span></span> | 
| <span data-ttu-id="54353-514">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-514">**SDL Phase**</span></span>               | <span data-ttu-id="54353-515">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-515">Build</span></span> |  
| <span data-ttu-id="54353-516">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-516">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-517">Obecné, webových formulářů, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="54353-518">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-518">**Attributes**</span></span>              | <span data-ttu-id="54353-519">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-519">N/A</span></span>  |
| <span data-ttu-id="54353-520">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-520">**References**</span></span>              | [<span data-ttu-id="54353-521">Vlastnost DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="54353-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="54353-522">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-522">**Steps**</span></span> | <span data-ttu-id="54353-523">útoků tooensure DOS proti chybně vytvořen regulární výrazy, které způsobí mnoho zpětné navracení, nastavte hello globální výchozí časový limit.</span><span class="sxs-lookup"><span data-stu-id="54353-523">tooensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set hello global default timeout.</span></span> <span data-ttu-id="54353-524">Pokud doba zpracování hello trvá déle, než hello definované horní limit, by vyvolat výjimku časového limitu.</span><span class="sxs-lookup"><span data-stu-id="54353-524">If hello processing time takes longer than hello defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="54353-525">Pokud je nakonfigurovaná nic, by nekonečné hello vypršení časového limitu.</span><span class="sxs-lookup"><span data-stu-id="54353-525">If nothing is configured, hello timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="54353-526">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-526">Example</span></span>
<span data-ttu-id="54353-527">Například hello následující konfiguraci vyvolá RegexMatchTimeoutException, pokud se zpracování hello trvá déle než 5 sekund:</span><span class="sxs-lookup"><span data-stu-id="54353-527">For example, hello following configuration will throw a RegexMatchTimeoutException, if hello processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="54353-528"><a id="html-razor"></a>Nepoužívejte Html.Raw v zobrazení syntaxe Razor</span><span class="sxs-lookup"><span data-stu-id="54353-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="54353-529">Název</span><span class="sxs-lookup"><span data-stu-id="54353-529">Title</span></span>                   | <span data-ttu-id="54353-530">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-531">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-531">**Component**</span></span>               | <span data-ttu-id="54353-532">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="54353-532">Web Application</span></span> | 
| <span data-ttu-id="54353-533">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-533">**SDL Phase**</span></span>               | <span data-ttu-id="54353-534">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-534">Build</span></span> |  
| <span data-ttu-id="54353-535">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-535">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-536">MVC5 MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="54353-537">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-537">**Attributes**</span></span>              | <span data-ttu-id="54353-538">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-538">N/A</span></span>  |
| <span data-ttu-id="54353-539">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-539">**References**</span></span>              | <span data-ttu-id="54353-540">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-540">N/A</span></span>  |
| <span data-ttu-id="54353-541">Krok</span><span class="sxs-lookup"><span data-stu-id="54353-541">Step</span></span> | <span data-ttu-id="54353-542">Webových stránek ASP.Net (Razor) provést automatické kódování HTML.</span><span class="sxs-lookup"><span data-stu-id="54353-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="54353-543">Všechny řetězce tištěné útržky vloženého kódu (@ bloky) jsou automaticky kódovaný jazykem HTML.</span><span class="sxs-lookup"><span data-stu-id="54353-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="54353-544">Ale když `HtmlHelper.Raw` metoda je volána, vrátí kód, který není kódován jazykem HTML.</span><span class="sxs-lookup"><span data-stu-id="54353-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="54353-545">Pokud `Html.Raw()` Pomocná metoda se používá, obchází hello automatické kódování ochrany, která poskytuje Razor.</span><span class="sxs-lookup"><span data-stu-id="54353-545">If `Html.Raw()` helper method is used, it bypasses hello automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="54353-546">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-546">Example</span></span>
<span data-ttu-id="54353-547">Tady je příklad nezabezpečené:</span><span class="sxs-lookup"><span data-stu-id="54353-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="54353-548">Nepoužívejte `Html.Raw()` Pokud potřebujete toodisplay značek.</span><span class="sxs-lookup"><span data-stu-id="54353-548">Do not use `Html.Raw()` unless you need toodisplay markup.</span></span> <span data-ttu-id="54353-549">Tato metoda neprovádí kódování implicitně výstup.</span><span class="sxs-lookup"><span data-stu-id="54353-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="54353-550">Například použijte další Pomocníci ASP.NET`@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="54353-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="54353-551"><a id="stored-proc"></a>Nepoužívejte dynamické dotazy v uložené procedury</span><span class="sxs-lookup"><span data-stu-id="54353-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="54353-552">Název</span><span class="sxs-lookup"><span data-stu-id="54353-552">Title</span></span>                   | <span data-ttu-id="54353-553">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-554">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-554">**Component**</span></span>               | <span data-ttu-id="54353-555">Databáze</span><span class="sxs-lookup"><span data-stu-id="54353-555">Database</span></span> | 
| <span data-ttu-id="54353-556">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-556">**SDL Phase**</span></span>               | <span data-ttu-id="54353-557">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-557">Build</span></span> |  
| <span data-ttu-id="54353-558">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-558">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-559">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-559">Generic</span></span> |
| <span data-ttu-id="54353-560">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-560">**Attributes**</span></span>              | <span data-ttu-id="54353-561">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-561">N/A</span></span>  |
| <span data-ttu-id="54353-562">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-562">**References**</span></span>              | <span data-ttu-id="54353-563">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-563">N/A</span></span>  |
| <span data-ttu-id="54353-564">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-564">**Steps**</span></span> | <p><span data-ttu-id="54353-565">Útok prostřednictvím injektáže SQL zneužije chyby zabezpečení v libovolné příkazy toorun ověření vstupu v databázi hello.</span><span class="sxs-lookup"><span data-stu-id="54353-565">A SQL injection attack exploits vulnerabilities in input validation toorun arbitrary commands in hello database.</span></span> <span data-ttu-id="54353-566">Ho může dojít, když vaše aplikace používá vstupní tooconstruct dynamické, že tooaccess příkazy SQL hello databáze.</span><span class="sxs-lookup"><span data-stu-id="54353-566">It can occur when your application uses input tooconstruct dynamic SQL statements tooaccess hello database.</span></span> <span data-ttu-id="54353-567">Může také dojít, pokud kód používá uložené procedury, které se předávají řetězce, které obsahují nezpracovaná uživatelský vstup.</span><span class="sxs-lookup"><span data-stu-id="54353-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="54353-568">Pomocí hello útok prostřednictvím injektáže SQL, hello útočník může spustit libovolný příkazy v databázi hello.</span><span class="sxs-lookup"><span data-stu-id="54353-568">Using hello SQL injection attack, hello attacker can execute arbitrary commands in hello database.</span></span> <span data-ttu-id="54353-569">Všechny příkazy SQL (včetně příkazů SQL hello v uložené procedury) musí být parametry.</span><span class="sxs-lookup"><span data-stu-id="54353-569">All SQL statements (including hello SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="54353-570">Parametrizované příkazy SQL, bude přijímat znaků, které mají zvláštní význam tooSQL (např. jednoduchých uvozovkách) bez problémů, protože jsou silného typu.</span><span class="sxs-lookup"><span data-stu-id="54353-570">Parameterized SQL statements will accept characters that have special meaning tooSQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="54353-571">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-571">Example</span></span>
<span data-ttu-id="54353-572">Následuje příklad nezabezpečené dynamické uloženou proceduru:</span><span class="sxs-lookup"><span data-stu-id="54353-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="54353-573">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-573">Example</span></span>
<span data-ttu-id="54353-574">Toto je stejný uložené procedury implementována bezpečně hello:</span><span class="sxs-lookup"><span data-stu-id="54353-574">Following is hello same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="54353-575"><a id="validation-api"></a>Zajistit, aby ověření modelu pro metody webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="54353-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="54353-576">Název</span><span class="sxs-lookup"><span data-stu-id="54353-576">Title</span></span>                   | <span data-ttu-id="54353-577">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-578">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-578">**Component**</span></span>               | <span data-ttu-id="54353-579">Web API</span><span class="sxs-lookup"><span data-stu-id="54353-579">Web API</span></span> | 
| <span data-ttu-id="54353-580">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-580">**SDL Phase**</span></span>               | <span data-ttu-id="54353-581">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-581">Build</span></span> |  
| <span data-ttu-id="54353-582">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-582">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-583">MVC5 MVC6</span><span class="sxs-lookup"><span data-stu-id="54353-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="54353-584">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-584">**Attributes**</span></span>              | <span data-ttu-id="54353-585">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-585">N/A</span></span>  |
| <span data-ttu-id="54353-586">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-586">**References**</span></span>              | [<span data-ttu-id="54353-587">Ověření modelu v rozhraní ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="54353-587">Model Validation in ASP.NET Web API </span></span>](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) |
| <span data-ttu-id="54353-588">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-588">**Steps**</span></span> | <span data-ttu-id="54353-589">Když klient odešle data tooa webové rozhraní API, je povinné toovalidate hello data před provedením jakékoli zpracovávání.</span><span class="sxs-lookup"><span data-stu-id="54353-589">When a client sends data tooa web API, it is mandatory toovalidate hello data before doing any processing.</span></span> <span data-ttu-id="54353-590">Pro rozhraní ASP.NET Web API, kterou přijmout modely jako vstup, pomocí datových poznámek na modely tooset ověřovací pravidla ve vlastnostech hello hello modelu.</span><span class="sxs-lookup"><span data-stu-id="54353-590">For ASP.NET Web APIs which accept models as input, use data annotations on models tooset validation rules on hello properties of hello model.</span></span>|

### <a name="example"></a><span data-ttu-id="54353-591">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-591">Example</span></span>
<span data-ttu-id="54353-592">Hello následující kód ukazuje hello stejné:</span><span class="sxs-lookup"><span data-stu-id="54353-592">hello following code demonstrates hello same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="54353-593">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-593">Example</span></span>
<span data-ttu-id="54353-594">V metodě akce hello řadičů hello rozhraní API má platnosti hello modelu toobe explicitně zaškrtnuto, jak je uvedeno níže:</span><span class="sxs-lookup"><span data-stu-id="54353-594">In hello action method of hello API controllers, validity of hello model has toobe explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with hello product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="54353-595"><a id="string-api"></a>Implementace ověření vstupu na všechny parametry typu řetězec přijata metodami webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="54353-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="54353-596">Název</span><span class="sxs-lookup"><span data-stu-id="54353-596">Title</span></span>                   | <span data-ttu-id="54353-597">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-598">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-598">**Component**</span></span>               | <span data-ttu-id="54353-599">Web API</span><span class="sxs-lookup"><span data-stu-id="54353-599">Web API</span></span> | 
| <span data-ttu-id="54353-600">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-600">**SDL Phase**</span></span>               | <span data-ttu-id="54353-601">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-601">Build</span></span> |  
| <span data-ttu-id="54353-602">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-602">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-603">Obecné, MVC 5, 6 MVC</span><span class="sxs-lookup"><span data-stu-id="54353-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="54353-604">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-604">**Attributes**</span></span>              | <span data-ttu-id="54353-605">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-605">N/A</span></span>  |
| <span data-ttu-id="54353-606">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-606">**References**</span></span>              | <span data-ttu-id="54353-607">[Ověřování dat modelu v aplikaci MVC](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [hlavní zásady pro vaše aplikace ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="54353-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="54353-608">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-608">**Steps**</span></span> | <span data-ttu-id="54353-609">Pro metody, které právě přijímají primitivní datový typ a ne modely jako argument by mělo být provedeno ověření vstupu pomocí regulárního výrazu.</span><span class="sxs-lookup"><span data-stu-id="54353-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="54353-610">Regex.IsMatch – v tomto poli musí být použit s vzor platný regulární výraz.</span><span class="sxs-lookup"><span data-stu-id="54353-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="54353-611">Pokud vstup hello neodpovídá hello určený regulární výraz, řízení neměli pokračovat a má být zobrazena odpovídajícího upozornění týkající se chyby ověření.</span><span class="sxs-lookup"><span data-stu-id="54353-611">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="54353-612"><a id="typesafe-api"></a>Ujistěte se, že bezpečnost typů parametrů se používají v webového rozhraní API pro přístup k datům</span><span class="sxs-lookup"><span data-stu-id="54353-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="54353-613">Název</span><span class="sxs-lookup"><span data-stu-id="54353-613">Title</span></span>                   | <span data-ttu-id="54353-614">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-615">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-615">**Component**</span></span>               | <span data-ttu-id="54353-616">Web API</span><span class="sxs-lookup"><span data-stu-id="54353-616">Web API</span></span> | 
| <span data-ttu-id="54353-617">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-617">**SDL Phase**</span></span>               | <span data-ttu-id="54353-618">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-618">Build</span></span> |  
| <span data-ttu-id="54353-619">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-619">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-620">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-620">Generic</span></span> |
| <span data-ttu-id="54353-621">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-621">**Attributes**</span></span>              | <span data-ttu-id="54353-622">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-622">N/A</span></span>  |
| <span data-ttu-id="54353-623">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-623">**References**</span></span>              | <span data-ttu-id="54353-624">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-624">N/A</span></span>  |
| <span data-ttu-id="54353-625">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-625">**Steps**</span></span> | <p><span data-ttu-id="54353-626">Pokud používáte hello parametry kolekce, vstup hello vyhodnotí SQL je jako hodnotu literálu místo pak jako spustitelný kód.</span><span class="sxs-lookup"><span data-stu-id="54353-626">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="54353-627">Hello kolekce parametrů lze použít tooenforce typ a délku omezení na vstupní data.</span><span class="sxs-lookup"><span data-stu-id="54353-627">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="54353-628">Hodnoty mimo rozsah hello aktivovat výjimku.</span><span class="sxs-lookup"><span data-stu-id="54353-628">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="54353-629">Pokud se nepoužívají bezpečnost typů parametrů SQL, může být útočníci možné tooexecute vkládání útoků, které jsou součástí hello nefiltrovaná vstup.</span><span class="sxs-lookup"><span data-stu-id="54353-629">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="54353-630">Při vytváření SQL dotazuje tooavoid možné SQL vkládání útoků, které mohou nastat u nefiltrované vstup, použijte bezpečné parametry typu.</span><span class="sxs-lookup"><span data-stu-id="54353-630">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="54353-631">Parametry typu bezpečné můžete použít s uložené procedury a dynamických příkazů SQL.</span><span class="sxs-lookup"><span data-stu-id="54353-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="54353-632">Parametry jsou zpracovány jako literálových hodnot hello databáze a ne jako spustitelný kód.</span><span class="sxs-lookup"><span data-stu-id="54353-632">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="54353-633">Parametry jsou zaškrtnutá políčka, typ a délku.</span><span class="sxs-lookup"><span data-stu-id="54353-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="54353-634">Příklad</span><span class="sxs-lookup"><span data-stu-id="54353-634">Example</span></span>
<span data-ttu-id="54353-635">Hello následující kód ukazuje, jak toouse bezpečné parametry typu s hello SqlParameterCollection při volání uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="54353-635">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="54353-636">V předchozím příkladu kódu hello hello vstupní hodnota nemůže být delší než 11 znaků.</span><span class="sxs-lookup"><span data-stu-id="54353-636">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="54353-637">Pokud hello data neodpovídá typu toohello nebo délka definované parametrem hello, hello SqlParameter třída vyvolá výjimku.</span><span class="sxs-lookup"><span data-stu-id="54353-637">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="54353-638"><a id="sql-docdb"></a>Použít umožňující dotazy SQL pro Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="54353-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="54353-639">Název</span><span class="sxs-lookup"><span data-stu-id="54353-639">Title</span></span>                   | <span data-ttu-id="54353-640">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-641">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-641">**Component**</span></span>               | <span data-ttu-id="54353-642">Azure Documentdb</span><span class="sxs-lookup"><span data-stu-id="54353-642">Azure Document DB</span></span> | 
| <span data-ttu-id="54353-643">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-643">**SDL Phase**</span></span>               | <span data-ttu-id="54353-644">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-644">Build</span></span> |  
| <span data-ttu-id="54353-645">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-645">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-646">Obecné</span><span class="sxs-lookup"><span data-stu-id="54353-646">Generic</span></span> |
| <span data-ttu-id="54353-647">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-647">**Attributes**</span></span>              | <span data-ttu-id="54353-648">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-648">N/A</span></span>  |
| <span data-ttu-id="54353-649">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-649">**References**</span></span>              | [<span data-ttu-id="54353-650">Uvedení Parametrizace SQL v DocumentDB</span><span class="sxs-lookup"><span data-stu-id="54353-650">Announcing SQL Parameterization in DocumentDB</span></span>](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) |
| <span data-ttu-id="54353-651">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-651">**Steps**</span></span> | <span data-ttu-id="54353-652">I když DocumentDB podporuje pouze dotazy jen pro čtení, je stále možné v případě, že dotazy jsou vytvořený zřetězením s uživatelský vstup Injektáž SQL.</span><span class="sxs-lookup"><span data-stu-id="54353-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="54353-653">Je možné pro toodata toogain přístupu uživatele, by neměl být přístup v rámci hello stejné kolekci tím, že vytvoří škodlivý dotazy SQL.</span><span class="sxs-lookup"><span data-stu-id="54353-653">It might be possible for a user toogain access toodata they shouldn’t be accessing within hello same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="54353-654">Parametrizované dotazy SQL pomocí Pokud dotazy se vytvářejí na základě na vstup uživatele.</span><span class="sxs-lookup"><span data-stu-id="54353-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="54353-655"><a id="schema-binding"></a>Ověření vstupu WCF prostřednictvím vazbou schématu</span><span class="sxs-lookup"><span data-stu-id="54353-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="54353-656">Název</span><span class="sxs-lookup"><span data-stu-id="54353-656">Title</span></span>                   | <span data-ttu-id="54353-657">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-658">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-658">**Component**</span></span>               | <span data-ttu-id="54353-659">WCF</span><span class="sxs-lookup"><span data-stu-id="54353-659">WCF</span></span> | 
| <span data-ttu-id="54353-660">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-660">**SDL Phase**</span></span>               | <span data-ttu-id="54353-661">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-661">Build</span></span> |  
| <span data-ttu-id="54353-662">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-662">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-663">Obecné, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="54353-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="54353-664">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-664">**Attributes**</span></span>              | <span data-ttu-id="54353-665">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-665">N/A</span></span>  |
| <span data-ttu-id="54353-666">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-666">**References**</span></span>              | [<span data-ttu-id="54353-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="54353-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="54353-668">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-668">**Steps**</span></span> | <p><span data-ttu-id="54353-669">Nedostatečná ověření vede toodifferent typů vkládání útoků.</span><span class="sxs-lookup"><span data-stu-id="54353-669">Lack of validation leads toodifferent type injection attacks.</span></span></p><p><span data-ttu-id="54353-670">Zpráva ověření představuje jeden řádek obrany v hello ochrany aplikace WCF.</span><span class="sxs-lookup"><span data-stu-id="54353-670">Message validation represents one line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="54353-671">S tímto přístupem ověřit zpráv pomocí operací služby WCF tooprotect schémata před útokem škodlivý klientem.</span><span class="sxs-lookup"><span data-stu-id="54353-671">With this approach, you validate messages using schemas tooprotect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="54353-672">Ověřte všechny zprávy přijaté službou hello klient tooprotect hello klient před útokem škodlivý službou.</span><span class="sxs-lookup"><span data-stu-id="54353-672">Validate all messages received by hello client tooprotect hello client from attack by a malicious service.</span></span> <span data-ttu-id="54353-673">Zpráva ověření je možné toovalidate zprávy při operations využívat kontrakty zpráv nebo datové kontrakty, které není možné pomocí ověření parametru.</span><span class="sxs-lookup"><span data-stu-id="54353-673">Message validation makes it possible toovalidate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="54353-674">Zpráva ověření umožňuje logiku ověření toocreate uvnitř schémat, a tím poskytuje větší flexibilitu a zkrácení doby vývoj.</span><span class="sxs-lookup"><span data-stu-id="54353-674">Message validation allows you toocreate validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="54353-675">Schémata můžete opětovně použít napříč různými aplikacemi uvnitř organizace hello, vytváření standardy pro znázornění dat.</span><span class="sxs-lookup"><span data-stu-id="54353-675">Schemas can be reused across different applications inside hello organization, creating standards for data representation.</span></span> <span data-ttu-id="54353-676">Kromě toho zpráva ověření můžete tooprotect operace při spotřebování kontrakty představující obchodní logiku zahrnující komplexnější datové typy.</span><span class="sxs-lookup"><span data-stu-id="54353-676">Additionally, message validation allows you tooprotect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="54353-677">tooperform zpráva ověření, nejprve vytvořit schéma, které představuje hello operations vaší služby a hello datových typů, které spotřebovávají tyto operace.</span><span class="sxs-lookup"><span data-stu-id="54353-677">tooperform message validation, you first build a schema that represents hello operations of your service and hello data types consumed by those operations.</span></span> <span data-ttu-id="54353-678">Pak vytvoříte třídu rozhraní .NET, která implementuje inspector zpráva vlastního klienta a vlastní dispečera zpráv inspector toovalidate hello zprávy ze služby hello odeslat/přijmout.</span><span class="sxs-lookup"><span data-stu-id="54353-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector toovalidate hello messages sent/received to/from hello service.</span></span> <span data-ttu-id="54353-679">V dalším kroku implementovat vlastní koncový bod chování tooenable zpráva ověřování klienta hello i hello služby.</span><span class="sxs-lookup"><span data-stu-id="54353-679">Next, you implement a custom endpoint behavior tooenable message validation on both hello client and hello service.</span></span> <span data-ttu-id="54353-680">Nakonec implementovat vlastní konfigurace element na hello třídu, která umožňuje tooexpose hello rozšířené chování vlastní koncového bodu v konfiguračním souboru hello hello služby nebo hello klienta"</span><span class="sxs-lookup"><span data-stu-id="54353-680">Finally, you implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client"</span></span></p>|

## <span data-ttu-id="54353-681"><a id="parameters"></a>Ověření vstupu WCF prostřednictvím parametru kontroly</span><span class="sxs-lookup"><span data-stu-id="54353-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="54353-682">Název</span><span class="sxs-lookup"><span data-stu-id="54353-682">Title</span></span>                   | <span data-ttu-id="54353-683">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="54353-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="54353-684">**Komponenta**</span><span class="sxs-lookup"><span data-stu-id="54353-684">**Component**</span></span>               | <span data-ttu-id="54353-685">WCF</span><span class="sxs-lookup"><span data-stu-id="54353-685">WCF</span></span> | 
| <span data-ttu-id="54353-686">**SDL fáze**</span><span class="sxs-lookup"><span data-stu-id="54353-686">**SDL Phase**</span></span>               | <span data-ttu-id="54353-687">Sestavení</span><span class="sxs-lookup"><span data-stu-id="54353-687">Build</span></span> |  
| <span data-ttu-id="54353-688">**Použít technologie**</span><span class="sxs-lookup"><span data-stu-id="54353-688">**Applicable Technologies**</span></span> | <span data-ttu-id="54353-689">Obecné, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="54353-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="54353-690">**Atributy**</span><span class="sxs-lookup"><span data-stu-id="54353-690">**Attributes**</span></span>              | <span data-ttu-id="54353-691">Není k dispozici</span><span class="sxs-lookup"><span data-stu-id="54353-691">N/A</span></span>  |
| <span data-ttu-id="54353-692">**Odkazy**</span><span class="sxs-lookup"><span data-stu-id="54353-692">**References**</span></span>              | [<span data-ttu-id="54353-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="54353-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="54353-694">**Kroky**</span><span class="sxs-lookup"><span data-stu-id="54353-694">**Steps**</span></span> | <p><span data-ttu-id="54353-695">Vstup a ověření dat představuje jeden důležité linii obrany v hello ochrany aplikace WCF.</span><span class="sxs-lookup"><span data-stu-id="54353-695">Input and data validation represents one important line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="54353-696">Měli byste ověřit, všechny parametry, které jsou zveřejněné v WCF operations tooprotect hello služby před útokem škodlivého klienta.</span><span class="sxs-lookup"><span data-stu-id="54353-696">You should validate all parameters exposed in WCF service operations tooprotect hello service from attack by a malicious client.</span></span> <span data-ttu-id="54353-697">Naopak by mělo také ověřit všechny návratové hodnoty přijatých hello klient tooprotect hello klient před útokem škodlivý službou</span><span class="sxs-lookup"><span data-stu-id="54353-697">Conversely, you should also validate all return values received by hello client tooprotect hello client from attack by a malicious service</span></span></p><p><span data-ttu-id="54353-698">WCF poskytuje body rozšiřitelnosti jiný, které vám umožňují toocustomize hello WCF modul runtime chování tak, že vytvoříte vlastní rozšíření.</span><span class="sxs-lookup"><span data-stu-id="54353-698">WCF provides different extensibility points that allow you toocustomize hello WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="54353-699">Zpráva, že kontrol a parametr inspektoři dvěma způsoby rozšiřitelnost použít toogain větší kontrolu nad daty hello předávání mezi klientem a služby.</span><span class="sxs-lookup"><span data-stu-id="54353-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used toogain greater control over hello data passing between a client and a service.</span></span> <span data-ttu-id="54353-700">Můžete by měl použít parametr inspektoři pro ověření vstupu a používat inspektoři zpráv pouze v případě potřeby tooinspect hello celý zpráv předávaných do/z služby.</span><span class="sxs-lookup"><span data-stu-id="54353-700">You should use parameter inspectors for input validation and use message inspectors only when you need tooinspect hello entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="54353-701">ověřování vstupu tooperform, bude sestavovat třídu rozhraní .NET a implementovat vlastní parametr inspector v pořadí parametrů toovalidate na operace ve službě.</span><span class="sxs-lookup"><span data-stu-id="54353-701">tooperform input validation, you will build a .NET class and implement a custom parameter inspector in order toovalidate parameters on operations in your service.</span></span> <span data-ttu-id="54353-702">Pak budete implementovat vlastní koncový bod ověřování tooenable chování hello klienta i hello služby.</span><span class="sxs-lookup"><span data-stu-id="54353-702">You will then implement a custom endpoint behavior tooenable validation on both hello client and hello service.</span></span> <span data-ttu-id="54353-703">Nakonec budete implementovat vlastní konfigurace element na hello třídu, která umožňuje tooexpose hello rozšířené chování vlastní koncového bodu v konfiguračním souboru hello hello služby nebo hello klienta</span><span class="sxs-lookup"><span data-stu-id="54353-703">Finally, you will implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client</span></span></p>|
