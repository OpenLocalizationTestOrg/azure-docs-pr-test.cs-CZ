---
title: "zasílání zpráv aaaUnderstand Azure IoT Hub cloud zařízení | Microsoft Docs"
description: "Příručka vývojáře – jak toouse cloud zařízení zasílání zpráv službou IoT Hub. Obsahuje informace o životní cyklus zpráv hello a možnosti konfigurace."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 5c747b50163873d823556a8baa769c4b8f7f8c44
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="send-cloud-to-device-messages-from-iot-hub"></a><span data-ttu-id="a34eb-104">Odesílání zpráv typu cloud zařízení ze služby IoT Hub</span><span class="sxs-lookup"><span data-stu-id="a34eb-104">Send cloud-to-device messages from IoT Hub</span></span>

<span data-ttu-id="a34eb-105">toosend jednosměrný oznámení toohello zařízení aplikaci z back-end vašeho řešení, odesílání zpráv typu cloud zařízení ze zařízení IoT hub tooyour.</span><span class="sxs-lookup"><span data-stu-id="a34eb-105">toosend one-way notifications toohello device app from your solution back end, send cloud-to-devices messages from your IoT hub tooyour device.</span></span> <span data-ttu-id="a34eb-106">Informace dalších možností cloudu zařízení podporované službou IoT Hub, naleznete v [Cloud zařízení komunikace pokyny][lnk-c2d-guidance].</span><span class="sxs-lookup"><span data-stu-id="a34eb-106">For a discussion of other cloud-to-devices options supported by IoT Hub, see [Cloud-to-device communications guidance][lnk-c2d-guidance].</span></span>

<span data-ttu-id="a34eb-107">Odesílání zpráv typu cloud zařízení prostřednictvím koncového bodu služby přístupem (**/zprávy/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="a34eb-107">You send cloud-to-device messages through a service-facing endpoint (**/messages/devicebound**).</span></span> <span data-ttu-id="a34eb-108">Zařízení pak přijímá zprávy hello prostřednictvím koncového bodu konkrétní zařízení (**/devices/ {deviceId} / zprávy/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="a34eb-108">A device then receives hello messages through a device-specific endpoint (**/devices/{deviceId}/messages/devicebound**).</span></span>

<span data-ttu-id="a34eb-109">Každá zpráva cloud zařízení je zaměřený na jedno zařízení podle nastavení hello **k** vlastnost příliš**/devices/ {deviceId} / zprávy/devicebound**.</span><span class="sxs-lookup"><span data-stu-id="a34eb-109">Each cloud-to-device message is targeted at a single device by setting hello **to** property too**/devices/{deviceId}/messages/devicebound**.</span></span>

<span data-ttu-id="a34eb-110">Každá fronta zařízení obsahuje maximálně 50 zprávy typu cloud zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-110">Each device queue holds at most 50 cloud-to-device messages.</span></span> <span data-ttu-id="a34eb-111">Při operaci toosend další zprávy toohello stejného zařízení výsledkem chyba.</span><span class="sxs-lookup"><span data-stu-id="a34eb-111">Trying toosend more messages toohello same device results in an error.</span></span>

## <a name="hello-cloud-to-device-message-lifecycle"></a><span data-ttu-id="a34eb-112">životní cyklus zpráv typu cloud zařízení Hello</span><span class="sxs-lookup"><span data-stu-id="a34eb-112">hello cloud-to-device message lifecycle</span></span>

<span data-ttu-id="a34eb-113">doručení zpráv v aspoň jednou tooguarantee, IoT Hub trvá zpráv typu cloud zařízení ve frontách vázané na zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-113">tooguarantee at-least-once message delivery, IoT Hub persists cloud-to-device messages in per-device queues.</span></span> <span data-ttu-id="a34eb-114">Zařízení musí explicitně potvrdit *dokončení* pro tooremove IoT Hub je z fronty hello.</span><span class="sxs-lookup"><span data-stu-id="a34eb-114">Devices must explicitly acknowledge *completion* for IoT Hub tooremove them from hello queue.</span></span> <span data-ttu-id="a34eb-115">Tento postup zaručuje odolnost proti připojení a selhání zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-115">This approach guarantees resiliency against connectivity and device failures.</span></span>

<span data-ttu-id="a34eb-116">Hello následující obrázek znázorňuje grafu stavu hello životního cyklu zprávy typu cloud zařízení IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a34eb-116">hello following diagram shows hello lifecycle state graph for a cloud-to-device message in IoT Hub.</span></span>

![Životní cyklus zpráv typu cloud zařízení][img-lifecycle]

<span data-ttu-id="a34eb-118">Když hello služby IoT Hub odešle zprávu tooa zařízení, služba hello nastaví stav zprávy hello příliš**zařazených do fronty**.</span><span class="sxs-lookup"><span data-stu-id="a34eb-118">When hello IoT Hub service sends a message tooa device, hello service sets hello message state too**Enqueued**.</span></span> <span data-ttu-id="a34eb-119">Když chce zařízení příliš*přijímat* zprávu IoT Hub *zámky* uvítací zprávu (nastavením stavu hello příliš**neviditelná**), což umožňuje jiná vlákna na toostart zařízení hello přijetí další zprávy.</span><span class="sxs-lookup"><span data-stu-id="a34eb-119">When a device wants too*receive* a message, IoT Hub *locks* hello message (by setting hello state too**Invisible**), which allows other threads on hello device toostart receiving other messages.</span></span> <span data-ttu-id="a34eb-120">Po dokončení vlákna zařízení hello zpracování zprávy upozorní IoT Hub pomocí *dokončení* uvítací zprávu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-120">When a device thread completes hello processing of a message, it notifies IoT Hub by *completing* hello message.</span></span> <span data-ttu-id="a34eb-121">IoT Hub poté nastaví stav hello příliš**dokončeno**.</span><span class="sxs-lookup"><span data-stu-id="a34eb-121">IoT Hub then sets hello state too**Completed**.</span></span>

<span data-ttu-id="a34eb-122">Zařízení můžete také zvolit:</span><span class="sxs-lookup"><span data-stu-id="a34eb-122">A device can also choose to:</span></span>

* <span data-ttu-id="a34eb-123">*Odmítnout* uvítací zprávu, což způsobí, že tooset IoT Hub je toohello **Deadlettered** stavu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-123">*Reject* hello message, which causes IoT Hub tooset it toohello **Deadlettered** state.</span></span> <span data-ttu-id="a34eb-124">Zařízení, která se připojují přes hello MQTT protokol nelze odmítnout zprávy typu cloud zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-124">Devices that connect over hello MQTT protocol cannot reject cloud-to-device messages.</span></span>
* <span data-ttu-id="a34eb-125">*Zrušte* uvítací zprávu, což způsobí, že IoT Hub tooput uvítací zprávu zpět ve frontě hello, se stavem hello nastavit příliš**zařazených do fronty**.</span><span class="sxs-lookup"><span data-stu-id="a34eb-125">*Abandon* hello message, which causes IoT Hub tooput hello message back in hello queue, with hello state set too**Enqueued**.</span></span>

<span data-ttu-id="a34eb-126">Vlákno se možná nepovede tooprocess zprávu bez upozornění služby IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a34eb-126">A thread could fail tooprocess a message without notifying IoT Hub.</span></span> <span data-ttu-id="a34eb-127">V takovém případě zprávy automaticky přechod z hello **neviditelná** stavu zpět toohello **zařazených do fronty** stavu po *časový limit viditelnosti (nebo zámku)*.</span><span class="sxs-lookup"><span data-stu-id="a34eb-127">In this case, messages automatically transition from hello **Invisible** state back toohello **Enqueued** state after a *visibility (or lock) timeout*.</span></span> <span data-ttu-id="a34eb-128">Výchozí hodnota Hello tohoto limitu je jedna minuta.</span><span class="sxs-lookup"><span data-stu-id="a34eb-128">hello default value of this timeout is one minute.</span></span>

<span data-ttu-id="a34eb-129">Zpráva může přecházet mezi hello **zařazených do fronty** a **neviditelná** stavy, maximálně hello zadaného v hello **maximální počet doručení** vlastnost na IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a34eb-129">A message can transition between hello **Enqueued** and **Invisible** states for, at most, hello number of times specified in hello **max delivery count** property on IoT Hub.</span></span> <span data-ttu-id="a34eb-130">Po tomto počtu přechodů IoT Hub nastaví hello stav uvítací zprávu příliš**Deadlettered**.</span><span class="sxs-lookup"><span data-stu-id="a34eb-130">After that number of transitions, IoT Hub sets hello state of hello message too**Deadlettered**.</span></span> <span data-ttu-id="a34eb-131">Podobně se IoT Hub nastaví stav hello zprávy příliš**Deadlettered** po jeho čas vypršení platnosti (najdete v části [čas toolive][lnk-ttl]).</span><span class="sxs-lookup"><span data-stu-id="a34eb-131">Similarly, IoT Hub sets hello state of a message too**Deadlettered** after its expiration time (see [Time toolive][lnk-ttl]).</span></span>

<span data-ttu-id="a34eb-132">Hello [jak toosend cloud zařízení zpráv službou IoT Hub] [ lnk-c2d-tutorial] se dozvíte, jak toosend zprávy typu cloud zařízení z hello cloud a přijímat na zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-132">hello [How toosend cloud-to-device messages with IoT Hub][lnk-c2d-tutorial] shows you how toosend cloud-to-device messages from hello cloud and receive them on a device.</span></span>

<span data-ttu-id="a34eb-133">Obvykle se zařízení dokončí zprávy typu cloud zařízení po ztrátě hello uvítací zprávu nemá vliv na logiku aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="a34eb-133">Typically, a device completes a cloud-to-device message when hello loss of hello message does not affect hello application logic.</span></span> <span data-ttu-id="a34eb-134">Pokud například zařízení hello obsahuje trvalé hello zpráva obsah místně nebo byl úspěšně proveden operace.</span><span class="sxs-lookup"><span data-stu-id="a34eb-134">For example, when hello device has persisted hello message content locally or has successfully executed an operation.</span></span> <span data-ttu-id="a34eb-135">Hello zpráva může mít také přechodný informace, jejichž ztrátě nebude mít vliv na funkci hello aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="a34eb-135">hello message could also carry transient information, whose loss would not impact hello functionality of hello application.</span></span> <span data-ttu-id="a34eb-136">V některých případech pro dlouhotrvající úlohy, můžete dokončit uvítací zprávu cloud zařízení po uložením hello popis úlohy v místním úložišti.</span><span class="sxs-lookup"><span data-stu-id="a34eb-136">Sometimes, for long-running tasks, you can complete hello cloud-to-device message after persisting hello task description in local storage.</span></span> <span data-ttu-id="a34eb-137">Potom můžete v různých fázích průběh úlohy hello upozornit hello back-end řešení s jeden nebo více zpráv typu zařízení cloud.</span><span class="sxs-lookup"><span data-stu-id="a34eb-137">Then you can notify hello solution back end with one or more device-to-cloud messages at various stages of progress of hello task.</span></span>

## <a name="message-expiration-time-toolive"></a><span data-ttu-id="a34eb-138">Vypršení platnosti zprávy (čas toolive)</span><span class="sxs-lookup"><span data-stu-id="a34eb-138">Message expiration (time toolive)</span></span>

<span data-ttu-id="a34eb-139">Všechny zprávy typu cloud zařízení mají čas vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="a34eb-139">Every cloud-to-device message has an expiration time.</span></span> <span data-ttu-id="a34eb-140">Buď službou hello nastavení tato doba (v hello **ExpiryTimeUtc** vlastnost), nebo službou IoT Hub pomocí výchozí hello *čas toolive* zadán jako vlastnost IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a34eb-140">This time is set either by hello service (in hello **ExpiryTimeUtc** property), or by IoT Hub using hello default *time toolive* specified as an IoT Hub property.</span></span> <span data-ttu-id="a34eb-141">V tématu [možnosti konfigurace Cloud zařízení][lnk-c2d-configuration].</span><span class="sxs-lookup"><span data-stu-id="a34eb-141">See [Cloud-to-device configuration options][lnk-c2d-configuration].</span></span>

<span data-ttu-id="a34eb-142">Běžný způsob, tootake výhod zprávy vypršení platnosti a vyhnout odesílání zpráv toodisconnected zařízení, je tooset toolive hodnoty krátkou dobu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-142">A common way tootake advantage of message expiration and avoid sending messages toodisconnected devices, is tooset short time toolive values.</span></span> <span data-ttu-id="a34eb-143">Tuto metodu lze dosáhnout hello stejný výsledek jako zachování hello stav připojení zařízení, aniž by byly efektivnější.</span><span class="sxs-lookup"><span data-stu-id="a34eb-143">This approach achieves hello same result as maintaining hello device connection state, while being more efficient.</span></span> <span data-ttu-id="a34eb-144">Pokud budete požadovat potvrzení zprávy, IoT Hub vás upozorní, zařízení, která jsou možné tooreceive zprávy a zařízení, která nejsou v režimu online nebo se nezdařilo.</span><span class="sxs-lookup"><span data-stu-id="a34eb-144">When you request message acknowledgements, IoT Hub notifies you which devices are able tooreceive messages, and which devices are not online or have failed.</span></span>

## <a name="message-feedback"></a><span data-ttu-id="a34eb-145">Zpráva zpětné vazby</span><span class="sxs-lookup"><span data-stu-id="a34eb-145">Message feedback</span></span>

<span data-ttu-id="a34eb-146">Při odeslání zprávy typu cloud zařízení, můžete žádost o služby hello hello doručování zpráv zpětnou vazbu týkající se hello konečného stavu této zprávy.</span><span class="sxs-lookup"><span data-stu-id="a34eb-146">When you send a cloud-to-device message, hello service can request hello delivery of per-message feedback regarding hello final state of that message.</span></span>

| <span data-ttu-id="a34eb-147">Vlastnost objektu ACK.</span><span class="sxs-lookup"><span data-stu-id="a34eb-147">Ack property</span></span> | <span data-ttu-id="a34eb-148">Chování</span><span class="sxs-lookup"><span data-stu-id="a34eb-148">Behavior</span></span> |
| ------------ | -------- |
| <span data-ttu-id="a34eb-149">**kladné**</span><span class="sxs-lookup"><span data-stu-id="a34eb-149">**positive**</span></span> | <span data-ttu-id="a34eb-150">IoT Hub generuje zprávu zpětné vazby, pokud a pouze v případě, hello cloud zařízení zpráva dorazila hello **dokončeno** stavu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-150">IoT Hub generates a feedback message if, and only if, hello cloud-to-device message reached hello **Completed** state.</span></span> |
| <span data-ttu-id="a34eb-151">**Záporná**</span><span class="sxs-lookup"><span data-stu-id="a34eb-151">**negative**</span></span> | <span data-ttu-id="a34eb-152">IoT Hub vytvoří zprávu zpětnou vazbu jenom v případě, zprávy typu cloud zařízení hello dosáhne hello **Deadlettered** stavu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-152">IoT Hub generates a feedback message, if and only if, hello cloud-to-device message reaches hello **Deadlettered** state.</span></span> |
| <span data-ttu-id="a34eb-153">**Úplná**</span><span class="sxs-lookup"><span data-stu-id="a34eb-153">**full**</span></span>     | <span data-ttu-id="a34eb-154">IoT Hub vytvoří zprávu zpětné vazby v obou případech.</span><span class="sxs-lookup"><span data-stu-id="a34eb-154">IoT Hub generates a feedback message in either case.</span></span> |

<span data-ttu-id="a34eb-155">Pokud **Ack** je **úplné**a jste neobdrželi zprávu zpětné vazby, což znamená, že vypršela platnost zprávy hello zpětnou vazbu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-155">If **Ack** is **full**, and you don't receive a feedback message, it means that hello feedback message expired.</span></span> <span data-ttu-id="a34eb-156">Služba Hello nemůže vědět, co se stalo toohello původní zprávy.</span><span class="sxs-lookup"><span data-stu-id="a34eb-156">hello service can't know what happened toohello original message.</span></span> <span data-ttu-id="a34eb-157">V praxi služba zkontrolujte zpětnou vazbu hello ji může zpracovat, než vyprší její platnost.</span><span class="sxs-lookup"><span data-stu-id="a34eb-157">In practice, a service should ensure that it can process hello feedback before it expires.</span></span> <span data-ttu-id="a34eb-158">čas vypršení platnosti maximální Hello je dva dny, poskytuje dost času tooget hello spuštěna služba znovu Pokud dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="a34eb-158">hello maximum expiry time is two days, which allows plenty of time tooget hello service running again if a failure occurs.</span></span>

<span data-ttu-id="a34eb-159">Jak je popsáno v [koncové body][lnk-endpoints], IoT Hub zajišťuje zpětnou vazbu prostřednictvím koncový bod služby přístupem (**/messages/servicebound/feedback**) jako zprávy.</span><span class="sxs-lookup"><span data-stu-id="a34eb-159">As explained in [Endpoints][lnk-endpoints], IoT Hub delivers feedback through a service-facing endpoint (**/messages/servicebound/feedback**) as messages.</span></span> <span data-ttu-id="a34eb-160">Hello sémantiku pro příjem zpětné vazby jsou hello stejné jako u zprávy typu cloud zařízení a mít stejný hello [životní cyklus zpráv][lnk-lifecycle].</span><span class="sxs-lookup"><span data-stu-id="a34eb-160">hello semantics for receiving feedback are hello same as for cloud-to-device messages, and have hello same [Message lifecycle][lnk-lifecycle].</span></span> <span data-ttu-id="a34eb-161">Kdykoli je to možné, zpětná vazba zpráva v dávce do jedné zprávy s hello následující formát:</span><span class="sxs-lookup"><span data-stu-id="a34eb-161">Whenever possible, message feedback is batched in a single message, with hello following format:</span></span>

| <span data-ttu-id="a34eb-162">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="a34eb-162">Property</span></span>     | <span data-ttu-id="a34eb-163">Popis</span><span class="sxs-lookup"><span data-stu-id="a34eb-163">Description</span></span> |
| ------------ | ----------- |
| <span data-ttu-id="a34eb-164">EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="a34eb-164">EnqueuedTime</span></span> | <span data-ttu-id="a34eb-165">Časové razítko označující vytvoření uvítací zprávu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-165">Timestamp indicating when hello message was created.</span></span> |
| <span data-ttu-id="a34eb-166">ID uživatele</span><span class="sxs-lookup"><span data-stu-id="a34eb-166">UserId</span></span>       | `{iot hub name}` |
| <span data-ttu-id="a34eb-167">Typ obsahu</span><span class="sxs-lookup"><span data-stu-id="a34eb-167">ContentType</span></span>  | `application/vnd.microsoft.iothub.feedback.json` |

<span data-ttu-id="a34eb-168">textu Hello je serializací JSON pole záznamů, každý s hello následující vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="a34eb-168">hello body is a JSON-serialized array of records, each with hello following properties:</span></span>

| <span data-ttu-id="a34eb-169">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="a34eb-169">Property</span></span>           | <span data-ttu-id="a34eb-170">Popis</span><span class="sxs-lookup"><span data-stu-id="a34eb-170">Description</span></span> |
| ------------------ | ----------- |
| <span data-ttu-id="a34eb-171">EnqueuedTimeUtc</span><span class="sxs-lookup"><span data-stu-id="a34eb-171">EnqueuedTimeUtc</span></span>    | <span data-ttu-id="a34eb-172">Časové razítko označující, kdy výsledek hello hello zprávy došlo.</span><span class="sxs-lookup"><span data-stu-id="a34eb-172">Timestamp indicating when hello outcome of hello message happened.</span></span> <span data-ttu-id="a34eb-173">Například hello zařízení bylo dokončeno, nebo jeho platnost uvítací zprávu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-173">For example, hello device completed or hello message expired.</span></span> |
| <span data-ttu-id="a34eb-174">OriginalMessageId</span><span class="sxs-lookup"><span data-stu-id="a34eb-174">OriginalMessageId</span></span>  | <span data-ttu-id="a34eb-175">**MessageId** hello zpráv typu cloud zařízení toowhich tato zpětná vazba informace týkají.</span><span class="sxs-lookup"><span data-stu-id="a34eb-175">**MessageId** of hello cloud-to-device message toowhich this feedback information relates.</span></span> |
| <span data-ttu-id="a34eb-176">statusCode</span><span class="sxs-lookup"><span data-stu-id="a34eb-176">StatusCode</span></span>         | <span data-ttu-id="a34eb-177">Požadovaný řetězec.</span><span class="sxs-lookup"><span data-stu-id="a34eb-177">Required string.</span></span> <span data-ttu-id="a34eb-178">Použít v zpětnou vazbu zprávy generované IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a34eb-178">Used in feedback messages generated by IoT Hub.</span></span> <br/> <span data-ttu-id="a34eb-179">'Success'</span><span class="sxs-lookup"><span data-stu-id="a34eb-179">'Success'</span></span> <br/> <span data-ttu-id="a34eb-180">"Platnost vypršela.</span><span class="sxs-lookup"><span data-stu-id="a34eb-180">'Expired'</span></span> <br/> <span data-ttu-id="a34eb-181">'DeliveryCountExceeded.</span><span class="sxs-lookup"><span data-stu-id="a34eb-181">'DeliveryCountExceeded'</span></span> <br/> <span data-ttu-id="a34eb-182">'Odmítnut.</span><span class="sxs-lookup"><span data-stu-id="a34eb-182">'Rejected'</span></span> <br/> <span data-ttu-id="a34eb-183">'Vyprázdní.</span><span class="sxs-lookup"><span data-stu-id="a34eb-183">'Purged'</span></span> |
| <span data-ttu-id="a34eb-184">Popis</span><span class="sxs-lookup"><span data-stu-id="a34eb-184">Description</span></span>        | <span data-ttu-id="a34eb-185">Řetězce hodnoty pro **StatusCode**.</span><span class="sxs-lookup"><span data-stu-id="a34eb-185">String values for **StatusCode**.</span></span> |
| <span data-ttu-id="a34eb-186">ID zařízení</span><span class="sxs-lookup"><span data-stu-id="a34eb-186">DeviceId</span></span>           | <span data-ttu-id="a34eb-187">**DeviceId** hello cílové zařízení z hello zpráv typu cloud zařízení toowhich tento připomínek souvisí.</span><span class="sxs-lookup"><span data-stu-id="a34eb-187">**DeviceId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |
| <span data-ttu-id="a34eb-188">DeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="a34eb-188">DeviceGenerationId</span></span> | <span data-ttu-id="a34eb-189">**DeviceGenerationId** hello cílové zařízení z hello zpráv typu cloud zařízení toowhich tento připomínek souvisí.</span><span class="sxs-lookup"><span data-stu-id="a34eb-189">**DeviceGenerationId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |

<span data-ttu-id="a34eb-190">musíte zadat Hello služby **MessageId** pro hello cloud zařízení zpráv možné toocorrelate toobe jeho zpětnou vazbu s hello původní zprávy.</span><span class="sxs-lookup"><span data-stu-id="a34eb-190">hello service must specify a **MessageId** for hello cloud-to-device message toobe able toocorrelate its feedback with hello original message.</span></span>

<span data-ttu-id="a34eb-191">Hello následující příklad ukazuje hello tělo zprávy zpětnou vazbu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-191">hello following example shows hello body of a feedback message.</span></span>

```json
[
  {
    "OriginalMessageId": "0987654321",
    "EnqueuedTimeUtc": "2015-07-28T16:24:48.789Z",
    "StatusCode": 0,
    "Description": "Success",
    "DeviceId": "123",
    "DeviceGenerationId": "abcdefghijklmnopqrstuvwxyz"
  },
  {
    ...
  },
  ...
]
```

## <a name="cloud-to-device-configuration-options"></a><span data-ttu-id="a34eb-192">Možnosti konfigurace cloudu na zařízení</span><span class="sxs-lookup"><span data-stu-id="a34eb-192">Cloud-to-device configuration options</span></span>

<span data-ttu-id="a34eb-193">Každý IoT hub zpřístupní hello následující možnosti konfigurace pro zasílání zpráv typu cloud zařízení:</span><span class="sxs-lookup"><span data-stu-id="a34eb-193">Each IoT hub exposes hello following configuration options for cloud-to-device messaging:</span></span>

| <span data-ttu-id="a34eb-194">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="a34eb-194">Property</span></span>                  | <span data-ttu-id="a34eb-195">Popis</span><span class="sxs-lookup"><span data-stu-id="a34eb-195">Description</span></span> | <span data-ttu-id="a34eb-196">Rozsah a výchozí</span><span class="sxs-lookup"><span data-stu-id="a34eb-196">Range and default</span></span> |
| ------------------------- | ----------- | ----------------- |
| <span data-ttu-id="a34eb-197">defaultTtlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="a34eb-197">defaultTtlAsIso8601</span></span>       | <span data-ttu-id="a34eb-198">Výchozí hodnota TTL zprávy typu cloud zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-198">Default TTL for cloud-to-device messages.</span></span> | <span data-ttu-id="a34eb-199">Interval ISO_8601 až too2D (minimální 1 minutu).</span><span class="sxs-lookup"><span data-stu-id="a34eb-199">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="a34eb-200">Výchozí hodnota: 1 hodina.</span><span class="sxs-lookup"><span data-stu-id="a34eb-200">Default: 1 hour.</span></span> |
| <span data-ttu-id="a34eb-201">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="a34eb-201">maxDeliveryCount</span></span>          | <span data-ttu-id="a34eb-202">Doručení maximální počet pro fronty cloud zařízení na zařízení.</span><span class="sxs-lookup"><span data-stu-id="a34eb-202">Maximum delivery count for cloud-to-device per-device queues.</span></span> | <span data-ttu-id="a34eb-203">1 too100.</span><span class="sxs-lookup"><span data-stu-id="a34eb-203">1 too100.</span></span> <span data-ttu-id="a34eb-204">Výchozí: 10.</span><span class="sxs-lookup"><span data-stu-id="a34eb-204">Default: 10.</span></span> |
| <span data-ttu-id="a34eb-205">feedback.ttlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="a34eb-205">feedback.ttlAsIso8601</span></span>     | <span data-ttu-id="a34eb-206">Uchování pro zpětnou vazbu služby vázané zprávy.</span><span class="sxs-lookup"><span data-stu-id="a34eb-206">Retention for service-bound feedback messages.</span></span> | <span data-ttu-id="a34eb-207">Interval ISO_8601 až too2D (minimální 1 minutu).</span><span class="sxs-lookup"><span data-stu-id="a34eb-207">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="a34eb-208">Výchozí hodnota: 1 hodina.</span><span class="sxs-lookup"><span data-stu-id="a34eb-208">Default: 1 hour.</span></span> |
| <span data-ttu-id="a34eb-209">feedback.maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="a34eb-209">feedback.maxDeliveryCount</span></span> |<span data-ttu-id="a34eb-210">Doručení maximální počet pro frontu zpětné vazby.</span><span class="sxs-lookup"><span data-stu-id="a34eb-210">Maximum delivery count for feedback queue.</span></span> | <span data-ttu-id="a34eb-211">1 too100.</span><span class="sxs-lookup"><span data-stu-id="a34eb-211">1 too100.</span></span> <span data-ttu-id="a34eb-212">Výchozí: 100.</span><span class="sxs-lookup"><span data-stu-id="a34eb-212">Default: 100.</span></span> |

<span data-ttu-id="a34eb-213">Další informace o tom, jak tooset možnosti konfigurace, najdete v části [centra IoT vytvořit][lnk-portal].</span><span class="sxs-lookup"><span data-stu-id="a34eb-213">For more information about how tooset these configuration options, see [Create IoT hubs][lnk-portal].</span></span>

## <a name="next-steps"></a><span data-ttu-id="a34eb-214">Další kroky</span><span class="sxs-lookup"><span data-stu-id="a34eb-214">Next steps</span></span>

<span data-ttu-id="a34eb-215">Informace o sadách SDK, hello můžete používat tooreceive zprávy typu cloud zařízení najdete v tématu [SDK služby Azure IoT][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="a34eb-215">For information about hello SDKs you can use tooreceive cloud-to-device messages, see [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="a34eb-216">tootry na příjem zpráv typu cloud zařízení, najdete v části hello [odeslat cloud zařízení] [ lnk-c2d-tutorial] kurzu.</span><span class="sxs-lookup"><span data-stu-id="a34eb-216">tootry out receiving cloud-to-device messages, see hello [Send cloud-to-device][lnk-c2d-tutorial] tutorial.</span></span>

[img-lifecycle]: ./media/iot-hub-devguide-messages-c2d/lifecycle.png

[lnk-portal]: iot-hub-create-through-portal.md
[lnk-c2d-guidance]: iot-hub-devguide-c2d-guidance.md
[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-ttl]: #message-expiration-time-to-live
[lnk-c2d-configuration]: #cloud-to-device-configuration-options
[lnk-lifecycle]: #message-lifecycle
[lnk-c2d-tutorial]: iot-hub-csharp-csharp-c2d.md
