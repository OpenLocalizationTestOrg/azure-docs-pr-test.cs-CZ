---
title: "aaaAzure IoT Hub vysoké dostupnosti a zotavení po havárii | Microsoft Docs"
description: "Popisuje funkce hello Azure a IoT Hub, které vám pomůžou toobuild vysoce dostupné řešení Azure IoT s možností obnovení po havárii."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="21bea-103">IoT Hub vysoké dostupnosti a zotavení po havárii</span><span class="sxs-lookup"><span data-stu-id="21bea-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="21bea-104">Jako služby Azure IoT Hub poskytuje vysokou dostupnost (HA) pomocí redundance na úrovni hello oblast Azure, bez další zátěže vyžadují hello řešení.</span><span class="sxs-lookup"><span data-stu-id="21bea-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="21bea-105">Platforma Microsoft Azure Hello také zahrnuje funkce toohelp sestavování řešení s možností zotavení po havárii nebo mezi oblastmi dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="21bea-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="21bea-106">Pokud chcete tooprovide globální, mezi oblastmi vysoká dostupnost pro zařízení nebo uživatelů, návrh a připravte řešení tootake výhod těchto funkcí Azure zotavení po Havárii.</span><span class="sxs-lookup"><span data-stu-id="21bea-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="21bea-107">článek Hello [Azure obchodní kontinuity technické pokyny](../resiliency/resiliency-technical-guidance.md) popisuje hello integrované funkce v Azure pro provozní kontinuitu a zotavení po Havárii.</span><span class="sxs-lookup"><span data-stu-id="21bea-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="21bea-108">Hello [zotavení po havárii a vysoká dostupnost pro aplikace Azure] [ Disaster recovery and high availability for Azure applications] dokumentu poskytuje doporučení ohledně architektury na strategie pro aplikace Azure tooachieve HA a zotavení po Havárii.</span><span class="sxs-lookup"><span data-stu-id="21bea-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="21bea-109">Azure IoT Hub DR</span><span class="sxs-lookup"><span data-stu-id="21bea-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="21bea-110">Kromě toho HA toointra oblasti IoT Hub implementuje mechanismy převzetí služeb při selhání pro zotavení po havárii, které vyžadují bez zásahu uživatele hello.</span><span class="sxs-lookup"><span data-stu-id="21bea-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="21bea-111">IoT Hub DR samoobslužné inicializaci a má cíli času obnovení (RTO) 2-26 hodin a hello následující plánovaných bodů obnovení (rpo).</span><span class="sxs-lookup"><span data-stu-id="21bea-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="21bea-112">Funkce</span><span class="sxs-lookup"><span data-stu-id="21bea-112">Functionality</span></span> | <span data-ttu-id="21bea-113">PLÁNOVANÝ BOD OBNOVENÍ</span><span class="sxs-lookup"><span data-stu-id="21bea-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="21bea-114">Dostupnost služeb pro operace registru a komunikace</span><span class="sxs-lookup"><span data-stu-id="21bea-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="21bea-115">Případné ztrátě CName</span><span class="sxs-lookup"><span data-stu-id="21bea-115">Possible CName loss</span></span> |
| <span data-ttu-id="21bea-116">Data identit v registru identit</span><span class="sxs-lookup"><span data-stu-id="21bea-116">Identity data in identity registry</span></span> |<span data-ttu-id="21bea-117">0 – 5 minut ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="21bea-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="21bea-118">Zprávy typu zařízení-cloud</span><span class="sxs-lookup"><span data-stu-id="21bea-118">Device-to-cloud messages</span></span> |<span data-ttu-id="21bea-119">Dojde ke ztrátě všech nepřečtených zpráv</span><span class="sxs-lookup"><span data-stu-id="21bea-119">All unread messages are lost</span></span> |
| <span data-ttu-id="21bea-120">Operace sledování zpráv</span><span class="sxs-lookup"><span data-stu-id="21bea-120">Operations monitoring messages</span></span> |<span data-ttu-id="21bea-121">Dojde ke ztrátě všech nepřečtených zpráv</span><span class="sxs-lookup"><span data-stu-id="21bea-121">All unread messages are lost</span></span> |
| <span data-ttu-id="21bea-122">Zprávy typu cloud zařízení</span><span class="sxs-lookup"><span data-stu-id="21bea-122">Cloud-to-device messages</span></span> |<span data-ttu-id="21bea-123">0 – 5 minut ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="21bea-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="21bea-124">Frontu zpětné vazby cloud zařízení</span><span class="sxs-lookup"><span data-stu-id="21bea-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="21bea-125">Dojde ke ztrátě všech nepřečtených zpráv</span><span class="sxs-lookup"><span data-stu-id="21bea-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="21bea-126">Místní převzetí služeb při selhání s centrem IoT</span><span class="sxs-lookup"><span data-stu-id="21bea-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="21bea-127">Dokončení zpracování topologií nasazení v řešeních pro IoT je mimo rámec tohoto článku hello.</span><span class="sxs-lookup"><span data-stu-id="21bea-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="21bea-128">Hello článek popisuje hello *regionální převzetí služeb při selhání* modelu nasazení hello za účelem vysoké dostupnosti a zotavení po havárii.</span><span class="sxs-lookup"><span data-stu-id="21bea-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="21bea-129">V modelu regionální převzetí služeb při selhání hello řešení back end spustí především v umístění jednoho datového centra a sekundární IoT hub a back-end jsou nasazeny v jiném umístění datového centra.</span><span class="sxs-lookup"><span data-stu-id="21bea-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="21bea-130">Pokud centra IoT hello primární datové centrum hello vyskytne výpadku nebo dojde k přerušení připojení k síti hello z primární datové centrum aplikace hello zařízení toohello.</span><span class="sxs-lookup"><span data-stu-id="21bea-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="21bea-131">Zařízení používají koncového bodu služby sekundární vždy, když primární brány hello nelze získat přístup.</span><span class="sxs-lookup"><span data-stu-id="21bea-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="21bea-132">Pomocí funkce převzetí služeb při selhání mezi oblastmi je možné zlepšit hello řešení dostupnosti nad rámec hello vysokou dostupnost jedné oblasti.</span><span class="sxs-lookup"><span data-stu-id="21bea-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="21bea-133">Na vysoké úrovni, tooimplement model místní převzetí služeb při selhání službou IoT Hub, je třeba hello následující:</span><span class="sxs-lookup"><span data-stu-id="21bea-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="21bea-134">**Sekundární IoT hub a zařízení směrování logiku**: V případě hello přerušení služby ve vaší primární oblasti, musíte spustit zařízení připojující tooyour sekundární oblast.</span><span class="sxs-lookup"><span data-stu-id="21bea-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="21bea-135">Zadané hello stav povaha většina služeb související se situací, je běžné řešení správci tootrigger hello převzetí služeb při selhání mezi oblast procesu.</span><span class="sxs-lookup"><span data-stu-id="21bea-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="21bea-136">Hello nejlepší způsob, jak toocommunicate hello nový koncový bod toodevices, při zachování kontroly nad hello procesu, je toohave je pravidelně kontrolovat *concierge* hello aktuální aktivní koncový bod služby.</span><span class="sxs-lookup"><span data-stu-id="21bea-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="21bea-137">Hello concierge služba může být webové aplikace, která je replikována a uchovávat dosažitelný pomocí technik DNS přesměrování (například pomocí [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="21bea-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="21bea-138">**Replikace registru identit** -toobe použitelný, hello sekundární IoT hub musí obsahovat všechny identity zařízení, které se můžou připojit toohello řešení.</span><span class="sxs-lookup"><span data-stu-id="21bea-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="21bea-139">Hello řešení musí zachovat geograficky replikované zálohy identit zařízení a odešlete toohello sekundární IoT hub před přepnutím hello aktivní koncový bod pro hello zařízení.</span><span class="sxs-lookup"><span data-stu-id="21bea-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="21bea-140">funkce exportu identity Hello zařízení služby IoT Hub je užitečné v tomto kontextu.</span><span class="sxs-lookup"><span data-stu-id="21bea-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="21bea-141">Další informace najdete v tématu [Příručka vývojáře pro službu IoT Hub - registru identit][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="21bea-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="21bea-142">**Slučování logiku** – když primární oblasti hello opět k dispozici, všechny hello stav a data, která byla vytvořena v hello sekundární lokality musí být migrované back toohello primární oblasti.</span><span class="sxs-lookup"><span data-stu-id="21bea-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="21bea-143">Tento stav a data se týká hlavně toodevice identit a metadata aplikace, které je potřeba sloučit s hello primární IoT hub a jiných úložišť specifické pro aplikaci v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="21bea-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="21bea-144">toosimplify tento krok byste měli používat idempotent operace.</span><span class="sxs-lookup"><span data-stu-id="21bea-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="21bea-145">Operace Idempotent minimalizovat hello vedlejší účinky od hello následné konzistentní distribuci událostí a od duplikáty nebo doručení na více systémů pořadí událostí.</span><span class="sxs-lookup"><span data-stu-id="21bea-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="21bea-146">Kromě toho logiku aplikace hello musí být nekonzistence potenciální navrženou tootolerate nebo "mírně" datum stavu.</span><span class="sxs-lookup"><span data-stu-id="21bea-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="21bea-147">Tato situace může nastat z důvodu toohello další čas potřebný pro systém hello příliš "retušovat" podle plánovaných bodů obnovení (RPO).</span><span class="sxs-lookup"><span data-stu-id="21bea-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="21bea-148">Další kroky</span><span class="sxs-lookup"><span data-stu-id="21bea-148">Next steps</span></span>
<span data-ttu-id="21bea-149">Použijte tyto odkazy toolearn Další informace o službě Azure IoT Hub:</span><span class="sxs-lookup"><span data-stu-id="21bea-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="21bea-150">[Začínáme s centra IoT (kurz)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="21bea-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="21bea-151">[Co je Azure IoT Hub?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="21bea-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
