---
title: "Azure IoT Hub vysoké dostupnosti a zotavení po havárii | Microsoft Docs"
description: "Popisuje funkce Azure a IoT Hub, které pomáhají při vytváření vysoce dostupné řešení Azure IoT se po havárii možnosti obnovení."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 76c3187549e1821908263c30e394db26ee6f75e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="20507-103">IoT Hub vysoké dostupnosti a zotavení po havárii</span><span class="sxs-lookup"><span data-stu-id="20507-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="20507-104">Jako služby Azure IoT Hub poskytuje vysokou dostupnost (HA) pomocí redundance na úrovni oblasti Azure bez další zátěže vyžadují řešení.</span><span class="sxs-lookup"><span data-stu-id="20507-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at the Azure region level, without any additional work required by the solution.</span></span> <span data-ttu-id="20507-105">Platforma Microsoft Azure také obsahuje funkce, které pomáhají při vytváření řešení pomocí možnosti zotavení po havárii nebo mezi oblastmi dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="20507-105">The Microsoft Azure platform also includes features to help you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="20507-106">Pokud chcete zajistit vysokou dostupnost globální, mezi oblastmi pro zařízení nebo uživatelů, návrh a připravte řešení využívat výhod těchto funkcí Azure zotavení po Havárii.</span><span class="sxs-lookup"><span data-stu-id="20507-106">If you want to provide global, cross-region high availability for devices or users, design and prepare your solutions to take advantage of these Azure DR features.</span></span> <span data-ttu-id="20507-107">Článek [Azure obchodní kontinuity technické pokyny](../resiliency/resiliency-technical-guidance.md) popisuje integrované funkce v Azure pro provozní kontinuitu a zotavení po Havárii.</span><span class="sxs-lookup"><span data-stu-id="20507-107">The article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes the built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="20507-108">[Zotavení po havárii a vysoká dostupnost pro aplikace Azure] [ Disaster recovery and high availability for Azure applications] dokument obsahuje pokyny k architektura s strategie pro aplikace Azure a dosáhnout HA a zotavení po Havárii.</span><span class="sxs-lookup"><span data-stu-id="20507-108">The [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications to achieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="20507-109">Azure IoT Hub DR</span><span class="sxs-lookup"><span data-stu-id="20507-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="20507-110">Kromě HA uvnitř oblasti IoT Hub implementuje mechanismy převzetí služeb při selhání pro zotavení po havárii, které vyžadují od uživatele žádný zásah.</span><span class="sxs-lookup"><span data-stu-id="20507-110">In addition to intra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from the user.</span></span> <span data-ttu-id="20507-111">IoT Hub DR samoobslužné inicializaci a má cíli času obnovení (RTO), 2-26 hodin a tyto cíle bodu obnovení (rpo).</span><span class="sxs-lookup"><span data-stu-id="20507-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and the following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="20507-112">Funkce</span><span class="sxs-lookup"><span data-stu-id="20507-112">Functionality</span></span> | <span data-ttu-id="20507-113">PLÁNOVANÝ BOD OBNOVENÍ</span><span class="sxs-lookup"><span data-stu-id="20507-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="20507-114">Dostupnost služeb pro operace registru a komunikace</span><span class="sxs-lookup"><span data-stu-id="20507-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="20507-115">Případné ztrátě CName</span><span class="sxs-lookup"><span data-stu-id="20507-115">Possible CName loss</span></span> |
| <span data-ttu-id="20507-116">Data identit v registru identit</span><span class="sxs-lookup"><span data-stu-id="20507-116">Identity data in identity registry</span></span> |<span data-ttu-id="20507-117">0 – 5 minut ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="20507-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="20507-118">Zprávy typu zařízení-cloud</span><span class="sxs-lookup"><span data-stu-id="20507-118">Device-to-cloud messages</span></span> |<span data-ttu-id="20507-119">Dojde ke ztrátě všech nepřečtených zpráv</span><span class="sxs-lookup"><span data-stu-id="20507-119">All unread messages are lost</span></span> |
| <span data-ttu-id="20507-120">Operace sledování zpráv</span><span class="sxs-lookup"><span data-stu-id="20507-120">Operations monitoring messages</span></span> |<span data-ttu-id="20507-121">Dojde ke ztrátě všech nepřečtených zpráv</span><span class="sxs-lookup"><span data-stu-id="20507-121">All unread messages are lost</span></span> |
| <span data-ttu-id="20507-122">Zprávy typu cloud zařízení</span><span class="sxs-lookup"><span data-stu-id="20507-122">Cloud-to-device messages</span></span> |<span data-ttu-id="20507-123">0 – 5 minut ztrátě dat.</span><span class="sxs-lookup"><span data-stu-id="20507-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="20507-124">Frontu zpětné vazby cloud zařízení</span><span class="sxs-lookup"><span data-stu-id="20507-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="20507-125">Dojde ke ztrátě všech nepřečtených zpráv</span><span class="sxs-lookup"><span data-stu-id="20507-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="20507-126">Místní převzetí služeb při selhání s centrem IoT</span><span class="sxs-lookup"><span data-stu-id="20507-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="20507-127">Dokončení zpracování topologií nasazení v řešeních pro IoT je mimo rámec tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="20507-127">A complete treatment of deployment topologies in IoT solutions is outside the scope of this article.</span></span> <span data-ttu-id="20507-128">Popisuje článek *regionální převzetí služeb při selhání* modelu nasazení za účelem vysoké dostupnosti a zotavení po havárii.</span><span class="sxs-lookup"><span data-stu-id="20507-128">The article discusses the *regional failover* deployment model for the purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="20507-129">V modelu regionální převzetí služeb při selhání spustí back end řešení především v umístění jednoho datového centra a sekundární IoT hub a back-end nasazených v jiném umístění datového centra.</span><span class="sxs-lookup"><span data-stu-id="20507-129">In a regional failover model, the solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="20507-130">Pokud jste službu IoT hub v primární datové centrum vyskytne výpadku nebo dojde k přerušení připojení k síti ze zařízení na primární datové centrum.</span><span class="sxs-lookup"><span data-stu-id="20507-130">If the IoT hub in the primary datacenter suffers an outage or the network connectivity from the device to the primary datacenter is interrupted.</span></span> <span data-ttu-id="20507-131">Zařízení používají koncového bodu služby sekundární vždy, když primární brány, není dosažitelná.</span><span class="sxs-lookup"><span data-stu-id="20507-131">Devices use a secondary service endpoint whenever the primary gateway cannot be reached.</span></span> <span data-ttu-id="20507-132">Pomocí funkce převzetí služeb při selhání mezi oblastmi lze zvýšit dostupnost řešení nad vysokou dostupnost jedné oblasti.</span><span class="sxs-lookup"><span data-stu-id="20507-132">With a cross-region failover capability, the solution availability can be improved beyond the high availability of a single region.</span></span>

<span data-ttu-id="20507-133">Na vysoké úrovni implementovat model místní převzetí služeb při selhání službou IoT Hub, budete potřebovat následující:</span><span class="sxs-lookup"><span data-stu-id="20507-133">At a high level, to implement a regional failover model with IoT Hub, you need the following:</span></span>

* <span data-ttu-id="20507-134">**Sekundární IoT hub a zařízení směrování logiku**: v případě přerušení služby ve vaší primární oblasti, musíte spustit zařízení, připojení k vaší sekundární oblasti.</span><span class="sxs-lookup"><span data-stu-id="20507-134">**A secondary IoT hub and device routing logic**: In the case of a service disruption in your primary region, devices must start connecting to your secondary region.</span></span> <span data-ttu-id="20507-135">Vzhledem k rozpoznání stavu povaze většina služeb související se situací, je běžné správců řešení, které spustí proces převzetí služeb při selhání mezi oblast.</span><span class="sxs-lookup"><span data-stu-id="20507-135">Given the state-aware nature of most services involved, it is common for solution administrators to trigger the inter-region failover process.</span></span> <span data-ttu-id="20507-136">Nejlepší způsob, jak komunikaci nový koncový bod do zařízení, a zachováním kontroly procesu, je na jejich pravidelně kontrolovat *concierge* služby pro aktuální aktivní koncový bod.</span><span class="sxs-lookup"><span data-stu-id="20507-136">The best way to communicate the new endpoint to devices, while maintaining control of the process, is to have them regularly check a *concierge* service for the current active endpoint.</span></span> <span data-ttu-id="20507-137">Službu concierge může být webové aplikace, která je replikována a uchovávat dosažitelný pomocí technik DNS přesměrování (například pomocí [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="20507-137">The concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="20507-138">**Replikace registru identit** – Pokud chcete být použitelná, sekundární IoT hub musí obsahovat všechny identity zařízení, které se můžou připojit k řešení.</span><span class="sxs-lookup"><span data-stu-id="20507-138">**Identity registry replication** - To be usable, the secondary IoT hub must contain all device identities that can connect to the solution.</span></span> <span data-ttu-id="20507-139">Řešení musí zachovat geograficky replikované zálohy identit zařízení a jejich nahrávání do služby IoT hub sekundární před přepnutím aktivní koncový bod pro zařízení.</span><span class="sxs-lookup"><span data-stu-id="20507-139">The solution should keep geo-replicated backups of device identities, and upload them to the secondary IoT hub before switching the active endpoint for the devices.</span></span> <span data-ttu-id="20507-140">Funkce exportu identity zařízení IoT Hub je užitečné v tomto kontextu.</span><span class="sxs-lookup"><span data-stu-id="20507-140">The device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="20507-141">Další informace najdete v tématu [Příručka vývojáře pro službu IoT Hub - registru identit][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="20507-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="20507-142">**Slučování logiku** – když primární oblasti je dostupná, všechny musí být migrovány stav a data, která byla vytvořena v sekundární lokalitě zpět na primární oblasti.</span><span class="sxs-lookup"><span data-stu-id="20507-142">**Merging logic** - When the primary region becomes available again, all the state and data that have been created in the secondary site must be migrated back to the primary region.</span></span> <span data-ttu-id="20507-143">Tento stav a data většinou má vztah k identit zařízení a metadata aplikace, které je potřeba sloučit s primární IoT hub a jiných úložišť specifické pro aplikaci v primární oblasti.</span><span class="sxs-lookup"><span data-stu-id="20507-143">This state and data mostly relates to device identities and application metadata, which must be merged with the primary IoT hub and any other application-specific stores in the primary region.</span></span> <span data-ttu-id="20507-144">Pro zjednodušení tento krok, měli byste použít idempotent operace.</span><span class="sxs-lookup"><span data-stu-id="20507-144">To simplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="20507-145">Operace Idempotent minimalizovat vedlejší účinky z daného distribučního konzistentní událostí a z duplikáty nebo doručení na více systémů pořadí událostí.</span><span class="sxs-lookup"><span data-stu-id="20507-145">Idempotent operations minimize the side-effects from the eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="20507-146">Kromě toho logiku aplikace by měl být pro tolerovat potenciální nekonzistence nebo "mírně" datum stavu.</span><span class="sxs-lookup"><span data-stu-id="20507-146">In addition, the application logic should be designed to tolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="20507-147">Tato situace může nastat v důsledku další čas potřebný pro systému "retušovat" podle plánovaných bodů obnovení (RPO).</span><span class="sxs-lookup"><span data-stu-id="20507-147">This situation can occur due to the additional time it takes for the system to "heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="20507-148">Další kroky</span><span class="sxs-lookup"><span data-stu-id="20507-148">Next steps</span></span>
<span data-ttu-id="20507-149">Další informace o službě Azure IoT Hub na následujících odkazech:</span><span class="sxs-lookup"><span data-stu-id="20507-149">Follow these links to learn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="20507-150">[Začínáme s centra IoT (kurz)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="20507-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="20507-151">[Co je Azure IoT Hub?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="20507-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
