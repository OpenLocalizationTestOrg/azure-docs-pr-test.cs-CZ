---
title: "obory názvů spárovat aaaAzure Service Bus | Microsoft Docs"
description: "Podrobnosti implementace spárované obor názvů a náklady"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2440c8d3-ed2e-47e0-93cf-ab7fbb855d2e
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: 4c44b2b95d2228e1ad8075b52634d88a1593d3b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="paired-namespace-implementation-details-and-cost-implications"></a><span data-ttu-id="90f0b-103">Spárovat podrobnosti implementace obor názvů a náklady dopad</span><span class="sxs-lookup"><span data-stu-id="90f0b-103">Paired namespace implementation details and cost implications</span></span>
<span data-ttu-id="90f0b-104">Hello [PairNamespaceAsync] [ PairNamespaceAsync] metoda, použití [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] instance, provádí viditelné úlohy vaším jménem.</span><span class="sxs-lookup"><span data-stu-id="90f0b-104">hello [PairNamespaceAsync][PairNamespaceAsync] method, using a [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] instance, performs visible tasks on your behalf.</span></span> <span data-ttu-id="90f0b-105">Vzhledem k tomu, že jsou náklady aspekty při použití funkce hello, je užitečné toounderstand ty úlohy, aby očekáváte hello chování při Odehrává se.</span><span class="sxs-lookup"><span data-stu-id="90f0b-105">Because there are cost considerations when using hello feature, it is useful toounderstand those tasks so that you expect hello behavior when it happens.</span></span> <span data-ttu-id="90f0b-106">Hello API zapojí hello následující automatické chování vaším jménem:</span><span class="sxs-lookup"><span data-stu-id="90f0b-106">hello API engages hello following automatic behavior on your behalf:</span></span>

* <span data-ttu-id="90f0b-107">Vytvoření nevyřízených položek fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-107">Creation of backlog queues.</span></span>
* <span data-ttu-id="90f0b-108">Vytvoření [MessageSender] [ MessageSender] objekt, který komunikuje tooqueues nebo témata.</span><span class="sxs-lookup"><span data-stu-id="90f0b-108">Creation of a [MessageSender][MessageSender] object that talks tooqueues or topics.</span></span>
* <span data-ttu-id="90f0b-109">Když entity přenosu zpráv stane nedostupným, odešle zprávy ping toohello entity v pokusu o toodetect při dané entity opět k dispozici.</span><span class="sxs-lookup"><span data-stu-id="90f0b-109">When a messaging entity becomes unavailable, sends ping messages toohello entity in an attempt toodetect when that entity becomes available again.</span></span>
* <span data-ttu-id="90f0b-110">Volitelně vytvoří sadu "čerpadel zpráva", přesuňte zprávy z hello nevyřízené položky fronty toohello primární fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-110">Optionally creates of a set of “message pumps” that move messages from hello backlog queues toohello primary queues.</span></span>
* <span data-ttu-id="90f0b-111">Koordinuje ukončovací nebo chybující Dobrý den, primární a sekundární [MessagingFactory] [ MessagingFactory] instance.</span><span class="sxs-lookup"><span data-stu-id="90f0b-111">Coordinates closing/faulting of hello primary and secondary [MessagingFactory][MessagingFactory] instances.</span></span>

<span data-ttu-id="90f0b-112">Na vysoké úrovni, hello funkce funguje takto: primární entita hello je v pořádku, dojde k žádné změny chování.</span><span class="sxs-lookup"><span data-stu-id="90f0b-112">At a high level, hello feature works as follows: when hello primary entity is healthy, no behavior changes occur.</span></span> <span data-ttu-id="90f0b-113">Když hello [FailoverInterval] [ FailoverInterval] po uplynutí předem doba trvání, a žádné úspěšné zasílá hello primární entity se zobrazí po bez pouze dočasné [MessagingException] [ MessagingException] nebo [TimeoutException][TimeoutException], dojde k hello následující chování:</span><span class="sxs-lookup"><span data-stu-id="90f0b-113">When hello [FailoverInterval][FailoverInterval] duration elapses, and hello primary entity sees no successful sends after a non-transient [MessagingException][MessagingException] or a [TimeoutException][TimeoutException], hello following behavior occurs:</span></span>

1. <span data-ttu-id="90f0b-114">Odešlete operations toohello primární entity jsou zakázány a příkazy ping systému hello hello primární entity, dokud příkazy ping mohou být zajišťovány úspěšně.</span><span class="sxs-lookup"><span data-stu-id="90f0b-114">Send operations toohello primary entity are disabled and hello system pings hello primary entity until pings can be successfully delivered.</span></span>
2. <span data-ttu-id="90f0b-115">Je vybrán náhodných nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-115">A random backlog queue is selected.</span></span>
3. <span data-ttu-id="90f0b-116">[BrokeredMessage] [ BrokeredMessage] objekty jsou směrované toohello vybrali nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-116">[BrokeredMessage][BrokeredMessage] objects are routed toohello chosen backlog queue.</span></span>
4. <span data-ttu-id="90f0b-117">Pokud se nezdaří toohello operaci odeslání vybrali nevyřízené položky fronty, této fronty pocházejí z hello otočení a je vybraná novou frontu.</span><span class="sxs-lookup"><span data-stu-id="90f0b-117">If a send operation toohello chosen backlog queue fails, that queue is pulled from hello rotation and a new queue is selected.</span></span> <span data-ttu-id="90f0b-118">Všech uživatelů na hello [MessagingFactory] [ MessagingFactory] další instance hello selhání.</span><span class="sxs-lookup"><span data-stu-id="90f0b-118">All senders on hello [MessagingFactory][MessagingFactory] instance learn of hello failure.</span></span>

<span data-ttu-id="90f0b-119">Následující obrázky Hello zobrazit v ní hello pořadí.</span><span class="sxs-lookup"><span data-stu-id="90f0b-119">hello following figures depict hello sequence.</span></span> <span data-ttu-id="90f0b-120">Nejprve hello odesílatel odešle zprávy.</span><span class="sxs-lookup"><span data-stu-id="90f0b-120">First, hello sender sends messages.</span></span>

![Spárované obory názvů][0]

<span data-ttu-id="90f0b-122">Při selhání toosend toohello primární fronty začne odesílatel hello odesílání zpráv tooa náhodně vybrali nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-122">Upon failure toosend toohello primary queue, hello sender begins sending messages tooa randomly chosen backlog queue.</span></span> <span data-ttu-id="90f0b-123">Současně spustí úlohu příkazu ping.</span><span class="sxs-lookup"><span data-stu-id="90f0b-123">Simultaneously, it starts a ping task.</span></span>

![Spárované obory názvů][1]

<span data-ttu-id="90f0b-125">V tomto okamžiku hello zprávy jsou stále v hello sekundární fronty a nebyly dodány toohello primární fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-125">At this point hello messages are still in hello secondary queue and have not been delivered toohello primary queue.</span></span> <span data-ttu-id="90f0b-126">Jakmile hello primární fronta je v pořádku znovu, by měl běžet hello Trativod alespoň jeden proces.</span><span class="sxs-lookup"><span data-stu-id="90f0b-126">Once hello primary queue is healthy again, at least one process should be running hello syphon.</span></span> <span data-ttu-id="90f0b-127">Hello Trativod přináší hello zprávy ze všech hello různé nevyřízených položek fronty toohello správné cílové entity (fronty a témata).</span><span class="sxs-lookup"><span data-stu-id="90f0b-127">hello syphon delivers hello messages from all hello various backlog queues toohello proper destination entities (queues and topics).</span></span>

![Spárované obory názvů][2]

<span data-ttu-id="90f0b-129">Hello zbývající část tohoto tématu popisuje hello konkrétní podrobnosti o fungování tyto údaje.</span><span class="sxs-lookup"><span data-stu-id="90f0b-129">hello remainder of this topic discusses hello specific details of how these pieces work.</span></span>

## <a name="creation-of-backlog-queues"></a><span data-ttu-id="90f0b-130">Vytvoření nevyřízených položek fronty</span><span class="sxs-lookup"><span data-stu-id="90f0b-130">Creation of backlog queues</span></span>
<span data-ttu-id="90f0b-131">Hello [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] objekt předaný toohello [PairNamespaceAsync] [ PairNamespaceAsync] metoda označuje hello počet nevyřízených položek fronty, které chcete toouse.</span><span class="sxs-lookup"><span data-stu-id="90f0b-131">hello [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] object passed toohello [PairNamespaceAsync][PairNamespaceAsync] method indicates hello number of backlog queues you want toouse.</span></span> <span data-ttu-id="90f0b-132">Každou frontu nevyřízených položek se potom vytvoří s hello následující vlastnosti explicitně nastavit (všechny ostatní hodnoty jsou nastaveny toohello [QueueDescription] [ QueueDescription] výchozí nastavení):</span><span class="sxs-lookup"><span data-stu-id="90f0b-132">Each backlog queue is then created with hello following properties explicitly set (all other values are set toohello [QueueDescription][QueueDescription] defaults):</span></span>

| <span data-ttu-id="90f0b-133">Cesta</span><span class="sxs-lookup"><span data-stu-id="90f0b-133">Path</span></span> | <span data-ttu-id="90f0b-134">[primární obor názvů] / x-servicebus přenos / [index] kde [index] je hodnota [0, BacklogQueueCount)</span><span class="sxs-lookup"><span data-stu-id="90f0b-134">[primary namespace]/x-servicebus-transfer/[index] where [index] is a value in [0, BacklogQueueCount)</span></span> |
| --- | --- |
| <span data-ttu-id="90f0b-135">MaxSizeInMegabytes</span><span class="sxs-lookup"><span data-stu-id="90f0b-135">MaxSizeInMegabytes</span></span> |<span data-ttu-id="90f0b-136">5120</span><span class="sxs-lookup"><span data-stu-id="90f0b-136">5120</span></span> |
| <span data-ttu-id="90f0b-137">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="90f0b-137">MaxDeliveryCount</span></span> |<span data-ttu-id="90f0b-138">int. MaxValue</span><span class="sxs-lookup"><span data-stu-id="90f0b-138">int.MaxValue</span></span> |
| <span data-ttu-id="90f0b-139">DefaultMessageTimeToLive</span><span class="sxs-lookup"><span data-stu-id="90f0b-139">DefaultMessageTimeToLive</span></span> |<span data-ttu-id="90f0b-140">TimeSpan.MaxValue, což</span><span class="sxs-lookup"><span data-stu-id="90f0b-140">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="90f0b-141">AutoDeleteOnIdle</span><span class="sxs-lookup"><span data-stu-id="90f0b-141">AutoDeleteOnIdle</span></span> |<span data-ttu-id="90f0b-142">TimeSpan.MaxValue, což</span><span class="sxs-lookup"><span data-stu-id="90f0b-142">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="90f0b-143">Trvání uzamčení</span><span class="sxs-lookup"><span data-stu-id="90f0b-143">LockDuration</span></span> |<span data-ttu-id="90f0b-144">1 minuta</span><span class="sxs-lookup"><span data-stu-id="90f0b-144">1 minute</span></span> |
| <span data-ttu-id="90f0b-145">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="90f0b-145">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="90f0b-146">Hodnota TRUE</span><span class="sxs-lookup"><span data-stu-id="90f0b-146">true</span></span> |
| <span data-ttu-id="90f0b-147">EnableBatchedOperations</span><span class="sxs-lookup"><span data-stu-id="90f0b-147">EnableBatchedOperations</span></span> |<span data-ttu-id="90f0b-148">Hodnota TRUE</span><span class="sxs-lookup"><span data-stu-id="90f0b-148">true</span></span> |

<span data-ttu-id="90f0b-149">Například vytvořen hello první nevyřízených položek fronty pro obor názvů **contoso** jmenuje `contoso/x-servicebus-transfer/0`.</span><span class="sxs-lookup"><span data-stu-id="90f0b-149">For example, hello first backlog queue created for namespace **contoso** is named `contoso/x-servicebus-transfer/0`.</span></span>

<span data-ttu-id="90f0b-150">Při vytváření front hello, hello kód nejprve toosee ověří, zda existuje takový fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-150">When creating hello queues, hello code first checks toosee if such a queue exists.</span></span> <span data-ttu-id="90f0b-151">Pokud hello fronta neexistuje, je vytvářena fronta hello.</span><span class="sxs-lookup"><span data-stu-id="90f0b-151">If hello queue does not exist, then hello queue is created.</span></span> <span data-ttu-id="90f0b-152">Kód Hello nemá vyčištění "výběr" nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-152">hello code does not clean up "extra" backlog queues.</span></span> <span data-ttu-id="90f0b-153">Konkrétně, pokud hello aplikace s hello primární obor názvů **contoso** požadavky pět nevyřízené položky fronty, ale nevyřízené položky fronty s cestou hello `contoso/x-servicebus-transfer/7` existuje, že navíc nevyřízené položky fronty stále přítomen, ale nepoužívá.</span><span class="sxs-lookup"><span data-stu-id="90f0b-153">Specifically, if hello application with hello primary namespace **contoso** requests five backlog queues but a backlog queue with hello path `contoso/x-servicebus-transfer/7` exists, that extra backlog queue is still present but is not used.</span></span> <span data-ttu-id="90f0b-154">systém Hello explicitně povolí tooexist navíc nevyřízené položky fronty, která nebyla použita.</span><span class="sxs-lookup"><span data-stu-id="90f0b-154">hello system explicitly allows extra backlog queues tooexist that would not be used.</span></span> <span data-ttu-id="90f0b-155">Jako vlastník hello obor názvů je zodpovědná za vyčištění žádné nepoužité nebo nežádoucí nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-155">As hello namespace owner, you are responsible for cleaning up any unused/unwanted backlog queues.</span></span> <span data-ttu-id="90f0b-156">Hello důvod pro toto rozhodnutí je, že Service Bus nemůže vědět, jaké účely existovat pro všechny fronty hello v oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="90f0b-156">hello reason for this decision is that Service Bus cannot know what purposes exist for all hello queues in your namespace.</span></span> <span data-ttu-id="90f0b-157">Kromě toho pokud existuje se zadaným názvem hello fronty, ale nesplňuje hello předpokládá, že [QueueDescription][QueueDescription], pak jsou vaše důvody pro vlastní Změna výchozího chování hello.</span><span class="sxs-lookup"><span data-stu-id="90f0b-157">Furthermore, if a queue exists with hello given name but does not meet hello assumed [QueueDescription][QueueDescription], then your reasons are your own for changing hello default behavior.</span></span> <span data-ttu-id="90f0b-158">Žádné záruky jsou vytvářeny pro úpravy toohello nevyřízené položky fronty podle vašeho kódu.</span><span class="sxs-lookup"><span data-stu-id="90f0b-158">No guarantees are made for modifications toohello backlog queues by your code.</span></span> <span data-ttu-id="90f0b-159">Ujistěte se, že tootest změny důkladně.</span><span class="sxs-lookup"><span data-stu-id="90f0b-159">Make sure tootest your changes thoroughly.</span></span>

## <a name="custom-messagesender"></a><span data-ttu-id="90f0b-160">Vlastní MessageSender</span><span class="sxs-lookup"><span data-stu-id="90f0b-160">Custom MessageSender</span></span>
<span data-ttu-id="90f0b-161">Při odesílání, všechny zprávy projít interní [MessageSender] [ MessageSender] objekt, který se chovat normálně když všechno funguje a přesměruje toohello nevyřízené položky fronty při věcí "break."</span><span class="sxs-lookup"><span data-stu-id="90f0b-161">When sending, all messages go through an internal [MessageSender][MessageSender] object that behaves normally when everything works, and redirects toohello backlog queues when things "break."</span></span> <span data-ttu-id="90f0b-162">Po přijetí selhání bez přechodná, spustí časovač.</span><span class="sxs-lookup"><span data-stu-id="90f0b-162">Upon receiving a non-transient failure, a timer starts.</span></span> <span data-ttu-id="90f0b-163">Po [časový interval] [ TimeSpan] období skládající se z hello [FailoverInterval] [ FailoverInterval] hodnotu vlastnosti, během které se odesílají žádné úspěšné zprávy , provozuje hello převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="90f0b-163">After a [TimeSpan][TimeSpan] period consisting of hello [FailoverInterval][FailoverInterval] property value during which no successful messages are sent, hello failover is engaged.</span></span> <span data-ttu-id="90f0b-164">V tomto okamžiku hello následující umět poradit pro každou entitu:</span><span class="sxs-lookup"><span data-stu-id="90f0b-164">At this point, hello following things happen for each entity:</span></span>

* <span data-ttu-id="90f0b-165">Spustí úlohu ping každých [PingPrimaryInterval] [ PingPrimaryInterval] toocheck Pokud hello entita je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="90f0b-165">A ping task executes every [PingPrimaryInterval][PingPrimaryInterval] toocheck if hello entity is available.</span></span> <span data-ttu-id="90f0b-166">Jakmile tato úloha úspěšná, všechny klientský kód, který používá hello entitu okamžitě spustí, odeslání nové zprávy toohello primární oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="90f0b-166">Once this task succeeds, all client code that uses hello entity immediately starts sending new messages toohello primary namespace.</span></span>
* <span data-ttu-id="90f0b-167">Budoucí požadavky toosend toothat stejné entity z jiní odesílatelé bude mít za následek hello [BrokeredMessage] [ BrokeredMessage] odesílány toobe upravit toosit ve frontě hello nevyřízených položek.</span><span class="sxs-lookup"><span data-stu-id="90f0b-167">Future requests toosend toothat same entity from any other senders will result in hello [BrokeredMessage][BrokeredMessage] being sent toobe modified toosit in hello backlog queue.</span></span> <span data-ttu-id="90f0b-168">Změna Hello odebere hello některé vlastnosti [BrokeredMessage] [ BrokeredMessage] objektu a ukládá je jinde.</span><span class="sxs-lookup"><span data-stu-id="90f0b-168">hello modification removes some properties from hello [BrokeredMessage][BrokeredMessage] object and stores them elsewhere.</span></span> <span data-ttu-id="90f0b-169">Hello následující vlastnosti jsou vymazána a přidají pod nový alias, povolení služby Service Bus a hello SDK tooprocess zprávy jednotně:</span><span class="sxs-lookup"><span data-stu-id="90f0b-169">hello following properties are cleared and added under a new alias, allowing Service Bus and hello SDK tooprocess messages uniformly:</span></span>

| <span data-ttu-id="90f0b-170">Původní název vlastnosti</span><span class="sxs-lookup"><span data-stu-id="90f0b-170">Old Property Name</span></span> | <span data-ttu-id="90f0b-171">Nový název vlastnosti</span><span class="sxs-lookup"><span data-stu-id="90f0b-171">New Property Name</span></span> |
| --- | --- |
| <span data-ttu-id="90f0b-172">ID relace</span><span class="sxs-lookup"><span data-stu-id="90f0b-172">SessionId</span></span> |<span data-ttu-id="90f0b-173">x-ms-ID relace</span><span class="sxs-lookup"><span data-stu-id="90f0b-173">x-ms-sessionid</span></span> |
| <span data-ttu-id="90f0b-174">TimeToLive</span><span class="sxs-lookup"><span data-stu-id="90f0b-174">TimeToLive</span></span> |<span data-ttu-id="90f0b-175">x-ms-timetolive</span><span class="sxs-lookup"><span data-stu-id="90f0b-175">x-ms-timetolive</span></span> |
| <span data-ttu-id="90f0b-176">ScheduledEnqueueTimeUtc</span><span class="sxs-lookup"><span data-stu-id="90f0b-176">ScheduledEnqueueTimeUtc</span></span> |<span data-ttu-id="90f0b-177">x-ms-path</span><span class="sxs-lookup"><span data-stu-id="90f0b-177">x-ms-path</span></span> |

<span data-ttu-id="90f0b-178">původní cílovou cestu Hello je také uloženo ve zprávě hello jako vlastnost s názvem x-ms-path.</span><span class="sxs-lookup"><span data-stu-id="90f0b-178">hello original destination path is also stored within hello message as a property named x-ms-path.</span></span> <span data-ttu-id="90f0b-179">Tento návrh umožňuje zprávy pro mnoho toocoexist entity v jedné nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-179">This design allows messages for many entities toocoexist in a single backlog queue.</span></span> <span data-ttu-id="90f0b-180">Vlastnosti Hello přeložen zpět Trativod hello.</span><span class="sxs-lookup"><span data-stu-id="90f0b-180">hello properties are translated back by hello syphon.</span></span>

<span data-ttu-id="90f0b-181">Hello vlastní [MessageSender] [ MessageSender] objekt může dojít k potížím při zprávy přístupu limit 256 KB hello a využívána převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="90f0b-181">hello custom [MessageSender][MessageSender] object can encounter issues when messages approach hello 256-KB limit and failover is engaged.</span></span> <span data-ttu-id="90f0b-182">Hello vlastní [MessageSender] [ MessageSender] objekt ukládá zprávy pro všechny fronty a témata společně v hello nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-182">hello custom [MessageSender][MessageSender] object stores messages for all queues and topics together in hello backlog queues.</span></span> <span data-ttu-id="90f0b-183">Tento objekt zkombinuje zprávy z mnoha základní barvy společně v rámci hello nevyřízené položky fronty.</span><span class="sxs-lookup"><span data-stu-id="90f0b-183">This object mixes messages from many primaries together within hello backlog queues.</span></span> <span data-ttu-id="90f0b-184">toohandle Vyrovnávání zatížení mezi mnoho klientů, které neznáte každý jiných, hello SDK náhodně vybere jeden nevyřízených položek fronty pro každou [QueueClient] [ QueueClient] nebo [TopicClient] [ TopicClient] vytvoříte v kódu.</span><span class="sxs-lookup"><span data-stu-id="90f0b-184">toohandle load balancing among many clients that do not know each other, hello SDK randomly picks one backlog queue for each [QueueClient][QueueClient] or [TopicClient][TopicClient] you create in code.</span></span>

## <a name="pings"></a><span data-ttu-id="90f0b-185">Příkazy ping</span><span class="sxs-lookup"><span data-stu-id="90f0b-185">Pings</span></span>
<span data-ttu-id="90f0b-186">Zprávu ping je prázdná [BrokeredMessage] [ BrokeredMessage] s jeho [ContentType] [ ContentType] nastavena tooapplication/vnd.ms-servicebus-ping a [TimeToLive] [ TimeToLive] hodnota 1 sekunda.</span><span class="sxs-lookup"><span data-stu-id="90f0b-186">A ping message is an empty [BrokeredMessage][BrokeredMessage] with its [ContentType][ContentType] property set tooapplication/vnd.ms-servicebus-ping and a [TimeToLive][TimeToLive] value of 1 second.</span></span> <span data-ttu-id="90f0b-187">Tento příkaz ping má jeden speciální vlastnosti v Service Bus: hello server nikdy poskytuje příkazu ping, když si vyžádá všechny volající [BrokeredMessage][BrokeredMessage].</span><span class="sxs-lookup"><span data-stu-id="90f0b-187">This ping has one special characteristic in Service Bus: hello server never delivers a ping when any caller requests a [BrokeredMessage][BrokeredMessage].</span></span> <span data-ttu-id="90f0b-188">Proto není nutné toolearn jak tooreceive a tyto zprávy ignorovat.</span><span class="sxs-lookup"><span data-stu-id="90f0b-188">Thus, you never have toolearn how tooreceive and ignore these messages.</span></span> <span data-ttu-id="90f0b-189">Každá entita (jedinečný fronta nebo téma) za [MessagingFactory] [ MessagingFactory] instance pro každý klient bude příkazu ping zkontrolujte dosažitelnost při jsou považovány za toobe není k dispozici.</span><span class="sxs-lookup"><span data-stu-id="90f0b-189">Each entity (unique queue or topic) per [MessagingFactory][MessagingFactory] instance per client will be pinged when they are considered toobe unavailable.</span></span> <span data-ttu-id="90f0b-190">Ve výchozím nastavení k tomu dojde jednou za minutu.</span><span class="sxs-lookup"><span data-stu-id="90f0b-190">By default, this happens once per minute.</span></span> <span data-ttu-id="90f0b-191">Zprávy ping jsou považovány za toobe regulární zpráv Service Bus a může mít za následek poplatky za zprávy a šířky pásma.</span><span class="sxs-lookup"><span data-stu-id="90f0b-191">Ping messages are considered toobe regular Service Bus messages, and can result in charges for bandwidth and messages.</span></span> <span data-ttu-id="90f0b-192">Jakmile hello klientům zjišťovat, že systém hello je k dispozici, zastavte hello zprávy.</span><span class="sxs-lookup"><span data-stu-id="90f0b-192">As soon as hello clients detect that hello system is available, hello messages stop.</span></span>

## <a name="hello-syphon"></a><span data-ttu-id="90f0b-193">Trativod Hello</span><span class="sxs-lookup"><span data-stu-id="90f0b-193">hello syphon</span></span>
<span data-ttu-id="90f0b-194">Alespoň jeden spustitelný program v aplikaci hello by měl aktivně běžet Trativod hello.</span><span class="sxs-lookup"><span data-stu-id="90f0b-194">At least one executable program in hello application should be actively running hello syphon.</span></span> <span data-ttu-id="90f0b-195">Hello Trativod provádí s dlouhým přijímat dotazování, které trvá po 15 minut.</span><span class="sxs-lookup"><span data-stu-id="90f0b-195">hello syphon performs a long poll receive that lasts 15 minutes.</span></span> <span data-ttu-id="90f0b-196">Když jsou k dispozici všechny entity a máte 10 nevyřízené položky fronty, hello aplikace, který je hostitelem volání Trativod hello hello přijímat operaci 40 časy za hodinu, 960 časy denně a časy 28 800 bitů za 30 dní.</span><span class="sxs-lookup"><span data-stu-id="90f0b-196">When all entities are available and you have 10 backlog queues, hello application that hosts hello syphon calls hello receive operation 40 times per hour, 960 times per day, and 28800 times in 30 days.</span></span> <span data-ttu-id="90f0b-197">Při Trativod hello je aktivně přesunu zprávy z primární fronty toohello hello nevyřízených položek, každá zpráva vyskytne hello následující poplatky (standardní poplatky za velikost zprávy a šířky pásma použít ve všech fázích):</span><span class="sxs-lookup"><span data-stu-id="90f0b-197">When hello syphon is actively moving messages from hello backlog toohello primary queue, each message experiences hello following charges (standard charges for message size and bandwidth apply in all stages):</span></span>

1. <span data-ttu-id="90f0b-198">Odešlete toohello nevyřízených položek.</span><span class="sxs-lookup"><span data-stu-id="90f0b-198">Send toohello backlog.</span></span>
2. <span data-ttu-id="90f0b-199">Přijímat z hello nevyřízených položek.</span><span class="sxs-lookup"><span data-stu-id="90f0b-199">Receive from hello backlog.</span></span>
3. <span data-ttu-id="90f0b-200">Odešlete toohello primární.</span><span class="sxs-lookup"><span data-stu-id="90f0b-200">Send toohello primary.</span></span>
4. <span data-ttu-id="90f0b-201">Přijímat z primární hello.</span><span class="sxs-lookup"><span data-stu-id="90f0b-201">Receive from hello primary.</span></span>

## <a name="closefault-behavior"></a><span data-ttu-id="90f0b-202">Zavřít nebo selhání chování</span><span class="sxs-lookup"><span data-stu-id="90f0b-202">Close/fault behavior</span></span>
<span data-ttu-id="90f0b-203">V rámci aplikace, který je hostitelem hello Trativod, jednou hello primární nebo sekundární [MessagingFactory] [ MessagingFactory] chyb nebo je uzavřena bez jeho partnera také dochází k chybě nebo k uzavření a hello Trativod zjistí tento stav , hello Trativod funguje.</span><span class="sxs-lookup"><span data-stu-id="90f0b-203">Within an application that hosts hello syphon, once hello primary or secondary [MessagingFactory][MessagingFactory] faults or is closed without its partner also being faulted/closed and hello syphon detects this state, hello syphon acts.</span></span> <span data-ttu-id="90f0b-204">Pokud hello dalších [MessagingFactory] [ MessagingFactory] není uzavřený během 5 sekund, bude hello Trativod poruch stále otevřete hello [MessagingFactory] [ MessagingFactory] .</span><span class="sxs-lookup"><span data-stu-id="90f0b-204">If hello other [MessagingFactory][MessagingFactory] is not closed within 5 seconds, hello syphon will fault hello still open [MessagingFactory][MessagingFactory].</span></span>

## <a name="next-steps"></a><span data-ttu-id="90f0b-205">Další kroky</span><span class="sxs-lookup"><span data-stu-id="90f0b-205">Next steps</span></span>
<span data-ttu-id="90f0b-206">V tématu [asynchronní vzory a vysoká dostupnost pro zasílání zpráv] [ Asynchronous messaging patterns and high availability] pro podrobnou diskuzi o asynchronní zasílání zpráv Service Bus.</span><span class="sxs-lookup"><span data-stu-id="90f0b-206">See [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability] for a detailed discussion of Service Bus asynchronous messaging.</span></span> 

[PairNamespaceAsync]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_PairNamespaceAsync_Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_
[SendAvailabilityPairedNamespaceOptions]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[FailoverInterval]: /dotnet/api/microsoft.servicebus.messaging.pairednamespaceoptions#Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_FailoverInterval
[MessagingException]: /dotnet/api/microsoft.servicebus.messaging.messagingexception
[TimeoutException]: https://msdn.microsoft.com/library/azure/system.timeoutexception.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage
[QueueDescription]: /dotnet/api/microsoft.servicebus.messaging.queuedescription
[TimeSpan]: https://msdn.microsoft.com/library/azure/system.timespan.aspx
[PingPrimaryInterval]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions#Microsoft_ServiceBus_Messaging_SendAvailabilityPairedNamespaceOptions_PingPrimaryInterval
[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[TopicClient]: /dotnet/api/microsoft.servicebus.messaging.topicclient
[ContentType]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_ContentType
[TimeToLive]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md
[0]: ./media/service-bus-paired-namespaces/IC673405.png
[1]: ./media/service-bus-paired-namespaces/IC673406.png
[2]: ./media/service-bus-paired-namespaces/IC673407.png
