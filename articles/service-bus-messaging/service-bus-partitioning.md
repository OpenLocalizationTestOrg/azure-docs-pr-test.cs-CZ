---
title: "aaaCreate oddíly témata a fronty Azure Service Bus | Microsoft Docs"
description: "Popisuje, jak zprostředkovává toopartition fronty Service Bus a témat pomocí více zprávy."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a0c7d5a2-4876-42cb-8344-a1fc988746e7
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm;hillaryc
ms.openlocfilehash: 6d42556a0714d6a012dc319f662521c8b0bb958b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="partitioned-queues-and-topics"></a><span data-ttu-id="da15b-103">Dělené fronty a témata</span><span class="sxs-lookup"><span data-stu-id="da15b-103">Partitioned queues and topics</span></span>
<span data-ttu-id="da15b-104">Azure Service Bus používá více zpráv zprostředkovatelé tooprocess zprávy a více zasílání zpráv ukládá toostore zprávy.</span><span class="sxs-lookup"><span data-stu-id="da15b-104">Azure Service Bus employs multiple message brokers tooprocess messages and multiple messaging stores toostore messages.</span></span> <span data-ttu-id="da15b-105">Konvenční fronta nebo téma zpracování zprostředkovatelem jedné zprávy a uloženy v úložišti jeden zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-105">A conventional queue or topic is handled by a single message broker and stored in one messaging store.</span></span> <span data-ttu-id="da15b-106">Service Bus *oddíly* povolit front a témat, nebo *entity pro zasílání zpráv*, toobe rozděleného mezi více zpráv zprostředkovatelé a úložiště pro zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-106">Service Bus *partitions* enable queues and topics, or *messaging entities*, toobe partitioned across multiple message brokers and messaging stores.</span></span> <span data-ttu-id="da15b-107">To znamená, že hello celkovou propustnost dělené entity je již omezena hello výkonu zprostředkovatele jedné zprávy nebo úložišti pro přenos zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-107">This means that hello overall throughput of a partitioned entity is no longer limited by hello performance of a single message broker or messaging store.</span></span> <span data-ttu-id="da15b-108">Kromě toho dočasnému výpadku zasílání zpráv úložiště nevykresluje oddílů fronta nebo téma není k dispozici.</span><span class="sxs-lookup"><span data-stu-id="da15b-108">In addition, a temporary outage of a messaging store does not render a partitioned queue or topic unavailable.</span></span> <span data-ttu-id="da15b-109">Oddílů fronty a témata může obsahovat všechny pokročilé funkce služby Service Bus, například podporu transakce a relací.</span><span class="sxs-lookup"><span data-stu-id="da15b-109">Partitioned queues and topics can contain all advanced Service Bus features, such as support for transactions and sessions.</span></span>

<span data-ttu-id="da15b-110">Informace o interní informace o Service Bus najdete v tématu hello [architektura služby Service Bus] [ Service Bus architecture] článku.</span><span class="sxs-lookup"><span data-stu-id="da15b-110">For information about Service Bus internals, see hello [Service Bus architecture][Service Bus architecture] article.</span></span>

<span data-ttu-id="da15b-111">Ve výchozím nastavení při vytváření entity na všechny fronty a témata v Standard a Premium dělení je povoleno zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-111">Partitioning is enabled by default at entity creation on all queues and topics in both Standard and Premium messaging.</span></span> <span data-ttu-id="da15b-112">Můžete vytvořit standardní vrstvě entity pro zasílání zpráv bez vytváření oddílů, ale front a témat v oboru názvů Premium jsou vždy oddíly; Tuto možnost nelze zakázat.</span><span class="sxs-lookup"><span data-stu-id="da15b-112">You can create Standard messaging tier entities without partitioning, but queues and topics in a Premium namespace are always partitioned; this option cannot be disabled.</span></span> 

<span data-ttu-id="da15b-113">Není možné toochange hello oddílů možnost na existující frontu nebo téma na úrovních Standard nebo Premium, můžete nastavit pouze možnost hello při vytvoření hello entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-113">It is not possible toochange hello partitioning option on an existing queue or topic in either Standard or Premium tiers, you can only set hello option when you create hello entity.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="da15b-114">Jak to funguje</span><span class="sxs-lookup"><span data-stu-id="da15b-114">How it works</span></span>

<span data-ttu-id="da15b-115">Každý oddílů fronta nebo téma se skládá z více fragmentů.</span><span class="sxs-lookup"><span data-stu-id="da15b-115">Each partitioned queue or topic consists of multiple fragments.</span></span> <span data-ttu-id="da15b-116">Každý fragment je uložen v jiném úložišti zasílání zpráv a provádí jiná zpráva zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="da15b-116">Each fragment is stored in a different messaging store and handled by a different message broker.</span></span> <span data-ttu-id="da15b-117">Odeslání zprávy tooa oddílů fronta nebo téma sběrnice přiřadí hello tooone zprávy z fragmentů hello.</span><span class="sxs-lookup"><span data-stu-id="da15b-117">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="da15b-118">Výběr Hello je náhodně provádí sběrnice nebo můžete zadat pomocí klíč oddílu, který hello odesílatele.</span><span class="sxs-lookup"><span data-stu-id="da15b-118">hello selection is done randomly by Service Bus or by using a partition key that hello sender can specify.</span></span>

<span data-ttu-id="da15b-119">Pokud klient chce tooreceive zprávu z fronty oddílů nebo předplatné tooa oddílů tématu Service Bus dotazuje všechny fragmenty pro zprávy, pak vrátí hello první zprávu, která se získá z jakéhokoli z hello příjemce toohello úložiště pro zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-119">When a client wants tooreceive a message from a partitioned queue, or from a subscription tooa partitioned topic, Service Bus queries all fragments for messages, then returns hello first message that is obtained from any of hello messaging stores toohello receiver.</span></span> <span data-ttu-id="da15b-120">Service Bus mezipamětí hello další zprávy a vrátí je při přijetí další přijímat požadavky.</span><span class="sxs-lookup"><span data-stu-id="da15b-120">Service Bus caches hello other messages and returns them when it receives additional receive requests.</span></span> <span data-ttu-id="da15b-121">Přijímající klient nemá informace o vytváření oddílů hello; Hello zajišťující komunikaci s klienty chování oddílů fronta nebo téma (například číst, dokončení, odložení, nedoručených zpráv, prefetching) je identické toohello chování regulárních entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-121">A receiving client is not aware of hello partitioning; hello client-facing behavior of a partitioned queue or topic (for example, read, complete, defer, deadletter, prefetching) is identical toohello behavior of a regular entity.</span></span>

<span data-ttu-id="da15b-122">Není k dispozici bez dalších nákladů při odesílání zprávy, která se nebo přijímání zprávy z oddílů fronta nebo téma.</span><span class="sxs-lookup"><span data-stu-id="da15b-122">There is no additional cost when sending a message to, or receiving a message from, a partitioned queue or topic.</span></span>

## <a name="enable-partitioning"></a><span data-ttu-id="da15b-123">Povolit vytváření oddílů</span><span class="sxs-lookup"><span data-stu-id="da15b-123">Enable partitioning</span></span>

<span data-ttu-id="da15b-124">toouse rozdělena na oddíly front a témat s Azure Service Bus, použít hello Azure SDK verze 2.2 nebo vyšší, nebo zadat `api-version=2013-10` požadavků v protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="da15b-124">toouse partitioned queues and topics with Azure Service Bus, use hello Azure SDK version 2.2 or later, or specify `api-version=2013-10` in your HTTP requests.</span></span>

### <a name="standard"></a><span data-ttu-id="da15b-125">Standard</span><span class="sxs-lookup"><span data-stu-id="da15b-125">Standard</span></span>

<span data-ttu-id="da15b-126">Na úrovni Standard zasílání zpráv hello můžete vytvořit fronty Service Bus a témat v 1, 2, 3, 4 nebo 5 GB velikosti (hello výchozí hodnota je 1 GB).</span><span class="sxs-lookup"><span data-stu-id="da15b-126">In hello Standard messaging tier, you can create Service Bus queues and topics in 1, 2, 3, 4, or 5 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="da15b-127">Service Bus s oddílů povolen, vytváří 16 kopie (16 oddíly) hello entity pro každého GB zadáte.</span><span class="sxs-lookup"><span data-stu-id="da15b-127">With partitioning enabled, Service Bus creates 16 copies (16 partitions) of hello entity for each GB you specify.</span></span> <span data-ttu-id="da15b-128">Jako takový, když vytvoříte frontu, který je 5 GB velikost, s 16 oddíly hello maximální velikost fronty stane (5 \* 16) = 80 GB.</span><span class="sxs-lookup"><span data-stu-id="da15b-128">As such, if you create a queue that's 5 GB in size, with 16 partitions hello maximum queue size becomes (5 \* 16) = 80 GB.</span></span> <span data-ttu-id="da15b-129">Zobrazí maximální velikost hello oddílů fronta nebo téma na základě jeho položku na hello [portál Azure][Azure portal], v hello **přehled** okno této entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-129">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

### <a name="premium"></a><span data-ttu-id="da15b-130">Premium</span><span class="sxs-lookup"><span data-stu-id="da15b-130">Premium</span></span>

<span data-ttu-id="da15b-131">V oboru názvů úrovně Premium můžete vytvořit fronty Service Bus a témat v 1, 2, 3, 4, 5, 10, 20, 40 nebo 80 GB velikosti (hello výchozí hodnota je 1 GB).</span><span class="sxs-lookup"><span data-stu-id="da15b-131">In a Premium tier namespace, you can create Service Bus queues and topics in 1, 2, 3, 4, 5, 10, 20, 40, or 80 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="da15b-132">Service Bus s oddíly, ve výchozím nastavení povolená, vytvoří dva oddíly na entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-132">With partitioning enabled by default, Service Bus creates two partitions per entity.</span></span> <span data-ttu-id="da15b-133">Zobrazí maximální velikost hello oddílů fronta nebo téma na základě jeho položku na hello [portál Azure][Azure portal], v hello **přehled** okno této entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-133">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

<span data-ttu-id="da15b-134">Další informace o vytváření oddílů v zasílání zpráv úrovně Premium hello najdete v tématu [Service Bus Premium a Standard zasílání zpráv úrovně](service-bus-premium-messaging.md).</span><span class="sxs-lookup"><span data-stu-id="da15b-134">For more information about partitioning in hello Premium messaging tier, see [Service Bus Premium and Standard messaging tiers](service-bus-premium-messaging.md).</span></span> 

### <a name="create-a-partitioned-entity"></a><span data-ttu-id="da15b-135">Vytvoření oddílů entity</span><span class="sxs-lookup"><span data-stu-id="da15b-135">Create a partitioned entity</span></span>

<span data-ttu-id="da15b-136">Existuje několik způsobů toocreate oddílů fronta nebo téma.</span><span class="sxs-lookup"><span data-stu-id="da15b-136">There are several ways toocreate a partitioned queue or topic.</span></span> <span data-ttu-id="da15b-137">Když vytvoříte hello fronta nebo téma z vaší aplikace, můžete povolit vytváření oddílů pro hello fronta nebo téma podle v uvedeném pořadí nastavení hello [QueueDescription.EnablePartitioning] [ QueueDescription.EnablePartitioning] nebo [TopicDescription.EnablePartitioning] [ TopicDescription.EnablePartitioning] vlastnost příliš**true**.</span><span class="sxs-lookup"><span data-stu-id="da15b-137">When you create hello queue or topic from your application, you can enable partitioning for hello queue or topic by respectively setting hello [QueueDescription.EnablePartitioning][QueueDescription.EnablePartitioning] or [TopicDescription.EnablePartitioning][TopicDescription.EnablePartitioning] property too**true**.</span></span> <span data-ttu-id="da15b-138">Tyto vlastnosti musí být nastaven do fronty hello čas hello nebo se vytvoří téma.</span><span class="sxs-lookup"><span data-stu-id="da15b-138">These properties must be set at hello time hello queue or topic is created.</span></span> <span data-ttu-id="da15b-139">Jak jsme uvedli dříve, není možné toochange tyto vlastnosti existující fronta nebo téma.</span><span class="sxs-lookup"><span data-stu-id="da15b-139">As stated previously, it is not possible toochange these properties on an existing queue or topic.</span></span> <span data-ttu-id="da15b-140">Například:</span><span class="sxs-lookup"><span data-stu-id="da15b-140">For example:</span></span>

```csharp
// Create partitioned topic
NamespaceManager ns = NamespaceManager.CreateFromConnectionString(myConnectionString);
TopicDescription td = new TopicDescription(TopicName);
td.EnablePartitioning = true;
ns.CreateTopic(td);
```

<span data-ttu-id="da15b-141">Alternativně můžete vytvořit oddílů fronta nebo téma v hello [portál Azure] [ Azure portal] nebo v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="da15b-141">Alternatively, you can create a partitioned queue or topic in hello [Azure portal][Azure portal] or in Visual Studio.</span></span> <span data-ttu-id="da15b-142">Když vytvoříte se fronta nebo téma hello portálu, hello **povolit vytváření oddílů** možnost v hello fronta nebo téma **vytvořit** okno je ve výchozím nastavení zaškrtnuto.</span><span class="sxs-lookup"><span data-stu-id="da15b-142">When you create a queue or topic in hello portal, hello **Enable partitioning** option in hello queue or topic **Create** blade is checked by default.</span></span> <span data-ttu-id="da15b-143">Pouze můžete zakázat tuto možnost v entitě úrovně Standard; v hello dělení úroveň Premium je vždy povolena.</span><span class="sxs-lookup"><span data-stu-id="da15b-143">You can only disable this option in a Standard tier entity; in hello Premium tier partitioning is always enabled.</span></span> <span data-ttu-id="da15b-144">V sadě Visual Studio, klikněte na tlačítko hello **povolit vytváření oddílů** zaškrtnout políčko hello **novou frontu** nebo **nové téma** dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="da15b-144">In Visual Studio, click hello **Enable Partitioning** checkbox in hello **New Queue** or **New Topic** dialog box.</span></span>

## <a name="use-of-partition-keys"></a><span data-ttu-id="da15b-145">Použití klíče oddílů</span><span class="sxs-lookup"><span data-stu-id="da15b-145">Use of partition keys</span></span>
<span data-ttu-id="da15b-146">Zařazených do fronty do oddílů fronta nebo téma po zprávu Service Bus ověří přítomnost hello klíč oddílu.</span><span class="sxs-lookup"><span data-stu-id="da15b-146">When a message is enqueued into a partitioned queue or topic, Service Bus checks for hello presence of a partition key.</span></span> <span data-ttu-id="da15b-147">V případě, že některou najde, vybere hello fragment na základě tohoto klíče.</span><span class="sxs-lookup"><span data-stu-id="da15b-147">If it finds one, it selects hello fragment based on that key.</span></span> <span data-ttu-id="da15b-148">Pokud nenajde klíč oddílu, vybere hello fragment založený na interní algoritmu.</span><span class="sxs-lookup"><span data-stu-id="da15b-148">If it does not find a partition key, it selects hello fragment based on an internal algorithm.</span></span>

### <a name="using-a-partition-key"></a><span data-ttu-id="da15b-149">Použitím klíče oddílu</span><span class="sxs-lookup"><span data-stu-id="da15b-149">Using a partition key</span></span>
<span data-ttu-id="da15b-150">Některé scénáře, jako je například relací nebo transakce, vyžadují toobe zprávy, které jsou uložené v určité fragment.</span><span class="sxs-lookup"><span data-stu-id="da15b-150">Some scenarios, such as sessions or transactions, require messages toobe stored in a specific fragment.</span></span> <span data-ttu-id="da15b-151">Všechny tyto scénáře vyžadují použití hello klíč oddílu.</span><span class="sxs-lookup"><span data-stu-id="da15b-151">All these scenarios require hello use of a partition key.</span></span> <span data-ttu-id="da15b-152">Všechny zprávy této použití hello stejným klíčem oddílu přiřazené toohello stejné fragmentovat.</span><span class="sxs-lookup"><span data-stu-id="da15b-152">All messages that use hello same partition key are assigned toohello same fragment.</span></span> <span data-ttu-id="da15b-153">Pokud hello fragment je dočasně nedostupný, Service Bus vrátí chybu.</span><span class="sxs-lookup"><span data-stu-id="da15b-153">If hello fragment is temporarily unavailable, Service Bus returns an error.</span></span>

<span data-ttu-id="da15b-154">V závislosti na scénáři hello vlastnosti jiná zpráva slouží jako klíč oddílu:</span><span class="sxs-lookup"><span data-stu-id="da15b-154">Depending on hello scenario, different message properties are used as a partition key:</span></span>

<span data-ttu-id="da15b-155">**SessionId**: Pokud zpráva má hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] nastavte vlastnost a potom Service Bus používá tuto vlastnost jako klíč oddílu hello.</span><span class="sxs-lookup"><span data-stu-id="da15b-155">**SessionId**: If a message has hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses this property as hello partition key.</span></span> <span data-ttu-id="da15b-156">Tímto způsobem, všechny zprávy, které patří toohello stejné relace jsou zpracovávány hello stejné zprostředkovatele zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-156">This way, all messages that belong toohello same session are handled by hello same message broker.</span></span> <span data-ttu-id="da15b-157">To umožňuje zpráv Service Bus tooguarantee řazení a také hello konzistence stavy relací.</span><span class="sxs-lookup"><span data-stu-id="da15b-157">This enables Service Bus tooguarantee message ordering as well as hello consistency of session states.</span></span>

<span data-ttu-id="da15b-158">**PartitionKey**: Pokud zpráva má hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] vlastnost, která však není hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] nastavte vlastnost a potom Service Bus používá hello [PartitionKey] [ PartitionKey] vlastnost jako klíč oddílu hello.</span><span class="sxs-lookup"><span data-stu-id="da15b-158">**PartitionKey**: If a message has hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property but not hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses hello [PartitionKey][PartitionKey] property as hello partition key.</span></span> <span data-ttu-id="da15b-159">Pokud má obě hello uvítací zprávu [SessionId] [ SessionId] a hello [PartitionKey] [ PartitionKey] nastavení vlastnosti, obě vlastnosti musí být identické.</span><span class="sxs-lookup"><span data-stu-id="da15b-159">If hello message has both hello [SessionId][SessionId] and hello [PartitionKey][PartitionKey] properties set, both properties must be identical.</span></span> <span data-ttu-id="da15b-160">Pokud hello [PartitionKey] [ PartitionKey] je nastavena tooa jinou hodnotu než hello [SessionId] [ SessionId] neplatný vrátí vlastnost, Service Bus operace došlo k výjimce.</span><span class="sxs-lookup"><span data-stu-id="da15b-160">If hello [PartitionKey][PartitionKey] property is set tooa different value than hello [SessionId][SessionId] property, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="da15b-161">Hello [PartitionKey] [ PartitionKey] vlastnost je užitečný v případě, že odesílatel odešle vědět transakční zprávy mimo relaci.</span><span class="sxs-lookup"><span data-stu-id="da15b-161">hello [PartitionKey][PartitionKey] property should be used if a sender sends non-session aware transactional messages.</span></span> <span data-ttu-id="da15b-162">Hello klíč oddílu zajistí, že všechny zprávy, které se odesílají v rámci transakce jsou zpracovávány hello stejné zasílání zpráv zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="da15b-162">hello partition key ensures that all messages that are sent within a transaction are handled by hello same messaging broker.</span></span>

<span data-ttu-id="da15b-163">**MessageId**: Pokud hello fronta nebo téma má hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] vlastností nastavenou příliš**true** a hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] nebo [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] nejsou nastaveny vlastnosti a potom hello [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] vlastnost slouží jako klíč oddílu hello.</span><span class="sxs-lookup"><span data-stu-id="da15b-163">**MessageId**: If hello queue or topic has hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property set too**true** and hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] or [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] properties are not set, then hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] property serves as hello partition key.</span></span> <span data-ttu-id="da15b-164">(Všimněte si, že knihovny rozhraní Microsoft .NET a AMQP hello automaticky přiřadit ID zprávy, pokud hello odesílající aplikací nemá.) V takovém případě všechny kopie hello stejnou zprávu zpracovává hello stejné zprostředkovatele zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-164">(Note that hello Microsoft .NET and AMQP libraries automatically assign a message ID if hello sending application does not.) In this case, all copies of hello same message are handled by hello same message broker.</span></span> <span data-ttu-id="da15b-165">To umožňuje toodetect Service Bus a odstranění duplicitních zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-165">This enables Service Bus toodetect and eliminate duplicate messages.</span></span> <span data-ttu-id="da15b-166">Pokud hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] příliš není nastavena vlastnost**true**, Service Bus nebere v úvahu hello [MessageId] [ MessageId] vlastnost jako klíč oddílu.</span><span class="sxs-lookup"><span data-stu-id="da15b-166">If hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property is not set too**true**, Service Bus does not consider hello [MessageId][MessageId] property as a partition key.</span></span>

### <a name="not-using-a-partition-key"></a><span data-ttu-id="da15b-167">Není použitím klíče oddílu</span><span class="sxs-lookup"><span data-stu-id="da15b-167">Not using a partition key</span></span>
<span data-ttu-id="da15b-168">V hello chybí klíč oddílu distribuuje sběrnice zpráv v každém fragmentů kruhového dotazování tooall hello hello oddílů fronta nebo téma.</span><span class="sxs-lookup"><span data-stu-id="da15b-168">In hello absence of a partition key, Service Bus distributes messages in a round-robin fashion tooall hello fragments of hello partitioned queue or topic.</span></span> <span data-ttu-id="da15b-169">Pokud hello vybrali fragment není k dispozici, Service Bus přiřadí různé fragmentu tooa hello zprávy.</span><span class="sxs-lookup"><span data-stu-id="da15b-169">If hello chosen fragment is not available, Service Bus assigns hello message tooa different fragment.</span></span> <span data-ttu-id="da15b-170">Tímto způsobem operaci odeslání hello úspěšné i přes hello dočasné nedostupnosti úložišti pro přenos zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-170">This way, hello send operation succeeds despite hello temporary unavailability of a messaging store.</span></span> <span data-ttu-id="da15b-171">Nebudou však dosáhnout hello zaručit, řazení, že poskytuje klíč oddílu.</span><span class="sxs-lookup"><span data-stu-id="da15b-171">However, you will not achieve hello guaranteed ordering that a partition key provides.</span></span>

<span data-ttu-id="da15b-172">Podrobné informace o hello kompromis mezi dostupnost (žádný klíč oddílu) a konzistence (s použitím klíč oddílu), najdete v části [v tomto článku](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="da15b-172">For a more in-depth discussion of hello tradeoff between availability (no partition key) and consistency (using a partition key), see [this article](../event-hubs/event-hubs-availability-and-consistency.md).</span></span> <span data-ttu-id="da15b-173">Tyto informace se vztahuje stejnou měrou toopartitioned entit služby Service Bus a Event Hubs oddíly.</span><span class="sxs-lookup"><span data-stu-id="da15b-173">This information applies equally toopartitioned Service Bus entities and Event Hubs partitions.</span></span>

<span data-ttu-id="da15b-174">toogive služby sběrnici dostatek času tooenqueue uvítací zprávu do různých fragment, hello [MessagingFactorySettings.OperationTimeout] [ MessagingFactorySettings.OperationTimeout] hodnotu zadanou pomocí hello klienta, který odešle zprávu hello musí být větší než 15 sekund.</span><span class="sxs-lookup"><span data-stu-id="da15b-174">toogive Service Bus enough time tooenqueue hello message into a different fragment, hello [MessagingFactorySettings.OperationTimeout][MessagingFactorySettings.OperationTimeout] value specified by hello client that sends hello message must be greater than 15 seconds.</span></span> <span data-ttu-id="da15b-175">Doporučujeme, abyste nastavili hello [OperationTimeout] [ OperationTimeout] vlastnost toohello výchozí hodnotu 60 sekund.</span><span class="sxs-lookup"><span data-stu-id="da15b-175">It is recommended that you set hello [OperationTimeout][OperationTimeout] property toohello default value of 60 seconds.</span></span>

<span data-ttu-id="da15b-176">Všimněte si, že klíč oddílu "PIN kódy" fragment konkrétní tooa zprávy.</span><span class="sxs-lookup"><span data-stu-id="da15b-176">Note that a partition key "pins" a message tooa specific fragment.</span></span> <span data-ttu-id="da15b-177">Pokud není k dispozici hello v úložišti pro přenos zpráv, který obsahuje tento fragment, Service Bus vrátí chybu.</span><span class="sxs-lookup"><span data-stu-id="da15b-177">If hello messaging store that holds this fragment is unavailable, Service Bus returns an error.</span></span> <span data-ttu-id="da15b-178">V hello chybí klíč oddílu Service Bus můžete vybrat jiný fragment a hello operace úspěšná.</span><span class="sxs-lookup"><span data-stu-id="da15b-178">In hello absence of a partition key, Service Bus can choose a different fragment and hello operation succeeds.</span></span> <span data-ttu-id="da15b-179">Proto se doporučuje, aby nezadáte klíč oddílu Pokud to není nutné.</span><span class="sxs-lookup"><span data-stu-id="da15b-179">Therefore, it is recommended that you do not supply a partition key unless it is required.</span></span>

## <a name="advanced-topics-use-transactions-with-partitioned-entities"></a><span data-ttu-id="da15b-180">Rozšířené témata: použití transakcí s dělené entity</span><span class="sxs-lookup"><span data-stu-id="da15b-180">Advanced topics: use transactions with partitioned entities</span></span>
<span data-ttu-id="da15b-181">Zprávy, které se odesílají v rámci transakce. musíte zadat klíč oddílu.</span><span class="sxs-lookup"><span data-stu-id="da15b-181">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="da15b-182">To může být jedna z hello následující vlastnosti: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], nebo [ BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span><span class="sxs-lookup"><span data-stu-id="da15b-182">This can be one of hello following properties: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], or [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span></span> <span data-ttu-id="da15b-183">Všechny zprávy, které se odesílají jako součást hello musíte zadat stejné transakci hello stejným klíčem oddílu.</span><span class="sxs-lookup"><span data-stu-id="da15b-183">All messages that are sent as part of hello same transaction must specify hello same partition key.</span></span> <span data-ttu-id="da15b-184">Když zkusíte toosend zprávu bez klíče oddílu v rámci transakce, Service Bus vrací výjimku neplatná operace.</span><span class="sxs-lookup"><span data-stu-id="da15b-184">If you attempt toosend a message without a partition key within a transaction, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="da15b-185">Pokud se pokusíte toosend hello více zpráv v rámci stejné transakce, které mají různé klíče oddílů, Service Bus vrací výjimku neplatná operace.</span><span class="sxs-lookup"><span data-stu-id="da15b-185">If you attempt toosend multiple messages within hello same transaction that have different partition keys, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="da15b-186">Například:</span><span class="sxs-lookup"><span data-stu-id="da15b-186">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.PartitionKey = "myPartitionKey";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

<span data-ttu-id="da15b-187">Pokud jsou nastavená jakékoli hello vlastnosti, které slouží jako klíč oddílu, Service Bus PIN hello konkrétní fragmentu tooa zprávy.</span><span class="sxs-lookup"><span data-stu-id="da15b-187">If any of hello properties that serve as a partition key are set, Service Bus pins hello message tooa specific fragment.</span></span> <span data-ttu-id="da15b-188">K tomuto chování dochází, zda se používá transakce.</span><span class="sxs-lookup"><span data-stu-id="da15b-188">This behavior occurs whether or not a transaction is used.</span></span> <span data-ttu-id="da15b-189">Doporučuje se, že nezadáte klíč oddílu Pokud není nutné.</span><span class="sxs-lookup"><span data-stu-id="da15b-189">It is recommended that you do not specify a partition key if it is not necessary.</span></span>

## <a name="using-sessions-with-partitioned-entities"></a><span data-ttu-id="da15b-190">Použití relací s dělené entity</span><span class="sxs-lookup"><span data-stu-id="da15b-190">Using sessions with partitioned entities</span></span>
<span data-ttu-id="da15b-191">toosend deklaracemi relace téma tooa transakční zprávy nebo fronty, uvítací zprávu musí mít hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] sadu vlastností.</span><span class="sxs-lookup"><span data-stu-id="da15b-191">toosend a transactional message tooa session-aware topic or queue, hello message must have hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set.</span></span> <span data-ttu-id="da15b-192">Pokud hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] také zadána vlastnost, musí být identické toohello [SessionId] [ SessionId] vlastnost.</span><span class="sxs-lookup"><span data-stu-id="da15b-192">If hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property is specified as well, it must be identical toohello [SessionId][SessionId] property.</span></span> <span data-ttu-id="da15b-193">Pokud se liší, vrátí se Service Bus výjimku neplatná operace.</span><span class="sxs-lookup"><span data-stu-id="da15b-193">If they differ, Service Bus returns an invalid operation exception.</span></span>

<span data-ttu-id="da15b-194">Na rozdíl od front regulární (bez oddílů) nebo témata není možné toouse toosend jedné transakce více relací toodifferent zprávy.</span><span class="sxs-lookup"><span data-stu-id="da15b-194">Unlike regular (non-partitioned) queues or topics, it is not possible toouse a single transaction toosend multiple messages toodifferent sessions.</span></span> <span data-ttu-id="da15b-195">Pokud pokus, vrátí se Service Bus výjimku neplatná operace.</span><span class="sxs-lookup"><span data-stu-id="da15b-195">If attempted, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="da15b-196">Například:</span><span class="sxs-lookup"><span data-stu-id="da15b-196">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.SessionId = "mySession";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

## <a name="automatic-message-forwarding-with-partitioned-entities"></a><span data-ttu-id="da15b-197">Předávání automatické zpráv s dělené entity</span><span class="sxs-lookup"><span data-stu-id="da15b-197">Automatic message forwarding with partitioned entities</span></span>
<span data-ttu-id="da15b-198">Service Bus podporuje automatické zpráva předávání od, k nebo mezi dělené entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-198">Service Bus supports automatic message forwarding from, to, or between partitioned entities.</span></span> <span data-ttu-id="da15b-199">Automatické zpráva tooenable předávání, nastavte hello [QueueDescription.ForwardTo] [ QueueDescription.ForwardTo] vlastnost hello zdrojové fronty nebo předplatné.</span><span class="sxs-lookup"><span data-stu-id="da15b-199">tooenable automatic message forwarding, set hello [QueueDescription.ForwardTo][QueueDescription.ForwardTo] property on hello source queue or subscription.</span></span> <span data-ttu-id="da15b-200">Pokud zpráva hello Určuje klíč oddílu ([SessionId][SessionId], [PartitionKey][PartitionKey], nebo [MessageId] [ MessageId]), tento klíč oddílu se používá pro hello cílové entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-200">If hello message specifies a partition key ([SessionId][SessionId], [PartitionKey][PartitionKey], or [MessageId][MessageId]), that partition key is used for hello destination entity.</span></span>

## <a name="considerations-and-guidelines"></a><span data-ttu-id="da15b-201">Důležité informace a pokyny</span><span class="sxs-lookup"><span data-stu-id="da15b-201">Considerations and guidelines</span></span>
* <span data-ttu-id="da15b-202">**Funkce vysoké konzistence**: Pokud entity používá funkce, jako jsou relace, detekci duplikátů nebo explicitní kontrolu nad klíč rozdělení do oddílů, pak hello zasílání zpráv operace jsou vždy směrované toospecific fragmenty.</span><span class="sxs-lookup"><span data-stu-id="da15b-202">**High consistency features**: If an entity uses features such as sessions, duplicate detection, or explicit control of partitioning key, then hello messaging operations are always routed toospecific fragments.</span></span> <span data-ttu-id="da15b-203">Pokud je některý z hello fragmentů intenzivní provoz nebo hello příslušné úložiště není v pořádku, tyto operace nezdaří a sníží dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="da15b-203">If any of hello fragments experience high traffic or hello underlying store is unhealthy, those operations fail and availability is reduced.</span></span> <span data-ttu-id="da15b-204">Obecně je stále mnohem vyšší než bez oddílů entity; hello konzistence pouze podmnožinu provozu dochází k problémům, jako názvem na rozdíl od tooall hello provoz.</span><span class="sxs-lookup"><span data-stu-id="da15b-204">Overall, hello consistency is still much higher than non-partitioned entities; only a subset of traffic is experiencing issues, as opposed tooall hello traffic.</span></span> <span data-ttu-id="da15b-205">Další informace najdete v tématu to [diskuzi o dostupnosti a konzistence](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="da15b-205">For more information, see this [discussion of availability and consistency](../event-hubs/event-hubs-availability-and-consistency.md).</span></span>
* <span data-ttu-id="da15b-206">**Správa**: operací, jako je vytvoření, aktualizace a odstranění je potřeba provést na všechny fragmenty hello hello entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-206">**Management**: Operations such as Create, Update and Delete must be performed on all hello fragments of hello entity.</span></span> <span data-ttu-id="da15b-207">Pokud není v pořádku žádné fragment to může způsobit selhání pro tyto operace.</span><span class="sxs-lookup"><span data-stu-id="da15b-207">If any fragment is unhealthy it could result in failures for these operations.</span></span> <span data-ttu-id="da15b-208">Pro operaci Get hello informace, jako je počty zprávy musí být agregován z všechny fragmenty.</span><span class="sxs-lookup"><span data-stu-id="da15b-208">For hello Get operation, information such as message counts must be aggregated from all fragments.</span></span> <span data-ttu-id="da15b-209">Pokud žádné fragment není v pořádku, stav dostupnosti entity hello se hlásí jako omezené.</span><span class="sxs-lookup"><span data-stu-id="da15b-209">If any fragment is unhealthy, hello entity availability status is reported as limited.</span></span>
* <span data-ttu-id="da15b-210">**Nízká svazku zpráva scénáře**: pro takové scénáře, zejména v případě, že pomocí protokolu hello HTTP, může mít tooperform více přijímat operace v pořadí tooobtain všechny zprávy hello.</span><span class="sxs-lookup"><span data-stu-id="da15b-210">**Low volume message scenarios**: For such scenarios, especially when using hello HTTP protocol, you may have tooperform multiple receive operations in order tooobtain all hello messages.</span></span> <span data-ttu-id="da15b-211">Pro přijetí žádosti front-endu hello provádí všechny fragmenty hello příjmu a ukládá do mezipaměti všechny hello odpovědí přijatých.</span><span class="sxs-lookup"><span data-stu-id="da15b-211">For receive requests, hello front end performs a receive on all hello fragments and caches all hello responses received.</span></span> <span data-ttu-id="da15b-212">Následné receive požadavek na hello stejné připojení by mít užitek z této ukládání do mezipaměti a přijímat latence bude nižší.</span><span class="sxs-lookup"><span data-stu-id="da15b-212">A subsequent receive request on hello same connection would benefit from this caching and receive latencies will be lower.</span></span> <span data-ttu-id="da15b-213">Ale pokud máte více připojení nebo prostřednictvím protokolu HTTP, který vytvoří nové připojení pro každý požadavek.</span><span class="sxs-lookup"><span data-stu-id="da15b-213">However, if you have multiple connections or use HTTP, that establishes a new connection for each request.</span></span> <span data-ttu-id="da15b-214">Jako takový neexistuje žádná záruka, který se bude zobrazovat hello stejného uzlu.</span><span class="sxs-lookup"><span data-stu-id="da15b-214">As such, there is no guarantee that it would land on hello same node.</span></span> <span data-ttu-id="da15b-215">Pokud všechny existující zprávy jsou zamčené uložené v mezipaměti v jiné front-endu, hello zobrazí operaci vrátí **null**.</span><span class="sxs-lookup"><span data-stu-id="da15b-215">If all existing messages are locked and cached in another front end, hello receive operation returns **null**.</span></span> <span data-ttu-id="da15b-216">Zprávy nakonec vyprší a je můžete přijímat znovu.</span><span class="sxs-lookup"><span data-stu-id="da15b-216">Messages eventually expire and you can receive them again.</span></span> <span data-ttu-id="da15b-217">Doporučuje se udržování připojení HTTP.</span><span class="sxs-lookup"><span data-stu-id="da15b-217">HTTP keep-alive is recommended.</span></span>
* <span data-ttu-id="da15b-218">**Procházet zprávy funkce Náhled**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) vždy nevrací hello počet zpráv zadaný v hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) vlastnost.</span><span class="sxs-lookup"><span data-stu-id="da15b-218">**Browse/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) does not always return hello number of messages specified in hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) property.</span></span> <span data-ttu-id="da15b-219">Existují dvě běžné důvody.</span><span class="sxs-lookup"><span data-stu-id="da15b-219">There are two common reasons for this.</span></span> <span data-ttu-id="da15b-220">Jednou z příčin je, že hello agregovaná velikost hello kolekci zpráv překračuje maximální velikost 256KB hello.</span><span class="sxs-lookup"><span data-stu-id="da15b-220">One reason is that hello aggregated size of hello collection of messages exceeds hello maximum size of 256KB.</span></span> <span data-ttu-id="da15b-221">Dalším důvodem je, že pokud hello fronta nebo téma má hello [enablepartitioning je vlastnost](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) nastavit příliš**true**, oddíl nemusí mít dostatek zprávy toocomplete hello požadovaný počet zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-221">Another reason is that if hello queue or topic has hello [EnablePartitioning property](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) set too**true**, a partition may not have enough messages toocomplete hello requested number of messages.</span></span> <span data-ttu-id="da15b-222">Obecně platí, pokud aplikace chce tooreceive konkrétní počet zpráv, ho by měly volat [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) opakovaně, dokud získá počet zpráv, nebo nejsou žádné další zprávy toopeek.</span><span class="sxs-lookup"><span data-stu-id="da15b-222">In general, if an application wants tooreceive a specific number of messages, it should call [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repeatedly until it gets that number of messages, or there are no more messages toopeek.</span></span> <span data-ttu-id="da15b-223">Další informace, včetně ukázky kódu, najdete v části [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) nebo [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span><span class="sxs-lookup"><span data-stu-id="da15b-223">For more information, including code samples, see [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) or [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span></span>

## <a name="latest-added-features"></a><span data-ttu-id="da15b-224">Nejnovější přidané funkce</span><span class="sxs-lookup"><span data-stu-id="da15b-224">Latest added features</span></span>
* <span data-ttu-id="da15b-225">Přidat nebo odebrat pravidlo se teď podporuje s dělené entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-225">Add or remove rule is now supported with partitioned entities.</span></span> <span data-ttu-id="da15b-226">Liší od bez oddílů entity, tyto operace nejsou podporovány v rámci transakce.</span><span class="sxs-lookup"><span data-stu-id="da15b-226">Different from non-partitioned entities, these operations are not supported under transactions.</span></span> 
* <span data-ttu-id="da15b-227">AMQP se teď podporuje pro posílání a přijímání zpráv tooand z oddílů entity.</span><span class="sxs-lookup"><span data-stu-id="da15b-227">AMQP is now supported for sending and receiving messages tooand from a partitioned entity.</span></span>
* <span data-ttu-id="da15b-228">AMQP je nyní podporován pro hello následující operace: [odeslání dávky](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [přijímat Batch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive podle pořadových čísel](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [prohlížet](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [ Obnovení zámku](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [naplánovat zpráva](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [zrušit naplánované zpráva](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [přidat pravidlo](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [odebrat pravidlo](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Relace obnovení zámku](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [stav relace sady](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [stav relace Get](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), a [výčet relací](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span><span class="sxs-lookup"><span data-stu-id="da15b-228">AMQP is now supported for hello following operations: [Batch Send](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch Receive](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive by Sequence Number](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [Renew Lock](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [Schedule Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancel Scheduled Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Add Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Remove Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Session Renew Lock](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [Set Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), and [Enumerate Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span></span>

## <a name="partitioned-entities-limitations"></a><span data-ttu-id="da15b-229">Dělené entity omezení</span><span class="sxs-lookup"><span data-stu-id="da15b-229">Partitioned entities limitations</span></span>
<span data-ttu-id="da15b-230">Service Bus aktuálně ukládá hello následující omezení na oddílů fronty a témata:</span><span class="sxs-lookup"><span data-stu-id="da15b-230">Currently Service Bus imposes hello following limitations on partitioned queues and topics:</span></span>

* <span data-ttu-id="da15b-231">Oddílů fronty a témata nepodporují odesílání zpráv, které patří toodifferent relací v rámci jedné transakce.</span><span class="sxs-lookup"><span data-stu-id="da15b-231">Partitioned queues and topics do not support sending messages that belong toodifferent sessions in a single transaction.</span></span>
* <span data-ttu-id="da15b-232">Service Bus aktuálně umožňuje si too100 rozdělena na oddíly fronty a témata na obor názvů.</span><span class="sxs-lookup"><span data-stu-id="da15b-232">Service Bus currently allows up too100 partitioned queues or topics per namespace.</span></span> <span data-ttu-id="da15b-233">Každý oddílů fronta nebo téma započítává hello kvóty 10 000 entit na obor názvů (nevztahuje tooPremium úroveň).</span><span class="sxs-lookup"><span data-stu-id="da15b-233">Each partitioned queue or topic counts towards hello quota of 10,000 entities per namespace (does not apply tooPremium tier).</span></span>

## <a name="next-steps"></a><span data-ttu-id="da15b-234">Další kroky</span><span class="sxs-lookup"><span data-stu-id="da15b-234">Next steps</span></span>
<span data-ttu-id="da15b-235">V tématu hello diskuzi o [podporu protokolu AMQP 1.0 pro Service Bus oddíly fronty a témata] [ AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn informace o vytváření oddílů entit pro zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="da15b-235">See hello discussion of [AMQP 1.0 support for Service Bus partitioned queues and topics][AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn more about partitioning messaging entities.</span></span> 

[Service Bus architecture]: service-bus-architecture.md
[Azure portal]: https://portal.azure.com
[QueueDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[TopicDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.topicdescription#Microsoft_ServiceBus_Messaging_TopicDescription_EnablePartitioning
[BrokeredMessage.SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[BrokeredMessage.PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[QueueDescription.RequiresDuplicateDetection]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_RequiresDuplicateDetection
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessagingFactorySettings.OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[QueueDescription.ForwardTo]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_ForwardTo
[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md
