---
title: "Azure Service Bus ověřování s podpisy sdíleného přístupu | Microsoft Docs"
description: "Přehled ověřování Service Bus pomocí sdílené přístupové podpisy přehled, podrobnosti o ověřování SAS s Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: a2760072acb7c62204759f3ec0d3cb9899460f2d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="aeff7-103">Ověřování služby Service Bus s podpisy sdíleného přístupu</span><span class="sxs-lookup"><span data-stu-id="aeff7-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="aeff7-104">*Sdílené přístupové podpisy* (SAS) jsou primární zabezpečení mechanismus pro zasílání zpráv Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-104">*Shared Access Signatures* (SAS) are the primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="aeff7-105">Tento článek popisuje SAS, jak fungují a jak je používat způsobem, bez ohledu na platformu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-105">This article discusses SAS, how they work, and how to use them in a platform-agnostic way.</span></span>

<span data-ttu-id="aeff7-106">SAS ověřování umožňuje aplikacím ke svému ověření u služby Service Bus pomocí přístupový klíč konfigurovány v oboru názvů, nebo u entity zasílání zpráv (fronty nebo téma) ke které jsou přidružené konkrétní práva.</span><span class="sxs-lookup"><span data-stu-id="aeff7-106">SAS authentication enables applications to authenticate to Service Bus using an access key configured on the namespace, or on the messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="aeff7-107">Pak můžete tento klíč k vygenerování tokenu SAS, který zase můžou klienti používat ke svému ověření u služby Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-107">You can then use this key to generate a SAS token that clients can in turn use to authenticate to Service Bus.</span></span>

<span data-ttu-id="aeff7-108">Podpora ověřování SAS je součástí sady Azure SDK verze 2.0 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="aeff7-108">SAS authentication support is included in the Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="aeff7-109">Přehled SAS</span><span class="sxs-lookup"><span data-stu-id="aeff7-109">Overview of SAS</span></span>

<span data-ttu-id="aeff7-110">Sdílené přístupové podpisy jsou mechanismus ověřování na základě zabezpečeného hodnoty hash SHA-256 nebo identifikátory URI.</span><span class="sxs-lookup"><span data-stu-id="aeff7-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="aeff7-111">Přidružení zabezpečení je velmi výkonný mechanismus, který je používán všechny služby Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="aeff7-112">Při skutečném použití SAS má dvě součásti: *sdílené zásady přístupu* a *sdílený přístupový podpis* (často říká *tokenu*).</span><span class="sxs-lookup"><span data-stu-id="aeff7-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="aeff7-113">Ověřování SAS v Service Bus zahrnuje konfiguraci kryptografického klíče s přidružená práva na prostředku služby Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-113">SAS authentication in Service Bus involves the configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="aeff7-114">Klienti deklarace přístup k prostředkům služby Service Bus prezentací SAS token.</span><span class="sxs-lookup"><span data-stu-id="aeff7-114">Clients claim access to Service Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="aeff7-115">Tento token se skládá z identifikátoru URI přistupuje prostředku a vypršení platnosti podepsaný pomocí nakonfigurovaný klíč.</span><span class="sxs-lookup"><span data-stu-id="aeff7-115">This token consists of the resource URI being accessed, and an expiry signed with the configured key.</span></span>

<span data-ttu-id="aeff7-116">Podpis sdíleného přístupu autorizační pravidla můžete konfigurovat v Service Bus [předává](service-bus-fundamentals-hybrid-solutions.md#relays), [fronty](service-bus-fundamentals-hybrid-solutions.md#queues), a [témata](service-bus-fundamentals-hybrid-solutions.md#topics).</span><span class="sxs-lookup"><span data-stu-id="aeff7-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="aeff7-117">SAS ověřování používá následující prvky:</span><span class="sxs-lookup"><span data-stu-id="aeff7-117">SAS authentication uses the following elements:</span></span>

* <span data-ttu-id="aeff7-118">[Sdílený přístup autorizační pravidlo](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): volitelný sekundární klíč, název klíče a přidružená práva A 256 bitů primární kryptografický klíč ve formátu Base64 reprezentace (kolekce *naslouchání*, *odeslat*, nebo *spravovat* oprávnění).</span><span class="sxs-lookup"><span data-stu-id="aeff7-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="aeff7-119">[Sdílený přístupový podpis](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) tokenu: vygenerování pomocí HMAC-SHA256 řetězce prostředků, který se skládá z identifikátoru URI prostředku, který je přístupný a vypršela platnost, pomocí kryptografického klíče.</span><span class="sxs-lookup"><span data-stu-id="aeff7-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using the HMAC-SHA256 of a resource string, consisting of the URI of the resource that is accessed and an expiry, with the cryptographic key.</span></span> <span data-ttu-id="aeff7-120">Podpis a další prvky popsané v následujících částech jsou formátovány na řetězec k vytvoření tokenu SAS.</span><span class="sxs-lookup"><span data-stu-id="aeff7-120">The signature and other elements described in the following sections are formatted into a string to form the SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="aeff7-121">Zásada sdíleného přístupu</span><span class="sxs-lookup"><span data-stu-id="aeff7-121">Shared access policy</span></span>

<span data-ttu-id="aeff7-122">Důležité pochopit o tokenu SAS je, začne se zásadami.</span><span class="sxs-lookup"><span data-stu-id="aeff7-122">An important thing to understand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="aeff7-123">Pro každou zásadu rozhodnete na tři údaje: **název**, **oboru**, a **oprávnění**.</span><span class="sxs-lookup"><span data-stu-id="aeff7-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="aeff7-124">**Název** je právě toto; jedinečný název v rámci tohoto oboru.</span><span class="sxs-lookup"><span data-stu-id="aeff7-124">The **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="aeff7-125">Rozsah je dostatečně snadno: je identifikátor URI prostředku nejistá.</span><span class="sxs-lookup"><span data-stu-id="aeff7-125">The scope is easy enough: it's the URI of the resource in question.</span></span> <span data-ttu-id="aeff7-126">V případě oboru názvů Service Bus oboru je plně kvalifikovaný název domény (FQDN), jako například `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="aeff7-126">For a Service Bus namespace, the scope is the fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="aeff7-127">Jsou k dispozici oprávnění pro zásady z velké části není potřeba vysvětlovat:</span><span class="sxs-lookup"><span data-stu-id="aeff7-127">The available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="aeff7-128">Odeslat</span><span class="sxs-lookup"><span data-stu-id="aeff7-128">Send</span></span>
* <span data-ttu-id="aeff7-129">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-129">Listen</span></span>
* <span data-ttu-id="aeff7-130">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-130">Manage</span></span>

<span data-ttu-id="aeff7-131">Po vytvoření zásady, je přiřazen *primární klíč* a *sekundární klíč*.</span><span class="sxs-lookup"><span data-stu-id="aeff7-131">After you create the policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="aeff7-132">Toto jsou kryptograficky silnou klíče.</span><span class="sxs-lookup"><span data-stu-id="aeff7-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="aeff7-133">Nemusíte je ztratí nebo je úniku – vždy budete mít k dispozici v [portál Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="aeff7-133">Don't lose them or leak them - they'll always be available in the [Azure portal][Azure portal].</span></span> <span data-ttu-id="aeff7-134">Můžete použít buď generovaného klíče a můžete je obnovit kdykoli.</span><span class="sxs-lookup"><span data-stu-id="aeff7-134">You can use either of the generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="aeff7-135">Ale pokud chcete znovu vygenerovat nebo změnit primární klíč v zásadách, budou všechny sdílené přístupové podpisy na ní neplatné.</span><span class="sxs-lookup"><span data-stu-id="aeff7-135">However, if you regenerate or change the primary key in the policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="aeff7-136">Když vytvoříte obor názvů sběrnice, zásady se automaticky vytvoří pro celý obor názvů názvem **RootManageSharedAccessKey**, a tato zásada nemá všechna oprávnění.</span><span class="sxs-lookup"><span data-stu-id="aeff7-136">When you create a Service Bus namespace, a policy is automatically created for the entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="aeff7-137">Nemáte přihlásíte jako **kořenové**, takže nemusíte tuto zásadu použít, pokud dobře důvody.</span><span class="sxs-lookup"><span data-stu-id="aeff7-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="aeff7-138">Můžete vytvořit další zásady v **konfigurace** kartě pro obor názvů na portálu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-138">You can create additional policies in the **Configure** tab for the namespace in the portal.</span></span> <span data-ttu-id="aeff7-139">Je důležité si uvědomit, úrovně jediného stromu v Service Bus (obor názvů, fronty atd.) může mít pouze až 12 zásady, které jsou k němu připojen.</span><span class="sxs-lookup"><span data-stu-id="aeff7-139">It's important to note that a single tree level in Service Bus (namespace, queue, etc.) can only have up to 12 policies attached to it.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="aeff7-140">Konfigurace pro ověřování sdíleného přístupového podpisu</span><span class="sxs-lookup"><span data-stu-id="aeff7-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="aeff7-141">Můžete nakonfigurovat [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) pravidlo na obory názvů Service Bus, fronty a témata.</span><span class="sxs-lookup"><span data-stu-id="aeff7-141">You can configure the [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="aeff7-142">Konfigurace [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) na Service Bus se aktuálně nepodporuje předplatné, ale nakonfigurovaná v oboru názvů nebo téma pravidla můžete použít k zabezpečení přístupu k odběrům.</span><span class="sxs-lookup"><span data-stu-id="aeff7-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic to secure access to subscriptions.</span></span> <span data-ttu-id="aeff7-143">Pracovní vzorku, který znázorňuje tento postup, najdete v článku [pomocí sdíleného přístupového podpisu (SAS) ověřování pomocí předplatných Service Bus](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) ukázka.</span><span class="sxs-lookup"><span data-stu-id="aeff7-143">For a working sample that illustrates this procedure, see the [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="aeff7-144">Nesmí být delší než 12 tato pravidla lze konfigurovat v oboru názvů Service Bus, fronta nebo téma.</span><span class="sxs-lookup"><span data-stu-id="aeff7-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="aeff7-145">Pravidla, které jsou nakonfigurované na oboru názvů Service Bus se vztahují na všechny entity v daném oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="aeff7-145">Rules that are configured on a Service Bus namespace apply to all entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="aeff7-147">Na tomto obrázku *manageRuleNS*, *sendRuleNS*, a *listenRuleNS* autorizační pravidla, které se týkají fronta F1 a téma T1, při *listenRuleQ*  a *sendRuleQ* se vztahují pouze na frontu F1 a *sendRuleT* se vztahují pouze k tématu T1.</span><span class="sxs-lookup"><span data-stu-id="aeff7-147">In this figure, the *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply to both queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only to queue Q1 and *sendRuleT* applies only to topic T1.</span></span>

<span data-ttu-id="aeff7-148">Klíče parametry [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) jsou následující:</span><span class="sxs-lookup"><span data-stu-id="aeff7-148">The key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="aeff7-149">Parametr</span><span class="sxs-lookup"><span data-stu-id="aeff7-149">Parameter</span></span> | <span data-ttu-id="aeff7-150">Popis</span><span class="sxs-lookup"><span data-stu-id="aeff7-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="aeff7-151">*KeyName*</span><span class="sxs-lookup"><span data-stu-id="aeff7-151">*KeyName*</span></span> |<span data-ttu-id="aeff7-152">Řetězec, který popisuje sadu autorizačních pravidel.</span><span class="sxs-lookup"><span data-stu-id="aeff7-152">A string that describes the authorization rule.</span></span> |
| <span data-ttu-id="aeff7-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="aeff7-153">*PrimaryKey*</span></span> |<span data-ttu-id="aeff7-154">Kódováním base64 256 bitů primární klíč pro přihlašování a ověřování tokenu SAS.</span><span class="sxs-lookup"><span data-stu-id="aeff7-154">A base64-encoded 256-bit primary key for signing and validating the SAS token.</span></span> |
| <span data-ttu-id="aeff7-155">*Sekundární klíč*</span><span class="sxs-lookup"><span data-stu-id="aeff7-155">*SecondaryKey*</span></span> |<span data-ttu-id="aeff7-156">Kódováním base64 256 bitů sekundární klíč pro přihlašování a ověřování tokenu SAS.</span><span class="sxs-lookup"><span data-stu-id="aeff7-156">A base64-encoded 256-bit secondary key for signing and validating the SAS token.</span></span> |
| <span data-ttu-id="aeff7-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="aeff7-157">*AccessRights*</span></span> |<span data-ttu-id="aeff7-158">Seznam přístupová práva udělují autorizační pravidlo.</span><span class="sxs-lookup"><span data-stu-id="aeff7-158">A list of access rights granted by the authorization rule.</span></span> <span data-ttu-id="aeff7-159">Tato práva, může být jakékoli kolekce naslouchání, odeslání a Správa práv.</span><span class="sxs-lookup"><span data-stu-id="aeff7-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="aeff7-160">Při zřízení oboru názvů Service Bus [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), s [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) nastavena na **RootManageSharedAccessKey**, se vytvoří ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="aeff7-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set to **RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="aeff7-161">Vygenerování sdíleného přístupového podpisu (token)</span><span class="sxs-lookup"><span data-stu-id="aeff7-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="aeff7-162">Zásady samotné není přístupového tokenu pro Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-162">The policy itself is not the access token for Service Bus.</span></span> <span data-ttu-id="aeff7-163">Je objekt, ze které se generuje přístupový token - pomocí buď primární nebo sekundární klíč.</span><span class="sxs-lookup"><span data-stu-id="aeff7-163">It is the object from which the access token is generated - using either the primary or secondary key.</span></span> <span data-ttu-id="aeff7-164">Libovolného klienta, který má přístup k podpisový klíč zadaný v autorizační pravidlo sdíleného přístupu můžete vygenerovat SAS token.</span><span class="sxs-lookup"><span data-stu-id="aeff7-164">Any client that has access to the signing keys specified in the shared access authorization rule can generate the SAS token.</span></span> <span data-ttu-id="aeff7-165">Vygenerování tokenu tím, že pečlivě vytvoří řetězec ve formátu:</span><span class="sxs-lookup"><span data-stu-id="aeff7-165">The token is generated by carefully crafting a string in the following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="aeff7-166">Kde `signature-string` je hodnota hash SHA-256 oboru tokenu (**oboru** jak je popsáno v předchozí části) s Line FEED připojí a čas vypršení platnosti (v sekundách od epoch: `00:00:00 UTC` na 1. ledna pod hodnotou 1970).</span><span class="sxs-lookup"><span data-stu-id="aeff7-166">Where `signature-string` is the SHA-256 hash of the scope of the token (**scope** as described in the previous section) with a CRLF appended and an expiry time (in seconds since the epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="aeff7-167">Abyste se vyhnuli čas krátké vypršení platnosti tokenu, se doporučuje, zakódovat hodnota času vypršení platnosti jako celé číslo bez znaménka alespoň 32-bit, nebo pokud možno celé číslo dlouho (64 bitů).</span><span class="sxs-lookup"><span data-stu-id="aeff7-167">To avoid a short token expiry time, it is recommended that you encode the expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="aeff7-168">Hodnota hash bude vypadat podobně jako následující kód pseudo a vrátí 32 bajtů.</span><span class="sxs-lookup"><span data-stu-id="aeff7-168">The hash looks similar to the following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="aeff7-169">Rozdělí hodnoty jsou v **SharedAccessSignature** řetězec tak, aby příjemce můžete vypočítat hodnotu hash se stejnými parametry, ujistěte se, že vrací stejného výsledku.</span><span class="sxs-lookup"><span data-stu-id="aeff7-169">The non-hashed values are in the **SharedAccessSignature** string so that the recipient can compute the hash with the same parameters, to be sure that it returns the same result.</span></span> <span data-ttu-id="aeff7-170">Identifikátor URI Určuje obor, a název klíče identifikuje zásady, které mají být použity k výpočtu hodnoty hash.</span><span class="sxs-lookup"><span data-stu-id="aeff7-170">The URI specifies the scope, and the key name identifies the policy to be used to compute the hash.</span></span> <span data-ttu-id="aeff7-171">To je důležité z hlediska zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="aeff7-171">This is important from a security standpoint.</span></span> <span data-ttu-id="aeff7-172">Pokud podpis neodpovídá, vypočítá příjemce (Service Bus), byl odepřen přístup.</span><span class="sxs-lookup"><span data-stu-id="aeff7-172">If the signature doesn't match that which the recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="aeff7-173">Může být v tomto okamžiku se, že odesílatel měli přístup ke klíči a by měla být udělena práva určená v zásadách.</span><span class="sxs-lookup"><span data-stu-id="aeff7-173">At this point you can be sure that the sender had access to the key and should be granted the rights specified in the policy.</span></span>

<span data-ttu-id="aeff7-174">Všimněte si, že mají používat zakódovaný identifikátor URI pro tuto operaci.</span><span class="sxs-lookup"><span data-stu-id="aeff7-174">Note that you should use the encoded resource URI for this operation.</span></span> <span data-ttu-id="aeff7-175">Identifikátor URI je úplný identifikátor URI prostředku Service Bus, ke kterému je požadován přístup.</span><span class="sxs-lookup"><span data-stu-id="aeff7-175">The resource URI is the full URI of the Service Bus resource to which access is claimed.</span></span> <span data-ttu-id="aeff7-176">Například `http://<namespace>.servicebus.windows.net/<entityPath>` nebo `sb://<namespace>.servicebus.windows.net/<entityPath>`, tj `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="aeff7-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="aeff7-177">Autorizační pravidlo sdíleného přístupu, který se používá k podepisování musí být nakonfigurované na entitu zadanou tento identifikátor URI, nebo pomocí jedné z jejích hierarchické nadřazených tříd.</span><span class="sxs-lookup"><span data-stu-id="aeff7-177">The shared access authorization rule used for signing must be configured on the entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="aeff7-178">Například `http://contoso.servicebus.windows.net/contosoTopics/T1` nebo `http://contoso.servicebus.windows.net` v předchozím příkladu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in the previous example.</span></span>

<span data-ttu-id="aeff7-179">SAS token je platná pro všechny prostředky pod `<resourceURI>` používány `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="aeff7-179">A SAS token is valid for all resources under the `<resourceURI>` used in the `signature-string`.</span></span>

<span data-ttu-id="aeff7-180">[KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) SAS token odkazuje **keyName** sloužící ke generování token pravidla autorizace sdíleného přístupu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-180">The [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in the SAS token refers to the **keyName** of the shared access authorization rule used to generate the token.</span></span>

<span data-ttu-id="aeff7-181">*URL kódovaný resourceURI* musí být stejný jako identifikátor URI použitých v řetězci přihlášení během výpočtu podpisu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-181">The *URL-encoded-resourceURI* must be the same as the URI used in the string-to-sign during the computation of the signature.</span></span> <span data-ttu-id="aeff7-182">Měla by být [kódováním procent](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="aeff7-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="aeff7-183">Doporučujeme pravidelně obnovovat klíčů používaných v [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objektu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-183">It is recommended that you periodically regenerate the keys used in the [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="aeff7-184">Aplikace by měly používat obecně [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) pro vygenerování tokenu SAS.</span><span class="sxs-lookup"><span data-stu-id="aeff7-184">Applications should generally use the [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) to generate a SAS token.</span></span> <span data-ttu-id="aeff7-185">Při opakovaném generování klíčů, měli byste nahradit [sekundární klíč](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) s z původního primárního klíče a vygenerovat nový klíč jako nový primární klíč.</span><span class="sxs-lookup"><span data-stu-id="aeff7-185">When regenerating the keys, you should replace the [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with the old primary key, and generate a new key as the new primary key.</span></span> <span data-ttu-id="aeff7-186">Umožňuje pokračovat v používání tokeny k ověřování, které byly vydány s původní primární klíč a ještě, nevypršela jejich platnost.</span><span class="sxs-lookup"><span data-stu-id="aeff7-186">This enables you to continue using tokens for authorization that were issued with the old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="aeff7-187">Pokud dojde k narušení klíč a budete mít k odvolání klíče, můžete obě obnovit [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) a [sekundární klíč](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) z [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), ve které nahradíte je s novými klíči.</span><span class="sxs-lookup"><span data-stu-id="aeff7-187">If a key is compromised and you have to revoke the keys, you can regenerate both the [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and the [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="aeff7-188">Tento postup by způsobila neplatnost všechny tokeny, které jsou podepsány pomocí starého klíče.</span><span class="sxs-lookup"><span data-stu-id="aeff7-188">This procedure invalidates all tokens signed with the old keys.</span></span>

## <a name="how-to-use-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="aeff7-189">Použití sdíleného přístupového podpisu ověřování službou Service Bus</span><span class="sxs-lookup"><span data-stu-id="aeff7-189">How to use Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="aeff7-190">Následující scénáře zahrnují konfigurace autorizačních pravidel, generování tokenů SAS a autorizací klienta.</span><span class="sxs-lookup"><span data-stu-id="aeff7-190">The following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="aeff7-191">Pro úplnou pracovní vzorek aplikaci Service Bus, která ukazuje, konfigurace a používá autorizace SAS, najdete v části [sdíleného přístupového podpisu ověřování službou Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="aeff7-191">For a full working sample of a Service Bus application that illustrates the configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="aeff7-192">Související příklad, který znázorňuje použití SAS autorizační pravidla, která je nakonfigurovaná na obory názvů nebo témata zabezpečit odběry služby Service Bus je k dispozici zde: [pomocí sdíleného přístupového podpisu (SAS) ověřování pomocí předplatných Service Bus](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="aeff7-192">A related sample that illustrates the use of SAS authorization rules configured on namespaces or topics to secure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="aeff7-193">Pravidla přístupu k autorizaci sdíleného přístupu u oboru názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="aeff7-194">Operace v kořenovém oboru názvů Service Bus vyžadují ověřování pomocí certifikátu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-194">Operations on the Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="aeff7-195">Je potřeba načíst certifikát pro správu pro vaše předplatné Azure.</span><span class="sxs-lookup"><span data-stu-id="aeff7-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="aeff7-196">Nahrání certifikátu pro správu, postupujte podle kroků [sem](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate)pomocí [portál Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="aeff7-196">To upload a management certificate, follow the steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using the [Azure portal][Azure portal].</span></span> <span data-ttu-id="aeff7-197">Další informace o certifikátech správy Azure najdete v tématu [přehled Azure certifikátů](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="aeff7-197">For more information about Azure management certificates, see the [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="aeff7-198">Koncový bod pro přístup k sdíleného přístupu autorizační pravidla na obor názvů sběrnice je následující:</span><span class="sxs-lookup"><span data-stu-id="aeff7-198">The endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="aeff7-199">Chcete-li vytvořit [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objekt v oboru názvů Service Bus, provést operaci POST na tento koncový bod s informace o pravidle serializovanou jako XML nebo JSON.</span><span class="sxs-lookup"><span data-stu-id="aeff7-199">To create a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with the rule information serialized as JSON or XML.</span></span> <span data-ttu-id="aeff7-200">Například:</span><span class="sxs-lookup"><span data-stu-id="aeff7-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on the Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access the management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on the baseAddress above to create an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="aeff7-201">Podobně použijte operaci GET na koncový bod čtení autorizační pravidla nakonfigurované na oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="aeff7-201">Similarly, use a GET operation on the endpoint to read the authorization rules configured on the namespace.</span></span>

<span data-ttu-id="aeff7-202">Pokud chcete aktualizovat nebo odstranit konkrétní autorizační pravidlo, použijte následující koncový bod:</span><span class="sxs-lookup"><span data-stu-id="aeff7-202">To update or delete a specific authorization rule, use the following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="aeff7-203">Přístup sdíleného přístupu autorizační pravidla s entitou</span><span class="sxs-lookup"><span data-stu-id="aeff7-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="aeff7-204">Dostanete [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) nakonfigurované na fronty sběrnice nebo téma prostřednictvím objektu [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) kolekce v odpovídající [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) nebo [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="aeff7-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through the [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in the corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="aeff7-205">Následující kód ukazuje, jak přidat autorizační pravidla pro frontu.</span><span class="sxs-lookup"><span data-stu-id="aeff7-205">The following code shows how to add authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for the operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it to the queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it to the queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it to the queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create the queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="aeff7-206">Použití autorizačních sdíleného přístupového podpisu</span><span class="sxs-lookup"><span data-stu-id="aeff7-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="aeff7-207">Aplikace pomocí .NET SDK služby Azure na knihovny Service Bus .NET můžete použít autorizace SAS prostřednictvím [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) třídy.</span><span class="sxs-lookup"><span data-stu-id="aeff7-207">Applications using the Azure .NET SDK with the Service Bus .NET libraries can use SAS authorization through the [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="aeff7-208">Následující kód ukazuje použití zprostředkovatel tokenu k odesílání zpráv do fronty Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-208">The following code illustrates the use of the token provider to send messages to a Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message to queue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="aeff7-209">Aplikace můžete také použít SAS pro ověřování pomocí SAS připojovací řetězec v metodách, které přijímají připojovací řetězce.</span><span class="sxs-lookup"><span data-stu-id="aeff7-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="aeff7-210">Všimněte si, že použití autorizace SAS s předávací služby Service Bus, můžete použít klíče SAS, které jsou nakonfigurované na oboru názvů Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-210">Note that to use SAS authorization with Service Bus relays, you can use SAS keys configured on the Service Bus namespace.</span></span> <span data-ttu-id="aeff7-211">Pokud vytvoříte relé explicitně na obor názvů ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) s [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) objektu, budete moct nastavit pravidla SAS jen pro tento předávání.</span><span class="sxs-lookup"><span data-stu-id="aeff7-211">If you explicitly create a relay on the namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set the SAS rules just for that relay.</span></span> <span data-ttu-id="aeff7-212">Pokud chcete používat autorizace SAS s odběry služby Service Bus, můžete použít klíče SAS, které jsou nakonfigurované na obor názvů sběrnice nebo téma.</span><span class="sxs-lookup"><span data-stu-id="aeff7-212">To use SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-the-shared-access-signature-at-http-level"></a><span data-ttu-id="aeff7-213">Použití sdíleného přístupového podpisu (na úrovni protokolu HTTP)</span><span class="sxs-lookup"><span data-stu-id="aeff7-213">Use the Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="aeff7-214">Teď, když víte, jak vytvořit podpisy sdíleného přístupu pro všechny entity v Service Bus, jste připravení na provedení HTTP POST:</span><span class="sxs-lookup"><span data-stu-id="aeff7-214">Now that you know how to create Shared Access Signatures for any entities in Service Bus, you are ready to perform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="aeff7-215">Pamatujte si, že se tento postup funguje pro vše.</span><span class="sxs-lookup"><span data-stu-id="aeff7-215">Remember, this works for everything.</span></span> <span data-ttu-id="aeff7-216">Můžete vytvořit SAS pro fronty, tématu nebo předplatného.</span><span class="sxs-lookup"><span data-stu-id="aeff7-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="aeff7-217">Pokud poskytnete odesílatele nebo klienta SAS token, nemají klíč přímo a jejich nelze vrátit hodnotu hash k jeho získání.</span><span class="sxs-lookup"><span data-stu-id="aeff7-217">If you give a sender or client a SAS token, they don't have the key directly, and they cannot reverse the hash to obtain it.</span></span> <span data-ttu-id="aeff7-218">Jako takový budete mít kontrolu nad co přístupem a jak dlouho.</span><span class="sxs-lookup"><span data-stu-id="aeff7-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="aeff7-219">Třeba mít na paměti je, pokud změníte primární klíč v zásadách, bude zrušena žádné sdílené přístupové podpisy vytvořit z něj.</span><span class="sxs-lookup"><span data-stu-id="aeff7-219">An important thing to remember is that if you change the primary key in the policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-the-shared-access-signature-at-amqp-level"></a><span data-ttu-id="aeff7-220">Použití sdíleného přístupového podpisu (na úrovni AMQP)</span><span class="sxs-lookup"><span data-stu-id="aeff7-220">Use the Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="aeff7-221">V předchozí části znáte postup použití tokenu SAS s požadavek HTTP POST k odesílání dat do služby Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-221">In the previous section, you saw how to use the SAS token with an HTTP POST request for sending data to the Service Bus.</span></span> <span data-ttu-id="aeff7-222">Jak víte, můžete přistupovat pomocí Advanced zpráv služby Řízení front protokol (AMQP), je upřednostňovanou protokol bude použit z důvodů výkonu v mnoha scénářích Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-222">As you know, you can access Service Bus using the Advanced Message Queuing Protocol (AMQP) that is the preferred protocol to use for performance reasons, in many scenarios.</span></span> <span data-ttu-id="aeff7-223">Využití tokenu SAS s AMQP je popsané v dokumentu [AMQP Claim-Based zabezpečení verze 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) který je v pracovní koncept od 2013 ale dobře nepodporuje Azure ještě dnes.</span><span class="sxs-lookup"><span data-stu-id="aeff7-223">The SAS token usage with AMQP is described in the document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="aeff7-224">Než začnete používat k odesílání dat do služby Service Bus, vydavatele musí poslat tokenu SAS uvnitř zprávu AMQP dobře definovaný AMQP uzel s názvem **$cbs** (zobrazí se jako "speciální" fronty služba používá k získání a ověření všech SAS tokeny).</span><span class="sxs-lookup"><span data-stu-id="aeff7-224">Before starting to send data to Service Bus, the publisher must send the SAS token inside an AMQP message to a well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by the service to acquire and validate all the SAS tokens).</span></span> <span data-ttu-id="aeff7-225">Musíte zadat vydavatele **ReplyTo** pole uvnitř zpráva AMQP; Toto je uzel, ve kterém služba reaguje na vydavatele s výsledek ověření tokenu (jednoduché požadavek nebo odpověď vzor mezi vydavatele a služby ).</span><span class="sxs-lookup"><span data-stu-id="aeff7-225">The publisher must specify the **ReplyTo** field inside the AMQP message; this is the node in which the service replies to the publisher with the result of the token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="aeff7-226">Tento uzel odpověď se vytvoří "na za chodu," o "dynamické vytvoření vzdáleném uzlu" a Mluvte podle specifikace protokolu AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="aeff7-226">This reply node is created "on the fly," speaking about "dynamic creation of remote node" as described by the AMQP 1.0 specification.</span></span> <span data-ttu-id="aeff7-227">Po zkontrolování, že je platný SAS token, můžete vydavatele vpřed a začít odesílat data do služby.</span><span class="sxs-lookup"><span data-stu-id="aeff7-227">After checking that the SAS token is valid, the publisher can go forward and start to send data to the service.</span></span>

<span data-ttu-id="aeff7-228">Následující kroky ukazují, jak odeslat token SAS s použitím protokolu AMQP [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) knihovny.</span><span class="sxs-lookup"><span data-stu-id="aeff7-228">The following steps show how to send the SAS token with AMQP protocol using the [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="aeff7-229">To je užitečné, pokud nemůžete použít oficiální Service Bus SDK (například na WinRT, rozhraní .net Compact Framework, rozhraní .net Micro Framework a Mono) vývoj v jazyce C\#.</span><span class="sxs-lookup"><span data-stu-id="aeff7-229">This is useful if you can't use the official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="aeff7-230">Tato knihovna je samozřejmě užitečné při pochopit, jak založené na deklaracích identity zabezpečení funguje na úrovni protokolu AMQP, jako jste viděli, jak to funguje na úrovni protokolu HTTP (s požadavek HTTP POST a SAS token odeslaný v hlavičce "Autorizace").</span><span class="sxs-lookup"><span data-stu-id="aeff7-230">Of course, this library is useful to help understand how claims-based security works at the AMQP level, as you saw how it works at the HTTP level (with an HTTP POST request and the SAS token sent inside the "Authorization" header).</span></span> <span data-ttu-id="aeff7-231">Pokud nepotřebujete takové hluboké znalosti o AMQP, můžete použít oficiální Service Bus SDK s rozhraním .net Framework aplikace, které bude to pro vás.</span><span class="sxs-lookup"><span data-stu-id="aeff7-231">If you don't need such deep knowledge about AMQP, you can use the official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="aeff7-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="aeff7-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) to send</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct the put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive the response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // the sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="aeff7-233">`PutCbsToken()` Metoda přijímá *připojení* (instance třídy připojení AMQP jako poskytované [AMQP .NET Lite knihovny](https://github.com/Azure/amqpnetlite)), která představuje připojení TCP a *sasToken* parametr, který je SAS token k odeslání.</span><span class="sxs-lookup"><span data-stu-id="aeff7-233">The `PutCbsToken()` method receives the *connection* (AMQP connection class instance as provided by the [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents the TCP connection to the service and the *sasToken* parameter that is the SAS token to send.</span></span> 

> [!NOTE]
> <span data-ttu-id="aeff7-234">Je důležité, že připojení je vytvořen s **SASL ověřovací mechanismus nastavit na externí** (a ne prostý výchozí uživatelské jméno a heslo použít, když je nebudete muset odeslat SAS token).</span><span class="sxs-lookup"><span data-stu-id="aeff7-234">It's important that the connection is created with **SASL authentication mechanism set to EXTERNAL** (and not the default PLAIN with username and password used when you don't need to send the SAS token).</span></span>
> 
> 

<span data-ttu-id="aeff7-235">V dalším kroku vydavatele vytvoří dva odkazy AMQP pro tokenu SAS odesílání a příjmu odpovědi (výsledek ověření tokenu) ze služby.</span><span class="sxs-lookup"><span data-stu-id="aeff7-235">Next, the publisher creates two AMQP links for sending the SAS token and receiving the reply (the token validation result) from the service.</span></span>

<span data-ttu-id="aeff7-236">AMQP zpráva obsahuje sadu vlastností a další informace než jednoduché zprávy.</span><span class="sxs-lookup"><span data-stu-id="aeff7-236">The AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="aeff7-237">SAS token je do těla zprávy (pomocí jeho konstruktoru).</span><span class="sxs-lookup"><span data-stu-id="aeff7-237">The SAS token is the body of the message (using its constructor).</span></span> <span data-ttu-id="aeff7-238">**"ReplyTo"** je nastavena na název uzlu pro příjem výsledek ověření na tento odkaz příjemce (pokud, můžete změnit její název chcete a bude nutné vytvořit dynamicky službou).</span><span class="sxs-lookup"><span data-stu-id="aeff7-238">The **"ReplyTo"** property is set to the node name for receiving the validation result on the receiver link (you can change its name if you want, and it will be created dynamically by the service).</span></span> <span data-ttu-id="aeff7-239">Poslední tři aplikace nebo vlastní vlastnosti používá službu k označení, jaký druh operace má spustit.</span><span class="sxs-lookup"><span data-stu-id="aeff7-239">The last three application/custom properties are used by the service to indicate what kind of operation it has to execute.</span></span> <span data-ttu-id="aeff7-240">Jak je popsáno ve specifikaci CBS koncept, musí být **název operace** ("put-token"), **typ tokenu** (v tomto případě "servicebus.windows.net:sastoken") a **"název" Cílová skupina** na kterou se vztahuje token (celý entity).</span><span class="sxs-lookup"><span data-stu-id="aeff7-240">As described by the CBS draft specification, they must be the **operation name** ("put-token"), the **type of token** (in this case, a "servicebus.windows.net:sastoken"), and the **"name" of the audience** to which the token applies (the entire entity).</span></span>

<span data-ttu-id="aeff7-241">Po odeslání tokenu SAS na odkaz odesílatele, musí vydavatele čtení odpovědi na tento odkaz příjemce.</span><span class="sxs-lookup"><span data-stu-id="aeff7-241">After sending the SAS token on the sender link, the publisher must read the reply on the receiver link.</span></span> <span data-ttu-id="aeff7-242">Odpověď je jednoduchý AMQP zprávou s vlastností aplikace s názvem **"kód stavu"** obsahující stejné hodnoty jako stavový kód HTTP.</span><span class="sxs-lookup"><span data-stu-id="aeff7-242">The reply is a simple AMQP message with an application property named **"status-code"** that can contain the same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="aeff7-243">Práva potřebná pro operace služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="aeff7-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="aeff7-244">V následující tabulce jsou uvedeny přístupová práva potřebná pro různé operace na prostředcích služby Service Bus.</span><span class="sxs-lookup"><span data-stu-id="aeff7-244">The following table shows the access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="aeff7-245">Operace</span><span class="sxs-lookup"><span data-stu-id="aeff7-245">Operation</span></span> | <span data-ttu-id="aeff7-246">Požadované deklarace identity</span><span class="sxs-lookup"><span data-stu-id="aeff7-246">Claim Required</span></span> | <span data-ttu-id="aeff7-247">Deklarace oboru</span><span class="sxs-lookup"><span data-stu-id="aeff7-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="aeff7-248">**Namespace**</span><span class="sxs-lookup"><span data-stu-id="aeff7-248">**Namespace**</span></span> | | |
| <span data-ttu-id="aeff7-249">Konfigurovat autorizační pravidlo na obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="aeff7-250">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-250">Manage</span></span> |<span data-ttu-id="aeff7-251">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-251">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-252">**Služba registru**</span><span class="sxs-lookup"><span data-stu-id="aeff7-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="aeff7-253">Zobrazení výčtu privátní zásady</span><span class="sxs-lookup"><span data-stu-id="aeff7-253">Enumerate Private Policies</span></span> |<span data-ttu-id="aeff7-254">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-254">Manage</span></span> |<span data-ttu-id="aeff7-255">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-255">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-256">Zahájit naslouchání na obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-256">Begin listening on a namespace</span></span> |<span data-ttu-id="aeff7-257">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-257">Listen</span></span> |<span data-ttu-id="aeff7-258">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-258">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-259">Odesílání zpráv pro naslouchací proces v oboru názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-259">Send messages to a listener at a namespace</span></span> |<span data-ttu-id="aeff7-260">Odeslat</span><span class="sxs-lookup"><span data-stu-id="aeff7-260">Send</span></span> |<span data-ttu-id="aeff7-261">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-261">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-262">**Fronty**</span><span class="sxs-lookup"><span data-stu-id="aeff7-262">**Queue**</span></span> | | |
| <span data-ttu-id="aeff7-263">Vytvoření fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-263">Create a queue</span></span> |<span data-ttu-id="aeff7-264">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-264">Manage</span></span> |<span data-ttu-id="aeff7-265">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-265">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-266">Odstranění fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-266">Delete a queue</span></span> |<span data-ttu-id="aeff7-267">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-267">Manage</span></span> |<span data-ttu-id="aeff7-268">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-268">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-269">Zobrazení výčtu fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-269">Enumerate queues</span></span> |<span data-ttu-id="aeff7-270">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-270">Manage</span></span> |<span data-ttu-id="aeff7-271">$Prostředky nebo fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="aeff7-272">Získat popis fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-272">Get the queue description</span></span> |<span data-ttu-id="aeff7-273">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-273">Manage</span></span> |<span data-ttu-id="aeff7-274">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-274">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-275">Konfigurovat autorizační pravidlo pro frontu</span><span class="sxs-lookup"><span data-stu-id="aeff7-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="aeff7-276">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-276">Manage</span></span> |<span data-ttu-id="aeff7-277">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-277">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-278">Odeslat do fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-278">Send into to the queue</span></span> |<span data-ttu-id="aeff7-279">Odeslat</span><span class="sxs-lookup"><span data-stu-id="aeff7-279">Send</span></span> |<span data-ttu-id="aeff7-280">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-280">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-281">Příjem zpráv z fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-281">Receive messages from a queue</span></span> |<span data-ttu-id="aeff7-282">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-282">Listen</span></span> |<span data-ttu-id="aeff7-283">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-283">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-284">Chyby nebo celé zprávy po přijetí zprávy v režimu zamknutí funkce Náhled</span><span class="sxs-lookup"><span data-stu-id="aeff7-284">Abandon or complete messages after receiving the message in peek-lock mode</span></span> |<span data-ttu-id="aeff7-285">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-285">Listen</span></span> |<span data-ttu-id="aeff7-286">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-286">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-287">Odložení zprávu pro pozdější načtení</span><span class="sxs-lookup"><span data-stu-id="aeff7-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="aeff7-288">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-288">Listen</span></span> |<span data-ttu-id="aeff7-289">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-289">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-290">Tato zpráva</span><span class="sxs-lookup"><span data-stu-id="aeff7-290">Deadletter a message</span></span> |<span data-ttu-id="aeff7-291">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-291">Listen</span></span> |<span data-ttu-id="aeff7-292">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-292">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-293">Zjištění stavu související s relací fronty zpráv</span><span class="sxs-lookup"><span data-stu-id="aeff7-293">Get the state associated with a message queue session</span></span> |<span data-ttu-id="aeff7-294">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-294">Listen</span></span> |<span data-ttu-id="aeff7-295">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-295">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-296">Nastavit stav související s relací fronty zpráv</span><span class="sxs-lookup"><span data-stu-id="aeff7-296">Set the state associated with a message queue session</span></span> |<span data-ttu-id="aeff7-297">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-297">Listen</span></span> |<span data-ttu-id="aeff7-298">Každou adresu, platný fronty</span><span class="sxs-lookup"><span data-stu-id="aeff7-298">Any valid queue address</span></span> |
| <span data-ttu-id="aeff7-299">**Téma**</span><span class="sxs-lookup"><span data-stu-id="aeff7-299">**Topic**</span></span> | | |
| <span data-ttu-id="aeff7-300">Vytvoření tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-300">Create a topic</span></span> |<span data-ttu-id="aeff7-301">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-301">Manage</span></span> |<span data-ttu-id="aeff7-302">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-302">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-303">Odstranit téma</span><span class="sxs-lookup"><span data-stu-id="aeff7-303">Delete a topic</span></span> |<span data-ttu-id="aeff7-304">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-304">Manage</span></span> |<span data-ttu-id="aeff7-305">Každou adresu, platný tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-305">Any valid topic address</span></span> |
| <span data-ttu-id="aeff7-306">Zobrazení výčtu témata</span><span class="sxs-lookup"><span data-stu-id="aeff7-306">Enumerate topics</span></span> |<span data-ttu-id="aeff7-307">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-307">Manage</span></span> |<span data-ttu-id="aeff7-308">$Prostředky nebo témata</span><span class="sxs-lookup"><span data-stu-id="aeff7-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="aeff7-309">Získání popisu tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-309">Get the topic description</span></span> |<span data-ttu-id="aeff7-310">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-310">Manage</span></span> |<span data-ttu-id="aeff7-311">Každou adresu, platný tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-311">Any valid topic address</span></span> |
| <span data-ttu-id="aeff7-312">Konfigurovat autorizační pravidlo pro téma</span><span class="sxs-lookup"><span data-stu-id="aeff7-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="aeff7-313">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-313">Manage</span></span> |<span data-ttu-id="aeff7-314">Každou adresu, platný tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-314">Any valid topic address</span></span> |
| <span data-ttu-id="aeff7-315">Odeslat do tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-315">Send to the topic</span></span> |<span data-ttu-id="aeff7-316">Odeslat</span><span class="sxs-lookup"><span data-stu-id="aeff7-316">Send</span></span> |<span data-ttu-id="aeff7-317">Každou adresu, platný tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-317">Any valid topic address</span></span> |
| <span data-ttu-id="aeff7-318">**Předplatné**</span><span class="sxs-lookup"><span data-stu-id="aeff7-318">**Subscription**</span></span> | | |
| <span data-ttu-id="aeff7-319">Vytvoření odběru</span><span class="sxs-lookup"><span data-stu-id="aeff7-319">Create a subscription</span></span> |<span data-ttu-id="aeff7-320">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-320">Manage</span></span> |<span data-ttu-id="aeff7-321">Každou adresu, obor názvů</span><span class="sxs-lookup"><span data-stu-id="aeff7-321">Any namespace address</span></span> |
| <span data-ttu-id="aeff7-322">Odstranit odběr</span><span class="sxs-lookup"><span data-stu-id="aeff7-322">Delete subscription</span></span> |<span data-ttu-id="aeff7-323">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-323">Manage</span></span> |<span data-ttu-id="aeff7-324">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-325">Zobrazení výčtu odběrů</span><span class="sxs-lookup"><span data-stu-id="aeff7-325">Enumerate subscriptions</span></span> |<span data-ttu-id="aeff7-326">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-326">Manage</span></span> |<span data-ttu-id="aeff7-327">.. / myTopic/odběrů</span><span class="sxs-lookup"><span data-stu-id="aeff7-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="aeff7-328">Získat předplatné popis</span><span class="sxs-lookup"><span data-stu-id="aeff7-328">Get subscription description</span></span> |<span data-ttu-id="aeff7-329">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-329">Manage</span></span> |<span data-ttu-id="aeff7-330">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-331">Chyby nebo celé zprávy po přijetí zprávy v režimu zamknutí funkce Náhled</span><span class="sxs-lookup"><span data-stu-id="aeff7-331">Abandon or complete messages after receiving the message in peek-lock mode</span></span> |<span data-ttu-id="aeff7-332">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-332">Listen</span></span> |<span data-ttu-id="aeff7-333">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-334">Odložení zprávu pro pozdější načtení</span><span class="sxs-lookup"><span data-stu-id="aeff7-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="aeff7-335">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-335">Listen</span></span> |<span data-ttu-id="aeff7-336">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-337">Tato zpráva</span><span class="sxs-lookup"><span data-stu-id="aeff7-337">Deadletter a message</span></span> |<span data-ttu-id="aeff7-338">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-338">Listen</span></span> |<span data-ttu-id="aeff7-339">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-340">Zjištění stavu související s relací tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-340">Get the state associated with a topic session</span></span> |<span data-ttu-id="aeff7-341">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-341">Listen</span></span> |<span data-ttu-id="aeff7-342">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-343">Nastavit stav související s relací tématu</span><span class="sxs-lookup"><span data-stu-id="aeff7-343">Set the state associated with a topic session</span></span> |<span data-ttu-id="aeff7-344">Naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-344">Listen</span></span> |<span data-ttu-id="aeff7-345">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-346">**Pravidla**</span><span class="sxs-lookup"><span data-stu-id="aeff7-346">**Rules**</span></span> | | |
| <span data-ttu-id="aeff7-347">Vytvoření pravidla</span><span class="sxs-lookup"><span data-stu-id="aeff7-347">Create a rule</span></span> |<span data-ttu-id="aeff7-348">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-348">Manage</span></span> |<span data-ttu-id="aeff7-349">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-350">Odstranění pravidla</span><span class="sxs-lookup"><span data-stu-id="aeff7-350">Delete a rule</span></span> |<span data-ttu-id="aeff7-351">Spravovat</span><span class="sxs-lookup"><span data-stu-id="aeff7-351">Manage</span></span> |<span data-ttu-id="aeff7-352">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="aeff7-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="aeff7-353">Zobrazení výčtu pravidel</span><span class="sxs-lookup"><span data-stu-id="aeff7-353">Enumerate rules</span></span> |<span data-ttu-id="aeff7-354">Spravovat nebo naslouchání</span><span class="sxs-lookup"><span data-stu-id="aeff7-354">Manage or Listen</span></span> |<span data-ttu-id="aeff7-355">.. /myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="aeff7-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="aeff7-356">Další kroky</span><span class="sxs-lookup"><span data-stu-id="aeff7-356">Next steps</span></span>

<span data-ttu-id="aeff7-357">Pokud se o přenosu zpráv přes Service Bus chcete dozvědět víc, pročtěte si následující témata.</span><span class="sxs-lookup"><span data-stu-id="aeff7-357">To learn more about Service Bus messaging, see the following topics.</span></span>

* [<span data-ttu-id="aeff7-358">Základy služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="aeff7-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="aeff7-359">Fronty, témata a odběry služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="aeff7-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="aeff7-360">Jak používat fronty Service Bus</span><span class="sxs-lookup"><span data-stu-id="aeff7-360">How to use Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="aeff7-361">Jak používat témata a odběry Service Bus</span><span class="sxs-lookup"><span data-stu-id="aeff7-361">How to use Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com