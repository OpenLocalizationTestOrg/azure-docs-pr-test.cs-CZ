---
title: "aaaCreate aplikace, které používají témata a předplatné Azure Service Bus | Microsoft Docs"
description: "Úvod toohello publikování a odběru na možnosti, které nabízí témat a odběrů Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="95f69-103">Vytvoření aplikace, které používají témata a odběry Service Bus</span><span class="sxs-lookup"><span data-stu-id="95f69-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="95f69-104">Azure Service Bus podporuje sadu založené na cloudu, orientovaný na zprávy middleware technologie včetně služby Řízení front zpráv spolehlivé a trvanlivé publikování a přihlášení k odběru zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="95f69-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="95f69-105">Tento článek vychází hello informací uvedených v [vytvářet aplikace, které používají fronty Service Bus](service-bus-create-queues.md) a nabízí úvod toohello publikování a přihlášení k odběru funkce nabízené sítěmi témat sběrnice Service Bus.</span><span class="sxs-lookup"><span data-stu-id="95f69-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="95f69-106">Měnící prodejní scénář</span><span class="sxs-lookup"><span data-stu-id="95f69-106">Evolving retail scenario</span></span>
<span data-ttu-id="95f69-107">Tento článek pokračuje scénář prodejní hello používá v [vytvářet aplikace, které používají fronty Service Bus](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="95f69-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="95f69-108">Odvolat, že data prodeje z jednotlivých terminály bodu prodej (POS) musí být systému pro správu inventáře směrované tooan se používá tento toodetermine dat při stock má toobe doplnit.</span><span class="sxs-lookup"><span data-stu-id="95f69-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="95f69-109">Každý terminál POS sestavy jeho data prodeje odesláním zprávy toohello **DataCollectionQueue** fronty, kde zůstávají, dokud jsou přijímány hello systém pro správu inventáře, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="95f69-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![Service Bus 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="95f69-111">tooevolve tento scénář, nový požadavek byl přidán toohello systému: vlastníka obchodu hello chce mít toomonitor toobe jak hello úložiště provádí v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="95f69-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="95f69-112">tooaddress tento požadavek hello systému musí "klepněte na" off hello prodeje datového proudu.</span><span class="sxs-lookup"><span data-stu-id="95f69-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="95f69-113">Každá zpráva odeslaná pomocí toobe terminály POS hello odeslat systém pro správu inventáře toohello jako před stále chceme, ale chceme jinou kopii každou zprávu, že budeme moci použít toopresent hello zobrazení toohello úložiště u vlastníka řídicího panelu.</span><span class="sxs-lookup"><span data-stu-id="95f69-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="95f69-114">V každé situaci, jako je tato, ve které budete potřebovat každou zprávu toobe spotřebovávají více stranami, můžete použít Service Bus *témata*.</span><span class="sxs-lookup"><span data-stu-id="95f69-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="95f69-115">Témata poskytují vzor publikování/přihlášení ve kterém je každá publikovaná zpráva provedené dostupné tooone nebo více odběrů zaregistrován v tématu hello.</span><span class="sxs-lookup"><span data-stu-id="95f69-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="95f69-116">Naopak v případě front každou zprávu přijme jeden spotřebitel.</span><span class="sxs-lookup"><span data-stu-id="95f69-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="95f69-117">Jsou zprávy odesílány tooa tématu hello stejným způsobem, jak se odešlou tooa fronty.</span><span class="sxs-lookup"><span data-stu-id="95f69-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="95f69-118">Však nejsou přijaty zprávy z tématu hello přímo. příjmu z předplatného.</span><span class="sxs-lookup"><span data-stu-id="95f69-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="95f69-119">Téma tooa předplatné si lze představit jako virtuální frontě, která obdrží kopii zprávy hello, které jsou odesílány toothat tématu.</span><span class="sxs-lookup"><span data-stu-id="95f69-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="95f69-120">Přijímání zpráv z odběru hello stejný způsobem, jak příjmu z fronty.</span><span class="sxs-lookup"><span data-stu-id="95f69-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="95f69-121">Návratem toohello prodejní scénář, hello fronty je nahrazena téma a přidat předplatné, které součásti hello inventáře správy systému můžete použít.</span><span class="sxs-lookup"><span data-stu-id="95f69-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="95f69-122">Hello systému nyní vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="95f69-122">hello system now appears as follows:</span></span>

![Service Bus 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="95f69-124">Konfigurace Hello zde provádí stejně jako toohello předchozí návrhu na základě fronty.</span><span class="sxs-lookup"><span data-stu-id="95f69-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="95f69-125">To znamená, zprávy odeslané toohello tématu jsou směrované toohello **inventáře** předplatného, ze které hello **systém pro správu inventáře** je využívá.</span><span class="sxs-lookup"><span data-stu-id="95f69-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="95f69-126">V pořadí toosupport hello řídicí panel správy vytvoříme druhého předplatného na hello tématu, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="95f69-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![Service Bus 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="95f69-128">Pomocí této konfigurace se provádí každou zprávu z terminály hello POS hello k dispozici tooboth **řídicí panel** a **inventáře** odběry.</span><span class="sxs-lookup"><span data-stu-id="95f69-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="95f69-129">Zobrazit mi hello kódu</span><span class="sxs-lookup"><span data-stu-id="95f69-129">Show me hello code</span></span>
<span data-ttu-id="95f69-130">článek Hello [vytvářet aplikace, které používají fronty Service Bus](service-bus-create-queues.md) popisuje, jak toosign k účtu Azure a vytvořit obor názvů služby.</span><span class="sxs-lookup"><span data-stu-id="95f69-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="95f69-131">Hello nejjednodušší způsob, jak tooreference Service Bus závislostí je tooinstall hello Service Bus [balíček Nuget](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="95f69-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="95f69-132">Můžete také získat hello knihovny Service Bus jako součást hello Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="95f69-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="95f69-133">Hello stažení je k dispozici na hello [stránky pro stažení sady Azure SDK](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="95f69-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="95f69-134">Vytvoření tématu hello a odběry</span><span class="sxs-lookup"><span data-stu-id="95f69-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="95f69-135">Operace správy pro Service Bus entit pro zasílání zpráv (fronty a publikování a přihlášení k odběru témata) se provádí prostřednictvím hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) třídy.</span><span class="sxs-lookup"><span data-stu-id="95f69-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="95f69-136">Příslušná pověření jsou potřeba v pořadí toocreate **NamespaceManager** instance pro konkrétní obor názvů.</span><span class="sxs-lookup"><span data-stu-id="95f69-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="95f69-137">Service Bus používá [sdíleného přístupového podpisu (SAS)](service-bus-sas.md) model zabezpečení založený na.</span><span class="sxs-lookup"><span data-stu-id="95f69-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="95f69-138">Hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) třída představuje poskytovatele tokenu zabezpečení se zabudovanými metodami pro vytváření vracení některé známé poskytovatele tokenů.</span><span class="sxs-lookup"><span data-stu-id="95f69-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="95f69-139">Použijeme [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) přihlašovací údaje SAS metoda toohold hello.</span><span class="sxs-lookup"><span data-stu-id="95f69-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="95f69-140">Hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance je pak vytvořený pomocí hello bázové adresy oboru názvů Service Bus hello a zprostředkovatele tokenu hello.</span><span class="sxs-lookup"><span data-stu-id="95f69-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="95f69-141">Hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) třída poskytuje metody toocreate, výčet a odstranění entit pro zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="95f69-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="95f69-142">Hello kód, který zobrazí se zde zobrazí jak hello **NamespaceManager** instance je vytvořený a slouží toocreate hello **DataCollectionTopic** tématu.</span><span class="sxs-lookup"><span data-stu-id="95f69-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="95f69-143">Všimněte si, že jsou přetížení hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) metoda, která umožňují tooset vlastnosti tématu hello.</span><span class="sxs-lookup"><span data-stu-id="95f69-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="95f69-144">Například můžete nastavit hello výchozí time to live (TTL) hodnotu pro zprávy odeslané toohello tématu.</span><span class="sxs-lookup"><span data-stu-id="95f69-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="95f69-145">Dál přidejte hello **inventáře** a **řídicí panel** odběry.</span><span class="sxs-lookup"><span data-stu-id="95f69-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="95f69-146">Odeslání zprávy toohello tématu</span><span class="sxs-lookup"><span data-stu-id="95f69-146">Send messages toohello topic</span></span>
<span data-ttu-id="95f69-147">Pro spuštění operace na Service Bus entity; například odesílání a přijímání zpráv, aplikace musíte nejdřív vytvořit [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) objektu.</span><span class="sxs-lookup"><span data-stu-id="95f69-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="95f69-148">Podobně jako toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) třídy, hello **MessagingFactory** instance je vytvořený z hello bázové adresy oboru názvů služby hello a zprostředkovatele tokenu hello.</span><span class="sxs-lookup"><span data-stu-id="95f69-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="95f69-149">Zprávy odeslané tooand přijal od témat sběrnice Service Bus jsou instance třídy hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) třídy.</span><span class="sxs-lookup"><span data-stu-id="95f69-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="95f69-150">Tato třída obsahuje sadu standardních vlastností (jako například [popisek](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) a [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), slovník, který je použité toohold vlastnosti aplikace a tělo s libovolnými aplikačními daty.</span><span class="sxs-lookup"><span data-stu-id="95f69-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="95f69-151">Aplikace může tělo hello nastavit tak předávání jakýkoli serializovatelný objekt (hello následující příklad předá **SalesData** objekt, který představuje data prodeje hello z terminálu hello POS), který budou používat hello [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello objektu.</span><span class="sxs-lookup"><span data-stu-id="95f69-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="95f69-152">Alternativně [datového proudu](https://msdn.microsoft.com/library/system.io.stream.aspx) může být zadán objekt.</span><span class="sxs-lookup"><span data-stu-id="95f69-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="95f69-153">Hello nejjednodušší způsob, jak toosend zprávy toohello téma je toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) objekt přímo z hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span><span class="sxs-lookup"><span data-stu-id="95f69-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="95f69-154">Příjem zpráv z odběru</span><span class="sxs-lookup"><span data-stu-id="95f69-154">Receive messages from a subscription</span></span>
<span data-ttu-id="95f69-155">Podobně jako fronty toousing, tooreceive zprávy z odběru můžete použít [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objekt, který vytvoříte přímo z hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) pomocí [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="95f69-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="95f69-156">Můžete použít některou z hello dva různé režimy přijímat (**ReceiveAndDelete** a **PeekLock**), jak je popsáno v [vytvářet aplikace, které používají fronty Service Bus](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="95f69-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="95f69-157">Všimněte si, že při vytváření **MessageReceiver** odběrů, hello *entityPath* parametr má podobu hello `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="95f69-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="95f69-158">Proto toocreate **MessageReceiver** pro hello **inventáře** předplatné hello **DataCollectionTopic** tématu *entityPath*musí být nastaven příliš`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="95f69-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="95f69-159">Hello kódu vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="95f69-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="95f69-160">Filtrů odběrů</span><span class="sxs-lookup"><span data-stu-id="95f69-160">Subscription filters</span></span>
<span data-ttu-id="95f69-161">Pokud v tomto scénáři jsou vytvářeny všech zpráv odeslaných toohello tématu k dispozici tooall zaregistrované předplatné.</span><span class="sxs-lookup"><span data-stu-id="95f69-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="95f69-162">Hello zde klíče frázi je "k dispozici."</span><span class="sxs-lookup"><span data-stu-id="95f69-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="95f69-163">Při odběry služby Service Bus najdete v části všech zpráv odeslaných toohello téma, můžete zkopírovat jenom podmnožinu těchto fronty zpráv toohello virtuální odběru.</span><span class="sxs-lookup"><span data-stu-id="95f69-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="95f69-164">To se provádí pomocí předplatného *filtry*.</span><span class="sxs-lookup"><span data-stu-id="95f69-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="95f69-165">Při vytváření odběru zadáte výraz filtru v podobě hello predikátu SQL92 styl, který pracuje přes hello vlastnosti uvítací zprávu, jak hello vlastnosti systému (například [popisek](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) a aplikace hello vlastnosti, jako například **StoreName** v předchozím příkladu hello.</span><span class="sxs-lookup"><span data-stu-id="95f69-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="95f69-166">Vyvíjejí tooillustrate hello scénář tím, druhý úložiště je toobe přidané tooour prodejní scénář.</span><span class="sxs-lookup"><span data-stu-id="95f69-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="95f69-167">Prodejní data ze všech terminály hello POS z obou úložiště ještě systém pro správu inventáře toohello centralizované toobe směrovat, ale manažera úložiště pomocí nástroje hello řídicí panel je jen zájem o hello výkon toto úložiště.</span><span class="sxs-lookup"><span data-stu-id="95f69-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="95f69-168">Pomocí filtrování tooachieve toto předplatné.</span><span class="sxs-lookup"><span data-stu-id="95f69-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="95f69-169">Všimněte si, že když terminály hello POS publikování zpráv, nastavují hello **StoreName** vlastnosti aplikace na uvítací zprávu.</span><span class="sxs-lookup"><span data-stu-id="95f69-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="95f69-170">Zadána dvě úložiště, například **Redmond** a **Praha**, terminály hello POS v hello Redmond ukládání razítko jejich data prodeje zprávy s **StoreName** rovnat příliš **Redmond**, zatímco použití terminály POS ukládání hello Praha **StoreName** rovnat příliš**Praha**.</span><span class="sxs-lookup"><span data-stu-id="95f69-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="95f69-171">Správce úložiště Hello hello Redmond uložit jenom chce toosee data z jeho terminály POS.</span><span class="sxs-lookup"><span data-stu-id="95f69-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="95f69-172">Hello systému vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="95f69-172">hello system appears as follows:</span></span>

![Služby Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="95f69-174">tooset až tento směrování, vytvoříte hello **řídicí panel** předplatné následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="95f69-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="95f69-175">Pomocí této [filtr předplatných](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), jen zprávy, které mají hello **StoreName** vlastností nastavenou příliš**Redmond** bude zkopírovaný toohello virtuální fronty pro hello **Řídicí panel** předplatné.</span><span class="sxs-lookup"><span data-stu-id="95f69-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="95f69-176">Je mnohem víc toosubscription filtrování, ale.</span><span class="sxs-lookup"><span data-stu-id="95f69-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="95f69-177">Aplikace mohou mít více pravidel filtru podle předplatného v přidání toohello možnost toomodify hello vlastnosti zprávy, jak předává virtuální fronty odběru tooa.</span><span class="sxs-lookup"><span data-stu-id="95f69-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="95f69-178">Souhrn</span><span class="sxs-lookup"><span data-stu-id="95f69-178">Summary</span></span>
<span data-ttu-id="95f69-179">Všechny hello důvodů toouse služby Řízení front popsané v [vytvářet aplikace, které používají fronty Service Bus](service-bus-create-queues.md) vztahovat tootopics, konkrétně:</span><span class="sxs-lookup"><span data-stu-id="95f69-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="95f69-180">Časové oddělení – zpráva producenti a spotřebitelé nemají toobe online na hello stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="95f69-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="95f69-181">Vyrovnávání zátěže – vrcholů v zatížení jsou vyhlazené v tématu hello povolení spotřebitelskou aplikací toobe zřízené pro průměrnou zátěž místo zátěž ve špičce.</span><span class="sxs-lookup"><span data-stu-id="95f69-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="95f69-182">Vyrovnávání zatížení – podobně jako fronty tooa, může mít několik konkurenčních spotřebitelů naslouchání v rámci jednoho předplatného s každou zprávu předáno tooonly jeden hello příjemců, a tím Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="95f69-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="95f69-183">Volné párování – můžete rozvíjet hello zasílání zpráv na úrovni sítě bez ovlivnění stávající koncové body; například přidáním odběrů nebo změna tooallow tématu tooa filtry pro nové spotřebitele.</span><span class="sxs-lookup"><span data-stu-id="95f69-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="95f69-184">Další kroky</span><span class="sxs-lookup"><span data-stu-id="95f69-184">Next steps</span></span>

<span data-ttu-id="95f69-185">V tématu [vytvářet aplikace, které používají fronty Service Bus](service-bus-create-queues.md) informace o způsobu toouse fronty ve scénáři prodejní hello POS.</span><span class="sxs-lookup"><span data-stu-id="95f69-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>

