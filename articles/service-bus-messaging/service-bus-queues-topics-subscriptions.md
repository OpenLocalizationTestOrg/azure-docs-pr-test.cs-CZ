---
title: "aaaOverview fronty, témata a odběry pro zasílání zpráv Azure Service Bus | Microsoft Docs"
description: "Přehled služby Service Bus entity pro zasílání zpráv."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a306ced4-74e9-47c6-990a-d9c47efa31d5
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2017
ms.author: sethm
ms.openlocfilehash: 73135d2658e341c14dbb114ab938faed91578ff1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-queues-topics-and-subscriptions"></a><span data-ttu-id="64854-103">Fronty, témata a odběry služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="64854-103">Service Bus queues, topics, and subscriptions</span></span>

<span data-ttu-id="64854-104">Microsoft Azure Service Bus podporuje sadu založené na cloudu, orientovaný na zprávy middleware technologie včetně služby Řízení front zpráv spolehlivé a trvanlivé publikování a přihlášení k odběru zasílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="64854-104">Microsoft Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="64854-105">Tyto funkce "zprostředkovaného" přenosu zpráv může považovat za odpojeného zasílání zpráv funkce, které podpora publikování a odběru, dočasné oddělení a vyvažování zátěže scénáře s využitím infrastruktury zasílání zpráv Service Bus hello.</span><span class="sxs-lookup"><span data-stu-id="64854-105">These "brokered" messaging capabilities can be thought of as decoupled messaging features that support publish-subscribe, temporal decoupling, and load balancing scenarios using hello Service Bus messaging fabric.</span></span> <span data-ttu-id="64854-106">Oddělená komunikace má mnoho výhod – klienti a servery se například můžou spojit podle potřeby a provádět své operace asynchronním způsobem.</span><span class="sxs-lookup"><span data-stu-id="64854-106">Decoupled communication has many advantages; for example, clients and servers can connect as needed and perform their operations in an asynchronous fashion.</span></span>

<span data-ttu-id="64854-107">Hello entity zasílání zpráv, které tvoří jádro hello Dobrý den, zasílání zpráv možnosti v Service Bus jsou fronty, témata a odběry a pravidla nebo akce.</span><span class="sxs-lookup"><span data-stu-id="64854-107">hello messaging entities that form hello core of hello messaging capabilities in Service Bus are queues, topics and subscriptions, and rules/actions.</span></span>

## <a name="queues"></a><span data-ttu-id="64854-108">Fronty</span><span class="sxs-lookup"><span data-stu-id="64854-108">Queues</span></span>

<span data-ttu-id="64854-109">Fronty nabízejí *First In, Out první* tooone doručování zpráv (metodou FIFO) nebo další konkurenčních spotřebitelů.</span><span class="sxs-lookup"><span data-stu-id="64854-109">Queues offer *First In, First Out* (FIFO) message delivery tooone or more competing consumers.</span></span> <span data-ttu-id="64854-110">To znamená že zprávy jsou obvykle očekávané toobe přijme a zpracuje hello příjemci v hello pořadí, ve kterém byly přidány toohello fronty, a každou zprávu přijme a zpracuje jenom jeden příjemce zprávy.</span><span class="sxs-lookup"><span data-stu-id="64854-110">That is, messages are typically expected toobe received and processed by hello receivers in hello order in which they were added toohello queue, and each message is received and processed by only one message consumer.</span></span> <span data-ttu-id="64854-111">Klíčovou výhodou použití front je tooachieve "časové oddělení" součásti aplikace.</span><span class="sxs-lookup"><span data-stu-id="64854-111">A key benefit of using queues is tooachieve "temporal decoupling" of application components.</span></span> <span data-ttu-id="64854-112">Jinými slovy, hello producenti (odesílatelé) a spotřebitelé (příjemci) nemusí toobe odesílání a příjem zpráv v hello stejné času, protože zprávy jsou bezpečně uložené ve frontě hello.</span><span class="sxs-lookup"><span data-stu-id="64854-112">In other words, hello producers (senders) and consumers (receivers) do not have toobe sending and receiving messages at hello same time, because messages are stored durably in hello queue.</span></span> <span data-ttu-id="64854-113">Kromě toho hello producent neobsahovala toowait na odpověď od příjemce hello v pořadí toocontinue tooprocess a odesílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="64854-113">Furthermore, hello producer does not have toowait for a reply from hello consumer in order toocontinue tooprocess and send messages.</span></span>

<span data-ttu-id="64854-114">Výhodou je "zatížení vyrovnávání,", který umožňuje producenti a spotřebitelé toosend a přijímat zprávy různými rychlostmi.</span><span class="sxs-lookup"><span data-stu-id="64854-114">A related benefit is "load leveling," which enables producers and consumers toosend and receive messages at different rates.</span></span> <span data-ttu-id="64854-115">V mnoha aplikacích zatížení systému hello se liší v čase; ale hello zpracování čas potřebný pro jednotlivé jednotky práce je obvykle stálá.</span><span class="sxs-lookup"><span data-stu-id="64854-115">In many applications, hello system load varies over time; however, hello processing time required for each unit of work is typically constant.</span></span> <span data-ttu-id="64854-116">Propojovací producenti a spotřebitelé zpráv s frontou znamená, že tento hello použití jenom aplikace nemá toobe zřízené toobe možné toohandle průměrnou zátěž místo zátěž ve špičce.</span><span class="sxs-lookup"><span data-stu-id="64854-116">Intermediating message producers and consumers with a queue means that hello consuming application only has toobe provisioned toobe able toohandle average load instead of peak load.</span></span> <span data-ttu-id="64854-117">Hello hloubka fronty hello s měnící hello příchozí zátěží se mění.</span><span class="sxs-lookup"><span data-stu-id="64854-117">hello depth of hello queue grows and contracts as hello incoming load varies.</span></span> <span data-ttu-id="64854-118">To znamená přímou úsporu nákladů s ohledem toohello množství infrastruktury požadované tooservice hello aplikace zatížení.</span><span class="sxs-lookup"><span data-stu-id="64854-118">This directly saves money with regard toohello amount of infrastructure required tooservice hello application load.</span></span> <span data-ttu-id="64854-119">Jako hello zátěž zvyšuje, další pracovních procesů může být přidané tooread z fronty hello.</span><span class="sxs-lookup"><span data-stu-id="64854-119">As hello load increases, more worker processes can be added tooread from hello queue.</span></span> <span data-ttu-id="64854-120">Každou zprávu zpracovává jenom jeden hello pracovních procesů.</span><span class="sxs-lookup"><span data-stu-id="64854-120">Each message is processed by only one of hello worker processes.</span></span> <span data-ttu-id="64854-121">Kromě toho tato Vyrovnávání zatížení založené na operaci pull umožňuje optimální využívání pracovních počítačů hello i v případě hello pracovní počítače liší s ohledem tooprocessing výkonu, jak se bude načítat zprávy na svou vlastním maximální rychlostí.</span><span class="sxs-lookup"><span data-stu-id="64854-121">Furthermore, this pull-based load balancing allows for optimum use of hello worker computers even if hello worker computers differ with regard tooprocessing power, as they will pull messages at their own maximum rate.</span></span> <span data-ttu-id="64854-122">Toto chování se často říká vzor "neslučitelných příjemce" hello.</span><span class="sxs-lookup"><span data-stu-id="64854-122">This pattern is often termed hello "competing consumer" pattern.</span></span>

<span data-ttu-id="64854-123">Pomocí fronty toointermediate mezi producenti a spotřebitelé zpráv poskytuje vyplývajících volné párování mezi součástmi hello.</span><span class="sxs-lookup"><span data-stu-id="64854-123">Using queues toointermediate between message producers and consumers provides an inherent loose coupling between hello components.</span></span> <span data-ttu-id="64854-124">Protože producenti a spotřebitelé nemají informace o sobě navzájem, bez nutnosti nijak neprojeví na hello producent lze upgradovat příjemce.</span><span class="sxs-lookup"><span data-stu-id="64854-124">Because producers and consumers are not aware of each other, a consumer can be upgraded without having any effect on hello producer.</span></span>

<span data-ttu-id="64854-125">Vytvoření fronty je několika krocích.</span><span class="sxs-lookup"><span data-stu-id="64854-125">Creating a queue is a multi-step process.</span></span> <span data-ttu-id="64854-126">Provádět operace správy pro Service Bus (fronty a témata) entity prostřednictvím hello zasílání zpráv [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) třídy, která je vytvořená zadáním hello bázové adresy hello Service Bus obor názvů a hello přihlašovací údaje uživatele.</span><span class="sxs-lookup"><span data-stu-id="64854-126">You perform management operations for Service Bus messaging entities (both queues and topics) via hello [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, which is constructed by supplying hello base address of hello Service Bus namespace and hello user credentials.</span></span> <span data-ttu-id="64854-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) poskytuje metody toocreate, výčet a odstranění entit přenosu zpráv.</span><span class="sxs-lookup"><span data-stu-id="64854-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="64854-128">Po vytvoření [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) objekt objektu hello SAS název a klíč a správu oboru názvů služby, můžete použít hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) metoda toocreate hello fronty.</span><span class="sxs-lookup"><span data-stu-id="64854-128">After creating a [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) object from hello SAS name and key, and a service namespace management object, you can use hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) method toocreate hello queue.</span></span> <span data-ttu-id="64854-129">Například:</span><span class="sxs-lookup"><span data-stu-id="64854-129">For example:</span></span>

```csharp
// Create management credentials
TokenProvider credentials = TokenProvider.CreateSharedAccessSignatureTokenProvider(sasKeyName,sasKeyValue);
// Create namespace client
NamespaceManager namespaceClient = new NamespaceManager(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials);
```

<span data-ttu-id="64854-130">Potom můžete vytvořit objekt fronty a objekt zasílání zpráv s hello identifikátor URI služby Service Bus jako argument.</span><span class="sxs-lookup"><span data-stu-id="64854-130">You can then create a queue object and a messaging factory with hello Service Bus URI as an argument.</span></span> <span data-ttu-id="64854-131">Například:</span><span class="sxs-lookup"><span data-stu-id="64854-131">For example:</span></span>

```csharp
QueueDescription myQueue;
myQueue = namespaceClient.CreateQueue("TestQueue");
MessagingFactory factory = MessagingFactory.Create(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials); 
QueueClient myQueueClient = factory.CreateQueueClient("TestQueue");
```

<span data-ttu-id="64854-132">Potom může odeslat toohello fronty zpráv.</span><span class="sxs-lookup"><span data-stu-id="64854-132">You can then send messages toohello queue.</span></span> <span data-ttu-id="64854-133">Například, pokud máte seznam zprostředkovaných zpráv názvem `MessageList`, podobně jako následující toohello se zobrazí kód hello:</span><span class="sxs-lookup"><span data-stu-id="64854-133">For example, if you have a list of brokered messages called `MessageList`, hello code appears similar toohello following:</span></span>

```csharp
for (int count = 0; count < 6; count++)
{
    var issue = MessageList[count];
    issue.Label = issue.Properties["IssueTitle"].ToString();
    myQueueClient.Send(issue);
}
```

<span data-ttu-id="64854-134">Potom zobrazí zprávy z fronty hello následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="64854-134">You then receive messages from hello queue as follows:</span></span>

```csharp
while ((message = myQueueClient.Receive(new TimeSpan(hours: 0, minutes: 0, seconds: 5))) != null)
    {
        Console.WriteLine(string.Format("Message received: {0}, {1}, {2}", message.SequenceNumber, message.Label, message.MessageId));
        message.Complete();

        Console.WriteLine("Processing message (sleeping...)");
        Thread.Sleep(1000);
    }
```

<span data-ttu-id="64854-135">V hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) přijímat hello režimu, je jednorázová operace; to znamená, když Service Bus přijme požadavek hello, označí uvítací zprávu jako spotřebovávanou a vrátí ji toohello aplikace.</span><span class="sxs-lookup"><span data-stu-id="64854-135">In hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation is single-shot; that is, when Service Bus receives hello request, it marks hello message as being consumed and returns it toohello application.</span></span> <span data-ttu-id="64854-136">**ReceiveAndDelete** režimu je hello nejjednodušší model a funguje nejlépe ve scénářích, které hello aplikace může tolerovat hello události selhání se zpráva nezpracuje.</span><span class="sxs-lookup"><span data-stu-id="64854-136">**ReceiveAndDelete** mode is hello simplest model and works best for scenarios in which hello application can tolerate not processing a message in hello event of a failure.</span></span> <span data-ttu-id="64854-137">toounderstand, představte si třeba situaci v problémy, které příjemce hello hello přijímání požadavků a pak dojde k chybě před zpracováním ho.</span><span class="sxs-lookup"><span data-stu-id="64854-137">toounderstand this, consider a scenario in which hello consumer issues hello receive request and then crashes before processing it.</span></span> <span data-ttu-id="64854-138">Vzhledem k tomu, že Service Bus označí uvítací zprávu jako spotřebovávanou, když aplikace hello restartuje a začne znovu přijímat zprávy, ji budou neuskutečnily uvítací zprávu, která byla spotřebované předchozí toohello havárií.</span><span class="sxs-lookup"><span data-stu-id="64854-138">Because Service Bus marks hello message as being consumed, when hello application restarts and begins consuming messages again, it will have missed hello message that was consumed prior toohello crash.</span></span>

<span data-ttu-id="64854-139">V [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) přijímat hello režimu, operace se stane dvoufázová, proto je možné toosupport aplikace, které nemůžou tolerovat vynechání zpráv.</span><span class="sxs-lookup"><span data-stu-id="64854-139">In [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation becomes two-stage, which makes it possible toosupport applications that cannot tolerate missing messages.</span></span> <span data-ttu-id="64854-140">Když Service Bus přijme požadavek hello, vyhledá hello další zprávy toobe využívat, uzamkne ji tooprevent dalšími uživateli, příjem a vrátí ji toohello aplikace.</span><span class="sxs-lookup"><span data-stu-id="64854-140">When Service Bus receives hello request, it finds hello next message toobe consumed, locks it tooprevent other consumers from receiving it, and then returns it toohello application.</span></span> <span data-ttu-id="64854-141">Po hello aplikace dokončí zpracování zprávy hello (nebo ji bezpečně uloží pro pozdější zpracování), tím potvrdí dokončení druhé fáze hello hello přijímat proces voláním [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) na uvítací přijal zprávu.</span><span class="sxs-lookup"><span data-stu-id="64854-141">After hello application finishes processing hello message (or stores it reliably for future processing), it completes hello second stage of hello receive process by calling [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) on hello received message.</span></span> <span data-ttu-id="64854-142">Když Service Bus uvidí hello **Complete** volání, která se označuje uvítací zprávu jako spotřebovávanou.</span><span class="sxs-lookup"><span data-stu-id="64854-142">When Service Bus sees hello **Complete** call, it marks hello message as being consumed.</span></span>

<span data-ttu-id="64854-143">Pokud aplikace hello nedokáže tooprocess hello zprávy z nějakého důvodu, může zavolat hello [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) na hello přijal zprávu (místo [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span><span class="sxs-lookup"><span data-stu-id="64854-143">If hello application is unable tooprocess hello message for some reason, it can call hello [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) method on hello received message (instead of [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span></span> <span data-ttu-id="64854-144">To umožňuje Service Bus toounlock uvítací zprávu a nastavit jej jako dostupné toobe přijetí, buď hello příjemce stejné nebo jiné konkurence mezi spotřebiteli.</span><span class="sxs-lookup"><span data-stu-id="64854-144">This enables Service Bus toounlock hello message and make it available toobe received again, either by hello same consumer or by another competing consumer.</span></span> <span data-ttu-id="64854-145">Za druhé existuje je přidružen vypršení časového limitu zámku hello a pokud aplikace hello selže tooprocess hello zprávy vyprší časový limit uzamčení hello (například pokud hello aplikace spadne), pak Service Bus odemkne uvítací zprávu a je k dispozici toobe přijetí (v podstatě provádění [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operace ve výchozím nastavení).</span><span class="sxs-lookup"><span data-stu-id="64854-145">Secondly, there is a timeout associated with hello lock and if hello application fails tooprocess hello message before hello lock timeout expires (for example, if hello application crashes), then Service Bus unlocks hello message and makes it available toobe received again (essentially performing an [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operation by default).</span></span>

<span data-ttu-id="64854-146">Všimněte si, že v hello událost, která hello aplikace spadne po zpracování uvítací zprávu, ale před hello **Complete** požadavku, uvítací zprávu je víckrát toohello aplikace odešle znovu.</span><span class="sxs-lookup"><span data-stu-id="64854-146">Note that in hello event that hello application crashes after processing hello message, but before hello **Complete** request is issued, hello message is redelivered toohello application when it restarts.</span></span> <span data-ttu-id="64854-147">To se často označuje jako *nejméně jednou* zpracování; to znamená, že každá zpráva se zpracuje alespoň jednou.</span><span class="sxs-lookup"><span data-stu-id="64854-147">This is often called *At Least Once* processing; that is, each message is processed at least once.</span></span> <span data-ttu-id="64854-148">Ale v některých situacích hello může doručit víckrát.</span><span class="sxs-lookup"><span data-stu-id="64854-148">However, in certain situations hello same message may be redelivered.</span></span> <span data-ttu-id="64854-149">Pokud hello scénář nemůže tolerovat zpracování duplicitní, pak v hello duplikáty toodetect aplikace, které lze dosáhnout na základě hello je vyžadován další logiku **MessageId** vlastnost uvítací zprávu, která zůstává Konstanta mezi pokusy o doručení.</span><span class="sxs-lookup"><span data-stu-id="64854-149">If hello scenario cannot tolerate duplicate processing, then additional logic is required in hello application toodetect duplicates which can be achieved based upon hello **MessageId** property of hello message, which remains constant across delivery attempts.</span></span> <span data-ttu-id="64854-150">To se označuje jako *právě jednou* zpracování.</span><span class="sxs-lookup"><span data-stu-id="64854-150">This is known as *Exactly Once* processing.</span></span>

## <a name="topics-and-subscriptions"></a><span data-ttu-id="64854-151">Témata a předplatná</span><span class="sxs-lookup"><span data-stu-id="64854-151">Topics and subscriptions</span></span>
<span data-ttu-id="64854-152">V kontrastu tooqueues, ve kterém je každá zpráva zpracuje jeden spotřebitel, *témata* a *odběry* poskytovat ve formuláři na více komunikace, *publikování a přihlášení k odběru* vzor.</span><span class="sxs-lookup"><span data-stu-id="64854-152">In contrast tooqueues, in which each message is processed by a single consumer, *topics* and *subscriptions* provide a one-to-many form of communication, in a *publish/subscribe* pattern.</span></span> <span data-ttu-id="64854-153">Užitečné pro škálování toovery velký počet příjemců, každá publikovaná zpráva se provádí k dispozici tooeach odběru registrovanému pro téma hello.</span><span class="sxs-lookup"><span data-stu-id="64854-153">Useful for scaling toovery large numbers of recipients, each published message is made available tooeach subscription registered with hello topic.</span></span> <span data-ttu-id="64854-154">Zprávy jsou odesílány tooa tématu a doručené tooone nebo více přidružených odběrů, v závislosti na pravidla filtru, které lze nastavit na základě za předplatné.</span><span class="sxs-lookup"><span data-stu-id="64854-154">Messages are sent tooa topic and delivered tooone or more associated subscriptions, depending on filter rules that can be set on a per-subscription basis.</span></span> <span data-ttu-id="64854-155">odběry Hello můžete použít další filtry toorestrict hello zprávy, že chcete tooreceive.</span><span class="sxs-lookup"><span data-stu-id="64854-155">hello subscriptions can use additional filters toorestrict hello messages that they want tooreceive.</span></span> <span data-ttu-id="64854-156">Zprávy jsou odesílány tooa téma v hello stejný způsobem se odešlou tooa fronty, ale nejsou přijaty zprávy z tématu hello přímo.</span><span class="sxs-lookup"><span data-stu-id="64854-156">Messages are sent tooa topic in hello same way they are sent tooa queue, but messages are not received from hello topic directly.</span></span> <span data-ttu-id="64854-157">Místo toho jsou přijímány z předplatného.</span><span class="sxs-lookup"><span data-stu-id="64854-157">Instead, they are received from subscriptions.</span></span> <span data-ttu-id="64854-158">Předplatné tématu se podobá virtuální frontě, která obdrží kopii zprávy hello, které jsou odesílány toohello tématu.</span><span class="sxs-lookup"><span data-stu-id="64854-158">A topic subscription resembles a virtual queue that receives copies of hello messages that are sent toohello topic.</span></span> <span data-ttu-id="64854-159">Jsou přijaty zprávy z odběru stejně jako toohello způsob příjmu z fronty.</span><span class="sxs-lookup"><span data-stu-id="64854-159">Messages are received from a subscription identically toohello way they are received from a queue.</span></span>

<span data-ttu-id="64854-160">Prostřednictvím porovnání, hello funkce odesílání zpráv z fronty mapuje přímo tooa téma a jeho funkce příjem zpráv mapuje tooa předplatné.</span><span class="sxs-lookup"><span data-stu-id="64854-160">By way of comparison, hello message-sending functionality of a queue maps directly tooa topic and its message-receiving functionality maps tooa subscription.</span></span> <span data-ttu-id="64854-161">Kromě jiných věcí, to znamená, že odběry podporují stejné vzory dříve popisované v této části s ohledem tooqueues hello: konkurence mezi spotřebiteli, časové oddělení, Vyrovnávání zatížení a vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="64854-161">Among other things, this means that subscriptions support hello same patterns described earlier in this section with regard tooqueues: competing consumer, temporal decoupling, load leveling, and load balancing.</span></span>

<span data-ttu-id="64854-162">Vytvoření tématu je podobný toocreating fronty, jak je znázorněno v příkladu hello v předchozí části hello.</span><span class="sxs-lookup"><span data-stu-id="64854-162">Creating a topic is similar toocreating a queue, as shown in hello example in hello previous section.</span></span> <span data-ttu-id="64854-163">Vytvoření služby hello URI a pak použijte hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) třída toocreate hello obor názvů klienta.</span><span class="sxs-lookup"><span data-stu-id="64854-163">Create hello service URI, and then use hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class toocreate hello namespace client.</span></span> <span data-ttu-id="64854-164">Potom můžete vytvořit téma pomocí hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) metoda.</span><span class="sxs-lookup"><span data-stu-id="64854-164">You can then create a topic using hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method.</span></span> <span data-ttu-id="64854-165">Například:</span><span class="sxs-lookup"><span data-stu-id="64854-165">For example:</span></span>

```csharp
TopicDescription dataCollectionTopic = namespaceClient.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="64854-166">V dalším kroku přidejte odběry podle potřeby:</span><span class="sxs-lookup"><span data-stu-id="64854-166">Next, add subscriptions as desired:</span></span>

```csharp
SubscriptionDescription myAgentSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Inventory");
SubscriptionDescription myAuditSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Dashboard");
```

<span data-ttu-id="64854-167">Potom můžete vytvořit téma klienta.</span><span class="sxs-lookup"><span data-stu-id="64854-167">You can then create a topic client.</span></span> <span data-ttu-id="64854-168">Například:</span><span class="sxs-lookup"><span data-stu-id="64854-168">For example:</span></span>

```csharp
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider);
TopicClient myTopicClient = factory.CreateTopicClient(myTopic.Path)
```

<span data-ttu-id="64854-169">Pomocí odesílatele zprávy hello, můžete odesílat a přijímat zprávy tooand hello tématu, jak je uvedeno v předchozí části hello.</span><span class="sxs-lookup"><span data-stu-id="64854-169">Using hello message sender, you can send and receive messages tooand from hello topic, as shown in hello previous section.</span></span> <span data-ttu-id="64854-170">Například:</span><span class="sxs-lookup"><span data-stu-id="64854-170">For example:</span></span>

```csharp
foreach (BrokeredMessage message in messageList)
{
    myTopicClient.Send(message);
    Console.WriteLine(
    string.Format("Message sent: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

<span data-ttu-id="64854-171">Podobně jako tooqueues zprávy byly přijaty z předplatného pomocí [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) objektu místo [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) objektu.</span><span class="sxs-lookup"><span data-stu-id="64854-171">Similar tooqueues, messages are received from a subscription using a [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) object instead of a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) object.</span></span> <span data-ttu-id="64854-172">Vytvoření klienta hello předplatné, předávání hello název tématu hello hello název hello odběru, a (volitelně) hello přijímat režimu jako parametry.</span><span class="sxs-lookup"><span data-stu-id="64854-172">Create hello subscription client, passing hello name of hello topic, hello name of hello subscription, and (optionally) hello receive mode as parameters.</span></span> <span data-ttu-id="64854-173">Například s hello **inventáře** předplatného:</span><span class="sxs-lookup"><span data-stu-id="64854-173">For example, with hello **Inventory** subscription:</span></span>

```csharp
// Create hello subscription client
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider); 

SubscriptionClient agentSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Inventory", ReceiveMode.PeekLock);
SubscriptionClient auditSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Dashboard", ReceiveMode.ReceiveAndDelete); 

while ((message = agentSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Inventory...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
    message.Complete();
}          

// Create a receiver using ReceiveAndDelete mode
while ((message = auditSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Dashboard...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

### <a name="rules-and-actions"></a><span data-ttu-id="64854-174">Pravidla a akce</span><span class="sxs-lookup"><span data-stu-id="64854-174">Rules and actions</span></span>
<span data-ttu-id="64854-175">V mnoha případech je nutné zpracovat zprávy, které mají určité charakteristické vlastnosti různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="64854-175">In many scenarios, messages that have specific characteristics must be processed in different ways.</span></span> <span data-ttu-id="64854-176">tooenable, můžete nakonfigurovat odběry toofind zprávy, které mají požadovaných vlastností a pak provést určité úpravy toothose vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="64854-176">tooenable this, you can configure subscriptions toofind messages that have desired properties and then perform certain modifications toothose properties.</span></span> <span data-ttu-id="64854-177">Při všech zpráv odeslaných toohello tématu odběry služby Service Bus najdete kopírovat můžete pouze podmnožinu těchto fronty zpráv toohello virtuální odběru.</span><span class="sxs-lookup"><span data-stu-id="64854-177">While Service Bus subscriptions see all messages sent toohello topic, you can only copy a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="64854-178">To se provádí pomocí filtrů odběrů.</span><span class="sxs-lookup"><span data-stu-id="64854-178">This is accomplished using subscription filters.</span></span> <span data-ttu-id="64854-179">Tyto změny se nazývají *akce filtru*.</span><span class="sxs-lookup"><span data-stu-id="64854-179">Such modifications are called *filter actions*.</span></span> <span data-ttu-id="64854-180">Při vytváření odběru zadáte výraz filtru, který funguje na hello vlastnosti uvítací zprávu, jak hello vlastnosti systému (například **popisek**) a vlastností vlastní aplikaci (například **StoreName**.) hello SQL výraz filtru se v takovém případě; volitelné bez výraz filtru SQL filtru akce definované na předplatné bude třeba provést na všechny zprávy hello pro toto předplatné.</span><span class="sxs-lookup"><span data-stu-id="64854-180">When a subscription is created, you can supply a filter expression that operates on hello properties of hello message, both hello system properties (for example, **Label**) and custom application properties (for example, **StoreName**.) hello SQL filter expression is optional in this case; without a SQL filter expression, any filter action defined on a subscription will be performed on all hello messages for that subscription.</span></span>

<span data-ttu-id="64854-181">Pomocí hello předchozí příklad, toofilter zprávy přicházející pouze z **Store1**, by vytvořit řídicí panel předplatné hello takto:</span><span class="sxs-lookup"><span data-stu-id="64854-181">Using hello previous example, toofilter messages coming only from **Store1**, you would create hello Dashboard subscription as follows:</span></span>

```csharp
namespaceManager.CreateSubscription("IssueTrackingTopic", "Dashboard", new SqlFilter("StoreName = 'Store1'"));
```

<span data-ttu-id="64854-182">K tomuto filtru předplatné v místě, jen zprávy, které mají hello `StoreName` vlastností nastavenou příliš`Store1` jsou zkopírované toohello virtuální fronty pro hello `Dashboard` předplatné.</span><span class="sxs-lookup"><span data-stu-id="64854-182">With this subscription filter in place, only messages that have hello `StoreName` property set too`Store1` are copied toohello virtual queue for hello `Dashboard` subscription.</span></span>

<span data-ttu-id="64854-183">Další informace o možných filtru hodnoty, najdete v dokumentaci hello hello [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) a [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) třídy.</span><span class="sxs-lookup"><span data-stu-id="64854-183">For more information about possible filter values, see hello documentation for hello [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) and [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) classes.</span></span> <span data-ttu-id="64854-184">Viz také hello [zprostředkované zasílání zpráv: rozšířené filtry](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) a [tématu filtry](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) ukázky.</span><span class="sxs-lookup"><span data-stu-id="64854-184">Also, see hello [Brokered Messaging: Advanced Filters](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) and [Topic Filters](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) samples.</span></span>

## <a name="next-steps"></a><span data-ttu-id="64854-185">Další kroky</span><span class="sxs-lookup"><span data-stu-id="64854-185">Next steps</span></span>
<span data-ttu-id="64854-186">Viz následující hello advanced témata pro další informace a příklady použití zasílání zpráv Service Bus.</span><span class="sxs-lookup"><span data-stu-id="64854-186">See hello following advanced topics for more information and examples of using Service Bus messaging.</span></span>

* [<span data-ttu-id="64854-187">Přehled přenosu zpráv ve službě Service Bus</span><span class="sxs-lookup"><span data-stu-id="64854-187">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="64854-188">Kurz .NET pro zprostředkované zasílání zpráv ve službě Service Bus</span><span class="sxs-lookup"><span data-stu-id="64854-188">Service Bus brokered messaging .NET tutorial</span></span>](service-bus-brokered-tutorial-dotnet.md)
* [<span data-ttu-id="64854-189">Zprostředkované zasílání zpráv kurz REST</span><span class="sxs-lookup"><span data-stu-id="64854-189">Service Bus brokered messaging REST tutorial</span></span>](service-bus-brokered-tutorial-rest.md)
* [<span data-ttu-id="64854-190">Ukázka filtrů témat</span><span class="sxs-lookup"><span data-stu-id="64854-190">Topic Filters sample </span></span>](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/TopicFilters)
* [<span data-ttu-id="64854-191">Zprostředkované zasílání zpráv: Ukázka filtrů Advanced</span><span class="sxs-lookup"><span data-stu-id="64854-191">Brokered Messaging: Advanced Filters sample</span></span>](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749)

