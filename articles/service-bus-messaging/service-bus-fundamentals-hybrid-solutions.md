---
title: "Přehled základů služby Azure Service Bus | Dokumentace Microsoftu"
description: "Úvod do používání Service Bus ke spojení aplikace Azure a jiného softwaru."
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 12654cdd-82ab-4b95-b56f-08a5a8bbc6f9
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/15/2017
ms.author: sethm
ms.openlocfilehash: af8b10f0a460e695a39879718174e81f78934ef8
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="azure-service-bus"></a><span data-ttu-id="d7403-103">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="d7403-103">Azure Service Bus</span></span>

<span data-ttu-id="d7403-104">Ať už aplikace nebo služba běží v cloudu nebo lokálně, často potřebuje komunikovat s jinými aplikacemi nebo službami.</span><span class="sxs-lookup"><span data-stu-id="d7403-104">Whether an application or service runs in the cloud or on premises, it often needs to interact with other applications or services.</span></span> <span data-ttu-id="d7403-105">Microsoft Azure nabízí službu Service Bus, která právě toto výrazně usnadňuje.</span><span class="sxs-lookup"><span data-stu-id="d7403-105">To provide a broadly useful way to do this, Microsoft Azure offers Service Bus.</span></span> <span data-ttu-id="d7403-106">V tom to článku se podíváme na tuto technologii a na to, proč byste ji mohli chtít používat.</span><span class="sxs-lookup"><span data-stu-id="d7403-106">This article looks at this technology, describing what it is and why you might want to use it.</span></span>

## <a name="service-bus-fundamentals"></a><span data-ttu-id="d7403-107">Základy služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="d7403-107">Service Bus fundamentals</span></span>

<span data-ttu-id="d7403-108">Různé situace potřebují různé styly komunikace.</span><span class="sxs-lookup"><span data-stu-id="d7403-108">Different situations call for different styles of communication.</span></span> <span data-ttu-id="d7403-109">Někdy je pro aplikace nejlepším řešením zprávy odesílat a přijímat přes jednoduchou frontu.</span><span class="sxs-lookup"><span data-stu-id="d7403-109">Sometimes, letting applications send and receive messages through a simple queue is the best solution.</span></span> <span data-ttu-id="d7403-110">V jiných situacích běžná fronta nestačí a je lepší použít frontu s publikováním a odběrem.</span><span class="sxs-lookup"><span data-stu-id="d7403-110">In other situations, an ordinary queue isn't enough; a queue with a publish-and-subscribe mechanism is better.</span></span> <span data-ttu-id="d7403-111">V některých případech stačí jen navázat spojení mezi aplikacemi a fronty nejsou vůbec potřeba.</span><span class="sxs-lookup"><span data-stu-id="d7403-111">In some cases, all that's needed is a connection between applications, and queues are not required.</span></span> <span data-ttu-id="d7403-112">Service Bus poskytuje všechny tři možnosti a umožňuje vašim aplikacím pracovat několika různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="d7403-112">Service Bus provides all three options, enabling your applications to interact in several different ways.</span></span>

<span data-ttu-id="d7403-113">Service Bus je víceklientská cloudová služba – to znamená, že ji může sdílet několik uživatelů.</span><span class="sxs-lookup"><span data-stu-id="d7403-113">Service Bus is a multi-tenant cloud service, which means that the service is shared by multiple users.</span></span> <span data-ttu-id="d7403-114">Každý uživatel, jako třeba vývojář aplikací, vytvoří *obor názvů*, a pak definuje komunikační mechanizmy, které potřebuje v daném oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="d7403-114">Each user, such as an application developer, creates a *namespace*, then defines the communication mechanisms needed within that namespace.</span></span> <span data-ttu-id="d7403-115">Na obrázku 1 je znázorněno, jak tato architektura vypadá.</span><span class="sxs-lookup"><span data-stu-id="d7403-115">Figure 1 shows how this architecture looks.</span></span>

![][1]

<span data-ttu-id="d7403-116">**Obrázek 1: Service Bus poskytuje víceklientské služby pro připojení aplikací přes cloud.**</span><span class="sxs-lookup"><span data-stu-id="d7403-116">**Figure 1: Service Bus provides a multi-tenant service for connecting applications through the cloud.**</span></span>

<span data-ttu-id="d7403-117">V oboru názvů můžete použít jednu nebo víc instancí tří různých komunikačních mechanizmů, každý z nich spojuje aplikace jiným způsobem.</span><span class="sxs-lookup"><span data-stu-id="d7403-117">Within a namespace, you can use one or more instances of three different communication mechanisms, each of which connects applications in a different way.</span></span> <span data-ttu-id="d7403-118">Na výběr jsou:</span><span class="sxs-lookup"><span data-stu-id="d7403-118">The choices are:</span></span>

* <span data-ttu-id="d7403-119">*Fronty*, které umožňují jednosměrnou komunikaci.</span><span class="sxs-lookup"><span data-stu-id="d7403-119">*Queues*, which allow one-directional communication.</span></span> <span data-ttu-id="d7403-120">Každá fronta slouží jako prostředník (někdy se tomu říká *zprostředkovatel*), který ukládá odeslané zprávy, dokud nedorazí k příjemci.</span><span class="sxs-lookup"><span data-stu-id="d7403-120">Each queue acts as an intermediary (sometimes called a *broker*) that stores sent messages until they are received.</span></span> <span data-ttu-id="d7403-121">Každou zprávu přijme jeden příjemce.</span><span class="sxs-lookup"><span data-stu-id="d7403-121">Each message is received by a single recipient.</span></span>
* <span data-ttu-id="d7403-122">*Témata*, která nabízejí jednosměrnou komunikaci pomocí *odběrů* – jedno téma může mít několik odběrů.</span><span class="sxs-lookup"><span data-stu-id="d7403-122">*Topics*, which provide one-directional communication using *subscriptions*-a single topic can have multiple subscriptions.</span></span> <span data-ttu-id="d7403-123">Podobně jako u front je téma něco jako zprostředkovatel, ale každý odběr může volitelně používat filtr a přijímat jen zprávy, které odpovídají konkrétním kritériím.</span><span class="sxs-lookup"><span data-stu-id="d7403-123">Like a queue, a topic acts as a broker, but each subscription can optionally use a filter to receive only messages that match specific criteria.</span></span>
* <span data-ttu-id="d7403-124">*Předávání*, které umožňuje jednosměrnou komunikaci.</span><span class="sxs-lookup"><span data-stu-id="d7403-124">*Relays*, which provide bi-directional communication.</span></span> <span data-ttu-id="d7403-125">Na rozdíl od front a témat se při předávání neukládají žádné zprávy; nejedná se o zprostředkování.</span><span class="sxs-lookup"><span data-stu-id="d7403-125">Unlike queues and topics, a relay doesn't store in-flight messages; it's not a broker.</span></span> <span data-ttu-id="d7403-126">Naopak se zprávy jednoduše předají k cílové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="d7403-126">Instead, it just passes them on to the destination application.</span></span>

<span data-ttu-id="d7403-127">Když vytvoříte frontu, téma nebo předávání, musíte je pojmenovat.</span><span class="sxs-lookup"><span data-stu-id="d7403-127">When you create a queue, topic, or relay, you give it a name.</span></span> <span data-ttu-id="d7403-128">Kombinace tohoto názvu a vašeho oboru názvů vytváří jedinečný identifikátor objektu.</span><span class="sxs-lookup"><span data-stu-id="d7403-128">Combined with whatever you called your namespace, this name creates a unique identifier for the object.</span></span> <span data-ttu-id="d7403-129">Aplikace můžou tento název poskytnout službě Service Bus, a pak pomocí této fronty, tématu nebo předávání mezi sebou komunikovat.</span><span class="sxs-lookup"><span data-stu-id="d7403-129">Applications can provide this name to Service Bus, then use that queue, topic, or relay to communicate with one another.</span></span> 

<span data-ttu-id="d7403-130">Pokud aplikace Windows chtějí tyto objekty používat ve scénáři přenosu, můžou využít WCF (Windows Communication Foundation).</span><span class="sxs-lookup"><span data-stu-id="d7403-130">To use any of these objects in the relay scenario, Windows applications can use Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="d7403-131">Tato služba se označuje jako [přenos WCF](../service-bus-relay/relay-what-is-it.md).</span><span class="sxs-lookup"><span data-stu-id="d7403-131">This service is known as [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span></span> <span data-ttu-id="d7403-132">Pro fronty a témata můžou aplikace Windows použít API pro přenos zpráv, které definuje služba Service Bus.</span><span class="sxs-lookup"><span data-stu-id="d7403-132">For queues and topics, Windows applications can use Service Bus-defined messaging APIs.</span></span> <span data-ttu-id="d7403-133">Pro snadnější použití těchto objektů z aplikací pro jinou platformu než Windows uvolnil Microsoft sady SDK pro Javu, Node.js a další jazyky.</span><span class="sxs-lookup"><span data-stu-id="d7403-133">To make these objects easier to use from non-Windows applications, Microsoft provides SDKs for Java, Node.js, and other languages.</span></span> <span data-ttu-id="d7403-134">Přístup k frontám a tématům se může získat i pomocí [REST API](/rest/api/servicebus/) přes HTTP(s).</span><span class="sxs-lookup"><span data-stu-id="d7403-134">You can also access queues and topics using [REST APIs](/rest/api/servicebus/) over HTTP(s).</span></span> 

<span data-ttu-id="d7403-135">Je důležité pochopit, že i když služba Service Bus samotná běží v cloudu (to znamená v datových centrech Microsoftu pro Azure), aplikace, které ji využívají, můžou běžet kdekoli.</span><span class="sxs-lookup"><span data-stu-id="d7403-135">It's important to understand that even though Service Bus itself runs in the cloud (that is, in Microsoft's Azure datacenters), applications that use it can run anywhere.</span></span> <span data-ttu-id="d7403-136">Service Bus můžete použít třeba k připojení aplikací běžících v Azure nebo aplikací běžících ve vašem vlastním datovém centru.</span><span class="sxs-lookup"><span data-stu-id="d7403-136">You can use Service Bus to connect applications running on Azure, for example, or applications running inside your own datacenter.</span></span> <span data-ttu-id="d7403-137">Můžete ji použít i k připojení aplikace běžící v Azure nebo jiné cloudové službě k lokální službě nebo k mobilním zařízením,jako jsou tablety a telefony.</span><span class="sxs-lookup"><span data-stu-id="d7403-137">You can also use it to connect an application running on Azure or another cloud platform with an on-premises application or with tablets and phones.</span></span> <span data-ttu-id="d7403-138">Dokonce s ní můžete připojit domácí spotřebiče, senzory a jiná zařízení k centrální aplikaci nebo k jiným zařízením.</span><span class="sxs-lookup"><span data-stu-id="d7403-138">It's even possible to connect household appliances, sensors, and other devices to a central application or to one other.</span></span> <span data-ttu-id="d7403-139">Service Bus je komunikační mechanizmus v cloudu, který je přístupný prakticky odkudkoli.</span><span class="sxs-lookup"><span data-stu-id="d7403-139">Service Bus is a communication mechanism in the cloud that's accessible from pretty much anywhere.</span></span> <span data-ttu-id="d7403-140">To, jakým způsobem ho budete využívat, záleží jen na tom, co vaše aplikace potřebují dělat.</span><span class="sxs-lookup"><span data-stu-id="d7403-140">How you use it depends on what your applications need to do.</span></span>

## <a name="queues"></a><span data-ttu-id="d7403-141">Fronty</span><span class="sxs-lookup"><span data-stu-id="d7403-141">Queues</span></span>

<span data-ttu-id="d7403-142">Řekněme, že jste se rozhodli spojit dvě aplikace pomocí fronty Service Bus.</span><span class="sxs-lookup"><span data-stu-id="d7403-142">Suppose you decide to connect two applications using a Service Bus queue.</span></span> <span data-ttu-id="d7403-143">Na obrázku 2 je taková situace.</span><span class="sxs-lookup"><span data-stu-id="d7403-143">Figure 2 illustrates this situation.</span></span>

![][2]

<span data-ttu-id="d7403-144">**Obrázek 2: Fronty Service Bus poskytují jednosměrné asynchronní řízení front zpráv.**</span><span class="sxs-lookup"><span data-stu-id="d7403-144">**Figure 2: Service Bus queues provide one-way asynchronous queuing.**</span></span>

<span data-ttu-id="d7403-145">Tento proces je prostý: Odesílatel odešle zprávu do fronty Service Bus a příjemce si ji z fronty vyzvedne později.</span><span class="sxs-lookup"><span data-stu-id="d7403-145">The process is simple: A sender sends a message to a Service Bus queue, and a receiver picks up that message at some later time.</span></span> <span data-ttu-id="d7403-146">Je možné, aby fronta měla pouze jednoho příjemce, jak je znázorněno na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="d7403-146">A queue can have just a single receiver, as Figure 2 shows.</span></span> <span data-ttu-id="d7403-147">Ze stejné fronty může také číst více aplikací.</span><span class="sxs-lookup"><span data-stu-id="d7403-147">Or, multiple applications can read from the same queue.</span></span> <span data-ttu-id="d7403-148">V druhém případě přečte každou zprávu pouze jeden příjemce.</span><span class="sxs-lookup"><span data-stu-id="d7403-148">In the latter situation, each message is read by just one receiver.</span></span> <span data-ttu-id="d7403-149">Pro službu přetypování byste měli raději použít téma.</span><span class="sxs-lookup"><span data-stu-id="d7403-149">For a multi-cast service, you should use a topic instead.</span></span>

<span data-ttu-id="d7403-150">Každá zpráva má dvě části: skupinu vlastností ve formě dvojice klíč+hodnota a tělo zprávy.</span><span class="sxs-lookup"><span data-stu-id="d7403-150">Each message has two parts: a set of properties, each a key/value pair, and a message payload.</span></span> <span data-ttu-id="d7403-151">Tělo zprávy může mít formát binární, textový nebo i XML.</span><span class="sxs-lookup"><span data-stu-id="d7403-151">The payload can be binary, text, or even XML.</span></span> <span data-ttu-id="d7403-152">Jejich použití závisí na tom, co se vaše aplikace snaží udělat.</span><span class="sxs-lookup"><span data-stu-id="d7403-152">How they're used depends on what an application is trying to do.</span></span> <span data-ttu-id="d7403-153">Například jedna aplikace odešle zprávu o nedávném prodeji, která může obsahovat třeba tyto údaje: **Seller="Ava"** a **Amount=10000**.</span><span class="sxs-lookup"><span data-stu-id="d7403-153">For example, an application sending a message about a recent sale might include the properties **Seller="Ava"** and **Amount=10000**.</span></span> <span data-ttu-id="d7403-154">Tělo zprávy může obsahovat naskenovaný snímek podepsané smlouvy o prodeji nebo nemusí obsahovat nic a může zůstat prázdné.</span><span class="sxs-lookup"><span data-stu-id="d7403-154">The message body might contain a scanned image of the sale's signed contract or, if there isn't one, remain empty.</span></span>

<span data-ttu-id="d7403-155">Příjemce může zprávu načíst z fronty Service Bus dvěma různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="d7403-155">A receiver can read a message from a Service Bus queue in two different ways.</span></span> <span data-ttu-id="d7403-156">První možnost se jmenuje *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)* (přijmout a odstranit) – odebere zprávu z fronty a okamžitě ji odstraní.</span><span class="sxs-lookup"><span data-stu-id="d7403-156">The first option, called *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, removes a message from the queue and immediately deletes it.</span></span> <span data-ttu-id="d7403-157">Tento způsob je velmi jednoduchý, ale pokud příjemce spadne, než se mu podaří zprávu zpracovat, zprávu ztratí.</span><span class="sxs-lookup"><span data-stu-id="d7403-157">This option is simple, but if the receiver crashes before it finishes processing the message, the message is lost.</span></span> <span data-ttu-id="d7403-158">A protože se už odstranila z fronty, nemůže ji získat ani žádný jiný příjemce.</span><span class="sxs-lookup"><span data-stu-id="d7403-158">Because it's been removed from the queue, no other receiver can access it.</span></span> 

<span data-ttu-id="d7403-159">Druhá možnost se jmenuje *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)* (uzamknout pro zpracování) a jejím smyslem je vyřešit právě tento problém.</span><span class="sxs-lookup"><span data-stu-id="d7403-159">The second option, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, is meant to help with this problem.</span></span> <span data-ttu-id="d7403-160">Stejně jako v případě **ReceiveAndDelete** se při čtení **PeekLock** zpráva odebere z fronty.</span><span class="sxs-lookup"><span data-stu-id="d7403-160">Like **ReceiveAndDelete**, a **PeekLock** read removes a message from the queue.</span></span> <span data-ttu-id="d7403-161">Jenže se při tom neodstraní úplně.</span><span class="sxs-lookup"><span data-stu-id="d7403-161">It doesn't delete the message, however.</span></span> <span data-ttu-id="d7403-162">Místo toho se zpráva jen uzamkne, aby nebyla vidět pro ostatní příjemce, a pak čeká na jednu ze tří událostí:</span><span class="sxs-lookup"><span data-stu-id="d7403-162">Instead, it locks the message, making it invisible to other receivers, then waits for one of three events:</span></span>

* <span data-ttu-id="d7403-163">Pokud příjemce zprávu úspěšně zpracuje, zavolá [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) a fronta zprávu odstraní.</span><span class="sxs-lookup"><span data-stu-id="d7403-163">If the receiver processes the message successfully, it calls [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), and the queue deletes the message.</span></span> 
* <span data-ttu-id="d7403-164">Pokud se příjemce rozhodne, že nedokáže zprávu úspěšně zpracovat, zavolá [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span><span class="sxs-lookup"><span data-stu-id="d7403-164">If the receiver decides that it can't process the message successfully, it calls [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span></span> <span data-ttu-id="d7403-165">Fronta pak zruší zámek zprávy a ta je pak znovu dostupná pro ostatní příjemce.</span><span class="sxs-lookup"><span data-stu-id="d7403-165">The queue then removes the lock from the message and makes it available to other receivers.</span></span>
* <span data-ttu-id="d7403-166">Pokud příjemce v nastaveném časovém limitu nezavolá ani jednu z těchto metod (ve výchozím nastavení je to 60 sekund), fronta předpokládá, že příjemce selhal.</span><span class="sxs-lookup"><span data-stu-id="d7403-166">If the receiver calls neither of these methods within a configurable period of time (by default, 60 seconds), the queue assumes the receiver has failed.</span></span> <span data-ttu-id="d7403-167">V takovém případě se fronta chová jako kdyby příjemce zavolal **Abandon** a zpřístupní zprávu dalším příjemcům.</span><span class="sxs-lookup"><span data-stu-id="d7403-167">In this case, it behaves as if the receiver had called **Abandon**, making the message available to other receivers.</span></span>

<span data-ttu-id="d7403-168">Všimněte si, co se tu může stát: Stejná zpráva se může dodat dvakrát, třeba i dvěma různým příjemcům.</span><span class="sxs-lookup"><span data-stu-id="d7403-168">Notice what can happen here: the same message might be delivered twice, perhaps to two different receivers.</span></span> <span data-ttu-id="d7403-169">Aplikace, které používají fronty Service Bus, na tuto možnost musí být připravené.</span><span class="sxs-lookup"><span data-stu-id="d7403-169">Applications using Service Bus queues must be prepared for this event.</span></span> <span data-ttu-id="d7403-170">Pro usnadnění detekce duplicitních zpráv má každá zpráva jedinečnou vlastnost [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId), která ve výchozím nastavení zůstává pro danou zprávu vždy stejná bez ohledu na to, kolikrát se přečte z fronty.</span><span class="sxs-lookup"><span data-stu-id="d7403-170">To make duplicate detection easier, each message has a unique [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property that by default stays the same no matter how many times the message is read from a queue.</span></span> 

<span data-ttu-id="d7403-171">Fronty jsou užitečné v mnoha situacích.</span><span class="sxs-lookup"><span data-stu-id="d7403-171">Queues are useful in quite a few situations.</span></span> <span data-ttu-id="d7403-172">Umožňují aplikacím komunikovat, i když nejsou spuštěné ve stejnou dobu – to se hodí především pro dávkové a mobilní aplikace.</span><span class="sxs-lookup"><span data-stu-id="d7403-172">They enable applications to communicate even when both aren't running at the same time, something that's especially handy with batch and mobile applications.</span></span> <span data-ttu-id="d7403-173">Fronta s několika příjemci taky poskytuje automatické vyvažování zátěže, protože odeslané zprávy se rozdělují mezi jednotlivé příjemce.</span><span class="sxs-lookup"><span data-stu-id="d7403-173">A queue with multiple receivers also provides automatic load balancing, since sent messages are spread across these receivers.</span></span>

## <a name="topics"></a><span data-ttu-id="d7403-174">Témata</span><span class="sxs-lookup"><span data-stu-id="d7403-174">Topics</span></span>

<span data-ttu-id="d7403-175">Přestože jsou fronty velice užitečné, nemusí se vždy jednat o to nejlepší řešení.</span><span class="sxs-lookup"><span data-stu-id="d7403-175">Useful as they are, queues aren't always the right solution.</span></span> <span data-ttu-id="d7403-176">Někdy je lepší použít témata Service Bus.</span><span class="sxs-lookup"><span data-stu-id="d7403-176">Sometimes, Service Bus topics are better.</span></span> <span data-ttu-id="d7403-177">Na obrázku 3 je taková situace.</span><span class="sxs-lookup"><span data-stu-id="d7403-177">Figure 3 illustrates this idea.</span></span>

![][3]

<span data-ttu-id="d7403-178">**Obrázek 3: V závislosti na použitém filtru může odběratelská aplikace přijímat všechny nebo jen některé zprávy odeslané do tématu Service Bus.**</span><span class="sxs-lookup"><span data-stu-id="d7403-178">**Figure 3: Based on the filter a subscribing application specifies, it can receive some or all the messages sent to a Service Bus topic.**</span></span>

<span data-ttu-id="d7403-179">*Téma* se ve spoustě ohledů podobá frontě.</span><span class="sxs-lookup"><span data-stu-id="d7403-179">A *topic* is similar in many ways to a queue.</span></span> <span data-ttu-id="d7403-180">Odesílatelé odesílají zprávy do tématu stejným způsobem jako do fronty a zprávy v tématu vypadají stejně jako zprávy ve frontě.</span><span class="sxs-lookup"><span data-stu-id="d7403-180">Senders submit messages to a topic in the same way that they submit messages to a queue, and those messages look the same as with queues.</span></span> <span data-ttu-id="d7403-181">Rozdíl je ale v tom, že témata umožňují každé aplikaci, aby si pomocí *filtru* vytvořila vlastní *odběr*.</span><span class="sxs-lookup"><span data-stu-id="d7403-181">The difference is that topics enable each receiving application to create its own *subscription* by defining a *filter*.</span></span> <span data-ttu-id="d7403-182">Odběratel pak uvidí jen zprávy, které odpovídají použitému filtru.</span><span class="sxs-lookup"><span data-stu-id="d7403-182">A subscriber then sees only the messages that match that filter.</span></span> <span data-ttu-id="d7403-183">Na obrázku 3 je například téma se třemi odběrateli a každý z nich používá vlastní filtr.</span><span class="sxs-lookup"><span data-stu-id="d7403-183">For example, Figure 3 shows a sender and a topic with three subscribers, each with its own filter:</span></span>

* <span data-ttu-id="d7403-184">Odběratel 1 přijímá jen zprávy, které mají určitou vlastnost *Seller="Ava"*.</span><span class="sxs-lookup"><span data-stu-id="d7403-184">Subscriber 1 receives only messages that contain the property *Seller="Ava"*.</span></span>
* <span data-ttu-id="d7403-185">Odběratel 2 přijímá zprávy, které mají vlastnost *Seller="Ruby"* a/nebo mají vlastnost *Amount* s hodnotou vyšší než 100 000.</span><span class="sxs-lookup"><span data-stu-id="d7403-185">Subscriber 2 receives messages that contain the property *Seller="Ruby"* and/or contain an *Amount* property whose value is greater than 100,000.</span></span> <span data-ttu-id="d7403-186">Možná je Ruby manažerka prodeje, takže chce vidět svoje prodeje a všechny velké prodeje bez ohledu na to, čí jsou.</span><span class="sxs-lookup"><span data-stu-id="d7403-186">Perhaps Ruby is the sales manager, so she wants to see both her own sales and all large sales regardless of who makes them.</span></span>
* <span data-ttu-id="d7403-187">Odběratel 3 má nastavený filtr *True* – to znamená, že přijímá všechny zprávy.</span><span class="sxs-lookup"><span data-stu-id="d7403-187">Subscriber 3 has set its filter to *True*, which means that it receives all messages.</span></span> <span data-ttu-id="d7403-188">Tato aplikace může mít například na starost udržování auditní stopy a proto potřebuje vidět všechny zprávy.</span><span class="sxs-lookup"><span data-stu-id="d7403-188">For example, this application might be responsible for maintaining an audit trail and therefore it needs to see all the messages.</span></span>

<span data-ttu-id="d7403-189">Stejně jako v případě front můžou odběratelé tématu načítat zprávy buď způsobem [ReceiveAndDelete, nebo PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span><span class="sxs-lookup"><span data-stu-id="d7403-189">As with queues, subscribers to a topic can read messages using either [ReceiveAndDelete or PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span></span> <span data-ttu-id="d7403-190">Na rozdíl od front se ale jedna zpráva odeslaná do tématu může dostat k více odběratelům předplatných.</span><span class="sxs-lookup"><span data-stu-id="d7403-190">Unlike queues, however, a single message sent to a topic can be received by multiple subscriptions.</span></span> <span data-ttu-id="d7403-191">Tomuto přístupu se obvykle říká *publikování a odběr* (nebo *pub/sub*)a je vhodný v každé situaci, kde se o stejné zprávy zajímá několik aplikací.</span><span class="sxs-lookup"><span data-stu-id="d7403-191">This approach, commonly called *publish and subscribe* (or *pub/sub*), is useful whenever multiple applications are interested in the same messages.</span></span> <span data-ttu-id="d7403-192">Pokud odběratel definuje vhodný filtr, může si z proudu zpráv vytáhnout jen ty, které potřebuje.</span><span class="sxs-lookup"><span data-stu-id="d7403-192">By defining the right filter, each subscriber can tap into just the part of the message stream that it needs to see.</span></span>

## <a name="relays"></a><span data-ttu-id="d7403-193">Předávání</span><span class="sxs-lookup"><span data-stu-id="d7403-193">Relays</span></span>

<span data-ttu-id="d7403-194">Fronty i témata nabízejí jednosměrnou asynchronní komunikaci přes zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="d7403-194">Both queues and topics provide one-way asynchronous communication through a broker.</span></span> <span data-ttu-id="d7403-195">Zprávy proudí jen jedním směrem a mezi odesílateli a příjemci není žádné přímé spojení.</span><span class="sxs-lookup"><span data-stu-id="d7403-195">Traffic flows in just one direction, and there's no direct connection between senders and receivers.</span></span> <span data-ttu-id="d7403-196">Co když ale toto připojení nechcete?</span><span class="sxs-lookup"><span data-stu-id="d7403-196">But what if you don't want this connection?</span></span> <span data-ttu-id="d7403-197">Řekněme, že aplikace potřebují odesílat i přijímat zprávy nebo že mezi nimi třeba chcete vytvořit přímé spojení a nepotřebujete zprostředkovatele pro ukládání zpráv.</span><span class="sxs-lookup"><span data-stu-id="d7403-197">Suppose your applications need to both send and receive messages, or perhaps you want a direct link between them and you don't need a broker to store messages.</span></span> <span data-ttu-id="d7403-198">Pro takovou situaci Service Bus nabízí možnost *přenosu*, jak je vidět na obrázku 4.</span><span class="sxs-lookup"><span data-stu-id="d7403-198">To address scenarios such as this, Service Bus provides *relays*, as Figure 4 shows.</span></span>

![][4]

<span data-ttu-id="d7403-199">**Obrázek 4: Předávání přes Service Bus nabízí synchronní obousměrnou komunikaci mezi aplikacemi.**</span><span class="sxs-lookup"><span data-stu-id="d7403-199">**Figure 4: Service Bus relay provides synchronous, two-way communication between applications.**</span></span>

<span data-ttu-id="d7403-200">Asi vás napadne otázka týkající se přenosu: K čemu by se mi tohle hodilo?</span><span class="sxs-lookup"><span data-stu-id="d7403-200">The obvious question to ask about relays is this: why would I use one?</span></span> <span data-ttu-id="d7403-201">I když nepotřebuju fronty, proč mám nutit aplikace komunikovat přes cloudovou službu, když chci, aby komunikovaly přímo?</span><span class="sxs-lookup"><span data-stu-id="d7403-201">Even if I don't need queues, why make applications communicate via a cloud service rather than just interact directly?</span></span> <span data-ttu-id="d7403-202">Odpověď je taková, že přímá komunikace je někdo mnohem obtížnější, než by se mohlo zdát.</span><span class="sxs-lookup"><span data-stu-id="d7403-202">The answer is that talking directly can be harder than you might think.</span></span>

<span data-ttu-id="d7403-203">Řekněme, že chcete propojit dvě lokální aplikace, které obě běží ve firemních datových centrech.</span><span class="sxs-lookup"><span data-stu-id="d7403-203">Suppose you want to connect two on-premises applications, both running inside corporate datacenters.</span></span> <span data-ttu-id="d7403-204">Každá z těchto aplikací je za firewallem a každé datové centrum pravděpodobně používá překládání adres (NAT).</span><span class="sxs-lookup"><span data-stu-id="d7403-204">Each of these applications sits behind a firewall, and each datacenter probably uses network address translation (NAT).</span></span> <span data-ttu-id="d7403-205">Firewall povoluje data jen na několika málo portech a ostatní porty blokuje, zatímco NAT naznačuje, že ani jeden z počítačů, na kterých aplikace běží, nemá pevnou IP adresu, takže z jiné zóny, než je zóna jejího datového centra, se k ní nedá dostat přímo.</span><span class="sxs-lookup"><span data-stu-id="d7403-205">The firewall blocks incoming data on all but a few ports, and NAT implies that the machine each application is running on doesn't have a fixed IP address that you can reach directly from outside the datacenter.</span></span> <span data-ttu-id="d7403-206">Bez pomoci specializovaných nástrojů půjdou tyto aplikace propojit přes internet jen těžko.</span><span class="sxs-lookup"><span data-stu-id="d7403-206">Without some extra help, connecting these applications over the public internet is problematic.</span></span>

<span data-ttu-id="d7403-207">Service Bus relay může pomoci.</span><span class="sxs-lookup"><span data-stu-id="d7403-207">A Service Bus relay can help.</span></span> <span data-ttu-id="d7403-208">Aby aplikace mohly komunikovat obousměrně s předáváním, každá z nich vytvoří odchozí připojení přes TCP se službou Service Bus a udržuje ho otevřené.</span><span class="sxs-lookup"><span data-stu-id="d7403-208">To communicate bi-directionally through a relay, each application establishes an outbound TCP connection with Service Bus, then keeps it open.</span></span> <span data-ttu-id="d7403-209">Veškerá komunikace mezi těmito dvěma aplikacemi bude procházet přes tato spojení.</span><span class="sxs-lookup"><span data-stu-id="d7403-209">All communication between the two applications travels over these connections.</span></span> <span data-ttu-id="d7403-210">Protože se obě spojení vytvořila ze zóny datového centra, firewall povolí veškerou příchozí komunikaci pro danou aplikaci bez nutnosti otevřít nové porty.</span><span class="sxs-lookup"><span data-stu-id="d7403-210">Because each connection was established from inside the datacenter, the firewall allows incoming traffic to each application without opening new ports.</span></span> <span data-ttu-id="d7403-211">Tento přístup také obchází problém s NAT, protože každá z obou aplikací má v cloudu vlastní pevný koncový bod.</span><span class="sxs-lookup"><span data-stu-id="d7403-211">This approach also gets around the NAT problem, because each application has a consistent endpoint in the cloud throughout the communication.</span></span> <span data-ttu-id="d7403-212">Výměnou dat přes předávací službu se aplikace můžou vyhnout problémům, které by jinak takovou komunikaci výrazně ztěžovaly.</span><span class="sxs-lookup"><span data-stu-id="d7403-212">By exchanging data through the relay, the applications can avoid the problems that would otherwise make communication difficult.</span></span> 

<span data-ttu-id="d7403-213">Pokud aplikace chtějí používat předávání přes Service Bus, můžou využít WCF (Windows Communication Foundation).</span><span class="sxs-lookup"><span data-stu-id="d7403-213">To use Service Bus relays, applications rely on the Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="d7403-214">Service Bus poskytuje vazby WCF, které aplikacím Windows ulehčují komunikaci přes předávací službu.</span><span class="sxs-lookup"><span data-stu-id="d7403-214">Service Bus provides WCF bindings that make it straightforward for Windows applications to interact via relays.</span></span> <span data-ttu-id="d7403-215">Pro aplikace, které už WCF používají, obvykle stačí specifikovat jednu z těchto vazeb a potom můžou komunikovat přes předávací službu.</span><span class="sxs-lookup"><span data-stu-id="d7403-215">Applications that already use WCF can typically specify one of these bindings, then talk to each other through a relay.</span></span> <span data-ttu-id="d7403-216">Na rozdíl od front a témat ale komunikace přes předávací službu z aplikací na jiné platformě než Windows vyžaduje určitou míru programátorského úsilí, protože nejsou k dispozici žádné standardizované knihovny.</span><span class="sxs-lookup"><span data-stu-id="d7403-216">Unlike queues and topics, however, using relays from non-Windows applications, while possible, requires some programming effort; no standard libraries are provided.</span></span>

<span data-ttu-id="d7403-217">A na rozdíl od front a témat taky aplikace nevytvářejí explicitně předávací službu.</span><span class="sxs-lookup"><span data-stu-id="d7403-217">Unlike queues and topics, applications don't explicitly create relays.</span></span> <span data-ttu-id="d7403-218">Místo toho se stane, že když aplikace chce dostávat zprávy, vytvoří spojení se službou Service Bus přes TCP a předávací služba se vytvoří automaticky.</span><span class="sxs-lookup"><span data-stu-id="d7403-218">Instead, when an application that wishes to receive messages establishes a TCP connection with Service Bus, a relay is created automatically.</span></span> <span data-ttu-id="d7403-219">Při ukončení spojení se předávací služba odstraní.</span><span class="sxs-lookup"><span data-stu-id="d7403-219">When the connection is dropped, the relay is deleted.</span></span> <span data-ttu-id="d7403-220">Aby aplikace mohly najít předávací službu vytvořenou konkrétním posluchačem, Service Bus aplikacím poskytuje registr, který jim umožní najít konkrétní předávací službu podle názvu.</span><span class="sxs-lookup"><span data-stu-id="d7403-220">To enable an application to find the relay created by a specific listener, Service Bus provides a registry that enables applications to locate a specific relay by name.</span></span>

<span data-ttu-id="d7403-221">Předávací služby jsou správným řešením v situaci, když potřebujete přímou komunikaci mezi aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="d7403-221">Relays are the right solution when you need direct communication between applications.</span></span> <span data-ttu-id="d7403-222">Řekněme třeba, že systém pro rezervaci letenek běží na lokálním datovém centru, ke kterému musí mít přístup prodejní místa, mobilní zařízení a další počítače.</span><span class="sxs-lookup"><span data-stu-id="d7403-222">For example, consider an airline reservation system running in an on-premises datacenter that must be accessed from check-in kiosks, mobile devices, and other computers.</span></span> <span data-ttu-id="d7403-223">Aplikace, které běží na všech těchto systémech, by mohly ke komunikaci použít předávací služby Service Bus v cloudu, a bylo by jedno, kde běží.</span><span class="sxs-lookup"><span data-stu-id="d7403-223">Applications running on all these systems could rely on Service Bus relays in the cloud to communicate, wherever they might be running.</span></span>

## <a name="summary"></a><span data-ttu-id="d7403-224">Souhrn</span><span class="sxs-lookup"><span data-stu-id="d7403-224">Summary</span></span>

<span data-ttu-id="d7403-225">Propojení aplikací vždy patřilo k budování kompletních řešení a množství situací, ve kterých spolu aplikace a služby musí komunikovat, se s rostoucím počtem zařízení připojených k internetu bude dál zvyšovat.</span><span class="sxs-lookup"><span data-stu-id="d7403-225">Connecting applications has always been part of building complete solutions, and the range of scenarios that require applications and services to communicate with each other is set to increase as more applications and devices are connected to the internet.</span></span> <span data-ttu-id="d7403-226">Služba Service Bus poskytuje cloudové technologie pro zajištění komunikace prostřednictvím front, témat a předávání, aby tuto základní funkci aplikacím a službám umožnil, usnadnil a více zpřístupnil.</span><span class="sxs-lookup"><span data-stu-id="d7403-226">By providing cloud-based technologies for achieving communication through queues, topics, and relays, Service Bus aims to make this essential function easier to implement and more broadly available.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d7403-227">Další kroky</span><span class="sxs-lookup"><span data-stu-id="d7403-227">Next steps</span></span>

<span data-ttu-id="d7403-228">Dozvěděli jste se základní informace službě Azure Service Bus, další informace se dozvíte na následujících odkazech.</span><span class="sxs-lookup"><span data-stu-id="d7403-228">Now that you've learned the fundamentals of Azure Service Bus, follow these links to learn more.</span></span>

* <span data-ttu-id="d7403-229">Jak používat [fronty Service Bus](service-bus-dotnet-get-started-with-queues.md)</span><span class="sxs-lookup"><span data-stu-id="d7403-229">How to use [Service Bus queues](service-bus-dotnet-get-started-with-queues.md)</span></span>
* <span data-ttu-id="d7403-230">Jak používat [témata Service Bus](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span><span class="sxs-lookup"><span data-stu-id="d7403-230">How to use [Service Bus topics](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span></span>
* <span data-ttu-id="d7403-231">Jak používat [předávání přes Service Bus](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span><span class="sxs-lookup"><span data-stu-id="d7403-231">How to use [Service Bus relay](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span></span>
* [<span data-ttu-id="d7403-232">Ukázky služby Service Bus</span><span class="sxs-lookup"><span data-stu-id="d7403-232">Service Bus samples</span></span>](service-bus-samples.md)

[1]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_01_architecture.png
[2]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_02_queues.png
[3]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_03_topicsandsubscriptions.png
[4]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_04_relay.png
