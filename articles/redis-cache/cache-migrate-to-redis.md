---
title: "Migrace aplikací spravovaných Cache Service k Redis - Azure | Microsoft Docs"
description: "Zjistěte, jak migrovat aplikací spravované služby mezipaměti a mezipaměť hostovaná v instanci Role na Azure Redis Cache"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: 0fbfb945c66926794721f2ce8cc183dac51ecb27
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="migrate-from-managed-cache-service-to-azure-redis-cache"></a><span data-ttu-id="f0aea-103">Migrovat na Azure Redis Cache z Managed Cache Service</span><span class="sxs-lookup"><span data-stu-id="f0aea-103">Migrate from Managed Cache Service to Azure Redis Cache</span></span>
<span data-ttu-id="f0aea-104">Migrace vaší aplikace, které používají Azure spravované mezipaměti Service k Azure Redis Cache lze provést s minimálními změnami k vaší aplikaci, v závislosti na spravované služby mezipaměti funkce, které používá aplikaci ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-104">Migrating your applications that use Azure Managed Cache Service to Azure Redis Cache can be accomplished with minimal changes to your application, depending on the Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="f0aea-105">Když rozhraní API jsou přesně stejný jsou podobné a většinu váš stávající kód, který používá služba spravovaných mezipaměti pro přístup k mezipaměti lze opětovně použít s minimálními změnami.</span><span class="sxs-lookup"><span data-stu-id="f0aea-105">While the APIs are not exactly the same they are similar, and much of your existing code that uses Managed Cache Service to access a cache can be reused with minimal changes.</span></span> <span data-ttu-id="f0aea-106">Toto téma ukazuje, jak chcete-li nezbytné konfigurace a změny aplikace k migraci aplikace spravované služby mezipaměti použití Azure Redis Cache a ukazuje, jak některé funkce Azure Redis Cache lze použít k implementaci funkce Managed Mezipaměť služby mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-106">This topic shows how to make the necessary configuration and application changes to migrate your Managed Cache Service applications to use Azure Redis Cache, and shows how some of the features of Azure Redis Cache can be used to implement the functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="f0aea-107">Spravované služby mezipaměti a mezipaměť hostovaná v instanci Role byly [vyřazeno](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) 30. listopadu 2016.</span><span class="sxs-lookup"><span data-stu-id="f0aea-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="f0aea-108">Pokud máte všechna nasazení mezipaměť hostovaná v instanci Role, které chcete provést migraci na Azure Redis Cache, můžete podle kroků v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="f0aea-108">If you have any In-Role Cache deployments that you want to migrate to Azure Redis Cache, you can follow the steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="f0aea-109">Kroky migrace</span><span class="sxs-lookup"><span data-stu-id="f0aea-109">Migration Steps</span></span>
<span data-ttu-id="f0aea-110">Následující kroky jsou potřeba k migraci aplikace spravované služby mezipaměti použití Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="f0aea-110">The following steps are required to migrate a Managed Cache Service application to use Azure Redis Cache.</span></span>

* <span data-ttu-id="f0aea-111">Mapování funkce spravované služby mezipaměti na Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="f0aea-111">Map Managed Cache Service features to Azure Redis Cache</span></span>
* <span data-ttu-id="f0aea-112">Vyberte nabídku mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="f0aea-113">Vytvoření mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-113">Create a Cache</span></span>
* <span data-ttu-id="f0aea-114">Konfigurace klientů mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-114">Configure the Cache Clients</span></span>
  * <span data-ttu-id="f0aea-115">Odeberte konfiguraci Managed Cache Service</span><span class="sxs-lookup"><span data-stu-id="f0aea-115">Remove the Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="f0aea-116">Konfigurace klienta mezipaměti pomocí balíčku StackExchange.Redis NuGet</span><span class="sxs-lookup"><span data-stu-id="f0aea-116">Configure a cache client using the StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="f0aea-117">Migrace kódu spravované služby mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="f0aea-118">Připojení k mezipaměti pomocí ConnectionMultiplexer – třída</span><span class="sxs-lookup"><span data-stu-id="f0aea-118">Connect to the cache using the ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="f0aea-119">Primitivní datové typy přístupu v mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-119">Access primitive data types in the cache</span></span>
  * <span data-ttu-id="f0aea-120">Práce s objekty .NET v mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-120">Work with .NET objects in the cache</span></span>
* <span data-ttu-id="f0aea-121">Migrace stavu relace ASP.NET a ukládání výstupu do mezipaměti pro Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="f0aea-121">Migrate ASP.NET Session State and Output caching to Azure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-to-azure-redis-cache"></a><span data-ttu-id="f0aea-122">Mapování funkce spravované služby mezipaměti na Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="f0aea-122">Map Managed Cache Service features to Azure Redis Cache</span></span>
<span data-ttu-id="f0aea-123">Azure spravované Cache Service a Azure Redis Cache jsou podobné, ale některé z jejich funkcí implementovat různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="f0aea-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="f0aea-124">Tato část popisuje některé rozdíly a poskytuje pokyny k implementaci funkcí služby mezipaměti spravované ve službě Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="f0aea-124">This section describes some of the differences and provides guidance on implementing the features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="f0aea-125">Spravované funkce Cache Service</span><span class="sxs-lookup"><span data-stu-id="f0aea-125">Managed Cache Service feature</span></span> | <span data-ttu-id="f0aea-126">Podpora spravovaného Cache Service</span><span class="sxs-lookup"><span data-stu-id="f0aea-126">Managed Cache Service support</span></span> | <span data-ttu-id="f0aea-127">Podpora Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="f0aea-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f0aea-128">Pojmenované mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-128">Named caches</span></span> |<span data-ttu-id="f0aea-129">Výchozí mezipaměti je nakonfigurován, a v mezipaměti Standard a Premium lze nakonfigurovat nabídky až 9 další s názvem mezipaměti v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="f0aea-129">A default cache is configured, and in the Standard and Premium cache offerings, up to nine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="f0aea-130">Mezipamětí Azure Redis mít konfigurovat počet databází (výchozí 16), které lze použít k implementaci podobné funkce jako s názvem mezipamětí.</span><span class="sxs-lookup"><span data-stu-id="f0aea-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used to implement a similar functionality to named caches.</span></span> <span data-ttu-id="f0aea-131">Další informace najdete v tématu [Co jsou databáze Redis?](cache-faq.md#what-are-redis-databases) a [Výchozí konfigurace serveru Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="f0aea-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="f0aea-132">Vysoká dostupnost</span><span class="sxs-lookup"><span data-stu-id="f0aea-132">High Availability</span></span> |<span data-ttu-id="f0aea-133">Poskytuje vysokou dostupnost pro položky v mezipaměti v mezipaměti nabídky Standard a Premium.</span><span class="sxs-lookup"><span data-stu-id="f0aea-133">Provides high availability for items in the cache in the Standard and Premium cache offerings.</span></span> <span data-ttu-id="f0aea-134">Pokud jsou položky ztraceno v důsledku selhání, jsou stále k dispozici záložní kopie položek v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-134">If items are lost due to a failure, backup copies of the items in the cache are still available.</span></span> <span data-ttu-id="f0aea-135">Zápis do mezipaměti v sekundární jsou vytvářeny synchronně.</span><span class="sxs-lookup"><span data-stu-id="f0aea-135">Writes to the secondary cache are made synchronously.</span></span> |<span data-ttu-id="f0aea-136">Zajištění vysoké dostupnosti je k dispozici v Standard a Premium nabídky mezipaměti, které mají konfiguraci dva uzly primární/replika (pár primární/replika má každý horizontálního oddílu v mezipaměti Premium).</span><span class="sxs-lookup"><span data-stu-id="f0aea-136">High availability is available in the Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="f0aea-137">Zápis do repliky jsou vytvářeny asynchronně.</span><span class="sxs-lookup"><span data-stu-id="f0aea-137">Writes to the replica are made asynchronously.</span></span> <span data-ttu-id="f0aea-138">Další informace najdete v tématu [cenách Azure Redis Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="f0aea-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="f0aea-139">Oznámení</span><span class="sxs-lookup"><span data-stu-id="f0aea-139">Notifications</span></span> |<span data-ttu-id="f0aea-140">Umožňuje klientům přijímat asynchronní upozornění, když celou řadu operace mezipaměti, ke kterým došlo u pojmenované mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-140">Allows clients to receive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="f0aea-141">Klientské aplikace můžete použít protokol pub nebo sub Redis nebo [oznámení Keyspace](cache-configure.md#keyspace-notifications-advanced-settings) k dosažení podobné funkce pro oznámení.</span><span class="sxs-lookup"><span data-stu-id="f0aea-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) to achieve a similar functionality to notifications.</span></span> |
| <span data-ttu-id="f0aea-142">Místní mezipaměť</span><span class="sxs-lookup"><span data-stu-id="f0aea-142">Local cache</span></span> |<span data-ttu-id="f0aea-143">Ukládá kopie v mezipaměti objektů místně na klientovi velmi rychlý přístup.</span><span class="sxs-lookup"><span data-stu-id="f0aea-143">Stores a copy of cached objects locally on the client for extra-fast access.</span></span> |<span data-ttu-id="f0aea-144">Klientské aplikace by bylo nutné implementovat tuto funkci pomocí slovníku nebo podobné datové struktury.</span><span class="sxs-lookup"><span data-stu-id="f0aea-144">Client applications would need to implement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="f0aea-145">Zásady vyřazení</span><span class="sxs-lookup"><span data-stu-id="f0aea-145">Eviction Policy</span></span> |<span data-ttu-id="f0aea-146">Žádná nebo hodnoty nejdelšího Nepoužití.</span><span class="sxs-lookup"><span data-stu-id="f0aea-146">None or LRU.</span></span> <span data-ttu-id="f0aea-147">Výchozí zásada je hodnoty nejdelšího Nepoužití.</span><span class="sxs-lookup"><span data-stu-id="f0aea-147">The default policy is LRU.</span></span> |<span data-ttu-id="f0aea-148">Azure Redis Cache podporuje tyto zásady vyřazení: volatile lru, allkeys lru, náhodné volatile, allkeys náhodné, volatile ttl, noeviction.</span><span class="sxs-lookup"><span data-stu-id="f0aea-148">Azure Redis Cache supports the following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="f0aea-149">Výchozí zásada je volatile hodnoty nejdelšího nepoužití.</span><span class="sxs-lookup"><span data-stu-id="f0aea-149">The default policy is volatile-lru.</span></span> <span data-ttu-id="f0aea-150">Další informace najdete v tématu [konfigurace serveru výchozí Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="f0aea-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="f0aea-151">Zásady vypršení platnosti</span><span class="sxs-lookup"><span data-stu-id="f0aea-151">Expiration Policy</span></span> |<span data-ttu-id="f0aea-152">Výchozí zásady vypršení platnosti je absolutní a je výchozí interval vypršení platnosti je deset minut.</span><span class="sxs-lookup"><span data-stu-id="f0aea-152">The default expiration policy is Absolute and the default expiration interval is ten minutes.</span></span> <span data-ttu-id="f0aea-153">Klouzavé a nikdy zásady jsou také k dispozici.</span><span class="sxs-lookup"><span data-stu-id="f0aea-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="f0aea-154">Ve výchozím nastavení nevyprší položky v mezipaměti, ale dá se vypršení platnosti na základě zápisu za použití mezipaměti sady přetížení.</span><span class="sxs-lookup"><span data-stu-id="f0aea-154">By default items in the cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="f0aea-155">Další informace najdete v tématu [přidat a načtení objektů z mezipaměti](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="f0aea-155">For more information, see [Add and retrieve objects from the cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="f0aea-156">Oblasti a označování</span><span class="sxs-lookup"><span data-stu-id="f0aea-156">Regions and Tagging</span></span> |<span data-ttu-id="f0aea-157">Oblasti jsou podskupiny pro položky v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="f0aea-158">Oblasti také podporují poznámky položek v mezipaměti s další popisné řetězce názvem značky.</span><span class="sxs-lookup"><span data-stu-id="f0aea-158">Regions also support the annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="f0aea-159">Oblasti podpory schopnost provádět operace hledání na všech položek s příznakem v této oblasti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-159">Regions support the ability to perform search operations on any tagged items in that region.</span></span> <span data-ttu-id="f0aea-160">Všechny položky v rámci oblasti se nacházejí v rámci jednoho uzlu clusteru mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-160">All items within a region are located within a single node of the cache cluster.</span></span> |<span data-ttu-id="f0aea-161">Mezipaměť Redis systému se skládá z jednoho uzlu (Pokud je povolená clusteru Redis), nelze použít koncept oblastech spravovaných Cache Service.</span><span class="sxs-lookup"><span data-stu-id="f0aea-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so the concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="f0aea-162">Při načítání klíče popisné značky umožní vkládán názvy klíčů a používá se k načtení položky později redis podporuje vyhledávání a operace zástupný znak.</span><span class="sxs-lookup"><span data-stu-id="f0aea-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within the key names and used to retrieve the items later.</span></span> <span data-ttu-id="f0aea-163">Příklad implementace označování řešení pomocí Redis, naleznete v části [implementace mezipaměť s Redisem označování](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="f0aea-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="f0aea-164">Serializace</span><span class="sxs-lookup"><span data-stu-id="f0aea-164">Serialization</span></span> |<span data-ttu-id="f0aea-165">Managed Cache podporuje NetDataContractSerializer, BinaryFormatter a použití vlastních serializátorů.</span><span class="sxs-lookup"><span data-stu-id="f0aea-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and the use of custom serializers.</span></span> <span data-ttu-id="f0aea-166">Výchozí hodnota je NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="f0aea-166">The default is NetDataContractSerializer.</span></span> |<span data-ttu-id="f0aea-167">Je zodpovědností klientská aplikace k serializaci objektů .NET před uvedením do mezipaměti s výběru serializátoru až vývojář aplikace klienta.</span><span class="sxs-lookup"><span data-stu-id="f0aea-167">It is the responsibility of the client application to serialize .NET objects before placing them into the cache, with the choice of the serializer up to the client application developer.</span></span> <span data-ttu-id="f0aea-168">Další informace a ukázkový kód, najdete v části [práce s objekty .NET v mezipaměti](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="f0aea-168">For more information and sample code, see [Work with .NET objects in the cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="f0aea-169">Emulátor mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-169">Cache emulator</span></span> |<span data-ttu-id="f0aea-170">Managed Cache poskytuje emulátoru místní mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="f0aea-171">Azure Redis Cache nemá emulátoru, ale můžete [místní spuštění MSOpenTech sestavení redis server.exe](cache-faq.md#cache-emulator) zajistit emulátoru prostředí.</span><span class="sxs-lookup"><span data-stu-id="f0aea-171">Azure Redis Cache does not have an emulator, but you can [run the MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) to provide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="f0aea-172">Vyberte nabídku mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-172">Choose a Cache Offering</span></span>
<span data-ttu-id="f0aea-173">Microsoft Azure Redis Cache je dostupná na následujících úrovních:</span><span class="sxs-lookup"><span data-stu-id="f0aea-173">Microsoft Azure Redis Cache is available in the following tiers:</span></span>

* <span data-ttu-id="f0aea-174">**Basic** – jeden uzel.</span><span class="sxs-lookup"><span data-stu-id="f0aea-174">**Basic** – Single node.</span></span> <span data-ttu-id="f0aea-175">Více velikostí až do 53 GB.</span><span class="sxs-lookup"><span data-stu-id="f0aea-175">Multiple sizes up to 53 GB.</span></span>
* <span data-ttu-id="f0aea-176">**Standard** – dva uzly Primární/Replika.</span><span class="sxs-lookup"><span data-stu-id="f0aea-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="f0aea-177">Více velikostí až do 53 GB.</span><span class="sxs-lookup"><span data-stu-id="f0aea-177">Multiple sizes up to 53 GB.</span></span> <span data-ttu-id="f0aea-178">99,9% SLA.</span><span class="sxs-lookup"><span data-stu-id="f0aea-178">99.9% SLA.</span></span>
* <span data-ttu-id="f0aea-179">**Premium** – dva uzly Primární/Replika s až 10 horizontálními oddíly.</span><span class="sxs-lookup"><span data-stu-id="f0aea-179">**Premium** – Two-node Primary/Replica with up to 10 shards.</span></span> <span data-ttu-id="f0aea-180">Více velikostí od 6 GB do 530 GB.</span><span class="sxs-lookup"><span data-stu-id="f0aea-180">Multiple sizes from 6 GB to 530 GB.</span></span> <span data-ttu-id="f0aea-181">Všechny funkce úrovně Standard a navíc podpora [clusteru Redis](cache-how-to-premium-clustering.md), [trvalosti Redis](cache-how-to-premium-persistence.md) a [služby Azure Virtual Network](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="f0aea-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="f0aea-182">99,9% SLA.</span><span class="sxs-lookup"><span data-stu-id="f0aea-182">99.9% SLA.</span></span>

<span data-ttu-id="f0aea-183">Každá úroveň se liší z hlediska funkcí a cen.</span><span class="sxs-lookup"><span data-stu-id="f0aea-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="f0aea-184">Funkce jsou popsané dál v této příručce a další informace o cenách najdete v tématu [podrobnosti o cenách mezipaměti](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="f0aea-184">The features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="f0aea-185">Výchozí bod pro migraci je vyberte velikost, která odpovídá velikosti předchozí mezipaměti spravovanou službu mezipaměti a pak škálovat nahoru nebo dolů v závislosti na požadavcích vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0aea-185">A starting point for migration is to pick the size that matches the size of your previous Managed Cache Service cache, and then scale up or down depending on the requirements of your application.</span></span> <span data-ttu-id="f0aea-186">Další pokyny k výběru správné nabídky Azure Redis Cache, najdete v části [jaké mezipaměť Redis nabídky a velikosti použít?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="f0aea-186">For more guidance on choosing the right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="f0aea-187">Vytvoření mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-the-cache-clients"></a><span data-ttu-id="f0aea-188">Konfigurace klientů mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-188">Configure the Cache Clients</span></span>
<span data-ttu-id="f0aea-189">Jakmile mezipaměti je vytvořen a nakonfigurován, dalším krokem je odebrat konfiguraci spravované služby mezipaměti a přidat přidat konfigurace Azure Redis Cache a odkazuje tak, aby klienti mezipaměti přístup do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-189">Once the cache is created and configured, the next step is to remove the Managed Cache Service configuration, and add the add the Azure Redis Cache configuration and references so that cache clients can access the cache.</span></span>

* <span data-ttu-id="f0aea-190">Odeberte konfiguraci Managed Cache Service</span><span class="sxs-lookup"><span data-stu-id="f0aea-190">Remove the Managed Cache Service Configuration</span></span>
* <span data-ttu-id="f0aea-191">Konfigurace klienta mezipaměti pomocí balíčku StackExchange.Redis NuGet</span><span class="sxs-lookup"><span data-stu-id="f0aea-191">Configure a cache client using the StackExchange.Redis NuGet Package</span></span>

### <a name="remove-the-managed-cache-service-configuration"></a><span data-ttu-id="f0aea-192">Odeberte konfiguraci Managed Cache Service</span><span class="sxs-lookup"><span data-stu-id="f0aea-192">Remove the Managed Cache Service Configuration</span></span>
<span data-ttu-id="f0aea-193">Předtím, než je možné nakonfigurovat klientské aplikace pro Azure Redis Cache, existující konfigurace spravované služby mezipaměti a odkazy na sestavení musí být odebrány odinstalací balíčku NuGet pro spravované mezipaměti Service.</span><span class="sxs-lookup"><span data-stu-id="f0aea-193">Before the client applications can be configured for Azure Redis Cache, the existing Managed Cache Service configuration and assembly references must be removed by uninstalling the Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="f0aea-194">Pro odinstalaci balíčku spravované mezipaměti Service NuGet, klikněte pravým tlačítkem na projekt klienta v **Průzkumníku řešení** a zvolte **spravovat balíčky NuGet**.</span><span class="sxs-lookup"><span data-stu-id="f0aea-194">To uninstall the Managed Cache Service NuGet package, right-click the client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="f0aea-195">Vyberte **nainstalované balíky** uzel a typ W**indowsAzure.Caching** do vyhledávacího pole nainstalované balíčky.</span><span class="sxs-lookup"><span data-stu-id="f0aea-195">Select the **Installed packages** node, and type W**indowsAzure.Caching** into the Search installed packages box.</span></span> <span data-ttu-id="f0aea-196">Vyberte **Windows** **Azure Cache** (nebo **Windows** **ukládání do mezipaměti Azure** v závislosti na verzi balíčku NuGet), klikněte na tlačítko **Odinstalace**a potom klikněte na **Zavřít**.</span><span class="sxs-lookup"><span data-stu-id="f0aea-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on the version of the NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Odinstalace balíčku NuGet Azure Managed Cache Service](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="f0aea-198">Odinstalace balíčku NuGet pro spravované mezipaměti Service odebere sestavení spravované služby mezipaměti a položky spravované služby mezipaměti v souboru app.config nebo web.config klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0aea-198">Uninstalling the Managed Cache Service NuGet package removes the Managed Cache Service assemblies and the Managed Cache Service entries in the app.config or web.config of the client application.</span></span> <span data-ttu-id="f0aea-199">Protože některé vlastní nastavení nelze odebrat, při odinstalaci balíčku NuGet, otevřete soubor web.config nebo app.config a ujistěte se, že tyto prvky jsou zcela odebrána.</span><span class="sxs-lookup"><span data-stu-id="f0aea-199">Because some customized settings may not be removed when uninstalling the NuGet package, open web.config or app.config and ensure that the following elements are completely removed.</span></span>

<span data-ttu-id="f0aea-200">Ujistěte se, že `dataCacheClients` položka je odebrána z `configSections` elementu.</span><span class="sxs-lookup"><span data-stu-id="f0aea-200">Ensure that the `dataCacheClients` entry is removed from the `configSections` element.</span></span> <span data-ttu-id="f0aea-201">Neodebírejte celý `configSections` element; odebrat jenom `dataCacheClients` položku, pokud je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="f0aea-201">Do not remove the entire `configSections` element; just remove the `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="f0aea-202">Ujistěte se, že `dataCacheClients` oddíl je odebrat.</span><span class="sxs-lookup"><span data-stu-id="f0aea-202">Ensure that the `dataCacheClients` section is removed.</span></span> <span data-ttu-id="f0aea-203">`dataCacheClients` Části bude vypadat podobně jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="f0aea-203">The `dataCacheClients` section will be similar to the following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--To use the in-role flavor of Azure Cache, set identifier to be the cache cluster role name -->
    <!--To use the Azure Managed Cache Service, set identifier to be the endpoint of the cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section to specify security settings for connecting to your cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="f0aea-204">Odebraný konfiguraci spravované služby mezipaměti můžete nakonfigurovat klienta mezipaměti, jak je popsáno v následující části.</span><span class="sxs-lookup"><span data-stu-id="f0aea-204">Once the Managed Cache Service configuration is removed, you can configure the cache client as described in the following section.</span></span>

### <a name="configure-a-cache-client-using-the-stackexchangeredis-nuget-package"></a><span data-ttu-id="f0aea-205">Konfigurace klienta mezipaměti pomocí balíčku StackExchange.Redis NuGet</span><span class="sxs-lookup"><span data-stu-id="f0aea-205">Configure a cache client using the StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="f0aea-206">Migrace kódu spravované služby mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f0aea-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="f0aea-207">Rozhraní API pro klienta mezipaměti StackExchange.Redis se podobá mezipaměti služby spravovat.</span><span class="sxs-lookup"><span data-stu-id="f0aea-207">The API for the StackExchange.Redis cache client is similar to the Managed Cache Service.</span></span> <span data-ttu-id="f0aea-208">Tato část obsahuje přehled rozdíly.</span><span class="sxs-lookup"><span data-stu-id="f0aea-208">This section provides an overview of the differences.</span></span>

### <a name="connect-to-the-cache-using-the-connectionmultiplexer-class"></a><span data-ttu-id="f0aea-209">Připojení k mezipaměti pomocí ConnectionMultiplexer – třída</span><span class="sxs-lookup"><span data-stu-id="f0aea-209">Connect to the cache using the ConnectionMultiplexer class</span></span>
<span data-ttu-id="f0aea-210">Ve spravované službě mezipaměti byly připojení k mezipaměti zpracována `DataCacheFactory` a `DataCache` třídy.</span><span class="sxs-lookup"><span data-stu-id="f0aea-210">In Managed Cache Service, connections to the cache were handled by the `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="f0aea-211">Ve službě Azure Redis Cache spravuje tato připojení `ConnectionMultiplexer` třídy.</span><span class="sxs-lookup"><span data-stu-id="f0aea-211">In Azure Redis Cache, these connections are managed by the `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="f0aea-212">Přidejte následující pomocí příkazu na začátek souboru, ve kterém chcete přístup do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-212">Add the following using statement to the top of any file from which you want to access the cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="f0aea-213">Pokud se tento obor názvů se nevyřeší, ujistěte se, že jste přidali balíčku StackExchange.Redis NuGet jak je popsáno v [konfigurace klientů mezipaměti](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="f0aea-213">If this namespace doesn’t resolve, be sure that you have added the StackExchange.Redis NuGet package as described in [Configure the cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="f0aea-214">Všimněte si, že klient StackExchange.Redis vyžaduje rozhraní .NET Framework 4 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="f0aea-214">Note that the StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="f0aea-215">Pokud chcete připojit k instanci služby Azure Redis Cache, zavolejte statickou `ConnectionMultiplexer.Connect` metoda a předejte jí koncový bod a klíč.</span><span class="sxs-lookup"><span data-stu-id="f0aea-215">To connect to an Azure Redis Cache instance, call the static `ConnectionMultiplexer.Connect` method and pass in the endpoint and key.</span></span> <span data-ttu-id="f0aea-216">Jeden ze způsobů sdílení instance `ConnectionMultiplexer` v aplikaci je pomocí statické vlastnosti, která vrací připojenou instanci, podobně jako v následujícím příkladu. </span><span class="sxs-lookup"><span data-stu-id="f0aea-216">One approach to sharing a `ConnectionMultiplexer` instance in your application is to have a static property that returns a connected instance, similar to the following example.</span></span> <span data-ttu-id="f0aea-217">Tento přístup poskytuje způsob inicializace jedné připojené instance `ConnectionMultiplexer`, který je bezpečný pro přístup z více vláken.</span><span class="sxs-lookup"><span data-stu-id="f0aea-217">This provides a thread-safe way to initialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="f0aea-218">V tomto příkladu `abortConnect` nastaven na hodnotu false, to znamená, že volání bude úspěšné i v případě, že nedojde k vytvoření připojení k mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-218">In this example `abortConnect` is set to false, which means that the call will succeed even if a connection to the cache is not established.</span></span> <span data-ttu-id="f0aea-219">Klíčovou vlastností `ConnectionMultiplexer` je automatické obnovení připojení k mezipaměti po vyřešení problémů se sítí nebo jiných příčin.</span><span class="sxs-lookup"><span data-stu-id="f0aea-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity to the cache once the network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="f0aea-220">Koncový bod mezipaměti, klíče a portů můžete získat **Redis Cache** okně instance mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-220">The cache endpoint, keys, and ports can be obtained from the **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="f0aea-221">Další informace najdete v tématu [Redis Cache vlastnosti](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="f0aea-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="f0aea-222">Po vytvoření připojení vrátíte odkaz na databázi mezipaměti Redis zavoláním `ConnectionMultiplexer.GetDatabase` metoda.</span><span class="sxs-lookup"><span data-stu-id="f0aea-222">Once the connection is established, return a reference to the Redis cache database by calling the `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="f0aea-223">Objekt vrácený metodou `GetDatabase` je prostý průchozí objekt a není nutné jej ukládat.</span><span class="sxs-lookup"><span data-stu-id="f0aea-223">The object returned from the `GetDatabase` method is a lightweight pass-through object and does not need to be stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using the cache object...
// Simple put of integral data types into the cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from the cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="f0aea-224">Klient StackExchange.Redis používá `RedisKey` a `RedisValue` typy pro přístup k informacím a ukládání položek do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-224">The StackExchange.Redis client uses the `RedisKey` and `RedisValue` types for accessing and storing items in the cache.</span></span> <span data-ttu-id="f0aea-225">Tyto typy namapovat na nejvíce primitivní typy jazyka, včetně řetězec a často nepoužívají se přímo.</span><span class="sxs-lookup"><span data-stu-id="f0aea-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="f0aea-226">Redis řetězce jsou nejzákladnější druh hodnotu Redis a může obsahovat mnoho typů dat, včetně serializovaných binární datové proudy, a při typ nemusí používat přímo, budete používat metody, které obsahují `String` v názvu.</span><span class="sxs-lookup"><span data-stu-id="f0aea-226">Redis Strings are the most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use the type directly, you will use methods that contain `String` in the name.</span></span> <span data-ttu-id="f0aea-227">Pro většinu primitivní datové typy ukládat a načítat položky z mezipaměti pomocí `StringSet` a `StringGet` metody, pokud jsou kolekce nebo jiné datové typy Redis ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-227">For most primitive data types you store and retrieve items from the cache using the `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in the cache.</span></span> 

<span data-ttu-id="f0aea-228">`StringSet`a `StringGet` jsou velmi podobné mezipaměti služba spravovaných `Put` a `Get` metody s jedním hlavní rozdíl, že před nastavování a získávání objekt .NET do mezipaměti musí serializovat nejdřív.</span><span class="sxs-lookup"><span data-stu-id="f0aea-228">`StringSet` and `StringGet` are very similar to the Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into the cache you must serialize it first.</span></span> 

<span data-ttu-id="f0aea-229">Při volání metody `StringGet`, pokud objekt existuje, bude vrácen, a pokud ne, vrátí se hodnota null.</span><span class="sxs-lookup"><span data-stu-id="f0aea-229">When calling `StringGet`, if the object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="f0aea-230">V tomto případě můžete načíst hodnotu z požadovaného zdroje dat a uložit ji do mezipaměti pro pozdější použití.</span><span class="sxs-lookup"><span data-stu-id="f0aea-230">In this case you can retrieve the value from the desired data source and store it in the cache for subsequent use.</span></span> <span data-ttu-id="f0aea-231">To se označuje jako princip s doplňováním mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-231">This is known as the cache-aside pattern.</span></span>

<span data-ttu-id="f0aea-232">Chcete-li zadat vypršení platnosti položky v mezipaměti, použijte parametr `TimeSpan` metody `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="f0aea-232">To specify the expiration of an item in the cache, use the `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="f0aea-233">Azure Redis Cache může pracovat s objekty .NET, jakož i primitivní datové typy, ale před objekt .NET můžete uložit do mezipaměti, musí být serializovány.</span><span class="sxs-lookup"><span data-stu-id="f0aea-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="f0aea-234">To má na starosti vývojář aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0aea-234">This is the responsibility of the application developer.</span></span> <span data-ttu-id="f0aea-235">To dává flexibilní vývojáře při výběru serializátoru.</span><span class="sxs-lookup"><span data-stu-id="f0aea-235">This gives the developer flexibility in the choice of the serializer.</span></span> <span data-ttu-id="f0aea-236">Další informace a ukázkový kód, najdete v části [práce s objekty .NET v mezipaměti](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="f0aea-236">For more information and sample code, see [Work with .NET objects in the cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-to-azure-redis-cache"></a><span data-ttu-id="f0aea-237">Migrace stavu relace ASP.NET a ukládání výstupu do mezipaměti pro Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="f0aea-237">Migrate ASP.NET Session State and Output caching to Azure Redis Cache</span></span>
<span data-ttu-id="f0aea-238">Azure Redis Cache má zprostředkovatele pro stavu relace ASP.NET a stránky ukládání výstupu do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f0aea-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="f0aea-239">K migraci aplikace, který používá služba spravovaných mezipaměti verze těchto poskytovatelů, nejprve odeberte stávající části ze souboru web.config a pak nakonfigurujte Azure Redis Cache verze zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="f0aea-239">To migrate your application that uses the Managed Cache Service versions of these providers, first remove the existing sections from your web.config, and then configure the Azure Redis Cache versions of the providers.</span></span> <span data-ttu-id="f0aea-240">Pokyny k používání Azure Redis Cache ASP.NET zprostředkovatele najdete v tématu [poskytovatele stavu relace ASP.NET pro Azure Redis Cache](cache-aspnet-session-state-provider.md) a [poskytovatel výstupní mezipaměti technologie ASP.NET pro Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="f0aea-240">For instructions on using the Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f0aea-241">Další kroky</span><span class="sxs-lookup"><span data-stu-id="f0aea-241">Next steps</span></span>
<span data-ttu-id="f0aea-242">Prozkoumejte [dokumentace k Azure Redis Cache](https://azure.microsoft.com/documentation/services/cache/) pro kurzy, ukázky, videa a další.</span><span class="sxs-lookup"><span data-stu-id="f0aea-242">Explore the [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

