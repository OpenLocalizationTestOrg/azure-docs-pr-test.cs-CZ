---
title: "Optimalizace prostřednictvím Azure Content Delivery Network streamování médií"
description: "Optimalizovat datové proudy mediálních souborů pro smooth doručení"
services: cdn
documentationcenter: 
author: smcevoy
manager: erikre
editor: 
ms.assetid: 
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: v-semcev
ms.openlocfilehash: 1221f4f50b8b9c4b9f9f88be4d04a65375c36062
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/03/2017
---
# <a name="media-streaming-optimization-via-the-azure-content-delivery-network"></a><span data-ttu-id="ee286-103">Optimalizace prostřednictvím Azure Content Delivery Network streamování médií</span><span class="sxs-lookup"><span data-stu-id="ee286-103">Media streaming optimization via the Azure Content Delivery Network</span></span> 
 
<span data-ttu-id="ee286-104">Použití vysokým rozlišením video roste na Internetu, které vytvoří problémy pro efektivní doručování velkých souborů.</span><span class="sxs-lookup"><span data-stu-id="ee286-104">Use of high-definition video is increasing on the Internet, which creates difficulties for efficient delivery of large files.</span></span> <span data-ttu-id="ee286-105">Zákazníci očekávat plynulé přehrávání videa na vyžádání nebo live video prostředků v různých sítí a klienti po celém světě.</span><span class="sxs-lookup"><span data-stu-id="ee286-105">Customers expect smooth playback of video on demand or live video assets on a variety of networks and clients all over the world.</span></span> <span data-ttu-id="ee286-106">Doručení rychlé a efektivní mechanismus pro streamování soubory médií je velmi důležité, aby bylo prostředí hladký a zábavná příjemce.</span><span class="sxs-lookup"><span data-stu-id="ee286-106">A fast and efficient delivery mechanism for media streaming files is critical to ensure a smooth and enjoyable consumer experience.</span></span>  

<span data-ttu-id="ee286-107">Živé streamování médií je obzvláště složité doručit z důvodu velkého velikosti a počtu souběžných prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="ee286-107">Live streaming media is especially difficult to deliver because of the large sizes and number of concurrent viewers.</span></span> <span data-ttu-id="ee286-108">Velká zpoždění, že uživatelům ponechat.</span><span class="sxs-lookup"><span data-stu-id="ee286-108">Long delays cause users to leave.</span></span> <span data-ttu-id="ee286-109">Protože živé datové proudy nelze uložit do mezipaměti dopředu a velké latence nejsou přijatelné pro prohlížeče, videa fragmenty musí doručit včas.</span><span class="sxs-lookup"><span data-stu-id="ee286-109">Because live streams can't be cached ahead of time and large latencies aren't acceptable to viewers, video fragments must be delivered in a timely manner.</span></span> 

<span data-ttu-id="ee286-110">Vzory požadavku streamování také poskytují další výzvy.</span><span class="sxs-lookup"><span data-stu-id="ee286-110">The request patterns of streaming also provide some new challenges.</span></span> <span data-ttu-id="ee286-111">Po vydání oblíbených živý datový proud nebo nové řady pro video na vyžádání, tisíc na miliony prohlížeče si mohou vyžádat datového proudu ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="ee286-111">When a popular live stream or a new series is released for video on demand, thousands to millions of viewers might request the stream at the same time.</span></span> <span data-ttu-id="ee286-112">V takovém případě je důležité při prostředky neukládají do mezipaměti ještě není zahlcovat servery počátek konsolidace inteligentní žádostí.</span><span class="sxs-lookup"><span data-stu-id="ee286-112">In this case, smart request consolidation is vital to not overwhelm the origin servers when the assets aren't cached yet.</span></span>
 
<span data-ttu-id="ee286-113">Azure Content Delivery Network společnosti Akamai teď nabízí funkce, která poskytuje prostředky ke streamování médií efektivně uživatelům po celém světě ve velkém měřítku.</span><span class="sxs-lookup"><span data-stu-id="ee286-113">The Azure Content Delivery Network from Akamai now offers a feature that delivers streaming media assets efficiently to users across the globe at scale.</span></span> <span data-ttu-id="ee286-114">Funkci snižuje latenci, protože snižuje zatížení serverů původu.</span><span class="sxs-lookup"><span data-stu-id="ee286-114">The feature reduces latencies because it reduces the load on the origin servers.</span></span> <span data-ttu-id="ee286-115">Tato funkce je k dispozici s Akamai Standard cenová úroveň.</span><span class="sxs-lookup"><span data-stu-id="ee286-115">This feature is available with the Standard Akamai pricing tier.</span></span> 

<span data-ttu-id="ee286-116">Azure Content Delivery Network od společnosti Verizon dodává přímo v daný typ doručení optimalizace obecné webové mediálních datových proudů.</span><span class="sxs-lookup"><span data-stu-id="ee286-116">The Azure Content Delivery Network from Verizon delivers streaming media directly in the general web delivery optimization type.</span></span>
 
## <a name="configure-an-endpoint-to-optimize-media-streaming-in-the-azure-content-delivery-network-from-akamai"></a><span data-ttu-id="ee286-117">Konfigurace koncového bodu za účelem optimalizace streamování v Azure Content Delivery Network společnosti Akamai médií</span><span class="sxs-lookup"><span data-stu-id="ee286-117">Configure an endpoint to optimize media streaming in the Azure Content Delivery Network from Akamai</span></span>
 
<span data-ttu-id="ee286-118">Můžete nakonfigurovat váš koncový bod sítě (CDN) doručování obsahu za účelem optimalizace doručování velkých souborů prostřednictvím portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="ee286-118">You can configure your content delivery network (CDN) endpoint to optimize delivery for large files via the Azure portal.</span></span> <span data-ttu-id="ee286-119">K tomu můžete také použít rozhraní API REST nebo některého z klienta sady SDK.</span><span class="sxs-lookup"><span data-stu-id="ee286-119">You can also use our REST APIs or any of the client SDKs to do this.</span></span> <span data-ttu-id="ee286-120">Následující kroky ukazují proces prostřednictvím portálu Azure:</span><span class="sxs-lookup"><span data-stu-id="ee286-120">The following steps show the process via the Azure portal:</span></span>

1. <span data-ttu-id="ee286-121">Chcete-li přidat nový koncový bod na **profil CDN** vyberte **koncový bod**.</span><span class="sxs-lookup"><span data-stu-id="ee286-121">To add a new endpoint, on the **CDN profile** page, select **Endpoint**.</span></span>
  
    ![Nový koncový bod](./media/cdn-media-streaming-optimization/01_Adding.png)

2. <span data-ttu-id="ee286-123">V **optimalizované pro** rozevíracího seznamu vyberte **videa na vyžádání streamování médií** pro vyžádání video-on-demand prostředky.</span><span class="sxs-lookup"><span data-stu-id="ee286-123">In the **Optimized for** drop-down list, select **Video on demand media streaming** for video-on-demand assets.</span></span> <span data-ttu-id="ee286-124">Pokud tak učiníte, kombinace za provozu a na vyžádání video-on-demand streamování, vyberte **datové proudy obecné media**.</span><span class="sxs-lookup"><span data-stu-id="ee286-124">If you do a combination of live and video-on-demand streaming, select **General media streaming**.</span></span>

    ![Streamování vybrané](./media/cdn-media-streaming-optimization/02_Creating.png) 
 
<span data-ttu-id="ee286-126">Po vytvoření koncového bodu, bude se vztahovat optimalizace pro všechny soubory, které splňují určitá kritéria.</span><span class="sxs-lookup"><span data-stu-id="ee286-126">After you create the endpoint, it applies the optimization for all files that match certain criteria.</span></span> <span data-ttu-id="ee286-127">Následující část popisuje tento proces.</span><span class="sxs-lookup"><span data-stu-id="ee286-127">The following section describes this process.</span></span> 
 
## <a name="media-streaming-optimizations-for-the-azure-content-delivery-network-from-akamai"></a><span data-ttu-id="ee286-128">Optimalizace pro Azure Content Delivery Network společnosti Akamai streamování médií</span><span class="sxs-lookup"><span data-stu-id="ee286-128">Media streaming optimizations for the Azure Content Delivery Network from Akamai</span></span>
 
<span data-ttu-id="ee286-129">Médium, které za provozu je platná pro streamování optimalizace společnosti Akamai nebo na vyžádání video-on-demand streamování média, které používá jednotlivých média fragmenty pro doručení.</span><span class="sxs-lookup"><span data-stu-id="ee286-129">Media streaming optimization from Akamai is effective for live or video-on-demand streaming media that uses individual media fragments for delivery.</span></span> <span data-ttu-id="ee286-130">Tento proces se liší od jednoho velkého asset přenést přes progresivní stahování nebo pomocí žádosti o rozsah bajtů.</span><span class="sxs-lookup"><span data-stu-id="ee286-130">This process is different from a single large asset transferred via progressive download or by using byte-range requests.</span></span> <span data-ttu-id="ee286-131">Informace v tomto styl doručování médií najdete v tématu [velkých souborů optimalizace](cdn-large-file-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="ee286-131">For information on that style of media delivery, see [Large file optimization](cdn-large-file-optimization.md).</span></span>


<span data-ttu-id="ee286-132">Obecné doručení nebo na vyžádání video-on-demand média doručení optimalizace typy médií používají název CDN s back-end optimalizace pro doručování média prostředky rychlejší.</span><span class="sxs-lookup"><span data-stu-id="ee286-132">The general media delivery or video-on-demand media delivery optimization types use a CDN with back-end optimizations to deliver media assets faster.</span></span> <span data-ttu-id="ee286-133">Také používají konfigurace pro média prostředky na základě osvědčených postupů se naučili v čase.</span><span class="sxs-lookup"><span data-stu-id="ee286-133">They also use configurations for media assets based on best practices learned over time.</span></span>

### <a name="caching"></a><span data-ttu-id="ee286-134">Ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ee286-134">Caching</span></span>

<span data-ttu-id="ee286-135">Pokud Azure Content Delivery Network společnosti Akamai zjistí, že je asset streamování manifest nebo fragment, používá ukládání do mezipaměti vypršení platnosti odděleně od obecné webové doručení.</span><span class="sxs-lookup"><span data-stu-id="ee286-135">If the Azure Content Delivery Network from Akamai detects that the asset is a streaming manifest or fragment, it uses different caching expiration times from general web delivery.</span></span> <span data-ttu-id="ee286-136">(Viz úplný seznam v následující tabulce.) Jako vždy jsou dodržení cache-control nebo Expires hlavičky odeslaných z tohoto počátku.</span><span class="sxs-lookup"><span data-stu-id="ee286-136">(See the full list in the following table.) As always, cache-control or Expires headers sent from the origin are honored.</span></span> <span data-ttu-id="ee286-137">Pokud prostředku není asset média, se ukládá do mezipaměti pomocí dobu vypršení platnosti pro obecné webové přenosy.</span><span class="sxs-lookup"><span data-stu-id="ee286-137">If the asset is not a media asset, it caches by using the expiration times for general web delivery.</span></span>

<span data-ttu-id="ee286-138">Krátký záporný čas ukládání do mezipaměti je užitečné pro přesměrování zpracování počátku, když mnoho uživatelů požaduje fragment, která ještě neexistuje.</span><span class="sxs-lookup"><span data-stu-id="ee286-138">The short negative caching time is useful for origin offload when many users request a fragment that doesn’t exist yet.</span></span> <span data-ttu-id="ee286-139">Příkladem je živý datový proud, kde pakety nejsou k dispozici z tohoto počátku této sekundu.</span><span class="sxs-lookup"><span data-stu-id="ee286-139">An example is a live stream where the packets aren't available from the origin that second.</span></span> <span data-ttu-id="ee286-140">Již ukládání do mezipaměti interval také pomáhá přesměrovat zpracování požadavky z tohoto počátku, protože obsahu videa se obvykle nemění.</span><span class="sxs-lookup"><span data-stu-id="ee286-140">The longer caching interval also helps offload requests from the origin because video content isn't typically modified.</span></span>
 

|    | <span data-ttu-id="ee286-141">Obecné</span><span class="sxs-lookup"><span data-stu-id="ee286-141">General</span></span><br> <span data-ttu-id="ee286-142">webové</span><span class="sxs-lookup"><span data-stu-id="ee286-142">web</span></span><br><span data-ttu-id="ee286-143">doručení</span><span class="sxs-lookup"><span data-stu-id="ee286-143">delivery</span></span> | <span data-ttu-id="ee286-144">Obecné</span><span class="sxs-lookup"><span data-stu-id="ee286-144">General</span></span><br> <span data-ttu-id="ee286-145">média</span><span class="sxs-lookup"><span data-stu-id="ee286-145">media</span></span><br> <span data-ttu-id="ee286-146">streamování</span><span class="sxs-lookup"><span data-stu-id="ee286-146">streaming</span></span> | <span data-ttu-id="ee286-147">Vyžádání Video-on-Demand</span><span class="sxs-lookup"><span data-stu-id="ee286-147">Video-on-demand</span></span> <br><span data-ttu-id="ee286-148">média</span><span class="sxs-lookup"><span data-stu-id="ee286-148">media</span></span><br> <span data-ttu-id="ee286-149">streamování</span><span class="sxs-lookup"><span data-stu-id="ee286-149">streaming</span></span>  
--- | --- | --- | ---
<span data-ttu-id="ee286-150">Ukládání do mezipaměti: kladné</span><span class="sxs-lookup"><span data-stu-id="ee286-150">Caching: Positive</span></span> <br> <span data-ttu-id="ee286-151">HTTP 200, 203, 300,</span><span class="sxs-lookup"><span data-stu-id="ee286-151">HTTP 200, 203, 300,</span></span> <br> <span data-ttu-id="ee286-152">301, 302 a 410</span><span class="sxs-lookup"><span data-stu-id="ee286-152">301, 302, and 410</span></span> | <span data-ttu-id="ee286-153">7 dní</span><span class="sxs-lookup"><span data-stu-id="ee286-153">7 days</span></span> |<span data-ttu-id="ee286-154">365 dnů</span><span class="sxs-lookup"><span data-stu-id="ee286-154">365 days</span></span> | <span data-ttu-id="ee286-155">365 dnů</span><span class="sxs-lookup"><span data-stu-id="ee286-155">365 days</span></span>   
<span data-ttu-id="ee286-156">Ukládání do mezipaměti: záporná</span><span class="sxs-lookup"><span data-stu-id="ee286-156">Caching: Negative</span></span> <br> <span data-ttu-id="ee286-157">HTTP 204, 305, 404,</span><span class="sxs-lookup"><span data-stu-id="ee286-157">HTTP 204, 305, 404,</span></span> <br> <span data-ttu-id="ee286-158">a 405</span><span class="sxs-lookup"><span data-stu-id="ee286-158">and 405</span></span> | <span data-ttu-id="ee286-159">Žádný</span><span class="sxs-lookup"><span data-stu-id="ee286-159">None</span></span> | <span data-ttu-id="ee286-160">1 sekunda</span><span class="sxs-lookup"><span data-stu-id="ee286-160">1 second</span></span> | <span data-ttu-id="ee286-161">1 sekunda</span><span class="sxs-lookup"><span data-stu-id="ee286-161">1 second</span></span>
 
### <a name="deal-with-origin-failure"></a><span data-ttu-id="ee286-162">Řešení s chybou počátek</span><span class="sxs-lookup"><span data-stu-id="ee286-162">Deal with origin failure</span></span>  

<span data-ttu-id="ee286-163">Obecné média doručení a doručování média na vyžádání video-on-demand také mají původ časový limit a protokolu opakování podle osvědčené postupy pro vzory typické požadavku.</span><span class="sxs-lookup"><span data-stu-id="ee286-163">General media delivery and video-on-demand media delivery also have origin time-out and a retry log based on best practices for typical request patterns.</span></span> <span data-ttu-id="ee286-164">Protože je doručení obecné média pro za provozu a doručování média na vyžádání video-on-demand, používá kratší časový limit připojení vzhledem k povaze dobou živé například streamování.</span><span class="sxs-lookup"><span data-stu-id="ee286-164">For example, because general media delivery is for live and video-on-demand media delivery, it uses a shorter connection time-out due to the time-sensitive nature of live streaming.</span></span>

<span data-ttu-id="ee286-165">Pokud vyprší časový limit připojení, CDN opakuje několikrát, než odešle "504 – časový limit brány" Chyba do klienta.</span><span class="sxs-lookup"><span data-stu-id="ee286-165">When a connection times out, the CDN retries a number of times before it sends a "504 - Gateway Timeout" error to the client.</span></span> 

<span data-ttu-id="ee286-166">Když soubor odpovídá seznamu podmínky typ a velikost souborů, používá CDN chování pro streamování médií.</span><span class="sxs-lookup"><span data-stu-id="ee286-166">When a file matches the file type and size conditions list, the CDN uses the behavior for media streaming.</span></span> <span data-ttu-id="ee286-167">Jinak použije obecné webové doručení.</span><span class="sxs-lookup"><span data-stu-id="ee286-167">Otherwise, it uses general web delivery.</span></span>
   
### <a name="conditions-for-media-streaming-optimization"></a><span data-ttu-id="ee286-168">Podmínky pro optimalizaci streamování médií</span><span class="sxs-lookup"><span data-stu-id="ee286-168">Conditions for media streaming optimization</span></span> 

<span data-ttu-id="ee286-169">Následující tabulka uvádí sadu kritérií, které je třeba splnit pro streamování optimalizace médií:</span><span class="sxs-lookup"><span data-stu-id="ee286-169">The following table lists the set of criteria to be satisfied for media streaming optimization:</span></span> 
 
<span data-ttu-id="ee286-170">Podporované typy datových proudů</span><span class="sxs-lookup"><span data-stu-id="ee286-170">Supported streaming types</span></span> | <span data-ttu-id="ee286-171">Přípony souborů</span><span class="sxs-lookup"><span data-stu-id="ee286-171">File extensions</span></span>  
--- | ---  
<span data-ttu-id="ee286-172">Apple HLS</span><span class="sxs-lookup"><span data-stu-id="ee286-172">Apple HLS</span></span> | <span data-ttu-id="ee286-173">m3u8, m3u, m3ub, klíč, ts, aac</span><span class="sxs-lookup"><span data-stu-id="ee286-173">m3u8, m3u, m3ub, key, ts, aac</span></span>
<span data-ttu-id="ee286-174">Adobe HDS</span><span class="sxs-lookup"><span data-stu-id="ee286-174">Adobe HDS</span></span> | <span data-ttu-id="ee286-175">f4m, f4x, drmmeta, bootstrap, f4f,</span><span class="sxs-lookup"><span data-stu-id="ee286-175">f4m, f4x, drmmeta, bootstrap, f4f,</span></span><br><span data-ttu-id="ee286-176">Adresa URL KŘEH seg – struktura</span><span class="sxs-lookup"><span data-stu-id="ee286-176">Seg-Frag URL structure</span></span> <br> <span data-ttu-id="ee286-177">(odpovídající regulární výraz: ^(/.*)Seq(\d+)-Frag(\d+)</span><span class="sxs-lookup"><span data-stu-id="ee286-177">(matching regex: ^(/.*)Seq(\d+)-Frag(\d+)</span></span>
<span data-ttu-id="ee286-178">POMLČKA</span><span class="sxs-lookup"><span data-stu-id="ee286-178">DASH</span></span> | <span data-ttu-id="ee286-179">MPD, dash, divx, ismv, m4s, m4v, mp4, mp4v,</span><span class="sxs-lookup"><span data-stu-id="ee286-179">mpd, dash, divx, ismv, m4s, m4v, mp4, mp4v,</span></span> <br> <span data-ttu-id="ee286-180">sidx, WBEM, mp4a, m4a, isma</span><span class="sxs-lookup"><span data-stu-id="ee286-180">sidx, webm, mp4a, m4a, isma</span></span>
<span data-ttu-id="ee286-181">Technologie Smooth streaming</span><span class="sxs-lookup"><span data-stu-id="ee286-181">Smooth streaming</span></span> | <span data-ttu-id="ee286-182">/ manifest /, fragmenty/QualityLevels / /</span><span class="sxs-lookup"><span data-stu-id="ee286-182">/manifest/,/QualityLevels/Fragments/</span></span>
  

 
## <a name="media-streaming-optimizations-for-the-azure-content-delivery-network-from-verizon"></a><span data-ttu-id="ee286-183">Optimalizace pro Azure Content Delivery Network od společnosti Verizon streamování médií</span><span class="sxs-lookup"><span data-stu-id="ee286-183">Media streaming optimizations for the Azure Content Delivery Network from Verizon</span></span>

<span data-ttu-id="ee286-184">Azure Content Delivery Network od společnosti Verizon přináší přímo pomocí daný typ doručení optimalizace obecné webové prostředky streamování médií.</span><span class="sxs-lookup"><span data-stu-id="ee286-184">The Azure Content Delivery Network from Verizon delivers streaming media assets directly by using the general web delivery optimization type.</span></span> <span data-ttu-id="ee286-185">Několik funkcí v CDN přímo pomáhají doručovat média prostředky ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="ee286-185">A few features on the CDN directly assist in delivering media assets by default.</span></span>

### <a name="partial-cache-sharing"></a><span data-ttu-id="ee286-186">Sdílení částečné mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ee286-186">Partial cache sharing</span></span>

<span data-ttu-id="ee286-187">Sdílení částečné mezipaměti umožňuje CDN k obsluze obsahu částečně v mezipaměti na nové požadavky.</span><span class="sxs-lookup"><span data-stu-id="ee286-187">Partial cache sharing allows the CDN to serve partially cached content to new requests.</span></span> <span data-ttu-id="ee286-188">Například pokud první požadavek na CDN výsledkem k neúspěšnému přístupu do mezipaměti, je žádost odeslána k počátku.</span><span class="sxs-lookup"><span data-stu-id="ee286-188">For example, if the first request to the CDN results in a cache miss, the request is sent to the origin.</span></span> <span data-ttu-id="ee286-189">I když tento obsah neúplné je načten do mezipaměti CDN, můžete začít ostatních požadavků na CDN získávání tato data.</span><span class="sxs-lookup"><span data-stu-id="ee286-189">Although this incomplete content is loaded into the CDN cache, other requests to the CDN can start getting this data.</span></span> 

### <a name="cache-fill-wait-time"></a><span data-ttu-id="ee286-190">Doba čekání výplně mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ee286-190">Cache fill wait time</span></span>

 <span data-ttu-id="ee286-191">Funkce čas čekání výplně mezipaměti vynutí hraničního serveru k uchování všechny následné žádosti pro stejný prostředek, dokud hlavičky HTTP odpovědi přicházejí ze zdrojového serveru.</span><span class="sxs-lookup"><span data-stu-id="ee286-191">The cache fill wait time feature forces the edge server to hold any subsequent requests for the same resource until HTTP response headers arrive from the origin server.</span></span> <span data-ttu-id="ee286-192">Pokud hlavičky HTTP odpovědi z tohoto počátku přicházejí před vypršením platnosti časovač, jsou z mezipaměti rostoucí zpracovat všechny požadavky, které byly blokovat.</span><span class="sxs-lookup"><span data-stu-id="ee286-192">If HTTP response headers from the origin  arrive before the timer expires, all requests that were put on hold are served out of the growing cache.</span></span> <span data-ttu-id="ee286-193">Ve stejnou dobu mezipaměti vyplní dat z tohoto počátku.</span><span class="sxs-lookup"><span data-stu-id="ee286-193">At the same time, the cache is filled by data from the origin.</span></span> <span data-ttu-id="ee286-194">Ve výchozím nastavení Doba čekání výplně mezipaměti na 3 000 milisekund.</span><span class="sxs-lookup"><span data-stu-id="ee286-194">By default, the cache fill wait time is set to 3,000 milliseconds.</span></span> 

