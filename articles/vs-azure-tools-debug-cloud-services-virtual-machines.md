---
title: "Ladění služby Azure cloudové služby nebo virtuálního počítače v sadě Visual Studio | Microsoft Docs"
description: "Ladění cloudové služby nebo virtuálního počítače v sadě Visual Studio"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 2ea3a9d6b3bdd873c139064b3c400eff5977eda4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="911d7-103">Ladění služby Azure cloudové služby nebo virtuálního počítače v sadě Visual Studio</span><span class="sxs-lookup"><span data-stu-id="911d7-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="911d7-104">Visual Studio poskytuje různé možnosti pro ladění cloudových služeb Azure a virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="911d7-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="911d7-105">Ladění cloudové služby na místním počítači</span><span class="sxs-lookup"><span data-stu-id="911d7-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="911d7-106">Můžete ušetřit čas a peníze pomocí Azure výpočetní emulátor k ladění cloudové služby v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="911d7-106">You can save time and money by using the Azure compute emulator to debug your cloud service on a local machine.</span></span> <span data-ttu-id="911d7-107">Ladění služby místně, před nasazením, můžete zlepšit spolehlivost a výkon bez placení pro dobu výpočtů.</span><span class="sxs-lookup"><span data-stu-id="911d7-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="911d7-108">Ale některé může dojít k chybám pouze při spuštění cloudové služby v Azure sám sebe.</span><span class="sxs-lookup"><span data-stu-id="911d7-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="911d7-109">Tyto chyby můžete ladit, pokud povolíte vzdálené ladění při publikování služby a potom připojí ladicí program na instanci role.</span><span class="sxs-lookup"><span data-stu-id="911d7-109">You can debug these errors if you enable remote debugging when you publish your service and then attach the debugger to a role instance.</span></span>

<span data-ttu-id="911d7-110">Emulátor simuluje službu Azure Compute a běží ve vašem místním prostředí, aby mohli testování a ladění cloudové služby, před nasazením.</span><span class="sxs-lookup"><span data-stu-id="911d7-110">The emulator simulates the Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="911d7-111">Emulátor zpracovává životní cyklus instance role a poskytuje přístup k simulované prostředky, například místní úložiště.</span><span class="sxs-lookup"><span data-stu-id="911d7-111">The emulator handles the lifecycle of your role instances and provides access to simulated resources, such as local storage.</span></span> <span data-ttu-id="911d7-112">Při ladění a spouštění služby ze sady Visual Studio, automaticky spustí se emulátor jako pozadí aplikace a pak nasadí do emulátoru služby.</span><span class="sxs-lookup"><span data-stu-id="911d7-112">When you debug or run your service from Visual Studio, it automatically starts the emulator as a background application and then deploys your service to the emulator.</span></span> <span data-ttu-id="911d7-113">Emulátor serveru můžete použít k zobrazení služby, když je spuštěna v místním prostředí.</span><span class="sxs-lookup"><span data-stu-id="911d7-113">You can use the emulator to view your service when it runs in the local environment.</span></span> <span data-ttu-id="911d7-114">Můžete spustit na plnou verzi nebo expresní verze emulátoru.</span><span class="sxs-lookup"><span data-stu-id="911d7-114">You can run the full version or the express version of the emulator.</span></span> <span data-ttu-id="911d7-115">(Počínaje Azure 2.3, expresní verze emulátoru je výchozí.) V tématu [pomocí expresní emulátor ke spouštění a ladění cloudové služby místně](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="911d7-115">(Starting with Azure 2.3, the express version of the emulator is the default.) See [Using Emulator Express to Run and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="to-debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="911d7-116">Chcete-li ladit cloudové služby na místním počítači</span><span class="sxs-lookup"><span data-stu-id="911d7-116">To debug your cloud service on your local computer</span></span>
1. <span data-ttu-id="911d7-117">Na řádku nabídek zvolte **ladění**, **spustit ladění** ke spuštění projektu Azure cloud service.</span><span class="sxs-lookup"><span data-stu-id="911d7-117">On the menu bar, choose **Debug**, **Start Debugging** to run your Azure cloud service project.</span></span> <span data-ttu-id="911d7-118">Jako alternativu můžete stisknutím klávesy F5.</span><span class="sxs-lookup"><span data-stu-id="911d7-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="911d7-119">Zobrazí zprávu, která se spouští výpočetní emulátor.</span><span class="sxs-lookup"><span data-stu-id="911d7-119">You’ll see a message that the Compute Emulator is starting.</span></span> <span data-ttu-id="911d7-120">Když se spustí v emulátoru, potvrdí ikonu na hlavním panelu ji.</span><span class="sxs-lookup"><span data-stu-id="911d7-120">When the emulator starts, the system tray icon confirms it.</span></span>

    ![Azure emulátoru na hlavním panelu](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="911d7-122">Zobrazit uživatelské rozhraní pro emulátoru služby výpočty v otevřením místní nabídky Azure ikony v oznamovací oblasti a pak vyberte **zobrazit uživatelské prostředí emulátoru výpočtů**.</span><span class="sxs-lookup"><span data-stu-id="911d7-122">Display the user interface for the compute emulator by opening the shortcut menu for the Azure icon in the notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="911d7-123">V levém podokně rozhraní ukazuje služby, které jsou aktuálně nasazené na emulátoru služby výpočty v a instance rolí, které běží jednotlivých služeb.</span><span class="sxs-lookup"><span data-stu-id="911d7-123">The left pane of the UI shows the services that are currently deployed to the compute emulator and the role instances that each service is running.</span></span> <span data-ttu-id="911d7-124">Můžete vybrat služby nebo role zobrazíte životního cyklu, protokolování a diagnostické informace v pravém podokně.</span><span class="sxs-lookup"><span data-stu-id="911d7-124">You can choose the service or roles to display lifecycle, logging, and diagnostic information in the right pane.</span></span> <span data-ttu-id="911d7-125">Pokud v horním okrajem zahrnuté okna umístili fokus, rozšíří se k vyplnění v pravém podokně.</span><span class="sxs-lookup"><span data-stu-id="911d7-125">If you put the focus in the top margin of an included window, it expands to fill the right pane.</span></span>
3. <span data-ttu-id="911d7-126">Krok prostřednictvím aplikace výběrem příkazy na **ladění** nabídce a nastavení zarážek v kódu.</span><span class="sxs-lookup"><span data-stu-id="911d7-126">Step through the application by selecting commands on the **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="911d7-127">Aktuální stav aplikace aktualizují krocích aplikace v ladicím programu podokna.</span><span class="sxs-lookup"><span data-stu-id="911d7-127">As you step through the application in the debugger, the panes are updated with the current status of the application.</span></span> <span data-ttu-id="911d7-128">Když zastavíte ladění, nasazení aplikace, které se odstraní.</span><span class="sxs-lookup"><span data-stu-id="911d7-128">When you stop debugging, the application deployment is deleted.</span></span> <span data-ttu-id="911d7-129">Pokud vaše aplikace obsahuje webovou roli a nastavíte vlastnost spuštění akce spustit webový prohlížeč, Visual Studio spustí webovou aplikaci v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="911d7-129">If your application includes a web role and you've set the Startup action property to start the web browser, Visual Studio starts your web application in the browser.</span></span> <span data-ttu-id="911d7-130">Pokud změníte počet instancí role v konfiguraci služby, musíte zastavit cloudovou službu a poté znovu spusťte ladění tak, že ladíte tyto nové instance role.</span><span class="sxs-lookup"><span data-stu-id="911d7-130">If you change the number of instances of a role in the service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of the role.</span></span>

    <span data-ttu-id="911d7-131">**Poznámka:** při zastavení spuštěna nebo k ladění služby nejsou zastavena emulátoru služby výpočty místní a emulátoru úložiště.</span><span class="sxs-lookup"><span data-stu-id="911d7-131">**Note:** When you stop running or debugging your service, the local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="911d7-132">Explicitně je potřeba zastavit z oznamovací oblasti.</span><span class="sxs-lookup"><span data-stu-id="911d7-132">You must stop them explicitly from the notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="911d7-133">Ladění cloudové služby v Azure</span><span class="sxs-lookup"><span data-stu-id="911d7-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="911d7-134">K ladění Cloudová služba ze vzdáleného počítače, je nutné povolit tuto funkci explicitně při nasazení cloudové služby tak, aby požadované na virtuálních počítačích, které spustit instance role jsou nainstalovány služby (například msvsmon.exe).</span><span class="sxs-lookup"><span data-stu-id="911d7-134">To debug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on the virtual machines that run your role instances.</span></span> <span data-ttu-id="911d7-135">Pokud povolíte nepomohly, vzdálené ladění při publikování služby, budete muset znovu publikovat služby s povoleným laděním vzdálené.</span><span class="sxs-lookup"><span data-stu-id="911d7-135">If you didn't enable remote debugging when you published the service, you have to republish the service with remote debugging enabled.</span></span>

<span data-ttu-id="911d7-136">Pokud povolíte vzdálené ladění pro cloudovou službu, ho nebude vykazovat snížení výkonu nebo toho vám být účtovány další poplatky.</span><span class="sxs-lookup"><span data-stu-id="911d7-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="911d7-137">Neměli byste používat vzdáleného ladění na produkční služby, protože klienti, kteří používají službu může být nepříznivě ovlivněn.</span><span class="sxs-lookup"><span data-stu-id="911d7-137">You shouldn't use remote debugging on a production service, because clients who use the service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="911d7-138">Když publikujete Cloudová služba ze sady Visual Studio, můžete povolit **IntelliTrace** pro všechny role v této službě, které cílí na rozhraní .NET Framework 4 nebo .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="911d7-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target the .NET Framework 4 or the .NET Framework 4.5.</span></span> <span data-ttu-id="911d7-139">Pomocí **IntelliTrace**, můžete prozkoumat události, které nastaly v instanci role v minulosti a reprodukujte kontext z této doby.</span><span class="sxs-lookup"><span data-stu-id="911d7-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in the past and reproduce the context from that time.</span></span> <span data-ttu-id="911d7-140">V tématu [ladění publikované Cloudová služba se IntelliTrace a Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) a [IntelliTrace pomocí](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="911d7-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="to-enable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="911d7-141">Chcete-li povolit vzdálené ladění pro cloudové služby</span><span class="sxs-lookup"><span data-stu-id="911d7-141">To enable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="911d7-142">Otevřete místní nabídky projektu Azure a pak vyberte **publikovat**.</span><span class="sxs-lookup"><span data-stu-id="911d7-142">Open the shortcut menu for the Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="911d7-143">Vyberte **pracovní** prostředí a **ladění** konfigurace.</span><span class="sxs-lookup"><span data-stu-id="911d7-143">Select the **Staging** environment and the **Debug** configuration.</span></span>

    <span data-ttu-id="911d7-144">Toto je pouze platí.</span><span class="sxs-lookup"><span data-stu-id="911d7-144">This is only a guideline.</span></span> <span data-ttu-id="911d7-145">Můžete se rozhodnout spustit testovací prostředí v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="911d7-145">You can opt to run your test environments in a Production environment.</span></span> <span data-ttu-id="911d7-146">Pokud povolíte vzdáleného ladění na produkční prostředí však může ovlivnit nepříznivě uživatele.</span><span class="sxs-lookup"><span data-stu-id="911d7-146">However, you may adversely affect users if you enable remote debugging on the Production environment.</span></span> <span data-ttu-id="911d7-147">Můžete zvolit konfigurace verze, ale konfiguraci ladění umožňuje snazší ladění.</span><span class="sxs-lookup"><span data-stu-id="911d7-147">You can choose the Release configuration, but the Debug configuration makes debugging easier.</span></span>

    ![Vyberte konfiguraci ladění](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="911d7-149">Postupujte podle kroků obvyklé, ale vybrat **povolení vzdáleného ladicího programu u všech rolí** políčko **Upřesnit nastavení** kartě.</span><span class="sxs-lookup"><span data-stu-id="911d7-149">Follow the usual steps, but select the **Enable Remote Debugger for all roles** check box on the **Advanced Settings** tab.</span></span>

    ![Konfigurace ladění](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="to-attach-the-debugger-to-a-cloud-service-in-azure"></a><span data-ttu-id="911d7-151">Chcete-li cloudové služby v Azure připojit ladicí program</span><span class="sxs-lookup"><span data-stu-id="911d7-151">To attach the debugger to a cloud service in Azure</span></span>
1. <span data-ttu-id="911d7-152">V Průzkumníku serveru rozbalte uzel vaší cloudové služby.</span><span class="sxs-lookup"><span data-stu-id="911d7-152">In Server Explorer, expand the node for your cloud service.</span></span>
2. <span data-ttu-id="911d7-153">Otevřete místní nabídku pro danou roli nebo instanci role, ke kterému chcete připojit a potom vyberte **připojit ladicí program**.</span><span class="sxs-lookup"><span data-stu-id="911d7-153">Open the shortcut menu for the role or role instance to which you want to attach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="911d7-154">Pokud ladíte roli, ladicího programu sady Visual Studio se připojí ke každé instanci této role.</span><span class="sxs-lookup"><span data-stu-id="911d7-154">If you debug a role, the Visual Studio debugger attaches to each instance of that role.</span></span> <span data-ttu-id="911d7-155">Na zarážky pro první instanci role, která běží tohoto řádku kódu a splňuje všechny podmínky této zarážek dojde k přerušení ladicího programu.</span><span class="sxs-lookup"><span data-stu-id="911d7-155">The debugger will break on a breakpoint for the first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="911d7-156">Pokud ladíte instance, připojí ladicí program pouze pro tuto instanci a zalomení na zarážku jenom v případě, že tuto konkrétní instanci běží tohoto řádku kódu a splňuje podmínky se zarážka.</span><span class="sxs-lookup"><span data-stu-id="911d7-156">If you debug an instance, the debugger attaches to only that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets the breakpoint's conditions.</span></span>

    ![Připojit ladicí program](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="911d7-158">Po ladicí program připojí k instanci, ladění jako obvykle.</span><span class="sxs-lookup"><span data-stu-id="911d7-158">After the debugger attaches to an instance, debug as usual.</span></span> <span data-ttu-id="911d7-159">Ladicí program se automaticky připojí k příslušné hostitelský proces pro vaši roli.</span><span class="sxs-lookup"><span data-stu-id="911d7-159">The debugger automatically attaches to the appropriate host process for your role.</span></span> <span data-ttu-id="911d7-160">V závislosti na tom, co je role připojí ladicí program w3wp.exe, WaWorkerHost.exe nebo WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="911d7-160">Depending on what the role is, the debugger attaches to w3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="911d7-161">Pokud chcete ověřit procesu, ke kterému je připojen ladicí program, rozbalte uzel instance v Průzkumníku serveru.</span><span class="sxs-lookup"><span data-stu-id="911d7-161">To verify the process to which the debugger is attached, expand the instance node in Server Explorer.</span></span> <span data-ttu-id="911d7-162">V tématu [architektura Role Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) Další informace o Azure procesy.</span><span class="sxs-lookup"><span data-stu-id="911d7-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Vyberte typ kód – dialogové okno](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="911d7-164">K identifikaci procesů, ke kterým je připojen ladicí program, otevřete procesy dialogové okno, v nabídce panelu Výběr ladění, Windows, procesy.</span><span class="sxs-lookup"><span data-stu-id="911d7-164">To identify the processes to which the debugger is attached, open the Processes dialog box by, on the menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="911d7-165">(Klávesové: Ctrl + Alt + Z) Chcete-li odpojit konkrétní proces, otevřete jeho místní nabídky a pak vyberte **odpojit proces**.</span><span class="sxs-lookup"><span data-stu-id="911d7-165">(Keyboard: Ctrl+Alt+Z)To detach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="911d7-166">Nebo, najděte uzel instance v Průzkumníku serveru, najít proces, otevřete jeho místní nabídky a pak vyberte **odpojit proces**.</span><span class="sxs-lookup"><span data-stu-id="911d7-166">Or, locate the instance node in Server Explorer, find the process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Ladění procesů](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="911d7-168">Vyhněte se dlouho se zastavuje na zarážky při vzdáleném ladění.</span><span class="sxs-lookup"><span data-stu-id="911d7-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="911d7-169">Azure zpracovává proces, který je zastavena po dobu delší než několik minut jako reagovat a zastaví odesílání provozu do této instance.</span><span class="sxs-lookup"><span data-stu-id="911d7-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic to that instance.</span></span> <span data-ttu-id="911d7-170">Pokud zastavíte příliš dlouho, msvsmon.exe odpojí z procesu.</span><span class="sxs-lookup"><span data-stu-id="911d7-170">If you stop for too long, msvsmon.exe detaches from the process.</span></span>
>
>

<span data-ttu-id="911d7-171">Odpojit ladicí program z všechny procesy ve vaší instanci nebo role, otevřete místní nabídku pro danou roli nebo instanci, kterou ladíte a potom vyberte **odpojit ladicí program**.</span><span class="sxs-lookup"><span data-stu-id="911d7-171">To detach the debugger from all processes in your instance or role, open the shortcut menu for the role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="911d7-172">Omezení pro vzdálené ladění v Azure</span><span class="sxs-lookup"><span data-stu-id="911d7-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="911d7-173">Z Azure SDK 2.3 vzdálené ladění má následující omezení.</span><span class="sxs-lookup"><span data-stu-id="911d7-173">From Azure SDK 2.3, remote debugging has the following limitations.</span></span>

* <span data-ttu-id="911d7-174">S vzdálené ladění povoleno, nelze publikovat Cloudová služba, ve kterém žádné role, má víc než 25 instancí.</span><span class="sxs-lookup"><span data-stu-id="911d7-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="911d7-175">Ladicí program používá porty 30400 k 30424, 31400 k 31424 a 32400 k 32424.</span><span class="sxs-lookup"><span data-stu-id="911d7-175">The debugger uses ports 30400 to 30424, 31400 to 31424 and 32400 to 32424.</span></span> <span data-ttu-id="911d7-176">Pokud se pokusíte použít některou z těchto portů, nebudete moci publikovat službu a jeden z následujících chybových zpráv se objeví v protokolu aktivit pro Azure:</span><span class="sxs-lookup"><span data-stu-id="911d7-176">If you try to use any of these ports, you won't be able to publish your service, and one of the following error messages will appear in the activity log for Azure:</span></span>

  * <span data-ttu-id="911d7-177">Chyba při ověřování souboru .cscfg proti souboru .csdef.</span><span class="sxs-lookup"><span data-stu-id="911d7-177">Error validating the .cscfg file against the .csdef file.</span></span>
    <span data-ttu-id="911d7-178">Vyhrazené rozsahu 'rozsah portů' pro koncový bod Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector role "role" se překrývá s již definovaný port nebo rozsah.</span><span class="sxs-lookup"><span data-stu-id="911d7-178">The reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="911d7-179">Přidělení se nezdařilo.</span><span class="sxs-lookup"><span data-stu-id="911d7-179">Allocation failed.</span></span> <span data-ttu-id="911d7-180">Opakujte akci později, zkuste zmenšit velikost virtuálního počítače nebo počet instancí role nebo vyzkoušejte nasazení v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="911d7-180">Please retry later, try reducing the VM size or number of role instances, or try deploying to a different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="911d7-181">Ladění virtuální počítače Azure</span><span class="sxs-lookup"><span data-stu-id="911d7-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="911d7-182">Můžete ladit programy, které běží na virtuálních počítačích Azure s použitím Průzkumníka serveru v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="911d7-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="911d7-183">Když povolíte vzdálené ladění na virtuální počítač Azure, Azure nainstaluje vzdáleného ladění rozšíření ve virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="911d7-183">When you enable remote debugging on an Azure virtual machine, Azure installs the remote debugging extension on the virtual machine.</span></span> <span data-ttu-id="911d7-184">Pak můžete přiřadit procesy na virtuálním počítači a ladění běžným způsobem.</span><span class="sxs-lookup"><span data-stu-id="911d7-184">Then, you can attach to processes on the virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="911d7-185">Virtuální počítače vytvořené pomocí Azure resource manager zásobníku můžete vzdáleně ladit pomocí Průzkumníku cloudu ve Visual Studiu 2015.</span><span class="sxs-lookup"><span data-stu-id="911d7-185">Virtual machines created through the Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="911d7-186">Další informace najdete v tématu [Správa prostředků Azure pomocí Průzkumníku cloudu](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="911d7-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="to-debug-an-azure-virtual-machine"></a><span data-ttu-id="911d7-187">Chcete-li ladit virtuální počítač Azure</span><span class="sxs-lookup"><span data-stu-id="911d7-187">To debug an Azure virtual machine</span></span>
1. <span data-ttu-id="911d7-188">V Průzkumníku serveru rozbalte uzel virtuální počítače a vyberte uzel virtuální počítač, který chcete ladit.</span><span class="sxs-lookup"><span data-stu-id="911d7-188">In Server Explorer, expand the Virtual Machines node and select the node of the virtual machine that you want to debug.</span></span>
2. <span data-ttu-id="911d7-189">Otevřete kontextu nabídku a vyberte **povolit ladění**.</span><span class="sxs-lookup"><span data-stu-id="911d7-189">Open the context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="911d7-190">Když se zobrazí dotaz, pokud jste si jisti, zda chcete povolit ladění na virtuálním počítači, vyberte **Ano**.</span><span class="sxs-lookup"><span data-stu-id="911d7-190">When asked if you're sure if you want to enable debugging on the virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="911d7-191">Azure nainstaluje vzdáleného ladění rozšíření ve virtuálním počítači, který chcete povolit ladění.</span><span class="sxs-lookup"><span data-stu-id="911d7-191">Azure installs the remote debugging extension on the virtual machine to enable debugging.</span></span>

    ![Virtuální počítač povolit ladění příkaz](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Protokol činnosti Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="911d7-194">Po dokončení instalace vzdáleného ladění rozšíření otevřete kontextu nabídku virtuálního počítače a vyberte možnost **připojit ladicí program...**</span><span class="sxs-lookup"><span data-stu-id="911d7-194">After the remote debugging extension finishes installing, open the virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="911d7-195">Azure získá seznam procesů, které na virtuálním počítači a zobrazí je v připojit k procesu – dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="911d7-195">Azure gets a list of the processes on the virtual machine and shows them in the Attach to Process dialog box.</span></span>

    ![Připojit ladicí program příkaz](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="911d7-197">V **připojit k procesu** dialogové okno, vyberte **vyberte** k omezení seznamu výsledky a zobrazit pouze typy kódu, kterou chcete ladit.</span><span class="sxs-lookup"><span data-stu-id="911d7-197">In the **Attach to Process** dialog box, select **Select** to limit the results list to show only the types of code you want to debug.</span></span> <span data-ttu-id="911d7-198">Můžete ladit 32 - nebo 64bitový spravovaný kód, nativního kódu nebo obojí.</span><span class="sxs-lookup"><span data-stu-id="911d7-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Vyberte typ kód – dialogové okno](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="911d7-200">Vyberte procesů, které chcete ladit na virtuálním počítači a potom vyberte **Attach**.</span><span class="sxs-lookup"><span data-stu-id="911d7-200">Select the processes you want to debug on the virtual machine and then select **Attach**.</span></span> <span data-ttu-id="911d7-201">Například můžete zvolit procesu w3wp.exe, pokud chcete ladit webové aplikace na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="911d7-201">For example, you might choose the w3wp.exe process if you wanted to debug a web app on the virtual machine.</span></span> <span data-ttu-id="911d7-202">V tématu [ladění jeden nebo více procesy v sadě Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) a [architektura Role Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) Další informace.</span><span class="sxs-lookup"><span data-stu-id="911d7-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="911d7-203">Vytvoření webového projektu a virtuální počítač pro ladění</span><span class="sxs-lookup"><span data-stu-id="911d7-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="911d7-204">Před publikováním projektu Azure, které může být užitečné k testování v prostředí s omezením podporující ladění a testování scénáře a kde můžete nainstalovat testování a monitorování programy.</span><span class="sxs-lookup"><span data-stu-id="911d7-204">Before publishing your Azure project, you might find it useful to test it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="911d7-205">Jedním ze způsobů k tomu je vzdáleně ladění aplikace s virtuálním počítačem.</span><span class="sxs-lookup"><span data-stu-id="911d7-205">One way to do this is to remotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="911d7-206">Projekty Visual Studio ASP.NET nabízejí možnost pro vytvoření užitečný virtuální počítač, který můžete použít pro testování aplikace.</span><span class="sxs-lookup"><span data-stu-id="911d7-206">Visual Studio ASP.NET projects offer an option to create a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="911d7-207">Virtuální počítač obsahuje běžně potřeby koncových bodů například prostředí PowerShell, vzdálené plochy a WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="911d7-207">The virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="to-create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="911d7-208">K vytvoření webového projektu a virtuální počítač pro ladění</span><span class="sxs-lookup"><span data-stu-id="911d7-208">To create a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="911d7-209">V sadě Visual Studio vytvořte novou webovou aplikaci ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="911d7-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="911d7-210">V dialogovém okně Nový projekt ASP.NET, v části Azure vyberte **virtuálního počítače** v rozevíracím seznamu.</span><span class="sxs-lookup"><span data-stu-id="911d7-210">In the New ASP.NET Project dialog, in the Azure section, choose **Virtual Machine** in the dropdown list box.</span></span> <span data-ttu-id="911d7-211">Ponechte **vytvořit vzdálené prostředky** zaškrtnuté políčko.</span><span class="sxs-lookup"><span data-stu-id="911d7-211">Leave the **Create remote resources** check box selected.</span></span> <span data-ttu-id="911d7-212">Vyberte **OK** pokračovat.</span><span class="sxs-lookup"><span data-stu-id="911d7-212">Select **OK** to proceed.</span></span>

    <span data-ttu-id="911d7-213">**Vytvořit virtuální počítač na platformě Azure** zobrazí se dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="911d7-213">The **Create virtual machine on Azure** dialog box appears.</span></span>

    ![ASP.NET webového projektu dialogové okno vytvořit](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="911d7-215">**Poznámka:** budete vyzváni k přihlášení k účtu Azure, pokud jste již přihlášeni.</span><span class="sxs-lookup"><span data-stu-id="911d7-215">**Note:** You'll be asked to sign in to your Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="911d7-216">Vyberte různá nastavení pro virtuální počítač a pak vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="911d7-216">Select the various settings for the virtual machine and then select **OK**.</span></span> <span data-ttu-id="911d7-217">V tématu [virtuální počítače](http://go.microsoft.com/fwlink/?LinkId=623033) Další informace.</span><span class="sxs-lookup"><span data-stu-id="911d7-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="911d7-218">Název, který zadáte pro název DNS bude název virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="911d7-218">The name you enter for DNS name will be the name of the virtual machine.</span></span>

    ![Vytvoření virtuálního počítače na Azure dialogové okno](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="911d7-220">Azure vytvoří virtuální počítač a pak poskytuje a konfiguruje koncových bodů, jako je vzdálené plochy a nasazení webu</span><span class="sxs-lookup"><span data-stu-id="911d7-220">Azure creates the virtual machine and then provisions and configures the endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="911d7-221">Po nakonfigurování virtuálního počítače v Průzkumníku serveru vyberte uzlu virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="911d7-221">After the virtual machine is fully configured, select the virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="911d7-222">Otevřete kontextu nabídku a vyberte **povolit ladění**.</span><span class="sxs-lookup"><span data-stu-id="911d7-222">Open the context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="911d7-223">Když se zobrazí dotaz, pokud jste si jisti, zda chcete povolit ladění na virtuálním počítači, vyberte **Ano**.</span><span class="sxs-lookup"><span data-stu-id="911d7-223">When asked if you're sure if you want to enable debugging on the virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="911d7-224">Azure nainstaluje vzdáleného ladění rozšíření pro virtuální počítač, který chcete povolit ladění.</span><span class="sxs-lookup"><span data-stu-id="911d7-224">Azure installs the remote debugging extension to the virtual machine to enable debugging.</span></span>

    ![Virtuální počítač povolit ladění příkaz](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Protokol činnosti Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="911d7-227">Publikování projektu, jak je uvedeno v [postupy: nasazení webového projektu pomocí publikování jedním kliknutím v sadě Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="911d7-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="911d7-228">Vzhledem k tomu, že chcete ladit na virtuálním počítači, na **nastavení** stránky **Publikovat Web** průvodci vyberte **ladění** jako konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="911d7-228">Because you want to debug on the virtual machine, on the **Settings** page of the **Publish Web** wizard, select **Debug** as the configuration.</span></span> <span data-ttu-id="911d7-229">Tím je zajištěno, že symboly kódu jsou k dispozici při ladění.</span><span class="sxs-lookup"><span data-stu-id="911d7-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Nastavení publikování](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="911d7-231">V **možností publikování souboru**, vyberte **odebrat další soubory v cílovém umístění** Pokud projekt již byl nasazen na dřívější čas.</span><span class="sxs-lookup"><span data-stu-id="911d7-231">In the **File Publish Options**, select **Remove additional files at destination** if the project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="911d7-232">Když na projekt publikuje v místní nabídce virtuálního počítače v Průzkumníku serveru, vyberte **připojit ladicí program...**</span><span class="sxs-lookup"><span data-stu-id="911d7-232">After the project publishes, on the virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="911d7-233">Azure získá seznam procesů, které na virtuálním počítači a zobrazí je v připojit k procesu – dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="911d7-233">Azure gets a list of the processes on the virtual machine and shows them in the Attach to Process dialog box.</span></span>

    ![Připojit ladicí program příkaz](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="911d7-235">V **připojit k procesu** dialogové okno, vyberte **vyberte** k omezení seznamu výsledky a zobrazit pouze typy kódu, kterou chcete ladit.</span><span class="sxs-lookup"><span data-stu-id="911d7-235">In the **Attach to Process** dialog box, select **Select** to limit the results list to show only the types of code you want to debug.</span></span> <span data-ttu-id="911d7-236">Můžete ladit 32 - nebo 64bitový spravovaný kód, nativního kódu nebo obojí.</span><span class="sxs-lookup"><span data-stu-id="911d7-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Vyberte typ kód – dialogové okno](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="911d7-238">Vyberte procesů, které chcete ladit na virtuálním počítači a potom vyberte **Attach**.</span><span class="sxs-lookup"><span data-stu-id="911d7-238">Select the processes you want to debug on the virtual machine and then select **Attach**.</span></span> <span data-ttu-id="911d7-239">Například můžete zvolit procesu w3wp.exe, pokud chcete ladit webové aplikace na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="911d7-239">For example, you might choose the w3wp.exe process if you wanted to debug a web app on the virtual machine.</span></span> <span data-ttu-id="911d7-240">V tématu [ladění jeden nebo více procesy v sadě Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) Další informace.</span><span class="sxs-lookup"><span data-stu-id="911d7-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="911d7-241">Další kroky</span><span class="sxs-lookup"><span data-stu-id="911d7-241">Next steps</span></span>
* <span data-ttu-id="911d7-242">Použití **Intellitrace** ke shromažďování protokolů událostí a volání ze serveru verze.</span><span class="sxs-lookup"><span data-stu-id="911d7-242">Use **Intellitrace** to collect a log of calls and events from a release server.</span></span> <span data-ttu-id="911d7-243">V tématu [ladění publikované Cloudová služba se IntelliTrace a Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="911d7-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="911d7-244">Použití **Azure Diagnostics** protokolovat podrobné informace o spouštění kódu v rámci role, zda role běží ve vývojovém prostředí nebo v Azure.</span><span class="sxs-lookup"><span data-stu-id="911d7-244">Use **Azure Diagnostics** to log detailed information from code running within roles, whether the roles are running in the development environment or in Azure.</span></span> <span data-ttu-id="911d7-245">V tématu [shromažďování dat protokolování pomocí Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="911d7-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>
