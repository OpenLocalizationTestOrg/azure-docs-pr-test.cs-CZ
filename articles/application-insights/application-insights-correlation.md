---
title: aaaAzure Application Insights Telemetrie korelace | Microsoft Docs
description: Application Insights telemetrie korelace
services: application-insights
documentationcenter: .net
author: SergeyKanzhelev
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 04/25/2017
ms.author: bwren
ms.openlocfilehash: 3ed8c589d237cac5daceac939ca893b7d81a2967
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="telemetry-correlation-in-application-insights"></a><span data-ttu-id="a9014-103">Korelace telemetrii ve službě Application Insights</span><span class="sxs-lookup"><span data-stu-id="a9014-103">Telemetry correlation in Application Insights</span></span>

<span data-ttu-id="a9014-104">Hello world malých služeb každé logické operace vyžaduje práci v různých komponentách služby hello.</span><span class="sxs-lookup"><span data-stu-id="a9014-104">In hello world of micro services, every logical operation requires work done in various components of hello service.</span></span> <span data-ttu-id="a9014-105">Každou z těchto součástí samostatně agentem lze sledovat [Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a9014-105">Each of these components can be separately monitored by [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="a9014-106">součást aplikace webové Hello komunikuje s pověřeními uživatele toovalidate součást zprostředkovatele ověřování a s hello rozhraní API součásti tooget data pro vizualizaci.</span><span class="sxs-lookup"><span data-stu-id="a9014-106">hello web app component communicates with authentication provider component toovalidate user credentials, and with hello API component tooget data for visualization.</span></span> <span data-ttu-id="a9014-107">součást rozhraní API Hello následně můžete zadávat dotazy na data z jiných služeb a použití komponent, poskytovatel mezipaměti a oznámit fakturace součásti hello o toto volání.</span><span class="sxs-lookup"><span data-stu-id="a9014-107">hello API component in its turn can query data from other services and use cache-provider components and notify hello billing component about this call.</span></span> <span data-ttu-id="a9014-108">Application Insights podporuje distribuované telemetrie korelace.</span><span class="sxs-lookup"><span data-stu-id="a9014-108">Application Insights supports distributed telemetry correlation.</span></span> <span data-ttu-id="a9014-109">Umožňuje vám toodetect, která komponenta je zodpovědná za selhání nebo snížení výkonu.</span><span class="sxs-lookup"><span data-stu-id="a9014-109">It allows you toodetect which component is responsible for failures or performance degradation.</span></span>

<span data-ttu-id="a9014-110">Tento článek vysvětluje hello datový model používá telemetrie Application Insights toocorrelate poslal více součástí.</span><span class="sxs-lookup"><span data-stu-id="a9014-110">This article explains hello data model used by Application Insights toocorrelate telemetry sent by multiple components.</span></span> <span data-ttu-id="a9014-111">Pokrývá hello kontextu šíření technik a protokoly.</span><span class="sxs-lookup"><span data-stu-id="a9014-111">It covers hello context propagation techniques and protocols.</span></span> <span data-ttu-id="a9014-112">Také vysvětluje hello implementace hello korelace konceptů na různé jazyky a platformy.</span><span class="sxs-lookup"><span data-stu-id="a9014-112">It also covers hello implementation of hello correlation concepts on different languages and platforms.</span></span>

## <a name="telemetry-correlation-data-model"></a><span data-ttu-id="a9014-113">Telemetrie korelace datový model</span><span class="sxs-lookup"><span data-stu-id="a9014-113">Telemetry correlation data model</span></span>

<span data-ttu-id="a9014-114">Definuje Application Insights [datový model](application-insights-data-model.md) pro distribuované telemetrie korelace.</span><span class="sxs-lookup"><span data-stu-id="a9014-114">Application Insights defines a [data model](application-insights-data-model.md) for distributed telemetry correlation.</span></span> <span data-ttu-id="a9014-115">tooassociate telemetrie s hello logický provoz, každá položka telemetrie má kontext pole s názvem `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="a9014-115">tooassociate telemetry with hello logical operation, every telemetry item has a context field called `operation_Id`.</span></span> <span data-ttu-id="a9014-116">Tento identifikátor je sdílen každá položka telemetrie v hello distribuované trasování.</span><span class="sxs-lookup"><span data-stu-id="a9014-116">This identifier is shared by every telemetry item in hello distributed trace.</span></span> <span data-ttu-id="a9014-117">Proto i přes ztrátu telemetrie z jedné vrstvy stále můžete přidružit telemetrie hlášené ostatní součásti.</span><span class="sxs-lookup"><span data-stu-id="a9014-117">So even with loss of telemetry from a single layer you still can associate telemetry reported by other components.</span></span>

<span data-ttu-id="a9014-118">Distribuované logický provoz se obvykle skládá z sady menší operací - požadavků zpracovaných pomocí jedné z komponenty hello.</span><span class="sxs-lookup"><span data-stu-id="a9014-118">Distributed logical operation typically consists of a set of smaller operations - requests processed by one of hello components.</span></span> <span data-ttu-id="a9014-119">Tyto operace jsou definovány [požadavku telemetrie](application-insights-data-model-request-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="a9014-119">Those operations are defined by [request telemetry](application-insights-data-model-request-telemetry.md).</span></span> <span data-ttu-id="a9014-120">Každý požadavek telemetrie má svou vlastní `id` identifikující globálně jedinečné.</span><span class="sxs-lookup"><span data-stu-id="a9014-120">Every request telemetry has its own `id` that uniquely globally identifies it.</span></span> <span data-ttu-id="a9014-121">A všechny telemetrie – trasování, výjimky, atd. s touto žádostí měli nastavit hello `operation_parentId` toohello hodnotu hello požadavku `id`.</span><span class="sxs-lookup"><span data-stu-id="a9014-121">And all telemetry - traces, exceptions, etc. associated with this request should set hello `operation_parentId` toohello value of hello request `id`.</span></span>

<span data-ttu-id="a9014-122">Každé odchozí operace jako součást tooanother volání http reprezentována [telemetrických závislostí](application-insights-data-model-dependency-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="a9014-122">Every outgoing operation like http call tooanother component represented by [dependency telemetry](application-insights-data-model-dependency-telemetry.md).</span></span> <span data-ttu-id="a9014-123">Telemetrických závislostí také definuje vlastní `id` , je globálně jedinečný.</span><span class="sxs-lookup"><span data-stu-id="a9014-123">Dependency telemetry also defines its own `id` that is globally unique.</span></span> <span data-ttu-id="a9014-124">Požadavek telemetrie, iniciovaná toto volání závislostí použije jako `operation_parentId`.</span><span class="sxs-lookup"><span data-stu-id="a9014-124">Request telemetry, initiated by this dependency call, uses it as `operation_parentId`.</span></span>

<span data-ttu-id="a9014-125">Můžete vytvořit zobrazení hello pomocí distribuovaných logický provoz `operation_Id`, `operation_parentId`, a `request.id` s `dependency.id`.</span><span class="sxs-lookup"><span data-stu-id="a9014-125">You can build hello view of distributed logical operation using `operation_Id`, `operation_parentId`, and `request.id` with `dependency.id`.</span></span> <span data-ttu-id="a9014-126">Tato pole definovat také hello příčiny pořadí volání telemetrie.</span><span class="sxs-lookup"><span data-stu-id="a9014-126">Those fields also define hello causality order of telemetry calls.</span></span>

<span data-ttu-id="a9014-127">V prostředí malých služeb může trasování ze součásti přejděte různých úložných toohello.</span><span class="sxs-lookup"><span data-stu-id="a9014-127">In micro services environment, traces from components may go toohello different storages.</span></span> <span data-ttu-id="a9014-128">Všechny komponenty může mít svůj vlastní klíč instrumentace ve službě Application Insights.</span><span class="sxs-lookup"><span data-stu-id="a9014-128">Every component may have its own instrumentation key in Application Insights.</span></span> <span data-ttu-id="a9014-129">tooget telemetrie hello logické operaci, musíte tooquery data z každé úložiště.</span><span class="sxs-lookup"><span data-stu-id="a9014-129">tooget telemetry for hello logical operation, you need tooquery data from every storage.</span></span> <span data-ttu-id="a9014-130">Po velký počet úložných potřebujete toohave nápovědu, ve kterém toolook Další.</span><span class="sxs-lookup"><span data-stu-id="a9014-130">When number of storages is huge, you need toohave a hint on where toolook next.</span></span>

<span data-ttu-id="a9014-131">Application Insights datový model definuje dvě pole toosolve tohoto problému: `request.source` a `dependency.target`.</span><span class="sxs-lookup"><span data-stu-id="a9014-131">Application Insights data model defines two fields toosolve this problem: `request.source` and `dependency.target`.</span></span> <span data-ttu-id="a9014-132">první pole Hello identifikuje hello komponenty, která hello závislostí žádost iniciovala a hello druhý identifikuje která komponenta vrátila odpověď hello hello závislostí volání.</span><span class="sxs-lookup"><span data-stu-id="a9014-132">hello first field identifies hello component that initiated hello dependency request, and hello second identifies which component returned hello response of hello dependency call.</span></span>


## <a name="example"></a><span data-ttu-id="a9014-133">Příklad</span><span class="sxs-lookup"><span data-stu-id="a9014-133">Example</span></span>

<span data-ttu-id="a9014-134">Podívejme se na příklad ceny STOCK aplikace zobrazuje hello aktuální trhu ceny akcie pomocí hello externí rozhraní API volat rozhraní API akcií.</span><span class="sxs-lookup"><span data-stu-id="a9014-134">Let's take an example of an application STOCK PRICES showing hello current market price of a stock using hello external API called STOCKS API.</span></span> <span data-ttu-id="a9014-135">Hello STOCK ceny aplikace má stránku `Stock page` otevřeli pomocí hello klienta webové prohlížeče `GET /Home/Stock`.</span><span class="sxs-lookup"><span data-stu-id="a9014-135">hello STOCK PRICES application has a page `Stock page` opened by hello client web browser using `GET /Home/Stock`.</span></span> <span data-ttu-id="a9014-136">dotazy aplikace Hello hello STOCK rozhraní API pomocí volání protokolu HTTP `GET /api/stock/value`.</span><span class="sxs-lookup"><span data-stu-id="a9014-136">hello application queries hello STOCK API by using an HTTP call `GET /api/stock/value`.</span></span>

<span data-ttu-id="a9014-137">Můžete analyzovat výsledné telemetrie spuštění dotazu:</span><span class="sxs-lookup"><span data-stu-id="a9014-137">You can analyze resulting telemetry running a query:</span></span>

```
(requests | union dependencies | union pageViews) 
| where operation_Id == "STYz"
| project timestamp, itemType, name, id, operation_ParentId, operation_Id
```

<span data-ttu-id="a9014-138">V hello výsledek zobrazení, Všimněte si, že všechny položky telemetrie sdílet kořenovou složku hello `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="a9014-138">In hello result view note that all telemetry items share hello root `operation_Id`.</span></span> <span data-ttu-id="a9014-139">Při volání ajax provedené ze stránky hello – nové jedinečné id `qJSXU` telemetrických závislostí přiřazené toohello a stránkové zobrazení na id slouží jako `operation_ParentId`.</span><span class="sxs-lookup"><span data-stu-id="a9014-139">When ajax call made from hello page - new unique id `qJSXU` is assigned toohello dependency telemetry and pageView's id is used as `operation_ParentId`.</span></span> <span data-ttu-id="a9014-140">Dále požadavek serveru používá rozhraní ajax na id jako `operation_ParentId`atd.</span><span class="sxs-lookup"><span data-stu-id="a9014-140">In turn server request uses ajax's id as `operation_ParentId`, etc.</span></span>

| <span data-ttu-id="a9014-141">Typ položky</span><span class="sxs-lookup"><span data-stu-id="a9014-141">itemType</span></span>   | <span data-ttu-id="a9014-142">jméno</span><span class="sxs-lookup"><span data-stu-id="a9014-142">name</span></span>                      | <span data-ttu-id="a9014-143">id</span><span class="sxs-lookup"><span data-stu-id="a9014-143">id</span></span>           | <span data-ttu-id="a9014-144">operation_ParentId</span><span class="sxs-lookup"><span data-stu-id="a9014-144">operation_ParentId</span></span> | <span data-ttu-id="a9014-145">operation_Id</span><span class="sxs-lookup"><span data-stu-id="a9014-145">operation_Id</span></span> |
|------------|---------------------------|--------------|--------------------|--------------|
| <span data-ttu-id="a9014-146">Stránkové zobrazení</span><span class="sxs-lookup"><span data-stu-id="a9014-146">pageView</span></span>   | <span data-ttu-id="a9014-147">Uložené stránky</span><span class="sxs-lookup"><span data-stu-id="a9014-147">Stock page</span></span>                |              | <span data-ttu-id="a9014-148">STYz</span><span class="sxs-lookup"><span data-stu-id="a9014-148">STYz</span></span>               | <span data-ttu-id="a9014-149">STYz</span><span class="sxs-lookup"><span data-stu-id="a9014-149">STYz</span></span>         |
| <span data-ttu-id="a9014-150">závislosti</span><span class="sxs-lookup"><span data-stu-id="a9014-150">dependency</span></span> | <span data-ttu-id="a9014-151">/ Home GET/Stock</span><span class="sxs-lookup"><span data-stu-id="a9014-151">GET /Home/Stock</span></span>           | <span data-ttu-id="a9014-152">qJSXU</span><span class="sxs-lookup"><span data-stu-id="a9014-152">qJSXU</span></span>        | <span data-ttu-id="a9014-153">STYz</span><span class="sxs-lookup"><span data-stu-id="a9014-153">STYz</span></span>               | <span data-ttu-id="a9014-154">STYz</span><span class="sxs-lookup"><span data-stu-id="a9014-154">STYz</span></span>         |
| <span data-ttu-id="a9014-155">Požadavek</span><span class="sxs-lookup"><span data-stu-id="a9014-155">request</span></span>    | <span data-ttu-id="a9014-156">Domovské GET/Stock</span><span class="sxs-lookup"><span data-stu-id="a9014-156">GET Home/Stock</span></span>            | <span data-ttu-id="a9014-157">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="a9014-157">KqKwlrSt9PA=</span></span> | <span data-ttu-id="a9014-158">qJSXU</span><span class="sxs-lookup"><span data-stu-id="a9014-158">qJSXU</span></span>              | <span data-ttu-id="a9014-159">STYz</span><span class="sxs-lookup"><span data-stu-id="a9014-159">STYz</span></span>         |
| <span data-ttu-id="a9014-160">závislosti</span><span class="sxs-lookup"><span data-stu-id="a9014-160">dependency</span></span> | <span data-ttu-id="a9014-161">ZÍSKAT /api/stock/value</span><span class="sxs-lookup"><span data-stu-id="a9014-161">GET /api/stock/value</span></span>      | <span data-ttu-id="a9014-162">bBrf2L7mm2g =</span><span class="sxs-lookup"><span data-stu-id="a9014-162">bBrf2L7mm2g=</span></span> | <span data-ttu-id="a9014-163">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="a9014-163">KqKwlrSt9PA=</span></span>       | <span data-ttu-id="a9014-164">STYz</span><span class="sxs-lookup"><span data-stu-id="a9014-164">STYz</span></span>         |

<span data-ttu-id="a9014-165">Nyní když hello volání `GET /api/stock/value` provedené externí služba tooan chcete tooknow hello identitu tohoto serveru.</span><span class="sxs-lookup"><span data-stu-id="a9014-165">Now when hello call `GET /api/stock/value` made tooan external service you want tooknow hello identity of that server.</span></span> <span data-ttu-id="a9014-166">Abyste mohli nastavit `dependency.target` pole správně.</span><span class="sxs-lookup"><span data-stu-id="a9014-166">So you can set `dependency.target` field appropriately.</span></span> <span data-ttu-id="a9014-167">Když hello externí služba nepodporuje monitorování - `target` nastavena toohello název hostitele služby hello jako `stock-prices-api.com`.</span><span class="sxs-lookup"><span data-stu-id="a9014-167">When hello external service does not support monitoring - `target` is set toohello host name of hello service like `stock-prices-api.com`.</span></span> <span data-ttu-id="a9014-168">Ale pokud služby identifikuje vrácením i předdefinovanou hlavičky protokolu HTTP - `target` obsahuje hello identitu služby, který umožňuje trasování toobuild distributed Application Insights dotazováním telemetrie z dané služby.</span><span class="sxs-lookup"><span data-stu-id="a9014-168">However if that service identifies itself by returning a predefined HTTP header - `target` contains hello service identity that allows Application Insights toobuild distributed trace by querying telemetry from that service.</span></span> 

## <a name="correlation-headers"></a><span data-ttu-id="a9014-169">Korelace hlavičky</span><span class="sxs-lookup"><span data-stu-id="a9014-169">Correlation headers</span></span>

<span data-ttu-id="a9014-170">Pracujeme na RFC návrh hello [korelace protokolu HTTP](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span><span class="sxs-lookup"><span data-stu-id="a9014-170">We are working on RFC proposal for hello [correlation HTTP protocol](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span></span> <span data-ttu-id="a9014-171">Tento návrh definuje dvě hlavičky:</span><span class="sxs-lookup"><span data-stu-id="a9014-171">This proposal defines two headers:</span></span>

- <span data-ttu-id="a9014-172">`Request-Id`provádění hello globálně jedinečné id hello volání</span><span class="sxs-lookup"><span data-stu-id="a9014-172">`Request-Id` carry hello globally unique id of hello call</span></span>
- <span data-ttu-id="a9014-173">`Correlation-Context`-provádění hello název hodnota páry kolekci vlastností hello distribuované trasování</span><span class="sxs-lookup"><span data-stu-id="a9014-173">`Correlation-Context` - carry hello name value pairs collection of hello distributed trace properties</span></span>

<span data-ttu-id="a9014-174">Hello standardní také definuje dvě schémata `Request-Id` generování - centralizovaného a hierarchického.</span><span class="sxs-lookup"><span data-stu-id="a9014-174">hello standard also defines two schemas of `Request-Id` generation - flat and hierarchical.</span></span> <span data-ttu-id="a9014-175">S hello ploché schématu, je dobře známé `Id` klíč pro hello `Correlation-Context` kolekce.</span><span class="sxs-lookup"><span data-stu-id="a9014-175">With hello flat schema, there is a well-known `Id` key defined for hello `Correlation-Context` collection.</span></span>

<span data-ttu-id="a9014-176">Application Insights definuje hello [rozšíření](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) pro korelaci hello protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="a9014-176">Application Insights defines hello [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) for hello correlation HTTP protocol.</span></span> <span data-ttu-id="a9014-177">Používá `Request-Context` název toopropagate hello kolekci vlastností, které jsou používány bezprostředního volajícího hello nebo volaný páry hodnota.</span><span class="sxs-lookup"><span data-stu-id="a9014-177">It uses `Request-Context` name value pairs toopropagate hello collection of properties used by hello immediate caller or callee.</span></span> <span data-ttu-id="a9014-178">Application Insights SDK používá tato záhlaví tooset `dependency.target` a `request.source` pole.</span><span class="sxs-lookup"><span data-stu-id="a9014-178">Application Insights SDK uses this header tooset `dependency.target` and `request.source` fields.</span></span>

## <a name="open-tracing-and-application-insights"></a><span data-ttu-id="a9014-179">Otevřete trasování a Application Insights</span><span class="sxs-lookup"><span data-stu-id="a9014-179">Open tracing and Application Insights</span></span>

<span data-ttu-id="a9014-180">[Otevřete trasování](http://opentracing.io/) a data modelů vypadá Application Insights</span><span class="sxs-lookup"><span data-stu-id="a9014-180">[Open Tracing](http://opentracing.io/) and Application Insights data models looks</span></span> 

- <span data-ttu-id="a9014-181">`request`, `pageView` mapuje příliš**rozpětí** s`span.kind = server`</span><span class="sxs-lookup"><span data-stu-id="a9014-181">`request`, `pageView` maps too**Span** with `span.kind = server`</span></span>
- <span data-ttu-id="a9014-182">`dependency`mapuje příliš**rozpětí** s`span.kind = client`</span><span class="sxs-lookup"><span data-stu-id="a9014-182">`dependency` maps too**Span** with `span.kind = client`</span></span>
- <span data-ttu-id="a9014-183">`id`nástroje `request` a `dependency` mapuje příliš**Span.Id**</span><span class="sxs-lookup"><span data-stu-id="a9014-183">`id` of a `request` and `dependency` maps too**Span.Id**</span></span>
- <span data-ttu-id="a9014-184">`operation_Id`mapuje příliš**TraceId**</span><span class="sxs-lookup"><span data-stu-id="a9014-184">`operation_Id` maps too**TraceId**</span></span>
- <span data-ttu-id="a9014-185">`operation_ParentId`mapuje příliš**odkaz** typu`ChileOf`</span><span class="sxs-lookup"><span data-stu-id="a9014-185">`operation_ParentId` maps too**Reference** of type `ChileOf`</span></span>

<span data-ttu-id="a9014-186">V tématu [datový model](application-insights-data-model.md) Application Insights typy a data modelu.</span><span class="sxs-lookup"><span data-stu-id="a9014-186">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>

<span data-ttu-id="a9014-187">V tématu [specifikace](https://github.com/opentracing/specification/blob/master/specification.md) a [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) definice otevřít trasování konceptů.</span><span class="sxs-lookup"><span data-stu-id="a9014-187">See [specification](https://github.com/opentracing/specification/blob/master/specification.md) and [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) for definitions of Open Tracing concepts.</span></span>


## <a name="telemetry-correlation-in-net"></a><span data-ttu-id="a9014-188">Korelace telemetrie v rozhraní .NET</span><span class="sxs-lookup"><span data-stu-id="a9014-188">Telemetry correlation in .NET</span></span>

<span data-ttu-id="a9014-189">V čase .NET definované počet způsoby toocorrelate telemetrie a diagnostické protokoly.</span><span class="sxs-lookup"><span data-stu-id="a9014-189">Over time .NET defined number of ways toocorrelate telemetry and diagnostics logs.</span></span> <span data-ttu-id="a9014-190">Je `System.Diagnostics.CorrelationManager` povolení tootrack [LogicalOperationStack a aktivity](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9014-190">There is `System.Diagnostics.CorrelationManager` allowing tootrack [LogicalOperationStack and ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span></span> <span data-ttu-id="a9014-191">`System.Diagnostics.Tracing.EventSource`a definovat Windows trasování událostí pro Windows hello metoda [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9014-191">`System.Diagnostics.Tracing.EventSource` and Windows ETW define hello method [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span></span> <span data-ttu-id="a9014-192">`ILogger`používá [protokolu obory](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span><span class="sxs-lookup"><span data-stu-id="a9014-192">`ILogger` uses [Log Scopes](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span></span> <span data-ttu-id="a9014-193">WCF a Http přenosová nahoru "aktuální" šíření kontextu.</span><span class="sxs-lookup"><span data-stu-id="a9014-193">WCF and Http wire up "current" context propagation.</span></span>

<span data-ttu-id="a9014-194">Ale tyto metody nepomohly podporu automatického distribuované trasování.</span><span class="sxs-lookup"><span data-stu-id="a9014-194">However those methods didn't enable automatic distributed tracing support.</span></span> <span data-ttu-id="a9014-195">`DiagnosticsSource`je způsob, jak toosupport automatické mezi počítači korelace.</span><span class="sxs-lookup"><span data-stu-id="a9014-195">`DiagnosticsSource` is a way toosupport automatic cross machine correlation.</span></span> <span data-ttu-id="a9014-196">Knihovny .NET podporuje diagnostiky zdrojů a povolit automatické křížové počítač šíření hello korelace kontextu prostřednictvím přenosu hello jako http.</span><span class="sxs-lookup"><span data-stu-id="a9014-196">.NET libraries support Diagnostics Source and allow automatic cross machine propagation of hello correlation context via hello transport like http.</span></span>

<span data-ttu-id="a9014-197">Hello [Průvodce tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) ve zdroji diagnostiky vysvětluje základy hello sledování aktivit.</span><span class="sxs-lookup"><span data-stu-id="a9014-197">hello [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) in Diagnostics Source explains hello basics of tracking Activities.</span></span> 

<span data-ttu-id="a9014-198">Jádro ASP.NET 2.0 podporuje extrakce hlaviček protokolu Http a spouštění hello nová aktivita.</span><span class="sxs-lookup"><span data-stu-id="a9014-198">ASP.NET Core 2.0 supports extraction of Http Headers and starting hello new Activity.</span></span> 

<span data-ttu-id="a9014-199">`System.Net.HttpClient`Počáteční verze `<fill in>` podporuje automatické vkládání hello korelace hlavičky protokolu Http a sledování volání protokolu http hello jako aktivita.</span><span class="sxs-lookup"><span data-stu-id="a9014-199">`System.Net.HttpClient` starting version `<fill in>` supports automatic injection of hello correlation Http Headers and tracking hello http call as an Activity.</span></span>

<span data-ttu-id="a9014-200">Je-li nový modul Http [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) pro hello ASP.NET Classic.</span><span class="sxs-lookup"><span data-stu-id="a9014-200">There is a new Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) for hello ASP.NET Classic.</span></span> <span data-ttu-id="a9014-201">Tento modul implementuje pomocí DiagnosticsSource korelace telemetrie.</span><span class="sxs-lookup"><span data-stu-id="a9014-201">This module implements telemetry correlation using DiagnosticsSource.</span></span> <span data-ttu-id="a9014-202">Spustí aktivita podle příchozí hlavičky žádosti.</span><span class="sxs-lookup"><span data-stu-id="a9014-202">It starts activity based on incoming request headers.</span></span> <span data-ttu-id="a9014-203">Korelaci také telemetrie z hello různých fází zpracování žádosti.</span><span class="sxs-lookup"><span data-stu-id="a9014-203">It also correlates telemetry from hello different stages of request processing.</span></span> <span data-ttu-id="a9014-204">I pro hello případech, kdy jednotlivé fáze zpracování IIS běží na různých spravovat vláken.</span><span class="sxs-lookup"><span data-stu-id="a9014-204">Even for hello cases when every stage of IIS processing runs on a different manage threads.</span></span>

<span data-ttu-id="a9014-205">Application Insights SDK počáteční verze `2.4.0-beta1` používá DiagnosticsSource a aktivity toocollect telemetrie a přidružte ji k aktuální aktivita hello.</span><span class="sxs-lookup"><span data-stu-id="a9014-205">Application Insights SDK starting version `2.4.0-beta1` uses DiagnosticsSource and Activity toocollect telemetry and associate it with hello current activity.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="a9014-206">Další kroky</span><span class="sxs-lookup"><span data-stu-id="a9014-206">Next steps</span></span>

- [<span data-ttu-id="a9014-207">Psát vlastní telemetrii</span><span class="sxs-lookup"><span data-stu-id="a9014-207">Write custom telemetry</span></span>](app-insights-api-custom-events-metrics.md)
- <span data-ttu-id="a9014-208">Zařadit všechny součásti služby malých v Application Insights.</span><span class="sxs-lookup"><span data-stu-id="a9014-208">Onboard all components of your micro service on Application Insights.</span></span> <span data-ttu-id="a9014-209">Podívejte se na [podporované platformy](app-insights-platforms.md).</span><span class="sxs-lookup"><span data-stu-id="a9014-209">Check out [supported platforms](app-insights-platforms.md).</span></span>
- <span data-ttu-id="a9014-210">V tématu [datový model](application-insights-data-model.md) Application Insights typy a data modelu.</span><span class="sxs-lookup"><span data-stu-id="a9014-210">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>
- <span data-ttu-id="a9014-211">Zjistěte, jak příliš[rozšířit a filtrovat telemetrie](app-insights-api-filtering-sampling.md).</span><span class="sxs-lookup"><span data-stu-id="a9014-211">Learn how too[extend and filter telemetry](app-insights-api-filtering-sampling.md).</span></span>
