---
title: "Řešení potíží s Azure Storage s diagnostiky & Message Analyzer | Microsoft Docs"
description: "Kurz demonstraci začátku do konce řešení potíží s Azure Storage Analytics, AzCopy a Microsoft Message Analyzer"
services: storage
documentationcenter: dotnet
author: robinsh
manager: timlt
ms.assetid: 643372a3-1c07-4e88-b4ef-042512a43086
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 03/15/2017
ms.author: robinsh
ms.openlocfilehash: e2b739772f98a9c23253c58bb2bbd3560814ccaa
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="end-to-end-troubleshooting-using-azure-storage-metrics-and-logging-azcopy-and-message-analyzer"></a><span data-ttu-id="f6eaf-103">Poradce při potížích začátku do konce pomocí metrik Azure Storage a protokolování, AzCopy a Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="f6eaf-103">End-to-End Troubleshooting using Azure Storage metrics and logging, AzCopy, and Message Analyzer</span></span>
[!INCLUDE [storage-selector-portal-e2e-troubleshooting](../../includes/storage-selector-portal-e2e-troubleshooting.md)]

<span data-ttu-id="f6eaf-104">Diagnostika a řešení potíží se klíče dovednosti pro vytváření a podpora klientských aplikací s Microsoft Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-104">Diagnosing and troubleshooting is a key skill for building and supporting client applications with Microsoft Azure Storage.</span></span> <span data-ttu-id="f6eaf-105">Z důvodu distribuovaná povaha aplikaci Azure může být složitější než v tradiční prostředích diagnostice a řešení potíží s chybami a problémy s výkonem.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-105">Due to the distributed nature of an Azure application, diagnosing and troubleshooting errors and performance issues may be more complex than in traditional environments.</span></span>

<span data-ttu-id="f6eaf-106">V tomto kurzu jsme ukazují, jak identifikovat určitým chybám, které mohou ovlivnit výkon a řešení těchto chyb od začátku do konce pomocí nástroje poskytované společností Microsoft a Azure Storage, chcete-li optimalizovat klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-106">In this tutorial, we demonstrate how to identify certain errors that may affect performance, and troubleshoot those errors from end-to-end using tools provided by Microsoft and Azure Storage, in order to optimize the client application.</span></span>

<span data-ttu-id="f6eaf-107">V tomto kurzu poskytuje praktické zkoumání scénáře řešení potíží začátku do konce.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-107">This tutorial provides a hands-on exploration of an end-to-end troubleshooting scenario.</span></span> <span data-ttu-id="f6eaf-108">Podrobné koncepční informace pro řešení potíží s aplikacemi Azure storage najdete v tématu [monitorování, Diagnostika a řešení Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-108">For an in-depth conceptual guide to troubleshooting Azure storage applications, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="tools-for-troubleshooting-azure-storage-applications"></a><span data-ttu-id="f6eaf-109">Nástroje pro řešení potíží s aplikacemi Azure Storage</span><span class="sxs-lookup"><span data-stu-id="f6eaf-109">Tools for troubleshooting Azure Storage applications</span></span>
<span data-ttu-id="f6eaf-110">Řešení potíží s klientským aplikacím pomocí služby Microsoft Azure Storage, můžete kombinaci nástroje k určení, kdy došlo k problému a co může být příčinou problému.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-110">To troubleshoot client applications using Microsoft Azure Storage, you can use a combination of tools to determine when an issue has occurred and what the cause of the problem may be.</span></span> <span data-ttu-id="f6eaf-111">Mezi tyto nástroje patří:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-111">These tools include:</span></span>

* <span data-ttu-id="f6eaf-112">**Azure Storage Analytics**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-112">**Azure Storage Analytics**.</span></span> <span data-ttu-id="f6eaf-113">[Azure Storage Analytics](/rest/api/storageservices/Storage-Analytics) poskytuje metriky a protokolování pro Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-113">[Azure Storage Analytics](/rest/api/storageservices/Storage-Analytics) provides metrics and logging for Azure Storage.</span></span>
  
  * <span data-ttu-id="f6eaf-114">**Metriky úložiště** sleduje transakce metriky a metriky kapacity pro váš účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-114">**Storage metrics** tracks transaction metrics and capacity metrics for your storage account.</span></span> <span data-ttu-id="f6eaf-115">Pomocí metriky, můžete určit, jak vaše aplikace pracuje podle celou řadu různých opatření.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-115">Using metrics, you can determine how your application is performing according to a variety of different measures.</span></span> <span data-ttu-id="f6eaf-116">V tématu [schématu tabulky metriky Analytics úložiště](/rest/api/storageservices/Storage-Analytics-Metrics-Table-Schema) Další informace o typech metriky sledován pomocí funkce Storage Analytics.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-116">See [Storage Analytics Metrics Table Schema](/rest/api/storageservices/Storage-Analytics-Metrics-Table-Schema) for more information about the types of metrics tracked by Storage Analytics.</span></span>
  * <span data-ttu-id="f6eaf-117">**Protokolování úložiště** protokoluje každý požadavek do služby Azure Storage na straně serveru protokolu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-117">**Storage logging** logs each request to the Azure Storage services to a server-side log.</span></span> <span data-ttu-id="f6eaf-118">Protokol sleduje podrobná data pro každý požadavek, včetně operaci provést, stav operace a informace o latenci.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-118">The log tracks detailed data for each request, including the operation performed, the status of the operation, and latency information.</span></span> <span data-ttu-id="f6eaf-119">V tématu [úložiště analýzy protokolů formátu](/rest/api/storageservices/Storage-Analytics-Log-Format) Další informace o požadavku a odpovědi data, která jsou zapsána do protokolů analytika úložiště.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-119">See [Storage Analytics Log Format](/rest/api/storageservices/Storage-Analytics-Log-Format) for more information about the request and response data that is written to the logs by Storage Analytics.</span></span>

> [!NOTE]
> <span data-ttu-id="f6eaf-120">Účty úložiště s typem replikace z Zónově redundantní úložiště (ZRS) nemají metriky nebo možnosti protokolování v tuto chvíli povolena.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-120">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have the metrics or logging capability enabled at this time.</span></span> 
> 
> 

* <span data-ttu-id="f6eaf-121">**Portál Azure**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-121">**Azure portal**.</span></span> <span data-ttu-id="f6eaf-122">Můžete nakonfigurovat protokolování a metriky pro svůj účet úložiště [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-122">You can configure metrics and logging for your storage account in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="f6eaf-123">Můžete také zobrazit grafy, které ukazují, jak se vaše aplikace provádí v čase a konfigurovat výstrahy pro upozornění, pokud aplikace provede odlišně, než se očekávalo příslušné metriky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-123">You can also view charts and graphs that show how your application is performing over time, and configure alerts to notify you if your application performs differently than expected for a specified metric.</span></span>
  
    <span data-ttu-id="f6eaf-124">V tématu [monitorování účtu úložiště na portálu Azure](storage-monitor-storage-account.md) informace o konfiguraci monitorování na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-124">See [Monitor a storage account in the Azure portal](storage-monitor-storage-account.md) for information about configuring monitoring in the Azure portal.</span></span>
* <span data-ttu-id="f6eaf-125">**AzCopy**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-125">**AzCopy**.</span></span> <span data-ttu-id="f6eaf-126">Protokoly serveru pro Azure Storage jsou uloženy jako objekty BLOB, takže AzCopy můžete kopírovat objekty BLOB protokolu do místního adresáře pro analýzu pomocí Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-126">Server logs for Azure Storage are stored as blobs, so you can use AzCopy to copy the log blobs to a local directory for analysis using Microsoft Message Analyzer.</span></span> <span data-ttu-id="f6eaf-127">V tématu [přenos dat pomocí nástroje příkazového řádku Azcopy](storage-use-azcopy.md) Další informace o AzCopy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-127">See [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md) for more information about AzCopy.</span></span>
* <span data-ttu-id="f6eaf-128">**Microsoft Message Analyzer**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-128">**Microsoft Message Analyzer**.</span></span> <span data-ttu-id="f6eaf-129">Message Analyzer je nástroj, který využívá soubory protokolu a zobrazí data protokolu ve visual formátu, který lze snadno filtru, vyhledávání a data protokolu skupiny do užitečné sad, které můžete použít k analýze chyb a problémů s výkonem.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-129">Message Analyzer is a tool that consumes log files and displays log data in a visual format that makes it easy to filter, search, and group log data into useful sets that you can use to analyze errors and performance issues.</span></span> <span data-ttu-id="f6eaf-130">V tématu [Microsoft zpráva analyzátor operační průvodce](http://technet.microsoft.com/library/jj649776.aspx) Další informace o Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-130">See [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx) for more information about Message Analyzer.</span></span>

## <a name="about-the-sample-scenario"></a><span data-ttu-id="f6eaf-131">O ukázkovém scénáři</span><span class="sxs-lookup"><span data-stu-id="f6eaf-131">About the sample scenario</span></span>
<span data-ttu-id="f6eaf-132">V tomto kurzu podíváme na scénář, kde metrik Azure Storage udává míra nízkou procenta úspěšnosti pro aplikaci, která volá úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-132">For this tutorial, we'll examine a scenario where Azure Storage metrics indicates a low percent success rate for an application that calls Azure storage.</span></span> <span data-ttu-id="f6eaf-133">Metrika míra nízkou procenta úspěšnosti (zobrazené jako **PercentSuccess** v [portál Azure](https://portal.azure.com) a v tabulkách metriky) sleduje operace, která úspěšné, ale které vrátí stavový kód HTTP, která je větší než 299.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-133">The low percent success rate metric (shown as **PercentSuccess** in the [Azure portal](https://portal.azure.com) and in the metrics tables) tracks operations that succeed, but that return an HTTP status code that is greater than 299.</span></span> <span data-ttu-id="f6eaf-134">V souborech protokolu úložiště na straně serveru, se zaznamenávají tyto operace se stavem transakce **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-134">In the server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span> <span data-ttu-id="f6eaf-135">Další podrobnosti o metriku nízkou procenta úspěšnosti najdete v tématu [metriky ukazují nízkou PercentSuccess nebo položky protokolu analýzy mít operací s stav transakce ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-135">For more details about the low percent success metric, see [Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span></span>

<span data-ttu-id="f6eaf-136">Operace úložiště v Azure může vrátit stavové kódy HTTP větší než 299 v rámci své normální fungování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-136">Azure Storage operations may return HTTP status codes greater than 299 as part of their normal functionality.</span></span> <span data-ttu-id="f6eaf-137">Ale tyto chyby v některých případech indikovat, že může být schopné optimalizovat klientskou aplikaci pro zlepšení výkonu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-137">But these errors in some cases indicate that you may be able to optimize your client application for improved performance.</span></span>

<span data-ttu-id="f6eaf-138">V tomto scénáři popíšeme míra nízkou procenta úspěšnosti být nic nižší než 100 %.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-138">In this scenario, we'll consider a low percent success rate to be anything below 100%.</span></span> <span data-ttu-id="f6eaf-139">Můžete zvolit jiné metriky úroveň, ale podle svých potřeb.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-139">You can choose a different metric level, however, according to your needs.</span></span> <span data-ttu-id="f6eaf-140">Doporučujeme vám, že během testování vaší aplikace, vytvoříte tolerance směrného plánu pro vaše klíčové metriky výkonu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-140">We recommend that during testing of your application, you establish a baseline tolerance for your key performance metrics.</span></span> <span data-ttu-id="f6eaf-141">Například lze určit, na základě testování, že aplikace má mít míra konzistentní procenta úspěšnosti 90 % nebo 85 %.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-141">For example, you might determine, based on testing, that your application should have a consistent percent success rate of 90%, or 85%.</span></span> <span data-ttu-id="f6eaf-142">Pokud vaše data metriky ukazuje, že aplikace je odchylují od toto číslo potom můžete prozkoumat co může být příčinou zvýšení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-142">If your metrics data shows that the application is deviating from that number, then you can investigate what may be causing the increase.</span></span>

<span data-ttu-id="f6eaf-143">Pro naše vzorový scénář jsme se po jsme jste vytvořili, že procento úspěšnosti rychlost metrika je nižší než 100 %, zkontrolujte protokoly najít chybách, ke kterým korelovat k metrikám a využít a pokuste se zjistit příčinu nižší procenta úspěšnosti.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-143">For our sample scenario, once we've established that the percent success rate metric is below 100%, we will examine the logs to find the errors that correlate to the metrics, and use them to figure out what is causing the lower percent success rate.</span></span> <span data-ttu-id="f6eaf-144">Podíváme konkrétně chyby v 400 rozsahu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-144">We'll look specifically at errors in the 400 range.</span></span> <span data-ttu-id="f6eaf-145">Potom jsme budete prozkoumat přesněji chyb 404 (není nalezena).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-145">Then we'll more closely investigate 404 (Not Found) errors.</span></span>

### <a name="some-causes-of-400-range-errors"></a><span data-ttu-id="f6eaf-146">Některé příčiny chyb 400 rozsahu</span><span class="sxs-lookup"><span data-stu-id="f6eaf-146">Some causes of 400-range errors</span></span>
<span data-ttu-id="f6eaf-147">Následující příklady jsou uvedeny vzorky chybami 400 rozsah pro požadavky na Azure Blob Storage a jejich možné příčiny.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-147">The examples below shows a sampling of some 400-range errors for requests against Azure Blob Storage, and their possible causes.</span></span> <span data-ttu-id="f6eaf-148">Některé z těchto chyb, jakož i chyby v rozsahu 300 a 500 rozsahu, může přispívat k nízkou procenta úspěšnosti.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-148">Any of these errors, as well as errors in the 300 range and the 500 range, can contribute to a low percent success rate.</span></span>

<span data-ttu-id="f6eaf-149">Všimněte si, že následující seznamy daleko od dokončení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-149">Note that the lists below are far from complete.</span></span> <span data-ttu-id="f6eaf-150">V tématu [stavu a kódy chyb](http://msdn.microsoft.com/library/azure/dd179382.aspx) na webu MSDN podrobnosti o obecných chyb Azure Storage a informace o chybách, které jsou specifické pro jednotlivé služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-150">See [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) on MSDN for details about general Azure Storage errors and about errors specific to each of the storage services.</span></span>

<span data-ttu-id="f6eaf-151">**Příklady stavový kód 404 (není nalezena)**</span><span class="sxs-lookup"><span data-stu-id="f6eaf-151">**Status Code 404 (Not Found) Examples**</span></span>

<span data-ttu-id="f6eaf-152">Nastane, když operace čtení pro kontejner nebo objekt blob se nezdaří, protože nebyl nalezen objekt blob nebo kontejneru.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-152">Occurs when a read operation against a container or blob fails because the blob or container is not found.</span></span>

* <span data-ttu-id="f6eaf-153">Nastane, pokud jiný klient před tento požadavek byl odstraněn z kontejneru nebo objektů blob.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-153">Occurs if a container or blob has been deleted by another client before this request.</span></span>
* <span data-ttu-id="f6eaf-154">Nastane, pokud používáte volání rozhraní API, která vytvoří kontejner nebo objekt blob po zjišťování, zda existuje.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-154">Occurs if you are using an API call that creates the container or blob after checking whether it exists.</span></span> <span data-ttu-id="f6eaf-155">Rozhraní API CreateIfNotExists zkontrolujte volání HEAD nejprve zkontrolujte existenci kontejner nebo objekt blob; Pokud neexistuje, bude vrácena chyba 404 a pak druhý PUT Přišla žádost o zápis kontejner nebo objekt blob.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-155">The CreateIfNotExists APIs make a HEAD call first to check for the existence of the container or blob; if it does not exist, a 404 error is returned, and then a second PUT call is made to write the container or blob.</span></span>

<span data-ttu-id="f6eaf-156">**Stav 409 (konflikt) příklady kódu**</span><span class="sxs-lookup"><span data-stu-id="f6eaf-156">**Status Code 409 (Conflict) Examples**</span></span>

* <span data-ttu-id="f6eaf-157">Nastane, pokud použijete k vytvoření rozhraní API bez kontroly existence nejprve vytvořit nový kontejner nebo objekt blob, a kontejner nebo objekt blob s tímto názvem již existuje.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-157">Occurs if you use a Create API to create a new container or blob, without checking for existence first, and a container or blob with that name already exists.</span></span>
* <span data-ttu-id="f6eaf-158">Nastane, pokud se odstraňuje kontejner a pokusíte vytvořit nový kontejner se stejným názvem, před dokončením operace odstranění.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-158">Occurs if a container is being deleted, and you attempt to create a new container with the same name before the deletion operation is complete.</span></span>
* <span data-ttu-id="f6eaf-159">V případě zadejte zapůjčení na kontejner nebo objekt blob a je už existuje zapůjčení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-159">Occurs if you specify a lease on a container or blob, and there is already a lease present.</span></span>

<span data-ttu-id="f6eaf-160">**Stavový kód 412 (předběžnou se nezdařilo) příklady**</span><span class="sxs-lookup"><span data-stu-id="f6eaf-160">**Status Code 412 (Precondition Failed) Examples**</span></span>

* <span data-ttu-id="f6eaf-161">Nastane, když nebyla splněna podmínka uvedená v podmíněného záhlaví.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-161">Occurs when the condition specified by a conditional header has not been met.</span></span>
* <span data-ttu-id="f6eaf-162">Nastane, když je zadané ID zapůjčení neodpovídá ID zapůjčení na kontejner nebo objekt blob.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-162">Occurs when the lease ID specified does not match the lease ID on the container or blob.</span></span>

## <a name="generate-log-files-for-analysis"></a><span data-ttu-id="f6eaf-163">Generovat soubory protokolů pro analýzu</span><span class="sxs-lookup"><span data-stu-id="f6eaf-163">Generate log files for analysis</span></span>
<span data-ttu-id="f6eaf-164">V tomto kurzu použijeme Message Analyzer pro práci s tři různé typy souborů protokolu, i když může zvolit pro práci s některého z těchto:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-164">In this tutorial, we'll use Message Analyzer to work with three different types of log files, although you could choose to work with any one of these:</span></span>

* <span data-ttu-id="f6eaf-165">**Serveru protokolu**, který je vytvořen, když povolíte protokolování Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-165">The **server log**, which is created when you enable Azure Storage logging.</span></span> <span data-ttu-id="f6eaf-166">Protokol server obsahuje data o každé operaci volána pro jeden z služby Azure Storage – objekt blob, fronty, tabulky a soubor.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-166">The server log contains data about each operation called against one of the Azure Storage services - blob, queue, table, and file.</span></span> <span data-ttu-id="f6eaf-167">Protokol serveru určuje, kterou operaci byla volána a jaký kód stavu je vrácený, stejně jako další podrobnosti o žádosti a odpovědi.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-167">The server log indicates which operation was called and what status code was returned, as well as other details about the request and response.</span></span>
* <span data-ttu-id="f6eaf-168">**Protokolu klientů .NET**, který je vytvořen, když povolíte protokolování na straně klienta z v rámci aplikace .NET.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-168">The **.NET client log**, which is created when you enable client-side logging from within your .NET application.</span></span> <span data-ttu-id="f6eaf-169">Protokol klienta zahrnuje podrobné informace o tom, jak klient připraví žádosti a obdrží a zpracuje odpověď.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-169">The client log includes detailed information about how the client prepares the request and receives and processes the response.</span></span>
* <span data-ttu-id="f6eaf-170">**Protokolu trasování sítě HTTP**, který shromažďuje data na data požadavku a odpovědi protokolu HTTP nebo HTTPS, včetně pro operace Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-170">The **HTTP network trace log**, which collects data on HTTP/HTTPS request and response data, including for operations against Azure Storage.</span></span> <span data-ttu-id="f6eaf-171">V tomto kurzu budete se vygeneruje trasování sítě prostřednictvím Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-171">In this tutorial, we'll generate the network trace via Message Analyzer.</span></span>

### <a name="configure-server-side-logging-and-metrics"></a><span data-ttu-id="f6eaf-172">Konfigurace protokolování na straně serveru a metriky</span><span class="sxs-lookup"><span data-stu-id="f6eaf-172">Configure server-side logging and metrics</span></span>
<span data-ttu-id="f6eaf-173">První budeme potřebovat ke konfiguraci protokolování Azure Storage a metriky, tak, aby jsme data z aplikace klienta k analýze.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-173">First, we'll need to configure Azure Storage logging and metrics, so that we have data from the client application to analyze.</span></span> <span data-ttu-id="f6eaf-174">Protokolování a metriky v mnoha různými způsoby – můžete nakonfigurovat přes [portál Azure](https://portal.azure.com), pomocí prostředí PowerShell, nebo prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-174">You can configure logging and metrics in a variety of ways - via the [Azure portal](https://portal.azure.com), by using PowerShell, or programmatically.</span></span> <span data-ttu-id="f6eaf-175">V tématu [povolení metriky úložiště a zobrazení dat metrik](http://msdn.microsoft.com/library/azure/dn782843.aspx) a [povolení protokolování úložiště a přístup k datům protokolu](http://msdn.microsoft.com/library/azure/dn782840.aspx) na webu MSDN pro podrobné informace o konfiguraci protokolování a metriky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-175">See [Enabling Storage Metrics and Viewing Metrics Data](http://msdn.microsoft.com/library/azure/dn782843.aspx) and [Enabling Storage Logging and Accessing Log Data](http://msdn.microsoft.com/library/azure/dn782840.aspx) on MSDN for details about configuring logging and metrics.</span></span>

<span data-ttu-id="f6eaf-176">**Prostřednictvím portálu Azure**</span><span class="sxs-lookup"><span data-stu-id="f6eaf-176">**Via the Azure portal**</span></span>

<span data-ttu-id="f6eaf-177">Ke konfiguraci účtu pomocí protokolování a metriky pro úložiště [portál Azure](https://portal.azure.com), postupujte podle pokynů v [monitorování účtu úložiště na portálu Azure](storage-monitor-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-177">To configure logging and metrics for your storage account using the [Azure portal](https://portal.azure.com), follow the instructions at [Monitor a storage account in the Azure portal](storage-monitor-storage-account.md).</span></span>

> [!NOTE]
> <span data-ttu-id="f6eaf-178">Není možné nastavit minutu metriky pomocí portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-178">It's not possible to set minute metrics using the Azure portal.</span></span> <span data-ttu-id="f6eaf-179">Doporučujeme však, že je nastavena pro účely tohoto kurzu a zkoumání problémů s výkonem s vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-179">However, we recommend that you do set them for the purposes of this tutorial, and for investigating performance issues with your application.</span></span> <span data-ttu-id="f6eaf-180">Můžete nastavit minutu metriky pomocí prostředí PowerShell, jak je uvedeno níže, nebo programově pomocí klientské knihovny pro úložiště.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-180">You can set minute metrics using PowerShell as shown below, or programmatically using the storage client library.</span></span>
> 
> <span data-ttu-id="f6eaf-181">Všimněte si, že na portálu Azure nemůže zobrazit minutu metriky, pouze hodinové metriky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-181">Note that the Azure portal cannot display minute metrics, only hourly metrics.</span></span>
> 
> 

<span data-ttu-id="f6eaf-182">**Pomocí prostředí PowerShell**</span><span class="sxs-lookup"><span data-stu-id="f6eaf-182">**Via PowerShell**</span></span>

<span data-ttu-id="f6eaf-183">Začínáme s prostředí PowerShell pro Azure, najdete v tématu [postup instalace a konfigurace prostředí Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-183">To get started with PowerShell for Azure, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

1. <span data-ttu-id="f6eaf-184">Použití [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) rutiny Azure uživatelský účet přidat do okna prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-184">Use the [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) cmdlet to add your Azure user account to the PowerShell window:</span></span>
   
    ```powershell
    Add-AzureAccount
    ```

2. <span data-ttu-id="f6eaf-185">V **Přihlaste se k Microsoft Azure** okno, zadejte e-mailovou adresu a heslo spojené s vaším účtem.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-185">In the **Sign in to Microsoft Azure** window, type the email address and password associated with your account.</span></span> <span data-ttu-id="f6eaf-186">Azure přihlašovací údaje ověří, uloží je a pak zavře okno.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-186">Azure authenticates and saves the credential information, and then closes the window.</span></span>
3. <span data-ttu-id="f6eaf-187">Nastavte výchozí účet úložiště k účtu úložiště, který používáte pro tento kurz spuštěním těchto příkazů v okně prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-187">Set the default storage account to the storage account you are using for the tutorial by executing these commands in the PowerShell window:</span></span>
   
    ```powershell
    $SubscriptionName = 'Your subscription name'
    $StorageAccountName = 'yourstorageaccount'
    Set-AzureSubscription -CurrentStorageAccountName $StorageAccountName -SubscriptionName $SubscriptionName
    ```

4. <span data-ttu-id="f6eaf-188">Povolte protokolování úložiště pro službu objektů Blob:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-188">Enable storage logging for the Blob service:</span></span>
   
    ```powershell
    Set-AzureStorageServiceLoggingProperty -ServiceType Blob -LoggingOperations Read,Write,Delete -PassThru -RetentionDays 7 -Version 1.0
    ```

5. <span data-ttu-id="f6eaf-189">Metriky pro úložiště pro službu Blob, a zkontrolujte, zda nastavení Povolit **- MetricsType** k `Minute`:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-189">Enable storage metrics for the Blob service, making sure to set **-MetricsType** to `Minute`:</span></span>
   
    ```powershell
    Set-AzureStorageServiceMetricsProperty -ServiceType Blob -MetricsType Minute -MetricsLevel ServiceAndApi -PassThru -RetentionDays 7 -Version 1.0
    ```

### <a name="configure-net-client-side-logging"></a><span data-ttu-id="f6eaf-190">Konfigurovat protokolování klienta rozhraní .NET</span><span class="sxs-lookup"><span data-stu-id="f6eaf-190">Configure .NET client-side logging</span></span>
<span data-ttu-id="f6eaf-191">Konfigurace protokolování na straně klienta pro aplikace .NET, zapněte diagnostiku .NET v konfiguračním souboru aplikace (web.config nebo app.config).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-191">To configure client-side logging for a .NET application, enable .NET diagnostics in the application's configuration file (web.config or app.config).</span></span> <span data-ttu-id="f6eaf-192">V tématu [klienta protokolování s knihovnou klienta úložiště .NET](http://msdn.microsoft.com/library/azure/dn782839.aspx) a [klienta protokolování s úložiště Microsoft Azure SDK pro jazyk Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) na webu MSDN podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-192">See [Client-side Logging with the .NET Storage Client Library](http://msdn.microsoft.com/library/azure/dn782839.aspx) and [Client-side Logging with the Microsoft Azure Storage SDK for Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) on MSDN for details.</span></span>

<span data-ttu-id="f6eaf-193">Protokol klienta zahrnuje podrobné informace o tom, jak klient připraví žádosti a obdrží a zpracuje odpověď.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-193">The client-side log includes detailed information about how the client prepares the request and receives and processes the response.</span></span>

<span data-ttu-id="f6eaf-194">Klientská knihovna pro úložiště ukládá data protokolu na straně klienta v umístění určeném v konfiguračním souboru aplikace (web.config nebo app.config).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-194">The Storage Client Library stores client-side log data in the location specified in the application's configuration file (web.config or app.config).</span></span>

### <a name="collect-a-network-trace"></a><span data-ttu-id="f6eaf-195">Shromažďovat trasování sítě</span><span class="sxs-lookup"><span data-stu-id="f6eaf-195">Collect a network trace</span></span>
<span data-ttu-id="f6eaf-196">Message Analyzer můžete použít ke shromažďování při trasování sítě protokolu HTTP nebo HTTPS, když běží klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-196">You can use Message Analyzer to collect an HTTP/HTTPS network trace while your client application is running.</span></span> <span data-ttu-id="f6eaf-197">Message Analyzer používá [Fiddler](http://www.telerik.com/fiddler) na back-end.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-197">Message Analyzer uses [Fiddler](http://www.telerik.com/fiddler) on the back end.</span></span> <span data-ttu-id="f6eaf-198">Než budete shromažďovat trasování sítě, doporučujeme nakonfigurovat aplikaci Fiddler k zaznamenání nezašifrované komunikaci přes protokol HTTPS:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-198">Before you collect the network trace, we recommend that you configure Fiddler to record unencrypted HTTPS traffic:</span></span>

1. <span data-ttu-id="f6eaf-199">Nainstalujte [Fiddler](http://www.telerik.com/download/fiddler).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-199">Install [Fiddler](http://www.telerik.com/download/fiddler).</span></span>
2. <span data-ttu-id="f6eaf-200">Spusťte aplikaci Fiddler.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-200">Launch Fiddler.</span></span>
3. <span data-ttu-id="f6eaf-201">Vyberte **nástroje | Možnosti Fiddler**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-201">Select **Tools | Fiddler Options**.</span></span>
4. <span data-ttu-id="f6eaf-202">V dialogovém okně Možnosti ověřte, že **zaznamenat umožňuje připojení HTTPS** a **dešifrovat provoz HTTPS** jsou obě vybrané, jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-202">In the Options dialog, ensure that **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** are both selected, as shown below.</span></span>

![Konfigurace možností Fiddler](./media/storage-e2e-troubleshooting/fiddler-options-1.png)

<span data-ttu-id="f6eaf-204">Pro tento kurz shromažďovat a uložit síťové trasování nejprve Message Analyzer a pak vytvořit relaci analysis k analýze trasování a protokol.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-204">For the tutorial, collect and save a network trace first in Message Analyzer, then create an analysis session to analyze the trace and the logs.</span></span> <span data-ttu-id="f6eaf-205">Chcete-li shromažďovat trasování sítě v Message Analyzer:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-205">To collect a network trace in Message Analyzer:</span></span>

1. <span data-ttu-id="f6eaf-206">V Message Analyzer, vyberte **souboru | Rychlé trasování | Bez šifrování HTTPS**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-206">In Message Analyzer, select **File | Quick Trace | Unencrypted HTTPS**.</span></span>
2. <span data-ttu-id="f6eaf-207">Trasování bude zahájeno okamžitě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-207">The trace will begin immediately.</span></span> <span data-ttu-id="f6eaf-208">Vyberte **Zastavit** tak, že jsme ho nakonfigurovat pro přenosy dat úložiště trasování pouze Zastavit trasování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-208">Select **Stop** to stop the trace so that we can configure it to trace storage traffic only.</span></span>
3. <span data-ttu-id="f6eaf-209">Vyberte **upravit** Upravit relace trasování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-209">Select **Edit** to edit the tracing session.</span></span>
4. <span data-ttu-id="f6eaf-210">Vyberte **konfigurace** odkaz na pravé straně **Microsoft-Pef-WebProxy** zprostředkovatele trasování událostí pro Windows.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-210">Select the **Configure** link to the right of the **Microsoft-Pef-WebProxy** ETW provider.</span></span>
5. <span data-ttu-id="f6eaf-211">V **Upřesnit nastavení** dialogové okno, klikněte na tlačítko **zprostředkovatele** kartě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-211">In the **Advanced Settings** dialog, click the **Provider** tab.</span></span>
6. <span data-ttu-id="f6eaf-212">V **filtru Hostname** pole, zadejte vaše koncové body úložiště, oddělené mezerami.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-212">In the **Hostname Filter** field, specify your storage endpoints, separated by spaces.</span></span> <span data-ttu-id="f6eaf-213">Například můžete zadat koncové body takto: Změnit `storagesample` na název účtu úložiště:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-213">For example, you can specify your endpoints as follows; change `storagesample` to the name of your storage account:</span></span>

    ```   
    storagesample.blob.core.windows.net storagesample.queue.core.windows.net storagesample.table.core.windows.net
    ```

7. <span data-ttu-id="f6eaf-214">Ukončit dialogové okno a klikněte na tlačítko **restartujte** spustíte shromažďování trasování pomocí filtru název hostitele v místě, aby pouze provoz sítě úložiště Azure je součástí trasování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-214">Exit the dialog, and click **Restart** to begin collecting the trace with the hostname filter in place, so that only Azure Storage network traffic is included in the trace.</span></span>

> [!NOTE]
> <span data-ttu-id="f6eaf-215">Po dokončení shromažďování síťové trasování, důrazně doporučujeme vrátit zpět nastavení, která můžete měnit v aplikaci Fiddler k dešifrování komunikaci přes protokol HTTPS.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-215">After you have finished collecting your network trace, we strongly recommend that you revert the settings that you may have changed in Fiddler to decrypt HTTPS traffic.</span></span> <span data-ttu-id="f6eaf-216">V dialogovém okně Možnosti aplikaci Fiddler, zrušte výběr **zaznamenat umožňuje připojení HTTPS** a **dešifrovat provoz HTTPS** zaškrtávací políčka.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-216">In the Fiddler Options dialog, deselect the **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** checkboxes.</span></span>
> 
> 

<span data-ttu-id="f6eaf-217">V tématu [pomocí funkce trasování sítě](http://technet.microsoft.com/library/jj674819.aspx) na webu Technet podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-217">See [Using the Network Tracing Features](http://technet.microsoft.com/library/jj674819.aspx) on Technet for more details.</span></span>

## <a name="review-metrics-data-in-the-azure-portal"></a><span data-ttu-id="f6eaf-218">Zkontrolujte data metriky na portálu Azure</span><span class="sxs-lookup"><span data-stu-id="f6eaf-218">Review metrics data in the Azure portal</span></span>
<span data-ttu-id="f6eaf-219">Po spuštění vaší aplikace pro určitou dobu, můžete zkontrolovat grafy metriky, které se zobrazují v [portál Azure](https://portal.azure.com) sledovat, jak má byla provádění služby.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-219">Once your application has been running for a period of time, you can review the metrics charts that appear in the [Azure portal](https://portal.azure.com) to observe how your service has been performing.</span></span>

<span data-ttu-id="f6eaf-220">První přejděte na svůj účet úložiště na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-220">First, navigate to your storage account in the Azure portal.</span></span> <span data-ttu-id="f6eaf-221">Ve výchozím nastavení, monitorování grafu s **procento úspěšnosti** metrika se zobrazí v okně účtu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-221">By default, a monitoring chart with the **Success percentage** metric is displayed on the account blade.</span></span> <span data-ttu-id="f6eaf-222">Pokud jste dříve upravit graf zobrazíte jiné metriky, přidejte **procento úspěšnosti** metriku.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-222">If you've previously modified the chart to display different metrics, add the **Success percentage** metric.</span></span>

<span data-ttu-id="f6eaf-223">Nyní uvidíte **procento úspěšnosti** v monitorování grafu, společně s další metriky jste mohli přidat.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-223">You'll now see **Success percentage** in the monitoring chart, along with any other metrics you may have added.</span></span> <span data-ttu-id="f6eaf-224">Ve scénáři, který jsme vám další šetření tak, že analýza protokolů v Message Analyzer je procento úspěšnosti trochu nižší než 100 %.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-224">In the scenario we'll investigate next by analyzing the logs in Message Analyzer, the percent success rate is somewhat below 100%.</span></span>

<span data-ttu-id="f6eaf-225">Další informace o přidání a přizpůsobení metriky grafy najdete v tématu [přizpůsobení metriky grafy](storage-monitor-storage-account.md#customize-metrics-charts).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-225">For more details on adding and customizing metrics charts, see [Customize metrics charts](storage-monitor-storage-account.md#customize-metrics-charts).</span></span>

> [!NOTE]
> <span data-ttu-id="f6eaf-226">To může trvat nějakou dobu metriky dat, aby se po povolení metrik úložiště se zobrazí na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-226">It may take some time for your metrics data to appear in the Azure portal after you enable storage metrics.</span></span> <span data-ttu-id="f6eaf-227">To je proto hodinové metriky pro do předchozí hodiny nejsou zobrazeny na portálu Azure, dokud neuplyne do aktuální hodiny.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-227">This is because hourly metrics for the previous hour are not displayed in the Azure portal until the current hour has elapsed.</span></span> <span data-ttu-id="f6eaf-228">Navíc minutu metriky aktuálně nezobrazují, na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-228">Also, minute metrics are not currently displayed in the Azure portal.</span></span> <span data-ttu-id="f6eaf-229">Proto podle toho, když povolíte metriky, může trvat až dvě hodiny se zobrazí data metriky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-229">So depending on when you enable metrics, it may take up to two hours to see metrics data.</span></span>
> 
> 

## <a name="use-azcopy-to-copy-server-logs-to-a-local-directory"></a><span data-ttu-id="f6eaf-230">Pomocí AzCopy kopírovat protokoly serveru do místního adresáře</span><span class="sxs-lookup"><span data-stu-id="f6eaf-230">Use AzCopy to copy server logs to a local directory</span></span>
<span data-ttu-id="f6eaf-231">Úložiště Azure do objektů BLOB, zapisuje data protokolu serveru v průběhu metriky se zapisují do tabulky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-231">Azure Storage writes server log data to blobs, while metrics are written to tables.</span></span> <span data-ttu-id="f6eaf-232">Objekty BLOB protokolu jsou k dispozici v dobře známé `$logs` kontejner pro váš účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-232">Log blobs are available in the well-known `$logs` container for your storage account.</span></span> <span data-ttu-id="f6eaf-233">Objekty BLOB protokolu jsou pojmenované hierarchicky podle rok, měsíc, den a hodina, aby mohli snadno najít rozsahu doba, kterou chcete prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-233">Log blobs are named hierarchically by year, month, day, and hour, so that you can easily locate the range of time you wish to investigate.</span></span> <span data-ttu-id="f6eaf-234">Například v `storagesample` je účet, kontejner pro objekty BLOB protokolu pro 01/02/2015 od 8 – 9: `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-234">For example, in the `storagesample` account, the container for the log blobs for 01/02/2015, from 8-9 am, is `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span></span> <span data-ttu-id="f6eaf-235">Jednotlivé objekty BLOB v tomto kontejneru jsou pojmenované postupně, počínaje `000000.log`.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-235">The individual blobs in this container are named sequentially, beginning with `000000.log`.</span></span>

<span data-ttu-id="f6eaf-236">Nástroj příkazového řádku AzCopy můžete stáhnout tyto soubory protokolu na straně serveru k umístění podle vaší volby na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-236">You can use the AzCopy command-line tool to download these server-side log files to a location of your choice on your local machine.</span></span> <span data-ttu-id="f6eaf-237">Například následující příkaz můžete stáhnout soubory protokolu pro operace objektů blob, jež proběhly 2 leden 2015 ke složce `C:\Temp\Logs\Server`; nahradit `<storageaccountname>` s názvem účtu úložiště a `<storageaccountkey>` vaším přístupovým klíčem účet:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-237">For example, you can use the following command to download the log files for blob operations that took place on January 2, 2015 to the folder `C:\Temp\Logs\Server`; replace `<storageaccountname>` with the name of your storage account, and `<storageaccountkey>` with your account access key:</span></span>

```azcopy
AzCopy.exe /Source:http://<storageaccountname>.blob.core.windows.net/$logs /Dest:C:\Temp\Logs\Server /Pattern:"blob/2015/01/02" /SourceKey:<storageaccountkey> /S /V
```
<span data-ttu-id="f6eaf-238">AzCopy je k dispozici ke stažení na [Azure stáhne](https://azure.microsoft.com/downloads/) stránky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-238">AzCopy is available for download on the [Azure Downloads](https://azure.microsoft.com/downloads/) page.</span></span> <span data-ttu-id="f6eaf-239">Podrobnosti o použití nástroje AzCopy najdete v tématu [přenos dat pomocí nástroje příkazového řádku Azcopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-239">For details about using AzCopy, see [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="f6eaf-240">Další informace o stahování protokolů na straně serveru najdete v tématu [stáhnout protokolování úložiště dat protokolu](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-240">For additional information about downloading server-side logs, see [Download Storage Logging log data](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span></span>

## <a name="use-microsoft-message-analyzer-to-analyze-log-data"></a><span data-ttu-id="f6eaf-241">Použít Microsoft Message Analyzer analyzovat data protokolu</span><span class="sxs-lookup"><span data-stu-id="f6eaf-241">Use Microsoft Message Analyzer to analyze log data</span></span>
<span data-ttu-id="f6eaf-242">Microsoft Message Analyzer je nástroj pro zachytávání, zobrazení a analýza protokolu zasílání zpráv provoz, události a další scénáře řešení potíží a diagnostické zprávy systému nebo aplikace.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-242">Microsoft Message Analyzer is a tool for capturing, displaying, and analyzing protocol messaging traffic, events, and other system or application messages in troubleshooting and diagnostic scenarios.</span></span> <span data-ttu-id="f6eaf-243">Message Analyzer také umožňuje načíst, agregují a analyzovat data z protokolu a uložit trasovací soubory.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-243">Message Analyzer also enables you to load, aggregate, and analyze data from log and saved trace files.</span></span> <span data-ttu-id="f6eaf-244">Další informace o Message Analyzer najdete v tématu [Microsoft zpráva analyzátor operační průvodce](http://technet.microsoft.com/library/jj649776.aspx).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-244">For more information about Message Analyzer, see [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx).</span></span>

<span data-ttu-id="f6eaf-245">Message Analyzer obsahuje prostředky pro úložiště Azure, které umožňují analyzovat serveru, klienta a protokoly sítě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-245">Message Analyzer includes assets for Azure Storage that help you to analyze server, client, and network logs.</span></span> <span data-ttu-id="f6eaf-246">V této části probereme, jak používat tyto nástroje k vyřešení problému s nízkou procenta úspěšnosti v protokolech úložiště.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-246">In this section, we'll discuss how to use those tools to address the issue of low percent success in the storage logs.</span></span>

### <a name="download-and-install-message-analyzer-and-the-azure-storage-assets"></a><span data-ttu-id="f6eaf-247">Stáhněte a nainstalujte Message Analyzer a prostředky úložiště Azure</span><span class="sxs-lookup"><span data-stu-id="f6eaf-247">Download and install Message Analyzer and the Azure Storage Assets</span></span>
1. <span data-ttu-id="f6eaf-248">Stáhněte si [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) z webu služby Stažení softwaru a spusťte instalační program.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-248">Download [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) from the Microsoft Download Center, and run the installer.</span></span>
2. <span data-ttu-id="f6eaf-249">Spusťte Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-249">Launch Message Analyzer.</span></span>
3. <span data-ttu-id="f6eaf-250">Z **nástroje** nabídce vyberte možnost **správce inventáře**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-250">From the **Tools** menu, select **Asset Manager**.</span></span> <span data-ttu-id="f6eaf-251">V **správce inventáře** dialogovém okně, vyberte **stáhne**, vyfiltrujte v **Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-251">In the **Asset Manager** dialog, select **Downloads**, then filter on **Azure Storage**.</span></span> <span data-ttu-id="f6eaf-252">Úložiště prostředků Azure, uvidíte, jak je znázorněno na obrázku níže.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-252">You will see the Azure Storage Assets, as shown in the picture below.</span></span>
4. <span data-ttu-id="f6eaf-253">Klikněte na tlačítko **všechny zobrazené položky synchronizace** instalace prostředků úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-253">Click **Sync All Displayed Items** to install the Azure Storage Assets.</span></span> <span data-ttu-id="f6eaf-254">K dispozici prostředky zahrnují:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-254">The available assets include:</span></span>
   * <span data-ttu-id="f6eaf-255">**Pravidla ve službě Azure Storage barev:** pravidel barvy úložiště Azure umožňují definovat speciální filtry, které pomocí barev, text a písma styly zvýrazněte zprávy, které obsahují konkrétní informace trasování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-255">**Azure Storage Color Rules:** Azure Storage color rules enable you to define special filters that use color, text, and font styles to highlight messages that contain specific information in a trace.</span></span>
   * <span data-ttu-id="f6eaf-256">**Grafy úložiště Azure:** grafy úložiště Azure jsou předdefinované grafy graf data protokolu serveru.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-256">**Azure Storage Charts:** Azure Storage charts are predefined charts that graph server log data.</span></span> <span data-ttu-id="f6eaf-257">Poznámka: Pokud chcete používat Azure Storage grafy v tuto chvíli, může pouze načíst protokol serveru v mřížce analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-257">Note that to use Azure Storage charts at this time, you may only load the server log into the Analysis Grid.</span></span>
   * <span data-ttu-id="f6eaf-258">**Azure Storage analyzátory:** analyzátory Azure Storage analyzovat protokoly HTTP klienta Azure Storage, serveru a chcete-li je zobrazit v mřížce analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-258">**Azure Storage Parsers:** The Azure Storage parsers parse the Azure Storage client, server, and HTTP logs in order to display them in the Analysis Grid.</span></span>
   * <span data-ttu-id="f6eaf-259">**Filtry úložiště Azure:** úložiště Azure filtry jsou předdefinované kritéria, která slouží k dotazování na data v mřížce analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-259">**Azure Storage Filters:** Azure Storage filters are predefined criteria that you can use to query your data in the Analysis Grid.</span></span>
   * <span data-ttu-id="f6eaf-260">**Rozložení zobrazení Azure Storage:** zobrazení rozložení úložiště Azure jsou předdefinovaného zobrazení sloupců a seskupení v mřížce analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-260">**Azure Storage View Layouts:** Azure Storage view layouts are predefined column layouts and groupings in the Analysis Grid.</span></span>
5. <span data-ttu-id="f6eaf-261">Po instalaci prostředky, restartujte Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-261">Restart Message Analyzer after you've installed the assets.</span></span>

![Správce Asset analyzátor zpráv](./media/storage-e2e-troubleshooting/mma-start-page-1.png)

> [!NOTE]
> <span data-ttu-id="f6eaf-263">Nainstalujte všechny prostředky Azure Storage pro účely tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-263">Install all of the Azure Storage assets shown for the purposes of this tutorial.</span></span>
> 
> 

### <a name="import-your-log-files-into-message-analyzer"></a><span data-ttu-id="f6eaf-264">Import souborů protokolu do Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="f6eaf-264">Import your log files into Message Analyzer</span></span>
<span data-ttu-id="f6eaf-265">Můžete importovat všechny uložené soubory protokolů (na straně serveru, klienta a sítě) do jedné relace v Microsoft Message Analyzer pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-265">You can import all of your saved log files (server-side, client-side, and network) into a single session in Microsoft Message Analyzer for analysis.</span></span>

1. <span data-ttu-id="f6eaf-266">Na **soubor** nabídky v Microsoft Message Analyzer, klikněte na tlačítko **novou relaci**a potom klikněte na **prázdné relace**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-266">On the **File** menu in Microsoft Message Analyzer, click **New Session**, and then click **Blank Session**.</span></span> <span data-ttu-id="f6eaf-267">V **novou relaci** dialogové okno, zadejte název pro relaci analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-267">In the **New Session** dialog, enter a name for your analysis session.</span></span> <span data-ttu-id="f6eaf-268">V **relace podrobnosti** panelu a potom klikněte na **soubory** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-268">In the **Session Details** panel, click on the **Files** button.</span></span>
2. <span data-ttu-id="f6eaf-269">Chcete-li načíst data trasování sítě generované Message Analyzer, klikněte na **přidat soubory**, přejděte do umístění, kam jste uložili soubor .matp z webové relace trasování, vyberte soubor .matp a klikněte na tlačítko **otevřete**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-269">To load the network trace data generated by Message Analyzer, click on **Add Files**, browse to the location where you saved your .matp file from your web tracing session, select the .matp file, and click **Open**.</span></span>
3. <span data-ttu-id="f6eaf-270">Chcete-li načíst data protokolu na straně serveru, klikněte na **přidat soubory**, přejděte do umístění, kam jste stáhli svoje protokoly na straně serveru, vyberte soubory protokolu pro časový rozsah, který chcete analyzovat a klikněte na tlačítko **otevřete**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-270">To load the server-side log data, click on **Add Files**, browse to the location where you downloaded your server-side logs, select the log files for the time range you want to analyze, and click **Open**.</span></span> <span data-ttu-id="f6eaf-271">Potom v **relace podrobnosti** panelu, nastavte **konfigurace protokolů Text** rozevíracího seznamu pro každý soubor protokolu na straně serveru k **AzureStorageLog** zajistit, že Microsoft Message Analyzer správně můžete analyzovat soubor protokolu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-271">Then, in the **Session Details** panel, set the **Text Log Configuration** drop-down for each server-side log file to **AzureStorageLog** to ensure that Microsoft Message Analyzer can parse the log file correctly.</span></span>
4. <span data-ttu-id="f6eaf-272">Chcete-li načíst data protokolu na straně klienta, klikněte na **přidat soubory**, přejděte do umístění, kam jste uložili svoje protokoly na straně klienta, vyberte soubory protokolu, které chcete analyzovat a klikněte na tlačítko **otevřete**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-272">To load the client-side log data, click on **Add Files**, browse to the location where you saved your client-side logs, select the log files you want to analyze, and click **Open**.</span></span> <span data-ttu-id="f6eaf-273">Potom v **relace podrobnosti** panelu, nastavte **konfigurace protokolů Text** rozevíracího seznamu pro každý soubor protokolu na straně klienta pro **AzureStorageClientDotNetV4** zajistit, že Microsoft Message Analyzer správně můžete analyzovat soubor protokolu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-273">Then, in the **Session Details** panel, set the **Text Log Configuration** drop-down for each client-side log file to **AzureStorageClientDotNetV4** to ensure that Microsoft Message Analyzer can parse the log file correctly.</span></span>
5. <span data-ttu-id="f6eaf-274">Klikněte na tlačítko **spustit** v **novou relaci** dialogovém okně můžete načíst a analyzovat data protokolu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-274">Click **Start** in the **New Session** dialog to load and parse the log data.</span></span> <span data-ttu-id="f6eaf-275">Data protokolu se zobrazí v mřížce Analysis analyzátor zpráv.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-275">The log data displays in the Message Analyzer Analysis Grid.</span></span>

<span data-ttu-id="f6eaf-276">Následující obrázek ukazuje relaci příklad nakonfigurované serveru, klienta a soubory protokolu trasování sítě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-276">The picture below shows an example session configured with server, client, and network trace log files.</span></span>

![Konfigurace relace analyzátor zpráv](./media/storage-e2e-troubleshooting/configure-mma-session-1.png)

<span data-ttu-id="f6eaf-278">Všimněte si, že Message Analyzer načte soubory protokolů do paměti.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-278">Note that Message Analyzer loads log files into memory.</span></span> <span data-ttu-id="f6eaf-279">Pokud máte velké sady dat protokolu, můžete filtrovat zajistí, že nejlepší výkon ze Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-279">If you have a large set of log data, you will want to filter it in order to get the best performance from Message Analyzer.</span></span>

<span data-ttu-id="f6eaf-280">Nejprve určit dobu, která vás zajímá kontrola a udržovat tento časový rámec co nejmenší.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-280">First, determine the time frame that you are interested in reviewing, and keep this time frame as small as possible.</span></span> <span data-ttu-id="f6eaf-281">V řadě případů budete chtít zkontrolovat období minut nebo hodin maximálně.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-281">In many cases you will want to review a period of minutes or hours at most.</span></span> <span data-ttu-id="f6eaf-282">Importujte nejmenší sadu protokoly, které bude vyhovovat vašim potřebám.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-282">Import the smallest set of logs that can meet your needs.</span></span>

<span data-ttu-id="f6eaf-283">Pokud máte velké množství dat protokolu, můžete chtít zadat relace filtr data protokolu, než můžete načíst.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-283">If you still have a large amount of log data, then you may want to specify a session filter to filter your log data before you load it.</span></span> <span data-ttu-id="f6eaf-284">V **filtru relace** vyberte **knihovny** tlačítko Vybrat předdefinovaný filtr; například zvolit **globální doba filtru I** ze služby Azure Storage filtry k filtrování v časovém intervalu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-284">In the **Session Filter** box, select the **Library** button to choose a predefined filter; for example, choose **Global Time Filter I** from the Azure Storage filters to filter on a time interval.</span></span> <span data-ttu-id="f6eaf-285">Potom můžete upravit kritéria filtru, která chcete zadat počáteční a koncovou časové razítko pro interval, který chcete zobrazit.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-285">You can then edit the filter criteria to specify the starting and ending timestamp for the interval you want to see.</span></span> <span data-ttu-id="f6eaf-286">Můžete také filtrovat podle kódu stavu; Například můžete načíst pouze ty položky protokolu, kde je stavový kód 404.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-286">You can also filter on a particular status code; for example, you can choose to load only log entries where the status code is 404.</span></span>

<span data-ttu-id="f6eaf-287">Další informace o importování dat protokolu do Microsoft Message Analyzer najdete v tématu [Data načítání zpráv](http://technet.microsoft.com/library/dn772437.aspx) na webu TechNet.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-287">For more information about importing log data into Microsoft Message Analyzer, see [Retrieving Message Data](http://technet.microsoft.com/library/dn772437.aspx) on TechNet.</span></span>

### <a name="use-the-client-request-id-to-correlate-log-file-data"></a><span data-ttu-id="f6eaf-288">ID žádosti klienta použít ke korelaci dat souboru protokolu</span><span class="sxs-lookup"><span data-stu-id="f6eaf-288">Use the client request ID to correlate log file data</span></span>
<span data-ttu-id="f6eaf-289">Klientská knihovna pro úložiště Azure automaticky vygeneruje ID žádosti klienta jedinečný pro každý požadavek.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-289">The Azure Storage Client Library automatically generates a unique client request ID for every request.</span></span> <span data-ttu-id="f6eaf-290">Tato hodnota jsou zapsány do protokolu klientů, protokol serveru a síťové trasování, můžete ho použít ke korelaci dat napříč všechny tři protokoly v rámci Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-290">This value is written to the client log, the server log, and the network trace, so you can use it to correlate data across all three logs within Message Analyzer.</span></span> <span data-ttu-id="f6eaf-291">V tématu [ID žádosti klienta](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) pro další informace o klientovi vyžadovat ID.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-291">See [Client request ID](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) for additional information about the client request ID.</span></span>

<span data-ttu-id="f6eaf-292">V níže uvedených částech popisují způsob použití předem nakonfigurovaná a vlastní rozložení zobrazení ke korelaci a data skupiny podle ID klienta požadavku.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-292">The sections below describe how to use pre-configured and custom layout views to correlate and group data based on the client request ID.</span></span>

### <a name="select-a-view-layout-to-display-in-the-analysis-grid"></a><span data-ttu-id="f6eaf-293">Vyberte zobrazení rozložení pro zobrazení v mřížce analýzy</span><span class="sxs-lookup"><span data-stu-id="f6eaf-293">Select a view layout to display in the Analysis Grid</span></span>
<span data-ttu-id="f6eaf-294">Úložiště prostředků pro Message Analyzer zahrnují zobrazení rozložení úložiště Azure, které jsou předem nakonfigurovaná zobrazení, které můžete použít k zobrazení dat pomocí užitečné seskupení a sloupců pro různé scénáře.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-294">The Storage Assets for Message Analyzer include Azure Storage View Layouts, which are pre-configured views that you can use to display your data with useful groupings and columns for different scenarios.</span></span> <span data-ttu-id="f6eaf-295">Můžete také vytvořit vlastní zobrazení rozložení a uložit pro opakované použití.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-295">You can also create custom view layouts and save them for reuse.</span></span>

<span data-ttu-id="f6eaf-296">Obrázek níže znázorňuje **rozložení zobrazení** nabídce výběrem **rozložení zobrazení** na pásu karet panelu nástrojů.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-296">The picture below shows the **View Layout** menu, available by selecting **View Layout** from the toolbar ribbon.</span></span> <span data-ttu-id="f6eaf-297">Zobrazení rozložení pro Azure Storage jsou seskupené v rámci **Azure Storage** uzlu v nabídce.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-297">The view layouts for Azure Storage are grouped under the **Azure Storage** node in the menu.</span></span> <span data-ttu-id="f6eaf-298">Můžete vyhledat `Azure Storage` do vyhledávacího pole pro filtrování Azure Storage zobrazit pouze rozložení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-298">You can search for `Azure Storage` in the search box to filter on Azure Storage view layouts only.</span></span> <span data-ttu-id="f6eaf-299">Můžete také vybrat hvězdičky vedle rozložení zobrazení zobrazí v horní nabídce a nastavit jej jako oblíbené.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-299">You can also select the star next to a view layout to make it a favorite and display it at the top of the menu.</span></span>

![Nabídka Zobrazit rozložení](./media/storage-e2e-troubleshooting/view-layout-menu.png)

<span data-ttu-id="f6eaf-301">Vyberte **seskupené podle ClientRequestID a modul**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-301">To begin with, select **Grouped by ClientRequestID and Module**.</span></span> <span data-ttu-id="f6eaf-302">Toto zobrazení rozložení skupiny protokolovat data ze všech tří protokolů nejprve podle ID žádosti klienta a pak podle zdrojového souboru protokolu (nebo **modulu** v Message Analyzer).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-302">This view layout groups log data from all three logs first by client request ID, then by source log file (or **Module** in Message Analyzer).</span></span> <span data-ttu-id="f6eaf-303">K tomuto zobrazení můžete rozbalit ID žádosti klienta konkrétní a vidět data z všechny tři soubory protokolů pro tento požadavek klienta ID.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-303">With this view, you can drill down into a particular client request ID, and see data from all three log files for that client request ID.</span></span>

<span data-ttu-id="f6eaf-304">Obrázek níže znázorňuje toto zobrazení rozložení použit ukázková data protokolu, s podmnožinu sloupců zobrazí.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-304">The picture below shows this layout view applied to the sample log data, with a subset of columns displayed.</span></span> <span data-ttu-id="f6eaf-305">Uvidíte, že pro ID žádosti konkrétního klienta, zobrazuje mřížky analýzy dat z protokolu klienta, serveru protokolu a trasování sítě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-305">You can see that for a particular client request ID, the Analysis Grid displays data from the client log, server log, and network trace.</span></span>

![Zobrazení rozložení úložiště Azure](./media/storage-e2e-troubleshooting/view-layout-client-request-id-module.png)

> [!NOTE]
> <span data-ttu-id="f6eaf-307">Různých protokolových souborech mají různé sloupce, takže pokud se zobrazí data z více souborů protokolu v mřížce analýzy, některé sloupce nesmí obsahovat žádná data pro daný řádek.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-307">Different log files have different columns, so when data from multiple log files is displayed in the Analysis Grid, some columns may not contain any data for a given row.</span></span> <span data-ttu-id="f6eaf-308">Například na obrázku výše, řádky protokolu klienta nezobrazovat žádná data pro **časové razítko**, **TimeElapsed**, **zdroj**, a **cílové** sloupců, protože tyto sloupce nejsou k dispozici v protokolu klienta, ale existují v síťové trasování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-308">For example, in the picture above, the client log rows do not show any data for the **Timestamp**, **TimeElapsed**, **Source**, and **Destination** columns, because these columns do not exist in the client log, but do exist in the network trace.</span></span> <span data-ttu-id="f6eaf-309">Podobně **časové razítko** sloupec zobrazuje časové razítko data z protokolu serveru, ale nezobrazí se žádná data pro **TimeElapsed**, **zdroj**, a **cílové** sloupce, které nejsou součástí protokolu serveru.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-309">Similarly, the **Timestamp** column displays timestamp data from the server log, but no data is displayed for the **TimeElapsed**, **Source**, and **Destination** columns, which are not part of the server log.</span></span>
> 
> 

<span data-ttu-id="f6eaf-310">Kromě použití rozložení zobrazení Azure Storage, můžete také definovat a uložit vlastní rozložení zobrazení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-310">In addition to using the Azure Storage view layouts, you can also define and save your own view layouts.</span></span> <span data-ttu-id="f6eaf-311">Můžete vybrat další požadované pole pro seskupování dat a uložit seskupení jako součást vaší vlastní rozložení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-311">You can select other desired fields for grouping data and save the grouping as part of your custom layout as well.</span></span>

### <a name="apply-color-rules-to-the-analysis-grid"></a><span data-ttu-id="f6eaf-312">Použít pravidla barev do mřížky analýzy</span><span class="sxs-lookup"><span data-stu-id="f6eaf-312">Apply color rules to the Analysis Grid</span></span>
<span data-ttu-id="f6eaf-313">Prostředky úložiště obsahovat také barvu pravidla, která nabízí že vizuál znamená k identifikaci různých typů chyb v mřížce analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-313">The Storage Assets also include color rules, which offer a visual means to identify different types of errors in the Analysis Grid.</span></span> <span data-ttu-id="f6eaf-314">Předdefinované barev pravidla platí pro chyby protokolu HTTP, aby se zobrazovaly pouze pro server protokolu a síťové trasování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-314">The predefined color rules apply to HTTP errors, so they appear only for the server log and network trace.</span></span>

<span data-ttu-id="f6eaf-315">Chcete-li použít pravidel barvy, vyberte **pravidel barvy** na pásu karet panelu nástrojů.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-315">To apply color rules, select **Color Rules** from the toolbar ribbon.</span></span> <span data-ttu-id="f6eaf-316">Uvidíte pravidel barvy Azure Storage v nabídce.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-316">You'll see the Azure Storage color rules in the menu.</span></span> <span data-ttu-id="f6eaf-317">Pro tento kurz, vyberte **chyby klienta (StatusCode mezi 400 a 499)**, jak je znázorněno na obrázku níže.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-317">For the tutorial, select **Client Errors (StatusCode between 400 and 499)**, as shown in the picture below.</span></span>

![Zobrazení rozložení úložiště Azure](./media/storage-e2e-troubleshooting/color-rules-menu.png)

<span data-ttu-id="f6eaf-319">Kromě použití pravidel barvy Azure Storage, můžete definovat a uložit vlastní pravidla barvy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-319">In addition to using the Azure Storage color rules, you can also define and save your own color rules.</span></span>

### <a name="group-and-filter-log-data-to-find-400-range-errors"></a><span data-ttu-id="f6eaf-320">Skupiny a filtrování dat protokolu hledání 400-range chyb</span><span class="sxs-lookup"><span data-stu-id="f6eaf-320">Group and filter log data to find 400-range errors</span></span>
<span data-ttu-id="f6eaf-321">V dalším kroku jsme budete skupiny a filtrování dat protokolu najít všechny chyby v 400 rozsahu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-321">Next, we'll group and filter the log data to find all errors in the 400 range.</span></span>

1. <span data-ttu-id="f6eaf-322">Vyhledejte **StatusCode** sloupce v mřížce analýzy, klikněte pravým tlačítkem na sloupci nadpis a vyberte **skupiny**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-322">Locate the **StatusCode** column in the Analysis Grid, right-click the column heading, and select **Group**.</span></span>
2. <span data-ttu-id="f6eaf-323">V dalším kroku skupina na **ClientRequestId** sloupce.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-323">Next, group on the **ClientRequestId** column.</span></span> <span data-ttu-id="f6eaf-324">Uvidíte, že v mřížce Analysis teď uspořádání stavový kód a ID klienta požadavku.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-324">You'll see that the data in the Analysis Grid is now organized by status code and by client request ID.</span></span>
3. <span data-ttu-id="f6eaf-325">Zobrazí okno nástroje filtr zobrazení, pokud již není zobrazen.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-325">Display the View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="f6eaf-326">Na pásu karet panelu nástrojů vyberte **nástroj Windows**, pak **filtr zobrazení**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-326">On the toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
4. <span data-ttu-id="f6eaf-327">Chcete-li filtrovat data protokolu pro zobrazení pouze chyby 400-range, přidejte následující kritéria filtru k **filtr zobrazení** a klikněte na **použít**:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-327">To filter the log data to display only 400-range errors, add the following filter criteria to the **View Filter** window, and click **Apply**:</span></span>

    ```   
    (AzureStorageLog.StatusCode >= 400 && AzureStorageLog.StatusCode <=499) || (HTTP.StatusCode >= 400 && HTTP.StatusCode <= 499)
    ```

<span data-ttu-id="f6eaf-328">Následující obrázek ukazuje výsledky této seskupení a filtru.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-328">The picture below shows the results of this grouping and filter.</span></span> <span data-ttu-id="f6eaf-329">Rozšíření **ClientRequestID** pole pod seskupení pro stavový kód 409, například uvádí operace, která tento kód stavu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-329">Expanding the **ClientRequestID** field beneath the grouping for status code 409, for example, shows an operation that resulted in that status code.</span></span>

![Zobrazení rozložení úložiště Azure](./media/storage-e2e-troubleshooting/400-range-errors1.png)

<span data-ttu-id="f6eaf-331">Po použití tento filtr, uvidíte, že řádky z protokolu klienta jsou vyloučeny, jako klienta protokolu nezahrnuje **StatusCode** sloupce.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-331">After applying this filter, you'll see that rows from the client log are excluded, as the client log does not include a **StatusCode** column.</span></span> <span data-ttu-id="f6eaf-332">Přečtěte serveru a protokoly trasování sítě najít chyb 404, a potom se vrátí do klienta protokolu prozkoumat operací klienta, které vedly k nim.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-332">To begin with, we'll review the server and network trace logs to locate 404 errors, and then we'll return to the client log to examine the client operations that led to them.</span></span>

> [!NOTE]
> <span data-ttu-id="f6eaf-333">Můžete filtrovat podle **StatusCode** sloupce a stále zobrazí data ze všech tří protokolů, včetně protokolu klientů, pokud přidáte výraz filtru, který obsahuje položky protokolu, kde má hodnotu null stavový kód.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-333">You can filter on the **StatusCode** column and still display data from all three logs, including the client log, if you add an expression to the filter that includes log entries where the status code is null.</span></span> <span data-ttu-id="f6eaf-334">Chcete-li vytvořit tento výraz filtru, použijte:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-334">To construct this filter expression, use:</span></span>
> 
> <code>&#42;StatusCode >= 400 or !&#42;StatusCode</code>
> 
> <span data-ttu-id="f6eaf-335">Tento filtr vrátí všechny řádky z klienta protokolu a pouze řádky ze serveru protokolu a protokolu HTTP kde je větší než 400 stavový kód.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-335">This filter returns all rows from the client log and only rows from the server log and HTTP log where the status code is greater than 400.</span></span> <span data-ttu-id="f6eaf-336">Pokud ho použít k zobrazení rozložení seskupené podle ID žádosti klienta a modul, můžete vyhledávat nebo přejděte přes položky protokolu těch, které jsou najít, kde jsou všechny tři protokoly zastoupení.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-336">If you apply it to the view layout grouped by client request ID and module, you can search or scroll through the log entries to find ones where all three logs are represented.</span></span>   
> 
> 

### <a name="filter-log-data-to-find-404-errors"></a><span data-ttu-id="f6eaf-337">Data protokolu filtru k vyhledání chyb 404</span><span class="sxs-lookup"><span data-stu-id="f6eaf-337">Filter log data to find 404 errors</span></span>
<span data-ttu-id="f6eaf-338">Prostředky úložiště zahrnují předdefinované filtry, které můžete použít, chcete-li zúžit data protokolu k vyhledání chyby nebo trendů, které hledáte.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-338">The Storage Assets include predefined filters that you can use to narrow log data to find the errors or trends you are looking for.</span></span> <span data-ttu-id="f6eaf-339">V dalším kroku jsme budete používat dvě předdefinované filtry: ten, který filtruje serveru a síťové protokoly trasování pro chyb 404 a jeden, který filtruje data v zadaném časovém rozmezí.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-339">Next, we'll apply two predefined filters: one that filters the server and network trace logs for 404 errors, and one that filters the data on a specified time range.</span></span>

1. <span data-ttu-id="f6eaf-340">Zobrazí okno nástroje filtr zobrazení, pokud již není zobrazen.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-340">Display the View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="f6eaf-341">Na pásu karet panelu nástrojů vyberte **nástroj Windows**, pak **filtr zobrazení**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-341">On the toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
2. <span data-ttu-id="f6eaf-342">V okně filtru zobrazení vyberte **knihovny**a vyhledejte na `Azure Storage` najít úložiště Azure filtrů.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-342">In the View Filter window, select **Library**, and search on `Azure Storage` to find the Azure Storage filters.</span></span> <span data-ttu-id="f6eaf-343">Vyberte filtr pro **404 (Nenalezeno) zpráv ve všech protokolech**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-343">Select the filter for **404 (Not Found) messages in all logs**.</span></span>
3. <span data-ttu-id="f6eaf-344">Zobrazení **knihovny** nabídky znovu a vyhledejte a vyberte **globální filtr času**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-344">Display the **Library** menu again, and locate and select the **Global Time Filter**.</span></span>
4. <span data-ttu-id="f6eaf-345">Upravte časová razítka vidět ve filtru na rozsah, který si přejete zobrazit.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-345">Edit the timestamps shown in the filter to the range you wish to view.</span></span> <span data-ttu-id="f6eaf-346">To vám pomůže Chcete-li zúžit rozsah dat pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-346">This will help to narrow the range of data to analyze.</span></span>
5. <span data-ttu-id="f6eaf-347">Filtr měla vypadat podobně jako v příkladu níže.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-347">Your filter should appear similar to the example below.</span></span> <span data-ttu-id="f6eaf-348">Klikněte na tlačítko **použít** použít filtr k mřížce analýzy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-348">Click **Apply** to apply the filter to the Analysis Grid.</span></span>

    ```   
    ((AzureStorageLog.StatusCode == 404 || HTTP.StatusCode == 404)) And
    (#Timestamp >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39)
    ```

    ![Zobrazení rozložení úložiště Azure](./media/storage-e2e-troubleshooting/404-filtered-errors1.png)

### <a name="analyze-your-log-data"></a><span data-ttu-id="f6eaf-350">Analyzovat data protokolu</span><span class="sxs-lookup"><span data-stu-id="f6eaf-350">Analyze your log data</span></span>
<span data-ttu-id="f6eaf-351">Teď, když máte seskupené a filtrovat data, můžete zkontrolovat podrobnosti o jednotlivých požadavků, které generuje chyby 404.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-351">Now that you have grouped and filtered your data, you can examine the details of individual requests that generated 404 errors.</span></span> <span data-ttu-id="f6eaf-352">V aktuální rozložení zobrazení data jsou seskupena podle ID žádosti klienta, pak zdrojem protokolu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-352">In the current view layout, the data is grouped by client request ID, then by log source.</span></span> <span data-ttu-id="f6eaf-353">Vzhledem k tomu, že jsme jsou filtrování požadavků kde pole StatusCode obsahuje 404, uvidíme, jenom server a data trasování sítě, ne data protokolu klienta.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-353">Since we are filtering on requests where the StatusCode field contains 404, we'll see only the server and network trace data, not the client log data.</span></span>

<span data-ttu-id="f6eaf-354">Následující obrázek ukazuje konkrétního požadavku, kde operace získání objektu Blob poskytuje 404, protože objekt blob neexistuje.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-354">The picture below shows a specific request where a Get Blob operation yielded a 404 because the blob did not exist.</span></span> <span data-ttu-id="f6eaf-355">Všimněte si, že některé sloupce byly odebrány z standardní zobrazení relevantní data mohla zobrazit.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-355">Note that some columns have been removed from the standard view in order to display the relevant data.</span></span>

![Filtrované serveru a protokoly trasování sítě](./media/storage-e2e-troubleshooting/server-filtered-404-error.png)

<span data-ttu-id="f6eaf-357">Toto ID žádosti klienta jsme v dalším kroku budete souviset s dat protokolu klienta a zjistit, jaké akce trvala klienta, pokud došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-357">Next, we'll correlate this client request ID with the client log data to see what actions the client was taking when the error happened.</span></span> <span data-ttu-id="f6eaf-358">Můžete zobrazit nové zobrazení mřížky analýzy pro tuto relaci prohlížet klientská data protokolu, který se otevře v druhé kartě:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-358">You can display a new Analysis Grid view for this session to view the client log data, which opens in a second tab:</span></span>

1. <span data-ttu-id="f6eaf-359">Nejdřív zkopírujte hodnotu **ClientRequestId** pole do schránky.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-359">First, copy the value of the **ClientRequestId** field to the clipboard.</span></span> <span data-ttu-id="f6eaf-360">Můžete to provedete výběr buď řádek, hledání **ClientRequestId** pole, pravým tlačítkem myši na hodnotu data a zvolením **kopie 'ClientRequestId'**.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-360">You can do this by selecting either row, locating the **ClientRequestId** field, right-clicking on the data value, and choosing **Copy 'ClientRequestId'**.</span></span>
2. <span data-ttu-id="f6eaf-361">Na pásu karet panelu nástrojů vyberte **nový prohlížeč**, pak vyberte **Analysis mřížky** otevřete novou kartu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-361">On the toolbar ribbon, select **New Viewer**, then select **Analysis Grid** to open a new tab.</span></span> <span data-ttu-id="f6eaf-362">Nové kartě se zobrazují všechna data v souboru protokolu, bez seskupování, filtrování nebo pravidel barvy.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-362">The new tab shows all data in your log files, without grouping, filtering, or color rules.</span></span>
3. <span data-ttu-id="f6eaf-363">Na pásu karet panelu nástrojů vyberte **rozložení zobrazení**, pak vyberte **všechny sloupce klienta rozhraní .NET** pod **Azure Storage** části.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-363">On the toolbar ribbon, select **View Layout**, then select **All .NET Client Columns** under the **Azure Storage** section.</span></span> <span data-ttu-id="f6eaf-364">Toto rozložení zobrazení zobrazuje data z klienta protokolu a také v protokolech trasování serveru a sítě.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-364">This view layout shows data from the client log as well as the server and network trace logs.</span></span> <span data-ttu-id="f6eaf-365">Ve výchozím nastavení je seřazen na **MessageNumber** sloupce.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-365">By default it is sorted on the **MessageNumber** column.</span></span>
4. <span data-ttu-id="f6eaf-366">V dalším kroku klienta protokolu vyhledejte ID žádosti klienta.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-366">Next, search the client log for the client request ID.</span></span> <span data-ttu-id="f6eaf-367">Na pásu karet panelu nástrojů vyberte **najít zprávy**, pak zadání vlastního filtru na ID žádosti klienta v **najít** pole.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-367">On the toolbar ribbon, select **Find Messages**, then specify a custom filter on the client request ID in the **Find** field.</span></span> <span data-ttu-id="f6eaf-368">Pro filtr, zadání vlastní ID žádosti klienta použijte následující syntaxi:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-368">Use this syntax for the filter, specifying your own client request ID:</span></span>

    ```
    *ClientRequestId == "398bac41-7725-484b-8a69-2a9e48fc669a"
    ```

<span data-ttu-id="f6eaf-369">Message Analyzer vyhledá a vybere první položka kde kritéria hledání odpovídá ID žádosti klienta.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-369">Message Analyzer locates and selects the first log entry where the search criteria matches the client request ID.</span></span> <span data-ttu-id="f6eaf-370">V protokolu klientů, existuje několik záznamů pro každý ID žádosti klienta, možná budete chtít seskupovat je na **ClientRequestId** pole, aby bylo snazší je zobrazíte všechny společně.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-370">In the client log, there are several entries for each client request ID, so you may want to group them on the **ClientRequestId** field to make it easier to see them all together.</span></span> <span data-ttu-id="f6eaf-371">Následující obrázek ukazuje všechny zprávy v protokolu klienta pro zadaného klienta žádosti.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-371">The picture below shows all of the messages in the client log for the specified client request ID.</span></span>

![Zobrazuje klienta protokolu chyb 404](./media/storage-e2e-troubleshooting/client-log-analysis-grid1.png)

<span data-ttu-id="f6eaf-373">Data zobrazená v zobrazení rozložení v těchto dvou karet můžete analyzovat data požadavku k určení, co způsobilo chybu.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-373">Using the data shown in the view layouts in these two tabs, you can analyze the request data to determine what may have caused the error.</span></span> <span data-ttu-id="f6eaf-374">Můžete také prohlédnout požadavků, které před následujícímu chcete zobrazit, pokud je předchozí událost může vedly k chybu 404.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-374">You can also look at requests that preceded this one to see if a previous event may have led to the 404 error.</span></span> <span data-ttu-id="f6eaf-375">Můžete například zkontrolovat položky protokolu klienta předcházející tohoto ID klienta požadavku k určení, zda objekt blob může být odstraněna, nebo pokud byla chyba způsobena klientská aplikace volání rozhraní API CreateIfNotExists na kontejner nebo objekt blob.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-375">For example, you can review the client log entries preceding this client request ID to determine whether the blob may have been deleted, or if the error was due to the client application calling a CreateIfNotExists API on a container or blob.</span></span> <span data-ttu-id="f6eaf-376">V protokolu klienta, můžete najít objekt blob adresu v **popis** pole; v serveru a protokoly trasování sítě, tyto informace se zobrazí v **Souhrn** pole.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-376">In the client log, you can find the blob's address in the **Description** field; in the server and network trace logs, this information appears in the **Summary** field.</span></span>

<span data-ttu-id="f6eaf-377">Jakmile znáte adresu objektu blob, který poskytuje chybu 404, můžete dále prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-377">Once you know the address of the blob that yielded the 404 error, you can investigate further.</span></span> <span data-ttu-id="f6eaf-378">Pokud hledáte položky protokolu další zprávy týkající se operací na stejný objekt blob, můžete zkontrolovat, jestli klient dříve odstraňovat entity.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-378">If you search the log entries for other messages associated with operations on the same blob, you can check whether the client previously deleted the entity.</span></span>

## <a name="analyze-other-types-of-storage-errors"></a><span data-ttu-id="f6eaf-379">Analýza jiné typy chyb úložiště</span><span class="sxs-lookup"><span data-stu-id="f6eaf-379">Analyze other types of storage errors</span></span>
<span data-ttu-id="f6eaf-380">Teď, když jste obeznámeni s používáním Message Analyzer k analýze dat protokolu, můžete analyzovat jiné typy chyb pomocí zobrazení rozložení, pravidel barvy a hledání nebo filtrování.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-380">Now that you are familiar with using Message Analyzer to analyze your log data, you can analyze other types of errors using view layouts, color rules, and searching/filtering.</span></span> <span data-ttu-id="f6eaf-381">Následující tabulky uvádí některé problémy, ke kterým může dojít a kritéria filtru, které můžete použít k vyhledání je.</span><span class="sxs-lookup"><span data-stu-id="f6eaf-381">The tables below lists some issues you may encounter and the filter criteria you can use to locate them.</span></span> <span data-ttu-id="f6eaf-382">Další informace o vytváření filtrů a Message Analyzer filtrování jazyka najdete v tématu [filtrování Data zpráv](http://technet.microsoft.com/library/jj819365.aspx).</span><span class="sxs-lookup"><span data-stu-id="f6eaf-382">For more information on constructing filters and the Message Analyzer filtering language, see [Filtering Message Data](http://technet.microsoft.com/library/jj819365.aspx).</span></span>

| <span data-ttu-id="f6eaf-383">K prozkoumání...</span><span class="sxs-lookup"><span data-stu-id="f6eaf-383">To Investigate…</span></span> | <span data-ttu-id="f6eaf-384">Použijte výraz filtru...</span><span class="sxs-lookup"><span data-stu-id="f6eaf-384">Use Filter Expression…</span></span> | <span data-ttu-id="f6eaf-385">Výraz se vztahuje na protokolu (klient, Server, sítě, všechny)</span><span class="sxs-lookup"><span data-stu-id="f6eaf-385">Expression Applies to Log (Client, Server,   Network, All)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f6eaf-386">Neočekávané zpoždění při doručování zpráv ve frontě</span><span class="sxs-lookup"><span data-stu-id="f6eaf-386">Unexpected delays in message delivery on a queue</span></span> |<span data-ttu-id="f6eaf-387">AzureStorageClientDotNetV4.Description obsahuje "Bude opakován operace se nezdařila."</span><span class="sxs-lookup"><span data-stu-id="f6eaf-387">AzureStorageClientDotNetV4.Description   contains "Retrying failed operation."</span></span> |<span data-ttu-id="f6eaf-388">Klient</span><span class="sxs-lookup"><span data-stu-id="f6eaf-388">Client</span></span> |
| <span data-ttu-id="f6eaf-389">Zvýšení HTTP PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="f6eaf-389">HTTP Increase in PercentThrottlingError</span></span> |<span data-ttu-id="f6eaf-390">HTTP. Response.StatusCode == 500 &#124; &#124; HTTP. Response.StatusCode == 503</span><span class="sxs-lookup"><span data-stu-id="f6eaf-390">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span></span> |<span data-ttu-id="f6eaf-391">Síť</span><span class="sxs-lookup"><span data-stu-id="f6eaf-391">Network</span></span> |
| <span data-ttu-id="f6eaf-392">Nárůst PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="f6eaf-392">Increase in PercentTimeoutError</span></span> |<span data-ttu-id="f6eaf-393">HTTP. Response.StatusCode == 500</span><span class="sxs-lookup"><span data-stu-id="f6eaf-393">HTTP.Response.StatusCode   == 500</span></span> |<span data-ttu-id="f6eaf-394">Síť</span><span class="sxs-lookup"><span data-stu-id="f6eaf-394">Network</span></span> |
| <span data-ttu-id="f6eaf-395">Nárůst PercentTimeoutError (všechny)</span><span class="sxs-lookup"><span data-stu-id="f6eaf-395">Increase in PercentTimeoutError (all)</span></span> |<span data-ttu-id="f6eaf-396">* StatusCode == 500</span><span class="sxs-lookup"><span data-stu-id="f6eaf-396">*StatusCode   == 500</span></span> |<span data-ttu-id="f6eaf-397">Všechny</span><span class="sxs-lookup"><span data-stu-id="f6eaf-397">All</span></span> |
| <span data-ttu-id="f6eaf-398">Nárůst PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="f6eaf-398">Increase in PercentNetworkError</span></span> |<span data-ttu-id="f6eaf-399">AzureStorageClientDotNetV4.EventLogEntry.Level < 2</span><span class="sxs-lookup"><span data-stu-id="f6eaf-399">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span></span> |<span data-ttu-id="f6eaf-400">Klient</span><span class="sxs-lookup"><span data-stu-id="f6eaf-400">Client</span></span> |
| <span data-ttu-id="f6eaf-401">HTTP 403 (zakázáno) zprávy</span><span class="sxs-lookup"><span data-stu-id="f6eaf-401">HTTP 403 (Forbidden) messages</span></span> |<span data-ttu-id="f6eaf-402">HTTP. Response.StatusCode == 403</span><span class="sxs-lookup"><span data-stu-id="f6eaf-402">HTTP.Response.StatusCode   == 403</span></span> |<span data-ttu-id="f6eaf-403">Síť</span><span class="sxs-lookup"><span data-stu-id="f6eaf-403">Network</span></span> |
| <span data-ttu-id="f6eaf-404">HTTP 404 (Nenalezeno) zprávy</span><span class="sxs-lookup"><span data-stu-id="f6eaf-404">HTTP 404 (Not found) messages</span></span> |<span data-ttu-id="f6eaf-405">HTTP. Response.StatusCode == 404</span><span class="sxs-lookup"><span data-stu-id="f6eaf-405">HTTP.Response.StatusCode   == 404</span></span> |<span data-ttu-id="f6eaf-406">Síť</span><span class="sxs-lookup"><span data-stu-id="f6eaf-406">Network</span></span> |
| <span data-ttu-id="f6eaf-407">404 (všechny)</span><span class="sxs-lookup"><span data-stu-id="f6eaf-407">404 (all)</span></span> |<span data-ttu-id="f6eaf-408">* StatusCode == 404</span><span class="sxs-lookup"><span data-stu-id="f6eaf-408">*StatusCode   == 404</span></span> |<span data-ttu-id="f6eaf-409">Všechny</span><span class="sxs-lookup"><span data-stu-id="f6eaf-409">All</span></span> |
| <span data-ttu-id="f6eaf-410">Sdíleného přístupového podpisu (SAS) autorizace problém</span><span class="sxs-lookup"><span data-stu-id="f6eaf-410">Shared Access Signature (SAS) authorization issue</span></span> |<span data-ttu-id="f6eaf-411">AzureStorageLog.RequestStatus == "SASAuthorizationError"</span><span class="sxs-lookup"><span data-stu-id="f6eaf-411">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span></span> |<span data-ttu-id="f6eaf-412">Síť</span><span class="sxs-lookup"><span data-stu-id="f6eaf-412">Network</span></span> |
| <span data-ttu-id="f6eaf-413">HTTP 409 (konflikt) zprávy</span><span class="sxs-lookup"><span data-stu-id="f6eaf-413">HTTP 409 (Conflict) messages</span></span> |<span data-ttu-id="f6eaf-414">HTTP. Response.StatusCode == 409</span><span class="sxs-lookup"><span data-stu-id="f6eaf-414">HTTP.Response.StatusCode   == 409</span></span> |<span data-ttu-id="f6eaf-415">Síť</span><span class="sxs-lookup"><span data-stu-id="f6eaf-415">Network</span></span> |
| <span data-ttu-id="f6eaf-416">409 (všechny)</span><span class="sxs-lookup"><span data-stu-id="f6eaf-416">409 (all)</span></span> |<span data-ttu-id="f6eaf-417">* StatusCode == 409</span><span class="sxs-lookup"><span data-stu-id="f6eaf-417">*StatusCode   == 409</span></span> |<span data-ttu-id="f6eaf-418">Všechny</span><span class="sxs-lookup"><span data-stu-id="f6eaf-418">All</span></span> |
| <span data-ttu-id="f6eaf-419">Nízká PercentSuccess nebo analytics položky protokolu mít operací s stav transakce ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="f6eaf-419">Low PercentSuccess or analytics log entries have   operations with transaction status of ClientOtherErrors</span></span> |<span data-ttu-id="f6eaf-420">AzureStorageLog.RequestStatus == "ClientOtherError"</span><span class="sxs-lookup"><span data-stu-id="f6eaf-420">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span></span> |<span data-ttu-id="f6eaf-421">Server</span><span class="sxs-lookup"><span data-stu-id="f6eaf-421">Server</span></span> |
| <span data-ttu-id="f6eaf-422">Nagle upozornění</span><span class="sxs-lookup"><span data-stu-id="f6eaf-422">Nagle   Warning</span></span> |<span data-ttu-id="f6eaf-423">((AzureStorageLog.EndToEndLatencyMS-AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS * 1.5)) a (AzureStorageLog.RequestPacketSize < 1460) a (AzureStorageLog.EndToEndLatencyMS - AzureStorageLog.ServerLatencyMS > = 200)</span><span class="sxs-lookup"><span data-stu-id="f6eaf-423">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) and (AzureStorageLog.RequestPacketSize <1460) and (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span></span> |<span data-ttu-id="f6eaf-424">Server</span><span class="sxs-lookup"><span data-stu-id="f6eaf-424">Server</span></span> |
| <span data-ttu-id="f6eaf-425">Doba v protokolech serveru a sítě</span><span class="sxs-lookup"><span data-stu-id="f6eaf-425">Range of   time in Server and Network logs</span></span> |<span data-ttu-id="f6eaf-426">#Timestamp > = 2014-10-20T16:36:38 a #Timestamp < = 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="f6eaf-426">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span></span> |<span data-ttu-id="f6eaf-427">Server sítě</span><span class="sxs-lookup"><span data-stu-id="f6eaf-427">Server, Network</span></span> |
| <span data-ttu-id="f6eaf-428">Rozsah čas v protokolech serveru</span><span class="sxs-lookup"><span data-stu-id="f6eaf-428">Range of   time in Server logs</span></span> |<span data-ttu-id="f6eaf-429">AzureStorageLog.Timestamp > = 2014-10-20T16:36:38 a AzureStorageLog.Timestamp < = 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="f6eaf-429">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 and AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span></span> |<span data-ttu-id="f6eaf-430">Server</span><span class="sxs-lookup"><span data-stu-id="f6eaf-430">Server</span></span> |

## <a name="next-steps"></a><span data-ttu-id="f6eaf-431">Další kroky</span><span class="sxs-lookup"><span data-stu-id="f6eaf-431">Next steps</span></span>
<span data-ttu-id="f6eaf-432">Další informace o odstraňování potíží začátku do konce scénáře ve službě Azure Storage naleznete v následujících zdrojích:</span><span class="sxs-lookup"><span data-stu-id="f6eaf-432">For more information about troubleshooting end-to-end scenarios in Azure Storage, see these resources:</span></span>

* [<span data-ttu-id="f6eaf-433">Monitorování, Diagnostika a řešení potíží s Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="f6eaf-433">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>](storage-monitoring-diagnosing-troubleshooting.md)
* [<span data-ttu-id="f6eaf-434">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="f6eaf-434">Storage Analytics</span></span>](http://msdn.microsoft.com/library/azure/hh343270.aspx)
* [<span data-ttu-id="f6eaf-435">Monitorování účtu úložiště na portálu Azure</span><span class="sxs-lookup"><span data-stu-id="f6eaf-435">Monitor a storage account in the Azure portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="f6eaf-436">Přenos dat pomocí nástroje příkazového řádku AzCopy</span><span class="sxs-lookup"><span data-stu-id="f6eaf-436">Transfer data with the AzCopy Command-Line Utility</span></span>](storage-use-azcopy.md)
* [<span data-ttu-id="f6eaf-437">Microsoft Message Analyzer operační Průvodce</span><span class="sxs-lookup"><span data-stu-id="f6eaf-437">Microsoft Message Analyzer Operating Guide</span></span>](http://technet.microsoft.com/library/jj649776.aspx)
