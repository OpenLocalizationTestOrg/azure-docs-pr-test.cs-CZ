---
title: "Podpora (CORS) pro sdílení prostředků různého původu | Microsoft Docs"
description: "Zjistěte, jak povolit podporu CORS pro služby Microsoft Azure Storage."
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 8d189d3ec3e6081dd37b912824f287cd75f39b35
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-the-azure-storage-services"></a><span data-ttu-id="8b2b1-103">Podpora služby Azure Storage (CORS) pro sdílení prostředků různého původu</span><span class="sxs-lookup"><span data-stu-id="8b2b1-103">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services</span></span>
<span data-ttu-id="8b2b1-104">Počínaje verzí 2013-08-15, podporu služby Azure storage sdílení prostředků různých původů (CORS) pro služby objektů Blob, tabulky, fronty a souboru.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-104">Beginning with version 2013-08-15, the Azure storage services support Cross-Origin Resource Sharing (CORS) for the Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="8b2b1-105">CORS je funkce protokolu HTTP, která umožňuje webové aplikace spuštěna v rámci jednoho domény přístup k prostředkům v jiné doméně.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-105">CORS is an HTTP feature that enables a web application running under one domain to access resources in another domain.</span></span> <span data-ttu-id="8b2b1-106">Webové prohlížeče implementovat omezení zabezpečení, označuje jako [stejného původu zásad](http://www.w3.org/Security/wiki/Same_Origin_Policy) která brání webové stránky z volání rozhraní API v jiné doméně. CORS poskytuje zabezpečení způsob, jak povolit jednu doménu (doménu původu) k volání rozhraní API v jiné doméně.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way to allow one domain (the origin domain) to call APIs in another domain.</span></span> <span data-ttu-id="8b2b1-107">Najdete v článku [specifikace CORS](http://www.w3.org/TR/cors/) podrobnosti o CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-107">See the [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="8b2b1-108">Můžete nastavit pravidla CORS samostatně pro každou službu úložiště, voláním [nastavit vlastnosti služby objektů Blob](https://msdn.microsoft.com/library/hh452235.aspx), [nastavit vlastnosti fronty služby](https://msdn.microsoft.com/library/hh452232.aspx), a [nastavit vlastnosti služby tabulky](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-108">You can set CORS rules individually for each of the storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="8b2b1-109">Jakmile jednou nastavíte pravidla CORS pro službu, pak správně ověřené požadavek na službu z jiné domény vyhodnotí k určení, zda je povoleno podle pravidel, který jste zadali.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-109">Once you set the CORS rules for the service, then a properly authenticated request made against the service from a different domain will be evaluated to determine whether it is allowed according to the rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="8b2b1-110">Všimněte si, že CORS není ověřovací mechanismus.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="8b2b1-111">Všechny požadavek směřovaný na prostředků úložiště, pokud je povoleno CORS musí mít buď správné ověření podpisu, nebo musí být provedeny pro prostředek veřejné.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="8b2b1-112">Pochopení požadavků CORS</span><span class="sxs-lookup"><span data-stu-id="8b2b1-112">Understanding CORS requests</span></span>
<span data-ttu-id="8b2b1-113">Požadavek CORS z počátku domény může obsahovat dva samostatné požadavky:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="8b2b1-114">Předběžný požadavek, který se dotazuje CORS omezení vynucená službou.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-114">A preflight request, which queries the CORS restrictions imposed by the service.</span></span> <span data-ttu-id="8b2b1-115">Předběžný požadavek není nutná, pokud je metoda žádosti [jednoduše](http://www.w3.org/TR/cors/), což znamená, GET, HEAD nebo POST.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-115">The preflight request is required unless the request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="8b2b1-116">Skutečný požadavek směřovaný na požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-116">The actual request, made against the desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="8b2b1-117">Předběžný požadavek</span><span class="sxs-lookup"><span data-stu-id="8b2b1-117">Preflight request</span></span>
<span data-ttu-id="8b2b1-118">Dotazy předběžný požadavek CORS omezení, které byly vytvořeny pro službu úložiště podle vlastníka účtu.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-118">The preflight request queries the CORS restrictions that have been established for the storage service by the account owner.</span></span> <span data-ttu-id="8b2b1-119">Webový prohlížeč (nebo jiné uživatelský agent) odešle požadavek na možnosti, která zahrnuje hlavičky požadavku, metoda a původu domény.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-119">The web browser (or other user agent) sends an OPTIONS request that includes the request headers, method and origin domain.</span></span> <span data-ttu-id="8b2b1-120">Služba úložiště vyhodnotí určený operaci na základě sady předem nakonfigurovaných pravidel CORS, která určit, které zdrojové domény, žádost metody a hlavičky požadavku může být na požadavek skutečné u prostředků úložiště.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-120">The storage service evaluates the intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="8b2b1-121">Pokud existuje pravidlo CORS, která odpovídá předběžný požadavek CORS je povolen pro službu, službu odpoví se stavovým kódem 200 (OK) a obsahuje požadované hlavičky Access-Control v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-121">If CORS is enabled for the service and there is a CORS rule that matches the preflight request, the service responds with status code 200 (OK), and includes the required Access-Control headers in the response.</span></span>

<span data-ttu-id="8b2b1-122">Pokud žádné pravidlo CORS odpovídá předběžný požadavek nebo CORS není povolen pro službu, službu bude odpovídat se stavovým kódem 403 (zakázáno).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-122">If CORS is not enabled for the service or no CORS rule matches the preflight request, the service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="8b2b1-123">Pokud možnosti žádost neobsahuje požadované hlavičky CORS (hlavičky původ a Access-Control-Request-Method), služba bude odpovídat se stavovým kódem 400 (Chybný požadavek).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-123">If the OPTIONS request doesn't contain the required CORS headers (the Origin and Access-Control-Request-Method headers), the service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="8b2b1-124">Všimněte si, že předběžný požadavek vyhodnotí proti služby (Blob, fronty a tabulky) a ne požadovaný prostředek.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-124">Note that a preflight request is evaluated against the service (Blob, Queue, and Table) and not against the requested resource.</span></span> <span data-ttu-id="8b2b1-125">Vlastníka účtu musí mít povolena CORS v rámci vlastnosti účtu služby v pořadí k úspěšné žádosti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-125">The account owner must have enabled CORS as part of the account service properties in order for the request to succeed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="8b2b1-126">Skutečné požadavku</span><span class="sxs-lookup"><span data-stu-id="8b2b1-126">Actual request</span></span>
<span data-ttu-id="8b2b1-127">Jakmile je přijímán předběžný požadavek a odpověď se vrátí, bude skutečné žádost u prostředků úložiště odeslat prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-127">Once the preflight request is accepted and the response is returned, the browser will dispatch the actual request against the storage resource.</span></span> <span data-ttu-id="8b2b1-128">V prohlížeči se zakáže skutečnou okamžitě požadavku, pokud předběžný požadavek byl odmítnut.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-128">The browser will deny the actual request immediately if the preflight request is rejected.</span></span>

<span data-ttu-id="8b2b1-129">Skutečný požadavek považován za normální požadavek na službu úložiště.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-129">The actual request is treated as normal request against the storage service.</span></span> <span data-ttu-id="8b2b1-130">Přítomnost hlavičky počátku označuje, že požadavek je požadavek CORS a služba zkontroluje odpovídající pravidla CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-130">The presence of the Origin header indicates that the request is a CORS request and the service will check the matching CORS rules.</span></span> <span data-ttu-id="8b2b1-131">Pokud je nalezena shoda, hlavičky Access-Control se přidá do odpovědi a odesílají zpět do klienta.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-131">If a match is found, the Access-Control headers are added to the response and sent back to the client.</span></span> <span data-ttu-id="8b2b1-132">Pokud není nalezena shoda, nebudou zobrazeny hlavičky CORS Access-Control.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-132">If a match is not found, the CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-the-azure-storage-services"></a><span data-ttu-id="8b2b1-133">Povolení CORS pro služby Azure Storage</span><span class="sxs-lookup"><span data-stu-id="8b2b1-133">Enabling CORS for the Azure Storage services</span></span>
<span data-ttu-id="8b2b1-134">Pravidla CORS jsou nastavené na úrovni služby, takže budete muset povolit nebo zakázat CORS pro každou službu (objekt Blob, fronty a tabulky) samostatně.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-134">CORS rules are set at the service level, so you need to enable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="8b2b1-135">Ve výchozím nastavení je zakázané CORS pro každou službu.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="8b2b1-136">K povolení sdílení CORS, budete muset nastavit vlastnosti příslušnou službu pomocí verze 2013-08-15 nebo novější a přidejte pravidla CORS do vlastnosti služby.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-136">To enable CORS, you need to set the appropriate service properties using version 2013-08-15 or later, and add CORS rules to the service properties.</span></span> <span data-ttu-id="8b2b1-137">Podrobnosti o tom, jak povolit nebo zakázat CORS pro služby a jak nastavit pravidla CORS, naleznete v [nastavit vlastnosti služby objektů Blob](https://msdn.microsoft.com/library/hh452235.aspx), [nastavit vlastnosti fronty služby](https://msdn.microsoft.com/library/hh452232.aspx), a [nastavit služby Table Vlastnosti](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-137">For details about how to enable or disable CORS for a service and how to set CORS rules, please refer to [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="8b2b1-138">Zde je ukázka jednoho pravidla CORS, zadaný prostřednictvím operace nastavit vlastnosti služby:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="8b2b1-139">Každý prvek uvedené v pravidle CORS je popsán dále:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-139">Each element included in the CORS rule is described below:</span></span>

* <span data-ttu-id="8b2b1-140">**AllowedOrigins**: zdrojové domény, které jsou povoleny vytvořte žádost na službě úložiště prostřednictvím CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-140">**AllowedOrigins**: The origin domains that are permitted to make a request against the storage service via CORS.</span></span> <span data-ttu-id="8b2b1-141">Doménu původu je doména, ze které žádost pochází.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-141">The origin domain is the domain from which the request originates.</span></span> <span data-ttu-id="8b2b1-142">Všimněte si, že počátek musí být velká a malá písmena přesně shodovat s původ, který stáří uživatel odešle do služby.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-142">Note that the origin must be an exact case-sensitive match with the origin that the user age sends to the service.</span></span> <span data-ttu-id="8b2b1-143">Můžete také použít zástupný znak ' *' povolit všechny zdrojové domény provádět požadavky pomocí CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-143">You can also use the wildcard character '*' to allow all origin domains to make requests via CORS.</span></span> <span data-ttu-id="8b2b1-144">V příkladu výše, domén [http://www.contoso.com](http://www.contoso.com) a [http://www.fabrikam.com](http://www.fabrikam.com) provádět požadavků na službu pomocí CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-144">In the example above, the domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against the service using CORS.</span></span>
* <span data-ttu-id="8b2b1-145">**AllowedMethods**: metody (příkazy požadavku HTTP), které doménu původu může použít pro požadavek CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-145">**AllowedMethods**: The methods (HTTP request verbs) that the origin domain may use for a CORS request.</span></span> <span data-ttu-id="8b2b1-146">V předchozím příkladu jsou povoleny pouze požadavky PUT a GET.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-146">In the example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="8b2b1-147">**AllowedHeaders**: hlavičky žádosti, které může zadejte doménu původu na požadavek CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-147">**AllowedHeaders**: The request headers that the origin domain may specify on the CORS request.</span></span> <span data-ttu-id="8b2b1-148">V předchozím příkladu jsou povolené všechny hlavičky metadata počínaje x-ms-meta-data, x-ms-meta cíl a x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-148">In the example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="8b2b1-149">Všimněte si, že zástupný znak ' *' označuje, že je povolit všechny hlavičky začíná zadanou předponou.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-149">Note that the wildcard character '*' indicates that any header beginning with the specified prefix is allowed.</span></span>
* <span data-ttu-id="8b2b1-150">**ExposedHeaders**: hlavičky odpovědi, které může odeslaný v odpovědi na požadavek CORS a zveřejněny v prohlížeči Issuer požadavku.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-150">**ExposedHeaders**: The response headers that may be sent in the response to the CORS request and exposed by the browser to the request issuer.</span></span> <span data-ttu-id="8b2b1-151">V příkladu nahoře je v prohlížeči pokyn ke zveřejnění počínaje x-ms-meta všechny hlavičky.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-151">In the example above, the browser is instructed to expose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="8b2b1-152">**MaxAgeInSeconds**: maximální velikost čas, že prohlížeče by měl mezipaměti možnosti předběžných požadavků.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-152">**MaxAgeInSeconds**: The maximum amount time that a browser should cache the preflight OPTIONS request.</span></span>

<span data-ttu-id="8b2b1-153">Podpora služby Azure storage zadání předponou hlavičky i **AllowedHeaders** a **ExposedHeaders** elementy.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-153">The Azure storage services support specifying prefixed headers for both the **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="8b2b1-154">Povolit kategorii hlaviček, můžete zadat předponu běžné do této kategorie spadají.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-154">To allow a category of headers, you can specify a common prefix to that category.</span></span> <span data-ttu-id="8b2b1-155">Například zadání *x-ms-meta** jako hlavičku předponou Určuje pravidlo, které bude odpovídat všechny hlavičky, které začínají s x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="8b2b1-156">Na pravidla CORS platí následující omezení:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-156">The following limitations apply to CORS rules:</span></span>

* <span data-ttu-id="8b2b1-157">Můžete zadat až pět pravidla CORS pro službu úložiště (objekt Blob, Table a Queue).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-157">You can specify up to five CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="8b2b1-158">Maximální velikost všech pravidla nastavení CORS v požadavku, s výjimkou značky XML nesmí být delší než 2 KB.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-158">The maximum size of all CORS rules settings on the request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="8b2b1-159">Délka povolené hlavičky, vystaveného hlavičce nebo povolený původ nesmí překročit 256 znaků.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-159">The length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="8b2b1-160">Povolené hlavičky a zveřejněné záhlaví může být buď:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="8b2b1-161">Literál hlavičky, kde je přesný záhlaví je zadaný název, například **x-ms-meta zpracovat**.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-161">Literal headers, where the exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="8b2b1-162">Je možné zadat maximálně 64 literálu hlavičky v požadavku.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-162">A maximum of 64 literal headers may be specified on the request.</span></span>
  * <span data-ttu-id="8b2b1-163">Předponu hlavičky, kde předponu hlavičky, která je k dispozici, jako například **x-ms-meta-data***.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-163">Prefixed headers, where a prefix of the header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="8b2b1-164">Zadání předpony tímto způsobem umožňuje nebo zpřístupní všechny hlavičky, který začíná danou předponu.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-164">Specifying a prefix in this manner allows or exposes any header that begins with the given prefix.</span></span> <span data-ttu-id="8b2b1-165">Je možné zadat maximálně dvě předponou hlavičky v požadavku.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-165">A maximum of two prefixed headers may be specified on the request.</span></span>
* <span data-ttu-id="8b2b1-166">Metody (nebo příkazy HTTP), zadaný v **AllowedMethods** element musí odpovídat metod podporovaných službou Azure storage rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-166">The methods (or HTTP verbs) specified in the **AllowedMethods** element must conform to the methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="8b2b1-167">Jsou podporované metody odstranění, GET, HEAD, SLOUČENÍ, POST, možnosti a PUT.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="8b2b1-168">Principy logiku vyhodnocení pravidla CORS</span><span class="sxs-lookup"><span data-stu-id="8b2b1-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="8b2b1-169">Když služba úložiště obdrží žádost o předběžný nebo skutečné, vyhodnotí tohoto požadavku na základě pravidel CORS, které jste vytvořili pro službu pomocí příslušné operace nastavit vlastnosti služby.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-169">When a storage service receives a preflight or actual request, it evaluates that request based on the CORS rules you have established for the service via the appropriate Set Service Properties operation.</span></span> <span data-ttu-id="8b2b1-170">Pravidla CORS jsou vyhodnocovány v pořadí, ve které byly nastavené v těle žádosti operace nastavit vlastnosti služby.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-170">CORS rules are evaluated in the order in which they were set in the request body of the Set Service Properties operation.</span></span>

<span data-ttu-id="8b2b1-171">CORS pravidla se vyhodnocují následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="8b2b1-172">Nejprve domén uvedené pro zkontrolován doménu původu požadavku **AllowedOrigins** element.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-172">First, the origin domain of the request is checked against the domains listed for the **AllowedOrigins** element.</span></span> <span data-ttu-id="8b2b1-173">Pokud doménu původu je uveden v seznamu, nebo jsou povoleny všechny domény se zástupným znakem ' *', pak bude pokračovat vyhodnocení pravidla.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-173">If the origin domain is included in the list, or all domains are allowed with the wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="8b2b1-174">Pokud doménu původu neuvedete, požadavek se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-174">If the origin domain is not included, then the request fails.</span></span>
2. <span data-ttu-id="8b2b1-175">V dalším kroku – metoda (nebo příkaz HTTP) žádosti je zkontrolován metody uvedené v **AllowedMethods** element.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-175">Next, the method (or HTTP verb) of the request is checked against the methods listed in the **AllowedMethods** element.</span></span> <span data-ttu-id="8b2b1-176">Metoda je uveden v seznamu, potom pokračuje pravidla vyhodnocení; Pokud ne, pak požadavek selže.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-176">If the method is included in the list, then rules evaluation proceeds; if not, then the request fails.</span></span>
3. <span data-ttu-id="8b2b1-177">Pokud požadavek odpovídá pravidla v jeho zdrojovou doménu a jeho metodou, je proces, který se vyhodnotí žádost a žádná další pravidla vybrán daného pravidla.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-177">If the request matches a rule in its origin domain and its method, that rule is selected to process the request and no further rules are evaluated.</span></span> <span data-ttu-id="8b2b1-178">Předtím, než mohlo být úspěšné žádosti, ale kontroluje všechny hlavičky zadaný v požadavku vůči hlavičky uvedené v **AllowedHeaders** element.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-178">Before the request can succeed, however, any headers specified on the request are checked against the headers listed in the **AllowedHeaders** element.</span></span> <span data-ttu-id="8b2b1-179">Pokud hlavičky odeslané neshodují povolené hlavičky, žádost skončí s chybou.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-179">If the headers sent do not match the allowed headers, the request fails.</span></span>

<span data-ttu-id="8b2b1-180">Vzhledem k tomu, že se zpracovávají v pořadí, v jakém že se nachází v textu požadavku, doporučujeme osvědčené postupy zadat nejvíc omezující pravidla s ohledem na zdroje první v seznamu, tak, aby tyto se vyhodnocují jako první.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-180">Since the rules are processed in the order they are present in the request body, best practices recommend that you specify the most restrictive rules with respect to origins first in the list, so that these are evaluated first.</span></span> <span data-ttu-id="8b2b1-181">Zadejte pravidla, která jsou méně omezující – například pravidla povolit všechny původy – na konci tohoto seznamu.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-181">Specify rules that are less restrictive – for example, a rule to allow all origins – at the end of the list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="8b2b1-182">Příklad – CORS pravidel vyhodnocení</span><span class="sxs-lookup"><span data-stu-id="8b2b1-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="8b2b1-183">Následující příklad ukazuje obsah částečné žádosti operace nastavit pravidla CORS pro služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-183">The following example shows a partial request body for an operation to set CORS rules for the storage services.</span></span> <span data-ttu-id="8b2b1-184">V tématu [nastavit vlastnosti služby objektů Blob](https://msdn.microsoft.com/library/hh452235.aspx), [nastavit vlastnosti fronty služby](https://msdn.microsoft.com/library/hh452232.aspx), a [nastavit vlastnosti služby Table](https://msdn.microsoft.com/library/hh452240.aspx) informace o vytváření žádosti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing the request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="8b2b1-185">Dále je třeba zvážit následující požadavků CORS:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-185">Next, consider the following CORS requests:</span></span>

| <span data-ttu-id="8b2b1-186">Žádost</span><span class="sxs-lookup"><span data-stu-id="8b2b1-186">Request</span></span> |  |  | <span data-ttu-id="8b2b1-187">Odpověď</span><span class="sxs-lookup"><span data-stu-id="8b2b1-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="8b2b1-188">**– Metoda**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-188">**Method**</span></span> |<span data-ttu-id="8b2b1-189">**Počátek**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-189">**Origin**</span></span> |<span data-ttu-id="8b2b1-190">**Hlavičky požadavku**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-190">**Request Headers**</span></span> |<span data-ttu-id="8b2b1-191">**Pravidla shody**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-191">**Rule Match**</span></span> |<span data-ttu-id="8b2b1-192">**Výsledek**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-192">**Result**</span></span> |
| <span data-ttu-id="8b2b1-193">**PUT**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-193">**PUT**</span></span> |<span data-ttu-id="8b2b1-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="8b2b1-194">http://www.contoso.com</span></span> |<span data-ttu-id="8b2b1-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="8b2b1-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="8b2b1-196">První pravidlo</span><span class="sxs-lookup"><span data-stu-id="8b2b1-196">First rule</span></span> |<span data-ttu-id="8b2b1-197">Úspěch</span><span class="sxs-lookup"><span data-stu-id="8b2b1-197">Success</span></span> |
| <span data-ttu-id="8b2b1-198">**GET**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-198">**GET**</span></span> |<span data-ttu-id="8b2b1-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="8b2b1-199">http://www.contoso.com</span></span> |<span data-ttu-id="8b2b1-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="8b2b1-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="8b2b1-201">Druhé pravidlo</span><span class="sxs-lookup"><span data-stu-id="8b2b1-201">Second rule</span></span> |<span data-ttu-id="8b2b1-202">Úspěch</span><span class="sxs-lookup"><span data-stu-id="8b2b1-202">Success</span></span> |
| <span data-ttu-id="8b2b1-203">**GET**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-203">**GET**</span></span> |<span data-ttu-id="8b2b1-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="8b2b1-204">http://www.contoso.com</span></span> |<span data-ttu-id="8b2b1-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="8b2b1-205">x-ms-client-request-id</span></span> |<span data-ttu-id="8b2b1-206">Druhé pravidlo</span><span class="sxs-lookup"><span data-stu-id="8b2b1-206">Second rule</span></span> |<span data-ttu-id="8b2b1-207">Selhání</span><span class="sxs-lookup"><span data-stu-id="8b2b1-207">Failure</span></span> |

<span data-ttu-id="8b2b1-208">První požadavek odpovídá první pravidlo – doménu původu odpovídá povolené zdroje, metoda odpovídá povolené metody a hlavičky odpovídá povolené hlavičky – a proto je úspěšné.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-208">The first request matches the first rule – the origin domain matches the allowed origins, the method matches the allowed methods, and the header matches the allowed headers – and so succeeds.</span></span>

<span data-ttu-id="8b2b1-209">Druhý žádosti neodpovídá první pravidlo, protože metoda neodpovídá povolené metody.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-209">The second request does not match the first rule because the method does not match the allowed methods.</span></span> <span data-ttu-id="8b2b1-210">Pravidlo druhého, je však, shodovala, takže operace proběhne úspěšně.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-210">It does, however, match the second rule, so it succeeds.</span></span>

<span data-ttu-id="8b2b1-211">Třetí požadavek odpovídá druhé pravidlo v jeho zdrojovou doménu a metodu, takže žádná další pravidla se vyhodnocují.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-211">The third request matches the second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="8b2b1-212">Ale *hlavičky x-ms-client-request-id* není povolena pravidlo druhého, takže požadavek selže, bez ohledu na skutečnost, že sémantika třetí pravidlo by mít povoleno ho proběhla úspěšně.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-212">However, the *x-ms-client-request-id header* is not allowed by the second rule, so the request fails, despite the fact that the semantics of the third rule would have allowed it to succeed.</span></span>

> [!NOTE]
> <span data-ttu-id="8b2b1-213">I když tento příklad ukazuje méně přísná pravidla před více omezující jeden, obecně osvědčeným postupem je nejdřív seznam nejvíc omezující pravidel.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-213">Although this example shows a less restrictive rule before a more restrictive one, in general the best practice is to list the most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-the-vary-header-is-set"></a><span data-ttu-id="8b2b1-214">Pochopení, jak nastavit měnit hlavičky</span><span class="sxs-lookup"><span data-stu-id="8b2b1-214">Understanding how the Vary header is set</span></span>
<span data-ttu-id="8b2b1-215">*Měnit* záhlaví je standardní hlavičku HTTP/1.1 skládající se z sadu pole hlavičky požadavku, které poradit agenta prohlížeče nebo uživatele o kritériích zvolená serverem pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-215">The *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise the browser or user agent about the criteria that were selected by the server to process the request.</span></span> <span data-ttu-id="8b2b1-216">*Měnit* záhlaví se většinou používá pro ukládání do mezipaměti podle proxy, prohlížečů a sítím CDN, které ho použít k určení, jak odpověď do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-216">The *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it to determine how the response should be cached.</span></span> <span data-ttu-id="8b2b1-217">Podrobnosti najdete v tématu specifikace [měnit hlavičky](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-217">For details, see the specification for the [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="8b2b1-218">Pokud odpověď z požadavek CORS do mezipaměti prohlížeče nebo jiné uživatelského agenta, doménu původu se uloží do mezipaměti jako povolený původ.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-218">When the browser or another user agent caches the response from a CORS request, the origin domain is cached as the allowed origin.</span></span> <span data-ttu-id="8b2b1-219">Když druhé domény vydá stejnou žádost o prostředek úložiště při mezipaměti je aktivní, uživatelský agent načte doménu původu v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-219">When a second domain issues the same request for a storage resource while the cache is active, the user agent retrieves the cached origin domain.</span></span> <span data-ttu-id="8b2b1-220">Druhá doména neodpovídá domény v mezipaměti, takže požadavek selže, když by jinak úspěšné.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-220">The second domain does not match the cached domain, so the request fails when it would otherwise succeed.</span></span> <span data-ttu-id="8b2b1-221">V některých případech, Azure Storage, nastaví hlavičku měnit na **původu** dáte pokyn, aby uživatelský agent odeslat další požadavek CORS služby, pokud žádajícího domény se liší od počátku uložené v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-221">In certain cases, Azure Storage sets the Vary header to **Origin** to instruct the user agent to send the subsequent CORS request to the service when the requesting domain differs from the cached origin.</span></span>

<span data-ttu-id="8b2b1-222">Azure Storage nastaví *měnit* hlavičky k **původu** skutečné požadavky GET nebo HEAD v následujících případech:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-222">Azure Storage sets the *Vary* header to **Origin** for actual GET/HEAD requests in the following cases:</span></span>

* <span data-ttu-id="8b2b1-223">Když je požadovaný původ přesně odpovídá povolený původ definované pravidlem CORS.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-223">When the request origin exactly matches the allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="8b2b1-224">Jako přesnou shodu pravidla CORS nesmí obsahovat zástupný znak ' * ' znak.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-224">To be an exact match, the CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="8b2b1-225">Neexistuje žádné pravidlo odpovídající požadovaný původ, ale je povolená CORS pro služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-225">There is no rule matching the request origin, but CORS is enabled for the storage service.</span></span>

<span data-ttu-id="8b2b1-226">V případě, kdy požadavek GET nebo HEAD odpovídá pravidla CORS, která umožňuje všechny původy z odpovědi vyplývá, že povolené jsou všechny zdroje a mezipaměti agenta uživatele umožní následné žádosti z domén počátek při mezipaměti je aktivní.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-226">In the case where a GET/HEAD request matches a CORS rule that allows all origins, the response indicates that all origins are allowed, and the user agent cache will allow subsequent requests from any origin domain while the cache is active.</span></span>

<span data-ttu-id="8b2b1-227">Všimněte si, že pro požadavky na použití jiných metod než GET nebo HEAD, služby storage nenastaví měnit hlavičky vzhledem k tomu, že se neukládají do mezipaměti odpovědi na tyto metody Uživatelští agenti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-227">Note that for requests using methods other than GET/HEAD, the storage services will not set the Vary header, since responses to these methods are not cached by user agents.</span></span>

<span data-ttu-id="8b2b1-228">Následující tabulka uvádí, jak Azure storage bude reagovat na požadavky GET nebo HEAD podle výše uvedených případech:</span><span class="sxs-lookup"><span data-stu-id="8b2b1-228">The following table indicates how Azure storage will respond to GET/HEAD requests based on the previously mentioned cases:</span></span>

| <span data-ttu-id="8b2b1-229">Žádost</span><span class="sxs-lookup"><span data-stu-id="8b2b1-229">Request</span></span> | <span data-ttu-id="8b2b1-230">Nastavení účtu a výsledek vyhodnocení pravidla</span><span class="sxs-lookup"><span data-stu-id="8b2b1-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="8b2b1-231">Odpověď</span><span class="sxs-lookup"><span data-stu-id="8b2b1-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="8b2b1-232">**Původ hlavičky v požadavku**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-232">**Origin header present on request**</span></span> |<span data-ttu-id="8b2b1-233">**CORS pravidel zadaný pro tuto službu**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="8b2b1-234">**Existuje odpovídající pravidlo, které umožňuje všechny původy (*)**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="8b2b1-235">**Existuje odpovídající pravidlo pro shodu přesný počátek**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="8b2b1-236">**Odpověď obsahuje záhlaví měnit nastavení pro počátek**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-236">**Response includes Vary header set to Origin**</span></span> |<span data-ttu-id="8b2b1-237">**Odpověď obsahuje Access-Control-povolené-Origin: "*"**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="8b2b1-238">**Odpověď obsahuje Access-Control-zveřejněné-Headers**</span><span class="sxs-lookup"><span data-stu-id="8b2b1-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="8b2b1-239">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-239">No</span></span> |<span data-ttu-id="8b2b1-240">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-240">No</span></span> |<span data-ttu-id="8b2b1-241">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-241">No</span></span> |<span data-ttu-id="8b2b1-242">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-242">No</span></span> |<span data-ttu-id="8b2b1-243">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-243">No</span></span> |<span data-ttu-id="8b2b1-244">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-244">No</span></span> |<span data-ttu-id="8b2b1-245">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-245">No</span></span> |
| <span data-ttu-id="8b2b1-246">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-246">No</span></span> |<span data-ttu-id="8b2b1-247">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-247">Yes</span></span> |<span data-ttu-id="8b2b1-248">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-248">No</span></span> |<span data-ttu-id="8b2b1-249">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-249">No</span></span> |<span data-ttu-id="8b2b1-250">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-250">Yes</span></span> |<span data-ttu-id="8b2b1-251">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-251">No</span></span> |<span data-ttu-id="8b2b1-252">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-252">No</span></span> |
| <span data-ttu-id="8b2b1-253">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-253">No</span></span> |<span data-ttu-id="8b2b1-254">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-254">Yes</span></span> |<span data-ttu-id="8b2b1-255">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-255">Yes</span></span> |<span data-ttu-id="8b2b1-256">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-256">No</span></span> |<span data-ttu-id="8b2b1-257">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-257">No</span></span> |<span data-ttu-id="8b2b1-258">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-258">Yes</span></span> |<span data-ttu-id="8b2b1-259">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-259">Yes</span></span> |
| <span data-ttu-id="8b2b1-260">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-260">Yes</span></span> |<span data-ttu-id="8b2b1-261">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-261">No</span></span> |<span data-ttu-id="8b2b1-262">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-262">No</span></span> |<span data-ttu-id="8b2b1-263">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-263">No</span></span> |<span data-ttu-id="8b2b1-264">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-264">No</span></span> |<span data-ttu-id="8b2b1-265">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-265">No</span></span> |<span data-ttu-id="8b2b1-266">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-266">No</span></span> |
| <span data-ttu-id="8b2b1-267">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-267">Yes</span></span> |<span data-ttu-id="8b2b1-268">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-268">Yes</span></span> |<span data-ttu-id="8b2b1-269">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-269">No</span></span> |<span data-ttu-id="8b2b1-270">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-270">Yes</span></span> |<span data-ttu-id="8b2b1-271">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-271">Yes</span></span> |<span data-ttu-id="8b2b1-272">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-272">No</span></span> |<span data-ttu-id="8b2b1-273">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-273">Yes</span></span> |
| <span data-ttu-id="8b2b1-274">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-274">Yes</span></span> |<span data-ttu-id="8b2b1-275">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-275">Yes</span></span> |<span data-ttu-id="8b2b1-276">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-276">No</span></span> |<span data-ttu-id="8b2b1-277">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-277">No</span></span> |<span data-ttu-id="8b2b1-278">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-278">Yes</span></span> |<span data-ttu-id="8b2b1-279">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-279">No</span></span> |<span data-ttu-id="8b2b1-280">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-280">No</span></span> |
| <span data-ttu-id="8b2b1-281">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-281">Yes</span></span> |<span data-ttu-id="8b2b1-282">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-282">Yes</span></span> |<span data-ttu-id="8b2b1-283">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-283">Yes</span></span> |<span data-ttu-id="8b2b1-284">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-284">No</span></span> |<span data-ttu-id="8b2b1-285">Ne</span><span class="sxs-lookup"><span data-stu-id="8b2b1-285">No</span></span> |<span data-ttu-id="8b2b1-286">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-286">Yes</span></span> |<span data-ttu-id="8b2b1-287">Ano</span><span class="sxs-lookup"><span data-stu-id="8b2b1-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="8b2b1-288">Fakturace požadavků CORS</span><span class="sxs-lookup"><span data-stu-id="8b2b1-288">Billing for CORS requests</span></span>
<span data-ttu-id="8b2b1-289">Kontrola před výstupem úspěšné požadavky se účtují, pokud jste povolili CORS pro všechny služby storage pro váš účet (voláním [nastavit vlastnosti služby objektů Blob](https://msdn.microsoft.com/library/hh452235.aspx), [nastavit vlastnosti fronty služby](https://msdn.microsoft.com/library/hh452232.aspx), nebo [Nastavit vlastnosti služby Table](https://msdn.microsoft.com/library/hh452240.aspx)).</span><span class="sxs-lookup"><span data-stu-id="8b2b1-289">Successful preflight requests are billed if you have enabled CORS for any of the storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="8b2b1-290">Chcete-li minimalizovat náklady, zvažte nastavení **MaxAgeInSeconds** element ve vaší CORS pravidla velké hodnoty tak, aby uživatelský agent ukládá do mezipaměti žádosti.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-290">To minimize charges, consider setting the **MaxAgeInSeconds** element in your CORS rules to a large value so that the user agent caches the request.</span></span>

<span data-ttu-id="8b2b1-291">Neúspěšná předběžných požadavků, nebude platit.</span><span class="sxs-lookup"><span data-stu-id="8b2b1-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8b2b1-292">Další kroky</span><span class="sxs-lookup"><span data-stu-id="8b2b1-292">Next steps</span></span>
[<span data-ttu-id="8b2b1-293">Nastavit vlastnosti služby objektů Blob</span><span class="sxs-lookup"><span data-stu-id="8b2b1-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="8b2b1-294">Nastavit vlastnosti fronty služby</span><span class="sxs-lookup"><span data-stu-id="8b2b1-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="8b2b1-295">Nastavit vlastnosti služby Table</span><span class="sxs-lookup"><span data-stu-id="8b2b1-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="8b2b1-296">Specifikace pro sdílení prostředků různého původu W3C</span><span class="sxs-lookup"><span data-stu-id="8b2b1-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)

