---
title: "Monitorování, Diagnostika a řešení potíží s Azure Storage | Microsoft Docs"
description: "Použijte funkce, jako jsou analytika úložiště, protokolování klienta a další nástroje třetích stran k identifikaci, diagnostikovat a vyřešit problémy související s Azure Storage."
services: storage
documentationcenter: 
author: fhryo-msft
manager: jahogg
editor: tysonn
ms.assetid: d1e87d98-c763-4caa-ba20-2cf85f853303
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/11/2017
ms.author: fhryo-msft
ms.openlocfilehash: 12db22d1444dc07a45db430c01407f9398e13bad
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="monitor-diagnose-and-troubleshoot-microsoft-azure-storage"></a><span data-ttu-id="33531-103">Monitorování, diagnostika a řešení problémů s Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="33531-103">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>
[!INCLUDE [storage-selector-portal-monitoring-diagnosing-troubleshooting](../../../includes/storage-selector-portal-monitoring-diagnosing-troubleshooting.md)]

## <a name="overview"></a><span data-ttu-id="33531-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="33531-104">Overview</span></span>
<span data-ttu-id="33531-105">Diagnostika a řešení potíží v distribuované aplikace hostované v cloudovém prostředí může být složitější než v tradiční prostředích.</span><span class="sxs-lookup"><span data-stu-id="33531-105">Diagnosing and troubleshooting issues in a distributed application hosted in a cloud environment can be more complex than in traditional environments.</span></span> <span data-ttu-id="33531-106">V infrastruktuře PaaS nebo IaaS místně na mobilním zařízení, nebo určitou kombinaci těchto mohou být aplikace nasazeny.</span><span class="sxs-lookup"><span data-stu-id="33531-106">Applications can be deployed in a PaaS or IaaS infrastructure, on premises, on a mobile device, or in some combination of these.</span></span> <span data-ttu-id="33531-107">Obvykle síťový provoz vaší aplikace můžou procházet veřejné a privátní sítě a vaše aplikace může používat více technologií úložiště, jako je například Microsoft Azure úložiště tabulek, objekty BLOB, fronty nebo ukládá soubory kromě další data, například jako relační a databáze v dokumentu.</span><span class="sxs-lookup"><span data-stu-id="33531-107">Typically, your application's network traffic may traverse public and private networks and your application may use multiple storage technologies such as Microsoft Azure Storage Tables, Blobs, Queues, or Files in addition to other data stores such as relational and document databases.</span></span>

<span data-ttu-id="33531-108">Ke správě těchto aplikací úspěšně by je aktivně sledovat a pochopit, jak diagnostikovat a vyřešit všechny aspekty je a jejich závislé technologie.</span><span class="sxs-lookup"><span data-stu-id="33531-108">To manage such applications successfully you should monitor them proactively and understand how to diagnose and troubleshoot all aspects of them and their dependent technologies.</span></span> <span data-ttu-id="33531-109">Jako uživatel služby Azure Storage doporučujeme neustále monitorovat služby úložiště, které vaše aplikace používá pro všechny neočekávané změny v chování (například nižší než obvyklé odezvy) a ke shromažďování dat podrobnější a k analýze problému podrobněji, používat protokolování.</span><span class="sxs-lookup"><span data-stu-id="33531-109">As a user of Azure Storage services, you should continuously monitor the Storage services your application uses for any unexpected changes in behavior (such as slower than usual response times), and use logging to collect more detailed data and to analyze a problem in depth.</span></span> <span data-ttu-id="33531-110">Diagnostické informace, které můžete získat z monitorování i protokolování vám pomůže určit hlavní příčinu potíže vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-110">The diagnostics information you obtain from both monitoring and logging will help you to determine the root cause of the issue your application encountered.</span></span> <span data-ttu-id="33531-111">Potom můžete při řešení potíží a určit příslušné kroky, které můžete provést při jeho řešení.</span><span class="sxs-lookup"><span data-stu-id="33531-111">Then you can troubleshoot the issue and determine the appropriate steps you can take to remediate it.</span></span> <span data-ttu-id="33531-112">Úložiště Azure je základní služby Azure a je důležitou součástí většina řešení, které zákazníci nasadit na infrastrukturu Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-112">Azure Storage is a core Azure service, and forms an important part of the majority of solutions that customers deploy to the Azure infrastructure.</span></span> <span data-ttu-id="33531-113">Úložiště Azure poskytuje funkce pro zjednodušení monitorování, Diagnostika a řešení potíží problémů s úložištěm ve vaší cloudové aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-113">Azure Storage includes capabilities to simplify monitoring, diagnosing, and troubleshooting storage issues in your cloud-based applications.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-114">Azure File storage protokolování v tuto chvíli nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="33531-114">The Azure File storage does not support logging at this time.</span></span>
> 

<span data-ttu-id="33531-115">Praktické informace na začátku do konce odstraňování potíží v aplikacích Azure Storage najdete v tématu [na kompletní řešení problémů pomocí Azure Storage Metrics a protokolování, AzCopy a Message Analyzer](../storage-e2e-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="33531-115">For a hands-on guide to end-to-end troubleshooting in Azure Storage applications, see [End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer](../storage-e2e-troubleshooting.md).</span></span>

* <span data-ttu-id="33531-116">[Úvod]</span><span class="sxs-lookup"><span data-stu-id="33531-116">[Introduction]</span></span>
  * <span data-ttu-id="33531-117">[Uspořádání Tato příručka]</span><span class="sxs-lookup"><span data-stu-id="33531-117">[How this guide is organized]</span></span>
* <span data-ttu-id="33531-118">[monitorování vaší služby úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-118">[Monitoring your storage service]</span></span>
  * <span data-ttu-id="33531-119">[Monitorování stavu služby]</span><span class="sxs-lookup"><span data-stu-id="33531-119">[Monitoring service health]</span></span>
  * <span data-ttu-id="33531-120">[Monitorování kapacity]</span><span class="sxs-lookup"><span data-stu-id="33531-120">[Monitoring capacity]</span></span>
  * <span data-ttu-id="33531-121">[Monitorování dostupnosti]</span><span class="sxs-lookup"><span data-stu-id="33531-121">[Monitoring availability]</span></span>
  * <span data-ttu-id="33531-122">[Sledování výkonu]</span><span class="sxs-lookup"><span data-stu-id="33531-122">[Monitoring performance]</span></span>
* <span data-ttu-id="33531-123">[diagnostice problémů s úložištěm]</span><span class="sxs-lookup"><span data-stu-id="33531-123">[Diagnosing storage issues]</span></span>
  * <span data-ttu-id="33531-124">[Problémy v oblasti služby stavu]</span><span class="sxs-lookup"><span data-stu-id="33531-124">[Service health issues]</span></span>
  * <span data-ttu-id="33531-125">[Problémy s výkonem]</span><span class="sxs-lookup"><span data-stu-id="33531-125">[Performance issues]</span></span>
  * <span data-ttu-id="33531-126">[Diagnostikování chyb]</span><span class="sxs-lookup"><span data-stu-id="33531-126">[Diagnosing errors]</span></span>
  * <span data-ttu-id="33531-127">[Emulátor problémů s úložištěm]</span><span class="sxs-lookup"><span data-stu-id="33531-127">[Storage emulator issues]</span></span>
  * <span data-ttu-id="33531-128">[Nástroje protokolování úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-128">[Storage logging tools]</span></span>
  * <span data-ttu-id="33531-129">[Pomocí nástroje protokolování]</span><span class="sxs-lookup"><span data-stu-id="33531-129">[Using network logging tools]</span></span>
* <span data-ttu-id="33531-130">[začátku do konce trasování]</span><span class="sxs-lookup"><span data-stu-id="33531-130">[End-to-end tracing]</span></span>
  * <span data-ttu-id="33531-131">[Korelace data protokolu]</span><span class="sxs-lookup"><span data-stu-id="33531-131">[Correlating log data]</span></span>
  * <span data-ttu-id="33531-132">[ID žádosti klienta]</span><span class="sxs-lookup"><span data-stu-id="33531-132">[Client request ID]</span></span>
  * <span data-ttu-id="33531-133">[ID žádosti serveru]</span><span class="sxs-lookup"><span data-stu-id="33531-133">[Server request ID]</span></span>
  * <span data-ttu-id="33531-134">[Časová razítka]</span><span class="sxs-lookup"><span data-stu-id="33531-134">[Timestamps]</span></span>
* <span data-ttu-id="33531-135">[pokyny při řešení potíží]</span><span class="sxs-lookup"><span data-stu-id="33531-135">[Troubleshooting guidance]</span></span>
  * <span data-ttu-id="33531-136">[metriky ukazují AverageE2ELatency vysoké a nízké AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="33531-136">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
  * <span data-ttu-id="33531-137">[Metrika ukazuje nízkou hodnotu AverageE2ELatency i hodnotu AverageServerLatency, ale latence klienta je vysoká]</span><span class="sxs-lookup"><span data-stu-id="33531-137">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]</span></span>
  * <span data-ttu-id="33531-138">[Metrika ukazuje vysokou hodnotu AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="33531-138">[Metrics show high AverageServerLatency]</span></span>
  * <span data-ttu-id="33531-139">[Dochází k neočekávaným zpožděním při doručování zpráv ve frontě]</span><span class="sxs-lookup"><span data-stu-id="33531-139">[You are experiencing unexpected delays in message delivery on a queue]</span></span>
  * <span data-ttu-id="33531-140">[metriky způsobit nárůst PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="33531-140">[Metrics show an increase in PercentThrottlingError]</span></span>
  * <span data-ttu-id="33531-141">[metriky způsobit nárůst PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="33531-141">[Metrics show an increase in PercentTimeoutError]</span></span>
  * <span data-ttu-id="33531-142">[Metrika ukazuje zvýšení u PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="33531-142">[Metrics show an increase in PercentNetworkError]</span></span>
  * <span data-ttu-id="33531-143">[Klient je přijímání zpráv protokolu HTTP 403 (zakázáno)]</span><span class="sxs-lookup"><span data-stu-id="33531-143">[The client is receiving HTTP 403 (Forbidden) messages]</span></span>
  * <span data-ttu-id="33531-144">[Klient je přijímání zpráv HTTP 404 (není nalezena)]</span><span class="sxs-lookup"><span data-stu-id="33531-144">[The client is receiving HTTP 404 (Not found) messages]</span></span>
  * <span data-ttu-id="33531-145">[Klient je přijímání zpráv protokolu HTTP 409 (konflikt)]</span><span class="sxs-lookup"><span data-stu-id="33531-145">[The client is receiving HTTP 409 (Conflict) messages]</span></span>
  * <span data-ttu-id="33531-146">[metriky ukazují nízkou PercentSuccess nebo položky protokolu analýzy mít operací s stav transakce ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="33531-146">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>
  * <span data-ttu-id="33531-147">[Metriky kapacity způsobit neočekávané nárůst využití kapacity úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-147">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>
  * <span data-ttu-id="33531-148">[Dochází k neočekávané restartování virtuálních počítačů, které mají velký počet připojených virtuálních pevných disků]</span><span class="sxs-lookup"><span data-stu-id="33531-148">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>
  * <span data-ttu-id="33531-149">[Problém vyplývá z pomocí emulátoru úložiště pro vývoj nebo testování]</span><span class="sxs-lookup"><span data-stu-id="33531-149">[Your issue arises from using the storage emulator for development or test]</span></span>
  * <span data-ttu-id="33531-150">[Narazíte na potíže s instalací sady Azure SDK pro .NET]</span><span class="sxs-lookup"><span data-stu-id="33531-150">[You are encountering problems installing the Azure SDK for .NET]</span></span>
  * <span data-ttu-id="33531-151">[Máte jiný problém se službou úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-151">[You have a different issue with a storage service]</span></span>
  * [<span data-ttu-id="33531-152">Řešení potíží s Azure File storage s Windows</span><span class="sxs-lookup"><span data-stu-id="33531-152">Troubleshooting Azure File storage issues with Windows</span></span>](../files/storage-troubleshoot-windows-file-connection-problems.md)   
  * [<span data-ttu-id="33531-153">Řešení potíží s Azure File storage s Linuxem</span><span class="sxs-lookup"><span data-stu-id="33531-153">Troubleshooting Azure File storage issues with Linux</span></span>](../files/storage-troubleshoot-linux-file-connection-problems.md)
* <span data-ttu-id="33531-154">[přílohy]</span><span class="sxs-lookup"><span data-stu-id="33531-154">[Appendices]</span></span>
  * <span data-ttu-id="33531-155">[dodatku 1: pomocí Fiddleru pro zachycení přenosu dat HTTP a HTTPS]</span><span class="sxs-lookup"><span data-stu-id="33531-155">[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]</span></span>
  * <span data-ttu-id="33531-156">[příloze 2: zachycení síťového provozu pomocí Wireshark]</span><span class="sxs-lookup"><span data-stu-id="33531-156">[Appendix 2: Using Wireshark to capture network traffic]</span></span>
  * <span data-ttu-id="33531-157">[příloha 3: použití Microsoft Message Analyzer pro zachycení síťového provozu]</span><span class="sxs-lookup"><span data-stu-id="33531-157">[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]</span></span>
  * <span data-ttu-id="33531-158">[Dodatek 4: Zobrazení metriky a protokolovat data pomocí aplikace Excel]</span><span class="sxs-lookup"><span data-stu-id="33531-158">[Appendix 4: Using Excel to view metrics and log data]</span></span>
  * <span data-ttu-id="33531-159">[Dodatek 5: Monitorování pomocí služby Application Insights pro Visual Studio Team Services]</span><span class="sxs-lookup"><span data-stu-id="33531-159">[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]</span></span>

## <span data-ttu-id="33531-160"><a name="introduction"></a>Úvod</span><span class="sxs-lookup"><span data-stu-id="33531-160"><a name="introduction"></a>Introduction</span></span>
<span data-ttu-id="33531-161">Tento průvodce vám ukáže, jak používat funkce, jako jsou například analýzy úložiště Azure, problémům klienta protokolování v Klientská knihovna pro úložiště Azure a další nástroje třetích stran k identifikaci, Diagnostika a řešení potíží s Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="33531-161">This guide shows you how to use features such as Azure Storage Analytics, client-side logging in the Azure Storage Client Library, and other third-party tools to identify, diagnose, and troubleshoot Azure Storage related issues.</span></span>

![][1]

<span data-ttu-id="33531-162">Tato příručka je určena především číst vývojáři online služeb, které používají služby úložiště Azure a IT Profesionálové zodpovědní za správu těchto online služeb.</span><span class="sxs-lookup"><span data-stu-id="33531-162">This guide is intended to be read primarily by developers of online services that use Azure Storage Services and IT Pros responsible for managing such online services.</span></span> <span data-ttu-id="33531-163">Cílem této příručky je:</span><span class="sxs-lookup"><span data-stu-id="33531-163">The goals of this guide are:</span></span>

* <span data-ttu-id="33531-164">Chcete-li udržovat stav a výkon svých účtů Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="33531-164">To help you maintain the health and performance of your Azure Storage accounts.</span></span>
* <span data-ttu-id="33531-165">Abyste si udělali potřebné procesy a nástroje, které vám pomohou rozhodnout, pokud se problém nebo potíže v aplikaci má vztah k Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="33531-165">To provide you with the necessary processes and tools to help you decide if an issue or problem in an application relates to Azure Storage.</span></span>
* <span data-ttu-id="33531-166">Abyste měli řešitelné pokyny pro řešení problémů souvisejících s úložištěm Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-166">To provide you with actionable guidance for resolving problems related to Azure Storage.</span></span>

### <span data-ttu-id="33531-167"><a name="how-this-guide-is-organized"></a>Uspořádání Tato příručka</span><span class="sxs-lookup"><span data-stu-id="33531-167"><a name="how-this-guide-is-organized"></a>How this guide is organized</span></span>
<span data-ttu-id="33531-168">V části "[monitorování vaší služby úložiště]" popisuje, jak sledovat stav a výkon vašich služeb Azure Storage pomocí Azure Storage Analytics Metrics (Storage Metrics).</span><span class="sxs-lookup"><span data-stu-id="33531-168">The section "[Monitoring your storage service]" describes how to monitor the health and performance of your Azure Storage services using Azure Storage Analytics Metrics (Storage Metrics).</span></span>

<span data-ttu-id="33531-169">V části "[diagnostice problémů s úložištěm]" popisuje, jak diagnostikovat problémy s Azure Storage Analytics protokolování (úložiště protokolování).</span><span class="sxs-lookup"><span data-stu-id="33531-169">The section "[Diagnosing storage issues]" describes how to diagnose issues using Azure Storage Analytics Logging (Storage Logging).</span></span> <span data-ttu-id="33531-170">Také popisuje, jak povolit protokolování na straně klienta pomocí možností v jednom z knihovny klienta například Klientská knihovna pro úložiště pro .NET a sady Azure SDK pro jazyk Java.</span><span class="sxs-lookup"><span data-stu-id="33531-170">It also describes how to enable client-side logging using the facilities in one of the client libraries such as the Storage Client Library for .NET or the Azure SDK for Java.</span></span>

<span data-ttu-id="33531-171">V části "[začátku do konce trasování]" popisuje, jak můžete porovnat informace obsažené v různých metriky, dat a souborů protokolu.</span><span class="sxs-lookup"><span data-stu-id="33531-171">The section "[End-to-end tracing]" describes how you can correlate the information contained in various log files and metrics data.</span></span>

<span data-ttu-id="33531-172">V části "[pokyny při řešení potíží]" poskytuje pokyny při řešení potíží pro některé běžné související s úložištěm problémů setkat.</span><span class="sxs-lookup"><span data-stu-id="33531-172">The section "[Troubleshooting guidance]" provides troubleshooting guidance for some of the common storage-related issues you might encounter.</span></span>

<span data-ttu-id="33531-173">"[přílohy]" obsahují informace o použití jiných nástrojů, například Wireshark nebo Netmon pro analýzu síťových paketů data, Fiddler pro analýzu zprávy HTTP/HTTPS, a Microsoft Message Analyzer pro korelace protokolovat data.</span><span class="sxs-lookup"><span data-stu-id="33531-173">The "[Appendices]" include information about using other tools such as Wireshark and Netmon for analyzing network packet data, Fiddler for analyzing HTTP/HTTPS messages, and Microsoft Message Analyzer for correlating log data.</span></span>

## <span data-ttu-id="33531-174"><a name="monitoring-your-storage-service"></a>Monitorování služby úložiště</span><span class="sxs-lookup"><span data-stu-id="33531-174"><a name="monitoring-your-storage-service"></a>Monitoring your storage service</span></span>
<span data-ttu-id="33531-175">Pokud jste obeznámeni s sledování výkonu systému Windows, si můžete představit metriky úložiště jako ekvivalentní čítačů sledování výkonu systému Windows Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="33531-175">If you are familiar with Windows performance monitoring, you can think of Storage Metrics as being an Azure Storage equivalent of Windows Performance Monitor counters.</span></span> <span data-ttu-id="33531-176">Ve Storage Metrics zjistíte komplexní sadu metriky (čítače v terminologii sledování výkonu systému Windows), například dostupnost služby, celkový počet žádostí o služby nebo procento úspěšné žádosti o služby.</span><span class="sxs-lookup"><span data-stu-id="33531-176">In Storage Metrics you will find a comprehensive set of metrics (counters in Windows Performance Monitor terminology) such as service availability, total number of requests to service, or percentage of successful requests to service.</span></span> <span data-ttu-id="33531-177">Úplný seznam dostupné metriky, najdete v části [schématu tabulky metriky Analytics úložiště](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-177">For a full list of the available metrics, see [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span></span> <span data-ttu-id="33531-178">Můžete zadat, zda chcete službu úložiště k shromažďování a agregace metriky každou hodinu nebo každou minutu.</span><span class="sxs-lookup"><span data-stu-id="33531-178">You can specify whether you want the storage service to collect and aggregate metrics every hour or every minute.</span></span> <span data-ttu-id="33531-179">Další informace o tom, jak povolit metriky a monitorování účtů úložiště najdete v tématu [zapnutí metrik úložiště a prohlížení dat metrik](http://go.microsoft.com/fwlink/?LinkId=510865).</span><span class="sxs-lookup"><span data-stu-id="33531-179">For more information about how to enable metrics and monitor your storage accounts, see [Enabling storage metrics and viewing metrics data](http://go.microsoft.com/fwlink/?LinkId=510865).</span></span>

<span data-ttu-id="33531-180">Můžete zvolit, které hodinové metriky, které chcete zobrazit v [portál Azure](https://portal.azure.com) a nakonfigurovat pravidla, která upozorní správce e-mailem, kdykoli po hodinách metrika překračuje prahovou hodnotu konkrétní.</span><span class="sxs-lookup"><span data-stu-id="33531-180">You can choose which hourly metrics you want to display in the [Azure portal](https://portal.azure.com) and configure rules that notify administrators by email whenever an hourly metric exceeds a particular threshold.</span></span> <span data-ttu-id="33531-181">Další informace najdete v tématu [dostávat oznámení o výstrahách](/azure/monitoring-and-diagnostics/monitoring-overview-alerts.md).</span><span class="sxs-lookup"><span data-stu-id="33531-181">For more information, see [Receive Alert Notifications](/azure/monitoring-and-diagnostics/monitoring-overview-alerts.md).</span></span> 

<span data-ttu-id="33531-182">Služba úložiště shromažďuje metriky pomocí nejlepší úsilí, ale nemusí záznam každé operace úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-182">The storage service collects metrics using a best effort, but may not record every storage operation.</span></span>

<span data-ttu-id="33531-183">Metriky, například dostupnost, celkový počet požadavků a čísla Průměrná latence pro účet úložiště lze zobrazit na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-183">In the Azure portal, you can view metrics such as availability, total requests, and average latency numbers for a storage account.</span></span> <span data-ttu-id="33531-184">Pravidla oznámení je rovněž nastaven upozorní správce, pokud dostupnosti klesne pod určitou úroveň.</span><span class="sxs-lookup"><span data-stu-id="33531-184">A notification rule has also been set up to alert an administrator if availability drops below a certain level.</span></span> <span data-ttu-id="33531-185">Zobrazit tato data, je jednou z možných oblastí pro zkoumání procento úspěšnosti služby tabulky je nižší, než 100 % (Další informace najdete v části "[metriky ukazují nízkou PercentSuccess nebo položky protokolu analýzy mít operací s stav transakce ClientOtherErrors]").</span><span class="sxs-lookup"><span data-stu-id="33531-185">From viewing this data, one possible area for investigation is the table service success percentage being below 100% (for more information, see the section "[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]").</span></span>

<span data-ttu-id="33531-186">Měli byste sledovat nepřetržitě aplikací Azure k zajištění, že jsou v pořádku a provádění podle očekávání tím:</span><span class="sxs-lookup"><span data-stu-id="33531-186">You should continuously monitor your Azure applications to ensure they are healthy and performing as expected by:</span></span>

* <span data-ttu-id="33531-187">Zřízení některé základní metriky pro aplikace, která vám umožní porovnat aktuální data a určete veškeré významné změny v chování úložiště Azure a aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-187">Establishing some baseline metrics for application that will enable you to compare current data and identify any significant changes in the behavior of Azure storage and your application.</span></span> <span data-ttu-id="33531-188">V mnoha případech se tyto hodnoty vaše základní metriky konkrétní aplikace a je měli vytvořit, když jsou výkonu testování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-188">The values of your baseline metrics will, in many cases, be application specific and you should establish them when you are performance testing your application.</span></span>
* <span data-ttu-id="33531-189">Záznam minutu metriky a jejich používání za účelem sledování aktivně neočekávaným chybám a anomálií, jako je například špičky v chybě počty nebo požadavku sazby.</span><span class="sxs-lookup"><span data-stu-id="33531-189">Recording minute metrics and using them to monitor actively for unexpected errors and anomalies such as spikes in error counts or request rates.</span></span>
* <span data-ttu-id="33531-190">Záznam hodinové metriky a jejich používání za účelem monitorování průměrné hodnoty jako například průměrný počet chyb a požadovat sazby.</span><span class="sxs-lookup"><span data-stu-id="33531-190">Recording hourly metrics and using them to monitor average values such as average error counts and request rates.</span></span>
* <span data-ttu-id="33531-191">Na odstranění příčin možných problémů pomocí diagnostiky nástrojů, jak je popsáno dále v části "[diagnostice problémů s úložištěm]."</span><span class="sxs-lookup"><span data-stu-id="33531-191">Investigating potential issues using diagnostics tools as discussed later in the section "[Diagnosing storage issues]."</span></span>

<span data-ttu-id="33531-192">Grafy na následujícím obrázku znázorňují, jak průměrování, ke kterému dochází po hodinách metrik, které můžete skrýt špičky v aktivitě.</span><span class="sxs-lookup"><span data-stu-id="33531-192">The charts in the following image illustrate how the averaging that occurs for hourly metrics can hide spikes in activity.</span></span> <span data-ttu-id="33531-193">Hodinové metrika se zobrazí zobrazíte konstantní počet požadavků, při minutu metriky odhalit fluktuace, které skutečně dala.</span><span class="sxs-lookup"><span data-stu-id="33531-193">The hourly metrics appear to show a steady rate of requests, while the minute metrics reveal the fluctuations that are really taking place.</span></span>

![][3]

<span data-ttu-id="33531-194">Zbytek této části popisuje, jaké metriky, měli byste sledovat a proč.</span><span class="sxs-lookup"><span data-stu-id="33531-194">The remainder of this section describes what metrics you should monitor and why.</span></span>

### <span data-ttu-id="33531-195"><a name="monitoring-service-health"></a>Monitorování stavu služby</span><span class="sxs-lookup"><span data-stu-id="33531-195"><a name="monitoring-service-health"></a>Monitoring service health</span></span>
<span data-ttu-id="33531-196">Můžete použít [portál Azure](https://portal.azure.com) pro zobrazení stavu služby Storage (a jinými službami Azure) ve všech oblastech Azure po celém světě.</span><span class="sxs-lookup"><span data-stu-id="33531-196">You can use the [Azure portal](https://portal.azure.com) to view the health of the Storage service (and other Azure services) in all the Azure regions around the world.</span></span> <span data-ttu-id="33531-197">Můžete zobrazit okamžitě, pokud se problém mimo váš dosah ovlivňuje služby úložiště v oblasti, které používáte pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="33531-197">This enables you to see immediately if an issue outside of your control is affecting the Storage service in the region you use for your application.</span></span>

<span data-ttu-id="33531-198">[Portál Azure](https://portal.azure.com) můžete zadat taky oznámení incidentů, které ovlivňují různé služby Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-198">The [Azure portal](https://portal.azure.com) can also provide notifications of incidents that affect the various Azure services.</span></span>
<span data-ttu-id="33531-199">Poznámka: Tyto informace byl dříve k dispozici, spolu s historických dat, na [řídicího panelu služby Azure](http://status.azure.com).</span><span class="sxs-lookup"><span data-stu-id="33531-199">Note: This information was previously available, along with historical data, on the [Azure Service Dashboard](http://status.azure.com).</span></span>

<span data-ttu-id="33531-200">Když [portál Azure](https://portal.azure.com) shromažďuje informace o stavu z v datových centrech Azure (zevnitř monitorování), zvažte také přijetí přístup mimo in k vygenerování syntetické transakce, které pravidelně Azure hostovaná webovou aplikaci přístup z více umístění.</span><span class="sxs-lookup"><span data-stu-id="33531-200">While the [Azure portal](https://portal.azure.com) collects health information from inside the Azure datacenters (inside-out monitoring), you could also consider adopting an outside-in approach to generate synthetic transactions that periodically access your Azure-hosted web application from multiple locations.</span></span> <span data-ttu-id="33531-201">Služeb, které [Dynatrace](http://www.dynatrace.com/en/synthetic-monitoring) a Application Insights pro Visual Studio Team Services jsou příklady tohoto mimo přístupu.</span><span class="sxs-lookup"><span data-stu-id="33531-201">The services offered by [Dynatrace](http://www.dynatrace.com/en/synthetic-monitoring) and Application Insights for Visual Studio Team Services are examples of this outside-in approach.</span></span> <span data-ttu-id="33531-202">Další informace o Application Insights pro Visual Studio Team Services, najdete v příloze "[příloha 5: monitorování pomocí Application Insights pro Visual Studio Team Services](#appendix-5)."</span><span class="sxs-lookup"><span data-stu-id="33531-202">For more information about Application Insights for Visual Studio Team Services, see the appendix "[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services](#appendix-5)."</span></span>

### <span data-ttu-id="33531-203"><a name="monitoring-capacity"></a>Monitorování kapacity</span><span class="sxs-lookup"><span data-stu-id="33531-203"><a name="monitoring-capacity"></a>Monitoring capacity</span></span>
<span data-ttu-id="33531-204">Metriky úložiště ukládá metriky kapacity pro službu blob jenom, protože objekty BLOB obvykle účet pro největší podíl uložená data (v době psaní, není možné používat úložiště metriky k monitorování kapacity tabulek a front).</span><span class="sxs-lookup"><span data-stu-id="33531-204">Storage Metrics only stores capacity metrics for the blob service because blobs typically account for the largest proportion of stored data (at the time of writing, it is not possible to use Storage Metrics to monitor the capacity of your tables and queues).</span></span> <span data-ttu-id="33531-205">Tato data v můžete najít **$MetricsCapacityBlob** tabulky, pokud jste povolili monitorování pro služby objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="33531-205">You can find this data in the **$MetricsCapacityBlob** table if you have enabled monitoring for the Blob service.</span></span> <span data-ttu-id="33531-206">Metriky úložiště zaznamenává tato data jednou za den, a můžete použít hodnotu **RowKey** k určení, zda řádek obsahuje entity, která má vztah k uživatelským datům (hodnota **data**) nebo analytická data (hodnota **analytics**).</span><span class="sxs-lookup"><span data-stu-id="33531-206">Storage Metrics records this data once per day, and you can use the value of the **RowKey** to determine whether the row contains an entity that relates to user data (value **data**) or analytics data (value **analytics**).</span></span> <span data-ttu-id="33531-207">Každá entita uložené obsahuje informace o velikosti použitého úložiště (**kapacity** měřená v bajtech) a aktuální počet kontejnerů (**ContainerCount**) a objekty BLOB (**ObjectCount**) používá v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-207">Each stored entity contains information about the amount of storage used (**Capacity** measured in bytes) and the current number of containers (**ContainerCount**) and blobs (**ObjectCount**) in use in the storage account.</span></span> <span data-ttu-id="33531-208">Další informace o metriky kapacity, které jsou uložené v **$MetricsCapacityBlob** tabulky najdete v tématu [schématu tabulky metriky Analytics úložiště](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-208">For more information about the capacity metrics stored in the **$MetricsCapacityBlob** table, see [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="33531-209">Měli byste sledovat tyto hodnoty včasného varování, že se blíží limity kapacity účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-209">You should monitor these values for an early warning that you are approaching the capacity limits of your storage account.</span></span> <span data-ttu-id="33531-210">Na portálu Azure můžete přidat pravidla výstrah pro upozornění, pokud využití agregační úložiště překračuje nebo nedosahuje prahové hodnoty, které zadáte.</span><span class="sxs-lookup"><span data-stu-id="33531-210">In the Azure portal, you can add alert rules to notify you if aggregate storage use exceeds or falls below thresholds that you specify.</span></span>
> 
> 

<span data-ttu-id="33531-211">Nápovědu k odhad velikosti různých objektů úložiště, jako je například objekty BLOB, naleznete v příspěvku blogu [Principy Azure úložiště fakturace – šířku pásma, transakce a kapacity](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-211">For help estimating the size of various storage objects such as blobs, see the blog post [Understanding Azure Storage Billing – Bandwidth, Transactions, and Capacity](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span></span>

### <span data-ttu-id="33531-212"><a name="monitoring-availability"></a>Monitorování dostupnosti</span><span class="sxs-lookup"><span data-stu-id="33531-212"><a name="monitoring-availability"></a>Monitoring availability</span></span>
<span data-ttu-id="33531-213">Je třeba sledovat dostupnost služby úložiště ve vašem účtu úložiště podle hodnota v monitorování **dostupnosti** sloupce v tabulkách hodinových nebo minutu metriky – **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span><span class="sxs-lookup"><span data-stu-id="33531-213">You should monitor the availability of the storage services in your storage account by monitoring the value in the **Availability** column in the hourly or minute metrics tables — **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span></span> <span data-ttu-id="33531-214">**Dostupnosti** sloupec obsahuje procentuální hodnotu, která označuje dostupnost služby nebo se operace rozhraní API reprezentována řádek ( **RowKey** zobrazí, pokud řádek obsahuje metriky pro služby jako celek, nebo pro určité operace rozhraní API).</span><span class="sxs-lookup"><span data-stu-id="33531-214">The **Availability** column contains a percentage value that indicates the availability of the service or the API operation represented by the row (the **RowKey** shows if the row contains metrics for the service as a whole or for a specific API operation).</span></span>

<span data-ttu-id="33531-215">Všechny hodnoty a menší než 100 % označuje, že dochází k selhání některých požadavků úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-215">Any value less than 100% indicates that some storage requests are failing.</span></span> <span data-ttu-id="33531-216">Zobrazí se, proč se nedaří prověřením ostatních sloupců v datech metriky, které zobrazují počet požadavků s typy jiné chyby, jako **ServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="33531-216">You can see why they are failing by examining the other columns in the metrics data that show the numbers of requests with different error types such as **ServerTimeoutError**.</span></span> <span data-ttu-id="33531-217">Měli byste měli vidět **dostupnosti** patří dočasně nižší než 100 % z důvodů, jako je například časové limity přechodný serveru při službu přesune oddíly na žádost o lepší vyrovnávání zatížení; logika opakovaných pokusů klientské aplikace by měla řídit tyto přerušované podmínky.</span><span class="sxs-lookup"><span data-stu-id="33531-217">You should expect to see **Availability** fall temporarily below 100% for reasons such as transient server timeouts while the service moves partitions to better load-balance request; the retry logic in your client application should handle such intermittent conditions.</span></span> <span data-ttu-id="33531-218">Článek [stavové zprávy a Storage Analytics protokolované](http://msdn.microsoft.com/library/azure/hh343260.aspx) uvádí typy transakcí, které obsahuje úložiště metriky v jeho **dostupnosti** výpočtu.</span><span class="sxs-lookup"><span data-stu-id="33531-218">The article [Storage Analytics Logged Operations and Status Messages](http://msdn.microsoft.com/library/azure/hh343260.aspx) lists the transaction types that Storage Metrics includes in its **Availability** calculation.</span></span>

<span data-ttu-id="33531-219">V [portál Azure](https://portal.azure.com), můžete přidat pravidla výstrah pro upozornění, pokud **dostupnosti** pro službu klesne pod prahovou hodnotou, který určíte.</span><span class="sxs-lookup"><span data-stu-id="33531-219">In the [Azure portal](https://portal.azure.com), you can add alert rules to notify you if **Availability** for a service falls below a threshold that you specify.</span></span>

<span data-ttu-id="33531-220">"[pokyny při řešení potíží]" část tato příručka popisuje některé běžné problémy služby úložiště souvisejících s dostupností.</span><span class="sxs-lookup"><span data-stu-id="33531-220">The "[Troubleshooting guidance]" section of this guide describes some common storage service issues related to availability.</span></span>

### <span data-ttu-id="33531-221"><a name="monitoring-performance"></a>Sledování výkonu</span><span class="sxs-lookup"><span data-stu-id="33531-221"><a name="monitoring-performance"></a>Monitoring performance</span></span>
<span data-ttu-id="33531-222">Sledování výkonu služby úložiště, můžete použít následující metriky z tabulky hodinové a minutu metriky.</span><span class="sxs-lookup"><span data-stu-id="33531-222">To monitor the performance of the storage services, you can use the following metrics from the hourly and minute metrics tables.</span></span>

* <span data-ttu-id="33531-223">Hodnoty **AverageE2ELatency** a **AverageServerLatency** sloupcích se zobrazují průměrnou dobu služby úložiště nebo typ operace rozhraní API trvá pro zpracování požadavků.</span><span class="sxs-lookup"><span data-stu-id="33531-223">The values in the **AverageE2ELatency** and **AverageServerLatency** columns show the average time the storage service or API operation type is taking to process requests.</span></span> <span data-ttu-id="33531-224">**AverageE2ELatency** se rozumí míra začátku do konce latence, která zahrnuje čas potřebný k čtení požadavku a odpovědi kromě čas potřebný pro zpracování požadavku pro posílání (proto zahrnuje latence sítě, jakmile požadavek dosáhne službu úložiště); **AverageServerLatency** se rozumí míra právě doba zpracování a proto nezahrnuje žádné latence sítě související s komunikaci s klientem.</span><span class="sxs-lookup"><span data-stu-id="33531-224">**AverageE2ELatency** is a measure of end-to-end latency that includes the time taken to read the request and send the response in addition to the time taken to process the request (therefore includes network latency once the request reaches the storage service); **AverageServerLatency** is a measure of just the processing time and therefore excludes any network latency related to communicating with the client.</span></span> <span data-ttu-id="33531-225">Najdete v části "[metriky ukazují AverageE2ELatency vysoké a nízké AverageServerLatency]" dál v této příručce diskuzi o důvod, proč může být velký rozdíl mezi tyto dvě hodnoty.</span><span class="sxs-lookup"><span data-stu-id="33531-225">See the section "[Metrics show high AverageE2ELatency and low AverageServerLatency]" later in this guide for a discussion of why there might be a significant difference between these two values.</span></span>
* <span data-ttu-id="33531-226">Hodnoty **TotalIngress** a **TotalEgress** sloupcích se zobrazují celkové množství dat, v bajtech přicházejících na a přejdete mimo vaší služby úložiště nebo konkrétní typ operace rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="33531-226">The values in the **TotalIngress** and **TotalEgress** columns show the total amount of data, in bytes, coming in to and going out of your storage service or through a specific API operation type.</span></span>
* <span data-ttu-id="33531-227">Hodnoty **TotalRequests** sloupec zobrazit celkový počet požadavků, které přijímá službu úložiště operace rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="33531-227">The values in the **TotalRequests** column show the total number of requests that the storage service of API operation is receiving.</span></span> <span data-ttu-id="33531-228">**TotalRequests** je celkový počet požadavků, které obdrží služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-228">**TotalRequests** is the total number of requests that the storage service receives.</span></span>

<span data-ttu-id="33531-229">Budete obvykle monitorovat neočekávané změny v některém z těchto hodnot jako indikátoru, abyste měli problém, který vyžaduje šetření.</span><span class="sxs-lookup"><span data-stu-id="33531-229">Typically, you will monitor for unexpected changes in any of these values as an indicator that you have an issue that requires investigation.</span></span>

<span data-ttu-id="33531-230">V [portál Azure](https://portal.azure.com), můžete přidat pravidla výstrah pro upozornění, pokud žádné z metriku výkonu pro tuto službu klesnou pod nebo překročit prahovou hodnotu, která zadáte.</span><span class="sxs-lookup"><span data-stu-id="33531-230">In the [Azure portal](https://portal.azure.com), you can add alert rules to notify you if any of the performance metrics for this service fall below or exceed a threshold that you specify.</span></span>

<span data-ttu-id="33531-231">"[pokyny při řešení potíží]" část tato příručka popisuje některé běžné problémy služby úložiště souvisejících s výkonem.</span><span class="sxs-lookup"><span data-stu-id="33531-231">The "[Troubleshooting guidance]" section of this guide describes some common storage service issues related to performance.</span></span>

## <span data-ttu-id="33531-232"><a name="diagnosing-storage-issues"></a>Diagnostika problémů s úložištěm</span><span class="sxs-lookup"><span data-stu-id="33531-232"><a name="diagnosing-storage-issues"></a>Diagnosing storage issues</span></span>
<span data-ttu-id="33531-233">Existuje několik způsobů, že jste může se dozvěděli o problém nebo problém v aplikaci, patří:</span><span class="sxs-lookup"><span data-stu-id="33531-233">There are a number of ways that you might become aware of a problem or issue in your application, these include:</span></span>

* <span data-ttu-id="33531-234">Hlavní selhání, které způsobí, že aplikace došlo k chybě, nebo přestane fungovat.</span><span class="sxs-lookup"><span data-stu-id="33531-234">A major failure that causes the application to crash or to stop working.</span></span>
* <span data-ttu-id="33531-235">Významné změny z hodnoty standardních hodnot v metriky, které monitorujete, jak je popsáno v předchozí části "[monitorování vaší služby úložiště]."</span><span class="sxs-lookup"><span data-stu-id="33531-235">Significant changes from baseline values in the metrics you are monitoring as described in the previous section "[Monitoring your storage service]."</span></span>
* <span data-ttu-id="33531-236">Sestavy z uživatelů vaší aplikace, která nějaké konkrétní operace nebyla dokončena, podle očekávání nebo že některé funkce nefunguje.</span><span class="sxs-lookup"><span data-stu-id="33531-236">Reports from users of your application that some particular operation didn't complete as expected or that some feature is not working.</span></span>
* <span data-ttu-id="33531-237">Chyby generované v rámci vaší aplikace, který zobrazí v souborech protokolů nebo prostřednictvím jiné metody oznámení.</span><span class="sxs-lookup"><span data-stu-id="33531-237">Errors generated within your application that appear in log files or through some other notification method.</span></span>

<span data-ttu-id="33531-238">Problémy související s služby Azure storage obvykle spadají do jedné ze čtyř kategorií:</span><span class="sxs-lookup"><span data-stu-id="33531-238">Typically, issues related to Azure storage services fall into one of four broad categories:</span></span>

* <span data-ttu-id="33531-239">Aplikace má potíže s výkonu, buď hlášené vaši uživatelé nebo zjištěná změny v metrik výkonu.</span><span class="sxs-lookup"><span data-stu-id="33531-239">Your application has a performance issue, either reported by your users, or revealed by changes in the performance metrics.</span></span>
* <span data-ttu-id="33531-240">Došlo k potížím s infrastrukturou Azure Storage v jedné nebo více oblastech.</span><span class="sxs-lookup"><span data-stu-id="33531-240">There is a problem with the Azure Storage infrastructure in one or more regions.</span></span>
* <span data-ttu-id="33531-241">Aplikace je zjištění stavu chyby, a to buď hlášené vaši uživatelé nebo zjištěná o zvýšení v jednom z metriky počet chyb, které sledujete.</span><span class="sxs-lookup"><span data-stu-id="33531-241">Your application is encountering an error, either reported by your users, or revealed by an increase in one of the error count metrics you monitor.</span></span>
* <span data-ttu-id="33531-242">Během vývoj a testování může pomocí emulátoru místního úložiště; Některé problémy, které se týkají speciálně použití emulátoru úložiště se může vyskytnout.</span><span class="sxs-lookup"><span data-stu-id="33531-242">During development and test, you may be using the local storage emulator; you may encounter some issues that relate specifically to usage of the storage emulator.</span></span>

<span data-ttu-id="33531-243">Následující oddíly popisují postupujte podle kroků pro diagnostiku a řešení problémů v každé z těchto čtyř kategorií.</span><span class="sxs-lookup"><span data-stu-id="33531-243">The following sections outline the steps you should follow to diagnose and troubleshoot issues in each of these four categories.</span></span> <span data-ttu-id="33531-244">V části "[pokyny při řešení potíží]" dál v této příručce poskytující víc podrobností pro některé běžné problémy, se můžete setkat.</span><span class="sxs-lookup"><span data-stu-id="33531-244">The section "[Troubleshooting guidance]" later in this guide provides more detail for some common issues you may encounter.</span></span>

### <span data-ttu-id="33531-245"><a name="service-health-issues"></a>Problémy v oblasti služby stavu</span><span class="sxs-lookup"><span data-stu-id="33531-245"><a name="service-health-issues"></a>Service health issues</span></span>
<span data-ttu-id="33531-246">Problémům se stavem služby jsou obvykle mimo vlastního ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="33531-246">Service health issues are typically outside of your control.</span></span> <span data-ttu-id="33531-247">[Portál Azure](https://portal.azure.com) poskytuje informace o probíhající problémy se službami Azure včetně služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-247">The [Azure portal](https://portal.azure.com) provides information about any ongoing issues with Azure services including storage services.</span></span> <span data-ttu-id="33531-248">Pokud jste se rozhodli pro geograficky redundantní úložiště s přístupem pro čtení při vytvoření účtu úložiště, pak v případě vaše data, že není k dispozici v primárním umístění, vaše aplikace může dočasně přepnout kopie jen pro čtení v sekundárním umístění.</span><span class="sxs-lookup"><span data-stu-id="33531-248">If you opted for Read-Access Geo-Redundant Storage when you created your storage account, then in the event of your data being unavailable in the primary location, your application could switch temporarily to the read-only copy in the secondary location.</span></span> <span data-ttu-id="33531-249">K tomu, musí aplikace přepínat mezi použitím umístění primárního a sekundárního úložiště a mohli pracovat v režimu omezené funkčnosti daty jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="33531-249">To do this, your application must be able to switch between using the primary and secondary storage locations, and be able to work in a reduced functionality mode with read-only data.</span></span> <span data-ttu-id="33531-250">Knihovny klienta úložiště Azure umožňují definovat zásady opakovaných pokusů, který může číst ze sekundární úložiště v případě, že pro čtení z primárního úložiště se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="33531-250">The Azure Storage Client libraries allow you to define a retry policy that can read from secondary storage in case a read from primary storage fails.</span></span> <span data-ttu-id="33531-251">Aplikace také musí být data v sekundárním umístění je, že nakonec byl konzistentní.</span><span class="sxs-lookup"><span data-stu-id="33531-251">Your application also needs to be aware that the data in the secondary location is eventually consistent.</span></span> <span data-ttu-id="33531-252">Další informace naleznete v příspěvku blogu [možnosti redundance úložiště Azure a geograficky redundantní úložiště s přístupem pro čtení](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="33531-252">For more information, see the blog post [Azure Storage Redundancy Options and Read Access Geo Redundant Storage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

### <span data-ttu-id="33531-253"><a name="performance-issues"></a>Problémy s výkonem</span><span class="sxs-lookup"><span data-stu-id="33531-253"><a name="performance-issues"></a>Performance issues</span></span>
<span data-ttu-id="33531-254">Výkon aplikace může být subjektivní, zejména z pohledu uživatele.</span><span class="sxs-lookup"><span data-stu-id="33531-254">The performance of an application can be subjective, especially from a user perspective.</span></span> <span data-ttu-id="33531-255">Proto je důležité mít k dispozici základní metriku, která vám pomůže identifikovat možné problémy s výkonem.</span><span class="sxs-lookup"><span data-stu-id="33531-255">Therefore, it is important to have baseline metrics available to help you identify where there might be a performance issue.</span></span> <span data-ttu-id="33531-256">Mnoha faktorech může ovlivnit výkon služby Azure storage z pohledu klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-256">Many factors might affect the performance of an Azure storage service from the client application perspective.</span></span> <span data-ttu-id="33531-257">Tyto faktory mohou fungovat ve službě úložiště, v klientovi nebo v síťové infrastruktuře; Proto je důležité mít strategie pro identifikaci původ problémy s výkonem.</span><span class="sxs-lookup"><span data-stu-id="33531-257">These factors might operate in the storage service, in the client, or in the network infrastructure; therefore it is important to have a strategy for identifying the origin of the performance issue.</span></span>

<span data-ttu-id="33531-258">Jakmile zjistíte příčinu problémy s výkonem z metriky pravděpodobně umístění, pak můžete soubory protokolu naleznete podrobné informace pro diagnostiku a řešení problému další.</span><span class="sxs-lookup"><span data-stu-id="33531-258">After you have identified the likely location of the cause of the performance issue from the metrics, you can then use the log files to find detailed information to diagnose and troubleshoot the problem further.</span></span>

<span data-ttu-id="33531-259">V části "[pokyny při řešení potíží]" dál v této příručce poskytuje další informace o některých běžných výkon související problémy, můžete setkat.</span><span class="sxs-lookup"><span data-stu-id="33531-259">The section "[Troubleshooting guidance]" later in this guide provides more information about some common performance related issues you may encounter.</span></span>

### <span data-ttu-id="33531-260"><a name="diagnosing-errors"></a>Diagnostikování chyb</span><span class="sxs-lookup"><span data-stu-id="33531-260"><a name="diagnosing-errors"></a>Diagnosing errors</span></span>
<span data-ttu-id="33531-261">Uživatelům vaší aplikace může upozorňovat na chyby oznámené službou klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-261">Users of your application may notify you of errors reported by the client application.</span></span> <span data-ttu-id="33531-262">Úložiště metriky taky zaznamenává počty typů různé chyby z vaší služby úložiště, jako **NetworkError**, **ClientTimeoutError**, nebo **AuthorizationError**.</span><span class="sxs-lookup"><span data-stu-id="33531-262">Storage Metrics also records counts of different error types from your storage services such as **NetworkError**, **ClientTimeoutError**, or **AuthorizationError**.</span></span> <span data-ttu-id="33531-263">Zatímco úložiště metriky pouze zaznamenává počty typů různých chyb, můžete získat více podrobností o jednotlivých požadavků prověřením na straně serveru, klienta a protokoly sítě.</span><span class="sxs-lookup"><span data-stu-id="33531-263">While Storage Metrics only records counts of different error types, you can obtain more detail about individual requests by examining server-side, client-side, and network logs.</span></span> <span data-ttu-id="33531-264">Stavový kód protokolu HTTP, který je vrácena službou úložiště obvykle získáte údaj o tom, proč se nezdařil požadavek.</span><span class="sxs-lookup"><span data-stu-id="33531-264">Typically, the HTTP status code returned by the storage service will give an indication of why the request failed.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-265">Mějte na paměti, že byste měli očekávat zobrazit některé občasné chyby: například chyb z důvodu přechodného síťové podmínky, nebo chyby aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-265">Remember that you should expect to see some intermittent errors: for example, errors due to transient network conditions, or application errors.</span></span>
> 
> 

<span data-ttu-id="33531-266">V následujících zdrojích informací jsou užitečné pro pochopení související s úložištěm stavu a chybové kódy:</span><span class="sxs-lookup"><span data-stu-id="33531-266">The following resources are useful for understanding storage-related status and error codes:</span></span>

* [<span data-ttu-id="33531-267">Běžné kódy chyb rozhraní API REST</span><span class="sxs-lookup"><span data-stu-id="33531-267">Common REST API Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179357.aspx)
* [<span data-ttu-id="33531-268">Kódy chyb služby objektů BLOB</span><span class="sxs-lookup"><span data-stu-id="33531-268">Blob Service Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179439.aspx)
* [<span data-ttu-id="33531-269">Kódy chyb služby fronty</span><span class="sxs-lookup"><span data-stu-id="33531-269">Queue Service Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179446.aspx)
* [<span data-ttu-id="33531-270">Kódy chyb služby Table</span><span class="sxs-lookup"><span data-stu-id="33531-270">Table Service Error Codes</span></span>](http://msdn.microsoft.com/library/azure/dd179438.aspx)
* [<span data-ttu-id="33531-271">Kódy chyb služby souboru</span><span class="sxs-lookup"><span data-stu-id="33531-271">File Service Error Codes</span></span>](https://msdn.microsoft.com/library/azure/dn690119.aspx)

### <span data-ttu-id="33531-272"><a name="storage-emulator-issues"></a>Emulátor problémů s úložištěm</span><span class="sxs-lookup"><span data-stu-id="33531-272"><a name="storage-emulator-issues"></a>Storage emulator issues</span></span>
<span data-ttu-id="33531-273">Azure SDK zahrnuje emulátor úložiště, můžete spouštět na pracovní stanici.</span><span class="sxs-lookup"><span data-stu-id="33531-273">The Azure SDK includes a storage emulator you can run on a development workstation.</span></span> <span data-ttu-id="33531-274">Tato emulátoru simuluje většinu chování služby Azure storage a je užitečné při vývoj a testování, umožňuje spouštět aplikace, které používají služby Azure storage bez nutnosti předplatné Azure a účet úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-274">This emulator simulates most of the behavior of the Azure storage services and is useful during development and test, enabling you to run applications that use Azure storage services without the need for an Azure subscription and an Azure storage account.</span></span>

<span data-ttu-id="33531-275">"[pokyny při řešení potíží]" část tato příručka popisuje některé běžné problémy došlo pomocí emulátoru úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-275">The "[Troubleshooting guidance]" section of this guide describes some common issues encountered using the storage emulator.</span></span>

### <span data-ttu-id="33531-276"><a name="storage-logging-tools"></a>Nástroje protokolování úložiště</span><span class="sxs-lookup"><span data-stu-id="33531-276"><a name="storage-logging-tools"></a>Storage logging tools</span></span>
<span data-ttu-id="33531-277">Protokolování úložiště poskytuje serverové protokolování požadavků na úložiště v účtu úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-277">Storage Logging provides server-side logging of storage requests in your Azure storage account.</span></span> <span data-ttu-id="33531-278">Další informace o tom, jak povolit protokolování na straně serveru a získat přístup k datům protokolu najdete v tématu [povolení protokolování úložiště a přístup k datům protokolu](http://go.microsoft.com/fwlink/?LinkId=510867).</span><span class="sxs-lookup"><span data-stu-id="33531-278">For more information about how to enable server-side logging and access the log data, see [Enabling Storage Logging and Accessing Log Data](http://go.microsoft.com/fwlink/?LinkId=510867).</span></span>

<span data-ttu-id="33531-279">Klientská knihovna pro úložiště pro .NET umožňuje shromažďovat data protokolu na straně klienta, která má vztah k operace úložiště, provádí aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-279">The Storage Client Library for .NET enables you to collect client-side log data that relates to storage operations performed by your application.</span></span> <span data-ttu-id="33531-280">Další informace najdete v tématu [klienta protokolování s knihovnou klienta úložiště .NET](http://go.microsoft.com/fwlink/?LinkId=510868).</span><span class="sxs-lookup"><span data-stu-id="33531-280">For more information, see [Client-side Logging with the .NET Storage Client Library](http://go.microsoft.com/fwlink/?LinkId=510868).</span></span>

> [!NOTE]
> <span data-ttu-id="33531-281">V některých případech (například selháním autorizace SAS) může uživatel sestavy k chybě, pro které můžete najít data žádosti nejsou v protokolech úložiště na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="33531-281">In some circumstances (such as SAS authorization failures), a user may report an error for which you can find no request data in the server-side Storage logs.</span></span> <span data-ttu-id="33531-282">Můžete použít možnosti protokolování Klientská knihovna pro úložiště zjistit, zda je příčinou problém na straně klienta nebo používat nástroje monitorování sítě k prošetření sítě.</span><span class="sxs-lookup"><span data-stu-id="33531-282">You can use the logging capabilities of the Storage Client Library to investigate if the cause of the issue is on the client or use network monitoring tools to investigate the network.</span></span>
> 
> 

### <span data-ttu-id="33531-283"><a name="using-network-logging-tools"></a>Pomocí nástroje protokolování</span><span class="sxs-lookup"><span data-stu-id="33531-283"><a name="using-network-logging-tools"></a>Using network logging tools</span></span>
<span data-ttu-id="33531-284">Můžete zaznamenávat provoz mezi klientem a serverem, který obsahuje podrobné informace o datech, které jsou výměna klient a server a základní síťové podmínky.</span><span class="sxs-lookup"><span data-stu-id="33531-284">You can capture the traffic between the client and server to provide detailed information about the data the client and server are exchanging and the underlying network conditions.</span></span> <span data-ttu-id="33531-285">Nástroje protokolování užitečné sítě, patří:</span><span class="sxs-lookup"><span data-stu-id="33531-285">Useful network logging tools include:</span></span>

* <span data-ttu-id="33531-286">[Fiddler](http://www.telerik.com/fiddler) je bezplatných webových ladění proxy server, který umožňuje zkontrolovat hlavičky a datové části zpráv žádostí a odpovědí HTTP a HTTPS.</span><span class="sxs-lookup"><span data-stu-id="33531-286">[Fiddler](http://www.telerik.com/fiddler) is a free web debugging proxy that enables you to examine the headers and payload data of HTTP and HTTPS request and response messages.</span></span> <span data-ttu-id="33531-287">Další informace najdete v tématu [dodatku 1: použití Fiddler k zachycení přenosů dat HTTP a HTTPS](#appendix-1).</span><span class="sxs-lookup"><span data-stu-id="33531-287">For more information, see [Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic](#appendix-1).</span></span>
* <span data-ttu-id="33531-288">[Sledování sítě (Netmon)](http://www.microsoft.com/download/details.aspx?id=4865) a [Wireshark](http://www.wireshark.org/) jsou analyzátorů protokolu, které vám umožní zobrazit informace o podrobné paketů pro širokou škálu protokolů síťové volné sítí.</span><span class="sxs-lookup"><span data-stu-id="33531-288">[Microsoft Network Monitor (Netmon)](http://www.microsoft.com/download/details.aspx?id=4865) and [Wireshark](http://www.wireshark.org/) are free network protocol analyzers that enable you to view detailed packet information for a wide range of network protocols.</span></span> <span data-ttu-id="33531-289">Další informace o Wireshark najdete v tématu "[příloze 2: pomocí Wireshark pro zachycení síťového provozu](#appendix-2)".</span><span class="sxs-lookup"><span data-stu-id="33531-289">For more information about Wireshark, see "[Appendix 2: Using Wireshark to capture network traffic](#appendix-2)".</span></span>
* <span data-ttu-id="33531-290">Microsoft Message Analyzer je nástroj od společnosti Microsoft, který nahrazuje sledování sítě a že kromě zachytávání paketů dat v síti, pomůže vám umožní zobrazit a analyzovat data protokolu zaznamenat z dalších nástrojů.</span><span class="sxs-lookup"><span data-stu-id="33531-290">Microsoft Message Analyzer is a tool from Microsoft that supersedes Netmon and that in addition to capturing network packet data, helps you to view and analyze the log data captured from other tools.</span></span> <span data-ttu-id="33531-291">Další informace najdete v tématu "[příloha 3: použití Microsoft Message Analyzer pro zachycení síťového provozu](#appendix-3)".</span><span class="sxs-lookup"><span data-stu-id="33531-291">For more information, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic](#appendix-3)".</span></span>
* <span data-ttu-id="33531-292">Pokud chcete provést test základní připojení zkontrolujte, že klientský počítač může připojit ke službě úložiště Azure přes síť, nelze to provést pomocí standardní **ping** nástroj na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-292">If you want to perform a basic connectivity test to check that your client machine can connect to the Azure storage service over the network, you cannot do this using the standard **ping** tool on the client.</span></span> <span data-ttu-id="33531-293">Můžete však použít [ **tcping** nástroj](http://www.elifulkerson.com/projects/tcping.php) zkontrolujte připojení.</span><span class="sxs-lookup"><span data-stu-id="33531-293">However, you can use the [**tcping** tool](http://www.elifulkerson.com/projects/tcping.php) to check connectivity.</span></span>

<span data-ttu-id="33531-294">V mnoha případech bude dostatečná k diagnostice problému dat protokolu z úložiště protokolování a Klientská knihovna pro úložiště, ale v některých případech může potřebovat podrobnější informace, které může poskytnout tyto nástroje protokolování.</span><span class="sxs-lookup"><span data-stu-id="33531-294">In many cases, the log data from Storage Logging and the Storage Client Library will be sufficient to diagnose an issue, but in some scenarios, you may need the more detailed information that these network logging tools can provide.</span></span> <span data-ttu-id="33531-295">Například pomocí Fiddleru zobrazení zpráv protokolu HTTP a HTTPS umožňuje zobrazit záhlaví a datovou část data odesílaná do a ze služby storage, které by vám umožní zkontrolovat, jak klientská aplikace opakování operace úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-295">For example, using Fiddler to view HTTP and HTTPS messages enables you to view header and payload data sent to and from the storage services, which would enable you to examine how a client application retries storage operations.</span></span> <span data-ttu-id="33531-296">Protokol analyzátorů například Wireshark fungovat na úrovni paketů umožňuje zobrazit TCP data, která vám umožní řešení ke ztrátě paketů a problémy s připojením.</span><span class="sxs-lookup"><span data-stu-id="33531-296">Protocol analyzers such as Wireshark operate at the packet level enabling you to view TCP data, which would enable you to troubleshoot lost packets and connectivity issues.</span></span> <span data-ttu-id="33531-297">Message Analyzer může fungovat na protokolu HTTP a TCP vrstvy.</span><span class="sxs-lookup"><span data-stu-id="33531-297">Message Analyzer can operate at both HTTP and TCP layers.</span></span>

## <span data-ttu-id="33531-298"><a name="end-to-end-tracing"></a>Konec Konec trasování</span><span class="sxs-lookup"><span data-stu-id="33531-298"><a name="end-to-end-tracing"></a>End-to-end tracing</span></span>
<span data-ttu-id="33531-299">Trasování začátku do konce pomocí různých souborů protokolu je užitečné pro na odstranění příčin možných problémů.</span><span class="sxs-lookup"><span data-stu-id="33531-299">End-to-end tracing using a variety of log files is a useful technique for investigating potential issues.</span></span> <span data-ttu-id="33531-300">Datum a čas informace z vašich dat metriky slouží jako ukazatel kde začít hledat v souborech protokolu podrobné informace, které vám pomohou vyřešit problém.</span><span class="sxs-lookup"><span data-stu-id="33531-300">You can use the date/time information from your metrics data as an indication of where to start looking in the log files for the detailed information that will help you troubleshoot the issue.</span></span>

### <span data-ttu-id="33531-301"><a name="correlating-log-data"></a>Korelace data protokolu</span><span class="sxs-lookup"><span data-stu-id="33531-301"><a name="correlating-log-data"></a>Correlating log data</span></span>
<span data-ttu-id="33531-302">Při prohlížení protokolů z klientských aplikací, trasování sítě a úložiště serverové protokolování, které je velmi důležité, abyste mohli ke korelaci požadavků v různých protokolových souborech.</span><span class="sxs-lookup"><span data-stu-id="33531-302">When viewing logs from client applications, network traces, and server-side storage logging it is critical to be able to correlate requests across the different log files.</span></span> <span data-ttu-id="33531-303">Soubory protokolu obsahují celou řadu různých polí, které lze použít jako identifikátory korelace.</span><span class="sxs-lookup"><span data-stu-id="33531-303">The log files include a number of different fields that are useful as correlation identifiers.</span></span> <span data-ttu-id="33531-304">Id žádosti klienta je velmi užitečné pole, které chcete použít ke korelaci položek v jiné protokoly.</span><span class="sxs-lookup"><span data-stu-id="33531-304">The client request id is the most useful field to use to correlate entries in the different logs.</span></span> <span data-ttu-id="33531-305">Může se stát může být užitečné používat id žádosti serveru nebo časová razítka.</span><span class="sxs-lookup"><span data-stu-id="33531-305">However sometimes, it can be useful to use either the server request id or timestamps.</span></span> <span data-ttu-id="33531-306">Další informace o těchto možnostech naleznete v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="33531-306">The following sections provide more details about these options.</span></span>

### <span data-ttu-id="33531-307"><a name="client-request-id"></a>ID žádosti klienta</span><span class="sxs-lookup"><span data-stu-id="33531-307"><a name="client-request-id"></a>Client request ID</span></span>
<span data-ttu-id="33531-308">Klientská knihovna pro úložiště automaticky vygeneruje id žádosti klienta jedinečný pro každý požadavek.</span><span class="sxs-lookup"><span data-stu-id="33531-308">The Storage Client Library automatically generates a unique client request id for every request.</span></span>

* <span data-ttu-id="33531-309">V protokol klienta, který vytvoří Klientská knihovna pro úložiště, se zobrazí id žádosti klienta v **ID žádosti klienta** pole každé položky protokolu týkající se žádosti.</span><span class="sxs-lookup"><span data-stu-id="33531-309">In the client-side log that the Storage Client Library creates, the client request id appears in the **Client Request ID** field of every log entry relating to the request.</span></span>
* <span data-ttu-id="33531-310">Trasování sítě, například ten, který zachycenou aplikaci Fiddler, se zobrazí na zprávy žádosti jako id žádosti klienta **x-ms-client-request-id** hodnotu hlavičky protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="33531-310">In a network trace such as one captured by Fiddler, the client request id is visible in request messages as the **x-ms-client-request-id** HTTP header value.</span></span>
* <span data-ttu-id="33531-311">Id žádosti klienta se v protokolu protokolování úložiště serverové zobrazí ve sloupci ID žádosti klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-311">In the server-side Storage Logging log, the client request id appears in the Client request ID column.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-312">Je možné, protože klient se může přiřadit tuto hodnotu (i když klientská knihovna pro úložiště automaticky přiřadí novou hodnotu) sdílejí stejné id žádosti klienta více žádostí.</span><span class="sxs-lookup"><span data-stu-id="33531-312">It is possible for multiple requests to share the same client request id because the client can assign this value (although the Storage Client Library assigns a new value automatically).</span></span> <span data-ttu-id="33531-313">V případě opakování z klienta všechny pokusy sdílejí stejné id žádosti klienta. V případě dávky odeslaných z klienta má dávka id požadavek jednoho klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-313">In the case of retries from the client, all attempts share the same client request id. In the case of a batch sent from the client, the batch has a single client request id.</span></span>
> 
> 

### <span data-ttu-id="33531-314"><a name="server-request-id"></a>ID žádosti serveru</span><span class="sxs-lookup"><span data-stu-id="33531-314"><a name="server-request-id"></a>Server request ID</span></span>
<span data-ttu-id="33531-315">Služba úložiště automaticky vygeneruje ID žádosti serveru.</span><span class="sxs-lookup"><span data-stu-id="33531-315">The storage service automatically generates server request ids.</span></span>

* <span data-ttu-id="33531-316">V protokolu protokolování úložiště serverové id žádosti serveru se zobrazí **záhlaví ID žádosti** sloupce.</span><span class="sxs-lookup"><span data-stu-id="33531-316">In the server-side Storage Logging log, the server request id appears the **Request ID header** column.</span></span>
* <span data-ttu-id="33531-317">Trasování sítě, například ten, který zachycenou aplikaci Fiddler, id žádosti serveru se zobrazí v odpovědi na zprávy jako **x-ms-request-id** hodnotu hlavičky protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="33531-317">In a network trace such as one captured by Fiddler, the server request id appears in response messages as the **x-ms-request-id** HTTP header value.</span></span>
* <span data-ttu-id="33531-318">V protokol klienta, který vytvoří Klientská knihovna pro úložiště, id žádosti serveru se zobrazí v **operaci Text** sloupec pro záznam protokolu s podrobnostmi o odpověď serveru.</span><span class="sxs-lookup"><span data-stu-id="33531-318">In the client-side log that the Storage Client Library creates, the server request id appears in the **Operation Text** column for the log entry showing details of the server response.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-319">Služba úložiště vždy přiřadí jedinečný serveru id žádosti každého požadavku, které obdrží, takže každý pokus opakovat z klienta a každé operace zahrnuté v dávce má id požadavku jedinečný serveru.</span><span class="sxs-lookup"><span data-stu-id="33531-319">The storage service always assigns a unique server request id to every request it receives, so every retry attempt from the client and every operation included in a batch has a unique server request id.</span></span>
> 
> 

<span data-ttu-id="33531-320">Pokud vyvolá Klientská knihovna pro úložiště **StorageException** v klientovi **RequestInformation** vlastnost obsahuje **RequestResult** objekt, který zahrnuje **ServiceRequestID** vlastnost.</span><span class="sxs-lookup"><span data-stu-id="33531-320">If the Storage Client Library throws a **StorageException** in the client, the **RequestInformation** property contains a **RequestResult** object that includes a **ServiceRequestID** property.</span></span> <span data-ttu-id="33531-321">Můžete taky Přejít **RequestResult** objektu z **informacím OperationContext** instance.</span><span class="sxs-lookup"><span data-stu-id="33531-321">You can also access a **RequestResult** object from an **OperationContext** instance.</span></span>

<span data-ttu-id="33531-322">Následující příklad ukazuje, jak nastavit vlastní **ClientRequestId** hodnotu připojením **informacím OperationContext** objektu žádost o služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-322">The code sample below demonstrates how to set a custom **ClientRequestId** value by attaching an **OperationContext** object the request to the storage service.</span></span> <span data-ttu-id="33531-323">Také ukazuje, jak načíst **ServerRequestId** hodnotu ze zprávy odpovědi.</span><span class="sxs-lookup"><span data-stu-id="33531-323">It also shows how to retrieve the **ServerRequestId** value from the response message.</span></span>

```csharp
//Parse the connection string for the storage account.
const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Create an Operation Context that includes custom ClientRequestId string based on constants defined within the application along with a Guid.
OperationContext oc = new OperationContext();
oc.ClientRequestID = String.Format("{0} {1} {2} {3}", HOSTNAME, APPNAME, USERID, Guid.NewGuid().ToString());

try
{
    CloudBlobContainer container = blobClient.GetContainerReference("democontainer");
    ICloudBlob blob = container.GetBlobReferenceFromServer("testImage.jpg", null, null, oc);  
    var downloadToPath = string.Format("./{0}", blob.Name);
    using (var fs = File.OpenWrite(downloadToPath))
    {
        blob.DownloadToStream(fs, null, null, oc);
        Console.WriteLine("\t Blob downloaded to file: {0}", downloadToPath);
    }
}
catch (StorageException storageException)
{
    Console.WriteLine("Storage exception {0} occurred", storageException.Message);
    // Multiple results may exist due to client side retry logic - each retried operation will have a unique ServiceRequestId
    foreach (var result in oc.RequestResults)
    {
            Console.WriteLine("HttpStatus: {0}, ServiceRequestId {1}", result.HttpStatusCode, result.ServiceRequestID);
    }
}
```

### <span data-ttu-id="33531-324"><a name="timestamps"></a>Časová razítka</span><span class="sxs-lookup"><span data-stu-id="33531-324"><a name="timestamps"></a>Timestamps</span></span>
<span data-ttu-id="33531-325">Časová razítka můžete použít také k vyhledání položky související protokolu, ale buďte opatrní z jakékoli zkosení hodin mezi klientem a serverem, který může existovat.</span><span class="sxs-lookup"><span data-stu-id="33531-325">You can also use timestamps to locate related log entries, but be careful of any clock skew between the client and server that may exist.</span></span> <span data-ttu-id="33531-326">Vyhledávejte plus nebo minus 15 minut pro párování serverové položky podle časového razítka na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-326">You should search plus or minus 15 minutes for matching server-side entries based on the timestamp on the client.</span></span> <span data-ttu-id="33531-327">Mějte na paměti, že metadata objektu blob pro objekty BLOB obsahující metriky Určuje časové rozmezí metrik, které jsou uložené v objektu blob; To je užitečné, pokud máte mnoho objektů BLOB metriky pro stejné minutu nebo hodinu.</span><span class="sxs-lookup"><span data-stu-id="33531-327">Remember that the blob metadata for the blobs containing metrics indicates the time range for the metrics stored in the blob; this is useful if you have many metrics blobs for the same minute or hour.</span></span>

## <span data-ttu-id="33531-328"><a name="troubleshooting-guidance"></a>Pokyny k odstraňování problémů</span><span class="sxs-lookup"><span data-stu-id="33531-328"><a name="troubleshooting-guidance"></a>Troubleshooting guidance</span></span>
<span data-ttu-id="33531-329">V této části vám pomůžou s diagnostiku a řešení potíží s některé běžné problémy, vaše aplikace může dojít při používání služby Azure storage.</span><span class="sxs-lookup"><span data-stu-id="33531-329">This section will help you with the diagnosis and troubleshooting of some of the common issues your application may encounter when using the Azure storage services.</span></span> <span data-ttu-id="33531-330">Pomocí níže uvedeného seznamu vyhledejte informace, které jsou relevantní pro konkrétní problém.</span><span class="sxs-lookup"><span data-stu-id="33531-330">Use the list below to locate the information relevant to your specific issue.</span></span>

<span data-ttu-id="33531-331">**Řešení potíží s rozhodovací strom.**</span><span class="sxs-lookup"><span data-stu-id="33531-331">**Troubleshooting Decision Tree**</span></span>

---
<span data-ttu-id="33531-332">Souvisí problém výkonu jednoho ze služby storage?</span><span class="sxs-lookup"><span data-stu-id="33531-332">Does your issue relate to the performance of one of the storage services?</span></span>

* <span data-ttu-id="33531-333">[metriky ukazují AverageE2ELatency vysoké a nízké AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="33531-333">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
* <span data-ttu-id="33531-334">[Metrika ukazuje nízkou hodnotu AverageE2ELatency i hodnotu AverageServerLatency, ale latence klienta je vysoká]</span><span class="sxs-lookup"><span data-stu-id="33531-334">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]</span></span>
* <span data-ttu-id="33531-335">[Metrika ukazuje vysokou hodnotu AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="33531-335">[Metrics show high AverageServerLatency]</span></span>
* <span data-ttu-id="33531-336">[Dochází k neočekávaným zpožděním při doručování zpráv ve frontě]</span><span class="sxs-lookup"><span data-stu-id="33531-336">[You are experiencing unexpected delays in message delivery on a queue]</span></span>

---
<span data-ttu-id="33531-337">Souvisí problém dostupnost jednoho ze služby storage?</span><span class="sxs-lookup"><span data-stu-id="33531-337">Does your issue relate to the availability of one of the storage services?</span></span>

* <span data-ttu-id="33531-338">[metriky způsobit nárůst PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="33531-338">[Metrics show an increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="33531-339">[metriky způsobit nárůst PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="33531-339">[Metrics show an increase in PercentTimeoutError]</span></span>
* <span data-ttu-id="33531-340">[Metrika ukazuje zvýšení u PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="33531-340">[Metrics show an increase in PercentNetworkError]</span></span>

---
 <span data-ttu-id="33531-341">Klientské aplikace přijímá odpovědi HTTP 4XX (například 404) ze služby úložiště?</span><span class="sxs-lookup"><span data-stu-id="33531-341">Is your client application receiving an HTTP 4XX (such as 404) response from a storage service?</span></span>

* <span data-ttu-id="33531-342">[Klient je přijímání zpráv protokolu HTTP 403 (zakázáno)]</span><span class="sxs-lookup"><span data-stu-id="33531-342">[The client is receiving HTTP 403 (Forbidden) messages]</span></span>
* <span data-ttu-id="33531-343">[Klient je přijímání zpráv HTTP 404 (není nalezena)]</span><span class="sxs-lookup"><span data-stu-id="33531-343">[The client is receiving HTTP 404 (Not found) messages]</span></span>
* <span data-ttu-id="33531-344">[Klient je přijímání zpráv protokolu HTTP 409 (konflikt)]</span><span class="sxs-lookup"><span data-stu-id="33531-344">[The client is receiving HTTP 409 (Conflict) messages]</span></span>

---
<span data-ttu-id="33531-345">[metriky ukazují nízkou PercentSuccess nebo položky protokolu analýzy mít operací s stav transakce ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="33531-345">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>

---
<span data-ttu-id="33531-346">[Metriky kapacity způsobit neočekávané nárůst využití kapacity úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-346">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>

---
<span data-ttu-id="33531-347">[Dochází k neočekávané restartování virtuálních počítačů, které mají velký počet připojených virtuálních pevných disků]</span><span class="sxs-lookup"><span data-stu-id="33531-347">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>

---
<span data-ttu-id="33531-348">[Problém vyplývá z pomocí emulátoru úložiště pro vývoj nebo testování]</span><span class="sxs-lookup"><span data-stu-id="33531-348">[Your issue arises from using the storage emulator for development or test]</span></span>

---
<span data-ttu-id="33531-349">[Narazíte na potíže s instalací sady Azure SDK pro .NET]</span><span class="sxs-lookup"><span data-stu-id="33531-349">[You are encountering problems installing the Azure SDK for .NET]</span></span>

---
<span data-ttu-id="33531-350">[Máte jiný problém se službou úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-350">[You have a different issue with a storage service]</span></span>

---
### <span data-ttu-id="33531-351"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Metriky ukazují AverageE2ELatency vysoké a nízké AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="33531-351"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show high AverageE2ELatency and low AverageServerLatency</span></span>
<span data-ttu-id="33531-352">Na obrázku níže z [portál Azure](https://portal.azure.com) monitorování nástroj ukazuje příklad kde **AverageE2ELatency** výrazně vyšší, než **AverageServerLatency**.</span><span class="sxs-lookup"><span data-stu-id="33531-352">The illustration below from the [Azure portal](https://portal.azure.com) monitoring tool shows an example where the **AverageE2ELatency** is significantly higher than the **AverageServerLatency**.</span></span>

![][4]

<span data-ttu-id="33531-353">Všimněte si, že službu úložiště pouze vypočítá metriku **AverageE2ELatency** pro úspěšné požadavky a na rozdíl od **AverageServerLatency**, zahrnuje čas klienta trvá odesílat data a přijímat potvrzení ze služby storage.</span><span class="sxs-lookup"><span data-stu-id="33531-353">Note that the storage service only calculates the metric **AverageE2ELatency** for successful requests and, unlike **AverageServerLatency**, includes the time the client takes to send the data and receive acknowledgement from the storage service.</span></span> <span data-ttu-id="33531-354">Proto rozdíl mezi **AverageE2ELatency** a **AverageServerLatency** může být buď z důvodu klientská aplikace je pomalá reagovat, nebo kvůli podmínek v síti.</span><span class="sxs-lookup"><span data-stu-id="33531-354">Therefore, a difference between **AverageE2ELatency** and **AverageServerLatency** could be either due to the client application being slow to respond, or due to conditions on the network.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-355">Můžete také zobrazit **E2ELatency** a **ServerLatency** pro jednotlivé úložiště operace v protokolování úložiště protokolovat data.</span><span class="sxs-lookup"><span data-stu-id="33531-355">You can also view **E2ELatency** and **ServerLatency** for individual storage operations in the Storage Logging log data.</span></span>
> 
> 

#### <a name="investigating-client-performance-issues"></a><span data-ttu-id="33531-356">Prozkoumat problémy s výkonem klienta</span><span class="sxs-lookup"><span data-stu-id="33531-356">Investigating client performance issues</span></span>
<span data-ttu-id="33531-357">Možné důvody pro klienta reagovat pomalu zahrnují mají omezený počet připojení k dispozici nebo vláken, nebo se nedostatek prostředků, jako je například CPU, paměť či síťové šířky pásma.</span><span class="sxs-lookup"><span data-stu-id="33531-357">Possible reasons for the client responding slowly include having a limited number of available connections or threads, or being low on resources such as CPU, memory or network bandwidth.</span></span> <span data-ttu-id="33531-358">Bude pravděpodobně možné vyřešit problém úpravou kódu klienta efektivnější (například pomocí asynchronní volání služby storage) nebo pomocí větší virtuální počítač (s více jader a další paměť).</span><span class="sxs-lookup"><span data-stu-id="33531-358">You may be able to resolve the issue by modifying the client code to be more efficient (for example by using asynchronous calls to the storage service), or by using a larger Virtual Machine (with more cores and more memory).</span></span>

<span data-ttu-id="33531-359">Pro služby tabulky a fronty algoritmus Nagle taky může způsobit vysokou **AverageE2ELatency** ve srovnání s **AverageServerLatency**: Další informace najdete v příspěvku [na Nagle algoritmus není popisný směrem malé požadavky](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-359">For the table and queue services, the Nagle algorithm can also cause high **AverageE2ELatency** as compared to **AverageServerLatency**: for more information see the post [Nagle's Algorithm is Not Friendly towards Small Requests](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx).</span></span> <span data-ttu-id="33531-360">Algoritmus Nagle v kódu můžete zakázat pomocí **ServicePointManager –** třídy v **System.Net** oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="33531-360">You can disable the Nagle algorithm in code by using the **ServicePointManager** class in the **System.Net** namespace.</span></span> <span data-ttu-id="33531-361">Bude třeba provést před všechny volání do tabulky nebo fronty služby ve vaší aplikaci, protože to nemá vliv na připojení, které jsou již otevřít.</span><span class="sxs-lookup"><span data-stu-id="33531-361">You should do this before you make any calls to the table or queue services in your application since this does not affect connections that are already open.</span></span> <span data-ttu-id="33531-362">Následující příklad pochází z **Application_Start** metoda v roli pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="33531-362">The following example comes from the **Application_Start** method in a worker role.</span></span>

```csharp
var storageAccount = CloudStorageAccount.Parse(connStr);
ServicePoint tableServicePoint = ServicePointManager.FindServicePoint(storageAccount.TableEndpoint);
tableServicePoint.UseNagleAlgorithm = false;
ServicePoint queueServicePoint = ServicePointManager.FindServicePoint(storageAccount.QueueEndpoint);
queueServicePoint.UseNagleAlgorithm = false;
```

<span data-ttu-id="33531-363">Klientské protokoly chcete zobrazit, kolik požadavky, že je odesílání klientskou aplikaci a zkontrolujte Obecné .NET související kritické body v vašeho klienta, například CPU, uvolňování paměti .NET, využití sítě, paměť, byste měli zkontrolovat.</span><span class="sxs-lookup"><span data-stu-id="33531-363">You should check the client-side logs to see how many requests your client application is submitting, and check for general .NET related performance bottlenecks in your client such as CPU, .NET garbage collection, network utilization, or memory.</span></span> <span data-ttu-id="33531-364">Jako výchozí bod pro řešení potíží s .NET klientské aplikace, najdete v části [ladění, trasování a profilování](http://msdn.microsoft.com/library/7fe0dd2y).</span><span class="sxs-lookup"><span data-stu-id="33531-364">As a starting point for troubleshooting .NET client applications, see [Debugging, Tracing, and Profiling](http://msdn.microsoft.com/library/7fe0dd2y).</span></span>

#### <a name="investigating-network-latency-issues"></a><span data-ttu-id="33531-365">Prozkoumat problémy s latencí sítě</span><span class="sxs-lookup"><span data-stu-id="33531-365">Investigating network latency issues</span></span>
<span data-ttu-id="33531-366">Obvykle vysokou latencí začátku do konce způsobena sítí je z důvodu přechodné podmínky.</span><span class="sxs-lookup"><span data-stu-id="33531-366">Typically, high end-to-end latency caused by the network is due to transient conditions.</span></span> <span data-ttu-id="33531-367">Obě problémy se síťovým přechodný a trvalé například vynechaných paketů můžete prozkoumat pomocí nástrojů, jako je například Wireshark nebo Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="33531-367">You can investigate both transient and persistent network issues such as dropped packets by using tools such as Wireshark or Microsoft Message Analyzer.</span></span>

<span data-ttu-id="33531-368">Další informace o používání Wireshark k řešení problémů se sítí, najdete v části "[příloze 2: zachycení síťového provozu pomocí Wireshark]."</span><span class="sxs-lookup"><span data-stu-id="33531-368">For more information about using Wireshark to troubleshoot network issues, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="33531-369">Další informace o používání Microsoft Message Analyzer k řešení problémů se sítí, najdete v části "[příloha 3: použití Microsoft Message Analyzer pro zachycení síťového provozu]."</span><span class="sxs-lookup"><span data-stu-id="33531-369">For more information about using Microsoft Message Analyzer to troubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

### <span data-ttu-id="33531-370"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Metriky ukazují nízkou AverageE2ELatency a nízkou AverageServerLatency ale dochází k vysoké latenci klienta</span><span class="sxs-lookup"><span data-stu-id="33531-370"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency</span></span>
<span data-ttu-id="33531-371">V tomto scénáři nejpravděpodobnější příčinou je zpoždění v žádostech úložiště dosažení služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-371">In this scenario, the most likely cause is a delay in the storage requests reaching the storage service.</span></span> <span data-ttu-id="33531-372">Proč požadavky od klienta nejsou prováděním přes služby objektů blob, které byste měli prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="33531-372">You should investigate why requests from the client are not making it through to the blob service.</span></span>

<span data-ttu-id="33531-373">Jedním z možných důvodů pro klienta, čímž dochází ke zpoždění odesílání požadavků je, že jsou omezený počet připojení k dispozici nebo vláken.</span><span class="sxs-lookup"><span data-stu-id="33531-373">One possible reason for the client delaying sending requests is that there are a limited number of available connections or threads.</span></span>

<span data-ttu-id="33531-374">Musí také zkontrolujte, jestli klient provádí více opakování a prověřte důvod, pokud se jedná o tento případ.</span><span class="sxs-lookup"><span data-stu-id="33531-374">You should also check whether the client is performing multiple retries, and investigate the reason if this is the case.</span></span> <span data-ttu-id="33531-375">Chcete-li určit, zda klient pracuje více opakování, můžete:</span><span class="sxs-lookup"><span data-stu-id="33531-375">To determine whether the client is performing multiple retries, you can:</span></span>

* <span data-ttu-id="33531-376">Zkontrolujte protokoly analytika úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-376">Examine the Storage Analytics logs.</span></span> <span data-ttu-id="33531-377">Pokud první pokus se děje, zobrazí se více operací se stejným ID žádosti klienta, ale s požadavkem na jiný server ID.</span><span class="sxs-lookup"><span data-stu-id="33531-377">If multiple retries are happening, you will see multiple operations with the same client request ID but with different server request IDs.</span></span>
* <span data-ttu-id="33531-378">Zkontrolujte protokoly klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-378">Examine the client logs.</span></span> <span data-ttu-id="33531-379">Podrobné protokolování bude znamenat, že došlo k chybě a k opakování.</span><span class="sxs-lookup"><span data-stu-id="33531-379">Verbose logging will indicate that a retry has occurred.</span></span>
* <span data-ttu-id="33531-380">Ladění kódu a zkontrolujte vlastnosti **informacím OperationContext** objekt přidružený k požadavku.</span><span class="sxs-lookup"><span data-stu-id="33531-380">Debug your code, and check the properties of the **OperationContext** object associated with the request.</span></span> <span data-ttu-id="33531-381">Pokud operace se pokusila akci opakovat, **RequestResults** vlastnost bude obsahovat více požadavek serveru jedinečné identifikátory.</span><span class="sxs-lookup"><span data-stu-id="33531-381">If the operation has retried, the **RequestResults** property will include multiple unique server request IDs.</span></span> <span data-ttu-id="33531-382">Můžete také zkontrolovat počáteční a koncový čas pro každý požadavek.</span><span class="sxs-lookup"><span data-stu-id="33531-382">You can also check the start and end times for each request.</span></span> <span data-ttu-id="33531-383">Další informace najdete v tématu ukázka kódu v části [ID žádosti serveru].</span><span class="sxs-lookup"><span data-stu-id="33531-383">For more information, see the code sample in the section [Server request ID].</span></span>

<span data-ttu-id="33531-384">Pokud zde nejsou žádné problémy v klientovi, které byste měli prozkoumat potenciální problémy se síťovým například ztráta paketů.</span><span class="sxs-lookup"><span data-stu-id="33531-384">If there are no issues in the client, you should investigate potential network issues such as packet loss.</span></span> <span data-ttu-id="33531-385">Nástroje, například Wireshark nebo Microsoft Message Analyzer můžete použít k prozkoumání problémů se sítí.</span><span class="sxs-lookup"><span data-stu-id="33531-385">You can use tools such as Wireshark or Microsoft Message Analyzer to investigate network issues.</span></span>

<span data-ttu-id="33531-386">Další informace o používání Wireshark k řešení problémů se sítí, najdete v části "[příloze 2: zachycení síťového provozu pomocí Wireshark]."</span><span class="sxs-lookup"><span data-stu-id="33531-386">For more information about using Wireshark to troubleshoot network issues, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="33531-387">Další informace o používání Microsoft Message Analyzer k řešení problémů se sítí, najdete v části "[příloha 3: použití Microsoft Message Analyzer pro zachycení síťového provozu]."</span><span class="sxs-lookup"><span data-stu-id="33531-387">For more information about using Microsoft Message Analyzer to troubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

### <span data-ttu-id="33531-388"><a name="metrics-show-high-AverageServerLatency"></a>Metriky ukazují vysoké AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="33531-388"><a name="metrics-show-high-AverageServerLatency"></a>Metrics show high AverageServerLatency</span></span>
<span data-ttu-id="33531-389">V případě vysoce **AverageServerLatency** žádostí o stažení objektů blob, měli byste použít protokol úložiště protokolování Pokud jsou k dispozici opakované žádosti pro stejný objekt blob (nebo sadu objektů BLOB).</span><span class="sxs-lookup"><span data-stu-id="33531-389">In the case of high **AverageServerLatency** for blob download requests, you should use the Storage Logging logs to see if there are repeated requests for the same blob (or set of blobs).</span></span> <span data-ttu-id="33531-390">Pro objekt blob odesílat žádosti, které byste měli prozkoumat co bloku používá velikost klienta (například blokuje menší než 64 tisíc velikost může vést režie Pokud čtení jsou i v méně než 64 tisíc skupiny), a v případě, že více klientů nahráváte bloky na stejný objekt blob paralelně.</span><span class="sxs-lookup"><span data-stu-id="33531-390">For blob upload requests, you should investigate what block size the client is using (for example, blocks less than 64K in size can result in overheads unless the reads are also in less than 64K chunks), and if multiple clients are uploading blocks to the same blob in parallel.</span></span> <span data-ttu-id="33531-391">Také byste měli zkontrolovat za minutu metriky špiček v počet požadavků, jejichž výsledkem je vyšší než na druhý cíle škálovatelnosti: také najdete v části "[metriky způsobit nárůst PercentTimeoutError]."</span><span class="sxs-lookup"><span data-stu-id="33531-391">You should also check the per-minute metrics for spikes in the number of requests that result in exceeding the per second scalability targets: also see "[Metrics show an increase in PercentTimeoutError]."</span></span>

<span data-ttu-id="33531-392">Pokud vidíte základní **AverageServerLatency** ke stažení objektů blob požadavky, když jsou opakována požádá o stejný objekt blob nebo sadu objektů BLOB, pak byste měli zvážit ukládání do mezipaměti tyto objekty BLOB pomocí Azure Cache nebo Azure Content Delivery Network (CDN).</span><span class="sxs-lookup"><span data-stu-id="33531-392">If you are seeing high **AverageServerLatency** for blob download requests when there are repeated requests the same blob or set of blobs, then you should consider caching these blobs using Azure Cache or the Azure Content Delivery Network (CDN).</span></span> <span data-ttu-id="33531-393">Pro nahrávání požadavky můžete zlepšit propustnost pomocí větší velikost bloku.</span><span class="sxs-lookup"><span data-stu-id="33531-393">For upload requests, you can improve the throughput by using a larger block size.</span></span> <span data-ttu-id="33531-394">Pro dotazy na tabulky je také možné implementovat ukládání do mezipaměti na straně klienta na klientech, provádět stejné operace dotazů a kde data nemění příliš často.</span><span class="sxs-lookup"><span data-stu-id="33531-394">For queries to tables, it is also possible to implement client-side caching on clients that perform the same query operations and where the data doesn't change frequently.</span></span>

<span data-ttu-id="33531-395">Vysoká **AverageServerLatency** hodnoty mohou být také příznakem nesprávně navržen tabulky nebo dotazy, výsledek v operacích kontroly nebo který postupujte připojení nebo předřazení proti vzor.</span><span class="sxs-lookup"><span data-stu-id="33531-395">High **AverageServerLatency** values can also be a symptom of poorly designed tables or queries that result in scan operations or that follow the append/prepend anti-pattern.</span></span> <span data-ttu-id="33531-396">Najdete v části "[metriky způsobit nárůst PercentThrottlingError]" Další informace.</span><span class="sxs-lookup"><span data-stu-id="33531-396">See "[Metrics show an increase in PercentThrottlingError]" for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-397">Můžete najít komplexní kontrolní seznam výkonu kontrolní seznam zde: [Microsoft Azure Storage výkon a škálovatelnost kontrolní seznam](storage-performance-checklist.md).</span><span class="sxs-lookup"><span data-stu-id="33531-397">You can find a comprehensive checklist performance checklist here: [Microsoft Azure Storage Performance and Scalability Checklist](storage-performance-checklist.md).</span></span>
> 
> 

### <span data-ttu-id="33531-398"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>Dochází k neočekávané zpoždění při doručování zpráv ve frontě</span><span class="sxs-lookup"><span data-stu-id="33531-398"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>You are experiencing unexpected delays in message delivery on a queue</span></span>
<span data-ttu-id="33531-399">Pokud dochází ke zpoždění mezi aplikace přidá zprávu do fronty čas a čas, kdy je k dispozici ke čtení z fronty, potom můžete provést následující kroky k diagnostice problému:</span><span class="sxs-lookup"><span data-stu-id="33531-399">If you are experiencing a delay between the time an application adds a message to a queue and the time it becomes available to read from the queue, then you should take the following steps to diagnose the issue:</span></span>

* <span data-ttu-id="33531-400">Ověřte, že aplikace je úspěšně přidání zprávy do fronty.</span><span class="sxs-lookup"><span data-stu-id="33531-400">Verify the application is successfully adding the messages to the queue.</span></span> <span data-ttu-id="33531-401">Zkontrolujte, zda není aplikace opakování **AddMessage** metody několikrát před úspěšné.</span><span class="sxs-lookup"><span data-stu-id="33531-401">Check that the application is not retrying the **AddMessage** method several times before succeeding.</span></span> <span data-ttu-id="33531-402">Protokoly Klientská knihovna pro úložiště se zobrazí všechny opakovaných pokusech operace úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-402">The Storage Client Library logs will show any repeated retries of storage operations.</span></span>
* <span data-ttu-id="33531-403">Ověřte, neexistuje žádný hodiny zkosení mezi role pracovního procesu, který přidá zprávu do fronty a role pracovního procesu, který čte zprávy z fronty, který umožňuje zobrazit, jako když dochází ke zpoždění při zpracování.</span><span class="sxs-lookup"><span data-stu-id="33531-403">Verify there is no clock skew between the worker role that adds the message to the queue and the worker role that reads the message from the queue that makes it appear as if there is a delay in processing.</span></span>
* <span data-ttu-id="33531-404">Zkontrolujte, pokud se nedaří role pracovního procesu, který čte zprávy z fronty.</span><span class="sxs-lookup"><span data-stu-id="33531-404">Check if the worker role that reads the messages from the queue is failing.</span></span> <span data-ttu-id="33531-405">Fronty klienta volá-li **GetMessage** metoda, ale přestane reagovat s potvrzení, zpráva zůstane neviditelná ve frontě, dokud **invisibilityTimeout** období vyprší platnost.</span><span class="sxs-lookup"><span data-stu-id="33531-405">If a queue client calls the **GetMessage** method but fails to respond with an acknowledgement, the message will remain invisible on the queue until the **invisibilityTimeout** period expires.</span></span> <span data-ttu-id="33531-406">V tomto okamžiku zpráva bude k dispozici pro zpracování znovu.</span><span class="sxs-lookup"><span data-stu-id="33531-406">At this point, the message becomes available for processing again.</span></span>
* <span data-ttu-id="33531-407">Zkontrolujte, pokud se časem zvětšuje délka fronty.</span><span class="sxs-lookup"><span data-stu-id="33531-407">Check if the queue length is growing over time.</span></span> <span data-ttu-id="33531-408">Tato situace může nastat, pokud nemáte dostatečnou pracovníci k dispozici pro zpracování všechny zprávy, které ostatní zaměstnanci jsou umístění na fronty.</span><span class="sxs-lookup"><span data-stu-id="33531-408">This can occur if you do not have sufficient workers available to process all of the messages that other workers are placing on the queue.</span></span> <span data-ttu-id="33531-409">Také byste měli zkontrolovat, že podle metrik, které chcete zobrazit, pokud požadavky delete jsou selhání a počet dequeue na zprávy, jež mohou indikovat opakována neúspěšných pokusů o odstranění zprávy.</span><span class="sxs-lookup"><span data-stu-id="33531-409">You should also check the metrics to see if delete requests are failing and the dequeue count on messages, which might indicate repeated failed attempts to delete the message.</span></span>
* <span data-ttu-id="33531-410">Zkontrolujte protokoly protokolování úložiště pro všechny operace fronty, které mají vyšší, než se očekávalo **E2ELatency** a **ServerLatency** hodnoty po dobu delší dobu než obvykle.</span><span class="sxs-lookup"><span data-stu-id="33531-410">Examine the Storage Logging logs for any queue operations that have higher than expected **E2ELatency** and **ServerLatency** values over a longer period of time than usual.</span></span>

### <span data-ttu-id="33531-411"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Metriky způsobit nárůst PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="33531-411"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Metrics show an increase in PercentThrottlingError</span></span>
<span data-ttu-id="33531-412">Dochází k omezení chybám, když překročíte cíle škálovatelnosti služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-412">Throttling errors occur when you exceed the scalability targets of a storage service.</span></span> <span data-ttu-id="33531-413">Služba úložiště nemá to zajistit, že žádné jednoho klienta nebo klienta můžete používat služby za cenu ostatní.</span><span class="sxs-lookup"><span data-stu-id="33531-413">The storage service does this to ensure that no single client or tenant can use the service at the expense of others.</span></span> <span data-ttu-id="33531-414">Další informace najdete v tématu [a cíle výkonnosti služby Azure Storage Scalability](storage-scalability-targets.md) podrobné informace o cíle škálovatelnosti pro účty úložiště a cíle výkonnosti pro oddíly v rámci účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-414">For more information, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) for details on scalability targets for storage accounts and performance targets for partitions within storage accounts.</span></span>

<span data-ttu-id="33531-415">Pokud **PercentThrottlingError** metrika způsobit nárůst procento žádostí, které se selháním kvůli chybě omezení, budete muset prozkoumat jeden z těchto dvou scénářů:</span><span class="sxs-lookup"><span data-stu-id="33531-415">If the **PercentThrottlingError** metric show an increase in the percentage of requests that are failing with a throttling error, you need to investigate one of two scenarios:</span></span>

* <span data-ttu-id="33531-416">[Přechodný zvýšení PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="33531-416">[Transient increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="33531-417">[Trvalé zvýšení PercentThrottlingError chyba]</span><span class="sxs-lookup"><span data-stu-id="33531-417">[Permanent increase in PercentThrottlingError error]</span></span>

<span data-ttu-id="33531-418">Zvýšení **PercentThrottlingError** často dochází ve stejnou dobu jako zvýšení počtu požadavků na úložiště nebo pokud jste původně zátěžové testování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-418">An increase in **PercentThrottlingError** often occurs at the same time as an increase in the number of storage requests, or when you are initially load testing your application.</span></span> <span data-ttu-id="33531-419">To může také projevit v klientovi jako "503 Server zaneprázdněn" nebo "500 časový limit operace" HTTP stavové zprávy z operace úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-419">This may also manifest itself in the client as "503 Server Busy" or "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

#### <span data-ttu-id="33531-420"><a name="transient-increase-in-PercentThrottlingError"></a>Přechodný zvýšení PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="33531-420"><a name="transient-increase-in-PercentThrottlingError"></a>Transient increase in PercentThrottlingError</span></span>
<span data-ttu-id="33531-421">Pokud vidíte špičky v hodnotě **PercentThrottlingError** , shoduje s období vysoké aktivity pro aplikaci, byste měli implementovat exponenciální (ne lineární) regrese strategie pro opakování vašeho klienta: tím snížit okamžitou zatížení v oddílu a pomáhají aplikace vyhlazení špičky v provozu.</span><span class="sxs-lookup"><span data-stu-id="33531-421">If you are seeing spikes in the value of **PercentThrottlingError** that coincide with periods of high activity for the application, you should implement an exponential (not linear) back off strategy for retries in your client: this will reduce the immediate load on the partition and help your application to smooth out spikes in traffic.</span></span> <span data-ttu-id="33531-422">Další informace o tom, jak implementovat zásady opakování pomocí klientské knihovny pro úložiště najdete v tématu [Microsoft.WindowsAzure.Storage.RetryPolicies Namespace](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-422">For more information about how to implement retry policies using the Storage Client Library, see [Microsoft.WindowsAzure.Storage.RetryPolicies Namespace](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="33531-423">Může se také zobrazit špičky v hodnotě **PercentThrottlingError** který nekolidují s období vysoké aktivity pro aplikaci: nejpravděpodobnější příčinou je služba úložiště přesunutí oddíly zvýšíte Vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="33531-423">You may also see spikes in the value of **PercentThrottlingError** that do not coincide with periods of high activity for the application: the most likely cause here is the storage service moving partitions to improve load balancing.</span></span>
> 
> 

#### <span data-ttu-id="33531-424"><a name="permanent-increase-in-PercentThrottlingError"></a>Trvalé zvýšení PercentThrottlingError chyba</span><span class="sxs-lookup"><span data-stu-id="33531-424"><a name="permanent-increase-in-PercentThrottlingError"></a>Permanent increase in PercentThrottlingError error</span></span>
<span data-ttu-id="33531-425">Pokud vidíte konzistentně vysoké hodnoty pro **PercentThrottlingError** následující trvalé nárůstem svazků transakce, nebo při provádění počáteční zatížení testů na vaší aplikace a potřebujete vyhodnotit, jak vaše aplikace používá oddílů pro úložiště a zda se přiblíží cíle škálovatelnosti účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-425">If you are seeing a consistently high value for **PercentThrottlingError** following a permanent increase in your transaction volumes, or when you are performing your initial load tests on your application, then you need to evaluate how your application is using storage partitions and whether it is approaching the scalability targets for a storage account.</span></span> <span data-ttu-id="33531-426">Například pokud vidíte omezení chyby ve frontě (který se počítá jako jeden oddíl), pak měli byste zvážit použití další fronty rozkládá transakce mezi více oddílů.</span><span class="sxs-lookup"><span data-stu-id="33531-426">For example, if you are seeing throttling errors on a queue (which counts as a single partition), then you should consider using additional queues to spread the transactions across multiple partitions.</span></span> <span data-ttu-id="33531-427">Pokud vidíte omezení chyby v tabulce, je potřeba zvážit použití různých schéma rozdělení oddílů rozkládá vaší transakce mezi více oddílů s využitím širší rozsah hodnot klíče oddílu.</span><span class="sxs-lookup"><span data-stu-id="33531-427">If you are seeing throttling errors on a table, you need to consider using a different partitioning scheme to spread your transactions across multiple partitions by using a wider range of partition key values.</span></span> <span data-ttu-id="33531-428">Jednou z běžných příčin tohoto problému je prepend/připojovat proti vzor kde vyberte datum jako klíč oddílu a pak se všechna data v určitý den jsou zapsána do jednoho oddílu: zátěži, může být výsledkem kritický bod zápisu.</span><span class="sxs-lookup"><span data-stu-id="33531-428">One common cause of this issue is the prepend/append anti-pattern where you select the date as the partition key and then all data on a particular day is written to one partition: under load, this can result in a write bottleneck.</span></span> <span data-ttu-id="33531-429">Si zvažte různé rozdělení návrh nebo vyhodnocení, zda pomocí úložiště objektů blob může být lepším řešením.</span><span class="sxs-lookup"><span data-stu-id="33531-429">You should either consider a different partitioning design or evaluate whether using blob storage might be a better solution.</span></span> <span data-ttu-id="33531-430">Musí také zkontrolujte, zda bude omezení dochází v důsledku špičky v provozu a prozkoumat způsoby vyhlazení vaší vzor požadavků.</span><span class="sxs-lookup"><span data-stu-id="33531-430">You should also check if the throttling is occurring as a result of spikes in your traffic and investigate ways of smoothing your pattern of requests.</span></span>

<span data-ttu-id="33531-431">Pokud distribuujete vaší transakce napříč více oddílů, musíte stále být informace o limitech škálovatelnosti, nastavte pro účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-431">If you distribute your transactions across multiple partitions, you must still be aware of the scalability limits set for the storage account.</span></span> <span data-ttu-id="33531-432">Například pokud jste použili deset fronty každé zpracování maximálně 2 000 1KB zpráv za sekundu, nebudete na celkový limit 20 000 zpráv za sekundu pro účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-432">For example, if you used ten queues each processing the maximum of 2,000 1KB messages per second, you will be at the overall limit of 20,000 messages per second for the storage account.</span></span> <span data-ttu-id="33531-433">Pokud potřebujete ke zpracování více než 20 000 entity za sekundu, měli byste zvážit použití více účtů úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-433">If you need to process more than 20,000 entities per second, you should consider using multiple storage accounts.</span></span> <span data-ttu-id="33531-434">Vezměte také na paměti, že velikost žádosti a entity má dopad na při službu úložiště omezí generovaný vaši klienti: Pokud máte větší požadavky a entity, které může omezeny dříve.</span><span class="sxs-lookup"><span data-stu-id="33531-434">You should also bear in mind that the size of your requests and entities has an impact on when the storage service throttles your clients: if you have larger requests and entities, you may be throttled sooner.</span></span>

<span data-ttu-id="33531-435">Návrh neefektivní dotazu může také způsobit dosáhl omezení škálovatelnosti pro tabulku oddílů.</span><span class="sxs-lookup"><span data-stu-id="33531-435">Inefficient query design can also cause you to hit the scalability limits for table partitions.</span></span> <span data-ttu-id="33531-436">Dotaz s filtrem jedno procento entit který vybere jen v oddílu, ale který prohledá všechny entity v oddílu například potřebovat přístup k každé entity.</span><span class="sxs-lookup"><span data-stu-id="33531-436">For example, a query with a filter that only selects one percent of the entities in a partition but that scans all the entities in a partition will need to access each entity.</span></span> <span data-ttu-id="33531-437">Každou entitu číst se bude započítávat celkový počet transakcí v tomto oddílu. Proto můžete snadno dosáhnout cíle škálovatelnosti.</span><span class="sxs-lookup"><span data-stu-id="33531-437">Every entity read will count towards the total number of transactions in that partition; therefore, you can easily reach the scalability targets.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-438">Testování výkonu by měl odhalit jakékoli návrhy neefektivní dotazu v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="33531-438">Your performance testing should reveal any inefficient query designs in your application.</span></span>
> 
> 

### <span data-ttu-id="33531-439"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Metriky způsobit nárůst PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="33531-439"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Metrics show an increase in PercentTimeoutError</span></span>
<span data-ttu-id="33531-440">Vaše metriky způsobit nárůst v **PercentTimeoutError** pro jednu z vaší služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-440">Your metrics show an increase in **PercentTimeoutError** for one of your storage services.</span></span> <span data-ttu-id="33531-441">Ve stejnou dobu obdrží klient k velkému počtu stavové zprávy "500 časový limit operace" HTTP z operace úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-441">At the same time, the client receives a high volume of "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-442">Může se zobrazit chyby vypršení časového limitu dočasně jako službu úložiště zatížení u žádostí o zůstatky přesunutím oddílu na nový server.</span><span class="sxs-lookup"><span data-stu-id="33531-442">You may see timeout errors temporarily as the storage service load balances requests by moving a partition to a new server.</span></span>
> 
> 

<span data-ttu-id="33531-443">**PercentTimeoutError** metrika je agregaci následující metriky: **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError**, a **SASServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="33531-443">The **PercentTimeoutError** metric is an aggregation of the following metrics: **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError**, and **SASServerTimeoutError**.</span></span>

<span data-ttu-id="33531-444">Časový limit serveru jsou způsobeny chybu na serveru.</span><span class="sxs-lookup"><span data-stu-id="33531-444">The server timeouts are caused by an error on the server.</span></span> <span data-ttu-id="33531-445">Překročení časového limitu klienta dojít, protože operace na serveru překročil časový limit zadaný klientem; Například můžete nastavit časový limit operace pomocí klienta pomocí klientské knihovny pro úložiště **ServerTimeout** vlastnost **QueueRequestOptions** třídy.</span><span class="sxs-lookup"><span data-stu-id="33531-445">The client timeouts happen because an operation on the server has exceeded the timeout specified by the client; for example, a client using the Storage Client Library can set a timeout for an operation by using the **ServerTimeout** property of the **QueueRequestOptions** class.</span></span>

<span data-ttu-id="33531-446">Časový limit serveru znamenat problém související s službu úložiště, který vyžaduje další šetření.</span><span class="sxs-lookup"><span data-stu-id="33531-446">Server timeouts indicate a problem with the storage service that requires further investigation.</span></span> <span data-ttu-id="33531-447">Metriky můžete použít, pokud chcete zobrazit, pokud jste nedosáhli limitech škálovatelnosti pro službu a identifikovat všechny špičky v provozu, který může být příčinou tohoto problému.</span><span class="sxs-lookup"><span data-stu-id="33531-447">You can use metrics to see if you are hitting the scalability limits for the service and to identify any spikes in traffic that might be causing this problem.</span></span> <span data-ttu-id="33531-448">Pokud je problém přerušované, může být kvůli Vyrovnávání zatížení aktivity v rámci služby.</span><span class="sxs-lookup"><span data-stu-id="33531-448">If the problem is intermittent, it may be due to load-balancing activity in the service.</span></span> <span data-ttu-id="33531-449">Pokud tento problém je trvalé a není způsobené aplikace nedosáhli omezení škálovatelnosti služby, by měla vyvolat podporu problém.</span><span class="sxs-lookup"><span data-stu-id="33531-449">If the problem is persistent and is not caused by your application hitting the scalability limits of the service, you should raise a support issue.</span></span> <span data-ttu-id="33531-450">Pro překročení časového limitu klienta musíte rozhodnout, pokud je časový limit je nastaven na odpovídající hodnotu v klientovi a buď změňte nastavení hodnota časového limitu v klientovi nebo zjistěte, jak může zvýšit výkon operací v úložišti služby, například optimalizace své dotazy tabulky nebo zmenšení velikosti zprávy.</span><span class="sxs-lookup"><span data-stu-id="33531-450">For client timeouts, you must decide if the timeout is set to an appropriate value in the client and either change the timeout value set in the client or investigate how you can improve the performance of the operations in the storage service, for example by optimizing your table queries or reducing the size of your messages.</span></span>

### <span data-ttu-id="33531-451"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Metriky způsobit nárůst PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="33531-451"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Metrics show an increase in PercentNetworkError</span></span>
<span data-ttu-id="33531-452">Vaše metriky způsobit nárůst v **PercentNetworkError** pro jednu z vaší služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-452">Your metrics show an increase in **PercentNetworkError** for one of your storage services.</span></span> <span data-ttu-id="33531-453">**PercentNetworkError** metrika je agregaci následující metriky: **NetworkError**, **AnonymousNetworkError**, a **SASNetworkError**.</span><span class="sxs-lookup"><span data-stu-id="33531-453">The **PercentNetworkError** metric is an aggregation of the following metrics: **NetworkError**, **AnonymousNetworkError**, and **SASNetworkError**.</span></span> <span data-ttu-id="33531-454">Tyto nastane, když služba úložiště zjistí chybu v síti, když klient odešle žádost úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-454">These occur when the storage service detects a network error when the client makes a storage request.</span></span>

<span data-ttu-id="33531-455">Nejčastější příčinou této chyby je klient odpojení vyprší časový limit v rámci služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-455">The most common cause of this error is a client disconnecting before a timeout expires in the storage service.</span></span> <span data-ttu-id="33531-456">Kód byste měli prozkoumat v vašeho klienta pochopit, proč a kdy se klient neodpojí ze služby storage.</span><span class="sxs-lookup"><span data-stu-id="33531-456">You should investigate the code in your client to understand why and when the client disconnects from the storage service.</span></span> <span data-ttu-id="33531-457">Můžete také použít Wireshark, Microsoft Message Analyzer nebo Tcping prozkoumat problémy se síťovým připojením z klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-457">You can also use Wireshark, Microsoft Message Analyzer, or Tcping to investigate network connectivity issues from the client.</span></span> <span data-ttu-id="33531-458">Tyto nástroje jsou popsány v [přílohy].</span><span class="sxs-lookup"><span data-stu-id="33531-458">These tools are described in the [Appendices].</span></span>

### <span data-ttu-id="33531-459"><a name="the-client-is-receiving-403-messages"></a>Klient je přijímání zpráv protokolu HTTP 403 (zakázáno)</span><span class="sxs-lookup"><span data-stu-id="33531-459"><a name="the-client-is-receiving-403-messages"></a>The client is receiving HTTP 403 (Forbidden) messages</span></span>
<span data-ttu-id="33531-460">Pokud klientské aplikace způsobující chyby protokolu HTTP 403 (zakázáno), pravděpodobnou příčinou je, že klient při odesílání požadavku na úložiště (i když další možné příčiny patří hodiny zkosení, neplatné klíče a prázdný hlavičky) používá vypršenou platností sdíleného přístupového podpisu (SAS).</span><span class="sxs-lookup"><span data-stu-id="33531-460">If your client application is throwing HTTP 403 (Forbidden) errors, a likely cause is that the client is using an expired Shared Access Signature (SAS) when it sends a storage request (although other possible causes include clock skew, invalid keys, and empty headers).</span></span> <span data-ttu-id="33531-461">Pokud vypršela platnost SAS klíč je příčinou, neuvidíte žádné položky v protokolu datům na serveru protokolování úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-461">If an expired SAS key is the cause, you will not see any entries in the server-side Storage Logging log data.</span></span> <span data-ttu-id="33531-462">Následující tabulka uvádí ukázku z klienta protokolu vygenerovaných Klientská knihovna pro úložiště, který znázorňuje výskytu tohoto problému:</span><span class="sxs-lookup"><span data-stu-id="33531-462">The following table shows a sample from the client-side log generated by the Storage Client Library that illustrates this issue occurring:</span></span>

| <span data-ttu-id="33531-463">Zdroj</span><span class="sxs-lookup"><span data-stu-id="33531-463">Source</span></span> | <span data-ttu-id="33531-464">Podrobností</span><span class="sxs-lookup"><span data-stu-id="33531-464">Verbosity</span></span> | <span data-ttu-id="33531-465">Podrobností</span><span class="sxs-lookup"><span data-stu-id="33531-465">Verbosity</span></span> | <span data-ttu-id="33531-466">Id žádosti klienta</span><span class="sxs-lookup"><span data-stu-id="33531-466">Client request id</span></span> | <span data-ttu-id="33531-467">Operace textu</span><span class="sxs-lookup"><span data-stu-id="33531-467">Operation text</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="33531-468">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-468">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-469">Informace</span><span class="sxs-lookup"><span data-stu-id="33531-469">Information</span></span> |<span data-ttu-id="33531-470">3</span><span class="sxs-lookup"><span data-stu-id="33531-470">3</span></span> |<span data-ttu-id="33531-471">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-471">85d077ab-…</span></span> |<span data-ttu-id="33531-472">Spuštění operace s umístěním primární umístění režim PrimaryOnly podle.</span><span class="sxs-lookup"><span data-stu-id="33531-472">Starting operation with location Primary per location mode PrimaryOnly.</span></span> |
| <span data-ttu-id="33531-473">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-473">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-474">Informace</span><span class="sxs-lookup"><span data-stu-id="33531-474">Information</span></span> |<span data-ttu-id="33531-475">3</span><span class="sxs-lookup"><span data-stu-id="33531-475">3</span></span> |<span data-ttu-id="33531-476">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-476">85d077ab -…</span></span> |<span data-ttu-id="33531-477">Spouštění synchronní požadavek na https://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr = c&amp;ma = mypolicy&amp;sig = OFnd4Rd7z01fIvh % 2BmcR6zbudIH2F5Ikm % 2FyhNYZEmJNQ % 3D&amp;rozhraní api-version = 2014-02-14.</span><span class="sxs-lookup"><span data-stu-id="33531-477">Starting synchronous request to https://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr=c&amp;si=mypolicy&amp;sig=OFnd4Rd7z01fIvh%2BmcR6zbudIH2F5Ikm%2FyhNYZEmJNQ%3D&amp;api-version=2014-02-14.</span></span> |
| <span data-ttu-id="33531-478">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-478">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-479">Informace</span><span class="sxs-lookup"><span data-stu-id="33531-479">Information</span></span> |<span data-ttu-id="33531-480">3</span><span class="sxs-lookup"><span data-stu-id="33531-480">3</span></span> |<span data-ttu-id="33531-481">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-481">85d077ab -…</span></span> |<span data-ttu-id="33531-482">Čekání na odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-482">Waiting for response.</span></span> |
| <span data-ttu-id="33531-483">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-483">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-484">Upozornění</span><span class="sxs-lookup"><span data-stu-id="33531-484">Warning</span></span> |<span data-ttu-id="33531-485">2</span><span class="sxs-lookup"><span data-stu-id="33531-485">2</span></span> |<span data-ttu-id="33531-486">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-486">85d077ab -…</span></span> |<span data-ttu-id="33531-487">Došlo k výjimce při čekání na odpověď: vzdálený server vrátil chybu: (403) zakázán...</span><span class="sxs-lookup"><span data-stu-id="33531-487">Exception thrown while waiting for response: The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="33531-488">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-488">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-489">Informace</span><span class="sxs-lookup"><span data-stu-id="33531-489">Information</span></span> |<span data-ttu-id="33531-490">3</span><span class="sxs-lookup"><span data-stu-id="33531-490">3</span></span> |<span data-ttu-id="33531-491">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-491">85d077ab -…</span></span> |<span data-ttu-id="33531-492">Odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-492">Response received.</span></span> <span data-ttu-id="33531-493">Stavový kód = 403, ID žádosti = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, obsah MD5 =, značka ETag =.</span><span class="sxs-lookup"><span data-stu-id="33531-493">Status code = 403, Request ID = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="33531-494">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-494">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-495">Upozornění</span><span class="sxs-lookup"><span data-stu-id="33531-495">Warning</span></span> |<span data-ttu-id="33531-496">2</span><span class="sxs-lookup"><span data-stu-id="33531-496">2</span></span> |<span data-ttu-id="33531-497">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-497">85d077ab -…</span></span> |<span data-ttu-id="33531-498">Při operaci došlo k výjimce: vzdálený server vrátil chybu: (403) zakázán...</span><span class="sxs-lookup"><span data-stu-id="33531-498">Exception thrown during the operation: The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="33531-499">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-499">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-500">Informace</span><span class="sxs-lookup"><span data-stu-id="33531-500">Information</span></span> |<span data-ttu-id="33531-501">3</span><span class="sxs-lookup"><span data-stu-id="33531-501">3</span></span> |<span data-ttu-id="33531-502">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-502">85d077ab -…</span></span> |<span data-ttu-id="33531-503">Kontrola, pokud je třeba opakovat operaci.</span><span class="sxs-lookup"><span data-stu-id="33531-503">Checking if the operation should be retried.</span></span> <span data-ttu-id="33531-504">Počet opakování = 0, stavový kód HTTP = 403, výjimka = vzdálený server vrátil chybu: (403) zakázán...</span><span class="sxs-lookup"><span data-stu-id="33531-504">Retry count = 0, HTTP status code = 403, Exception = The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="33531-505">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-505">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-506">Informace</span><span class="sxs-lookup"><span data-stu-id="33531-506">Information</span></span> |<span data-ttu-id="33531-507">3</span><span class="sxs-lookup"><span data-stu-id="33531-507">3</span></span> |<span data-ttu-id="33531-508">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-508">85d077ab -…</span></span> |<span data-ttu-id="33531-509">Další umístění již byla nastavena na primární, na základě umístění režimu.</span><span class="sxs-lookup"><span data-stu-id="33531-509">The next location has been set to Primary, based on the location mode.</span></span> |
| <span data-ttu-id="33531-510">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="33531-510">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="33531-511">Chyba</span><span class="sxs-lookup"><span data-stu-id="33531-511">Error</span></span> |<span data-ttu-id="33531-512">1</span><span class="sxs-lookup"><span data-stu-id="33531-512">1</span></span> |<span data-ttu-id="33531-513">85d077ab-...</span><span class="sxs-lookup"><span data-stu-id="33531-513">85d077ab -…</span></span> |<span data-ttu-id="33531-514">Zásady opakování neumožňuje pro opakovaný pokus.</span><span class="sxs-lookup"><span data-stu-id="33531-514">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="33531-515">Došlo k selhání s vzdálený server vrátil chybu: (403) zakázán.</span><span class="sxs-lookup"><span data-stu-id="33531-515">Failing with The remote server returned an error: (403) Forbidden.</span></span> |

<span data-ttu-id="33531-516">V tomto scénáři které byste měli prozkoumat, proč je předtím, než klient odešle token do serveru vypršení platnosti tokenu SAS:</span><span class="sxs-lookup"><span data-stu-id="33531-516">In this scenario, you should investigate why the SAS token is expiring before the client sends the token to the server:</span></span>

* <span data-ttu-id="33531-517">Obvykle neměli nastavit čas spuštění, když vytvoříte SAS pro klienta k použití okamžitě.</span><span class="sxs-lookup"><span data-stu-id="33531-517">Typically, you should not set a start time when you create a SAS for a client to use immediately.</span></span> <span data-ttu-id="33531-518">Pokud existují malé hodiny rozdíly mezi hostiteli generování SAS pomocí aktuálního času a službu úložiště, je možné pro službu úložiště pro příjem SAS, který dosud není platný.</span><span class="sxs-lookup"><span data-stu-id="33531-518">If there are small clock differences between the host generating the SAS using the current time and the storage service, then it is possible for the storage service to receive a SAS that is not yet valid.</span></span>
* <span data-ttu-id="33531-519">Čas vypršení platnosti velmi krátké nesmí nastavit na SAS.</span><span class="sxs-lookup"><span data-stu-id="33531-519">You should not set a very short expiry time on a SAS.</span></span> <span data-ttu-id="33531-520">Znovu hodiny malé rozdíly mezi hostiteli generování SAS a službu úložiště může vést k SAS zjevně vypršení platnosti dříve, než se očekává.</span><span class="sxs-lookup"><span data-stu-id="33531-520">Again, small clock differences between the host generating the SAS and the storage service can lead to a SAS apparently expiring earlier than anticipated.</span></span>
* <span data-ttu-id="33531-521">Parametr verze v SAS klíč, který nemá (například **sv = 2015-04-05**), odpovídat verzi knihovny klienta úložiště používáte?</span><span class="sxs-lookup"><span data-stu-id="33531-521">Does the version parameter in the SAS key (for example **sv=2015-04-05**) match the version of the Storage Client Library you are using?</span></span> <span data-ttu-id="33531-522">Doporučujeme vždy použít nejnovější verzi [Klientská knihovna pro úložiště](https://www.nuget.org/packages/WindowsAzure.Storage/).</span><span class="sxs-lookup"><span data-stu-id="33531-522">We recommend that you always use the latest version of the [Storage Client Library](https://www.nuget.org/packages/WindowsAzure.Storage/).</span></span>
* <span data-ttu-id="33531-523">Pokud jste znovu vygenerovat přístupové klíče k úložišti, tím zneplatnit všechny existující tokeny SAS.</span><span class="sxs-lookup"><span data-stu-id="33531-523">If you regenerate your storage access keys, this can invalidate any existing SAS tokens.</span></span> <span data-ttu-id="33531-524">To může být problém, pokud generovat tokeny SAS s dobou vypršení platnosti dlouhé pro klientské aplikace do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="33531-524">This may be an issue if you generate SAS tokens with a long expiry time for client applications to cache.</span></span>

<span data-ttu-id="33531-525">Pokud používáte Klientská knihovna pro úložiště ke generování tokenů SAS, je snadné sestavení platný token.</span><span class="sxs-lookup"><span data-stu-id="33531-525">If you are using the Storage Client Library to generate SAS tokens, then it is easy to build a valid token.</span></span> <span data-ttu-id="33531-526">Ale pokud používáte rozhraní API REST úložiště a vytvořením SAS tokeny ručně měli pečlivě si přečtěte téma [delegování přístupu k pomocí sdíleného přístupového podpisu](http://msdn.microsoft.com/library/azure/ee395415.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-526">However, if you are using the Storage REST API and constructing the SAS tokens by hand you should carefully read the topic [Delegating Access with a Shared Access Signature](http://msdn.microsoft.com/library/azure/ee395415.aspx).</span></span>

### <span data-ttu-id="33531-527"><a name="the-client-is-receiving-404-messages"></a>Klient je přijímání zpráv HTTP 404 (není nalezena)</span><span class="sxs-lookup"><span data-stu-id="33531-527"><a name="the-client-is-receiving-404-messages"></a>The client is receiving HTTP 404 (Not found) messages</span></span>
<span data-ttu-id="33531-528">Pokud klientská aplikace obdrží zprávu HTTP 404 (není nalezena) ze serveru, znamená to, že objekt, který klient se pokouší použít (například entity, tabulka, objektů blob, kontejneru nebo fronty) neexistuje v úložišti služby.</span><span class="sxs-lookup"><span data-stu-id="33531-528">If the client application receives an HTTP 404 (Not found) message from the server, this implies that the object the client was attempting to use (such as an entity, table, blob, container, or queue) does not exist in the storage service.</span></span> <span data-ttu-id="33531-529">Existuje několik z možných důvodů, jako například:</span><span class="sxs-lookup"><span data-stu-id="33531-529">There are a number of possible reasons for this, such as:</span></span>

* <span data-ttu-id="33531-530">[Klient nebo jiným procesem dřív odstranit objekt]</span><span class="sxs-lookup"><span data-stu-id="33531-530">[The client or another process previously deleted the object]</span></span>
* <span data-ttu-id="33531-531">[Chybu ověřování sdíleného přístupového podpisu (SAS)]</span><span class="sxs-lookup"><span data-stu-id="33531-531">[A Shared Access Signature (SAS) authorization issue]</span></span>
* <span data-ttu-id="33531-532">[Kód jazyka JavaScript na straně klienta nemá oprávnění pro přístup k objektu]</span><span class="sxs-lookup"><span data-stu-id="33531-532">[Client-side JavaScript code does not have permission to access the object]</span></span>
* <span data-ttu-id="33531-533">[Selhání sítě]</span><span class="sxs-lookup"><span data-stu-id="33531-533">[Network failure]</span></span>

#### <span data-ttu-id="33531-534"><a name="client-previously-deleted-the-object"></a>Klient nebo jiným procesem dřív odstranit objekt</span><span class="sxs-lookup"><span data-stu-id="33531-534"><a name="client-previously-deleted-the-object"></a>The client or another process previously deleted the object</span></span>
<span data-ttu-id="33531-535">Ve scénářích, kde se klient pokouší číst, aktualizovat nebo odstranit data v úložišti služby je obvykle snadné identifikaci v protokolech serverové předchozí operace, které u daného objektu odstraněné ze služby storage.</span><span class="sxs-lookup"><span data-stu-id="33531-535">In scenarios where the client is attempting to read, update, or delete data in a storage service it is usually easy to identify in the server-side logs a previous operation that deleted the object in question from the storage service.</span></span> <span data-ttu-id="33531-536">Data protokolu velmi často, ukazuje, že jiný uživatel nebo proces neodstranil tento objekt.</span><span class="sxs-lookup"><span data-stu-id="33531-536">Very often, the log data shows that another user or process deleted the object.</span></span> <span data-ttu-id="33531-537">V protokolování úložiště protokolu na straně serveru typ operace a požadovaný klíč objektu sloupce ukazují, když klient odstraněn objekt.</span><span class="sxs-lookup"><span data-stu-id="33531-537">In the server-side Storage Logging log, the operation-type and requested-object-key columns show when a client deleted an object.</span></span>

<span data-ttu-id="33531-538">Ve scénáři, kde se klient pokouší o vložení objektu nemusí být hned zjevné Proč to vede odpovědi HTTP 404 (není nalezena), vzhledem k tomu, že klient je vytvoření nového objektu.</span><span class="sxs-lookup"><span data-stu-id="33531-538">In the scenario where a client is attempting to insert an object, it may not be immediately obvious why this results in an HTTP 404 (Not found) response given that the client is creating a new object.</span></span> <span data-ttu-id="33531-539">Ale pokud klient je vytvoření objektu blob musí být schopna nalézt kontejner objektů blob, pokud klient je vytvoření zprávy, musí být schopna nalézt fronty, a pokud klient je přidání řádku musí být schopna nalézt v tabulce.</span><span class="sxs-lookup"><span data-stu-id="33531-539">However, if the client is creating a blob it must be able to find the blob container, if the client is creating a message it must be able to find a queue, and if the client is adding a row it must be able to find the table.</span></span>

<span data-ttu-id="33531-540">Můžete použít protokol klienta z Klientská knihovna pro úložiště na podrobnější pochopit když klient odešle konkrétní požadavky na služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-540">You can use the client-side log from the Storage Client Library to gain a more detailed understanding of when the client sends specific requests to the storage service.</span></span>

<span data-ttu-id="33531-541">Následující klienta protokolu vygenerovaných knihovny klienta úložiště znázorňuje problém, když klient nemůže najít kontejner pro tento objekt blob, které se vytváří.</span><span class="sxs-lookup"><span data-stu-id="33531-541">The following client-side log generated by the Storage Client library illustrates the problem when the client cannot find the container for the blob it is creating.</span></span> <span data-ttu-id="33531-542">Tento protokol obsahuje podrobnosti o následující operace úložiště:</span><span class="sxs-lookup"><span data-stu-id="33531-542">This log includes details of the following storage operations:</span></span>

| <span data-ttu-id="33531-543">ID požadavku</span><span class="sxs-lookup"><span data-stu-id="33531-543">Request ID</span></span> | <span data-ttu-id="33531-544">Operace</span><span class="sxs-lookup"><span data-stu-id="33531-544">Operation</span></span> |
| --- | --- |
| <span data-ttu-id="33531-545">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-545">07b26a5d-...</span></span> |<span data-ttu-id="33531-546">**DeleteIfExists** metoda odstranit kontejner objektů blob.</span><span class="sxs-lookup"><span data-stu-id="33531-546">**DeleteIfExists** method to delete the blob container.</span></span> <span data-ttu-id="33531-547">Všimněte si, že tato operace zahrnuje **HEAD** žádost o vyhledání existenci kontejneru.</span><span class="sxs-lookup"><span data-stu-id="33531-547">Note that this operation includes a **HEAD** request to check for the existence of the container.</span></span> |
| <span data-ttu-id="33531-548">e2d06d78...</span><span class="sxs-lookup"><span data-stu-id="33531-548">e2d06d78…</span></span> |<span data-ttu-id="33531-549">**CreateIfNotExists** metodu pro vytvoření kontejneru objektů blob.</span><span class="sxs-lookup"><span data-stu-id="33531-549">**CreateIfNotExists** method to create the blob container.</span></span> <span data-ttu-id="33531-550">Všimněte si, že tato operace zahrnuje **HEAD** požadavek, který zkontroluje existenci kontejneru.</span><span class="sxs-lookup"><span data-stu-id="33531-550">Note that this operation includes a **HEAD** request that checks for the existence of the container.</span></span> <span data-ttu-id="33531-551">**HEAD** vrací zprávu 404, ale bude pokračovat.</span><span class="sxs-lookup"><span data-stu-id="33531-551">The **HEAD** returns a 404 message but continues.</span></span> |
| <span data-ttu-id="33531-552">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-552">de8b1c3c-...</span></span> |<span data-ttu-id="33531-553">**UploadFromStream** metodu pro vytvoření objektu blob.</span><span class="sxs-lookup"><span data-stu-id="33531-553">**UploadFromStream** method to create the blob.</span></span> <span data-ttu-id="33531-554">**PUT** požadavek selže s zprávu 404</span><span class="sxs-lookup"><span data-stu-id="33531-554">The **PUT** request fails with a 404 message</span></span> |

<span data-ttu-id="33531-555">Položky protokolu:</span><span class="sxs-lookup"><span data-stu-id="33531-555">Log entries:</span></span>

| <span data-ttu-id="33531-556">ID požadavku</span><span class="sxs-lookup"><span data-stu-id="33531-556">Request ID</span></span> | <span data-ttu-id="33531-557">Operace textu</span><span class="sxs-lookup"><span data-stu-id="33531-557">Operation Text</span></span> |
| --- | --- |
| <span data-ttu-id="33531-558">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-558">07b26a5d-...</span></span> |<span data-ttu-id="33531-559">Počáteční synchronní požadavek na https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="33531-559">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="33531-560">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-560">07b26a5d-...</span></span> |<span data-ttu-id="33531-561">StringToSign = HEAD...x-ms-client-request-id:07b26a5d-...x-ms-date:Tue, 03 června 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="33531-561">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="33531-562">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-562">07b26a5d-...</span></span> |<span data-ttu-id="33531-563">Čekání na odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-563">Waiting for response.</span></span> |
| <span data-ttu-id="33531-564">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-564">07b26a5d-...</span></span> |<span data-ttu-id="33531-565">Odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-565">Response received.</span></span> <span data-ttu-id="33531-566">Stavový kód = 200, ID žádosti = eeead849-... Obsah MD5 =, značka ETag = &quot;0x8D14D2DC63D059B&quot;.</span><span class="sxs-lookup"><span data-stu-id="33531-566">Status code = 200, Request ID = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span></span> |
| <span data-ttu-id="33531-567">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-567">07b26a5d-...</span></span> |<span data-ttu-id="33531-568">Hlavičky odpovědi počet úspěšně zpracovaných, budete pokračovat s ostatními operaci.</span><span class="sxs-lookup"><span data-stu-id="33531-568">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="33531-569">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-569">07b26a5d-...</span></span> |<span data-ttu-id="33531-570">Při stahování text odpovědi.</span><span class="sxs-lookup"><span data-stu-id="33531-570">Downloading response body.</span></span> |
| <span data-ttu-id="33531-571">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-571">07b26a5d-...</span></span> |<span data-ttu-id="33531-572">Operace byla úspěšně dokončena.</span><span class="sxs-lookup"><span data-stu-id="33531-572">Operation completed successfully.</span></span> |
| <span data-ttu-id="33531-573">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-573">07b26a5d-...</span></span> |<span data-ttu-id="33531-574">Počáteční synchronní požadavek na https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="33531-574">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="33531-575">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-575">07b26a5d-...</span></span> |<span data-ttu-id="33531-576">StringToSign = DELETE...x-ms-client-request-id:07b26a5d-...x-ms-date:Tue, 03 června 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="33531-576">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="33531-577">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-577">07b26a5d-...</span></span> |<span data-ttu-id="33531-578">Čekání na odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-578">Waiting for response.</span></span> |
| <span data-ttu-id="33531-579">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-579">07b26a5d-...</span></span> |<span data-ttu-id="33531-580">Odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-580">Response received.</span></span> <span data-ttu-id="33531-581">Stavový kód = 202, ID žádosti = 6ab2a4cf-..., obsah MD5 =, značka ETag =.</span><span class="sxs-lookup"><span data-stu-id="33531-581">Status code = 202, Request ID = 6ab2a4cf-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="33531-582">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-582">07b26a5d-...</span></span> |<span data-ttu-id="33531-583">Hlavičky odpovědi počet úspěšně zpracovaných, budete pokračovat s ostatními operaci.</span><span class="sxs-lookup"><span data-stu-id="33531-583">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="33531-584">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-584">07b26a5d-...</span></span> |<span data-ttu-id="33531-585">Při stahování text odpovědi.</span><span class="sxs-lookup"><span data-stu-id="33531-585">Downloading response body.</span></span> |
| <span data-ttu-id="33531-586">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="33531-586">07b26a5d-...</span></span> |<span data-ttu-id="33531-587">Operace byla úspěšně dokončena.</span><span class="sxs-lookup"><span data-stu-id="33531-587">Operation completed successfully.</span></span> |
| <span data-ttu-id="33531-588">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-588">e2d06d78-...</span></span> |<span data-ttu-id="33531-589">Spouští Asynchronní požadavek na https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="33531-589">Starting asynchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span></td> |
| <span data-ttu-id="33531-590">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-590">e2d06d78-...</span></span> |<span data-ttu-id="33531-591">StringToSign = HEAD...x-ms-client-request-id:e2d06d78-...x-ms-date:Tue, 03 června 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="33531-591">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="33531-592">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-592">e2d06d78-...</span></span> |<span data-ttu-id="33531-593">Čekání na odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-593">Waiting for response.</span></span> |
| <span data-ttu-id="33531-594">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-594">de8b1c3c-...</span></span> |<span data-ttu-id="33531-595">Počáteční synchronní požadavek na https://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="33531-595">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="33531-596">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-596">de8b1c3c-...</span></span> |<span data-ttu-id="33531-597">StringToSign = PUT... 64.qCmF+TQLPhq/YYK50mP9ZQ==...x-MS-BLOB-Type:BlockBlob.x-MS-Client-Request-ID:de8b1c3c-...x-MS-Date:TUE, 03 června 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="33531-597">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="33531-598">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-598">de8b1c3c-...</span></span> |<span data-ttu-id="33531-599">Příprava k zápisu dat požadavku.</span><span class="sxs-lookup"><span data-stu-id="33531-599">Preparing to write request data.</span></span> |
| <span data-ttu-id="33531-600">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-600">e2d06d78-...</span></span> |<span data-ttu-id="33531-601">Došlo k výjimce při čekání na odpověď: vzdálený server vrátil chybu: (404) nebyl nalezen...</span><span class="sxs-lookup"><span data-stu-id="33531-601">Exception thrown while waiting for response: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="33531-602">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-602">e2d06d78-...</span></span> |<span data-ttu-id="33531-603">Odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-603">Response received.</span></span> <span data-ttu-id="33531-604">Stavový kód 404, ID žádosti = = 353ae3bc-..., obsah MD5 =, značka ETag =.</span><span class="sxs-lookup"><span data-stu-id="33531-604">Status code = 404, Request ID = 353ae3bc-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="33531-605">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-605">e2d06d78-...</span></span> |<span data-ttu-id="33531-606">Hlavičky odpovědi počet úspěšně zpracovaných, budete pokračovat s ostatními operaci.</span><span class="sxs-lookup"><span data-stu-id="33531-606">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="33531-607">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-607">e2d06d78-...</span></span> |<span data-ttu-id="33531-608">Při stahování text odpovědi.</span><span class="sxs-lookup"><span data-stu-id="33531-608">Downloading response body.</span></span> |
| <span data-ttu-id="33531-609">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-609">e2d06d78-...</span></span> |<span data-ttu-id="33531-610">Operace byla úspěšně dokončena.</span><span class="sxs-lookup"><span data-stu-id="33531-610">Operation completed successfully.</span></span> |
| <span data-ttu-id="33531-611">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-611">e2d06d78-...</span></span> |<span data-ttu-id="33531-612">Spouští Asynchronní požadavek na https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="33531-612">Starting asynchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="33531-613">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-613">e2d06d78-...</span></span> |<span data-ttu-id="33531-614">StringToSign = PUT... 0...x-MS-Client-Request-ID:e2d06d78-...x-MS-Date:TUE, 03 června 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="33531-614">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="33531-615">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-615">e2d06d78-...</span></span> |<span data-ttu-id="33531-616">Čekání na odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-616">Waiting for response.</span></span> |
| <span data-ttu-id="33531-617">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-617">de8b1c3c-...</span></span> |<span data-ttu-id="33531-618">Data žádosti o zápis.</span><span class="sxs-lookup"><span data-stu-id="33531-618">Writing request data.</span></span> |
| <span data-ttu-id="33531-619">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-619">de8b1c3c-...</span></span> |<span data-ttu-id="33531-620">Čekání na odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-620">Waiting for response.</span></span> |
| <span data-ttu-id="33531-621">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-621">e2d06d78-...</span></span> |<span data-ttu-id="33531-622">Došlo k výjimce při čekání na odpověď: vzdálený server vrátil chybu: (409) – konflikt...</span><span class="sxs-lookup"><span data-stu-id="33531-622">Exception thrown while waiting for response: The remote server returned an error: (409) Conflict..</span></span> |
| <span data-ttu-id="33531-623">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-623">e2d06d78-...</span></span> |<span data-ttu-id="33531-624">Odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-624">Response received.</span></span> <span data-ttu-id="33531-625">Stavový kód = 409, ID žádosti = c27da20e-..., obsah MD5 =, značka ETag =.</span><span class="sxs-lookup"><span data-stu-id="33531-625">Status code = 409, Request ID = c27da20e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="33531-626">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-626">e2d06d78-...</span></span> |<span data-ttu-id="33531-627">Probíhá stahování textu odpovědi na chyby.</span><span class="sxs-lookup"><span data-stu-id="33531-627">Downloading error response body.</span></span> |
| <span data-ttu-id="33531-628">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-628">de8b1c3c-...</span></span> |<span data-ttu-id="33531-629">Došlo k výjimce při čekání na odpověď: vzdálený server vrátil chybu: (404) nebyl nalezen...</span><span class="sxs-lookup"><span data-stu-id="33531-629">Exception thrown while waiting for response: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="33531-630">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-630">de8b1c3c-...</span></span> |<span data-ttu-id="33531-631">Odpověď.</span><span class="sxs-lookup"><span data-stu-id="33531-631">Response received.</span></span> <span data-ttu-id="33531-632">Stavový kód 404, ID žádosti = = 0eaeab3e-..., obsah MD5 =, značka ETag =.</span><span class="sxs-lookup"><span data-stu-id="33531-632">Status code = 404, Request ID = 0eaeab3e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="33531-633">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-633">de8b1c3c-...</span></span> |<span data-ttu-id="33531-634">Při operaci došlo k výjimce: vzdálený server vrátil chybu: (404) nebyl nalezen...</span><span class="sxs-lookup"><span data-stu-id="33531-634">Exception thrown during the operation: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="33531-635">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="33531-635">de8b1c3c-...</span></span> |<span data-ttu-id="33531-636">Zásady opakování neumožňuje pro opakovaný pokus.</span><span class="sxs-lookup"><span data-stu-id="33531-636">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="33531-637">Došlo k selhání s vzdálený server vrátil chybu: (404) nebyl nalezen...</span><span class="sxs-lookup"><span data-stu-id="33531-637">Failing with The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="33531-638">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="33531-638">e2d06d78-...</span></span> |<span data-ttu-id="33531-639">Zásady opakování neumožňuje pro opakovaný pokus.</span><span class="sxs-lookup"><span data-stu-id="33531-639">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="33531-640">Došlo k selhání s vzdálený server vrátil chybu: (409) – konflikt...</span><span class="sxs-lookup"><span data-stu-id="33531-640">Failing with The remote server returned an error: (409) Conflict..</span></span> |

<span data-ttu-id="33531-641">V tomto příkladu protokol ukazuje, že klient je prokládání požadavky od **CreateIfNotExists** – metoda (žádost o id e2d06d78...) s požadavky z **UploadFromStream** metody (de8b1c3c...); k této situaci dochází klientská aplikace je asynchronně volání těchto metod.</span><span class="sxs-lookup"><span data-stu-id="33531-641">In this example, the log shows that the client is interleaving requests from the **CreateIfNotExists** method (request id e2d06d78…) with the requests from the **UploadFromStream** method (de8b1c3c-...); this is happening because the client application is invoking these methods asynchronously.</span></span> <span data-ttu-id="33531-642">Změňte asynchronní kód klienta a ověřte, že vytvoří kontejner před pokusem o odeslání žádná data do objektu blob v tomto kontejneru.</span><span class="sxs-lookup"><span data-stu-id="33531-642">You should modify the asynchronous code in the client to ensure that it creates the container before attempting to upload any data to a blob in that container.</span></span> <span data-ttu-id="33531-643">V ideálním případě byste měli předem vytvořit všechny kontejnery.</span><span class="sxs-lookup"><span data-stu-id="33531-643">Ideally, you should create all your containers in advance.</span></span>

#### <span data-ttu-id="33531-644"><a name="SAS-authorization-issue"></a>Chybu ověřování sdíleného přístupového podpisu (SAS)</span><span class="sxs-lookup"><span data-stu-id="33531-644"><a name="SAS-authorization-issue"></a>A Shared Access Signature (SAS) authorization issue</span></span>
<span data-ttu-id="33531-645">Pokud aplikace klienta se pokusí použít SAS klíč, který nezahrnuje potřebná oprávnění pro operaci, službu úložiště vrátí klientovi zprávu HTTP 404 (není nalezena).</span><span class="sxs-lookup"><span data-stu-id="33531-645">If the client application attempts to use a SAS key that does not include the necessary permissions for the operation, the storage service returns an HTTP 404 (Not found) message to the client.</span></span> <span data-ttu-id="33531-646">Ve stejnou dobu, zobrazí se také nenulové hodnoty pro **SASAuthorizationError** v metriky.</span><span class="sxs-lookup"><span data-stu-id="33531-646">At the same time, you will also see a non-zero value for **SASAuthorizationError** in the metrics.</span></span>

<span data-ttu-id="33531-647">V následující tabulce jsou uvedeny ukázkovou zprávu protokolu na straně serveru ze souboru protokolu protokolování úložiště:</span><span class="sxs-lookup"><span data-stu-id="33531-647">The following table shows a sample server-side log message from the Storage Logging log file:</span></span>

| <span data-ttu-id="33531-648">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="33531-648">Name</span></span> | <span data-ttu-id="33531-649">Hodnota</span><span class="sxs-lookup"><span data-stu-id="33531-649">Value</span></span> |
| --- | --- |
| <span data-ttu-id="33531-650">Žádost o spuštění</span><span class="sxs-lookup"><span data-stu-id="33531-650">Request start time</span></span> | <span data-ttu-id="33531-651">2014-05-30T06:17:48.4473697Z</span><span class="sxs-lookup"><span data-stu-id="33531-651">2014-05-30T06:17:48.4473697Z</span></span> |
| <span data-ttu-id="33531-652">Typ operace</span><span class="sxs-lookup"><span data-stu-id="33531-652">Operation type</span></span>     | <span data-ttu-id="33531-653">GetBlobProperties</span><span class="sxs-lookup"><span data-stu-id="33531-653">GetBlobProperties</span></span>            |
| <span data-ttu-id="33531-654">Stav žádosti o</span><span class="sxs-lookup"><span data-stu-id="33531-654">Request status</span></span>     | <span data-ttu-id="33531-655">SASAuthorizationError</span><span class="sxs-lookup"><span data-stu-id="33531-655">SASAuthorizationError</span></span>        |
| <span data-ttu-id="33531-656">Stavový kód protokolu HTTP</span><span class="sxs-lookup"><span data-stu-id="33531-656">HTTP status code</span></span>   | <span data-ttu-id="33531-657">404</span><span class="sxs-lookup"><span data-stu-id="33531-657">404</span></span>                          |
| <span data-ttu-id="33531-658">Typ ověřování</span><span class="sxs-lookup"><span data-stu-id="33531-658">Authentication type</span></span>| <span data-ttu-id="33531-659">SAS</span><span class="sxs-lookup"><span data-stu-id="33531-659">Sas</span></span>                          |
| <span data-ttu-id="33531-660">Typ služby</span><span class="sxs-lookup"><span data-stu-id="33531-660">Service type</span></span>       | <span data-ttu-id="33531-661">Objekt blob</span><span class="sxs-lookup"><span data-stu-id="33531-661">Blob</span></span>                         |
| <span data-ttu-id="33531-662">Adresa URL požadavku</span><span class="sxs-lookup"><span data-stu-id="33531-662">Request URL</span></span>        | <span data-ttu-id="33531-663">https://domemaildist.BLOB.Core.Windows.NET/azureimblobcontainer/blobCreatedViaSAS.txt</span><span class="sxs-lookup"><span data-stu-id="33531-663">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span></span> |
| <span data-ttu-id="33531-664">nbsp;</span><span class="sxs-lookup"><span data-stu-id="33531-664">nbsp;</span></span>              |   <span data-ttu-id="33531-665">? sv = 2014-02-14 & sr = c & ma = mypolicy & sig = XXXXX&;rozhraní api-version = 2014-02-14</span><span class="sxs-lookup"><span data-stu-id="33531-665">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span></span> |
| <span data-ttu-id="33531-666">Hlavičky id žádosti</span><span class="sxs-lookup"><span data-stu-id="33531-666">Request id header</span></span>  | <span data-ttu-id="33531-667">a1f348d5-8032-4912-93EF-b393e5252a3b</span><span class="sxs-lookup"><span data-stu-id="33531-667">a1f348d5-8032-4912-93ef-b393e5252a3b</span></span> |
| <span data-ttu-id="33531-668">ID žádosti klienta</span><span class="sxs-lookup"><span data-stu-id="33531-668">Client request ID</span></span>  | <span data-ttu-id="33531-669">2d064953-8436-4ee0-aa0c-65cb874f7929</span><span class="sxs-lookup"><span data-stu-id="33531-669">2d064953-8436-4ee0-aa0c-65cb874f7929</span></span> |


<span data-ttu-id="33531-670">Proč klientské aplikace se pokouší o provedení operace, které jí nebylo uděleno oprávnění, které byste měli prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="33531-670">You should investigate why your client application is attempting to perform an operation it has not been granted permissions for.</span></span>

#### <span data-ttu-id="33531-671"><a name="JavaScript-code-does-not-have-permission"></a>Kód jazyka JavaScript na straně klienta nemá oprávnění pro přístup k objektu</span><span class="sxs-lookup"><span data-stu-id="33531-671"><a name="JavaScript-code-does-not-have-permission"></a>Client-side JavaScript code does not have permission to access the object</span></span>
<span data-ttu-id="33531-672">Pokud používáte JavaScript klienta a služby úložiště vrací zprávy HTTP 404, můžete zkontrolovat následující chyby jazyka JavaScript v prohlížeči:</span><span class="sxs-lookup"><span data-stu-id="33531-672">If you are using a JavaScript client and the storage service is returning HTTP 404 messages, you check for the following JavaScript errors in the browser:</span></span>

```
SEC7120: Origin http://localhost:56309 not found in Access-Control-Allow-Origin header.
SCRIPT7002: XMLHttpRequest: Network Error 0x80070005, Access is denied.
```

> [!NOTE]
> <span data-ttu-id="33531-673">Můžete F12 Developer Tools v aplikaci Internet Explorer pro trasování zprávy vyměňují mezi prohlížečem a službu úložiště při odstraňování problémů, JavaScript na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-673">You can use the F12 Developer Tools in Internet Explorer to trace the messages exchanged between the browser and the storage service when you are troubleshooting client-side JavaScript issues.</span></span>
> 
> 

<span data-ttu-id="33531-674">K těmto chybám, protože webový prohlížeč implementuje [stejné zásady počátek](http://www.w3.org/Security/wiki/Same_Origin_Policy) omezení zabezpečení, které brání volání rozhraní API v jiné doméně z domény stránky na webové stránce pochází z.</span><span class="sxs-lookup"><span data-stu-id="33531-674">These errors occur because the web browser implements the [same origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) security restriction that prevents a web page from calling an API in a different domain from the domain the page comes from.</span></span>

<span data-ttu-id="33531-675">JavaScript problém obejít, můžete nakonfigurovat různé sdílení prostředků zdroji (CORS) pro službu úložiště, které klient přistupuje.</span><span class="sxs-lookup"><span data-stu-id="33531-675">To work around the JavaScript issue, you can configure Cross Origin Resource Sharing (CORS) for the storage service the client is accessing.</span></span> <span data-ttu-id="33531-676">Další informace najdete v tématu [Podpora sdílení prostředků různých původů (CORS) pro úložiště služby Azure](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-676">For more information, see [Cross-Origin Resource Sharing (CORS) Support for Azure Storage Services](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span></span>

<span data-ttu-id="33531-677">Následující příklad kódu ukazuje, jak nakonfigurovat služby objektů blob povolit jazyk JavaScript spuštěna v doméně Contoso přístup k objektu blob ve službě úložiště objektů blob:</span><span class="sxs-lookup"><span data-stu-id="33531-677">The following code sample shows how to configure your blob service to allow JavaScript running in the Contoso domain to access a blob in your blob storage service:</span></span>

```csharp
CloudBlobClient client = new CloudBlobClient(blobEndpoint, new StorageCredentials(accountName, accountKey));
// Set the service properties.
ServiceProperties sp = client.GetServiceProperties();
sp.DefaultServiceVersion = "2013-08-15";
CorsRule cr = new CorsRule();
cr.AllowedHeaders.Add("*");
cr.AllowedMethods = CorsHttpMethods.Get | CorsHttpMethods.Put;
cr.AllowedOrigins.Add("http://www.contoso.com");
cr.ExposedHeaders.Add("x-ms-*");
cr.MaxAgeInSeconds = 5;
sp.Cors.CorsRules.Clear();
sp.Cors.CorsRules.Add(cr);
client.SetServiceProperties(sp);
```

#### <span data-ttu-id="33531-678"><a name="network-failure"></a>Selhání sítě</span><span class="sxs-lookup"><span data-stu-id="33531-678"><a name="network-failure"></a>Network Failure</span></span>
<span data-ttu-id="33531-679">V některých případech může vést ke ztrátě síťové pakety k službu úložiště zpráv HTTP 404 vrácením klientovi.</span><span class="sxs-lookup"><span data-stu-id="33531-679">In some circumstances, lost network packets can lead to the storage service returning HTTP 404 messages to the client.</span></span> <span data-ttu-id="33531-680">Například když klientské aplikace je odstranění entity ze služby table uvidíte klienta throw výjimka úložiště vytváření sestav "HTTP 404 (není nalezena)" stavovou zprávu ze služby table.</span><span class="sxs-lookup"><span data-stu-id="33531-680">For example, when your client application is deleting an entity from the table service you see the client throw a storage exception reporting an "HTTP 404 (Not Found)" status message from the table service.</span></span> <span data-ttu-id="33531-681">Můžete prozkoumat v tabulce ve službě table storage, uvidíte, že služba odstranit entitu podle požadavku.</span><span class="sxs-lookup"><span data-stu-id="33531-681">When you investigate the table in the table storage service, you see that the service did delete the entity as requested.</span></span>

<span data-ttu-id="33531-682">Podrobnosti o výjimce v klientovi zahrnují id požadavku (7e84f12d...) přiřazené službou tabulky pro požadavek: tyto informace můžete najít podrobnosti požadavku v protokolech úložiště serverové ve vyhledávání v **hlavička požadavku id** sloupec v souboru protokolu.</span><span class="sxs-lookup"><span data-stu-id="33531-682">The exception details in the client include the request id (7e84f12d…) assigned by the table service for the request: you can use this information to locate the request details in the server-side storage logs by searching in the **request-id-header** column in the log file.</span></span> <span data-ttu-id="33531-683">Metriky můžete také použít k identifikaci při selhání, jako je tato dojít a pak hledání souborů protokolu podle času metriky zaznamenávají této chybě.</span><span class="sxs-lookup"><span data-stu-id="33531-683">You could also use the metrics to identify when failures such as this occur and then search the log files based on the time the metrics recorded this error.</span></span> <span data-ttu-id="33531-684">Tato položka protokolu ukazuje odstranění se nezdařilo se zpráva stav "Klient jiné chyby protokolu HTTP (404)".</span><span class="sxs-lookup"><span data-stu-id="33531-684">This log entry shows that the delete failed with an "HTTP (404) Client Other Error" status message.</span></span> <span data-ttu-id="33531-685">Stejné záznam protokolu také zahrnuje generované klientem v id požadavku **client-request-id** sloupce (813ea74f...).</span><span class="sxs-lookup"><span data-stu-id="33531-685">The same log entry also includes the request id generated by the client in the **client-request-id** column (813ea74f…).</span></span>

<span data-ttu-id="33531-686">Na straně serveru protokolu obsahuje také jiný záznam se stejným **client-request-id** hodnotu (813ea74f...) úspěšně odstranit operaci pro stejnou entitu a ze stejného klienta.</span><span class="sxs-lookup"><span data-stu-id="33531-686">The server-side log also includes another entry with the same **client-request-id** value (813ea74f…) for a successful delete operation for the same entity, and from the same client.</span></span> <span data-ttu-id="33531-687">Tato operace úspěšné odstranění došlo velmi krátce před neúspěšný odstranit požadavek.</span><span class="sxs-lookup"><span data-stu-id="33531-687">This successful delete operation took place very shortly before the failed delete request.</span></span>

<span data-ttu-id="33531-688">Nejpravděpodobnější příčinou tohoto scénáře je, že klient odeslal žádost o odstranění pro entitu do služby table, který byl úspěšný, avšak neobdržel potvrzení ze serveru (třeba kvůli problému v dočasné síti).</span><span class="sxs-lookup"><span data-stu-id="33531-688">The most likely cause of this scenario is that the client sent a delete request for the entity to the table service, which succeeded, but did not receive an acknowledgement from the server (perhaps due to a temporary network issue).</span></span> <span data-ttu-id="33531-689">Klient pak automaticky opakovat operaci (používající stejný **client-request-id**), a tento opakování se nezdařilo, protože entita byl již odstraněn.</span><span class="sxs-lookup"><span data-stu-id="33531-689">The client then automatically retried the operation (using the same **client-request-id**), and this retry failed because the entity had already been deleted.</span></span>

<span data-ttu-id="33531-690">Pokud tento problém opakuje často, které byste měli prozkoumat, proč klient nemůže na příjem potvrzení ze služby table.</span><span class="sxs-lookup"><span data-stu-id="33531-690">If this problem occurs frequently, you should investigate why the client is failing to receive acknowledgements from the table service.</span></span> <span data-ttu-id="33531-691">Pokud problém přerušované, by měl depeše chyby "HTTP (404) nebyl nalezen" a protokolu v klientovi ale povolit klientovi pokračovat.</span><span class="sxs-lookup"><span data-stu-id="33531-691">If the problem is intermittent, you should trap the "HTTP (404) Not Found" error and log it in the client, but allow the client to continue.</span></span>

### <span data-ttu-id="33531-692"><a name="the-client-is-receiving-409-messages"></a>Klient je přijímání zpráv protokolu HTTP 409 (konflikt)</span><span class="sxs-lookup"><span data-stu-id="33531-692"><a name="the-client-is-receiving-409-messages"></a>The client is receiving HTTP 409 (Conflict) messages</span></span>
<span data-ttu-id="33531-693">V následující tabulce jsou uvedeny výpis z protokolu na straně serveru pro dva klientské operace: **DeleteIfExists** a okamžitě nástrojem **CreateIfNotExists** použití stejného názvu kontejneru objektů blob.</span><span class="sxs-lookup"><span data-stu-id="33531-693">The following table shows an extract from the server-side log for two client operations: **DeleteIfExists** followed immediately by **CreateIfNotExists** using the same blob container name.</span></span> <span data-ttu-id="33531-694">Všimněte si, že výsledky jednotlivých operací klienta v dva požadavky odeslané na server, nejdřív **GetContainerProperties** požadavek na zkontrolujte, zda kontejner existuje, za nímž následuje **DeleteContainer** nebo **CreateContainer** požadavku.</span><span class="sxs-lookup"><span data-stu-id="33531-694">Note that each client operation results in two requests sent to the server, first a **GetContainerProperties** request to check if the container exists, followed by the **DeleteContainer** or **CreateContainer** request.</span></span>

| <span data-ttu-id="33531-695">časové razítko</span><span class="sxs-lookup"><span data-stu-id="33531-695">Timestamp</span></span> | <span data-ttu-id="33531-696">Operace</span><span class="sxs-lookup"><span data-stu-id="33531-696">Operation</span></span> | <span data-ttu-id="33531-697">výsledek</span><span class="sxs-lookup"><span data-stu-id="33531-697">Result</span></span> | <span data-ttu-id="33531-698">Název kontejneru</span><span class="sxs-lookup"><span data-stu-id="33531-698">Container name</span></span> | <span data-ttu-id="33531-699">Id žádosti klienta</span><span class="sxs-lookup"><span data-stu-id="33531-699">Client request id</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="33531-700">05:10:13.7167225</span><span class="sxs-lookup"><span data-stu-id="33531-700">05:10:13.7167225</span></span> |<span data-ttu-id="33531-701">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="33531-701">GetContainerProperties</span></span> |<span data-ttu-id="33531-702">200</span><span class="sxs-lookup"><span data-stu-id="33531-702">200</span></span> |<span data-ttu-id="33531-703">mmcont</span><span class="sxs-lookup"><span data-stu-id="33531-703">mmcont</span></span> |<span data-ttu-id="33531-704">c9f52c89-...</span><span class="sxs-lookup"><span data-stu-id="33531-704">c9f52c89-…</span></span> |
| <span data-ttu-id="33531-705">05:10:13.8167325</span><span class="sxs-lookup"><span data-stu-id="33531-705">05:10:13.8167325</span></span> |<span data-ttu-id="33531-706">DeleteContainer</span><span class="sxs-lookup"><span data-stu-id="33531-706">DeleteContainer</span></span> |<span data-ttu-id="33531-707">202</span><span class="sxs-lookup"><span data-stu-id="33531-707">202</span></span> |<span data-ttu-id="33531-708">mmcont</span><span class="sxs-lookup"><span data-stu-id="33531-708">mmcont</span></span> |<span data-ttu-id="33531-709">c9f52c89-...</span><span class="sxs-lookup"><span data-stu-id="33531-709">c9f52c89-…</span></span> |
| <span data-ttu-id="33531-710">05:10:13.8987407</span><span class="sxs-lookup"><span data-stu-id="33531-710">05:10:13.8987407</span></span> |<span data-ttu-id="33531-711">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="33531-711">GetContainerProperties</span></span> |<span data-ttu-id="33531-712">404</span><span class="sxs-lookup"><span data-stu-id="33531-712">404</span></span> |<span data-ttu-id="33531-713">mmcont</span><span class="sxs-lookup"><span data-stu-id="33531-713">mmcont</span></span> |<span data-ttu-id="33531-714">bc881924-...</span><span class="sxs-lookup"><span data-stu-id="33531-714">bc881924-…</span></span> |
| <span data-ttu-id="33531-715">05:10:14.2147723</span><span class="sxs-lookup"><span data-stu-id="33531-715">05:10:14.2147723</span></span> |<span data-ttu-id="33531-716">CreateContainer</span><span class="sxs-lookup"><span data-stu-id="33531-716">CreateContainer</span></span> |<span data-ttu-id="33531-717">409</span><span class="sxs-lookup"><span data-stu-id="33531-717">409</span></span> |<span data-ttu-id="33531-718">mmcont</span><span class="sxs-lookup"><span data-stu-id="33531-718">mmcont</span></span> |<span data-ttu-id="33531-719">bc881924-...</span><span class="sxs-lookup"><span data-stu-id="33531-719">bc881924-…</span></span> |

<span data-ttu-id="33531-720">Kód v aplikaci klienta odstraní a okamžitě vytvoří kontejner objektů blob pomocí stejného názvu: **CreateIfNotExists** – metoda (klient v požadavku ID bc881924-...) nakonec selže s chybou HTTP 409 (konflikt).</span><span class="sxs-lookup"><span data-stu-id="33531-720">The code in the client application deletes and then immediately recreates a blob container using the same name: the **CreateIfNotExists** method (Client request ID bc881924-…) eventually fails with the HTTP 409 (Conflict) error.</span></span> <span data-ttu-id="33531-721">Když klient odstraní kontejnery objektů blob, tabulky a fronty je po krátkou dobu před název opět k dispozici.</span><span class="sxs-lookup"><span data-stu-id="33531-721">When a client deletes blob containers, tables, or queues there is a brief period before the name becomes available again.</span></span>

<span data-ttu-id="33531-722">Klientská aplikace měli používat názvy jedinečný kontejnerů, vždy, když se vytvoří nové kontejnery, pokud je běžné vzoru odstranit nebo znovu vytvoří.</span><span class="sxs-lookup"><span data-stu-id="33531-722">The client application should use unique container names whenever it creates new containers if the delete/recreate pattern is common.</span></span>

### <span data-ttu-id="33531-723"><a name="metrics-show-low-percent-success"></a>Metriky ukazují nízkou PercentSuccess nebo položky protokolu analýzy mít operací s stav transakce ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="33531-723"><a name="metrics-show-low-percent-success"></a>Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors</span></span>
<span data-ttu-id="33531-724">**PercentSuccess** metrika zaznamená procento operací, které byly úspěšné podle jejich stavový kód HTTP.</span><span class="sxs-lookup"><span data-stu-id="33531-724">The **PercentSuccess** metric captures the percent of operations that were successful based on their HTTP Status Code.</span></span> <span data-ttu-id="33531-725">Počet operací s kódy stavu 2XX jako úspěšné, zatímco operací s kódy stavu v 3XX, 4XX a 5XX rozsahy, se počítají jako neúspěšná a nižší **PercentSucess** hodnota metriky.</span><span class="sxs-lookup"><span data-stu-id="33531-725">Operations with status codes of 2XX count as successful, whereas operations with status codes in 3XX, 4XX and 5XX ranges are counted as unsuccessful and lower the **PercentSucess** metric value.</span></span> <span data-ttu-id="33531-726">V souborech protokolu úložiště na straně serveru, se zaznamenávají tyto operace se stavem transakce **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="33531-726">In the server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span>

<span data-ttu-id="33531-727">Je důležité si uvědomit, že tyto operace byly úspěšně dokončeny a proto nemají vliv na jiné metriky, jako je dostupnost.</span><span class="sxs-lookup"><span data-stu-id="33531-727">It is important to note that these operations have completed successfully and therefore do not affect other metrics such as availability.</span></span> <span data-ttu-id="33531-728">Některé příklady operací, které úspěšně provést, ale můžete výsledkem neúspěšných stavové kódy HTTP patří:</span><span class="sxs-lookup"><span data-stu-id="33531-728">Some examples of operations that execute successfully but that can result in unsuccessful HTTP status codes include:</span></span>

* <span data-ttu-id="33531-729">**ResourceNotFound** (není nalezen 404), například ze požadavek GET na objekt blob, který neexistuje.</span><span class="sxs-lookup"><span data-stu-id="33531-729">**ResourceNotFound** (Not Found 404), for example from a GET request to a blob that does not exist.</span></span>
* <span data-ttu-id="33531-730">**ResouceAlreadyExists** (409 konflikt), například ze **CreateIfNotExist** operace, kde již existuje prostředek.</span><span class="sxs-lookup"><span data-stu-id="33531-730">**ResouceAlreadyExists** (Conflict 409), for example from a **CreateIfNotExist** operation where the resource already exists.</span></span>
* <span data-ttu-id="33531-731">**ConditionNotMet** (ne upravit 304), například z podmíněného operace, například když klient odešle **značka ETag** hodnota a HTTP **If-None-Match** hlavičky k žádosti o bitovou kopii pouze v případě, že byla aktualizována od poslední operace.</span><span class="sxs-lookup"><span data-stu-id="33531-731">**ConditionNotMet** (Not Modified 304), for example from a conditional operation such as when a client sends an **ETag** value and an HTTP **If-None-Match** header to request an image only if it has been updated since the last operation.</span></span>

<span data-ttu-id="33531-732">Můžete najít seznam běžné kódy chyb rozhraní REST API, které vracejí služby úložiště na stránce [běžné kódy chyb rozhraní API REST](http://msdn.microsoft.com/library/azure/dd179357.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-732">You can find a list of common REST API error codes that the storage services return on the page [Common REST API Error Codes](http://msdn.microsoft.com/library/azure/dd179357.aspx).</span></span>

### <span data-ttu-id="33531-733"><a name="capacity-metrics-show-an-unexpected-increase"></a>Metriky kapacity způsobit neočekávané nárůst využití kapacity úložiště</span><span class="sxs-lookup"><span data-stu-id="33531-733"><a name="capacity-metrics-show-an-unexpected-increase"></a>Capacity metrics show an unexpected increase in storage capacity usage</span></span>
<span data-ttu-id="33531-734">Pokud se zobrazí nečekané, neočekávané změny využití kapacity ve vašem účtu úložiště můžete prozkoumat důvodů, proč nejprve kontrolou vaše dostupnosti metriky; například zvýšení počtu Neúspěšné odstranění žádosti může vést ke zvýšení množství úložiště objektů blob, který používáte jako operace čištění konkrétní aplikace, které může mít měla být uvolnění místa na nemusí fungovat podle očekávání (například, protože vypršela platnost tokeny SAS používá pro uvolnění místa).</span><span class="sxs-lookup"><span data-stu-id="33531-734">If you see sudden, unexpected changes in capacity usage in your storage account, you can investigate the reasons by first looking at your availability metrics; for example, an increase in the number of failed delete requests might lead to an increase in the amount of blob storage you are using as application specific cleanup operations you might have expected to be freeing up space may not be working as expected (for example, because the SAS tokens used for freeing up space have expired).</span></span>

### <span data-ttu-id="33531-735"><a name="you-are-experiencing-unexpected-reboots"></a>Dochází k neočekávané restartování virtuálních počítačů Azure, které mají velký počet připojených virtuálních pevných disků</span><span class="sxs-lookup"><span data-stu-id="33531-735"><a name="you-are-experiencing-unexpected-reboots"></a>You are experiencing unexpected reboots of Azure Virtual Machines that have a large number of attached VHDs</span></span>
<span data-ttu-id="33531-736">Pokud virtuální počítač Azure (VM) má velký počet připojených virtuálních pevných disků, které jsou ve stejném účtu úložiště, může být vyšší než cíle škálovatelnosti pro účet úložiště jednotlivých způsobuje selhání virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="33531-736">If an Azure Virtual Machine (VM) has a large number of attached VHDs that are in the same storage account, you could exceed the scalability targets for an individual storage account causing the VM to fail.</span></span> <span data-ttu-id="33531-737">Měli byste zkontrolovat minutu metriky pro účet úložiště (**TotalRequests**/**TotalIngress**/**TotalEgress**) špiček, které překračují cíle škálovatelnosti účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-737">You should check the minute metrics for the storage account (**TotalRequests**/**TotalIngress**/**TotalEgress**) for spikes that exceed the scalability targets for a storage account.</span></span> <span data-ttu-id="33531-738">Najdete v části "[metriky způsobit nárůst PercentThrottlingError]" pro pomoc při určování, zda omezení došlo k chybě na vašem účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-738">See the section "[Metrics show an increase in PercentThrottlingError]" for assistance in determining if throttling has occurred on your storage account.</span></span>

<span data-ttu-id="33531-739">Obecně platí, překládá každé jednotlivé vstupní nebo výstupní operace na virtuální pevný disk z virtuálního počítače do **získat stránky** nebo **Put stránky** operací na základní objekt blob stránky.</span><span class="sxs-lookup"><span data-stu-id="33531-739">In general, each individual input or output operation on a VHD from a Virtual Machine translates to **Get Page** or **Put Page** operations on the underlying page blob.</span></span> <span data-ttu-id="33531-740">Proto můžete odhadované IOPS pro vaše prostředí pro optimalizaci kolik virtuální pevné disky vám může mít v jednom úložném účtu na základě konkrétní chování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-740">Therefore, you can use the estimated IOPS for your environment to tune how many VHDs you can have in a single storage account based on the specific behavior of your application.</span></span> <span data-ttu-id="33531-741">Nedoporučujeme mít víc než 40 disky v jednom úložném účtu.</span><span class="sxs-lookup"><span data-stu-id="33531-741">We do not recommend having more than 40 disks in a single storage account.</span></span> <span data-ttu-id="33531-742">V tématu [a cíle výkonnosti služby Azure Storage Scalability](storage-scalability-targets.md) podrobnosti o aktuální cíle škálovatelnosti pro účty úložiště, zejména celkový požadavek rychlost a celková šířka pásma pro typ účtu úložiště používáte.</span><span class="sxs-lookup"><span data-stu-id="33531-742">See [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) for details of the current scalability targets for storage accounts, in particular the total request rate and total bandwidth for the type of storage account you are using.</span></span>
<span data-ttu-id="33531-743">Pokud jsou překročení cíle škálovatelnosti účtu úložiště, měli byste umístit virtuální pevné disky v několika jiným účtům úložiště ke snížení aktivity v jednotlivé účty.</span><span class="sxs-lookup"><span data-stu-id="33531-743">If you are exceeding the scalability targets for your storage account, you should place your VHDs in multiple different storage accounts to reduce the activity in each individual account.</span></span>

### <span data-ttu-id="33531-744"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Problém vyplývá z pomocí emulátoru úložiště pro vývoj nebo testování</span><span class="sxs-lookup"><span data-stu-id="33531-744"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Your issue arises from using the storage emulator for development or test</span></span>
<span data-ttu-id="33531-745">Obvykle pomocí emulátoru úložiště během vývoje a testování, aby se zabránilo požadavek pro účet úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-745">You typically use the storage emulator during development and test to avoid the requirement for an Azure storage account.</span></span> <span data-ttu-id="33531-746">Běžné problémy, které může dojít, když používáte emulátor úložiště jsou:</span><span class="sxs-lookup"><span data-stu-id="33531-746">The common issues that can occur when you are using the storage emulator are:</span></span>

* <span data-ttu-id="33531-747">[Funkce "X" nepracuje v emulátoru úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-747">[Feature "X" is not working in the storage emulator]</span></span>
* <span data-ttu-id="33531-748">[Chyba "hodnota pro jednu z hlaviček protokolu HTTP není ve správném formátu" při použití emulátoru úložiště]</span><span class="sxs-lookup"><span data-stu-id="33531-748">[Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator]</span></span>
* <span data-ttu-id="33531-749">[Spuštění emulátor úložiště vyžaduje oprávnění správce]</span><span class="sxs-lookup"><span data-stu-id="33531-749">[Running the storage emulator requires administrative privileges]</span></span>

#### <span data-ttu-id="33531-750"><a name="feature-X-is-not-working"></a>Funkce "X" nepracuje v emulátoru úložiště</span><span class="sxs-lookup"><span data-stu-id="33531-750"><a name="feature-X-is-not-working"></a>Feature "X" is not working in the storage emulator</span></span>
<span data-ttu-id="33531-751">Emulátor úložiště nepodporuje všechny funkce služby Azure storage, jako je například služba souborů.</span><span class="sxs-lookup"><span data-stu-id="33531-751">The storage emulator does not support all of the features of the Azure storage services such as the file service.</span></span> <span data-ttu-id="33531-752">Další informace najdete v článku [Použití emulátoru úložiště Azure pro vývoj a testování](storage-use-emulator.md).</span><span class="sxs-lookup"><span data-stu-id="33531-752">For more information, see [Use the Azure Storage Emulator for Development and Testing](storage-use-emulator.md).</span></span>

<span data-ttu-id="33531-753">Pro tyto funkce, které nepodporuje emulátor úložiště použijte službu Azure storage v cloudu.</span><span class="sxs-lookup"><span data-stu-id="33531-753">For those features that the storage emulator does not support, use the Azure storage service in the cloud.</span></span>

#### <span data-ttu-id="33531-754"><a name="error-HTTP-header-not-correct-format"></a>Chyba "hodnota pro jednu z hlaviček protokolu HTTP není ve správném formátu" při použití emulátoru úložiště</span><span class="sxs-lookup"><span data-stu-id="33531-754"><a name="error-HTTP-header-not-correct-format"></a>Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator</span></span>
<span data-ttu-id="33531-755">Testování aplikace, jako například použít Klientská knihovna pro úložiště pro místní úložiště emulátoru a metoda volání **CreateIfNotExists** nezdaří s chybovou zprávou "hodnota pro jednu z hlaviček protokolu HTTP není ve správném formátu."</span><span class="sxs-lookup"><span data-stu-id="33531-755">You are testing your application that use the Storage Client Library against the local storage emulator and method calls such as **CreateIfNotExists** fail with the error message "The value for one of the HTTP headers is not in the correct format."</span></span> <span data-ttu-id="33531-756">To znamená, že verze, kterou používáte emulátor úložiště nepodporuje verzi klientské knihovny pro úložiště, který používáte.</span><span class="sxs-lookup"><span data-stu-id="33531-756">This indicates that the version of the storage emulator you are using does not support the version of the storage client library you are using.</span></span> <span data-ttu-id="33531-757">Klientská knihovna pro úložiště přidá hlavičku **x-ms-version** pro všechny požadavky, které umožňuje.</span><span class="sxs-lookup"><span data-stu-id="33531-757">The Storage Client Library adds the header **x-ms-version** to all the requests it makes.</span></span> <span data-ttu-id="33531-758">Pokud emulátor úložiště nebyla rozpoznána hodnota v **x-ms-version** záhlaví, jeho žádost odmítne.</span><span class="sxs-lookup"><span data-stu-id="33531-758">If the storage emulator does not recognize the value in the **x-ms-version** header, it rejects the request.</span></span>

<span data-ttu-id="33531-759">Protokoly úložiště knihovny klienta můžete zobrazit hodnotu **hlavičky x-ms-version** je odesílání.</span><span class="sxs-lookup"><span data-stu-id="33531-759">You can use the Storage Library Client logs to see the value of the **x-ms-version header** it is sending.</span></span> <span data-ttu-id="33531-760">Můžete také zjistit hodnotu **hlavičky x-ms-version** Pokud použít aplikaci Fiddler Pokud chcete trasovat žádosti z klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="33531-760">You can also see the value of the **x-ms-version header** if you use Fiddler to trace the requests from your client application.</span></span>

<span data-ttu-id="33531-761">Tento scénář obvykle dochází, je-li nainstalovat a použít nejnovější verzi klientské knihovny pro úložiště bez aktualizace emulátor úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-761">This scenario typically occurs if you install and use the latest version of the Storage Client Library without updating the storage emulator.</span></span> <span data-ttu-id="33531-762">Měli buď nainstalovat nejnovější verze emulátoru úložiště nebo použijte cloudového úložiště místo emulátor pro vývoj a testování.</span><span class="sxs-lookup"><span data-stu-id="33531-762">You should either install the latest version of the storage emulator, or use cloud storage instead of the emulator for development and test.</span></span>

#### <span data-ttu-id="33531-763"><a name="storage-emulator-requires-administrative-privileges"></a>Spuštění emulátor úložiště vyžaduje oprávnění správce</span><span class="sxs-lookup"><span data-stu-id="33531-763"><a name="storage-emulator-requires-administrative-privileges"></a>Running the storage emulator requires administrative privileges</span></span>
<span data-ttu-id="33531-764">Zobrazí se výzva k zadání pověření správce při spuštění emulátor úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-764">You are prompted for administrator credentials when you run the storage emulator.</span></span> <span data-ttu-id="33531-765">K tomu dochází pouze při emulátor úložiště jsou inicializaci poprvé.</span><span class="sxs-lookup"><span data-stu-id="33531-765">This only occurs when you are initializing the storage emulator for the first time.</span></span> <span data-ttu-id="33531-766">Poté, co jste inicializovali emulátor úložiště, není nutné oprávnění správce se spustit znovu.</span><span class="sxs-lookup"><span data-stu-id="33531-766">After you have initialized the storage emulator, you do not need administrative privileges to run it again.</span></span>

<span data-ttu-id="33531-767">Další informace najdete v článku [Použití emulátoru úložiště Azure pro vývoj a testování](storage-use-emulator.md).</span><span class="sxs-lookup"><span data-stu-id="33531-767">For more information, see [Use the Azure Storage Emulator for Development and Testing](storage-use-emulator.md).</span></span> <span data-ttu-id="33531-768">Všimněte si, že můžete také inicializovat emulátor úložiště v sadě Visual Studio, který bude také vyžadují oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="33531-768">Note that you can also initialize the storage emulator in Visual Studio, which will also require administrative privileges.</span></span>

### <span data-ttu-id="33531-769"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>Narazíte na potíže s instalací sady Azure SDK pro .NET</span><span class="sxs-lookup"><span data-stu-id="33531-769"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>You are encountering problems installing the Azure SDK for .NET</span></span>
<span data-ttu-id="33531-770">Když se pokusíte nainstalovat sadu SDK, dojde k chybě při pokusu o instalaci emulátor úložiště na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="33531-770">When you try to install the SDK, it fails trying to install the storage emulator on your local machine.</span></span> <span data-ttu-id="33531-771">V protokolu instalace obsahuje jednu z následujících zpráv:</span><span class="sxs-lookup"><span data-stu-id="33531-771">The installation log contains one of the following messages:</span></span>

* <span data-ttu-id="33531-772">CAQuietExec: Chyba: Nelze získat přístup k instanci SQL</span><span class="sxs-lookup"><span data-stu-id="33531-772">CAQuietExec:  Error: Unable to access SQL instance</span></span>
* <span data-ttu-id="33531-773">CAQuietExec: Chyba: Nelze vytvořit databázi</span><span class="sxs-lookup"><span data-stu-id="33531-773">CAQuietExec:  Error: Unable to create database</span></span>

<span data-ttu-id="33531-774">Příčinou je problém se stávající instalací LocalDB.</span><span class="sxs-lookup"><span data-stu-id="33531-774">The cause is an issue with existing LocalDB installation.</span></span> <span data-ttu-id="33531-775">Ve výchozím nastavení používá emulátor úložiště LocalDB uchovávat data, když ho simuluje služby Azure storage.</span><span class="sxs-lookup"><span data-stu-id="33531-775">By default, the storage emulator uses LocalDB to persist data when it simulates the Azure storage services.</span></span> <span data-ttu-id="33531-776">Spuštěním následujících příkazů v okně příkazového řádku, než se pokusíte nainstalovat sadu SDK můžete resetovat vaší instanci LocalDB.</span><span class="sxs-lookup"><span data-stu-id="33531-776">You can reset your LocalDB instance by running the following commands in a command-prompt window before trying to install the SDK.</span></span>

```
sqllocaldb stop v11.0
sqllocaldb delete v11.0
delete %USERPROFILE%\WAStorageEmulatorDb3*.*
sqllocaldb create v11.0
```

<span data-ttu-id="33531-777">**Odstranit** příkaz odebere žádné staré soubory databáze z předchozí instalace emulátoru úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-777">The **delete** command removes any old database files from previous installations of the storage emulator.</span></span>

### <span data-ttu-id="33531-778"><a name="you-have-a-different-issue-with-a-storage-service"></a>Máte jiný problém se službou úložiště</span><span class="sxs-lookup"><span data-stu-id="33531-778"><a name="you-have-a-different-issue-with-a-storage-service"></a>You have a different issue with a storage service</span></span>
<span data-ttu-id="33531-779">Pokud předchozí části nezahrnují problém, který máte službou úložiště, by měl použít následující postup k diagnostikování a řešení potíží problém.</span><span class="sxs-lookup"><span data-stu-id="33531-779">If the previous troubleshooting sections do not include the issue you are having with a storage service, you should adopt the following approach to diagnosing and troubleshooting your issue.</span></span>

* <span data-ttu-id="33531-780">Zkontrolujte vaše metriky a zjistěte, zda dojde ke změně z vaší očekávané chování základní line.</span><span class="sxs-lookup"><span data-stu-id="33531-780">Check your metrics to see if there is any change from your expected base-line behavior.</span></span> <span data-ttu-id="33531-781">Z metriky může být schopní určit, zda je problém přechodný nebo trvalé a operací, které úložiště problém ovlivňuje.</span><span class="sxs-lookup"><span data-stu-id="33531-781">From the metrics, you may be able to determine whether the issue is transient or permanent, and which storage operations the issue is affecting.</span></span>
* <span data-ttu-id="33531-782">Můžete použít informace metriky můžete hledat data protokolu na straně serveru pro podrobnější informace o chyby, ke kterým dochází.</span><span class="sxs-lookup"><span data-stu-id="33531-782">You can use the metrics information to help you search your server-side log data for more detailed information about any errors that are occurring.</span></span> <span data-ttu-id="33531-783">Tyto informace mohou pomoci při řešení potíží a vyřešte problém.</span><span class="sxs-lookup"><span data-stu-id="33531-783">This information may help you troubleshoot and resolve the issue.</span></span>
* <span data-ttu-id="33531-784">Pokud nejsou dostatečná k odstranění problému úspěšně informace v protokolech na straně serveru, můžete prozkoumat chování vaší aplikace klienta a nástrojů, například aplikaci Fiddler, Wireshark a Microsoft Message Analyzer prozkoumat síti klientské protokoly Klientská knihovna pro úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-784">If the information in the server-side logs is not sufficient to troubleshoot the issue successfully, you can use the Storage Client Library client-side logs to investigate the behavior of your client application, and tools such as Fiddler, Wireshark, and Microsoft Message Analyzer to investigate your network.</span></span>

<span data-ttu-id="33531-785">Další informace o používání aplikaci Fiddler, najdete v části "[dodatku 1: pomocí Fiddleru pro zachycení přenosu dat HTTP a HTTPS]."</span><span class="sxs-lookup"><span data-stu-id="33531-785">For more information about using Fiddler, see "[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]."</span></span>

<span data-ttu-id="33531-786">Další informace o používání Wireshark najdete v tématu "[příloze 2: zachycení síťového provozu pomocí Wireshark]."</span><span class="sxs-lookup"><span data-stu-id="33531-786">For more information about using Wireshark, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="33531-787">Další informace o používání Microsoft Message Analyzer najdete v tématu "[příloha 3: použití Microsoft Message Analyzer pro zachycení síťového provozu]."</span><span class="sxs-lookup"><span data-stu-id="33531-787">For more information about using Microsoft Message Analyzer, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

## <span data-ttu-id="33531-788"><a name="appendices"></a>Přílohy</span><span class="sxs-lookup"><span data-stu-id="33531-788"><a name="appendices"></a>Appendices</span></span>
<span data-ttu-id="33531-789">Dodatky popisují několik nástrojů, které mohou být užitečné při diagnostikování a řešení potíží s Azure Storage (a další služby).</span><span class="sxs-lookup"><span data-stu-id="33531-789">The appendices describe several tools that you may find useful when you are diagnosing and troubleshooting issues with Azure Storage (and other services).</span></span> <span data-ttu-id="33531-790">Tyto nástroje nejsou součástí Azure Storage a některé produkty třetích stran.</span><span class="sxs-lookup"><span data-stu-id="33531-790">These tools are not part of Azure Storage and some are third-party products.</span></span> <span data-ttu-id="33531-791">Jako takový nástrojů popsaných v těchto přílohy nejsou zahrnuty jakékoli smlouvy podpory, kterou můžete mít s Microsoft Azure nebo Azure Storage, a proto jako součást procesu vyhodnocení byste měli zkontrolovat licencování a podporu možnosti dostupné na poskytovateli těchto nástrojů.</span><span class="sxs-lookup"><span data-stu-id="33531-791">As such, the tools discussed in these appendices are not covered by any support agreement you may have with Microsoft Azure or Azure Storage, and therefore as part of your evaluation process you should examine the licensing and support options available from the providers of these tools.</span></span>

### <span data-ttu-id="33531-792"><a name="appendix-1"></a>Dodatek 1: Pomocí Fiddleru pro zachycení přenosu dat HTTP a HTTPS</span><span class="sxs-lookup"><span data-stu-id="33531-792"><a name="appendix-1"></a>Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic</span></span>
<span data-ttu-id="33531-793">[Fiddler](http://www.telerik.com/fiddler) je užitečným nástrojem pro analýzu přenosů dat HTTP a HTTPS mezi klientské aplikace a služba úložiště Azure, kterou používáte.</span><span class="sxs-lookup"><span data-stu-id="33531-793">[Fiddler](http://www.telerik.com/fiddler) is a useful tool for analyzing the HTTP and HTTPS traffic between your client application and the Azure storage service you are using.</span></span>

> [!NOTE]
> <span data-ttu-id="33531-794">Fiddler může dekódovat provoz HTTPS; Přečtěte si dokumentaci k aplikaci Fiddler, pečlivě, abyste pochopili, jak to dělá a vysvětlení důsledků pro zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="33531-794">Fiddler can decode HTTPS traffic; you should read the Fiddler documentation carefully to understand how it does this, and to understand the security implications.</span></span>
> 
> 

<span data-ttu-id="33531-795">Tento dodatek obsahuje stručný návod, jak nakonfigurovat aplikaci Fiddler pro zachycení přenosu dat mezi místním počítači nainstalovanou aplikaci Fiddler a služby úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-795">This appendix provides a brief walkthrough of how to configure Fiddler to capture traffic between the local machine where you have installed Fiddler and the Azure storage services.</span></span>

<span data-ttu-id="33531-796">Po spuštění Fiddler zahájíte zaznamenávání HTTP a HTTPS provozy na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="33531-796">After you have launched Fiddler, it will begin capturing HTTP and HTTPS traffic on your local machine.</span></span> <span data-ttu-id="33531-797">Tady jsou některé užitečné příkazy pro řízení Fiddler:</span><span class="sxs-lookup"><span data-stu-id="33531-797">The following are some useful commands for controlling Fiddler:</span></span>

* <span data-ttu-id="33531-798">Zastavení a spuštění zachycení provozu.</span><span class="sxs-lookup"><span data-stu-id="33531-798">Stop and start capturing traffic.</span></span> <span data-ttu-id="33531-799">Na hlavní nabídky, přejděte na **soubor** a pak klikněte na **zachycování provozu** k přepnutí zaznamenávání zapnout a vypnout.</span><span class="sxs-lookup"><span data-stu-id="33531-799">On the main menu, go to **File** and then click **Capture Traffic** to toggle capturing on and off.</span></span>
* <span data-ttu-id="33531-800">Zachycená data data uložte.</span><span class="sxs-lookup"><span data-stu-id="33531-800">Save captured traffic data.</span></span> <span data-ttu-id="33531-801">Na hlavní nabídky, přejděte na **soubor**, klikněte na tlačítko **Uložit**a potom klikněte na **všechny relace**: Díky tomu můžete uložit do souboru archivu relace provoz.</span><span class="sxs-lookup"><span data-stu-id="33531-801">On the main menu, go to **File**, click **Save**, and then click **All Sessions**: this enables you to save the traffic in a Session Archive file.</span></span> <span data-ttu-id="33531-802">Můžete znovu načíst relace archivu později pro analýzu, nebo odeslat, pokud požadavek na podporu společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="33531-802">You can reload a Session Archive later for analysis, or send it if requested to Microsoft support.</span></span>

<span data-ttu-id="33531-803">Chcete-li omezit objem provozu, který zachycuje aplikaci Fiddler, můžete použít filtry, které nakonfigurujete v **filtry** kartě. Následující snímek obrazovky ukazuje filtr, který zaznamená pouze data odesílaná do **contosoemaildist.table.core.windows.net** koncový bod úložiště:</span><span class="sxs-lookup"><span data-stu-id="33531-803">To limit the amount of traffic that Fiddler captures, you can use filters that you configure in the **Filters** tab. The following screenshot shows a filter that captures only traffic sent to the **contosoemaildist.table.core.windows.net** storage endpoint:</span></span>

![][5]

### <span data-ttu-id="33531-804"><a name="appendix-2"></a>Dodatek 2: Pomocí Wireshark pro zachycení síťového provozu</span><span class="sxs-lookup"><span data-stu-id="33531-804"><a name="appendix-2"></a>Appendix 2: Using Wireshark to capture network traffic</span></span>
<span data-ttu-id="33531-805">[Wireshark](http://www.wireshark.org/) je analyzátoru protokolu sítě, která umožňuje zobrazit informace o podrobné paketů pro širokou škálu protokolů síťové.</span><span class="sxs-lookup"><span data-stu-id="33531-805">[Wireshark](http://www.wireshark.org/) is a network protocol analyzer that enables you to view detailed packet information for a wide range of network protocols.</span></span>

<span data-ttu-id="33531-806">Následující postup ukazuje, jak k zaznamenání informací podrobné paketů pro provoz z místního počítače kam jste nainstalovali Wireshark do služby table v účtu úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="33531-806">The following procedure shows you how to capture detailed packet information for traffic from the local machine where you installed Wireshark to the table service in your Azure storage account.</span></span>

1. <span data-ttu-id="33531-807">Spusťte Wireshark na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="33531-807">Launch Wireshark on your local machine.</span></span>
2. <span data-ttu-id="33531-808">V **spustit** vyberte rozhraní místní sítě nebo rozhraní, které jsou připojené k Internetu.</span><span class="sxs-lookup"><span data-stu-id="33531-808">In the **Start** section, select the local network interface or interfaces that are connected to the internet.</span></span>
3. <span data-ttu-id="33531-809">Klikněte na tlačítko **zaznamenat možnosti**.</span><span class="sxs-lookup"><span data-stu-id="33531-809">Click **Capture Options**.</span></span>
4. <span data-ttu-id="33531-810">Přidat filtr na **filtr pro sběr dat** textové pole.</span><span class="sxs-lookup"><span data-stu-id="33531-810">Add a filter to the **Capture Filter** textbox.</span></span> <span data-ttu-id="33531-811">Například **hostitele contosoemaildist.table.core.windows.net** nakonfiguruje Wireshark k zachycení pouze pakety odesílané do nebo z koncový bod služby tabulek v **contosoemaildist** účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="33531-811">For example, **host contosoemaildist.table.core.windows.net** will configure Wireshark to capture only packets sent to or from the table service endpoint in the **contosoemaildist** storage account.</span></span> <span data-ttu-id="33531-812">Podívejte se [úplný seznam filtrů zaznamenat](http://wiki.wireshark.org/CaptureFilters).</span><span class="sxs-lookup"><span data-stu-id="33531-812">Check out the [complete list of Capture Filters](http://wiki.wireshark.org/CaptureFilters).</span></span>
   
   ![][6]
5. <span data-ttu-id="33531-813">Klikněte na tlačítko **spustit**.</span><span class="sxs-lookup"><span data-stu-id="33531-813">Click **Start**.</span></span> <span data-ttu-id="33531-814">Wireshark teď zaznamená všechny pakety odesílat z koncový bod služby tabulek nebo při používání klientské aplikace na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="33531-814">Wireshark will now capture all the packets send to or from the table service endpoint as you use your client application on your local machine.</span></span>
6. <span data-ttu-id="33531-815">Po dokončení, v hlavní nabídce **zaznamenat** a potom **Zastavit**.</span><span class="sxs-lookup"><span data-stu-id="33531-815">When you have finished, on the main menu click **Capture** and then **Stop**.</span></span>
7. <span data-ttu-id="33531-816">Pokud chcete uložit zaznamenaná data do souboru Wireshark zachycení, v hlavní nabídce klikněte na tlačítko **soubor** a potom **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="33531-816">To save the captured data in a Wireshark Capture File, on the main menu click **File** and then **Save**.</span></span>

<span data-ttu-id="33531-817">WireShark bude zvýrazněte všechny chyby, které existují v **packetlist** okno.</span><span class="sxs-lookup"><span data-stu-id="33531-817">WireShark will highlight any errors that exist in the **packetlist** window.</span></span> <span data-ttu-id="33531-818">Můžete také **Expert informace** okno (klikněte na tlačítko **analyzovat**, pak **Expert informace**) k zobrazení souhrnu chyb a varování.</span><span class="sxs-lookup"><span data-stu-id="33531-818">You can also use the **Expert Info** window (click **Analyze**, then **Expert Info**) to view a summary of errors and warnings.</span></span>

![][7]

<span data-ttu-id="33531-819">Můžete také zvolit na aplikační vrstvu, uvidí ho kliknutím pravým tlačítkem myši na data protokolu TCP a výběrem možnosti Zobrazit TCP data **podle datového proudu TCP**.</span><span class="sxs-lookup"><span data-stu-id="33531-819">You can also chose to view the TCP data as the application layer sees it by right-clicking on the TCP data and selecting **Follow TCP Stream**.</span></span> <span data-ttu-id="33531-820">To je zvlášť užitečné, pokud zaznamenat vaše výpisu bez zachycení filtru.</span><span class="sxs-lookup"><span data-stu-id="33531-820">This is particularly useful if you captured your dump without a capture filter.</span></span> <span data-ttu-id="33531-821">Další informace najdete v tématu [následující datové proudy TCP](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html).</span><span class="sxs-lookup"><span data-stu-id="33531-821">For more information, see [Following TCP Streams](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html).</span></span>

![][8]

> [!NOTE]
> <span data-ttu-id="33531-822">Další informace o používání Wireshark najdete v tématu [Wireshark uživatelé průvodce](http://www.wireshark.org/docs/wsug_html_chunked).</span><span class="sxs-lookup"><span data-stu-id="33531-822">For more information about using Wireshark, see the [Wireshark Users Guide](http://www.wireshark.org/docs/wsug_html_chunked).</span></span>
> 
> 

### <span data-ttu-id="33531-823"><a name="appendix-3"></a>Dodatek 3: Použití Microsoft Message Analyzer pro zachycení síťového provozu</span><span class="sxs-lookup"><span data-stu-id="33531-823"><a name="appendix-3"></a>Appendix 3: Using Microsoft Message Analyzer to capture network traffic</span></span>
<span data-ttu-id="33531-824">Můžete použít Microsoft Message Analyzer pro zachycení přenosu dat HTTP a HTTPS podobným způsobem jako pro aplikaci Fiddler a zachycení síťového provozu na Wireshark podobným způsobem.</span><span class="sxs-lookup"><span data-stu-id="33531-824">You can use Microsoft Message Analyzer to capture HTTP and HTTPS traffic in a similar way to Fiddler, and capture network traffic in a similar way to Wireshark.</span></span>

#### <a name="configure-a-web-tracing-session-using-microsoft-message-analyzer"></a><span data-ttu-id="33531-825">Konfigurovat webovou relaci trasování pomocí Microsoft Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="33531-825">Configure a web tracing session using Microsoft Message Analyzer</span></span>
<span data-ttu-id="33531-826">Konfigurace relace trasování webu pro HTTP a HTTPS provozy pomocí Microsoft Message Analyzer, spusťte aplikaci Microsoft Message Analyzer a potom na **soubor** nabídky, klikněte na tlačítko **zachycení/trasování**.</span><span class="sxs-lookup"><span data-stu-id="33531-826">To configure a web tracing session for HTTP and HTTPS traffic using Microsoft Message Analyzer, run the Microsoft Message Analyzer application and then on the **File** menu, click **Capture/Trace**.</span></span> <span data-ttu-id="33531-827">V seznamu dostupných trasování scénáře vyberte **webový proxy server**.</span><span class="sxs-lookup"><span data-stu-id="33531-827">In the list of available trace scenarios, select **Web Proxy**.</span></span> <span data-ttu-id="33531-828">Potom v **trasování scénáře konfigurace** v panelu **HostnameFilter** textovému poli, přidat jména koncových bodů úložiště (můžete vyhledat tyto názvy v [portál Azure](https://portal.azure.com)).</span><span class="sxs-lookup"><span data-stu-id="33531-828">Then in the **Trace Scenario Configuration** panel, in the **HostnameFilter** textbox, add the names of your storage endpoints (you can look up these names in the [Azure portal](https://portal.azure.com)).</span></span> <span data-ttu-id="33531-829">Například, pokud je název účtu úložiště Azure **contosodata**, měli byste přidat následující **HostnameFilter** textové pole:</span><span class="sxs-lookup"><span data-stu-id="33531-829">For example, if the name of your Azure storage account is **contosodata**, you should add the following to the **HostnameFilter** textbox:</span></span>

```
contosodata.blob.core.windows.net contosodata.table.core.windows.net contosodata.queue.core.windows.net
```

> [!NOTE]
> <span data-ttu-id="33531-830">Znak mezery odděluje názvy hostitelů.</span><span class="sxs-lookup"><span data-stu-id="33531-830">A space character separates the hostnames.</span></span>
> 
> 

<span data-ttu-id="33531-831">Když budete chtít spustit shromažďování dat trasování, klikněte na **Start With** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="33531-831">When you are ready to start collecting trace data, click the **Start With** button.</span></span>

<span data-ttu-id="33531-832">Další informace o Microsoft Message Analyzer **webový proxy server** trasování najdete v tématu [zprostředkovatele Microsoft-PEF-WebProxy](http://technet.microsoft.com/library/jj674814.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-832">For more information about the Microsoft Message Analyzer **Web Proxy** trace, see [Microsoft-PEF-WebProxy Provider](http://technet.microsoft.com/library/jj674814.aspx).</span></span>

<span data-ttu-id="33531-833">Integrované **webový proxy server** trasování v Microsoft Message Analyzer je založena na aplikaci Fiddler, můžete zaznamenávat provoz HTTPS na straně klienta a zobrazit nezašifrované zpráv protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="33531-833">The built-in **Web Proxy** trace in Microsoft Message Analyzer is based on Fiddler; it can capture client-side HTTPS traffic and display unencrypted HTTPS messages.</span></span> <span data-ttu-id="33531-834">**Webový proxy server** trasování funguje tak, že nakonfigurujete místní proxy server pro všechny přenosy HTTP a HTTPS, která poskytuje přístup k nezašifrované zprávy.</span><span class="sxs-lookup"><span data-stu-id="33531-834">The **Web Proxy** trace works by configuring a local proxy for all HTTP and HTTPS traffic that gives it access to unencrypted messages.</span></span>

#### <a name="diagnosing-network-issues-using-microsoft-message-analyzer"></a><span data-ttu-id="33531-835">Diagnostika sítě problémy při použití Microsoft Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="33531-835">Diagnosing network issues using Microsoft Message Analyzer</span></span>
<span data-ttu-id="33531-836">Kromě používání Microsoft Message Analyzer **webový proxy server** trasování pro zachycení podrobnosti přenosy HTTP/HTTPs mezi klientská aplikace a služby úložiště, můžete také použít integrované **místní vrstvy odkaz** trasování k zaznamenání informací síťových paketů.</span><span class="sxs-lookup"><span data-stu-id="33531-836">In addition to using the Microsoft Message Analyzer **Web Proxy** trace to capture details of the HTTP/HTTPs traffic between the client application and the storage service, you can also use the built-in **Local Link Layer** trace to capture network packet information.</span></span> <span data-ttu-id="33531-837">To umožňuje, můžete k zaznamenání dat, podobně jako na informace, které můžete zaznamenat s Wireshark a diagnostikovat problémy sítě, jako jsou vyřazené pakety.</span><span class="sxs-lookup"><span data-stu-id="33531-837">This enables you to capture data similar to that which you can capture with Wireshark, and diagnose network issues such as dropped packets.</span></span>

<span data-ttu-id="33531-838">Následující snímek obrazovky ukazuje příklad **místní vrstvy odkaz** trasování s některými **informační** zprávy v **DiagnosisTypes** sloupce.</span><span class="sxs-lookup"><span data-stu-id="33531-838">The following screenshot shows an example **Local Link Layer** trace with some **informational** messages in the **DiagnosisTypes** column.</span></span> <span data-ttu-id="33531-839">Kliknutím na ikonu v **DiagnosisTypes** sloupci se zobrazuje podrobnosti o zprávě.</span><span class="sxs-lookup"><span data-stu-id="33531-839">Clicking on an icon in the **DiagnosisTypes** column shows the details of the message.</span></span> <span data-ttu-id="33531-840">V tomto příkladu server opakovaně odeslané zprávy #305 protože nepřijala potvrzení z klienta:</span><span class="sxs-lookup"><span data-stu-id="33531-840">In this example, the server retransmitted message #305 because it did not receive an acknowledgement from the client:</span></span>

![][9]

<span data-ttu-id="33531-841">Když vytvoříte relace trasování v Microsoft Message Analyzer, můžete zadat filtry pro snížení šumu v trasování.</span><span class="sxs-lookup"><span data-stu-id="33531-841">When you create the trace session in Microsoft Message Analyzer, you can specify filters to reduce the amount of noise in the trace.</span></span> <span data-ttu-id="33531-842">Na **zachycení / trasování** stránky, kde můžete definovat trasování, klikněte na **konfigurace** vedle **Microsoft-Windows-NDIS-PacketCapture**.</span><span class="sxs-lookup"><span data-stu-id="33531-842">On the **Capture / Trace** page where you define the trace, click on the **Configure** link next to **Microsoft-Windows-NDIS-PacketCapture**.</span></span> <span data-ttu-id="33531-843">Následující snímek obrazovky ukazuje konfigurace, který filtruje přenosy TCP pro IP adresy tři služby úložiště:</span><span class="sxs-lookup"><span data-stu-id="33531-843">The following screenshot shows a configuration that filters TCP traffic for the IP addresses of three storage services:</span></span>

![][10]

<span data-ttu-id="33531-844">Další informace o trasování Microsoft zpráva analyzátor místní odkaz vrstvy najdete v tématu [zprostředkovatele Microsoft PEF NDIS PacketCapture](http://technet.microsoft.com/library/jj659264.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-844">For more information about the Microsoft Message Analyzer Local Link Layer trace, see [Microsoft-PEF-NDIS-PacketCapture Provider](http://technet.microsoft.com/library/jj659264.aspx).</span></span>

### <span data-ttu-id="33531-845"><a name="appendix-4"></a>Dodatek 4: Zobrazení metriky a protokolovat data pomocí aplikace Excel</span><span class="sxs-lookup"><span data-stu-id="33531-845"><a name="appendix-4"></a>Appendix 4: Using Excel to view metrics and log data</span></span>
<span data-ttu-id="33531-846">Celou řadu nástrojů umožňují stahování metriky úložiště dat z úložiště tabulek Azure ve formátu s oddělovači, který umožňuje snadno načíst data do Excelu pro zobrazení a analýzu.</span><span class="sxs-lookup"><span data-stu-id="33531-846">Many tools enable you to download the Storage Metrics data from Azure table storage in a delimited format that makes it easy to load the data into Excel for viewing and analysis.</span></span> <span data-ttu-id="33531-847">Úložiště protokolování dat z Azure blob storage je již ve formátu s oddělovači, který můžete načíst do aplikace Excel.</span><span class="sxs-lookup"><span data-stu-id="33531-847">Storage Logging data from Azure blob storage is already in a delimited format that you can load into Excel.</span></span> <span data-ttu-id="33531-848">Ale budete muset přidat záhlaví příslušných sloupců, které jsou založené na informace na [úložiště analýzy protokolů formátu](http://msdn.microsoft.com/library/azure/hh343259.aspx) a [schématu tabulky metriky Analytics úložiště](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span><span class="sxs-lookup"><span data-stu-id="33531-848">However, you will need to add appropriate column headings based in the information at [Storage Analytics Log Format](http://msdn.microsoft.com/library/azure/hh343259.aspx) and [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx).</span></span>

<span data-ttu-id="33531-849">K importu dat protokolování úložiště do aplikace Excel po jeho stažení z úložiště objektů blob:</span><span class="sxs-lookup"><span data-stu-id="33531-849">To import your Storage Logging data into Excel after you download it from blob storage:</span></span>

* <span data-ttu-id="33531-850">Na **Data** nabídky, klikněte na tlačítko **z textu**.</span><span class="sxs-lookup"><span data-stu-id="33531-850">On the **Data** menu, click **From Text**.</span></span>
* <span data-ttu-id="33531-851">Vyhledejte soubor protokolu, které chcete zobrazit a klikněte na tlačítko **Import**.</span><span class="sxs-lookup"><span data-stu-id="33531-851">Browse to the log file you want to view and click **Import**.</span></span>
* <span data-ttu-id="33531-852">V kroku 1 tohoto **Průvodce importem textu**, vyberte **odděleného**.</span><span class="sxs-lookup"><span data-stu-id="33531-852">On step 1 of the **Text Import Wizard**, select **Delimited**.</span></span>

<span data-ttu-id="33531-853">V kroku 1 tohoto **Průvodce importem textu**, vyberte **středník** jako oddělovač, který pouze a zvolte dvojité uvozovky jako **kvalifikátor Text**.</span><span class="sxs-lookup"><span data-stu-id="33531-853">On step 1 of the **Text Import Wizard**, select **Semicolon** as the only delimiter and choose double-quote as the **Text qualifier**.</span></span> <span data-ttu-id="33531-854">Pak klikněte na tlačítko **Dokončit** a zvolit umístění, kam umístit data v sešitu.</span><span class="sxs-lookup"><span data-stu-id="33531-854">Then click **Finish** and choose where to place the data in your workbook.</span></span>

### <span data-ttu-id="33531-855"><a name="appendix-5"></a>Dodatek 5: Monitorování pomocí služby Application Insights pro Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="33531-855"><a name="appendix-5"></a>Appendix 5: Monitoring with Application Insights for Visual Studio Team Services</span></span>
<span data-ttu-id="33531-856">Můžete také použít funkci Application Insights pro Visual Studio Team Services jako součást výkonu a dostupnosti monitorování.</span><span class="sxs-lookup"><span data-stu-id="33531-856">You can also use the Application Insights feature for Visual Studio Team Services as part of your performance and availability monitoring.</span></span> <span data-ttu-id="33531-857">Tento nástroj můžete:</span><span class="sxs-lookup"><span data-stu-id="33531-857">This tool can:</span></span>

* <span data-ttu-id="33531-858">Ujistěte se, že webová služba je k dispozici a dobře reagovaly.</span><span class="sxs-lookup"><span data-stu-id="33531-858">Make sure your web service is available and responsive.</span></span> <span data-ttu-id="33531-859">Zda je vaše aplikace na web nebo aplikaci ze zařízení, která používá webovou službu, je otestovat adresu URL z umístění po celém světě každých několik minut a umožňují vědět, pokud dojde k problému.</span><span class="sxs-lookup"><span data-stu-id="33531-859">Whether your app is a web site or a device app that uses a web service, it can test your URL every few minutes from locations around the world, and let you know if there's a problem.</span></span>
* <span data-ttu-id="33531-860">Rychle diagnostikuje všechny problémy s výkonem nebo výjimky v webové služby.</span><span class="sxs-lookup"><span data-stu-id="33531-860">Quickly diagnose any performance issues or exceptions in your web service.</span></span> <span data-ttu-id="33531-861">Zjistěte, pokud jsou jejich protažení procesoru nebo jiným prostředkům, sám trasování zásobníku výjimky a snadno prohledávat protokolu trasování.</span><span class="sxs-lookup"><span data-stu-id="33531-861">Find out if CPU or other resources are being stretched, get stack traces from exceptions, and easily search through log traces.</span></span> <span data-ttu-id="33531-862">Pokud aplikace výkonu klesne pod přijatelnou omezení, můžeme vám pošleme e-mail.</span><span class="sxs-lookup"><span data-stu-id="33531-862">If the app's performance drops below acceptable limits, we can send you an email.</span></span> <span data-ttu-id="33531-863">Můžete monitorovat webové služby .NET a Java.</span><span class="sxs-lookup"><span data-stu-id="33531-863">You can monitor both .NET and Java web services.</span></span>

<span data-ttu-id="33531-864">Další informace najdete [co je Application Insights?](../../application-insights/app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="33531-864">You can find more information at [What is Application Insights?](../../application-insights/app-insights-overview.md).</span></span>

<!--Anchors-->
[Úvod]: #introduction
[Uspořádání Tato příručka]: #how-this-guide-is-organized

[monitorování vaší služby úložiště]: #monitoring-your-storage-service
[Monitorování stavu služby]: #monitoring-service-health
[Monitorování kapacity]: #monitoring-capacity
[Monitorování dostupnosti]: #monitoring-availability
[Sledování výkonu]: #monitoring-performance

[diagnostice problémů s úložištěm]: #diagnosing-storage-issues
[Problémy v oblasti služby stavu]: #service-health-issues
[Problémy s výkonem]: #performance-issues
[Diagnostikování chyb]: #diagnosing-errors
[Emulátor problémů s úložištěm]: #storage-emulator-issues
[Nástroje protokolování úložiště]: #storage-logging-tools
[Pomocí nástroje protokolování]: #using-network-logging-tools

[začátku do konce trasování]: #end-to-end-tracing
[Korelace data protokolu]: #correlating-log-data
[ID žádosti klienta]: #client-request-id
[ID žádosti serveru]: #server-request-id
[Časová razítka]: #timestamps

[pokyny při řešení potíží]: #troubleshooting-guidance
[metriky ukazují AverageE2ELatency vysoké a nízké AverageServerLatency]: #metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency
[Metrika ukazuje nízkou hodnotu AverageE2ELatency i hodnotu AverageServerLatency, ale latence klienta je vysoká]: #metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency
[Metrika ukazuje vysokou hodnotu AverageServerLatency]: #metrics-show-high-AverageServerLatency
[Dochází k neočekávaným zpožděním při doručování zpráv ve frontě]: #you-are-experiencing-unexpected-delays-in-message-delivery

[metriky způsobit nárůst PercentThrottlingError]: #metrics-show-an-increase-in-PercentThrottlingError
[Přechodný zvýšení PercentThrottlingError]: #transient-increase-in-PercentThrottlingError
[Trvalé zvýšení PercentThrottlingError chyba]: #permanent-increase-in-PercentThrottlingError
[metriky způsobit nárůst PercentTimeoutError]: #metrics-show-an-increase-in-PercentTimeoutError
[Metrika ukazuje zvýšení u PercentNetworkError]: #metrics-show-an-increase-in-PercentNetworkError

[Klient je přijímání zpráv protokolu HTTP 403 (zakázáno)]: #the-client-is-receiving-403-messages
[Klient je přijímání zpráv HTTP 404 (není nalezena)]: #the-client-is-receiving-404-messages
[Klient nebo jiným procesem dřív odstranit objekt]: #client-previously-deleted-the-object
[Chybu ověřování sdíleného přístupového podpisu (SAS)]: #SAS-authorization-issue
[Kód jazyka JavaScript na straně klienta nemá oprávnění pro přístup k objektu]: #JavaScript-code-does-not-have-permission
[Selhání sítě]: #network-failure
[Klient je přijímání zpráv protokolu HTTP 409 (konflikt)]: #the-client-is-receiving-409-messages

[metriky ukazují nízkou PercentSuccess nebo položky protokolu analýzy mít operací s stav transakce ClientOtherErrors]: #metrics-show-low-percent-success
[Metriky kapacity způsobit neočekávané nárůst využití kapacity úložiště]: #capacity-metrics-show-an-unexpected-increase
[Dochází k neočekávané restartování virtuálních počítačů, které mají velký počet připojených virtuálních pevných disků]: #you-are-experiencing-unexpected-reboots
[Problém vyplývá z pomocí emulátoru úložiště pro vývoj nebo testování]: #your-issue-arises-from-using-the-storage-emulator
[Funkce "X" nepracuje v emulátoru úložiště]: #feature-X-is-not-working
[Chyba "hodnota pro jednu z hlaviček protokolu HTTP není ve správném formátu" při použití emulátoru úložiště]: #error-HTTP-header-not-correct-format
[Spuštění emulátor úložiště vyžaduje oprávnění správce]: #storage-emulator-requires-administrative-privileges
[Narazíte na potíže s instalací sady Azure SDK pro .NET]: #you-are-encountering-problems-installing-the-Windows-Azure-SDK
[Máte jiný problém se službou úložiště]: #you-have-a-different-issue-with-a-storage-service

[přílohy]: #appendices
[dodatku 1: pomocí Fiddleru pro zachycení přenosu dat HTTP a HTTPS]: #appendix-1
[příloze 2: zachycení síťového provozu pomocí Wireshark]: #appendix-2
[příloha 3: použití Microsoft Message Analyzer pro zachycení síťového provozu]: #appendix-3
[Dodatek 4: Zobrazení metriky a protokolovat data pomocí aplikace Excel]: #appendix-4
[Dodatek 5: Monitorování pomocí služby Application Insights pro Visual Studio Team Services]: #appendix-5

<!--Image references-->
[1]: ./media/storage-monitoring-diagnosing-troubleshooting/overview.png
[3]: ./media/storage-monitoring-diagnosing-troubleshooting/hour-minute-metrics.png
[4]: ./media/storage-monitoring-diagnosing-troubleshooting/high-e2e-latency.png
[5]: ./media/storage-monitoring-diagnosing-troubleshooting/fiddler-screenshot.png
[6]: ./media/storage-monitoring-diagnosing-troubleshooting/wireshark-screenshot-1.png
[7]: ./media/storage-monitoring-diagnosing-troubleshooting/wireshark-screenshot-2.png
[8]: ./media/storage-monitoring-diagnosing-troubleshooting/wireshark-screenshot-3.png
[9]: ./media/storage-monitoring-diagnosing-troubleshooting/mma-screenshot-1.png
[10]: ./media/storage-monitoring-diagnosing-troubleshooting/mma-screenshot-2.png
