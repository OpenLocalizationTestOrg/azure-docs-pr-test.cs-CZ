---
title: "Azure Premium Storage: Návrh pro výkonu | Microsoft Docs"
description: "Návrh vysoce výkonné aplikace pomocí Azure Premium Storage. Premium Storage nabízí podporu vysoce výkonné, nízkou latencí disku pro I náročnými úlohy běžící na virtuálních počítačích Azure."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: e6a409c3-d31a-4704-a93c-0a04fdc95960
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: aungoo
ms.openlocfilehash: 5b5c8b4a0d490aee4b3d33f9222011d7864e4490
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="azure-premium-storage-design-for-high-performance"></a><span data-ttu-id="ce713-104">Úložiště Azure Premium: Návrh vysoce výkonné</span><span class="sxs-lookup"><span data-stu-id="ce713-104">Azure Premium Storage: Design for High Performance</span></span>
## <a name="overview"></a><span data-ttu-id="ce713-105">Přehled</span><span class="sxs-lookup"><span data-stu-id="ce713-105">Overview</span></span>
<span data-ttu-id="ce713-106">Tento článek obsahuje pokyny pro vytváření vysoce výkonné aplikace pomocí Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="ce713-106">This article provides guidelines for building high performance applications using Azure Premium Storage.</span></span> <span data-ttu-id="ce713-107">Můžete použít pokyny v tomto dokumentu v kombinaci s osvědčené postupy z hlediska výkonu pro technologie, které používá vaše aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-107">You can use the instructions provided in this document combined with performance best practices applicable to technologies used by your application.</span></span> <span data-ttu-id="ce713-108">Pro ilustraci podle pokynů, jsme použili SQL Server běžící na Storage úrovně Premium jako příklad v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="ce713-108">To illustrate the guidelines, we have used SQL Server running on Premium Storage as an example throughout this document.</span></span>

<span data-ttu-id="ce713-109">Když jsme adres scénáře výkonu pro vrstvy úložiště v tomto článku, musíte se k optimalizaci aplikační vrstvu.</span><span class="sxs-lookup"><span data-stu-id="ce713-109">While we address performance scenarios for the Storage layer in this article, you will need to optimize the application layer.</span></span> <span data-ttu-id="ce713-110">Například pokud hostujete farmy služby SharePoint na Azure Premium Storage, můžete použít příklady systému SQL Server z tohoto článku za účelem optimalizace databázového serveru.</span><span class="sxs-lookup"><span data-stu-id="ce713-110">For example, if you are hosting a SharePoint Farm on Azure Premium Storage, you can use the SQL Server examples from this article to optimize the database server.</span></span> <span data-ttu-id="ce713-111">Kromě toho Optimalizujte webového serveru a získat většina výkonu se aplikační server farmy služby SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ce713-111">Additionally, optimize the SharePoint Farm's Web server and Application server to get the most performance.</span></span>

<span data-ttu-id="ce713-112">Tento článek vám pomůže odpovědí následující běžné otázky o optimalizaci výkonu aplikace na Azure Premium Storage</span><span class="sxs-lookup"><span data-stu-id="ce713-112">This article will help answer following common questions about optimizing application performance on Azure Premium Storage,</span></span>

* <span data-ttu-id="ce713-113">Postupy: měření výkonu vaší aplikace?</span><span class="sxs-lookup"><span data-stu-id="ce713-113">How to measure your application performance?</span></span>  
* <span data-ttu-id="ce713-114">Proč se zobrazuje očekávané vysoký výkon?</span><span class="sxs-lookup"><span data-stu-id="ce713-114">Why are you not seeing expected high performance?</span></span>  
* <span data-ttu-id="ce713-115">Faktory, které mají vliv na výkon vaší aplikace na Storage úrovně Premium?</span><span class="sxs-lookup"><span data-stu-id="ce713-115">Which factors influence your application performance on Premium Storage?</span></span>  
* <span data-ttu-id="ce713-116">Jak se tyto faktory ovlivňují výkon aplikace na Storage úrovně Premium</span><span class="sxs-lookup"><span data-stu-id="ce713-116">How do these factors influence performance of your application on Premium Storage?</span></span>  
* <span data-ttu-id="ce713-117">Jak můžete můžete optimalizovat pro IOPS, šířky pásma a latencí?</span><span class="sxs-lookup"><span data-stu-id="ce713-117">How can you optimize for IOPS, Bandwidth and Latency?</span></span>  

<span data-ttu-id="ce713-118">Uvádíme těchto pokynů speciálně pro Storage úrovně Premium, protože úlohy běžící na Storage úrovně Premium jsou vysoce citlivých výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-118">We have provided these guidelines specifically for Premium Storage because workloads running on Premium Storage are highly performance sensitive.</span></span> <span data-ttu-id="ce713-119">Kde je to vhodné uvádíme příklady.</span><span class="sxs-lookup"><span data-stu-id="ce713-119">We have provided examples where appropriate.</span></span> <span data-ttu-id="ce713-120">Některé z těchto pokynů můžete použít k aplikacím spuštěným na virtuální počítače IaaS s disky úložiště Standard Storage.</span><span class="sxs-lookup"><span data-stu-id="ce713-120">You can also apply some of these guidelines to applications running on IaaS VMs with Standard Storage disks.</span></span>

<span data-ttu-id="ce713-121">Než začnete, pokud začínáte používat úložiště úrovně Premium, nejdřív přečíst [úložiště Premium: vysoce výkonné úložiště pro úlohy virtuálních počítačů Azure](../storage-premium-storage.md) a [a cíle výkonnosti služby Azure Storage Scalability](storage-scalability-targets.md) články.</span><span class="sxs-lookup"><span data-stu-id="ce713-121">Before you begin, if you are new to Premium Storage, first read the [Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads](../storage-premium-storage.md) and [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) articles.</span></span>

## <a name="application-performance-indicators"></a><span data-ttu-id="ce713-122">Ukazatele výkonu aplikace</span><span class="sxs-lookup"><span data-stu-id="ce713-122">Application Performance Indicators</span></span>
<span data-ttu-id="ce713-123">Jsme vyhodnocení, zda aplikace pracuje správně nebo není pomocí, jako jsou ukazatele výkonu, jak rychle aplikace je zpracování požadavku uživatele, kolik dat aplikace zpracovává každý požadavek, kolik požadavků je aplikaci zpracování v určitou dobu dobu, jak dlouho má uživatel k čekat na odpověď po odeslání žádosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-123">We assess whether an application is performing well or not using performance indicators like, how fast an application is processing a user request, how much data an application is processing per request, how many requests is an application processing in a specific period of time, how long a user has to wait to get a response after submitting their request.</span></span> <span data-ttu-id="ce713-124">Technické podmínky pro tyto ukazatele výkonu jsou IOP, propustnosti nebo šířky pásma a latence.</span><span class="sxs-lookup"><span data-stu-id="ce713-124">The technical terms for these performance indicators are, IOPS, Throughput or Bandwidth, and Latency.</span></span>

<span data-ttu-id="ce713-125">V této části se budeme zabývat běžné ukazatele výkonu v rámci služby Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-125">In this section, we will discuss the common performance indicators in the context of Premium Storage.</span></span> <span data-ttu-id="ce713-126">V následující části, shromažďování požadavky na aplikace, se dozvíte, jak k měření tyto ukazatele výkonu pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-126">In the following section, Gathering Application Requirements, you will learn how to measure these performance indicators for your application.</span></span> <span data-ttu-id="ce713-127">Později v optimalizace výkonu aplikací se dozvíte o faktorů, které ovlivňují tyto ukazatele výkonu a doporučení k optimalizaci je.</span><span class="sxs-lookup"><span data-stu-id="ce713-127">Later in Optimizing Application Performance, you will learn about the factors affecting these performance indicators and recommendations to optimize them.</span></span>

## <a name="iops"></a><span data-ttu-id="ce713-128">IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-128">IOPS</span></span>
<span data-ttu-id="ce713-129">IOPS je počet požadavků, které vaše aplikace odesílá do disky úložiště za jednu sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-129">IOPS is number of requests that your application is sending to the storage disks in one second.</span></span> <span data-ttu-id="ce713-130">Vstupně výstupní operace by mohl číst nebo zapisovat sekvenční nebo náhodné.</span><span class="sxs-lookup"><span data-stu-id="ce713-130">An input/output operation could be read or write, sequential or random.</span></span> <span data-ttu-id="ce713-131">OLTP aplikace jako webem online prodejní nutné okamžitě zpracovávat požadavky na velký počet souběžných uživatelů.</span><span class="sxs-lookup"><span data-stu-id="ce713-131">OLTP applications like an online retail website need to process many concurrent user requests immediately.</span></span> <span data-ttu-id="ce713-132">Žádosti uživatelů jsou vložení a aktualizace náročné databázové transakce, které aplikace musí rychle zpracovávají.</span><span class="sxs-lookup"><span data-stu-id="ce713-132">The user requests are insert and update intensive database transactions, which the application must process quickly.</span></span> <span data-ttu-id="ce713-133">Proto OLTP aplikace vyžadují velmi vysoký IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-133">Therefore, OLTP applications require very high IOPS.</span></span> <span data-ttu-id="ce713-134">Takové aplikace zpracovává miliony požadavků malé a náhodných vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-134">Such applications handle millions of small and random IO requests.</span></span> <span data-ttu-id="ce713-135">Pokud máte takové aplikace, je třeba navrhnout infrastruktury aplikace za účelem optimalizace iops.</span><span class="sxs-lookup"><span data-stu-id="ce713-135">If you have such an application, you must design the application infrastructure to optimize for IOPS.</span></span> <span data-ttu-id="ce713-136">V části novější *optimalizace výkonu aplikace*, probereme podrobně všech faktorů, které musíte zvážit, chcete-li získat vysokou IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-136">In the later section, *Optimizing Application Performance*, we discuss in detail all the factors that you must consider to get high IOPS.</span></span>

<span data-ttu-id="ce713-137">Když připojíte disk úložiště premium vaší vysoké škálování virtuálních počítačů, Azure poskytuje pro vás zaručenou počet IOPS podle specifikace disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-137">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="ce713-138">Například P50 disk zřídí 7500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-138">For example, a P50 disk provisions 7500 IOPS.</span></span> <span data-ttu-id="ce713-139">Každý měřítko velikost virtuálního počítače má také konkrétní limit IOPS, která dokáže odolat.</span><span class="sxs-lookup"><span data-stu-id="ce713-139">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="ce713-140">Například standardní virtuální počítač GS5 má 80 000 IOPS omezit.</span><span class="sxs-lookup"><span data-stu-id="ce713-140">For example, a Standard GS5 VM has 80,000 IOPS limit.</span></span>

## <a name="throughput"></a><span data-ttu-id="ce713-141">Propustnost</span><span class="sxs-lookup"><span data-stu-id="ce713-141">Throughput</span></span>
<span data-ttu-id="ce713-142">Propustnost nebo šířky pásma je množství dat, který aplikace odesílá na discích úložiště v určeném intervalu.</span><span class="sxs-lookup"><span data-stu-id="ce713-142">Throughput or Bandwidth is the amount of data that your application is sending to the storage disks in a specified interval.</span></span> <span data-ttu-id="ce713-143">Pokud vaše aplikace provádí vstupně-výstupních operací s velikostí jednotky velké vstupně-výstupní operace, vyžaduje Vysoká propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-143">If your application is performing input/output operations with large IO unit sizes, it requires high Throughput.</span></span> <span data-ttu-id="ce713-144">Datového skladu aplikace mívají k vydávání kontroly náročné operace, které přístup velká část dat najednou a běžně provádět hromadné operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-144">Data warehouse applications tend to issue scan intensive operations that access large portions of data at a time and commonly perform bulk operations.</span></span> <span data-ttu-id="ce713-145">Jinými slovy tyto aplikace vyžadují vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-145">In other words, such applications require higher Throughput.</span></span> <span data-ttu-id="ce713-146">Pokud máte takové aplikace, je nutné vytvořit svoji infrastrukturu optimalizovat pro propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-146">If you have such an application, you must design its infrastructure to optimize for Throughput.</span></span> <span data-ttu-id="ce713-147">V další části probereme podrobně faktory musí ladit dosáhnout.</span><span class="sxs-lookup"><span data-stu-id="ce713-147">In the next section, we discuss in detail the factors you must tune to achieve this.</span></span>

<span data-ttu-id="ce713-148">Když připojíte disk úložiště premium vysoké škálování virtuálních počítačů, Azure zřizuje propustnost podle specifikace tohoto disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-148">When you attach a premium storage disk to a high scale VM, Azure provisions Throughput as per that disk specification.</span></span> <span data-ttu-id="ce713-149">Například P50 disk zřídí 250 MB na druhý disk propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-149">For example, a P50 disk provisions 250 MB per second disk Throughput.</span></span> <span data-ttu-id="ce713-150">Každý měřítko velikost virtuálního počítače má také jako konkrétní omezení propustnosti, které dokáže odolat.</span><span class="sxs-lookup"><span data-stu-id="ce713-150">Each high scale VM size also has as specific Throughput limit that it can sustain.</span></span> <span data-ttu-id="ce713-151">Například standardní GS5 virtuální počítač má maximální propustnost 2 000 MB za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-151">For example, Standard GS5 VM has a maximum throughput of 2,000 MB per second.</span></span> 

<span data-ttu-id="ce713-152">Je vztah mezi propustnost a IOPS, jak je znázorněno v následující vzorec.</span><span class="sxs-lookup"><span data-stu-id="ce713-152">There is a relation between Throughput and IOPS as shown in the formula below.</span></span>

![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="ce713-153">Proto je důležité určit optimální propustnosti a IOPS hodnoty, které vaše aplikace vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="ce713-153">Therefore, it is important to determine the optimal Throughput and IOPS values that your application requires.</span></span> <span data-ttu-id="ce713-154">Jak se pokusíte optimalizovat jeden, druhý také získá vliv.</span><span class="sxs-lookup"><span data-stu-id="ce713-154">As you try to optimize one, the other also gets affected.</span></span> <span data-ttu-id="ce713-155">V další části *optimalizace výkonu aplikace*, se budeme zabývat v podrobnější informace o optimalizaci IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-155">In a later section, *Optimizing Application Performance*, we will discuss in more details about optimizing IOPS and Throughput.</span></span>

## <a name="latency"></a><span data-ttu-id="ce713-156">Latence</span><span class="sxs-lookup"><span data-stu-id="ce713-156">Latency</span></span>
<span data-ttu-id="ce713-157">Latence je doba potřebná aplikace pro příjem jedné žádosti, odešle disky úložiště a odesílání odpověď klientovi.</span><span class="sxs-lookup"><span data-stu-id="ce713-157">Latency is the time it takes an application to receive a single request, send it to the storage disks and send the response to the client.</span></span> <span data-ttu-id="ce713-158">Toto je důležité míra výkonu aplikace kromě IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-158">This is a critical measure of an application's performance in addition to IOPS and Throughput.</span></span> <span data-ttu-id="ce713-159">Latence disk úložiště premium je čas potřebný k získat informace o požadavku a komunikaci zpět do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-159">The Latency of a premium storage disk is the time it takes to retrieve the information for a request and communicate it back to your application.</span></span> <span data-ttu-id="ce713-160">Storage úrovně Premium poskytuje trvale nízké latence.</span><span class="sxs-lookup"><span data-stu-id="ce713-160">Premium Storage provides consistent low latencies.</span></span> <span data-ttu-id="ce713-161">Pokud povolíte ukládání do mezipaměti na discích úložiště premium hostitele jen pro čtení, můžete získat mnohem nižší latenci pro čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-161">If you enable ReadOnly host caching on premium storage disks, you can get much lower read latency.</span></span> <span data-ttu-id="ce713-162">Se budeme zabývat ukládání do mezipaměti disku podrobněji v pozdější části na *optimalizace výkonu aplikace*.</span><span class="sxs-lookup"><span data-stu-id="ce713-162">We will discuss Disk Caching in more detail in later section on *Optimizing Application Performance*.</span></span>

<span data-ttu-id="ce713-163">Optimalizovat aplikace k získání vyšší propustnost a IOPS, bude mít vliv latence vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-163">When you are optimizing your application to get higher IOPS and Throughput, it will affect the Latency of your application.</span></span> <span data-ttu-id="ce713-164">Po vyladění výkonu aplikací, vždy vyhodnoceny latence aplikace, aby se zabránilo chování neočekávané vysokou latencí.</span><span class="sxs-lookup"><span data-stu-id="ce713-164">After tuning the application performance, always evaluate the Latency of the application to avoid unexpected high latency behavior.</span></span>

## <a name="gather-application-performance-requirements"></a><span data-ttu-id="ce713-165">Shromáždění požadavků na výkon aplikace</span><span class="sxs-lookup"><span data-stu-id="ce713-165">Gather Application Performance Requirements</span></span>
<span data-ttu-id="ce713-166">Prvním krokem při navrhování vysoký výkon aplikací běžících na Azure Premium Storage je pochopit požadavky na výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-166">The first step in designing high performance applications running on Azure Premium Storage is, to understand the performance requirements of your application.</span></span> <span data-ttu-id="ce713-167">Po shromáždění požadavků na výkon, můžete optimalizovat aplikace zajistit optimální výkon.</span><span class="sxs-lookup"><span data-stu-id="ce713-167">After you gather performance requirements, you can optimize your application to achieve the most optimal performance.</span></span>

<span data-ttu-id="ce713-168">V předchozí části jsme vysvětlení najdete běžné ukazatele výkonu, IOP, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="ce713-168">In the previous section, we explained the common performance indicators, IOPS, Throughput and Latency.</span></span> <span data-ttu-id="ce713-169">Musíte určit, které tyto ukazatele výkonu jsou důležité k vaší aplikaci k poskytování požadované uživatelské prostředí.</span><span class="sxs-lookup"><span data-stu-id="ce713-169">You must identify which of these performance indicators are critical to your application to deliver the desired user experience.</span></span> <span data-ttu-id="ce713-170">Například vysoké IOPS důležitý většina aplikací OLTP zpracování miliony transakcí za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-170">For example, high IOPS matters most to OLTP applications processing millions of transactions in a second.</span></span> <span data-ttu-id="ce713-171">Vzhledem k tomu, Vysoká propustnost je velmi důležitá pro datový sklad aplikací zpracování velkých objemů dat za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-171">Whereas, high Throughput is critical for Data Warehouse applications processing large amounts of data in a second.</span></span> <span data-ttu-id="ce713-172">Velmi nízkou latenci je zásadní pro aplikace v reálném čase jako živé video streamování weby.</span><span class="sxs-lookup"><span data-stu-id="ce713-172">Extremely low Latency is crucial for real-time applications like live video streaming websites.</span></span>

<span data-ttu-id="ce713-173">V dalším kroku měření požadavky na maximální výkon vaší aplikace v průběhu své životnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-173">Next, measure the maximum performance requirements of your application throughout its lifetime.</span></span> <span data-ttu-id="ce713-174">Kontrolní seznam ukázka níže použijte jako spuštění.</span><span class="sxs-lookup"><span data-stu-id="ce713-174">Use the sample checklist below as a start.</span></span> <span data-ttu-id="ce713-175">Zaznamenejte požadavkům na maximální výkon při normální, tečky zatížení ve špičce a počítačem nepracujete.</span><span class="sxs-lookup"><span data-stu-id="ce713-175">Record the maximum performance requirements during normal, peak and off-hours workload periods.</span></span> <span data-ttu-id="ce713-176">Tím, že určíte požadavky pro všechny úrovně zatížení, bude možné určit, požadavek na celkový výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-176">By identifying requirements for all workloads levels, you will be able to determine the overall performance requirement of your application.</span></span> <span data-ttu-id="ce713-177">Běžné pracovní náplně webem elektronického obchodování například bude transakcí, které slouží během většina dnů v roce.</span><span class="sxs-lookup"><span data-stu-id="ce713-177">For example, the normal workload of an e-commerce website will be the transactions it serves during most days in a year.</span></span> <span data-ttu-id="ce713-178">Zatížení ve špičce webu bude transakcí, které slouží během sváteční sezóny nebo speciální prodej události.</span><span class="sxs-lookup"><span data-stu-id="ce713-178">The peak workload of the website will be the transactions it serves during holiday season or special sale events.</span></span> <span data-ttu-id="ce713-179">Zatížení ve špičce je obvykle zkušeného po omezenou dobu, ale může vyžadovat aplikace škálovat dvěma či více krát jeho normální provoz.</span><span class="sxs-lookup"><span data-stu-id="ce713-179">The peak workload is typically experienced for a limited period, but can require your application to scale two or more times its normal operation.</span></span> <span data-ttu-id="ce713-180">Zjistíte 50. percentil, 90 percentilu a 99 percentilu požadavky.</span><span class="sxs-lookup"><span data-stu-id="ce713-180">Find out the 50 percentile, 90 percentile and 99 percentile requirements.</span></span> <span data-ttu-id="ce713-181">To pomáhá vyfiltrovat odlehlé všechny hodnoty v požadavcích na výkon a vaše úsilí můžete soustředit na optimalizace pro správné hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ce713-181">This helps filter out any outliers in the performance requirements and you can focus your efforts on optimizing for the right values.</span></span>

<span data-ttu-id="ce713-182">**Kontrolní seznam požadavků výkonu aplikace**</span><span class="sxs-lookup"><span data-stu-id="ce713-182">**Application Performance Requirements Checklist**</span></span>

| <span data-ttu-id="ce713-183">**Požadavky na výkon**</span><span class="sxs-lookup"><span data-stu-id="ce713-183">**Performance requirements**</span></span> | <span data-ttu-id="ce713-184">**50. percentil**</span><span class="sxs-lookup"><span data-stu-id="ce713-184">**50 Percentile**</span></span> | <span data-ttu-id="ce713-185">**90 percentilu**</span><span class="sxs-lookup"><span data-stu-id="ce713-185">**90 Percentile**</span></span> | <span data-ttu-id="ce713-186">**99 percentilu**</span><span class="sxs-lookup"><span data-stu-id="ce713-186">**99  Percentile**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-187">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-187">Max.</span></span> <span data-ttu-id="ce713-188">Transakce za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-188">Transactions per second</span></span> | | | |
| <span data-ttu-id="ce713-189">Operace čtení %</span><span class="sxs-lookup"><span data-stu-id="ce713-189">% Read operations</span></span> | | | |
| <span data-ttu-id="ce713-190">Operace zápisu %</span><span class="sxs-lookup"><span data-stu-id="ce713-190">% Write operations</span></span> | | | |
| <span data-ttu-id="ce713-191">% Náhodné operace</span><span class="sxs-lookup"><span data-stu-id="ce713-191">% Random operations</span></span> | | | |
| <span data-ttu-id="ce713-192">Sekvenční operace %</span><span class="sxs-lookup"><span data-stu-id="ce713-192">% Sequential operations</span></span> | | | |
| <span data-ttu-id="ce713-193">Velikost požadavku vstupně-výstupní operace</span><span class="sxs-lookup"><span data-stu-id="ce713-193">IO request size</span></span> | | | |
| <span data-ttu-id="ce713-194">Průměrná propustnost</span><span class="sxs-lookup"><span data-stu-id="ce713-194">Average Throughput</span></span> | | | |
| <span data-ttu-id="ce713-195">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-195">Max.</span></span> <span data-ttu-id="ce713-196">Propustnost</span><span class="sxs-lookup"><span data-stu-id="ce713-196">Throughput</span></span> | | | |
| <span data-ttu-id="ce713-197">Min.</span><span class="sxs-lookup"><span data-stu-id="ce713-197">Min.</span></span> <span data-ttu-id="ce713-198">Latence</span><span class="sxs-lookup"><span data-stu-id="ce713-198">Latency</span></span> | | | |
| <span data-ttu-id="ce713-199">Průměrná latence</span><span class="sxs-lookup"><span data-stu-id="ce713-199">Average Latency</span></span> | | | |
| <span data-ttu-id="ce713-200">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-200">Max.</span></span> <span data-ttu-id="ce713-201">Procesor</span><span class="sxs-lookup"><span data-stu-id="ce713-201">CPU</span></span> | | | |
| <span data-ttu-id="ce713-202">Průměrné využití procesoru</span><span class="sxs-lookup"><span data-stu-id="ce713-202">Average CPU</span></span> | | | |
| <span data-ttu-id="ce713-203">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-203">Max.</span></span> <span data-ttu-id="ce713-204">Memory (Paměť)</span><span class="sxs-lookup"><span data-stu-id="ce713-204">Memory</span></span> | | | |
| <span data-ttu-id="ce713-205">Průměrná paměti</span><span class="sxs-lookup"><span data-stu-id="ce713-205">Average Memory</span></span> | | | |
| <span data-ttu-id="ce713-206">Hloubka fronty</span><span class="sxs-lookup"><span data-stu-id="ce713-206">Queue Depth</span></span> | | | |

> [!NOTE]
> <span data-ttu-id="ce713-207">Měli byste zvážit škálování tato čísla podle očekávané budoucímu růstu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-207">You should consider scaling these numbers based on expected future growth of your application.</span></span> <span data-ttu-id="ce713-208">Je vhodné naplánovat růstu předem, protože by mohlo být těžší infrastrukturu pro zlepšení výkonu později změnit.</span><span class="sxs-lookup"><span data-stu-id="ce713-208">It is a good idea to plan for growth ahead of time, because it could be harder to change the infrastructure for improving performance later.</span></span>
>
>

<span data-ttu-id="ce713-209">Pokud máte existující aplikaci a chcete přejít na Storage úrovně Premium, nejprve vytvoříte kontrolní seznam výše pro existující aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-209">If you have an existing application and want to move to Premium Storage, first build the checklist above for the existing application.</span></span> <span data-ttu-id="ce713-210">Potom sestavení prototyp vaší aplikace na Storage úrovně Premium a navrhněte aplikaci podle pokynů popsaných v *optimalizace výkonu aplikace* v další části tohoto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="ce713-210">Then, build a prototype of your application on Premium Storage and design the application based on guidelines described in *Optimizing Application Performance* in a later section of this document.</span></span> <span data-ttu-id="ce713-211">Další část popisuje nástroje, které můžete použít ke shromažďování měření výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-211">The next section describes the tools you can use to gather the performance measurements.</span></span>

<span data-ttu-id="ce713-212">Vytvořte kontrolní seznam podobná stávající aplikaci pro prototypu.</span><span class="sxs-lookup"><span data-stu-id="ce713-212">Create a checklist similar to your existing application for the prototype.</span></span> <span data-ttu-id="ce713-213">Pomocí nástrojů Benchmarking můžete simulovat úlohy a měření výkonu na prototypu aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-213">Using Benchmarking tools you can simulate the workloads and measure performance on the prototype application.</span></span> <span data-ttu-id="ce713-214">Projděte část o [Benchmarking](#benchmarking) Další informace.</span><span class="sxs-lookup"><span data-stu-id="ce713-214">See the section on [Benchmarking](#benchmarking) to learn more.</span></span> <span data-ttu-id="ce713-215">Pomocí tohoto postupu, abyste mohli ověřit, zda úložiště Premium můžete odpovídat nebo překročí maximální vašim požadavkům na výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-215">By doing so you can determine whether Premium Storage can match or surpass your application performance requirements.</span></span> <span data-ttu-id="ce713-216">Poté můžete implementovat stejné pokyny pro produkční aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-216">Then you can implement the same guidelines for your production application.</span></span>

### <a name="counters-to-measure-application-performance-requirements"></a><span data-ttu-id="ce713-217">Čítače k měření výkonu požadavky na aplikace</span><span class="sxs-lookup"><span data-stu-id="ce713-217">Counters to measure application performance requirements</span></span>
<span data-ttu-id="ce713-218">Nejlepší způsob, jak měřit požadavky na výkon vaší aplikace, je použití nástroje Sledování výkonu poskytované operačního systému serveru.</span><span class="sxs-lookup"><span data-stu-id="ce713-218">The best way to measure performance requirements of your application, is to use performance-monitoring tools provided by the operating system of the server.</span></span> <span data-ttu-id="ce713-219">Můžete použít nástroj PerfMon pro systém Windows a iostat pro Linux.</span><span class="sxs-lookup"><span data-stu-id="ce713-219">You can use PerfMon for Windows and iostat for Linux.</span></span> <span data-ttu-id="ce713-220">Tyto nástroje zachytit čítače odpovídající každá míra popsané v části výše.</span><span class="sxs-lookup"><span data-stu-id="ce713-220">These tools capture counters corresponding to each measure explained in the above section.</span></span> <span data-ttu-id="ce713-221">Hodnoty těchto čítačů nutné zaznamenat, když aplikace běží jeho normální, zatížení ve špičce a počítačem nepracujete.</span><span class="sxs-lookup"><span data-stu-id="ce713-221">You must capture the values of these counters when your application is running its normal, peak and off-hours workloads.</span></span>

<span data-ttu-id="ce713-222">Tyto čítače PerfMon jsou k dispozici pro procesor, paměť a každý logický disk a fyzický disk serveru.</span><span class="sxs-lookup"><span data-stu-id="ce713-222">The PerfMon counters are available for processor, memory and, each logical disk and physical disk of your server.</span></span> <span data-ttu-id="ce713-223">Pokud používáte prémiové disky úložiště v případě virtuálních počítačů, čítače fyzického disku se pro každý disk úložiště premium a čítače logický disk se pro každý svazek na discích úložiště premium vytvoří.</span><span class="sxs-lookup"><span data-stu-id="ce713-223">When you use premium storage disks with a VM, the physical disk counters are for each premium storage disk, and logical disk counters are for each volume created on the premium storage disks.</span></span> <span data-ttu-id="ce713-224">Nutné zaznamenat určité hodnoty pro disky, které hostují vaše úlohy aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-224">You must capture the values for the disks that host your application workload.</span></span> <span data-ttu-id="ce713-225">Pokud dojde k jedné mapování mezi logické a fyzické disky, mohou odkazovat na fyzický disk čítače; v opačném případě naleznete čítače logického disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-225">If there is a one to one mapping between logical and physical disks, you can refer to physical disk counters; otherwise refer to the logical disk counters.</span></span> <span data-ttu-id="ce713-226">V systému Linux příkaz iostat generuje sestavy využití procesoru a disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-226">On Linux, the iostat command generates a CPU and disk utilization report.</span></span> <span data-ttu-id="ce713-227">Sestava využití disku poskytuje statistické údaje za fyzického zařízení nebo oddíl.</span><span class="sxs-lookup"><span data-stu-id="ce713-227">The disk utilization report provides statistics per physical device or partition.</span></span> <span data-ttu-id="ce713-228">Pokud máte databázový server s protokolu a data na různých discích, shromážděte tato data pro oba disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-228">If you have a database server with its data and log on separate disks, collect this data for both disks.</span></span> <span data-ttu-id="ce713-229">Následující tabulka popisuje čítače pro disky, procesoru a paměti:</span><span class="sxs-lookup"><span data-stu-id="ce713-229">Below table describes counters for disks, processor and memory:</span></span>

| <span data-ttu-id="ce713-230">Čítač</span><span class="sxs-lookup"><span data-stu-id="ce713-230">Counter</span></span> | <span data-ttu-id="ce713-231">Popis</span><span class="sxs-lookup"><span data-stu-id="ce713-231">Description</span></span> | <span data-ttu-id="ce713-232">PerfMon</span><span class="sxs-lookup"><span data-stu-id="ce713-232">PerfMon</span></span> | <span data-ttu-id="ce713-233">Iostat</span><span class="sxs-lookup"><span data-stu-id="ce713-233">Iostat</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-234">**IOPS nebo transakcí za sekundu**</span><span class="sxs-lookup"><span data-stu-id="ce713-234">**IOPS or Transactions per second**</span></span> |<span data-ttu-id="ce713-235">Počet vstupně-výstupní požadavky vydané úložiště disku za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-235">Number of I/O requests issued to the storage disk per second.</span></span> |<span data-ttu-id="ce713-236">Čtení disku/s</span><span class="sxs-lookup"><span data-stu-id="ce713-236">Disk Reads/sec</span></span> <br> <span data-ttu-id="ce713-237">Zápis disku/s</span><span class="sxs-lookup"><span data-stu-id="ce713-237">Disk Writes/sec</span></span> |<span data-ttu-id="ce713-238">TPS</span><span class="sxs-lookup"><span data-stu-id="ce713-238">tps</span></span> <br> <span data-ttu-id="ce713-239">r/s</span><span class="sxs-lookup"><span data-stu-id="ce713-239">r/s</span></span> <br> <span data-ttu-id="ce713-240">w/s</span><span class="sxs-lookup"><span data-stu-id="ce713-240">w/s</span></span> |
| <span data-ttu-id="ce713-241">**Disk čtení a zápisu**</span><span class="sxs-lookup"><span data-stu-id="ce713-241">**Disk Reads and Writes**</span></span> |<span data-ttu-id="ce713-242">% čtení a zápisu operace provedené na disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-242">% of Reads and Write operations performed on the disk.</span></span> |<span data-ttu-id="ce713-243">Čas čtení disku v %</span><span class="sxs-lookup"><span data-stu-id="ce713-243">% Disk Read Time</span></span> <br> <span data-ttu-id="ce713-244">Čas zápisu disku v %</span><span class="sxs-lookup"><span data-stu-id="ce713-244">% Disk Write Time</span></span> |<span data-ttu-id="ce713-245">r/s</span><span class="sxs-lookup"><span data-stu-id="ce713-245">r/s</span></span> <br> <span data-ttu-id="ce713-246">w/s</span><span class="sxs-lookup"><span data-stu-id="ce713-246">w/s</span></span> |
| <span data-ttu-id="ce713-247">**Propustnost**</span><span class="sxs-lookup"><span data-stu-id="ce713-247">**Throughput**</span></span> |<span data-ttu-id="ce713-248">Množství dat číst nebo zapisovat na disk za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-248">Amount of data read from or written to the disk per second.</span></span> |<span data-ttu-id="ce713-249">Čtení z disku bajtů/s</span><span class="sxs-lookup"><span data-stu-id="ce713-249">Disk Read Bytes/sec</span></span> <br> <span data-ttu-id="ce713-250">Bajty zapisování na disk/s</span><span class="sxs-lookup"><span data-stu-id="ce713-250">Disk Write Bytes/sec</span></span> |<span data-ttu-id="ce713-251">kB_read/s</span><span class="sxs-lookup"><span data-stu-id="ce713-251">kB_read/s</span></span> <br> <span data-ttu-id="ce713-252">kB_wrtn/s</span><span class="sxs-lookup"><span data-stu-id="ce713-252">kB_wrtn/s</span></span> |
| <span data-ttu-id="ce713-253">**Latence**</span><span class="sxs-lookup"><span data-stu-id="ce713-253">**Latency**</span></span> |<span data-ttu-id="ce713-254">Celková doba nutná k dokončení žádosti o vstupně-výstupní operace disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-254">Total time to complete a disk IO request.</span></span> |<span data-ttu-id="ce713-255">Průměrná doba disku/čtení</span><span class="sxs-lookup"><span data-stu-id="ce713-255">Average Disk sec/Read</span></span> <br> <span data-ttu-id="ce713-256">Doba průměrná disku/zápis</span><span class="sxs-lookup"><span data-stu-id="ce713-256">Average disk sec/Write</span></span> |<span data-ttu-id="ce713-257">await</span><span class="sxs-lookup"><span data-stu-id="ce713-257">await</span></span> <br> <span data-ttu-id="ce713-258">svctm</span><span class="sxs-lookup"><span data-stu-id="ce713-258">svctm</span></span> |
| <span data-ttu-id="ce713-259">**Velikost vstupně-výstupní operace**</span><span class="sxs-lookup"><span data-stu-id="ce713-259">**IO size**</span></span> |<span data-ttu-id="ce713-260">Velikost vstupně-výstupních požadavků problémy na discích úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-260">The size of I/O requests issues to the storage disks.</span></span> |<span data-ttu-id="ce713-261">Průměrná disku bajtů/čtení</span><span class="sxs-lookup"><span data-stu-id="ce713-261">Average Disk Bytes/Read</span></span> <br> <span data-ttu-id="ce713-262">Průměrná disku bajtů/zápis</span><span class="sxs-lookup"><span data-stu-id="ce713-262">Average Disk Bytes/Write</span></span> |<span data-ttu-id="ce713-263">avgrq sz</span><span class="sxs-lookup"><span data-stu-id="ce713-263">avgrq-sz</span></span> |
| <span data-ttu-id="ce713-264">**Hloubka fronty**</span><span class="sxs-lookup"><span data-stu-id="ce713-264">**Queue Depth**</span></span> |<span data-ttu-id="ce713-265">Počet nezpracovaných vstupně-výstupních požadavků čekání na čtení formuláře nebo zapsaných na disk úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-265">Number of outstanding I/O requests waiting to be read form or written to the storage disk.</span></span> |<span data-ttu-id="ce713-266">Aktuální délka fronty disku</span><span class="sxs-lookup"><span data-stu-id="ce713-266">Current Disk Queue Length</span></span> |<span data-ttu-id="ce713-267">avgqu sz</span><span class="sxs-lookup"><span data-stu-id="ce713-267">avgqu-sz</span></span> |
| <span data-ttu-id="ce713-268">**Max. Paměť**</span><span class="sxs-lookup"><span data-stu-id="ce713-268">**Max. Memory**</span></span> |<span data-ttu-id="ce713-269">Množství paměti nutné ke spuštění aplikace bez problémů</span><span class="sxs-lookup"><span data-stu-id="ce713-269">Amount of memory required to run application smoothly</span></span> |<span data-ttu-id="ce713-270">% Využití potvrzených bajtů</span><span class="sxs-lookup"><span data-stu-id="ce713-270">% Committed Bytes in Use</span></span> |<span data-ttu-id="ce713-271">Použití vmstat</span><span class="sxs-lookup"><span data-stu-id="ce713-271">Use vmstat</span></span> |
| <span data-ttu-id="ce713-272">**Max. VYUŽITÍ PROCESORU**</span><span class="sxs-lookup"><span data-stu-id="ce713-272">**Max. CPU**</span></span> |<span data-ttu-id="ce713-273">Velikost procesoru potřebné ke spuštění aplikace bez problémů</span><span class="sxs-lookup"><span data-stu-id="ce713-273">Amount CPU required to run application smoothly</span></span> |<span data-ttu-id="ce713-274">% Času procesoru</span><span class="sxs-lookup"><span data-stu-id="ce713-274">% Processor time</span></span> |<span data-ttu-id="ce713-275">% util</span><span class="sxs-lookup"><span data-stu-id="ce713-275">%util</span></span> |

<span data-ttu-id="ce713-276">Další informace o [iostat](http://linuxcommand.org/man_pages/iostat1.html) a [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce713-276">Learn more about [iostat](http://linuxcommand.org/man_pages/iostat1.html) and [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span></span>

## <a name="optimizing-application-performance"></a><span data-ttu-id="ce713-277">Optimalizace výkonu aplikace</span><span class="sxs-lookup"><span data-stu-id="ce713-277">Optimizing Application Performance</span></span>
<span data-ttu-id="ce713-278">Hlavní faktory, které mají vliv na výkon aplikace běžící na Storage úrovně Premium jsou povaze z vstupně-výstupní požadavky, velikost virtuálního počítače, velikost disku, počet disků, ukládání do mezipaměti na disku, Multithreading a hloubku fronty.</span><span class="sxs-lookup"><span data-stu-id="ce713-278">The main factors that influence performance of an application running on Premium Storage are Nature of IO Requests, VM size, Disk size, Number of disks, Disk Caching, Multithreading and Queue Depth.</span></span> <span data-ttu-id="ce713-279">Můžete ovládat některé tyto faktory s knoflíky poskytované systémem.</span><span class="sxs-lookup"><span data-stu-id="ce713-279">You can control some of these factors with knobs provided by the system.</span></span> <span data-ttu-id="ce713-280">Většina aplikací nemusí poskytnout možnost ke změně velikosti vstupně-výstupní operace a hloubku fronty přímo.</span><span class="sxs-lookup"><span data-stu-id="ce713-280">Most applications may not give you an option to alter the IO size and Queue Depth directly.</span></span> <span data-ttu-id="ce713-281">Například pokud používáte systém SQL Server, nemůžete hloubka velikost a fronty vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-281">For example, if you are using SQL Server, you cannot choose the IO size and queue depth.</span></span> <span data-ttu-id="ce713-282">SQL Server vybere optimální vstupně-výstupní operace velikost fronty hloubka hodnoty a získat většina výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-282">SQL Server chooses the optimal IO size and queue depth values to get the most performance.</span></span> <span data-ttu-id="ce713-283">Je důležité pochopit účinky oba typy faktory na výkon aplikace tak, aby můžete zřídit příslušné prostředky ke splnění požadavkům na výkon.</span><span class="sxs-lookup"><span data-stu-id="ce713-283">It is important to understand the effects of both types of factors on your application performance, so that you can provision appropriate resources to meet performance needs.</span></span>

<span data-ttu-id="ce713-284">V této části naleznete kontrolní seznam požadavků na aplikaci, kterou jste vytvořili, k identifikaci, kolik potřebujete optimalizovat výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-284">Throughout this section, refer to the application requirements checklist that you created, to identify how much you need to optimize your application performance.</span></span> <span data-ttu-id="ce713-285">Podle toho, který, bude možné určit faktory, které z této části budete muset vyladit.</span><span class="sxs-lookup"><span data-stu-id="ce713-285">Based on that, you will be able to determine which factors from this section you will need to tune.</span></span> <span data-ttu-id="ce713-286">Chcete-li určující účinky každý faktor na výkon aplikace, spusťte testu typovou úlohou nástroje na instalace aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-286">To witness the effects of each factor on your application performance, run benchmarking tools on your application setup.</span></span> <span data-ttu-id="ce713-287">Odkazovat [Benchmarking](#Benchmarking) na konci tohoto článku kroky, jak spustit běžné nástroje pro testu typovou úlohou ve Windows a virtuální počítače s Linuxem.</span><span class="sxs-lookup"><span data-stu-id="ce713-287">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for steps to run common benchmarking tools on Windows and Linux VMs.</span></span>

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a><span data-ttu-id="ce713-288">Optimalizace IOP, propustnosti a latence na první pohled</span><span class="sxs-lookup"><span data-stu-id="ce713-288">Optimizing IOPS, Throughput and Latency at a glance</span></span>
<span data-ttu-id="ce713-289">Následující tabulka shrnuje všechny faktory výkonu a kroky k optimalizaci IOP, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="ce713-289">The table below summarizes all the performance factors and the steps to optimize IOPS, Throughput and Latency.</span></span> <span data-ttu-id="ce713-290">V oddílech Toto shrnutí bude popisují každou. faktor je mnohem víc hloubka.</span><span class="sxs-lookup"><span data-stu-id="ce713-290">The sections following this summary will describe each factor is much more depth.</span></span>

| &nbsp; | <span data-ttu-id="ce713-291">**IOPS**</span><span class="sxs-lookup"><span data-stu-id="ce713-291">**IOPS**</span></span> | <span data-ttu-id="ce713-292">**Propustnost**</span><span class="sxs-lookup"><span data-stu-id="ce713-292">**Throughput**</span></span> | <span data-ttu-id="ce713-293">**Latence**</span><span class="sxs-lookup"><span data-stu-id="ce713-293">**Latency**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-294">**Příklad scénáře**</span><span class="sxs-lookup"><span data-stu-id="ce713-294">**Example Scenario**</span></span> |<span data-ttu-id="ce713-295">Enterprise OLTP aplikace, které vyžadují velmi vysoký transakce za druhá míra.</span><span class="sxs-lookup"><span data-stu-id="ce713-295">Enterprise OLTP application requiring very high transactions per second rate.</span></span> |<span data-ttu-id="ce713-296">Enterprise datového skladu aplikace zpracování velkých objemů dat.</span><span class="sxs-lookup"><span data-stu-id="ce713-296">Enterprise Data warehousing application processing large amounts of data.</span></span> |<span data-ttu-id="ce713-297">Téměř v reálném čase aplikace vyžadující rychlých odpovědí na požadavky na uživatele jako hraní online her.</span><span class="sxs-lookup"><span data-stu-id="ce713-297">Near real-time applications requiring instant responses to user requests, like online gaming.</span></span> |
| <span data-ttu-id="ce713-298">Faktory výkonu</span><span class="sxs-lookup"><span data-stu-id="ce713-298">Performance factors</span></span> | &nbsp; | &nbsp; | &nbsp; |
| <span data-ttu-id="ce713-299">**Velikost vstupně-výstupní operace**</span><span class="sxs-lookup"><span data-stu-id="ce713-299">**IO size**</span></span> |<span data-ttu-id="ce713-300">Menší velikost vstupně-výstupní operace dosáhnout vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-300">Smaller IO size yields higher IOPS.</span></span> |<span data-ttu-id="ce713-301">Větší velikost vstupně-výstupní operace dosáhnout vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-301">Larger IO size to yields higher Throughput.</span></span> | &nbsp;|
| <span data-ttu-id="ce713-302">**Velikost virtuálního počítače**</span><span class="sxs-lookup"><span data-stu-id="ce713-302">**VM size**</span></span> |<span data-ttu-id="ce713-303">Použijte velikost virtuálního počítače, který nabízí IOPS větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-303">Use a VM size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="ce713-304">Zobrazit velikosti virtuálních počítačů a jejich IOPS omezení.</span><span class="sxs-lookup"><span data-stu-id="ce713-304">See VM sizes and their IOPS limits here.</span></span> |<span data-ttu-id="ce713-305">Velikost virtuálního počítače pomocí omezení propustnosti větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-305">Use a VM size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="ce713-306">Zobrazit velikosti virtuálních počítačů a jejich propustnost omezení.</span><span class="sxs-lookup"><span data-stu-id="ce713-306">See VM sizes and their Throughput limits here.</span></span> |<span data-ttu-id="ce713-307">Použijte velikost virtuálního počítače, že nabízí škálování omezení větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-307">Use a VM size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="ce713-308">Zobrazit velikosti virtuálních počítačů a jejich omezení sem.</span><span class="sxs-lookup"><span data-stu-id="ce713-308">See VM sizes and their limits here.</span></span> |
| <span data-ttu-id="ce713-309">**Velikost disku**</span><span class="sxs-lookup"><span data-stu-id="ce713-309">**Disk size**</span></span> |<span data-ttu-id="ce713-310">Použijte velikost disku, který nabízí IOPS větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-310">Use a disk size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="ce713-311">Zobrazit velikosti disků a jejich IOPS omezení.</span><span class="sxs-lookup"><span data-stu-id="ce713-311">See disk sizes and their IOPS limits here.</span></span> |<span data-ttu-id="ce713-312">Velikost disku pomocí omezení propustnosti větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-312">Use a disk size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="ce713-313">Zobrazit velikosti disků a jejich propustnost omezení.</span><span class="sxs-lookup"><span data-stu-id="ce713-313">See disk sizes and their Throughput limits here.</span></span> |<span data-ttu-id="ce713-314">Použijte velikost disku, že nabízí škálování omezení větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-314">Use a disk size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="ce713-315">Zobrazit velikosti disků a jejich omezení sem.</span><span class="sxs-lookup"><span data-stu-id="ce713-315">See disk sizes and their limits here.</span></span> |
| <span data-ttu-id="ce713-316">**Virtuální počítač a limity škálování disku**</span><span class="sxs-lookup"><span data-stu-id="ce713-316">**VM and Disk Scale Limits**</span></span> |<span data-ttu-id="ce713-317">Limit IOPS vybraná velikost virtuálního počítače musí být větší než celkový počet IOPS doprovází připojené disky úložiště premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-317">IOPS limit of the VM size chosen should be greater than total IOPS driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="ce713-318">Propustnost limit vybraná velikost virtuálního počítače musí být větší než celková propustnost doprovází připojené disky úložiště premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-318">Throughput limit of the VM size chosen should be greater than total Throughput driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="ce713-319">Limity škálování vybraná velikost virtuálního počítače musí být větší limity škálování celkový disky úložiště připojené premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-319">Scale limits of the VM size chosen must be greater than total scale limits of attached premium storage disks.</span></span> |
| <span data-ttu-id="ce713-320">**Ukládání do mezipaměti na disku**</span><span class="sxs-lookup"><span data-stu-id="ce713-320">**Disk Caching**</span></span> |<span data-ttu-id="ce713-321">Povolte mezipaměť jen pro čtení na discích úložiště premium s velkou operace čtení získat vyšší IOPS pro čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-321">Enable ReadOnly Cache on premium storage disks with Read heavy operations to get higher Read IOPS.</span></span> | &nbsp; |<span data-ttu-id="ce713-322">Povolte mezipaměť jen pro čtení na discích úložiště premium s připravené velkou operacemi získat čtení velmi nízkou latenci.</span><span class="sxs-lookup"><span data-stu-id="ce713-322">Enable ReadOnly Cache on premium storage disks with Ready heavy operations to get very low Read latencies.</span></span> |
| <span data-ttu-id="ce713-323">**Prokládání disků**</span><span class="sxs-lookup"><span data-stu-id="ce713-323">**Disk Striping**</span></span> |<span data-ttu-id="ce713-324">Použití více disků a rozkládají je společně se získat kombinovaný vyšší limit IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-324">Use multiple disks and stripe them together to get a combined higher IOPS and Throughput limit.</span></span> <span data-ttu-id="ce713-325">Všimněte si, že kombinovaný limit na jednu virtuální počítač musí být vyšší než kombinované omezení připojené prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-325">Note that the combined limit per VM should be higher than the combined limits of attached premium disks.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="ce713-326">**Velikost stripe**</span><span class="sxs-lookup"><span data-stu-id="ce713-326">**Stripe Size**</span></span> |<span data-ttu-id="ce713-327">Menší velikost stripe pro náhodné malé vstupně-výstupní operace vzor vidět v aplikacích OLTP.</span><span class="sxs-lookup"><span data-stu-id="ce713-327">Smaller stripe size for random small IO pattern seen in OLTP applications.</span></span> <span data-ttu-id="ce713-328">Například pro aplikaci SQL Server OLTP použijte stripe velikost 64KB.</span><span class="sxs-lookup"><span data-stu-id="ce713-328">E.g., use stripe size of 64KB for SQL Server OLTP application.</span></span> |<span data-ttu-id="ce713-329">Větší velikost stripe pro sekvenční velké vstupně-výstupní operace vzor vidět v aplikacích datového skladu.</span><span class="sxs-lookup"><span data-stu-id="ce713-329">Larger stripe size for sequential large IO pattern seen in Data Warehouse applications.</span></span> <span data-ttu-id="ce713-330">Například použijte velikost 256KB prokládání pro aplikaci SQL Server datového skladu.</span><span class="sxs-lookup"><span data-stu-id="ce713-330">E.g., use 256KB stripe size for SQL Server Data warehouse application.</span></span> | &nbsp; |
| <span data-ttu-id="ce713-331">**Více vláken**</span><span class="sxs-lookup"><span data-stu-id="ce713-331">**Multithreading**</span></span> |<span data-ttu-id="ce713-332">Použití více vláken tak, aby nabízel vyšší počet požadavků, které do úložiště úrovně Premium, který povede k vyšší IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-332">Use multithreading to push higher number of requests to Premium Storage that will lead to higher IOPS and Throughput.</span></span> <span data-ttu-id="ce713-333">Například na serveru SQL Server nastavit na vysokou hodnotu MAXDOP přidělit více procesorů k systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ce713-333">For example, on SQL Server set a high MAXDOP value to allocate more CPUs to SQL Server.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="ce713-334">**Hloubka fronty**</span><span class="sxs-lookup"><span data-stu-id="ce713-334">**Queue Depth**</span></span> |<span data-ttu-id="ce713-335">Větší hloubky fronty dosáhnout vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-335">Larger Queue Depth yields higher IOPS.</span></span> |<span data-ttu-id="ce713-336">Větší hloubky fronty dosáhnout vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-336">Larger Queue Depth yields higher Throughput.</span></span> |<span data-ttu-id="ce713-337">Menší hloubka fronty vypočítá nižší latenci.</span><span class="sxs-lookup"><span data-stu-id="ce713-337">Smaller Queue Depth yields lower latencies.</span></span> |

## <a name="nature-of-io-requests"></a><span data-ttu-id="ce713-338">Povaha vstupně-výstupní požadavky</span><span class="sxs-lookup"><span data-stu-id="ce713-338">Nature of IO Requests</span></span>
<span data-ttu-id="ce713-339">Žádost o vstupně-výstupní operace je jednotka vstupně výstupní operace, které vaše aplikace bude provádět.</span><span class="sxs-lookup"><span data-stu-id="ce713-339">An IO request is a unit of input/output operation that your application will be performing.</span></span> <span data-ttu-id="ce713-340">Identifikace povaha vstupně-výstupní požadavky, náhodných nebo sekvenčních, číst nebo zapisovat, malý nebo velký, bude vám pomohou určit požadavky na výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-340">Identifying the nature of IO requests, random or sequential, read or write, small or large, will help you determine the performance requirements of your application.</span></span> <span data-ttu-id="ce713-341">Je velmi důležité k pochopení povahy požadavků vstupně-výstupní operace, udělat správné rozhodnutí při navrhování infrastruktury aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-341">It is very important to understand the nature of IO requests, to make the right decisions when designing your application infrastructure.</span></span>

<span data-ttu-id="ce713-342">Velikost vstupně-výstupní operace je jedním z důležitých faktorů.</span><span class="sxs-lookup"><span data-stu-id="ce713-342">IO size is one of the more important factors.</span></span> <span data-ttu-id="ce713-343">Velikost vstupně-výstupní operace je velikost vstupně výstupní operace žádosti vygenerované vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-343">The IO size is the size of the input/output operation request generated by your application.</span></span> <span data-ttu-id="ce713-344">Velikost vstupně-výstupní operace má značný vliv na výkon, hlavně na IOPS a šířky pásma, aby bylo možné dosáhnout aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-344">The IO size has a significant impact on performance especially on the IOPS and Bandwidth that the application is able to achieve.</span></span> <span data-ttu-id="ce713-345">Následující vzorec znázorňuje vztah mezi IOPS, velikost vstupně-výstupní operace a šířky pásma nebo propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-345">The following formula shows the relationship between IOPS, IO size and Bandwidth/Throughput.</span></span>  
    ![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="ce713-346">Některé aplikace umožňují změnit jejich velikost vstupně-výstupní operace při některé aplikace nepodporují.</span><span class="sxs-lookup"><span data-stu-id="ce713-346">Some applications allow you to alter their IO size, while some applications do not.</span></span> <span data-ttu-id="ce713-347">Například SQL Server určuje optimální velikost vstupně-výstupní operace sám a neposkytuje uživatelé všechny knoflíky ho můžete změnit.</span><span class="sxs-lookup"><span data-stu-id="ce713-347">For example, SQL Server determines the optimal IO size itself, and does not provide users with any knobs to change it.</span></span> <span data-ttu-id="ce713-348">Na druhé straně Oracle poskytuje parametr s názvem [DB\_BLOKOVAT\_velikost](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) pomocí které můžete nakonfigurovat velikost žádosti vstupně-výstupní operace databáze.</span><span class="sxs-lookup"><span data-stu-id="ce713-348">On the other hand, Oracle provides a parameter called [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) using which you can configure the I/O request size of the database.</span></span>

<span data-ttu-id="ce713-349">Pokud používáte aplikaci, která neumožňuje měnit velikost vstupně-výstupní operace, optimalizovat výkon klíčového ukazatele výkonu, který je nejdůležitější do vaší aplikace pomocí pokynů v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="ce713-349">If you are using an application, which does not allow you to change the IO size, use the guidelines in this article to optimize the performance KPI that is most relevant to your application.</span></span> <span data-ttu-id="ce713-350">Například:</span><span class="sxs-lookup"><span data-stu-id="ce713-350">For example,</span></span>

* <span data-ttu-id="ce713-351">OLTP aplikace vygeneruje miliony požadavků malé a náhodných vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-351">An OLTP application generates millions of small and random IO requests.</span></span> <span data-ttu-id="ce713-352">Ke zpracování těchto typu vstupně-výstupní požadavky, je třeba navrhnout infrastrukturu aplikace tak, aby získat vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-352">To handle these type of IO requests, you must design your application infrastructure to get higher IOPS.</span></span>  
* <span data-ttu-id="ce713-353">Datového skladu aplikace generuje velké a sekvenčních vstupně-výstupní požadavky.</span><span class="sxs-lookup"><span data-stu-id="ce713-353">A data warehousing application generates large and sequential IO requests.</span></span> <span data-ttu-id="ce713-354">Ke zpracování těchto typu vstupně-výstupní požadavky, je třeba navrhnout infrastrukturu aplikace tak, aby získat vyšší šířku pásma nebo propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-354">To handle these type of IO requests, you must design your application infrastructure to get higher Bandwidth or Throughput.</span></span>

<span data-ttu-id="ce713-355">Pokud používáte aplikaci, která vám umožní změnit velikost vstupně-výstupní operace, použijte toto pravidlo pro velikost vstupně-výstupní operace kromě jiné pokyny výkonu</span><span class="sxs-lookup"><span data-stu-id="ce713-355">If you are using an application, which allows you to change the IO size, use this rule of thumb for the IO size in addition to other performance guidelines,</span></span>

* <span data-ttu-id="ce713-356">Chcete-li získat vyšší IOPS menší velikost vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-356">Smaller IO size to get higher IOPS.</span></span> <span data-ttu-id="ce713-357">Například 8 KB pro aplikaci OLTP.</span><span class="sxs-lookup"><span data-stu-id="ce713-357">For example, 8 KB for an OLTP application.</span></span>  
* <span data-ttu-id="ce713-358">Chcete-li získat vyšší šířku pásma nebo propustnost větší velikost vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-358">Larger IO size to get higher Bandwidth/Throughput.</span></span> <span data-ttu-id="ce713-359">Například 1 024 KB datového skladu aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-359">For example, 1024 KB for a data warehouse application.</span></span>

<span data-ttu-id="ce713-360">Tady je příklad na tom, jak můžete vypočítat IOPS a propustnost nebo šířky pásma pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-360">Here is an example on how you can calculate the IOPS and Throughput/Bandwidth for your application.</span></span> <span data-ttu-id="ce713-361">Vezměte v úvahu aplikace pomocí P30 disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-361">Consider an application using a P30 disk.</span></span> <span data-ttu-id="ce713-362">Maximální počet, který můžete dosáhnout IOPS a propustnost disku P30 šířky pásma je 5000 IOPS a 200 MB za sekundu v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="ce713-362">The maximum IOPS and Throughput/Bandwidth a P30 disk can achieve is 5000 IOPS and 200 MB per second respectively.</span></span> <span data-ttu-id="ce713-363">Nyní Pokud vaše aplikace vyžaduje maximální IOPS z disku P30 a použít menší velikost vstupně-výstupní operace, jako je 8 KB, výsledná šířka pásma, nebudete moct získat je 40 MB za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-363">Now, if your application requires the maximum IOPS from the P30 disk and you use a smaller IO size like 8 KB, the resulting Bandwidth you will be able to get is 40 MB per second.</span></span> <span data-ttu-id="ce713-364">Ale pokud vaše aplikace vyžaduje maximální propustnosti nebo šířky pásma z disku P30 a použijete větší velikost vstupně-výstupní operace, jako je 1024 KB, výsledná IOPS bude menší, 200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-364">However, if your application requires the maximum Throughput/Bandwidth from P30 disk, and you use a larger IO size like 1024 KB, the resulting IOPS will be less, 200 IOPS.</span></span> <span data-ttu-id="ce713-365">Tedy vylaďte velikost vstupně-výstupní operace tak, že splňuje požadavek IOPS a propustnost nebo šířky obě aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-365">Therefore, tune the IO size such that it meets both your application's IOPS and Throughput/Bandwidth requirement.</span></span> <span data-ttu-id="ce713-366">Následující tabulka shrnuje různé velikosti vstupně-výstupní operace a jejich odpovídající IOPS a propustnost pro P30 disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-366">Table below summarizes the different IO sizes and their corresponding IOPS and Throughput for a P30 disk.</span></span>

| <span data-ttu-id="ce713-367">Požadavků aplikace</span><span class="sxs-lookup"><span data-stu-id="ce713-367">Application Requirement</span></span> | <span data-ttu-id="ce713-368">Velikost vstupně-výstupních operací</span><span class="sxs-lookup"><span data-stu-id="ce713-368">I/O size</span></span> | <span data-ttu-id="ce713-369">IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-369">IOPS</span></span> | <span data-ttu-id="ce713-370">Propustnost nebo šířky pásma</span><span class="sxs-lookup"><span data-stu-id="ce713-370">Throughput/Bandwidth</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-371">Maximální IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-371">Max IOPS</span></span> |<span data-ttu-id="ce713-372">8 kB</span><span class="sxs-lookup"><span data-stu-id="ce713-372">8 KB</span></span> |<span data-ttu-id="ce713-373">5,000</span><span class="sxs-lookup"><span data-stu-id="ce713-373">5,000</span></span> |<span data-ttu-id="ce713-374">40 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-374">40 MB per second</span></span> |
| <span data-ttu-id="ce713-375">Maximální propustnost</span><span class="sxs-lookup"><span data-stu-id="ce713-375">Max Throughput</span></span> |<span data-ttu-id="ce713-376">1024 KB</span><span class="sxs-lookup"><span data-stu-id="ce713-376">1024 KB</span></span> |<span data-ttu-id="ce713-377">200</span><span class="sxs-lookup"><span data-stu-id="ce713-377">200</span></span> |<span data-ttu-id="ce713-378">200 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-378">200 MB per second</span></span> |
| <span data-ttu-id="ce713-379">Maximální propustnost + vysoké IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-379">Max Throughput + high IOPS</span></span> |<span data-ttu-id="ce713-380">64 kB</span><span class="sxs-lookup"><span data-stu-id="ce713-380">64 KB</span></span> |<span data-ttu-id="ce713-381">3,200</span><span class="sxs-lookup"><span data-stu-id="ce713-381">3,200</span></span> |<span data-ttu-id="ce713-382">200 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-382">200 MB per second</span></span> |
| <span data-ttu-id="ce713-383">Maximální IOPS + Vysoká propustnost</span><span class="sxs-lookup"><span data-stu-id="ce713-383">Max IOPS + high Throughput</span></span> |<span data-ttu-id="ce713-384">32 KB.</span><span class="sxs-lookup"><span data-stu-id="ce713-384">32 KB</span></span> |<span data-ttu-id="ce713-385">5,000</span><span class="sxs-lookup"><span data-stu-id="ce713-385">5,000</span></span> |<span data-ttu-id="ce713-386">160 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-386">160 MB per second</span></span> |

<span data-ttu-id="ce713-387">IOPS a šířky pásma, vyšší než maximální hodnota disku úložiště jednoho premium, použijte více prémiové disky rozdělená společně.</span><span class="sxs-lookup"><span data-stu-id="ce713-387">To get IOPS and Bandwidth higher than the maximum value of a single premium storage disk, use multiple premium disks striped together.</span></span> <span data-ttu-id="ce713-388">Například stripe dva P30 disky a k získání součet IOPS v 10 000 IOPS nebo kombinované propustnost 400 MB za sekundu.</span><span class="sxs-lookup"><span data-stu-id="ce713-388">For example, stripe two P30 disks to get a combined IOPS of 10,000 IOPS or a combined Throughput of 400 MB per second.</span></span> <span data-ttu-id="ce713-389">Jak je vysvětleno v další části, je nutné použít velikost virtuálního počítače, který podporuje kombinovaná IOPS a propustnost disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-389">As explained in the next section, you must use a VM size that supports the combined disk IOPS and Throughput.</span></span>

> [!NOTE]
> <span data-ttu-id="ce713-390">Jako zvýšíte IOPS nebo dalších také zvyšuje propustnost, ujistěte se, že že není stisknutí tlačítka propustnost nebo IOPS omezení disk nebo virtuální počítač při zvýšení buď jedné.</span><span class="sxs-lookup"><span data-stu-id="ce713-390">As you increase either IOPS or Throughput the other also increases, make sure you do not hit throughput or IOPS limits of the disk or VM when increasing either one.</span></span>
>
>

<span data-ttu-id="ce713-391">Účastnit účinky velikost vstupů/výstupů na výkon aplikace, můžete spustit testu typovou úlohou nástroje na virtuální počítač a disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-391">To witness the effects of IO size on application performance, you can run benchmarking tools on your VM and disks.</span></span> <span data-ttu-id="ce713-392">Vytvořit více testovacích bězích a použít jinou velikost vstupně-výstupní operace při každém spuštění zobrazíte dopad.</span><span class="sxs-lookup"><span data-stu-id="ce713-392">Create multiple test runs and use different IO size for each run to see the impact.</span></span> <span data-ttu-id="ce713-393">Odkazovat [Benchmarking](#Benchmarking) na konci tohoto článku Další podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-393">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for more details.</span></span>

## <a name="high-scale-vm-sizes"></a><span data-ttu-id="ce713-394">Měřítko velikosti virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ce713-394">High Scale VM Sizes</span></span>
<span data-ttu-id="ce713-395">Když spustíte navrhování aplikace, jeden z nejdůležitějších věcí, které chcete je, vyberte virtuální počítač pro hostování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-395">When you start designing an application, one of the first things to do is, choose a VM to host your application.</span></span> <span data-ttu-id="ce713-396">Storage úrovně Premium se dodává s velikosti vysoké škálování virtuálního počítače, které můžete spustit aplikace vyžadující vyšší výpočetní výkon a vysokou místního disku vstupně-výstupní výkon.</span><span class="sxs-lookup"><span data-stu-id="ce713-396">Premium Storage comes with High Scale VM sizes that can run applications requiring higher compute power and a high local disk I/O performance.</span></span> <span data-ttu-id="ce713-397">Tyto virtuální počítače zadejte rychlejších procesorů vyšší poměr paměti jádra a Solid-State jednotky SSD (Solid-State Drive) pro místní disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-397">These VMs provide faster processors, a higher memory-to-core ratio, and a Solid-State Drive (SSD) for the local disk.</span></span> <span data-ttu-id="ce713-398">Příklady vysoké virtuálních počítačů škálování. podpora Storage úrovně Premium jsou řady DS, DSv2 a GS virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="ce713-398">Examples of High Scale VMs supporting Premium Storage are the DS, DSv2 and GS series VMs.</span></span>

<span data-ttu-id="ce713-399">Vysoká škálování virtuálních počítačů jsou k dispozici v různých velikostech s různým počtem jader procesoru, paměti, operačního systému a velikost dočasné disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-399">High Scale VMs are available in different sizes with a different number of CPU cores, memory, OS and temporary disk size.</span></span> <span data-ttu-id="ce713-400">Každý velikost virtuálního počítače má také maximální počet datových disků, které lze připojit k virtuálnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="ce713-400">Each VM size also has maximum number of data disks that you can attach to the VM.</span></span> <span data-ttu-id="ce713-401">Proto zvolené velikost virtuálního počítače bude mít vliv na tom, kolik zpracování, paměti, a kapacitu úložiště je k dispozici pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-401">Therefore, the chosen VM size will affect how much processing, memory, and storage capacity is available for your application.</span></span> <span data-ttu-id="ce713-402">Taky ovlivňuje výpočetní a náklady na úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-402">It also affects the Compute and Storage cost.</span></span> <span data-ttu-id="ce713-403">V následující tabulce jsou specifikace největší velikost virtuálního počítače v řady DS, DSv2 series a GS řady:</span><span class="sxs-lookup"><span data-stu-id="ce713-403">For example, below are the specifications of the largest VM size in a DS series, DSv2 series and a GS series:</span></span>

| <span data-ttu-id="ce713-404">Velikost virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="ce713-404">VM size</span></span> | <span data-ttu-id="ce713-405">Procesorová jádra</span><span class="sxs-lookup"><span data-stu-id="ce713-405">CPU cores</span></span> | <span data-ttu-id="ce713-406">Memory (Paměť)</span><span class="sxs-lookup"><span data-stu-id="ce713-406">Memory</span></span> | <span data-ttu-id="ce713-407">Velikosti disků virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="ce713-407">VM disk sizes</span></span> | <span data-ttu-id="ce713-408">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-408">Max.</span></span> <span data-ttu-id="ce713-409">Datové disky</span><span class="sxs-lookup"><span data-stu-id="ce713-409">data disks</span></span> | <span data-ttu-id="ce713-410">Velikost mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-410">Cache size</span></span> | <span data-ttu-id="ce713-411">IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-411">IOPS</span></span> | <span data-ttu-id="ce713-412">Omezení šířky pásma vstupně-výstupní mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-412">Bandwidth Cache IO limits</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ce713-413">Standard_DS14</span><span class="sxs-lookup"><span data-stu-id="ce713-413">Standard_DS14</span></span> |<span data-ttu-id="ce713-414">16</span><span class="sxs-lookup"><span data-stu-id="ce713-414">16</span></span> |<span data-ttu-id="ce713-415">112 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-415">112 GB</span></span> |<span data-ttu-id="ce713-416">OPERAČNÍHO SYSTÉMU = 1023 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-416">OS = 1023 GB</span></span> <br> <span data-ttu-id="ce713-417">Místní SSD = 224 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-417">Local SSD = 224 GB</span></span> |<span data-ttu-id="ce713-418">32</span><span class="sxs-lookup"><span data-stu-id="ce713-418">32</span></span> |<span data-ttu-id="ce713-419">576 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-419">576 GB</span></span> |<span data-ttu-id="ce713-420">50 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-420">50,000 IOPS</span></span> <br> <span data-ttu-id="ce713-421">512 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-421">512 MB per second</span></span> |<span data-ttu-id="ce713-422">4000 IOPS a 33 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-422">4,000 IOPS and 33 MB per second</span></span> |
| <span data-ttu-id="ce713-423">Standard_GS5</span><span class="sxs-lookup"><span data-stu-id="ce713-423">Standard_GS5</span></span> |<span data-ttu-id="ce713-424">32</span><span class="sxs-lookup"><span data-stu-id="ce713-424">32</span></span> |<span data-ttu-id="ce713-425">448 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-425">448 GB</span></span> |<span data-ttu-id="ce713-426">OPERAČNÍHO SYSTÉMU = 1023 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-426">OS = 1023 GB</span></span> <br> <span data-ttu-id="ce713-427">Místní SSD = 896 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-427">Local SSD = 896 GB</span></span> |<span data-ttu-id="ce713-428">64</span><span class="sxs-lookup"><span data-stu-id="ce713-428">64</span></span> |<span data-ttu-id="ce713-429">4224 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-429">4224 GB</span></span> |<span data-ttu-id="ce713-430">80 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-430">80,000 IOPS</span></span> <br> <span data-ttu-id="ce713-431">2 000 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-431">2,000 MB per second</span></span> |<span data-ttu-id="ce713-432">5 000 IOPS a 50 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-432">5,000 IOPS and 50 MB per second</span></span> |

<span data-ttu-id="ce713-433">Pokud chcete zobrazit úplný seznam všech dostupných velikostí virtuálního počítače Azure, najdete [velikosti virtuálních počítačů Windows](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) nebo [velikosti virtuálního počítače s Linuxem](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ce713-433">To view a complete list of all available Azure VM sizes, refer to [Windows VM sizes](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="ce713-434">Zvolte velikost virtuálního počítače, která může splňovat a škálovat vašim požadavkům na výkon požadované aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-434">Choose a VM size that can meet and scale to your desired application performance requirements.</span></span> <span data-ttu-id="ce713-435">Kromě toho vzít v úvahu následující důležité zvážit při výběru velikosti virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="ce713-435">In addition to this, take into account following important considerations when choosing VM sizes.</span></span>

<span data-ttu-id="ce713-436">*Limity škálování*</span><span class="sxs-lookup"><span data-stu-id="ce713-436">*Scale Limits*</span></span>  
<span data-ttu-id="ce713-437">Maximální limit IOPS na virtuální počítač a na disk je jiné a nezávisle na sobě navzájem.</span><span class="sxs-lookup"><span data-stu-id="ce713-437">The maximum IOPS limits per VM and per disk are different and independent of each other.</span></span> <span data-ttu-id="ce713-438">Ujistěte se, že aplikace je v rámci virtuálního počítače a také na prémiových discích připojených k němu řídí IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-438">Make sure that the application is driving IOPS within the limits of the VM as well as the premium disks attached to it.</span></span> <span data-ttu-id="ce713-439">Výkon aplikace, jinak bude mít omezení.</span><span class="sxs-lookup"><span data-stu-id="ce713-439">Otherwise, application performance will experience throttling.</span></span>

<span data-ttu-id="ce713-440">Jako příklad předpokládejme, že požadavek na aplikaci je delší než 4 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-440">As an example, suppose an application requirement is a maximum of 4,000 IOPS.</span></span> <span data-ttu-id="ce713-441">Jak toho docílit, zřídíte P30 disku na virtuálním počítači DS1.</span><span class="sxs-lookup"><span data-stu-id="ce713-441">To achieve this, you provision a P30 disk on a DS1 VM.</span></span> <span data-ttu-id="ce713-442">P30 disk doručovat až 5000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-442">The P30 disk can deliver up to 5,000 IOPS.</span></span> <span data-ttu-id="ce713-443">DS1 virtuální počítač je však omezená na 3,200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-443">However, the DS1 VM is limited to 3,200 IOPS.</span></span> <span data-ttu-id="ce713-444">V důsledku toho výkonu aplikací bude ovlivněna limitu virtuálních počítačů v 3,200 IOPS a bude snížení výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-444">Consequently, the application performance will be constrained by the VM limit at 3,200 IOPS and there will be degraded performance.</span></span> <span data-ttu-id="ce713-445">K této situaci zabránit, zvolte velikost virtuálního počítače a disku, která budou obě splňovat požadavky na aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-445">To prevent this situation, choose a VM and disk size that will both meet application requirements.</span></span>

<span data-ttu-id="ce713-446">*Náklady na operace*</span><span class="sxs-lookup"><span data-stu-id="ce713-446">*Cost of Operation*</span></span>  
<span data-ttu-id="ce713-447">V mnoha případech je možné, že vaše celkové náklady na použití služby Premium Storage operace nižší než při použití standardní úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-447">In many cases, it is possible that your overall cost of operation using Premium Storage is lower than using Standard Storage.</span></span>

<span data-ttu-id="ce713-448">Představte si třeba aplikace, které vyžadují 16 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-448">For example, consider an application requiring 16,000 IOPS.</span></span> <span data-ttu-id="ce713-449">K dosažení tohoto výkonu, budete potřebovat standardní\_virtuálního počítače Azure IaaS D14, které je možné maximální IOPS 16,000 pomocí 32 disků standardní úložiště 1 TB.</span><span class="sxs-lookup"><span data-stu-id="ce713-449">To achieve this performance, you will need a Standard\_D14 Azure IaaS VM, which can give a maximum IOPS of 16,000 using 32 standard storage 1TB disks.</span></span> <span data-ttu-id="ce713-450">Každý disk 1TB úložiště standard storage můžete dosáhnout maximálně 500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-450">Each 1TB standard storage disk can achieve a maximum of 500 IOPS.</span></span> <span data-ttu-id="ce713-451">Odhadované náklady tohoto virtuálního počítače za měsíc bude 1,570 $.</span><span class="sxs-lookup"><span data-stu-id="ce713-451">The estimated cost of this VM per month will be $1,570.</span></span> <span data-ttu-id="ce713-452">Měsíční náklady na 32 disků standardní úložiště bude 1,638 $.</span><span class="sxs-lookup"><span data-stu-id="ce713-452">The monthly cost of 32 standard storage disks will be $1,638.</span></span> <span data-ttu-id="ce713-453">Odhadované celkové měsíční náklady na bude 3,208 $.</span><span class="sxs-lookup"><span data-stu-id="ce713-453">The estimated total monthly cost will be $3,208.</span></span>

<span data-ttu-id="ce713-454">Ale pokud budete hostovaný stejnou aplikaci na Storage úrovně Premium, budete potřebovat menší velikost virtuálního počítače a méně disky úložiště premium, proto snižuje celkové náklady.</span><span class="sxs-lookup"><span data-stu-id="ce713-454">However, if you hosted the same application on Premium Storage, you will need a smaller VM size and fewer premium storage disks, thus reducing the overall cost.</span></span> <span data-ttu-id="ce713-455">Standardní\_DS13 virtuálních počítačů můžete splňovat požadavek na 16 000 IOPS pomocí čtyř P30 disků.</span><span class="sxs-lookup"><span data-stu-id="ce713-455">A Standard\_DS13 VM can meet the 16,000 IOPS requirement using four P30 disks.</span></span> <span data-ttu-id="ce713-456">Virtuální počítač DS13 má maximální IOPS 25,600 a každý disk P30 maximální IOPS 5 000.</span><span class="sxs-lookup"><span data-stu-id="ce713-456">The DS13 VM has a maximum IOPS of 25,600 and each P30 disk has a maximum IOPS of 5,000.</span></span> <span data-ttu-id="ce713-457">Celkově platí, tuto konfiguraci můžete dosáhnout 5 000 × 4 = 20 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-457">Overall, this configuration can achieve 5,000 x 4 = 20,000 IOPS.</span></span> <span data-ttu-id="ce713-458">Odhadované náklady tohoto virtuálního počítače za měsíc bude 1,003 $.</span><span class="sxs-lookup"><span data-stu-id="ce713-458">The estimated cost of this VM per month will be $1,003.</span></span> <span data-ttu-id="ce713-459">Měsíční náklady na čtyři disky úložiště premium P30 bude 544.34 $.</span><span class="sxs-lookup"><span data-stu-id="ce713-459">The monthly cost of four P30 premium storage disks will be $544.34.</span></span> <span data-ttu-id="ce713-460">Odhadované celkové měsíční náklady na bude 1,544 $.</span><span class="sxs-lookup"><span data-stu-id="ce713-460">The estimated total monthly cost will be $1,544.</span></span>

<span data-ttu-id="ce713-461">Následující tabulka shrnuje rozpis nákladů tohoto scénáře pro Standard a Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="ce713-461">Table below summarizes the cost breakdown of this scenario for Standard and Premium Storage.</span></span>

| &nbsp; | <span data-ttu-id="ce713-462">**Standard**</span><span class="sxs-lookup"><span data-stu-id="ce713-462">**Standard**</span></span> | <span data-ttu-id="ce713-463">**Premium**</span><span class="sxs-lookup"><span data-stu-id="ce713-463">**Premium**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ce713-464">**Náklady virtuálního počítače za měsíc**</span><span class="sxs-lookup"><span data-stu-id="ce713-464">**Cost of VM per month**</span></span> |<span data-ttu-id="ce713-465">$1,570.58 (standardní\_D14)</span><span class="sxs-lookup"><span data-stu-id="ce713-465">$1,570.58 (Standard\_D14)</span></span> |<span data-ttu-id="ce713-466">$1,003.66 (standardní\_DS13)</span><span class="sxs-lookup"><span data-stu-id="ce713-466">$1,003.66 (Standard\_DS13)</span></span> |
| <span data-ttu-id="ce713-467">**Ceny disků za měsíc**</span><span class="sxs-lookup"><span data-stu-id="ce713-467">**Cost of Disks per month**</span></span> |<span data-ttu-id="ce713-468">1,638.40 (disky 32 × 1 TB)</span><span class="sxs-lookup"><span data-stu-id="ce713-468">$1,638.40 (32 x 1 TB disks)</span></span> |<span data-ttu-id="ce713-469">544.34 (4 disky x P30)</span><span class="sxs-lookup"><span data-stu-id="ce713-469">$544.34 (4 x P30 disks)</span></span> |
| <span data-ttu-id="ce713-470">**Celkové náklady za měsíc**</span><span class="sxs-lookup"><span data-stu-id="ce713-470">**Overall Cost per month**</span></span> |<span data-ttu-id="ce713-471">$3,208.98</span><span class="sxs-lookup"><span data-stu-id="ce713-471">$3,208.98</span></span> |<span data-ttu-id="ce713-472">$1,544.34</span><span class="sxs-lookup"><span data-stu-id="ce713-472">$1,544.34</span></span> |

<span data-ttu-id="ce713-473">*Distribucích systému Linux*</span><span class="sxs-lookup"><span data-stu-id="ce713-473">*Linux Distros*</span></span>  

<span data-ttu-id="ce713-474">S Azure Premium Storage získáte stejnou úroveň výkonu pro virtuální počítače s Windows a Linux.</span><span class="sxs-lookup"><span data-stu-id="ce713-474">With Azure Premium Storage, you get the same level of Performance for VMs running Windows and Linux.</span></span> <span data-ttu-id="ce713-475">Podporujeme mnoho typů distribucích systému Linux, a můžete zobrazit seznam [zde](../../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ce713-475">We support many flavors of Linux distros, and you can see the complete list [here](../../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="ce713-476">Je důležité si uvědomit, že jiný distribucích jsou vhodnější pro různé typy úloh.</span><span class="sxs-lookup"><span data-stu-id="ce713-476">It is important to note that different distros are better suited for different types of workloads.</span></span> <span data-ttu-id="ce713-477">Zobrazí se různé úrovně výkonu v závislosti na distro, které vaše úlohy běží na.</span><span class="sxs-lookup"><span data-stu-id="ce713-477">You will see different levels of performance depending on the distro your workload is running on.</span></span> <span data-ttu-id="ce713-478">Testování distribucích systému Linux s vaší aplikací a zvolit tu nejvhodnější.</span><span class="sxs-lookup"><span data-stu-id="ce713-478">Test the Linux distros with your application and choose the one that works best.</span></span>

<span data-ttu-id="ce713-479">Pokud Premium Storage s Linuxem, zkontrolujte nejnovější aktualizace o požadované ovladače zajistit vysoký výkon.</span><span class="sxs-lookup"><span data-stu-id="ce713-479">When running Linux with Premium Storage, check the latest updates about required drivers to ensure high performance.</span></span>

## <a name="premium-storage-disk-sizes"></a><span data-ttu-id="ce713-480">Velikosti disků úložiště Premium</span><span class="sxs-lookup"><span data-stu-id="ce713-480">Premium Storage Disk Sizes</span></span>
<span data-ttu-id="ce713-481">Azure Premium Storage nabízí aktuálně sedm velikosti disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-481">Azure Premium Storage offers seven disk sizes currently.</span></span> <span data-ttu-id="ce713-482">Velikost každého disku může mít jiné měřítko pro IOPS, šířky pásma a úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-482">Each disk size has a different scale limit for IOPS, Bandwidth and Storage.</span></span> <span data-ttu-id="ce713-483">Zvolte právo velikost disku úložiště Premium v závislosti na požadavky na aplikace a vysokým Škálováním velikost virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="ce713-483">Choose the right Premium Storage Disk size depending on the application requirements and the high scale VM size.</span></span> <span data-ttu-id="ce713-484">Následující tabulka uvádí velikosti sedm disků a jejich funkce.</span><span class="sxs-lookup"><span data-stu-id="ce713-484">The table below shows the seven disks sizes and their capabilities.</span></span> <span data-ttu-id="ce713-485">P4 a P6 velikosti jsou aktuálně podporovány pouze pro spravované disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-485">P4 and P6 sizes are currently only supported for Managed Disks.</span></span>

| <span data-ttu-id="ce713-486">Disky typu Premium</span><span class="sxs-lookup"><span data-stu-id="ce713-486">Premium Disks Type</span></span>  | <span data-ttu-id="ce713-487">P4</span><span class="sxs-lookup"><span data-stu-id="ce713-487">P4</span></span>    | <span data-ttu-id="ce713-488">P6</span><span class="sxs-lookup"><span data-stu-id="ce713-488">P6</span></span>    | <span data-ttu-id="ce713-489">P10</span><span class="sxs-lookup"><span data-stu-id="ce713-489">P10</span></span>   | <span data-ttu-id="ce713-490">P20</span><span class="sxs-lookup"><span data-stu-id="ce713-490">P20</span></span>   | <span data-ttu-id="ce713-491">P30</span><span class="sxs-lookup"><span data-stu-id="ce713-491">P30</span></span>   | <span data-ttu-id="ce713-492">P40</span><span class="sxs-lookup"><span data-stu-id="ce713-492">P40</span></span>   | <span data-ttu-id="ce713-493">P50</span><span class="sxs-lookup"><span data-stu-id="ce713-493">P50</span></span>   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| <span data-ttu-id="ce713-494">Velikost disku</span><span class="sxs-lookup"><span data-stu-id="ce713-494">Disk size</span></span>           | <span data-ttu-id="ce713-495">32 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-495">32 GB</span></span> | <span data-ttu-id="ce713-496">64 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-496">64 GB</span></span> | <span data-ttu-id="ce713-497">128 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-497">128 GB</span></span>| <span data-ttu-id="ce713-498">512 GB</span><span class="sxs-lookup"><span data-stu-id="ce713-498">512 GB</span></span>            | <span data-ttu-id="ce713-499">1024 GB (1 TB)</span><span class="sxs-lookup"><span data-stu-id="ce713-499">1024 GB (1 TB)</span></span>    | <span data-ttu-id="ce713-500">2 048 GB (2 TB)</span><span class="sxs-lookup"><span data-stu-id="ce713-500">2048 GB (2 TB)</span></span>    | <span data-ttu-id="ce713-501">4095 GB (4 TB)</span><span class="sxs-lookup"><span data-stu-id="ce713-501">4095 GB (4 TB)</span></span>    | 
| <span data-ttu-id="ce713-502">Vstupně-výstupní operace za sekundu / disk</span><span class="sxs-lookup"><span data-stu-id="ce713-502">IOPS per disk</span></span>       | <span data-ttu-id="ce713-503">120</span><span class="sxs-lookup"><span data-stu-id="ce713-503">120</span></span>   | <span data-ttu-id="ce713-504">240</span><span class="sxs-lookup"><span data-stu-id="ce713-504">240</span></span>   | <span data-ttu-id="ce713-505">500</span><span class="sxs-lookup"><span data-stu-id="ce713-505">500</span></span>   | <span data-ttu-id="ce713-506">2300</span><span class="sxs-lookup"><span data-stu-id="ce713-506">2300</span></span>              | <span data-ttu-id="ce713-507">5000</span><span class="sxs-lookup"><span data-stu-id="ce713-507">5000</span></span>              | <span data-ttu-id="ce713-508">7500</span><span class="sxs-lookup"><span data-stu-id="ce713-508">7500</span></span>              | <span data-ttu-id="ce713-509">7500</span><span class="sxs-lookup"><span data-stu-id="ce713-509">7500</span></span>              | 
| <span data-ttu-id="ce713-510">Propustnost / disk</span><span class="sxs-lookup"><span data-stu-id="ce713-510">Throughput per disk</span></span> | <span data-ttu-id="ce713-511">25 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-511">25 MB per second</span></span>  | <span data-ttu-id="ce713-512">50 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-512">50 MB per second</span></span>  | <span data-ttu-id="ce713-513">100 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-513">100 MB per second</span></span> | <span data-ttu-id="ce713-514">150 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-514">150 MB per second</span></span> | <span data-ttu-id="ce713-515">200 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-515">200 MB per second</span></span> | <span data-ttu-id="ce713-516">250 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-516">250 MB per second</span></span> | <span data-ttu-id="ce713-517">250 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="ce713-517">250 MB per second</span></span> | 


<span data-ttu-id="ce713-518">Kolik disků, které zvolíte, závisí na disku velikost zvolená.</span><span class="sxs-lookup"><span data-stu-id="ce713-518">How many disks you choose depends on the disk size chosen.</span></span> <span data-ttu-id="ce713-519">Můžete použít jeden disk P50 nebo více disků P10 ke splnění požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-519">You could use a single P50 disk or multiple P10 disks to meet your application requirement.</span></span> <span data-ttu-id="ce713-520">Zohlednit při rozhodování níže uvedené důležité informace o účtu.</span><span class="sxs-lookup"><span data-stu-id="ce713-520">Take into account considerations listed below when making the choice.</span></span>

<span data-ttu-id="ce713-521">*Limity škálování (IOPS a propustnost)*</span><span class="sxs-lookup"><span data-stu-id="ce713-521">*Scale Limits (IOPS and Throughput)*</span></span>  
<span data-ttu-id="ce713-522">IOPS a propustnost limity velikosti disku každého Premium je jiné a nezávislé z limity škálování virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="ce713-522">The IOPS and Throughput limits of each Premium disk size is different and independent from the VM scale limits.</span></span> <span data-ttu-id="ce713-523">Ujistěte se, že celkový počet IOPS a propustnost z disků jsou v souladu s limity škálování zvolené velikost virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="ce713-523">Make sure that the total IOPS and Throughput from the disks are within scale limits of the chosen VM size.</span></span>

<span data-ttu-id="ce713-524">Například, pokud požadavek na aplikaci je maximálně 250 MB za sekundu, propustnosti a používáte DS4 virtuální počítač s jediný disk P30.</span><span class="sxs-lookup"><span data-stu-id="ce713-524">For example, if an application requirement is a maximum of 250 MB/sec Throughput and you are using a DS4 VM with a single P30 disk.</span></span> <span data-ttu-id="ce713-525">Virtuální počítač DS4 mohou poskytnout propustnost až 256 MB/s.</span><span class="sxs-lookup"><span data-stu-id="ce713-525">The DS4 VM can give up to 256 MB/sec Throughput.</span></span> <span data-ttu-id="ce713-526">Jediný disk P30 má však propustnost limit 200 MB/s. Aplikace v důsledku toho budou být omezené na 200 MB/s z důvodu omezení disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-526">However, a single P30 disk has Throughput limit of 200 MB/sec. Consequently, the application will be constrained at 200 MB/sec due to the disk limit.</span></span> <span data-ttu-id="ce713-527">K překonání tento limit, přidělení více než jeden datové disky na virtuální počítač nebo změnit jeho velikost vaše disky P40 nebo P50.</span><span class="sxs-lookup"><span data-stu-id="ce713-527">To overcome this limit, provision more than one data disks to the VM or resize your disks to P40 or P50.</span></span>

> [!NOTE]
> <span data-ttu-id="ce713-528">Čtení obsloužených mezipaměti nejsou zahrnuty v disku IOPS a propustnost, proto není předmět mezních hodnot disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-528">Reads served by the cache are not included in the disk IOPS and Throughput, hence not subject to disk limits.</span></span> <span data-ttu-id="ce713-529">Mezipaměť obsahuje samostatné IOPS a propustnost limitu na virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="ce713-529">Cache has its separate IOPS and Throughput limit per VM.</span></span>
>
> <span data-ttu-id="ce713-530">Například původně čtení a zápisu jsou 60MB/s a 40MB za sekundu v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="ce713-530">For example, initially your reads and writes are 60MB/sec and 40MB/sec respectively.</span></span> <span data-ttu-id="ce713-531">V průběhu času mezipaměti warms a slouží více a více čtení z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ce713-531">Over time, the cache warms up and serves more and more of the reads from the cache.</span></span> <span data-ttu-id="ce713-532">Potom můžete získat zápisu vyšší propustnost z disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-532">Then, you can get higher write Throughput from the disk.</span></span>
>
>

<span data-ttu-id="ce713-533">*Počet disků*</span><span class="sxs-lookup"><span data-stu-id="ce713-533">*Number of Disks*</span></span>  
<span data-ttu-id="ce713-534">Určete počet disky, které budete potřebovat tím, že posoudí požadavky aplikací.</span><span class="sxs-lookup"><span data-stu-id="ce713-534">Determine the number of disks you will need by assessing application requirements.</span></span> <span data-ttu-id="ce713-535">Limit velikost každého virtuálního počítače je také na počet disků, které lze připojit k virtuálnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="ce713-535">Each VM size also has a limit on the number of disks that you can attach to the VM.</span></span> <span data-ttu-id="ce713-536">Obvykle je to dvojnásobný počet jader.</span><span class="sxs-lookup"><span data-stu-id="ce713-536">Typically, this is twice the number of cores.</span></span> <span data-ttu-id="ce713-537">Ujistěte se, že velikost virtuálního počítače, který zvolíte můžete podporují počet disků, které jsou potřeba.</span><span class="sxs-lookup"><span data-stu-id="ce713-537">Ensure that the VM size you choose can support the number of disks needed.</span></span>

<span data-ttu-id="ce713-538">Pamatujte si, že se úložiště Premium disky mají vyšší výkonnosti ve srovnání s disky standardní úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-538">Remember, the Premium Storage disks have higher performance capabilities compared to Standard Storage disks.</span></span> <span data-ttu-id="ce713-539">Proto pokud migrujete aplikace z virtuálního počítače Azure IaaS pomocí standardního úložiště do úložiště úrovně Premium, budete pravděpodobně potřebovat méně prémiové disky k dosažení stejný nebo i vyšší výkon pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-539">Therefore, if you are migrating your application from Azure IaaS VM using Standard Storage to Premium Storage, you will likely need fewer premium disks to achieve the same or higher performance for your application.</span></span>

## <a name="disk-caching"></a><span data-ttu-id="ce713-540">Ukládání do mezipaměti na disku</span><span class="sxs-lookup"><span data-stu-id="ce713-540">Disk Caching</span></span>
<span data-ttu-id="ce713-541">Vysoká škálování virtuálních počítačů, které využívají Storage úrovně Premium mají vícevrstvé ukládání do mezipaměti technologie názvem BlobCache.</span><span class="sxs-lookup"><span data-stu-id="ce713-541">High Scale VMs that leverage Azure Premium Storage have a multi-tier caching technology called BlobCache.</span></span> <span data-ttu-id="ce713-542">BlobCache používá kombinaci paměti RAM virtuálního počítače a místní SSD pro ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ce713-542">BlobCache uses a combination of the Virtual Machine RAM and local SSD for caching.</span></span> <span data-ttu-id="ce713-543">Tato mezipaměť je k dispozici pro trvalé disky úložiště Premium a místní disky virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="ce713-543">This cache is available for the Premium Storage persistent disks and the VM local disks.</span></span> <span data-ttu-id="ce713-544">Ve výchozím nastavení toto nastavení mezipaměti nastavena pro čtení a zápis pro disky operačního systému a jen pro čtení pro datové disky hostované na Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-544">By default, this cache setting is set to Read/Write for OS disks and ReadOnly for data disks hosted on Premium Storage.</span></span> <span data-ttu-id="ce713-545">S disků na discích úložiště Premium povoleno ukládání do mezipaměti, můžete dosáhnout vysoké škálování virtuálních počítačů velmi vysokou úroveň výkonu, které překračují základní výkon disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-545">With disk caching enabled on the Premium Storage disks, the high scale VMs can achieve extremely high levels of performance that exceed the underlying disk performance.</span></span>

> [!WARNING]
> <span data-ttu-id="ce713-546">Změna nastavení mezipaměti Azure disku odpojí a znovu připojí cílový disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-546">Changing the cache setting of an Azure disk detaches and re-attaches the target disk.</span></span> <span data-ttu-id="ce713-547">Pokud je disk operačního systému, virtuální počítač se restartuje.</span><span class="sxs-lookup"><span data-stu-id="ce713-547">If it is the operating system disk, the VM is restarted.</span></span> <span data-ttu-id="ce713-548">Zastavte všechny aplikace a služby, které by mohly mít dopad tento přerušení před změnou nastavení mezipaměti na disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-548">Stop all applications/services that might be affected by this disruption before changing the disk cache setting.</span></span>
>
>

<span data-ttu-id="ce713-549">Další informace o tom, jak BlobCache funguje, najdete v tématu uvnitř [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) příspěvku na blogu.</span><span class="sxs-lookup"><span data-stu-id="ce713-549">To learn more about how BlobCache works, refer to the Inside [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blog post.</span></span>

<span data-ttu-id="ce713-550">Je potřeba povolit mezipaměť na správnou sadu disků.</span><span class="sxs-lookup"><span data-stu-id="ce713-550">It is important to enable cache on the right set of disks.</span></span> <span data-ttu-id="ce713-551">Tom, jestli by měl povolit ukládání do mezipaměti na disku na premium disk nebo nebude závisí na vzor zatížení tohoto disku bude zpracovávat.</span><span class="sxs-lookup"><span data-stu-id="ce713-551">Whether you should enable disk caching on a premium disk or not will depend on the workload pattern that disk will be handling.</span></span> <span data-ttu-id="ce713-552">Následující tabulka uvádí výchozí nastavení mezipaměti pro disky operačního systému a Data.</span><span class="sxs-lookup"><span data-stu-id="ce713-552">Table below shows the default cache settings for OS and Data disks.</span></span>

| <span data-ttu-id="ce713-553">**Typ disku**</span><span class="sxs-lookup"><span data-stu-id="ce713-553">**Disk Type**</span></span> | <span data-ttu-id="ce713-554">**Výchozí nastavení mezipaměti**</span><span class="sxs-lookup"><span data-stu-id="ce713-554">**Default Cache Setting**</span></span> |
| --- | --- |
| <span data-ttu-id="ce713-555">Disk OS</span><span class="sxs-lookup"><span data-stu-id="ce713-555">OS disk</span></span> |<span data-ttu-id="ce713-556">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="ce713-556">ReadWrite</span></span> |
| <span data-ttu-id="ce713-557">Datový disk</span><span class="sxs-lookup"><span data-stu-id="ce713-557">Data disk</span></span> |<span data-ttu-id="ce713-558">Žádný</span><span class="sxs-lookup"><span data-stu-id="ce713-558">None</span></span> |

<span data-ttu-id="ce713-559">Následují nastavení mezipaměti doporučené disku pro datové disky</span><span class="sxs-lookup"><span data-stu-id="ce713-559">Following are the recommended disk cache settings for data disks,</span></span>

| <span data-ttu-id="ce713-560">**Nastavení ukládání do mezipaměti na disku**</span><span class="sxs-lookup"><span data-stu-id="ce713-560">**Disk Caching Setting**</span></span> | <span data-ttu-id="ce713-561">**Doporučení ohledně použití tohoto nastavení**</span><span class="sxs-lookup"><span data-stu-id="ce713-561">**Recommendation on when to use this setting**</span></span> |
| --- | --- |
| <span data-ttu-id="ce713-562">Žádný</span><span class="sxs-lookup"><span data-stu-id="ce713-562">None</span></span> |<span data-ttu-id="ce713-563">Konfigurace mezipaměti hostitele jako None jen pro zápis a zápis náročné disků.</span><span class="sxs-lookup"><span data-stu-id="ce713-563">Configure host-cache as None for write-only and write-heavy disks.</span></span> |
| <span data-ttu-id="ce713-564">Jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="ce713-564">ReadOnly</span></span> |<span data-ttu-id="ce713-565">Konfigurace mezipaměti hostitele jako jen pro čtení pro disky jen pro čtení a zápisu pro čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-565">Configure host-cache as ReadOnly for read-only and read-write disks.</span></span> |
| <span data-ttu-id="ce713-566">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="ce713-566">ReadWrite</span></span> |<span data-ttu-id="ce713-567">Konfigurace mezipaměti hostitele jako ReadWrite pouze v případě, že vaše aplikace zpracovává správně zápis data uložená v mezipaměti do trvalé disků v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="ce713-567">Configure host-cache as ReadWrite only if your application properly  handles writing cached data to persistent disks when needed.</span></span> |

<span data-ttu-id="ce713-568">*Jen pro čtení*</span><span class="sxs-lookup"><span data-stu-id="ce713-568">*ReadOnly*</span></span>  
<span data-ttu-id="ce713-569">Konfigurace ukládání do mezipaměti na Storage úrovně Premium data disky určené jen pro čtení, můžete dosáhnout nízkou latenci pro čtení a získat velmi vysoké IOPS pro čtení a propustnost pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-569">By configuring ReadOnly caching on Premium Storage data disks, you can achieve low Read latency and get very high Read IOPS and Throughput for your application.</span></span> <span data-ttu-id="ce713-570">Toto je z důvodu ze dvou důvodů</span><span class="sxs-lookup"><span data-stu-id="ce713-570">This is due two reasons,</span></span>

1. <span data-ttu-id="ce713-571">Čtení provést z mezipaměti, která je na paměť virtuálního počítače a místní SSD, je mnohem rychlejší než čtení z disku data, která funguje ve službě Azure blob storage.</span><span class="sxs-lookup"><span data-stu-id="ce713-571">Reads performed from cache, which is on the VM memory and local SSD, are much faster than reads from the data disk, which is on the Azure blob storage.</span></span>  
2. <span data-ttu-id="ce713-572">Storage úrovně Premium nepočítá čtení z mezipaměti směrem disku IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-572">Premium Storage does not count the Reads served from cache, towards the disk IOPS and Throughput.</span></span> <span data-ttu-id="ce713-573">Aplikace je proto můžete dosáhnout vyšší celkový počet IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-573">Therefore, your application is able to achieve higher total IOPS and Throughput.</span></span>

<span data-ttu-id="ce713-574">*ReadWrite*</span><span class="sxs-lookup"><span data-stu-id="ce713-574">*ReadWrite*</span></span>  
<span data-ttu-id="ce713-575">Ve výchozím nastavení mají disky operačního systému, ReadWrite povoleno ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ce713-575">By default, the OS disks have ReadWrite caching enabled.</span></span> <span data-ttu-id="ce713-576">Nedávno jsme doplnili podporu pro ukládání do mezipaměti na data i disky v režimu ReadWrite.</span><span class="sxs-lookup"><span data-stu-id="ce713-576">We have recently added support for ReadWrite caching on data disks as well.</span></span> <span data-ttu-id="ce713-577">Pokud používáte ReadWrite ukládání do mezipaměti, musí mít správný způsob, jak zapsat data z mezipaměti na trvalé disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-577">If you are using ReadWrite caching, you must have a proper way to write the data from cache to persistent disks.</span></span> <span data-ttu-id="ce713-578">Například systému SQL Server zpracovává zápis data uložená v mezipaměti do trvalého úložiště disky svoje vlastní.</span><span class="sxs-lookup"><span data-stu-id="ce713-578">For example, SQL Server handles writing cached data to the persistent storage disks on its own.</span></span> <span data-ttu-id="ce713-579">ReadWrite mezipaměti pomocí aplikace, která zpracovává uložením požadovaná data může způsobit ztrátu dat, pokud dojde k chybě virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="ce713-579">Using ReadWrite cache with an application that does not handle persisting the required data can lead to data loss, if the VM crashes.</span></span>

<span data-ttu-id="ce713-580">Například můžete použít tyto pokyny pro SQL Server běžící na Storage úrovně Premium provedením následujících akcí,</span><span class="sxs-lookup"><span data-stu-id="ce713-580">As an example, you can apply these guidelines to SQL Server running on Premium Storage by doing the following,</span></span>

1. <span data-ttu-id="ce713-581">Konfigurace mezipaměti "Jen pro čtení" na discích úložiště premium hostování datových souborů.</span><span class="sxs-lookup"><span data-stu-id="ce713-581">Configure "ReadOnly" cache on premium storage disks hosting data files.</span></span>  
   <span data-ttu-id="ce713-582">a.</span><span class="sxs-lookup"><span data-stu-id="ce713-582">a.</span></span>  <span data-ttu-id="ce713-583">Vzhledem k tomu, že jsou data stránky mnohem rychleji načteny z mezipaměti dobu dotazu systému SQL Server ve srovnání s přímo z dat disky bude rychlý přečte z mezipaměti nižší.</span><span class="sxs-lookup"><span data-stu-id="ce713-583">The fast reads from cache lower the SQL Server query time since data pages are retrieved much faster from the cache compared to directly from the data disks.</span></span>  
   <span data-ttu-id="ce713-584">b.</span><span class="sxs-lookup"><span data-stu-id="ce713-584">b.</span></span>  <span data-ttu-id="ce713-585">Obsluhuje čtení z mezipaměti, znamená, že není k dispozici z premium datových disků ke zvýšení propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-585">Serving reads from cache, means there is additional Throughput available from premium data disks.</span></span> <span data-ttu-id="ce713-586">SQL Server můžete použít tento ke zvýšení propustnosti směrem načítání více datových stránek a další operace, jako je zálohování a obnovení, dávky zatížení, a znovu sestaví index.</span><span class="sxs-lookup"><span data-stu-id="ce713-586">SQL Server can use this additional Throughput towards retrieving more data pages and other operations like backup/restore, batch loads, and index rebuilds.</span></span>  
2. <span data-ttu-id="ce713-587">Konfigurace "Žádný" v mezipaměti na discích úložiště premium hostování souborů protokolu.</span><span class="sxs-lookup"><span data-stu-id="ce713-587">Configure "None" cache on premium storage disks hosting the log files.</span></span>  
   <span data-ttu-id="ce713-588">a.</span><span class="sxs-lookup"><span data-stu-id="ce713-588">a.</span></span>  <span data-ttu-id="ce713-589">Soubory protokolů mají především zápisu náročná operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-589">Log files have primarily write-heavy operations.</span></span> <span data-ttu-id="ce713-590">Proto že nejsou nijak přínosné mezipaměti jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-590">Therefore, they do not benefit from the ReadOnly cache.</span></span>

## <a name="disk-striping"></a><span data-ttu-id="ce713-591">Prokládání disků</span><span class="sxs-lookup"><span data-stu-id="ce713-591">Disk Striping</span></span>
<span data-ttu-id="ce713-592">Při vysoké měřítka, které je připojený virtuální počítač s několik disků trvalé úložiště premium, můžete disky rozdělená společně k agregaci jejich IOPs, šířky pásma a kapacity úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-592">When a high scale VM is attached with several premium storage persistent disks, the disks can be striped together to aggregate their IOPs, bandwidth, and storage capacity.</span></span>

<span data-ttu-id="ce713-593">V systému Windows můžete prostory úložiště na disky stripe společně.</span><span class="sxs-lookup"><span data-stu-id="ce713-593">On Windows, you can use Storage Spaces to stripe disks together.</span></span> <span data-ttu-id="ce713-594">Je nutné nakonfigurovat jeden sloupec pro každý disk ve fondu.</span><span class="sxs-lookup"><span data-stu-id="ce713-594">You must configure one column for each disk in a pool.</span></span> <span data-ttu-id="ce713-595">Celkový výkon prokládaný svazek, jinak hodnota může být nižší, než se očekávalo, z důvodu nevyrovnaná distribuce přenosů mezi disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-595">Otherwise, the overall performance of striped volume can be lower than expected, due to uneven distribution of traffic across the disks.</span></span>

<span data-ttu-id="ce713-596">Důležité: Pomocí uživatelského rozhraní správce serveru, můžete nastavit celkový počet sloupců až 8 pro prokládaný svazek.</span><span class="sxs-lookup"><span data-stu-id="ce713-596">Important: Using Server Manager UI, you can set the total number of columns up to 8 for a striped volume.</span></span> <span data-ttu-id="ce713-597">Při připojení více než 8 disky, použijte PowerShell k vytvoření svazku.</span><span class="sxs-lookup"><span data-stu-id="ce713-597">When attaching more than 8 disks, use PowerShell to create the volume.</span></span> <span data-ttu-id="ce713-598">Pomocí prostředí PowerShell, můžete nastavit počet sloupců rovná počet disků.</span><span class="sxs-lookup"><span data-stu-id="ce713-598">Using PowerShell, you can set the number of columns equal to the number of disks.</span></span> <span data-ttu-id="ce713-599">Například, pokud existují 16 disků v sadě jeden stripe; Zadejte 16 sloupců v *NumberOfColumns* parametr *New-VirtualDisk* rutiny prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ce713-599">For example, if there are 16 disks in a single stripe set; specify 16 columns in the *NumberOfColumns* parameter of the *New-VirtualDisk* PowerShell cmdlet.</span></span>

<span data-ttu-id="ce713-600">V systému Linux použijte nástroj MDADM na disky stripe společně.</span><span class="sxs-lookup"><span data-stu-id="ce713-600">On Linux, use the MDADM utility to stripe disks together.</span></span> <span data-ttu-id="ce713-601">Podrobné pokyny k proložení disků v systému Linux naleznete v [konfigurace RAID softwaru v systému Linux](../../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ce713-601">For detailed steps on striping disks on Linux refer to [Configure Software RAID on Linux](../../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="ce713-602">*Velikost stripe*</span><span class="sxs-lookup"><span data-stu-id="ce713-602">*Stripe Size*</span></span>  
<span data-ttu-id="ce713-603">Důležité konfigurační v prokládání disků je velikost stripe.</span><span class="sxs-lookup"><span data-stu-id="ce713-603">An important configuration in disk striping is the stripe size.</span></span> <span data-ttu-id="ce713-604">Velikost pruhu nebo velikost bloku je nejmenší bloků dat, které aplikace můžete vyřešit na prokládané svazku.</span><span class="sxs-lookup"><span data-stu-id="ce713-604">The stripe size or block size is the smallest chunk of data that application can address on a striped volume.</span></span> <span data-ttu-id="ce713-605">Velikost prokládání, které můžete konfigurovat závisí na typu aplikace a jeho žádost vzor.</span><span class="sxs-lookup"><span data-stu-id="ce713-605">The stripe size you configure depends on the type of application and its request pattern.</span></span> <span data-ttu-id="ce713-606">Pokud si zvolíte velikost nesprávný stripe, může vést k chybné zarovnání vstupně-výstupní operace, což vede k snížení výkonu aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-606">If you choose the wrong stripe size, it could lead to IO misalignment, which leads to degraded performance of your application.</span></span>

<span data-ttu-id="ce713-607">Například pokud požadavek vstupně-výstupní operace generované aplikace je větší, než je velikost disku stripe, systém úložiště zapíše ho napříč hranicemi jednotky stripe na více než jeden disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-607">For example, if an IO request generated by your application is bigger than the disk stripe size, the storage system writes it across stripe unit boundaries on more than one disk.</span></span> <span data-ttu-id="ce713-608">Když je na čase přístup k datům, bude mít k vyhledání napříč více než jedné jednotky stripe dokončit žádost.</span><span class="sxs-lookup"><span data-stu-id="ce713-608">When it is time to access that data, it will have to seek across more than one stripe units to complete the request.</span></span> <span data-ttu-id="ce713-609">Kumulativní účinek tohoto chování může způsobit snížení výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-609">The cumulative effect of such behavior can lead to substantial performance degradation.</span></span> <span data-ttu-id="ce713-610">Na druhé straně Pokud je menší než velikost stripe velikost žádosti vstupně-výstupní operace, a pokud je náhodný ve své podstatě, vstupně-výstupní operace žádosti může dohromady na stejném disku, problémové místo a nakonec docházelo k omezení výkonu vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="ce713-610">On the other hand, if the IO request size is smaller than stripe size, and if it is random in nature, the IO requests may add up on the same disk causing a bottleneck and ultimately degrading the IO performance.</span></span>

<span data-ttu-id="ce713-611">V závislosti na typu úloh, které vaše aplikace běží zvolte velikost příslušné stripe.</span><span class="sxs-lookup"><span data-stu-id="ce713-611">Depending on the type of workload your application is running, choose an appropriate stripe size.</span></span> <span data-ttu-id="ce713-612">Pro náhodné malé vstupně-výstupní požadavky použijte menší velikost stripe.</span><span class="sxs-lookup"><span data-stu-id="ce713-612">For random small IO requests, use a smaller stripe size.</span></span> <span data-ttu-id="ce713-613">Zatímco požadavky pro velkých sekvenčních vstupně-výstupní operace používat větší velikost stripe.</span><span class="sxs-lookup"><span data-stu-id="ce713-613">Whereas, for large sequential IO requests use a larger stripe size.</span></span> <span data-ttu-id="ce713-614">Získat doporučení velikost stripe pro aplikaci, že budete používat na Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-614">Find out the stripe size recommendations for the application you will be running on Premium Storage.</span></span> <span data-ttu-id="ce713-615">Pro systém SQL Server nakonfigurujte stripe velikosti 64KB pro úlohy OLTP a 256KB pro úlohy datového skladu.</span><span class="sxs-lookup"><span data-stu-id="ce713-615">For SQL Server, configure stripe size of 64KB for OLTP workloads and 256KB for data warehousing workloads.</span></span> <span data-ttu-id="ce713-616">V tématu [osvědčené postupy z hlediska výkonu pro SQL Server na virtuálních počítačích Azure](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) Další informace.</span><span class="sxs-lookup"><span data-stu-id="ce713-616">See [Performance best practices for SQL Server on Azure VMs](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) to learn more.</span></span>

> [!NOTE]
> <span data-ttu-id="ce713-617">Můžete společně rozkládají maximálně 32 prémiové disky úložiště na řady DS virtuálních počítačů a 64 prémiové disky úložiště na řadu GS virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="ce713-617">You can stripe together a maximum of 32 premium storage disks on a DS series VM and 64 premium storage disks on a GS series VM.</span></span>
>
>

## <a name="multi-threading"></a><span data-ttu-id="ce713-618">Více vláken</span><span class="sxs-lookup"><span data-stu-id="ce713-618">Multi-threading</span></span>
<span data-ttu-id="ce713-619">Azure Premium Storage platformy jako massively parallel určený.</span><span class="sxs-lookup"><span data-stu-id="ce713-619">Azure has designed Premium Storage platform to be massively parallel.</span></span> <span data-ttu-id="ce713-620">Vícevláknové aplikace proto dosahuje mnohem vyšší výkon než na jednovláknový aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-620">Therefore, a multi-threaded application achieves much higher performance than a single-threaded application.</span></span> <span data-ttu-id="ce713-621">Vícevláknové aplikace rozdělí si její úkoly napříč více vláken a zvyšuje efektivitu jeho spuštění s využitím virtuálních počítačů a diskové prostředky na maximum.</span><span class="sxs-lookup"><span data-stu-id="ce713-621">A multi-threaded application splits up its tasks across multiple threads and increases efficiency of its execution by utilizing the VM and disk resources to the maximum.</span></span>

<span data-ttu-id="ce713-622">Například pokud aplikace běží na jednom jádru virtuálního počítače pomocí dvěma vlákny, procesoru přepínat mezi dvěma vlákny k dosažení efektivitu.</span><span class="sxs-lookup"><span data-stu-id="ce713-622">For example, if your application is running on a single core VM using two threads, the CPU can switch between the two threads to achieve efficiency.</span></span> <span data-ttu-id="ce713-623">Při jedno vlákno čeká na disku vstupně-výstupní operace dokončit, procesoru přepnout na jiné vlákno.</span><span class="sxs-lookup"><span data-stu-id="ce713-623">While one thread is waiting on a disk IO to complete, the CPU can switch to the other thread.</span></span> <span data-ttu-id="ce713-624">Tímto způsobem můžete provádět dvěma vlákny více než jedno vlákno by.</span><span class="sxs-lookup"><span data-stu-id="ce713-624">In this way, two threads can accomplish more than a single thread would.</span></span> <span data-ttu-id="ce713-625">Pokud virtuální počítač má víc než jednoho jádra, další sníží běhu vzhledem k tomu, že každý základní paralelně můžete provádět úlohy.</span><span class="sxs-lookup"><span data-stu-id="ce713-625">If the VM has more than one core, it further decreases running time since each core can execute tasks in parallel.</span></span>

<span data-ttu-id="ce713-626">Nelze změnit způsob dodávaných aplikace implementuje jeden vláken nebo více vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-626">You may not be able to change the way an off-the-shelf application implements single threading or multi-threading.</span></span> <span data-ttu-id="ce713-627">SQL Server je třeba, umožňuje zpracovávat více procesorů a s více jádry.</span><span class="sxs-lookup"><span data-stu-id="ce713-627">For example, SQL Server is capable of handling multi-CPU and multi-core.</span></span> <span data-ttu-id="ce713-628">SQL Server však rozhodne, za jakých podmínek využije jeden nebo více podprocesů ke zpracování dotazu.</span><span class="sxs-lookup"><span data-stu-id="ce713-628">However, SQL Server decides under what conditions it will leverage one or more threads to process a query.</span></span> <span data-ttu-id="ce713-629">Může spouštět dotazy a vytvářet indexy používající více vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-629">It can run queries and build indexes using multi-threading.</span></span> <span data-ttu-id="ce713-630">Pro daný dotaz, který zahrnuje připojení velké tabulky a řazení dat před vrácením uživateli SQL Server pravděpodobně používat více vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-630">For a query that involves joining large tables and sorting data before returning to the user, SQL Server will likely use multiple threads.</span></span> <span data-ttu-id="ce713-631">Uživatel však nemůže řídit, jestli SQL Server provede dotaz pomocí jedním vláknem nebo více vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-631">However, a user cannot control whether SQL Server executes a query using a single thread or multiple threads.</span></span>

<span data-ttu-id="ce713-632">Existují nastavení konfigurace, které můžete změnit k ovlivnění to více vláken nebo paralelní zpracování aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-632">There are configuration settings that you can alter to influence this multi-threading or parallel processing of an application.</span></span> <span data-ttu-id="ce713-633">V případě systému SQL Server je třeba maximální úroveň paralelismus konfigurace.</span><span class="sxs-lookup"><span data-stu-id="ce713-633">For example, in case of SQL Server it is the maximum Degree of Parallelism configuration.</span></span> <span data-ttu-id="ce713-634">Toto nastavení nazývá MAXDOP, umožňuje nakonfigurovat maximální počet procesorů, které systém SQL Server můžete použít při paralelní zpracování.</span><span class="sxs-lookup"><span data-stu-id="ce713-634">This setting called MAXDOP, allows you to configure the maximum number of processors SQL Server can use when parallel processing.</span></span> <span data-ttu-id="ce713-635">MAXDOP můžete nakonfigurovat pro jednotlivé dotazy nebo operace indexu.</span><span class="sxs-lookup"><span data-stu-id="ce713-635">You can configure MAXDOP for individual queries or index operations.</span></span> <span data-ttu-id="ce713-636">To je užitečné, když chcete vyrovnávat prostředky systému pro kritické aplikace výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-636">This is beneficial when you want to balance resources of your system for a performance critical application.</span></span>

<span data-ttu-id="ce713-637">Řekněme například, že vaše aplikace pomocí systému SQL Server spouští velké dotazu a operace indexu ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="ce713-637">For example, say your application using SQL Server is executing a large query and an index operation at the same time.</span></span> <span data-ttu-id="ce713-638">Předpokládejme, že chtěli byste operace indexu jako další původce ve srovnání s velké dotazu.</span><span class="sxs-lookup"><span data-stu-id="ce713-638">Let us assume that you wanted the index operation to be more performant compared to the large query.</span></span> <span data-ttu-id="ce713-639">V takovém případě můžete nastavit hodnotu MAXDOP operace indexu vyšší než hodnota MAXDOP pro dotaz.</span><span class="sxs-lookup"><span data-stu-id="ce713-639">In such a case, you can set MAXDOP value of the index operation to be higher than the MAXDOP value for the query.</span></span> <span data-ttu-id="ce713-640">Tímto způsobem, SQL Server má větší počet procesorů, které můžete využít pro operaci indexu ve srovnání s počet procesorů, které můžete vyhradit pro velké dotaz.</span><span class="sxs-lookup"><span data-stu-id="ce713-640">This way, SQL Server has more number of processors that it can leverage for the index operation compared to the number of processors it can dedicate to the large query.</span></span> <span data-ttu-id="ce713-641">Pamatujte si, že se nebudete řídit počet vláken, který bude používat systém SQL Server pro každou operaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-641">Remember, you do not control the number of threads SQL Server will use for each operation.</span></span> <span data-ttu-id="ce713-642">Můžete řídit maximální počet procesorů, které je určené pro více vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-642">You can control the maximum number of processors being dedicated for multi-threading.</span></span>

<span data-ttu-id="ce713-643">Další informace o [stupňů paralelismus](https://technet.microsoft.com/library/ms188611.aspx) v systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ce713-643">Learn more about [Degrees of Parallelism](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span></span> <span data-ttu-id="ce713-644">Zjistěte taková nastavení, které ovlivňují více vláken ve vaší aplikace a jejich konfigurace za účelem optimalizace výkonu.</span><span class="sxs-lookup"><span data-stu-id="ce713-644">Find out such settings that influence multi-threading in your application and their configurations to optimize performance.</span></span>

## <a name="queue-depth"></a><span data-ttu-id="ce713-645">Hloubka fronty</span><span class="sxs-lookup"><span data-stu-id="ce713-645">Queue Depth</span></span>
<span data-ttu-id="ce713-646">Hloubka fronty nebo délka fronty nebo velikost fronty je počet čekajících požadavků vstupně-výstupní operace v systému.</span><span class="sxs-lookup"><span data-stu-id="ce713-646">The Queue Depth or Queue Length or Queue Size is the number of pending IO requests in the system.</span></span> <span data-ttu-id="ce713-647">Hodnota hloubku fronty určuje, kolik vstupně-výstupní operace aplikace můžete zarovnat, který bude zpracovávat disky úložiště.</span><span class="sxs-lookup"><span data-stu-id="ce713-647">The value of Queue Depth determines how many IO operations your application can line up, which the storage disks will be processing.</span></span> <span data-ttu-id="ce713-648">Ovlivňuje všechny ukazatele výkonu tři aplikace, které jsme popsané v této článku to IOP, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="ce713-648">It affects all the three application performance indicators that we discussed in this article viz., IOPS, Throughput and Latency.</span></span>

<span data-ttu-id="ce713-649">Fronty hloubkou a více vláken jsou úzce souvisejí.</span><span class="sxs-lookup"><span data-stu-id="ce713-649">Queue Depth and multi-threading are closely related.</span></span> <span data-ttu-id="ce713-650">Hloubka fronty hodnota udává, kolik více vláken může dosáhnout aplikací.</span><span class="sxs-lookup"><span data-stu-id="ce713-650">The Queue Depth value indicates how much multi-threading can be achieved by the application.</span></span> <span data-ttu-id="ce713-651">Pokud je hloubkou fronty velký, aplikace může provést další operace souběžně, jinými slovy, více vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-651">If the Queue Depth is large, application can execute more operations concurrently, in other words, more multi-threading.</span></span> <span data-ttu-id="ce713-652">Pokud je hloubkou fronty malé, i když je aplikace Vícevláknová, nebude mít dostatek požadavky srovnáte pro souběžné provádění.</span><span class="sxs-lookup"><span data-stu-id="ce713-652">If the Queue Depth is small, even though application is multi-threaded, it will not have enough requests lined up for concurrent execution.</span></span>

<span data-ttu-id="ce713-653">Obvykle se běžně dostupného aplikace neumožňují budete muset změnit hloubku fronty, protože pokud nastavte nesprávně provede další škodu než funkční.</span><span class="sxs-lookup"><span data-stu-id="ce713-653">Typically, off the shelf applications do not allow you to change the queue depth, because if set incorrectly it will do more harm than good.</span></span> <span data-ttu-id="ce713-654">Aplikace bude nastavit správné hodnotu hloubky fronty, abyste získali optimální výkon.</span><span class="sxs-lookup"><span data-stu-id="ce713-654">Applications will set the right value of queue depth to get the optimal performance.</span></span> <span data-ttu-id="ce713-655">Je ale důležité si uvědomit tento koncept, takže můžete řešit problémy s výkonem s vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="ce713-655">However, it is important to understand this concept so that you can troubleshoot performance issues with your application.</span></span> <span data-ttu-id="ce713-656">Můžete také sledovat důsledky hloubku fronty spuštěním testu typovou úlohou nástrojů v systému.</span><span class="sxs-lookup"><span data-stu-id="ce713-656">You can also observe the effects of queue depth by running benchmarking tools on your system.</span></span>

<span data-ttu-id="ce713-657">Některé aplikace zadejte nastavení k ovlivnění hloubku fronty.</span><span class="sxs-lookup"><span data-stu-id="ce713-657">Some applications provide settings to influence the Queue Depth.</span></span> <span data-ttu-id="ce713-658">Například nastavení MAXDOP (maximální stupně paralelního zpracování) v systému SQL Server popsané v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="ce713-658">For example, the MAXDOP (maximum degree of parallelism) setting in SQL Server explained in previous section.</span></span> <span data-ttu-id="ce713-659">MAXDOP je způsob, jak ovlivnit hloubka fronty a více vláken, i když přímo nemění hodnotu hloubky fronty systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ce713-659">MAXDOP is a way to influence Queue Depth and multi-threading, although it does not directly change the Queue Depth value of SQL Server.</span></span>

<span data-ttu-id="ce713-660">*Hloubka fronty vysoké*</span><span class="sxs-lookup"><span data-stu-id="ce713-660">*High Queue Depth*</span></span>  
<span data-ttu-id="ce713-661">Hloubka fronty vysoké řádků do více operací na disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-661">A high queue depth lines up more operations on the disk.</span></span> <span data-ttu-id="ce713-662">Na disku, bude znát další požadavek v příslušné fronty předem.</span><span class="sxs-lookup"><span data-stu-id="ce713-662">The disk knows the next request in its queue ahead of time.</span></span> <span data-ttu-id="ce713-663">V důsledku toho je disk můžete naplánovat operace předem a jejich zpracování v optimální pořadí.</span><span class="sxs-lookup"><span data-stu-id="ce713-663">Consequently, the disk can schedule operations ahead of time and process them in an optimal sequence.</span></span> <span data-ttu-id="ce713-664">Vzhledem k tomu, že aplikace odesílá další požadavky na disk, disk může zpracovat více paralelních IOs.</span><span class="sxs-lookup"><span data-stu-id="ce713-664">Since the application is sending more requests to the disk, the disk can process more parallel IOs.</span></span> <span data-ttu-id="ce713-665">Nakonec aplikace se nebude moci dosáhnout vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-665">Ultimately, the application will be able to achieve higher IOPS.</span></span> <span data-ttu-id="ce713-666">Vzhledem k tomu, že aplikace je zpracování více požadavků, také zvyšuje celkovou propustnost aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-666">Since application is processing more requests, the total Throughput of the application also increases.</span></span>

<span data-ttu-id="ce713-667">Obvykle se aplikace můžete dosáhnout maximální propustnost s 8-16 + nezpracovaných vstupně-výstupních na připojený disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-667">Typically, an application can achieve maximum Throughput with 8-16+ outstanding IOs per attached disk.</span></span> <span data-ttu-id="ce713-668">Pokud hloubce fronty, aplikace není dostatek IOs vkládání do systému a zpracuje menší množství v daném časovém období.</span><span class="sxs-lookup"><span data-stu-id="ce713-668">If a Queue Depth is one, application is not pushing enough IOs to the system, and it will process less amount of in a given period.</span></span> <span data-ttu-id="ce713-669">Jinými slovy méně propustnost.</span><span class="sxs-lookup"><span data-stu-id="ce713-669">In other words, less Throughput.</span></span>

<span data-ttu-id="ce713-670">Například v systému SQL Server, nastavení hodnoty MAXDOP dotaz, který "4" informuje systému SQL Server, až čtyři jader může použít k provedení dotazu.</span><span class="sxs-lookup"><span data-stu-id="ce713-670">For example, in SQL Server, setting the MAXDOP value for a query to "4" informs SQL Server that it can use up to four cores to execute the query.</span></span> <span data-ttu-id="ce713-671">SQL Server lze určit, co je nejlepší hodnotu hloubky fronty a počet jader pro spuštění dotazu.</span><span class="sxs-lookup"><span data-stu-id="ce713-671">SQL Server will determine what is best queue depth value and the number of cores for the query execution.</span></span>

<span data-ttu-id="ce713-672">*Optimální hloubky fronty*</span><span class="sxs-lookup"><span data-stu-id="ce713-672">*Optimal Queue Depth*</span></span>  
<span data-ttu-id="ce713-673">Fronty velmi vysokou hodnotu hloubky má také jeho nevýhody.</span><span class="sxs-lookup"><span data-stu-id="ce713-673">Very high queue depth value also has its drawbacks.</span></span> <span data-ttu-id="ce713-674">Pokud hodnotu hloubky fronty je příliš vysoká, aplikace se pokusí jednotka velmi vysokou IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-674">If queue depth value is too high, the application will try to drive very high IOPS.</span></span> <span data-ttu-id="ce713-675">Pokud aplikace obsahuje trvalé disků se dostatečná zřízené IOPS, může to mít negativní vliv latencí aplikací.</span><span class="sxs-lookup"><span data-stu-id="ce713-675">Unless application has persistent disks with sufficient provisioned IOPS, this can negatively affect application latencies.</span></span> <span data-ttu-id="ce713-676">Následující vzorec znázorňuje vztah mezi IOPS, latence a hloubku fronty.</span><span class="sxs-lookup"><span data-stu-id="ce713-676">Following formula shows the relationship between IOPS, Latency and Queue Depth.</span></span>  
    ![](media/storage-premium-storage-performance/image6.png)

<span data-ttu-id="ce713-677">Hloubka fronty byste neměli konfigurovat žádné vysokou hodnotu, ale na optimální hodnotu, která může poskytnout dostatek IOPS pro aplikaci, aniž by to ovlivnilo latenci.</span><span class="sxs-lookup"><span data-stu-id="ce713-677">You should not configure Queue Depth to any high value, but to an optimal value, which can deliver enough IOPS for the application without affecting latencies.</span></span> <span data-ttu-id="ce713-678">Například pokud latence aplikace musí být 1 milisekundu, hloubku fronty, které jsou potřebné k dosažení 5 000 IOPS se hloubka fronty = 5000 x 0,001 = 5.</span><span class="sxs-lookup"><span data-stu-id="ce713-678">For example, if the application latency needs to be 1 millisecond, the Queue Depth required to achieve 5,000 IOPS is, QD = 5000 x 0.001 = 5.</span></span>

<span data-ttu-id="ce713-679">*Hloubka fronty pro prokládané svazek*</span><span class="sxs-lookup"><span data-stu-id="ce713-679">*Queue Depth for Striped Volume*</span></span>  
<span data-ttu-id="ce713-680">Pro svazek prokládané udržovat tak, aby každý disk má ve špičce hloubce fronty jednotlivě hloubce fronty dostatečně vysoký.</span><span class="sxs-lookup"><span data-stu-id="ce713-680">For a striped volume, maintain a high enough queue depth such that, every disk has a peak queue depth individually.</span></span> <span data-ttu-id="ce713-681">Představte si třeba aplikace, který by vložil hloubce fronty 2 a v stripe je 4 disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-681">For example, consider an application that pushes a queue depth of 2 and there are 4 disks in the stripe.</span></span> <span data-ttu-id="ce713-682">Dva požadavky vstupně-výstupní operace přejde na dva disky a zbývající dva disky bude nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-682">The two IO requests will go to two disks and remaining two disks will be idle.</span></span> <span data-ttu-id="ce713-683">Proto konfigurovat hloubku fronty tak, aby všechny disky může být zaneprázdněn.</span><span class="sxs-lookup"><span data-stu-id="ce713-683">Therefore, configure the queue depth such that all the disks can be busy.</span></span> <span data-ttu-id="ce713-684">Vzorec níže ukazuje, jak určit hloubku fronty prokládané svazky.</span><span class="sxs-lookup"><span data-stu-id="ce713-684">Formula below shows how to determine the queue depth of striped volumes.</span></span>  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a><span data-ttu-id="ce713-685">Omezování</span><span class="sxs-lookup"><span data-stu-id="ce713-685">Throttling</span></span>
<span data-ttu-id="ce713-686">Azure Premium Storage zřizuje zadaný počet IOPS a propustnost v závislosti na velikosti virtuálních počítačů a velikosti disků, které zvolíte.</span><span class="sxs-lookup"><span data-stu-id="ce713-686">Azure Premium Storage provisions specified number of IOPS and Throughput depending on the VM sizes and disk sizes you choose.</span></span> <span data-ttu-id="ce713-687">Kdykoliv se aplikace pokusí o jednotka IOPS nebo propustnosti nad těchto omezení co virtuálního počítače nebo disk může zpracovat, budou omezení úložiště Premium ho.</span><span class="sxs-lookup"><span data-stu-id="ce713-687">Anytime your application tries to drive IOPS or Throughput above these limits of what the VM or disk can handle, Premium Storage will throttle it.</span></span> <span data-ttu-id="ce713-688">To manifesty ve formě snížení výkonu ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-688">This manifests in the form of degraded performance in your application.</span></span> <span data-ttu-id="ce713-689">To může znamenat vyšší latence, snížit propustnost nebo snižte IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-689">This can mean higher latency, lower Throughput or lower IOPS.</span></span> <span data-ttu-id="ce713-690">Pokud Storage úrovně Premium není omezení, vaše aplikace může úplně nezdaří podle překročení, jaké jsou schopné dosáhnout její prostředky.</span><span class="sxs-lookup"><span data-stu-id="ce713-690">If Premium Storage does not throttle, your application could completely fail by exceeding what its resources are capable of achieving.</span></span> <span data-ttu-id="ce713-691">Tak aby se zabránilo problémům s výkonem kvůli omezování, vždy zřídit dostatečné prostředky pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-691">So, to avoid performance issues due to throttling, always provision sufficient resources for your application.</span></span> <span data-ttu-id="ce713-692">Vzít v úvahu, co jsme probírali v částech velikosti disku výše a velikosti virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="ce713-692">Take into consideration what we discussed in the VM sizes and Disk sizes sections above.</span></span> <span data-ttu-id="ce713-693">Srovnávací testy je nejlepší způsob, jak zjistit, jaké prostředky, je nutné kvůli hostování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-693">Benchmarking is the best way to figure out what resources you will need to host your application.</span></span>

## <a name="benchmarking"></a><span data-ttu-id="ce713-694">Srovnávací testy</span><span class="sxs-lookup"><span data-stu-id="ce713-694">Benchmarking</span></span>
<span data-ttu-id="ce713-695">Srovnávací testy je proces simulaci různé úlohy ve vaší aplikaci a měření výkonu aplikace pro jednotlivá zatížení.</span><span class="sxs-lookup"><span data-stu-id="ce713-695">Benchmarking is the process of simulating different workloads on your application and measuring the application performance for each workload.</span></span> <span data-ttu-id="ce713-696">Pomocí kroků popsaných v předchozí části, jste shromáždili na požadavcích na výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce713-696">Using the steps described in an earlier section, you have gathered the application performance requirements.</span></span> <span data-ttu-id="ce713-697">Při spuštění testu typovou úlohou nástroje na virtuální počítače, který je hostitelem aplikace, můžete určit úrovně výkonu, které aplikace můžete dosáhnout Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="ce713-697">By running benchmarking tools on the VMs hosting the application, you can determine the performance levels that your application can achieve with Premium Storage.</span></span> <span data-ttu-id="ce713-698">V této části Poskytujeme vám příklady srovnávací testy standardní virtuální počítač DS14 zřizovat s disky Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="ce713-698">In this section, we provide you examples of benchmarking a Standard DS14 VM provisioned with Azure Premium Storage disks.</span></span>

<span data-ttu-id="ce713-699">Použili jsme běžných testu typovou úlohou nástrojů Iometer a FIO, pro systém Windows a Linux v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="ce713-699">We have used common benchmarking tools Iometer and FIO, for Windows and Linux respectively.</span></span> <span data-ttu-id="ce713-700">Tyto nástroje vytvořit více vláken simulaci provozní jako zatížení a měřit výkon systému.</span><span class="sxs-lookup"><span data-stu-id="ce713-700">These tools spawn multiple threads simulating a production like workload, and measure the system performance.</span></span> <span data-ttu-id="ce713-701">Pomocí nástrojů můžete také nakonfigurovat parametry jako velikost a fronty bloku hloubku, který obvykle se nelze změnit pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ce713-701">Using the tools you can also configure parameters like block size and queue depth, which you normally cannot change for an application.</span></span> <span data-ttu-id="ce713-702">To vám dává větší flexibilitu při jednotka maximální výkon v měřítko zřizovat s prémiové disky pro různé typy úloh aplikací virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="ce713-702">This gives you more flexibility to drive the maximum performance on a high scale VM provisioned with premium disks for different types of application workloads.</span></span> <span data-ttu-id="ce713-703">Další informace o jednotlivých vzorová analytická pomůcka navštivte [Iometer](http://www.iometer.org/) a [FIO](http://freecode.com/projects/fio).</span><span class="sxs-lookup"><span data-stu-id="ce713-703">To learn more about each benchmarking tool visit [Iometer](http://www.iometer.org/) and [FIO](http://freecode.com/projects/fio).</span></span>

<span data-ttu-id="ce713-704">Podle níže uvedených příkladech, vytvořte standardní DS14 virtuální počítač a připojte 11 Storage úrovně Premium disky na virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="ce713-704">To follow the examples below, create a Standard DS14 VM and attach 11 Premium Storage disks to the VM.</span></span> <span data-ttu-id="ce713-705">11 disků nakonfigurujte 10 disky s hostitelem ukládání do mezipaměti jako "Žádný" a rozkládají je do svazku názvem NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="ce713-705">Of the 11 disks, configure 10 disks with host caching as "None" and stripe them into a volume called NoCacheWrites.</span></span> <span data-ttu-id="ce713-706">Konfigurace hostitele ukládání do mezipaměti jako "Jen pro čtení" na zbývající disk a vytvořte svazek volána čtení z mezipaměti s tento disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-706">Configure host caching as "ReadOnly" on the remaining disk and create a volume called CacheReads with this disk.</span></span> <span data-ttu-id="ce713-707">Pomocí tohoto nastavení, bude moci zobrazit maximální výkon čtení a zápis z standardní DS14 virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="ce713-707">Using this setup, you will be able to see the maximum Read and Write performance from a Standard DS14 VM.</span></span> <span data-ttu-id="ce713-708">Podrobné informace o postupu vytvoření virtuálního počítače DS14 s prémiové disky, přejděte na [vytvoření a použití účtu Premium Storage pro datový disk virtuálního počítače](../storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="ce713-708">For detailed steps about creating a DS14 VM with premium disks, go to [Create and use a Premium Storage account for a virtual machine data disk](../storage-premium-storage.md).</span></span>

<span data-ttu-id="ce713-709">*Zahájení práce s mezipaměti*</span><span class="sxs-lookup"><span data-stu-id="ce713-709">*Warming up the Cache*</span></span>  
<span data-ttu-id="ce713-710">Disk s použití mezipaměti u hostitele jen pro čtení budou moci poskytnout IOPS vyšší než maximální disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-710">The disk with ReadOnly host caching will be able to give higher IOPS than the disk limit.</span></span> <span data-ttu-id="ce713-711">Chcete-li získat tuto maximální rychlost čtení z mezipaměti hostitele, nejprve je musí tedy mezipaměti tento disk.</span><span class="sxs-lookup"><span data-stu-id="ce713-711">To get this maximum read performance from the host cache, first you must warm up the cache of this disk.</span></span> <span data-ttu-id="ce713-712">Tím se zajistí, že čtení IOs, které vzorová analytická pomůcka vyvolají na čtení z mezipaměti svazku ve skutečnosti přístupů do mezipaměti a nikoli disk přímo.</span><span class="sxs-lookup"><span data-stu-id="ce713-712">This ensures that the Read IOs which benchmarking tool will drive on CacheReads volume actually hits the cache and not the disk directly.</span></span> <span data-ttu-id="ce713-713">Výsledek přístupů do mezipaměti v další IOPS z jedné mezipaměti povolena disku.</span><span class="sxs-lookup"><span data-stu-id="ce713-713">The cache hits result in additional IOPS from the single cache enabled disk.</span></span>

> <span data-ttu-id="ce713-714">**Důležité:**</span><span class="sxs-lookup"><span data-stu-id="ce713-714">**Important:**</span></span>  
> <span data-ttu-id="ce713-715">Mezipaměti můžete musí tedy před spuštěním srovnávací testy, pokaždé, když je virtuální počítač restartovat.</span><span class="sxs-lookup"><span data-stu-id="ce713-715">You must warm up the cache before running benchmarking, every time VM is rebooted.</span></span>
>
>

#### <a name="iometer"></a><span data-ttu-id="ce713-716">Iometer</span><span class="sxs-lookup"><span data-stu-id="ce713-716">Iometer</span></span>
<span data-ttu-id="ce713-717">[Stáhněte si nástroj Iometer](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) ve virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="ce713-717">[Download the Iometer tool](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) on the VM.</span></span>

<span data-ttu-id="ce713-718">*Testovací soubor*</span><span class="sxs-lookup"><span data-stu-id="ce713-718">*Test file*</span></span>  
<span data-ttu-id="ce713-719">Iometer používá testovací soubor, který je uložený na svazku, na kterém budete spouštět testu typovou úlohou test.</span><span class="sxs-lookup"><span data-stu-id="ce713-719">Iometer uses a test file that is stored on the volume on which you will run the benchmarking test.</span></span> <span data-ttu-id="ce713-720">Ho jednotky čte a zapisuje na tento testovací soubor k měření disku IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-720">It drives Reads and Writes on this test file to measure the disk IOPS and Throughput.</span></span> <span data-ttu-id="ce713-721">Iometer vytvoří tento testovací soubor, pokud jste nezadali.</span><span class="sxs-lookup"><span data-stu-id="ce713-721">Iometer creates this test file if you have not provided one.</span></span> <span data-ttu-id="ce713-722">Vytvořte 200GB testovací soubor s názvem iobw.tst na čtení z mezipaměti a NoCacheWrites svazky.</span><span class="sxs-lookup"><span data-stu-id="ce713-722">Create a 200GB test file called iobw.tst on the CacheReads and NoCacheWrites volumes.</span></span>

<span data-ttu-id="ce713-723">*Specifikace přístup*</span><span class="sxs-lookup"><span data-stu-id="ce713-723">*Access Specifications*</span></span>  
<span data-ttu-id="ce713-724">Specifikace, požádat o vstupně-výstupní operace velikost % pro čtení a zápis, % náhodných nebo sekvenčních jsou nakonfigurovány pomocí karty "Specifikace Access" v Iometer.</span><span class="sxs-lookup"><span data-stu-id="ce713-724">The specifications, request IO size, % read/write, % random/sequential are configured using the "Access Specifications" tab in Iometer.</span></span> <span data-ttu-id="ce713-725">Vytvořte specifikaci přístup pro jednotlivé scénáře popsané dole.</span><span class="sxs-lookup"><span data-stu-id="ce713-725">Create an access specification for each of the scenarios described below.</span></span> <span data-ttu-id="ce713-726">Vytvoření specifikace přístup a "Uložit" s odpovídajícím názvem jako – RandomWrites\_8 kB, RandomReads\_8 kB.</span><span class="sxs-lookup"><span data-stu-id="ce713-726">Create the access specifications and "Save" with an appropriate name like – RandomWrites\_8K, RandomReads\_8K.</span></span> <span data-ttu-id="ce713-727">Vyberte odpovídající specifikaci při spuštění scénáře testu.</span><span class="sxs-lookup"><span data-stu-id="ce713-727">Select the corresponding specification when running the test scenario.</span></span>

<span data-ttu-id="ce713-728">Níže je uveden příklad specifikací přístup pro scénář maximální IOPS zápisu</span><span class="sxs-lookup"><span data-stu-id="ce713-728">An example of access specifications for maximum Write IOPS scenario is shown below,</span></span>  
    ![](media/storage-premium-storage-performance/image8.png)

<span data-ttu-id="ce713-729">*Specifikace maximální IOPS testu*</span><span class="sxs-lookup"><span data-stu-id="ce713-729">*Maximum IOPS Test Specifications*</span></span>  
<span data-ttu-id="ce713-730">K předvedení maximální IOPs, použijte menší velikost žádosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-730">To demonstrate maximum IOPs, use smaller request size.</span></span> <span data-ttu-id="ce713-731">Použijte 8 kb velikost požadavku a vytvoření specifikace náhodných zápisů a čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-731">Use 8K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="ce713-732">Specifikace přístup</span><span class="sxs-lookup"><span data-stu-id="ce713-732">Access Specification</span></span> | <span data-ttu-id="ce713-733">Velikost požadavku</span><span class="sxs-lookup"><span data-stu-id="ce713-733">Request size</span></span> | <span data-ttu-id="ce713-734">Náhodné %</span><span class="sxs-lookup"><span data-stu-id="ce713-734">Random %</span></span> | <span data-ttu-id="ce713-735">% Pro čtení</span><span class="sxs-lookup"><span data-stu-id="ce713-735">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-736">RandomWrites\_8 kb</span><span class="sxs-lookup"><span data-stu-id="ce713-736">RandomWrites\_8K</span></span> |<span data-ttu-id="ce713-737">8 KB</span><span class="sxs-lookup"><span data-stu-id="ce713-737">8K</span></span> |<span data-ttu-id="ce713-738">100</span><span class="sxs-lookup"><span data-stu-id="ce713-738">100</span></span> |<span data-ttu-id="ce713-739">0</span><span class="sxs-lookup"><span data-stu-id="ce713-739">0</span></span> |
| <span data-ttu-id="ce713-740">RandomReads\_8 kb</span><span class="sxs-lookup"><span data-stu-id="ce713-740">RandomReads\_8K</span></span> |<span data-ttu-id="ce713-741">8 KB</span><span class="sxs-lookup"><span data-stu-id="ce713-741">8K</span></span> |<span data-ttu-id="ce713-742">100</span><span class="sxs-lookup"><span data-stu-id="ce713-742">100</span></span> |<span data-ttu-id="ce713-743">100</span><span class="sxs-lookup"><span data-stu-id="ce713-743">100</span></span> |

<span data-ttu-id="ce713-744">*Specifikace maximální propustnost testu*</span><span class="sxs-lookup"><span data-stu-id="ce713-744">*Maximum Throughput Test Specifications*</span></span>  
<span data-ttu-id="ce713-745">K předvedení maximální propustnost, použijte větší velikost žádosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-745">To demonstrate maximum Throughput, use larger request size.</span></span> <span data-ttu-id="ce713-746">Použijte 64 tisíc velikost požadavku a vytvoření specifikace náhodných zápisů a čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-746">Use 64K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="ce713-747">Specifikace přístup</span><span class="sxs-lookup"><span data-stu-id="ce713-747">Access Specification</span></span> | <span data-ttu-id="ce713-748">Velikost požadavku</span><span class="sxs-lookup"><span data-stu-id="ce713-748">Request size</span></span> | <span data-ttu-id="ce713-749">Náhodné %</span><span class="sxs-lookup"><span data-stu-id="ce713-749">Random %</span></span> | <span data-ttu-id="ce713-750">% Pro čtení</span><span class="sxs-lookup"><span data-stu-id="ce713-750">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-751">RandomWrites\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="ce713-751">RandomWrites\_64K</span></span> |<span data-ttu-id="ce713-752">64 KB</span><span class="sxs-lookup"><span data-stu-id="ce713-752">64K</span></span> |<span data-ttu-id="ce713-753">100</span><span class="sxs-lookup"><span data-stu-id="ce713-753">100</span></span> |<span data-ttu-id="ce713-754">0</span><span class="sxs-lookup"><span data-stu-id="ce713-754">0</span></span> |
| <span data-ttu-id="ce713-755">RandomReads\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="ce713-755">RandomReads\_64K</span></span> |<span data-ttu-id="ce713-756">64 KB</span><span class="sxs-lookup"><span data-stu-id="ce713-756">64K</span></span> |<span data-ttu-id="ce713-757">100</span><span class="sxs-lookup"><span data-stu-id="ce713-757">100</span></span> |<span data-ttu-id="ce713-758">100</span><span class="sxs-lookup"><span data-stu-id="ce713-758">100</span></span> |

<span data-ttu-id="ce713-759">*Spouštění Iometer testu*</span><span class="sxs-lookup"><span data-stu-id="ce713-759">*Running the Iometer Test*</span></span>  
<span data-ttu-id="ce713-760">Proveďte následující postup tedy mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-760">Perform the steps below to warm up cache</span></span>

1. <span data-ttu-id="ce713-761">Vytvořte dva specifikace přístup s hodnoty zobrazené níže,</span><span class="sxs-lookup"><span data-stu-id="ce713-761">Create two access specifications with values shown below,</span></span>

   | <span data-ttu-id="ce713-762">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="ce713-762">Name</span></span> | <span data-ttu-id="ce713-763">Velikost požadavku</span><span class="sxs-lookup"><span data-stu-id="ce713-763">Request size</span></span> | <span data-ttu-id="ce713-764">Náhodné %</span><span class="sxs-lookup"><span data-stu-id="ce713-764">Random %</span></span> | <span data-ttu-id="ce713-765">% Pro čtení</span><span class="sxs-lookup"><span data-stu-id="ce713-765">Read %</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="ce713-766">RandomWrites\_1 MB</span><span class="sxs-lookup"><span data-stu-id="ce713-766">RandomWrites\_1MB</span></span> |<span data-ttu-id="ce713-767">1MB</span><span class="sxs-lookup"><span data-stu-id="ce713-767">1MB</span></span> |<span data-ttu-id="ce713-768">100</span><span class="sxs-lookup"><span data-stu-id="ce713-768">100</span></span> |<span data-ttu-id="ce713-769">0</span><span class="sxs-lookup"><span data-stu-id="ce713-769">0</span></span> |
   | <span data-ttu-id="ce713-770">RandomReads\_1 MB</span><span class="sxs-lookup"><span data-stu-id="ce713-770">RandomReads\_1MB</span></span> |<span data-ttu-id="ce713-771">1MB</span><span class="sxs-lookup"><span data-stu-id="ce713-771">1MB</span></span> |<span data-ttu-id="ce713-772">100</span><span class="sxs-lookup"><span data-stu-id="ce713-772">100</span></span> |<span data-ttu-id="ce713-773">100</span><span class="sxs-lookup"><span data-stu-id="ce713-773">100</span></span> |
2. <span data-ttu-id="ce713-774">Spusťte test Iometer pro inicializaci mezipaměti disku s následujícími parametry.</span><span class="sxs-lookup"><span data-stu-id="ce713-774">Run the Iometer test for initializing cache disk with following parameters.</span></span> <span data-ttu-id="ce713-775">Pomocí tří pracovních vláken pro cílový svazek a hloubce fronty 128.</span><span class="sxs-lookup"><span data-stu-id="ce713-775">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="ce713-776">Nastavte "Běh" doba trvání testu na 2hrs na kartě "Testování instalace".</span><span class="sxs-lookup"><span data-stu-id="ce713-776">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="ce713-777">Scénář</span><span class="sxs-lookup"><span data-stu-id="ce713-777">Scenario</span></span> | <span data-ttu-id="ce713-778">Cílový svazek</span><span class="sxs-lookup"><span data-stu-id="ce713-778">Target Volume</span></span> | <span data-ttu-id="ce713-779">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="ce713-779">Name</span></span> | <span data-ttu-id="ce713-780">Doba trvání</span><span class="sxs-lookup"><span data-stu-id="ce713-780">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="ce713-781">Inicializovat Disk mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-781">Initialize Cache Disk</span></span> |<span data-ttu-id="ce713-782">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-782">CacheReads</span></span> |<span data-ttu-id="ce713-783">RandomWrites\_1 MB</span><span class="sxs-lookup"><span data-stu-id="ce713-783">RandomWrites\_1MB</span></span> |<span data-ttu-id="ce713-784">2hrs</span><span class="sxs-lookup"><span data-stu-id="ce713-784">2hrs</span></span> |
3. <span data-ttu-id="ce713-785">Spusťte test Iometer pro zahájení práce s disku mezipaměti s následujícími parametry.</span><span class="sxs-lookup"><span data-stu-id="ce713-785">Run the Iometer test for warming up cache disk with following parameters.</span></span> <span data-ttu-id="ce713-786">Pomocí tří pracovních vláken pro cílový svazek a hloubce fronty 128.</span><span class="sxs-lookup"><span data-stu-id="ce713-786">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="ce713-787">Nastavte "Běh" doba trvání testu na 2hrs na kartě "Testování instalace".</span><span class="sxs-lookup"><span data-stu-id="ce713-787">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="ce713-788">Scénář</span><span class="sxs-lookup"><span data-stu-id="ce713-788">Scenario</span></span> | <span data-ttu-id="ce713-789">Cílový svazek</span><span class="sxs-lookup"><span data-stu-id="ce713-789">Target Volume</span></span> | <span data-ttu-id="ce713-790">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="ce713-790">Name</span></span> | <span data-ttu-id="ce713-791">Doba trvání</span><span class="sxs-lookup"><span data-stu-id="ce713-791">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="ce713-792">Horké až diskové mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-792">Warm up Cache Disk</span></span> |<span data-ttu-id="ce713-793">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-793">CacheReads</span></span> |<span data-ttu-id="ce713-794">RandomReads\_1 MB</span><span class="sxs-lookup"><span data-stu-id="ce713-794">RandomReads\_1MB</span></span> |<span data-ttu-id="ce713-795">2hrs</span><span class="sxs-lookup"><span data-stu-id="ce713-795">2hrs</span></span> |

<span data-ttu-id="ce713-796">Po diskové mezipaměti je provozní teplotu, pokračujte testovací scénáře uvedené níže.</span><span class="sxs-lookup"><span data-stu-id="ce713-796">After cache disk is warmed up, proceed with the test scenarios listed below.</span></span> <span data-ttu-id="ce713-797">Pokud chcete spustit Iometer test, použijte aspoň tři pracovních vláken pro **každý** cíle svazku.</span><span class="sxs-lookup"><span data-stu-id="ce713-797">To run the Iometer test, use at least three worker threads for **each** target volume.</span></span> <span data-ttu-id="ce713-798">Pro každý pracovní vlákno vyberte cílový svazek, nastavte hloubku fronty a vyberte jednu z uložené testovací specifikace, jak je znázorněno v následující tabulce, ke spuštění odpovídající scénáře testu.</span><span class="sxs-lookup"><span data-stu-id="ce713-798">For each worker thread, select the target volume, set queue depth and select one of the saved test specifications, as shown in the table below, to run the corresponding test scenario.</span></span> <span data-ttu-id="ce713-799">V tabulce také jsou očekávané výsledky pro IOPS a propustnost při spuštění tyto testy.</span><span class="sxs-lookup"><span data-stu-id="ce713-799">The table also shows expected results for IOPS and Throughput when running these tests.</span></span> <span data-ttu-id="ce713-800">Ve všech scénářích se používá malé velikost vstupně-výstupní operace 8 kB a hloubce fronty vysoké 128.</span><span class="sxs-lookup"><span data-stu-id="ce713-800">For all scenarios, a small IO size of 8KB and a high queue depth of 128 is used.</span></span>

| <span data-ttu-id="ce713-801">Testovací scénář</span><span class="sxs-lookup"><span data-stu-id="ce713-801">Test Scenario</span></span> | <span data-ttu-id="ce713-802">Cílový svazek</span><span class="sxs-lookup"><span data-stu-id="ce713-802">Target Volume</span></span> | <span data-ttu-id="ce713-803">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="ce713-803">Name</span></span> | <span data-ttu-id="ce713-804">výsledek</span><span class="sxs-lookup"><span data-stu-id="ce713-804">Result</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ce713-805">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-805">Max.</span></span> <span data-ttu-id="ce713-806">Čtení IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-806">Read IOPS</span></span> |<span data-ttu-id="ce713-807">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-807">CacheReads</span></span> |<span data-ttu-id="ce713-808">RandomWrites\_8 kb</span><span class="sxs-lookup"><span data-stu-id="ce713-808">RandomWrites\_8K</span></span> |<span data-ttu-id="ce713-809">50 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-809">50,000 IOPS</span></span> |
| <span data-ttu-id="ce713-810">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-810">Max.</span></span> <span data-ttu-id="ce713-811">Zápis IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-811">Write IOPS</span></span> |<span data-ttu-id="ce713-812">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="ce713-812">NoCacheWrites</span></span> |<span data-ttu-id="ce713-813">RandomReads\_8 kb</span><span class="sxs-lookup"><span data-stu-id="ce713-813">RandomReads\_8K</span></span> |<span data-ttu-id="ce713-814">64 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-814">64,000 IOPS</span></span> |
| <span data-ttu-id="ce713-815">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-815">Max.</span></span> <span data-ttu-id="ce713-816">Součet IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-816">Combined IOPS</span></span> |<span data-ttu-id="ce713-817">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-817">CacheReads</span></span> |<span data-ttu-id="ce713-818">RandomWrites\_8 kb</span><span class="sxs-lookup"><span data-stu-id="ce713-818">RandomWrites\_8K</span></span> |<span data-ttu-id="ce713-819">100 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="ce713-819">100,000 IOPS</span></span> |
| <span data-ttu-id="ce713-820">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="ce713-820">NoCacheWrites</span></span> |<span data-ttu-id="ce713-821">RandomReads\_8 kb</span><span class="sxs-lookup"><span data-stu-id="ce713-821">RandomReads\_8K</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="ce713-822">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-822">Max.</span></span> <span data-ttu-id="ce713-823">Čtení MB/s</span><span class="sxs-lookup"><span data-stu-id="ce713-823">Read MB/sec</span></span> |<span data-ttu-id="ce713-824">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-824">CacheReads</span></span> |<span data-ttu-id="ce713-825">RandomWrites\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="ce713-825">RandomWrites\_64K</span></span> |<span data-ttu-id="ce713-826">524 MB/s</span><span class="sxs-lookup"><span data-stu-id="ce713-826">524 MB/sec</span></span> |
| <span data-ttu-id="ce713-827">Max.</span><span class="sxs-lookup"><span data-stu-id="ce713-827">Max.</span></span> <span data-ttu-id="ce713-828">Zápis MB/s</span><span class="sxs-lookup"><span data-stu-id="ce713-828">Write MB/sec</span></span> |<span data-ttu-id="ce713-829">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="ce713-829">NoCacheWrites</span></span> |<span data-ttu-id="ce713-830">RandomReads\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="ce713-830">RandomReads\_64K</span></span> |<span data-ttu-id="ce713-831">524 MB/s</span><span class="sxs-lookup"><span data-stu-id="ce713-831">524 MB/sec</span></span> |
| <span data-ttu-id="ce713-832">Kombinovaná MB/s</span><span class="sxs-lookup"><span data-stu-id="ce713-832">Combined MB/sec</span></span> |<span data-ttu-id="ce713-833">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="ce713-833">CacheReads</span></span> |<span data-ttu-id="ce713-834">RandomWrites\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="ce713-834">RandomWrites\_64K</span></span> |<span data-ttu-id="ce713-835">1 000 MB/s</span><span class="sxs-lookup"><span data-stu-id="ce713-835">1000 MB/sec</span></span> |
| <span data-ttu-id="ce713-836">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="ce713-836">NoCacheWrites</span></span> |<span data-ttu-id="ce713-837">RandomReads\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="ce713-837">RandomReads\_64K</span></span> | &nbsp; | &nbsp; |

<span data-ttu-id="ce713-838">Tady jsou snímky obrazovky Iometer výsledky testu pro kombinované scénáře IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="ce713-838">Below are screenshots of the Iometer test results for combined IOPS and Throughput scenarios.</span></span>

<span data-ttu-id="ce713-839">*Kombinovaná čtení a zápisy maximální IOPS.*</span><span class="sxs-lookup"><span data-stu-id="ce713-839">*Combined Reads and Writes Maximum IOPS*</span></span>  
![](media/storage-premium-storage-performance/image9.png)

<span data-ttu-id="ce713-840">*Kombinovaná čtení a zápisy maximální propustnost*</span><span class="sxs-lookup"><span data-stu-id="ce713-840">*Combined Reads and Writes Maximum Throughput*</span></span>  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a><span data-ttu-id="ce713-841">FIO</span><span class="sxs-lookup"><span data-stu-id="ce713-841">FIO</span></span>
<span data-ttu-id="ce713-842">FIO je nástroj oblíbených do testu výkonnosti úložiště na virtuálních počítačích systému Linux.</span><span class="sxs-lookup"><span data-stu-id="ce713-842">FIO is a popular tool to benchmark storage on the Linux VMs.</span></span> <span data-ttu-id="ce713-843">Má flexibilitu a vyberte jiný vstupně-výstupní operace velikostí, sekvenční nebo náhodné čtení a zápisu.</span><span class="sxs-lookup"><span data-stu-id="ce713-843">It has the flexibility to select different IO sizes, sequential or random reads and writes.</span></span> <span data-ttu-id="ce713-844">Se vytvoří pracovní vlákna a procesy provést zadaný vstupně-výstupních operací.</span><span class="sxs-lookup"><span data-stu-id="ce713-844">It spawns worker threads or processes to perform the specified I/O operations.</span></span> <span data-ttu-id="ce713-845">Zadaný typ vstupně-výstupních operací každý pracovní vlákno musíte provést pomocí úlohy souborů.</span><span class="sxs-lookup"><span data-stu-id="ce713-845">You can specify the type of I/O operations each worker thread must perform using job files.</span></span> <span data-ttu-id="ce713-846">Jsme vytvořili jeden soubor úlohy pro scénář předvedené v příkladech níže.</span><span class="sxs-lookup"><span data-stu-id="ce713-846">We created one job file per scenario illustrated in the examples below.</span></span> <span data-ttu-id="ce713-847">Specifikace v těchto souborech úlohy otestovat různé úlohy běžící na Storage úrovně Premium, můžete změnit.</span><span class="sxs-lookup"><span data-stu-id="ce713-847">You can change the specifications in these job files to benchmark different workloads running on Premium Storage.</span></span> <span data-ttu-id="ce713-848">V příkladech se používá standardní DS 14 virtuální počítač spuštěný **Ubuntu**.</span><span class="sxs-lookup"><span data-stu-id="ce713-848">In the examples, we are using a Standard DS 14 VM running **Ubuntu**.</span></span> <span data-ttu-id="ce713-849">Použít stejné nastavení, které jsou popsané na začátku [srovnávací testy části](#Benchmarking) a záložním vytvoří mezipaměť před spuštěním testů typovou úlohou.</span><span class="sxs-lookup"><span data-stu-id="ce713-849">Use the same setup described in the beginning of the [Benchmarking section](#Benchmarking) and warm up the cache before running the benchmarking tests.</span></span>

<span data-ttu-id="ce713-850">Než začnete, [stáhnout FIO](https://github.com/axboe/fio) a nainstalujte ji na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="ce713-850">Before you begin, [download FIO](https://github.com/axboe/fio) and install it on your virtual machine.</span></span>

<span data-ttu-id="ce713-851">Spusťte následující příkaz pro Ubuntu,</span><span class="sxs-lookup"><span data-stu-id="ce713-851">Run the following command for Ubuntu,</span></span>

```
apt-get install fio
```

<span data-ttu-id="ce713-852">Pro řízení operace čtení na discích použijeme čtyři pracovních vláken pro řízení operace zápisu a čtyři pracovních vláken.</span><span class="sxs-lookup"><span data-stu-id="ce713-852">We will use four worker threads for driving Write operations and four worker threads for driving Read operations on the disks.</span></span> <span data-ttu-id="ce713-853">Pracovníci zápisu se řízení provozu na svazku "nocache", který obsahuje 10 disky s mezipamětí nastaven na "Žádný".</span><span class="sxs-lookup"><span data-stu-id="ce713-853">The Write workers will be driving traffic on the "nocache" volume, which has 10 disks with cache set to "None".</span></span> <span data-ttu-id="ce713-854">Pracovní procesy pro čtení se řízení provozu na svazku "readcache", který má 1 disk s mezipaměti nastaven na "Jen pro čtení".</span><span class="sxs-lookup"><span data-stu-id="ce713-854">The Read workers will be driving traffic on the "readcache" volume, which has 1 disk with cache set to "ReadOnly".</span></span>

<span data-ttu-id="ce713-855">*Maximální zápis IOPS*</span><span class="sxs-lookup"><span data-stu-id="ce713-855">*Maximum Write IOPS*</span></span>  
<span data-ttu-id="ce713-856">Vytvořte soubor úlohy s následující specifikace získat maximální IOPS zápisu.</span><span class="sxs-lookup"><span data-stu-id="ce713-856">Create the job file with following specifications to get maximum Write IOPS.</span></span> <span data-ttu-id="ce713-857">Název "fiowrite.ini".</span><span class="sxs-lookup"><span data-stu-id="ce713-857">Name it "fiowrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

<span data-ttu-id="ce713-858">Všimněte si, postupujte podle klíče věcí, které jsou v souladu s pokyny pro návrh popsané v předchozích částech.</span><span class="sxs-lookup"><span data-stu-id="ce713-858">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="ce713-859">Tyto specifikace jsou nezbytné k řízení maximální IOPS,</span><span class="sxs-lookup"><span data-stu-id="ce713-859">These specifications are essential to drive maximum IOPS,</span></span>  

* <span data-ttu-id="ce713-860">Hloubka fronty vysoké 256.</span><span class="sxs-lookup"><span data-stu-id="ce713-860">A high queue depth of 256.</span></span>  
* <span data-ttu-id="ce713-861">Velikost malé bloku 8KB.</span><span class="sxs-lookup"><span data-stu-id="ce713-861">A small block size of 8KB.</span></span>  
* <span data-ttu-id="ce713-862">Více vláken provádění náhodných zápisů.</span><span class="sxs-lookup"><span data-stu-id="ce713-862">Multiple threads performing random writes.</span></span>

<span data-ttu-id="ce713-863">Spusťte následující příkaz, který ji FIO test pro 30 sekund,</span><span class="sxs-lookup"><span data-stu-id="ce713-863">Run the following command to kick off the FIO test for 30 seconds,</span></span>  

```
sudo fio --runtime 30 fiowrite.ini
```

<span data-ttu-id="ce713-864">Při spuštění testu, nebudete moci zobrazit počet zápisu IOPS virtuálního počítače a poskytujete prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-864">While the test runs, you will be able to see the number of write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="ce713-865">Jak znázorňuje následující ukázka, virtuální počítač DS14 doručování jeho zápisu maximální limit IOPS 50 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-865">As shown in the sample below, the DS14 VM is delivering its maximum write IOPS limit of 50,000 IOPS.</span></span>  
    ![](media/storage-premium-storage-performance/image11.png)

<span data-ttu-id="ce713-866">*Čtení maximální IOPS*</span><span class="sxs-lookup"><span data-stu-id="ce713-866">*Maximum Read IOPS*</span></span>  
<span data-ttu-id="ce713-867">Vytvořte soubor úlohy s následující specifikace získat maximální IOPS pro čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-867">Create the job file with following specifications to get maximum Read IOPS.</span></span> <span data-ttu-id="ce713-868">Název "fioread.ini".</span><span class="sxs-lookup"><span data-stu-id="ce713-868">Name it "fioread.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

<span data-ttu-id="ce713-869">Všimněte si, postupujte podle klíče věcí, které jsou v souladu s pokyny pro návrh popsané v předchozích částech.</span><span class="sxs-lookup"><span data-stu-id="ce713-869">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="ce713-870">Tyto specifikace jsou nezbytné k řízení maximální IOPS,</span><span class="sxs-lookup"><span data-stu-id="ce713-870">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="ce713-871">Hloubka fronty vysoké 256.</span><span class="sxs-lookup"><span data-stu-id="ce713-871">A high queue depth of 256.</span></span>  
* <span data-ttu-id="ce713-872">Velikost malé bloku 8KB.</span><span class="sxs-lookup"><span data-stu-id="ce713-872">A small block size of 8KB.</span></span>  
* <span data-ttu-id="ce713-873">Více vláken provádění náhodných zápisů.</span><span class="sxs-lookup"><span data-stu-id="ce713-873">Multiple threads performing random writes.</span></span>

<span data-ttu-id="ce713-874">Spusťte následující příkaz, který ji FIO test pro 30 sekund,</span><span class="sxs-lookup"><span data-stu-id="ce713-874">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioread.ini
```

<span data-ttu-id="ce713-875">Při spuštění testu, nebudete moci zobrazit počet čtení IOPS virtuálního počítače a poskytujete prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-875">While the test runs, you will be able to see the number of read IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="ce713-876">Jak znázorňuje následující ukázka, virtuální počítač DS14 doručování více než 64 000 IOPS pro čtení.</span><span class="sxs-lookup"><span data-stu-id="ce713-876">As shown in the sample below, the DS14 VM is delivering more than 64,000 Read IOPS.</span></span> <span data-ttu-id="ce713-877">Toto je kombinací disku a výkon mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ce713-877">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image12.png)

<span data-ttu-id="ce713-878">*Maximální počet čtení a zápisu IOPS*</span><span class="sxs-lookup"><span data-stu-id="ce713-878">*Maximum Read and Write IOPS*</span></span>  
<span data-ttu-id="ce713-879">Vytvoření souboru úlohy pomocí následující specifikace získat maximální kombinaci oprávnění ke čtení a zápis IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-879">Create the job file with following specifications to get maximum combined Read and Write IOPS.</span></span> <span data-ttu-id="ce713-880">Název "fioreadwrite.ini".</span><span class="sxs-lookup"><span data-stu-id="ce713-880">Name it "fioreadwrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

<span data-ttu-id="ce713-881">Všimněte si, postupujte podle klíče věcí, které jsou v souladu s pokyny pro návrh popsané v předchozích částech.</span><span class="sxs-lookup"><span data-stu-id="ce713-881">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="ce713-882">Tyto specifikace jsou nezbytné k řízení maximální IOPS,</span><span class="sxs-lookup"><span data-stu-id="ce713-882">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="ce713-883">Hloubka fronty vysoké 128.</span><span class="sxs-lookup"><span data-stu-id="ce713-883">A high queue depth of 128.</span></span>  
* <span data-ttu-id="ce713-884">Velikost bloku malé 4KB.</span><span class="sxs-lookup"><span data-stu-id="ce713-884">A small block size of 4KB.</span></span>  
* <span data-ttu-id="ce713-885">Více vláken provádění náhodných čte a zapisuje.</span><span class="sxs-lookup"><span data-stu-id="ce713-885">Multiple threads performing random reads and writes.</span></span>

<span data-ttu-id="ce713-886">Spusťte následující příkaz, který ji FIO test pro 30 sekund,</span><span class="sxs-lookup"><span data-stu-id="ce713-886">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioreadwrite.ini
```

<span data-ttu-id="ce713-887">Při spuštění testu, nebudete moci zobrazit počet kombinované pro čtení a zápisu IOPS virtuálního počítače a poskytujete prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="ce713-887">While the test runs, you will be able to see the number of combined read and write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="ce713-888">Jak znázorňuje následující ukázka, virtuální počítač DS14 doručování více než 100 000 kombinované oprávnění ke čtení a zápis IOPS.</span><span class="sxs-lookup"><span data-stu-id="ce713-888">As shown in the sample below, the DS14 VM is delivering more than 100,000 combined Read and Write IOPS.</span></span> <span data-ttu-id="ce713-889">Toto je kombinací disku a výkon mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="ce713-889">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image13.png)

<span data-ttu-id="ce713-890">*Nejvyšší možná propustnost*</span><span class="sxs-lookup"><span data-stu-id="ce713-890">*Maximum Combined Throughput*</span></span>  
<span data-ttu-id="ce713-891">Získat maximální kombinovat pro čtení a zápisu propustnosti, použít větší velikost bloku a hloubku fronty velké s více vlákny provádění čtení a zápisy.</span><span class="sxs-lookup"><span data-stu-id="ce713-891">To get the maximum combined Read and Write Throughput, use a larger block size and large queue depth with multiple threads performing reads and writes.</span></span> <span data-ttu-id="ce713-892">Můžete použít velikost bloku 64KB a hloubku fronty 128.</span><span class="sxs-lookup"><span data-stu-id="ce713-892">You can use a block size of 64KB and queue depth of 128.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ce713-893">Další kroky</span><span class="sxs-lookup"><span data-stu-id="ce713-893">Next Steps</span></span>
<span data-ttu-id="ce713-894">Další informace o službě Azure Premium Storage:</span><span class="sxs-lookup"><span data-stu-id="ce713-894">Learn more about Azure Premium Storage:</span></span>

* [<span data-ttu-id="ce713-895">Storage úrovně Premium: Vysoce výkonné úložiště pro úlohy virtuálních počítačů Azure</span><span class="sxs-lookup"><span data-stu-id="ce713-895">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../storage-premium-storage.md)  

<span data-ttu-id="ce713-896">Pro uživatele systému SQL Server, přečtěte si článek na nejlepší postupy z hlediska výkonu pro SQL Server:</span><span class="sxs-lookup"><span data-stu-id="ce713-896">For SQL Server users, read articles on Performance Best Practices for SQL Server:</span></span>

* [<span data-ttu-id="ce713-897">Osvědčené postupy z hlediska výkonu pro SQL Server na virtuálních počítačích Azure</span><span class="sxs-lookup"><span data-stu-id="ce713-897">Performance Best Practices for SQL Server in Azure Virtual Machines</span></span>](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="ce713-898">Azure Storage úrovně Premium poskytuje nejvyšší výkon pro SQL Server ve virtuálním počítači Azure</span><span class="sxs-lookup"><span data-stu-id="ce713-898">Azure Premium Storage provides highest performance for SQL Server in Azure VM</span></span>](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx)
