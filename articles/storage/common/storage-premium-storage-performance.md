---
title: "Azure Premium Storage: Návrh pro výkonu | Microsoft Docs"
description: "Návrh vysoce výkonné aplikace pomocí Azure Premium Storage. Premium Storage nabízí podporu vysoce výkonné, nízkou latencí disku pro I náročnými úlohy běžící na virtuálních počítačích Azure."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: e6a409c3-d31a-4704-a93c-0a04fdc95960
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: aungoo
ms.openlocfilehash: dde3e60ae4c8387150b65f0715166b5d549891e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="azure-premium-storage-design-for-high-performance"></a><span data-ttu-id="f3f87-104">Úložiště Azure Premium: Návrh vysoce výkonné</span><span class="sxs-lookup"><span data-stu-id="f3f87-104">Azure Premium Storage: Design for High Performance</span></span>
## <a name="overview"></a><span data-ttu-id="f3f87-105">Přehled</span><span class="sxs-lookup"><span data-stu-id="f3f87-105">Overview</span></span>
<span data-ttu-id="f3f87-106">Tento článek obsahuje pokyny pro vytváření vysoce výkonné aplikace pomocí Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="f3f87-106">This article provides guidelines for building high performance applications using Azure Premium Storage.</span></span> <span data-ttu-id="f3f87-107">Můžete použít hello pokyny uvedené v tomto dokumentu v kombinaci s výkonu osvědčených postupů použít tootechnologies používá vaše aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-107">You can use hello instructions provided in this document combined with performance best practices applicable tootechnologies used by your application.</span></span> <span data-ttu-id="f3f87-108">tooillustrate hello pokyny, jsme použili SQL Server běžící na Storage úrovně Premium jako příklad v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-108">tooillustrate hello guidelines, we have used SQL Server running on Premium Storage as an example throughout this document.</span></span>

<span data-ttu-id="f3f87-109">Když jsme adres scénáře výkonu pro vrstvy úložiště hello v tomto článku, budete potřebovat toooptimize hello aplikační vrstvu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-109">While we address performance scenarios for hello Storage layer in this article, you will need toooptimize hello application layer.</span></span> <span data-ttu-id="f3f87-110">Například pokud hostujete farmy služby SharePoint na Azure Premium Storage, můžete příklady systému SQL Server hello z tohoto článku toooptimize hello databáze serveru.</span><span class="sxs-lookup"><span data-stu-id="f3f87-110">For example, if you are hosting a SharePoint Farm on Azure Premium Storage, you can use hello SQL Server examples from this article toooptimize hello database server.</span></span> <span data-ttu-id="f3f87-111">Kromě toho optimalizace farmy služby SharePoint hello webového serveru a aplikace serveru tooget hello většina výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-111">Additionally, optimize hello SharePoint Farm's Web server and Application server tooget hello most performance.</span></span>

<span data-ttu-id="f3f87-112">Tento článek vám pomůže odpovědí následující běžné otázky o optimalizaci výkonu aplikace na Azure Premium Storage</span><span class="sxs-lookup"><span data-stu-id="f3f87-112">This article will help answer following common questions about optimizing application performance on Azure Premium Storage,</span></span>

* <span data-ttu-id="f3f87-113">Jak toomeasure výkon aplikace?</span><span class="sxs-lookup"><span data-stu-id="f3f87-113">How toomeasure your application performance?</span></span>  
* <span data-ttu-id="f3f87-114">Proč se zobrazuje očekávané vysoký výkon?</span><span class="sxs-lookup"><span data-stu-id="f3f87-114">Why are you not seeing expected high performance?</span></span>  
* <span data-ttu-id="f3f87-115">Faktory, které mají vliv na výkon vaší aplikace na Storage úrovně Premium?</span><span class="sxs-lookup"><span data-stu-id="f3f87-115">Which factors influence your application performance on Premium Storage?</span></span>  
* <span data-ttu-id="f3f87-116">Jak se tyto faktory ovlivňují výkon aplikace na Storage úrovně Premium</span><span class="sxs-lookup"><span data-stu-id="f3f87-116">How do these factors influence performance of your application on Premium Storage?</span></span>  
* <span data-ttu-id="f3f87-117">Jak můžete můžete optimalizovat pro IOPS, šířky pásma a latencí?</span><span class="sxs-lookup"><span data-stu-id="f3f87-117">How can you optimize for IOPS, Bandwidth and Latency?</span></span>  

<span data-ttu-id="f3f87-118">Uvádíme těchto pokynů speciálně pro Storage úrovně Premium, protože úlohy běžící na Storage úrovně Premium jsou vysoce citlivých výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-118">We have provided these guidelines specifically for Premium Storage because workloads running on Premium Storage are highly performance sensitive.</span></span> <span data-ttu-id="f3f87-119">Kde je to vhodné uvádíme příklady.</span><span class="sxs-lookup"><span data-stu-id="f3f87-119">We have provided examples where appropriate.</span></span> <span data-ttu-id="f3f87-120">Můžete taky použít některé z těchto pokynů tooapplications s disky standardní úložiště pro virtuální počítače IaaS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-120">You can also apply some of these guidelines tooapplications running on IaaS VMs with Standard Storage disks.</span></span>

<span data-ttu-id="f3f87-121">Než začnete, pokud jste tooPremium nové úložiště, nejdřív přečíst hello [úložiště Premium: vysoce výkonné úložiště pro úlohy virtuálních počítačů Azure](../storage-premium-storage.md) a [Azure úložiště škálovatelnost a cíle výkonnosti](storage-scalability-targets.md)články.</span><span class="sxs-lookup"><span data-stu-id="f3f87-121">Before you begin, if you are new tooPremium Storage, first read hello [Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads](../storage-premium-storage.md) and [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) articles.</span></span>

## <a name="application-performance-indicators"></a><span data-ttu-id="f3f87-122">Ukazatele výkonu aplikace</span><span class="sxs-lookup"><span data-stu-id="f3f87-122">Application Performance Indicators</span></span>
<span data-ttu-id="f3f87-123">Jsme vyhodnocení, zda aplikace pracuje správně nebo není pomocí, jako jsou ukazatele výkonu, jak rychle aplikace je zpracování požadavku uživatele, kolik dat aplikace zpracovává každý požadavek, kolik požadavků aplikace zpracovává v konkrétní dobu, jak dlouho má uživatel toowait tooget odpověď po odeslání žádosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-123">We assess whether an application is performing well or not using performance indicators like, how fast an application is processing a user request, how much data an application is processing per request, how many requests is an application processing in a specific period of time, how long a user has toowait tooget a response after submitting their request.</span></span> <span data-ttu-id="f3f87-124">Hello technické podmínky pro tyto ukazatele výkonu jsou IOP, propustnosti nebo šířky pásma a latence.</span><span class="sxs-lookup"><span data-stu-id="f3f87-124">hello technical terms for these performance indicators are, IOPS, Throughput or Bandwidth, and Latency.</span></span>

<span data-ttu-id="f3f87-125">V této části se budeme zabývat hello běžné ukazatele výkonu v kontextu hello úložiště Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="f3f87-125">In this section, we will discuss hello common performance indicators in hello context of Premium Storage.</span></span> <span data-ttu-id="f3f87-126">V hello následující části, shromažďování požadavky na aplikace, se dozvíte, jak toomeasure tyto ukazatele výkonu pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-126">In hello following section, Gathering Application Requirements, you will learn how toomeasure these performance indicators for your application.</span></span> <span data-ttu-id="f3f87-127">Později v optimalizace výkonu aplikací se dozvíte o hello faktorů, které ovlivňují tyto indikátory a doporučení toooptimize výkonu je.</span><span class="sxs-lookup"><span data-stu-id="f3f87-127">Later in Optimizing Application Performance, you will learn about hello factors affecting these performance indicators and recommendations toooptimize them.</span></span>

## <a name="iops"></a><span data-ttu-id="f3f87-128">IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-128">IOPS</span></span>
<span data-ttu-id="f3f87-129">IOPS je počet požadavků, že vaše aplikace odesílá toohello disky úložiště za jednu sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-129">IOPS is number of requests that your application is sending toohello storage disks in one second.</span></span> <span data-ttu-id="f3f87-130">Vstupně výstupní operace by mohl číst nebo zapisovat sekvenční nebo náhodné.</span><span class="sxs-lookup"><span data-stu-id="f3f87-130">An input/output operation could be read or write, sequential or random.</span></span> <span data-ttu-id="f3f87-131">OLTP aplikace jako webem online prodejní nutné tooprocess mnoho souběžných uživatel požádá o okamžitě.</span><span class="sxs-lookup"><span data-stu-id="f3f87-131">OLTP applications like an online retail website need tooprocess many concurrent user requests immediately.</span></span> <span data-ttu-id="f3f87-132">žádosti uživatelů Hello jsou vložení a aktualizace náročné databázové transakce, které aplikace hello musí rychle zpracovat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-132">hello user requests are insert and update intensive database transactions, which hello application must process quickly.</span></span> <span data-ttu-id="f3f87-133">Proto OLTP aplikace vyžadují velmi vysoký IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-133">Therefore, OLTP applications require very high IOPS.</span></span> <span data-ttu-id="f3f87-134">Takové aplikace zpracovává miliony požadavků malé a náhodných vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-134">Such applications handle millions of small and random IO requests.</span></span> <span data-ttu-id="f3f87-135">Pokud máte takové aplikace, je třeba navrhnout toooptimize infrastruktury aplikace hello iops.</span><span class="sxs-lookup"><span data-stu-id="f3f87-135">If you have such an application, you must design hello application infrastructure toooptimize for IOPS.</span></span> <span data-ttu-id="f3f87-136">V hello později části *optimalizace výkonu aplikace*, probereme podrobně všechny hello faktory, které je nutné zvážit tooget vysokou IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-136">In hello later section, *Optimizing Application Performance*, we discuss in detail all hello factors that you must consider tooget high IOPS.</span></span>

<span data-ttu-id="f3f87-137">Když připojíte premium úložiště disku tooyour vysoké škálování virtuálních počítačů, Azure poskytuje pro vás zaručenou počet IOPS podle specifikace disku hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-137">When you attach a premium storage disk tooyour high scale VM, Azure provisions for you a guaranteed number of IOPS as per hello disk specification.</span></span> <span data-ttu-id="f3f87-138">Například P50 disk zřídí 7500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-138">For example, a P50 disk provisions 7500 IOPS.</span></span> <span data-ttu-id="f3f87-139">Každý měřítko velikost virtuálního počítače má také konkrétní limit IOPS, která dokáže odolat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-139">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="f3f87-140">Například standardní virtuální počítač GS5 má 80 000 IOPS omezit.</span><span class="sxs-lookup"><span data-stu-id="f3f87-140">For example, a Standard GS5 VM has 80,000 IOPS limit.</span></span>

## <a name="throughput"></a><span data-ttu-id="f3f87-141">Propustnost</span><span class="sxs-lookup"><span data-stu-id="f3f87-141">Throughput</span></span>
<span data-ttu-id="f3f87-142">Propustnost nebo šířky pásma je hello množství dat, že vaše aplikace odesílá toohello disky úložiště v určeném intervalu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-142">Throughput or Bandwidth is hello amount of data that your application is sending toohello storage disks in a specified interval.</span></span> <span data-ttu-id="f3f87-143">Pokud vaše aplikace provádí vstupně-výstupních operací s velikostí jednotky velké vstupně-výstupní operace, vyžaduje Vysoká propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-143">If your application is performing input/output operations with large IO unit sizes, it requires high Throughput.</span></span> <span data-ttu-id="f3f87-144">Datový sklad aplikace mívají tooissue kontroly náročné přístup velká část dat najednou a operací běžně provádět hromadné operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-144">Data warehouse applications tend tooissue scan intensive operations that access large portions of data at a time and commonly perform bulk operations.</span></span> <span data-ttu-id="f3f87-145">Jinými slovy tyto aplikace vyžadují vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-145">In other words, such applications require higher Throughput.</span></span> <span data-ttu-id="f3f87-146">Pokud máte takové aplikace, je třeba navrhnout jeho toooptimize infrastruktury pro propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-146">If you have such an application, you must design its infrastructure toooptimize for Throughput.</span></span> <span data-ttu-id="f3f87-147">V další části hello probereme v podrobností hello faktory musí tooachieve optimalizovat to.</span><span class="sxs-lookup"><span data-stu-id="f3f87-147">In hello next section, we discuss in detail hello factors you must tune tooachieve this.</span></span>

<span data-ttu-id="f3f87-148">Když připojíte premium úložiště disku tooa vysoké škálování virtuálních počítačů, Azure zřizuje propustnost podle specifikace tohoto disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-148">When you attach a premium storage disk tooa high scale VM, Azure provisions Throughput as per that disk specification.</span></span> <span data-ttu-id="f3f87-149">Například P50 disk zřídí 250 MB na druhý disk propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-149">For example, a P50 disk provisions 250 MB per second disk Throughput.</span></span> <span data-ttu-id="f3f87-150">Každý měřítko velikost virtuálního počítače má také jako konkrétní omezení propustnosti, které dokáže odolat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-150">Each high scale VM size also has as specific Throughput limit that it can sustain.</span></span> <span data-ttu-id="f3f87-151">Například standardní GS5 virtuální počítač má maximální propustnost 2 000 MB za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-151">For example, Standard GS5 VM has a maximum throughput of 2,000 MB per second.</span></span> 

<span data-ttu-id="f3f87-152">Je vztah mezi propustnost a IOPS, jak je znázorněno v hello vzorec níže.</span><span class="sxs-lookup"><span data-stu-id="f3f87-152">There is a relation between Throughput and IOPS as shown in hello formula below.</span></span>

![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="f3f87-153">Proto je důležité toodetermine hello optimální propustnosti a IOPS hodnoty, které vaše aplikace vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="f3f87-153">Therefore, it is important toodetermine hello optimal Throughput and IOPS values that your application requires.</span></span> <span data-ttu-id="f3f87-154">Jako zkusíte toooptimize jeden, získá vliv také hello jiné.</span><span class="sxs-lookup"><span data-stu-id="f3f87-154">As you try toooptimize one, hello other also gets affected.</span></span> <span data-ttu-id="f3f87-155">V další části *optimalizace výkonu aplikace*, se budeme zabývat v podrobnější informace o optimalizaci IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-155">In a later section, *Optimizing Application Performance*, we will discuss in more details about optimizing IOPS and Throughput.</span></span>

## <a name="latency"></a><span data-ttu-id="f3f87-156">Latence</span><span class="sxs-lookup"><span data-stu-id="f3f87-156">Latency</span></span>
<span data-ttu-id="f3f87-157">Latence je hello doby potřebné aplikaci tooreceive jedné žádosti, odešle disky úložiště toohello a odeslat hello odpovědi toohello klienta.</span><span class="sxs-lookup"><span data-stu-id="f3f87-157">Latency is hello time it takes an application tooreceive a single request, send it toohello storage disks and send hello response toohello client.</span></span> <span data-ttu-id="f3f87-158">Toto je důležité míra výkonu aplikace v přidání tooIOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-158">This is a critical measure of an application's performance in addition tooIOPS and Throughput.</span></span> <span data-ttu-id="f3f87-159">Hello latence disk úložiště premium je čas hello přebírá tooretrieve hello informace pro žádost a komunikaci zpátky tooyour aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-159">hello Latency of a premium storage disk is hello time it takes tooretrieve hello information for a request and communicate it back tooyour application.</span></span> <span data-ttu-id="f3f87-160">Storage úrovně Premium poskytuje trvale nízké latence.</span><span class="sxs-lookup"><span data-stu-id="f3f87-160">Premium Storage provides consistent low latencies.</span></span> <span data-ttu-id="f3f87-161">Pokud povolíte ukládání do mezipaměti na discích úložiště premium hostitele jen pro čtení, můžete získat mnohem nižší latenci pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-161">If you enable ReadOnly host caching on premium storage disks, you can get much lower read latency.</span></span> <span data-ttu-id="f3f87-162">Se budeme zabývat ukládání do mezipaměti disku podrobněji v pozdější části na *optimalizace výkonu aplikace*.</span><span class="sxs-lookup"><span data-stu-id="f3f87-162">We will discuss Disk Caching in more detail in later section on *Optimizing Application Performance*.</span></span>

<span data-ttu-id="f3f87-163">Když jsou optimalizace vaší aplikace tooget vyšší IOPS a propustnost, bude mít vliv hello latence vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-163">When you are optimizing your application tooget higher IOPS and Throughput, it will affect hello Latency of your application.</span></span> <span data-ttu-id="f3f87-164">Po vyladění výkonu aplikace hello, vždy vyhodnoceny hello latence tooavoid aplikace hello chování neočekávané vysokou latencí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-164">After tuning hello application performance, always evaluate hello Latency of hello application tooavoid unexpected high latency behavior.</span></span>

## <a name="gather-application-performance-requirements"></a><span data-ttu-id="f3f87-165">Shromáždění požadavků na výkon aplikace</span><span class="sxs-lookup"><span data-stu-id="f3f87-165">Gather Application Performance Requirements</span></span>
<span data-ttu-id="f3f87-166">Hello prvním krokem při navrhování vysoký výkon aplikací běžících na Azure Premium Storage je toounderstand hello požadavcích na výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-166">hello first step in designing high performance applications running on Azure Premium Storage is, toounderstand hello performance requirements of your application.</span></span> <span data-ttu-id="f3f87-167">Po shromáždění požadavků na výkon, můžete optimalizovat výkon aplikace tooachieve hello optimální.</span><span class="sxs-lookup"><span data-stu-id="f3f87-167">After you gather performance requirements, you can optimize your application tooachieve hello most optimal performance.</span></span>

<span data-ttu-id="f3f87-168">V předchozí části hello jsme vysvětlené hello běžné ukazatele výkonu, IOP, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="f3f87-168">In hello previous section, we explained hello common performance indicators, IOPS, Throughput and Latency.</span></span> <span data-ttu-id="f3f87-169">Musíte určit, které tyto ukazatele výkonu jsou kritické tooyour aplikace toodeliver hello potřeby činnost koncového uživatele.</span><span class="sxs-lookup"><span data-stu-id="f3f87-169">You must identify which of these performance indicators are critical tooyour application toodeliver hello desired user experience.</span></span> <span data-ttu-id="f3f87-170">Například vysoké IOPS důležitý většinu aplikací tooOLTP zpracování miliony transakcí za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-170">For example, high IOPS matters most tooOLTP applications processing millions of transactions in a second.</span></span> <span data-ttu-id="f3f87-171">Vzhledem k tomu, Vysoká propustnost je velmi důležitá pro datový sklad aplikací zpracování velkých objemů dat za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-171">Whereas, high Throughput is critical for Data Warehouse applications processing large amounts of data in a second.</span></span> <span data-ttu-id="f3f87-172">Velmi nízkou latenci je zásadní pro aplikace v reálném čase jako živé video streamování weby.</span><span class="sxs-lookup"><span data-stu-id="f3f87-172">Extremely low Latency is crucial for real-time applications like live video streaming websites.</span></span>

<span data-ttu-id="f3f87-173">V dalším kroku měření hello požadavky na maximální výkon vaší aplikace v průběhu své životnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-173">Next, measure hello maximum performance requirements of your application throughout its lifetime.</span></span> <span data-ttu-id="f3f87-174">Kontrolní seznam ukázka hello níže použijte jako spuštění.</span><span class="sxs-lookup"><span data-stu-id="f3f87-174">Use hello sample checklist below as a start.</span></span> <span data-ttu-id="f3f87-175">Požadavky na maximální výkon záznamů hello během normální, tečky zatížení ve špičce a počítačem nepracujete.</span><span class="sxs-lookup"><span data-stu-id="f3f87-175">Record hello maximum performance requirements during normal, peak and off-hours workload periods.</span></span> <span data-ttu-id="f3f87-176">Tím, že určíte požadavky pro všechny úrovně zatížení, budete moct toodetermine hello požadavek na celkový výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-176">By identifying requirements for all workloads levels, you will be able toodetermine hello overall performance requirement of your application.</span></span> <span data-ttu-id="f3f87-177">Hello běžné pracovní zatížení webem elektronického obchodování například bude hello transakcí, které slouží během většina dnů v roce.</span><span class="sxs-lookup"><span data-stu-id="f3f87-177">For example, hello normal workload of an e-commerce website will be hello transactions it serves during most days in a year.</span></span> <span data-ttu-id="f3f87-178">zatížení ve špičce Hello hello webu bude hello transakcí, které slouží během sváteční sezóny nebo speciální prodej události.</span><span class="sxs-lookup"><span data-stu-id="f3f87-178">hello peak workload of hello website will be hello transactions it serves during holiday season or special sale events.</span></span> <span data-ttu-id="f3f87-179">zatížení ve špičce Hello je obvykle zkušeného po omezenou dobu, ale může vyžadovat vaše aplikace tooscale dva nebo více krát jeho normální provoz.</span><span class="sxs-lookup"><span data-stu-id="f3f87-179">hello peak workload is typically experienced for a limited period, but can require your application tooscale two or more times its normal operation.</span></span> <span data-ttu-id="f3f87-180">Zjistíte hello 50. percentil, 90 percentilu a 99 percentilu požadavky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-180">Find out hello 50 percentile, 90 percentile and 99 percentile requirements.</span></span> <span data-ttu-id="f3f87-181">To pomáhá vyfiltrovat odlehlé všechny hodnoty v požadavcích na výkon hello a vaše úsilí můžete soustředit na optimalizace pro správné hodnoty hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-181">This helps filter out any outliers in hello performance requirements and you can focus your efforts on optimizing for hello right values.</span></span>

<span data-ttu-id="f3f87-182">**Kontrolní seznam požadavků výkonu aplikace**</span><span class="sxs-lookup"><span data-stu-id="f3f87-182">**Application Performance Requirements Checklist**</span></span>

| <span data-ttu-id="f3f87-183">**Požadavky na výkon**</span><span class="sxs-lookup"><span data-stu-id="f3f87-183">**Performance requirements**</span></span> | <span data-ttu-id="f3f87-184">**50. percentil**</span><span class="sxs-lookup"><span data-stu-id="f3f87-184">**50 Percentile**</span></span> | <span data-ttu-id="f3f87-185">**90 percentilu**</span><span class="sxs-lookup"><span data-stu-id="f3f87-185">**90 Percentile**</span></span> | <span data-ttu-id="f3f87-186">**99 percentilu**</span><span class="sxs-lookup"><span data-stu-id="f3f87-186">**99  Percentile**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-187">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-187">Max.</span></span> <span data-ttu-id="f3f87-188">Transakce za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-188">Transactions per second</span></span> | | | |
| <span data-ttu-id="f3f87-189">Operace čtení %</span><span class="sxs-lookup"><span data-stu-id="f3f87-189">% Read operations</span></span> | | | |
| <span data-ttu-id="f3f87-190">Operace zápisu %</span><span class="sxs-lookup"><span data-stu-id="f3f87-190">% Write operations</span></span> | | | |
| <span data-ttu-id="f3f87-191">% Náhodné operace</span><span class="sxs-lookup"><span data-stu-id="f3f87-191">% Random operations</span></span> | | | |
| <span data-ttu-id="f3f87-192">Sekvenční operace %</span><span class="sxs-lookup"><span data-stu-id="f3f87-192">% Sequential operations</span></span> | | | |
| <span data-ttu-id="f3f87-193">Velikost požadavku vstupně-výstupní operace</span><span class="sxs-lookup"><span data-stu-id="f3f87-193">IO request size</span></span> | | | |
| <span data-ttu-id="f3f87-194">Průměrná propustnost</span><span class="sxs-lookup"><span data-stu-id="f3f87-194">Average Throughput</span></span> | | | |
| <span data-ttu-id="f3f87-195">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-195">Max.</span></span> <span data-ttu-id="f3f87-196">Propustnost</span><span class="sxs-lookup"><span data-stu-id="f3f87-196">Throughput</span></span> | | | |
| <span data-ttu-id="f3f87-197">Min.</span><span class="sxs-lookup"><span data-stu-id="f3f87-197">Min.</span></span> <span data-ttu-id="f3f87-198">Latence</span><span class="sxs-lookup"><span data-stu-id="f3f87-198">Latency</span></span> | | | |
| <span data-ttu-id="f3f87-199">Průměrná latence</span><span class="sxs-lookup"><span data-stu-id="f3f87-199">Average Latency</span></span> | | | |
| <span data-ttu-id="f3f87-200">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-200">Max.</span></span> <span data-ttu-id="f3f87-201">Procesor</span><span class="sxs-lookup"><span data-stu-id="f3f87-201">CPU</span></span> | | | |
| <span data-ttu-id="f3f87-202">Průměrné využití procesoru</span><span class="sxs-lookup"><span data-stu-id="f3f87-202">Average CPU</span></span> | | | |
| <span data-ttu-id="f3f87-203">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-203">Max.</span></span> <span data-ttu-id="f3f87-204">Memory (Paměť)</span><span class="sxs-lookup"><span data-stu-id="f3f87-204">Memory</span></span> | | | |
| <span data-ttu-id="f3f87-205">Průměrná paměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-205">Average Memory</span></span> | | | |
| <span data-ttu-id="f3f87-206">Hloubka fronty</span><span class="sxs-lookup"><span data-stu-id="f3f87-206">Queue Depth</span></span> | | | |

> [!NOTE]
> <span data-ttu-id="f3f87-207">Měli byste zvážit škálování tato čísla podle očekávané budoucímu růstu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-207">You should consider scaling these numbers based on expected future growth of your application.</span></span> <span data-ttu-id="f3f87-208">Je vhodné tooplan pro růst předem, protože by mohlo být těžší infrastrukturu hello toochange pro zlepšení výkonu později.</span><span class="sxs-lookup"><span data-stu-id="f3f87-208">It is a good idea tooplan for growth ahead of time, because it could be harder toochange hello infrastructure for improving performance later.</span></span>
>
>

<span data-ttu-id="f3f87-209">Pokud máte existující aplikaci a chcete toomove tooPremium úložiště, nejprve vytvoříte kontrolní seznam hello výše pro existující aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-209">If you have an existing application and want toomove tooPremium Storage, first build hello checklist above for hello existing application.</span></span> <span data-ttu-id="f3f87-210">Potom vytvořit prototyp vaší aplikace na Storage úrovně Premium a návrhu aplikace hello podle pokynů popsaných v *optimalizace výkonu aplikace* v další části tohoto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-210">Then, build a prototype of your application on Premium Storage and design hello application based on guidelines described in *Optimizing Application Performance* in a later section of this document.</span></span> <span data-ttu-id="f3f87-211">Hello další část popisuje hello nástroje můžete použít měření výkonu toogather hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-211">hello next section describes hello tools you can use toogather hello performance measurements.</span></span>

<span data-ttu-id="f3f87-212">Vytvořte kontrolní seznam podobné tooyour stávající aplikaci pro hello prototypu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-212">Create a checklist similar tooyour existing application for hello prototype.</span></span> <span data-ttu-id="f3f87-213">Pomocí nástrojů Benchmarking můžete simulovat hello úlohy a měření výkonu na prototypu aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-213">Using Benchmarking tools you can simulate hello workloads and measure performance on hello prototype application.</span></span> <span data-ttu-id="f3f87-214">Části hello na [Benchmarking](#benchmarking) toolearn Další.</span><span class="sxs-lookup"><span data-stu-id="f3f87-214">See hello section on [Benchmarking](#benchmarking) toolearn more.</span></span> <span data-ttu-id="f3f87-215">Pomocí tohoto postupu, abyste mohli ověřit, zda úložiště Premium můžete odpovídat nebo překročí maximální vašim požadavkům na výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-215">By doing so you can determine whether Premium Storage can match or surpass your application performance requirements.</span></span> <span data-ttu-id="f3f87-216">Pak můžete implementovat hello stejné pokyny pro produkční aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-216">Then you can implement hello same guidelines for your production application.</span></span>

### <a name="counters-toomeasure-application-performance-requirements"></a><span data-ttu-id="f3f87-217">Čítače výkonu požadavky na toomeasure aplikace</span><span class="sxs-lookup"><span data-stu-id="f3f87-217">Counters toomeasure application performance requirements</span></span>
<span data-ttu-id="f3f87-218">Dobrý den nejlepší způsob, jak toomeasure požadavcích na výkon vaší aplikace, je toouse sledování výkonu nástroje poskytované operačním systémem hello hello serveru.</span><span class="sxs-lookup"><span data-stu-id="f3f87-218">hello best way toomeasure performance requirements of your application, is toouse performance-monitoring tools provided by hello operating system of hello server.</span></span> <span data-ttu-id="f3f87-219">Můžete použít nástroj PerfMon pro systém Windows a iostat pro Linux.</span><span class="sxs-lookup"><span data-stu-id="f3f87-219">You can use PerfMon for Windows and iostat for Linux.</span></span> <span data-ttu-id="f3f87-220">Tyto nástroje zachytit čítače odpovídající tooeach měr podrobně hello nad sekcí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-220">These tools capture counters corresponding tooeach measure explained in hello above section.</span></span> <span data-ttu-id="f3f87-221">Hello hodnoty z těchto čítačů nutné zaznamenat, když aplikace běží jeho normální, zatížení ve špičce a počítačem nepracujete.</span><span class="sxs-lookup"><span data-stu-id="f3f87-221">You must capture hello values of these counters when your application is running its normal, peak and off-hours workloads.</span></span>

<span data-ttu-id="f3f87-222">Hello PerfMon čítače jsou k dispozici pro procesor, paměť a každý logický disk a fyzický disk serveru.</span><span class="sxs-lookup"><span data-stu-id="f3f87-222">hello PerfMon counters are available for processor, memory and, each logical disk and physical disk of your server.</span></span> <span data-ttu-id="f3f87-223">Pokud používáte prémiové disky úložiště v případě virtuálních počítačů, čítače hello fyzického disku se pro každý disk úložiště premium a čítače logický disk se pro každý svazek na discích úložiště premium hello vytvořit.</span><span class="sxs-lookup"><span data-stu-id="f3f87-223">When you use premium storage disks with a VM, hello physical disk counters are for each premium storage disk, and logical disk counters are for each volume created on hello premium storage disks.</span></span> <span data-ttu-id="f3f87-224">Nutné zaznamenat hello hodnoty pro hello disky, které hostují vaše úlohy aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-224">You must capture hello values for hello disks that host your application workload.</span></span> <span data-ttu-id="f3f87-225">Pokud existuje jedno mapování tooone mezi logické a fyzické disky, najdete čítače disku toophysical; v opačném případě najdete toohello logického disku čítače.</span><span class="sxs-lookup"><span data-stu-id="f3f87-225">If there is a one tooone mapping between logical and physical disks, you can refer toophysical disk counters; otherwise refer toohello logical disk counters.</span></span> <span data-ttu-id="f3f87-226">V systému Linux příkaz iostat hello generuje sestavy využití procesoru a disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-226">On Linux, hello iostat command generates a CPU and disk utilization report.</span></span> <span data-ttu-id="f3f87-227">Sestava využití disku Hello poskytuje statistické údaje za fyzického zařízení nebo oddíl.</span><span class="sxs-lookup"><span data-stu-id="f3f87-227">hello disk utilization report provides statistics per physical device or partition.</span></span> <span data-ttu-id="f3f87-228">Pokud máte databázový server s protokolu a data na různých discích, shromážděte tato data pro oba disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-228">If you have a database server with its data and log on separate disks, collect this data for both disks.</span></span> <span data-ttu-id="f3f87-229">Následující tabulka popisuje čítače pro disky, procesoru a paměti:</span><span class="sxs-lookup"><span data-stu-id="f3f87-229">Below table describes counters for disks, processor and memory:</span></span>

| <span data-ttu-id="f3f87-230">Čítač</span><span class="sxs-lookup"><span data-stu-id="f3f87-230">Counter</span></span> | <span data-ttu-id="f3f87-231">Popis</span><span class="sxs-lookup"><span data-stu-id="f3f87-231">Description</span></span> | <span data-ttu-id="f3f87-232">PerfMon</span><span class="sxs-lookup"><span data-stu-id="f3f87-232">PerfMon</span></span> | <span data-ttu-id="f3f87-233">Iostat</span><span class="sxs-lookup"><span data-stu-id="f3f87-233">Iostat</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-234">**IOPS nebo transakcí za sekundu**</span><span class="sxs-lookup"><span data-stu-id="f3f87-234">**IOPS or Transactions per second**</span></span> |<span data-ttu-id="f3f87-235">Počet vstupně-výstupní požadavky vydané toohello úložiště disku za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-235">Number of I/O requests issued toohello storage disk per second.</span></span> |<span data-ttu-id="f3f87-236">Čtení disku/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-236">Disk Reads/sec</span></span> <br> <span data-ttu-id="f3f87-237">Zápis disku/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-237">Disk Writes/sec</span></span> |<span data-ttu-id="f3f87-238">TPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-238">tps</span></span> <br> <span data-ttu-id="f3f87-239">r/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-239">r/s</span></span> <br> <span data-ttu-id="f3f87-240">w/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-240">w/s</span></span> |
| <span data-ttu-id="f3f87-241">**Disk čtení a zápisu**</span><span class="sxs-lookup"><span data-stu-id="f3f87-241">**Disk Reads and Writes**</span></span> |<span data-ttu-id="f3f87-242">% čtení a zápisu operace provedené na disku hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-242">% of Reads and Write operations performed on hello disk.</span></span> |<span data-ttu-id="f3f87-243">Čas čtení disku v %</span><span class="sxs-lookup"><span data-stu-id="f3f87-243">% Disk Read Time</span></span> <br> <span data-ttu-id="f3f87-244">Čas zápisu disku v %</span><span class="sxs-lookup"><span data-stu-id="f3f87-244">% Disk Write Time</span></span> |<span data-ttu-id="f3f87-245">r/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-245">r/s</span></span> <br> <span data-ttu-id="f3f87-246">w/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-246">w/s</span></span> |
| <span data-ttu-id="f3f87-247">**Propustnost**</span><span class="sxs-lookup"><span data-stu-id="f3f87-247">**Throughput**</span></span> |<span data-ttu-id="f3f87-248">Množství dat číst nebo zapisovat toohello disku za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-248">Amount of data read from or written toohello disk per second.</span></span> |<span data-ttu-id="f3f87-249">Čtení z disku bajtů/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-249">Disk Read Bytes/sec</span></span> <br> <span data-ttu-id="f3f87-250">Bajty zapisování na disk/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-250">Disk Write Bytes/sec</span></span> |<span data-ttu-id="f3f87-251">kB_read/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-251">kB_read/s</span></span> <br> <span data-ttu-id="f3f87-252">kB_wrtn/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-252">kB_wrtn/s</span></span> |
| <span data-ttu-id="f3f87-253">**Latence**</span><span class="sxs-lookup"><span data-stu-id="f3f87-253">**Latency**</span></span> |<span data-ttu-id="f3f87-254">Celkový čas toocomplete žádost o vstupně-výstupní operace disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-254">Total time toocomplete a disk IO request.</span></span> |<span data-ttu-id="f3f87-255">Průměrná doba disku/čtení</span><span class="sxs-lookup"><span data-stu-id="f3f87-255">Average Disk sec/Read</span></span> <br> <span data-ttu-id="f3f87-256">Doba průměrná disku/zápis</span><span class="sxs-lookup"><span data-stu-id="f3f87-256">Average disk sec/Write</span></span> |<span data-ttu-id="f3f87-257">await</span><span class="sxs-lookup"><span data-stu-id="f3f87-257">await</span></span> <br> <span data-ttu-id="f3f87-258">svctm</span><span class="sxs-lookup"><span data-stu-id="f3f87-258">svctm</span></span> |
| <span data-ttu-id="f3f87-259">**Velikost vstupně-výstupní operace**</span><span class="sxs-lookup"><span data-stu-id="f3f87-259">**IO size**</span></span> |<span data-ttu-id="f3f87-260">Hello velikost vstupně-výstupní požadavky vydává toohello disky úložiště.</span><span class="sxs-lookup"><span data-stu-id="f3f87-260">hello size of I/O requests issues toohello storage disks.</span></span> |<span data-ttu-id="f3f87-261">Průměrná disku bajtů/čtení</span><span class="sxs-lookup"><span data-stu-id="f3f87-261">Average Disk Bytes/Read</span></span> <br> <span data-ttu-id="f3f87-262">Průměrná disku bajtů/zápis</span><span class="sxs-lookup"><span data-stu-id="f3f87-262">Average Disk Bytes/Write</span></span> |<span data-ttu-id="f3f87-263">avgrq sz</span><span class="sxs-lookup"><span data-stu-id="f3f87-263">avgrq-sz</span></span> |
| <span data-ttu-id="f3f87-264">**Hloubka fronty**</span><span class="sxs-lookup"><span data-stu-id="f3f87-264">**Queue Depth**</span></span> |<span data-ttu-id="f3f87-265">Počet nezpracovaných vstupně-výstupních požadavků čekání toobe formuláře číst nebo zapisovat toohello úložiště disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-265">Number of outstanding I/O requests waiting toobe read form or written toohello storage disk.</span></span> |<span data-ttu-id="f3f87-266">Aktuální délka fronty disku</span><span class="sxs-lookup"><span data-stu-id="f3f87-266">Current Disk Queue Length</span></span> |<span data-ttu-id="f3f87-267">avgqu sz</span><span class="sxs-lookup"><span data-stu-id="f3f87-267">avgqu-sz</span></span> |
| <span data-ttu-id="f3f87-268">**Max. Paměť**</span><span class="sxs-lookup"><span data-stu-id="f3f87-268">**Max. Memory**</span></span> |<span data-ttu-id="f3f87-269">Velikost paměti požadované toorun aplikace bez problémů</span><span class="sxs-lookup"><span data-stu-id="f3f87-269">Amount of memory required toorun application smoothly</span></span> |<span data-ttu-id="f3f87-270">% Využití potvrzených bajtů</span><span class="sxs-lookup"><span data-stu-id="f3f87-270">% Committed Bytes in Use</span></span> |<span data-ttu-id="f3f87-271">Použití vmstat</span><span class="sxs-lookup"><span data-stu-id="f3f87-271">Use vmstat</span></span> |
| <span data-ttu-id="f3f87-272">**Max. VYUŽITÍ PROCESORU**</span><span class="sxs-lookup"><span data-stu-id="f3f87-272">**Max. CPU**</span></span> |<span data-ttu-id="f3f87-273">Velikost procesoru požadované toorun aplikace bez problémů</span><span class="sxs-lookup"><span data-stu-id="f3f87-273">Amount CPU required toorun application smoothly</span></span> |<span data-ttu-id="f3f87-274">% Času procesoru</span><span class="sxs-lookup"><span data-stu-id="f3f87-274">% Processor time</span></span> |<span data-ttu-id="f3f87-275">% util</span><span class="sxs-lookup"><span data-stu-id="f3f87-275">%util</span></span> |

<span data-ttu-id="f3f87-276">Další informace o [iostat](http://linuxcommand.org/man_pages/iostat1.html) a [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span><span class="sxs-lookup"><span data-stu-id="f3f87-276">Learn more about [iostat](http://linuxcommand.org/man_pages/iostat1.html) and [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span></span>

## <a name="optimizing-application-performance"></a><span data-ttu-id="f3f87-277">Optimalizace výkonu aplikace</span><span class="sxs-lookup"><span data-stu-id="f3f87-277">Optimizing Application Performance</span></span>
<span data-ttu-id="f3f87-278">Hello hlavní faktory, které mají vliv na výkon aplikace běžící na Storage úrovně Premium jsou povaze z vstupně-výstupní požadavky, velikost virtuálního počítače, velikost disku, počet disků, ukládání do mezipaměti na disku, Multithreading a hloubku fronty.</span><span class="sxs-lookup"><span data-stu-id="f3f87-278">hello main factors that influence performance of an application running on Premium Storage are Nature of IO Requests, VM size, Disk size, Number of disks, Disk Caching, Multithreading and Queue Depth.</span></span> <span data-ttu-id="f3f87-279">Můžete ovládat některé tyto faktory s knoflíky poskytované systémem hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-279">You can control some of these factors with knobs provided by hello system.</span></span> <span data-ttu-id="f3f87-280">Většina aplikací nemusí dát možnost tooalter hello velikost vstupně-výstupní operace a hloubku fronty přímo.</span><span class="sxs-lookup"><span data-stu-id="f3f87-280">Most applications may not give you an option tooalter hello IO size and Queue Depth directly.</span></span> <span data-ttu-id="f3f87-281">Například pokud používáte systém SQL Server, nemůžete hello hloubka velikost a fronty vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-281">For example, if you are using SQL Server, you cannot choose hello IO size and queue depth.</span></span> <span data-ttu-id="f3f87-282">SQL Server zvolí hello optimální vstupně-výstupní operace velikost a fronty hloubka hodnoty tooget hello většina výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-282">SQL Server chooses hello optimal IO size and queue depth values tooget hello most performance.</span></span> <span data-ttu-id="f3f87-283">Je důležité toounderstand hello účinky oba typy faktory na výkon aplikace tak, aby můžete zřídit požadavkům na výkon toomeet odpovídající prostředky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-283">It is important toounderstand hello effects of both types of factors on your application performance, so that you can provision appropriate resources toomeet performance needs.</span></span>

<span data-ttu-id="f3f87-284">V této části najdete toohello aplikace požadavky kontrolní seznam, který jste vytvořili, tooidentify kolik budete potřebovat toooptimize výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-284">Throughout this section, refer toohello application requirements checklist that you created, tooidentify how much you need toooptimize your application performance.</span></span> <span data-ttu-id="f3f87-285">Na základě, že bude mít toodetermine který faktory z této části můžete potřebovat tootune.</span><span class="sxs-lookup"><span data-stu-id="f3f87-285">Based on that, you will be able toodetermine which factors from this section you will need tootune.</span></span> <span data-ttu-id="f3f87-286">toowitness hello důsledky každý faktor na vaše aplikace výkon, spusťte srovnávací testy nástroje na nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-286">toowitness hello effects of each factor on your application performance, run benchmarking tools on your application setup.</span></span> <span data-ttu-id="f3f87-287">Odkazovat toohello [Benchmarking](#Benchmarking) části na konci hello tohoto článku kroky toorun běžné srovnávací testy nástroje na systém Windows a virtuální počítače s Linuxem.</span><span class="sxs-lookup"><span data-stu-id="f3f87-287">Refer toohello [Benchmarking](#Benchmarking) section at hello end of this article for steps toorun common benchmarking tools on Windows and Linux VMs.</span></span>

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a><span data-ttu-id="f3f87-288">Optimalizace IOP, propustnosti a latence na první pohled</span><span class="sxs-lookup"><span data-stu-id="f3f87-288">Optimizing IOPS, Throughput and Latency at a glance</span></span>
<span data-ttu-id="f3f87-289">Následující tabulka Hello shrnuje všechny faktory hello výkonu a hello kroky toooptimize IOPS, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="f3f87-289">hello table below summarizes all hello performance factors and hello steps toooptimize IOPS, Throughput and Latency.</span></span> <span data-ttu-id="f3f87-290">Hello následující Toto shrnutí částech se popisují každou. faktor je mnohem víc hloubka.</span><span class="sxs-lookup"><span data-stu-id="f3f87-290">hello sections following this summary will describe each factor is much more depth.</span></span>

| &nbsp; | <span data-ttu-id="f3f87-291">**IOPS**</span><span class="sxs-lookup"><span data-stu-id="f3f87-291">**IOPS**</span></span> | <span data-ttu-id="f3f87-292">**Propustnost**</span><span class="sxs-lookup"><span data-stu-id="f3f87-292">**Throughput**</span></span> | <span data-ttu-id="f3f87-293">**Latence**</span><span class="sxs-lookup"><span data-stu-id="f3f87-293">**Latency**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-294">**Příklad scénáře**</span><span class="sxs-lookup"><span data-stu-id="f3f87-294">**Example Scenario**</span></span> |<span data-ttu-id="f3f87-295">Enterprise OLTP aplikace, které vyžadují velmi vysoký transakce za druhá míra.</span><span class="sxs-lookup"><span data-stu-id="f3f87-295">Enterprise OLTP application requiring very high transactions per second rate.</span></span> |<span data-ttu-id="f3f87-296">Enterprise datového skladu aplikace zpracování velkých objemů dat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-296">Enterprise Data warehousing application processing large amounts of data.</span></span> |<span data-ttu-id="f3f87-297">Téměř v reálném čase aplikace vyžadující rychlých odpovědí toouser požadavků, jako je online herní.</span><span class="sxs-lookup"><span data-stu-id="f3f87-297">Near real-time applications requiring instant responses toouser requests, like online gaming.</span></span> |
| <span data-ttu-id="f3f87-298">Faktory výkonu</span><span class="sxs-lookup"><span data-stu-id="f3f87-298">Performance factors</span></span> | &nbsp; | &nbsp; | &nbsp; |
| <span data-ttu-id="f3f87-299">**Velikost vstupně-výstupní operace**</span><span class="sxs-lookup"><span data-stu-id="f3f87-299">**IO size**</span></span> |<span data-ttu-id="f3f87-300">Menší velikost vstupně-výstupní operace dosáhnout vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-300">Smaller IO size yields higher IOPS.</span></span> |<span data-ttu-id="f3f87-301">Větší velikost tooyields vstupně-výstupní operace vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-301">Larger IO size tooyields higher Throughput.</span></span> | &nbsp;|
| <span data-ttu-id="f3f87-302">**Velikost virtuálního počítače**</span><span class="sxs-lookup"><span data-stu-id="f3f87-302">**VM size**</span></span> |<span data-ttu-id="f3f87-303">Použijte velikost virtuálního počítače, který nabízí IOPS větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-303">Use a VM size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="f3f87-304">Zobrazit velikosti virtuálních počítačů a jejich IOPS omezení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-304">See VM sizes and their IOPS limits here.</span></span> |<span data-ttu-id="f3f87-305">Velikost virtuálního počítače pomocí omezení propustnosti větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-305">Use a VM size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="f3f87-306">Zobrazit velikosti virtuálních počítačů a jejich propustnost omezení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-306">See VM sizes and their Throughput limits here.</span></span> |<span data-ttu-id="f3f87-307">Použijte velikost virtuálního počítače, že nabízí škálování omezení větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-307">Use a VM size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="f3f87-308">Zobrazit velikosti virtuálních počítačů a jejich omezení sem.</span><span class="sxs-lookup"><span data-stu-id="f3f87-308">See VM sizes and their limits here.</span></span> |
| <span data-ttu-id="f3f87-309">**Velikost disku**</span><span class="sxs-lookup"><span data-stu-id="f3f87-309">**Disk size**</span></span> |<span data-ttu-id="f3f87-310">Použijte velikost disku, který nabízí IOPS větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-310">Use a disk size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="f3f87-311">Zobrazit velikosti disků a jejich IOPS omezení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-311">See disk sizes and their IOPS limits here.</span></span> |<span data-ttu-id="f3f87-312">Velikost disku pomocí omezení propustnosti větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-312">Use a disk size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="f3f87-313">Zobrazit velikosti disků a jejich propustnost omezení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-313">See disk sizes and their Throughput limits here.</span></span> |<span data-ttu-id="f3f87-314">Použijte velikost disku, že nabízí škálování omezení větší než požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-314">Use a disk size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="f3f87-315">Zobrazit velikosti disků a jejich omezení sem.</span><span class="sxs-lookup"><span data-stu-id="f3f87-315">See disk sizes and their limits here.</span></span> |
| <span data-ttu-id="f3f87-316">**Virtuální počítač a limity škálování disku**</span><span class="sxs-lookup"><span data-stu-id="f3f87-316">**VM and Disk Scale Limits**</span></span> |<span data-ttu-id="f3f87-317">Vybrat velikost virtuálního počítače hello limit IOPS musí být větší než celkový počet IOPS doprovází prémiové disky úložiště připojené tooit.</span><span class="sxs-lookup"><span data-stu-id="f3f87-317">IOPS limit of hello VM size chosen should be greater than total IOPS driven by premium storage disks attached tooit.</span></span> |<span data-ttu-id="f3f87-318">Propustnost limit vybrat velikost virtuálního počítače hello musí být větší než celková propustnost doprovází prémiové disky úložiště připojené tooit.</span><span class="sxs-lookup"><span data-stu-id="f3f87-318">Throughput limit of hello VM size chosen should be greater than total Throughput driven by premium storage disks attached tooit.</span></span> |<span data-ttu-id="f3f87-319">Limity škálování služby vybrat velikost virtuálního počítače hello musí být větší limity škálování celkový disky úložiště připojené premium.</span><span class="sxs-lookup"><span data-stu-id="f3f87-319">Scale limits of hello VM size chosen must be greater than total scale limits of attached premium storage disks.</span></span> |
| <span data-ttu-id="f3f87-320">**Ukládání do mezipaměti na disku**</span><span class="sxs-lookup"><span data-stu-id="f3f87-320">**Disk Caching**</span></span> |<span data-ttu-id="f3f87-321">Povolit mezipaměť jen pro čtení na discích úložiště premium s tooget velkou operace čtení vyšší IOPS pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-321">Enable ReadOnly Cache on premium storage disks with Read heavy operations tooget higher Read IOPS.</span></span> | &nbsp; |<span data-ttu-id="f3f87-322">Povolte mezipaměť jen pro čtení na discích úložiště premium se připravené velkou operations tooget velmi nízkou latenci pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-322">Enable ReadOnly Cache on premium storage disks with Ready heavy operations tooget very low Read latencies.</span></span> |
| <span data-ttu-id="f3f87-323">**Prokládání disků**</span><span class="sxs-lookup"><span data-stu-id="f3f87-323">**Disk Striping**</span></span> |<span data-ttu-id="f3f87-324">Použít několik disků a jejich rozkládají společně tooget kombinované vyšší IOPS a omezení propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-324">Use multiple disks and stripe them together tooget a combined higher IOPS and Throughput limit.</span></span> <span data-ttu-id="f3f87-325">Všimněte si, že hello kombinovaný limit na jednu virtuální počítač musí být vyšší než hello kombinované omezení připojené prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-325">Note that hello combined limit per VM should be higher than hello combined limits of attached premium disks.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="f3f87-326">**Velikost stripe**</span><span class="sxs-lookup"><span data-stu-id="f3f87-326">**Stripe Size**</span></span> |<span data-ttu-id="f3f87-327">Menší velikost stripe pro náhodné malé vstupně-výstupní operace vzor vidět v aplikacích OLTP.</span><span class="sxs-lookup"><span data-stu-id="f3f87-327">Smaller stripe size for random small IO pattern seen in OLTP applications.</span></span> <span data-ttu-id="f3f87-328">Například pro aplikaci SQL Server OLTP použijte stripe velikost 64KB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-328">E.g., use stripe size of 64KB for SQL Server OLTP application.</span></span> |<span data-ttu-id="f3f87-329">Větší velikost stripe pro sekvenční velké vstupně-výstupní operace vzor vidět v aplikacích datového skladu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-329">Larger stripe size for sequential large IO pattern seen in Data Warehouse applications.</span></span> <span data-ttu-id="f3f87-330">Například použijte velikost 256KB prokládání pro aplikaci SQL Server datového skladu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-330">E.g., use 256KB stripe size for SQL Server Data warehouse application.</span></span> | &nbsp; |
| <span data-ttu-id="f3f87-331">**Více vláken**</span><span class="sxs-lookup"><span data-stu-id="f3f87-331">**Multithreading**</span></span> |<span data-ttu-id="f3f87-332">Použijte více vláken toopush vyšší počet požadavků tooPremium úložiště, které povede toohigher IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-332">Use multithreading toopush higher number of requests tooPremium Storage that will lead toohigher IOPS and Throughput.</span></span> <span data-ttu-id="f3f87-333">Například na serveru SQL Server nastavit vysokou hodnotu tooallocate MAXDOP více procesorů tooSQL serveru.</span><span class="sxs-lookup"><span data-stu-id="f3f87-333">For example, on SQL Server set a high MAXDOP value tooallocate more CPUs tooSQL Server.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="f3f87-334">**Hloubka fronty**</span><span class="sxs-lookup"><span data-stu-id="f3f87-334">**Queue Depth**</span></span> |<span data-ttu-id="f3f87-335">Větší hloubky fronty dosáhnout vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-335">Larger Queue Depth yields higher IOPS.</span></span> |<span data-ttu-id="f3f87-336">Větší hloubky fronty dosáhnout vyšší propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-336">Larger Queue Depth yields higher Throughput.</span></span> |<span data-ttu-id="f3f87-337">Menší hloubka fronty vypočítá nižší latenci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-337">Smaller Queue Depth yields lower latencies.</span></span> |

## <a name="nature-of-io-requests"></a><span data-ttu-id="f3f87-338">Povaha vstupně-výstupní požadavky</span><span class="sxs-lookup"><span data-stu-id="f3f87-338">Nature of IO Requests</span></span>
<span data-ttu-id="f3f87-339">Žádost o vstupně-výstupní operace je jednotka vstupně výstupní operace, které vaše aplikace bude provádět.</span><span class="sxs-lookup"><span data-stu-id="f3f87-339">An IO request is a unit of input/output operation that your application will be performing.</span></span> <span data-ttu-id="f3f87-340">Identifikace hello povaha vstupně-výstupní požadavky, náhodných nebo sekvenčních, čtení a zápisu, malý nebo velký, vám pomůže určit hello požadavky na výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-340">Identifying hello nature of IO requests, random or sequential, read or write, small or large, will help you determine hello performance requirements of your application.</span></span> <span data-ttu-id="f3f87-341">Je velmi důležité toounderstand hello povaha vstupně-výstupní požadavky, toomake hello správné rozhodnutí při navrhování infrastruktury aplikací.</span><span class="sxs-lookup"><span data-stu-id="f3f87-341">It is very important toounderstand hello nature of IO requests, toomake hello right decisions when designing your application infrastructure.</span></span>

<span data-ttu-id="f3f87-342">Velikost vstupně-výstupní operace je jedním z hello více důležité faktory.</span><span class="sxs-lookup"><span data-stu-id="f3f87-342">IO size is one of hello more important factors.</span></span> <span data-ttu-id="f3f87-343">Hello velikost vstupně-výstupní operace je velikost hello hello vstupně výstupní operace žádosti vygenerované vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-343">hello IO size is hello size of hello input/output operation request generated by your application.</span></span> <span data-ttu-id="f3f87-344">Hello velikost vstupně-výstupní operace má značný vliv na výkon, hlavně na hello IOPS a šířky pásma, která hello aplikace je možné tooachieve.</span><span class="sxs-lookup"><span data-stu-id="f3f87-344">hello IO size has a significant impact on performance especially on hello IOPS and Bandwidth that hello application is able tooachieve.</span></span> <span data-ttu-id="f3f87-345">Hello následující vzorec znázorňuje hello vztah mezi IOPS, velikost vstupně-výstupní operace a šířky pásma nebo propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-345">hello following formula shows hello relationship between IOPS, IO size and Bandwidth/Throughput.</span></span>  
    ![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="f3f87-346">Některé aplikace umožňují tooalter velikost jejich vstupně-výstupní operace, zatímco některé aplikace nepodporují.</span><span class="sxs-lookup"><span data-stu-id="f3f87-346">Some applications allow you tooalter their IO size, while some applications do not.</span></span> <span data-ttu-id="f3f87-347">Určuje hello optimální velikost vstupů/výstupů samotné například SQL Server a všechny knoflíky toochange neposkytuje uživatelé ho.</span><span class="sxs-lookup"><span data-stu-id="f3f87-347">For example, SQL Server determines hello optimal IO size itself, and does not provide users with any knobs toochange it.</span></span> <span data-ttu-id="f3f87-348">Na hello druhé straně, Oracle poskytuje parametr s názvem [DB\_BLOKOVAT\_velikost](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) pomocí které můžete nakonfigurovat hello velikost požadavku vstupně-výstupních operací hello databáze.</span><span class="sxs-lookup"><span data-stu-id="f3f87-348">On hello other hand, Oracle provides a parameter called [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) using which you can configure hello I/O request size of hello database.</span></span>

<span data-ttu-id="f3f87-349">Pokud používáte aplikaci, která jste toochange hello velikost vstupně-výstupní operace není povolena, použijte tento článek toooptimize hello výkonu klíčového ukazatele výkonu, který je nejdůležitější aplikace tooyour hello pokyny.</span><span class="sxs-lookup"><span data-stu-id="f3f87-349">If you are using an application, which does not allow you toochange hello IO size, use hello guidelines in this article toooptimize hello performance KPI that is most relevant tooyour application.</span></span> <span data-ttu-id="f3f87-350">Například:</span><span class="sxs-lookup"><span data-stu-id="f3f87-350">For example,</span></span>

* <span data-ttu-id="f3f87-351">OLTP aplikace vygeneruje miliony požadavků malé a náhodných vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-351">An OLTP application generates millions of small and random IO requests.</span></span> <span data-ttu-id="f3f87-352">požádá o toohandle tyto typ vstupně-výstupní operace, je třeba navrhnout vaše aplikace infrastruktury tooget vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-352">toohandle these type of IO requests, you must design your application infrastructure tooget higher IOPS.</span></span>  
* <span data-ttu-id="f3f87-353">Datového skladu aplikace generuje velké a sekvenčních vstupně-výstupní požadavky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-353">A data warehousing application generates large and sequential IO requests.</span></span> <span data-ttu-id="f3f87-354">toohandle tyto typ vstupně-výstupní požadavky, je třeba navrhnout vaše aplikace tooget infrastruktury větší šířku pásma a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-354">toohandle these type of IO requests, you must design your application infrastructure tooget higher Bandwidth or Throughput.</span></span>

<span data-ttu-id="f3f87-355">Pokud používáte aplikaci, která vám umožní toochange hello vstupně-výstupní operace velikost, použijte toto pravidlo pro hello vstupně-výstupní operace velikost kromě pokynů pro tooother výkonu</span><span class="sxs-lookup"><span data-stu-id="f3f87-355">If you are using an application, which allows you toochange hello IO size, use this rule of thumb for hello IO size in addition tooother performance guidelines,</span></span>

* <span data-ttu-id="f3f87-356">Menší velikost tooget vstupně-výstupní operace vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-356">Smaller IO size tooget higher IOPS.</span></span> <span data-ttu-id="f3f87-357">Například 8 KB pro aplikaci OLTP.</span><span class="sxs-lookup"><span data-stu-id="f3f87-357">For example, 8 KB for an OLTP application.</span></span>  
* <span data-ttu-id="f3f87-358">Větší velikost tooget vstupně-výstupní operace vyšší šířku pásma nebo propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-358">Larger IO size tooget higher Bandwidth/Throughput.</span></span> <span data-ttu-id="f3f87-359">Například 1 024 KB datového skladu aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-359">For example, 1024 KB for a data warehouse application.</span></span>

<span data-ttu-id="f3f87-360">Tady je příklad na tom, jak můžete vypočítat hello IOPS a propustnost nebo šířky pásma pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-360">Here is an example on how you can calculate hello IOPS and Throughput/Bandwidth for your application.</span></span> <span data-ttu-id="f3f87-361">Vezměte v úvahu aplikace pomocí P30 disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-361">Consider an application using a P30 disk.</span></span> <span data-ttu-id="f3f87-362">Hello maximální IOPS a propustnost nebo šířky pásma můžete dosáhnout P30 disku je 5000 IOPS a 200 MB za sekundu v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-362">hello maximum IOPS and Throughput/Bandwidth a P30 disk can achieve is 5000 IOPS and 200 MB per second respectively.</span></span> <span data-ttu-id="f3f87-363">Nyní Pokud vaše aplikace vyžaduje hello maximální IOPS z hello P30 disk a použít menší velikost vstupně-výstupní operace, jako je 8 KB hello výsledná šířky pásma, nebudete moct tooget je 40 MB za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-363">Now, if your application requires hello maximum IOPS from hello P30 disk and you use a smaller IO size like 8 KB, hello resulting Bandwidth you will be able tooget is 40 MB per second.</span></span> <span data-ttu-id="f3f87-364">Ale pokud vaše aplikace vyžaduje hello maximální propustnosti nebo šířky pásma z disku P30 a použijete větší velikost vstupně-výstupní operace, jako je 1024 KB, hello výsledné IOPS bude menší, 200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-364">However, if your application requires hello maximum Throughput/Bandwidth from P30 disk, and you use a larger IO size like 1024 KB, hello resulting IOPS will be less, 200 IOPS.</span></span> <span data-ttu-id="f3f87-365">Tedy vylaďte velikost vstupně-výstupní operace hello tak, že splňuje požadavek IOPS a propustnost nebo šířky obě aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-365">Therefore, tune hello IO size such that it meets both your application's IOPS and Throughput/Bandwidth requirement.</span></span> <span data-ttu-id="f3f87-366">Následující tabulka shrnuje různé velikosti vstupně-výstupní operace hello a jejich odpovídající IOPS a propustnost pro P30 disk.</span><span class="sxs-lookup"><span data-stu-id="f3f87-366">Table below summarizes hello different IO sizes and their corresponding IOPS and Throughput for a P30 disk.</span></span>

| <span data-ttu-id="f3f87-367">Požadavků aplikace</span><span class="sxs-lookup"><span data-stu-id="f3f87-367">Application Requirement</span></span> | <span data-ttu-id="f3f87-368">Velikost vstupně-výstupních operací</span><span class="sxs-lookup"><span data-stu-id="f3f87-368">I/O size</span></span> | <span data-ttu-id="f3f87-369">IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-369">IOPS</span></span> | <span data-ttu-id="f3f87-370">Propustnost nebo šířky pásma</span><span class="sxs-lookup"><span data-stu-id="f3f87-370">Throughput/Bandwidth</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-371">Maximální IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-371">Max IOPS</span></span> |<span data-ttu-id="f3f87-372">8 kB</span><span class="sxs-lookup"><span data-stu-id="f3f87-372">8 KB</span></span> |<span data-ttu-id="f3f87-373">5,000</span><span class="sxs-lookup"><span data-stu-id="f3f87-373">5,000</span></span> |<span data-ttu-id="f3f87-374">40 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-374">40 MB per second</span></span> |
| <span data-ttu-id="f3f87-375">Maximální propustnost</span><span class="sxs-lookup"><span data-stu-id="f3f87-375">Max Throughput</span></span> |<span data-ttu-id="f3f87-376">1024 KB</span><span class="sxs-lookup"><span data-stu-id="f3f87-376">1024 KB</span></span> |<span data-ttu-id="f3f87-377">200</span><span class="sxs-lookup"><span data-stu-id="f3f87-377">200</span></span> |<span data-ttu-id="f3f87-378">200 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-378">200 MB per second</span></span> |
| <span data-ttu-id="f3f87-379">Maximální propustnost + vysoké IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-379">Max Throughput + high IOPS</span></span> |<span data-ttu-id="f3f87-380">64 kB</span><span class="sxs-lookup"><span data-stu-id="f3f87-380">64 KB</span></span> |<span data-ttu-id="f3f87-381">3,200</span><span class="sxs-lookup"><span data-stu-id="f3f87-381">3,200</span></span> |<span data-ttu-id="f3f87-382">200 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-382">200 MB per second</span></span> |
| <span data-ttu-id="f3f87-383">Maximální IOPS + Vysoká propustnost</span><span class="sxs-lookup"><span data-stu-id="f3f87-383">Max IOPS + high Throughput</span></span> |<span data-ttu-id="f3f87-384">32 KB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-384">32 KB</span></span> |<span data-ttu-id="f3f87-385">5,000</span><span class="sxs-lookup"><span data-stu-id="f3f87-385">5,000</span></span> |<span data-ttu-id="f3f87-386">160 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-386">160 MB per second</span></span> |

<span data-ttu-id="f3f87-387">tooget IOPS a šířky pásma, vyšší než maximální hodnota hello úložiště disku jednoho premium, použijte více prémiové disky rozdělená společně.</span><span class="sxs-lookup"><span data-stu-id="f3f87-387">tooget IOPS and Bandwidth higher than hello maximum value of a single premium storage disk, use multiple premium disks striped together.</span></span> <span data-ttu-id="f3f87-388">Například rozkládají dva disky tooget P30 součet IOPS v 10 000 IOPS nebo kombinované propustnost 400 MB za sekundu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-388">For example, stripe two P30 disks tooget a combined IOPS of 10,000 IOPS or a combined Throughput of 400 MB per second.</span></span> <span data-ttu-id="f3f87-389">Jak je vysvětleno v další části hello, je nutné použít velikost virtuálního počítače, který podporuje hello kombinaci disku IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-389">As explained in hello next section, you must use a VM size that supports hello combined disk IOPS and Throughput.</span></span>

> [!NOTE]
> <span data-ttu-id="f3f87-390">Jak zvýšit buď IOPS nebo také zvyšuje propustnost hello jiné, zkontrolujte, zda že není stisknutí tlačítka propustnost nebo IOPS omezení hello disk nebo virtuální počítač při zvýšení buď jedné.</span><span class="sxs-lookup"><span data-stu-id="f3f87-390">As you increase either IOPS or Throughput hello other also increases, make sure you do not hit throughput or IOPS limits of hello disk or VM when increasing either one.</span></span>
>
>

<span data-ttu-id="f3f87-391">toowitness hello účinky velikost vstupů/výstupů na výkon aplikace, můžete spustit testu typovou úlohou nástroje na virtuální počítač a disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-391">toowitness hello effects of IO size on application performance, you can run benchmarking tools on your VM and disks.</span></span> <span data-ttu-id="f3f87-392">Vytvořit více testovacích bězích a použít jinou velikost vstupně-výstupní operace pro každé spuštění toosee hello dopad.</span><span class="sxs-lookup"><span data-stu-id="f3f87-392">Create multiple test runs and use different IO size for each run toosee hello impact.</span></span> <span data-ttu-id="f3f87-393">Odkazovat toohello [Benchmarking](#Benchmarking) oddíl hello konci tohoto článku Další podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-393">Refer toohello [Benchmarking](#Benchmarking) section at hello end of this article for more details.</span></span>

## <a name="high-scale-vm-sizes"></a><span data-ttu-id="f3f87-394">Měřítko velikosti virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="f3f87-394">High Scale VM Sizes</span></span>
<span data-ttu-id="f3f87-395">Když spustíte navrhování aplikace, jedním z první věcí toodo hello je, vyberte toohost virtuálních počítačů vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-395">When you start designing an application, one of hello first things toodo is, choose a VM toohost your application.</span></span> <span data-ttu-id="f3f87-396">Storage úrovně Premium se dodává s velikosti vysoké škálování virtuálního počítače, které můžete spustit aplikace vyžadující vyšší výpočetní výkon a vysokou místního disku vstupně-výstupní výkon.</span><span class="sxs-lookup"><span data-stu-id="f3f87-396">Premium Storage comes with High Scale VM sizes that can run applications requiring higher compute power and a high local disk I/O performance.</span></span> <span data-ttu-id="f3f87-397">Tyto virtuální počítače zadejte rychlejších procesorů vyšší poměr paměti jádra a Solid-State Drive (SSD) pro místní disk hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-397">These VMs provide faster processors, a higher memory-to-core ratio, and a Solid-State Drive (SSD) for hello local disk.</span></span> <span data-ttu-id="f3f87-398">Příklady vysoké virtuálních počítačů škálování. podpora Storage úrovně Premium jsou hello DS, DSv2 a GS řady virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-398">Examples of High Scale VMs supporting Premium Storage are hello DS, DSv2 and GS series VMs.</span></span>

<span data-ttu-id="f3f87-399">Vysoká škálování virtuálních počítačů jsou k dispozici v různých velikostech s různým počtem jader procesoru, paměti, operačního systému a velikost dočasné disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-399">High Scale VMs are available in different sizes with a different number of CPU cores, memory, OS and temporary disk size.</span></span> <span data-ttu-id="f3f87-400">Každý velikost virtuálního počítače má také maximální počet datových disků, můžete připojit toohello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-400">Each VM size also has maximum number of data disks that you can attach toohello VM.</span></span> <span data-ttu-id="f3f87-401">Proto hello vybraná velikost virtuálního počítače bude mít vliv na jakou kapacitu se zpracování, paměť a úložiště je k dispozici pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-401">Therefore, hello chosen VM size will affect how much processing, memory, and storage capacity is available for your application.</span></span> <span data-ttu-id="f3f87-402">Ovlivní také hello výpočetní a náklady na úložiště.</span><span class="sxs-lookup"><span data-stu-id="f3f87-402">It also affects hello Compute and Storage cost.</span></span> <span data-ttu-id="f3f87-403">Níže jsou například hello specifikace hello největší velikost virtuálního počítače v řady DS, DSv2 series a GS řady:</span><span class="sxs-lookup"><span data-stu-id="f3f87-403">For example, below are hello specifications of hello largest VM size in a DS series, DSv2 series and a GS series:</span></span>

| <span data-ttu-id="f3f87-404">Velikost virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="f3f87-404">VM size</span></span> | <span data-ttu-id="f3f87-405">Procesorová jádra</span><span class="sxs-lookup"><span data-stu-id="f3f87-405">CPU cores</span></span> | <span data-ttu-id="f3f87-406">Memory (Paměť)</span><span class="sxs-lookup"><span data-stu-id="f3f87-406">Memory</span></span> | <span data-ttu-id="f3f87-407">Velikosti disků virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="f3f87-407">VM disk sizes</span></span> | <span data-ttu-id="f3f87-408">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-408">Max.</span></span> <span data-ttu-id="f3f87-409">Datové disky</span><span class="sxs-lookup"><span data-stu-id="f3f87-409">data disks</span></span> | <span data-ttu-id="f3f87-410">Velikost mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-410">Cache size</span></span> | <span data-ttu-id="f3f87-411">IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-411">IOPS</span></span> | <span data-ttu-id="f3f87-412">Omezení šířky pásma vstupně-výstupní mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-412">Bandwidth Cache IO limits</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="f3f87-413">Standard_DS14</span><span class="sxs-lookup"><span data-stu-id="f3f87-413">Standard_DS14</span></span> |<span data-ttu-id="f3f87-414">16</span><span class="sxs-lookup"><span data-stu-id="f3f87-414">16</span></span> |<span data-ttu-id="f3f87-415">112 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-415">112 GB</span></span> |<span data-ttu-id="f3f87-416">OPERAČNÍHO SYSTÉMU = 1023 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-416">OS = 1023 GB</span></span> <br> <span data-ttu-id="f3f87-417">Místní SSD = 224 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-417">Local SSD = 224 GB</span></span> |<span data-ttu-id="f3f87-418">32</span><span class="sxs-lookup"><span data-stu-id="f3f87-418">32</span></span> |<span data-ttu-id="f3f87-419">576 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-419">576 GB</span></span> |<span data-ttu-id="f3f87-420">50 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-420">50,000 IOPS</span></span> <br> <span data-ttu-id="f3f87-421">512 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-421">512 MB per second</span></span> |<span data-ttu-id="f3f87-422">4000 IOPS a 33 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-422">4,000 IOPS and 33 MB per second</span></span> |
| <span data-ttu-id="f3f87-423">Standard_GS5</span><span class="sxs-lookup"><span data-stu-id="f3f87-423">Standard_GS5</span></span> |<span data-ttu-id="f3f87-424">32</span><span class="sxs-lookup"><span data-stu-id="f3f87-424">32</span></span> |<span data-ttu-id="f3f87-425">448 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-425">448 GB</span></span> |<span data-ttu-id="f3f87-426">OPERAČNÍHO SYSTÉMU = 1023 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-426">OS = 1023 GB</span></span> <br> <span data-ttu-id="f3f87-427">Místní SSD = 896 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-427">Local SSD = 896 GB</span></span> |<span data-ttu-id="f3f87-428">64</span><span class="sxs-lookup"><span data-stu-id="f3f87-428">64</span></span> |<span data-ttu-id="f3f87-429">4224 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-429">4224 GB</span></span> |<span data-ttu-id="f3f87-430">80 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-430">80,000 IOPS</span></span> <br> <span data-ttu-id="f3f87-431">2 000 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-431">2,000 MB per second</span></span> |<span data-ttu-id="f3f87-432">5 000 IOPS a 50 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-432">5,000 IOPS and 50 MB per second</span></span> |

<span data-ttu-id="f3f87-433">tooview úplný seznam všech dostupných velikostí virtuálních počítačů Azure odkazovat příliš[velikosti virtuálních počítačů Windows](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) nebo [velikosti virtuálního počítače s Linuxem](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f3f87-433">tooview a complete list of all available Azure VM sizes, refer too[Windows VM sizes](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="f3f87-434">Zvolte velikost virtuálního počítače, které naplňují a škálování tooyour potřeby požadavky na výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-434">Choose a VM size that can meet and scale tooyour desired application performance requirements.</span></span> <span data-ttu-id="f3f87-435">Kromě toho toothis, vezměte v úvahu následující důležité zvážit při výběru velikosti virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-435">In addition toothis, take into account following important considerations when choosing VM sizes.</span></span>

<span data-ttu-id="f3f87-436">*Limity škálování*</span><span class="sxs-lookup"><span data-stu-id="f3f87-436">*Scale Limits*</span></span>  
<span data-ttu-id="f3f87-437">Hello maximální IOPS omezení na virtuální počítač a na disk je jiné a nezávisle na sobě navzájem.</span><span class="sxs-lookup"><span data-stu-id="f3f87-437">hello maximum IOPS limits per VM and per disk are different and independent of each other.</span></span> <span data-ttu-id="f3f87-438">Ujistěte se, že aplikace hello je v souladu s limity hello hello virtuálních počítačů a také hello premium disky připojené tooit řídí IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-438">Make sure that hello application is driving IOPS within hello limits of hello VM as well as hello premium disks attached tooit.</span></span> <span data-ttu-id="f3f87-439">Výkon aplikace, jinak bude mít omezení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-439">Otherwise, application performance will experience throttling.</span></span>

<span data-ttu-id="f3f87-440">Jako příklad předpokládejme, že požadavek na aplikaci je delší než 4 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-440">As an example, suppose an application requirement is a maximum of 4,000 IOPS.</span></span> <span data-ttu-id="f3f87-441">tooachieve se můžete zřídit P30 disku na virtuálním počítači DS1.</span><span class="sxs-lookup"><span data-stu-id="f3f87-441">tooachieve this, you provision a P30 disk on a DS1 VM.</span></span> <span data-ttu-id="f3f87-442">Hello P30 disku může poskytovat too5 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-442">hello P30 disk can deliver up too5,000 IOPS.</span></span> <span data-ttu-id="f3f87-443">Hello DS1 virtuální počítač je však omezená too3, 200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-443">However, hello DS1 VM is limited too3,200 IOPS.</span></span> <span data-ttu-id="f3f87-444">V důsledku toho hello výkonu aplikací bude ovlivněna hello limitu virtuálních počítačů v 3,200 IOPS a bude snížení výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-444">Consequently, hello application performance will be constrained by hello VM limit at 3,200 IOPS and there will be degraded performance.</span></span> <span data-ttu-id="f3f87-445">tooprevent této situaci, vyberte virtuální počítač a velikost, která budou obě plnění aplikace požadavky na disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-445">tooprevent this situation, choose a VM and disk size that will both meet application requirements.</span></span>

<span data-ttu-id="f3f87-446">*Náklady na operace*</span><span class="sxs-lookup"><span data-stu-id="f3f87-446">*Cost of Operation*</span></span>  
<span data-ttu-id="f3f87-447">V mnoha případech je možné, že vaše celkové náklady na použití služby Premium Storage operace nižší než při použití standardní úložiště.</span><span class="sxs-lookup"><span data-stu-id="f3f87-447">In many cases, it is possible that your overall cost of operation using Premium Storage is lower than using Standard Storage.</span></span>

<span data-ttu-id="f3f87-448">Představte si třeba aplikace, které vyžadují 16 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-448">For example, consider an application requiring 16,000 IOPS.</span></span> <span data-ttu-id="f3f87-449">tooachieve tento výkon, budete potřebovat standardní\_virtuálního počítače Azure IaaS D14, které je možné maximální IOPS 16,000 pomocí 32 disků standardní úložiště 1 TB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-449">tooachieve this performance, you will need a Standard\_D14 Azure IaaS VM, which can give a maximum IOPS of 16,000 using 32 standard storage 1TB disks.</span></span> <span data-ttu-id="f3f87-450">Každý disk 1TB úložiště standard storage můžete dosáhnout maximálně 500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-450">Each 1TB standard storage disk can achieve a maximum of 500 IOPS.</span></span> <span data-ttu-id="f3f87-451">Hello odhadované náklady tohoto virtuálního počítače za měsíc bude 1,570 $.</span><span class="sxs-lookup"><span data-stu-id="f3f87-451">hello estimated cost of this VM per month will be $1,570.</span></span> <span data-ttu-id="f3f87-452">Hello měsíční náklady na 32 disků standardní úložiště bude 1,638 $.</span><span class="sxs-lookup"><span data-stu-id="f3f87-452">hello monthly cost of 32 standard storage disks will be $1,638.</span></span> <span data-ttu-id="f3f87-453">Hello předpokládaná doba celkové měsíční náklady budou 3,208 $.</span><span class="sxs-lookup"><span data-stu-id="f3f87-453">hello estimated total monthly cost will be $3,208.</span></span>

<span data-ttu-id="f3f87-454">Ale pokud budete hostovaný hello, stejná aplikace na Storage úrovně Premium, budete potřebovat menší velikost virtuálního počítače a méně disky úložiště premium, proto snižuje celkové náklady hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-454">However, if you hosted hello same application on Premium Storage, you will need a smaller VM size and fewer premium storage disks, thus reducing hello overall cost.</span></span> <span data-ttu-id="f3f87-455">Standardní\_DS13 virtuálních počítačů můžete splňovat hello 16,000 IOPS požadavek pomocí čtyř P30 disků.</span><span class="sxs-lookup"><span data-stu-id="f3f87-455">A Standard\_DS13 VM can meet hello 16,000 IOPS requirement using four P30 disks.</span></span> <span data-ttu-id="f3f87-456">Hello DS13 virtuální počítač má maximální IOPS 25,600 a každý disk P30 maximální IOPS 5 000.</span><span class="sxs-lookup"><span data-stu-id="f3f87-456">hello DS13 VM has a maximum IOPS of 25,600 and each P30 disk has a maximum IOPS of 5,000.</span></span> <span data-ttu-id="f3f87-457">Celkově platí, tuto konfiguraci můžete dosáhnout 5 000 × 4 = 20 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-457">Overall, this configuration can achieve 5,000 x 4 = 20,000 IOPS.</span></span> <span data-ttu-id="f3f87-458">Hello odhadované náklady tohoto virtuálního počítače za měsíc bude 1,003 $.</span><span class="sxs-lookup"><span data-stu-id="f3f87-458">hello estimated cost of this VM per month will be $1,003.</span></span> <span data-ttu-id="f3f87-459">Hello měsíční náklady na čtyři disků úložiště premium P30 bude 544.34 $.</span><span class="sxs-lookup"><span data-stu-id="f3f87-459">hello monthly cost of four P30 premium storage disks will be $544.34.</span></span> <span data-ttu-id="f3f87-460">Hello předpokládaná doba celkové měsíční náklady budou 1,544 $.</span><span class="sxs-lookup"><span data-stu-id="f3f87-460">hello estimated total monthly cost will be $1,544.</span></span>

<span data-ttu-id="f3f87-461">Následující tabulka shrnuje rozpis nákladů hello tohoto scénáře pro Standard a Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="f3f87-461">Table below summarizes hello cost breakdown of this scenario for Standard and Premium Storage.</span></span>

| &nbsp; | <span data-ttu-id="f3f87-462">**Standard**</span><span class="sxs-lookup"><span data-stu-id="f3f87-462">**Standard**</span></span> | <span data-ttu-id="f3f87-463">**Premium**</span><span class="sxs-lookup"><span data-stu-id="f3f87-463">**Premium**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f3f87-464">**Náklady virtuálního počítače za měsíc**</span><span class="sxs-lookup"><span data-stu-id="f3f87-464">**Cost of VM per month**</span></span> |<span data-ttu-id="f3f87-465">$1,570.58 (standardní\_D14)</span><span class="sxs-lookup"><span data-stu-id="f3f87-465">$1,570.58 (Standard\_D14)</span></span> |<span data-ttu-id="f3f87-466">$1,003.66 (standardní\_DS13)</span><span class="sxs-lookup"><span data-stu-id="f3f87-466">$1,003.66 (Standard\_DS13)</span></span> |
| <span data-ttu-id="f3f87-467">**Ceny disků za měsíc**</span><span class="sxs-lookup"><span data-stu-id="f3f87-467">**Cost of Disks per month**</span></span> |<span data-ttu-id="f3f87-468">1,638.40 (disky 32 × 1 TB)</span><span class="sxs-lookup"><span data-stu-id="f3f87-468">$1,638.40 (32 x 1 TB disks)</span></span> |<span data-ttu-id="f3f87-469">544.34 (4 disky x P30)</span><span class="sxs-lookup"><span data-stu-id="f3f87-469">$544.34 (4 x P30 disks)</span></span> |
| <span data-ttu-id="f3f87-470">**Celkové náklady za měsíc**</span><span class="sxs-lookup"><span data-stu-id="f3f87-470">**Overall Cost per month**</span></span> |<span data-ttu-id="f3f87-471">$3,208.98</span><span class="sxs-lookup"><span data-stu-id="f3f87-471">$3,208.98</span></span> |<span data-ttu-id="f3f87-472">$1,544.34</span><span class="sxs-lookup"><span data-stu-id="f3f87-472">$1,544.34</span></span> |

<span data-ttu-id="f3f87-473">*Distribucích systému Linux*</span><span class="sxs-lookup"><span data-stu-id="f3f87-473">*Linux Distros*</span></span>  

<span data-ttu-id="f3f87-474">S Azure Premium Storage, získáte hello stejnou úroveň výkonu pro virtuální počítače se systémem Windows a Linux.</span><span class="sxs-lookup"><span data-stu-id="f3f87-474">With Azure Premium Storage, you get hello same level of Performance for VMs running Windows and Linux.</span></span> <span data-ttu-id="f3f87-475">Podporujeme mnoho typů distribucích systému Linux, a zobrazí úplný seznam hello [zde](../../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f3f87-475">We support many flavors of Linux distros, and you can see hello complete list [here](../../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="f3f87-476">Je důležité, že je lepší použít jiný distribucích toonote vhodné pro různé typy úloh.</span><span class="sxs-lookup"><span data-stu-id="f3f87-476">It is important toonote that different distros are better suited for different types of workloads.</span></span> <span data-ttu-id="f3f87-477">Zobrazí se různé úrovně výkonu v závislosti na hello distro, které vaše úlohy běží na.</span><span class="sxs-lookup"><span data-stu-id="f3f87-477">You will see different levels of performance depending on hello distro your workload is running on.</span></span> <span data-ttu-id="f3f87-478">Testování hello distribucích systému Linux s vaší aplikací a zvolte hello jeden, který je nejvhodnější.</span><span class="sxs-lookup"><span data-stu-id="f3f87-478">Test hello Linux distros with your application and choose hello one that works best.</span></span>

<span data-ttu-id="f3f87-479">Pokud Premium Storage s Linuxem, zkontrolujte nejnovější aktualizace hello o požadované ovladače tooensure vysoký výkon.</span><span class="sxs-lookup"><span data-stu-id="f3f87-479">When running Linux with Premium Storage, check hello latest updates about required drivers tooensure high performance.</span></span>

## <a name="premium-storage-disk-sizes"></a><span data-ttu-id="f3f87-480">Velikosti disků úložiště Premium</span><span class="sxs-lookup"><span data-stu-id="f3f87-480">Premium Storage Disk Sizes</span></span>
<span data-ttu-id="f3f87-481">Azure Premium Storage nabízí aktuálně sedm velikosti disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-481">Azure Premium Storage offers seven disk sizes currently.</span></span> <span data-ttu-id="f3f87-482">Velikost každého disku může mít jiné měřítko pro IOPS, šířky pásma a úložiště.</span><span class="sxs-lookup"><span data-stu-id="f3f87-482">Each disk size has a different scale limit for IOPS, Bandwidth and Storage.</span></span> <span data-ttu-id="f3f87-483">Vyberte správnou velikost disku úložiště Premium hello v závislosti na požadavcích aplikace hello a vysokým Škálováním hello velikost virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="f3f87-483">Choose hello right Premium Storage Disk size depending on hello application requirements and hello high scale VM size.</span></span> <span data-ttu-id="f3f87-484">Následující tabulka Hello ukazuje hello sedm disků velikosti a jejich funkce.</span><span class="sxs-lookup"><span data-stu-id="f3f87-484">hello table below shows hello seven disks sizes and their capabilities.</span></span> <span data-ttu-id="f3f87-485">P4 a P6 velikosti jsou aktuálně podporovány pouze pro spravované disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-485">P4 and P6 sizes are currently only supported for Managed Disks.</span></span>

| <span data-ttu-id="f3f87-486">Disky typu Premium</span><span class="sxs-lookup"><span data-stu-id="f3f87-486">Premium Disks Type</span></span>  | <span data-ttu-id="f3f87-487">P4</span><span class="sxs-lookup"><span data-stu-id="f3f87-487">P4</span></span>    | <span data-ttu-id="f3f87-488">P6</span><span class="sxs-lookup"><span data-stu-id="f3f87-488">P6</span></span>    | <span data-ttu-id="f3f87-489">P10</span><span class="sxs-lookup"><span data-stu-id="f3f87-489">P10</span></span>   | <span data-ttu-id="f3f87-490">P20</span><span class="sxs-lookup"><span data-stu-id="f3f87-490">P20</span></span>   | <span data-ttu-id="f3f87-491">P30</span><span class="sxs-lookup"><span data-stu-id="f3f87-491">P30</span></span>   | <span data-ttu-id="f3f87-492">P40</span><span class="sxs-lookup"><span data-stu-id="f3f87-492">P40</span></span>   | <span data-ttu-id="f3f87-493">P50</span><span class="sxs-lookup"><span data-stu-id="f3f87-493">P50</span></span>   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| <span data-ttu-id="f3f87-494">Velikost disku</span><span class="sxs-lookup"><span data-stu-id="f3f87-494">Disk size</span></span>           | <span data-ttu-id="f3f87-495">32 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-495">32 GB</span></span> | <span data-ttu-id="f3f87-496">64 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-496">64 GB</span></span> | <span data-ttu-id="f3f87-497">128 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-497">128 GB</span></span>| <span data-ttu-id="f3f87-498">512 GB</span><span class="sxs-lookup"><span data-stu-id="f3f87-498">512 GB</span></span>            | <span data-ttu-id="f3f87-499">1024 GB (1 TB)</span><span class="sxs-lookup"><span data-stu-id="f3f87-499">1024 GB (1 TB)</span></span>    | <span data-ttu-id="f3f87-500">2 048 GB (2 TB)</span><span class="sxs-lookup"><span data-stu-id="f3f87-500">2048 GB (2 TB)</span></span>    | <span data-ttu-id="f3f87-501">4095 GB (4 TB)</span><span class="sxs-lookup"><span data-stu-id="f3f87-501">4095 GB (4 TB)</span></span>    | 
| <span data-ttu-id="f3f87-502">Vstupně-výstupní operace za sekundu / disk</span><span class="sxs-lookup"><span data-stu-id="f3f87-502">IOPS per disk</span></span>       | <span data-ttu-id="f3f87-503">120</span><span class="sxs-lookup"><span data-stu-id="f3f87-503">120</span></span>   | <span data-ttu-id="f3f87-504">240</span><span class="sxs-lookup"><span data-stu-id="f3f87-504">240</span></span>   | <span data-ttu-id="f3f87-505">500</span><span class="sxs-lookup"><span data-stu-id="f3f87-505">500</span></span>   | <span data-ttu-id="f3f87-506">2300</span><span class="sxs-lookup"><span data-stu-id="f3f87-506">2300</span></span>              | <span data-ttu-id="f3f87-507">5000</span><span class="sxs-lookup"><span data-stu-id="f3f87-507">5000</span></span>              | <span data-ttu-id="f3f87-508">7500</span><span class="sxs-lookup"><span data-stu-id="f3f87-508">7500</span></span>              | <span data-ttu-id="f3f87-509">7500</span><span class="sxs-lookup"><span data-stu-id="f3f87-509">7500</span></span>              | 
| <span data-ttu-id="f3f87-510">Propustnost / disk</span><span class="sxs-lookup"><span data-stu-id="f3f87-510">Throughput per disk</span></span> | <span data-ttu-id="f3f87-511">25 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-511">25 MB per second</span></span>  | <span data-ttu-id="f3f87-512">50 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-512">50 MB per second</span></span>  | <span data-ttu-id="f3f87-513">100 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-513">100 MB per second</span></span> | <span data-ttu-id="f3f87-514">150 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-514">150 MB per second</span></span> | <span data-ttu-id="f3f87-515">200 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-515">200 MB per second</span></span> | <span data-ttu-id="f3f87-516">250 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-516">250 MB per second</span></span> | <span data-ttu-id="f3f87-517">250 MB za sekundu</span><span class="sxs-lookup"><span data-stu-id="f3f87-517">250 MB per second</span></span> | 


<span data-ttu-id="f3f87-518">Kolik disků, které zvolíte, závisí na disku hello velikost zvolená.</span><span class="sxs-lookup"><span data-stu-id="f3f87-518">How many disks you choose depends on hello disk size chosen.</span></span> <span data-ttu-id="f3f87-519">Můžete použít jeden disk P50 nebo více disků toomeet P10 požadavků vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-519">You could use a single P50 disk or multiple P10 disks toomeet your application requirement.</span></span> <span data-ttu-id="f3f87-520">Brát v níže uvedených při výběru hello důležité informace o účtu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-520">Take into account considerations listed below when making hello choice.</span></span>

<span data-ttu-id="f3f87-521">*Limity škálování (IOPS a propustnost)*</span><span class="sxs-lookup"><span data-stu-id="f3f87-521">*Scale Limits (IOPS and Throughput)*</span></span>  
<span data-ttu-id="f3f87-522">Hello IOPS a propustnost limity velikosti disku každého Premium je jiné a nezávislé z hello limity škálování virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-522">hello IOPS and Throughput limits of each Premium disk size is different and independent from hello VM scale limits.</span></span> <span data-ttu-id="f3f87-523">Zkontrolujte, zda text hello celkový počet IOPS a propustnost z hello disků jsou v souladu s limity škálování hello vybraná velikost virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="f3f87-523">Make sure that hello total IOPS and Throughput from hello disks are within scale limits of hello chosen VM size.</span></span>

<span data-ttu-id="f3f87-524">Například, pokud požadavek na aplikaci je maximálně 250 MB za sekundu, propustnosti a používáte DS4 virtuální počítač s jediný disk P30.</span><span class="sxs-lookup"><span data-stu-id="f3f87-524">For example, if an application requirement is a maximum of 250 MB/sec Throughput and you are using a DS4 VM with a single P30 disk.</span></span> <span data-ttu-id="f3f87-525">Hello DS4 virtuálních počítačů můžete uvolňovat propustnost too256 MB/s.</span><span class="sxs-lookup"><span data-stu-id="f3f87-525">hello DS4 VM can give up too256 MB/sec Throughput.</span></span> <span data-ttu-id="f3f87-526">Jediný disk P30 má však propustnost limit 200 MB/s. V důsledku toho budou se aplikace hello omezené na 200 MB/s z důvodu omezení toohello disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-526">However, a single P30 disk has Throughput limit of 200 MB/sec. Consequently, hello application will be constrained at 200 MB/sec due toohello disk limit.</span></span> <span data-ttu-id="f3f87-527">tooovercome tento limit, přidělení více než jeden data toohello disky virtuálních počítačů nebo změně velikosti disků tooP40 nebo P50.</span><span class="sxs-lookup"><span data-stu-id="f3f87-527">tooovercome this limit, provision more than one data disks toohello VM or resize your disks tooP40 or P50.</span></span>

> [!NOTE]
> <span data-ttu-id="f3f87-528">Čtení obsloužených hello mezipaměti nejsou součástí hello disku IOPS a propustnost, proto není subjektu toodisk omezení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-528">Reads served by hello cache are not included in hello disk IOPS and Throughput, hence not subject toodisk limits.</span></span> <span data-ttu-id="f3f87-529">Mezipaměť obsahuje samostatné IOPS a propustnost limitu na virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="f3f87-529">Cache has its separate IOPS and Throughput limit per VM.</span></span>
>
> <span data-ttu-id="f3f87-530">Například původně čtení a zápisu jsou 60MB/s a 40MB za sekundu v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-530">For example, initially your reads and writes are 60MB/sec and 40MB/sec respectively.</span></span> <span data-ttu-id="f3f87-531">V průběhu času hello mezipaměti warms a slouží více a více hello čtení z mezipaměti hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-531">Over time, hello cache warms up and serves more and more of hello reads from hello cache.</span></span> <span data-ttu-id="f3f87-532">Potom můžete získat zápisu vyšší propustnost disku hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-532">Then, you can get higher write Throughput from hello disk.</span></span>
>
>

<span data-ttu-id="f3f87-533">*Počet disků*</span><span class="sxs-lookup"><span data-stu-id="f3f87-533">*Number of Disks*</span></span>  
<span data-ttu-id="f3f87-534">Určete počet hello disky, které budete potřebovat tím, že posoudí požadavky aplikací.</span><span class="sxs-lookup"><span data-stu-id="f3f87-534">Determine hello number of disks you will need by assessing application requirements.</span></span> <span data-ttu-id="f3f87-535">Limit velikost každého virtuálního počítače je také na hello počet disků, můžete připojit toohello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-535">Each VM size also has a limit on hello number of disks that you can attach toohello VM.</span></span> <span data-ttu-id="f3f87-536">Obvykle je to dvakrát hello počet jader.</span><span class="sxs-lookup"><span data-stu-id="f3f87-536">Typically, this is twice hello number of cores.</span></span> <span data-ttu-id="f3f87-537">Ujistěte se, že hello velikost virtuálního počítače, který zvolíte, může podporovat hello počet disků, které jsou potřeba.</span><span class="sxs-lookup"><span data-stu-id="f3f87-537">Ensure that hello VM size you choose can support hello number of disks needed.</span></span>

<span data-ttu-id="f3f87-538">Pamatujte si, že se hello Storage úrovně Premium disky mají vyšší výkon možnosti porovnání tooStandard úložiště disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-538">Remember, hello Premium Storage disks have higher performance capabilities compared tooStandard Storage disks.</span></span> <span data-ttu-id="f3f87-539">Proto pokud migrujete aplikace z virtuálního počítače Azure IaaS pomocí standardního úložiště tooPremium úložiště, bude pravděpodobně nutné méně prémiové disky tooachieve hello stejný nebo i vyšší výkon pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-539">Therefore, if you are migrating your application from Azure IaaS VM using Standard Storage tooPremium Storage, you will likely need fewer premium disks tooachieve hello same or higher performance for your application.</span></span>

## <a name="disk-caching"></a><span data-ttu-id="f3f87-540">Ukládání do mezipaměti na disku</span><span class="sxs-lookup"><span data-stu-id="f3f87-540">Disk Caching</span></span>
<span data-ttu-id="f3f87-541">Vysoká škálování virtuálních počítačů, které využívají Storage úrovně Premium mají vícevrstvé ukládání do mezipaměti technologie názvem BlobCache.</span><span class="sxs-lookup"><span data-stu-id="f3f87-541">High Scale VMs that leverage Azure Premium Storage have a multi-tier caching technology called BlobCache.</span></span> <span data-ttu-id="f3f87-542">BlobCache používá kombinaci hello RAM virtuálního počítače a místní SSD pro ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-542">BlobCache uses a combination of hello Virtual Machine RAM and local SSD for caching.</span></span> <span data-ttu-id="f3f87-543">Tato mezipaměť je k dispozici pro trvalé a místní disky virtuálních počítačů hello hello Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="f3f87-543">This cache is available for hello Premium Storage persistent disks and hello VM local disks.</span></span> <span data-ttu-id="f3f87-544">Ve výchozím nastavení je toto nastavení mezipaměti nastavené tooRead a zápis pro disky operačního systému a jen pro čtení pro datové disky hostované na Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="f3f87-544">By default, this cache setting is set tooRead/Write for OS disks and ReadOnly for data disks hosted on Premium Storage.</span></span> <span data-ttu-id="f3f87-545">S disků na discích úložiště Premium hello povoleno ukládání do mezipaměti, hello měřítko virtuální počítače můžete dosáhnout velmi vysoké úrovně výkonu, které překračují hello základní výkon disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-545">With disk caching enabled on hello Premium Storage disks, hello high scale VMs can achieve extremely high levels of performance that exceed hello underlying disk performance.</span></span>

> [!WARNING]
> <span data-ttu-id="f3f87-546">Změna nastavení mezipaměti hello Azure disku odpojí a znovu připojí hello cílový disk.</span><span class="sxs-lookup"><span data-stu-id="f3f87-546">Changing hello cache setting of an Azure disk detaches and re-attaches hello target disk.</span></span> <span data-ttu-id="f3f87-547">Pokud je disk operačního systému hello, hello virtuální počítač se restartuje.</span><span class="sxs-lookup"><span data-stu-id="f3f87-547">If it is hello operating system disk, hello VM is restarted.</span></span> <span data-ttu-id="f3f87-548">Zastavte všechny aplikace a služby, které by mohly mít dopad tento přerušení před změnou nastavení mezipaměti hello disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-548">Stop all applications/services that might be affected by this disruption before changing hello disk cache setting.</span></span>
>
>

<span data-ttu-id="f3f87-549">Další informace o tom, jak funguje BlobCache, toolearn odkazovat toohello uvnitř [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) příspěvku na blogu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-549">toolearn more about how BlobCache works, refer toohello Inside [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blog post.</span></span>

<span data-ttu-id="f3f87-550">Je důležité tooenable mezipaměti na hello správnou sadu disků.</span><span class="sxs-lookup"><span data-stu-id="f3f87-550">It is important tooenable cache on hello right set of disks.</span></span> <span data-ttu-id="f3f87-551">Tom, jestli by měl povolit ukládání do mezipaměti na disku na premium disk nebo nebude závisí na vzor zatížení hello tohoto disku bude zpracovávat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-551">Whether you should enable disk caching on a premium disk or not will depend on hello workload pattern that disk will be handling.</span></span> <span data-ttu-id="f3f87-552">Následující tabulka zobrazuje hello výchozí nastavení mezipaměti pro disky operačního systému a Data.</span><span class="sxs-lookup"><span data-stu-id="f3f87-552">Table below shows hello default cache settings for OS and Data disks.</span></span>

| <span data-ttu-id="f3f87-553">**Typ disku**</span><span class="sxs-lookup"><span data-stu-id="f3f87-553">**Disk Type**</span></span> | <span data-ttu-id="f3f87-554">**Výchozí nastavení mezipaměti**</span><span class="sxs-lookup"><span data-stu-id="f3f87-554">**Default Cache Setting**</span></span> |
| --- | --- |
| <span data-ttu-id="f3f87-555">Disk OS</span><span class="sxs-lookup"><span data-stu-id="f3f87-555">OS disk</span></span> |<span data-ttu-id="f3f87-556">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="f3f87-556">ReadWrite</span></span> |
| <span data-ttu-id="f3f87-557">Datový disk</span><span class="sxs-lookup"><span data-stu-id="f3f87-557">Data disk</span></span> |<span data-ttu-id="f3f87-558">Žádný</span><span class="sxs-lookup"><span data-stu-id="f3f87-558">None</span></span> |

<span data-ttu-id="f3f87-559">Následující jsou hello nastavení mezipaměti doporučené disku pro datové disky</span><span class="sxs-lookup"><span data-stu-id="f3f87-559">Following are hello recommended disk cache settings for data disks,</span></span>

| <span data-ttu-id="f3f87-560">**Nastavení ukládání do mezipaměti na disku**</span><span class="sxs-lookup"><span data-stu-id="f3f87-560">**Disk Caching Setting**</span></span> | <span data-ttu-id="f3f87-561">**Doporučení když toouse toto nastavení**</span><span class="sxs-lookup"><span data-stu-id="f3f87-561">**Recommendation on when toouse this setting**</span></span> |
| --- | --- |
| <span data-ttu-id="f3f87-562">Žádný</span><span class="sxs-lookup"><span data-stu-id="f3f87-562">None</span></span> |<span data-ttu-id="f3f87-563">Konfigurace mezipaměti hostitele jako None jen pro zápis a zápis náročné disků.</span><span class="sxs-lookup"><span data-stu-id="f3f87-563">Configure host-cache as None for write-only and write-heavy disks.</span></span> |
| <span data-ttu-id="f3f87-564">Jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="f3f87-564">ReadOnly</span></span> |<span data-ttu-id="f3f87-565">Konfigurace mezipaměti hostitele jako jen pro čtení pro disky jen pro čtení a zápisu pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-565">Configure host-cache as ReadOnly for read-only and read-write disks.</span></span> |
| <span data-ttu-id="f3f87-566">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="f3f87-566">ReadWrite</span></span> |<span data-ttu-id="f3f87-567">Konfigurace mezipaměti hostitele ReadWrite pouze v případě, že vaše aplikace zpracovává správně zápisu do mezipaměti datových toopersistent disků v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="f3f87-567">Configure host-cache as ReadWrite only if your application properly  handles writing cached data toopersistent disks when needed.</span></span> |

<span data-ttu-id="f3f87-568">*Jen pro čtení*</span><span class="sxs-lookup"><span data-stu-id="f3f87-568">*ReadOnly*</span></span>  
<span data-ttu-id="f3f87-569">Konfigurace ukládání do mezipaměti na Storage úrovně Premium data disky určené jen pro čtení, můžete dosáhnout nízkou latenci pro čtení a získat velmi vysoké IOPS pro čtení a propustnost pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-569">By configuring ReadOnly caching on Premium Storage data disks, you can achieve low Read latency and get very high Read IOPS and Throughput for your application.</span></span> <span data-ttu-id="f3f87-570">Toto je z důvodu ze dvou důvodů</span><span class="sxs-lookup"><span data-stu-id="f3f87-570">This is due two reasons,</span></span>

1. <span data-ttu-id="f3f87-571">Čtení provést z mezipaměti, která je na paměť virtuálního počítače hello a místní SSD, je mnohem rychlejší než čtení z hello datový disk, který je na hello úložiště objektů blob Azure.</span><span class="sxs-lookup"><span data-stu-id="f3f87-571">Reads performed from cache, which is on hello VM memory and local SSD, are much faster than reads from hello data disk, which is on hello Azure blob storage.</span></span>  
2. <span data-ttu-id="f3f87-572">Storage úrovně Premium nepočítá hello čtení obsluhovat z mezipaměti směrem hello disku IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-572">Premium Storage does not count hello Reads served from cache, towards hello disk IOPS and Throughput.</span></span> <span data-ttu-id="f3f87-573">Aplikace je tedy možné tooachieve vyšší celkový počet IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-573">Therefore, your application is able tooachieve higher total IOPS and Throughput.</span></span>

<span data-ttu-id="f3f87-574">*ReadWrite*</span><span class="sxs-lookup"><span data-stu-id="f3f87-574">*ReadWrite*</span></span>  
<span data-ttu-id="f3f87-575">Hello OS disky mají ve výchozím nastavení ReadWrite povoleno ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-575">By default, hello OS disks have ReadWrite caching enabled.</span></span> <span data-ttu-id="f3f87-576">Nedávno jsme doplnili podporu pro ukládání do mezipaměti na data i disky v režimu ReadWrite.</span><span class="sxs-lookup"><span data-stu-id="f3f87-576">We have recently added support for ReadWrite caching on data disks as well.</span></span> <span data-ttu-id="f3f87-577">Používáte-li ukládání do mezipaměti v režimu ReadWrite, musíte mít správný způsob toowrite hello dat z mezipaměti toopersistent disků.</span><span class="sxs-lookup"><span data-stu-id="f3f87-577">If you are using ReadWrite caching, you must have a proper way toowrite hello data from cache toopersistent disks.</span></span> <span data-ttu-id="f3f87-578">Například popisovačů systému SQL Server zápisu do mezipaměti datových disků trvalé úložiště toohello svoje vlastní.</span><span class="sxs-lookup"><span data-stu-id="f3f87-578">For example, SQL Server handles writing cached data toohello persistent storage disks on its own.</span></span> <span data-ttu-id="f3f87-579">Pomocí aplikace, která zpracovává zachování hello ReadWrite mezipaměti požadované dat může vést ke ztrátě toodata, pokud dojde k chybě hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-579">Using ReadWrite cache with an application that does not handle persisting hello required data can lead toodata loss, if hello VM crashes.</span></span>

<span data-ttu-id="f3f87-580">Například můžete použít tyto pokyny tooSQL serveru systémem Storage úrovně Premium provedením následujících hello</span><span class="sxs-lookup"><span data-stu-id="f3f87-580">As an example, you can apply these guidelines tooSQL Server running on Premium Storage by doing hello following,</span></span>

1. <span data-ttu-id="f3f87-581">Konfigurace mezipaměti "Jen pro čtení" na discích úložiště premium hostování datových souborů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-581">Configure "ReadOnly" cache on premium storage disks hosting data files.</span></span>  
   <span data-ttu-id="f3f87-582">a.</span><span class="sxs-lookup"><span data-stu-id="f3f87-582">a.</span></span>  <span data-ttu-id="f3f87-583">Hello rychlé čte z doba dotazu systému SQL Server nižší hello mezipaměti vzhledem k tomu, že data stránky jsou mnohem rychleji načteny z mezipaměti porovnání toodirectly hello z hello datových disků.</span><span class="sxs-lookup"><span data-stu-id="f3f87-583">hello fast reads from cache lower hello SQL Server query time since data pages are retrieved much faster from hello cache compared toodirectly from hello data disks.</span></span>  
   <span data-ttu-id="f3f87-584">b.</span><span class="sxs-lookup"><span data-stu-id="f3f87-584">b.</span></span>  <span data-ttu-id="f3f87-585">Obsluhuje čtení z mezipaměti, znamená, že není k dispozici z premium datových disků ke zvýšení propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-585">Serving reads from cache, means there is additional Throughput available from premium data disks.</span></span> <span data-ttu-id="f3f87-586">SQL Server můžete použít tento ke zvýšení propustnosti směrem načítání více datových stránek a další operace, jako je zálohování a obnovení, dávky zatížení, a znovu sestaví index.</span><span class="sxs-lookup"><span data-stu-id="f3f87-586">SQL Server can use this additional Throughput towards retrieving more data pages and other operations like backup/restore, batch loads, and index rebuilds.</span></span>  
2. <span data-ttu-id="f3f87-587">Konfigurace "Žádný" mezipaměti na storage úrovně premium disky hostování hello soubory protokolu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-587">Configure "None" cache on premium storage disks hosting hello log files.</span></span>  
   <span data-ttu-id="f3f87-588">a.</span><span class="sxs-lookup"><span data-stu-id="f3f87-588">a.</span></span>  <span data-ttu-id="f3f87-589">Soubory protokolů mají především zápisu náročná operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-589">Log files have primarily write-heavy operations.</span></span> <span data-ttu-id="f3f87-590">Proto že nejsou nijak přínosné hello mezipaměti jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-590">Therefore, they do not benefit from hello ReadOnly cache.</span></span>

## <a name="disk-striping"></a><span data-ttu-id="f3f87-591">Prokládání disků</span><span class="sxs-lookup"><span data-stu-id="f3f87-591">Disk Striping</span></span>
<span data-ttu-id="f3f87-592">Když může být vysoká měřítka, které je připojený virtuální počítač s několika premium trvalé disky úložiště, disky hello rozdělená společně tooaggregate jejich IOPs, šířky pásma a kapacity úložiště.</span><span class="sxs-lookup"><span data-stu-id="f3f87-592">When a high scale VM is attached with several premium storage persistent disks, hello disks can be striped together tooaggregate their IOPs, bandwidth, and storage capacity.</span></span>

<span data-ttu-id="f3f87-593">V systému Windows můžete použít prostory úložiště toostripe disky společně.</span><span class="sxs-lookup"><span data-stu-id="f3f87-593">On Windows, you can use Storage Spaces toostripe disks together.</span></span> <span data-ttu-id="f3f87-594">Je nutné nakonfigurovat jeden sloupec pro každý disk ve fondu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-594">You must configure one column for each disk in a pool.</span></span> <span data-ttu-id="f3f87-595">V opačném hello celkový výkon prokládaný svazek může být nižší, než se očekávalo, z důvodu toouneven distribuce přenosů mezi disky hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-595">Otherwise, hello overall performance of striped volume can be lower than expected, due toouneven distribution of traffic across hello disks.</span></span>

<span data-ttu-id="f3f87-596">Důležité: Pomocí uživatelského rozhraní správce serveru, můžete nastavit hello celkový počet sloupců se too8 prokládané svazku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-596">Important: Using Server Manager UI, you can set hello total number of columns up too8 for a striped volume.</span></span> <span data-ttu-id="f3f87-597">Při připojení více než 8 disky, pomocí prostředí PowerShell toocreate hello svazku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-597">When attaching more than 8 disks, use PowerShell toocreate hello volume.</span></span> <span data-ttu-id="f3f87-598">Pomocí prostředí PowerShell, můžete nastavit hello počet sloupců rovna toohello počet disků.</span><span class="sxs-lookup"><span data-stu-id="f3f87-598">Using PowerShell, you can set hello number of columns equal toohello number of disks.</span></span> <span data-ttu-id="f3f87-599">Například, pokud existují 16 disků v sadě jeden stripe; Zadejte 16 sloupců v hello *NumberOfColumns* parametr hello *New-VirtualDisk* rutiny prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f87-599">For example, if there are 16 disks in a single stripe set; specify 16 columns in hello *NumberOfColumns* parameter of hello *New-VirtualDisk* PowerShell cmdlet.</span></span>

<span data-ttu-id="f3f87-600">V systému Linux použijte společně hello MDADM nástroj toostripe disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-600">On Linux, use hello MDADM utility toostripe disks together.</span></span> <span data-ttu-id="f3f87-601">Podrobné pokyny k proložení disků v systému Linux naleznete příliš[konfigurace RAID softwaru v systému Linux](../../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f3f87-601">For detailed steps on striping disks on Linux refer too[Configure Software RAID on Linux](../../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="f3f87-602">*Velikost stripe*</span><span class="sxs-lookup"><span data-stu-id="f3f87-602">*Stripe Size*</span></span>  
<span data-ttu-id="f3f87-603">Důležité konfigurační v prokládání disků je velikost stripe hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-603">An important configuration in disk striping is hello stripe size.</span></span> <span data-ttu-id="f3f87-604">velikost stripe Hello nebo velikost bloku je hello nejmenší bloků dat, které aplikace můžete vyřešit na prokládané svazku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-604">hello stripe size or block size is hello smallest chunk of data that application can address on a striped volume.</span></span> <span data-ttu-id="f3f87-605">velikost Hello prokládání, které jste nakonfigurovali závisí na typu hello aplikace a jeho žádost vzor.</span><span class="sxs-lookup"><span data-stu-id="f3f87-605">hello stripe size you configure depends on hello type of application and its request pattern.</span></span> <span data-ttu-id="f3f87-606">Pokud si zvolíte hello nesprávný stripe velikost, mohla způsobit chybné zarovnání tooIO, což vede toodegraded výkon aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-606">If you choose hello wrong stripe size, it could lead tooIO misalignment, which leads toodegraded performance of your application.</span></span>

<span data-ttu-id="f3f87-607">Například pokud požadavek vstupně-výstupní operace generované aplikace je větší než velikost stripe hello disku, systém úložiště hello zapíše ho napříč stripe jednotku hranice na více než jeden disk.</span><span class="sxs-lookup"><span data-stu-id="f3f87-607">For example, if an IO request generated by your application is bigger than hello disk stripe size, hello storage system writes it across stripe unit boundaries on more than one disk.</span></span> <span data-ttu-id="f3f87-608">Když je čas tooaccess dat, bude mít tooseek napříč více než jeden požadavek hello toocomplete stripe jednotky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-608">When it is time tooaccess that data, it will have tooseek across more than one stripe units toocomplete hello request.</span></span> <span data-ttu-id="f3f87-609">Hello kumulativní účinku takové chování může způsobit snížení výkonu toosubstantial.</span><span class="sxs-lookup"><span data-stu-id="f3f87-609">hello cumulative effect of such behavior can lead toosubstantial performance degradation.</span></span> <span data-ttu-id="f3f87-610">Na hello na druhé straně, pokud je menší než velikost stripe hello velikost požadavku vstupně-výstupní operace, a pokud je náhodné, hello vstupně-výstupní požadavky může přidat na hello stejné disku problémové místo a nakonec docházelo k omezení výkonu hello vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-610">On hello other hand, if hello IO request size is smaller than stripe size, and if it is random in nature, hello IO requests may add up on hello same disk causing a bottleneck and ultimately degrading hello IO performance.</span></span>

<span data-ttu-id="f3f87-611">V závislosti na typu hello úlohy vaše aplikace běží, vyberte velikosti odpovídající stripe.</span><span class="sxs-lookup"><span data-stu-id="f3f87-611">Depending on hello type of workload your application is running, choose an appropriate stripe size.</span></span> <span data-ttu-id="f3f87-612">Pro náhodné malé vstupně-výstupní požadavky použijte menší velikost stripe.</span><span class="sxs-lookup"><span data-stu-id="f3f87-612">For random small IO requests, use a smaller stripe size.</span></span> <span data-ttu-id="f3f87-613">Zatímco požadavky pro velkých sekvenčních vstupně-výstupní operace používat větší velikost stripe.</span><span class="sxs-lookup"><span data-stu-id="f3f87-613">Whereas, for large sequential IO requests use a larger stripe size.</span></span> <span data-ttu-id="f3f87-614">Zjistěte hello stripe velikost doporučení pro hello aplikaci, že budete používat na Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="f3f87-614">Find out hello stripe size recommendations for hello application you will be running on Premium Storage.</span></span> <span data-ttu-id="f3f87-615">Pro systém SQL Server nakonfigurujte stripe velikosti 64KB pro úlohy OLTP a 256KB pro úlohy datového skladu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-615">For SQL Server, configure stripe size of 64KB for OLTP workloads and 256KB for data warehousing workloads.</span></span> <span data-ttu-id="f3f87-616">V tématu [osvědčené postupy z hlediska výkonu pro SQL Server na virtuálních počítačích Azure](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) toolearn Další.</span><span class="sxs-lookup"><span data-stu-id="f3f87-616">See [Performance best practices for SQL Server on Azure VMs](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) toolearn more.</span></span>

> [!NOTE]
> <span data-ttu-id="f3f87-617">Můžete společně rozkládají maximálně 32 prémiové disky úložiště na řady DS virtuálních počítačů a 64 prémiové disky úložiště na řadu GS virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-617">You can stripe together a maximum of 32 premium storage disks on a DS series VM and 64 premium storage disks on a GS series VM.</span></span>
>
>

## <a name="multi-threading"></a><span data-ttu-id="f3f87-618">Více vláken</span><span class="sxs-lookup"><span data-stu-id="f3f87-618">Multi-threading</span></span>
<span data-ttu-id="f3f87-619">Azure Premium Storage platformy toobe massively parallel určený.</span><span class="sxs-lookup"><span data-stu-id="f3f87-619">Azure has designed Premium Storage platform toobe massively parallel.</span></span> <span data-ttu-id="f3f87-620">Vícevláknové aplikace proto dosahuje mnohem vyšší výkon než na jednovláknový aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-620">Therefore, a multi-threaded application achieves much higher performance than a single-threaded application.</span></span> <span data-ttu-id="f3f87-621">Vícevláknové aplikace rozdělí si její úkoly napříč více vláken a zvyšuje efektivitu jeho spuštění s využitím hello virtuálních počítačů a maximální toohello prostředky disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-621">A multi-threaded application splits up its tasks across multiple threads and increases efficiency of its execution by utilizing hello VM and disk resources toohello maximum.</span></span>

<span data-ttu-id="f3f87-622">Například pokud aplikace běží na jednom jádru virtuálního počítače pomocí dvěma vlákny, hello procesoru přepínat mezi hello dvěma vlákny tooachieve efektivitu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-622">For example, if your application is running on a single core VM using two threads, hello CPU can switch between hello two threads tooachieve efficiency.</span></span> <span data-ttu-id="f3f87-623">Při jedno vlákno čeká na vstupně-výstupní operace toocomplete na disku, hello procesoru přepnout toohello jiné vlákno.</span><span class="sxs-lookup"><span data-stu-id="f3f87-623">While one thread is waiting on a disk IO toocomplete, hello CPU can switch toohello other thread.</span></span> <span data-ttu-id="f3f87-624">Tímto způsobem můžete provádět dvěma vlákny více než jedno vlákno by.</span><span class="sxs-lookup"><span data-stu-id="f3f87-624">In this way, two threads can accomplish more than a single thread would.</span></span> <span data-ttu-id="f3f87-625">Pokud hello virtuálních počítačů má víc než jednoho jádra, další sníží běhu vzhledem k tomu, že každý základní paralelně můžete provádět úlohy.</span><span class="sxs-lookup"><span data-stu-id="f3f87-625">If hello VM has more than one core, it further decreases running time since each core can execute tasks in parallel.</span></span>

<span data-ttu-id="f3f87-626">Nemusí být možné toochange hello způsob dodávaných aplikace implementuje jeden vláken nebo více vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-626">You may not be able toochange hello way an off-the-shelf application implements single threading or multi-threading.</span></span> <span data-ttu-id="f3f87-627">SQL Server je třeba, umožňuje zpracovávat více procesorů a s více jádry.</span><span class="sxs-lookup"><span data-stu-id="f3f87-627">For example, SQL Server is capable of handling multi-CPU and multi-core.</span></span> <span data-ttu-id="f3f87-628">SQL Server však rozhodne, za jakých podmínek využije jeden nebo více vláken tooprocess dotazu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-628">However, SQL Server decides under what conditions it will leverage one or more threads tooprocess a query.</span></span> <span data-ttu-id="f3f87-629">Může spouštět dotazy a vytvářet indexy používající více vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-629">It can run queries and build indexes using multi-threading.</span></span> <span data-ttu-id="f3f87-630">Pro daný dotaz, který zahrnuje připojení velké tabulky a řazení dat před vrácením toohello uživatele SQL Server pravděpodobně používat více vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-630">For a query that involves joining large tables and sorting data before returning toohello user, SQL Server will likely use multiple threads.</span></span> <span data-ttu-id="f3f87-631">Uživatel však nemůže řídit, jestli SQL Server provede dotaz pomocí jedním vláknem nebo více vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-631">However, a user cannot control whether SQL Server executes a query using a single thread or multiple threads.</span></span>

<span data-ttu-id="f3f87-632">Existují nastavení konfigurace, můžete změnit tooinfluence více vláken nebo toto paralelní zpracování aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-632">There are configuration settings that you can alter tooinfluence this multi-threading or parallel processing of an application.</span></span> <span data-ttu-id="f3f87-633">Například v případě systému SQL Server je hello maximální úroveň paralelismus konfigurace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-633">For example, in case of SQL Server it is hello maximum Degree of Parallelism configuration.</span></span> <span data-ttu-id="f3f87-634">Toto nastavení nazývá MAXDOP, vám umožní tooconfigure hello maximální počet procesorů, které systém SQL Server můžete použít při paralelní zpracování.</span><span class="sxs-lookup"><span data-stu-id="f3f87-634">This setting called MAXDOP, allows you tooconfigure hello maximum number of processors SQL Server can use when parallel processing.</span></span> <span data-ttu-id="f3f87-635">MAXDOP můžete nakonfigurovat pro jednotlivé dotazy nebo operace indexu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-635">You can configure MAXDOP for individual queries or index operations.</span></span> <span data-ttu-id="f3f87-636">To je užitečné, pokud chcete toobalance prostředky systému pro kritické aplikace výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-636">This is beneficial when you want toobalance resources of your system for a performance critical application.</span></span>

<span data-ttu-id="f3f87-637">Předpokládejme například, že vaše aplikace pomocí systému SQL Server spouští velké dotazu a operaci indexu na hello stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-637">For example, say your application using SQL Server is executing a large query and an index operation at hello same time.</span></span> <span data-ttu-id="f3f87-638">Předpokládejme, dejte nám chtěli toobe operaci indexu hello další původce porovnání toohello velké dotazu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-638">Let us assume that you wanted hello index operation toobe more performant compared toohello large query.</span></span> <span data-ttu-id="f3f87-639">V takovém případě můžete nastavit MAXDOP hodnotu vyšší než hello MAXDOP hodnota pro dotaz hello toobe operaci indexu hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-639">In such a case, you can set MAXDOP value of hello index operation toobe higher than hello MAXDOP value for hello query.</span></span> <span data-ttu-id="f3f87-640">Tímto způsobem, SQL Server má větší počet procesorů, které můžete využít pro hello index operace porovnání toohello počet procesorů můžete vyhradit toohello velké dotazu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-640">This way, SQL Server has more number of processors that it can leverage for hello index operation compared toohello number of processors it can dedicate toohello large query.</span></span> <span data-ttu-id="f3f87-641">Pamatujte si, že se nebudete řídit hello počet vláken, který bude používat systém SQL Server pro každou operaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-641">Remember, you do not control hello number of threads SQL Server will use for each operation.</span></span> <span data-ttu-id="f3f87-642">Můžete řídit hello maximální počet procesorů je určené pro více vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-642">You can control hello maximum number of processors being dedicated for multi-threading.</span></span>

<span data-ttu-id="f3f87-643">Další informace o [stupňů paralelismus](https://technet.microsoft.com/library/ms188611.aspx) v systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f3f87-643">Learn more about [Degrees of Parallelism](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span></span> <span data-ttu-id="f3f87-644">Zjistěte taková nastavení, které ovlivňují více vláken ve vaší aplikace a jejich konfigurace toooptimize výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-644">Find out such settings that influence multi-threading in your application and their configurations toooptimize performance.</span></span>

## <a name="queue-depth"></a><span data-ttu-id="f3f87-645">Hloubka fronty</span><span class="sxs-lookup"><span data-stu-id="f3f87-645">Queue Depth</span></span>
<span data-ttu-id="f3f87-646">Hello hloubku fronty nebo délka fronty nebo velikost fronty je v systému hello hello počet čekajících požadavků vstupně-výstupní operace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-646">hello Queue Depth or Queue Length or Queue Size is hello number of pending IO requests in hello system.</span></span> <span data-ttu-id="f3f87-647">Hodnota Hello hloubku fronty určuje, kolik vstupně-výstupní operace operace můžete zarovnat vaší aplikace, které disky úložiště hello bude zpracovávat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-647">hello value of Queue Depth determines how many IO operations your application can line up, which hello storage disks will be processing.</span></span> <span data-ttu-id="f3f87-648">Ovlivňuje všechny hello tři aplikace výkonu indikátory, které jsme popsané v této článku to IOP, propustnosti a latence.</span><span class="sxs-lookup"><span data-stu-id="f3f87-648">It affects all hello three application performance indicators that we discussed in this article viz., IOPS, Throughput and Latency.</span></span>

<span data-ttu-id="f3f87-649">Fronty hloubkou a více vláken jsou úzce souvisejí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-649">Queue Depth and multi-threading are closely related.</span></span> <span data-ttu-id="f3f87-650">Hello hloubku fronty hodnota určuje, kolik více vláken může dosáhnout pomocí aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-650">hello Queue Depth value indicates how much multi-threading can be achieved by hello application.</span></span> <span data-ttu-id="f3f87-651">Pokud hello hloubku fronty velká, aplikace můžete provádět další operace souběžně, jinými slovy, více vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-651">If hello Queue Depth is large, application can execute more operations concurrently, in other words, more multi-threading.</span></span> <span data-ttu-id="f3f87-652">Pokud hello hloubku fronty je malý, i když je aplikace Vícevláknová, nebude mít dostatek požadavky srovnáte pro souběžné provádění.</span><span class="sxs-lookup"><span data-stu-id="f3f87-652">If hello Queue Depth is small, even though application is multi-threaded, it will not have enough requests lined up for concurrent execution.</span></span>

<span data-ttu-id="f3f87-653">Obvykle vypnout hello police aplikací vám nepovolují hloubku fronty hello toochange, protože pokud nastavte nesprávně provede další škodu než funkční.</span><span class="sxs-lookup"><span data-stu-id="f3f87-653">Typically, off hello shelf applications do not allow you toochange hello queue depth, because if set incorrectly it will do more harm than good.</span></span> <span data-ttu-id="f3f87-654">Aplikace nastaví hodnota pravé hello fronty hloubka tooget hello optimálního výkonu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-654">Applications will set hello right value of queue depth tooget hello optimal performance.</span></span> <span data-ttu-id="f3f87-655">Nicméně je tento koncept je důležité toounderstand, takže můžete řešit problémy s výkonem s vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="f3f87-655">However, it is important toounderstand this concept so that you can troubleshoot performance issues with your application.</span></span> <span data-ttu-id="f3f87-656">Hello důsledky hloubku fronty můžete také sledovat spuštěním testu typovou úlohou nástrojů v systému.</span><span class="sxs-lookup"><span data-stu-id="f3f87-656">You can also observe hello effects of queue depth by running benchmarking tools on your system.</span></span>

<span data-ttu-id="f3f87-657">Některé aplikace zadejte nastavení tooinfluence hello hloubku fronty.</span><span class="sxs-lookup"><span data-stu-id="f3f87-657">Some applications provide settings tooinfluence hello Queue Depth.</span></span> <span data-ttu-id="f3f87-658">Například nastavení hello MAXDOP (maximální stupně paralelního zpracování) v systému SQL Server popsané v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="f3f87-658">For example, hello MAXDOP (maximum degree of parallelism) setting in SQL Server explained in previous section.</span></span> <span data-ttu-id="f3f87-659">MAXDOP je způsob, jak tooinfluence hloubka fronty a více vláken, i když přímo nemění hodnotu hloubky fronty hello systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f3f87-659">MAXDOP is a way tooinfluence Queue Depth and multi-threading, although it does not directly change hello Queue Depth value of SQL Server.</span></span>

<span data-ttu-id="f3f87-660">*Hloubka fronty vysoké*</span><span class="sxs-lookup"><span data-stu-id="f3f87-660">*High Queue Depth*</span></span>  
<span data-ttu-id="f3f87-661">Hloubka fronty vysoké zarovnán další operace na disku hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-661">A high queue depth lines up more operations on hello disk.</span></span> <span data-ttu-id="f3f87-662">Hello disk zná hello další požadavek v příslušné fronty předem.</span><span class="sxs-lookup"><span data-stu-id="f3f87-662">hello disk knows hello next request in its queue ahead of time.</span></span> <span data-ttu-id="f3f87-663">V důsledku toho hello disku můžete naplánovat operace dopředu a jejich zpracování v optimální pořadí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-663">Consequently, hello disk can schedule operations ahead of time and process them in an optimal sequence.</span></span> <span data-ttu-id="f3f87-664">Vzhledem k tomu, že aplikace hello odesílá další požadavky toohello disk, hello disk může zpracovat více paralelních IOs.</span><span class="sxs-lookup"><span data-stu-id="f3f87-664">Since hello application is sending more requests toohello disk, hello disk can process more parallel IOs.</span></span> <span data-ttu-id="f3f87-665">Nakonec, hello aplikace bude mít tooachieve vyšší IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-665">Ultimately, hello application will be able tooachieve higher IOPS.</span></span> <span data-ttu-id="f3f87-666">Vzhledem k tomu, že aplikace je zpracování více požadavků, hello celková propustnost aplikace hello se taky zvýší.</span><span class="sxs-lookup"><span data-stu-id="f3f87-666">Since application is processing more requests, hello total Throughput of hello application also increases.</span></span>

<span data-ttu-id="f3f87-667">Obvykle se aplikace můžete dosáhnout maximální propustnost s 8-16 + nezpracovaných vstupně-výstupních na připojený disk.</span><span class="sxs-lookup"><span data-stu-id="f3f87-667">Typically, an application can achieve maximum Throughput with 8-16+ outstanding IOs per attached disk.</span></span> <span data-ttu-id="f3f87-668">Pokud hloubce fronty, aplikace není vkládání dostatek toohello systému IOs a zpracuje menší množství v daném časovém období.</span><span class="sxs-lookup"><span data-stu-id="f3f87-668">If a Queue Depth is one, application is not pushing enough IOs toohello system, and it will process less amount of in a given period.</span></span> <span data-ttu-id="f3f87-669">Jinými slovy méně propustnost.</span><span class="sxs-lookup"><span data-stu-id="f3f87-669">In other words, less Throughput.</span></span>

<span data-ttu-id="f3f87-670">Například v systému SQL Server hello nastavení MAXDOP hodnotu pro dotaz příliš "4" informuje SQL Server, který můžete použít až toofour jader tooexecute hello dotazu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-670">For example, in SQL Server, setting hello MAXDOP value for a query too"4" informs SQL Server that it can use up toofour cores tooexecute hello query.</span></span> <span data-ttu-id="f3f87-671">SQL Server lze určit, co je nejlepší fronty hloubka hodnota a hello počet jader pro spuštění dotazu hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-671">SQL Server will determine what is best queue depth value and hello number of cores for hello query execution.</span></span>

<span data-ttu-id="f3f87-672">*Optimální hloubky fronty*</span><span class="sxs-lookup"><span data-stu-id="f3f87-672">*Optimal Queue Depth*</span></span>  
<span data-ttu-id="f3f87-673">Fronty velmi vysokou hodnotu hloubky má také jeho nevýhody.</span><span class="sxs-lookup"><span data-stu-id="f3f87-673">Very high queue depth value also has its drawbacks.</span></span> <span data-ttu-id="f3f87-674">Pokud hodnotu hloubky fronty je příliš vysoká, aplikace hello pokusí toodrive velmi vysokou IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-674">If queue depth value is too high, hello application will try toodrive very high IOPS.</span></span> <span data-ttu-id="f3f87-675">Pokud aplikace obsahuje trvalé disků se dostatečná zřízené IOPS, může to mít negativní vliv latencí aplikací.</span><span class="sxs-lookup"><span data-stu-id="f3f87-675">Unless application has persistent disks with sufficient provisioned IOPS, this can negatively affect application latencies.</span></span> <span data-ttu-id="f3f87-676">Následující vzorec znázorňuje hello vztah mezi IOPS, latence a hloubku fronty.</span><span class="sxs-lookup"><span data-stu-id="f3f87-676">Following formula shows hello relationship between IOPS, Latency and Queue Depth.</span></span>  
    ![](media/storage-premium-storage-performance/image6.png)

<span data-ttu-id="f3f87-677">Byste neměli konfigurovat hloubku fronty tooany vysoké hodnoty, ale tooan optimální hodnotu, která může poskytnout dostatek IOPS pro hello aplikací bez ovlivnění latenci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-677">You should not configure Queue Depth tooany high value, but tooan optimal value, which can deliver enough IOPS for hello application without affecting latencies.</span></span> <span data-ttu-id="f3f87-678">Například pokud latence aplikace hello potřebuje toobe 1 milisekundu, hello hloubku fronty potřeba je 5 000 IOPS, tooachieve hloubka fronty = 5000 x 0,001 = 5.</span><span class="sxs-lookup"><span data-stu-id="f3f87-678">For example, if hello application latency needs toobe 1 millisecond, hello Queue Depth required tooachieve 5,000 IOPS is, QD = 5000 x 0.001 = 5.</span></span>

<span data-ttu-id="f3f87-679">*Hloubka fronty pro prokládané svazek*</span><span class="sxs-lookup"><span data-stu-id="f3f87-679">*Queue Depth for Striped Volume*</span></span>  
<span data-ttu-id="f3f87-680">Pro svazek prokládané udržovat tak, aby každý disk má ve špičce hloubce fronty jednotlivě hloubce fronty dostatečně vysoký.</span><span class="sxs-lookup"><span data-stu-id="f3f87-680">For a striped volume, maintain a high enough queue depth such that, every disk has a peak queue depth individually.</span></span> <span data-ttu-id="f3f87-681">Představte si třeba aplikace, který by vložil hloubce fronty 2 a v hello stripe je 4 disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-681">For example, consider an application that pushes a queue depth of 2 and there are 4 disks in hello stripe.</span></span> <span data-ttu-id="f3f87-682">dva požadavky vstupně-výstupní operace Hello přejde tootwo disky a zbývající dva disky bude nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-682">hello two IO requests will go tootwo disks and remaining two disks will be idle.</span></span> <span data-ttu-id="f3f87-683">Proto konfigurovat hloubku fronty hello tak, aby všechny disky hello může být zaneprázdněn.</span><span class="sxs-lookup"><span data-stu-id="f3f87-683">Therefore, configure hello queue depth such that all hello disks can be busy.</span></span> <span data-ttu-id="f3f87-684">Vzorec níže ukazuje, jak toodetermine hello hloubku fronty prokládané svazky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-684">Formula below shows how toodetermine hello queue depth of striped volumes.</span></span>  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a><span data-ttu-id="f3f87-685">Omezování</span><span class="sxs-lookup"><span data-stu-id="f3f87-685">Throttling</span></span>
<span data-ttu-id="f3f87-686">Azure Premium Storage zřizuje zadaný počet IOPS a propustnost v závislosti na velikosti virtuálních počítačů hello a velikosti disků, které zvolíte.</span><span class="sxs-lookup"><span data-stu-id="f3f87-686">Azure Premium Storage provisions specified number of IOPS and Throughput depending on hello VM sizes and disk sizes you choose.</span></span> <span data-ttu-id="f3f87-687">Kdykoliv se aplikace pokusí toodrive IOPS nebo propustnosti nad těchto omezení může zpracovat jaké hello virtuálního počítače nebo disku, bude omezení Storage úrovně Premium ho.</span><span class="sxs-lookup"><span data-stu-id="f3f87-687">Anytime your application tries toodrive IOPS or Throughput above these limits of what hello VM or disk can handle, Premium Storage will throttle it.</span></span> <span data-ttu-id="f3f87-688">To manifesty hello tvar snížení výkonu ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-688">This manifests in hello form of degraded performance in your application.</span></span> <span data-ttu-id="f3f87-689">To může znamenat vyšší latence, snížit propustnost nebo snižte IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-689">This can mean higher latency, lower Throughput or lower IOPS.</span></span> <span data-ttu-id="f3f87-690">Pokud Storage úrovně Premium není omezení, vaše aplikace může úplně nezdaří podle překročení, jaké jsou schopné dosáhnout její prostředky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-690">If Premium Storage does not throttle, your application could completely fail by exceeding what its resources are capable of achieving.</span></span> <span data-ttu-id="f3f87-691">Ano, problémů s výkonem tooavoid kvůli toothrottling, vždy zřídit dostatečné prostředky pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-691">So, tooavoid performance issues due toothrottling, always provision sufficient resources for your application.</span></span> <span data-ttu-id="f3f87-692">Vzít v úvahu, co jsme probírali v hello velikosti virtuálních počítačů a výše uvedených oddílech velikosti disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-692">Take into consideration what we discussed in hello VM sizes and Disk sizes sections above.</span></span> <span data-ttu-id="f3f87-693">Srovnávací testy je nejlepší způsob, jak toofigure hello na tom, jaké prostředky musíte toohost vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f3f87-693">Benchmarking is hello best way toofigure out what resources you will need toohost your application.</span></span>

## <a name="benchmarking"></a><span data-ttu-id="f3f87-694">Srovnávací testy</span><span class="sxs-lookup"><span data-stu-id="f3f87-694">Benchmarking</span></span>
<span data-ttu-id="f3f87-695">Srovnávací testy je proces hello simulaci různé úlohy ve vaší aplikaci a měření výkonu hello aplikace pro jednotlivá zatížení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-695">Benchmarking is hello process of simulating different workloads on your application and measuring hello application performance for each workload.</span></span> <span data-ttu-id="f3f87-696">Pomocí hello kroků popsaných v předchozí části, jste shromáždili požadavky na výkon aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-696">Using hello steps described in an earlier section, you have gathered hello application performance requirements.</span></span> <span data-ttu-id="f3f87-697">Spuštěním nástroje na virtuálních počítačích hello hostování aplikace hello srovnávací testy můžete určit hello úrovně výkonu, které aplikace můžete dosáhnout Storage úrovně Premium.</span><span class="sxs-lookup"><span data-stu-id="f3f87-697">By running benchmarking tools on hello VMs hosting hello application, you can determine hello performance levels that your application can achieve with Premium Storage.</span></span> <span data-ttu-id="f3f87-698">V této části Poskytujeme vám příklady srovnávací testy standardní virtuální počítač DS14 zřizovat s disky Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="f3f87-698">In this section, we provide you examples of benchmarking a Standard DS14 VM provisioned with Azure Premium Storage disks.</span></span>

<span data-ttu-id="f3f87-699">Použili jsme běžných testu typovou úlohou nástrojů Iometer a FIO, pro systém Windows a Linux v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="f3f87-699">We have used common benchmarking tools Iometer and FIO, for Windows and Linux respectively.</span></span> <span data-ttu-id="f3f87-700">Tyto nástroje vytvořit více vláken simulaci provozní jako zatížení a výkon systému hello měr.</span><span class="sxs-lookup"><span data-stu-id="f3f87-700">These tools spawn multiple threads simulating a production like workload, and measure hello system performance.</span></span> <span data-ttu-id="f3f87-701">Pomocí nástrojů hello můžete také nakonfigurovat parametry jako velikost a fronty bloku hloubku, který obvykle se nelze změnit pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f3f87-701">Using hello tools you can also configure parameters like block size and queue depth, which you normally cannot change for an application.</span></span> <span data-ttu-id="f3f87-702">To vám dává další flexibilitu toodrive hello maximální výkon na vysokou škálování virtuálních počítačů, které jsou zřizovány s prémiové disky pro různé typy úloh aplikací.</span><span class="sxs-lookup"><span data-stu-id="f3f87-702">This gives you more flexibility toodrive hello maximum performance on a high scale VM provisioned with premium disks for different types of application workloads.</span></span> <span data-ttu-id="f3f87-703">toolearn najdete další informace o jednotlivých vzorová analytická pomůcka [Iometer](http://www.iometer.org/) a [FIO](http://freecode.com/projects/fio).</span><span class="sxs-lookup"><span data-stu-id="f3f87-703">toolearn more about each benchmarking tool visit [Iometer](http://www.iometer.org/) and [FIO](http://freecode.com/projects/fio).</span></span>

<span data-ttu-id="f3f87-704">Následující příklady hello toofollow vytvořit standardní DS14 virtuální počítač a připojte 11 Storage úrovně Premium toohello disky virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-704">toofollow hello examples below, create a Standard DS14 VM and attach 11 Premium Storage disks toohello VM.</span></span> <span data-ttu-id="f3f87-705">Hello 11 disků nakonfigurujte 10 disky s hostitelem ukládání do mezipaměti jako "Žádný" a rozkládají je do svazku názvem NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="f3f87-705">Of hello 11 disks, configure 10 disks with host caching as "None" and stripe them into a volume called NoCacheWrites.</span></span> <span data-ttu-id="f3f87-706">Konfigurace hostitele na disku zbývající hello ukládání do mezipaměti jako "Jen pro čtení" a vytvoření svazku volána čtení z mezipaměti s tento disk.</span><span class="sxs-lookup"><span data-stu-id="f3f87-706">Configure host caching as "ReadOnly" on hello remaining disk and create a volume called CacheReads with this disk.</span></span> <span data-ttu-id="f3f87-707">Pomocí tohoto nastavení, bude možné toosee hello maximální ke čtení a zápisu výkonu z standardní DS14 virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="f3f87-707">Using this setup, you will be able toosee hello maximum Read and Write performance from a Standard DS14 VM.</span></span> <span data-ttu-id="f3f87-708">Podrobné informace o postupu vytvoření virtuálního počítače DS14 s prémiové disky, přejděte příliš[vytvoření a použití účtu Premium Storage pro datový disk virtuálního počítače](../storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="f3f87-708">For detailed steps about creating a DS14 VM with premium disks, go too[Create and use a Premium Storage account for a virtual machine data disk](../storage-premium-storage.md).</span></span>

<span data-ttu-id="f3f87-709">*Zahájení práce s hello mezipaměti*</span><span class="sxs-lookup"><span data-stu-id="f3f87-709">*Warming up hello Cache*</span></span>  
<span data-ttu-id="f3f87-710">Hello disk s použití mezipaměti u hostitele jen pro čtení bude mít toogive IOPS vyšší než maximální disku hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-710">hello disk with ReadOnly host caching will be able toogive higher IOPS than hello disk limit.</span></span> <span data-ttu-id="f3f87-711">tooget tímto maximem načten výkonu z mezipaměti hostitele hello, nejprve musí tedy vytvoří mezipaměť hello tohoto disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-711">tooget this maximum read performance from hello host cache, first you must warm up hello cache of this disk.</span></span> <span data-ttu-id="f3f87-712">Tím se zajistí, že tento hello IOs pro čtení, které vzorová analytická pomůcka vyvolají na čtení z mezipaměti svazku ve skutečnosti přístupů do mezipaměti hello a nikoli hello disk přímo.</span><span class="sxs-lookup"><span data-stu-id="f3f87-712">This ensures that hello Read IOs which benchmarking tool will drive on CacheReads volume actually hits hello cache and not hello disk directly.</span></span> <span data-ttu-id="f3f87-713">výsledek přístupů k mezipaměti Hello v další IOPS z jedné mezipaměti hello povoleno disku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-713">hello cache hits result in additional IOPS from hello single cache enabled disk.</span></span>

> <span data-ttu-id="f3f87-714">**Důležité:**</span><span class="sxs-lookup"><span data-stu-id="f3f87-714">**Important:**</span></span>  
> <span data-ttu-id="f3f87-715">Hello mezipaměti můžete musí tedy před spuštěním srovnávací testy, pokaždé, když je virtuální počítač restartovat.</span><span class="sxs-lookup"><span data-stu-id="f3f87-715">You must warm up hello cache before running benchmarking, every time VM is rebooted.</span></span>
>
>

#### <a name="iometer"></a><span data-ttu-id="f3f87-716">Iometer</span><span class="sxs-lookup"><span data-stu-id="f3f87-716">Iometer</span></span>
<span data-ttu-id="f3f87-717">[Stáhněte si nástroj Iometer hello](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) na hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-717">[Download hello Iometer tool](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) on hello VM.</span></span>

<span data-ttu-id="f3f87-718">*Testovací soubor*</span><span class="sxs-lookup"><span data-stu-id="f3f87-718">*Test file*</span></span>  
<span data-ttu-id="f3f87-719">Iometer používá testovací soubor, který je uložený na svazku hello, na kterém budete spouštět hello srovnávací testy testu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-719">Iometer uses a test file that is stored on hello volume on which you will run hello benchmarking test.</span></span> <span data-ttu-id="f3f87-720">Ho jednotky čtení a zápisy na tomto testování disku se souborem toomeasure hello IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-720">It drives Reads and Writes on this test file toomeasure hello disk IOPS and Throughput.</span></span> <span data-ttu-id="f3f87-721">Iometer vytvoří tento testovací soubor, pokud jste nezadali.</span><span class="sxs-lookup"><span data-stu-id="f3f87-721">Iometer creates this test file if you have not provided one.</span></span> <span data-ttu-id="f3f87-722">Vytvořte 200GB testovací soubor s názvem iobw.tst na čtení z mezipaměti a NoCacheWrites svazky hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-722">Create a 200GB test file called iobw.tst on hello CacheReads and NoCacheWrites volumes.</span></span>

<span data-ttu-id="f3f87-723">*Specifikace přístup*</span><span class="sxs-lookup"><span data-stu-id="f3f87-723">*Access Specifications*</span></span>  
<span data-ttu-id="f3f87-724">Hello specifikace, požádat o vstupně-výstupní operace velikost % pro čtení a zápis, % náhodných nebo sekvenčních jsou nakonfigurovány pomocí karty hello "Specifikace Access" v Iometer.</span><span class="sxs-lookup"><span data-stu-id="f3f87-724">hello specifications, request IO size, % read/write, % random/sequential are configured using hello "Access Specifications" tab in Iometer.</span></span> <span data-ttu-id="f3f87-725">Vytvořte specifikaci přístup pro jednotlivé scénáře hello popsané dole.</span><span class="sxs-lookup"><span data-stu-id="f3f87-725">Create an access specification for each of hello scenarios described below.</span></span> <span data-ttu-id="f3f87-726">Vytvoření specifikace hello přístup a "Uložit" s odpovídajícím názvem jako – RandomWrites\_8 kB, RandomReads\_8 kB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-726">Create hello access specifications and "Save" with an appropriate name like – RandomWrites\_8K, RandomReads\_8K.</span></span> <span data-ttu-id="f3f87-727">Vyberte odpovídající specifikaci hello při spuštění scénáře testu hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-727">Select hello corresponding specification when running hello test scenario.</span></span>

<span data-ttu-id="f3f87-728">Níže je uveden příklad specifikací přístup pro scénář maximální IOPS zápisu</span><span class="sxs-lookup"><span data-stu-id="f3f87-728">An example of access specifications for maximum Write IOPS scenario is shown below,</span></span>  
    ![](media/storage-premium-storage-performance/image8.png)

<span data-ttu-id="f3f87-729">*Specifikace maximální IOPS testu*</span><span class="sxs-lookup"><span data-stu-id="f3f87-729">*Maximum IOPS Test Specifications*</span></span>  
<span data-ttu-id="f3f87-730">toodemonstrate maximální IOPs, použít menší velikost žádosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-730">toodemonstrate maximum IOPs, use smaller request size.</span></span> <span data-ttu-id="f3f87-731">Použijte 8 kb velikost požadavku a vytvoření specifikace náhodných zápisů a čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-731">Use 8K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="f3f87-732">Specifikace přístup</span><span class="sxs-lookup"><span data-stu-id="f3f87-732">Access Specification</span></span> | <span data-ttu-id="f3f87-733">Velikost požadavku</span><span class="sxs-lookup"><span data-stu-id="f3f87-733">Request size</span></span> | <span data-ttu-id="f3f87-734">Náhodné %</span><span class="sxs-lookup"><span data-stu-id="f3f87-734">Random %</span></span> | <span data-ttu-id="f3f87-735">% Pro čtení</span><span class="sxs-lookup"><span data-stu-id="f3f87-735">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-736">RandomWrites\_8 kb</span><span class="sxs-lookup"><span data-stu-id="f3f87-736">RandomWrites\_8K</span></span> |<span data-ttu-id="f3f87-737">8 KB</span><span class="sxs-lookup"><span data-stu-id="f3f87-737">8K</span></span> |<span data-ttu-id="f3f87-738">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-738">100</span></span> |<span data-ttu-id="f3f87-739">0</span><span class="sxs-lookup"><span data-stu-id="f3f87-739">0</span></span> |
| <span data-ttu-id="f3f87-740">RandomReads\_8 kb</span><span class="sxs-lookup"><span data-stu-id="f3f87-740">RandomReads\_8K</span></span> |<span data-ttu-id="f3f87-741">8 KB</span><span class="sxs-lookup"><span data-stu-id="f3f87-741">8K</span></span> |<span data-ttu-id="f3f87-742">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-742">100</span></span> |<span data-ttu-id="f3f87-743">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-743">100</span></span> |

<span data-ttu-id="f3f87-744">*Specifikace maximální propustnost testu*</span><span class="sxs-lookup"><span data-stu-id="f3f87-744">*Maximum Throughput Test Specifications*</span></span>  
<span data-ttu-id="f3f87-745">toodemonstrate maximální propustnost, použijte větší velikost žádosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-745">toodemonstrate maximum Throughput, use larger request size.</span></span> <span data-ttu-id="f3f87-746">Použijte 64 tisíc velikost požadavku a vytvoření specifikace náhodných zápisů a čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-746">Use 64K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="f3f87-747">Specifikace přístup</span><span class="sxs-lookup"><span data-stu-id="f3f87-747">Access Specification</span></span> | <span data-ttu-id="f3f87-748">Velikost požadavku</span><span class="sxs-lookup"><span data-stu-id="f3f87-748">Request size</span></span> | <span data-ttu-id="f3f87-749">Náhodné %</span><span class="sxs-lookup"><span data-stu-id="f3f87-749">Random %</span></span> | <span data-ttu-id="f3f87-750">% Pro čtení</span><span class="sxs-lookup"><span data-stu-id="f3f87-750">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-751">RandomWrites\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="f3f87-751">RandomWrites\_64K</span></span> |<span data-ttu-id="f3f87-752">64 KB</span><span class="sxs-lookup"><span data-stu-id="f3f87-752">64K</span></span> |<span data-ttu-id="f3f87-753">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-753">100</span></span> |<span data-ttu-id="f3f87-754">0</span><span class="sxs-lookup"><span data-stu-id="f3f87-754">0</span></span> |
| <span data-ttu-id="f3f87-755">RandomReads\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="f3f87-755">RandomReads\_64K</span></span> |<span data-ttu-id="f3f87-756">64 KB</span><span class="sxs-lookup"><span data-stu-id="f3f87-756">64K</span></span> |<span data-ttu-id="f3f87-757">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-757">100</span></span> |<span data-ttu-id="f3f87-758">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-758">100</span></span> |

<span data-ttu-id="f3f87-759">*Spuštění hello Iometer testu*</span><span class="sxs-lookup"><span data-stu-id="f3f87-759">*Running hello Iometer Test*</span></span>  
<span data-ttu-id="f3f87-760">Proveďte kroky hello níže toowarm do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-760">Perform hello steps below toowarm up cache</span></span>

1. <span data-ttu-id="f3f87-761">Vytvořte dva specifikace přístup s hodnoty zobrazené níže,</span><span class="sxs-lookup"><span data-stu-id="f3f87-761">Create two access specifications with values shown below,</span></span>

   | <span data-ttu-id="f3f87-762">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="f3f87-762">Name</span></span> | <span data-ttu-id="f3f87-763">Velikost požadavku</span><span class="sxs-lookup"><span data-stu-id="f3f87-763">Request size</span></span> | <span data-ttu-id="f3f87-764">Náhodné %</span><span class="sxs-lookup"><span data-stu-id="f3f87-764">Random %</span></span> | <span data-ttu-id="f3f87-765">% Pro čtení</span><span class="sxs-lookup"><span data-stu-id="f3f87-765">Read %</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="f3f87-766">RandomWrites\_1 MB</span><span class="sxs-lookup"><span data-stu-id="f3f87-766">RandomWrites\_1MB</span></span> |<span data-ttu-id="f3f87-767">1MB</span><span class="sxs-lookup"><span data-stu-id="f3f87-767">1MB</span></span> |<span data-ttu-id="f3f87-768">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-768">100</span></span> |<span data-ttu-id="f3f87-769">0</span><span class="sxs-lookup"><span data-stu-id="f3f87-769">0</span></span> |
   | <span data-ttu-id="f3f87-770">RandomReads\_1 MB</span><span class="sxs-lookup"><span data-stu-id="f3f87-770">RandomReads\_1MB</span></span> |<span data-ttu-id="f3f87-771">1MB</span><span class="sxs-lookup"><span data-stu-id="f3f87-771">1MB</span></span> |<span data-ttu-id="f3f87-772">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-772">100</span></span> |<span data-ttu-id="f3f87-773">100</span><span class="sxs-lookup"><span data-stu-id="f3f87-773">100</span></span> |
2. <span data-ttu-id="f3f87-774">Spusťte test hello Iometer pro inicializaci mezipaměti disku s následujícími parametry.</span><span class="sxs-lookup"><span data-stu-id="f3f87-774">Run hello Iometer test for initializing cache disk with following parameters.</span></span> <span data-ttu-id="f3f87-775">Pomocí tří pracovních vláken pro hello cílový svazek a hloubce fronty 128.</span><span class="sxs-lookup"><span data-stu-id="f3f87-775">Use three worker threads for hello target volume and a queue depth of 128.</span></span> <span data-ttu-id="f3f87-776">Nastavit hello hello too2hrs testu na kartě "Testování instalace" hello "Běh" dobu trvání.</span><span class="sxs-lookup"><span data-stu-id="f3f87-776">Set hello "Run time" duration of hello test too2hrs on hello "Test Setup" tab.</span></span>

   | <span data-ttu-id="f3f87-777">Scénář</span><span class="sxs-lookup"><span data-stu-id="f3f87-777">Scenario</span></span> | <span data-ttu-id="f3f87-778">Cílový svazek</span><span class="sxs-lookup"><span data-stu-id="f3f87-778">Target Volume</span></span> | <span data-ttu-id="f3f87-779">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="f3f87-779">Name</span></span> | <span data-ttu-id="f3f87-780">Doba trvání</span><span class="sxs-lookup"><span data-stu-id="f3f87-780">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="f3f87-781">Inicializovat Disk mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-781">Initialize Cache Disk</span></span> |<span data-ttu-id="f3f87-782">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-782">CacheReads</span></span> |<span data-ttu-id="f3f87-783">RandomWrites\_1 MB</span><span class="sxs-lookup"><span data-stu-id="f3f87-783">RandomWrites\_1MB</span></span> |<span data-ttu-id="f3f87-784">2hrs</span><span class="sxs-lookup"><span data-stu-id="f3f87-784">2hrs</span></span> |
3. <span data-ttu-id="f3f87-785">Spusťte test hello Iometer pro zahájení práce s disku mezipaměti s následujícími parametry.</span><span class="sxs-lookup"><span data-stu-id="f3f87-785">Run hello Iometer test for warming up cache disk with following parameters.</span></span> <span data-ttu-id="f3f87-786">Pomocí tří pracovních vláken pro hello cílový svazek a hloubce fronty 128.</span><span class="sxs-lookup"><span data-stu-id="f3f87-786">Use three worker threads for hello target volume and a queue depth of 128.</span></span> <span data-ttu-id="f3f87-787">Nastavit hello hello too2hrs testu na kartě "Testování instalace" hello "Běh" dobu trvání.</span><span class="sxs-lookup"><span data-stu-id="f3f87-787">Set hello "Run time" duration of hello test too2hrs on hello "Test Setup" tab.</span></span>

   | <span data-ttu-id="f3f87-788">Scénář</span><span class="sxs-lookup"><span data-stu-id="f3f87-788">Scenario</span></span> | <span data-ttu-id="f3f87-789">Cílový svazek</span><span class="sxs-lookup"><span data-stu-id="f3f87-789">Target Volume</span></span> | <span data-ttu-id="f3f87-790">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="f3f87-790">Name</span></span> | <span data-ttu-id="f3f87-791">Doba trvání</span><span class="sxs-lookup"><span data-stu-id="f3f87-791">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="f3f87-792">Horké až diskové mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-792">Warm up Cache Disk</span></span> |<span data-ttu-id="f3f87-793">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-793">CacheReads</span></span> |<span data-ttu-id="f3f87-794">RandomReads\_1 MB</span><span class="sxs-lookup"><span data-stu-id="f3f87-794">RandomReads\_1MB</span></span> |<span data-ttu-id="f3f87-795">2hrs</span><span class="sxs-lookup"><span data-stu-id="f3f87-795">2hrs</span></span> |

<span data-ttu-id="f3f87-796">Po diskové mezipaměti je provozní teplotu, pokračujte v níže uvedených scénářů testů hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-796">After cache disk is warmed up, proceed with hello test scenarios listed below.</span></span> <span data-ttu-id="f3f87-797">hello toorun Iometer test, použijte aspoň tři pracovních vláken pro **každý** cíle svazku.</span><span class="sxs-lookup"><span data-stu-id="f3f87-797">toorun hello Iometer test, use at least three worker threads for **each** target volume.</span></span> <span data-ttu-id="f3f87-798">Pro každý pracovní vlákno vyberte hello cílový svazek, nastavit hloubku fronty a vyberte jednu z hello uložit test specifikace, jsou uvedené v tabulce hello níže toorun hello odpovídající testovací scénář.</span><span class="sxs-lookup"><span data-stu-id="f3f87-798">For each worker thread, select hello target volume, set queue depth and select one of hello saved test specifications, as shown in hello table below, toorun hello corresponding test scenario.</span></span> <span data-ttu-id="f3f87-799">Při spuštění tyto testy Hello tabulka také ukazuje očekávané výsledky pro IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-799">hello table also shows expected results for IOPS and Throughput when running these tests.</span></span> <span data-ttu-id="f3f87-800">Ve všech scénářích se používá malé velikost vstupně-výstupní operace 8 kB a hloubce fronty vysoké 128.</span><span class="sxs-lookup"><span data-stu-id="f3f87-800">For all scenarios, a small IO size of 8KB and a high queue depth of 128 is used.</span></span>

| <span data-ttu-id="f3f87-801">Testovací scénář</span><span class="sxs-lookup"><span data-stu-id="f3f87-801">Test Scenario</span></span> | <span data-ttu-id="f3f87-802">Cílový svazek</span><span class="sxs-lookup"><span data-stu-id="f3f87-802">Target Volume</span></span> | <span data-ttu-id="f3f87-803">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="f3f87-803">Name</span></span> | <span data-ttu-id="f3f87-804">výsledek</span><span class="sxs-lookup"><span data-stu-id="f3f87-804">Result</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f3f87-805">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-805">Max.</span></span> <span data-ttu-id="f3f87-806">Čtení IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-806">Read IOPS</span></span> |<span data-ttu-id="f3f87-807">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-807">CacheReads</span></span> |<span data-ttu-id="f3f87-808">RandomWrites\_8 kb</span><span class="sxs-lookup"><span data-stu-id="f3f87-808">RandomWrites\_8K</span></span> |<span data-ttu-id="f3f87-809">50 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-809">50,000 IOPS</span></span> |
| <span data-ttu-id="f3f87-810">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-810">Max.</span></span> <span data-ttu-id="f3f87-811">Zápis IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-811">Write IOPS</span></span> |<span data-ttu-id="f3f87-812">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="f3f87-812">NoCacheWrites</span></span> |<span data-ttu-id="f3f87-813">RandomReads\_8 kb</span><span class="sxs-lookup"><span data-stu-id="f3f87-813">RandomReads\_8K</span></span> |<span data-ttu-id="f3f87-814">64 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-814">64,000 IOPS</span></span> |
| <span data-ttu-id="f3f87-815">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-815">Max.</span></span> <span data-ttu-id="f3f87-816">Součet IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-816">Combined IOPS</span></span> |<span data-ttu-id="f3f87-817">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-817">CacheReads</span></span> |<span data-ttu-id="f3f87-818">RandomWrites\_8 kb</span><span class="sxs-lookup"><span data-stu-id="f3f87-818">RandomWrites\_8K</span></span> |<span data-ttu-id="f3f87-819">100 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="f3f87-819">100,000 IOPS</span></span> |
| <span data-ttu-id="f3f87-820">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="f3f87-820">NoCacheWrites</span></span> |<span data-ttu-id="f3f87-821">RandomReads\_8 kb</span><span class="sxs-lookup"><span data-stu-id="f3f87-821">RandomReads\_8K</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="f3f87-822">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-822">Max.</span></span> <span data-ttu-id="f3f87-823">Čtení MB/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-823">Read MB/sec</span></span> |<span data-ttu-id="f3f87-824">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-824">CacheReads</span></span> |<span data-ttu-id="f3f87-825">RandomWrites\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="f3f87-825">RandomWrites\_64K</span></span> |<span data-ttu-id="f3f87-826">524 MB/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-826">524 MB/sec</span></span> |
| <span data-ttu-id="f3f87-827">Max.</span><span class="sxs-lookup"><span data-stu-id="f3f87-827">Max.</span></span> <span data-ttu-id="f3f87-828">Zápis MB/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-828">Write MB/sec</span></span> |<span data-ttu-id="f3f87-829">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="f3f87-829">NoCacheWrites</span></span> |<span data-ttu-id="f3f87-830">RandomReads\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="f3f87-830">RandomReads\_64K</span></span> |<span data-ttu-id="f3f87-831">524 MB/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-831">524 MB/sec</span></span> |
| <span data-ttu-id="f3f87-832">Kombinovaná MB/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-832">Combined MB/sec</span></span> |<span data-ttu-id="f3f87-833">Čtení z mezipaměti</span><span class="sxs-lookup"><span data-stu-id="f3f87-833">CacheReads</span></span> |<span data-ttu-id="f3f87-834">RandomWrites\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="f3f87-834">RandomWrites\_64K</span></span> |<span data-ttu-id="f3f87-835">1 000 MB/s</span><span class="sxs-lookup"><span data-stu-id="f3f87-835">1000 MB/sec</span></span> |
| <span data-ttu-id="f3f87-836">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="f3f87-836">NoCacheWrites</span></span> |<span data-ttu-id="f3f87-837">RandomReads\_64 kb / s</span><span class="sxs-lookup"><span data-stu-id="f3f87-837">RandomReads\_64K</span></span> | &nbsp; | &nbsp; |

<span data-ttu-id="f3f87-838">Níže jsou snímky obrazovky hello Iometer výsledků testů pro kombinované scénáře IOPS a propustnosti.</span><span class="sxs-lookup"><span data-stu-id="f3f87-838">Below are screenshots of hello Iometer test results for combined IOPS and Throughput scenarios.</span></span>

<span data-ttu-id="f3f87-839">*Kombinovaná čtení a zápisy maximální IOPS.*</span><span class="sxs-lookup"><span data-stu-id="f3f87-839">*Combined Reads and Writes Maximum IOPS*</span></span>  
![](media/storage-premium-storage-performance/image9.png)

<span data-ttu-id="f3f87-840">*Kombinovaná čtení a zápisy maximální propustnost*</span><span class="sxs-lookup"><span data-stu-id="f3f87-840">*Combined Reads and Writes Maximum Throughput*</span></span>  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a><span data-ttu-id="f3f87-841">FIO</span><span class="sxs-lookup"><span data-stu-id="f3f87-841">FIO</span></span>
<span data-ttu-id="f3f87-842">FIO je úložiště toobenchmark oblíbených nástroj na hello virtuální počítače s Linuxem.</span><span class="sxs-lookup"><span data-stu-id="f3f87-842">FIO is a popular tool toobenchmark storage on hello Linux VMs.</span></span> <span data-ttu-id="f3f87-843">Má hello flexibilitu tooselect různé vstupně-výstupní operace velikosti, sekvenční nebo náhodné čtení a zápisy.</span><span class="sxs-lookup"><span data-stu-id="f3f87-843">It has hello flexibility tooselect different IO sizes, sequential or random reads and writes.</span></span> <span data-ttu-id="f3f87-844">Procesy tooperform hello Zadaná vstupně-výstupních operací, nebo ji vytvoří pracovních vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-844">It spawns worker threads or processes tooperform hello specified I/O operations.</span></span> <span data-ttu-id="f3f87-845">Můžete zadat typ hello vstupně-výstupních operací každý pracovní vlákno musíte provést pomocí úlohy souborů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-845">You can specify hello type of I/O operations each worker thread must perform using job files.</span></span> <span data-ttu-id="f3f87-846">Jsme vytvořili jeden soubor úlohy pro scénář ukazuje následující příklady hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-846">We created one job file per scenario illustrated in hello examples below.</span></span> <span data-ttu-id="f3f87-847">Specifikace hello v tyto úlohy soubory toobenchmark různé úlohy běžící na Storage úrovně Premium, můžete změnit.</span><span class="sxs-lookup"><span data-stu-id="f3f87-847">You can change hello specifications in these job files toobenchmark different workloads running on Premium Storage.</span></span> <span data-ttu-id="f3f87-848">V příkladech hello se používá standardní DS 14 virtuální počítač spuštěný **Ubuntu**.</span><span class="sxs-lookup"><span data-stu-id="f3f87-848">In hello examples, we are using a Standard DS 14 VM running **Ubuntu**.</span></span> <span data-ttu-id="f3f87-849">Hello používá stejné nastavení popsané v hello začátku hello [srovnávací testy části](#Benchmarking) a záložním vytvoří mezipaměť hello před spuštěním hello srovnávací testy testy.</span><span class="sxs-lookup"><span data-stu-id="f3f87-849">Use hello same setup described in hello beginning of hello [Benchmarking section](#Benchmarking) and warm up hello cache before running hello benchmarking tests.</span></span>

<span data-ttu-id="f3f87-850">Než začnete, [stáhnout FIO](https://github.com/axboe/fio) a nainstalujte ji na virtuálním počítači.</span><span class="sxs-lookup"><span data-stu-id="f3f87-850">Before you begin, [download FIO](https://github.com/axboe/fio) and install it on your virtual machine.</span></span>

<span data-ttu-id="f3f87-851">Spusťte následující příkaz pro Ubuntu, hello</span><span class="sxs-lookup"><span data-stu-id="f3f87-851">Run hello following command for Ubuntu,</span></span>

```
apt-get install fio
```

<span data-ttu-id="f3f87-852">Pro řízení operací čtení na discích hello použijeme čtyři pracovních vláken pro řízení operace zápisu a čtyři pracovních vláken.</span><span class="sxs-lookup"><span data-stu-id="f3f87-852">We will use four worker threads for driving Write operations and four worker threads for driving Read operations on hello disks.</span></span> <span data-ttu-id="f3f87-853">Hello zápisu pracovníci bude se řídí provoz na svazku hello "nocache", který obsahuje 10 disky s mezipamětí nastavit také "Žádný".</span><span class="sxs-lookup"><span data-stu-id="f3f87-853">hello Write workers will be driving traffic on hello "nocache" volume, which has 10 disks with cache set too"None".</span></span> <span data-ttu-id="f3f87-854">Hello pracovních procesů pro čtení se se řídí provoz na hello "readcache" svazek, který má 1 disk sadou mezipaměti příliš "Jen pro čtení".</span><span class="sxs-lookup"><span data-stu-id="f3f87-854">hello Read workers will be driving traffic on hello "readcache" volume, which has 1 disk with cache set too"ReadOnly".</span></span>

<span data-ttu-id="f3f87-855">*Maximální zápis IOPS*</span><span class="sxs-lookup"><span data-stu-id="f3f87-855">*Maximum Write IOPS*</span></span>  
<span data-ttu-id="f3f87-856">Vytvořit soubor úlohy hello se následující specifikace tooget maximální IOPS zápisu.</span><span class="sxs-lookup"><span data-stu-id="f3f87-856">Create hello job file with following specifications tooget maximum Write IOPS.</span></span> <span data-ttu-id="f3f87-857">Název "fiowrite.ini".</span><span class="sxs-lookup"><span data-stu-id="f3f87-857">Name it "fiowrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

<span data-ttu-id="f3f87-858">Poznámka: hello podle klíče věcí, které odpovídají pokynů pro návrh hello popsané v předchozích částech.</span><span class="sxs-lookup"><span data-stu-id="f3f87-858">Note hello follow key things that are in line with hello design guidelines discussed in previous sections.</span></span> <span data-ttu-id="f3f87-859">Tyto specifikace jsou nezbytné toodrive maximální IOPS,</span><span class="sxs-lookup"><span data-stu-id="f3f87-859">These specifications are essential toodrive maximum IOPS,</span></span>  

* <span data-ttu-id="f3f87-860">Hloubka fronty vysoké 256.</span><span class="sxs-lookup"><span data-stu-id="f3f87-860">A high queue depth of 256.</span></span>  
* <span data-ttu-id="f3f87-861">Velikost malé bloku 8KB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-861">A small block size of 8KB.</span></span>  
* <span data-ttu-id="f3f87-862">Více vláken provádění náhodných zápisů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-862">Multiple threads performing random writes.</span></span>

<span data-ttu-id="f3f87-863">Spusťte následující příkaz tookick vypnout hello FIO otestovat 30 sekund, hello</span><span class="sxs-lookup"><span data-stu-id="f3f87-863">Run hello following command tookick off hello FIO test for 30 seconds,</span></span>  

```
sudo fio --runtime 30 fiowrite.ini
```

<span data-ttu-id="f3f87-864">V průběhu testovacího hello bude možné toosee hello počet zápisu, které poskytujete disky virtuálních počítačů a Premium hello IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-864">While hello test runs, you will be able toosee hello number of write IOPS hello VM and Premium disks are delivering.</span></span> <span data-ttu-id="f3f87-865">Jak znázorňuje následující ukázka hello, hello virtuálních počítačů DS14 doručování jeho zápisu maximální limit IOPS 50 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-865">As shown in hello sample below, hello DS14 VM is delivering its maximum write IOPS limit of 50,000 IOPS.</span></span>  
    ![](media/storage-premium-storage-performance/image11.png)

<span data-ttu-id="f3f87-866">*Čtení maximální IOPS*</span><span class="sxs-lookup"><span data-stu-id="f3f87-866">*Maximum Read IOPS*</span></span>  
<span data-ttu-id="f3f87-867">Vytvořit soubor úlohy hello se následující specifikace tooget maximální IOPS pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-867">Create hello job file with following specifications tooget maximum Read IOPS.</span></span> <span data-ttu-id="f3f87-868">Název "fioread.ini".</span><span class="sxs-lookup"><span data-stu-id="f3f87-868">Name it "fioread.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

<span data-ttu-id="f3f87-869">Poznámka: hello podle klíče věcí, které odpovídají pokynů pro návrh hello popsané v předchozích částech.</span><span class="sxs-lookup"><span data-stu-id="f3f87-869">Note hello follow key things that are in line with hello design guidelines discussed in previous sections.</span></span> <span data-ttu-id="f3f87-870">Tyto specifikace jsou nezbytné toodrive maximální IOPS,</span><span class="sxs-lookup"><span data-stu-id="f3f87-870">These specifications are essential toodrive maximum IOPS,</span></span>

* <span data-ttu-id="f3f87-871">Hloubka fronty vysoké 256.</span><span class="sxs-lookup"><span data-stu-id="f3f87-871">A high queue depth of 256.</span></span>  
* <span data-ttu-id="f3f87-872">Velikost malé bloku 8KB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-872">A small block size of 8KB.</span></span>  
* <span data-ttu-id="f3f87-873">Více vláken provádění náhodných zápisů.</span><span class="sxs-lookup"><span data-stu-id="f3f87-873">Multiple threads performing random writes.</span></span>

<span data-ttu-id="f3f87-874">Spusťte následující příkaz tookick vypnout hello FIO otestovat 30 sekund, hello</span><span class="sxs-lookup"><span data-stu-id="f3f87-874">Run hello following command tookick off hello FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioread.ini
```

<span data-ttu-id="f3f87-875">Během hello testovací běhy, nebudete moct toosee hello počet čtení hello IOPS virtuálního počítače a poskytujete prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-875">While hello test runs, you will be able toosee hello number of read IOPS hello VM and Premium disks are delivering.</span></span> <span data-ttu-id="f3f87-876">Jak znázorňuje následující ukázka hello, doručování hello DS14 virtuální počítač více než 64 000 IOPS pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f3f87-876">As shown in hello sample below, hello DS14 VM is delivering more than 64,000 Read IOPS.</span></span> <span data-ttu-id="f3f87-877">Toto je kombinací hello disku a výkon mezipaměti hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-877">This is a combination of hello disk and hello cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image12.png)

<span data-ttu-id="f3f87-878">*Maximální počet čtení a zápisu IOPS*</span><span class="sxs-lookup"><span data-stu-id="f3f87-878">*Maximum Read and Write IOPS*</span></span>  
<span data-ttu-id="f3f87-879">Vytvořit soubor úlohy hello s následující specifikace tooget maximální kombinaci oprávnění ke čtení a zápis IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-879">Create hello job file with following specifications tooget maximum combined Read and Write IOPS.</span></span> <span data-ttu-id="f3f87-880">Název "fioreadwrite.ini".</span><span class="sxs-lookup"><span data-stu-id="f3f87-880">Name it "fioreadwrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

<span data-ttu-id="f3f87-881">Poznámka: hello podle klíče věcí, které odpovídají pokynů pro návrh hello popsané v předchozích částech.</span><span class="sxs-lookup"><span data-stu-id="f3f87-881">Note hello follow key things that are in line with hello design guidelines discussed in previous sections.</span></span> <span data-ttu-id="f3f87-882">Tyto specifikace jsou nezbytné toodrive maximální IOPS,</span><span class="sxs-lookup"><span data-stu-id="f3f87-882">These specifications are essential toodrive maximum IOPS,</span></span>

* <span data-ttu-id="f3f87-883">Hloubka fronty vysoké 128.</span><span class="sxs-lookup"><span data-stu-id="f3f87-883">A high queue depth of 128.</span></span>  
* <span data-ttu-id="f3f87-884">Velikost bloku malé 4KB.</span><span class="sxs-lookup"><span data-stu-id="f3f87-884">A small block size of 4KB.</span></span>  
* <span data-ttu-id="f3f87-885">Více vláken provádění náhodných čte a zapisuje.</span><span class="sxs-lookup"><span data-stu-id="f3f87-885">Multiple threads performing random reads and writes.</span></span>

<span data-ttu-id="f3f87-886">Spusťte následující příkaz tookick vypnout hello FIO otestovat 30 sekund, hello</span><span class="sxs-lookup"><span data-stu-id="f3f87-886">Run hello following command tookick off hello FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioreadwrite.ini
```

<span data-ttu-id="f3f87-887">V průběhu testovacího hello se být schopný toosee hello počet kombinované pro čtení a zápisu IOPS hello virtuálních počítačů a poskytujete prémiové disky.</span><span class="sxs-lookup"><span data-stu-id="f3f87-887">While hello test runs, you will be able toosee hello number of combined read and write IOPS hello VM and Premium disks are delivering.</span></span> <span data-ttu-id="f3f87-888">Jak znázorňuje následující ukázka hello, hello virtuálních počítačů DS14 doručování více než 100 000 kombinované oprávnění ke čtení a zápis IOPS.</span><span class="sxs-lookup"><span data-stu-id="f3f87-888">As shown in hello sample below, hello DS14 VM is delivering more than 100,000 combined Read and Write IOPS.</span></span> <span data-ttu-id="f3f87-889">Toto je kombinací hello disku a výkon mezipaměti hello.</span><span class="sxs-lookup"><span data-stu-id="f3f87-889">This is a combination of hello disk and hello cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image13.png)

<span data-ttu-id="f3f87-890">*Nejvyšší možná propustnost*</span><span class="sxs-lookup"><span data-stu-id="f3f87-890">*Maximum Combined Throughput*</span></span>  
<span data-ttu-id="f3f87-891">tooget hello maximální kombinovat pro čtení a zápisu propustnosti, použít větší velikost bloku a hloubku fronty velké s více vlákny provádění čtení a zápisy.</span><span class="sxs-lookup"><span data-stu-id="f3f87-891">tooget hello maximum combined Read and Write Throughput, use a larger block size and large queue depth with multiple threads performing reads and writes.</span></span> <span data-ttu-id="f3f87-892">Můžete použít velikost bloku 64KB a hloubku fronty 128.</span><span class="sxs-lookup"><span data-stu-id="f3f87-892">You can use a block size of 64KB and queue depth of 128.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f3f87-893">Další kroky</span><span class="sxs-lookup"><span data-stu-id="f3f87-893">Next Steps</span></span>
<span data-ttu-id="f3f87-894">Další informace o službě Azure Premium Storage:</span><span class="sxs-lookup"><span data-stu-id="f3f87-894">Learn more about Azure Premium Storage:</span></span>

* [<span data-ttu-id="f3f87-895">Storage úrovně Premium: Vysoce výkonné úložiště pro úlohy virtuálních počítačů Azure</span><span class="sxs-lookup"><span data-stu-id="f3f87-895">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../storage-premium-storage.md)  

<span data-ttu-id="f3f87-896">Pro uživatele systému SQL Server, přečtěte si článek na nejlepší postupy z hlediska výkonu pro SQL Server:</span><span class="sxs-lookup"><span data-stu-id="f3f87-896">For SQL Server users, read articles on Performance Best Practices for SQL Server:</span></span>

* [<span data-ttu-id="f3f87-897">Osvědčené postupy z hlediska výkonu pro SQL Server na virtuálních počítačích Azure</span><span class="sxs-lookup"><span data-stu-id="f3f87-897">Performance Best Practices for SQL Server in Azure Virtual Machines</span></span>](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="f3f87-898">Azure Storage úrovně Premium poskytuje nejvyšší výkon pro SQL Server ve virtuálním počítači Azure</span><span class="sxs-lookup"><span data-stu-id="f3f87-898">Azure Premium Storage provides highest performance for SQL Server in Azure VM</span></span>](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx)
