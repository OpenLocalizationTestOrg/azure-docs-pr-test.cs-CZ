---
title: "aaaUsing sdílené přístupové podpisy (SAS) ve službě Azure Storage | Microsoft Docs"
description: "Přečtěte si toouse sdíleného přístupu podpisy (SAS) toodelegate přístup tooAzure prostředků úložiště, včetně objektů BLOB, fronty, tabulky a soubory."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: 5b75a3c25bcfb9f1ceb81f31dc2d42376bd105cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="9b99d-103">Použití sdílených přístupových podpisů (SAS)</span><span class="sxs-lookup"><span data-stu-id="9b99d-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="9b99d-104">Sdílený přístupový podpis (SAS) vám poskytne způsob toogrant omezený přístup tooobjects ve vašem účtu úložiště tooother klientů bez vystavení klíč účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-104">A shared access signature (SAS) provides you with a way toogrant limited access tooobjects in your storage account tooother clients, without exposing your account key.</span></span> <span data-ttu-id="9b99d-105">V tomto článku jsme poskytovat přehled o modelu hello SAS, SAS osvědčené postupy a podívejte se na některé příklady.</span><span class="sxs-lookup"><span data-stu-id="9b99d-105">In this article, we provide an overview of hello SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="9b99d-106">Další příklady kódu pomocí SAS nad rámec těch, které jsou tu popsané, najdete v části [Začínáme s Azure Blob Storage v rozhraní .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) a ostatních vzorků, které jsou k dispozici v hello [ukázky kódu Azure](https://azure.microsoft.com/documentation/samples/?service=storage) knihovny.</span><span class="sxs-lookup"><span data-stu-id="9b99d-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in hello [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="9b99d-107">Můžete stáhnout hello ukázkové aplikace a jejich spuštění nebo procházet kód hello na Githubu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-107">You can download hello sample applications and run them, or browse hello code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="9b99d-108">Co je sdílený přístupový podpis?</span><span class="sxs-lookup"><span data-stu-id="9b99d-108">What is a shared access signature?</span></span>
<span data-ttu-id="9b99d-109">Sdílený přístupový podpis poskytuje Delegovaný přístup tooresources ve vašem účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="9b99d-109">A shared access signature provides delegated access tooresources in your storage account.</span></span> <span data-ttu-id="9b99d-110">S SAS můžete udělit, že klienti přístup k tooresources ve vašem účtu úložiště bez sdílení klíče účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-110">With a SAS, you can grant clients access tooresources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="9b99d-111">Toto je použití sdílených přístupových podpisů ve svých aplikacích – SAS hello klíče bod je bezpečný tooshare svým prostředkům úložiště bez kompromisů klíče účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-111">This is hello key point of using shared access signatures in your applications--a SAS is a secure way tooshare your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="9b99d-112">SAS vám poskytuje podrobnou kontrolu nad hello typ přístupu, kterou byste udělit tooclients, kteří mají hello SAS, včetně:</span><span class="sxs-lookup"><span data-stu-id="9b99d-112">A SAS gives you granular control over hello type of access you grant tooclients who have hello SAS, including:</span></span>

* <span data-ttu-id="9b99d-113">interval Hello, přes které hello SAS platný, včetně hello počáteční čas a čas vypršení platnosti hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-113">hello interval over which hello SAS is valid, including hello start time and hello expiry time.</span></span>
* <span data-ttu-id="9b99d-114">Hello oprávnění udělují hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-114">hello permissions granted by hello SAS.</span></span> <span data-ttu-id="9b99d-115">Například SAS pro objekt blob může udělit pro čtení a zápisu objektů blob toothat oprávnění, ale oprávnění k odstranění.</span><span class="sxs-lookup"><span data-stu-id="9b99d-115">For example, a SAS for a blob might grant read and write permissions toothat blob, but not delete permissions.</span></span>
* <span data-ttu-id="9b99d-116">Volitelné IP adresu nebo rozsah IP adres, od kterých bude přijímat Azure Storage hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-116">An optional IP address or range of IP addresses from which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="9b99d-117">Například můžete určit rozsah IP adres, které patří tooyour organizace.</span><span class="sxs-lookup"><span data-stu-id="9b99d-117">For example, you might specify a range of IP addresses belonging tooyour organization.</span></span>
* <span data-ttu-id="9b99d-118">Hello protokol, přes který bude přijímat Azure Storage hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-118">hello protocol over which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="9b99d-119">Můžete použít tento volitelný parametr tooclients přístup toorestrict pomocí protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-119">You can use this optional parameter toorestrict access tooclients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="9b99d-120">Když budete používat sdílený přístupový podpis?</span><span class="sxs-lookup"><span data-stu-id="9b99d-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="9b99d-121">SAS můžete použít, pokud chcete přístup tooresources tooprovide v klientské tooany účtu úložiště není každý má váš účet úložiště přístupové klíče.</span><span class="sxs-lookup"><span data-stu-id="9b99d-121">You can use a SAS when you want tooprovide access tooresources in your storage account tooany client not possessing your storage account's access keys.</span></span> <span data-ttu-id="9b99d-122">Váš účet úložiště zahrnuje jak primární a sekundární přístupový klíč, které obě udělte účtu přístup pro správu tooyour a všechny prostředky v něm.</span><span class="sxs-lookup"><span data-stu-id="9b99d-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access tooyour account, and all resources within it.</span></span> <span data-ttu-id="9b99d-123">Vystavení některý z nich otevře toohello možnost škodlivý nebo nedbalosti použití vašeho účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-123">Exposing either of these keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="9b99d-124">Sdílené přístupové podpisy zadejte bezpečné alternativu, která umožňuje klientům tooread, zápisu a odstranění dat ve vašem účtu úložiště podle toohello oprávnění, které jste explicitně udělí oprávnění a bez nutnosti klíč účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-124">Shared access signatures provide a safe alternative that allows clients tooread, write, and delete data in your storage account according toohello permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="9b99d-125">Běžný scénář, kde je užitečné SAS je služba, kde uživatelé pro čtení a zápis účet úložiště tooyour svá vlastní data.</span><span class="sxs-lookup"><span data-stu-id="9b99d-125">A common scenario where a SAS is useful is a service where users read and write their own data tooyour storage account.</span></span> <span data-ttu-id="9b99d-126">Ve scénáři, kde účet úložiště ukládá data o uživatele existují dva vzory typické návrhu:</span><span class="sxs-lookup"><span data-stu-id="9b99d-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="9b99d-127">Klienti nahrávání a stahování dat přes službu proxy serveru front-end, který provádí ověřování.</span><span class="sxs-lookup"><span data-stu-id="9b99d-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="9b99d-128">Tuto službu front-endu proxy musí výhod hello povolení ověření obchodní pravidla, ale pro velké objemy dat nebo vysoký počet transakcí, vytváření služby, který dokáže vyhovět toomatch vyžádání může být nákladné nebo obtížná.</span><span class="sxs-lookup"><span data-stu-id="9b99d-128">This front-end proxy service has hello advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale toomatch demand may be expensive or difficult.</span></span>

  ![Diagram scénáře: Front-end proxy služby](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png)   

1. <span data-ttu-id="9b99d-130">Jednoduché služby ověří hello klienta podle potřeby a pak vygeneruje SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-130">A lightweight service authenticates hello client as needed and then generates a SAS.</span></span> <span data-ttu-id="9b99d-131">Po hello klient obdrží hello SAS, můžete přímo s definována hello SAS a pro interval hello povolenou hello SAS hello oprávnění přístupu k prostředkům účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="9b99d-131">Once hello client receives hello SAS, they can access storage account resources directly with hello permissions defined by hello SAS and for hello interval allowed by hello SAS.</span></span> <span data-ttu-id="9b99d-132">Hello SAS snižuje potřebu hello směrování všechna data prostřednictvím hello proxy front-endové služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-132">hello SAS mitigates hello need for routing all data through hello front-end proxy service.</span></span>

  ![Diagram scénáře: SAS zprostředkovatel služby](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png)   

<span data-ttu-id="9b99d-134">Mnoho reálných služby mohou používat hybridní tyto dva přístupy.</span><span class="sxs-lookup"><span data-stu-id="9b99d-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="9b99d-135">Například některá data mohou zpracovat a ověřit prostřednictvím hello front-end proxy serveru, zatímco jiné dat je uložit nebo číst přímo pomocí SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-135">For example, some data might be processed and validated via hello front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="9b99d-136">Kromě toho budete potřebovat toouse objekt SAS tooauthenticate hello zdroje v operaci kopírování v některých scénářích:</span><span class="sxs-lookup"><span data-stu-id="9b99d-136">Additionally, you will need toouse a SAS tooauthenticate hello source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="9b99d-137">Pokud kopírujete objekt blob tooanother objektů blob, který se nachází v jiný účet úložiště, musíte použít SAS tooauthenticate hello zdrojový objekt blob.</span><span class="sxs-lookup"><span data-stu-id="9b99d-137">When you copy a blob tooanother blob that resides in a different storage account, you must use a SAS tooauthenticate hello source blob.</span></span> <span data-ttu-id="9b99d-138">Volitelně můžete SAS tooauthenticate hello cílového objektu blob i.</span><span class="sxs-lookup"><span data-stu-id="9b99d-138">You can optionally use a SAS tooauthenticate hello destination blob as well.</span></span>
* <span data-ttu-id="9b99d-139">Při kopírování souboru tooanother soubor, který se nachází v jiný účet úložiště, musíte použít SAS tooauthenticate hello zdrojového souboru.</span><span class="sxs-lookup"><span data-stu-id="9b99d-139">When you copy a file tooanother file that resides in a different storage account, you must use a SAS tooauthenticate hello source file.</span></span> <span data-ttu-id="9b99d-140">Volitelně můžete SAS tooauthenticate hello cílového souboru i.</span><span class="sxs-lookup"><span data-stu-id="9b99d-140">You can optionally use a SAS tooauthenticate hello destination file as well.</span></span>
* <span data-ttu-id="9b99d-141">Při kopírování souboru tooa blob nebo soubor tooa objekt blob, musíte použít objekt SAS tooauthenticate hello zdroje i v případě, že hello zdrojové a cílové objekty jsou umístěny v rámci hello stejný účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="9b99d-141">When you copy a blob tooa file, or a file tooa blob, you must use a SAS tooauthenticate hello source object, even if hello source and destination objects reside within hello same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="9b99d-142">Druhy sdílených přístupových podpisů</span><span class="sxs-lookup"><span data-stu-id="9b99d-142">Types of shared access signatures</span></span>
<span data-ttu-id="9b99d-143">Můžete vytvořit dva druhy sdílených přístupových podpisů:</span><span class="sxs-lookup"><span data-stu-id="9b99d-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="9b99d-144">**SAS služby.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-144">**Service SAS.**</span></span> <span data-ttu-id="9b99d-145">Delegáti SAS služby Hello přístup k prostředku tooa jen v jedné služby úložiště hello: hello služby objektů Blob, fronty, tabulka nebo souboru.</span><span class="sxs-lookup"><span data-stu-id="9b99d-145">hello service SAS delegates access tooa resource in just one of hello storage services: hello Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="9b99d-146">V tématu [vytváření SAS služby](https://msdn.microsoft.com/library/dn140255.aspx) a [příklady SAS služby](https://msdn.microsoft.com/library/dn140256.aspx) podrobné informace o vytváření hello token SAS služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing hello service SAS token.</span></span>
* <span data-ttu-id="9b99d-147">**SAS účtu.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-147">**Account SAS.**</span></span> <span data-ttu-id="9b99d-148">Delegáti SAS účtu Hello přístup tooresources v jedné nebo více služeb úložiště hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-148">hello account SAS delegates access tooresources in one or more of hello storage services.</span></span> <span data-ttu-id="9b99d-149">Všechny operace hello dostupný přes SAS služby jsou dostupné prostřednictvím SAS účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-149">All of hello operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="9b99d-150">Kromě toho s účtem hello SAS, můžete delegovat přístup toooperations, které se vztahují tooa danou službu, jako například **vlastnosti služby Get/Set** a **získat statistiky služby**. Můžete taky delegovat přístup tooread, zápisu a operace odstranění pro kontejnery objektů blob, tabulky, fronty a sdílených složek, které se nedá vymezit přes SAS služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-150">Additionally, with hello account SAS, you can delegate access toooperations that apply tooa given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access tooread, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="9b99d-151">V tématu [vytváření SAS účtu](https://msdn.microsoft.com/library/mt584140.aspx) podrobné informace o vytváření tokenu SAS účtu hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing hello account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="9b99d-152">Jak funguje sdílený přístupový podpis</span><span class="sxs-lookup"><span data-stu-id="9b99d-152">How a shared access signature works</span></span>
<span data-ttu-id="9b99d-153">Sdílený přístupový podpis je podepsaný identifikátor URI, který ukazuje tooone nebo další prostředky úložiště a obsahuje token, který obsahuje speciální sadu parametry dotazu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-153">A shared access signature is a signed URI that points tooone or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="9b99d-154">Hello token Určuje, jak hello může přistupovat k prostředkům klientem hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-154">hello token indicates how hello resources may be accessed by hello client.</span></span> <span data-ttu-id="9b99d-155">Jeden z parametrů dotazu hello, hello podpis, se vytvářejí na základě parametrů hello SAS a podepsaný pomocí hello klíč účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-155">One of hello query parameters, hello signature, is constructed from hello SAS parameters and signed with hello account key.</span></span> <span data-ttu-id="9b99d-156">Tento podpis používá Azure Storage tooauthenticate hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-156">This signature is used by Azure Storage tooauthenticate hello SAS.</span></span>

<span data-ttu-id="9b99d-157">Tady je příklad identifikátor URI SAS, identifikátor URI prostředku hello zobrazující a tokenu SAS hello:</span><span class="sxs-lookup"><span data-stu-id="9b99d-157">Here's an example of a SAS URI, showing hello resource URI and hello SAS token:</span></span>

![Komponenty identifikátoru URI SAS](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png)   

<span data-ttu-id="9b99d-159">Hello SAS token je řetězec vygenerovat v hello *klienta* straně (viz hello [příklady SAS](#sas-examples) části Příklady kódu).</span><span class="sxs-lookup"><span data-stu-id="9b99d-159">hello SAS token is a string you generate on hello *client* side (see hello [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="9b99d-160">Token SAS, který generovat s hello Klientská knihovna pro úložiště, například není sledována úložiště Azure žádným způsobem.</span><span class="sxs-lookup"><span data-stu-id="9b99d-160">A SAS token you generate with hello storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="9b99d-161">Můžete vytvořit neomezený počet tokeny SAS na straně klienta hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-161">You can create an unlimited number of SAS tokens on hello client side.</span></span>

<span data-ttu-id="9b99d-162">Pokud klient zajišťuje tooAzure identifikátor URI SAS úložiště jako součást požadavku, služba hello zkontroluje hello SAS parametry a podpis tooverify, zda je platný pro ověření žádosti hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-162">When a client provides a SAS URI tooAzure Storage as part of a request, hello service checks hello SAS parameters and signature tooverify that it is valid for authenticating hello request.</span></span> <span data-ttu-id="9b99d-163">Pokud služba hello ověřuje, že je tento podpis hello platný, je žádost hello ověřit.</span><span class="sxs-lookup"><span data-stu-id="9b99d-163">If hello service verifies that hello signature is valid, then hello request is authenticated.</span></span> <span data-ttu-id="9b99d-164">Jinak je odmítnuta žádost hello s kódem chyby 403 (zakázáno).</span><span class="sxs-lookup"><span data-stu-id="9b99d-164">Otherwise, hello request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="9b99d-165">Sdílený přístupový podpis parametry</span><span class="sxs-lookup"><span data-stu-id="9b99d-165">Shared access signature parameters</span></span>
<span data-ttu-id="9b99d-166">SAS účtu Hello tokeny SAS služby zahrnují některé společné parametry a také provést několik parametrů, aby se liší.</span><span class="sxs-lookup"><span data-stu-id="9b99d-166">hello account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-tooaccount-sas-and-service-sas-tokens"></a><span data-ttu-id="9b99d-167">Společné parametry tooaccount SAS a tokeny SAS služby</span><span class="sxs-lookup"><span data-stu-id="9b99d-167">Parameters common tooaccount SAS and service SAS tokens</span></span>
* <span data-ttu-id="9b99d-168">**Verze rozhraní API** volitelný parametr, který určuje hello úložiště verze toouse tooexecute hello žádost o služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-168">**Api version** An optional parameter that specifies hello storage service version toouse tooexecute hello request.</span></span>
* <span data-ttu-id="9b99d-169">**Verze služby** povinný parametr, který určuje hello úložiště verze toouse tooauthenticate hello žádost o služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-169">**Service version** A required parameter that specifies hello storage service version toouse tooauthenticate hello request.</span></span>
* <span data-ttu-id="9b99d-170">**Počáteční čas.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-170">**Start time.**</span></span> <span data-ttu-id="9b99d-171">Toto je hello čas, na které hello SAS vstupuje v platnost.</span><span class="sxs-lookup"><span data-stu-id="9b99d-171">This is hello time at which hello SAS becomes valid.</span></span> <span data-ttu-id="9b99d-172">čas zahájení Hello pro sdílený přístupový podpis je volitelný.</span><span class="sxs-lookup"><span data-stu-id="9b99d-172">hello start time for a shared access signature is optional.</span></span> <span data-ttu-id="9b99d-173">Pokud čas spuštění je vynechán, hello SAS je hned platná.</span><span class="sxs-lookup"><span data-stu-id="9b99d-173">If a start time is omitted, hello SAS is effective immediately.</span></span> <span data-ttu-id="9b99d-174">Hello počáteční čas musí být vyjádřena v UTC (Coordinated Universal Time), s speciální označení UTC ("Z"), například `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="9b99d-174">hello start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="9b99d-175">**Čas vypršení platnosti.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-175">**Expiry time.**</span></span> <span data-ttu-id="9b99d-176">Toto je hello čas, po jejímž uplynutí hello SAS již není platný.</span><span class="sxs-lookup"><span data-stu-id="9b99d-176">This is hello time after which hello SAS is no longer valid.</span></span> <span data-ttu-id="9b99d-177">Osvědčené postupy doporučujeme, abyste zadejte čas vypršení platnosti pro SAS, nebo přidružit k zásadám uložené přístup.</span><span class="sxs-lookup"><span data-stu-id="9b99d-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="9b99d-178">Hello čas vypršení platnosti musí být vyjádřena v UTC (Coordinated Universal Time), s speciální označení UTC ("Z"), například `1994-11-05T13:15:30Z` (Další informace níže).</span><span class="sxs-lookup"><span data-stu-id="9b99d-178">hello expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="9b99d-179">**Oprávnění.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-179">**Permissions.**</span></span> <span data-ttu-id="9b99d-180">Hello oprávnění určená v hello SAS znamenat jakým operacím hello klienta můžete provést u prostředků úložiště hello pomocí hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-180">hello permissions specified on hello SAS indicate what operations hello client can perform against hello storage resource using hello SAS.</span></span> <span data-ttu-id="9b99d-181">K dispozici oprávnění se liší pro SAS účtu a SAS služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="9b99d-182">**IP.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-182">**IP.**</span></span> <span data-ttu-id="9b99d-183">Volitelný parametr, který určuje IP adresu nebo rozsah IP adres mimo Azure (části hello [stav konfigurace relace směrování](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) pro Express Route) z které tooaccept požadavky.</span><span class="sxs-lookup"><span data-stu-id="9b99d-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see hello section [Routing session configuration state](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which tooaccept requests.</span></span>
* <span data-ttu-id="9b99d-184">**Protokol.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-184">**Protocol.**</span></span> <span data-ttu-id="9b99d-185">Volitelný parametr, který určuje protokol, hello povolené pro žádost.</span><span class="sxs-lookup"><span data-stu-id="9b99d-185">An optional parameter that specifies hello protocol permitted for a request.</span></span> <span data-ttu-id="9b99d-186">Možné hodnoty jsou protokolů HTTPS a HTTP (`https,http`), který je pouze hello výchozí hodnotu, nebo HTTPS (`https`).</span><span class="sxs-lookup"><span data-stu-id="9b99d-186">Possible values are both HTTPS and HTTP (`https,http`), which is hello default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="9b99d-187">Všimněte si, že HTTP jenom není povolenou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="9b99d-188">**Podpis.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-188">**Signature.**</span></span> <span data-ttu-id="9b99d-189">podpis Hello se vytvářejí na základě hello další parametry, zadaný jako součást tokenu a pak se zašifrují.</span><span class="sxs-lookup"><span data-stu-id="9b99d-189">hello signature is constructed from hello other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="9b99d-190">Použije se tooauthenticate hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-190">It's used tooauthenticate hello SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="9b99d-191">Parametry pro token SAS služby</span><span class="sxs-lookup"><span data-stu-id="9b99d-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="9b99d-192">**Úložiště prostředků.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-192">**Storage resource.**</span></span> <span data-ttu-id="9b99d-193">Úložiště prostředků, pro které můžete delegovat přístup se službou SAS patří:</span><span class="sxs-lookup"><span data-stu-id="9b99d-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="9b99d-194">Kontejnery a objekty BLOB</span><span class="sxs-lookup"><span data-stu-id="9b99d-194">Containers and blobs</span></span>
  * <span data-ttu-id="9b99d-195">Sdílených složek a souborů</span><span class="sxs-lookup"><span data-stu-id="9b99d-195">File shares and files</span></span>
  * <span data-ttu-id="9b99d-196">Fronty</span><span class="sxs-lookup"><span data-stu-id="9b99d-196">Queues</span></span>
  * <span data-ttu-id="9b99d-197">Tabulky a rozsahy adres entity tabulky.</span><span class="sxs-lookup"><span data-stu-id="9b99d-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="9b99d-198">Parametry pro token SAS účtu</span><span class="sxs-lookup"><span data-stu-id="9b99d-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="9b99d-199">**Služba nebo služby.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-199">**Service or services.**</span></span> <span data-ttu-id="9b99d-200">SAS účtu můžete delegovat přístup tooone nebo více služeb úložiště hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-200">An account SAS can delegate access tooone or more of hello storage services.</span></span> <span data-ttu-id="9b99d-201">Například můžete vytvořit účet SAS, delegáti přístup toohello služby objektů Blob a souboru.</span><span class="sxs-lookup"><span data-stu-id="9b99d-201">For example, you can create an account SAS that delegates access toohello Blob and File service.</span></span> <span data-ttu-id="9b99d-202">Nebo můžete vytvořit SAS, delegáti přístup tooall čtyři služby (objekt Blob, fronty, tabulky a soubor).</span><span class="sxs-lookup"><span data-stu-id="9b99d-202">Or you can create a SAS that delegates access tooall four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="9b99d-203">**Typy prostředků úložiště.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-203">**Storage resource types.**</span></span> <span data-ttu-id="9b99d-204">SAS účtu vztahuje tooone nebo další třídy prostředků úložiště, nikoli konkrétní prostředek.</span><span class="sxs-lookup"><span data-stu-id="9b99d-204">An account SAS applies tooone or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="9b99d-205">Můžete vytvořit účtu SAS toodelegate přístup do:</span><span class="sxs-lookup"><span data-stu-id="9b99d-205">You can create an account SAS toodelegate access to:</span></span>
  * <span data-ttu-id="9b99d-206">API úrovně služeb, které se nazývají proti prostředků účtu úložiště hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-206">Service-level APIs, which are called against hello storage account resource.</span></span> <span data-ttu-id="9b99d-207">Mezi příklady patří **vlastnosti služby Get/Set**, **získat statistiky služby**, a **seznamu kontejnery nebo fronty nebo tabulky nebo sdílené složky**.</span><span class="sxs-lookup"><span data-stu-id="9b99d-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="9b99d-208">Kontejner úrovni rozhraní API, které se nazývají u hello kontejneru objektů pro každou službu: blob kontejnery, front, tabulky a sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="9b99d-208">Container-level APIs, which are called against hello container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="9b99d-209">Mezi příklady patří **vytvoření nebo odstranění kontejneru**, **vytvoření nebo odstranění fronty**, **vytvoření nebo odstranění tabulky**, **vytvoření nebo odstranění sdílené složky**a  **Seznam objektů BLOB nebo souborů a adresářů**.</span><span class="sxs-lookup"><span data-stu-id="9b99d-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="9b99d-210">API úrovni objektů, které se nazývají proti objekty BLOB, fronty zpráv, entity tabulky a soubory.</span><span class="sxs-lookup"><span data-stu-id="9b99d-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="9b99d-211">Například **Put Blob**, **dotazu Entity**, **získat zprávy**, a **vytvořit soubor**.</span><span class="sxs-lookup"><span data-stu-id="9b99d-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="9b99d-212">Příklady identifikátorů URI SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="9b99d-213">Příklad identifikátor URI SAS služby</span><span class="sxs-lookup"><span data-stu-id="9b99d-213">Service SAS URI example</span></span>

<span data-ttu-id="9b99d-214">Tady je příklad služby identifikátor URI SAS, která poskytuje čtení a zápisu objektů blob tooa oprávnění.</span><span class="sxs-lookup"><span data-stu-id="9b99d-214">Here is an example of a service SAS URI that provides read and write permissions tooa blob.</span></span> <span data-ttu-id="9b99d-215">Tabulka Hello rozpis jednotlivých součástí hello URI toounderstand jak přispívá toohello SAS:</span><span class="sxs-lookup"><span data-stu-id="9b99d-215">hello table breaks down each part of hello URI toounderstand how it contributes toohello SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="9b99d-216">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="9b99d-216">Name</span></span> | <span data-ttu-id="9b99d-217">Část SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-217">SAS portion</span></span> | <span data-ttu-id="9b99d-218">Popis</span><span class="sxs-lookup"><span data-stu-id="9b99d-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9b99d-219">Identifikátor URI objektu BLOB</span><span class="sxs-lookup"><span data-stu-id="9b99d-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="9b99d-220">Adresa Hello hello objektů blob.</span><span class="sxs-lookup"><span data-stu-id="9b99d-220">hello address of hello blob.</span></span> <span data-ttu-id="9b99d-221">Všimněte si, že pomocí protokolu HTTPS se důrazně doporučuje.</span><span class="sxs-lookup"><span data-stu-id="9b99d-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="9b99d-222">Verze služby úložiště</span><span class="sxs-lookup"><span data-stu-id="9b99d-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="9b99d-223">Pro úložiště služby verze 2012-02-12 a novější, tento parametr určuje toouse verze hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-223">For storage services version 2012-02-12 and later, this parameter indicates hello version toouse.</span></span> |
| <span data-ttu-id="9b99d-224">Čas spuštění</span><span class="sxs-lookup"><span data-stu-id="9b99d-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="9b99d-225">Zadat ve formátu času UTC.</span><span class="sxs-lookup"><span data-stu-id="9b99d-225">Specified in UTC time.</span></span> <span data-ttu-id="9b99d-226">Pokud chcete hello SAS toobe platný okamžitě, vynechejte hello počáteční čas.</span><span class="sxs-lookup"><span data-stu-id="9b99d-226">If you want hello SAS toobe valid immediately, omit hello start time.</span></span> |
| <span data-ttu-id="9b99d-227">Čas vypršení platnosti</span><span class="sxs-lookup"><span data-stu-id="9b99d-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="9b99d-228">Zadat ve formátu času UTC.</span><span class="sxs-lookup"><span data-stu-id="9b99d-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="9b99d-229">Prostředek</span><span class="sxs-lookup"><span data-stu-id="9b99d-229">Resource</span></span> |`sr=b` |<span data-ttu-id="9b99d-230">prostředek Hello je objekt blob.</span><span class="sxs-lookup"><span data-stu-id="9b99d-230">hello resource is a blob.</span></span> |
| <span data-ttu-id="9b99d-231">Oprávnění</span><span class="sxs-lookup"><span data-stu-id="9b99d-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="9b99d-232">Hello oprávnění udělují hello SAS zahrnují Read (r) a zápis (w).</span><span class="sxs-lookup"><span data-stu-id="9b99d-232">hello permissions granted by hello SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="9b99d-233">Rozsah IP adres</span><span class="sxs-lookup"><span data-stu-id="9b99d-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="9b99d-234">Hello rozsah IP adres, ze kterých budou přijímány žádost.</span><span class="sxs-lookup"><span data-stu-id="9b99d-234">hello range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="9b99d-235">Protocol (Protokol)</span><span class="sxs-lookup"><span data-stu-id="9b99d-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="9b99d-236">Jsou povoleny pouze požadavky pomocí protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="9b99d-237">Podpis</span><span class="sxs-lookup"><span data-stu-id="9b99d-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="9b99d-238">Použít tooauthenticate přístup toohello objektů blob.</span><span class="sxs-lookup"><span data-stu-id="9b99d-238">Used tooauthenticate access toohello blob.</span></span> <span data-ttu-id="9b99d-239">podpis Hello je klíčem HMAC, vypočítán na řetězec k podepsání a klíč pomocí algoritmus SHA256 hello a pak zakódován pomocí kódování Base64.</span><span class="sxs-lookup"><span data-stu-id="9b99d-239">hello signature is an HMAC computed over a string-to-sign and key using hello SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="9b99d-240">Příklad identifikátor URI pro SAS účtu</span><span class="sxs-lookup"><span data-stu-id="9b99d-240">Account SAS URI example</span></span>

<span data-ttu-id="9b99d-241">Tady je příklad účtu SAS, hello používá stejné společné parametry na hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-241">Here is an example of an account SAS that uses hello same common parameters on hello token.</span></span> <span data-ttu-id="9b99d-242">Vzhledem k tomu, že tyto parametry jsou popsané výše, nejsou popsané v tomto poli.</span><span class="sxs-lookup"><span data-stu-id="9b99d-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="9b99d-243">Pouze hello parametry, které jsou specifické tooaccount SAS jsou popsány v tabulce hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-243">Only hello parameters that are specific tooaccount SAS are described in hello table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="9b99d-244">Name (Název)</span><span class="sxs-lookup"><span data-stu-id="9b99d-244">Name</span></span> | <span data-ttu-id="9b99d-245">Část SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-245">SAS portion</span></span> | <span data-ttu-id="9b99d-246">Popis</span><span class="sxs-lookup"><span data-stu-id="9b99d-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9b99d-247">Identifikátor URI</span><span class="sxs-lookup"><span data-stu-id="9b99d-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="9b99d-248">Hello koncový bod služby objektů Blob, s parametry pro získávání vlastnosti služby (Pokud je volána s GET) nebo nastavení vlastností služby (při volání sadou).</span><span class="sxs-lookup"><span data-stu-id="9b99d-248">hello Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="9b99d-249">Služby</span><span class="sxs-lookup"><span data-stu-id="9b99d-249">Services</span></span> |`ss=bf` |<span data-ttu-id="9b99d-250">Hello SAS platí toohello objektů Blob a souborové služby</span><span class="sxs-lookup"><span data-stu-id="9b99d-250">hello SAS applies toohello Blob and File services</span></span> |
| <span data-ttu-id="9b99d-251">Typy prostředků</span><span class="sxs-lookup"><span data-stu-id="9b99d-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="9b99d-252">operace na úrovni tooservice se vztahuje Hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-252">hello SAS applies tooservice-level operations.</span></span> |
| <span data-ttu-id="9b99d-253">Oprávnění</span><span class="sxs-lookup"><span data-stu-id="9b99d-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="9b99d-254">Hello oprávnění udělují přístup tooread a operací zápisu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-254">hello permissions grant access tooread and write operations.</span></span> |

<span data-ttu-id="9b99d-255">Vzhledem k tomu, že oprávnění jsou omezeny toohello úrovně služby, přístupný operací s Tento SAS jsou **získat vlastnosti objektu Blob služby** (čtení) a **nastavit vlastnosti služby objektů Blob** (zápisu).</span><span class="sxs-lookup"><span data-stu-id="9b99d-255">Given that permissions are restricted toohello service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="9b99d-256">Ale a jiný zdroj v URI hello stejný token SAS mohou být také příliš použít přístup toodelegate**získat statistiky služby objektů Blob** (načíst).</span><span class="sxs-lookup"><span data-stu-id="9b99d-256">However, with a different resource URI, hello same SAS token could also be used toodelegate access too**Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="9b99d-257">Řízení SAS se zásadami uložené přístupu</span><span class="sxs-lookup"><span data-stu-id="9b99d-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="9b99d-258">Sdílený přístupový podpis může trvat dvě formy:</span><span class="sxs-lookup"><span data-stu-id="9b99d-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="9b99d-259">**Ad hoc SAS:** při vytváření ad hoc SAS, čas spuštění hello, čas vypršení platnosti a oprávnění pro hello SAS jsou určené v hello identifikátor URI pro SAS (nebo implicitní v případě hello, kde je vynechán čas spuštění).</span><span class="sxs-lookup"><span data-stu-id="9b99d-259">**Ad hoc SAS:** When you create an ad hoc SAS, hello start time, expiry time, and permissions for hello SAS are all specified in hello SAS URI (or implied, in hello case where start time is omitted).</span></span> <span data-ttu-id="9b99d-260">Tento typ SAS se dá vytvořit jako SAS účtu nebo SAS služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="9b99d-261">**SAS se zásadami přístupu uložené:** zásadu uložené přístupu je definovaný na kontejner prostředku--kontejner objektů blob, tabulky, fronty, nebo sdílení – souborů a může být omezení použité toomanage pro jeden nebo více sdílených přístupových podpisů.</span><span class="sxs-lookup"><span data-stu-id="9b99d-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used toomanage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="9b99d-262">Pokud přidružíte SAS se zásadami přístupu uložené, zdědí hello SAS hello omezení – čas spuštění hello, čas vypršení platnosti a--definována pro zásady přístupu hello uložené oprávnění.</span><span class="sxs-lookup"><span data-stu-id="9b99d-262">When you associate a SAS with a stored access policy, hello SAS inherits hello constraints--hello start time, expiry time, and permissions--defined for hello stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="9b99d-263">SAS účtu musí být v současné době ad hoc SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="9b99d-264">Uložených přístupu zásady se ještě nepodporují pro SAS účtu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="9b99d-265">Hello rozdíl mezi formuláři hello dva je důležité pro jeden klíč scénář: odvolaných certifikátů.</span><span class="sxs-lookup"><span data-stu-id="9b99d-265">hello difference between hello two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="9b99d-266">Protože identifikátor URI SAS je adresa URL, každý uživatel, který získá hello SAS můžete použít, bez ohledu na to, který byl původně vytvořen.</span><span class="sxs-lookup"><span data-stu-id="9b99d-266">Because a SAS URI is a URL, anyone that obtains hello SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="9b99d-267">Pokud veřejně publikována SAS, můžete použít každý, vítáme.</span><span class="sxs-lookup"><span data-stu-id="9b99d-267">If a SAS is published publicly, it can be used by anyone in hello world.</span></span> <span data-ttu-id="9b99d-268">SAS uděluje přístup tooresources tooanyone každý má dokud jednu ze čtyř akcí se stane:</span><span class="sxs-lookup"><span data-stu-id="9b99d-268">A SAS grants access tooresources tooanyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="9b99d-269">čas vypršení platnosti Hello zadaný na hello dosaženo SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-269">hello expiry time specified on hello SAS is reached.</span></span>
2. <span data-ttu-id="9b99d-270">čas vypršení platnosti Hello zadaný v zásadách přístupu hello uložené odkazuje hello je dosaženo SAS, (Pokud je odkazována zásadu uložené přístupu a určuje, že čas vypršení platnosti).</span><span class="sxs-lookup"><span data-stu-id="9b99d-270">hello expiry time specified on hello stored access policy referenced by hello SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="9b99d-271">Tato situace může nastat, protože hello uplyne, nebo protože jste změnili hello uložené zásady přístupu, doba vypršení platnosti v minulosti, hello, což je jedním ze způsobů toorevoke hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-271">This can occur either because hello interval elapses, or because you've modified hello stored access policy with an expiry time in hello past, which is one way toorevoke hello SAS.</span></span>
3. <span data-ttu-id="9b99d-272">Hello uložené zásady přístupu odkazuje hello odstranění SAS, který je jiný způsob toorevoke hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-272">hello stored access policy referenced by hello SAS is deleted, which is another way toorevoke hello SAS.</span></span> <span data-ttu-id="9b99d-273">Všimněte si, že pokud je znovu vytvořit zásady přístupu hello uložené s přesně hello stejný název, všechny existující SAS tokeny budou znovu platné podle oprávnění toohello přidružen (za předpokladu, že čas vypršení platnosti hello na hello SAS neuplynul) uložené přístup zásad.</span><span class="sxs-lookup"><span data-stu-id="9b99d-273">Note that if you recreate hello stored access policy with exactly hello same name, all existing SAS tokens will again be valid according toohello permissions associated with that stored access policy (assuming that hello expiry time on hello SAS has not passed).</span></span> <span data-ttu-id="9b99d-274">Pokud jsou záměrné toorevoke hello SAS, mít jistotu toouse jiný název znovu hello zásady přístupu, doba vypršení platnosti v budoucnu hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-274">If you are intending toorevoke hello SAS, be sure toouse a different name if you recreate hello access policy with an expiry time in hello future.</span></span>
4. <span data-ttu-id="9b99d-275">Hello klíč účtu, který byl použité toocreate hello SAS vygenerován znovu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-275">hello account key that was used toocreate hello SAS is regenerated.</span></span> <span data-ttu-id="9b99d-276">Znovu vygenerovat klíč účtu způsobí, že všechny součásti aplikace pomocí tohoto klíče toofail tooauthenticate dokud jste aktualizovány toouse buď hello jiných platný účet nebo hello účet nově obnoveného klíče.</span><span class="sxs-lookup"><span data-stu-id="9b99d-276">Regenerating an account key will cause all application components using that key toofail tooauthenticate until they're updated toouse either hello other valid account key or hello newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9b99d-277">Sdílený přístupový podpis identifikátor URI je přidružen hello účet klíče používané toocreate hello podpisu a hello související zásady uložené přístupu (pokud existuje).</span><span class="sxs-lookup"><span data-stu-id="9b99d-277">A shared access signature URI is associated with hello account key used toocreate hello signature, and hello associated stored access policy (if any).</span></span> <span data-ttu-id="9b99d-278">Pokud je zadána žádná zásada uložené přístup, hello pouze způsob toorevoke sdílený přístupový podpis je klíč účtu toochange hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-278">If no stored access policy is specified, hello only way toorevoke a shared access signature is toochange hello account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="9b99d-279">Ověřování z klientské aplikace s SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="9b99d-280">Klienta, která je vlastníkem SAS můžete použít hello SAS tooauthenticate požadavek účet úložiště, pro kterou, které nemají klíče účtu hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-280">A client who is in possession of a SAS can use hello SAS tooauthenticate a request against a storage account for which they do not possess hello account keys.</span></span> <span data-ttu-id="9b99d-281">SAS můžete zahrnout do připojovací řetězec nebo použití přímo z odpovídající konstruktor hello nebo metoda.</span><span class="sxs-lookup"><span data-stu-id="9b99d-281">A SAS can be included in a connection string, or used directly from hello appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="9b99d-282">Pomocí SAS v připojovacím řetězci</span><span class="sxs-lookup"><span data-stu-id="9b99d-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="9b99d-283">Pomocí SAS v konstruktoru nebo – metoda</span><span class="sxs-lookup"><span data-stu-id="9b99d-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="9b99d-284">Několik konstruktorů knihovny klienta Azure Storage a přetížení metody nabízejí parametr SAS, aby se můžete ověřit žádost toohello služby pomocí SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request toohello service with a SAS.</span></span>

<span data-ttu-id="9b99d-285">Zde identifikátor URI SAS je třeba použít toocreate tooa referenční – objekt blob bloku.</span><span class="sxs-lookup"><span data-stu-id="9b99d-285">For example, here a SAS URI is used toocreate a reference tooa block blob.</span></span> <span data-ttu-id="9b99d-286">Hello SAS poskytuje hello pouze přihlašovacích údajů nezbytných pro požadavek hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-286">hello SAS provides hello only credentials needed for hello request.</span></span> <span data-ttu-id="9b99d-287">odkaz na objekt blob bloku Hello se pak použije pro operaci zápisu:</span><span class="sxs-lookup"><span data-stu-id="9b99d-287">hello block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with hello specified name toohello container.
// If hello blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="9b99d-288">Osvědčené postupy při použití SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-288">Best practices when using SAS</span></span>
<span data-ttu-id="9b99d-289">Při použití sdílených přístupových podpisů v aplikacích, je třeba toobe vědět dva potenciální rizika:</span><span class="sxs-lookup"><span data-stu-id="9b99d-289">When you use shared access signatures in your applications, you need toobe aware of two potential risks:</span></span>

* <span data-ttu-id="9b99d-290">Pokud SAS došlo k úniku, můžete použít libovolný uživatel, který získává, což může potenciálně ohrozit váš účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="9b99d-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="9b99d-291">Pokud vyprší platnost tooa klientská aplikace a aplikace hello je nelze tooretrieve nové SAS ze služby k dispozici SAS, může být narušen funkčnost hello aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b99d-291">If a SAS provided tooa client application expires and hello application is unable tooretrieve a new SAS from your service, then hello application's functionality may be hindered.</span></span>

<span data-ttu-id="9b99d-292">Hello následující doporučení pro použití sdílených přístupových podpisů můžete zmírnit tato rizika:</span><span class="sxs-lookup"><span data-stu-id="9b99d-292">hello following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="9b99d-293">**Vždycky používají protokol HTTPS** toocreate nebo distribuovat SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-293">**Always use HTTPS** toocreate or distribute a SAS.</span></span> <span data-ttu-id="9b99d-294">Pokud SAS je předán přes protokol HTTP a zachycení, útočník provádění útok man-in-the-middle je možné tooread hello SAS a použít jej jako hello zamýšlená uživatel může mít potenciálně nebezpečné citlivá data nebo aby vám umožnil poškození dat podle hello Uživatel se zlými úmysly.</span><span class="sxs-lookup"><span data-stu-id="9b99d-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able tooread hello SAS and then use it just as hello intended user could have, potentially compromising sensitive data or allowing for data corruption by hello malicious user.</span></span>
2. <span data-ttu-id="9b99d-295">**Odkaz na uložený zásady přístupu, kde je to možné.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="9b99d-296">Udělení přístupu zásady hello možnost toorevoke oprávnění bez nutnosti klíče účtu úložiště hello tooregenerate uložené.</span><span class="sxs-lookup"><span data-stu-id="9b99d-296">Stored access policies give you hello option toorevoke permissions without having tooregenerate hello storage account keys.</span></span> <span data-ttu-id="9b99d-297">Nastavení vypršení platnosti hello na velmi daleko v hello budoucí (nebo nekonečné) a ujistěte se, zda se pravidelně aktualizují toomove dále do budoucích hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-297">Set hello expiration on these very far in hello future (or infinite) and make sure it's regularly updated toomove it farther into hello future.</span></span>
3. <span data-ttu-id="9b99d-298">**Použijte ucelené časy vypršení platnosti na ad hoc SAS.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="9b99d-299">Tímto způsobem i když je ohrožení SAS, je platná pouze pro po krátkou dobu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="9b99d-300">Tento postup je zvlášť důležité, pokud nemůže odkazovat zásadu uložené přístupu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="9b99d-301">Ucelené časy vypršení platnosti také omezit hello množství dat, s možností zápisu objektů blob tooa omezením hello čas k dispozici tooupload tooit.</span><span class="sxs-lookup"><span data-stu-id="9b99d-301">Near-term expiration times also limit hello amount of data that can be written tooa blob by limiting hello time available tooupload tooit.</span></span>
4. <span data-ttu-id="9b99d-302">**Mají klienti automaticky obnovte hello SAS v případě potřeby.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-302">**Have clients automatically renew hello SAS if necessary.**</span></span> <span data-ttu-id="9b99d-303">Klienti musí obnovit hello SAS dobře před vypršením platnosti hello v pořadí tooallow dobu opakovaných pokusů, pokud není k dispozici hello služba poskytující hello SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-303">Clients should renew hello SAS well before hello expiration, in order tooallow time for retries if hello service providing hello SAS is unavailable.</span></span> <span data-ttu-id="9b99d-304">Pokud vaše SAS slouží toobe používá pro malý počet okamžitou, krátkodobou operace, které jsou očekává toobe dokončeny v rámci hello doba vypršení platnosti a potom to může být zbytečné hello SAS není správně toobe obnovit.</span><span class="sxs-lookup"><span data-stu-id="9b99d-304">If your SAS is meant toobe used for a small number of immediate, short-lived operations that are expected toobe completed within hello expiration period, then this may be unnecessary as hello SAS is not expected toobe renewed.</span></span> <span data-ttu-id="9b99d-305">Ale pokud máte klienta, který je pravidelně zajistit požadavky přes SAS, pak hello možnost vypršení platnosti dodává do play.</span><span class="sxs-lookup"><span data-stu-id="9b99d-305">However, if you have client that is routinely making requests via SAS, then hello possibility of expiration comes into play.</span></span> <span data-ttu-id="9b99d-306">Hello klíče pozornost je třeba hello toobalance pro hello SAS toobe krátkodobou (jako výše uvedená) s tooensure nutné hello, který hello klient požaduje obnovení již v rané fázi dostatek (tooavoid přerušení kvůli toohello SAS kterým vyprší platnost předchozí toosuccessful obnovení).</span><span class="sxs-lookup"><span data-stu-id="9b99d-306">hello key consideration is toobalance hello need for hello SAS toobe short-lived (as previously stated) with hello need tooensure that hello client is requesting renewal early enough (tooavoid disruption due toohello SAS expiring prior toosuccessful renewal).</span></span>
5. <span data-ttu-id="9b99d-307">**Pečlivě se časem spuštění SAS.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="9b99d-308">Pokud nastavíte čas zahájení hello pro SAS příliš**nyní**, pak z důvodu tooclock zkosení (rozdíly v aktuální čas podle toodifferent počítače), selhání může být dodržen občas pro hello první několik minut.</span><span class="sxs-lookup"><span data-stu-id="9b99d-308">If you set hello start time for a SAS too**now**, then due tooclock skew (differences in current time according toodifferent machines), failures may be observed intermittently for hello first few minutes.</span></span> <span data-ttu-id="9b99d-309">Obecně platí nastavte hello počáteční čas toobe alespoň 15 minut v posledních hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-309">In general, set hello start time toobe at least 15 minutes in hello past.</span></span> <span data-ttu-id="9b99d-310">Nebo si ho nastavit vůbec, což znamená, že platný okamžitě ve všech případech.</span><span class="sxs-lookup"><span data-stu-id="9b99d-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="9b99d-311">Hello obecně totéž platí i – čas tooexpiry mějte na paměti, můžete pozorovat až too15 minut od času zkosení v obou směrech na žádnou žádostí.</span><span class="sxs-lookup"><span data-stu-id="9b99d-311">hello same generally applies tooexpiry time as well--remember that you may observe up too15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="9b99d-312">Pro klienty pomocí REST verze předchozí too2012-02-12 hello maximální doba trvání SAS, která neodkazuje na zásadu uložené přístupu je 1 hodinu a všechny zásady zadání dlouhodobější než, se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="9b99d-312">For clients using a REST version prior too2012-02-12, hello maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="9b99d-313">**Buďte konkrétní s toobe hello prostředku získat přístup.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-313">**Be specific with hello resource toobe accessed.**</span></span> <span data-ttu-id="9b99d-314">Nejlepším způsobem zabezpečení je tooprovide uživatele s hello minimální požadovaná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="9b99d-314">A security best practice is tooprovide a user with hello minimum required privileges.</span></span> <span data-ttu-id="9b99d-315">Když uživatel potřebuje pouze jednu entitu tooa přístup pro čtení, pak jim přidělte jednu entitu toothat přístup pro čtení a přístup není pro čtení, zápisu a odstraňování tooall entity.</span><span class="sxs-lookup"><span data-stu-id="9b99d-315">If a user only needs read access tooa single entity, then grant them read access toothat single entity, and not read/write/delete access tooall entities.</span></span> <span data-ttu-id="9b99d-316">Navíc pomáhají zmenšit prostor hello škody, pokud SAS dojde k ohrožení bezpečnosti vzhledem k tomu hello SAS má méně hello rukou útočníka.</span><span class="sxs-lookup"><span data-stu-id="9b99d-316">This also helps lessen hello damage if a SAS is compromised because hello SAS has less power in hello hands of an attacker.</span></span>
7. <span data-ttu-id="9b99d-317">**Pochopte, že váš účet bude účtován na jakékoli využití, včetně udělat pomocí SAS.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="9b99d-318">Pokud zadáte tooa oprávnění k zápisu objektů blob, můžete zvolit tooupload objekt blob 200GB.</span><span class="sxs-lookup"><span data-stu-id="9b99d-318">If you provide write access tooa blob, a user may choose tooupload a 200GB blob.</span></span> <span data-ttu-id="9b99d-319">Pokud jste dali je také přístup pro čtení, vybírá toodownload ho 10krát, přijímají 2 TB odchozí stojí za vás.</span><span class="sxs-lookup"><span data-stu-id="9b99d-319">If you've given them read access as well, they may choose toodownload it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="9b99d-320">Znovu zadejte omezenými oprávněními toohelp zmírnit potenciální akce hello uživatelé se zlými úmysly.</span><span class="sxs-lookup"><span data-stu-id="9b99d-320">Again, provide limited permissions toohelp mitigate hello potential actions of malicious users.</span></span> <span data-ttu-id="9b99d-321">Použít krátkodobou SAS tooreduce této hrozby (ale být s vědomím zkosení podél hello koncový čas hodiny).</span><span class="sxs-lookup"><span data-stu-id="9b99d-321">Use short-lived SAS tooreduce this threat (but be mindful of clock skew on hello end time).</span></span>
8. <span data-ttu-id="9b99d-322">**Ověření dat zapsaných pomocí SAS.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="9b99d-323">Když klientské aplikace zapíše data účtu úložiště tooyour, mějte na paměti, že mohou být problémy s daty.</span><span class="sxs-lookup"><span data-stu-id="9b99d-323">When a client application writes data tooyour storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="9b99d-324">Pokud vaše aplikace vyžaduje, aby tento data být ověřen nebo oprávnění, než bude připravena toouse, byste měli provést toto ověření po zapsání hello dat, a než bude použit v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="9b99d-324">If your application requires that that data be validated or authorized before it is ready toouse, you should perform this validation after hello data is written and before it is used by your application.</span></span> <span data-ttu-id="9b99d-325">Tento postup také chrání před poškozený nebo škodlivý data zapisovaný tooyour účtu, uživatel, který správně získali hello SAS nebo uživatelem zneužitím uniklé SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-325">This practice also protects against corrupt or malicious data being written tooyour account, either by a user who properly acquired hello SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="9b99d-326">**Nepoužívejte vždy SAS.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-326">**Don't always use SAS.**</span></span> <span data-ttu-id="9b99d-327">Někdy hello rizika spojená s konkrétní operaci u vašeho účtu úložiště převáží nad hello výhod SAS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-327">Sometimes hello risks associated with a particular operation against your storage account outweigh hello benefits of SAS.</span></span> <span data-ttu-id="9b99d-328">Pro tyto operace vytvoření služby střední vrstvy, který zapíše účet úložiště tooyour po provedení obchodní pravidla ověřování, ověřování a auditování.</span><span class="sxs-lookup"><span data-stu-id="9b99d-328">For such operations, create a middle-tier service that writes tooyour storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="9b99d-329">Někdy je také jednodušší přístup toomanage jinými způsoby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-329">Also, sometimes it's simpler toomanage access in other ways.</span></span> <span data-ttu-id="9b99d-330">Například pokud chcete toomake všech objektů BLOB v kontejneru veřejně čitelné, můžete použít hello kontejneru Public, místo poskytnutí klienta tooevery SAS pro přístup.</span><span class="sxs-lookup"><span data-stu-id="9b99d-330">For example, if you want toomake all blobs in a container publically readable, you can make hello container Public, rather than providing a SAS tooevery client for access.</span></span>
10. <span data-ttu-id="9b99d-331">**Toomonitor Storage Analytics použijte vaši aplikaci.**</span><span class="sxs-lookup"><span data-stu-id="9b99d-331">**Use Storage Analytics toomonitor your application.**</span></span> <span data-ttu-id="9b99d-332">Můžete použít protokolování a metriky tooobserve žádné špiček selhání ověřování kvůli výpadku tooan ve vaší SAS poskytovatele služby nebo toohello nechtěnému odebrání zásad přístupu uložené.</span><span class="sxs-lookup"><span data-stu-id="9b99d-332">You can use logging and metrics tooobserve any spike in authentication failures due tooan outage in your SAS provider service or toohello inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="9b99d-333">V tématu hello [Blog týmu Azure Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) Další informace.</span><span class="sxs-lookup"><span data-stu-id="9b99d-333">See hello [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="9b99d-334">Příklady SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-334">SAS examples</span></span>
<span data-ttu-id="9b99d-335">Zde jsou některé příklady oba typy sdílené přístupové podpisy SAS účtu a SAS služby.</span><span class="sxs-lookup"><span data-stu-id="9b99d-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="9b99d-336">toorun tyto příklady jazyka C#, je nutné tooreference hello následující balíčky NuGet ve vašem projektu:</span><span class="sxs-lookup"><span data-stu-id="9b99d-336">toorun these C# examples, you need tooreference hello following NuGet packages in your project:</span></span>

* <span data-ttu-id="9b99d-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), verze 6.x nebo novější (toouse SAS účtu).</span><span class="sxs-lookup"><span data-stu-id="9b99d-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (toouse account SAS).</span></span>
* [<span data-ttu-id="9b99d-338">Azure Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="9b99d-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="9b99d-339">Další příklady, které ukazují, jak toocreate a testovací SAS, najdete v části [ukázky kódu Azure pro úložiště](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="9b99d-339">For additional examples that show how toocreate and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="9b99d-340">Příklad: Vytvoření a použití SAS účtu</span><span class="sxs-lookup"><span data-stu-id="9b99d-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="9b99d-341">Hello následující příklad kódu vytvoří účet SAS, který je platný pro hello Blob souborové služby a služby, a poskytuje hello klienta oprávnění pro čtení, zápisu a seznam oprávnění tooaccess úrovni služby rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="9b99d-341">hello following code example creates an account SAS that is valid for hello Blob and File services, and gives hello client permissions read, write, and list permissions tooaccess service-level APIs.</span></span> <span data-ttu-id="9b99d-342">SAS účtu Hello omezuje tooHTTPS protokol hello, takže hello požadavek musí být provedeny s protokolem HTTPS.</span><span class="sxs-lookup"><span data-stu-id="9b99d-342">hello account SAS restricts hello protocol tooHTTPS, so hello request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // toocreate hello account SAS, you need toouse your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for hello account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return hello SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="9b99d-343">toouse hello účet SAS tooaccess úrovně služeb rozhraní API pro hello služby objektů Blob, vytvořit objekt Blob klienta pomocí hello SAS a hello koncový bod úložiště objektů Blob pro váš účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="9b99d-343">toouse hello account SAS tooaccess service-level APIs for hello Blob service, construct a Blob client object using hello SAS and hello Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using hello SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and hello account name toocreate a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set hello service properties for hello Blob client created with hello SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // hello permissions granted by hello account SAS also permit you tooretrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="9b99d-344">Příklad: Vytvoření zásady uložené přístupu</span><span class="sxs-lookup"><span data-stu-id="9b99d-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="9b99d-345">Hello následující kód vytvoří zásadu uložené přístup do kontejneru.</span><span class="sxs-lookup"><span data-stu-id="9b99d-345">hello following code creates a stored access policy on a container.</span></span> <span data-ttu-id="9b99d-346">Můžete vytvořit hello přístup zásad toospecify omezení pro SAS na hello kontejneru služby nebo jeho objekty BLOB.</span><span class="sxs-lookup"><span data-stu-id="9b99d-346">You can use hello access policy toospecify constraints for a service SAS on hello container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // hello access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
        // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get hello container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add hello new policy toohello container's permissions, and set hello container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="9b99d-347">Příklad: Vytvoření SAS služby na kontejneru</span><span class="sxs-lookup"><span data-stu-id="9b99d-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="9b99d-348">Hello následující kód vytvoří SAS do kontejneru.</span><span class="sxs-lookup"><span data-stu-id="9b99d-348">hello following code creates a SAS on a container.</span></span> <span data-ttu-id="9b99d-349">Pokud je zadaný název hello existující zásady uložené přístup, je přidružen hello SAS tuto zásadu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-349">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="9b99d-350">Pokud je k dispozici žádné uložené přístup zásady, hello kód vytvoří SAS ad-hoc hello kontejneru.</span><span class="sxs-lookup"><span data-stu-id="9b99d-350">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate hello shared access signature on hello container, setting hello constraints directly on hello signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello container. In this case, all of hello constraints for the
        // shared access signature are specified on hello stored access policy, which is provided by name.
        // It is also possible toospecify some constraints on an ad-hoc SAS and others on hello stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="9b99d-351">Příklad: Vytvoření SAS služby na objekt blob</span><span class="sxs-lookup"><span data-stu-id="9b99d-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="9b99d-352">Hello následující kód vytvoří SAS na objekt blob.</span><span class="sxs-lookup"><span data-stu-id="9b99d-352">hello following code creates a SAS on a blob.</span></span> <span data-ttu-id="9b99d-353">Pokud je zadaný název hello existující zásady uložené přístup, je přidružen hello SAS tuto zásadu.</span><span class="sxs-lookup"><span data-stu-id="9b99d-353">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="9b99d-354">Pokud je k dispozici žádné uložené přístup zásady, hello kód vytvoří SAS ad-hoc u objektu blob hello.</span><span class="sxs-lookup"><span data-stu-id="9b99d-354">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference tooa blob within hello container.
    // Note that hello blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate hello shared access signature on hello blob, setting hello constraints directly on hello signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello blob. In this case, all of hello constraints for the
        // shared access signature are specified on hello container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="9b99d-355">Závěr</span><span class="sxs-lookup"><span data-stu-id="9b99d-355">Conclusion</span></span>
<span data-ttu-id="9b99d-356">Sdílené přístupové podpisy jsou užitečné pro zajištění tooyour tooclients účet úložiště, který by neměl mít klíč účtu hello omezenými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="9b99d-356">Shared access signatures are useful for providing limited permissions tooyour storage account tooclients that should not have hello account key.</span></span> <span data-ttu-id="9b99d-357">Jako takový jsou sice podstatná součást hello model zabezpečení pro všechny aplikace pomocí Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="9b99d-357">As such, they are a vital part of hello security model for any application using Azure Storage.</span></span> <span data-ttu-id="9b99d-358">Pokud budete postupovat podle osvědčených postupů hello zde uvedeny, můžete ve vašem účtu úložiště SAS tooprovide větší flexibilitu tooresources přístup bez ohrožení zabezpečení hello vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b99d-358">If you follow hello best practices listed here, you can use SAS tooprovide greater flexibility of access tooresources in your storage account, without compromising hello security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9b99d-359">Další kroky</span><span class="sxs-lookup"><span data-stu-id="9b99d-359">Next Steps</span></span>
* [<span data-ttu-id="9b99d-360">Správa toocontainers anonymní přístup pro čtení a objekty BLOB</span><span class="sxs-lookup"><span data-stu-id="9b99d-360">Manage anonymous read access toocontainers and blobs</span></span>](../blobs/storage-manage-access-to-resources.md)
* [<span data-ttu-id="9b99d-361">Delegování přístupu se sdíleným přístupovým podpisem</span><span class="sxs-lookup"><span data-stu-id="9b99d-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="9b99d-362">Představení tabulky a fronty SAS</span><span class="sxs-lookup"><span data-stu-id="9b99d-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)
