---
title: "Co dělat v případě výpadku Azure Storage | Microsoft Docs"
description: "Co dělat v případě výpadku Azure Storage"
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: 1d9ccc1c81260379b5e645d338cbf1fa265e18d4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="what-to-do-if-an-azure-storage-outage-occurs"></a><span data-ttu-id="6f58a-103">Co dělat v případě výpadku služby Azure Storage</span><span class="sxs-lookup"><span data-stu-id="6f58a-103">What to do if an Azure Storage outage occurs</span></span>
<span data-ttu-id="6f58a-104">Ve společnosti Microsoft můžeme fungovat pevného a ujistěte se, že jsou vždy k dispozici našich služeb.</span><span class="sxs-lookup"><span data-stu-id="6f58a-104">At Microsoft, we work hard to make sure our services are always available.</span></span> <span data-ttu-id="6f58a-105">V některých případech vynutí nad rámec naše řízení dopad nám způsoby, které způsobit neplánované výpadky v jedné nebo více oblastech.</span><span class="sxs-lookup"><span data-stu-id="6f58a-105">Sometimes, forces beyond our control impact us in ways that cause unplanned service outages in one or more regions.</span></span> <span data-ttu-id="6f58a-106">Chcete-li zpracovat tyto výjimečných výskytů, poskytujeme vysoké úrovně pokynů pro služby Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="6f58a-106">To help you handle these rare occurrences, we provide the following high-level guidance for Azure Storage services.</span></span>

## <a name="how-to-prepare"></a><span data-ttu-id="6f58a-107">Postup přípravy</span><span class="sxs-lookup"><span data-stu-id="6f58a-107">How to prepare</span></span>
<span data-ttu-id="6f58a-108">Je důležité, aby si každý zákazník připravil vlastní plán zotavení po havárii.</span><span class="sxs-lookup"><span data-stu-id="6f58a-108">It is critical for every customer to prepare their own disaster recovery plan.</span></span> <span data-ttu-id="6f58a-109">Úsilí o obnovení z úložiště výpadku obvykle zahrnuje operace pracovníky a automatické postupy Chcete-li znovu aktivovat aplikace ve stavu, funkční.</span><span class="sxs-lookup"><span data-stu-id="6f58a-109">The effort to recover from a storage outage typically involves both operations personnel and automated procedures in order to reactivate your applications in a functioning state.</span></span> <span data-ttu-id="6f58a-110">Naleznete v dokumentaci k Azure k vytvoření vlastního plánu zotavení po havárii níže:</span><span class="sxs-lookup"><span data-stu-id="6f58a-110">Please refer to the Azure documentation below to build your own disaster recovery plan:</span></span>

* [<span data-ttu-id="6f58a-111">Zotavení po havárii a vysoká dostupnost pro aplikace Azure</span><span class="sxs-lookup"><span data-stu-id="6f58a-111">Disaster recovery and high availability for Azure applications</span></span>](/azure/architecture/resiliency/disaster-recovery-high-availability-azure-applications.md)
* [<span data-ttu-id="6f58a-112">Technické pokyny k odolnosti Azure</span><span class="sxs-lookup"><span data-stu-id="6f58a-112">Azure resiliency technical guidance</span></span>](/azure/architecture/resiliency.md)
* [<span data-ttu-id="6f58a-113">Služba Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="6f58a-113">Azure Site Recovery service</span></span>](https://azure.microsoft.com/services/site-recovery/)
* [<span data-ttu-id="6f58a-114">Účet replikace Azure Storage</span><span class="sxs-lookup"><span data-stu-id="6f58a-114">Azure Storage replication</span></span>](storage-redundancy.md)
* [<span data-ttu-id="6f58a-115">Služba Azure Backup</span><span class="sxs-lookup"><span data-stu-id="6f58a-115">Azure Backup service</span></span>](https://azure.microsoft.com/services/backup/)

## <a name="how-to-detect"></a><span data-ttu-id="6f58a-116">K zjištění</span><span class="sxs-lookup"><span data-stu-id="6f58a-116">How to detect</span></span>
<span data-ttu-id="6f58a-117">Doporučeným způsobem, jak určit stav služby Azure se přihlásit k odběru [řídicím panelu stavu služeb Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="6f58a-117">The recommended way to determine the Azure service status is to subscribe to the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

## <a name="what-to-do-if-a-storage-outage-occurs"></a><span data-ttu-id="6f58a-118">Co dělat, pokud dojde k výpadku úložiště</span><span class="sxs-lookup"><span data-stu-id="6f58a-118">What to do if a Storage outage occurs</span></span>
<span data-ttu-id="6f58a-119">Pokud jeden nebo více služeb úložiště nejsou dostupné na jeden nebo více oblastí, existují dvě možnosti, které je třeba zvážit.</span><span class="sxs-lookup"><span data-stu-id="6f58a-119">If one or more Storage services are temporarily unavailable at one or more regions, there are two options for you to consider.</span></span> <span data-ttu-id="6f58a-120">Pokud vyžadujete okamžitý přístup k datům, zvažte možnost 2.</span><span class="sxs-lookup"><span data-stu-id="6f58a-120">If you desire immediate access to your data, please consider Option 2.</span></span>

### <a name="option-1-wait-for-recovery"></a><span data-ttu-id="6f58a-121">Možnost 1: Počkejte obnovení</span><span class="sxs-lookup"><span data-stu-id="6f58a-121">Option 1: Wait for recovery</span></span>
<span data-ttu-id="6f58a-122">V takovém případě není třeba žádné akce z vaší strany.</span><span class="sxs-lookup"><span data-stu-id="6f58a-122">In this case, no action on your part is required.</span></span> <span data-ttu-id="6f58a-123">Pracujeme usilovně obnovit dostupnost služby Azure.</span><span class="sxs-lookup"><span data-stu-id="6f58a-123">We are working diligently to restore the Azure service availability.</span></span> <span data-ttu-id="6f58a-124">Stav služby můžete sledovat na [řídicím panelu stavu služeb Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="6f58a-124">You can monitor the service status on the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

### <a name="option-2-copy-data-from-secondary"></a><span data-ttu-id="6f58a-125">Možnost 2: Kopírování dat z sekundární</span><span class="sxs-lookup"><span data-stu-id="6f58a-125">Option 2: Copy data from secondary</span></span>
<span data-ttu-id="6f58a-126">Pokud jste zvolili [geograficky redundantní úložiště s přístupem pro čtení (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (doporučeno) pro účty úložiště, máte přístup pro čtení k datům ze sekundární oblasti.</span><span class="sxs-lookup"><span data-stu-id="6f58a-126">If you chose [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended) for your storage accounts, you will have read access to your data from the secondary region.</span></span> <span data-ttu-id="6f58a-127">Můžete použít nástroje, jako [AzCopy](storage-use-azcopy.md), [prostředí Azure PowerShell](storage-powershell-guide-full.md)a [knihovna pro přesun dat Azure](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) ke zkopírování dat z oblasti sekundární do jiný účet úložiště v unimpacted oblasti, a pak bodu aplikace k tomuto účtu úložiště pro čtení i zápisu dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="6f58a-127">You can use tools such as [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), and the [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) to copy data from the secondary region into another storage account in an unimpacted region, and then point your applications to that storage account for both read and write availability.</span></span>

## <a name="what-to-expect-if-a-storage-failover-occurs"></a><span data-ttu-id="6f58a-128">Co můžete očekávat, pokud dojde k selhání úložiště</span><span class="sxs-lookup"><span data-stu-id="6f58a-128">What to expect if a Storage failover occurs</span></span>
<span data-ttu-id="6f58a-129">Pokud jste zvolili [geograficky redundantní úložiště (GRS)](storage-redundancy.md#geo-redundant-storage) nebo [geograficky redundantní úložiště s přístupem pro čtení (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (doporučeno), Azure Storage bude uchovávat data odolná v dvou oblastí (primární i sekundární).</span><span class="sxs-lookup"><span data-stu-id="6f58a-129">If you chose [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) or [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended), Azure Storage will keep your data durable in two regions (primary and secondary).</span></span> <span data-ttu-id="6f58a-130">V obou oblastí Azure Storage neustále udržuje víc replik vaše data.</span><span class="sxs-lookup"><span data-stu-id="6f58a-130">In both regions, Azure Storage constantly maintains multiple replicas of your data.</span></span>

<span data-ttu-id="6f58a-131">Při místní po havárii ovlivní primární oblasti, jsme se nejdřív pokusí použít k obnovení služby v této oblasti.</span><span class="sxs-lookup"><span data-stu-id="6f58a-131">When a regional disaster affects your primary region, we will first try to restore the service in that region.</span></span> <span data-ttu-id="6f58a-132">Závisí na povaze po havárii a jeho dopadů, v některých výjimečných případech jsme nemusí být schopni obnovit primární oblast.</span><span class="sxs-lookup"><span data-stu-id="6f58a-132">Dependent upon the nature of the disaster and its impacts, in some rare occasions we may not be able to restore the primary region.</span></span> <span data-ttu-id="6f58a-133">V tomto bodě provedeme geo-převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="6f58a-133">At that point, we will perform a geo-failover.</span></span> <span data-ttu-id="6f58a-134">Replikace dat mezi oblastmi je asynchronní proces, který zahrnuje zpoždění, takže je možné, že změny, které ještě nebyla replikována do sekundární oblasti mohou být ztraceny.</span><span class="sxs-lookup"><span data-stu-id="6f58a-134">The cross-region data replication is an asynchronous process which can involve a delay, so it is possible that changes that have not yet been replicated to the secondary region may be lost.</span></span> <span data-ttu-id="6f58a-135">Můžete zadat dotaz ["Čas poslední synchronizace" svého účtu úložiště](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) získat podrobné informace o stavu replikace.</span><span class="sxs-lookup"><span data-stu-id="6f58a-135">You can query the ["Last Sync Time" of your storage account](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) to get details on the replication status.</span></span>

<span data-ttu-id="6f58a-136">Několik bodů týkající se možnosti geo-převzetí služeb při selhání úložiště:</span><span class="sxs-lookup"><span data-stu-id="6f58a-136">A couple of points regarding the storage geo-failover experience:</span></span>

* <span data-ttu-id="6f58a-137">Úložiště geo převzetí aktivuje pouze tým Azure Storage – není vyžadována žádná akce zákazníka.</span><span class="sxs-lookup"><span data-stu-id="6f58a-137">Storage geo-failover will only be triggered by the Azure Storage team – there is no customer action required.</span></span>
* <span data-ttu-id="6f58a-138">Existující koncových bodů služby úložiště pro objekty BLOB, tabulky, fronty a soubory zůstane stejný po převzetí služeb při selhání; záznam DNS, bude potřeba aktualizovat přepnutí z primární oblasti sekundární oblast.</span><span class="sxs-lookup"><span data-stu-id="6f58a-138">Your existing storage service endpoints for blobs, tables, queues, and files will remain the same after the failover; the DNS entry will need to be updated to switch from the primary region to the secondary region.</span></span>
* <span data-ttu-id="6f58a-139">Před a během geo selhání nebudete mít přístup pro zápis na váš účet úložiště z důvodu dopad po havárii ale můžete pořád číst ze sekundární Pokud váš účet úložiště byl nakonfigurován jako RA-GRS.</span><span class="sxs-lookup"><span data-stu-id="6f58a-139">Before and during the geo-failover, you won't have write access to your storage account due to the impact of the disaster but you can still read from the secondary if your storage account has been configured as RA-GRS.</span></span>
* <span data-ttu-id="6f58a-140">Po dokončení geo převzetí a rozšíří změny DNS, bude pokračovat oprávnění ke čtení a zápis k vašemu účtu úložiště; To ukazuje na co se používá jako sekundární koncový bod.</span><span class="sxs-lookup"><span data-stu-id="6f58a-140">When the geo-failover has been completed and the DNS changes propagated, read and write access to your storage account will be resumed; this points to what used to be your secondary endpoint.</span></span> 
* <span data-ttu-id="6f58a-141">Všimněte si, že pokud máte GRS nebo RA-GRS nakonfigurované pro účet úložiště bude mít přístup pro zápis.</span><span class="sxs-lookup"><span data-stu-id="6f58a-141">Note that you will have write access if you have GRS or RA-GRS configured for the storage account.</span></span> 
* <span data-ttu-id="6f58a-142">Můžete zadat dotaz ["Geograficky převzetí služeb při selhání čas poslední" svého účtu úložiště](https://msdn.microsoft.com/library/azure/ee460802.aspx) k získání dalších podrobností.</span><span class="sxs-lookup"><span data-stu-id="6f58a-142">You can query ["Last Geo Failover Time" of your storage account](https://msdn.microsoft.com/library/azure/ee460802.aspx) to get more details.</span></span>
* <span data-ttu-id="6f58a-143">Po převzetí služeb při selhání váš účet úložiště bude být plně funkční, ale stav "sníženou", protože je ve skutečnosti hostované v samostatné oblasti s žádné možné geografická replikace.</span><span class="sxs-lookup"><span data-stu-id="6f58a-143">After the failover, your storage account will be fully functioning, but in a "degraded" status, as it is actually hosted in a standalone region with no geo-replication possible.</span></span> <span data-ttu-id="6f58a-144">Chcete-li toto riziko snížilo, jsme se obnovit původní primární oblasti a poté proveďte geo-navrácení služeb po obnovení obnovit původní stav.</span><span class="sxs-lookup"><span data-stu-id="6f58a-144">To mitigate this risk, we will restore the original primary region and then do a geo-failback to restore the original state.</span></span> <span data-ttu-id="6f58a-145">Pokud je původní primární oblasti Neopravitelná, jsme se přidělit jiné sekundární oblasti.</span><span class="sxs-lookup"><span data-stu-id="6f58a-145">If the original primary region is unrecoverable, we will allocate another secondary region.</span></span>
  <span data-ttu-id="6f58a-146">Další informace o infrastrukturu geografická replikace Azure Storage, naleznete v článku na blogu týmu úložiště o [možnosti redundance a RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="6f58a-146">For more details on the infrastructure of Azure Storage geo replication, please refer to the article on the Storage team blog about [Redundancy Options and RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

## <a name="best-practices-for-protecting-your-data"></a><span data-ttu-id="6f58a-147">Osvědčené postupy pro ochranu dat</span><span class="sxs-lookup"><span data-stu-id="6f58a-147">Best Practices for protecting your data</span></span>
<span data-ttu-id="6f58a-148">Existují některé doporučené přístupy k zálohování úložiště dat v pravidelných intervalech.</span><span class="sxs-lookup"><span data-stu-id="6f58a-148">There are some recommended approaches to back up your storage data on a regular basis.</span></span>

* <span data-ttu-id="6f58a-149">Disky virtuálního počítače – používají [služby Azure Backup](https://azure.microsoft.com/services/backup/) zálohovat disky virtuálních počítačů používá virtuální počítače Azure.</span><span class="sxs-lookup"><span data-stu-id="6f58a-149">VM Disks – Use the [Azure Backup service](https://azure.microsoft.com/services/backup/) to back up the VM disks used by your Azure virtual machines.</span></span>
* <span data-ttu-id="6f58a-150">Objekty BLOB bloku – vytvořit [snímku](https://msdn.microsoft.com/library/azure/hh488361.aspx) každý objekt blob bloku nebo zkopírujte objekty BLOB na jiný účet úložiště v jiné oblasti pomocí [AzCopy](storage-use-azcopy.md), [prostředí Azure PowerShell](storage-powershell-guide-full.md), nebo [knihovna pro přesun dat Azure](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span><span class="sxs-lookup"><span data-stu-id="6f58a-150">Block blobs –Create a [snapshot](https://msdn.microsoft.com/library/azure/hh488361.aspx) of each block blob, or copy the blobs to another storage account in another region using [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), or the [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span></span>
* <span data-ttu-id="6f58a-151">Pomocí tabulky – [AzCopy](storage-use-azcopy.md) Export tabulky dat na jiný účet úložiště v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="6f58a-151">Tables – use [AzCopy](storage-use-azcopy.md) to export the table data into another storage account in another region.</span></span>
* <span data-ttu-id="6f58a-152">Použít soubory – [AzCopy](storage-use-azcopy.md) nebo [prostředí Azure PowerShell](storage-powershell-guide-full.md) kopírování souborů na jiný účet úložiště v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="6f58a-152">Files – use [AzCopy](storage-use-azcopy.md) or [Azure PowerShell](storage-powershell-guide-full.md) to copy your files to another storage account in another region.</span></span>

<span data-ttu-id="6f58a-153">Informace o vytváření aplikací, které plně využít výhod funkce RA-GRS, najdete v článku [navrhování vysoce dostupné aplikace pomocí RA-GRS úložiště](../storage-designing-ha-apps-with-ragrs.md)</span><span class="sxs-lookup"><span data-stu-id="6f58a-153">For information about creating applications that take full advantage of the RA-GRS feature, please check out [Designing Highly Available Applications using RA-GRS Storage](../storage-designing-ha-apps-with-ragrs.md)</span></span>

