---
title: "aaaDesigning vysoce dostupné aplikace pomocí Azure přístup pro čtení geograficky redundantní úložiště (RA-GRS) | Microsoft Docs"
description: "Jak toouse Azure RA-GRS úložiště tooarchitect vysokou dostupností aplikace flexibilní dostatek toohandle výpadků."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: e4a9fe7ef33eecd894408b3c1ef59920a248d1bd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-applications-using-ra-grs"></a><span data-ttu-id="f388d-103">Navrhování pomocí RA-GRS vysoce dostupných aplikací.</span><span class="sxs-lookup"><span data-stu-id="f388d-103">Designing Highly Available Applications using RA-GRS</span></span>

<span data-ttu-id="f388d-104">Běžné funkce cloudové infrastruktury je poskytují vysokou dostupností platformu pro hostování aplikací.</span><span class="sxs-lookup"><span data-stu-id="f388d-104">A common feature of cloud-based infrastructures is that they provide a highly available platform for hosting applications.</span></span> <span data-ttu-id="f388d-105">Vývojáři cloudové aplikace musíte zvážit, jak pečlivě tooleverage toto platformy toodeliver aplikace s vysokou dostupností tootheir uživatelé.</span><span class="sxs-lookup"><span data-stu-id="f388d-105">Developers of cloud-based applications must consider carefully how tooleverage this platform toodeliver highly available applications tootheir users.</span></span> <span data-ttu-id="f388d-106">Tento článek zaměřuje konkrétně na tom, jak mohou vývojáři použít hello Azure úložiště přístup pro čtení geograficky redundantní úložiště (RA-GRS) toomake svých aplikací, které jsou k dispozici další.</span><span class="sxs-lookup"><span data-stu-id="f388d-106">This article focuses specifically on how developers can use hello Azure Storage Read Access Geo Redundant Storage (RA-GRS) toomake their applications more available.</span></span>

<span data-ttu-id="f388d-107">Existují čtyři možnosti pro redundanci – LRS (Locally Redundant Storage), ZRS (zóny redundantní úložiště), (Geo-Redundant Storage) GRS a RA-GRS (Geo-Redundant Storage přístup pro čtení).</span><span class="sxs-lookup"><span data-stu-id="f388d-107">There are four choices for redundancy – LRS (Locally Redundant Storage), ZRS (Zone Redundant Storage), GRS (Geo-Redundant Storage), and RA-GRS (Read Access Geo-Redundant Storage).</span></span> <span data-ttu-id="f388d-108">Přidáme toodiscuss GRS a RA-GRS v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="f388d-108">We are going toodiscuss GRS and RA-GRS in this article.</span></span> <span data-ttu-id="f388d-109">S GRS udržovaly tři kopie dat v hello primární oblasti, které jste vybrali při nastavování účtu úložiště hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-109">With GRS, three copies of your data are kept in hello primary region you selected when setting up hello storage account.</span></span> <span data-ttu-id="f388d-110">Tři další kopie je udržováno asynchronně v sekundární oblasti definované v Azure.</span><span class="sxs-lookup"><span data-stu-id="f388d-110">Three additional copies are maintained asynchronously in a secondary region specified by Azure.</span></span> <span data-ttu-id="f388d-111">RA-GRS je hello samé jako GRS, s tím rozdílem, že máte kopii sekundární toohello přístup pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-111">RA-GRS is hello same thing as GRS except that you have read access toohello secondary copy.</span></span> <span data-ttu-id="f388d-112">Další informace o hello různé možnosti redundance úložiště Azure najdete v tématu [replikace Azure Storage](https://docs.microsoft.com/en-us/azure/storage/storage-redundancy).</span><span class="sxs-lookup"><span data-stu-id="f388d-112">For more information about hello different Azure Storage redundancy options, see [Azure Storage replication](https://docs.microsoft.com/en-us/azure/storage/storage-redundancy).</span></span> <span data-ttu-id="f388d-113">Hello replikace článek také ukazuje hello dvojice primární a sekundární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-113">hello replication article also shows hello pairings of hello primary and secondary regions.</span></span>

<span data-ttu-id="f388d-114">Existují fragmenty kódu, které jsou zahrnuté v tomto článku a ucelenou ukázku tooa odkaz na konci hello, který lze stáhnout a spustit.</span><span class="sxs-lookup"><span data-stu-id="f388d-114">There are code snippets included in this article, and a link tooa complete sample at hello end that you can download and run.</span></span>

## <a name="key-features-of-ra-grs"></a><span data-ttu-id="f388d-115">Klíčové funkce RA-GRS</span><span class="sxs-lookup"><span data-stu-id="f388d-115">Key features of RA-GRS</span></span>

<span data-ttu-id="f388d-116">Než budeme mluvit o tom, toouse úložiště RA-GRS, budeme mluvit o svých vlastnostech a chování.</span><span class="sxs-lookup"><span data-stu-id="f388d-116">Before we talk about how toouse RA-GRS storage, let's talk about its properties and behavior.</span></span>

* <span data-ttu-id="f388d-117">Úložiště Azure udržuje kopii hello data, která ukládáte ve vaší primární oblasti v sekundární oblasti; jen pro čtení Jak jsme uvedli výše, služba úložiště hello Určuje umístění hello hello sekundární oblasti.</span><span class="sxs-lookup"><span data-stu-id="f388d-117">Azure Storage maintains a read-only copy of hello data you store in your primary region in a secondary region; as noted above, hello storage service determines hello location of hello secondary region.</span></span>

* <span data-ttu-id="f388d-118">Hello kopie jen pro čtení je [nakonec byl konzistentní](https://en.wikipedia.org/wiki/Eventual_consistency) s daty hello v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-118">hello read-only copy is [eventually consistent](https://en.wikipedia.org/wiki/Eventual_consistency) with hello data in hello primary region.</span></span>

* <span data-ttu-id="f388d-119">Pro objekty BLOB, tabulek a front, se můžete dotazovat hello sekundární oblast *čas poslední synchronizace* hodnotu, která oznamuje, kdy došlo k chybě hello poslední replikace z hello primární toohello sekundární oblasti.</span><span class="sxs-lookup"><span data-stu-id="f388d-119">For blobs, tables, and queues, you can query hello secondary region for a *Last Sync Time* value that tells you when hello last replication from hello primary toohello secondary region occurred.</span></span> <span data-ttu-id="f388d-120">(To není podporováno pro úložiště Azure File, které nemá RA-GRS redundance v tuto chvíli).</span><span class="sxs-lookup"><span data-stu-id="f388d-120">(This is not supported for Azure File storage, which doesn't have RA-GRS redundancy at this time.)</span></span>

* <span data-ttu-id="f388d-121">Klientská knihovna pro úložiště toointeract hello můžete používat s daty hello v primární nebo sekundární oblasti buď hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-121">You can use hello Storage Client Library toointeract with hello data in either hello primary or secondary region.</span></span> <span data-ttu-id="f388d-122">Taky můžete přesměrovat čtení požadavky automaticky sekundární oblasti toohello když požadavků na čtení primární oblasti toohello časový limit.</span><span class="sxs-lookup"><span data-stu-id="f388d-122">You can also redirect read requests automatically toohello secondary region if a read request toohello primary region times out.</span></span>

* <span data-ttu-id="f388d-123">Pokud je hlavní problém ovlivňující usnadnění hello hello dat v hello primární oblasti, mohou aktivovat hello tým Azure geo-převzetí služeb při selhání, okamžiku budou položky DNS hello odkazující primární oblasti toohello změněné toopoint toohello sekundární oblast.</span><span class="sxs-lookup"><span data-stu-id="f388d-123">If there is a major issue affecting hello accessibility of hello data in hello primary region, hello Azure team may trigger a geo-failover, at which point hello DNS entries pointing toohello primary region will be changed toopoint toohello secondary region.</span></span>

* <span data-ttu-id="f388d-124">Pokud dojde k selhání geograficky, bude Azure vyberte nové sekundární umístění a replikovat umístění toothat dat hello potom bodu hello tooit položky sekundární DNS.</span><span class="sxs-lookup"><span data-stu-id="f388d-124">If a geo-failover occurs, Azure will select a new secondary location and replicate hello data toothat location, then point hello secondary DNS entries tooit.</span></span> <span data-ttu-id="f388d-125">sekundární koncový bod Hello bude k dispozici, dokud účet úložiště hello dokončení replikace.</span><span class="sxs-lookup"><span data-stu-id="f388d-125">hello secondary endpoint will be unavailable until hello storage account has finished replicating.</span></span> <span data-ttu-id="f388d-126">Další informace najdete v tématu [co toodo, když dojde k výpadku Azure Storage](https://docs.microsoft.com/en-us/azure/storage/storage-disaster-recovery-guidance).</span><span class="sxs-lookup"><span data-stu-id="f388d-126">For more information, please see [What toodo if an Azure Storage outage occurs](https://docs.microsoft.com/en-us/azure/storage/storage-disaster-recovery-guidance).</span></span>

## <a name="application-design-considerations-when-using-ra-grs"></a><span data-ttu-id="f388d-127">Aspekty návrhu aplikace při používání RA-GRS</span><span class="sxs-lookup"><span data-stu-id="f388d-127">Application design considerations when using RA-GRS</span></span>

<span data-ttu-id="f388d-128">hlavním účelem Hello tohoto článku je tooshow můžete jak toodesign aplikace, která bude pokračovat toofunction (i když v omezené kapacitou) ani v případě významnější havárie v primárním datovém hello hello center.</span><span class="sxs-lookup"><span data-stu-id="f388d-128">hello main purpose of this article is tooshow you how toodesign an application that will continue toofunction (albeit in a limited capacity) even in hello event of a major disaster at hello primary data center.</span></span> <span data-ttu-id="f388d-129">To uděláte tak, že vaše aplikace toohandle přechodná nebo dlouhotrvající problémy tak, že došlo k potížím a přepnete tooread ze sekundární oblasti hello a přepnout zpět, když primární oblasti hello opět k dispozici.</span><span class="sxs-lookup"><span data-stu-id="f388d-129">You do this by having your application toohandle transient or long-running issues by switching tooread from hello secondary region while there is a problem, and switching back when hello primary region is available again.</span></span>

### <a name="using-eventually-consistent-data"></a><span data-ttu-id="f388d-130">Pomocí nakonec byl konzistentní dat</span><span class="sxs-lookup"><span data-stu-id="f388d-130">Using eventually consistent data</span></span>

<span data-ttu-id="f388d-131">Toto navrhované řešení předpokládá, že případe tooreturn co může být zastaralá data toohello volající aplikace.</span><span class="sxs-lookup"><span data-stu-id="f388d-131">This proposed solution assumes that it is okay tooreturn what could be stale data toohello calling application.</span></span> <span data-ttu-id="f388d-132">Vzhledem k tomu, že jsou data sekundární hello nakonec byl konzistentní, je možné, že hello data byla zapsána toohello primární, ale toohello aktualizace hello sekundární kdyby dokončení replikace při hello primární oblasti jsou nedostupné.</span><span class="sxs-lookup"><span data-stu-id="f388d-132">Because hello secondary data is eventually consistent, it is possible that hello data was written toohello primary but hello update toohello secondary had not finished replicating when hello primary region became inaccessible.</span></span>

<span data-ttu-id="f388d-133">Například zákazník může odeslat aktualizaci, která je úspěšné, a potom může hello primární přejděte před hello aktualizace šířený toohello sekundární.</span><span class="sxs-lookup"><span data-stu-id="f388d-133">For example, your customer could submit an update that is successful, and then hello primary could go down before hello update is propagated toohello secondary.</span></span> <span data-ttu-id="f388d-134">V takovém případě Pokud zákazník hello následně požádá tooread hello zpět data, dostane hello zastaralá data místo hello aktualizovat data.</span><span class="sxs-lookup"><span data-stu-id="f388d-134">In this case, if hello customer then asks tooread hello data back, he receives hello stale data instead of hello updated data.</span></span> <span data-ttu-id="f388d-135">Pokud to je přijatelné a pokud ano, musíte rozhodnout, jak se zprávy hello zákazníka.</span><span class="sxs-lookup"><span data-stu-id="f388d-135">You must decide if this is acceptable, and if so, how you will message hello customer.</span></span> <span data-ttu-id="f388d-136">Uvidíte, jak hello toocheck čas poslední synchronizace na sekundární data hello později v této toosee článku Pokud hello sekundární je aktuální.</span><span class="sxs-lookup"><span data-stu-id="f388d-136">You'll see how toocheck hello Last Sync Time on hello secondary data later in this article toosee if hello secondary is up-to-date.</span></span>

### <a name="handling-services-separately-or-all-together"></a><span data-ttu-id="f388d-137">Zpracování služby samostatně nebo společně všechny</span><span class="sxs-lookup"><span data-stu-id="f388d-137">Handling services separately or all together</span></span>

<span data-ttu-id="f388d-138">Když není pravděpodobné, je možné toobecome jedna služba není k dispozici při hello jiných služeb jsou stále plně funkční.</span><span class="sxs-lookup"><span data-stu-id="f388d-138">While not likely, it is possible for one service toobecome unavailable while hello other services are still fully functional.</span></span> <span data-ttu-id="f388d-139">Vám může popisovač hello opakování režimu jen pro čtení pro jednotlivé služby a samostatně (objekty BLOB, fronty, tabulky), nebo může zpracovat opakování obecně pro všechny služby úložiště hello společně.</span><span class="sxs-lookup"><span data-stu-id="f388d-139">You can handle hello retries and read-only mode for each service separately (blobs, queues, tables), or you can handle retries generically for all hello storage services together.</span></span>

<span data-ttu-id="f388d-140">Například pokud používáte fronty a objekty BLOB ve vaší aplikaci, můžete rozhodnout tooput v opakovatelné chyby toohandle samostatné kódu pro každou z nich.</span><span class="sxs-lookup"><span data-stu-id="f388d-140">For example, if you use queues and blobs in your application, you may decide tooput in separate code toohandle retryable errors for each of these.</span></span> <span data-ttu-id="f388d-141">Pak můžete získat z hello služby objektů blob zkuste to znovu, ale stále funguje hello fronty služby, bude ovlivněn pouze hello součástí aplikace, který zpracovává objekty BLOB.</span><span class="sxs-lookup"><span data-stu-id="f388d-141">Then if you get a retry from hello blob service, but hello queue service is still working, only hello part of your application that handles blobs will be impacted.</span></span> <span data-ttu-id="f388d-142">Pokud se rozhodnete toohandle obecně opakování všechny úložiště služby a služby objektů blob toohello volání vrátí Opakovatelná chyba a potom požadavky tooboth hello objektů blob a hello fronty služba bude mít vliv.</span><span class="sxs-lookup"><span data-stu-id="f388d-142">If you decide toohandle all storage service retries generically and a call toohello blob service returns a retryable error, then requests tooboth hello blob service and hello queue service will be impacted.</span></span>

<span data-ttu-id="f388d-143">Nakonec to závisí na složitosti hello vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f388d-143">Ultimately, this depends on hello complexity of your application.</span></span> <span data-ttu-id="f388d-144">Můžete se rozhodnout není selhání hello toohandle službou, ale místo toho tooredirect požadavků pro všechna úložiště služby toohello sekundární oblast na čtení a hello aplikaci spustit v režimu jen pro čtení, když je v primární oblasti hello k problému s jakoukoli službu, úložiště.</span><span class="sxs-lookup"><span data-stu-id="f388d-144">You may decide not toohandle hello failures by service, but instead tooredirect read requests for all storage services toohello secondary region and run hello application in read-only mode when you detect a problem with any storage service in hello primary region.</span></span>

### <a name="other-considerations"></a><span data-ttu-id="f388d-145">Další důležité informace</span><span class="sxs-lookup"><span data-stu-id="f388d-145">Other considerations</span></span>

<span data-ttu-id="f388d-146">Tyto jsou hello další důležité informace, které se budeme zabývat v hello zbývající části tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="f388d-146">These are hello other considerations we will discuss in hello rest of this article.</span></span>

*   <span data-ttu-id="f388d-147">Zpracování opakování požadavků na čtení pomocí vzoru jistič hello</span><span class="sxs-lookup"><span data-stu-id="f388d-147">Handling retries of read requests using hello Circuit Breaker pattern</span></span>

*   <span data-ttu-id="f388d-148">Nakonec konzistentní dat a hello čas poslední synchronizace</span><span class="sxs-lookup"><span data-stu-id="f388d-148">Eventually-consistent data and hello Last Sync Time</span></span>

*   <span data-ttu-id="f388d-149">Testování</span><span class="sxs-lookup"><span data-stu-id="f388d-149">Testing</span></span>

## <a name="running-your-application-in-read-only-mode"></a><span data-ttu-id="f388d-150">Spuštění aplikace v režimu jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="f388d-150">Running your application in read-only mode</span></span>

<span data-ttu-id="f388d-151">toouse RA-GRS úložiště, musí být schopný toohandle obou se nezdařilo požadavky na čtení a žádosti o aktualizaci se nezdařilo (s aktualizací v tomto případě znamená vložení, aktualizace a odstranění).</span><span class="sxs-lookup"><span data-stu-id="f388d-151">toouse RA-GRS storage, you must be able toohandle both failed read requests and failed update requests (with update in this case meaning inserts, updates, and deletions).</span></span> <span data-ttu-id="f388d-152">Pokud hello selže primární datové centrum, přečtěte si požadavky se dají přesměrovaného toohello sekundárního datového centra, ale nelze žádosti o aktualizaci, protože hello sekundární je jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-152">If hello primary data center fails, read requests can be redirected toohello secondary data center, but update requests cannot because hello secondary is read only.</span></span> <span data-ttu-id="f388d-153">Z tohoto důvodu musíte některé způsob toorun aplikace v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-153">For this reason, you need some way toorun your application in read-only mode.</span></span>

<span data-ttu-id="f388d-154">Například můžete nastavit příznak, který bude ověřen před odesláním služba úložiště toohello žádosti žádné aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-154">For example, you can set a flag that will be checked before submitting any update requests toohello storage service.</span></span> <span data-ttu-id="f388d-155">Jeden z žádosti o aktualizaci hello vycházejí, můžete ji přeskočit a vrátit odpovídající odpověď toohello zákazníka.</span><span class="sxs-lookup"><span data-stu-id="f388d-155">When one of hello update requests comes through, you can skip it and return an appropriate response toohello customer.</span></span> <span data-ttu-id="f388d-156">Může i chcete toodisable úplně určité funkce, dokud hello problém nevyřešíte a upozorněte uživatele, že tyto funkce jsou dočasně nedostupné.</span><span class="sxs-lookup"><span data-stu-id="f388d-156">You may even want toodisable certain features altogether until hello problem is resolved and notify users that those features are temporarily unavailable.</span></span>

<span data-ttu-id="f388d-157">Pokud se rozhodnete toohandle chyby pro každou službu samostatně, je také nutné toohandle hello možnost toorun aplikace v režimu jen pro čtení službou.</span><span class="sxs-lookup"><span data-stu-id="f388d-157">If you decide toohandle errors for each service separately, you will also need toohandle hello ability toorun your application in read-only mode by service.</span></span> <span data-ttu-id="f388d-158">Můžete mít pro každou službu, která se dá nastavit jen pro čtení příznaky a zakázán a popisovač hello odpovídající příznak hello příslušná místa v kódu.</span><span class="sxs-lookup"><span data-stu-id="f388d-158">You could have read-only flags for each service that can be enabled and disabled and handle hello appropriate flag in hello appropriate places in your code.</span></span>

<span data-ttu-id="f388d-159">Je možné toorun aplikace v režimu jen pro čtení obsahuje další výhody straně – nabízí možnost tooensure hello omezenou funkčnost během upgradu hlavní aplikace.</span><span class="sxs-lookup"><span data-stu-id="f388d-159">Being able toorun your application in read-only mode has another side benefit – it gives you hello ability tooensure limited functionality during a major application upgrade.</span></span> <span data-ttu-id="f388d-160">Můžete aktivovat toorun vaší aplikace v jen pro čtení režim a toohello bod sekundární datové středisko, o zajištění, že když děláte upgrady, je nikdo přístup k datům hello v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-160">You can trigger your application toorun in read-only mode and point toohello secondary data center, ensuring nobody is accessing hello data in hello primary region while you're making upgrades.</span></span>

## <a name="handling-updates-when-running-in-read-only-mode"></a><span data-ttu-id="f388d-161">Zpracování aktualizací při spuštění v režimu jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="f388d-161">Handling updates when running in read-only mode</span></span>

<span data-ttu-id="f388d-162">Existuje mnoho způsobů toohandle aktualizace požaduje při spuštění v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-162">There are many ways toohandle update requests when running in read-only mode.</span></span> <span data-ttu-id="f388d-163">To jsme nebude komplexně pokrývat, ale obecně platí, existuje několik vzorů, které považujete za.</span><span class="sxs-lookup"><span data-stu-id="f388d-163">We won't cover this comprehensively, but generally, there are a couple of patterns that you consider.</span></span>

1.  <span data-ttu-id="f388d-164">Můžete reagovat tooyour uživatele a sdělte jim, že nejsou aktuálně přijímat aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-164">You can respond tooyour user and tell them you are not currently accepting updates.</span></span> <span data-ttu-id="f388d-165">Například systém správy kontaktů může povolit zákazníkům tooaccess kontaktní informace, ale zajistěte, aby nebyly aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-165">For example, a contact management system could enable customers tooaccess contact information but not make updates.</span></span>

2.  <span data-ttu-id="f388d-166">Můžete zařadit vaše aktualizace v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="f388d-166">You can enqueue your updates in another region.</span></span> <span data-ttu-id="f388d-167">V takovém případě by zápisu tooa fronty požadavků čekající aktualizace v jiné oblasti a pak mít tooprocess způsob, jak tyto požadavky po hello primární datové centrum bude znovu online.</span><span class="sxs-lookup"><span data-stu-id="f388d-167">In this case, you would write your pending update requests tooa queue in a different region, and then have a way tooprocess those requests after hello primary data center comes online again.</span></span> <span data-ttu-id="f388d-168">V tomto scénáři by měl necháte zákazník hello vědět, že hello aktualizace požadované zařazených do fronty pro pozdější zpracování.</span><span class="sxs-lookup"><span data-stu-id="f388d-168">In this scenario, you should let hello customer know that hello update requested is queued for later processing.</span></span>

3.  <span data-ttu-id="f388d-169">Vaše aktualizace může zapisovat tooa účet úložiště v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="f388d-169">You can write your updates tooa storage account in another region.</span></span> <span data-ttu-id="f388d-170">Pak když hello primární datové centrum přejde do režimu online, můžete mít toomerge způsob, jak tyto aktualizace na primární data hello, v závislosti na hello strukturu dat hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-170">Then when hello primary data center comes back online, you can have a way toomerge those updates into hello primary data, depending on hello structure of hello data.</span></span> <span data-ttu-id="f388d-171">Například pokud vytvoříte samostatné soubory pomocí razítka data a času v názvu text hello, můžete zkopírovat tyto soubory back toohello primární oblasti.</span><span class="sxs-lookup"><span data-stu-id="f388d-171">For example, if you are creating separate files with a date/time stamp in hello name, you can copy those files back toohello primary region.</span></span> <span data-ttu-id="f388d-172">Tento postup funguje pro některé úlohy, jako jsou data protokolování a iOT.</span><span class="sxs-lookup"><span data-stu-id="f388d-172">This works for some workloads such as logging and iOT data.</span></span>

## <a name="handling-retries"></a><span data-ttu-id="f388d-173">Zpracování opakování</span><span class="sxs-lookup"><span data-stu-id="f388d-173">Handling retries</span></span>

<span data-ttu-id="f388d-174">Jak budete vědět, které chyby se opakovatelná?</span><span class="sxs-lookup"><span data-stu-id="f388d-174">How do you know which errors are retryable?</span></span> <span data-ttu-id="f388d-175">To je dáno hello Klientská knihovna pro úložiště.</span><span class="sxs-lookup"><span data-stu-id="f388d-175">This is determined by hello storage client library.</span></span> <span data-ttu-id="f388d-176">Například chybu 404 (prostředek nebyl nalezen) není opakovatelná, protože ho opakování není pravděpodobné tooresult v úspěch.</span><span class="sxs-lookup"><span data-stu-id="f388d-176">For example, a 404 error (resource not found) is not retryable because retrying it is not likely tooresult in success.</span></span> <span data-ttu-id="f388d-177">Na hello druhé straně, 500 Chyba je opakovatelné protože je k serverové chybě a může být přechodný problém.</span><span class="sxs-lookup"><span data-stu-id="f388d-177">On hello other hand, a 500 error is retryable because it is a server error, and it may simply be a transient issue.</span></span> <span data-ttu-id="f388d-178">Další podrobnosti, projděte si hello [otevřít zdrojový kód pro hello ExponentialRetry třída](https://github.com/Azure/azure-storage-net/blob/87b84b3d5ee884c7adc10e494e2c7060956515d0/Lib/Common/RetryPolicies/ExponentialRetry.cs) v Klientská knihovna pro úložiště hello .NET.</span><span class="sxs-lookup"><span data-stu-id="f388d-178">For more details, check out hello [open source code for hello ExponentialRetry class](https://github.com/Azure/azure-storage-net/blob/87b84b3d5ee884c7adc10e494e2c7060956515d0/Lib/Common/RetryPolicies/ExponentialRetry.cs) in hello .NET storage client library.</span></span> <span data-ttu-id="f388d-179">(Vyhledejte hello metoda ShouldRetry.)</span><span class="sxs-lookup"><span data-stu-id="f388d-179">(Look for hello ShouldRetry method.)</span></span>

### <a name="read-requests"></a><span data-ttu-id="f388d-180">Požadavky pro čtení</span><span class="sxs-lookup"><span data-stu-id="f388d-180">Read requests</span></span>

<span data-ttu-id="f388d-181">Požadavky pro čtení může být přesměrovaného toosecondary úložiště, pokud dojde k problému s primární úložiště.</span><span class="sxs-lookup"><span data-stu-id="f388d-181">Read requests can be redirected toosecondary storage if there is a problem with primary storage.</span></span> <span data-ttu-id="f388d-182">Uvedené výše v [pomocí nakonec konzistentních dat](#using-eventually-consistent-data), musí být přijatelné pro vaši aplikaci toopotentially číst zastaralá data.</span><span class="sxs-lookup"><span data-stu-id="f388d-182">As noted above in [Using Eventually Consistent Data](#using-eventually-consistent-data), it must be acceptable for your application toopotentially read stale data.</span></span> <span data-ttu-id="f388d-183">Pokud používáte hello úložiště klienta knihovny tooaccess RA-GRS data, můžete zadat hello chování opakovat požadavek čtení nastavením hodnoty pro hello **LocationMode** tooone vlastnost z hello následující:</span><span class="sxs-lookup"><span data-stu-id="f388d-183">If you are using hello storage client library tooaccess RA-GRS data, you can specify hello retry behavior of a read request by setting a value for hello **LocationMode** property tooone of hello following:</span></span>

*   <span data-ttu-id="f388d-184">**PrimaryOnly** (hello výchozí)</span><span class="sxs-lookup"><span data-stu-id="f388d-184">**PrimaryOnly** (hello default)</span></span>

*   <span data-ttu-id="f388d-185">**PrimaryThenSecondary**</span><span class="sxs-lookup"><span data-stu-id="f388d-185">**PrimaryThenSecondary**</span></span>

*   <span data-ttu-id="f388d-186">**SecondaryOnly**</span><span class="sxs-lookup"><span data-stu-id="f388d-186">**SecondaryOnly**</span></span>

*   <span data-ttu-id="f388d-187">**SecondaryThenPrimary**</span><span class="sxs-lookup"><span data-stu-id="f388d-187">**SecondaryThenPrimary**</span></span>

<span data-ttu-id="f388d-188">Když nastavíte hello **LocationMode** příliš**PrimaryThenSecondary**, pokud počáteční hello číst primární koncový bod toohello požadavek selže s opakovatelnou chybou, hello klient automaticky provede další čtení žádost toohello sekundárního koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="f388d-188">When you set hello **LocationMode** too**PrimaryThenSecondary**, if hello initial read request toohello primary endpoint fails with a retryable error, hello client automatically makes another read request toohello secondary endpoint.</span></span> <span data-ttu-id="f388d-189">Pokud chyba hello vypršení časového limitu serveru, pak hello klienta bude mít toowait pro časový limit tooexpire hello před obdrží Opakovatelná chyba od služby hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-189">If hello error is a server timeout, then hello client will have toowait for hello timeout tooexpire before it receives a retryable error from hello service.</span></span>

<span data-ttu-id="f388d-190">Při výběru jsou v podstatě dva scénáře tooconsider jak toorespond tooa Opakovatelná chyba:</span><span class="sxs-lookup"><span data-stu-id="f388d-190">There are basically two scenarios tooconsider when you are deciding how toorespond tooa retryable error:</span></span>

*   <span data-ttu-id="f388d-191">Toto je problém s izolované a následné žádosti toohello primární endpoint nevrátí Opakovatelná chyba.</span><span class="sxs-lookup"><span data-stu-id="f388d-191">This is an isolated problem and subsequent requests toohello primary endpoint will not return a retryable error.</span></span> <span data-ttu-id="f388d-192">Příklad, kdy k tomu může dojít je, když dojde k chybě přechodný síťový.</span><span class="sxs-lookup"><span data-stu-id="f388d-192">An example of where this might happen is when there is a transient network error.</span></span>

    <span data-ttu-id="f388d-193">V tomto scénáři není žádné snížení výkonu výrazné tomu, aby **LocationMode** nastavit příliš**PrimaryThenSecondary** jako tato situace nastane pouze zřídka.</span><span class="sxs-lookup"><span data-stu-id="f388d-193">In this scenario, there is no significant performance penalty in having **LocationMode** set too**PrimaryThenSecondary** as this only happens infrequently.</span></span>

*   <span data-ttu-id="f388d-194">Tento problém s alespoň jedním z hello služby úložiště v primární oblasti hello je a všechny následné žádosti toothat služby v rámci primární oblasti hello jsou pravděpodobně tooreturn opakovatelné chyby pro určitou dobu.</span><span class="sxs-lookup"><span data-stu-id="f388d-194">This is a problem with at least one of hello storage services in hello primary region and all subsequent requests toothat service in hello primary region are likely tooreturn retryable errors for a period of time.</span></span> <span data-ttu-id="f388d-195">Příkladem je, pokud je primární oblasti hello úplně nedostupná.</span><span class="sxs-lookup"><span data-stu-id="f388d-195">An example of this is if hello primary region is completely inaccessible.</span></span>

    <span data-ttu-id="f388d-196">V tomto scénáři je snížení výkonu vzhledem k tomu, že všechny vaše požadavky na čtení se pokuste se nejdřív hello primární koncový bod, počkejte tooexpire hello vypršení časového limitu a pak přepínače toohello sekundárního koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="f388d-196">In this scenario, there is a performance penalty because all your read requests will try hello primary endpoint first, wait for hello timeout tooexpire, then switch toohello secondary endpoint.</span></span>

<span data-ttu-id="f388d-197">U těchto scénářů byste měli určit, existuje se probíhající problém s hello primární koncový bod a odeslání všech požadavků na čtení přímo sekundárním koncovým bodem toohello nastavením hello **LocationMode** vlastnost příliš **SecondaryOnly**.</span><span class="sxs-lookup"><span data-stu-id="f388d-197">For these scenarios, you should identify that there is an ongoing issue with hello primary endpoint and send all read requests directly toohello secondary endpoint by setting hello **LocationMode** property too**SecondaryOnly**.</span></span> <span data-ttu-id="f388d-198">V tomto okamžiku by také změnit hello toorun aplikace v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-198">At this time, you should also change hello application toorun in read-only mode.</span></span> <span data-ttu-id="f388d-199">Tento postup se označuje jako hello [jistič vzor](https://msdn.microsoft.com/library/dn589784.aspx).</span><span class="sxs-lookup"><span data-stu-id="f388d-199">This approach is known as hello [Circuit Breaker Pattern](https://msdn.microsoft.com/library/dn589784.aspx).</span></span>

### <a name="update-requests"></a><span data-ttu-id="f388d-200">Žádosti o aktualizaci</span><span class="sxs-lookup"><span data-stu-id="f388d-200">Update requests</span></span>

<span data-ttu-id="f388d-201">vzor jistič Hello může být také použité tooupdate požadavky.</span><span class="sxs-lookup"><span data-stu-id="f388d-201">hello Circuit Breaker pattern can also be applied tooupdate requests.</span></span> <span data-ttu-id="f388d-202">Žádosti o aktualizaci však nemůže být přesměrovaného toosecondary úložiště, která je jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-202">However, update requests cannot be redirected toosecondary storage, which is read-only.</span></span> <span data-ttu-id="f388d-203">Pro tyto požadavky, je třeba ponechat hello **LocationMode** vlastností nastavenou příliš**PrimaryOnly** (hello výchozí).</span><span class="sxs-lookup"><span data-stu-id="f388d-203">For these requests, you should leave hello **LocationMode** property set too**PrimaryOnly** (hello default).</span></span> <span data-ttu-id="f388d-204">toohandle tyto chyby můžete použít metriky toothese požadavků – například 10 selhání v řádku – a vaše prahová hodnota při splnění, přepnout hello aplikace do režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-204">toohandle these errors, you can apply a metric toothese requests – such as 10 failures in a row – and when your threshold is met, switch hello application into read-only mode.</span></span> <span data-ttu-id="f388d-205">Můžete použít stejné metody pro vrácení tooupdate režimu tak, jak je popsáno níže v další části hello o hello jistič vzor hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-205">You can use hello same methods for returning tooupdate mode as those described below in hello next section about hello Circuit Breaker pattern.</span></span>

## <a name="circuit-breaker-pattern"></a><span data-ttu-id="f388d-206">Vzor jistič</span><span class="sxs-lookup"><span data-stu-id="f388d-206">Circuit Breaker pattern</span></span>

<span data-ttu-id="f388d-207">Použití vzoru jistič hello v aplikaci, můžete zabránit v opakování operace, která je pravděpodobně toofail opakovaně.</span><span class="sxs-lookup"><span data-stu-id="f388d-207">Using hello Circuit Breaker pattern in your application can prevent it from retrying an operation that is likely toofail repeatedly.</span></span> <span data-ttu-id="f388d-208">To umožňuje toorun toocontinue aplikace hello místo zabírají čas během operace hello je exponenciálnímu opakovat.</span><span class="sxs-lookup"><span data-stu-id="f388d-208">It allows hello application toocontinue toorun rather than taking up time while hello operation is retried exponentially.</span></span> <span data-ttu-id="f388d-209">Navíc rozpozná, když byl opraven hello odolnost, kdy aplikace hello čas můžete zkusit hello operaci opakujte.</span><span class="sxs-lookup"><span data-stu-id="f388d-209">It also detects when hello fault has been fixed, at which time hello application can try hello operation again.</span></span>

### <a name="how-tooimplement-hello-circuit-breaker-pattern"></a><span data-ttu-id="f388d-210">Jak tooimplement hello vzor jistič</span><span class="sxs-lookup"><span data-stu-id="f388d-210">How tooimplement hello circuit breaker pattern</span></span>

<span data-ttu-id="f388d-211">tooidentify probíhající potížím s primární koncový bod, můžete sledovat, jak často hello klient zaznamená opakovatelné chyby.</span><span class="sxs-lookup"><span data-stu-id="f388d-211">tooidentify that there is an ongoing problem with a primary endpoint, you can monitor how frequently hello client encounters retryable errors.</span></span> <span data-ttu-id="f388d-212">Protože každý případ se liší, máte toodecide na prahová hodnota hello toouse pro hello rozhodnutí tooswitch toohello sekundárního koncového bodu a spustit aplikaci hello v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-212">Because each case is different, you have toodecide on hello threshold you want toouse for hello decision tooswitch toohello secondary endpoint and run hello application in read-only mode.</span></span> <span data-ttu-id="f388d-213">Přepínač hello tooperform může například rozhodnout, pokud jsou v řádek s žádné úspěchů 10 selhání.</span><span class="sxs-lookup"><span data-stu-id="f388d-213">For example, you could decide tooperform hello switch if there are 10 failures in a row with no successes.</span></span> <span data-ttu-id="f388d-214">Dalším příkladem je tooswitch, pokud selže 90 % hello požadavků v období 2 minut.</span><span class="sxs-lookup"><span data-stu-id="f388d-214">Another example is tooswitch if 90% of hello requests in a 2-minute period fail.</span></span>

<span data-ttu-id="f388d-215">Pro hello prvního scénáře můžete jednoduše zachovat a počet selhání hello a pokud je úspěšné dříve, než dorazila hello hello maximální, nastavte počet back toozero.</span><span class="sxs-lookup"><span data-stu-id="f388d-215">For hello first scenario, you can simply keep a count of hello failures, and if there is a success before reaching hello maximum, set hello count back toozero.</span></span> <span data-ttu-id="f388d-216">Pro druhý scénář hello jedním ze způsobů tooimplement je toouse hello MemoryCache objektu (v rozhraní .NET).</span><span class="sxs-lookup"><span data-stu-id="f388d-216">For hello second scenario, one way tooimplement it is toouse hello MemoryCache object (in .NET).</span></span> <span data-ttu-id="f388d-217">Pro každý požadavek přidat do mezipaměti toohello CacheItem, nastavte hodnotu toosuccess hello (1) nebo selhání (0) a nastavte minut too2 čas vypršení platnosti hello od nyní (nebo vše, co je vaším omezením čas).</span><span class="sxs-lookup"><span data-stu-id="f388d-217">For each request, add a CacheItem toohello cache, set hello value toosuccess (1) or fail (0), and set hello expiration time too2 minutes from now (or whatever your time constraint is).</span></span> <span data-ttu-id="f388d-218">Když je dosaženo času vypršení platnosti položky, položka hello je automaticky odebrána.</span><span class="sxs-lookup"><span data-stu-id="f388d-218">When an entry's expiration time is reached, hello entry is automatically removed.</span></span> <span data-ttu-id="f388d-219">Tím získáte okno postupného 2 minut.</span><span class="sxs-lookup"><span data-stu-id="f388d-219">This will give you a rolling 2-minute window.</span></span> <span data-ttu-id="f388d-220">Pokaždé, když provedete služba úložiště toohello požadavek nejprve použijete dotaz Linq napříč hello MemoryCache objekt toocalculate hello procenta úspěšnosti souhrnné zpracování hello hodnoty a vydělí počet hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-220">Each time you make a request toohello storage service, you first use a Linq query across hello MemoryCache object toocalculate hello percent success by summing hello values and dividing by hello count.</span></span> <span data-ttu-id="f388d-221">Když je procento úspěšnosti hello klesne pod některé prahové hodnoty (například 10 %), nastavte hello **LocationMode** vlastnost požadavků na čtení příliš**SecondaryOnly** a přepněte hello aplikace do režimu jen pro čtení před budete pokračovat.</span><span class="sxs-lookup"><span data-stu-id="f388d-221">When hello percent success drops below some threshold (such as 10%), set hello **LocationMode** property for read requests too**SecondaryOnly** and switch hello application into read-only mode before continuing.</span></span>

<span data-ttu-id="f388d-222">Prahová hodnota Hello chyb používá toodetermine při toomake hello přepínač může lišit tooservice služby ve vaší aplikaci, takže byste měli zvážit přitom konfigurovatelné parametry.</span><span class="sxs-lookup"><span data-stu-id="f388d-222">hello threshold of errors used toodetermine when toomake hello switch may vary from service tooservice in your application, so you should consider making them configurable parameters.</span></span> <span data-ttu-id="f388d-223">Toto je také kde rozhodnete toohandle opakovatelné chyby z každé služby samostatně nebo jako jeden, jak je popsáno dříve.</span><span class="sxs-lookup"><span data-stu-id="f388d-223">This is also where you decide toohandle retryable errors from each service separately or as one, as discussed previously.</span></span>

<span data-ttu-id="f388d-224">Je potřeba vzít v úvahu jak toohandle více instancí aplikace a jaké toodo při zjištění opakovatelné chyby v každé instanci.</span><span class="sxs-lookup"><span data-stu-id="f388d-224">Another consideration is how toohandle multiple instances of an application, and what toodo when you detect retryable errors in each instance.</span></span> <span data-ttu-id="f388d-225">Například můžete mít 20 virtuálních počítačů s hello načíst stejná aplikace.</span><span class="sxs-lookup"><span data-stu-id="f388d-225">For example, you may have 20 VMs running with hello same application loaded.</span></span> <span data-ttu-id="f388d-226">Samostatně každá instance zpracovávat?</span><span class="sxs-lookup"><span data-stu-id="f388d-226">Do you handle each instance separately?</span></span> <span data-ttu-id="f388d-227">Pokud jedna instance spustí, dochází k problémům, chcete toolimit hello odpovědi toojust dané jedné instance nebo chcete tootry toohave všechny instance odpovídají v hello stejný způsobem v případě, že jedna instance má problém?</span><span class="sxs-lookup"><span data-stu-id="f388d-227">If one instance starts having problems, do you want toolimit hello response toojust that one instance, or do you want tootry toohave all instances respond in hello same way when one instance has a problem?</span></span> <span data-ttu-id="f388d-228">Zpracování hello instancí samostatně je mnohem jednodušší než při odpovědi hello toocoordinate mezi nimi, ale tento postup závisí na architektuře vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f388d-228">Handling hello instances separately is much simpler than trying toocoordinate hello response across them, but how you do this depends on your application's architecture.</span></span>

### <a name="options-for-monitoring-hello-error-frequency"></a><span data-ttu-id="f388d-229">Možnosti sledování četnost chyb hello</span><span class="sxs-lookup"><span data-stu-id="f388d-229">Options for monitoring hello error frequency</span></span>

<span data-ttu-id="f388d-230">Máte tři hlavní možnosti monitorování hello frekvenci opakování v hello primární oblasti v pořadí toodetermine tooswitch přes toohello sekundární oblasti a změňte hello toorun aplikace v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-230">You have three main options for monitoring hello frequency of retries in hello primary region in order toodetermine when tooswitch over toohello secondary region and change hello application toorun in read-only mode.</span></span>

*   <span data-ttu-id="f388d-231">Přidejte obslužnou rutinu pro hello [ **bude opakován** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.retrying.aspx) událostí na hello [ **informacím OperationContext** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.aspx) objektu předáte požadavků na úložiště tooyour – to je hello Metoda zobrazí v tomto článku a používá se v hello doplňujícími ukázka.</span><span class="sxs-lookup"><span data-stu-id="f388d-231">Add a handler for hello [**Retrying**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.retrying.aspx) event on hello [**OperationContext**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.aspx) object you pass tooyour storage requests – this is hello method displayed in this article and used in hello accompanying sample.</span></span> <span data-ttu-id="f388d-232">Tyto události fire vždy, když klient hello opakovat žádost, umožňuje tootrack jak často hello klient zaznamená opakovatelné chyby na primární koncový bod.</span><span class="sxs-lookup"><span data-stu-id="f388d-232">These events fire whenever hello client retries a request, enabling you tootrack how often hello client encounters retryable errors on a primary endpoint.</span></span>

    ```csharp 
    operationContext.Retrying += (sender, arguments) =>
    {
        // Retrying in hello primary region
        if (arguments.Request.Host == primaryhostname)
            ...
    };
    ```

*   <span data-ttu-id="f388d-233">V hello [ **Evaluate** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.retrypolicies.iextendedretrypolicy.evaluate.aspx) metoda v zásadách vlastní opakování, můžete spustit vlastní kód vždy, když probíhá opakování.</span><span class="sxs-lookup"><span data-stu-id="f388d-233">In hello [**Evaluate**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.retrypolicies.iextendedretrypolicy.evaluate.aspx) method in a custom retry policy, you can run custom code whenever a retry takes place.</span></span> <span data-ttu-id="f388d-234">V přidání toorecording při opakovaném pokusu se stane, také to poskytuje hello možnost toomodify chování vaší opakování.</span><span class="sxs-lookup"><span data-stu-id="f388d-234">In addition toorecording when a retry happens, this also gives you hello opportunity toomodify your retry behavior.</span></span>

    ```csharp 
    public RetryInfo Evaluate(RetryContext retryContext,
    OperationContext operationContext)
    {
        var statusCode = retryContext.LastRequestResult.HttpStatusCode;
        if (retryContext.CurrentRetryCount >= this.maximumAttempts
        || ((statusCode &gt;= 300 && statusCode &lt; 500 && statusCode != 408)
        || statusCode == 501 // Not Implemented
        || statusCode == 505 // Version Not Supported
            ))
        {
        // Do not retry
            return null;
        }

        // Monitor retries in hello primary location
        ...

        // Determine RetryInterval and TargetLocation
        RetryInfo info =
            CreateRetryInfo(retryContext.CurrentRetryCount);

        return info;
    }
    ```

*   <span data-ttu-id="f388d-235">Hello třetí přístup je tooimplement vlastní monitorovací komponentu v aplikaci, které průběžně odešle příkaz ping váš koncový bod primárního úložiště s fiktivní číst toodetermine požadavků (jako je například čtení malých objektů blob), jeho stav.</span><span class="sxs-lookup"><span data-stu-id="f388d-235">hello third approach is tooimplement a custom monitoring component in your application that continually pings your primary storage endpoint with dummy read requests (such as reading a small blob) toodetermine its health.</span></span> <span data-ttu-id="f388d-236">Bude to trvat až některé prostředky, ale není značné množství.</span><span class="sxs-lookup"><span data-stu-id="f388d-236">This would take up some resources, but not a significant amount.</span></span> <span data-ttu-id="f388d-237">Pokud problém je zjistit, která dosáhne vaší prahové hodnoty, by pak proveďte hello přepínač příliš**SecondaryOnly** a režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f388d-237">When a problem is discovered that reaches your threshold, you would then perform hello switch too**SecondaryOnly** and read-only mode.</span></span>

<span data-ttu-id="f388d-238">V určitém okamžiku budete chtít tooswitch back toousing hello primární koncový bod a že aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-238">At some point, you will want tooswitch back toousing hello primary endpoint and allowing updates.</span></span> <span data-ttu-id="f388d-239">Pokud pomocí jedné z výše uvedených první dvě metody hello, můžete jednoduše přepnout zpět toohello primární koncový bod a povolit režim aktualizace po provedení nahodile vybrané množství času nebo počet operací.</span><span class="sxs-lookup"><span data-stu-id="f388d-239">If using one of hello first two methods listed above, you could simply switch back toohello primary endpoint and enable update mode after an arbitrarily selected amount of time or number of operations has been performed.</span></span> <span data-ttu-id="f388d-240">Pak můžete nechat ji znovu projít logika opakovaných pokusů hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-240">You can then let it go through hello retry logic again.</span></span> <span data-ttu-id="f388d-241">Pokud hello problém byl opraven, bude pokračovat primární koncový bod hello toouse a povolit aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-241">If hello problem has been fixed, it will continue toouse hello primary endpoint and allow updates.</span></span> <span data-ttu-id="f388d-242">Pokud stále existuje problém, ji budou jednou přepnout zpět toohello sekundární koncový bod a režimu jen pro čtení po selhání hello kritéria, které jste nastavili.</span><span class="sxs-lookup"><span data-stu-id="f388d-242">If there is still a problem, it will once more switch back toohello secondary endpoint and read-only mode after failing hello criteria you've set.</span></span>

<span data-ttu-id="f388d-243">Třetí scénář hello, jakmile příkaz ping koncový bod primární úložiště hello opět úspěšné, můžete aktivovat přepínač hello zpět příliš**PrimaryOnly** a pokračovat v povolení aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-243">For hello third scenario, when pinging hello primary storage endpoint becomes successful again, you can trigger hello switch back too**PrimaryOnly** and continue allowing updates.</span></span>

## <a name="handling-eventually-consistent-data"></a><span data-ttu-id="f388d-244">Zpracování nakonec byl konzistentní dat</span><span class="sxs-lookup"><span data-stu-id="f388d-244">Handling eventually consistent data</span></span>

<span data-ttu-id="f388d-245">RA-GRS funguje tak, že replikace transakce z hello primární toohello sekundární oblast.</span><span class="sxs-lookup"><span data-stu-id="f388d-245">RA-GRS works by replicating transactions from hello primary toohello secondary region.</span></span> <span data-ttu-id="f388d-246">Tento proces replikace zaručuje, že jsou data hello v sekundární oblasti hello *nakonec byl konzistentní*.</span><span class="sxs-lookup"><span data-stu-id="f388d-246">This replication process guarantees that hello data in hello secondary region is *eventually consistent*.</span></span> <span data-ttu-id="f388d-247">To znamená, že všechny transakce hello v primární oblasti hello se nakonec objeví v sekundární oblasti hello, ale že mohou být prodleva předtím, než se objeví, a že neexistuje žádná záruka hello transakce přicházející do sekundární oblasti hello ve stejné pořadí jako hello ve kterém byly původně uplatňují v primární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-247">This means that all hello transactions in hello primary region will eventually appear in hello secondary region, but that there may be a lag before they appear, and that there is no guarantee hello transactions arrive in hello secondary region in hello same order as that in which they were originally applied in hello primary region.</span></span> <span data-ttu-id="f388d-248">Pokud vaše transakce přicházejí v sekundární oblasti hello mimo pořadí, můžete *může* zvažte vaše data v sekundární oblasti toobe hello v nekonzistentním stavu, dokud vyrovnat služby hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-248">If your transactions arrive in hello secondary region out of order, you *may* consider your data in hello secondary region toobe in an inconsistent state until hello service catches up.</span></span>

<span data-ttu-id="f388d-249">Hello následující tabulka znázorňuje příklad co může dojít v případě, že aktualizujete hello podrobnosti zaměstnanec toomake jí členem hello *správci* role.</span><span class="sxs-lookup"><span data-stu-id="f388d-249">hello following table shows an example of what might happen when you update hello details of an employee toomake her a member of hello *administrators* role.</span></span> <span data-ttu-id="f388d-250">Hello zájmu v tomto příkladu, to vyžaduje, můžete aktualizovat hello **zaměstnanec** entitu a aktualizace **role správce** entity s počtem hello celkový počet správců.</span><span class="sxs-lookup"><span data-stu-id="f388d-250">For hello sake of this example, this requires you update hello **employee** entity and update an **administrator role** entity with a count of hello total number of administrators.</span></span> <span data-ttu-id="f388d-251">Všimněte si, jak hello se aktualizace mimo pořadí v sekundární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-251">Notice how hello updates are applied out of order in hello secondary region.</span></span>

| <span data-ttu-id="f388d-252">**Čas**</span><span class="sxs-lookup"><span data-stu-id="f388d-252">**Time**</span></span> | <span data-ttu-id="f388d-253">**Transakce**</span><span class="sxs-lookup"><span data-stu-id="f388d-253">**Transaction**</span></span>                                            | <span data-ttu-id="f388d-254">**Replikace**</span><span class="sxs-lookup"><span data-stu-id="f388d-254">**Replication**</span></span>                       | <span data-ttu-id="f388d-255">**Čas poslední synchronizace**</span><span class="sxs-lookup"><span data-stu-id="f388d-255">**Last Sync Time**</span></span> | <span data-ttu-id="f388d-256">**Výsledek**</span><span class="sxs-lookup"><span data-stu-id="f388d-256">**Result**</span></span> |
|----------|------------------------------------------------------------|---------------------------------------|--------------------|------------| 
| <span data-ttu-id="f388d-257">T0</span><span class="sxs-lookup"><span data-stu-id="f388d-257">T0</span></span>       | <span data-ttu-id="f388d-258">Transakce A:</span><span class="sxs-lookup"><span data-stu-id="f388d-258">Transaction A:</span></span> <br> <span data-ttu-id="f388d-259">Vložit zaměstnance</span><span class="sxs-lookup"><span data-stu-id="f388d-259">Insert employee</span></span> <br> <span data-ttu-id="f388d-260">entity v primární</span><span class="sxs-lookup"><span data-stu-id="f388d-260">entity in primary</span></span> |                                   |                    | <span data-ttu-id="f388d-261">Transakce A vložit tooprimary,</span><span class="sxs-lookup"><span data-stu-id="f388d-261">Transaction A inserted tooprimary,</span></span><br> <span data-ttu-id="f388d-262">není ještě nereplikovaly.</span><span class="sxs-lookup"><span data-stu-id="f388d-262">not replicated yet.</span></span> |
| <span data-ttu-id="f388d-263">T1</span><span class="sxs-lookup"><span data-stu-id="f388d-263">T1</span></span>       |                                                            | <span data-ttu-id="f388d-264">Transakce A</span><span class="sxs-lookup"><span data-stu-id="f388d-264">Transaction A</span></span> <br> <span data-ttu-id="f388d-265">replikovat do</span><span class="sxs-lookup"><span data-stu-id="f388d-265">replicated to</span></span><br> <span data-ttu-id="f388d-266">sekundární</span><span class="sxs-lookup"><span data-stu-id="f388d-266">secondary</span></span> | <span data-ttu-id="f388d-267">T1</span><span class="sxs-lookup"><span data-stu-id="f388d-267">T1</span></span> | <span data-ttu-id="f388d-268">Transakce A replikují toosecondary.</span><span class="sxs-lookup"><span data-stu-id="f388d-268">Transaction A replicated toosecondary.</span></span> <br><span data-ttu-id="f388d-269">Čas poslední synchronizace aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="f388d-269">Last Sync Time updated.</span></span>    |
| <span data-ttu-id="f388d-270">T2</span><span class="sxs-lookup"><span data-stu-id="f388d-270">T2</span></span>       | <span data-ttu-id="f388d-271">Transakce B:</span><span class="sxs-lookup"><span data-stu-id="f388d-271">Transaction B:</span></span><br><span data-ttu-id="f388d-272">Aktualizace</span><span class="sxs-lookup"><span data-stu-id="f388d-272">Update</span></span><br> <span data-ttu-id="f388d-273">Zaměstnanec entity</span><span class="sxs-lookup"><span data-stu-id="f388d-273">employee entity</span></span><br> <span data-ttu-id="f388d-274">v primární</span><span class="sxs-lookup"><span data-stu-id="f388d-274">in primary</span></span>  |                                | <span data-ttu-id="f388d-275">T1</span><span class="sxs-lookup"><span data-stu-id="f388d-275">T1</span></span>                 | <span data-ttu-id="f388d-276">Transakce B zapsána tooprimary,</span><span class="sxs-lookup"><span data-stu-id="f388d-276">Transaction B written tooprimary,</span></span><br> <span data-ttu-id="f388d-277">není ještě nereplikovaly.</span><span class="sxs-lookup"><span data-stu-id="f388d-277">not replicated yet.</span></span>  |
| <span data-ttu-id="f388d-278">T3</span><span class="sxs-lookup"><span data-stu-id="f388d-278">T3</span></span>       | <span data-ttu-id="f388d-279">Transakce C:</span><span class="sxs-lookup"><span data-stu-id="f388d-279">Transaction C:</span></span><br> <span data-ttu-id="f388d-280">Aktualizace</span><span class="sxs-lookup"><span data-stu-id="f388d-280">Update</span></span> <br><span data-ttu-id="f388d-281">Správce</span><span class="sxs-lookup"><span data-stu-id="f388d-281">administrator</span></span><br><span data-ttu-id="f388d-282">entitu role v</span><span class="sxs-lookup"><span data-stu-id="f388d-282">role entity in</span></span><br><span data-ttu-id="f388d-283">primární</span><span class="sxs-lookup"><span data-stu-id="f388d-283">primary</span></span> |                    | <span data-ttu-id="f388d-284">T1</span><span class="sxs-lookup"><span data-stu-id="f388d-284">T1</span></span>                 | <span data-ttu-id="f388d-285">Transakce zapsána tooprimary, C</span><span class="sxs-lookup"><span data-stu-id="f388d-285">Transaction C written tooprimary,</span></span><br> <span data-ttu-id="f388d-286">není ještě nereplikovaly.</span><span class="sxs-lookup"><span data-stu-id="f388d-286">not replicated yet.</span></span>  |
| <span data-ttu-id="f388d-287">*T4*</span><span class="sxs-lookup"><span data-stu-id="f388d-287">*T4*</span></span>     |                                                       | <span data-ttu-id="f388d-288">Transakce C</span><span class="sxs-lookup"><span data-stu-id="f388d-288">Transaction C</span></span> <br><span data-ttu-id="f388d-289">replikovat do</span><span class="sxs-lookup"><span data-stu-id="f388d-289">replicated to</span></span><br> <span data-ttu-id="f388d-290">sekundární</span><span class="sxs-lookup"><span data-stu-id="f388d-290">secondary</span></span> | <span data-ttu-id="f388d-291">T1</span><span class="sxs-lookup"><span data-stu-id="f388d-291">T1</span></span>         | <span data-ttu-id="f388d-292">Transakce C replikují toosecondary.</span><span class="sxs-lookup"><span data-stu-id="f388d-292">Transaction C replicated toosecondary.</span></span><br><span data-ttu-id="f388d-293">Nelze aktualizovat, protože LastSyncTime</span><span class="sxs-lookup"><span data-stu-id="f388d-293">LastSyncTime not updated because</span></span> <br><span data-ttu-id="f388d-294">ještě nebyla replikována transakce B.</span><span class="sxs-lookup"><span data-stu-id="f388d-294">transaction B has not been replicated yet.</span></span>|
| <span data-ttu-id="f388d-295">*T5*</span><span class="sxs-lookup"><span data-stu-id="f388d-295">*T5*</span></span>     | <span data-ttu-id="f388d-296">Ke čtení entit</span><span class="sxs-lookup"><span data-stu-id="f388d-296">Read entities</span></span> <br><span data-ttu-id="f388d-297">ze sekundární</span><span class="sxs-lookup"><span data-stu-id="f388d-297">from secondary</span></span>                           |                                  | <span data-ttu-id="f388d-298">T1</span><span class="sxs-lookup"><span data-stu-id="f388d-298">T1</span></span>                 | <span data-ttu-id="f388d-299">Získat hello zastaralé hodnotu pro zaměstnance</span><span class="sxs-lookup"><span data-stu-id="f388d-299">You get hello stale value for employee</span></span> <br> <span data-ttu-id="f388d-300">entity vzhledem k tomu, že nebyla transakce B</span><span class="sxs-lookup"><span data-stu-id="f388d-300">entity because transaction B hasn't</span></span> <br> <span data-ttu-id="f388d-301">ještě nereplikovaly.</span><span class="sxs-lookup"><span data-stu-id="f388d-301">replicated yet.</span></span> <span data-ttu-id="f388d-302">Získat novou hodnotu hello</span><span class="sxs-lookup"><span data-stu-id="f388d-302">You get hello new value for</span></span><br> <span data-ttu-id="f388d-303">entitu role správce vzhledem k tomu, že má C</span><span class="sxs-lookup"><span data-stu-id="f388d-303">administrator role entity because C has</span></span><br> <span data-ttu-id="f388d-304">replikovat.</span><span class="sxs-lookup"><span data-stu-id="f388d-304">replicated.</span></span> <span data-ttu-id="f388d-305">Čas poslední synchronizace stále ještě</span><span class="sxs-lookup"><span data-stu-id="f388d-305">Last Sync Time still hasn't</span></span><br> <span data-ttu-id="f388d-306">byla aktualizovat, protože transakce B</span><span class="sxs-lookup"><span data-stu-id="f388d-306">been updated because transaction B</span></span><br> <span data-ttu-id="f388d-307">nebyla replikována.</span><span class="sxs-lookup"><span data-stu-id="f388d-307">hasn't replicated.</span></span> <span data-ttu-id="f388d-308">Můžete zjistit</span><span class="sxs-lookup"><span data-stu-id="f388d-308">You can tell the</span></span><br><span data-ttu-id="f388d-309">Entita role správce je nekonzistentní</span><span class="sxs-lookup"><span data-stu-id="f388d-309">administrator role entity is inconsistent</span></span> <br><span data-ttu-id="f388d-310">protože hello entity datum a čas je po</span><span class="sxs-lookup"><span data-stu-id="f388d-310">because hello entity date/time is after</span></span> <br><span data-ttu-id="f388d-311">Hello čas poslední synchronizace.</span><span class="sxs-lookup"><span data-stu-id="f388d-311">hello Last Sync Time.</span></span> |
| <span data-ttu-id="f388d-312">*T6*</span><span class="sxs-lookup"><span data-stu-id="f388d-312">*T6*</span></span>     |                                                      | <span data-ttu-id="f388d-313">Transakce B</span><span class="sxs-lookup"><span data-stu-id="f388d-313">Transaction B</span></span><br> <span data-ttu-id="f388d-314">replikovat do</span><span class="sxs-lookup"><span data-stu-id="f388d-314">replicated to</span></span><br> <span data-ttu-id="f388d-315">sekundární</span><span class="sxs-lookup"><span data-stu-id="f388d-315">secondary</span></span> | <span data-ttu-id="f388d-316">T6</span><span class="sxs-lookup"><span data-stu-id="f388d-316">T6</span></span>                 | <span data-ttu-id="f388d-317">*T6* – mít všechny transakce prostřednictvím C</span><span class="sxs-lookup"><span data-stu-id="f388d-317">*T6* – All transactions through C have</span></span> <br><span data-ttu-id="f388d-318">byla replikovat, čas poslední synchronizace</span><span class="sxs-lookup"><span data-stu-id="f388d-318">been replicated, Last Sync Time</span></span><br> <span data-ttu-id="f388d-319">je aktualizována.</span><span class="sxs-lookup"><span data-stu-id="f388d-319">is updated.</span></span> |

<span data-ttu-id="f388d-320">V tomto příkladu se předpokládá hello klienta přepínače tooreading ze sekundární oblasti hello v T5.</span><span class="sxs-lookup"><span data-stu-id="f388d-320">In this example, assume hello client switches tooreading from hello secondary region at T5.</span></span> <span data-ttu-id="f388d-321">Ho můžou číst hello **role správce** entity v tuto chvíli hello entity však obsahuje hodnotu pro počet hello správců, který není konzistentní s počtem hello **zaměstnanec** entity v tuto chvíli jsou označené jako správci v sekundární oblasti hello.</span><span class="sxs-lookup"><span data-stu-id="f388d-321">It can successfully read hello **administrator role** entity at this time, but hello entity contains a value for hello count of administrators that is not consistent with hello number of **employee** entities that are marked as administrators in hello secondary region at this time.</span></span> <span data-ttu-id="f388d-322">Váš klient jednoduše zobrazit tuto hodnotu s hello riziko, že je nekonzistentní informace.</span><span class="sxs-lookup"><span data-stu-id="f388d-322">Your client could simply display this value, with hello risk that it is inconsistent information.</span></span> <span data-ttu-id="f388d-323">Alternativně hello klienta může pokusit toodetermine této hello **role správce** je ve stavu potenciálně nekonzistentní, protože aktualizace hello dojít mimo pořadí a potom informovat uživatele hello o této skutečnosti.</span><span class="sxs-lookup"><span data-stu-id="f388d-323">Alternatively, hello client could attempt toodetermine that hello **administrator role** is in a potentially inconsistent state because hello updates have happened out of order, and then inform hello user of this fact.</span></span>

<span data-ttu-id="f388d-324">toorecognize, že obsahuje potenciálně nekonzistentní data, hello klienta můžete použít hodnotu hello hello *čas poslední synchronizace* , můžete se kdykoli dotazováním služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="f388d-324">toorecognize that it has potentially inconsistent data, hello client can use hello value of hello *Last Sync Time* that you can get at any time by querying a storage service.</span></span> <span data-ttu-id="f388d-325">Znamená to, kdy byl naposledy hello data v sekundární oblasti hello čas hello konzistentní a kdy se měl použít hello služby hello transakce předchozí toothat bodu v čase.</span><span class="sxs-lookup"><span data-stu-id="f388d-325">This tells you hello time when hello data in hello secondary region was last consistent and when hello service had applied all hello transactions prior toothat point in time.</span></span> <span data-ttu-id="f388d-326">Hello příkladu výše, jakmile služba hello vloží hello **zaměstnanec** entity v sekundární oblasti hello hello čas poslední synchronizace je nastaven příliš*T1*.</span><span class="sxs-lookup"><span data-stu-id="f388d-326">In hello example shown above, after hello service inserts hello **employee** entity in hello secondary region, hello last sync time is set too*T1*.</span></span> <span data-ttu-id="f388d-327">Zůstane v *T1* dokud aktualizace služby pro hello hello **zaměstnanec** entity v hello sekundární oblasti, kde se nastaví příliš*T6*.</span><span class="sxs-lookup"><span data-stu-id="f388d-327">It remains at *T1* until hello service updates hello **employee** entity in hello secondary region when it is set too*T6*.</span></span> <span data-ttu-id="f388d-328">Pokud klient hello načte hello čas poslední synchronizace, když přečte hello entity v *T5*, ho můžete porovnat s časovým razítkem hello u hello entity.</span><span class="sxs-lookup"><span data-stu-id="f388d-328">If hello client retrieves hello last sync time when it reads hello entity at *T5*, it can compare it with hello timestamp on hello entity.</span></span> <span data-ttu-id="f388d-329">Pokud je novější než hello hello časové razítko hello entity od poslední synchronizace času, potom hello entita je ve stavu potenciálně nekonzistentní a může trvat vše, co je hello vhodnou pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="f388d-329">If hello timestamp on hello entity is later than hello last sync time, then hello entity is in a potentially inconsistent state, and you can take whatever is hello appropriate action for your application.</span></span> <span data-ttu-id="f388d-330">Použít toto pole je nutné vědět, kdy byla dokončena hello poslední aktualizace toohello primární.</span><span class="sxs-lookup"><span data-stu-id="f388d-330">Using this field requires that you know when hello last update toohello primary was completed.</span></span>

## <a name="testing"></a><span data-ttu-id="f388d-331">Testování</span><span class="sxs-lookup"><span data-stu-id="f388d-331">Testing</span></span>

<span data-ttu-id="f388d-332">Je důležité tootest, který vaše aplikace funguje podle očekávání, pokud se setká s opakovatelnou chyby.</span><span class="sxs-lookup"><span data-stu-id="f388d-332">It's important tootest that your application behaves as expected when it encounters retryable errors.</span></span> <span data-ttu-id="f388d-333">Například musíte tootest, který hello sekundární toohello přepínače aplikace a do režimu jen pro čtení při zjistí problém a přepínače zpět když primární oblasti hello opět k dispozici.</span><span class="sxs-lookup"><span data-stu-id="f388d-333">For example, you need tootest that hello application switches toohello secondary and into read-only mode when it detects a problem, and switches back when hello primary region becomes available again.</span></span> <span data-ttu-id="f388d-334">toodo, způsob toosimulate opakovatelné chyby a budete řídit, jak často k nim dojde.</span><span class="sxs-lookup"><span data-stu-id="f388d-334">toodo this, you need a way toosimulate retryable errors and control how often they occur.</span></span>

<span data-ttu-id="f388d-335">Můžete použít [Fiddler](http://www.telerik.com/fiddler) toointercept a upravit odpovědi HTTP ve skriptu.</span><span class="sxs-lookup"><span data-stu-id="f388d-335">You can use [Fiddler](http://www.telerik.com/fiddler) toointercept and modify HTTP responses in a script.</span></span> <span data-ttu-id="f388d-336">Tento skript můžete identifikovat odpovědi, které pocházejí z váš primární koncový bod a změnit tooone kód stavu HTTP hello této hello Klientská knihovna pro úložiště rozpozná jako Opakovatelná chyba.</span><span class="sxs-lookup"><span data-stu-id="f388d-336">This script can identify responses that come from your primary endpoint and change hello HTTP status code tooone that hello Storage Client Library recognizes as a retryable error.</span></span> <span data-ttu-id="f388d-337">Tento fragment kódu ukazuje jednoduchý příklad Fiddler skriptu, který zabrání odpovědí tooread požadavky DHCP proti hello **employeedata** tooreturn tabulky 502 stavu:</span><span class="sxs-lookup"><span data-stu-id="f388d-337">This code snippet shows a simple example of a Fiddler script that intercepts responses tooread requests against hello **employeedata** table tooreturn a 502 status:</span></span>

```java
static function OnBeforeResponse(oSession: Session) {
    ...
    if ((oSession.hostname == "\[yourstorageaccount\].table.core.windows.net")
      && (oSession.PathAndQuery.StartsWith("/employeedata?$filter"))) {
        oSession.responseCode = 502;
    }
}
```

<span data-ttu-id="f388d-338">Můžete rozšířit tento příklad toointercept většímu počtu požadavků a změnit jedině tak hello **responseCode** u některých z nich toobetter simulovat scénářem z reálného prostředí.</span><span class="sxs-lookup"><span data-stu-id="f388d-338">You could extend this example toointercept a wider range of requests and only change hello **responseCode** on some of them toobetter simulate a real-world scenario.</span></span> <span data-ttu-id="f388d-339">Další informace o přizpůsobení Fiddler skriptů najdete v tématu [úprava požadavek nebo odpověď](http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse) v hello dokumentace k aplikaci Fiddler.</span><span class="sxs-lookup"><span data-stu-id="f388d-339">For more information about customizing Fiddler scripts, see [Modifying a Request or Response](http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse) in hello Fiddler documentation.</span></span>

<span data-ttu-id="f388d-340">Pokud jste provedli hello prahové hodnoty pro přepínání vaší aplikace tooread režimu pouze konfigurovat, bude jednodušší chování hello tootest se svazky mimo produkční transakce.</span><span class="sxs-lookup"><span data-stu-id="f388d-340">If you have made hello thresholds for switching your application tooread-only mode configurable, it will be easier tootest hello behavior with non-production transaction volumes.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f388d-341">Další kroky</span><span class="sxs-lookup"><span data-stu-id="f388d-341">Next Steps</span></span>

* <span data-ttu-id="f388d-342">Další informace o přístup pro čtení geografická redundance, včetně další příklad nastavení hello LastSyncTime, najdete v tématu [možnosti redundance úložiště Windows Azure a geograficky redundantní úložiště s přístupem pro čtení](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="f388d-342">For more information about Read Access Geo-Redundancy, including another example of how hello LastSyncTime is set, please see [Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

* <span data-ttu-id="f388d-343">Kompletní příklad znázorňující, jak toomake hello přepínač přepínat mezi koncovými body hello primární a sekundární, najdete v tématu [vzorků Azure – použití hello jistič vzor s úložištěm RA-GRS](https://github.com/Azure-Samples/storage-dotnet-circuit-breaker-pattern-ha-apps-using-ra-grs).</span><span class="sxs-lookup"><span data-stu-id="f388d-343">For a complete sample showing how toomake hello switch back and forth between hello Primary and Secondary endpoints, please see [Azure Samples – Using hello Circuit Breaker Pattern with RA-GRS storage](https://github.com/Azure-Samples/storage-dotnet-circuit-breaker-pattern-ha-apps-using-ra-grs).</span></span>
