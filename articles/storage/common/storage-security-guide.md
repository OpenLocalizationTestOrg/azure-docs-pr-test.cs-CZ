---
title: "Průvodce zabezpečením služby Azure Storage | Microsoft Docs"
description: "Podrobnosti o mnoho způsobů zabezpečení Azure Storage, včetně RBAC, šifrování služby úložiště, šifrování na straně klienta, protokolu SMB 3.0 a Azure Disk Encryption bez omezení."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 6f931d94-ef5a-44c6-b1d9-8a3c9c327fb2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: e71d9baf36ea7acb8dc8fa1daf9ddde3a2856f85
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/29/2017
---
# <a name="azure-storage-security-guide"></a><span data-ttu-id="37af2-103">Průvodce zabezpečením služby Azure Storage</span><span class="sxs-lookup"><span data-stu-id="37af2-103">Azure Storage security guide</span></span>
## <a name="overview"></a><span data-ttu-id="37af2-104">Přehled</span><span class="sxs-lookup"><span data-stu-id="37af2-104">Overview</span></span>
<span data-ttu-id="37af2-105">Úložiště Azure poskytuje komplexní sadu funkcí zabezpečení, které společně umožňují vývojářům vytvářet aplikace zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="37af2-105">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="37af2-106">Účet úložiště, samotné lze zabezpečit pomocí řízení přístupu na základě Role a Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-106">The storage account itself can be secured using Role-Based Access Control and Azure Active Directory.</span></span> <span data-ttu-id="37af2-107">Data byla zabezpečená během přenosu mezi aplikací a Azure pomocí [šifrování na straně klienta](../storage-client-side-encryption.md), HTTPS nebo SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="37af2-107">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPS, or SMB 3.0.</span></span> <span data-ttu-id="37af2-108">Data lze nastavit, aby se šifrují automaticky při zápisu do úložiště Azure pomocí [šifrování služby úložiště (SSE)](storage-service-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="37af2-108">Data can be set to be automatically encrypted when written to Azure Storage using [Storage Service Encryption (SSE)](storage-service-encryption.md).</span></span> <span data-ttu-id="37af2-109">Disky operačního systému a dat používaných virtuálními počítači může být nastaven na šifrovat pomocí [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="37af2-109">OS and Data disks used by virtual machines can be set to be encrypted using [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span></span> <span data-ttu-id="37af2-110">Delegovaný přístup k datové objekty ve službě Azure Storage můžete udělit pomocí [sdílené přístupové podpisy](../storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="37af2-110">Delegated access to the data objects in Azure Storage can be granted using [Shared Access Signatures](../storage-dotnet-shared-access-signature-part-1.md).</span></span>

<span data-ttu-id="37af2-111">Tento článek přináší přehled každé z těchto funkcí zabezpečení, které lze použít s Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-111">This article will provide an overview of each of these security features that can be used with Azure Storage.</span></span> <span data-ttu-id="37af2-112">Odkazy jsou k dispozici na články, které vám poskytne podrobnosti o jednotlivých funkcí, takže můžete snadno provést další šetření na každého tématu.</span><span class="sxs-lookup"><span data-stu-id="37af2-112">Links are provided to articles that will give details of each feature so you can easily do further investigation on each topic.</span></span>

<span data-ttu-id="37af2-113">Zde jsou témata, která má být v tomto článku:</span><span class="sxs-lookup"><span data-stu-id="37af2-113">Here are the topics to be covered in this article:</span></span>

* <span data-ttu-id="37af2-114">[Zabezpečení roviny Management](#management-plane-security) – zabezpečení vašeho účtu úložiště</span><span class="sxs-lookup"><span data-stu-id="37af2-114">[Management Plane Security](#management-plane-security) – Securing your Storage Account</span></span>

  <span data-ttu-id="37af2-115">Roviny správu se skládá z prostředky používat ke správě vašeho účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-115">The management plane consists of the resources used to manage your storage account.</span></span> <span data-ttu-id="37af2-116">V této části se budeme mluvit o modelu nasazení Azure Resource Manager a jak používat řízení přístupu na základě Role (RBAC) pro řízení přístupu účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-116">In this section, we'll talk about the Azure Resource Manager deployment model and how to use Role-Based Access Control (RBAC) to control access to your storage accounts.</span></span> <span data-ttu-id="37af2-117">Bude také faktorech mluvíme o správě klíče účtu úložiště a jak se je znovu vygenerovat.</span><span class="sxs-lookup"><span data-stu-id="37af2-117">We will also talk about managing your storage account keys and how to regenerate them.</span></span>
* <span data-ttu-id="37af2-118">[Data roviny zabezpečení](#data-plane-security) – zabezpečení přístupu k datům</span><span class="sxs-lookup"><span data-stu-id="37af2-118">[Data Plane Security](#data-plane-security) – Securing Access to Your Data</span></span>

  <span data-ttu-id="37af2-119">V této části se podíváme povolení přístupu k objektům skutečná data ve vašem účtu úložiště, jako jsou objekty BLOB, soubory, fronty a tabulky, pomocí uložené zásady přístupu a podpisy sdíleného přístupu.</span><span class="sxs-lookup"><span data-stu-id="37af2-119">In this section, we'll look at allowing access to the actual data objects in your Storage account, such as blobs, files, queues, and tables, using Shared Access Signatures and Stored Access Policies.</span></span> <span data-ttu-id="37af2-120">Vám nabídneme SAS úrovně služby a SAS účtu úrovni.</span><span class="sxs-lookup"><span data-stu-id="37af2-120">We will cover both service-level SAS and account-level SAS.</span></span> <span data-ttu-id="37af2-121">Dozvíte se jsme taky, jak omezit přístup ke konkrétní IP adresu (nebo rozsah IP adres), jak omezit protokol použitý k HTTPS a postup odvolat sdíleného přístupového podpisu bez čekání na vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="37af2-121">We'll also see how to limit access to a specific IP address (or range of IP addresses), how to limit the protocol used to HTTPS, and how to revoke a Shared Access Signature without waiting for it to expire.</span></span>
* [<span data-ttu-id="37af2-122">Šifrování během přenosu</span><span class="sxs-lookup"><span data-stu-id="37af2-122">Encryption in Transit</span></span>](#encryption-in-transit)

  <span data-ttu-id="37af2-123">Tato část popisuje, jak k zabezpečení dat při přenosu do nebo z Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-123">This section discusses how to secure data when you transfer it into or out of Azure Storage.</span></span> <span data-ttu-id="37af2-124">Budeme mluvit o doporučené použití protokolu HTTPS a šifrování používá protokol SMB 3.0 pro sdílené složky Azure File.</span><span class="sxs-lookup"><span data-stu-id="37af2-124">We'll talk about the recommended use of HTTPS and the encryption used by SMB 3.0 for Azure File shares.</span></span> <span data-ttu-id="37af2-125">Také jsme bude trvat podívejte se na straně klienta šifrování, které vám umožní šifrování dat před přenosu do úložiště v aplikaci klienta a k dešifrování dat po se přenáší z úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-125">We will also take a look at Client-side Encryption, which enables you to encrypt the data before it is transferred into Storage in a client application, and to decrypt the data after it is transferred out of Storage.</span></span>
* [<span data-ttu-id="37af2-126">Šifrování v klidovém stavu</span><span class="sxs-lookup"><span data-stu-id="37af2-126">Encryption at Rest</span></span>](#encryption-at-rest)

  <span data-ttu-id="37af2-127">Bude faktorech mluvíme o šifrování služby úložiště (SSE) a jak můžete ji povolit pro účet úložiště, což vede k objektů BLOB bloku, objekty BLOB stránky a doplňovací objekty BLOB se šifrují automaticky při zápisu do služby Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-127">We will talk about Storage Service Encryption (SSE), and how you can enable it for a storage account, resulting in your block blobs, page blobs, and append blobs being automatically encrypted when written to Azure Storage.</span></span> <span data-ttu-id="37af2-128">Podíváme se také na tom, jak můžete použít Azure Disk Encryption a prozkoumat základní rozdíly a případů šifrování disku versus SSE versus šifrování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-128">We will also look at how you can use Azure Disk Encryption and explore the basic differences and cases of Disk Encryption versus SSE versus Client-Side Encryption.</span></span> <span data-ttu-id="37af2-129">Podíváme se stručně na soulad se standardem FIPS pro USA Počítače, Government.</span><span class="sxs-lookup"><span data-stu-id="37af2-129">We will briefly look at FIPS compliance for U.S. Government computers.</span></span>
* <span data-ttu-id="37af2-130">Pomocí [Storage Analytics](#storage-analytics) auditovat přístup k Azure Storage</span><span class="sxs-lookup"><span data-stu-id="37af2-130">Using [Storage Analytics](#storage-analytics) to audit access of Azure Storage</span></span>

  <span data-ttu-id="37af2-131">Tato část popisuje, jak najít informace o do úložiště analýzy protokolů pro žádost.</span><span class="sxs-lookup"><span data-stu-id="37af2-131">This section discusses how to find information in the storage analytics logs for a request.</span></span> <span data-ttu-id="37af2-132">Jsme budete si prohlédněte analytika úložiště skutečná data protokolu a zjistit, jak rozpoznat, zda je žádosti s s sdílený přístupový podpis, klíče účtu úložiště nebo anonymně a jestli byla úspěšná nebo neúspěšná.</span><span class="sxs-lookup"><span data-stu-id="37af2-132">We'll take a look at real storage analytics log data and see how to discern whether a request is made with the Storage account key, with a Shared Access signature, or anonymously, and whether it succeeded or failed.</span></span>
* [<span data-ttu-id="37af2-133">Povolení založené na prohlížeči klientů pomocí CORS</span><span class="sxs-lookup"><span data-stu-id="37af2-133">Enabling Browser-Based Clients using CORS</span></span>](#Cross-Origin-Resource-Sharing-CORS)

  <span data-ttu-id="37af2-134">Tato část pojednává o tom, aby prostředků mezi zdroji (CORS) pro sdílení.</span><span class="sxs-lookup"><span data-stu-id="37af2-134">This section talks about how to allow cross-origin resource sharing (CORS).</span></span> <span data-ttu-id="37af2-135">Budeme mluvit o přístupu mezi doménami a jak budete nakládat s možností CORS integrovaných v Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-135">We'll talk about cross-domain access, and how to handle it with the CORS capabilities built into Azure Storage.</span></span>

## <a name="management-plane-security"></a><span data-ttu-id="37af2-136">Zabezpečení roviny Management</span><span class="sxs-lookup"><span data-stu-id="37af2-136">Management Plane Security</span></span>
<span data-ttu-id="37af2-137">Roviny správu se skládá z operace, které ovlivňují přímo účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-137">The management plane consists of operations that affect the storage account itself.</span></span> <span data-ttu-id="37af2-138">Můžete například vytvořit nebo odstranit účet úložiště, získáte seznam účtů úložiště v předplatném, načtení klíčů účtu úložiště nebo obnovit klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-138">For example, you can create or delete a storage account, get a list of storage accounts in a subscription, retrieve the storage account keys, or regenerate the storage account keys.</span></span>

<span data-ttu-id="37af2-139">Když vytvoříte nový účet úložiště, můžete vybrat model nasazení Classic nebo Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="37af2-139">When you create a new storage account, you select a deployment model of Classic or Resource Manager.</span></span> <span data-ttu-id="37af2-140">Klasický model vytváření prostředků v Azure umožňuje pouze vše nebo nic přístup k předplatnému a naopak účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-140">The Classic model of creating resources in Azure only allows all-or-nothing access to the subscription, and in turn, the storage account.</span></span>

<span data-ttu-id="37af2-141">Tato příručka se zaměřuje na modelu Resource Manager, což je doporučený způsob pro vytváření účtů úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-141">This guide focuses on the Resource Manager model which is the recommended means for creating storage accounts.</span></span> <span data-ttu-id="37af2-142">Pomocí účty správce prostředků úložiště, na rozdíl od které umožňují přístup k celé předplatné můžete řídit přístup na určité úrovni více konečné rovinou správy pomocí řízení přístupu na základě Role (RBAC).</span><span class="sxs-lookup"><span data-stu-id="37af2-142">With the Resource Manager storage accounts, rather than giving access to the entire subscription, you can control access on a more finite level to the management plane using Role-Based Access Control (RBAC).</span></span>

### <a name="how-to-secure-your-storage-account-with-role-based-access-control-rbac"></a><span data-ttu-id="37af2-143">Postupy pro zabezpečení vašeho účtu úložiště pomocí řízení přístupu na základě Role (RBAC)</span><span class="sxs-lookup"><span data-stu-id="37af2-143">How to secure your storage account with Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="37af2-144">Budeme mluvit o novinky RBAC a jak můžete použít.</span><span class="sxs-lookup"><span data-stu-id="37af2-144">Let's talk about what RBAC is, and how you can use it.</span></span> <span data-ttu-id="37af2-145">Každé předplatné Azure zahrnuje službu (adresář) Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-145">Each Azure subscription has an Azure Active Directory.</span></span> <span data-ttu-id="37af2-146">Uživatelé, skupiny a aplikací z adresáře mohou mít udělen přístup ke správě prostředků v rámci předplatného Azure, které používají model nasazení Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="37af2-146">Users, groups, and applications from that directory can be granted access to manage resources in the Azure subscription that use the Resource Manager deployment model.</span></span> <span data-ttu-id="37af2-147">To se označuje jako řízení přístupu na základě Role (RBAC).</span><span class="sxs-lookup"><span data-stu-id="37af2-147">This is referred to as Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="37af2-148">Chcete-li spravovat tento přístup, můžete použít [portál Azure](https://portal.azure.com/), [nástrojů příkazového řádku Azure](../../cli-install-nodejs.md), [prostředí PowerShell](/powershell/azureps-cmdlets-docs), nebo [API REST poskytovatele prostředků úložiště Azure](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span><span class="sxs-lookup"><span data-stu-id="37af2-148">To manage this access, you can use the [Azure portal](https://portal.azure.com/), the [Azure CLI tools](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), or the [Azure Storage Resource Provider REST APIs](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span></span>

<span data-ttu-id="37af2-149">Pomocí modelu Resource Manager vložíte účet úložiště v prostředku skupiny a řízení přístupu pro správu roviny tohoto účtu konkrétní úložiště pomocí služby Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-149">With the Resource Manager model, you put the storage account in a resource group and control access to the management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="37af2-150">Například můžete uživatelům konkrétní přístup klíče účtu úložiště jiných uživatelů můžete zobrazit informace o účtu úložiště, ale nemůže přístupové klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-150">For example, you can give specific users the ability to access the storage account keys, while other users can view information about the storage account, but cannot access the storage account keys.</span></span>

#### <a name="granting-access"></a><span data-ttu-id="37af2-151">Udělení přístupu</span><span class="sxs-lookup"><span data-stu-id="37af2-151">Granting Access</span></span>
<span data-ttu-id="37af2-152">Přístup uděluje přiřazením příslušné role RBAC uživatelům, skupinám a aplikace, v pravém oboru.</span><span class="sxs-lookup"><span data-stu-id="37af2-152">Access is granted by assigning the appropriate RBAC role to users, groups, and applications, at the right scope.</span></span> <span data-ttu-id="37af2-153">Abyste mohli udělit přístup k celé předplatné, přiřadíte roli na úrovni předplatného.</span><span class="sxs-lookup"><span data-stu-id="37af2-153">To grant access to the entire subscription, you assign a role at the subscription level.</span></span> <span data-ttu-id="37af2-154">Můžete udělit přístup k všechny prostředky ve skupině prostředků tak, že udělíte oprávnění ke skupině prostředků, sám sebe.</span><span class="sxs-lookup"><span data-stu-id="37af2-154">You can grant access to all of the resources in a resource group by granting permissions to the resource group itself.</span></span> <span data-ttu-id="37af2-155">Konkrétní role můžete také přiřadit ke konkrétním prostředkům, například účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-155">You can also assign specific roles to specific resources, such as storage accounts.</span></span>

<span data-ttu-id="37af2-156">Zde jsou hlavní body, které potřebujete vědět o použití RBAC pro přístup k operace správy účtu úložiště Azure:</span><span class="sxs-lookup"><span data-stu-id="37af2-156">Here are the main points that you need to know about using RBAC to access the management operations of an Azure Storage account:</span></span>

* <span data-ttu-id="37af2-157">Při přiřazení přístupu v podstatě přiřazení role k účtu, který chcete mít přístup.</span><span class="sxs-lookup"><span data-stu-id="37af2-157">When you assign access, you basically assign a role to the account that you want to have access.</span></span> <span data-ttu-id="37af2-158">Můžete řídit přístup k operacím použít ke správě tohoto účtu úložiště, ale nechcete datové objekty v účtu.</span><span class="sxs-lookup"><span data-stu-id="37af2-158">You can control access to the operations used to manage that storage account, but not to the data objects in the account.</span></span> <span data-ttu-id="37af2-159">Například můžete udělit oprávnění k načtení vlastnosti účtu úložiště (například redundance), ale ne na kontejner nebo dat v rámci kontejneru uvnitř úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="37af2-159">For example, you can grant permission to retrieve the properties of the storage account (such as redundancy), but not to a container or data within a container inside Blob Storage.</span></span>
* <span data-ttu-id="37af2-160">Pro někoho, aby měli přístup datové objekty v účtu úložiště je můžete udělit oprávnění ke čtení klíče účtu úložiště a tento uživatel pak použije tyto klíče pro přístup k objektům BLOB, fronty, tabulky a soubory.</span><span class="sxs-lookup"><span data-stu-id="37af2-160">For someone to have permission to access the data objects in the storage account, you can give them permission to read the storage account keys, and that user can then use those keys to access the blobs, queues, tables, and files.</span></span>
* <span data-ttu-id="37af2-161">Role jde přiřadit k účtu konkrétního uživatele, skupiny uživatelů nebo na konkrétní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="37af2-161">Roles can be assigned to a specific user account, a group of users, or to a specific application.</span></span>
* <span data-ttu-id="37af2-162">Každá role má seznam akcí a není akce.</span><span class="sxs-lookup"><span data-stu-id="37af2-162">Each role has a list of Actions and Not Actions.</span></span> <span data-ttu-id="37af2-163">Například role Přispěvatel virtuálních počítačů má akce "listKeys", který umožňuje klíče účtu úložiště ke čtení.</span><span class="sxs-lookup"><span data-stu-id="37af2-163">For example, the Virtual Machine Contributor role has an Action of "listKeys" that allows the storage account keys to be read.</span></span> <span data-ttu-id="37af2-164">Přispěvatel má "Není akce" jako aktualizace přístup pro uživatele ve službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-164">The Contributor has "Not Actions" such as updating the access for users in the Active Directory.</span></span>
* <span data-ttu-id="37af2-165">Role pro úložiště zahrnují (ale nejsou omezeny) následující:</span><span class="sxs-lookup"><span data-stu-id="37af2-165">Roles for storage include (but are not limited to) the following:</span></span>

  * <span data-ttu-id="37af2-166">Vlastník – můžou spravovat všechno včetně přístupu.</span><span class="sxs-lookup"><span data-stu-id="37af2-166">Owner – They can manage everything, including access.</span></span>
  * <span data-ttu-id="37af2-167">Přispěvatel – mohou provádět nic vlastníka můžete kromě přiřadit přístup.</span><span class="sxs-lookup"><span data-stu-id="37af2-167">Contributor – They can do anything the owner can do except assign access.</span></span> <span data-ttu-id="37af2-168">Někdo s touto rolí můžete zobrazit a obnovit klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-168">Someone with this role can view and regenerate the storage account keys.</span></span> <span data-ttu-id="37af2-169">Klíče účtu úložiště se získat přístup k datové objekty.</span><span class="sxs-lookup"><span data-stu-id="37af2-169">With the storage account keys, they can access the data objects.</span></span>
  * <span data-ttu-id="37af2-170">Čtečka – mohou prohlížet informace o účtu úložiště, s výjimkou tajných klíčů.</span><span class="sxs-lookup"><span data-stu-id="37af2-170">Reader – They can view information about the storage account, except secrets.</span></span> <span data-ttu-id="37af2-171">Například pokud přiřadíte někdo role s čtečky oprávnění pro účet úložiště, mohou prohlížet vlastnosti účtu úložiště, ale nesmí provádět změny vlastností ani zobrazení klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-171">For example, if you assign a role with reader permissions on the storage account to someone, they can view the properties of the storage account, but they can't make any changes to the properties or view the storage account keys.</span></span>
  * <span data-ttu-id="37af2-172">Přispěvatel účet úložiště – můžou spravovat účet úložiště – může číst odběru skupiny prostředků a prostředků a vytvářet a spravovat předplatné nasazení skupiny prostředků.</span><span class="sxs-lookup"><span data-stu-id="37af2-172">Storage Account Contributor – They can manage the storage account – they can read the subscription's resource groups and resources, and create and manage subscription resource group deployments.</span></span> <span data-ttu-id="37af2-173">Můžete také přístup k klíče účtu úložiště, které pak znamená, že bude mít přístup k datové roviny.</span><span class="sxs-lookup"><span data-stu-id="37af2-173">They can also access the storage account keys, which in turn means they can access the data plane.</span></span>
  * <span data-ttu-id="37af2-174">Správce přístupu uživatele – budou spravovat přístup uživatelů k účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-174">User Access Administrator – They can manage user access to the storage account.</span></span> <span data-ttu-id="37af2-175">Například se může udělit čtečky přístup pro konkrétního uživatele.</span><span class="sxs-lookup"><span data-stu-id="37af2-175">For example, they can grant Reader access to a specific user.</span></span>
  * <span data-ttu-id="37af2-176">Virtuální počítač Přispěvatel – můžou spravovat virtuální počítače, ale není na účet úložiště, ke kterému jsou připojené.</span><span class="sxs-lookup"><span data-stu-id="37af2-176">Virtual Machine Contributor – They can manage virtual machines but not the storage account to which they are connected.</span></span> <span data-ttu-id="37af2-177">Tato role může seznam klíče účtu úložiště, což znamená, že uživatele, kterým přiřadíte tuto roli můžete aktualizovat data roviny.</span><span class="sxs-lookup"><span data-stu-id="37af2-177">This role can list the storage account keys, which means that the user to whom you assign this role can update the data plane.</span></span>

    <span data-ttu-id="37af2-178">Aby uživatel k vytvoření virtuálního počítače mají nebude moci vytvořit odpovídající soubor virtuálního pevného disku v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-178">In order for a user to create a virtual machine, they have to be able to create the corresponding VHD file in a storage account.</span></span> <span data-ttu-id="37af2-179">K tomu, musí být schopen načíst klíč účtu úložiště a předejte ji do rozhraní API, vytvoření virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="37af2-179">To do that, they need to be able to retrieve the storage account key and pass it to the API creating the VM.</span></span> <span data-ttu-id="37af2-180">Proto musí mít toto oprávnění, může být uveden klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-180">Therefore, they must have this permission so they can list the storage account keys.</span></span>
* <span data-ttu-id="37af2-181">Schopnost definovat vlastní role je funkce, která umožňuje vytvořit sadu akcí ze seznamu dostupných akcí, které lze provést na prostředky Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-181">The ability to define custom roles is a feature that allows you to compose a set of actions from a list of available actions that can be performed on Azure resources.</span></span>
* <span data-ttu-id="37af2-182">Uživatel musí být nastavené v Azure Active Directory předtím, než můžete jim přiřadit roli.</span><span class="sxs-lookup"><span data-stu-id="37af2-182">The user has to be set up in your Azure Active Directory before you can assign a role to them.</span></span>
* <span data-ttu-id="37af2-183">Můžete vytvořit sestavu kdo udělit nebo odvolat jaký typ přístupu do a z kterého a v jaké oboru pomocí prostředí PowerShell nebo rozhraní příkazového řádku Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-183">You can create a report of who granted/revoked what kind of access to/from whom and on what scope using PowerShell or the Azure CLI.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-184">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-184">Resources</span></span>
* [<span data-ttu-id="37af2-185">Řízení přístupu na základě role v Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="37af2-185">Azure Active Directory Role-based Access Control</span></span>](../../active-directory/role-based-access-control-configure.md)

  <span data-ttu-id="37af2-186">Tento článek popisuje řízení přístupu podle role v Azure Active Directory a vysvětluje, jak funguje.</span><span class="sxs-lookup"><span data-stu-id="37af2-186">This article explains the Azure Active Directory Role-based Access Control and how it works.</span></span>
* [<span data-ttu-id="37af2-187">RBAC: vestavěné role</span><span class="sxs-lookup"><span data-stu-id="37af2-187">RBAC: Built in Roles</span></span>](../../active-directory/role-based-access-built-in-roles.md)

  <span data-ttu-id="37af2-188">Tento článek podrobně všech předdefinovaných rolí, které jsou k dispozici v RBAC.</span><span class="sxs-lookup"><span data-stu-id="37af2-188">This article details all of the built-in roles available in RBAC.</span></span>
* [<span data-ttu-id="37af2-189">Principy nasazení podle modelu Resource Manager a klasického nasazení</span><span class="sxs-lookup"><span data-stu-id="37af2-189">Understanding Resource Manager deployment and classic deployment</span></span>](../../azure-resource-manager/resource-manager-deployment-model.md)

  <span data-ttu-id="37af2-190">Tento článek popisuje nasazení Resource Manager a modely nasazení classic a vysvětluje výhody použití skupin pro správce prostředků a prostředků.</span><span class="sxs-lookup"><span data-stu-id="37af2-190">This article explains the Resource Manager deployment and classic deployment models, and explains the benefits of using the Resource Manager and resource groups.</span></span> <span data-ttu-id="37af2-191">Vysvětluje, jak funguje Azure výpočetní, síťové a poskytovatelé úložiště v rámci modelu Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="37af2-191">It explains how the Azure Compute, Network, and Storage Providers work under the Resource Manager model.</span></span>
* [<span data-ttu-id="37af2-192">Správa řízení přístupu na základě role pomocí REST API</span><span class="sxs-lookup"><span data-stu-id="37af2-192">Managing Role-Based Access Control with the REST API</span></span>](../../active-directory/role-based-access-control-manage-access-rest.md)

  <span data-ttu-id="37af2-193">Tento článek popisuje, jak používat rozhraní REST API ke správě RBAC.</span><span class="sxs-lookup"><span data-stu-id="37af2-193">This article shows how to use the REST API to manage RBAC.</span></span>
* [<span data-ttu-id="37af2-194">Referenci rozhraní API REST poskytovatele prostředků úložiště Azure</span><span class="sxs-lookup"><span data-stu-id="37af2-194">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/mt163683.aspx)

  <span data-ttu-id="37af2-195">Toto je odkaz pro rozhraní API můžete použít ke správě vašeho účtu úložiště prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="37af2-195">This is the reference for the APIs you can use to manage your storage account programmatically.</span></span>
* [<span data-ttu-id="37af2-196">Příručka pro vývojáře k ověření s rozhraním API pro Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="37af2-196">Developer's guide to auth with Azure Resource Manager API</span></span>](http://www.dushyantgill.com/blog/2015/05/23/developers-guide-to-auth-with-azure-resource-manager-api/)

  <span data-ttu-id="37af2-197">Tento článek ukazuje, jak chcete ověřit pomocí rozhraní API Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="37af2-197">This article shows how to authenticate using the Resource Manager APIs.</span></span>
* [<span data-ttu-id="37af2-198">Řízení přístupu na základě role pro Microsoft Azure z Ignite</span><span class="sxs-lookup"><span data-stu-id="37af2-198">Role-Based Access Control for Microsoft Azure from Ignite</span></span>](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

  <span data-ttu-id="37af2-199">Odkaz na video na Channel 9 z konference MS Ignite 2015.</span><span class="sxs-lookup"><span data-stu-id="37af2-199">This is a link to a video on Channel 9 from the 2015 MS Ignite conference.</span></span> <span data-ttu-id="37af2-200">Na tomto sezení se hovoří o možnostech správy přístupu a generování sestav v Azure a probírají se osvědčené postupy pro zabezpečení přístupu k předplatným Azure pomocí Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-200">In this session, they talk about access management and reporting capabilities in Azure, and explore best practices around securing access to Azure subscriptions using Azure Active Directory.</span></span>

### <a name="managing-your-storage-account-keys"></a><span data-ttu-id="37af2-201">Správa klíčů k účtu úložiště</span><span class="sxs-lookup"><span data-stu-id="37af2-201">Managing Your Storage Account Keys</span></span>
<span data-ttu-id="37af2-202">Klíče účtu úložiště jsou 512 bitů řetězce vytvořené Azure, který spolu s názvem účtu úložiště může být použita pro přístup k objektům data uložená v účtu úložiště, například objekty BLOB, entit v rámci tabulky, fronty zpráv a soubory ve sdílené složce Azure File.</span><span class="sxs-lookup"><span data-stu-id="37af2-202">Storage account keys are 512-bit strings created by Azure that, along with the storage account name, can be used to access the data objects stored in the storage account, e.g. blobs, entities within a table, queue messages, and files on an Azure File share.</span></span> <span data-ttu-id="37af2-203">Řízení přístupu k úložiště účet klíče řídí přístup k rovině data pro tento účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-203">Controlling access to the storage account keys controls access to the data plane for that storage account.</span></span>

<span data-ttu-id="37af2-204">Každý účet úložiště obsahuje dva klíče, označuje jako "Klíč 1" a "Klíčem 2" v [portál Azure](http://portal.azure.com/) a rutiny prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="37af2-204">Each storage account has two keys referred to as "Key 1" and "Key 2" in the [Azure portal](http://portal.azure.com/) and in the PowerShell cmdlets.</span></span> <span data-ttu-id="37af2-205">To je možné znovu generovat ručně pomocí několika metod, včetně, mimo jiné pomocí [portál Azure](https://portal.azure.com/), prostředí PowerShell, rozhraní příkazového řádku Azure nebo programově pomocí klientské knihovny .NET úložiště nebo služby Azure Storage ROZHRANÍ REST API.</span><span class="sxs-lookup"><span data-stu-id="37af2-205">These can be regenerated manually using one of several methods, including, but not limited to using the [Azure portal](https://portal.azure.com/), PowerShell, the Azure CLI, or programmatically using the .NET Storage Client Library or the Azure Storage Services REST API.</span></span>

<span data-ttu-id="37af2-206">Existují z nejrůznějších důvodů znovu vygenerovat klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-206">There are any number of reasons to regenerate your storage account keys.</span></span>

* <span data-ttu-id="37af2-207">V pravidelných intervalech z bezpečnostních důvodů může vygenerovat je.</span><span class="sxs-lookup"><span data-stu-id="37af2-207">You might regenerate them on a regular basis for security reasons.</span></span>
* <span data-ttu-id="37af2-208">Klíče účtu úložiště by obnovit, pokud někdo spravovat tak, aby proniknout do aplikace a načíst klíč pevně zakódované nebo uložený v konfiguračním souboru, bude mít plný přístup k účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-208">You would regenerate your storage account keys if someone managed to hack into an application and retrieve the key that was hardcoded or saved in a configuration file, giving them full access to your storage account.</span></span>
* <span data-ttu-id="37af2-209">Jiné případ opětovné generování klíče je Pokud váš tým používá aplikaci Průzkumník úložišť, která uchovává klíč účtu úložiště a některého z členů týmu opustí.</span><span class="sxs-lookup"><span data-stu-id="37af2-209">Another case for key regeneration is if your team is using a Storage Explorer application that retains the storage account key, and one of the team members leaves.</span></span> <span data-ttu-id="37af2-210">Aplikace bude nadále fungovat, bude mít přístup k účtu úložiště po jsou pryč.</span><span class="sxs-lookup"><span data-stu-id="37af2-210">The application would continue to work, giving them access to your storage account after they're gone.</span></span> <span data-ttu-id="37af2-211">Toto je ve skutečnosti, které se vytvářely úrovni účtu sdílené přístupové podpisy hlavním důvodem – můžete úrovni účtu SAS místo ukládání přístupové klíče v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="37af2-211">This is actually the primary reason they created account-level Shared Access Signatures – you can use an account-level SAS instead of storing the access keys in a configuration file.</span></span>

#### <a name="key-regeneration-plan"></a><span data-ttu-id="37af2-212">Plán obnovení klíče</span><span class="sxs-lookup"><span data-stu-id="37af2-212">Key regeneration plan</span></span>
<span data-ttu-id="37af2-213">Nechcete právě znovu vygenerovat klíč, který používáte bez některé plánování.</span><span class="sxs-lookup"><span data-stu-id="37af2-213">You don't want to just regenerate the key you are using without some planning.</span></span> <span data-ttu-id="37af2-214">Pokud tak učiníte, může oříznutí veškerý přístup k tomuto účtu úložiště, což může způsobit přerušení hlavní.</span><span class="sxs-lookup"><span data-stu-id="37af2-214">If you do that, you could cut off all access to that storage account, which can cause major disruption.</span></span> <span data-ttu-id="37af2-215">Z tohoto důvodu existují dva klíče.</span><span class="sxs-lookup"><span data-stu-id="37af2-215">This is why there are two keys.</span></span> <span data-ttu-id="37af2-216">Vždy znovu generujte jeden klíč najednou.</span><span class="sxs-lookup"><span data-stu-id="37af2-216">You should regenerate one key at a time.</span></span>

<span data-ttu-id="37af2-217">Předtím, než můžete znovu vygenerovat klíče, ujistěte se, že máte seznam všechny aplikace, které jsou závislé na účet úložiště, a také všech služeb, které používáte v Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-217">Before you regenerate your keys, be sure you have a list of all of your applications that are dependent on the storage account, as well as any other services you are using in Azure.</span></span> <span data-ttu-id="37af2-218">Například pokud používáte službu Azure Media Services, které jsou závislé na vašem účtu úložiště, musíte znovu synchronizovat přístupové klíče s touto službou po opětovném vygenerování klíče.</span><span class="sxs-lookup"><span data-stu-id="37af2-218">For example, if you are using Azure Media Services that are dependent on your storage account, you must re-sync the access keys with your media service after you regenerate the key.</span></span> <span data-ttu-id="37af2-219">Pokud používáte jakékoli aplikace, jako je například Průzkumníka úložiště, musíte poskytnout nových klíčů pro tyto aplikace také.</span><span class="sxs-lookup"><span data-stu-id="37af2-219">If you are using any applications such as a storage explorer, you will need to provide the new keys to those applications as well.</span></span> <span data-ttu-id="37af2-220">Všimněte si, že pokud máte virtuální počítače, jejichž soubory VHD jsou uloženy v účtu úložiště, se nebudou ovlivněny opakované generování klíčů účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-220">Note that if you have VMs whose VHD files are stored in the storage account, they will not be affected by regenerating the storage account keys.</span></span>

<span data-ttu-id="37af2-221">Můžete znovu vygenerovat klíče na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-221">You can regenerate your keys in the Azure portal.</span></span> <span data-ttu-id="37af2-222">Jakmile klíče se generují se může trvat až 10 minut k synchronizaci mezi služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-222">Once keys are regenerated they can take up to 10 minutes to be synchronized across Storage Services.</span></span>

<span data-ttu-id="37af2-223">Až budete připraveni, tady je obecný postup s podrobnostmi o tom, jak byste měli změnit váš klíč.</span><span class="sxs-lookup"><span data-stu-id="37af2-223">When you're ready, here's the general process detailing how you should change your key.</span></span> <span data-ttu-id="37af2-224">V takovém případě se předpokládá je, že používáte klíč 1 a chcete změnit všechno místo toho použít klíč 2.</span><span class="sxs-lookup"><span data-stu-id="37af2-224">In this case, the assumption is that you are currently using Key 1 and you are going to change everything to use Key 2 instead.</span></span>

1. <span data-ttu-id="37af2-225">Znovu vygenerujte klíč 2: Zajistěte, aby byl zabezpečený.</span><span class="sxs-lookup"><span data-stu-id="37af2-225">Regenerate Key 2 to ensure that it is secure.</span></span> <span data-ttu-id="37af2-226">Můžete provést na portálu Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-226">You can do this in the Azure portal.</span></span>
2. <span data-ttu-id="37af2-227">Ve všech aplikacích, které se uloží klíč úložiště změňte klíč úložiště použít novou hodnotu 2 klíč.</span><span class="sxs-lookup"><span data-stu-id="37af2-227">In all of the applications where the storage key is stored, change the storage key to use Key 2's new value.</span></span> <span data-ttu-id="37af2-228">Testování a publikování aplikace.</span><span class="sxs-lookup"><span data-stu-id="37af2-228">Test and publish the application.</span></span>
3. <span data-ttu-id="37af2-229">Po všech aplikací a služeb jsou a úspěšně spuštěn, znovu vygenerovat klíč 1.</span><span class="sxs-lookup"><span data-stu-id="37af2-229">After all of the applications and services are up and running successfully, regenerate Key 1.</span></span> <span data-ttu-id="37af2-230">To zajišťuje, že kdokoliv kterému jste nedali výslovně nový klíč bude už nebude mít přístup k účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-230">This ensures that anybody to whom you have not expressly given the new key will no longer have access to the storage account.</span></span>

<span data-ttu-id="37af2-231">Pokud aktuálně používáte klíč 2, můžete použít stejný postup, ale reverse názvy klíčů.</span><span class="sxs-lookup"><span data-stu-id="37af2-231">If you are currently using Key 2, you can use the same process, but reverse the key names.</span></span>

<span data-ttu-id="37af2-232">Můžete migrovat přes několik dní, změna každou aplikaci, aby pomocí nového klíče a jeho publikování.</span><span class="sxs-lookup"><span data-stu-id="37af2-232">You can migrate over a couple of days, changing each application to use the new key and publishing it.</span></span> <span data-ttu-id="37af2-233">Poté, co se dokončí všechny z nich, by měl poté přejděte zpět a obnovit původní klíč, přestane fungovat.</span><span class="sxs-lookup"><span data-stu-id="37af2-233">After all of them are done, you should then go back and regenerate the old key so it no longer works.</span></span>

<span data-ttu-id="37af2-234">Další možností je se umístí klíč účtu úložiště [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) jako tajný klíč a mít aplikace načíst klíč z ní.</span><span class="sxs-lookup"><span data-stu-id="37af2-234">Another option is to put the storage account key in an [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) as a secret and have your applications retrieve the key from there.</span></span> <span data-ttu-id="37af2-235">Pak když znovu vygenerovat klíč a aktualizovat Azure Key Vault, aplikace nebude muset znovu nasadit, protože jejich vyzvedne, až bude nový klíč z Azure Key Vault automaticky.</span><span class="sxs-lookup"><span data-stu-id="37af2-235">Then when you regenerate the key and update the Azure Key Vault, the applications will not need to be redeployed because they will pick up the new key from the Azure Key Vault automatically.</span></span> <span data-ttu-id="37af2-236">Všimněte si, zda máte aplikaci načíst klíč pokaždé, když to potřebujete, nebo můžete mezipaměti v paměti a pokud se nezdaří, při použití, načíst klíč znovu z Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="37af2-236">Note that you can have the application read the key each time you need it, or you can cache it in memory and if it fails when using it, retrieve the key again from the Azure Key Vault.</span></span>

<span data-ttu-id="37af2-237">Použití Azure Key Vault, přidá se také další úroveň zabezpečení pro vaše klíče úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-237">Using Azure Key Vault also adds another level of security for your storage keys.</span></span> <span data-ttu-id="37af2-238">Pokud použijete tuto metodu, budete mít klíče pevně zakódované úložiště nikdy v konfiguračním souboru, který odebere tento způsob někdo získání přístupu ke klíčům bez konkrétní oprávnění.</span><span class="sxs-lookup"><span data-stu-id="37af2-238">If you use this method, you will never have the storage key hardcoded in a configuration file, which removes that avenue of somebody getting access to the keys without specific permission.</span></span>

<span data-ttu-id="37af2-239">Další výhodou použití Azure Key Vault je že také můžete řídit přístup k vaše klíče pomocí služby Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-239">Another advantage of using Azure Key Vault is you can also control access to your keys using Azure Active Directory.</span></span> <span data-ttu-id="37af2-240">To znamená, že můžete udělit přístup k několik aplikací, které potřebují k načtení klíčů z Azure Key Vault a znát jiné aplikace nebudou mít přístup k klíče bez toho, abyste je konkrétně oprávnění.</span><span class="sxs-lookup"><span data-stu-id="37af2-240">This means you can grant access to the handful of applications that need to retrieve the keys from Azure Key Vault, and know that other applications will not be able to access the keys without granting them permission specifically.</span></span>

<span data-ttu-id="37af2-241">Poznámka: doporučujeme používat pouze jeden z klíčů ve všech aplikací ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="37af2-241">Note: it is recommended to use only one of the keys in all of your applications at the same time.</span></span> <span data-ttu-id="37af2-242">Pokud používáte klíč 1 některé místech a 2 klíč k ostatním, nebudete moci otočit klíče bez některé aplikace ztráty přístupu.</span><span class="sxs-lookup"><span data-stu-id="37af2-242">If you use Key 1 in some places and Key 2 in others, you will not be able to rotate your keys without some application losing access.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-243">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-243">Resources</span></span>
* [<span data-ttu-id="37af2-244">Informace o účtech úložiště Azure</span><span class="sxs-lookup"><span data-stu-id="37af2-244">About Azure Storage Accounts</span></span>](storage-create-storage-account.md#regenerate-storage-access-keys)

  <span data-ttu-id="37af2-245">Tento článek nabízí přehled účty úložiště a popisuje zobrazení, kopírování a opětovné generování přístupových klíčů k úložišti.</span><span class="sxs-lookup"><span data-stu-id="37af2-245">This article gives an overview of storage accounts and discusses viewing, copying, and regenerating storage access keys.</span></span>
* [<span data-ttu-id="37af2-246">Referenci rozhraní API REST poskytovatele prostředků úložiště Azure</span><span class="sxs-lookup"><span data-stu-id="37af2-246">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/mt163683.aspx)

  <span data-ttu-id="37af2-247">Tento článek obsahuje odkazy na konkrétní články o získávání klíčů účtu úložiště a opakované generování klíčů účtu úložiště pro účet Azure pomocí rozhraní REST API.</span><span class="sxs-lookup"><span data-stu-id="37af2-247">This article contains links to specific articles about retrieving the storage account keys and regenerating the storage account keys for an Azure Account using the REST API.</span></span> <span data-ttu-id="37af2-248">Poznámka: Toto je pro účty úložiště Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="37af2-248">Note: This is for  Resource Manager storage accounts.</span></span>
* [<span data-ttu-id="37af2-249">Operace na účty úložiště</span><span class="sxs-lookup"><span data-stu-id="37af2-249">Operations on storage accounts</span></span>](https://msdn.microsoft.com/library/ee460790.aspx)

  <span data-ttu-id="37af2-250">Tento článek v referenci rozhraní API REST úložiště Service Manager obsahuje odkazy na konkrétní články týkající se načítání a opakované generování klíčů účtu úložiště, pomocí rozhraní REST API.</span><span class="sxs-lookup"><span data-stu-id="37af2-250">This article in the Storage Service Manager REST API Reference contains links to specific articles on retrieving and regenerating the storage account keys using the REST API.</span></span> <span data-ttu-id="37af2-251">Poznámka: Toto je pro účty úložiště Classic.</span><span class="sxs-lookup"><span data-stu-id="37af2-251">Note: This is for the Classic storage accounts.</span></span>
* [<span data-ttu-id="37af2-252">Můžete dát sbohem všem Správa klíčů – řízení přístupu k datům Azure Storage pomocí služby Azure AD</span><span class="sxs-lookup"><span data-stu-id="37af2-252">Say goodbye to key management – manage access to Azure Storage data using Azure AD</span></span>](http://www.dushyantgill.com/blog/2015/04/26/say-goodbye-to-key-management-manage-access-to-azure-storage-data-using-azure-ad/)

  <span data-ttu-id="37af2-253">Tento článek ukazuje, jak pomocí služby Active Directory k řízení přístupu k vaší službě Azure Storage klíče v Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="37af2-253">This article shows how to use Active Directory to control access to your Azure Storage keys in Azure Key Vault.</span></span> <span data-ttu-id="37af2-254">Také ukazuje, jak používat úlohu Azure Automation znovu vygenerovat klíče hodinu.</span><span class="sxs-lookup"><span data-stu-id="37af2-254">It also shows how to use an Azure Automation job to regenerate the keys on an hourly basis.</span></span>

## <a name="data-plane-security"></a><span data-ttu-id="37af2-255">Zabezpečení dat roviny</span><span class="sxs-lookup"><span data-stu-id="37af2-255">Data Plane Security</span></span>
<span data-ttu-id="37af2-256">Zabezpečení dat roviny odkazuje na metodu sloužící k zabezpečení datové objekty uložené ve službě Azure Storage – objekty BLOB, fronty, tabulky a soubory.</span><span class="sxs-lookup"><span data-stu-id="37af2-256">Data Plane Security refers to the methods used to secure the data objects stored in Azure Storage – the blobs, queues, tables, and files.</span></span> <span data-ttu-id="37af2-257">Jsme viděli metody k šifrování dat a zabezpečení během přenosu dat, ale jak tedy můžete o povolení přístupu k objektům?</span><span class="sxs-lookup"><span data-stu-id="37af2-257">We've seen methods to encrypt the data and security during transit of the data, but how do you go about allowing access to the objects?</span></span>

<span data-ttu-id="37af2-258">V podstatě existují dvě metody pro řízení přístupu k objektům data sami.</span><span class="sxs-lookup"><span data-stu-id="37af2-258">There are basically two methods for controlling access to the data objects themselves.</span></span> <span data-ttu-id="37af2-259">První je řízení přístupu ke klíči účtu úložiště a druhá používá sdílené přístupové podpisy k udělení přístupu k konkrétní datové objekty pro konkrétní množství času.</span><span class="sxs-lookup"><span data-stu-id="37af2-259">The first is by controlling access to the storage account keys, and the second is using Shared Access Signatures to grant access to specific data objects for a specific amount of time.</span></span>

<span data-ttu-id="37af2-260">Všimněte si, jedinou výjimkou je, že můžete povolit veřejný přístup do objektů BLOB nastavením úroveň přístupu pro kontejner, který obsahuje objekty BLOB odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="37af2-260">One exception to note is that you can allow public access to your blobs by setting the access level for the container that holds the blobs accordingly.</span></span> <span data-ttu-id="37af2-261">Pokud jste nastavili přístup pro kontejner objektů Blob nebo kontejner, vám umožní veřejný přístup pro čtení pro objekty BLOB v tomto kontejneru.</span><span class="sxs-lookup"><span data-stu-id="37af2-261">If you set access for a container to Blob or Container, it will allow public read access for the blobs in that container.</span></span> <span data-ttu-id="37af2-262">To znamená, že každý, kdo má URL ukazující na objekt blob v tomto kontejneru ho otevřete v prohlížeči bez pomocí sdíleného přístupového podpisu nebo s klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-262">This means anyone with a URL pointing to a blob in that container can open it in a browser without using a Shared Access Signature or having the storage account keys.</span></span>

### <a name="storage-account-keys"></a><span data-ttu-id="37af2-263">Klíče účtu úložiště</span><span class="sxs-lookup"><span data-stu-id="37af2-263">Storage Account Keys</span></span>
<span data-ttu-id="37af2-264">Klíče účtu úložiště jsou 512 bitů řetězce vytvořené Azure, který společně s názvem účtu úložiště můžete použít pro přístup k objektům data uložená v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-264">Storage account keys are 512-bit strings created by Azure that, along with the storage account name, can be used to access the data objects stored in the storage account.</span></span>

<span data-ttu-id="37af2-265">Můžete například čtení objektů BLOB, zápis do front, vytvářet tabulky a upravit soubory.</span><span class="sxs-lookup"><span data-stu-id="37af2-265">For example, you can read blobs, write to queues, create tables, and modify files.</span></span> <span data-ttu-id="37af2-266">Mnoho z těchto akcí lze provést prostřednictvím portálu Azure nebo jedním z mnoha aplikací Průzkumníka úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-266">Many of these actions can be performed through the Azure portal, or using one of many Storage Explorer applications.</span></span> <span data-ttu-id="37af2-267">Můžete taky napsat kód používat rozhraní REST API nebo jeden z knihovny klienta úložiště k provádění těchto operací.</span><span class="sxs-lookup"><span data-stu-id="37af2-267">You can also write code to use the REST API or one of the Storage Client Libraries to perform these operations.</span></span>

<span data-ttu-id="37af2-268">Jak je popsáno v části na [zabezpečení roviny Management](#management-plane-security), přístup k úložiště klíčů pro účet úložiště Classic lze udělit tím, že úplný přístup k předplatnému Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-268">As discussed in the section on the [Management Plane Security](#management-plane-security), access to the storage keys for a Classic storage account can be granted by giving full access to the Azure subscription.</span></span> <span data-ttu-id="37af2-269">Přístup k úložišti klíče pro účet úložiště pomocí modelu Azure Resource Manager lze řídit prostřednictvím řízení přístupu na základě Role (RBAC).</span><span class="sxs-lookup"><span data-stu-id="37af2-269">Access to the storage keys for a storage account using the Azure Resource Manager model can be controlled through Role-Based Access Control (RBAC).</span></span>

### <a name="how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a><span data-ttu-id="37af2-270">Postup delegovat přístup k objektům v účtu pomocí sdílené přístupové podpisy a uložené zásad přístupu</span><span class="sxs-lookup"><span data-stu-id="37af2-270">How to delegate access to objects in your account using Shared Access Signatures and Stored Access Policies</span></span>
<span data-ttu-id="37af2-271">Sdíleného přístupového podpisu je řetězec, který obsahuje token zabezpečení, které lze připojit k identifikátoru URI, který umožňuje delegovat přístup k objektům úložiště a zadejte omezení například oprávnění a datum a čas rozsah přístupu.</span><span class="sxs-lookup"><span data-stu-id="37af2-271">A Shared Access Signature is a string containing a security token that can be attached to a URI that allows you to delegate access to storage objects and specify constraints such as the permissions and the date/time range of access.</span></span>

<span data-ttu-id="37af2-272">Můžete udělit přístup k objektům BLOB, kontejnery, fronty zpráv, soubory a tabulky.</span><span class="sxs-lookup"><span data-stu-id="37af2-272">You can grant access to blobs, containers, queue messages, files, and tables.</span></span> <span data-ttu-id="37af2-273">S tabulkami ve skutečnosti můžete udělit oprávnění k přístupu k rozsahu entit v tabulce zadáním oddílu a řádku klíče rozsahy, ke kterým má uživatel přístup.</span><span class="sxs-lookup"><span data-stu-id="37af2-273">With tables, you can actually grant permission to access a range of entities in the table by specifying the partition and row key ranges to which you want the user to have access.</span></span> <span data-ttu-id="37af2-274">Například pokud máte data uložená se klíč oddílu zeměpisné stavu, vám může poskytnout někdo přístup k pouze data pro kalifornské.</span><span class="sxs-lookup"><span data-stu-id="37af2-274">For example, if you have data stored with a partition key of geographical state, you could give someone access to just the data for California.</span></span>

<span data-ttu-id="37af2-275">Například můžete poskytnout webovou aplikaci SAS token, který umožní, aby zápisu položek do fronty a poskytnout pracovní role aplikace token SAS, pokud chcete získat zprávy z fronty a jejich zpracování.</span><span class="sxs-lookup"><span data-stu-id="37af2-275">In another example, you might give a web application a SAS token that enables it to write entries to a queue, and give a worker role application a SAS token to get messages from the queue and process them.</span></span> <span data-ttu-id="37af2-276">Nebo jedno zákazníka může poskytnout token SAS, můžete použít k nahrání obrázky do kontejneru v úložiště objektů Blob a poskytnout webové aplikace oprávnění ke čtení těchto obrázků.</span><span class="sxs-lookup"><span data-stu-id="37af2-276">Or you could give one customer a SAS token they can use to upload pictures to a container in Blob Storage, and give a web application permission to read those pictures.</span></span> <span data-ttu-id="37af2-277">V obou případech je oddělené oblasti zájmu – každá aplikace je možné přidělit jen přístup, který vyžadují za účelem provádění svých úloh.</span><span class="sxs-lookup"><span data-stu-id="37af2-277">In both cases, there is a separation of concerns – each application can be given just the access that they require in order to perform their task.</span></span> <span data-ttu-id="37af2-278">To je možné prostřednictvím podpisy sdíleného přístupu.</span><span class="sxs-lookup"><span data-stu-id="37af2-278">This is possible through the use of Shared Access Signatures.</span></span>

#### <a name="why-you-want-to-use-shared-access-signatures"></a><span data-ttu-id="37af2-279">Proč chcete používat sdílené přístupové podpisy</span><span class="sxs-lookup"><span data-stu-id="37af2-279">Why you want to use Shared Access Signatures</span></span>
<span data-ttu-id="37af2-280">Proč by chcete použít SAS místo právě poskytnutí klíč účtu úložiště, což je mnohem jednodušší?</span><span class="sxs-lookup"><span data-stu-id="37af2-280">Why would you want to use an SAS instead of just giving out your storage account key, which is so much easier?</span></span> <span data-ttu-id="37af2-281">Poskytnutí klíč účtu úložiště je třeba sdílení klíčů království vašeho úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-281">Giving out your storage account key is like sharing the keys of your storage kingdom.</span></span> <span data-ttu-id="37af2-282">Zajišťuje úplný přístup.</span><span class="sxs-lookup"><span data-stu-id="37af2-282">It grants complete access.</span></span> <span data-ttu-id="37af2-283">Někdo může pomocí klíče a odeslat jejich knihovna Hudba celý do svého účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-283">Someone could use your keys and upload their entire music library to your storage account.</span></span> <span data-ttu-id="37af2-284">Můžou taky nahradit nakažené viry verzemi souborů, nebo ukrást vaše data.</span><span class="sxs-lookup"><span data-stu-id="37af2-284">They could also replace your files with virus-infected versions, or steal your data.</span></span> <span data-ttu-id="37af2-285">Udělíte neomezený přístup, k účtu úložiště je něco, co by neměly být lehce brány.</span><span class="sxs-lookup"><span data-stu-id="37af2-285">Giving away unlimited access to your storage account is something that should not be taken lightly.</span></span>

<span data-ttu-id="37af2-286">S podpisy sdíleného přístupu můžete udělit pouze oprávnění požadovaná pro omezené množství času klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-286">With Shared Access Signatures, you can give a client just the permissions required for a limited amount of time.</span></span> <span data-ttu-id="37af2-287">Například pokud někdo je nahrát objekt blob do účtu, můžete jim udělíte oprávnění k zápisu pro právě dostatek času k načtení objektu blob (v závislosti na velikosti objektu blob, samozřejmě).</span><span class="sxs-lookup"><span data-stu-id="37af2-287">For example, if someone is uploading a blob to your account, you can grant them write access for just enough time to upload the blob (depending on the size of the blob, of course).</span></span> <span data-ttu-id="37af2-288">A pokud změníte své rozhodnutí, můžete tento přístup odvolat.</span><span class="sxs-lookup"><span data-stu-id="37af2-288">And if you change your mind, you can revoke that access.</span></span>

<span data-ttu-id="37af2-289">Kromě toho můžete určit, že požadavky pomocí SAS jsou omezeny na IP adresu nebo rozsah IP adres externí do Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-289">Additionally, you can specify that requests made using a SAS are restricted to a certain IP address or IP address range external to Azure.</span></span> <span data-ttu-id="37af2-290">Můžete taky vyžadovat, že jsou vytvářeny požadavky pomocí konkrétní protokolu (HTTPS nebo HTTP nebo HTTPS).</span><span class="sxs-lookup"><span data-stu-id="37af2-290">You can also require that requests are made using a specific protocol (HTTPS or HTTP/HTTPS).</span></span> <span data-ttu-id="37af2-291">To znamená, pokud chcete povolit komunikaci přes protokol HTTPS, požadovaného protokolu můžete nastavit na HTTPS pouze a přenos HTTP se zablokuje.</span><span class="sxs-lookup"><span data-stu-id="37af2-291">This means if you only want to allow HTTPS traffic, you can set the required protocol to HTTPS only, and HTTP traffic will be blocked.</span></span>

#### <a name="definition-of-a-shared-access-signature"></a><span data-ttu-id="37af2-292">Definice sdílený přístupový podpis</span><span class="sxs-lookup"><span data-stu-id="37af2-292">Definition of a Shared Access Signature</span></span>
<span data-ttu-id="37af2-293">Sdíleného přístupového podpisu je sada parametrů dotazu, připojí k adrese URL odkazující na prostředek</span><span class="sxs-lookup"><span data-stu-id="37af2-293">A Shared Access Signature is a set of query parameters appended to the URL pointing at the resource</span></span>

<span data-ttu-id="37af2-294">která obsahuje informace o přístup k povolený a dobu, pro který je povolen přístup.</span><span class="sxs-lookup"><span data-stu-id="37af2-294">that provides information about the access allowed and the length of time for which the access is permitted.</span></span> <span data-ttu-id="37af2-295">Tady je příklad; Tento identifikátor URI poskytuje přístup pro čtení do objektu blob pro pět minut.</span><span class="sxs-lookup"><span data-stu-id="37af2-295">Here is an example; this URI provides read access to a blob for five minutes.</span></span> <span data-ttu-id="37af2-296">Všimněte si, že SAS parametrů dotazu musí být kódovaná v řetězci URL, například 3A % pro dvojtečkou (:) nebo % 20 prostoru.</span><span class="sxs-lookup"><span data-stu-id="37af2-296">Note that SAS query parameters must be URL Encoded, such as %3A for colon (:) or %20 for a space.</span></span>

```
http://mystorage.blob.core.windows.net/mycontainer/myblob.txt (URL to the blob)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for the authentication of the SAS)
```

#### <a name="how-the-shared-access-signature-is-authenticated-by-the-azure-storage-service"></a><span data-ttu-id="37af2-297">Jak službu Azure Storage ověřit podpis sdíleného přístupu</span><span class="sxs-lookup"><span data-stu-id="37af2-297">How the Shared Access Signature is authenticated by the Azure Storage Service</span></span>
<span data-ttu-id="37af2-298">Když službu úložiště obdrží žádost, používá parametry vstupní dotaz a vytvoří podpis stejným způsobem jako volací program.</span><span class="sxs-lookup"><span data-stu-id="37af2-298">When the storage service receives the request, it takes the input query parameters and creates a signature using the same method as the calling program.</span></span> <span data-ttu-id="37af2-299">Pak porovná dvě podpisů.</span><span class="sxs-lookup"><span data-stu-id="37af2-299">It then compares the two signatures.</span></span> <span data-ttu-id="37af2-300">Pokud souhlasí, službu úložiště můžete zkontrolovat verze služby úložiště Ujistěte se, že je platný, ověřte, zda jsou v rámci zadané okno aktuální datum a čas, ujistěte se, že požadovaný přístup odpovídá požadavek atd.</span><span class="sxs-lookup"><span data-stu-id="37af2-300">If they agree, then the storage service can check the storage service version to make sure it's valid, verify that the current date and time are within the specified window, make sure the access requested corresponds to the request made, etc.</span></span>

<span data-ttu-id="37af2-301">Například s naše uvedenou adresu URL, pokud adresa URL byla odkazující na soubor namísto objektu blob, tento požadavek by nezdaří, protože se určuje, že sdíleného přístupového podpisu je pro objekt blob.</span><span class="sxs-lookup"><span data-stu-id="37af2-301">For example, with our URL above, if the URL was pointing to a file instead of a blob, this request would fail because it specifies that the Shared Access Signature is for a blob.</span></span> <span data-ttu-id="37af2-302">Pokud byl příkaz REST volané aktualizovat objekt blob, by se nezdařila, protože podpis sdíleného přístupu určuje, že jsou povoleny pouze přístup pro čtení.</span><span class="sxs-lookup"><span data-stu-id="37af2-302">If the REST command being called was to update a blob, it would fail because the Shared Access Signature specifies that only read access is permitted.</span></span>

#### <a name="types-of-shared-access-signatures"></a><span data-ttu-id="37af2-303">Druhy sdílených přístupových podpisů</span><span class="sxs-lookup"><span data-stu-id="37af2-303">Types of Shared Access Signatures</span></span>
* <span data-ttu-id="37af2-304">SAS úrovni služby slouží k přístupu konkrétním prostředkům v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-304">A service-level SAS can be used to access specific resources in a storage account.</span></span> <span data-ttu-id="37af2-305">Příkladem takových načítají seznam objektů BLOB v kontejneru, stahování objekt blob, aktualizuje entitu v tabulce, přidání zprávy do fronty nebo nahrání souboru do sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="37af2-305">Some examples of this are retrieving a list of blobs in a container, downloading a blob, updating an entity in a table, adding messages to a queue or uploading a file to a file share.</span></span>
* <span data-ttu-id="37af2-306">Úrovni účtu SAS slouží pro všechno, co SAS úrovně služby lze použít pro přístup.</span><span class="sxs-lookup"><span data-stu-id="37af2-306">An account-level SAS can be used to access anything that a service-level SAS can be used for.</span></span> <span data-ttu-id="37af2-307">Kromě toho se může poskytnout možnosti na prostředky, které se nedá vymezit přes SAS úrovně služeb, jako je například schopnost vytvářet kontejnery, tabulky, fronty a sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="37af2-307">Additionally, it can give options to resources that are not permitted with a service-level SAS, such as the ability to create containers, tables, queues, and file shares.</span></span> <span data-ttu-id="37af2-308">Přístup k více službám můžete také zadat současně.</span><span class="sxs-lookup"><span data-stu-id="37af2-308">You can also specify access to multiple services at once.</span></span> <span data-ttu-id="37af2-309">Například někdo může poskytnout přístup k objektům BLOB a soubory ve vašem účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-309">For example, you might give someone access to both blobs and files in your storage account.</span></span>

#### <a name="creating-an-sas-uri"></a><span data-ttu-id="37af2-310">Vytváření identifikátor URI SAS</span><span class="sxs-lookup"><span data-stu-id="37af2-310">Creating an SAS URI</span></span>
1. <span data-ttu-id="37af2-311">Identifikátor URI ad hoc můžete vytvořit na vyžádání, definovat všechny parametry dotazu pokaždé, když.</span><span class="sxs-lookup"><span data-stu-id="37af2-311">You can create an ad hoc URI on demand, defining all of the query parameters each time.</span></span>

   <span data-ttu-id="37af2-312">Toto je skutečně flexibilní, ale pokud máte logickou sadu parametrů, které jsou podobné pokaždé, když, pomocí zásad přístupu uložené je lepší představu.</span><span class="sxs-lookup"><span data-stu-id="37af2-312">This is really flexible, but if you have a logical set of parameters that are similar each time, using a Stored Access Policy is a better idea.</span></span>
2. <span data-ttu-id="37af2-313">Můžete vytvořit zásady přístupu uložené pro celý kontejneru, sdílené složky, tabulku nebo frontu.</span><span class="sxs-lookup"><span data-stu-id="37af2-313">You can create a Stored Access Policy for an entire container, file share, table, or queue.</span></span> <span data-ttu-id="37af2-314">Pak je můžete použít jako základ pro identifikátory URI SAS, které vytvoříte.</span><span class="sxs-lookup"><span data-stu-id="37af2-314">Then you can use this as the basis for the SAS URIs you create.</span></span> <span data-ttu-id="37af2-315">Oprávnění na základě zásad přístupu uložené dají snadno odvolat.</span><span class="sxs-lookup"><span data-stu-id="37af2-315">Permissions based on Stored Access Policies can be easily revoked.</span></span> <span data-ttu-id="37af2-316">Může mít až 5 zásad definovaných na každý kontejner, fronty, tabulka nebo sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="37af2-316">You can have up to 5 policies defined on each container, queue, table, or file share.</span></span>

   <span data-ttu-id="37af2-317">Pokud byly budete mít mnoho uživatelů čtení objektů BLOB v konkrétním kontejneru, můžete například vytvořit uložené zásady přístupu, která říká "udělit přístup pro čtení" a další nastavení, které budou stejné pokaždé, když.</span><span class="sxs-lookup"><span data-stu-id="37af2-317">For example, if you were going to have many people read the blobs in a specific container, you could create a Stored Access Policy that says "give read access" and any other settings that will be the same each time.</span></span> <span data-ttu-id="37af2-318">Potom můžete vytvořit identifikátor URI SAS pomocí nastavení zásad přístupu uložené a zadání datum a čas vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="37af2-318">Then you can create an SAS URI using the settings of the Stored Access Policy and specifying the expiration date/time.</span></span> <span data-ttu-id="37af2-319">To výhodou je, že nemáte zadejte všechny parametry dotazu pokaždé, když.</span><span class="sxs-lookup"><span data-stu-id="37af2-319">The advantage of this is that you don't have to specify all of the query parameters every time.</span></span>

#### <a name="revocation"></a><span data-ttu-id="37af2-320">Odvolání</span><span class="sxs-lookup"><span data-stu-id="37af2-320">Revocation</span></span>
<span data-ttu-id="37af2-321">Předpokládejme, že došlo k ohrožení zabezpečení vaší SAS, nebo chcete změnit podnikové zabezpečení a dodržování legislativních požadavků.</span><span class="sxs-lookup"><span data-stu-id="37af2-321">Suppose your SAS has been compromised, or you want to change it because of corporate security or regulatory compliance requirements.</span></span> <span data-ttu-id="37af2-322">Jak můžete odvolat přístup k prostředku pomocí tohoto SAS?</span><span class="sxs-lookup"><span data-stu-id="37af2-322">How do you revoke access to a resource using that SAS?</span></span> <span data-ttu-id="37af2-323">To závisí na tom, jak vytvořit identifikátor URI SAS.</span><span class="sxs-lookup"><span data-stu-id="37af2-323">It depends on how you created the SAS URI.</span></span>

<span data-ttu-id="37af2-324">Pokud používáte ad hoc URI, máte tři možnosti.</span><span class="sxs-lookup"><span data-stu-id="37af2-324">If you are using ad hoc URI's, you have three options.</span></span> <span data-ttu-id="37af2-325">Může vystavovat tokeny SAS zásadám krátké vypršení platnosti a jednoduše počkejte SAS vyprší.</span><span class="sxs-lookup"><span data-stu-id="37af2-325">You can issue SAS tokens with short expiration policies and simply wait for the SAS to expire.</span></span> <span data-ttu-id="37af2-326">Můžete přejmenovat nebo odstranit prostředek (za předpokladu, že byl token obor pro jediný objekt).</span><span class="sxs-lookup"><span data-stu-id="37af2-326">You can rename or delete the resource (assuming the token was scoped to a single object).</span></span> <span data-ttu-id="37af2-327">Klíče účtu úložiště, můžete změnit.</span><span class="sxs-lookup"><span data-stu-id="37af2-327">You can change the storage account keys.</span></span> <span data-ttu-id="37af2-328">Tato možnost poslední může mít velký dopad, v závislosti na tom, kolik služby jsou pomocí tohoto účtu úložiště a pravděpodobně není něco, co chcete udělat bez některé plánování.</span><span class="sxs-lookup"><span data-stu-id="37af2-328">This last option can have a big impact, depending on how many services are using that storage account, and probably isn't something you want to do without some planning.</span></span>

<span data-ttu-id="37af2-329">Pokud používáte SAS odvozené od zásadu přístupu uložené, můžete odebrat přístup k odvolání zásady přístupu uložené – můžete právě ho změnit tak, aby již vypršela platnost, nebo ji úplně odebrat.</span><span class="sxs-lookup"><span data-stu-id="37af2-329">If you are using a SAS derived from a Stored Access Policy, you can remove access by revoking the Stored Access Policy – you can just change it so it has already expired, or you can remove it altogether.</span></span> <span data-ttu-id="37af2-330">To se projeví okamžitě a zruší všechny SAS vytvořené pomocí této zásady přístupu uložené.</span><span class="sxs-lookup"><span data-stu-id="37af2-330">This takes effect immediately, and invalidates every SAS created using that Stored Access Policy.</span></span> <span data-ttu-id="37af2-331">Aktualizace nebo odebrání zásad přístupu uložené může tabulky dopad uživatelé s přístupem k této konkrétní kontejner, sdílené složky, nebo fronty přes SAS, ale pokud jsou klienti zapisují, takže požádají nové SAS, když se stane starý neplatná, to bude pracovat správně.</span><span class="sxs-lookup"><span data-stu-id="37af2-331">Updating or removing the Stored Access Policy may impact people accessing that specific container, file share, table, or queue via SAS, but if the clients are written so they request a new SAS when the old one becomes invalid, this will work fine.</span></span>

<span data-ttu-id="37af2-332">Protože pomocí SAS odvozené od zásadu uložené přístupu vám dává možnost odvolat tuto SAS okamžitě, je vždy nutné použít uložené Pokud je to možné zásady přístupu doporučený osvědčený postup.</span><span class="sxs-lookup"><span data-stu-id="37af2-332">Because using a SAS derived from a Stored Access Policy gives you the ability to revoke that SAS immediately, it is the recommended best practice to always use Stored Access Policies when possible.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-333">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-333">Resources</span></span>
<span data-ttu-id="37af2-334">Podrobnější informace o používání sdílené přístupové podpisy uložené zásady přístupu a dokončení s příklady naleznete v následujících článcích:</span><span class="sxs-lookup"><span data-stu-id="37af2-334">For more detailed information on using Shared Access Signatures and Stored Access Policies, complete with examples, please refer to the following articles:</span></span>

* <span data-ttu-id="37af2-335">Toto jsou články odkaz.</span><span class="sxs-lookup"><span data-stu-id="37af2-335">These are the reference articles.</span></span>

  * [<span data-ttu-id="37af2-336">SAS služby</span><span class="sxs-lookup"><span data-stu-id="37af2-336">Service SAS</span></span>](https://msdn.microsoft.com/library/dn140256.aspx)

    <span data-ttu-id="37af2-337">Tento článek obsahuje příklady použití SAS úroveň služby s objekty BLOB, fronty zpráv, rozsahy tabulky a soubory.</span><span class="sxs-lookup"><span data-stu-id="37af2-337">This article provides examples of using a service-level SAS with blobs, queue messages, table ranges, and files.</span></span>
  * [<span data-ttu-id="37af2-338">Vytváření SAS služby</span><span class="sxs-lookup"><span data-stu-id="37af2-338">Constructing a service SAS</span></span>](https://msdn.microsoft.com/library/dn140255.aspx)
  * [<span data-ttu-id="37af2-339">Vytváření SAS účtu</span><span class="sxs-lookup"><span data-stu-id="37af2-339">Constructing an account SAS</span></span>](https://msdn.microsoft.com/library/mt584140.aspx)
* <span data-ttu-id="37af2-340">Jedná se o podrobné pokyny pro vytvoření sdílené přístupové podpisy a uložené zásady přístupu pomocí klientské knihovny .NET.</span><span class="sxs-lookup"><span data-stu-id="37af2-340">These are tutorials for using the .NET client library to create Shared Access Signatures and Stored Access Policies.</span></span>

  * [<span data-ttu-id="37af2-341">Použití sdílených přístupových podpisů (SAS)</span><span class="sxs-lookup"><span data-stu-id="37af2-341">Using Shared Access Signatures (SAS)</span></span>](../storage-dotnet-shared-access-signature-part-1.md)
  * [<span data-ttu-id="37af2-342">Sdílené přístupové podpisy, část 2: Vytvoření a použití SAS s služby objektů Blob</span><span class="sxs-lookup"><span data-stu-id="37af2-342">Shared Access Signatures, Part 2: Create and Use a SAS with the Blob Service</span></span>](../blobs/storage-dotnet-shared-access-signature-part-2.md)

    <span data-ttu-id="37af2-343">Tento článek obsahuje vysvětlení modelu SAS, příklady sdílené přístupové podpisy a doporučení pro nejlepší postup pomocí SAS.</span><span class="sxs-lookup"><span data-stu-id="37af2-343">This article includes an explanation of the SAS model, examples of Shared Access Signatures, and recommendations for the best practice use of SAS.</span></span> <span data-ttu-id="37af2-344">Je také popsána odvolání udělí oprávnění.</span><span class="sxs-lookup"><span data-stu-id="37af2-344">Also discussed is the revocation of the permission granted.</span></span>
* <span data-ttu-id="37af2-345">Omezení přístupu pomocí IP adresy (IP ACL)</span><span class="sxs-lookup"><span data-stu-id="37af2-345">Limiting access by IP Address (IP ACLs)</span></span>

  * [<span data-ttu-id="37af2-346">Co je koncový bod seznamu řízení přístupu (ACL)?</span><span class="sxs-lookup"><span data-stu-id="37af2-346">What is an endpoint Access Control List (ACLs)?</span></span>](../../virtual-network/virtual-networks-acl.md)
  * [<span data-ttu-id="37af2-347">Vytváření SAS služby</span><span class="sxs-lookup"><span data-stu-id="37af2-347">Constructing a Service SAS</span></span>](https://msdn.microsoft.com/library/azure/dn140255.aspx)

    <span data-ttu-id="37af2-348">Toto je odkaz na článek pro úroveň služby SAS; obsahuje příklad funkce ACLing IP.</span><span class="sxs-lookup"><span data-stu-id="37af2-348">This is the reference article for service-level SAS; it includes an example of IP ACLing.</span></span>
  * [<span data-ttu-id="37af2-349">Vytváření SAS účtu</span><span class="sxs-lookup"><span data-stu-id="37af2-349">Constructing an Account SAS</span></span>](https://msdn.microsoft.com/library/azure/mt584140.aspx)

    <span data-ttu-id="37af2-350">Toto je odkaz na článek úrovni účtu SAS; obsahuje příklad funkce ACLing IP.</span><span class="sxs-lookup"><span data-stu-id="37af2-350">This is the reference article for account-level SAS; it includes an example of IP ACLing.</span></span>
* <span data-ttu-id="37af2-351">Authentication</span><span class="sxs-lookup"><span data-stu-id="37af2-351">Authentication</span></span>

  * [<span data-ttu-id="37af2-352">Ověřování služby Azure Storage</span><span class="sxs-lookup"><span data-stu-id="37af2-352">Authentication for the Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* <span data-ttu-id="37af2-353">Sdílené přístupové podpisy kurzu Začínáme</span><span class="sxs-lookup"><span data-stu-id="37af2-353">Shared Access Signatures Getting Started Tutorial</span></span>

  * [<span data-ttu-id="37af2-354">SAS kurzu Začínáme</span><span class="sxs-lookup"><span data-stu-id="37af2-354">SAS Getting Started Tutorial</span></span>](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a><span data-ttu-id="37af2-355">Šifrování během přenosu</span><span class="sxs-lookup"><span data-stu-id="37af2-355">Encryption in Transit</span></span>
### <a name="transport-level-encryption--using-https"></a><span data-ttu-id="37af2-356">Šifrování transportní vrstvy – pomocí protokolu HTTPS</span><span class="sxs-lookup"><span data-stu-id="37af2-356">Transport-Level Encryption – Using HTTPS</span></span>
<span data-ttu-id="37af2-357">Další krok, měli byste podniknout zajistit zabezpečení dat úložiště Azure je k šifrování dat mezi klientem a Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-357">Another step you should take to ensure the security of your Azure Storage data is to encrypt the data between the client and Azure Storage.</span></span> <span data-ttu-id="37af2-358">První doporučení je vždy nutné použít [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protokol, který zajišťuje zabezpečenou komunikaci prostřednictvím veřejného Internetu.</span><span class="sxs-lookup"><span data-stu-id="37af2-358">The first recommendation is to always use the [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protocol, which ensures secure communication over the public Internet.</span></span>

<span data-ttu-id="37af2-359">Pokud chcete, aby zabezpečenou komunikaci, byste měli vždycky používat protokol HTTPS, při volání rozhraní API REST nebo přístupu k nim objektů v úložišti.</span><span class="sxs-lookup"><span data-stu-id="37af2-359">To have a secure communication channel, you should always use HTTPS when calling the REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="37af2-360">Navíc **sdílené přístupové podpisy**, který slouží k delegovat přístup k objektům Azure Storage, zahrnují možnost určit, že při použití sdílené přístupové podpisy, kontrolu, kdokoliv odesílání lze použít pouze protokol HTTPS se propojení s SAS tokeny budou používat protokol správné.</span><span class="sxs-lookup"><span data-stu-id="37af2-360">Also, **Shared Access Signatures**, which can be used to delegate access to Azure Storage objects, include an option to specify that only the HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use the proper protocol.</span></span>

<span data-ttu-id="37af2-361">Můžete vynutit používání protokolu HTTPS, při volání rozhraní REST API pro přístup k objekty v účtech úložiště, povolením [zabezpečení přenosu požadované](../storage-require-secure-transfer.md) pro účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-361">You can enforce the use of HTTPS when calling the REST APIs to access objects in storage accounts by enabling [Secure transfer required](../storage-require-secure-transfer.md) for the storage account.</span></span> <span data-ttu-id="37af2-362">Připojení pomocí protokolu HTTP bude odmítnuto, když je tato možnost povolena.</span><span class="sxs-lookup"><span data-stu-id="37af2-362">Connections using HTTP will be refused once this is enabled.</span></span>

### <a name="using-encryption-during-transit-with-azure-file-shares"></a><span data-ttu-id="37af2-363">Pomocí šifrování během přenosu se sdílenými složkami Azure</span><span class="sxs-lookup"><span data-stu-id="37af2-363">Using encryption during transit with Azure File shares</span></span>
<span data-ttu-id="37af2-364">Úložiště Azure File podporuje protokol HTTPS, když pomocí rozhraní REST API, ale je víc často používá jako sdílené složky SMB připojený k virtuálnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="37af2-364">Azure File storage supports HTTPS when using the REST API, but is more commonly used as an SMB file share attached to a VM.</span></span> <span data-ttu-id="37af2-365">SMB 2.1 nepodporuje šifrování, takže připojení jsou povoleny pouze v rámci stejné oblasti v Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-365">SMB 2.1 does not support encryption, so connections are only allowed within the same region in Azure.</span></span> <span data-ttu-id="37af2-366">Ale protokolu SMB 3.0 podporuje šifrování a je k dispozici v systému Windows Server 2012 R2, Windows 8, Windows 8.1 a Windows 10, což mezi oblastmi přístup a dokonce i přístup na ploše.</span><span class="sxs-lookup"><span data-stu-id="37af2-366">However, SMB 3.0 supports encryption, and it's available in Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on the desktop.</span></span>

<span data-ttu-id="37af2-367">Všimněte si, že i když se systémem Unix můžete použít sdílené složky Azure File, klient Linux SMB zatím nepodporuje šifrování, tak přístup je povoleno pouze v rámci oblasti Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-367">Note that while Azure File shares can be used with Unix, the Linux SMB client does not yet support encryption, so access is only allowed within an Azure region.</span></span> <span data-ttu-id="37af2-368">Podpora šifrování pro Linux je plánovaná Linux vývojářů zodpovědná za funkce protokolu SMB.</span><span class="sxs-lookup"><span data-stu-id="37af2-368">Encryption support for Linux is on the roadmap of Linux developers responsible for SMB functionality.</span></span> <span data-ttu-id="37af2-369">Při přidávání šifrování, máte stejné možnosti pro přístup k Azure sdílenou v systému Linux, jako je tomu u systému Windows.</span><span class="sxs-lookup"><span data-stu-id="37af2-369">When they add encryption, you will have the same ability for accessing an Azure File share on Linux as you do for Windows.</span></span>

<span data-ttu-id="37af2-370">Můžete vynutit šifrování se službou Azure Files povolením [zabezpečení přenosu požadované](../storage-require-secure-transfer.md) pro účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-370">You can enforce the use of encryption with the Azure Files service by enabling [Secure transfer required](../storage-require-secure-transfer.md) for the storage account.</span></span> <span data-ttu-id="37af2-371">Pokud používáte rozhraní API REST, je požadován protokol HTTPs.</span><span class="sxs-lookup"><span data-stu-id="37af2-371">If using the REST APIs, HTTPs is required.</span></span> <span data-ttu-id="37af2-372">Pouze připojení protokolu SMB, která podporují šifrování protokolu SMB, bude připojovat úspěšně.</span><span class="sxs-lookup"><span data-stu-id="37af2-372">For SMB, only SMB connections that support encryption will connect successfully.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-373">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-373">Resources</span></span>
* [<span data-ttu-id="37af2-374">Jak používat Azure File Storage s Linuxem</span><span class="sxs-lookup"><span data-stu-id="37af2-374">How to use Azure File storage with Linux</span></span>](../storage-how-to-use-files-linux.md)

  <span data-ttu-id="37af2-375">Tento článek ukazuje, jak se připojit Azure sdílenou složkou na Linux systému a nahrávání nebo stahování souborů.</span><span class="sxs-lookup"><span data-stu-id="37af2-375">This article shows how to mount an Azure File share on a Linux system and upload/download files.</span></span>
* [<span data-ttu-id="37af2-376">Začínáme s úložištěm Azure File ve Windows</span><span class="sxs-lookup"><span data-stu-id="37af2-376">Get started with Azure File storage on Windows</span></span>](../storage-dotnet-how-to-use-files.md)

  <span data-ttu-id="37af2-377">Tento článek nabízí přehled Azure sdílené složky a jak připojit a používat je pomocí prostředí PowerShell a rozhraní .NET.</span><span class="sxs-lookup"><span data-stu-id="37af2-377">This article gives an overview of Azure File shares and how to mount and use them using PowerShell and .NET.</span></span>
* [<span data-ttu-id="37af2-378">Uvnitř Azure File Storage</span><span class="sxs-lookup"><span data-stu-id="37af2-378">Inside Azure File storage</span></span>](https://azure.microsoft.com/blog/inside-azure-file-storage/)

  <span data-ttu-id="37af2-379">Tento článek oznamuje obecné dostupnost Azure File storage a obsahuje technické informace o šifrování protokolu SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="37af2-379">This article announces the general availability of Azure File storage and provides technical details about the SMB 3.0 encryption.</span></span>

### <a name="using-client-side-encryption-to-secure-data-that-you-send-to-storage"></a><span data-ttu-id="37af2-380">K zabezpečení dat, který odešlete do úložiště pomocí šifrování na straně klienta</span><span class="sxs-lookup"><span data-stu-id="37af2-380">Using Client-side encryption to secure data that you send to storage</span></span>
<span data-ttu-id="37af2-381">Jinou možnost, která vám pomůže zajistit, aby vaše data byla zabezpečené při přenášení mezi klientskou aplikaci a úložiště je šifrování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-381">Another option that helps you ensure that your data is secure while being transferred between a client application and Storage is Client-side Encryption.</span></span> <span data-ttu-id="37af2-382">Data se šifrují před přenášením do úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-382">The data is encrypted before being transferred into Azure Storage.</span></span> <span data-ttu-id="37af2-383">Při načítání dat z Azure Storage, data se dešifrují po přijetí na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-383">When retrieving the data from Azure Storage, the data is decrypted after it is received on the client side.</span></span> <span data-ttu-id="37af2-384">I když jsou data zašifrována, přejdete v síti, doporučujeme také používat protokol HTTPS, protože má kontrolu integrity dat součástí, které zmírnění chyby sítě by to ovlivnilo integritu dat.</span><span class="sxs-lookup"><span data-stu-id="37af2-384">Even though the data is encrypted going across the wire, we recommend that you also use HTTPS, as it has data integrity checks built in which help mitigate network errors affecting the integrity of the data.</span></span>

<span data-ttu-id="37af2-385">Šifrování na straně klienta je také metodu šifrování dat v klidovém stavu, jako jsou data uložená v šifrované podobě.</span><span class="sxs-lookup"><span data-stu-id="37af2-385">Client-side encryption is also a method for encrypting your data at rest, as the data is stored in its encrypted form.</span></span> <span data-ttu-id="37af2-386">Budeme mluvit o to podrobněji v části na [šifrování v klidovém stavu](#encryption-at-rest).</span><span class="sxs-lookup"><span data-stu-id="37af2-386">We'll talk about this in more detail in the section on [Encryption at Rest](#encryption-at-rest).</span></span>

## <a name="encryption-at-rest"></a><span data-ttu-id="37af2-387">Šifrování v klidovém stavu</span><span class="sxs-lookup"><span data-stu-id="37af2-387">Encryption at Rest</span></span>
<span data-ttu-id="37af2-388">Existují tři Azure funkce, které poskytují šifrování v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="37af2-388">There are three Azure features that provide encryption at rest.</span></span> <span data-ttu-id="37af2-389">Azure Disk Encryption se používá k šifrování disků operačního systému a dat v virtuální počítače IaaS.</span><span class="sxs-lookup"><span data-stu-id="37af2-389">Azure Disk Encryption is used to encrypt the OS and data disks in IaaS Virtual Machines.</span></span> <span data-ttu-id="37af2-390">Další dva – šifrování na straně klienta a SSE – jsou obě slouží k šifrování dat ve službě Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-390">The other two – Client-side Encryption and SSE – are both used to encrypt data in Azure Storage.</span></span> <span data-ttu-id="37af2-391">Pojďme podívejte se na každý z nich a pak neprovádějte porovnání a při každé z nich používá.</span><span class="sxs-lookup"><span data-stu-id="37af2-391">Let's look at each of these, and then do a comparison and see when each one can be used.</span></span>

<span data-ttu-id="37af2-392">Při šifrování na straně klienta můžete používat k šifrování dat během přenosu (který je také uložený v zašifrované podobě v úložišti), dáváte přednost jednoduše používat protokol HTTPS během přenosu a mají některé způsob pro data, která mají být šifrují automaticky, když je uložena.</span><span class="sxs-lookup"><span data-stu-id="37af2-392">While you can use Client-side Encryption to encrypt the data in transit (which is also stored in its encrypted form in Storage), you may prefer to simply use HTTPS during the transfer, and have some way for the data to be automatically encrypted when it is stored.</span></span> <span data-ttu-id="37af2-393">Existují dva způsoby, jak tomu – Azure Disk Encryption a SSE.</span><span class="sxs-lookup"><span data-stu-id="37af2-393">There are two ways to do this -- Azure Disk Encryption and SSE.</span></span> <span data-ttu-id="37af2-394">Jeden se používá k přímo šifrování dat na operačního systému a datové disky, které jsou používány virtuálními počítači a dalších se používá k šifrování dat zapsaných na Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-394">One is used to directly encrypt the data on OS and data disks used by VMs, and the other is used to encrypt data written to Azure Blob Storage.</span></span>

### <a name="storage-service-encryption-sse"></a><span data-ttu-id="37af2-395">Šifrování služby úložiště (SSE)</span><span class="sxs-lookup"><span data-stu-id="37af2-395">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="37af2-396">SSE umožňuje požadovat, aby službu úložiště automaticky šifrování dat při zápisu do služby Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-396">SSE allows you to request that the storage service automatically encrypt the data when writing it to Azure Storage.</span></span> <span data-ttu-id="37af2-397">Při čtení dat z Azure Storage, ji budou dešifrovat pomocí služby úložiště před vrácením.</span><span class="sxs-lookup"><span data-stu-id="37af2-397">When you read the data from Azure Storage, it will be decrypted by the storage service before being returned.</span></span> <span data-ttu-id="37af2-398">To umožňuje zabezpečit vaše data bez nutnosti měnit kód nebo přidávání kódu do žádné aplikace.</span><span class="sxs-lookup"><span data-stu-id="37af2-398">This enables you to secure your data without having to modify code or add code to any applications.</span></span>

<span data-ttu-id="37af2-399">Je toto nastavení, která se použije k účtu úložiště celý.</span><span class="sxs-lookup"><span data-stu-id="37af2-399">This is a setting that applies to the whole storage account.</span></span> <span data-ttu-id="37af2-400">Můžete povolit nebo zakázat tuto funkci můžete změnit hodnotu nastavení.</span><span class="sxs-lookup"><span data-stu-id="37af2-400">You can enable and disable this feature by changing the value of the setting.</span></span> <span data-ttu-id="37af2-401">K tomuto účelu můžete použít portál Azure, PowerShell, rozhraní příkazového řádku Azure, rozhraní API REST poskytovatele prostředků úložiště nebo Klientská knihovna pro úložiště .NET.</span><span class="sxs-lookup"><span data-stu-id="37af2-401">To do this, you can use the Azure portal, PowerShell, the Azure CLI, the Storage Resource Provider REST API, or the .NET Storage Client Library.</span></span> <span data-ttu-id="37af2-402">Ve výchozím nastavení je SSE vypnutý.</span><span class="sxs-lookup"><span data-stu-id="37af2-402">By default, SSE is turned off.</span></span>

<span data-ttu-id="37af2-403">V tomto okamžiku klíče používané k šifrování spravuje Microsoft.</span><span class="sxs-lookup"><span data-stu-id="37af2-403">At this time, the keys used for the encryption are managed by Microsoft.</span></span> <span data-ttu-id="37af2-404">Jsme původně generování klíčů a spravovat zabezpečeného úložiště klíčů, jakož i regulární otočení podle definice interní zásady společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="37af2-404">We generate the keys originally, and manage the secure storage of the keys as well as the regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="37af2-405">V budoucnu získat schopnost spravovat šifrovacích klíčů a zadání cesty migrace z klíčů spravovaný společností Microsoft pro klíče spravovaného zákazníkem.</span><span class="sxs-lookup"><span data-stu-id="37af2-405">In the future, you will get the ability to manage your own encryption keys, and provide a migration path from Microsoft-managed keys to customer-managed keys.</span></span>

<span data-ttu-id="37af2-406">Tato funkce je k dispozici pro Standard a Premium Storage účty, které jsou vytvořené pomocí modelu nasazení Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="37af2-406">This feature is available for Standard and Premium Storage accounts created using the Resource Manager deployment model.</span></span> <span data-ttu-id="37af2-407">SSE se vztahuje pouze na objekty BLOB, objekty BLOB stránky, bloků a doplňovací objekty BLOB.</span><span class="sxs-lookup"><span data-stu-id="37af2-407">SSE applies only to block blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="37af2-408">Jiné typy dat, včetně tabulek, front a soubory, nebudou šifrována.</span><span class="sxs-lookup"><span data-stu-id="37af2-408">The other types of data, including tables, queues, and files, will not be encrypted.</span></span>

<span data-ttu-id="37af2-409">Data jsou zašifrována, pouze pokud je zapnuto SSE a budou data zapsána do úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="37af2-409">Data is only encrypted when SSE is enabled and the data is written to Blob Storage.</span></span> <span data-ttu-id="37af2-410">Povolení nebo zakázání SSE nemá negativní vliv na existující data.</span><span class="sxs-lookup"><span data-stu-id="37af2-410">Enabling or disabling SSE does not impact existing data.</span></span> <span data-ttu-id="37af2-411">Jinými slovy Pokud povolíte toto šifrování, se nebude přejděte zpět a šifrovat data, která již existuje; ani se dešifrovat data, která už při zakázání SSE.</span><span class="sxs-lookup"><span data-stu-id="37af2-411">In other words, when you enable this encryption, it will not go back and encrypt data that already exists; nor will it decrypt the data that already exists when you disable SSE.</span></span>

<span data-ttu-id="37af2-412">Pokud chcete tuto funkci používat s účtem úložiště Classic, můžete vytvořit nový účet úložiště Resource Manager a pomocí nástroje AzCopy zkopírujte data do nového účtu.</span><span class="sxs-lookup"><span data-stu-id="37af2-412">If you want to use this feature with a Classic storage account, you can create a new Resource Manager storage account and use AzCopy to copy the data to the new account.</span></span>

### <a name="client-side-encryption"></a><span data-ttu-id="37af2-413">Šifrování na straně klienta</span><span class="sxs-lookup"><span data-stu-id="37af2-413">Client-side Encryption</span></span>
<span data-ttu-id="37af2-414">Jsme uvedených šifrování na straně klienta, když hovoříte o šifrování dat při přenosu.</span><span class="sxs-lookup"><span data-stu-id="37af2-414">We mentioned client-side encryption when discussing the encryption of the data in transit.</span></span> <span data-ttu-id="37af2-415">Tato funkce umožňuje prostřednictvím kódu programu šifrování dat v aplikaci klienta před odesláním přes přenosu má být zapsán do služby Azure Storage a prostřednictvím kódu programu dešifrovat data po načtení z úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-415">This feature allows you to programmatically encrypt your data in a client application before sending it across the wire to be written to Azure Storage, and to programmatically decrypt your data after retrieving it from Azure Storage.</span></span>

<span data-ttu-id="37af2-416">To poskytuje šifrování během přenosu, ale také poskytuje funkci šifrování v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="37af2-416">This does provide encryption in transit, but it also provides the feature of Encryption at Rest.</span></span> <span data-ttu-id="37af2-417">Všimněte si, že i když data se šifrují během přenosu, doporučujeme využít integrované dat kontroly integrity, které zmírnění chyby sítě by to ovlivnilo integritu dat pomocí protokolu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="37af2-417">Note that although the data is encrypted in transit, we still recommend using HTTPS to take advantage of the built-in data integrity checks which help mitigate network errors affecting the integrity of the data.</span></span>

<span data-ttu-id="37af2-418">Příklad kde lze jej použít, je, pokud máte webovou aplikaci, která ukládá objekty BLOB a načte objekty BLOB a chcete, aby aplikace a data, být co možná.</span><span class="sxs-lookup"><span data-stu-id="37af2-418">An example of where you might use this is if you have a web application that stores blobs and retrieves blobs, and you want the application and data to be as secure as possible.</span></span> <span data-ttu-id="37af2-419">V takovém případě byste použili šifrování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-419">In that case, you would use client-side encryption.</span></span> <span data-ttu-id="37af2-420">Přenosy mezi klientem a službou objektů Blob Azure obsahuje šifrované prostředků a nikdo interpretovat data při přenosu a rekonstruovat do privátní objektů BLOB.</span><span class="sxs-lookup"><span data-stu-id="37af2-420">The traffic between the client and the Azure Blob Service contains the encrypted resource, and nobody can interpret the data in transit and reconstitute it into your private blobs.</span></span>

<span data-ttu-id="37af2-421">Šifrování na straně klienta jsou součástí jazyce Java a knihovny klienta úložiště .NET, které pak používají Azure klíč trezoru rozhraní API, což poměrně snadno implementovat.</span><span class="sxs-lookup"><span data-stu-id="37af2-421">Client-side encryption is built into the Java and the .NET storage client libraries, which in turn use the Azure Key Vault APIs, making it pretty easy for you to implement.</span></span> <span data-ttu-id="37af2-422">Proces šifrování a dešifrování dat používá metodu obálky a ukládá metadata používá šifrování v každém objektu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-422">The process of encrypting and decrypting the data uses the envelope technique, and stores metadata used by the encryption in each storage object.</span></span> <span data-ttu-id="37af2-423">Například pro objekty BLOB, ukládají se v metadata objektu blob, zatímco pro fronty, přidá se každá zpráva fronty.</span><span class="sxs-lookup"><span data-stu-id="37af2-423">For example, for blobs, it stores it in the blob metadata, while for queues, it adds it to each queue message.</span></span>

<span data-ttu-id="37af2-424">K šifrování sám může vygenerovat a spravovat vlastní šifrovací klíče.</span><span class="sxs-lookup"><span data-stu-id="37af2-424">For the encryption itself, you can generate and manage your own encryption keys.</span></span> <span data-ttu-id="37af2-425">Klíče generované Klientská knihovna pro úložiště Azure můžete také použít, nebo nemáte Azure Key Vault, generování klíčů.</span><span class="sxs-lookup"><span data-stu-id="37af2-425">You can also use keys generated by the Azure Storage Client Library, or you can have the Azure Key Vault generate the keys.</span></span> <span data-ttu-id="37af2-426">Můžete uložit šifrovací klíče ve vaší místní úložiště klíčů a uložit je do Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="37af2-426">You can store your encryption keys in your on-premises key storage, or you can store them in an Azure Key Vault.</span></span> <span data-ttu-id="37af2-427">Azure Key Vault můžete udělit přístup k tajných klíčů v Azure Key Vault pro konkrétní uživatele pomocí služby Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="37af2-427">Azure Key Vault allows you to grant access to the secrets in Azure Key Vault to specific users using Azure Active Directory.</span></span> <span data-ttu-id="37af2-428">To znamená, že nejen Kdokoliv může číst Azure Key Vault a načtení klíčů, které používáte pro šifrování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-428">This means that not just anybody can read the Azure Key Vault and retrieve the keys you're using for client-side encryption.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-429">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-429">Resources</span></span>
* [<span data-ttu-id="37af2-430">Šifrování a dešifrování objektů BLOB v úložišti Microsoft Azure pomocí Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="37af2-430">Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault</span></span>](../blobs/storage-encrypt-decrypt-blobs-key-vault.md)

  <span data-ttu-id="37af2-431">Tento článek ukazuje, jak používat šifrování na straně klienta s Azure Key Vault, včetně toho, jak vytvořit klíče KEK a uložit ho v úložišti pomocí prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="37af2-431">This article shows how to use client-side encryption with Azure Key Vault, including how to create the KEK and store it in the vault using PowerShell.</span></span>
* [<span data-ttu-id="37af2-432">Šifrování na straně klienta a Azure Key Vault pro Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="37af2-432">Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage</span></span>](../storage-client-side-encryption.md)

  <span data-ttu-id="37af2-433">Tento článek vysvětluje šifrování na straně klienta a obsahuje příklady použití Klientská knihovna pro úložiště pro šifrování a dešifrování prostředky z čtyři služby úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-433">This article gives an explanation of client-side encryption, and provides examples of using the storage client library to encrypt and decrypt resources from the four storage services.</span></span> <span data-ttu-id="37af2-434">Také pojednává o Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="37af2-434">It also talks about Azure Key Vault.</span></span>

### <a name="using-azure-disk-encryption-to-encrypt-disks-used-by-your-virtual-machines"></a><span data-ttu-id="37af2-435">Pomocí Azure Disk Encryption k šifrování disků používat virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="37af2-435">Using Azure Disk Encryption to encrypt disks used by your virtual machines</span></span>
<span data-ttu-id="37af2-436">Azure Disk Encryption je nová funkce.</span><span class="sxs-lookup"><span data-stu-id="37af2-436">Azure Disk Encryption is a new feature.</span></span> <span data-ttu-id="37af2-437">Tato funkce umožňuje šifrování disků operačního systému a datové disky použít podle IaaS virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="37af2-437">This feature allows you to encrypt the OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="37af2-438">Pro systém Windows jsou šifrované jednotky pomocí standardních technologií šifrování nástroje BitLocker.</span><span class="sxs-lookup"><span data-stu-id="37af2-438">For Windows, the drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="37af2-439">Pro systémy Linux jsou disky šifrované pomocí technologie DM-Crypt.</span><span class="sxs-lookup"><span data-stu-id="37af2-439">For Linux, the disks are encrypted using the DM-Crypt technology.</span></span> <span data-ttu-id="37af2-440">Toto jsou integrované s Azure Key Vault umožňují řídit a spravovat disku šifrovací klíče.</span><span class="sxs-lookup"><span data-stu-id="37af2-440">This is integrated with Azure Key Vault to allow you to control and manage the disk encryption keys.</span></span>

<span data-ttu-id="37af2-441">Řešení podporuje následující scénáře pro virtuální počítače IaaS, pokud jsou povolené v Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="37af2-441">The solution supports the following scenarios for IaaS VMs when they are enabled in Microsoft Azure:</span></span>

* <span data-ttu-id="37af2-442">Integrace s Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="37af2-442">Integration with Azure Key Vault</span></span>
* <span data-ttu-id="37af2-443">Úroveň Standard virtuálních počítačů: [A, D, DS, G, GS a atd. řady virtuální počítače IaaS](https://azure.microsoft.com/pricing/details/virtual-machines/)</span><span class="sxs-lookup"><span data-stu-id="37af2-443">Standard tier VMs: [A, D, DS, G, GS, and so forth series IaaS VMs](https://azure.microsoft.com/pricing/details/virtual-machines/)</span></span>
* <span data-ttu-id="37af2-444">Povolení šifrování v systému Windows a virtuálních počítačů IaaS Linux</span><span class="sxs-lookup"><span data-stu-id="37af2-444">Enabling encryption on Windows and Linux IaaS VMs</span></span>
* <span data-ttu-id="37af2-445">Zakázáním šifrování na operačního systému a datové disky pro virtuální počítače IaaS Windows</span><span class="sxs-lookup"><span data-stu-id="37af2-445">Disabling encryption on OS and data drives for Windows IaaS VMs</span></span>
* <span data-ttu-id="37af2-446">Zakázáním šifrování na datových jednotkách pro virtuální počítače IaaS Linux</span><span class="sxs-lookup"><span data-stu-id="37af2-446">Disabling encryption on data drives for Linux IaaS VMs</span></span>
* <span data-ttu-id="37af2-447">Povolení šifrování na virtuální počítače IaaS se systémem Windows klientského operačního systému</span><span class="sxs-lookup"><span data-stu-id="37af2-447">Enabling encryption on IaaS VMs that are running Windows client OS</span></span>
* <span data-ttu-id="37af2-448">Povolení šifrování u svazků s připojení cesty</span><span class="sxs-lookup"><span data-stu-id="37af2-448">Enabling encryption on volumes with mount paths</span></span>
* <span data-ttu-id="37af2-449">Povolení šifrování u virtuálních počítačů Linux, které jsou nakonfigurované s diskem s použitím mdadm prokládání (RAID)</span><span class="sxs-lookup"><span data-stu-id="37af2-449">Enabling encryption on Linux VMs that are configured with disk striping (RAID) by using mdadm</span></span>
* <span data-ttu-id="37af2-450">Povolení šifrování na virtuální počítače s Linuxem pomocí LVM pro datové disky</span><span class="sxs-lookup"><span data-stu-id="37af2-450">Enabling encryption on Linux VMs by using LVM for data disks</span></span>
* <span data-ttu-id="37af2-451">Povolení šifrování na virtuálních počítačích Windows, které jsou nakonfigurované pomocí prostorů úložiště</span><span class="sxs-lookup"><span data-stu-id="37af2-451">Enabling encryption on Windows VMs that are configured by using storage spaces</span></span>
* <span data-ttu-id="37af2-452">Jsou podporovány všechny veřejné oblasti Azure</span><span class="sxs-lookup"><span data-stu-id="37af2-452">All Azure public regions are supported</span></span>

<span data-ttu-id="37af2-453">Řešení nepodporuje následující scénáře, funkce a technologie ve verzi:</span><span class="sxs-lookup"><span data-stu-id="37af2-453">The solution does not support the following scenarios, features, and technology in the release:</span></span>

* <span data-ttu-id="37af2-454">Úroveň Basic virtuálních počítačů IaaS</span><span class="sxs-lookup"><span data-stu-id="37af2-454">Basic tier IaaS VMs</span></span>
* <span data-ttu-id="37af2-455">Zakázáním šifrování na jednotce operačního systému pro virtuální počítače IaaS Linux</span><span class="sxs-lookup"><span data-stu-id="37af2-455">Disabling encryption on an OS drive for Linux IaaS VMs</span></span>
* <span data-ttu-id="37af2-456">Virtuální počítače IaaS, která jsou vytvořená pomocí klasického metody vytvoření virtuálního počítače</span><span class="sxs-lookup"><span data-stu-id="37af2-456">IaaS VMs that are created by using the classic VM creation method</span></span>
* <span data-ttu-id="37af2-457">Integrace s vaší místní služby správy klíčů</span><span class="sxs-lookup"><span data-stu-id="37af2-457">Integration with your on-premises Key Management Service</span></span>
* <span data-ttu-id="37af2-458">Úložiště Azure File (systém souborů sdíleného), systém souborů NFS, dynamické svazky a virtuální počítače Windows, které jsou nakonfigurované s systémy na bázi softwaru diskového pole RAID</span><span class="sxs-lookup"><span data-stu-id="37af2-458">Azure File storage (shared file system), Network File System (NFS), dynamic volumes, and Windows VMs that are configured with software-based RAID systems</span></span>


> [!NOTE]
> <span data-ttu-id="37af2-459">Na následující Linuxových distribucích v současné době podporuje šifrování disku operačního systému Linux: RHEL 7.2, CentOS 7.2n a Ubuntu 16.04.</span><span class="sxs-lookup"><span data-stu-id="37af2-459">Linux OS disk encryption is currently supported on the following Linux distributions: RHEL 7.2, CentOS 7.2n, and Ubuntu 16.04.</span></span>
>
>

<span data-ttu-id="37af2-460">Tato funkce zajišťuje, že všechna data na disky virtuálního počítače je zašifrovaná přinejmenším ve službě Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-460">This feature ensures that all data on your virtual machine disks is encrypted at rest in Azure Storage.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-461">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-461">Resources</span></span>
* [<span data-ttu-id="37af2-462">Azure Disk Encryption pro systém Windows a virtuálních počítačů Linux IaaS</span><span class="sxs-lookup"><span data-stu-id="37af2-462">Azure Disk Encryption for Windows and Linux IaaS VMs</span></span>](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption)

### <a name="comparison-of-azure-disk-encryption-sse-and-client-side-encryption"></a><span data-ttu-id="37af2-463">Porovnání Azure Disk Encryption, SSE a šifrování na straně klienta</span><span class="sxs-lookup"><span data-stu-id="37af2-463">Comparison of Azure Disk Encryption, SSE, and Client-Side Encryption</span></span>
#### <a name="iaas-vms-and-their-vhd-files"></a><span data-ttu-id="37af2-464">Virtuální počítače IaaS a jejich soubory virtuálního pevného disku</span><span class="sxs-lookup"><span data-stu-id="37af2-464">IaaS VMs and their VHD files</span></span>
<span data-ttu-id="37af2-465">Pro disky používané virtuální počítače IaaS doporučujeme používat Azure Disk Encryption.</span><span class="sxs-lookup"><span data-stu-id="37af2-465">For disks used by IaaS VMs, we recommend using Azure Disk Encryption.</span></span> <span data-ttu-id="37af2-466">Můžete zapnout SSE k zašifrování souborů virtuálního pevného disku, které slouží k zálohování těchto disků ve službě Azure Storage, ale šifruje pouze nově vytvořené data.</span><span class="sxs-lookup"><span data-stu-id="37af2-466">You can turn on SSE to encrypt the VHD files that are used to back those disks in Azure Storage, but it only encrypts newly written data.</span></span> <span data-ttu-id="37af2-467">To znamená, že pokud vytvoření virtuálního počítače a pak povolíte SSE na účet úložiště, který obsahuje soubor virtuálního pevného disku, budou šifrovány pouze změny, není původní soubor virtuálního pevného disku.</span><span class="sxs-lookup"><span data-stu-id="37af2-467">This means if you create a VM and then enable SSE on the storage account that holds the VHD file, only the changes will be encrypted, not the original VHD file.</span></span>

<span data-ttu-id="37af2-468">Pokud vytvoříte virtuální počítač pomocí bitovou kopii z Azure Marketplace, provede Azure [Nedávná kopie](https://en.wikipedia.org/wiki/Object_copying) bitové kopie do úložiště není šifrován účtu v Azure Storage ale i v případě, že máte SSE povoleno.</span><span class="sxs-lookup"><span data-stu-id="37af2-468">If you create a VM using an image from the Azure Marketplace, Azure performs a [shallow copy](https://en.wikipedia.org/wiki/Object_copying) of the image to your storage account in Azure Storage, and it is not encrypted even if you have SSE enabled.</span></span> <span data-ttu-id="37af2-469">Po vytvoří virtuální počítač a spustí aktualizaci bitové kopie, začne SSE šifrování data.</span><span class="sxs-lookup"><span data-stu-id="37af2-469">After it creates the VM and starts updating the image, SSE will start encrypting the data.</span></span> <span data-ttu-id="37af2-470">Z tohoto důvodu je nejvhodnější použít Azure Disk Encryption na virtuálních počítačích, které jsou vytvořené z bitových kopií v Azure Marketplace, pokud chcete, aby je plně zašifrované.</span><span class="sxs-lookup"><span data-stu-id="37af2-470">For this reason, it's best to use Azure Disk Encryption on VMs created from images in the Azure Marketplace if you want them fully encrypted.</span></span>

<span data-ttu-id="37af2-471">Pokud aktivujete předem šifrované virtuálních počítačů do Azure z místního, bude možné nahrát šifrovací klíče do Azure Key Vault a pokračovat v používání šifrování pro tento virtuální počítač, že jste používali místní.</span><span class="sxs-lookup"><span data-stu-id="37af2-471">If you bring a pre-encrypted VM into Azure from on-premises, you will be able to upload the encryption keys to Azure Key Vault, and continue using the encryption for that VM that you were using on-premises.</span></span> <span data-ttu-id="37af2-472">Azure Disk Encryption zapnutá tohoto scénáře.</span><span class="sxs-lookup"><span data-stu-id="37af2-472">Azure Disk Encryption is enabled to handle this scenario.</span></span>

<span data-ttu-id="37af2-473">Pokud máte bez šifrování virtuálního pevného disku z místně, můžete odeslat do Galerie jako vlastní image a zřídit virtuální počítač z něj.</span><span class="sxs-lookup"><span data-stu-id="37af2-473">If you have non-encrypted VHD from on-premises, you can upload it into the gallery as a custom image and provision a VM from it.</span></span> <span data-ttu-id="37af2-474">Pokud to uděláte pomocí šablony Resource Manageru, požádejte ho chcete zapnout Azure Disk Encryption po spuštění virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="37af2-474">If you do this using the Resource Manager templates, you can ask it to turn on Azure Disk Encryption when it boots up the VM.</span></span>

<span data-ttu-id="37af2-475">Když přidáte datový disk a připojit ho ve virtuálním počítači, můžete zapnout na Azure Disk Encryption na tento datový disk.</span><span class="sxs-lookup"><span data-stu-id="37af2-475">When you add a data disk and mount it on the VM, you can turn on Azure Disk Encryption on that data disk.</span></span> <span data-ttu-id="37af2-476">Zašifruje tento disk data místně nejprve a vrstva správy služby bude proveďte opožděné zápisu proti úložiště tak obsah úložiště je šifrován.</span><span class="sxs-lookup"><span data-stu-id="37af2-476">It will encrypt that data disk locally first, and then the service management layer will do a lazy write against storage so the storage content is encrypted.</span></span>

#### <a name="client-side-encryption"></a><span data-ttu-id="37af2-477">Šifrování na straně klienta</span><span class="sxs-lookup"><span data-stu-id="37af2-477">Client-side encryption</span></span>
<span data-ttu-id="37af2-478">Šifrování na straně klienta je nejbezpečnější metodou šifrování dat, protože se šifruje před přenosu který šifruje data v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="37af2-478">Client-side encryption is the most secure method of encrypting your data, because it encrypts it before transit, and encrypts the data at rest.</span></span> <span data-ttu-id="37af2-479">Ale vyžadují, přidávání kódu do vaší aplikace s použitím úložiště, které nemusí chcete provést.</span><span class="sxs-lookup"><span data-stu-id="37af2-479">However, it does require that you add code to your applications using storage, which you may not want to do.</span></span> <span data-ttu-id="37af2-480">V těchto případech můžete použít pro vaše data v přenosu a SSE HTTPs k šifrování dat v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="37af2-480">In those cases, you can use HTTPs for your data in transit, and SSE to encrypt the data at rest.</span></span>

<span data-ttu-id="37af2-481">Pomocí šifrování na straně klienta můžete šifrovat entity tabulky, fronty zpráv a objekty BLOB.</span><span class="sxs-lookup"><span data-stu-id="37af2-481">With client-side encryption, you can encrypt table entities, queue messages, and blobs.</span></span> <span data-ttu-id="37af2-482">S SSE můžete šifrovat jenom objekty BLOB.</span><span class="sxs-lookup"><span data-stu-id="37af2-482">With SSE, you can only encrypt blobs.</span></span> <span data-ttu-id="37af2-483">Pokud potřebujete tabulky a fronty data chcete šifrovat, měli byste použít šifrování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-483">If you need table and queue data to be encrypted, you should use client-side encryption.</span></span>

<span data-ttu-id="37af2-484">Šifrování na straně klienta je zcela spravuje aplikace.</span><span class="sxs-lookup"><span data-stu-id="37af2-484">Client-side encryption is managed entirely by the application.</span></span> <span data-ttu-id="37af2-485">To je nejbezpečnější přístup, ale vyžadují, abyste programový změnit do vaší aplikace a umístí procesy správy klíčů na místě.</span><span class="sxs-lookup"><span data-stu-id="37af2-485">This is the most secure approach, but does require you to make programmatic changes to your application and put key management processes in place.</span></span> <span data-ttu-id="37af2-486">To byste použili, když chcete zvýšit zabezpečení během přenosu a chcete, aby vaše uložená data chcete šifrovat.</span><span class="sxs-lookup"><span data-stu-id="37af2-486">You would use this when you want the extra security during transit, and you want your stored data to be encrypted.</span></span>

<span data-ttu-id="37af2-487">Šifrování na straně klienta je další zatížení na straně klienta a je nutné pro tento účet v plánu škálovatelnost, zejména v případě, že jsou šifrování a přenosu velkého množství dat.</span><span class="sxs-lookup"><span data-stu-id="37af2-487">Client-side encryption is more load on the client, and you have to account for this in your scalability plans, especially if you are encrypting and transferring a lot of data.</span></span>

#### <a name="storage-service-encryption-sse"></a><span data-ttu-id="37af2-488">Šifrování služby úložiště (SSE)</span><span class="sxs-lookup"><span data-stu-id="37af2-488">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="37af2-489">SSE spravuje Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-489">SSE is managed by Azure Storage.</span></span> <span data-ttu-id="37af2-490">Pomocí SSE neposkytuje pro zabezpečení přenášených dat, ale šifrování dat, jako je zapsán do úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-490">Using SSE does not provide for the security of the data in transit, but it does encrypt the data as it is written to Azure Storage.</span></span> <span data-ttu-id="37af2-491">Neexistuje žádný vliv na výkon, při použití této funkce.</span><span class="sxs-lookup"><span data-stu-id="37af2-491">There is no impact on the performance when using this feature.</span></span>

<span data-ttu-id="37af2-492">Můžete pouze šifrování objekty BLOB bloku, doplňovací objekty BLOB a objektům BLOB pomocí SSE stránky.</span><span class="sxs-lookup"><span data-stu-id="37af2-492">You can only encrypt block blobs, append blobs, and page blobs using SSE.</span></span> <span data-ttu-id="37af2-493">Pokud potřebujete k šifrování dat v tabulce nebo data fronty, měli byste zvážit použití šifrování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="37af2-493">If you need to encrypt table data or queue data, you should consider using client-side encryption.</span></span>

<span data-ttu-id="37af2-494">Pokud máte archiv nebo knihovna soubory virtuálního pevného disku, které můžete použít jako základ pro vytváření nových virtuálních počítačů, můžete vytvořit nový účet úložiště, povolte SSE a pak nahrajte soubory virtuálního pevného disku k tomuto účtu.</span><span class="sxs-lookup"><span data-stu-id="37af2-494">If you have an archive or library of VHD files that you use as a basis for creating new virtual machines, you can create a new storage account, enable SSE, and then upload the VHD files to that account.</span></span> <span data-ttu-id="37af2-495">Tyto soubory virtuálního pevného disku, bude se šifrovat úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-495">Those VHD files will be encrypted by Azure Storage.</span></span>

<span data-ttu-id="37af2-496">Pokud máte Azure Disk Encryption povoleno pro disky ve virtuálních počítačů a SSE povoleno na účet úložiště, která uchovává soubory virtuálního pevného disku, bude pracovat správně; způsobí žádná data pro nově vytvořený šifrovaný dvakrát.</span><span class="sxs-lookup"><span data-stu-id="37af2-496">If you have Azure Disk Encryption enabled for the disks in a VM and SSE enabled on the storage account holding the VHD files, it will work fine; it will result in any newly-written data being encrypted twice.</span></span>

## <a name="storage-analytics"></a><span data-ttu-id="37af2-497">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="37af2-497">Storage Analytics</span></span>
### <a name="using-storage-analytics-to-monitor-authorization-type"></a><span data-ttu-id="37af2-498">Pomocí Storage Analytics k monitorování typ autorizace</span><span class="sxs-lookup"><span data-stu-id="37af2-498">Using Storage Analytics to monitor authorization type</span></span>
<span data-ttu-id="37af2-499">Pro každý účet úložiště můžete povolit Azure Storage Analytics k provedení protokolování a ukládání dat metriky.</span><span class="sxs-lookup"><span data-stu-id="37af2-499">For each storage account, you can enable Azure Storage Analytics to perform logging and store metrics data.</span></span> <span data-ttu-id="37af2-500">Toto je skvělý nástroj pro použijte, pokud chcete zkontrolovat metriky výkonu účet úložiště, nebo třeba řešit účet úložiště, protože dochází k problémům s výkonem.</span><span class="sxs-lookup"><span data-stu-id="37af2-500">This is a great tool to use when you want to check the performance metrics of a storage account, or need to troubleshoot a storage account because you are having performance problems.</span></span>

<span data-ttu-id="37af2-501">Další část dat, která se zobrazí v protokolech analytics úložiště je metoda ověřování používá někdo při přístupu k úložišti.</span><span class="sxs-lookup"><span data-stu-id="37af2-501">Another piece of data you can see in the storage analytics logs is the authentication method used by someone when they access storage.</span></span> <span data-ttu-id="37af2-502">Například pomocí úložiště objektů Blob, uvidíte pokud používají sdíleného přístupového podpisu nebo klíče účtu úložiště, nebo pokud byl veřejný přístup k objektu blob.</span><span class="sxs-lookup"><span data-stu-id="37af2-502">For example, with Blob Storage, you can see if they used a Shared Access Signature or the storage account keys, or if the blob accessed was public.</span></span>

<span data-ttu-id="37af2-503">To může být velmi užitečné, pokud jsou úzce ochrana přístup k úložišti.</span><span class="sxs-lookup"><span data-stu-id="37af2-503">This can be really helpful if you are tightly guarding access to storage.</span></span> <span data-ttu-id="37af2-504">V úložišti objektů Blob můžete například nastavit všechny kontejnery do privátního a implementovat použití služby SAS v celé vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="37af2-504">For example, in Blob Storage you can set all of the containers to private and implement the use of an SAS service throughout your applications.</span></span> <span data-ttu-id="37af2-505">Zkontrolujte protokoly pravidelně zobrazíte Pokud objektů BLOB ke kterým se přistupuje pomocí klíče účtu úložiště, které mohou indikovat porušení zabezpečení, nebo pokud jsou veřejné objekty BLOB, ale nemělo by být.</span><span class="sxs-lookup"><span data-stu-id="37af2-505">Then you can check the logs regularly to see if your blobs are accessed using the storage account keys, which may indicate a breach of security, or if the blobs are public but they shouldn't be.</span></span>

#### <a name="what-do-the-logs-look-like"></a><span data-ttu-id="37af2-506">Co v protokolech vypadat?</span><span class="sxs-lookup"><span data-stu-id="37af2-506">What do the logs look like?</span></span>
<span data-ttu-id="37af2-507">Po povolení metrik účtu úložiště a protokolování prostřednictvím portálu Azure, analytická data začnou hromadit rychle.</span><span class="sxs-lookup"><span data-stu-id="37af2-507">After you enable the storage account metrics and logging through the Azure portal, analytics data will start to accumulate quickly.</span></span> <span data-ttu-id="37af2-508">Protokolování a metriky pro každou službu je samostatný; protokolování je zapisovány pouze v případě, že je aktivita v daném účtu úložiště, zatímco metriky se zaznamená do protokolu, každou minutu, každou hodinu nebo každý den, v závislosti na tom, jak ho nakonfigurujete.</span><span class="sxs-lookup"><span data-stu-id="37af2-508">The logging and metrics for each service is separate; the logging is only written when there is activity in that storage account, while the metrics will be logged every minute, every hour, or every day, depending on how you configure it.</span></span>

<span data-ttu-id="37af2-509">Protokoly jsou uloženy v objekty BLOB bloku v kontejneru nazvaném $logs v účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-509">The logs are stored in block blobs in a container named $logs in the storage account.</span></span> <span data-ttu-id="37af2-510">Tento kontejner se automaticky vytvoří, když je povolená analytika úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-510">This container is automatically created when Storage Analytics is enabled.</span></span> <span data-ttu-id="37af2-511">Po vytvoření tohoto kontejneru, nelze odstranit i když můžete odstranit jeho obsah.</span><span class="sxs-lookup"><span data-stu-id="37af2-511">Once this container is created, you can't delete it, although you can delete its contents.</span></span>

<span data-ttu-id="37af2-512">V kontejneru $logs nachází složka pro každou službu a pak podsložky nejsou za rok/měsíc/den/hodinu.</span><span class="sxs-lookup"><span data-stu-id="37af2-512">Under the $logs container, there is a folder for each service, and then there are subfolders for the year/month/day/hour.</span></span> <span data-ttu-id="37af2-513">Necelé hodiny jsou jednoduše číslované protokoly.</span><span class="sxs-lookup"><span data-stu-id="37af2-513">Under hour, the logs are simply numbered.</span></span> <span data-ttu-id="37af2-514">Toto je, jak bude vypadat adresářovou strukturu:</span><span class="sxs-lookup"><span data-stu-id="37af2-514">This is what the directory structure will look like:</span></span>

![Zobrazení souborů protokolu](./media/storage-security-guide/image1.png)

<span data-ttu-id="37af2-516">Každý požadavek do služby Azure Storage je protokolována.</span><span class="sxs-lookup"><span data-stu-id="37af2-516">Every request to Azure Storage is logged.</span></span> <span data-ttu-id="37af2-517">Zde je snímek souboru protokolu, první několik polí.</span><span class="sxs-lookup"><span data-stu-id="37af2-517">Here's a snapshot of a log file, showing the first few fields.</span></span>

![Snímek souboru protokolu](./media/storage-security-guide/image2.png)

<span data-ttu-id="37af2-519">Uvidíte, že můžete protokoly sledovat jakýkoli druh volání na účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-519">You can see that you can use the logs to track any kind of calls to a storage account.</span></span>

#### <a name="what-are-all-of-those-fields-for"></a><span data-ttu-id="37af2-520">Jaké jsou všechna tyto pole pro?</span><span class="sxs-lookup"><span data-stu-id="37af2-520">What are all of those fields for?</span></span>
<span data-ttu-id="37af2-521">Je zobrazeno v seznamu prostředků nižší, než je článek poskytuje seznam mnoho polí na protokoly a jejich použití.</span><span class="sxs-lookup"><span data-stu-id="37af2-521">There is an article listed in the resources below that provides the list of the many fields in the logs and what they are used for.</span></span> <span data-ttu-id="37af2-522">Tady je seznam polí v pořadí:</span><span class="sxs-lookup"><span data-stu-id="37af2-522">Here is the list of fields in order:</span></span>

![Snímek polí v souboru protokolu](./media/storage-security-guide/image3.png)

<span data-ttu-id="37af2-524">Zajímají nás položky pro getblob – a jak jsou ověřeni, takže je třeba vyhledejte položky s typ operace "Get-Blob" a zkontrolujte stav žádosti o (4<sup>tý</sup> sloupec) a typ autorizace (8<sup>tý </sup> sloupce).</span><span class="sxs-lookup"><span data-stu-id="37af2-524">We're interested in the entries for GetBlob, and how they are authenticated, so we need to look for entries with operation-type "Get-Blob", and check the request-status (4<sup>th</sup> column) and the authorization-type (8<sup>th</sup> column).</span></span>

<span data-ttu-id="37af2-525">Například v několik prvních řádků v seznamu nahoře, je stav žádosti o "ÚSPĚCH" a typ autorizace je "ověřit".</span><span class="sxs-lookup"><span data-stu-id="37af2-525">For example, in the first few rows in the listing above, the request-status is "Success" and the authorization-type is "authenticated".</span></span> <span data-ttu-id="37af2-526">To znamená, že požadavek se ověřila pomocí klíče účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-526">This means the request was validated using the storage account key.</span></span>

#### <a name="how-are-my-blobs-being-authenticated"></a><span data-ttu-id="37af2-527">Jak jsou ověřovaného Moje objekty BLOB?</span><span class="sxs-lookup"><span data-stu-id="37af2-527">How are my blobs being authenticated?</span></span>
<span data-ttu-id="37af2-528">Máme tři případů, které jsme zájem.</span><span class="sxs-lookup"><span data-stu-id="37af2-528">We have three cases that we are interested in.</span></span>

1. <span data-ttu-id="37af2-529">Objekt blob je veřejná a je přístupný pomocí adresy URL bez sdíleného přístupového podpisu.</span><span class="sxs-lookup"><span data-stu-id="37af2-529">The blob is public and it is accessed using a URL without a Shared Access Signature.</span></span> <span data-ttu-id="37af2-530">V tomto případě stav žádosti o je "AnonymousSuccess" a "anonymní" je typ autorizace.</span><span class="sxs-lookup"><span data-stu-id="37af2-530">In this case, the request-status is "AnonymousSuccess" and the authorization-type is "anonymous".</span></span>

   <span data-ttu-id="37af2-531">1.0; 2015-11-17T02:01:29.0488963Z; Getblob –; **AnonymousSuccess**, 200, 124, 37; **Anonymní**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="37af2-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span></span>
2. <span data-ttu-id="37af2-532">Objekt blob je privátní a se použila se sdíleným přístupovým podpisem.</span><span class="sxs-lookup"><span data-stu-id="37af2-532">The blob is private and was used with a Shared Access Signature.</span></span> <span data-ttu-id="37af2-533">V tomto případě stav žádosti o je "SASSuccess" a "sas" je typ autorizace.</span><span class="sxs-lookup"><span data-stu-id="37af2-533">In this case, the request-status is "SASSuccess" and the authorization-type is "sas".</span></span>

   <span data-ttu-id="37af2-534">1.0; 2015-11-16T18:30:05.6556115Z; Getblob –; **SASSuccess**, 200, 416, 64; **SAS**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="37af2-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span></span>
3. <span data-ttu-id="37af2-535">Objekt blob je privátní a klíč úložiště použila k přístupu.</span><span class="sxs-lookup"><span data-stu-id="37af2-535">The blob is private and the storage key was used to access it.</span></span> <span data-ttu-id="37af2-536">V takovém případě je stav žádosti o "**úspěch**"a typ autorizace je"**ověřený**".</span><span class="sxs-lookup"><span data-stu-id="37af2-536">In this case, the request-status is "**Success**" and the authorization-type is "**authenticated**".</span></span>

   <span data-ttu-id="37af2-537">1.0; 2015-11-16T18:32:24.3174537Z; Getblob –; **Úspěch**; 206; 59; 22; **ověření**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="37af2-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span></span>

<span data-ttu-id="37af2-538">Můžete zobrazit a analyzovat tyto protokoly můžete použít Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="37af2-538">You can use the Microsoft Message Analyzer to view and analyze these logs.</span></span> <span data-ttu-id="37af2-539">Obsahuje možnosti Hledat a filtr.</span><span class="sxs-lookup"><span data-stu-id="37af2-539">It includes search and filter capabilities.</span></span> <span data-ttu-id="37af2-540">Například můžete chtít vyhledat instance getblob – jestli využití je co byste měli, tj. Zajistěte, aby někdo není přístup k účtu úložiště nesprávně.</span><span class="sxs-lookup"><span data-stu-id="37af2-540">For example, you might want to search for instances of GetBlob to see if the usage is what you expect, i.e. to make sure someone is not accessing your storage account inappropriately.</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-541">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-541">Resources</span></span>
* [<span data-ttu-id="37af2-542">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="37af2-542">Storage Analytics</span></span>](../storage-analytics.md)

  <span data-ttu-id="37af2-543">Tento článek je přehled analytika úložiště a povolit je.</span><span class="sxs-lookup"><span data-stu-id="37af2-543">This article is an overview of storage analytics and how to enable them.</span></span>
* [<span data-ttu-id="37af2-544">Formát úložiště analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="37af2-544">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/azure/hh343259.aspx)

  <span data-ttu-id="37af2-545">Tento článek ukazuje formát úložiště analýzy protokolů a v něm, podrobnosti dostupná pole, včetně ověřování typu, který určuje typ ověřování použité pro daný požadavek.</span><span class="sxs-lookup"><span data-stu-id="37af2-545">This article illustrates the Storage Analytics Log Format, and details the fields available therein, including authentication-type, which indicates the type of authentication used for the request.</span></span>
* [<span data-ttu-id="37af2-546">Monitorování účtu úložiště na portálu Azure</span><span class="sxs-lookup"><span data-stu-id="37af2-546">Monitor a Storage Account in the Azure portal</span></span>](../storage-monitor-storage-account.md)

  <span data-ttu-id="37af2-547">Tento článek ukazuje, jak nakonfigurovat sledování metrik a protokolování pro účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-547">This article shows how to configure monitoring of metrics and logging for a storage account.</span></span>
* [<span data-ttu-id="37af2-548">Začátku do konce Poradce při potížích s použitím Azure Storage Metrics a protokolování, AzCopy a Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="37af2-548">End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer</span></span>](../storage-e2e-troubleshooting.md)

  <span data-ttu-id="37af2-549">Tento článek pojednává o řešení problémů pomocí Storage Analytics a ukazuje, jak používat Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="37af2-549">This article talks about troubleshooting using the Storage Analytics and shows how to use the Microsoft Message Analyzer.</span></span>
* [<span data-ttu-id="37af2-550">Microsoft Message Analyzer operační Průvodce</span><span class="sxs-lookup"><span data-stu-id="37af2-550">Microsoft Message Analyzer Operating Guide</span></span>](https://technet.microsoft.com/library/jj649776.aspx)

  <span data-ttu-id="37af2-551">Tento článek je referenční dokumentace pro Microsoft Message Analyzer a obsahuje odkazy na kurz, rychlý start a funkce souhrnu.</span><span class="sxs-lookup"><span data-stu-id="37af2-551">This article is the reference for the Microsoft Message Analyzer and includes links to a tutorial, quick start, and feature summary.</span></span>

## <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="37af2-552">Sdílení prostředků mezi zdroji (CORS)</span><span class="sxs-lookup"><span data-stu-id="37af2-552">Cross-Origin Resource Sharing (CORS)</span></span>
### <a name="cross-domain-access-of-resources"></a><span data-ttu-id="37af2-553">Přístup do jiných domén prostředků</span><span class="sxs-lookup"><span data-stu-id="37af2-553">Cross-domain access of resources</span></span>
<span data-ttu-id="37af2-554">Při spuštění v jedné doméně webový prohlížeč provede požadavek HTTP pro prostředek z jiné domény, se nazývá žádosti HTTP nepůvodního zdroje.</span><span class="sxs-lookup"><span data-stu-id="37af2-554">When a web browser running in one domain makes an HTTP request for a resource from a different domain, this is called a cross-origin HTTP request.</span></span> <span data-ttu-id="37af2-555">Například stránky HTML z contoso.com odešle požadavek pro hostované na fabrikam.blob.core.windows.net jpeg.</span><span class="sxs-lookup"><span data-stu-id="37af2-555">For example, an HTML page served from contoso.com makes a request for a jpeg hosted on fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="37af2-556">Z bezpečnostních důvodů omezit prohlížeče HTTP žádostí napříč zdroji spustily z funkce skripty, jako je JavaScript.</span><span class="sxs-lookup"><span data-stu-id="37af2-556">For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts, such as JavaScript.</span></span> <span data-ttu-id="37af2-557">To znamená, že pokud určitý kód JavaScript na webové stránce v doméně contoso.com požádá o tomto jpeg na fabrikam.blob.core.windows.net, prohlížeč nebude žádosti.</span><span class="sxs-lookup"><span data-stu-id="37af2-557">This means that when some JavaScript code on a web page on contoso.com requests that jpeg on fabrikam.blob.core.windows.net, the browser will not allow the request.</span></span>

<span data-ttu-id="37af2-558">Co to má dělat s Azure Storage?</span><span class="sxs-lookup"><span data-stu-id="37af2-558">What does this have to do with Azure Storage?</span></span> <span data-ttu-id="37af2-559">Dobře, pokud ukládáte statické prostředky, jako jsou soubory dat JSON nebo XML v Blob Storage pomocí účtu úložiště volána Fabrikam, v doméně prostředků bude fabrikam.blob.core.windows.net a webové aplikace contoso.com nebudou moci přistupovat k nim pomocí JavaScript protože domény se liší.</span><span class="sxs-lookup"><span data-stu-id="37af2-559">Well, if you are storing static assets such as JSON or XML data files in Blob Storage using a storage account called Fabrikam, the domain for the assets will be fabrikam.blob.core.windows.net, and the contoso.com web application will not be able to access them using JavaScript because the domains are different.</span></span> <span data-ttu-id="37af2-560">Toto je true, pokud se pokoušíte volání jednoho služby Azure Storage – například Table Storage – které vrací data JSON, které mají být zpracovány klientem JavaScript.</span><span class="sxs-lookup"><span data-stu-id="37af2-560">This is also true if you're trying to call one of the Azure Storage Services – such as Table Storage – that return JSON data to be processed by the JavaScript client.</span></span>

#### <a name="possible-solutions"></a><span data-ttu-id="37af2-561">Možná řešení</span><span class="sxs-lookup"><span data-stu-id="37af2-561">Possible solutions</span></span>
<span data-ttu-id="37af2-562">Jeden způsob, jak to vyřešit je přiřadit fabrikam.blob.core.windows.net vlastní doménu jako "storage.contoso.com".</span><span class="sxs-lookup"><span data-stu-id="37af2-562">One way to resolve this is to assign a custom domain like "storage.contoso.com" to fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="37af2-563">Problém je, že lze přiřadit vlastní domény pouze pro jeden účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-563">The problem is that you can only assign that custom domain to one storage account.</span></span> <span data-ttu-id="37af2-564">Co když prostředky jsou uloženy ve více účtů úložiště?</span><span class="sxs-lookup"><span data-stu-id="37af2-564">What if the assets are stored in multiple storage accounts?</span></span>

<span data-ttu-id="37af2-565">Jiný způsob, jak to vyřešit je k dispozici webová aplikace sloužil jako proxy pro volání úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-565">Another way to resolve this is to have the web application act as a proxy for the storage calls.</span></span> <span data-ttu-id="37af2-566">To znamená, pokud odesíláte soubor do úložiště objektů Blob, webová aplikace by buď zapisuje místně a zkopírujte jej do úložiště objektů Blob nebo by všechny načtení do paměti a zapíše jej do úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="37af2-566">This means if you are uploading a file to Blob Storage, the web application would either write it locally and then copy it to Blob Storage, or it would read all of it into memory and then write it to Blob Storage.</span></span> <span data-ttu-id="37af2-567">Alternativně můžete napsat vyhrazené webové aplikace (například webového rozhraní API), která odešle soubory lokálně a zapisuje je do úložiště objektů Blob.</span><span class="sxs-lookup"><span data-stu-id="37af2-567">Alternately, you could write a dedicated web application (such as a Web API) that uploads the files locally and writes them to Blob Storage.</span></span> <span data-ttu-id="37af2-568">V obou případech je nutné účet pro tuto funkci při určování škálovatelnost potřebuje.</span><span class="sxs-lookup"><span data-stu-id="37af2-568">Either way, you have to account for that function when determining the scalability needs.</span></span>

#### <a name="how-can-cors-help"></a><span data-ttu-id="37af2-569">Jak může pomoci CORS?</span><span class="sxs-lookup"><span data-stu-id="37af2-569">How can CORS help?</span></span>
<span data-ttu-id="37af2-570">Úložiště Azure umožňuje povolit CORS – křížové sdílení prostředků původu.</span><span class="sxs-lookup"><span data-stu-id="37af2-570">Azure Storage allows you to enable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="37af2-571">Pro každý účet úložiště můžete zadat domén, které mají přístup k prostředkům v daném účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-571">For each storage account, you can specify domains that can access the resources in that storage account.</span></span> <span data-ttu-id="37af2-572">V našem případě uvedených výše jsme například povolení CORS v účtu úložiště fabrikam.blob.core.windows.net a nakonfigurovat ji pro povolení přístupu k contoso.com. Potom můžete contoso.com aplikace webové přímo přístup k prostředkům v fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="37af2-572">For example, in our case outlined above, we can enable CORS on the fabrikam.blob.core.windows.net storage account and configure it to allow access to contoso.com. Then the web application contoso.com can directly access the resources in fabrikam.blob.core.windows.net.</span></span>

<span data-ttu-id="37af2-573">Poznámka je, že CORS umožňuje přístup, ale neposkytuje ověřování, který je nutný pro všechny jiný veřejný přístup k prostředkům úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-573">One thing to note is that CORS allows access, but it does not provide authentication, which is required for all non-public access of storage resources.</span></span> <span data-ttu-id="37af2-574">To znamená, že objekty BLOB lze otevřít pouze, pokud jsou veřejné nebo zahrnete sdíleného přístupového podpisu je udělení příslušných oprávnění.</span><span class="sxs-lookup"><span data-stu-id="37af2-574">This means you can only access blobs if they are public or you include a Shared Access Signature giving you the appropriate permission.</span></span> <span data-ttu-id="37af2-575">Tabulky, fronty a soubory nemají veřejný přístup a vyžadují SAS.</span><span class="sxs-lookup"><span data-stu-id="37af2-575">Tables, queues, and files have no public access, and require a SAS.</span></span>

<span data-ttu-id="37af2-576">Ve výchozím nastavení je CORS na všechny služby zakázána.</span><span class="sxs-lookup"><span data-stu-id="37af2-576">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="37af2-577">CORS můžete povolit pomocí rozhraní REST API nebo knihovny klienta úložiště pro volání jedné z metod k nastavení zásad služby.</span><span class="sxs-lookup"><span data-stu-id="37af2-577">You can enable CORS by using the REST API or the storage client library to call one of the methods to set the service policies.</span></span> <span data-ttu-id="37af2-578">Pokud můžete udělat, můžete zahrnout CORS pravidlo, které je v kódu XML.</span><span class="sxs-lookup"><span data-stu-id="37af2-578">When you do that, you include a CORS rule, which is in XML.</span></span> <span data-ttu-id="37af2-579">Tady je příklad pravidla CORS, která byla nastavena pomocí operace nastavit vlastnosti služby pro službu Blob pro účet úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-579">Here's an example of a CORS rule that has been set using the Set Service Properties operation for the Blob Service for a storage account.</span></span> <span data-ttu-id="37af2-580">Můžete provést tuto operaci pomocí rozhraní API REST nebo Klientská knihovna pro úložiště pro úložiště Azure.</span><span class="sxs-lookup"><span data-stu-id="37af2-580">You can perform that operation using the storage client library or the REST APIs for Azure Storage.</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="37af2-581">Tady je co znamená každý řádek:</span><span class="sxs-lookup"><span data-stu-id="37af2-581">Here's what each row means:</span></span>

* <span data-ttu-id="37af2-582">**AllowedOrigins** sdělí které neodpovídající domény můžete požadovat a přijímat data ze služby storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-582">**AllowedOrigins** This tells which non-matching domains can request and receive data from the storage service.</span></span> <span data-ttu-id="37af2-583">To říká, že contoso.com a fabrikam.com můžete data žádosti z úložiště objektů Blob pro účet konkrétní úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-583">This says that both contoso.com and fabrikam.com can request data from Blob Storage for a specific storage account.</span></span> <span data-ttu-id="37af2-584">Tuto vlastnost nastavit na zástupný znak (\*) umožňující všechny domény pro přístup k žádosti.</span><span class="sxs-lookup"><span data-stu-id="37af2-584">You can also set this to a wildcard (\*) to allow all domains to access requests.</span></span>
* <span data-ttu-id="37af2-585">**AllowedMethods** Toto je seznam metod (příkazy požadavku HTTP), které lze použít při vytváření požadavku.</span><span class="sxs-lookup"><span data-stu-id="37af2-585">**AllowedMethods** This is the list of methods (HTTP request verbs) that can be used when making the request.</span></span> <span data-ttu-id="37af2-586">V tomto příkladu jsou povoleny pouze PUT a GET.</span><span class="sxs-lookup"><span data-stu-id="37af2-586">In this example, only PUT and GET are allowed.</span></span> <span data-ttu-id="37af2-587">To můžete nastavit na zástupný znak (\*) mají povolit všechny metody, který se má použít.</span><span class="sxs-lookup"><span data-stu-id="37af2-587">You can set this to a wildcard (\*) to allow all methods to be used.</span></span>
* <span data-ttu-id="37af2-588">**AllowedHeaders** Toto je seznam hlaviček požadavku, které doménu původu můžete zadat při vytváření požadavku.</span><span class="sxs-lookup"><span data-stu-id="37af2-588">**AllowedHeaders** This is the request headers that the origin domain can specify when making the request.</span></span> <span data-ttu-id="37af2-589">V tomto příkladu jsou povoleny všechny hlavičky metadata počínaje x-ms-meta-data x-ms-meta cíl a x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="37af2-589">In this example, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="37af2-590">Zástupný znak (\*) označuje, že je povolit všechny hlavičky začíná zadanou předponou.</span><span class="sxs-lookup"><span data-stu-id="37af2-590">The wildcard character (\*) indicates that any header beginning with the specified prefix is allowed.</span></span>
* <span data-ttu-id="37af2-591">**ExposedHeaders** to informuje o tom, které hlavičky odpovědi by měly být vystaveny v prohlížeči Issuer požadavku.</span><span class="sxs-lookup"><span data-stu-id="37af2-591">**ExposedHeaders** This tells which response headers should be exposed by the browser to the request issuer.</span></span> <span data-ttu-id="37af2-592">V tomto příkladu všechny hlavičky počínaje "x-ms - meta-" k dispozici.</span><span class="sxs-lookup"><span data-stu-id="37af2-592">In this example, any header starting with "x-ms-meta-" will be exposed.</span></span>
* <span data-ttu-id="37af2-593">**MaxAgeInSeconds** Toto je maximální množství času, že prohlížeč bude mezipaměti předběžný požadavek možnosti.</span><span class="sxs-lookup"><span data-stu-id="37af2-593">**MaxAgeInSeconds** This is the maximum amount of time that a browser will cache the preflight OPTIONS request.</span></span> <span data-ttu-id="37af2-594">(Další informace o předběžný požadavek, zkontrolujte, zda první následujícího článku.)</span><span class="sxs-lookup"><span data-stu-id="37af2-594">(For more information about the preflight request, check the first article below.)</span></span>

#### <a name="resources"></a><span data-ttu-id="37af2-595">Zdroje</span><span class="sxs-lookup"><span data-stu-id="37af2-595">Resources</span></span>
<span data-ttu-id="37af2-596">Další informace o CORS a jak jej povolit najdete v článku tyto prostředky.</span><span class="sxs-lookup"><span data-stu-id="37af2-596">For more information about CORS and how to enable it, please check out these resources.</span></span>

* [<span data-ttu-id="37af2-597">Podpora (CORS) pro služby Azure Storage na Azure.com sdílení prostředků různého původu</span><span class="sxs-lookup"><span data-stu-id="37af2-597">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services on Azure.com</span></span>](../storage-cors-support.md)

  <span data-ttu-id="37af2-598">Tento článek obsahuje přehled CORS a jak nastavit pravidla pro služby jiného úložiště.</span><span class="sxs-lookup"><span data-stu-id="37af2-598">This article provides an overview of CORS and how to set the rules for the different storage services.</span></span>
* [<span data-ttu-id="37af2-599">Podpora služby Azure Storage na webu MSDN (CORS) pro sdílení prostředků různého původu</span><span class="sxs-lookup"><span data-stu-id="37af2-599">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services on MSDN</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx)

  <span data-ttu-id="37af2-600">Toto je referenční dokumentaci k nástroji pro podporu CORS pro služby Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="37af2-600">This is the reference documentation for CORS support for the Azure Storage Services.</span></span> <span data-ttu-id="37af2-601">To obsahuje odkazy na články pro každou službu úložiště a ukazuje příklad a vysvětluje každý prvek v souboru CORS.</span><span class="sxs-lookup"><span data-stu-id="37af2-601">This has links to articles applying to each storage service, and shows an example and explains each element in the CORS file.</span></span>
* [<span data-ttu-id="37af2-602">Microsoft Azure Storage: Úvod CORS</span><span class="sxs-lookup"><span data-stu-id="37af2-602">Microsoft Azure Storage: Introducing CORS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/02/03/windows-azure-storage-introducing-cors.aspx)

  <span data-ttu-id="37af2-603">Toto je odkaz na článek počáteční blog uvedení CORS a zobrazující způsobu jeho použití.</span><span class="sxs-lookup"><span data-stu-id="37af2-603">This is a link to the initial blog article announcing CORS and showing how to use it.</span></span>

## <a name="frequently-asked-questions-about-azure-storage-security"></a><span data-ttu-id="37af2-604">Nejčastější dotazy o zabezpečení Azure Storage</span><span class="sxs-lookup"><span data-stu-id="37af2-604">Frequently asked questions about Azure Storage security</span></span>
1. <span data-ttu-id="37af2-605">**Jak můžete ověřit integritu objekty BLOB, které I mě přenosu do nebo z Azure Storage, když nelze použít protokol HTTPS?**</span><span class="sxs-lookup"><span data-stu-id="37af2-605">**How can I verify the integrity of the blobs I'm transferring into or out of Azure Storage if I can't use the HTTPS protocol?**</span></span>

   <span data-ttu-id="37af2-606">Pokud z nějakého důvodu, které je třeba používat protokol HTTP místo protokolu HTTPS a práci s objekty BLOB bloku, můžete použít MD5 kontroluje k ověření integrity objektů BLOB přenášení.</span><span class="sxs-lookup"><span data-stu-id="37af2-606">If for any reason you need to use HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking to help verify the integrity of the blobs being transferred.</span></span> <span data-ttu-id="37af2-607">To vám pomůže s ochranou z chyb sítě/transport layer, ale nemusí nutně jít s zprostředkující útoky.</span><span class="sxs-lookup"><span data-stu-id="37af2-607">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span>

   <span data-ttu-id="37af2-608">Pokud použijete protokol HTTPS, který poskytuje zabezpečení na úrovni přenosu, pak pomocí MD5 kontrola je redundantní a zbytečné.</span><span class="sxs-lookup"><span data-stu-id="37af2-608">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span>

   <span data-ttu-id="37af2-609">Další informace najdete v článku [přehled MD5 objektu Blob Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span><span class="sxs-lookup"><span data-stu-id="37af2-609">For more information, please check out the [Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span>
2. <span data-ttu-id="37af2-610">**Co o FIPS – dodržování předpisů pro USA Státní?**</span><span class="sxs-lookup"><span data-stu-id="37af2-610">**What about FIPS-Compliance for the U.S. Government?**</span></span>

   <span data-ttu-id="37af2-611">USA informace o zpracování FIPS (Federal Standard) definuje kryptografické algoritmy pro použití schváleno USA Federální vládou počítačích pro ochranu citlivá data.</span><span class="sxs-lookup"><span data-stu-id="37af2-611">The United States Federal Information Processing Standard (FIPS) defines cryptographic algorithms approved for use by U.S. Federal government computer systems for the protection of sensitive data.</span></span> <span data-ttu-id="37af2-612">Povolení FIPS režimu na Windows serveru nebo plochy informuje operačního systému se použije pouze ověřených algoritmem FIPS kryptografické algoritmy.</span><span class="sxs-lookup"><span data-stu-id="37af2-612">Enabling FIPS mode on a Windows server or desktop tells the OS that only FIPS-validated cryptographic algorithms should be used.</span></span> <span data-ttu-id="37af2-613">Pokud aplikace používá nevyhovující algoritmy, dojde k přerušení aplikace.</span><span class="sxs-lookup"><span data-stu-id="37af2-613">If an application uses non-compliant algorithms, the applications will break.</span></span> <span data-ttu-id="37af2-614">With.NET Framework verze 4.5.2 nebo vyšší, aplikace se automaticky nepřepne kryptografické algoritmy používat algoritmus kompatibilní se standardem FIPS, když je počítač v režimu FIPS.</span><span class="sxs-lookup"><span data-stu-id="37af2-614">With.NET Framework versions 4.5.2 or higher, the application automatically switches the cryptography algorithms to use FIPS-compliant algorithms when the computer is in FIPS mode.</span></span>

   <span data-ttu-id="37af2-615">Microsoft nechávají každého zákazníka můžete rozhodnout, jestli chcete povolit režim FIPS.</span><span class="sxs-lookup"><span data-stu-id="37af2-615">Microsoft leaves it up to each customer to decide whether to enable FIPS mode.</span></span> <span data-ttu-id="37af2-616">Věříme, že neexistuje žádný důvod poutavé pro zákazníky, kteří nejsou v souladu government předpisy a povolení režimu FIPS ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="37af2-616">We believe there is no compelling reason for customers who are not subject to government regulations to enable FIPS mode by default.</span></span>

   <span data-ttu-id="37af2-617">**Prostředky**</span><span class="sxs-lookup"><span data-stu-id="37af2-617">**Resources**</span></span>

* [<span data-ttu-id="37af2-618">Proč se není doporučujeme "Režimu FIPS" už</span><span class="sxs-lookup"><span data-stu-id="37af2-618">Why We're Not Recommending "FIPS Mode" Anymore</span></span>](http://blogs.technet.com/b/secguide/archive/2014/04/07/why-we-re-not-recommending-fips-mode-anymore.aspx)

  <span data-ttu-id="37af2-619">Tento článek na blogu shrnovat standardu FIPS a vysvětluje, proč nemáte umožňují režimu FIPS ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="37af2-619">This blog article gives an overview of FIPS and explains why they don't enable FIPS mode by default.</span></span>
* [<span data-ttu-id="37af2-620">FIPS 140 ověření</span><span class="sxs-lookup"><span data-stu-id="37af2-620">FIPS 140 Validation</span></span>](https://technet.microsoft.com/library/cc750357.aspx)

  <span data-ttu-id="37af2-621">Tento článek obsahuje informace o tom, jak produkty společnosti Microsoft a kryptografické moduly v souladu se standardem FIPS pro USA Federální vládou.</span><span class="sxs-lookup"><span data-stu-id="37af2-621">This article provides information on how Microsoft products and cryptographic modules comply with the FIPS standard for the U.S. Federal government.</span></span>
* [<span data-ttu-id="37af2-622">"Kryptografie systému: použití standardu FIPS kompatibilní s algoritmy pro šifrování, hašování a podpisování" důsledky nastavení zabezpečení v systému Windows XP a v novějších verzích systému Windows</span><span class="sxs-lookup"><span data-stu-id="37af2-622">"System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows</span></span>](https://support.microsoft.com/kb/811833)

  <span data-ttu-id="37af2-623">Tento článek pojednává o použití režimu FIPS ve starší počítače se systémem Windows.</span><span class="sxs-lookup"><span data-stu-id="37af2-623">This article talks about the use of FIPS mode in older Windows computers.</span></span>
