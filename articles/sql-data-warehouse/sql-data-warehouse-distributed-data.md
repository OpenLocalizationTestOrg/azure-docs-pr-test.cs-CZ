---
title: "aaaHow distribuované funguje dat v Azure SQL Data Warehouse | Microsoft Docs"
description: "Zjistěte, jak distribuci dat pro masivně paralelní zpracování MPP a hello možností distribuce tabulek v Azure SQL Data Warehouse a Parallel Data Warehouse."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 9a712d8d5251e4391ede245105918283aaa4b193
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="617aa-103">Rozložení dat a distribuované tabulky pro masivně paralelní zpracování MPP)</span><span class="sxs-lookup"><span data-stu-id="617aa-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="617aa-104">Zjistěte, jak distribuci dat uživatele v Azure SQL Data Warehouse a Parallel Data Warehouse, které jsou systémy masivně paralelní zpracování (MPP) společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="617aa-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="617aa-105">Návrh vašeho datového skladu toouse distribuovaných datech efektivně pomáhá vám tooachieve hello zpracování dotazů výhod hello architektura MPP.</span><span class="sxs-lookup"><span data-stu-id="617aa-105">Designing your data warehouse toouse distributed data effectively helps you tooachieve hello query processing benefits of hello MPP architecture.</span></span> <span data-ttu-id="617aa-106">Několik možností návrhu databáze může mít významný dopad na zlepšení výkonu dotazů.</span><span class="sxs-lookup"><span data-stu-id="617aa-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="617aa-107">Azure SQL Data Warehouse a Parallel Data Warehouse pomocí hello návrh stejné Massively Parallel Processing (MPP), ale mají několik rozdílů kvůli hello základní platformy.</span><span class="sxs-lookup"><span data-stu-id="617aa-107">Azure SQL Data Warehouse and Parallel Data Warehouse use hello same Massively Parallel Processing (MPP) design, but they have a few differences because of hello underlying platform.</span></span> <span data-ttu-id="617aa-108">SQL Data Warehouse je platforma jako služba (PaaS), která běží na Azure.</span><span class="sxs-lookup"><span data-stu-id="617aa-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="617aa-109">Parallel Data Warehouse se spustí na Analytics Platform System (AP), což je místní zařízení, která běží na systému Windows Server.</span><span class="sxs-lookup"><span data-stu-id="617aa-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="617aa-110">Co je rozložení dat?</span><span class="sxs-lookup"><span data-stu-id="617aa-110">What is distributed data?</span></span>
<span data-ttu-id="617aa-111">V SQL Data Warehouse a Parallel Data Warehouse distribuované data představují toouser data uložená na více místech napříč hello MPP systému.</span><span class="sxs-lookup"><span data-stu-id="617aa-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers toouser data that is stored in multiple locations across hello MPP system.</span></span> <span data-ttu-id="617aa-112">Každé z těchto umístění funguje jako nezávislé úložiště a výpočetní jednotky používající dotazy na jeho část dat hello.</span><span class="sxs-lookup"><span data-stu-id="617aa-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of hello data.</span></span> <span data-ttu-id="617aa-113">Rozložení dat je zásadní toorunning dotazy v paralelní tooachieve vysokého výkonu dotazu.</span><span class="sxs-lookup"><span data-stu-id="617aa-113">Distributed data is fundamental toorunning queries in parallel tooachieve high query performance.</span></span>

<span data-ttu-id="617aa-114">toodistribute dat datového skladu hello přiřadí každý řádek tabulky tooone distribuované umístění uživatele.</span><span class="sxs-lookup"><span data-stu-id="617aa-114">toodistribute data, hello data warehouse assigns each row of a user table tooone distributed location.</span></span>  <span data-ttu-id="617aa-115">Můžete distribuovat tabulky s způsobu distribuce hash nebo metodu kruhového dotazování.</span><span class="sxs-lookup"><span data-stu-id="617aa-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="617aa-116">Dobrý den distribution – metoda je zadaný v příkazu CREATE TABLE hello.</span><span class="sxs-lookup"><span data-stu-id="617aa-116">hello distribution method is specified in hello CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="617aa-117">Distribuovat algoritmu hash tabulky</span><span class="sxs-lookup"><span data-stu-id="617aa-117">Hash-distributed tables</span></span>
<span data-ttu-id="617aa-118">Hello následující diagram znázorňuje, jak získá úplnou (tabulka distribuované) uložené jako tabulku distribuovat algoritmu hash.</span><span class="sxs-lookup"><span data-stu-id="617aa-118">hello following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="617aa-119">Deterministické funkce přiřadí distribuční tooone toobelong každý řádek.</span><span class="sxs-lookup"><span data-stu-id="617aa-119">A deterministic function assigns each row toobelong tooone distribution.</span></span> <span data-ttu-id="617aa-120">V definici tabulky hello některý ze sloupců hello je určený jako hello distribuční sloupce.</span><span class="sxs-lookup"><span data-stu-id="617aa-120">In hello table definition, one of hello columns is designated as hello distribution column.</span></span> <span data-ttu-id="617aa-121">Funkce hash Hello používá hodnotu hello v hello distribuční sloupce tooassign distribuční tooa každý řádek.</span><span class="sxs-lookup"><span data-stu-id="617aa-121">hello hash function uses hello value in hello distribution column tooassign each row tooa distribution.</span></span>

<span data-ttu-id="617aa-122">Existují důležité informace o výkonu pro výběr hello distribuční sloupce, například odlišnosti, zkosení dat a hello typy dotazů spustit v systému hello.</span><span class="sxs-lookup"><span data-stu-id="617aa-122">There are performance considerations for hello selection of a distribution column, such as distinctness, data skew, and hello types of queries run on hello system.</span></span>

<span data-ttu-id="617aa-123">![Tabulka distribuované](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "distribuované tabulky")</span><span class="sxs-lookup"><span data-stu-id="617aa-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="617aa-124">Každý řádek patří tooone distribuce.</span><span class="sxs-lookup"><span data-stu-id="617aa-124">Each row belongs tooone distribution.</span></span>  
* <span data-ttu-id="617aa-125">Algoritmus hash deterministický přiřadí distribuční tooone každý řádek.</span><span class="sxs-lookup"><span data-stu-id="617aa-125">A deterministic hash algorithm assigns each row tooone distribution.</span></span>  
* <span data-ttu-id="617aa-126">Hello počet řádků tabulky na distribuční se liší, jak je znázorněno pomocí různých velikostí hello tabulek.</span><span class="sxs-lookup"><span data-stu-id="617aa-126">hello number of table rows per distribution varies as shown by hello different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="617aa-127">Distribuované tabulky pomocí kruhového dotazování</span><span class="sxs-lookup"><span data-stu-id="617aa-127">Round-robin distributed tables</span></span>
<span data-ttu-id="617aa-128">Distribuované tabulku kruhového dotazování distribuuje hello řádky přiřazením každý řádek tooa distribuční sekvenční způsobem.</span><span class="sxs-lookup"><span data-stu-id="617aa-128">A round-robin distributed table distributes hello rows by assigning each row tooa distribution in a sequential manner.</span></span> <span data-ttu-id="617aa-129">Je rychlý tooload data do tabulky pomocí kruhového dotazování, ale může být pomalejší výkon dotazů.</span><span class="sxs-lookup"><span data-stu-id="617aa-129">It is quick tooload data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="617aa-130">Připojení pomocí kruhového dotazování tabulky obvykle vyžaduje promísení hello řádky tooenable hello dotazu tooproduce přesné výsledky, který přebírá čas.</span><span class="sxs-lookup"><span data-stu-id="617aa-130">Joining a round-robin table usually requires reshuffling hello rows tooenable hello query tooproduce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="617aa-131">Umístění distribuované úložiště se nazývají distribuce</span><span class="sxs-lookup"><span data-stu-id="617aa-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="617aa-132">Každé distribuované umístění se nazývá distribuce.</span><span class="sxs-lookup"><span data-stu-id="617aa-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="617aa-133">Když dotazu běží paralelně, každý distribuční provede dotaz SQL na jeho část dat hello.</span><span class="sxs-lookup"><span data-stu-id="617aa-133">When a query runs in parallel, each distribution performs a SQL query on its portion of hello data.</span></span> <span data-ttu-id="617aa-134">SQL Data Warehouse používá databázi SQL toorun hello dotazu.</span><span class="sxs-lookup"><span data-stu-id="617aa-134">SQL Data Warehouse uses SQL Database toorun hello query.</span></span> <span data-ttu-id="617aa-135">Parallel Data Warehouse používá SQL Server toorun hello dotaz.</span><span class="sxs-lookup"><span data-stu-id="617aa-135">Parallel Data Warehouse uses SQL Server toorun hello query.</span></span> <span data-ttu-id="617aa-136">Tento návrh architektury shared nothing je základní tooachieving škálování paralelní výpočty.</span><span class="sxs-lookup"><span data-stu-id="617aa-136">This shared-nothing architecture design is fundamental tooachieving scale-out parallel computing.</span></span>

### <a name="can-i-view-hello-distributions"></a><span data-ttu-id="617aa-137">Můžete zobrazit hello distribuce?</span><span class="sxs-lookup"><span data-stu-id="617aa-137">Can I view hello distributions?</span></span>
<span data-ttu-id="617aa-138">Každý distribuční má ID distribuce a je viditelný v zobrazeních systému, které se týkají tooSQL datového skladu a Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="617aa-138">Each distribution has a distribution ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="617aa-139">Můžete použít výkon dotazů hello distribuční ID tootroubleshoot a jiné problémy.</span><span class="sxs-lookup"><span data-stu-id="617aa-139">You can use hello distribution ID tootroubleshoot query performance and other problems.</span></span> <span data-ttu-id="617aa-140">Seznam hello systémová zobrazení, naleznete v části hello [MPP systémové zobrazení](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="617aa-140">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="617aa-141">Rozdíl mezi distribučním a výpočetního uzlu</span><span class="sxs-lookup"><span data-stu-id="617aa-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="617aa-142">Distribuce je základní jednotkou hello pro ukládání dat v distribuované a zpracování paralelní dotazy.</span><span class="sxs-lookup"><span data-stu-id="617aa-142">A distribution is hello basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="617aa-143">Distribuce se seskupují do výpočetních uzlů.</span><span class="sxs-lookup"><span data-stu-id="617aa-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="617aa-144">Každý výpočetní uzel sleduje jeden nebo více distribuce.</span><span class="sxs-lookup"><span data-stu-id="617aa-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="617aa-145">Analytics Platform System používá jako součást centrální hello hardwaru architektura a škálování funkcí výpočetních uzlů.</span><span class="sxs-lookup"><span data-stu-id="617aa-145">Analytics Platform System uses Compute nodes as a central component of hello hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="617aa-146">Vždy používá osm distribuce na výpočetním uzlu, jak je vidět v diagramu hello u tabulek se distribuovat algoritmu hash.</span><span class="sxs-lookup"><span data-stu-id="617aa-146">It always uses eight distributions per Compute node, as shown in hello diagram for hash-distributed tables.</span></span> <span data-ttu-id="617aa-147">Dobrý den počet výpočetních uzlů a proto hello počet distribuce, je dáno hello počet výpočetních uzlů, které jste si koupili pro hello zařízení.</span><span class="sxs-lookup"><span data-stu-id="617aa-147">hello number of Compute nodes, and therefore hello number of distributions, is determined by hello number of Compute nodes you purchase for hello appliance.</span></span> <span data-ttu-id="617aa-148">Například pokud si koupíte osm výpočetní uzly, získáte 64 distribuce (8 výpočetní uzly x 8 distribuce/uzel).</span><span class="sxs-lookup"><span data-stu-id="617aa-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="617aa-149">SQL Data Warehouse má pevný počet 60 distribuce a flexibilní počet výpočetních uzlů.</span><span class="sxs-lookup"><span data-stu-id="617aa-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="617aa-150">Hello výpočetní uzly jsou implementovány pomocí Azure výpočetních a paměťových prostředků.</span><span class="sxs-lookup"><span data-stu-id="617aa-150">hello Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="617aa-151">Hello počet výpočetních uzlů můžete změnit podle zatížení služby back-end toohello a hello výpočetní kapacity (Dwu) zadejte pro hello datového skladu.</span><span class="sxs-lookup"><span data-stu-id="617aa-151">hello number of Compute nodes can change according toohello backend service workload and hello computing capacity (DWUs) you specify for hello data warehouse.</span></span> <span data-ttu-id="617aa-152">Když se změní hello počet výpočetních uzlů, změní se také hello počet distribuce na výpočetním uzlu.</span><span class="sxs-lookup"><span data-stu-id="617aa-152">When hello number of Compute nodes changes, hello number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-hello-compute-nodes"></a><span data-ttu-id="617aa-153">Můžete zobrazit hello výpočetní uzly?</span><span class="sxs-lookup"><span data-stu-id="617aa-153">Can I view hello Compute nodes?</span></span>
<span data-ttu-id="617aa-154">Každý výpočetní uzel obsahuje ID uzlu a je viditelný v zobrazeních systému, které se týkají tooSQL datového skladu a Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="617aa-154">Each Compute node has a node ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="617aa-155">Uvidíte hello výpočetního uzlu tak, že vyhledá hello node_id sloupec v systémových zobrazeních, jejichž názvy začínají řetězcem sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="617aa-155">You can see hello Compute node by looking for hello node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="617aa-156">Seznam hello systémová zobrazení, naleznete v části hello [MPP systémové zobrazení](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="617aa-156">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="617aa-157"><a name="Replicated"></a>Replikované tabulky</span><span class="sxs-lookup"><span data-stu-id="617aa-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="617aa-158">Obsahuje tabulku, která se replikují plně kopie hello tabulky uložené na každém výpočetním uzlu.</span><span class="sxs-lookup"><span data-stu-id="617aa-158">A table that is replicated has a fully copy of hello table stored on each Compute node.</span></span> <span data-ttu-id="617aa-159">Replikace tabulku odebere hello nutné tootransfer data mezi výpočetní uzly před spojení nebo agregace.</span><span class="sxs-lookup"><span data-stu-id="617aa-159">Replicating a table removes hello need tootransfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="617aa-160">Replikované tabulky lze provést pomocí malé tabulky pouze z důvodu hello úložiště navíc vyžaduje toostore hello úplné tabulky na každém výpočetním uzlu.</span><span class="sxs-lookup"><span data-stu-id="617aa-160">Replicated tables are only feasible with small tables because of hello extra storage required toostore hello full table on each compute node.</span></span>  

<span data-ttu-id="617aa-161">Hello následující diagram znázorňuje replikované tabulky, který je uložený na každém výpočetním uzlu.</span><span class="sxs-lookup"><span data-stu-id="617aa-161">hello following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="617aa-162">Hello replikované tabulky pro SQL Data Warehouse je plně zkopírovaný tooa distribuční databázi na každém výpočetním uzlu.</span><span class="sxs-lookup"><span data-stu-id="617aa-162">For SQL Data Warehouse, hello replicated table is fully copied tooa distribution database on each Compute node.</span></span> <span data-ttu-id="617aa-163">Parallel Data Warehouse replikované tabulce hello ukládají na všechny disky přiřazené toohello výpočetním uzlu.</span><span class="sxs-lookup"><span data-stu-id="617aa-163">For Parallel Data Warehouse, hello replicated table is stored across all disks assigned toohello Compute node.</span></span>  <span data-ttu-id="617aa-164">Tato strategie disku je implementována pomocí skupin souborů systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="617aa-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="617aa-165">![Replikované tabulky](media/sql-data-warehouse-distributed-data/replicated-table.png "replikované tabulky")</span><span class="sxs-lookup"><span data-stu-id="617aa-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="617aa-166">Další kroky</span><span class="sxs-lookup"><span data-stu-id="617aa-166">Next steps</span></span>
<span data-ttu-id="617aa-167">efektivní, najdete v části tabulky toouse distribuované [distribuci tabulek v SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span><span class="sxs-lookup"><span data-stu-id="617aa-167">toouse distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  

