---
title: "plánování pro aplikace Service Fabric aaaCapacity | Microsoft Docs"
description: "Popisuje, jak tooidentify hello počet výpočetních uzlů, které jsou potřebné pro aplikace Service Fabric"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a><span data-ttu-id="10e1c-103">Plánování kapacity pro aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="10e1c-103">Capacity planning for Service Fabric applications</span></span>
<span data-ttu-id="10e1c-104">Tento dokument se naučíte, jak tooestimate hello množství prostředků (procesory, paměť RAM, disku úložiště) je nutné toorun aplikace Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="10e1c-104">This document teaches you how tooestimate hello amount of resources (CPUs, RAM, disk storage) you need toorun your Azure Service Fabric applications.</span></span> <span data-ttu-id="10e1c-105">Je běžné, že vaše požadavky toochange prostředků v čase.</span><span class="sxs-lookup"><span data-stu-id="10e1c-105">It is common for your resource requirements toochange over time.</span></span> <span data-ttu-id="10e1c-106">Několik prostředků se obvykle vyžadují, jako je vývoj/testování vaší služby a pak vyžadují více prostředků, jak můžete přejít do produkčního prostředí a aplikace zvětšování popularita.</span><span class="sxs-lookup"><span data-stu-id="10e1c-106">You typically require few resources as you develop/test your service, and then require more resources as you go into production and your application grows in popularity.</span></span> <span data-ttu-id="10e1c-107">Při návrhu vaší aplikace, pečlivě promyslete hello dlouhodobé požadavky a rozhodování, které umožňují vaší služby tooscale toomeet vysoké poptávka.</span><span class="sxs-lookup"><span data-stu-id="10e1c-107">When you design your application, think through hello long-term requirements and make choices that allow your service tooscale toomeet high customer demand.</span></span>

 <span data-ttu-id="10e1c-108">Když vytvoříte cluster Service Fabric, je rozhodnout, jaké druhy virtuální počítače (VM) se skládá hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="10e1c-108">When you create a Service Fabric cluster, you decide what kinds of virtual machines (VMs) make up hello cluster.</span></span> <span data-ttu-id="10e1c-109">Každý virtuální počítač se dodává s omezenou dobu prostředky v podobě hello procesorů (jader a rychlost), šířku pásma sítě, paměť RAM a diskového úložiště.</span><span class="sxs-lookup"><span data-stu-id="10e1c-109">Each VM comes with a limited amount of resources in hello form of CPUs (cores and speed), network bandwidth, RAM, and disk storage.</span></span> <span data-ttu-id="10e1c-110">S růstem vaší služby v čase, můžete upgradovat tooVMs, které nabízejí větší prostředky nebo přidejte další tooyour cluster virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-110">As your service grows over time, you can upgrade tooVMs that offer greater resources and/or add more VMs tooyour cluster.</span></span> <span data-ttu-id="10e1c-111">hello toodo pozdější, můžete musí architektury služby původně, ho můžete využít výhod nové virtuální počítače, které se přidají dynamicky toohello clusteru.</span><span class="sxs-lookup"><span data-stu-id="10e1c-111">toodo hello latter, you must architect your service initially so it can take advantage of new VMs that get dynamically added toohello cluster.</span></span>

<span data-ttu-id="10e1c-112">Některé služby spravovat málo toono data v hello vlastních virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-112">Some services manage little toono data on hello VMs themselves.</span></span> <span data-ttu-id="10e1c-113">Plánování pro tyto služby by měla soustředit především na výkon, což znamená, výběr hello kapacity proto vhodné procesorů (jader a rychlost) hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-113">Therefore, capacity planning for these services should focus primarily on performance, which means selecting hello appropriate CPUs (cores and speed) of hello VMs.</span></span> <span data-ttu-id="10e1c-114">Kromě toho byste měli zvážit šířky pásma sítě, včetně jak často dochází k síťové přenosy a kolik dat je přenosu.</span><span class="sxs-lookup"><span data-stu-id="10e1c-114">In addition, you should consider network bandwidth, including how frequently network transfers are occurring and how much data is being transferred.</span></span> <span data-ttu-id="10e1c-115">Pokud vaše služba potřebuje tooperform a taky zvýší využití služby, můžete přidat další toohello cluster virtuálních počítačů a požadavků sítě hello Vyrovnávání zatížení v rámci všech virtuálních počítačů hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-115">If your service needs tooperform well as service usage increases, you can add more VMs toohello cluster and load balance hello network requests across all hello VMs.</span></span>

<span data-ttu-id="10e1c-116">Pro služby, které spravovat velké objemy dat na hello virtuálních počítačů měli primárně na velikosti zaměřit plánování kapacity.</span><span class="sxs-lookup"><span data-stu-id="10e1c-116">For services that manage large amounts of data on hello VMs, capacity planning should focus primarily on size.</span></span> <span data-ttu-id="10e1c-117">Proto měli pečlivě zvážit hello kapacitu paměti RAM a disku úložiště Virtuálního počítače hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-117">Thus, you should carefully consider hello capacity of hello VM's RAM and disk storage.</span></span> <span data-ttu-id="10e1c-118">systém správy Hello virtuální paměti v systému Windows umožňuje vypadat RAM tooapplication kód místa na disku.</span><span class="sxs-lookup"><span data-stu-id="10e1c-118">hello virtual memory management system in Windows makes disk space look like RAM tooapplication code.</span></span> <span data-ttu-id="10e1c-119">Kromě toho poskytuje modulu runtime Service Fabric hello inteligentní stránkování zachovat data pouze aktivní v paměti a přesunutí toodisk pomaleji přístupná data hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-119">In addition, hello Service Fabric runtime provides smart paging keeping only hot data in memory and moving hello cold data toodisk.</span></span> <span data-ttu-id="10e1c-120">Aplikace můžou proto používat více paměti, než je fyzicky k dispozici na hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-120">Applications can thus use more memory than is physically available on hello VM.</span></span> <span data-ttu-id="10e1c-121">S víc paměti RAM zvyšuje výkon, jednoduše, vzhledem k tomu, že hello virtuálních počítačů můžete ponechat další diskového úložiště v paměti RAM.</span><span class="sxs-lookup"><span data-stu-id="10e1c-121">Having more RAM simply increases performance, since hello VM can keep more disk storage in RAM.</span></span> <span data-ttu-id="10e1c-122">Hello vyberete virtuální počítač by měl mít data hello dostatečně velké na to toostore disku, které chcete na hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-122">hello VM you select should have a disk large enough toostore hello data that you want on hello VM.</span></span> <span data-ttu-id="10e1c-123">Podobně hello virtuální počítač by měl mít dostatek paměti RAM tooprovide vám hello výkonu, které očekáváte.</span><span class="sxs-lookup"><span data-stu-id="10e1c-123">Similarly, hello VM should have enough RAM tooprovide you with hello performance you desire.</span></span> <span data-ttu-id="10e1c-124">Pokud časem naroste data vaší služby, můžete přidat více virtuálních počítačů toohello clusteru a oddíl hello dat napříč všechny virtuální počítače hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-124">If your service's data grows over time, you can add more VMs toohello cluster and partition hello data across all hello VMs.</span></span>

## <a name="determine-how-many-nodes-you-need"></a><span data-ttu-id="10e1c-125">Určit, kolik uzly, budete potřebovat</span><span class="sxs-lookup"><span data-stu-id="10e1c-125">Determine how many nodes you need</span></span>
<span data-ttu-id="10e1c-126">Vytváření oddílů služby vám umožní tooscale dat služby.</span><span class="sxs-lookup"><span data-stu-id="10e1c-126">Partitioning your service allows you tooscale out your service's data.</span></span> <span data-ttu-id="10e1c-127">Další informace o vytváření oddílů, najdete v části [dělení Service Fabric](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="10e1c-127">For more information on partitioning, see [Partitioning Service Fabric](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="10e1c-128">Každý oddíl se musí vejít do jednoho virtuálního počítače, ale více oddílů (malé) mohou být umístěny na jeden virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="10e1c-128">Each partition must fit within a single VM, but multiple (small) partitions can be placed on a single VM.</span></span> <span data-ttu-id="10e1c-129">Ano s více oddíly malé vám dává větší flexibilitu, než má několik větší oddíly.</span><span class="sxs-lookup"><span data-stu-id="10e1c-129">So, having more small partitions gives you greater flexibility than having a few larger partitions.</span></span> <span data-ttu-id="10e1c-130">kompromis Hello je, že spousta oddíly zvyšuje režii Service Fabric a napříč oddíly nelze provést zpracovaných operací.</span><span class="sxs-lookup"><span data-stu-id="10e1c-130">hello trade-off is that having lots of partitions increases Service Fabric overhead and you cannot perform transacted operations across partitions.</span></span> <span data-ttu-id="10e1c-131">Je zde také další potenciální síťový provoz Pokud kódu služby často potřebuje tooaccess kusy data, která za provozu v různých oddílů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-131">There is also more potential network traffic if your service code frequently needs tooaccess pieces of data that live in different partitions.</span></span> <span data-ttu-id="10e1c-132">Při navrhování vaší služby, měli pečlivě zvažte tyto výhody a nevýhody tooarrive na efektivní strategie dělení.</span><span class="sxs-lookup"><span data-stu-id="10e1c-132">When designing your service, you should carefully consider these pros and cons tooarrive at an effective partitioning strategy.</span></span>

<span data-ttu-id="10e1c-133">Předpokládejme, že aplikace má jeden stavové služby, která má velikost úložiště očekáváte, že toogrow tooDB_Size GB v roce.</span><span class="sxs-lookup"><span data-stu-id="10e1c-133">Let's assume your application has a single stateful service that has a store size that you expect toogrow tooDB_Size GB in a year.</span></span> <span data-ttu-id="10e1c-134">Jste ochotni tooadd další aplikace (a oddíly) jako prostředí růstu nad rámec tohoto roku.</span><span class="sxs-lookup"><span data-stu-id="10e1c-134">You are willing tooadd more applications (and partitions) as you experience growth beyond that year.</span></span>  <span data-ttu-id="10e1c-135">Hello replikace faktor (RF), která určuje hello počet replik pro vaše služba ovlivňuje hello celkový DB_Size.</span><span class="sxs-lookup"><span data-stu-id="10e1c-135">hello replication factor (RF), which determines hello number of replicas for your service impacts hello total DB_Size.</span></span> <span data-ttu-id="10e1c-136">Hello celkový DB_Size napříč všechny repliky je hello násobí hodnotou DB_Size Multi-Factor replikace.</span><span class="sxs-lookup"><span data-stu-id="10e1c-136">hello total DB_Size across all replicas is hello Replication Factor multiplied by DB_Size.</span></span>  <span data-ttu-id="10e1c-137">Node_Size představuje místa na disku hello/RAM na uzel chcete toouse pro vaši službu.</span><span class="sxs-lookup"><span data-stu-id="10e1c-137">Node_Size represents hello disk space/RAM per node you want toouse for your service.</span></span> <span data-ttu-id="10e1c-138">Pro zajištění nejlepšího výkonu by měl hello DB_Size začlenit do paměti mezi hello clusteru a Node_Size, který je kolem hello RAM hello by měl být zvolen virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="10e1c-138">For best performance, hello DB_Size should fit into memory across hello cluster, and a Node_Size that is around hello RAM of hello VM should be chosen.</span></span> <span data-ttu-id="10e1c-139">Přidělí Node_Size, která je větší než hello kapacitu paměti RAM, se spoléhat na hello stránkování poskytované modulu runtime Service Fabric hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-139">By allocating a Node_Size that is larger than hello RAM capacity, you are relying on hello paging provided by hello Service Fabric runtime.</span></span> <span data-ttu-id="10e1c-140">Výkon vašich proto nemusí být optimální, pokud celého datového považuje za toobe aktivní (od pak hello dat je stránkovaného vstup/výstup).</span><span class="sxs-lookup"><span data-stu-id="10e1c-140">Thus, your performance may not be optimal if your entire data is considered toobe hot (since then hello data is paged in/out).</span></span> <span data-ttu-id="10e1c-141">Pro mnoho služeb, kde je aktivní pouze část hello dat, je však cenově výhodnější.</span><span class="sxs-lookup"><span data-stu-id="10e1c-141">However, for many services where only a fraction of hello data is hot, it is more cost-effective.</span></span>

<span data-ttu-id="10e1c-142">Hello počet uzlů, které jsou potřebné pro maximální výkon můžete vypočítat následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="10e1c-142">hello number of nodes required for maximum performance can be computed as follows:</span></span>

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a><span data-ttu-id="10e1c-143">Účet pro růst</span><span class="sxs-lookup"><span data-stu-id="10e1c-143">Account for growth</span></span>
<span data-ttu-id="10e1c-144">Můžete chtít toocompute hello počet uzlů podle hello DB_Size, které očekáváte, že vaše služba toogrow, kromě toohello DB_Size, které začne s.</span><span class="sxs-lookup"><span data-stu-id="10e1c-144">You may want toocompute hello number of nodes based on hello DB_Size that you expect your service toogrow to, in addition toohello DB_Size that you began with.</span></span> <span data-ttu-id="10e1c-145">Potom růst hello počet uzlů s růstem vaší služby, aby nejsou předimenzování hello počet uzlů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-145">Then, grow hello number of nodes as your service grows so that you are not over-provisioning hello number of nodes.</span></span> <span data-ttu-id="10e1c-146">Ale hello počet oddílů by měla být založena na hello počet uzlů, které jsou potřebné, pokud používáte služby v maximální růstu.</span><span class="sxs-lookup"><span data-stu-id="10e1c-146">But hello number of partitions should be based on hello number of nodes that are needed when you're running your service at maximum growth.</span></span>

<span data-ttu-id="10e1c-147">Ho je dobré toohave některé další počítače, které jsou k dispozici kdykoli tak, aby bylo možné zpracovat všechny neočekávané špičky nebo selhání, (například pokud několika virtuálními počítači přejděte).</span><span class="sxs-lookup"><span data-stu-id="10e1c-147">It is good toohave some extra machines available at any time so that you can handle any unexpected spikes or failure (for example, if a few VMs go down).</span></span>  <span data-ttu-id="10e1c-148">Při hello velmi kapacity by měl být určen pomocí vaší očekávané špičky, je výchozí bod tooreserve několik navíc za virtuální počítače (5-10 procent navíc).</span><span class="sxs-lookup"><span data-stu-id="10e1c-148">While hello extra capacity should be determined by using your expected spikes, a starting point is tooreserve a few extra VMs (5-10 percent extra).</span></span>

<span data-ttu-id="10e1c-149">Hello předchozí předpokládá jednu stavové služby.</span><span class="sxs-lookup"><span data-stu-id="10e1c-149">hello preceding assumes a single stateful service.</span></span> <span data-ttu-id="10e1c-150">Pokud máte více než jeden stavové služby, je třeba tooadd hello DB_Size přidružené hello jiných služeb do rovnice hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-150">If you have more than one stateful service, you have tooadd hello DB_Size associated with hello other services into hello equation.</span></span> <span data-ttu-id="10e1c-151">Alternativně můžete vypočítat hello počet uzlů samostatně pro každou stavové služby.</span><span class="sxs-lookup"><span data-stu-id="10e1c-151">Alternatively, you can compute hello number of nodes separately for each stateful service.</span></span>  <span data-ttu-id="10e1c-152">Vaše služba může mít repliky nebo oddíly, které nejsou spárovány.</span><span class="sxs-lookup"><span data-stu-id="10e1c-152">Your service may have replicas or partitions that aren't balanced.</span></span> <span data-ttu-id="10e1c-153">Uvědomte si, že oddíly mohou mít i více dat než jiné.</span><span class="sxs-lookup"><span data-stu-id="10e1c-153">Keep in mind that partitions may also have more data than others.</span></span> <span data-ttu-id="10e1c-154">Další informace o vytváření oddílů, najdete v části [dělení článek o osvědčených postupech](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="10e1c-154">For more information on partitioning, see [partitioning article on best practices](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="10e1c-155">Hello předchozí rovnice je však oddíl a repliky lhostejné, protože Service Fabric zajistí, že hello repliky jsou rozprostřeny mezi uzly hello optimalizovaným způsobem.</span><span class="sxs-lookup"><span data-stu-id="10e1c-155">However, hello preceding equation is partition and replica agnostic, because Service Fabric ensures that hello replicas are spread out among hello nodes in an optimized manner.</span></span>

## <a name="use-a-spreadsheet-for-cost-calculation"></a><span data-ttu-id="10e1c-156">Používání tabulky pro výpočet nákladů</span><span class="sxs-lookup"><span data-stu-id="10e1c-156">Use a spreadsheet for cost calculation</span></span>
<span data-ttu-id="10e1c-157">Nyní ve vzorci hello přidejme některé reálná čísla.</span><span class="sxs-lookup"><span data-stu-id="10e1c-157">Now let's put some real numbers in hello formula.</span></span> <span data-ttu-id="10e1c-158">[Příklad tabulky](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) ukazuje, jak tooplan hello kapacita pro aplikaci, která obsahuje tři typy datových objektů.</span><span class="sxs-lookup"><span data-stu-id="10e1c-158">An [example spreadsheet](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) shows how tooplan hello capacity for an application that contains three types of data objects.</span></span> <span data-ttu-id="10e1c-159">Pro každý objekt jsme Přibližná jeho velikost a kolik objekty že Očekáváme, že toohave.</span><span class="sxs-lookup"><span data-stu-id="10e1c-159">For each object, we approximate its size and how many objects we expect toohave.</span></span> <span data-ttu-id="10e1c-160">Můžeme také vybrat kolik repliky chceme každého typu objektu.</span><span class="sxs-lookup"><span data-stu-id="10e1c-160">We also select how many replicas we want of each object type.</span></span> <span data-ttu-id="10e1c-161">v tabulce Hello vypočtena hello celkovou velikost paměti toobe uložené v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-161">hello spreadsheet calculates hello total amount of memory toobe stored in hello cluster.</span></span>

<span data-ttu-id="10e1c-162">Potom jsme zadejte velikost virtuálního počítače a měsíční náklady.</span><span class="sxs-lookup"><span data-stu-id="10e1c-162">Then we enter a VM size and monthly cost.</span></span> <span data-ttu-id="10e1c-163">Podle hello velikost virtuálního počítače, hello tabulky informuje, že hello minimální počet oddílů, je nutné použít toosplit podle toophysically vaše data na uzlech hello.</span><span class="sxs-lookup"><span data-stu-id="10e1c-163">Based on hello VM size, hello spreadsheet tells you hello minimum number of partitions you must use toosplit your data toophysically fit on hello nodes.</span></span> <span data-ttu-id="10e1c-164">Může si přejí větší počet oddílů tooaccommodate, musí aplikace konkrétní výpočetní a síťové přenosy.</span><span class="sxs-lookup"><span data-stu-id="10e1c-164">You may desire a larger number of partitions tooaccommodate your application's specific computation and network traffic needs.</span></span> <span data-ttu-id="10e1c-165">tabulky Hello zobrazuje hello počet oddílů, které budete spravovat objekty profilu uživatele hello zvýšilo z jednoho toosix.</span><span class="sxs-lookup"><span data-stu-id="10e1c-165">hello spreadsheet shows hello number of partitions that are managing hello user profile objects has increased from one toosix.</span></span>

<span data-ttu-id="10e1c-166">Nyní založená na všechny tyto informace, hello tabulky zobrazuje může fyzicky získat všechna data hello s oddíly hello potřeby a repliky na 26 uzly clusteru.</span><span class="sxs-lookup"><span data-stu-id="10e1c-166">Now, based on all this information, hello spreadsheet shows that you could physically get all hello data with hello desired partitions and replicas on a 26-node cluster.</span></span> <span data-ttu-id="10e1c-167">Však tento cluster by hustě balí, proto je vhodné některé selhání uzlu tooaccommodate další uzly a upgrady.</span><span class="sxs-lookup"><span data-stu-id="10e1c-167">However, this cluster would be densely packed, so you may want some additional nodes tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="10e1c-168">tabulky Hello také ukazuje, že s více než 57 uzly poskytuje žádná další hodnota, protože bude mít prázdný uzly.</span><span class="sxs-lookup"><span data-stu-id="10e1c-168">hello spreadsheet also shows that having more than 57 nodes provides no additional value because you would have empty nodes.</span></span> <span data-ttu-id="10e1c-169">Znovu můžete chtít toogo výše 57 uzly přesto selhání uzlu tooaccommodate a upgrady.</span><span class="sxs-lookup"><span data-stu-id="10e1c-169">Again, you may want toogo above 57 nodes anyway tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="10e1c-170">Toomatch hello tabulky, můžete upravit specifické potřeby vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="10e1c-170">You can tweak hello spreadsheet toomatch your application's specific needs.</span></span>   

![Tabulky pro výpočet nákladů][Image1]

## <a name="next-steps"></a><span data-ttu-id="10e1c-172">Další kroky</span><span class="sxs-lookup"><span data-stu-id="10e1c-172">Next steps</span></span>
<span data-ttu-id="10e1c-173">Podívejte se na [dělení Service Fabric služby] [ 10] toolearn informace o vytváření oddílů služby.</span><span class="sxs-lookup"><span data-stu-id="10e1c-173">Check out [Partitioning Service Fabric services][10] toolearn more about partitioning your service.</span></span>

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md
