---
title: "Upgrade aplikace Service Fabric pomocí prostředí PowerShell | Microsoft Docs"
description: "Tento článek vás provede možností nasazení aplikace Service Fabric, změna kódu a zavádění upgrade pomocí prostředí PowerShell."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 3591ced970887d4eb5a33cec8f6951b5476d04f8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="c336b-103">Upgrade aplikace Service Fabric pomocí prostředí PowerShell</span><span class="sxs-lookup"><span data-stu-id="c336b-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="c336b-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c336b-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="c336b-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="c336b-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="c336b-106">Nejčastěji používané a doporučený postup upgradu je monitorovaných postupného upgradu.</span><span class="sxs-lookup"><span data-stu-id="c336b-106">The most frequently used and recommended upgrade approach is the monitored rolling upgrade.</span></span>  <span data-ttu-id="c336b-107">Azure Service Fabric monitoruje stav aplikace upgraduje na základě sady zásad stavu.</span><span class="sxs-lookup"><span data-stu-id="c336b-107">Azure Service Fabric monitors the health of the application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="c336b-108">Po upgradu domény služby aktualizace (UD), Service Fabric vyhodnocuje stav aplikace a buď pokračuje do domény další aktualizace nebo upgradu v závislosti na zásadách stavu se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="c336b-108">Once an update domain (UD) is upgraded, Service Fabric evaluates the application health and either proceeds to the next update domain or fails the upgrade depending on the health policies.</span></span>

<span data-ttu-id="c336b-109">Monitorované aplikaci upgrade lze provést pomocí spravovaným nebo nativním rozhraní API, Powershellu nebo REST.</span><span class="sxs-lookup"><span data-stu-id="c336b-109">A monitored application upgrade can be performed using the managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="c336b-110">Pokyny k provedení upgradu pomocí sady Visual Studio, najdete v části [upgrade vaší aplikace pomocí sady Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="c336b-111">Pomocí Service Fabric monitorovat postupné upgrady Správce aplikací můžete nakonfigurovat zásad vyhodnocení stavu, který Service Fabric používá k určení, zda je aplikace v pořádku.</span><span class="sxs-lookup"><span data-stu-id="c336b-111">With Service Fabric monitored rolling upgrades, the application administrator can configure the health evaluation policy that Service Fabric uses to determine if the application is healthy.</span></span> <span data-ttu-id="c336b-112">Kromě toho může správce nakonfigurovat akce, které mají být provedeny, když vyhodnocení stavu selže (například provádění automatického vrácení zpět.) Tato část vás provede monitorovaných upgrade pro jednu z ukázky sady SDK, které používá prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c336b-112">In addition, the administrator can configure the action to be taken when the health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of the SDK samples that uses PowerShell.</span></span> <span data-ttu-id="c336b-113">Následující Microsoft Virtual Academy video vás také provede upgrade aplikace:<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="c336b-113">The following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-the-visual-objects-sample"></a><span data-ttu-id="c336b-114">Krok 1: Vytvoření a nasazení ukázkové vizuální objekty</span><span class="sxs-lookup"><span data-stu-id="c336b-114">Step 1: Build and deploy the Visual Objects sample</span></span>
<span data-ttu-id="c336b-115">Vytvoření a publikování aplikace kliknutím pravým tlačítkem na projekt aplikace **VisualObjectsApplication,** a výběrem **publikovat** příkaz.</span><span class="sxs-lookup"><span data-stu-id="c336b-115">Build and publish the application by right-clicking on the application project, **VisualObjectsApplication,** and selecting the **Publish** command.</span></span>  <span data-ttu-id="c336b-116">Další informace najdete v tématu [kurz upgradu aplikace Service Fabric](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="c336b-117">Alternativně můžete použít PowerShell k nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="c336b-117">Alternatively, you can use PowerShell to deploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="c336b-118">Před všechny příkazy Service Fabric lze v prostředí PowerShell, musíte nejdřív připojit ke clusteru pomocí `Connect-ServiceFabricCluster` rutiny.</span><span class="sxs-lookup"><span data-stu-id="c336b-118">Before any of the Service Fabric commands may be used in PowerShell, you first need to connect to the cluster by using the `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="c336b-119">Podobně se předpokládá, že clusteru je již nastaven na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="c336b-119">Similarly, it is assumed that the Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="c336b-120">Najdete v článku na [nastavení vývojového prostředí Service Fabric](service-fabric-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-120">See the article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="c336b-121">Po vytvoření projektu v sadě Visual Studio, můžete použít příkaz prostředí PowerShell [kopie ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) zkopírovat balíček aplikace do úložišti ImageStore.</span><span class="sxs-lookup"><span data-stu-id="c336b-121">After building the project in Visual Studio, you can use the PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) to copy the application package to the ImageStore.</span></span> <span data-ttu-id="c336b-122">Pokud chcete ověřit balíček aplikace místně, použijte [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) rutiny.</span><span class="sxs-lookup"><span data-stu-id="c336b-122">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="c336b-123">Dalším krokem je registrace aplikace pomocí modulu runtime Service Fabric [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) rutiny.</span><span class="sxs-lookup"><span data-stu-id="c336b-123">The next step is to register the application to the Service Fabric runtime using the [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="c336b-124">Posledním krokem je spuštění instance aplikace pomocí [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) rutiny.</span><span class="sxs-lookup"><span data-stu-id="c336b-124">The final step is to start an instance of the application by using the [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="c336b-125">Tyto tři kroky jsou podobná pomocí **nasadit** položky nabídky v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c336b-125">These three steps are analogous to using the **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="c336b-126">Teď můžete použít [Service Fabric Explorer zobrazíte cluster a aplikace](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-126">Now, you can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="c336b-127">Aplikace má webová služba, která lze procházet k v aplikaci Internet Explorer tak, že zadáte [http://localhost: 8081/visualobjects](http://localhost:8081/visualobjects) na panelu Adresa.</span><span class="sxs-lookup"><span data-stu-id="c336b-127">The application has a web service that can be navigated to in Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in the address bar.</span></span>  <span data-ttu-id="c336b-128">Měli byste vidět některé plovoucí vizuální objekty manipulaci se na obrazovce.</span><span class="sxs-lookup"><span data-stu-id="c336b-128">You should see some floating visual objects moving around in the screen.</span></span>  <span data-ttu-id="c336b-129">Kromě toho můžete použít [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) a zkontrolujte stav aplikace.</span><span class="sxs-lookup"><span data-stu-id="c336b-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) to check the application status.</span></span>

## <a name="step-2-update-the-visual-objects-sample"></a><span data-ttu-id="c336b-130">Krok 2: Aktualizace Ukázka vizuální objekty</span><span class="sxs-lookup"><span data-stu-id="c336b-130">Step 2: Update the Visual Objects sample</span></span>
<span data-ttu-id="c336b-131">Můžete si všimnout, že s verzí, který byl nasazen v kroku 1, není otočit vizuální objekty.</span><span class="sxs-lookup"><span data-stu-id="c336b-131">You might notice that with the version that was deployed in Step 1, the visual objects do not rotate.</span></span> <span data-ttu-id="c336b-132">Umožňuje upgradovat tuto aplikaci do jednoho kde také otočit vizuální objekty.</span><span class="sxs-lookup"><span data-stu-id="c336b-132">Let's upgrade this application to one where the visual objects also rotate.</span></span>

<span data-ttu-id="c336b-133">Vyberte projekt VisualObjects.ActorService v rámci řešení VisualObjects a otevřete soubor StatefulVisualObjectActor.cs.</span><span class="sxs-lookup"><span data-stu-id="c336b-133">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="c336b-134">V rámci tohoto souboru, přejděte k metodě `MoveObject`, komentář `this.State.Move()`a zrušte komentář u `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="c336b-134">Within that file, navigate to the method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="c336b-135">Tato změna otočí objekty po upgradu služby.</span><span class="sxs-lookup"><span data-stu-id="c336b-135">This change rotates the objects after the service is upgraded.</span></span>

<span data-ttu-id="c336b-136">Také je potřeba aktualizovat *ServiceManifest.xml* projektu v souboru (pod PackageRoot) **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="c336b-136">We also need to update the *ServiceManifest.xml* file (under PackageRoot) of the project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="c336b-137">Aktualizace *CodePackage* a verze 2.0 a odpovídající řádky v *ServiceManifest.xml* souboru.</span><span class="sxs-lookup"><span data-stu-id="c336b-137">Update the *CodePackage* and the service version to 2.0, and the corresponding lines in the *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="c336b-138">Visual Studio můžete použít *upravit soubory manifestu* možnost po kliknutí pravým tlačítkem na řešení provést změny souboru manifestu.</span><span class="sxs-lookup"><span data-stu-id="c336b-138">You can use the Visual Studio *Edit Manifest Files* option after you right-click on the solution to make the manifest file changes.</span></span>

<span data-ttu-id="c336b-139">Po provedení změn v manifestu by měl vypadat takto (zvýrazněné části zobrazit změny):</span><span class="sxs-lookup"><span data-stu-id="c336b-139">After the changes are made, the manifest should look like the following (highlighted portions show the changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="c336b-140">Nyní *ApplicationManifest.xml* souboru (v části **VisualObjects** projektu v části **VisualObjects** řešení) se aktualizuje na verzi 2.0 **VisualObjects.ActorService** projektu.</span><span class="sxs-lookup"><span data-stu-id="c336b-140">Now the *ApplicationManifest.xml* file (found under the **VisualObjects** project under the **VisualObjects** solution) is updated to version 2.0 of the **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="c336b-141">Kromě toho verze aplikace se aktualizuje 2.0.0.0 z 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="c336b-141">In addition, the Application version is updated to 2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="c336b-142">*ApplicationManifest.xml* by měl vypadat jako následující fragment kódu:</span><span class="sxs-lookup"><span data-stu-id="c336b-142">The *ApplicationManifest.xml* should look like the following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="c336b-143">Nyní, sestavte projekt tak, že vyberete jenom na **ActorService** projekt a potom kliknete pravým tlačítkem a vyberete **sestavení** možnost v sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c336b-143">Now, build the project by selecting just the **ActorService** project, and then right-clicking and selecting the **Build** option in Visual Studio.</span></span> <span data-ttu-id="c336b-144">Pokud vyberete **znovu vytvořit všechny**, verze pro všechny projekty, by měl aktualizovat, protože kód by změnily.</span><span class="sxs-lookup"><span data-stu-id="c336b-144">If you select **Rebuild all**, you should update the versions for all projects, since the code would have changed.</span></span> <span data-ttu-id="c336b-145">Dále umožňuje kliknutím pravým tlačítkem na balíček aktualizovanou aplikaci ***VisualObjectsApplication***, vyberte v nabídce Service Fabric a zvolením **balíček**.</span><span class="sxs-lookup"><span data-stu-id="c336b-145">Next, let's package the updated application by right-clicking on ***VisualObjectsApplication***, selecting the Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="c336b-146">Tato akce vytvoří balíček aplikace, které se dá nasadit.</span><span class="sxs-lookup"><span data-stu-id="c336b-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="c336b-147">Aktualizovaná aplikace je připravená k nasazení.</span><span class="sxs-lookup"><span data-stu-id="c336b-147">Your updated application is ready to be deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="c336b-148">Krok 3: Rozhodněte o zásady stavu a upgradujte parametry</span><span class="sxs-lookup"><span data-stu-id="c336b-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="c336b-149">Seznamte se s [parametry upgradu aplikace](service-fabric-application-upgrade-parameters.md) a [procesu upgradu](service-fabric-application-upgrade.md) získat dostatečné povědomí o různé parametry upgradu, vypršení časových limitů a kritérium stavu použít.</span><span class="sxs-lookup"><span data-stu-id="c336b-149">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="c336b-150">V tomto návodu je kritéria hodnocení stavu služby nastavenou na výchozí (a doporučené) hodnoty, které znamená, že by měly být všechny služby a instance *pořádku* po upgradu.</span><span class="sxs-lookup"><span data-stu-id="c336b-150">For this walkthrough, the service health evaluation criterion is set to the default (and recommended) values, which means that all services and instances should be *healthy* after the upgrade.</span></span>  

<span data-ttu-id="c336b-151">Však umožňuje zvýšit *HealthCheckStableDuration* na 60 sekund (tak, aby služby jsou v pořádku po dobu 20 sekund před upgradem na další aktualizaci domény).</span><span class="sxs-lookup"><span data-stu-id="c336b-151">However, let's increase the *HealthCheckStableDuration* to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next update domain).</span></span>  <span data-ttu-id="c336b-152">Umožňuje také nastavit *UpgradeDomainTimeout* být 1200 sekund a *UpgradeTimeout* být 3000 sekund.</span><span class="sxs-lookup"><span data-stu-id="c336b-152">Let's also set the *UpgradeDomainTimeout* to be 1200 seconds and the *UpgradeTimeout* to be 3000 seconds.</span></span>

<span data-ttu-id="c336b-153">Nakonec můžeme také nastavit *UpgradeFailureAction* vrátit zpět.</span><span class="sxs-lookup"><span data-stu-id="c336b-153">Finally, let's also set the *UpgradeFailureAction* to rollback.</span></span> <span data-ttu-id="c336b-154">Tato možnost vyžaduje Service Fabric na vrátit zpět na předchozí verzi aplikace, pokud zjistí jakékoli problémy při upgradu.</span><span class="sxs-lookup"><span data-stu-id="c336b-154">This option requires Service Fabric to roll back the application to the previous version if it encounters any issues during the upgrade.</span></span> <span data-ttu-id="c336b-155">Proto při spouštění upgradu (v kroku 4), jsou zadány následující parametry:</span><span class="sxs-lookup"><span data-stu-id="c336b-155">Thus, when starting the upgrade (in Step 4), the following parameters are specified:</span></span>

<span data-ttu-id="c336b-156">FailureAction = vrácení zpět</span><span class="sxs-lookup"><span data-stu-id="c336b-156">FailureAction = Rollback</span></span>

<span data-ttu-id="c336b-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="c336b-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="c336b-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="c336b-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="c336b-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="c336b-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="c336b-160">Krok 4: Příprava aplikací pro upgrade</span><span class="sxs-lookup"><span data-stu-id="c336b-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="c336b-161">Aplikace je teď vytvořený a připravené k upgradu.</span><span class="sxs-lookup"><span data-stu-id="c336b-161">Now the application is built and ready to be upgraded.</span></span> <span data-ttu-id="c336b-162">Pokud jste otevře okno prostředí PowerShell jako správce a zadejte [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), ponechte vás informuje, že je aplikace typu 1.0.0.0 **VisualObjects** který je nasazen.</span><span class="sxs-lookup"><span data-stu-id="c336b-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="c336b-163">Aplikace je uložen pod následující relativní cestu, kde nekomprimovaným Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="c336b-163">The application package is stored under the following relative path where you uncompressed the Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="c336b-164">V tomto adresáři, kde je uložen balíček aplikace byste měli najít složku "Balíček".</span><span class="sxs-lookup"><span data-stu-id="c336b-164">You should find a "Package" folder in that directory, where the application package is stored.</span></span> <span data-ttu-id="c336b-165">Zkontrolujte časová razítka zajistit, že je na nejnovější verzi (budete muset upravit cesty správně také).</span><span class="sxs-lookup"><span data-stu-id="c336b-165">Check the timestamps to ensure that it is the latest build (you may need to modify the paths appropriately as well).</span></span>

<span data-ttu-id="c336b-166">Nyní Pojďme zkopírujte balíček aktualizovanou aplikaci služby prostředků infrastruktury úložiště bitových kopií (kde jsou balíčky aplikací uložené pomocí Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="c336b-166">Now let's copy the updated application package to the Service Fabric ImageStore (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="c336b-167">Parametr *ApplicationPackagePathInImageStore* informuje o tom, kde ji můžete najít balíček aplikace Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c336b-167">The parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="c336b-168">Jsme umístili aktualizovanou aplikaci "VisualObjects\_V2" pomocí následujícího příkazu (budete muset znovu správně Změna cest).</span><span class="sxs-lookup"><span data-stu-id="c336b-168">We have put the updated application in "VisualObjects\_V2" with the following command (you may need to modify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="c336b-169">Dalším krokem je zaregistrovat tuto aplikaci Service Fabric, která je možné provést pomocí [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) příkaz:</span><span class="sxs-lookup"><span data-stu-id="c336b-169">The next step is to register this application with Service Fabric, which can be performed using the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="c336b-170">Pokud předchozí příkaz k neúspěchu, je pravděpodobné, že je nutné znovu vytvořit všechny služby.</span><span class="sxs-lookup"><span data-stu-id="c336b-170">If the preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="c336b-171">Jak je uvedeno v kroku 2, budete muset aktualizovat vaši webovou verzi.</span><span class="sxs-lookup"><span data-stu-id="c336b-171">As mentioned in Step 2, you may have to update your WebService version as well.</span></span>

## <a name="step-5-start-the-application-upgrade"></a><span data-ttu-id="c336b-172">Krok 5: Spusťte upgrade aplikace</span><span class="sxs-lookup"><span data-stu-id="c336b-172">Step 5: Start the application upgrade</span></span>
<span data-ttu-id="c336b-173">Nyní jsme všechno nastavené ke spuštění upgradu aplikace pomocí [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) příkaz:</span><span class="sxs-lookup"><span data-stu-id="c336b-173">Now, we're all set to start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="c336b-174">Název aplikace je stejný, jak je popsáno v *ApplicationManifest.xml* souboru.</span><span class="sxs-lookup"><span data-stu-id="c336b-174">The application name is the same as it was described in the *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="c336b-175">Service Fabric používá k identifikaci, která aplikace je získávání upgradovat tento název.</span><span class="sxs-lookup"><span data-stu-id="c336b-175">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="c336b-176">Pokud jste nastavili vypršení časových limitů jako příliš krátká, můžete se setkat selhání zpráva, že problém.</span><span class="sxs-lookup"><span data-stu-id="c336b-176">If you set the time-outs to be too short, you may encounter a failure message that states the problem.</span></span> <span data-ttu-id="c336b-177">V části řešení potíží, případně zvyšte vypršení časových limitů.</span><span class="sxs-lookup"><span data-stu-id="c336b-177">Refer to the troubleshooting section, or increase the time-outs.</span></span>

<span data-ttu-id="c336b-178">Nyní, jako aplikace upgradu bude pokračovat, můžete monitorovat pomocí Service Fabric Explorer nebo pomocí [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) příkaz prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="c336b-178">Now, as the application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="c336b-179">Za několik minut, stav, který jste získali pomocí předchozí příkaz prostředí PowerShell, stavu, aby byly upgradovány všechny aktualizace domény (Dokončit).</span><span class="sxs-lookup"><span data-stu-id="c336b-179">In a few minutes, the status that you got by using the preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="c336b-180">A by měl zjistit, že vizuální objekty v okně prohlížeče spustili otáčení!</span><span class="sxs-lookup"><span data-stu-id="c336b-180">And you should find that the visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="c336b-181">Pokuste se upgrade z verze 2 na verze 3 nebo z verze 2 na verze 1 jako cvičení.</span><span class="sxs-lookup"><span data-stu-id="c336b-181">You can try upgrading from version 2 to version 3, or from version 2 to version 1 as an exercise.</span></span> <span data-ttu-id="c336b-182">Přesun z verze 2 na verze 1 také považuje upgrade.</span><span class="sxs-lookup"><span data-stu-id="c336b-182">Moving from version 2 to version 1 is also considered an upgrade.</span></span> <span data-ttu-id="c336b-183">Přehrání s vypršení časových limitů a zásad stavu proveďte vlastní obeznámeni s nimi.</span><span class="sxs-lookup"><span data-stu-id="c336b-183">Play with time-outs and health policies to make yourself familiar with them.</span></span> <span data-ttu-id="c336b-184">Při nasazení do Azure clusteru, parametry nutné nastavit správně.</span><span class="sxs-lookup"><span data-stu-id="c336b-184">When you are deploying to an Azure cluster, the parameters need to be set appropriately.</span></span> <span data-ttu-id="c336b-185">Je vhodné můžete nastavit vypršení časových limitů.</span><span class="sxs-lookup"><span data-stu-id="c336b-185">It is good to set the time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c336b-186">Další kroky</span><span class="sxs-lookup"><span data-stu-id="c336b-186">Next steps</span></span>
<span data-ttu-id="c336b-187">[Upgrade vaší aplikace pomocí sady Visual Studio](service-fabric-application-upgrade-tutorial.md) vás provede upgrade aplikace pomocí sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c336b-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="c336b-188">Řídí, jak vaše aplikace upgraduje pomocí [upgrade parametry](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="c336b-189">Zkontrolujte upgradů aplikace kompatibilní podle naučit se používat [serializace dat](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-189">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="c336b-190">Další informace o použití pokročilých funkcí při upgradu vaší aplikace tím, že odkazuje na [Advanced témata](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-190">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="c336b-191">Řešení běžných potíží v upgradů aplikací podle kroků v části [řešení potíží s aplikací upgrady](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="c336b-191">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

