---
title: "Architektura služby Azure Service Fabric | Microsoft Docs"
description: "Service Fabric je platforma distribuovaných systémů sloužící k vytvoření škálovatelný, spolehlivý a snadno spravovat aplikace pro cloud. Tento článek popisuje architekturu Service Fabric."
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 3cf019bf9a08574c984e92985452df438f3eeb77
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="945b7-104">Architektura Service Fabric</span><span class="sxs-lookup"><span data-stu-id="945b7-104">Service Fabric architecture</span></span>
<span data-ttu-id="945b7-105">Service Fabric je vytvořené s vrstvami subsystémy.</span><span class="sxs-lookup"><span data-stu-id="945b7-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="945b7-106">Tyto subsystémy umožňují psaní aplikací, které jsou:</span><span class="sxs-lookup"><span data-stu-id="945b7-106">These subsystems enable you to write applications that are:</span></span>

* <span data-ttu-id="945b7-107">Vysoce dostupný</span><span class="sxs-lookup"><span data-stu-id="945b7-107">Highly available</span></span>
* <span data-ttu-id="945b7-108">Škálovatelné</span><span class="sxs-lookup"><span data-stu-id="945b7-108">Scalable</span></span>
* <span data-ttu-id="945b7-109">Spravovat</span><span class="sxs-lookup"><span data-stu-id="945b7-109">Manageable</span></span>
* <span data-ttu-id="945b7-110">Možností intenzivního testování</span><span class="sxs-lookup"><span data-stu-id="945b7-110">Testable</span></span>

<span data-ttu-id="945b7-111">Následující diagram znázorňuje hlavní subsystémy služby prostředků infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="945b7-111">The following diagram shows the major subsystems of Service Fabric.</span></span>

![Diagram architektury Service Fabric](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="945b7-113">V distribuované systému je zásadní možnost k bezpečné komunikaci mezi uzly v clusteru.</span><span class="sxs-lookup"><span data-stu-id="945b7-113">In a distributed system, the ability to securely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="945b7-114">Na bázi zásobníku je subsystém přenos, který poskytuje zabezpečenou komunikaci mezi uzly.</span><span class="sxs-lookup"><span data-stu-id="945b7-114">At the base of the stack is the transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="945b7-115">Výše přenosu je subsystému subsystému federace, který clusterů různých uzlech do jedné entity (s názvem clustery), aby mohli Service Fabric rozpoznala chyby, proveďte vedoucí volba a poskytují konzistentní směrování.</span><span class="sxs-lookup"><span data-stu-id="945b7-115">Above the transport subsystem lies the federation subsystem, which clusters the different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="945b7-116">Subsystém spolehlivost jako vrstva nad subsystém federace je zodpovědná za spolehlivost služby Service Fabric prostřednictvím mechanismy, jako je replikace, správy prostředků a převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="945b7-116">The reliability subsystem, layered on top of the federation subsystem, is responsible for the reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="945b7-117">Subsystém federační také základem subsystém hostování a aktivace, která spravuje životní cyklus aplikace v jednom uzlu.</span><span class="sxs-lookup"><span data-stu-id="945b7-117">The federation subsystem also underlies the hosting and activation subsystem, which manages the lifecycle of an application on a single node.</span></span> <span data-ttu-id="945b7-118">Subsystém management spravuje životní cyklus aplikací a služeb.</span><span class="sxs-lookup"><span data-stu-id="945b7-118">The management subsystem manages the lifecycle of applications and services.</span></span> <span data-ttu-id="945b7-119">Subsystém testovatelnosti pomáhá vývojářům aplikací testování jejich služeb prostřednictvím simulované chyb před a po nasazení aplikací a služeb do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="945b7-119">The testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services to production environments.</span></span> <span data-ttu-id="945b7-120">Service Fabric nabízí možnost řešení umístění služeb pomocí jeho komunikačního subsystému.</span><span class="sxs-lookup"><span data-stu-id="945b7-120">Service Fabric provides the ability to resolve service locations through its communication subsystem.</span></span> <span data-ttu-id="945b7-121">Programovací modely aplikace zpřístupněny vývojářům jsou vrstva nad tyto subsystémy spolu s aplikací modelu, který má povolení nástrojů.</span><span class="sxs-lookup"><span data-stu-id="945b7-121">The application programming models exposed to developers are layered on top of these subsystems along with the application model to enable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="945b7-122">Subsystém přenosu</span><span class="sxs-lookup"><span data-stu-id="945b7-122">Transport subsystem</span></span>
<span data-ttu-id="945b7-123">Subsystém přenosu implementuje point-to-point datagram komunikační kanál.</span><span class="sxs-lookup"><span data-stu-id="945b7-123">The transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="945b7-124">Tento kanál se používá pro komunikaci v rámci clusterů service fabric a komunikaci mezi service fabric cluster a klienty.</span><span class="sxs-lookup"><span data-stu-id="945b7-124">This channel is used for communication within service fabric clusters and communication between the service fabric cluster and clients.</span></span> <span data-ttu-id="945b7-125">Podporuje jednosměrné a vzory komunikace požadavku a odpovědi, které poskytuje základ pro implementaci všesměrového a vícesměrového vysílání ve vrstvě federace.</span><span class="sxs-lookup"><span data-stu-id="945b7-125">It supports one-way and request-reply communication patterns, which provides the basis for implementing broadcast and multicast in the Federation layer.</span></span> <span data-ttu-id="945b7-126">Subsystém přenosu zabezpečuje komunikaci pomocí X509 certifikáty nebo zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="945b7-126">The transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="945b7-127">Tento subsystém používá se interně pomocí Service Fabric a není přímo přístupný pro vývojáře pro programování aplikací.</span><span class="sxs-lookup"><span data-stu-id="945b7-127">This subsystem is used internally by Service Fabric and is not directly accessible to developers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="945b7-128">Subsystém Federation</span><span class="sxs-lookup"><span data-stu-id="945b7-128">Federation subsystem</span></span>
<span data-ttu-id="945b7-129">Chcete-li důvodu o sada uzlů v distribuované systému, musíte mít konzistentní zobrazení v systému.</span><span class="sxs-lookup"><span data-stu-id="945b7-129">In order to reason about a set of nodes in a distributed system, you need to have a consistent view of the system.</span></span> <span data-ttu-id="945b7-130">Subsystém federační používá primitiv komunikace poskytované subsystém přenosu a spojí do jediného jednotná clusteru, který můžete důvodu o různých uzlech.</span><span class="sxs-lookup"><span data-stu-id="945b7-130">The federation subsystem uses the communication primitives provided by the transport subsystem and stitches the various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="945b7-131">Poskytuje primitiv distribuovaných systémů vyžaduje další subsystémy - detekce chyb, vedoucí volba a konzistentní směrování.</span><span class="sxs-lookup"><span data-stu-id="945b7-131">It provides the distributed systems primitives needed by the other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="945b7-132">Subsystém federace je postavená na distribuované zatřiďovacích tabulkách tokenu mezerami 128-bit.</span><span class="sxs-lookup"><span data-stu-id="945b7-132">The federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="945b7-133">Subsystém vytvoří kruhová topologie přes uzly s každý uzel v řetězci se podmnožinu tokenu místo přidělené vlastnictví.</span><span class="sxs-lookup"><span data-stu-id="945b7-133">The subsystem creates a ring topology over the nodes, with each node in the ring being allocated a subset of the token space for ownership.</span></span> <span data-ttu-id="945b7-134">Pro zjišťování selhání vrstvu používá mechanismus "pronájmu" na základě prezenční signálu a arbitrážního.</span><span class="sxs-lookup"><span data-stu-id="945b7-134">For failure detection, the layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="945b7-135">Subsystém federační také zaručuje prostřednictvím komplikované spojení a odeslání protokolů, které existuje jenom jeden vlastník token kdykoli.</span><span class="sxs-lookup"><span data-stu-id="945b7-135">The federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="945b7-136">To poskytuje vedoucí volba a konzistentní směrování záruky.</span><span class="sxs-lookup"><span data-stu-id="945b7-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="945b7-137">Spolehlivost subsystému</span><span class="sxs-lookup"><span data-stu-id="945b7-137">Reliability subsystem</span></span>
<span data-ttu-id="945b7-138">Subsystém spolehlivost poskytuje mechanismus, který chcete nastavit vysokou dostupnost prostřednictvím stav služby Service Fabric *Replikátor*, *Failover Manager*, a *Resource Balancer*.</span><span class="sxs-lookup"><span data-stu-id="945b7-138">The reliability subsystem provides the mechanism to make the state of a Service Fabric service highly available through the use of the *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="945b7-139">Replikátor zajišťuje změny stavu v replice primární služba bude automaticky replikovat na sekundární repliky zachování konzistence mezi primární a sekundární repliky v sadě replik služby.</span><span class="sxs-lookup"><span data-stu-id="945b7-139">The Replicator ensures that state changes in the primary service replica will automatically be replicated to secondary replicas, maintaining consistency between the primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="945b7-140">Replikátor zodpovídá za správu kvora mezi repliky sady replik.</span><span class="sxs-lookup"><span data-stu-id="945b7-140">The replicator is responsible for quorum management among the replicas in the replica set.</span></span> <span data-ttu-id="945b7-141">Komunikuje se službou jednotky převzetí služeb při selhání se získat seznam operací k replikaci, a poskytne mu agent Rekonfigurace konfiguraci sady replik.</span><span class="sxs-lookup"><span data-stu-id="945b7-141">It interacts with the failover unit to get the list of operations to replicate, and the reconfiguration agent provides it with the configuration of the replica set.</span></span> <span data-ttu-id="945b7-142">Tato konfigurace označuje replik, které operace se musí replikovat.</span><span class="sxs-lookup"><span data-stu-id="945b7-142">That configuration indicates which replicas the operations need to be replicated.</span></span> <span data-ttu-id="945b7-143">Service Fabric nabízí výchozí Replikátor, názvem Replikátor Fabric, který můžete použít rozhraním API programovací model pro vysoce dostupné a spolehlivé, zkontrolujte stav služby.</span><span class="sxs-lookup"><span data-stu-id="945b7-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by the programming model API to make the service state highly available and reliable.</span></span>
* <span data-ttu-id="945b7-144">Správce převzetí služeb při selhání zajistí, že při uzly jsou přidat nebo odebrat z clusteru, zatížení automaticky rozloží mezi uzly k dispozici.</span><span class="sxs-lookup"><span data-stu-id="945b7-144">The Failover Manager ensures that when nodes are added to or removed from the cluster, the load is automatically redistributed across the available nodes.</span></span> <span data-ttu-id="945b7-145">Pokud uzel v clusteru selže, bude cluster automaticky překonfigurujte repliky služby údržbu dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="945b7-145">If a node in the cluster fails, the cluster will automatically reconfigure the service replicas to maintain availability.</span></span>
* <span data-ttu-id="945b7-146">Resource Manager umístí repliky služby napříč domény selhání v clusteru a zajišťuje, aby všechny jednotky převzetí služeb při selhání provozu.</span><span class="sxs-lookup"><span data-stu-id="945b7-146">The Resource Manager places service replicas across failure domain in the cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="945b7-147">Prostředky služby Správce prostředků také vyrovnává mezi základní sdílený fond uzlů clusteru k dosažení distribuce optimální uniform zatížení.</span><span class="sxs-lookup"><span data-stu-id="945b7-147">The Resource Manager also balances service resources across the underlying shared pool of cluster nodes to achieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="945b7-148">Subsystém správy</span><span class="sxs-lookup"><span data-stu-id="945b7-148">Management subsystem</span></span>
<span data-ttu-id="945b7-149">Subsystém správu poskytuje služby začátku do konce a správa životního cyklu aplikací.</span><span class="sxs-lookup"><span data-stu-id="945b7-149">The management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="945b7-150">Rutiny prostředí PowerShell a rozhraní API pro správu umožňují zřizovat, nasazení, opravit, upgradovat a zrušte zřizování aplikace bez ztráty dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="945b7-150">PowerShell cmdlets and administrative APIs enable you to provision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="945b7-151">Subsystém správy to provádí pomocí následujících služeb.</span><span class="sxs-lookup"><span data-stu-id="945b7-151">The management subsystem performs this through the following services.</span></span>

* <span data-ttu-id="945b7-152">**Správce clusteru**: Toto je primární služba, která komunikuje pomocí převzetí služeb při selhání správce z spolehlivost umístit aplikace na uzlech podle omezení umístění služby.</span><span class="sxs-lookup"><span data-stu-id="945b7-152">**Cluster Manager**: This is the primary service that interacts with the Failover Manager from reliability to place the applications on the nodes based on the service placement constraints.</span></span> <span data-ttu-id="945b7-153">Správce prostředků v subsystému převzetí služeb při selhání zajistí omezení nikdy přerušená.</span><span class="sxs-lookup"><span data-stu-id="945b7-153">The Resource Manager in failover subsystem ensures that the constraints are never broken.</span></span> <span data-ttu-id="945b7-154">Správce clusteru spravuje životní cyklus aplikace z zřízení zrušit.</span><span class="sxs-lookup"><span data-stu-id="945b7-154">The cluster manager manages the lifecycle of the applications from provision to de-provision.</span></span> <span data-ttu-id="945b7-155">Integruje se s správce stavu zajistit, že dostupnosti aplikace není během upgradu ke ztrátě z hlediska sémantického stavu.</span><span class="sxs-lookup"><span data-stu-id="945b7-155">It integrates with the health manager to ensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="945b7-156">**Správce stavu**: Tato služba umožňuje sledování stavu aplikací, služeb a entity clusteru.</span><span class="sxs-lookup"><span data-stu-id="945b7-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="945b7-157">Informace o stavu, který je pak agregovat do úložiště centralizované stavu mohou zasílat zprávy o entitami clusteru (jako je například uzlů, oddílů služby a repliky).</span><span class="sxs-lookup"><span data-stu-id="945b7-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into the centralized health store.</span></span> <span data-ttu-id="945b7-158">Tato informace o stavu poskytuje snímek celkové v daném okamžiku stavu služby a uzly distribuované ve více uzlech v clusteru, umožňuje provést všechny potřebné opravné akce.</span><span class="sxs-lookup"><span data-stu-id="945b7-158">This health information provides an overall point-in-time health snapshot of the services and nodes distributed across multiple nodes in the cluster, enabling you to take any needed corrective actions.</span></span> <span data-ttu-id="945b7-159">Dotaz stavu, že rozhraní API umožňují dotazování události stavu hlášené pro subsystém stavu.</span><span class="sxs-lookup"><span data-stu-id="945b7-159">Health query APIs enable you to query the health events reported to the health subsystem.</span></span> <span data-ttu-id="945b7-160">Dotaz stavu, které rozhraní API vrací nezpracovaná stavu data uložená v úložišti health nebo agregované, interpretovat data o stavu pro určitý cluster entitu.</span><span class="sxs-lookup"><span data-stu-id="945b7-160">The health query APIs return the raw health data stored in the health store or the aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="945b7-161">**Úložiště bitových kopií**: Tato služba poskytuje úložiště a distribuci binární soubory aplikace.</span><span class="sxs-lookup"><span data-stu-id="945b7-161">**Image Store**: This service provides storage and distribution of the application binaries.</span></span> <span data-ttu-id="945b7-162">Tato služba poskytuje jednoduché souborů DFS úložiště, kde jsou aplikace odesílat a stahovat z.</span><span class="sxs-lookup"><span data-stu-id="945b7-162">This service provides a simple distributed file store where the applications are uploaded to and downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="945b7-163">Hostování subsystému</span><span class="sxs-lookup"><span data-stu-id="945b7-163">Hosting subsystem</span></span>
<span data-ttu-id="945b7-164">Správce clusteru informuje hostování subsystému (spuštěná v každém uzlu), služby, které potřebuje ke správě pro konkrétní uzel.</span><span class="sxs-lookup"><span data-stu-id="945b7-164">The cluster manager informs the hosting subsystem (running on each node) which services it needs to manage for a particular node.</span></span> <span data-ttu-id="945b7-165">Subsystém hostování potom spravuje životní cyklus aplikace na tomto uzlu.</span><span class="sxs-lookup"><span data-stu-id="945b7-165">The hosting subsystem then manages the lifecycle of the application on that node.</span></span> <span data-ttu-id="945b7-166">Komunikuje se službou spolehlivost a stavu součásti, které zajistěte, aby byly správně umístěny repliky a jsou v pořádku.</span><span class="sxs-lookup"><span data-stu-id="945b7-166">It interacts with the reliability and health components to ensure that the replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="945b7-167">Komunikačního subsystému</span><span class="sxs-lookup"><span data-stu-id="945b7-167">Communication subsystem</span></span>
<span data-ttu-id="945b7-168">Tento subsystém poskytuje spolehlivé zasílání zpráv v rámci clusteru a službu zjišťování prostřednictvím pojmenování služby.</span><span class="sxs-lookup"><span data-stu-id="945b7-168">This subsystem provides reliable messaging within the cluster and service discovery through the Naming service.</span></span> <span data-ttu-id="945b7-169">Službu Naming překládá názvy služby do umístění v clusteru a umožňuje uživatelům spravovat služby názvy a vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="945b7-169">The Naming service resolves service names to a location in the cluster and enables users to manage service names and properties.</span></span> <span data-ttu-id="945b7-170">Pomocí zásady vytváření názvů služby, klienti mohou bezpečně komunikovat s libovolného uzlu v clusteru vyřešit název služby a načíst metadata služby.</span><span class="sxs-lookup"><span data-stu-id="945b7-170">Using the Naming service, clients can securely communicate with any node in the cluster to resolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="945b7-171">Pomocí jednoduchého pojmenování klientského rozhraní API, můžete vyvíjet uživatelé Service Fabric, služeb a klientů podporujících řešení aktuální umístění v síti i přes uzel náskok nebo znovu dimenzování clusteru.</span><span class="sxs-lookup"><span data-stu-id="945b7-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving the current network location despite node dynamism or the re-sizing of the cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="945b7-172">Testovatelnosti subsystému</span><span class="sxs-lookup"><span data-stu-id="945b7-172">Testability subsystem</span></span>
<span data-ttu-id="945b7-173">Testovatelnosti je sada nástrojů, které jsou vytvořené speciálně pro testování služby založený na Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="945b7-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="945b7-174">Nástroje umožní vývojář snadno vyvolat smysluplný chyb a spustit testovací scénáře postupu a ověření množství stavy a přechody, které služba bude mít v průběhu své životnosti, všechny řízené a bezpečné způsobem.</span><span class="sxs-lookup"><span data-stu-id="945b7-174">The tools let a developer easily induce meaningful faults and run test scenarios to exercise and validate the numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="945b7-175">Testovatelnosti také poskytuje mechanismus pro spuštění delší testy, které můžete iteraci prostřednictvím různých možných selhání bez ztráty dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="945b7-175">Testability also provides a mechanism to run longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="945b7-176">To poskytuje test v provozním prostředí.</span><span class="sxs-lookup"><span data-stu-id="945b7-176">This provides you with a test-in-production environment.</span></span>

