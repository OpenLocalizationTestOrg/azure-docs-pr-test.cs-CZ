---
title: "Ladění Azure mikroslužeb v systému Windows | Microsoft Docs"
description: "Zjistěte, jak sledovat a diagnostikovat vaše služby vytvořené pomocí Microsoft Azure Service Fabric na místním vývojovém počítači."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 08998340afb2f242b9a268331607b0d1ddb9b0c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="15786-103">Monitorování a Diagnostika služby v instalačním programu pro vývoj místním počítači</span><span class="sxs-lookup"><span data-stu-id="15786-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="15786-104">Windows</span><span class="sxs-lookup"><span data-stu-id="15786-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="15786-105">Linux</span><span class="sxs-lookup"><span data-stu-id="15786-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="15786-106">Monitorování, zjišťování, Diagnostika a řešení potíží s povolit pro služby, chcete-li pokračovat s minimálním dopadem na činnost koncového uživatele.</span><span class="sxs-lookup"><span data-stu-id="15786-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services to continue with minimal disruption to the user experience.</span></span> <span data-ttu-id="15786-107">Při monitorování a Diagnostika jsou kritické v prostředí skutečné produkční nasazené, efektivitu bude záviset na přijetí podobné modelu během vývoje služby zajistěte, aby byl že při přesunutí instalace reálného asi nebudou fungovat.</span><span class="sxs-lookup"><span data-stu-id="15786-107">While monitoring and diagnostics are critical in an actual deployed production environment, the efficiency will depend on adopting a similar model during development of services to ensure they work when you move to a real-world setup.</span></span> <span data-ttu-id="15786-108">Service Fabric usnadňuje vývojářům implementovat diagnostiky, které může bezproblémově fungovat v jednom počítači místní vývoj nastavení a nastavení clusteru skutečné produkční služby.</span><span class="sxs-lookup"><span data-stu-id="15786-108">Service Fabric makes it easy for service developers to implement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="15786-109">Trasování událostí pro Windows</span><span class="sxs-lookup"><span data-stu-id="15786-109">Event Tracing for Windows</span></span>
<span data-ttu-id="15786-110">[Trasování událostí pro systém Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) je technologie doporučené pro trasování zpráv v Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="15786-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is the recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="15786-111">Jsou některé výhody použití trasování událostí pro Windows:</span><span class="sxs-lookup"><span data-stu-id="15786-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="15786-112">**Trasování událostí pro Windows je rychlá.**</span><span class="sxs-lookup"><span data-stu-id="15786-112">**ETW is fast.**</span></span> <span data-ttu-id="15786-113">Byla vytvořena jako trasování technologie, která má minimální dopad na dobu provádění kódu.</span><span class="sxs-lookup"><span data-stu-id="15786-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="15786-114">**Trasování událostí pro Windows funguje bezproblémově mezi místní vývojové prostředí a taky nastavení reálného clusteru.**</span><span class="sxs-lookup"><span data-stu-id="15786-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="15786-115">To znamená, že nemáte přepsání trasování kódu, když budete chtít kód nasadit do clusteru s podporou skutečné.</span><span class="sxs-lookup"><span data-stu-id="15786-115">This  means you don't have to rewrite your tracing code when you are ready to deploy your code to a real cluster.</span></span>
* <span data-ttu-id="15786-116">**Service Fabric systému kód také používá trasování událostí pro Windows pro interní trasování.**</span><span class="sxs-lookup"><span data-stu-id="15786-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="15786-117">To vám umožní zobrazit vaše trasování aplikací prokládaný. pomocí trasování systému Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="15786-117">This allows you to view your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="15786-118">Také umožňuje snadno pochopit pořadí a vzájemné vztahy mezi kódu aplikace a události v základním systému.</span><span class="sxs-lookup"><span data-stu-id="15786-118">It also helps you to more easily understand the sequences and interrelationships between your application code and events in the underlying system.</span></span>
* <span data-ttu-id="15786-119">**Není integrovanou podporu v nástroji Service Fabric Visual Studio zobrazovat události trasování událostí pro Windows.**</span><span class="sxs-lookup"><span data-stu-id="15786-119">**There is built-in support in Service Fabric Visual Studio tools to view ETW events.**</span></span> <span data-ttu-id="15786-120">Události trasování událostí se zobrazí v zobrazení diagnostických událostí sady Visual Studio, jakmile sady Visual Studio je správně nakonfigurován s Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="15786-120">ETW events appear in the Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="15786-121">Zobrazit události systému Service Fabric v sadě Visual Studio</span><span class="sxs-lookup"><span data-stu-id="15786-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="15786-122">Service Fabric vysílá události trasování událostí pro Windows, což vývojářům aplikací pochopit, co se děje v platformu.</span><span class="sxs-lookup"><span data-stu-id="15786-122">Service Fabric emits ETW events to help application developers understand what's happening in the platform.</span></span> <span data-ttu-id="15786-123">Pokud jste tak již neučinili, pokračujte a postupujte podle kroků v [vytvoření vaší první aplikace v sadě Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="15786-123">If you haven't already done so, go ahead and follow the steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="15786-124">Tyto informace vám pomohou aplikace spuštěná Diagnostika prohlížeči událostí zobrazuje trasovací zprávy.</span><span class="sxs-lookup"><span data-stu-id="15786-124">This information will help you get an application up and running with the Diagnostics Events Viewer showing the trace messages.</span></span>

1. <span data-ttu-id="15786-125">Pokud k diagnostice události okno nezobrazí automaticky, přejděte na **zobrazení** v sadě Visual Studio, zvolte **ostatní okna** a potom **prohlížeče diagnostických událostí**.</span><span class="sxs-lookup"><span data-stu-id="15786-125">If the diagnostics events window does not automatically show, Go to the **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="15786-126">Každá událost má standardní metadata informaci o uzlu, aplikace a služby, kterou událost pochází z.</span><span class="sxs-lookup"><span data-stu-id="15786-126">Each event has standard metadata information that tells you the node, application and service the event is coming from.</span></span> <span data-ttu-id="15786-127">Můžete také filtrovat seznam událostí pomocí **filtrování událostí** pole v horní části okna události.</span><span class="sxs-lookup"><span data-stu-id="15786-127">You can also filter the list of events by using the **Filter events** box at the top of the events window.</span></span> <span data-ttu-id="15786-128">Například můžete filtrovat podle **název uzlu** nebo **název služby.**</span><span class="sxs-lookup"><span data-stu-id="15786-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="15786-129">A když se díváte na podrobnosti události, je také možné pozastavit pomocí **pozastavit** tlačítka v horní části okna události a pokračovat později, aniž by došlo ke ztrátě událostí.</span><span class="sxs-lookup"><span data-stu-id="15786-129">And when you're looking at event details, you can also pause by using the **Pause** button at the top of the events window and resume later without any loss of events.</span></span>
   
   ![Prohlížeč událostí diagnostiky Visual Studio](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-to-the-application-code"></a><span data-ttu-id="15786-131">Přidání vlastního vlastní trasování do kódu aplikace</span><span class="sxs-lookup"><span data-stu-id="15786-131">Add your own custom traces to the application code</span></span>
<span data-ttu-id="15786-132">Šablony projektů Service Fabric Visual Studio obsahovat ukázkový kód.</span><span class="sxs-lookup"><span data-stu-id="15786-132">The Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="15786-133">Kód ukazuje, jak přidat vlastní aplikaci trasování ETW kódu, které se zobrazí v prohlížeči Visual Studio ETW společně systému trasování z Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="15786-133">The code shows how to add custom application code ETW traces that show up in the Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="15786-134">Výhodou této metody je, že metadata jsou automaticky přidány do trasování a Prohlížeč událostí diagnostické sady Visual Studio již byla konfigurována pro jejich zobrazení.</span><span class="sxs-lookup"><span data-stu-id="15786-134">The advantage of this method is that metadata is automatically added to traces, and the Visual Studio Diagnostic Events Viewer is already configured to display them.</span></span>

<span data-ttu-id="15786-135">Pro projekty vytvořené z **šablony služby** (bezstavové nebo stateful) také vyhledat `RunAsync` implementace:</span><span class="sxs-lookup"><span data-stu-id="15786-135">For projects created from the **service templates** (stateless or stateful) just search for the `RunAsync` implementation:</span></span>

1. <span data-ttu-id="15786-136">Volání `ServiceEventSource.Current.ServiceMessage` v `RunAsync` metoda ukazuje příklad vlastního trasování událostí pro Windows trasování z kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="15786-136">The call to `ServiceEventSource.Current.ServiceMessage` in the `RunAsync` method shows an example of a custom ETW trace from the application code.</span></span>
2. <span data-ttu-id="15786-137">V **ServiceEventSource.cs** souboru, zjistíte, přetížení pro `ServiceEventSource.ServiceMessage` metoda, která má být použit pro vysoká frekvence událostí z důvodů výkonu.</span><span class="sxs-lookup"><span data-stu-id="15786-137">In the **ServiceEventSource.cs** file, you will find an overload for the `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="15786-138">Pro projekty vytvořené z **šablony objektu actor** (bezstavové nebo stateful):</span><span class="sxs-lookup"><span data-stu-id="15786-138">For projects created from the **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="15786-139">Otevřete **"ProjectName".cs** souboru kde *ProjectName* je název, který jste zvolili pro svůj projekt sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="15786-139">Open the **"ProjectName".cs** file where *ProjectName* is the name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="15786-140">Najít kód `ActorEventSource.Current.ActorMessage(this, "Doing Work");` v *DoWorkAsync* metoda.</span><span class="sxs-lookup"><span data-stu-id="15786-140">Find the code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in the *DoWorkAsync* method.</span></span>  <span data-ttu-id="15786-141">Toto je příklad vlastního trasování ETW zapsána z kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="15786-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="15786-142">V souboru **ActorEventSource.cs**, zjistíte, přetížení pro `ActorEventSource.ActorMessage` metoda, která má být použit pro vysoká frekvence událostí z důvodů výkonu.</span><span class="sxs-lookup"><span data-stu-id="15786-142">In file **ActorEventSource.cs**, you will find an overload for the `ActorEventSource.ActorMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="15786-143">Po přidání vlastní trasování událostí pro Windows trasování do kódu služby, můžete vytvořit, nasadit a spusťte aplikaci znovu zobrazíte vaší událostí v prohlížeči diagnostických událostí.</span><span class="sxs-lookup"><span data-stu-id="15786-143">After adding custom ETW tracing to your service code, you can build, deploy, and run the application again to see your event(s) in the Diagnostic Events Viewer.</span></span> <span data-ttu-id="15786-144">Pokud při ladění aplikace s **F5**, se automaticky otevře prohlížeč diagnostických událostí.</span><span class="sxs-lookup"><span data-stu-id="15786-144">If you debug the application with **F5**, the Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="15786-145">Další kroky</span><span class="sxs-lookup"><span data-stu-id="15786-145">Next steps</span></span>
<span data-ttu-id="15786-146">Stejný kód trasování, které jste přidali do vaší aplikace výše pro místní diagnostiky pracovat s nástroji, které můžete použít k zobrazení tyto události při spuštění aplikace v clusteru služby Azure.</span><span class="sxs-lookup"><span data-stu-id="15786-146">The same tracing code that you added to your application above for local diagnostics will work with tools that you can use to view these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="15786-147">Podívejte se na tyto články, které popisují různé možnosti pro nástroje a popisují, jak je můžete nastavit tak.</span><span class="sxs-lookup"><span data-stu-id="15786-147">Check out these articles that discuss the different options for the tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="15786-148">Postup shromažďování protokolů pomocí Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="15786-148">How to collect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="15786-149">Seskupení událostí a kolekce pomocí EventFlow</span><span class="sxs-lookup"><span data-stu-id="15786-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)

