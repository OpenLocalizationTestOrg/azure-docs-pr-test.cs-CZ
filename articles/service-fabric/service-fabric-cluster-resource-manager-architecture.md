---
title: Architektura Resource Manager | Microsoft Docs
description: "Přehled architektury portálu Service Fabric clusteru Resource Manager."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 565c20637fa93ed92bb6c52e585a4b70bdeb6f8c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="4dd0e-103">Přehled architektury správce prostředků clusteru</span><span class="sxs-lookup"><span data-stu-id="4dd0e-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="4dd0e-104">Správce prostředků clusteru Service Fabric je centrální služba, která běží v clusteru.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-104">The Service Fabric Cluster Resource Manager is a central service that runs in the cluster.</span></span> <span data-ttu-id="4dd0e-105">Spravuje požadovaný stav služeb v clusteru, zejména s ohledem na využití prostředků a pravidla pro umístění.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-105">It manages the desired state of the services in the cluster, particularly with respect to resource consumption and any placement rules.</span></span> 

<span data-ttu-id="4dd0e-106">Ke správě prostředků v clusteru, musí mít správce prostředků clusteru Service Fabric několik informací:</span><span class="sxs-lookup"><span data-stu-id="4dd0e-106">To manage the resources in your cluster, the Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="4dd0e-107">Služby, které aktuálně neexistuje.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-107">Which services currently exist</span></span>
- <span data-ttu-id="4dd0e-108">Každá služba je aktuální (nebo výchozí) spotřeby prostředků</span><span class="sxs-lookup"><span data-stu-id="4dd0e-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="4dd0e-109">Zbývající kapacita clusteru</span><span class="sxs-lookup"><span data-stu-id="4dd0e-109">The remaining cluster capacity</span></span> 
- <span data-ttu-id="4dd0e-110">Počet uzlů v clusteru</span><span class="sxs-lookup"><span data-stu-id="4dd0e-110">The capacity of the nodes in the cluster</span></span> 
- <span data-ttu-id="4dd0e-111">Množství prostředků na každém uzlu</span><span class="sxs-lookup"><span data-stu-id="4dd0e-111">The amount of resources consumed on each node</span></span>

<span data-ttu-id="4dd0e-112">Časem změnit spotřeby prostředků dané služby a služby obvykle zajímají více než jeden typ prostředku.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-112">The resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="4dd0e-113">Mezi různé služby může být skutečně fyzických i fyzické prostředky se měří.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="4dd0e-114">Služby mohou sledovat fyzické metriky jako spotřeba paměti a disku.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="4dd0e-115">Služby mohou běžně, zajímají logické metriky - věcmi, jako jsou "WorkQueueDepth" nebo "TotalRequests".</span><span class="sxs-lookup"><span data-stu-id="4dd0e-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="4dd0e-116">Logické a fyzické metriky můžete použít ve stejném clusteru.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-116">Both logical and physical metrics can be used in the same cluster.</span></span> <span data-ttu-id="4dd0e-117">Metriky můžete sdílet mezi mnoha služeb nebo být specifické pro konkrétní službu.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-117">Metrics can be shared across many services or be specific to a particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="4dd0e-118">Další důležité informace</span><span class="sxs-lookup"><span data-stu-id="4dd0e-118">Other considerations</span></span>
<span data-ttu-id="4dd0e-119">Vlastníci a operátory clusteru může lišit od autorů služby a aplikace, nebo minimálně jsou stejné vrstvy různých klobouky osoby.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-119">The owners and operators of the cluster can be different from the service and application authors, or at a minimum are the same people wearing different hats.</span></span> <span data-ttu-id="4dd0e-120">Při vývoji aplikace víte, o co vyžaduje pár věcí.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="4dd0e-121">Máte odhad bude využívat prostředky a jak nasadit různé služby.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-121">You have an estimate of the resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="4dd0e-122">Například se webová úroveň je potřeba spustit na uzlech přístup k Internetu, při databázové služby, by měly není.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-122">For example, the web tier needs to run on nodes exposed to the Internet, while the database services should not.</span></span> <span data-ttu-id="4dd0e-123">Další příklad webových služeb jsou pravděpodobně omezené procesoru a sítě, při pozor datové vrstvy služby Další informace o spotřebě paměti a disku.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-123">As another example, the web services are probably constrained by CPU and network, while the data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="4dd0e-124">Ale uživatel zpracování incident za provozu lokality pro tuto službu v produkci nebo který spravuje upgradu na službu má jinou úlohu chcete provést a vyžaduje různých nástrojů.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-124">However, the person handling a live-site incident for that service in production, or who is managing an upgrade to the service has a different job to do, and requires different tools.</span></span> 

<span data-ttu-id="4dd0e-125">Jsou dynamické clusteru i služby:</span><span class="sxs-lookup"><span data-stu-id="4dd0e-125">Both the cluster and services are dynamic:</span></span>

- <span data-ttu-id="4dd0e-126">Můžete zvýšit nebo snížit počet uzlů v clusteru</span><span class="sxs-lookup"><span data-stu-id="4dd0e-126">The number of nodes in the cluster can grow and shrink</span></span>
- <span data-ttu-id="4dd0e-127">Může pocházet a přejděte uzly různých velikostí a typů</span><span class="sxs-lookup"><span data-stu-id="4dd0e-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="4dd0e-128">Služby mohou být vytvořeny, odebrat a změnit jejich přidělení požadované zdroje a pravidla pro umístění</span><span class="sxs-lookup"><span data-stu-id="4dd0e-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="4dd0e-129">Upgrady nebo jiné operace správy, můžete vrátit prostřednictvím clusteru v aplikaci na úrovních infrastruktury</span><span class="sxs-lookup"><span data-stu-id="4dd0e-129">Upgrades or other management operations can roll through the cluster at the application on infrastructure levels</span></span>
- <span data-ttu-id="4dd0e-130">Selhání může dojít kdykoliv.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="4dd0e-131">Součásti Správce prostředků clusteru a toku dat</span><span class="sxs-lookup"><span data-stu-id="4dd0e-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="4dd0e-132">Správce prostředků clusteru má trasování požadavky na každé služby a využití prostředků pomocí každého objektu služby v rámci těchto služeb.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-132">The Cluster Resource Manager has to track the requirements of each service and the consumption of resources by each service object within those services.</span></span> <span data-ttu-id="4dd0e-133">Správce prostředků clusteru má dvě části koncepční: agentů, kteří běží na každém uzlu a služby odolné proti chybám.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-133">The Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="4dd0e-134">Agenti na každý uzel sledování zatížení sestavy ze služeb, agregační je a pravidelně sestavy je.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-134">The agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="4dd0e-135">Služba Správce prostředků clusteru agreguje všechny informace ze místní agentů a reaguje na základě jeho aktuální konfigurace.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-135">The Cluster Resource Manager service aggregates all the information from the local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="4dd0e-136">Podívejme se na následující diagram:</span><span class="sxs-lookup"><span data-stu-id="4dd0e-136">Let’s look at the following diagram:</span></span>

<span data-ttu-id="4dd0e-137"><center>
![Architektura vyrovnávání prostředků][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="4dd0e-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="4dd0e-138">Během modul runtime existuje mnoho změn, které by mohly nastat.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="4dd0e-139">Například můžeme vyslovte množství prostředků, které budou využívat některé služby změní, některé služby nezdaří a některé uzly připojení a odpojení clusteru.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-139">For example, let’s say the amount of resources some services consume changes, some services fail, and some nodes join and leave the cluster.</span></span> <span data-ttu-id="4dd0e-140">Všechny změny v uzlu se agregovat a pravidelně odesílají do služby Správce prostředků clusteru (1,2) kde jsou agregovat znovu, analyzovat a uložené.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-140">All the changes on a node are aggregated and periodically sent to the Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="4dd0e-141">Každých několik sekund, které služba zjistí změny a určuje, zda se všechny akce nezbytné (3).</span><span class="sxs-lookup"><span data-stu-id="4dd0e-141">Every few seconds that service looks at the changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="4dd0e-142">Například může Všimněte si, že byly přidány některé prázdný uzly do clusteru.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-142">For example, it could notice that some empty nodes have been added to the cluster.</span></span> <span data-ttu-id="4dd0e-143">V důsledku toho rozhodne přesunout některé služby do těchto uzlů.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-143">As a result, it decides to move some services to those nodes.</span></span> <span data-ttu-id="4dd0e-144">Správce prostředků clusteru může také Všimněte si, že je přetížena konkrétním uzlu nebo že určité služby se nezdařila nebo byla odstraněna, uvolnění prostředků jinde.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-144">The Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="4dd0e-145">Pojďme podívejte se na následující diagram a zjistěte, co se stane dále.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-145">Let’s look at the following diagram and see what happens next.</span></span> <span data-ttu-id="4dd0e-146">Řekněme, že správce prostředků clusteru Určuje, že je nutné provést změny.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-146">Let’s say that the Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="4dd0e-147">Ho koordinuje s jinými službami systému (zejména Správce převzetí služeb při selhání) provést potřebné změny.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-147">It coordinates with other system services (in particular the Failover Manager) to make the necessary changes.</span></span> <span data-ttu-id="4dd0e-148">Potřebné příkazy se pak odešlou do příslušné uzly (4).</span><span class="sxs-lookup"><span data-stu-id="4dd0e-148">Then the necessary commands are sent to the appropriate nodes (4).</span></span> <span data-ttu-id="4dd0e-149">Řekněme například, že správce prostředků si všimli, že počítač Uzel5 byl přetížený a proto se rozhodli pro přesun služby B z počítač Uzel5 do Uzel4.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-149">For example, let's say the Resource Manager noticed that Node5 was overloaded, and so decided to move service B from Node5 to Node4.</span></span> <span data-ttu-id="4dd0e-150">Na konci Rekonfigurace (5) cluster vypadat třeba takto:</span><span class="sxs-lookup"><span data-stu-id="4dd0e-150">At the end of the reconfiguration (5), the cluster looks like this:</span></span>

<span data-ttu-id="4dd0e-151"><center>
![Architektura vyrovnávání prostředků][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="4dd0e-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="4dd0e-152">Další kroky</span><span class="sxs-lookup"><span data-stu-id="4dd0e-152">Next steps</span></span>
- <span data-ttu-id="4dd0e-153">Správce prostředků clusteru má mnoho možností pro popis clusteru.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-153">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="4dd0e-154">Další informace o nich, projděte si tento článek na [popisující cluster Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="4dd0e-154">To find out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="4dd0e-155">Primární povinností správce prostředků clusteru jsou vyrovnává clusteru a vynucovat pravidla pro umístění.</span><span class="sxs-lookup"><span data-stu-id="4dd0e-155">The Cluster Resource Manager's primary duties are rebalancing the cluster and enforcing placement rules.</span></span> <span data-ttu-id="4dd0e-156">Další informace o konfiguraci těchto chování najdete v tématu [vyrovnávání cluster Service Fabric](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="4dd0e-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png
