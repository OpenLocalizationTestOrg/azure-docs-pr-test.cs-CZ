---
title: "aaaResource architektury správce | Microsoft Docs"
description: "Přehled architektury portálu Service Fabric clusteru Resource Manager."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9ea80273d0566a2ac25143ada3662875656b57b8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="e7821-103">Přehled architektury správce prostředků clusteru</span><span class="sxs-lookup"><span data-stu-id="e7821-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="e7821-104">Hello správce prostředků clusteru Service Fabric je centrální služba, která běží v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="e7821-104">hello Service Fabric Cluster Resource Manager is a central service that runs in hello cluster.</span></span> <span data-ttu-id="e7821-105">Spravuje hello požadovaného stavu služby hello v clusteru hello, zejména s ohledem tooresource využívání a pravidla pro umístění.</span><span class="sxs-lookup"><span data-stu-id="e7821-105">It manages hello desired state of hello services in hello cluster, particularly with respect tooresource consumption and any placement rules.</span></span> 

<span data-ttu-id="e7821-106">hello správce prostředků clusteru Service Fabric toomanage hello prostředky v clusteru, musí mít několik informací:</span><span class="sxs-lookup"><span data-stu-id="e7821-106">toomanage hello resources in your cluster, hello Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="e7821-107">Služby, které aktuálně neexistuje.</span><span class="sxs-lookup"><span data-stu-id="e7821-107">Which services currently exist</span></span>
- <span data-ttu-id="e7821-108">Každá služba je aktuální (nebo výchozí) spotřeby prostředků</span><span class="sxs-lookup"><span data-stu-id="e7821-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="e7821-109">Hello zbývající kapacity na clusteru</span><span class="sxs-lookup"><span data-stu-id="e7821-109">hello remaining cluster capacity</span></span> 
- <span data-ttu-id="e7821-110">kapacita Hello hello uzlů v clusteru hello</span><span class="sxs-lookup"><span data-stu-id="e7821-110">hello capacity of hello nodes in hello cluster</span></span> 
- <span data-ttu-id="e7821-111">Hello množství prostředků na každém uzlu</span><span class="sxs-lookup"><span data-stu-id="e7821-111">hello amount of resources consumed on each node</span></span>

<span data-ttu-id="e7821-112">časem změnit spotřeby prostředků Hello dané služby a služby obvykle zajímají více než jeden typ prostředku.</span><span class="sxs-lookup"><span data-stu-id="e7821-112">hello resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="e7821-113">Mezi různé služby může být skutečně fyzických i fyzické prostředky se měří.</span><span class="sxs-lookup"><span data-stu-id="e7821-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="e7821-114">Služby mohou sledovat fyzické metriky jako spotřeba paměti a disku.</span><span class="sxs-lookup"><span data-stu-id="e7821-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="e7821-115">Služby mohou běžně, zajímají logické metriky - věcmi, jako jsou "WorkQueueDepth" nebo "TotalRequests".</span><span class="sxs-lookup"><span data-stu-id="e7821-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="e7821-116">Logické a fyzické metriky mohou být používány hello stejného clusteru.</span><span class="sxs-lookup"><span data-stu-id="e7821-116">Both logical and physical metrics can be used in hello same cluster.</span></span> <span data-ttu-id="e7821-117">Metriky můžete sdílet mezi mnoha služeb nebo být konkrétní tooa konkrétní službu.</span><span class="sxs-lookup"><span data-stu-id="e7821-117">Metrics can be shared across many services or be specific tooa particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="e7821-118">Další důležité informace</span><span class="sxs-lookup"><span data-stu-id="e7821-118">Other considerations</span></span>
<span data-ttu-id="e7821-119">Hello vlastníků a operátory hello clusteru může lišit od hello autoři služby a aplikace, nebo na minimální jsou hello stejné používání různých klobouky osoby.</span><span class="sxs-lookup"><span data-stu-id="e7821-119">hello owners and operators of hello cluster can be different from hello service and application authors, or at a minimum are hello same people wearing different hats.</span></span> <span data-ttu-id="e7821-120">Při vývoji aplikace víte, o co vyžaduje pár věcí.</span><span class="sxs-lookup"><span data-stu-id="e7821-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="e7821-121">Máte odhad Dobrý den by měly být nasazeny jak různé služby a prostředky budou využívat.</span><span class="sxs-lookup"><span data-stu-id="e7821-121">You have an estimate of hello resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="e7821-122">Například hello webová vrstva musí toorun na uzly, které jsou zveřejněné toohello Internetu, při hello databázové služby, by měly není.</span><span class="sxs-lookup"><span data-stu-id="e7821-122">For example, hello web tier needs toorun on nodes exposed toohello Internet, while hello database services should not.</span></span> <span data-ttu-id="e7821-123">Další příklad hello webových služeb jsou pravděpodobně omezené procesoru a sítě, při hello datové vrstvy služby pozor Další informace o spotřebě paměti a disku.</span><span class="sxs-lookup"><span data-stu-id="e7821-123">As another example, hello web services are probably constrained by CPU and network, while hello data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="e7821-124">Zpracování za provozu lokality incident pro služby v produkčním prostředí, nebo který spravuje služby upgradu toohello osoba hello však má toodo různé úlohy a vyžaduje různých nástrojů.</span><span class="sxs-lookup"><span data-stu-id="e7821-124">However, hello person handling a live-site incident for that service in production, or who is managing an upgrade toohello service has a different job toodo, and requires different tools.</span></span> 

<span data-ttu-id="e7821-125">Jsou dynamické hello clusteru a služby:</span><span class="sxs-lookup"><span data-stu-id="e7821-125">Both hello cluster and services are dynamic:</span></span>

- <span data-ttu-id="e7821-126">můžete zvýšit nebo snížit Hello počet uzlů v clusteru hello</span><span class="sxs-lookup"><span data-stu-id="e7821-126">hello number of nodes in hello cluster can grow and shrink</span></span>
- <span data-ttu-id="e7821-127">Může pocházet a přejděte uzly různých velikostí a typů</span><span class="sxs-lookup"><span data-stu-id="e7821-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="e7821-128">Služby mohou být vytvořeny, odebrat a změnit jejich přidělení požadované zdroje a pravidla pro umístění</span><span class="sxs-lookup"><span data-stu-id="e7821-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="e7821-129">Upgrady nebo jiné operace správy, můžete vrátit prostřednictvím hello clusteru aplikace hello na úrovních infrastruktury</span><span class="sxs-lookup"><span data-stu-id="e7821-129">Upgrades or other management operations can roll through hello cluster at hello application on infrastructure levels</span></span>
- <span data-ttu-id="e7821-130">Selhání může dojít kdykoliv.</span><span class="sxs-lookup"><span data-stu-id="e7821-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="e7821-131">Součásti Správce prostředků clusteru a toku dat</span><span class="sxs-lookup"><span data-stu-id="e7821-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="e7821-132">Hello správce prostředků clusteru má tootrack hello požadavky jednotlivých služby a hello spotřeby prostředků objektem každé služby v rámci těchto služeb.</span><span class="sxs-lookup"><span data-stu-id="e7821-132">hello Cluster Resource Manager has tootrack hello requirements of each service and hello consumption of resources by each service object within those services.</span></span> <span data-ttu-id="e7821-133">Hello správce prostředků clusteru má dvě části koncepční: agentů, kteří běží na každém uzlu a služby odolné proti chybám.</span><span class="sxs-lookup"><span data-stu-id="e7821-133">hello Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="e7821-134">Hello agenty na každý uzel sledování zatížení sestavy ze služeb, agregační je a pravidelně sestavy je.</span><span class="sxs-lookup"><span data-stu-id="e7821-134">hello agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="e7821-135">Hello služby Správce prostředků clusteru slučuje všechny informace hello od agentů místní hello a odpovědí podle aktuální konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e7821-135">hello Cluster Resource Manager service aggregates all hello information from hello local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="e7821-136">Podívejme se na následující diagram hello:</span><span class="sxs-lookup"><span data-stu-id="e7821-136">Let’s look at hello following diagram:</span></span>

<span data-ttu-id="e7821-137"><center>
![Architektura vyrovnávání prostředků][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="e7821-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="e7821-138">Během modul runtime existuje mnoho změn, které by mohly nastat.</span><span class="sxs-lookup"><span data-stu-id="e7821-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="e7821-139">Předpokládejme například, že hello množství prostředků některé služby využívat změny, některé služby nezdaří, a některé uzly připojení a nechte hello cluster.</span><span class="sxs-lookup"><span data-stu-id="e7821-139">For example, let’s say hello amount of resources some services consume changes, some services fail, and some nodes join and leave hello cluster.</span></span> <span data-ttu-id="e7821-140">Všechny změny hello na uzlu se agregovat a pravidelně odesílají služby Správce prostředků clusteru sítě toohello (1,2), kde jsou agregovat znovu, analyzovat a uložené.</span><span class="sxs-lookup"><span data-stu-id="e7821-140">All hello changes on a node are aggregated and periodically sent toohello Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="e7821-141">Každých několik sekund, které služba zjistí hello změny a určuje, zda se všechny akce nezbytné (3).</span><span class="sxs-lookup"><span data-stu-id="e7821-141">Every few seconds that service looks at hello changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="e7821-142">Například může Všimněte si, že některé prázdný uzly byly přidány toohello clusteru.</span><span class="sxs-lookup"><span data-stu-id="e7821-142">For example, it could notice that some empty nodes have been added toohello cluster.</span></span> <span data-ttu-id="e7821-143">V důsledku toho se rozhodne toomove některé uzly toothose služby.</span><span class="sxs-lookup"><span data-stu-id="e7821-143">As a result, it decides toomove some services toothose nodes.</span></span> <span data-ttu-id="e7821-144">Hello správce prostředků clusteru může také Všimněte si, že je přetížena konkrétním uzlu, nebo že máte určité služby se nezdařila nebo byla odstraněna, uvolnění prostředků jinde.</span><span class="sxs-lookup"><span data-stu-id="e7821-144">hello Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="e7821-145">Pojďme podívejte se na následující diagram hello a zjistěte, co se stane dále.</span><span class="sxs-lookup"><span data-stu-id="e7821-145">Let’s look at hello following diagram and see what happens next.</span></span> <span data-ttu-id="e7821-146">Pojďme vyslovte této hello clusteru Resource Manager určuje, je nutné provést změny.</span><span class="sxs-lookup"><span data-stu-id="e7821-146">Let’s say that hello Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="e7821-147">Ho koordinuje pomocí jiné služby (v konkrétní hello Správce převzetí služeb při selhání) toomake hello nezbytné změny systému.</span><span class="sxs-lookup"><span data-stu-id="e7821-147">It coordinates with other system services (in particular hello Failover Manager) toomake hello necessary changes.</span></span> <span data-ttu-id="e7821-148">Hello potřebné příkazy se pak odešlou toohello odpovídající uzly (4).</span><span class="sxs-lookup"><span data-stu-id="e7821-148">Then hello necessary commands are sent toohello appropriate nodes (4).</span></span> <span data-ttu-id="e7821-149">Předpokládejme například že hello Resource Manager si všimli, že počítač Uzel5 byl přetížený a proto se rozhodli, službu toomove B tooNode4 počítač Uzel5.</span><span class="sxs-lookup"><span data-stu-id="e7821-149">For example, let's say hello Resource Manager noticed that Node5 was overloaded, and so decided toomove service B from Node5 tooNode4.</span></span> <span data-ttu-id="e7821-150">Na konci hello tohoto Rekonfigurace hello (5) hello cluster vypadat třeba takto:</span><span class="sxs-lookup"><span data-stu-id="e7821-150">At hello end of hello reconfiguration (5), hello cluster looks like this:</span></span>

<span data-ttu-id="e7821-151"><center>
![Architektura vyrovnávání prostředků][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="e7821-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="e7821-152">Další kroky</span><span class="sxs-lookup"><span data-stu-id="e7821-152">Next steps</span></span>
- <span data-ttu-id="e7821-153">Hello správce prostředků clusteru má mnoho možností pro popisující hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="e7821-153">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="e7821-154">toofind Další informace o jejich, projděte si tento článek na [popisující cluster Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="e7821-154">toofind out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="e7821-155">primární povinností Hello clusteru správce prostředků jsou vyrovnává hello clusteru a vynucovat pravidla pro umístění.</span><span class="sxs-lookup"><span data-stu-id="e7821-155">hello Cluster Resource Manager's primary duties are rebalancing hello cluster and enforcing placement rules.</span></span> <span data-ttu-id="e7821-156">Další informace o konfiguraci těchto chování najdete v tématu [vyrovnávání cluster Service Fabric](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="e7821-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png
