---
title: "aaaManage Azure mikroslužbu zatížení pomocí metriky | Microsoft Docs"
description: "Informace o tom, jak tooconfigure a používání metriky v Service Fabric toomanage služby spotřeby prostředků."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="dc436-103">Správa spotřeby prostředků a zatížení v Service Fabric pomocí metrik</span><span class="sxs-lookup"><span data-stu-id="dc436-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="dc436-104">*Metriky* hello prostředků, které vaše služby péče o a které jsou k dispozici hello uzly v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="dc436-105">Metrika je nic, které chcete toomanage v pořadí tooimprove nebo monitorování výkonu hello vašich služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="dc436-106">Pokud je přetížena služby, například může sledovat tooknow spotřeba paměti.</span><span class="sxs-lookup"><span data-stu-id="dc436-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="dc436-107">Použijte jiný je toofigure se, zda může služba hello přesunout jinde kde paměti je že menší omezené v pořadí tooget lepší výkon.</span><span class="sxs-lookup"><span data-stu-id="dc436-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="dc436-108">Příklady metriky jsou věci jako využití paměti, disku a procesoru.</span><span class="sxs-lookup"><span data-stu-id="dc436-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="dc436-109">Tyto metriky jsou fyzické metriky, prostředky, které odpovídají toophysical prostředky v hello uzlu, který potřebují toobe spravované.</span><span class="sxs-lookup"><span data-stu-id="dc436-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="dc436-110">Metriky může být také (a často jsou) logické metriky.</span><span class="sxs-lookup"><span data-stu-id="dc436-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="dc436-111">Logické metriky věci jako "MyWorkQueueDepth" nebo "MessagesToProcess" nebo "TotalRecords".</span><span class="sxs-lookup"><span data-stu-id="dc436-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="dc436-112">Logické metriky jsou definované aplikací a nepřímo odpovídají spotřeby toosome fyzických prostředků.</span><span class="sxs-lookup"><span data-stu-id="dc436-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="dc436-113">Logické metriky jsou společné, protože může být pevný toomeasure a sestava spotřeby fyzické prostředky na základě služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="dc436-114">složitost Hello měření a vytváření sestav vlastní fyzické metriky je také proč Service Fabric nabízí několik výchozích metrik.</span><span class="sxs-lookup"><span data-stu-id="dc436-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="dc436-115">Výchozích metrik</span><span class="sxs-lookup"><span data-stu-id="dc436-115">Default metrics</span></span>
<span data-ttu-id="dc436-116">Řekněme, že chcete tooget spuštění zápisu a nasazení služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="dc436-117">V tomto okamžiku nevíte fyzické nebo logické prostředky spotřebuje.</span><span class="sxs-lookup"><span data-stu-id="dc436-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="dc436-118">Není to!</span><span class="sxs-lookup"><span data-stu-id="dc436-118">That’s fine!</span></span> <span data-ttu-id="dc436-119">Hello správce prostředků clusteru Service Fabric používá několik výchozích metrik, pokud nejsou zadány žádné jiné metriky.</span><span class="sxs-lookup"><span data-stu-id="dc436-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="dc436-120">Jsou:</span><span class="sxs-lookup"><span data-stu-id="dc436-120">They are:</span></span>

  - <span data-ttu-id="dc436-121">PrimaryCount - počet primární repliky na uzlu hello</span><span class="sxs-lookup"><span data-stu-id="dc436-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="dc436-122">ReplicaCount - počet celkový stavová repliky na uzlu hello</span><span class="sxs-lookup"><span data-stu-id="dc436-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="dc436-123">Počet - počet všech objektů služby (bezstavové a stavové) na uzlu hello</span><span class="sxs-lookup"><span data-stu-id="dc436-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="dc436-124">Metrika</span><span class="sxs-lookup"><span data-stu-id="dc436-124">Metric</span></span> | <span data-ttu-id="dc436-125">Bezstavové Instance zatížení</span><span class="sxs-lookup"><span data-stu-id="dc436-125">Stateless Instance Load</span></span> | <span data-ttu-id="dc436-126">Stavová zatížení sekundární</span><span class="sxs-lookup"><span data-stu-id="dc436-126">Stateful Secondary Load</span></span> | <span data-ttu-id="dc436-127">Stavová zatížení primární</span><span class="sxs-lookup"><span data-stu-id="dc436-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="dc436-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="dc436-128">PrimaryCount</span></span> |<span data-ttu-id="dc436-129">0</span><span class="sxs-lookup"><span data-stu-id="dc436-129">0</span></span> |<span data-ttu-id="dc436-130">0</span><span class="sxs-lookup"><span data-stu-id="dc436-130">0</span></span> |<span data-ttu-id="dc436-131">1</span><span class="sxs-lookup"><span data-stu-id="dc436-131">1</span></span> |
| <span data-ttu-id="dc436-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="dc436-132">ReplicaCount</span></span> |<span data-ttu-id="dc436-133">0</span><span class="sxs-lookup"><span data-stu-id="dc436-133">0</span></span> |<span data-ttu-id="dc436-134">1</span><span class="sxs-lookup"><span data-stu-id="dc436-134">1</span></span> |<span data-ttu-id="dc436-135">1</span><span class="sxs-lookup"><span data-stu-id="dc436-135">1</span></span> |
| <span data-ttu-id="dc436-136">Počet</span><span class="sxs-lookup"><span data-stu-id="dc436-136">Count</span></span> |<span data-ttu-id="dc436-137">1</span><span class="sxs-lookup"><span data-stu-id="dc436-137">1</span></span> |<span data-ttu-id="dc436-138">1</span><span class="sxs-lookup"><span data-stu-id="dc436-138">1</span></span> |<span data-ttu-id="dc436-139">1</span><span class="sxs-lookup"><span data-stu-id="dc436-139">1</span></span> |

<span data-ttu-id="dc436-140">Pro základní úlohy výchozích metrik hello zadejte dostatečnou distribuční práce v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="dc436-141">V následujícím příkladu hello Podíváme se, co se stane, když jsme vytvořit dvě služby a spoléhají na hello výchozích metrik pro vyrovnávání.</span><span class="sxs-lookup"><span data-stu-id="dc436-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="dc436-142">repliku cíl nastavit velikost tří první službě Hello je stavové služby s tři oddíly.</span><span class="sxs-lookup"><span data-stu-id="dc436-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="dc436-143">druhý služba Hello je bezstavové služby s jedním oddílem a počet instancí tří.</span><span class="sxs-lookup"><span data-stu-id="dc436-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="dc436-144">Tady je můžete získat:</span><span class="sxs-lookup"><span data-stu-id="dc436-144">Here's what you get:</span></span>

<span data-ttu-id="dc436-145"><center>
![Cluster rozložení s výchozím nastavení metriky][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="dc436-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="dc436-146">Toonote některé věci:</span><span class="sxs-lookup"><span data-stu-id="dc436-146">Some things toonote:</span></span>
  - <span data-ttu-id="dc436-147">Primární repliky pro hello stavové služby, které jsou rozmístěny v několika uzly</span><span class="sxs-lookup"><span data-stu-id="dc436-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="dc436-148">Repliky pro hello stejného oddílu jsou na různých uzlech</span><span class="sxs-lookup"><span data-stu-id="dc436-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="dc436-149">Celkový počet Hello základní barvy a sekundárních databází se distribuuje v clusteru hello</span><span class="sxs-lookup"><span data-stu-id="dc436-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="dc436-150">Celkový počet objektů služby Hello jsou rovnoměrně přiděleny na každém uzlu</span><span class="sxs-lookup"><span data-stu-id="dc436-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="dc436-151">Dobré!</span><span class="sxs-lookup"><span data-stu-id="dc436-151">Good!</span></span>

<span data-ttu-id="dc436-152">Hello výchozích metrik fungovat skvěle jako spuštění.</span><span class="sxs-lookup"><span data-stu-id="dc436-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="dc436-153">Ale hello výchozích metrik bude pouze provádění můžete dosavadní práce.</span><span class="sxs-lookup"><span data-stu-id="dc436-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="dc436-154">Příklad: co je hello pravděpodobnost, že dělení hello scheme je vybráno výsledky perfektně i využití tím všechny oddíly?</span><span class="sxs-lookup"><span data-stu-id="dc436-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="dc436-155">Co je hello pravděpodobnost, že hello zatížení pro danou službu je konstantní v průběhu času, nebo i právě stejné hello napříč více oddílů nyní?</span><span class="sxs-lookup"><span data-stu-id="dc436-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="dc436-156">Můžete spustit s právě hello výchozích metrik.</span><span class="sxs-lookup"><span data-stu-id="dc436-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="dc436-157">Obvykle to však znamená, že využití vašeho clusteru je menší a více nerovnoměrné, než byste chtěli.</span><span class="sxs-lookup"><span data-stu-id="dc436-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="dc436-158">Je to proto hello výchozích metrik nejsou adaptivní a předpokládá, že všechno, co je ekvivalentní.</span><span class="sxs-lookup"><span data-stu-id="dc436-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="dc436-159">"1" metrika PrimaryCount toohello přispět například primární, který je zaneprázdněn a ten, který není obou.</span><span class="sxs-lookup"><span data-stu-id="dc436-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="dc436-160">V nejhorším případě hello pomocí pouze hello výchozích metrik může také způsobit overscheduled uzly vést k problémům s výkonem.</span><span class="sxs-lookup"><span data-stu-id="dc436-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="dc436-161">Pokud vás zajímá získávání hello většina mimo cluster a vyhnout problémům s výkonem, je třeba toouse vlastní metriky a vytváření sestav dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="dc436-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="dc436-162">Vlastní metriky</span><span class="sxs-lookup"><span data-stu-id="dc436-162">Custom metrics</span></span>
<span data-ttu-id="dc436-163">Metriky jsou nakonfigurované na základě jednotlivých s názvem service instancí při vytváření služby hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="dc436-164">Všechny metrika se některé vlastnosti, které popisují ho: název, váhu a výchozí zatížení.</span><span class="sxs-lookup"><span data-stu-id="dc436-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="dc436-165">Název metriky: název hello metrika hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="dc436-166">Název metriky Hello je jedinečný identifikátor pro metriku hello v rámci clusteru hello z hlediska hello Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="dc436-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="dc436-167">Váha: Váha metriky definuje, jak důležité tato metrika je relativní toohello další metriky pro tuto službu.</span><span class="sxs-lookup"><span data-stu-id="dc436-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="dc436-168">Výchozí zatížení: hello výchozí zatížení je reprezentována odlišně v závislosti na tom, zda je služba hello bezstavové nebo stateful.</span><span class="sxs-lookup"><span data-stu-id="dc436-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="dc436-169">Pro bezstavové služby jednotlivé metriky má jednu vlastnost s názvem DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="dc436-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="dc436-170">Pro stavové služby můžete definovat:</span><span class="sxs-lookup"><span data-stu-id="dc436-170">For stateful services you define:</span></span>
    * <span data-ttu-id="dc436-171">PrimaryDefaultLoad: výchozí velikost hello tuto metriku, které tato služba využívá, pokud je primární</span><span class="sxs-lookup"><span data-stu-id="dc436-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="dc436-172">SecondaryDefaultLoad: tuto metriku, které tato služba využívá případě, že je sekundární velikost výchozí hello</span><span class="sxs-lookup"><span data-stu-id="dc436-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="dc436-173">Pokud definujete vlastní metriky a chcete too_also_ použít hello výchozí nastavení, je třeba too_explicitly_ přidat hello výchozích metrik zpět a zadejte váhu a hodnoty pro ně.</span><span class="sxs-lookup"><span data-stu-id="dc436-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="dc436-174">Je to proto, že je nutné definovat hello vztah mezi hello výchozích metrik a vaše vlastní metriky.</span><span class="sxs-lookup"><span data-stu-id="dc436-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="dc436-175">Například možná se zajímáte o ConnectionCount nebo WorkQueueDepth víc než primární distribuce.</span><span class="sxs-lookup"><span data-stu-id="dc436-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="dc436-176">Pomocí výchozí hello váhu hello PrimaryCount metrika se horní, takže chcete tooreduce ho tooMedium při přidání vaší jiné metriky tooensure jejich přednost.</span><span class="sxs-lookup"><span data-stu-id="dc436-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="dc436-177">Definice metrik služby – příklad</span><span class="sxs-lookup"><span data-stu-id="dc436-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="dc436-178">Může se stát, že chcete hello následující konfigurace:</span><span class="sxs-lookup"><span data-stu-id="dc436-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="dc436-179">Sestavy služby metriky s názvem "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="dc436-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="dc436-180">Chcete taky toouse hello výchozích metrik</span><span class="sxs-lookup"><span data-stu-id="dc436-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="dc436-181">Jste provádí některé měření a vědět, že normálně primární repliky této služby zabírají 20 jednotek "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="dc436-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="dc436-182">Sekundární databáze použijte 5 jednotky "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="dc436-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="dc436-183">Víte, že "ConnectionCount" hello nejdůležitější metriky z hlediska Správa výkonu hello této konkrétní služby</span><span class="sxs-lookup"><span data-stu-id="dc436-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="dc436-184">Stále chcete vyrovnáváním primární repliky.</span><span class="sxs-lookup"><span data-stu-id="dc436-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="dc436-185">Vyrovnávání primární repliky obecně je vhodné bez ohledu na to, co.</span><span class="sxs-lookup"><span data-stu-id="dc436-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="dc436-186">To pomáhá zabránit ztrátě hello některé domény uzlu nebo selhání většiny primární repliky společně s jeho, které mají vliv.</span><span class="sxs-lookup"><span data-stu-id="dc436-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="dc436-187">Jinak jsou hello výchozích metrik</span><span class="sxs-lookup"><span data-stu-id="dc436-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="dc436-188">Tady je kód hello, že byste měli psát toocreate služby s touto konfigurací metriky:</span><span class="sxs-lookup"><span data-stu-id="dc436-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="dc436-189">Kód:</span><span class="sxs-lookup"><span data-stu-id="dc436-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="dc436-190">Prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="dc436-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="dc436-191">Hello výše příklady a hello zbytek tohoto dokumentu popisuje správu metriky na základě za-s názvem service.</span><span class="sxs-lookup"><span data-stu-id="dc436-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="dc436-192">Je také možné toodefine metriky pro vaše služby v hello service _typ_ úroveň.</span><span class="sxs-lookup"><span data-stu-id="dc436-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="dc436-193">To se provádí zadáním v manifestech vaší služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="dc436-194">Definování typu metriky na úrovni se nedoporučuje z několika důvodů.</span><span class="sxs-lookup"><span data-stu-id="dc436-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="dc436-195">Hello prvním důvodem je, že metriky názvy jsou často konkrétní prostředí.</span><span class="sxs-lookup"><span data-stu-id="dc436-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="dc436-196">Pokud je na místě závazné kontrakt, nemůže se ujistěte, že tento metrika hello "Jader" v jednom prostředí není "MiliCores" nebo "Jader" k ostatním.</span><span class="sxs-lookup"><span data-stu-id="dc436-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="dc436-197">Pokud vaše metriky, které jsou definovány v manifestu je třeba manifesty nového toocreate za prostředí.</span><span class="sxs-lookup"><span data-stu-id="dc436-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="dc436-198">To obvykle vede tooa, jak narůstá počet jinou manifestech s pouze drobné rozdíly, které může způsobit problémy toomanagement.</span><span class="sxs-lookup"><span data-stu-id="dc436-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="dc436-199">Metriky zatížení jsou běžně přiřadit na základě jednotlivých s názvem service instancí.</span><span class="sxs-lookup"><span data-stu-id="dc436-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="dc436-200">Předpokládejme například, že vytvoříte jednu instanci hello služby pro CustomerA, kdo plány toouse ho pouze lehkým.</span><span class="sxs-lookup"><span data-stu-id="dc436-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="dc436-201">Také se stát, že vytvoříte jiné pro CustomerB, který má větší zatížení.</span><span class="sxs-lookup"><span data-stu-id="dc436-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="dc436-202">V takovém případě budete by pravděpodobně chtít načte výchozí hello tootweak pro tyto služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="dc436-203">Pokud máte metriky a zatížením definované prostřednictvím manifesty a vy chcete toosupport tento scénář, vyžaduje pro každého zákazníka jiné aplikace a typů služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="dc436-204">Hello hodnot definovaných v okamžiku vytvoření služby přepíšou nastavení definované v manifestu hello, takže můžete použít tento tooset hello konkrétní výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="dc436-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="dc436-205">Ale učinit způsobí, že hodnoty hello deklarované v hello manifesty odpovídají toonot těchto hello služba je ve skutečnosti spuštěna s.</span><span class="sxs-lookup"><span data-stu-id="dc436-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="dc436-206">To může způsobit tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="dc436-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="dc436-207">Jako připomenutí: Pokud chcete toouse hello výchozích metrik, není nutné tootouch hello metriky kolekce vůbec nebo provádět žádné zvláštní při vytváření služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="dc436-208">Hello výchozích metrik získat použít automaticky, když jsou definovány žádné jiné.</span><span class="sxs-lookup"><span data-stu-id="dc436-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="dc436-209">Nyní se Vraťme se prostřednictvím každé z těchto nastavení podrobněji a mluvit o hello chování, které má vliv.</span><span class="sxs-lookup"><span data-stu-id="dc436-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="dc436-210">Načtení</span><span class="sxs-lookup"><span data-stu-id="dc436-210">Load</span></span>
<span data-ttu-id="dc436-211">Hello celou bodu definice metrik je toorepresent některé zatížení.</span><span class="sxs-lookup"><span data-stu-id="dc436-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="dc436-212">*Zatížení* je kolik danou metriku obsazením některé instance služby nebo repliky v daném uzlu.</span><span class="sxs-lookup"><span data-stu-id="dc436-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="dc436-213">Zatížení se dá nakonfigurovat téměř libovolném okamžiku.</span><span class="sxs-lookup"><span data-stu-id="dc436-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="dc436-214">Například:</span><span class="sxs-lookup"><span data-stu-id="dc436-214">For example:</span></span>

  - <span data-ttu-id="dc436-215">Zatížení se dá definovat při vytváření služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="dc436-216">To se označuje jako _výchozí zatížení_.</span><span class="sxs-lookup"><span data-stu-id="dc436-216">This is called _default load_.</span></span>
  - <span data-ttu-id="dc436-217">Hello metriky informace, včetně výchozí načte pro službu lze aktualizovat po vytvoření služby hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="dc436-218">To se označuje jako _aktualizace služby_.</span><span class="sxs-lookup"><span data-stu-id="dc436-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="dc436-219">Hello zatížení pro daný oddíl může být resetování toohello výchozí hodnoty pro tuto službu.</span><span class="sxs-lookup"><span data-stu-id="dc436-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="dc436-220">To se označuje jako _obnovení zatížení oddílu_.</span><span class="sxs-lookup"><span data-stu-id="dc436-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="dc436-221">Zatížení mohou být zaznamenány na za objekt individuálních dynamicky za běhu.</span><span class="sxs-lookup"><span data-stu-id="dc436-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="dc436-222">To se označuje jako _reporting zatížení_.</span><span class="sxs-lookup"><span data-stu-id="dc436-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="dc436-223">Všechny tyto strategie lze použít v rámci stejné služby průběhu své životnosti hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="dc436-224">Výchozí zatížení</span><span class="sxs-lookup"><span data-stu-id="dc436-224">Default load</span></span>
<span data-ttu-id="dc436-225">*Výchozí zatížení* je kolik hello metrika využívá každý objekt služby (bezstavové instance nebo stavová repliky) této služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="dc436-226">Hello clusteru Resource Manager používá toto číslo pro zatížení hello objektu služby hello až do obdržení jiné informace, jako je například dynamického zatížení sestavy.</span><span class="sxs-lookup"><span data-stu-id="dc436-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="dc436-227">Pro jednodušší služby je výchozí zatížení hello definici statické.</span><span class="sxs-lookup"><span data-stu-id="dc436-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="dc436-228">Hello výchozí zatížení nikdy se aktualizuje a slouží k hello životnost hello služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="dc436-229">Výchozí načte funguje dobře pro jednoduché plánování scénáře, kde určité množství prostředků jsou vyhrazené toodifferent úlohy a neměňte kapacity.</span><span class="sxs-lookup"><span data-stu-id="dc436-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="dc436-230">Další informace o řízení kapacity a definování kapacity pro hello uzly v clusteru, najdete v tématu [v tomto článku](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="dc436-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="dc436-231">Hello clusteru Resource Manager umožňuje toospecify stavové služby různé výchozí zatížení pro své základní barvy a sekundární repliky.</span><span class="sxs-lookup"><span data-stu-id="dc436-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="dc436-232">Bezstavové služby můžete zadat jenom jednu hodnotu, která se použije tooall instance.</span><span class="sxs-lookup"><span data-stu-id="dc436-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="dc436-233">Pro stavové služby se obvykle liší hello výchozí zatížení pro primární i sekundární repliky, protože repliky proveďte různé druhy práce v každé role.</span><span class="sxs-lookup"><span data-stu-id="dc436-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="dc436-234">Například základní barvy obvykle sloužit čtení a zápisu a zpracovat většinu hello výpočetní zatížení, když sekundární databáze nepodporují.</span><span class="sxs-lookup"><span data-stu-id="dc436-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="dc436-235">Obvykle je vyšší než hello výchozí zatížení pro sekundární repliky hello výchozí zatížení pro primární repliku.</span><span class="sxs-lookup"><span data-stu-id="dc436-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="dc436-236">reálná čísla Hello by měl závisí na svých vlastních hodnot.</span><span class="sxs-lookup"><span data-stu-id="dc436-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="dc436-237">Dynamické načtení</span><span class="sxs-lookup"><span data-stu-id="dc436-237">Dynamic load</span></span>
<span data-ttu-id="dc436-238">Řekněme, že jste byl spuštěn služby nějakou dobu.</span><span class="sxs-lookup"><span data-stu-id="dc436-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="dc436-239">S některá monitorování jste si všimli který:</span><span class="sxs-lookup"><span data-stu-id="dc436-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="dc436-240">Některé oddíly nebo instance dané služby spotřebují více prostředků než jiné</span><span class="sxs-lookup"><span data-stu-id="dc436-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="dc436-241">Některé služby mají zatížení, který se liší v čase.</span><span class="sxs-lookup"><span data-stu-id="dc436-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="dc436-242">Je velké množství věcí, které by mohly způsobit tyto typy kolísání zátěže.</span><span class="sxs-lookup"><span data-stu-id="dc436-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="dc436-243">Například různé služby nebo oddíly jsou přidruženy různých zákazníků, jejichž jiné požadavky.</span><span class="sxs-lookup"><span data-stu-id="dc436-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="dc436-244">Zatížení může také změnit, protože hello množství práce hello služby se liší průběhu hello hello den.</span><span class="sxs-lookup"><span data-stu-id="dc436-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="dc436-245">Bez ohledu na to z toho důvodu hello obvykle neexistuje, můžete použít pro výchozí číslo jeden.</span><span class="sxs-lookup"><span data-stu-id="dc436-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="dc436-246">To platí hlavně pokud chcete tooget hello většina využití mimo hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="dc436-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="dc436-247">Libovolná hodnota, kterou vyberete pro výchozí zatížení je nesprávný některé hello času.</span><span class="sxs-lookup"><span data-stu-id="dc436-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="dc436-248">Nesprávný výchozí načte vést hello správce prostředků clusteru nad nebo pod přidělování prostředků.</span><span class="sxs-lookup"><span data-stu-id="dc436-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="dc436-249">V důsledku toho máte uzlů, které jsou nad nebo pod využité Přestože hello správce prostředků clusteru předpokládá, že jsou rovnoměrně hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="dc436-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="dc436-250">Výchozí zatížení jsou stále vhodné, protože poskytují některé informace pro počáteční umístění, ale nejsou kompletní scénáře pro skutečné úlohy.</span><span class="sxs-lookup"><span data-stu-id="dc436-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="dc436-251">zachycení tooaccurately změna požadavky na prostředky, hello clusteru Resource Manager umožňuje každý objekt tooupdate služby vlastní zatížení za běhu.</span><span class="sxs-lookup"><span data-stu-id="dc436-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="dc436-252">Tomu se říká reporting dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="dc436-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="dc436-253">Dynamické načtení sestav povolit replik nebo instancí tooadjust jejich přidělení/hlášené zatížení metrik průběhu své životnosti.</span><span class="sxs-lookup"><span data-stu-id="dc436-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="dc436-254">Replika služby nebo instanci, která se uloží málo používaná data a není to veškerou práci, by obvykle sestavy, aby používalo nízkou množství danou metriku.</span><span class="sxs-lookup"><span data-stu-id="dc436-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="dc436-255">Zaneprázdněný replik nebo instancí by hlásit, že používají více.</span><span class="sxs-lookup"><span data-stu-id="dc436-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="dc436-256">Vytváření sestav zatížení za replik nebo instancí umožňuje hello tooreorganize správce prostředků clusteru objekty hello jednotlivé služby v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="dc436-257">Reorganizace hello služby pomáhá zajistit, že získají hello prostředky, které vyžadují.</span><span class="sxs-lookup"><span data-stu-id="dc436-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="dc436-258">Zaneprázdněný služby efektivně získat příliš "uvolnit" prostředky z dalších replik nebo instancí, které jsou aktuálně studené nebo méně pracuje.</span><span class="sxs-lookup"><span data-stu-id="dc436-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="dc436-259">V rámci spolehlivé služby hello kód tooreport zatížení dynamicky vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="dc436-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="dc436-260">Kód:</span><span class="sxs-lookup"><span data-stu-id="dc436-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="dc436-261">Služba může hlásit na žádném z hello metriky definované pro něj v okamžiku vytvoření.</span><span class="sxs-lookup"><span data-stu-id="dc436-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="dc436-262">Pokud zatížení sestavy služby pro metriku, který není nakonfigurovaný toouse, Service Fabric ignoruje této sestavy.</span><span class="sxs-lookup"><span data-stu-id="dc436-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="dc436-263">Pokud existují další metriky hlášené v hello stejnou dobu, po kterou jsou platné, jsou podmínky přijaty tyto sestavy.</span><span class="sxs-lookup"><span data-stu-id="dc436-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="dc436-264">Kódu služby můžete měřit a sestavy, všechny hello metriky věděl, že může postupy, a operátory můžete zadat toouse hello metriky konfigurace bez nutnosti kódu služby toochange hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="dc436-265">Aktualizuje se konfigurace metriky služby</span><span class="sxs-lookup"><span data-stu-id="dc436-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="dc436-266">Hello seznam metriky související se službou hello a hello tyto metriky můžete aktualizovat vlastnosti dynamicky při provozu služby hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="dc436-267">To umožňuje experimentování a flexibilitu.</span><span class="sxs-lookup"><span data-stu-id="dc436-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="dc436-268">Některé příklady Pokud to je užitečné, jsou:</span><span class="sxs-lookup"><span data-stu-id="dc436-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="dc436-269">zakázání metrika s buggy zprávy pro konkrétní službu</span><span class="sxs-lookup"><span data-stu-id="dc436-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="dc436-270">Změna konfigurace hello váhu metriky na základě požadovaného chování</span><span class="sxs-lookup"><span data-stu-id="dc436-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="dc436-271">povolení nové metrika až po hello kód již nasazen a ověřit pomocí jiných mechanismů</span><span class="sxs-lookup"><span data-stu-id="dc436-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="dc436-272">Změna hello výchozí zatížení pro službu na základě pozorovaných chování a spotřeba</span><span class="sxs-lookup"><span data-stu-id="dc436-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="dc436-273">Hello hlavní rozhraní API pro změnu metriky konfigurace jsou `FabricClient.ServiceManagementClient.UpdateServiceAsync` v jazyce C# a `Update-ServiceFabricService` v prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="dc436-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="dc436-274">Ať informace, které zadáte pomocí těchto rozhraní API nahrazuje hello stávající informace o metrikách služby hello okamžitě.</span><span class="sxs-lookup"><span data-stu-id="dc436-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="dc436-275">Kombinování výchozí hodnoty zatížení a dynamické načtení sestav</span><span class="sxs-lookup"><span data-stu-id="dc436-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="dc436-276">Výchozí zatížení a dynamické zatížení lze použít pro hello stejnou službu.</span><span class="sxs-lookup"><span data-stu-id="dc436-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="dc436-277">Když služba využívá výchozí zatížení a dynamické načtení sestavy, výchozí zatížení slouží jako odhad dokud dynamické sestavy, na které se objeví.</span><span class="sxs-lookup"><span data-stu-id="dc436-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="dc436-278">Výchozí zatížení je vhodný, protože nabízí hello správce prostředků clusteru něco toowork s.</span><span class="sxs-lookup"><span data-stu-id="dc436-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="dc436-279">Hello výchozí zatížení umožňuje hello tooplace správce prostředků clusteru při jejich vytváření objektů služby hello v dobré umístění.</span><span class="sxs-lookup"><span data-stu-id="dc436-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="dc436-280">Pokud je zadaný žádný výchozí informace o zatížení, je efektivně náhodný umístění služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="dc436-281">Při načítání sestavy příchodu později hello počáteční náhodných umístění je často nesprávný a hello správce prostředků clusteru má toomove služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="dc436-282">Umožňuje trvat naše předchozí příklad a zjistěte, co se stane, když přidáme některé vlastní metriky a vytváření sestav dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="dc436-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="dc436-283">V tomto příkladu používáme jako metriku příklad "MemoryInMb".</span><span class="sxs-lookup"><span data-stu-id="dc436-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="dc436-284">Paměť je jedním z hello systému metriky, které můžete Service Fabric [prostředek řídí](service-fabric-resource-governance.md), a reporting sami je obvykle obtížná.</span><span class="sxs-lookup"><span data-stu-id="dc436-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="dc436-285">Nemáte Očekáváme, že ve skutečnosti můžete tooreport na spotřebu paměti; Paměť se používá jako toolearning podpory o možnostech hello hello správce prostředků clusteru.</span><span class="sxs-lookup"><span data-stu-id="dc436-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="dc436-286">Pojďme se předpokládá jsme původně vytvořili hello stavové služby s hello následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="dc436-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="dc436-287">Prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="dc436-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="dc436-288">Připomínáme je tato syntaxe (MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="dc436-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="dc436-289">Podívejme se, co jeden rozložení možné clusteru může vypadat podobně jako:</span><span class="sxs-lookup"><span data-stu-id="dc436-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="dc436-290"><center>
![Cluster rovnováha s výchozí i vlastní metriky][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="dc436-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="dc436-291">Některé věci, které jsou vhodné poznamenat:</span><span class="sxs-lookup"><span data-stu-id="dc436-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="dc436-292">Každý sekundární repliky v rámci oddílu může mít vlastní zatížení</span><span class="sxs-lookup"><span data-stu-id="dc436-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="dc436-293">Celkové vypadat vyrovnáváním hello metriky.</span><span class="sxs-lookup"><span data-stu-id="dc436-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="dc436-294">O paměť, hello poměr mezi hello maximální a minimální zatížení je 1,75 (hello uzlu s hello většinu zatížení je N3, hello alespoň N2 a 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="dc436-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="dc436-295">Existují některé věci, potřebujeme ještě tooexplain:</span><span class="sxs-lookup"><span data-stu-id="dc436-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="dc436-296">Co je určit, zda byla poměr 1,75 přiměřené nebo ne?</span><span class="sxs-lookup"><span data-stu-id="dc436-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="dc436-297">Jak hello správce prostředků clusteru, že pokud to je výhodné dostatečně, nebo pokud existuje více toodo pracovní?</span><span class="sxs-lookup"><span data-stu-id="dc436-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="dc436-298">Pokud vyrovnávání dojít?</span><span class="sxs-lookup"><span data-stu-id="dc436-298">When does balancing happen?</span></span>
* <span data-ttu-id="dc436-299">Co to znamená, že byl "Základní" váha paměti?</span><span class="sxs-lookup"><span data-stu-id="dc436-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="dc436-300">Metriky váhu</span><span class="sxs-lookup"><span data-stu-id="dc436-300">Metric weights</span></span>
<span data-ttu-id="dc436-301">Sledování hello stejné metriky mezi různé služby je důležité.</span><span class="sxs-lookup"><span data-stu-id="dc436-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="dc436-302">Zda je globální zobrazení, co umožňuje hello energie tootrack správce prostředků clusteru v clusteru hello, vyvážit spotřeba mezi uzly a ujistěte se, uzly si projít kapacity.</span><span class="sxs-lookup"><span data-stu-id="dc436-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="dc436-303">Služby však mohou mít různá zobrazení jako toohello význam hello stejnou metriku.</span><span class="sxs-lookup"><span data-stu-id="dc436-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="dc436-304">V clusteru s mnoha metriky a velké množství služeb, navíc perfektně vyrovnáváním řešení neexistuje pro všechny metriky.</span><span class="sxs-lookup"><span data-stu-id="dc436-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="dc436-305">Jak hello správce prostředků clusteru pracovat s těmito situacemi?</span><span class="sxs-lookup"><span data-stu-id="dc436-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="dc436-306">Metriky váhu povolit hello toodecide správce prostředků clusteru, jak toobalance hello clusteru při volaná úplně bez chyby.</span><span class="sxs-lookup"><span data-stu-id="dc436-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="dc436-307">Metriky váhu také povolit hello správce prostředků clusteru toobalance určitým službám jinak.</span><span class="sxs-lookup"><span data-stu-id="dc436-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="dc436-308">Metriky lze vytvořit čtyři úrovně různých váhy: nula, nízké, střední a vysokou.</span><span class="sxs-lookup"><span data-stu-id="dc436-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="dc436-309">Metrika s váhou nula přispívá nic při určování, zda jsou vyváženy věcí, nebo ne.</span><span class="sxs-lookup"><span data-stu-id="dc436-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="dc436-310">Jejím zatížení však stále přispívat toocapacity správy.</span><span class="sxs-lookup"><span data-stu-id="dc436-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="dc436-311">Metriky s nulovou tloušťkou jsou stále užitečné a často používají jako součást chování služby a sledování výkonu.</span><span class="sxs-lookup"><span data-stu-id="dc436-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="dc436-312">[Tento článek](service-fabric-diagnostics-event-generation-infra.md) poskytuje další informace o použití hello metriky pro monitorování a Diagnostika vašich služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="dc436-313">Hello skutečné dopad jiné metriky váhu v clusteru hello je, že tento hello správce prostředků clusteru generuje různá řešení.</span><span class="sxs-lookup"><span data-stu-id="dc436-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="dc436-314">Metriky váhu řekněte hello správce prostředků clusteru, že určité metriky jsou důležitější než jiné.</span><span class="sxs-lookup"><span data-stu-id="dc436-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="dc436-315">Pokud není žádná hello ideální řešení správce prostředků clusteru dáváte přednost řešení, které vyvážit hello vyšší vyvážené metriky lepší.</span><span class="sxs-lookup"><span data-stu-id="dc436-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="dc436-316">Pokud služba rootu předpokládá, že konkrétní metrika je důležitý, že jejich použití tohoto Metrika může najít imbalanced.</span><span class="sxs-lookup"><span data-stu-id="dc436-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="dc436-317">To umožňuje rovnoměrné rozdělení některé metriku, je důležité tooit tooget jiné služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="dc436-318">Podívejme se na příklad některých sestav zatížení a jak budou různí metrika provede výsledky v různých přidělení v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="dc436-319">V tomto příkladu vidíte, že přepnutí hello relativní váhu hello metriky způsobí, že hello toocreate správce prostředků clusteru změnit uspořádání služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="dc436-320"><center>
![Příklad váha metriky a její vliv na řešení vyrovnávání][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="dc436-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="dc436-321">V tomto příkladu jsou čtyři různé služby, všechny sestavy různé hodnoty pro dva různé metriky, MetricA a MetricB.</span><span class="sxs-lookup"><span data-stu-id="dc436-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="dc436-322">V jednom případě všechny služby hello definovat MetricA je hello nejdůležitější (váhy = vysoce) a MetricB jako důležitý (váhy = nízká).</span><span class="sxs-lookup"><span data-stu-id="dc436-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="dc436-323">V důsledku toho vidíte, že tento hello správce prostředků clusteru umístí hello služby tak, aby lépe než MetricB vyrovnáváním MetricA.</span><span class="sxs-lookup"><span data-stu-id="dc436-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="dc436-324">"Lépe vyrovnáváním" znamená, že MetricA má nižší má nižší směrodatnou odchylku než MetricB.</span><span class="sxs-lookup"><span data-stu-id="dc436-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="dc436-325">V druhém případě hello jsme obrátíte metriky váhu hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="dc436-326">V důsledku toho hello správce prostředků clusteru prohození služeb A a B toocome až s přidělení, kde je MetricB lépe než MetricA vyrovnáváním.</span><span class="sxs-lookup"><span data-stu-id="dc436-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="dc436-327">Metriky váhu určit, jak by měla vyvážit hello správce prostředků clusteru, ale když vyrovnávání došlo k neočekávané chybě.</span><span class="sxs-lookup"><span data-stu-id="dc436-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="dc436-328">Další informace o vyrovnávání, podívejte se na [v tomto článku](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="dc436-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="dc436-329">Globální metriky váhu</span><span class="sxs-lookup"><span data-stu-id="dc436-329">Global metric weights</span></span>
<span data-ttu-id="dc436-330">Řekněme, že ServiceA definuje MetricA jako vážené vysokou a ServiceB nastaví hello váha pro MetricA tooLow nebo nulový.</span><span class="sxs-lookup"><span data-stu-id="dc436-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="dc436-331">Co je hello skutečné váhy, který končí získávání použít?</span><span class="sxs-lookup"><span data-stu-id="dc436-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="dc436-332">Existuje více váhu sledovaných pro každý metriku.</span><span class="sxs-lookup"><span data-stu-id="dc436-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="dc436-333">první váhy Hello je hello definovaná pro metriku hello při vytvoření služby hello.</span><span class="sxs-lookup"><span data-stu-id="dc436-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="dc436-334">Hello jiné váhy je globální váhy, které se počítá automaticky.</span><span class="sxs-lookup"><span data-stu-id="dc436-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="dc436-335">Hello správce prostředků clusteru používá obě tyto váhy při vyhodnocování řešení.</span><span class="sxs-lookup"><span data-stu-id="dc436-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="dc436-336">Vezme v úvahu oba váhu je důležité.</span><span class="sxs-lookup"><span data-stu-id="dc436-336">Taking both weights into account is important.</span></span> <span data-ttu-id="dc436-337">To umožňuje hello správce prostředků clusteru toobalance každé služby podle tooits vlastní priority a ujistěte se také hello clusteru jako celek je přidělen správně.</span><span class="sxs-lookup"><span data-stu-id="dc436-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="dc436-338">Co by mohlo dojít, pokud nebyla hello správce prostředků clusteru vědět o globální a místní vyrovnávání?</span><span class="sxs-lookup"><span data-stu-id="dc436-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="dc436-339">Dobře je snadné tooconstruct řešení globálně vyrovnáváním, ale důsledkem toho rovnováze nízký prostředků pro jednotlivé služby.</span><span class="sxs-lookup"><span data-stu-id="dc436-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="dc436-340">V následujícím příkladu hello umožňuje vyhledat služba nakonfigurovaná pomocí právě hello výchozích metrik a najdete, co se stane, když je považován za pouze globální vyrovnávání:</span><span class="sxs-lookup"><span data-stu-id="dc436-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="dc436-341"><center>
![Hello dopad globální řešení jenom][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="dc436-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="dc436-342">V příkladu nejvyšší hello podle pouze globální vyrovnávání je skutečně vyvážit hello clusteru jako celek.</span><span class="sxs-lookup"><span data-stu-id="dc436-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="dc436-343">Všechny uzly mají hello stejný počet základní barvy a hello stejné číslo celkový počet replik.</span><span class="sxs-lookup"><span data-stu-id="dc436-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="dc436-344">Ale pokud se podíváte na hello skutečný dopad toto přidělení není proto vhodné: hello ztrátě libovolného uzlu ovlivňuje určité zatížení nepřiměřeně, protože trvá se všechny jeho základní barvy.</span><span class="sxs-lookup"><span data-stu-id="dc436-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="dc436-345">Například pokud hello první uzel selže hello tři základní barvy pro hello tři různé oddíly hello kruh služby by všechny ztratí.</span><span class="sxs-lookup"><span data-stu-id="dc436-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="dc436-346">Naopak hello trojúhelníček a šestiúhelník služby mají jejich oddíly ztratit repliku.</span><span class="sxs-lookup"><span data-stu-id="dc436-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="dc436-347">To způsobí, že bez přerušení, kromě nutnosti toorecover hello dolů repliky.</span><span class="sxs-lookup"><span data-stu-id="dc436-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="dc436-348">V příkladu dolní hello hello správce prostředků clusteru byla distribuována hello repliky založené na obou hello globální a za službou Vyrovnávání.</span><span class="sxs-lookup"><span data-stu-id="dc436-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="dc436-349">Při výpočtu skóre hello hello řešení poskytuje nejvíc hello váhy toohello globální řešení a tooindividual služeb část (Konfigurovat).</span><span class="sxs-lookup"><span data-stu-id="dc436-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="dc436-350">Globální vyrovnávání pro metriku je vypočítáváno na hello průměr hello metriky váhu z jednotlivých služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="dc436-351">Každá služba jsou rovnoměrně podle tooits vlastní definované metriky váhu.</span><span class="sxs-lookup"><span data-stu-id="dc436-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="dc436-352">Tím se zajistí, že jsou vyváženy hello služby v rámci sami podle vlastních potřeb tootheir.</span><span class="sxs-lookup"><span data-stu-id="dc436-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="dc436-353">Výsledkem je pokud hello stejné první uzel selže selhání hello se distribuuje do všech oddílů všech služeb.</span><span class="sxs-lookup"><span data-stu-id="dc436-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="dc436-354">tooeach dopad Hello je hello stejné.</span><span class="sxs-lookup"><span data-stu-id="dc436-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="dc436-355">Další kroky</span><span class="sxs-lookup"><span data-stu-id="dc436-355">Next steps</span></span>
- <span data-ttu-id="dc436-356">Další informace o konfiguraci služby [Další informace o konfiguraci služby](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="dc436-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="dc436-357">Definování defragmentace metriky je jedním ze způsobů tooconsolidate zatížení na uzlech místo rozšíří ho. toolearn jak tooconfigure defragmentace, získáte příliš[v tomto článku](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="dc436-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="dc436-358">toofind si o tom, jak hello správce prostředků clusteru spravuje a vyrovnává zatížení v clusteru hello, podívejte se na článek hello na [Vyrovnávání zatížení](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="dc436-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="dc436-359">Začít od začátku hello a [získat Úvod toohello správce prostředků clusteru Service Fabric](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="dc436-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="dc436-360">Náklady na přesunutí je jeden ze způsobů signalizace toohello správce prostředků clusteru, že jsou určité služby toomove dražší než jiné.</span><span class="sxs-lookup"><span data-stu-id="dc436-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="dc436-361">toolearn Další informace o náklady na přesunutí, najdete v příliš[v tomto článku](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="dc436-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
