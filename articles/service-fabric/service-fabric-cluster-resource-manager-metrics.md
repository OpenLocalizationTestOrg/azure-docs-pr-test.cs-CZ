---
title: "Správa Azure mikroslužbu zatížení pomocí metriky | Microsoft Docs"
description: "Další informace o tom, jak konfigurovat a používat ke správě služby spotřeby prostředků metriky v Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 7e020bb6c02c80127e4225ba695017dff9b5a168
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="52f94-103">Správa spotřeby prostředků a zatížení v Service Fabric pomocí metrik</span><span class="sxs-lookup"><span data-stu-id="52f94-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="52f94-104">*Metriky* jsou prostředky, které vaše služby péče o a které jsou k dispozici na uzlech v clusteru.</span><span class="sxs-lookup"><span data-stu-id="52f94-104">*Metrics* are the resources that your services care about and which are provided by the nodes in the cluster.</span></span> <span data-ttu-id="52f94-105">Metrika je všechno, co chcete spravovat pro zlepšení nebo sledovat výkon vašich služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-105">A metric is anything that you want to manage in order to improve or monitor the performance of your services.</span></span> <span data-ttu-id="52f94-106">Například je může sledovat využití paměti vědět, pokud je přetížena služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-106">For example, you might watch memory consumption to know if your service is overloaded.</span></span> <span data-ttu-id="52f94-107">Použití jiné je zjistit, jestli může služba přesunout jinde kde paměti je že menší omezené, aby bylo možné získat lepší výkon.</span><span class="sxs-lookup"><span data-stu-id="52f94-107">Another use is to figure out whether the service could move elsewhere where memory is less constrained in order to get better performance.</span></span>

<span data-ttu-id="52f94-108">Příklady metriky jsou věci jako využití paměti, disku a procesoru.</span><span class="sxs-lookup"><span data-stu-id="52f94-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="52f94-109">Tyto metriky jsou fyzické metriky, prostředky, které odpovídají fyzické prostředky na uzlu, který je třeba spravovat.</span><span class="sxs-lookup"><span data-stu-id="52f94-109">These metrics are physical metrics, resources that correspond to physical resources on the node that need to be managed.</span></span> <span data-ttu-id="52f94-110">Metriky může být také (a často jsou) logické metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="52f94-111">Logické metriky věci jako "MyWorkQueueDepth" nebo "MessagesToProcess" nebo "TotalRecords".</span><span class="sxs-lookup"><span data-stu-id="52f94-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="52f94-112">Logické metriky jsou definované aplikací a nepřímo odpovídají některé spotřeby fyzických prostředků.</span><span class="sxs-lookup"><span data-stu-id="52f94-112">Logical metrics are application-defined and indirectly correspond to some physical resource consumption.</span></span> <span data-ttu-id="52f94-113">Vzhledem k tomu může být obtížné měr a sestava spotřeby fyzické prostředky na základě služby jsou běžné logické metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-113">Logical metrics are common because it can be hard to measure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="52f94-114">Složitost měření a vytváření sestav vlastní fyzické metriky je také proč Service Fabric nabízí několik výchozích metrik.</span><span class="sxs-lookup"><span data-stu-id="52f94-114">The complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="52f94-115">Výchozích metrik</span><span class="sxs-lookup"><span data-stu-id="52f94-115">Default metrics</span></span>
<span data-ttu-id="52f94-116">Řekněme, že chcete začít pracovat, zápisu a nasazení služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-116">Let’s say that you want to get started writing and deploying your service.</span></span> <span data-ttu-id="52f94-117">V tomto okamžiku nevíte fyzické nebo logické prostředky spotřebuje.</span><span class="sxs-lookup"><span data-stu-id="52f94-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="52f94-118">Není to!</span><span class="sxs-lookup"><span data-stu-id="52f94-118">That’s fine!</span></span> <span data-ttu-id="52f94-119">Správce prostředků clusteru Service Fabric používá několik výchozích metrik, pokud nejsou zadány žádné jiné metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-119">The Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="52f94-120">Jsou:</span><span class="sxs-lookup"><span data-stu-id="52f94-120">They are:</span></span>

  - <span data-ttu-id="52f94-121">PrimaryCount - počet primární repliky na uzlu</span><span class="sxs-lookup"><span data-stu-id="52f94-121">PrimaryCount - count of Primary replicas on the node</span></span> 
  - <span data-ttu-id="52f94-122">ReplicaCount - počet celkový stavová repliky na uzlu</span><span class="sxs-lookup"><span data-stu-id="52f94-122">ReplicaCount - count of total stateful replicas on the node</span></span>
  - <span data-ttu-id="52f94-123">Počet - počet všech objektů služby (bezstavové a stavové) na uzlu</span><span class="sxs-lookup"><span data-stu-id="52f94-123">Count - count of all service objects (stateless and stateful) on the node</span></span>

| <span data-ttu-id="52f94-124">Metrika</span><span class="sxs-lookup"><span data-stu-id="52f94-124">Metric</span></span> | <span data-ttu-id="52f94-125">Bezstavové Instance zatížení</span><span class="sxs-lookup"><span data-stu-id="52f94-125">Stateless Instance Load</span></span> | <span data-ttu-id="52f94-126">Stavová zatížení sekundární</span><span class="sxs-lookup"><span data-stu-id="52f94-126">Stateful Secondary Load</span></span> | <span data-ttu-id="52f94-127">Stavová zatížení primární</span><span class="sxs-lookup"><span data-stu-id="52f94-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="52f94-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="52f94-128">PrimaryCount</span></span> |<span data-ttu-id="52f94-129">0</span><span class="sxs-lookup"><span data-stu-id="52f94-129">0</span></span> |<span data-ttu-id="52f94-130">0</span><span class="sxs-lookup"><span data-stu-id="52f94-130">0</span></span> |<span data-ttu-id="52f94-131">1</span><span class="sxs-lookup"><span data-stu-id="52f94-131">1</span></span> |
| <span data-ttu-id="52f94-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="52f94-132">ReplicaCount</span></span> |<span data-ttu-id="52f94-133">0</span><span class="sxs-lookup"><span data-stu-id="52f94-133">0</span></span> |<span data-ttu-id="52f94-134">1</span><span class="sxs-lookup"><span data-stu-id="52f94-134">1</span></span> |<span data-ttu-id="52f94-135">1</span><span class="sxs-lookup"><span data-stu-id="52f94-135">1</span></span> |
| <span data-ttu-id="52f94-136">Počet</span><span class="sxs-lookup"><span data-stu-id="52f94-136">Count</span></span> |<span data-ttu-id="52f94-137">1</span><span class="sxs-lookup"><span data-stu-id="52f94-137">1</span></span> |<span data-ttu-id="52f94-138">1</span><span class="sxs-lookup"><span data-stu-id="52f94-138">1</span></span> |<span data-ttu-id="52f94-139">1</span><span class="sxs-lookup"><span data-stu-id="52f94-139">1</span></span> |

<span data-ttu-id="52f94-140">Pro základní úlohy výchozích metrik zadejte dostatečnou distribuční práce v clusteru.</span><span class="sxs-lookup"><span data-stu-id="52f94-140">For basic workloads, the default metrics provide a decent distribution of work in the cluster.</span></span> <span data-ttu-id="52f94-141">V následujícím příkladu se podíváme, co se stane, když jsme vytvořit dvě služby a spoléhají na výchozích metrik pro vyrovnávání.</span><span class="sxs-lookup"><span data-stu-id="52f94-141">In the following example, let’s see what happens when we create two services and rely on the default metrics for balancing.</span></span> <span data-ttu-id="52f94-142">Repliku cíl nastavit velikost tří první službě je stavové služby s tři oddíly.</span><span class="sxs-lookup"><span data-stu-id="52f94-142">The first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="52f94-143">Druhý služba je bezstavové služby s jedním oddílem a počet instancí tří.</span><span class="sxs-lookup"><span data-stu-id="52f94-143">The second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="52f94-144">Tady je můžete získat:</span><span class="sxs-lookup"><span data-stu-id="52f94-144">Here's what you get:</span></span>

<span data-ttu-id="52f94-145"><center>
![Cluster rozložení s výchozím nastavení metriky][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="52f94-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="52f94-146">Některé věci Všimněte si:</span><span class="sxs-lookup"><span data-stu-id="52f94-146">Some things to note:</span></span>
  - <span data-ttu-id="52f94-147">Primární repliky pro stavové služby, které jsou rozmístěny v několika uzly</span><span class="sxs-lookup"><span data-stu-id="52f94-147">Primary replicas for the stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="52f94-148">Repliky pro stejného oddílu jsou na různých uzlech</span><span class="sxs-lookup"><span data-stu-id="52f94-148">Replicas for the same partition are on different nodes</span></span>
  - <span data-ttu-id="52f94-149">Celkový počet základní barvy a sekundárních databází se distribuuje v clusteru</span><span class="sxs-lookup"><span data-stu-id="52f94-149">The total number of primaries and secondaries is distributed in the cluster</span></span>
  - <span data-ttu-id="52f94-150">Celkový počet objektů služby, které jsou rovnoměrně přiděleny na každém uzlu</span><span class="sxs-lookup"><span data-stu-id="52f94-150">The total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="52f94-151">Dobré!</span><span class="sxs-lookup"><span data-stu-id="52f94-151">Good!</span></span>

<span data-ttu-id="52f94-152">Výchozích metrik fungovat skvěle jako spuštění.</span><span class="sxs-lookup"><span data-stu-id="52f94-152">The default metrics work great as a start.</span></span> <span data-ttu-id="52f94-153">Ale výchozích metrik bude pouze provádění můžete dosavadní práce.</span><span class="sxs-lookup"><span data-stu-id="52f94-153">However, the default metrics will only carry you so far.</span></span> <span data-ttu-id="52f94-154">Příklad: co je pravděpodobnost, že jste vytváření oddílů scheme vybráno výsledky perfektně i využití tím všechny oddíly?</span><span class="sxs-lookup"><span data-stu-id="52f94-154">For example: What's the likelihood that the partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="52f94-155">Co je pravděpodobné, že je zatížení pro danou službu, konstantní v čase, nebo dokonce stejně napříč více oddílů nyní?</span><span class="sxs-lookup"><span data-stu-id="52f94-155">What’s the chance that the load for a given service is constant over time, or even just the same across multiple partitions right now?</span></span>

<span data-ttu-id="52f94-156">Můžete spustit s právě výchozích metrik.</span><span class="sxs-lookup"><span data-stu-id="52f94-156">You could run with just the default metrics.</span></span> <span data-ttu-id="52f94-157">Obvykle to však znamená, že využití vašeho clusteru je menší a více nerovnoměrné, než byste chtěli.</span><span class="sxs-lookup"><span data-stu-id="52f94-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="52f94-158">Je to proto, výchozích metrik nejsou adaptivní a předpokládá, že všechno, co je ekvivalentní.</span><span class="sxs-lookup"><span data-stu-id="52f94-158">This is because the default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="52f94-159">Například primární, který je zaneprázdněn a ten, který není obou přispívat metriky PrimaryCount "1".</span><span class="sxs-lookup"><span data-stu-id="52f94-159">For example, a Primary that is busy and one that is not both contribute "1" to the PrimaryCount metric.</span></span> <span data-ttu-id="52f94-160">V nejhorším případě pomocí výchozích metrik může také způsobit overscheduled uzly vést k problémům s výkonem.</span><span class="sxs-lookup"><span data-stu-id="52f94-160">In the worst case, using only the default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="52f94-161">Pokud vás zajímá maximální využití vašeho clusteru a vyhnout problémům s výkonem, budete muset použít vlastní metriky a vytváření sestav dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-161">If you're interested in getting the most out of your cluster and avoiding performance issues, you need to use custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="52f94-162">Vlastní metriky</span><span class="sxs-lookup"><span data-stu-id="52f94-162">Custom metrics</span></span>
<span data-ttu-id="52f94-163">Metriky jsou nakonfigurované na základě jednotlivých s názvem service instancí při vytváření služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-163">Metrics are configured on a per-named-service-instance basis when you’re creating the service.</span></span>

<span data-ttu-id="52f94-164">Všechny metrika se některé vlastnosti, které popisují ho: název, váhu a výchozí zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="52f94-165">Název metriky: Název metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-165">Metric Name: The name of the metric.</span></span> <span data-ttu-id="52f94-166">Název metriky je jedinečný identifikátor pro metriku v rámci clusteru z hlediska správce prostředků.</span><span class="sxs-lookup"><span data-stu-id="52f94-166">The metric name is a unique identifier for the metric within the cluster from the Resource Manager’s perspective.</span></span>
* <span data-ttu-id="52f94-167">Váha: Váha metriky definuje, jak důležité tato metrika je relativní vzhledem k jiné metriky pro tuto službu.</span><span class="sxs-lookup"><span data-stu-id="52f94-167">Weight: Metric weight defines how important this metric is relative to the other metrics for this service.</span></span>
* <span data-ttu-id="52f94-168">Výchozí zatížení: Výchozí zatížení je reprezentována odlišně v závislosti na tom, zda je služba bezstavové nebo stateful.</span><span class="sxs-lookup"><span data-stu-id="52f94-168">Default Load: The default load is represented differently depending on whether the service is stateless or stateful.</span></span>
  * <span data-ttu-id="52f94-169">Pro bezstavové služby jednotlivé metriky má jednu vlastnost s názvem DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="52f94-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="52f94-170">Pro stavové služby můžete definovat:</span><span class="sxs-lookup"><span data-stu-id="52f94-170">For stateful services you define:</span></span>
    * <span data-ttu-id="52f94-171">PrimaryDefaultLoad: Výchozí velikost tato metrika tato služba využívá Pokud je primární</span><span class="sxs-lookup"><span data-stu-id="52f94-171">PrimaryDefaultLoad: The default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="52f94-172">SecondaryDefaultLoad: Výchozí velikost tato metrika tato služba využívá případě, že je sekundární</span><span class="sxs-lookup"><span data-stu-id="52f94-172">SecondaryDefaultLoad: The default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="52f94-173">Pokud definujete vlastní metriky a vy chcete _také_ použití výchozích metrik, budete muset _explicitně_ přidání výchozích metrik zpět a zadejte váhu a hodnoty pro ně.</span><span class="sxs-lookup"><span data-stu-id="52f94-173">If you define custom metrics and you want to _also_ use the default metrics, you need to _explicitly_ add the default metrics back and define weights and values for them.</span></span> <span data-ttu-id="52f94-174">Je to proto, že je nutné definovat vztah mezi výchozích metrik a vaše vlastní metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-174">This is because you must define the relationship between the default metrics and your custom metrics.</span></span> <span data-ttu-id="52f94-175">Například možná se zajímáte o ConnectionCount nebo WorkQueueDepth víc než primární distribuce.</span><span class="sxs-lookup"><span data-stu-id="52f94-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="52f94-176">Ve výchozím nastavení je váha metriky PrimaryCount horní, tak chcete snížit na střední při přidání dalších metrik Ujistěte se, že se mají přednost před.</span><span class="sxs-lookup"><span data-stu-id="52f94-176">By default the weight of the PrimaryCount metric is High, so you want to reduce it to Medium when you add your other metrics to ensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="52f94-177">Definice metrik služby – příklad</span><span class="sxs-lookup"><span data-stu-id="52f94-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="52f94-178">Může se stát, že chcete následující konfiguraci:</span><span class="sxs-lookup"><span data-stu-id="52f94-178">Let’s say you want the following configuration:</span></span>

  - <span data-ttu-id="52f94-179">Sestavy služby metriky s názvem "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="52f94-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="52f94-180">Také můžete chtít použít výchozích metrik</span><span class="sxs-lookup"><span data-stu-id="52f94-180">You also want to use the default metrics</span></span> 
  - <span data-ttu-id="52f94-181">Jste provádí některé měření a vědět, že normálně primární repliky této služby zabírají 20 jednotek "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="52f94-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="52f94-182">Sekundární databáze použijte 5 jednotky "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="52f94-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="52f94-183">Víte, že "ConnectionCount" je nejdůležitější metriky z hlediska Správa výkonu této konkrétní služby</span><span class="sxs-lookup"><span data-stu-id="52f94-183">You know that "ConnectionCount" is the most important metric in terms of managing the performance of this particular service</span></span>
  - <span data-ttu-id="52f94-184">Stále chcete vyrovnáváním primární repliky.</span><span class="sxs-lookup"><span data-stu-id="52f94-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="52f94-185">Vyrovnávání primární repliky obecně je vhodné bez ohledu na to, co.</span><span class="sxs-lookup"><span data-stu-id="52f94-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="52f94-186">To pomáhá zabránit ztrátě některé domény uzlu nebo selhání většiny primární repliky společně s jeho, které mají vliv.</span><span class="sxs-lookup"><span data-stu-id="52f94-186">This helps prevent the loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="52f94-187">Jinak jsou výchozích metrik</span><span class="sxs-lookup"><span data-stu-id="52f94-187">Otherwise, the default metrics are fine</span></span>

<span data-ttu-id="52f94-188">Tady je kód, který by zápis k vytvoření služby pomocí této konfigurace metriky:</span><span class="sxs-lookup"><span data-stu-id="52f94-188">Here’s the code that you would write to create a service with that metric configuration:</span></span>

<span data-ttu-id="52f94-189">Kód:</span><span class="sxs-lookup"><span data-stu-id="52f94-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="52f94-190">Prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="52f94-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="52f94-191">Příklady uvedené nahoře a zbytek tohoto dokumentu popisují správu metriky na základě za-s názvem service.</span><span class="sxs-lookup"><span data-stu-id="52f94-191">The above examples and the rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="52f94-192">Je také možné definovat metriky pro vaše služby ve službě _typ_ úroveň.</span><span class="sxs-lookup"><span data-stu-id="52f94-192">It is also possible to define metrics for your services at the service _type_ level.</span></span> <span data-ttu-id="52f94-193">To se provádí zadáním v manifestech vaší služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="52f94-194">Definování typu metriky na úrovni se nedoporučuje z několika důvodů.</span><span class="sxs-lookup"><span data-stu-id="52f94-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="52f94-195">Prvním důvodem je, že metriky názvy jsou často konkrétní prostředí.</span><span class="sxs-lookup"><span data-stu-id="52f94-195">The first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="52f94-196">Pokud je na místě závazné kontrakt, nemůže být jisti, že metrika "Jader" v jednom prostředí není v jiných "MiliCores" nebo "Jader".</span><span class="sxs-lookup"><span data-stu-id="52f94-196">Unless there is a firm contract in place, you cannot be sure that the metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="52f94-197">Pokud vaše metriky jsou definovány v manifestu je třeba vytvořit nové manifesty za prostředí.</span><span class="sxs-lookup"><span data-stu-id="52f94-197">If your metrics are defined in your manifest you need to create new manifests per environment.</span></span> <span data-ttu-id="52f94-198">To obvykle vede k velkému množství různých manifesty s pouze drobné rozdíly, které může vést k potížím správy.</span><span class="sxs-lookup"><span data-stu-id="52f94-198">This usually leads to a proliferation of different manifests with only minor differences, which can lead to management difficulties.</span></span>  
>
> <span data-ttu-id="52f94-199">Metriky zatížení jsou běžně přiřadit na základě jednotlivých s názvem service instancí.</span><span class="sxs-lookup"><span data-stu-id="52f94-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="52f94-200">Řekněme například, že vytvoříte jednu instanci služby pro CustomerA, kdo plány ji použít pouze lehkým.</span><span class="sxs-lookup"><span data-stu-id="52f94-200">For example, let's say you create one instance of the service for CustomerA who plans to use it only lightly.</span></span> <span data-ttu-id="52f94-201">Také se stát, že vytvoříte jiné pro CustomerB, který má větší zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="52f94-202">V takovém případě by pravděpodobně chcete upravit výchozí zatížení pro tyto služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-202">In this case, you'd probably want to tweak the default loads for those services.</span></span> <span data-ttu-id="52f94-203">Pokud máte metriky a zatížením definované prostřednictvím manifesty a vy chcete pro podporu tohoto scénáře, vyžaduje pro každého zákazníka jiné aplikace a typů služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-203">If you have metrics and loads defined via manifests and you want to support this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="52f94-204">Hodnot fronty definovaných v okamžiku vytvoření služby přepíšou nastavení definované v manifestu, pomocí které lze nastavit konkrétní výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="52f94-204">The values defined at service creation time override those defined in the manifest, so you could use that to set the specific defaults.</span></span> <span data-ttu-id="52f94-205">Ale učinit způsobí, že hodnoty deklarované v manifestech k neshodují s hodnotami služba bude spuštěna ve skutečnosti s.</span><span class="sxs-lookup"><span data-stu-id="52f94-205">However, doing that causes the values declared in the manifests to not match those the service actually runs with.</span></span> <span data-ttu-id="52f94-206">To může vést k nejasnostem.</span><span class="sxs-lookup"><span data-stu-id="52f94-206">This can lead to confusion.</span></span> 
>

<span data-ttu-id="52f94-207">Jako připomenutí: Pokud chcete použít výchozí nastavení, nemusíte touch kolekci metriky na všech nebo provádět žádné zvláštní při vytváření služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-207">As a reminder: if you just want to use the default metrics, you don’t need to touch the metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="52f94-208">Výchozích metrik získat použít automaticky, když jsou definovány žádné jiné.</span><span class="sxs-lookup"><span data-stu-id="52f94-208">The default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="52f94-209">Nyní se Vraťme se prostřednictvím každé z těchto nastavení podrobněji a mluvit o chování, které má vliv.</span><span class="sxs-lookup"><span data-stu-id="52f94-209">Now, let's go through each of these settings in more detail and talk about the behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="52f94-210">Načtení</span><span class="sxs-lookup"><span data-stu-id="52f94-210">Load</span></span>
<span data-ttu-id="52f94-211">Celý bod definice metrik je představují některé zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-211">The whole point of defining metrics is to represent some load.</span></span> <span data-ttu-id="52f94-212">*Zatížení* je kolik danou metriku obsazením některé instance služby nebo repliky v daném uzlu.</span><span class="sxs-lookup"><span data-stu-id="52f94-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="52f94-213">Zatížení se dá nakonfigurovat téměř libovolném okamžiku.</span><span class="sxs-lookup"><span data-stu-id="52f94-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="52f94-214">Například:</span><span class="sxs-lookup"><span data-stu-id="52f94-214">For example:</span></span>

  - <span data-ttu-id="52f94-215">Zatížení se dá definovat při vytváření služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="52f94-216">To se označuje jako _výchozí zatížení_.</span><span class="sxs-lookup"><span data-stu-id="52f94-216">This is called _default load_.</span></span>
  - <span data-ttu-id="52f94-217">Informace o metrikách, včetně výchozí zatížení pro služby můžete aktualizovat po vytvoření služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-217">The metric information, including default loads, for a service can updated after the service is created.</span></span> <span data-ttu-id="52f94-218">To se označuje jako _aktualizace služby_.</span><span class="sxs-lookup"><span data-stu-id="52f94-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="52f94-219">Načítání v daném oddílu můžete resetovat na výchozí hodnoty pro tuto službu.</span><span class="sxs-lookup"><span data-stu-id="52f94-219">The loads for a given partition can be reset to the default values for that service.</span></span> <span data-ttu-id="52f94-220">To se označuje jako _obnovení zatížení oddílu_.</span><span class="sxs-lookup"><span data-stu-id="52f94-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="52f94-221">Zatížení mohou být zaznamenány na za objekt individuálních dynamicky za běhu.</span><span class="sxs-lookup"><span data-stu-id="52f94-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="52f94-222">To se označuje jako _reporting zatížení_.</span><span class="sxs-lookup"><span data-stu-id="52f94-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="52f94-223">Všechny tyto strategie lze použít v rámci stejné služby přes celé jeho životnosti.</span><span class="sxs-lookup"><span data-stu-id="52f94-223">All of these strategies can be used within the same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="52f94-224">Výchozí zatížení</span><span class="sxs-lookup"><span data-stu-id="52f94-224">Default load</span></span>
<span data-ttu-id="52f94-225">*Výchozí zatížení* je kolik metriky využívá každý objekt služby (bezstavové instance nebo stavová repliky) této služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-225">*Default load* is how much of the metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="52f94-226">Správce prostředků clusteru používá toto číslo pro zatížení objektu služby, dokud neobdrží jiné informace, jako je například sestavy dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-226">The Cluster Resource Manager uses this number for the load of the service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="52f94-227">Pro jednodušší služby je výchozí zatížení definici statické.</span><span class="sxs-lookup"><span data-stu-id="52f94-227">For simpler services, the default load is a static definition.</span></span> <span data-ttu-id="52f94-228">Výchozí zatížení nikdy se aktualizuje a používá se po dobu jeho existence služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-228">The default load is never updated and is used for the lifetime of the service.</span></span> <span data-ttu-id="52f94-229">Výchozí načte funguje dobře pro jednoduché plánování scénáře, kde určité množství prostředků jsou vyhrazené pro různé zatížení a neměňte kapacity.</span><span class="sxs-lookup"><span data-stu-id="52f94-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated to different workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="52f94-230">Další informace o řízení kapacity a definování kapacity pro uzly v clusteru, najdete v tématu [v tomto článku](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="52f94-230">For more information on capacity management and defining capacities for the nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="52f94-231">Správce prostředků clusteru umožňuje stavové služby zadat jiného výchozího zatížení pro jejich základní barvy a sekundární repliky.</span><span class="sxs-lookup"><span data-stu-id="52f94-231">The Cluster Resource Manager allows stateful services to specify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="52f94-232">Bezstavové služby můžete zadat jenom jednu hodnotu, která se vztahuje na všechny instance.</span><span class="sxs-lookup"><span data-stu-id="52f94-232">Stateless services can only specify one value that applies to all instances.</span></span> <span data-ttu-id="52f94-233">Pro stavové služby, výchozí zatížení pro primární a sekundární repliky se obvykle liší, vzhledem k tomu, že repliky proveďte různé druhy práce v každé role.</span><span class="sxs-lookup"><span data-stu-id="52f94-233">For stateful services, the default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="52f94-234">Například základní barvy obvykle sloužit čtení a zápisu a zpracovat většinu výpočetní zatížení, když sekundární databáze nepodporují.</span><span class="sxs-lookup"><span data-stu-id="52f94-234">For example, Primaries usually serve both reads and writes, and handle most of the computational burden, while secondaries do not.</span></span> <span data-ttu-id="52f94-235">Obvykle je vyšší než výchozí zatížení pro sekundární repliky výchozí zatížení pro primární repliku.</span><span class="sxs-lookup"><span data-stu-id="52f94-235">Usually the default load for a primary replica is higher than the default load for secondary replicas.</span></span> <span data-ttu-id="52f94-236">Reálná čísla by měla závisí na svých vlastních hodnot.</span><span class="sxs-lookup"><span data-stu-id="52f94-236">The real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="52f94-237">Dynamické načtení</span><span class="sxs-lookup"><span data-stu-id="52f94-237">Dynamic load</span></span>
<span data-ttu-id="52f94-238">Řekněme, že jste byl spuštěn služby nějakou dobu.</span><span class="sxs-lookup"><span data-stu-id="52f94-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="52f94-239">S některá monitorování jste si všimli který:</span><span class="sxs-lookup"><span data-stu-id="52f94-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="52f94-240">Některé oddíly nebo instance dané služby spotřebují více prostředků než jiné</span><span class="sxs-lookup"><span data-stu-id="52f94-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="52f94-241">Některé služby mají zatížení, který se liší v čase.</span><span class="sxs-lookup"><span data-stu-id="52f94-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="52f94-242">Je velké množství věcí, které by mohly způsobit tyto typy kolísání zátěže.</span><span class="sxs-lookup"><span data-stu-id="52f94-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="52f94-243">Například různé služby nebo oddíly jsou přidruženy různých zákazníků, jejichž jiné požadavky.</span><span class="sxs-lookup"><span data-stu-id="52f94-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="52f94-244">Zatížení může také změnit, protože se liší množství práce, kterou služba nemá v průběhu dne.</span><span class="sxs-lookup"><span data-stu-id="52f94-244">Load could also change because the amount of work the service does varies over the course of the day.</span></span> <span data-ttu-id="52f94-245">Bez ohledu na důvod, proč se obvykle neexistuje, můžete použít pro výchozí číslo jeden.</span><span class="sxs-lookup"><span data-stu-id="52f94-245">Regardless of the reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="52f94-246">To platí hlavně pokud chcete získat většina využití mimo cluster.</span><span class="sxs-lookup"><span data-stu-id="52f94-246">This is especially true if you want to get the most utilization out of the cluster.</span></span> <span data-ttu-id="52f94-247">Libovolná hodnota, kterou vyberete pro výchozí zatížení je nesprávný určitou dobu.</span><span class="sxs-lookup"><span data-stu-id="52f94-247">Any value you pick for default load is wrong some of the time.</span></span> <span data-ttu-id="52f94-248">Nesprávný výchozí načte výsledek v clusteru správce prostředků nad nebo pod přidělování prostředků.</span><span class="sxs-lookup"><span data-stu-id="52f94-248">Incorrect default loads result in the Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="52f94-249">V důsledku toho máte uzlů, které jsou nad nebo pod využité to i v případě, že správce prostředků clusteru předpokládá, že jsou rovnoměrně clusteru.</span><span class="sxs-lookup"><span data-stu-id="52f94-249">As a result, you have nodes that are over or under utilized even though the Cluster Resource Manager thinks the cluster is balanced.</span></span> <span data-ttu-id="52f94-250">Výchozí zatížení jsou stále vhodné, protože poskytují některé informace pro počáteční umístění, ale nejsou kompletní scénáře pro skutečné úlohy.</span><span class="sxs-lookup"><span data-stu-id="52f94-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="52f94-251">Přesně zachytit změny požadavků na prostředky, Cluster Resource Manager umožňuje každý objekt služby aktualizovat vlastní zatížení za běhu.</span><span class="sxs-lookup"><span data-stu-id="52f94-251">To accurately capture changing resource requirements, the Cluster Resource Manager allows each service object to update its own load during runtime.</span></span> <span data-ttu-id="52f94-252">Tomu se říká reporting dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="52f94-253">Dynamické načtení sestav povolit replik nebo instancí upravit jejich přidělení/hlášené zatížení metrik průběhu své životnosti.</span><span class="sxs-lookup"><span data-stu-id="52f94-253">Dynamic load reports allow replicas or instances to adjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="52f94-254">Replika služby nebo instanci, která se uloží málo používaná data a není to veškerou práci, by obvykle sestavy, aby používalo nízkou množství danou metriku.</span><span class="sxs-lookup"><span data-stu-id="52f94-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="52f94-255">Zaneprázdněný replik nebo instancí by hlásit, že používají více.</span><span class="sxs-lookup"><span data-stu-id="52f94-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="52f94-256">Vytváření sestav zatížení za replik nebo instancí umožňuje správci prostředků clusteru reorganizace objekty jednotlivé služby v clusteru.</span><span class="sxs-lookup"><span data-stu-id="52f94-256">Reporting load per replica or instance allows the Cluster Resource Manager to reorganize the individual service objects in the cluster.</span></span> <span data-ttu-id="52f94-257">Reorganizace služby pomáhá zajistit, že se získají z prostředků, které vyžadují.</span><span class="sxs-lookup"><span data-stu-id="52f94-257">Reorganizing the services helps ensure that they get the resources they require.</span></span> <span data-ttu-id="52f94-258">Zaneprázdněný služby efektivně get "uvolnit" prostředky z dalších replik nebo instancí, které jsou aktuálně studené nebo méně pracuje.</span><span class="sxs-lookup"><span data-stu-id="52f94-258">Busy services effectively get to "reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="52f94-259">V rámci spolehlivé služby kód, který sestavu zatížení dynamicky vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="52f94-259">Within Reliable Services, the code to report load dynamically looks like this:</span></span>

<span data-ttu-id="52f94-260">Kód:</span><span class="sxs-lookup"><span data-stu-id="52f94-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="52f94-261">Služba může hlásit na žádném z metriky definované pro něj v okamžiku vytvoření.</span><span class="sxs-lookup"><span data-stu-id="52f94-261">A service can report on any of the metrics defined for it at creation time.</span></span> <span data-ttu-id="52f94-262">Pokud zatížení sestavy služby pro metriku, který není nakonfigurovaný na použití, Service Fabric ignoruje této sestavy.</span><span class="sxs-lookup"><span data-stu-id="52f94-262">If a service reports load for a metric that it is not configured to use, Service Fabric ignores that report.</span></span> <span data-ttu-id="52f94-263">Pokud existují další metriky hlášené ve stejnou dobu, které jsou platné, jsou přijaty tyto sestavy.</span><span class="sxs-lookup"><span data-stu-id="52f94-263">If there are other metrics reported at the same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="52f94-264">Kódu služby můžete měřit a sestavy všechny metriky věděl, že může postupy, a operátory můžete zadat konfiguraci metriky používat bez nutnosti změny kódu služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-264">Service code can measure and report all the metrics it knows how to, and operators can specify the metric configuration to use without having to change the service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="52f94-265">Aktualizuje se konfigurace metriky služby</span><span class="sxs-lookup"><span data-stu-id="52f94-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="52f94-266">Seznam metriky spojené s touto službou a vlastnosti tyto metriky lze dynamicky aktualizovat při provozu služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-266">The list of metrics associated with the service, and the properties of those metrics can be updated dynamically while the service is live.</span></span> <span data-ttu-id="52f94-267">To umožňuje experimentování a flexibilitu.</span><span class="sxs-lookup"><span data-stu-id="52f94-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="52f94-268">Některé příklady Pokud to je užitečné, jsou:</span><span class="sxs-lookup"><span data-stu-id="52f94-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="52f94-269">zakázání metrika s buggy zprávy pro konkrétní službu</span><span class="sxs-lookup"><span data-stu-id="52f94-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="52f94-270">Změna konfigurace váhu metriky na základě požadovaného chování</span><span class="sxs-lookup"><span data-stu-id="52f94-270">reconfiguring the weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="52f94-271">povolení nové metrika až po kód již byl nasazen a ověřit pomocí jiných mechanismů</span><span class="sxs-lookup"><span data-stu-id="52f94-271">enabling a new metric only after the code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="52f94-272">Změna výchozí zatížení pro službu na základě pozorovaných chování a spotřeba</span><span class="sxs-lookup"><span data-stu-id="52f94-272">changing the default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="52f94-273">Hlavní rozhraní API pro změnu metriky konfigurace jsou `FabricClient.ServiceManagementClient.UpdateServiceAsync` v jazyce C# a `Update-ServiceFabricService` v prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="52f94-273">The main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="52f94-274">Ať informace, které zadáte pomocí těchto rozhraní API nahradí stávající informace o metrikách pro službu okamžitě.</span><span class="sxs-lookup"><span data-stu-id="52f94-274">Whatever information you specify with these APIs replaces the existing metric information for the service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="52f94-275">Kombinování výchozí hodnoty zatížení a dynamické načtení sestav</span><span class="sxs-lookup"><span data-stu-id="52f94-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="52f94-276">Výchozí zatížení a dynamické zatížení lze použít pro stejnou službu.</span><span class="sxs-lookup"><span data-stu-id="52f94-276">Default load and dynamic loads can be used for the same service.</span></span> <span data-ttu-id="52f94-277">Když služba využívá výchozí zatížení a dynamické načtení sestavy, výchozí zatížení slouží jako odhad dokud dynamické sestavy, na které se objeví.</span><span class="sxs-lookup"><span data-stu-id="52f94-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="52f94-278">Výchozí zatížení je vhodný, protože nabízí správce prostředků clusteru něco na práci s.</span><span class="sxs-lookup"><span data-stu-id="52f94-278">Default load is good because it gives the Cluster Resource Manager something to work with.</span></span> <span data-ttu-id="52f94-279">Výchozí zatížení umožňuje správci prostředků clusteru umístit objekty služby ve funkčním umístěních, při jejich vytváření.</span><span class="sxs-lookup"><span data-stu-id="52f94-279">The default load allows the Cluster Resource Manager to place the service objects in good locations when they are created.</span></span> <span data-ttu-id="52f94-280">Pokud je zadaný žádný výchozí informace o zatížení, je efektivně náhodný umístění služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="52f94-281">Při načítání sestavy příchodu později počáteční náhodných umístění je často nesprávný a správce prostředků clusteru musí přesunout služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-281">When load reports arrive later the initial random placement is often wrong and the Cluster Resource Manager has to move services.</span></span>

<span data-ttu-id="52f94-282">Umožňuje trvat naše předchozí příklad a zjistěte, co se stane, když přidáme některé vlastní metriky a vytváření sestav dynamického zatížení.</span><span class="sxs-lookup"><span data-stu-id="52f94-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="52f94-283">V tomto příkladu používáme jako metriku příklad "MemoryInMb".</span><span class="sxs-lookup"><span data-stu-id="52f94-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="52f94-284">Paměť je jedním z systému metriky, které můžete Service Fabric [prostředek řídí](service-fabric-resource-governance.md), a reporting sami je obvykle obtížná.</span><span class="sxs-lookup"><span data-stu-id="52f94-284">Memory is one of the system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="52f94-285">Nemáte Očekáváme, že ve skutečnosti nahlásit na spotřebu paměti; Paměť se používá sem jako pomůcku při získání informací o možnosti Správce prostředků clusteru.</span><span class="sxs-lookup"><span data-stu-id="52f94-285">We don't actually expect you to report on Memory consumption; Memory is used here as an aid to learning about the capabilities of the Cluster Resource Manager.</span></span>
>

<span data-ttu-id="52f94-286">Pojďme předpokládá, že jsme původně vytvořili stavové služby pomocí následujícího příkazu:</span><span class="sxs-lookup"><span data-stu-id="52f94-286">Let’s presume that we initially created the stateful service with the following command:</span></span>

<span data-ttu-id="52f94-287">Prostředí PowerShell:</span><span class="sxs-lookup"><span data-stu-id="52f94-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="52f94-288">Připomínáme je tato syntaxe (MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="52f94-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="52f94-289">Podívejme se, co jeden rozložení možné clusteru může vypadat podobně jako:</span><span class="sxs-lookup"><span data-stu-id="52f94-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="52f94-290"><center>
![Cluster rovnováha s výchozí i vlastní metriky][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="52f94-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="52f94-291">Některé věci, které jsou vhodné poznamenat:</span><span class="sxs-lookup"><span data-stu-id="52f94-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="52f94-292">Každý sekundární repliky v rámci oddílu může mít vlastní zatížení</span><span class="sxs-lookup"><span data-stu-id="52f94-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="52f94-293">Celkové vypadat vyrovnáváním metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-293">Overall the metrics look balanced.</span></span> <span data-ttu-id="52f94-294">O paměť, poměr mezi maximální a minimální zatížení je 1,75 (uzel s největším zatížení je N3, je nejmenší N2 a 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="52f94-294">For Memory, the ratio between the maximum and minimum load is 1.75 (the node with the most load is N3, the least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="52f94-295">Existují některé věci, které musíme vysvětlují:</span><span class="sxs-lookup"><span data-stu-id="52f94-295">There are some things that we still need to explain:</span></span>

* <span data-ttu-id="52f94-296">Co je určit, zda byla poměr 1,75 přiměřené nebo ne?</span><span class="sxs-lookup"><span data-stu-id="52f94-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="52f94-297">Jak správce prostředků clusteru, že pokud to je výhodné dostatečně, nebo pokud je další práci udělat?</span><span class="sxs-lookup"><span data-stu-id="52f94-297">How does the Cluster Resource Manager know if that’s good enough or if there is more work to do?</span></span>
* <span data-ttu-id="52f94-298">Pokud vyrovnávání dojít?</span><span class="sxs-lookup"><span data-stu-id="52f94-298">When does balancing happen?</span></span>
* <span data-ttu-id="52f94-299">Co to znamená, že byl "Základní" váha paměti?</span><span class="sxs-lookup"><span data-stu-id="52f94-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="52f94-300">Metriky váhu</span><span class="sxs-lookup"><span data-stu-id="52f94-300">Metric weights</span></span>
<span data-ttu-id="52f94-301">Sledování stejné metriky mezi různé služby je důležité.</span><span class="sxs-lookup"><span data-stu-id="52f94-301">Tracking the same metrics across different services is important.</span></span> <span data-ttu-id="52f94-302">Tuto globální zobrazení je co umožňuje správci prostředků clusteru sledovat spotřebu v clusteru, vyvážit spotřeba mezi uzly a zajistit uzly si projít kapacity.</span><span class="sxs-lookup"><span data-stu-id="52f94-302">That global view is what allows the Cluster Resource Manager to track consumption in the cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="52f94-303">Služby však mohou mít různá zobrazení na význam stejné metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-303">However, services may have different views as to the importance of the same metric.</span></span> <span data-ttu-id="52f94-304">V clusteru s mnoha metriky a velké množství služeb, navíc perfektně vyrovnáváním řešení neexistuje pro všechny metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="52f94-305">Jak správci prostředků clusteru pracovat s těmito situacemi?</span><span class="sxs-lookup"><span data-stu-id="52f94-305">How should the Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="52f94-306">Metriky váhu povolit správce prostředků clusteru k rozhodování o způsobu vyrovnávat clusteru při volaná úplně bez chyby.</span><span class="sxs-lookup"><span data-stu-id="52f94-306">Metric weights allow the Cluster Resource Manager to decide how to balance the cluster when there’s no perfect answer.</span></span> <span data-ttu-id="52f94-307">Metriky váhu také povolit správce prostředků clusteru k určitým službám vyrovnávání jinak.</span><span class="sxs-lookup"><span data-stu-id="52f94-307">Metric weights also allow the Cluster Resource Manager to balance specific services differently.</span></span> <span data-ttu-id="52f94-308">Metriky lze vytvořit čtyři úrovně různých váhy: nula, nízké, střední a vysokou.</span><span class="sxs-lookup"><span data-stu-id="52f94-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="52f94-309">Metrika s váhou nula přispívá nic při určování, zda jsou vyváženy věcí, nebo ne.</span><span class="sxs-lookup"><span data-stu-id="52f94-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="52f94-310">Jejím zatížení však stále přispívat k řízení kapacity.</span><span class="sxs-lookup"><span data-stu-id="52f94-310">However, its load does still contribute to capacity management.</span></span> <span data-ttu-id="52f94-311">Metriky s nulovou tloušťkou jsou stále užitečné a často používají jako součást chování služby a sledování výkonu.</span><span class="sxs-lookup"><span data-stu-id="52f94-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="52f94-312">[Tento článek](service-fabric-diagnostics-event-generation-infra.md) poskytuje další informace o použití metriky pro monitorování a Diagnostika vašich služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on the use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="52f94-313">Skutečné dopad jiné metriky váhu v clusteru je, že správce prostředků clusteru generuje různá řešení.</span><span class="sxs-lookup"><span data-stu-id="52f94-313">The real impact of different metric weights in the cluster is that the Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="52f94-314">Metriky váhu řekněte správci prostředků clusteru, že určité metriky jsou důležitější než jiné.</span><span class="sxs-lookup"><span data-stu-id="52f94-314">Metric weights tell the Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="52f94-315">Pokud neexistuje ideální řešení správce prostředků clusteru můžete přednost řešení, které vyvážit vyšší lepší vyvážené metriky.</span><span class="sxs-lookup"><span data-stu-id="52f94-315">When there's no perfect solution the Cluster Resource Manager can prefer solutions which balance the higher weighted metrics better.</span></span> <span data-ttu-id="52f94-316">Pokud služba rootu předpokládá, že konkrétní metrika je důležitý, že jejich použití tohoto Metrika může najít imbalanced.</span><span class="sxs-lookup"><span data-stu-id="52f94-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="52f94-317">To umožňuje získat rovnoměrné rozdělení některé metriku, je potřeba ho jiné služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-317">This allows another service to get an even distribution of some metric that is important to it.</span></span>

<span data-ttu-id="52f94-318">Podívejme se na příklad některých sestav zatížení a jak budou různí metrika provede výsledky v různých přidělení v clusteru.</span><span class="sxs-lookup"><span data-stu-id="52f94-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in the cluster.</span></span> <span data-ttu-id="52f94-319">V tomto příkladu vidíte, že přepnutí relativní váhu metriky způsobí, že správce prostředků clusteru vytvořit různé uspořádání služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-319">In this example, we see that switching the relative weight of the metrics causes the Cluster Resource Manager to create different arrangements of services.</span></span>

<span data-ttu-id="52f94-320"><center>
![Příklad váha metriky a její vliv na řešení vyrovnávání][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="52f94-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="52f94-321">V tomto příkladu jsou čtyři různé služby, všechny sestavy různé hodnoty pro dva různé metriky, MetricA a MetricB.</span><span class="sxs-lookup"><span data-stu-id="52f94-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="52f94-322">V jednom případě definovat všechny služby MetricA je nejdůležitějším (váhy = vysoce) a MetricB jako důležitý (váhy = nízká).</span><span class="sxs-lookup"><span data-stu-id="52f94-322">In one case, all the services define MetricA is the most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="52f94-323">V důsledku toho vidíte, že správce prostředků clusteru tak, aby MetricA jsou rovnoměrně lépe než MetricB umístí služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-323">As a result, we see that the Cluster Resource Manager places the services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="52f94-324">"Lépe vyrovnáváním" znamená, že MetricA má nižší má nižší směrodatnou odchylku než MetricB.</span><span class="sxs-lookup"><span data-stu-id="52f94-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="52f94-325">V druhém případě jsme obrátíte metriky váhu.</span><span class="sxs-lookup"><span data-stu-id="52f94-325">In the second case, we reverse the metric weights.</span></span> <span data-ttu-id="52f94-326">V důsledku toho prohození správce prostředků clusteru služby A a B přijít s přidělení, kde je MetricB lépe než MetricA vyrovnáváním.</span><span class="sxs-lookup"><span data-stu-id="52f94-326">As a result, the Cluster Resource Manager swaps services A and B to come up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="52f94-327">Metriky váhu určit, jak by měla vyvážit správce prostředků clusteru, ale když vyrovnávání došlo k neočekávané chybě.</span><span class="sxs-lookup"><span data-stu-id="52f94-327">Metric weights determine how the Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="52f94-328">Další informace o vyrovnávání, podívejte se na [v tomto článku](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="52f94-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="52f94-329">Globální metriky váhu</span><span class="sxs-lookup"><span data-stu-id="52f94-329">Global metric weights</span></span>
<span data-ttu-id="52f94-330">Řekněme, že ServiceA definuje MetricA jako vážené vysokou a váhu MetricA ServiceB nastaví nízkou nebo nula.</span><span class="sxs-lookup"><span data-stu-id="52f94-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets the weight for MetricA to Low or Zero.</span></span> <span data-ttu-id="52f94-331">Co je skutečný váhy, který končí získávání použít?</span><span class="sxs-lookup"><span data-stu-id="52f94-331">What’s the actual weight that ends up getting used?</span></span>

<span data-ttu-id="52f94-332">Existuje více váhu sledovaných pro každý metriku.</span><span class="sxs-lookup"><span data-stu-id="52f94-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="52f94-333">První váhy je definováno pro metriku při vytváření služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-333">The first weight is the one defined for the metric when the service is created.</span></span> <span data-ttu-id="52f94-334">Další váhu je globální váhy, které se počítá automaticky.</span><span class="sxs-lookup"><span data-stu-id="52f94-334">The other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="52f94-335">Správce prostředků clusteru používá obě tyto váhy při vyhodnocování řešení.</span><span class="sxs-lookup"><span data-stu-id="52f94-335">The Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="52f94-336">Vezme v úvahu oba váhu je důležité.</span><span class="sxs-lookup"><span data-stu-id="52f94-336">Taking both weights into account is important.</span></span> <span data-ttu-id="52f94-337">To umožňuje Správce prostředků clusteru, aby vyvážit každé služby podle vlastní priority a také se ujistěte, že je správně přidělen clusteru jako celek.</span><span class="sxs-lookup"><span data-stu-id="52f94-337">This allows the Cluster Resource Manager to balance each service according to its own priorities, and also ensure that the cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="52f94-338">Co by mohlo dojít, pokud správce prostředků clusteru nebyl vědět o globální a místní vyrovnávání?</span><span class="sxs-lookup"><span data-stu-id="52f94-338">What would happen if the Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="52f94-339">Dobře je snadné vytvořit řešení globálně vyrovnáváním, ale důsledkem toho rovnováze nízký prostředků pro jednotlivé služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-339">Well, it’s easy to construct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="52f94-340">V následujícím příkladu umožňuje vyhledat služba nakonfigurovaná pomocí právě výchozích metrik a najdete, co se stane, když je považován za pouze globální vyrovnávání:</span><span class="sxs-lookup"><span data-stu-id="52f94-340">In the following example, let’s look at a service configured with just the default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="52f94-341"><center>
![Dopad globální pouze řešení][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="52f94-341"><center>
![The Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="52f94-342">V horní příkladu podle pouze globální vyrovnávání je skutečně vyvážit clusteru jako celek.</span><span class="sxs-lookup"><span data-stu-id="52f94-342">In the top example based only on global balance, the cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="52f94-343">Všechny uzly mají stejný počet základní barvy a stejné číslo celkový repliky.</span><span class="sxs-lookup"><span data-stu-id="52f94-343">All nodes have the same count of primaries and the same number total replicas.</span></span> <span data-ttu-id="52f94-344">Ale pokud se podíváte na konkrétní dopad toto přidělení není proto vhodné: ztrátě libovolného uzlu ovlivňuje určité zatížení nepřiměřeně, protože trvá se všechny jeho základní barvy.</span><span class="sxs-lookup"><span data-stu-id="52f94-344">However, if you look at the actual impact of this allocation it’s not so good: the loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="52f94-345">Například pokud první uzel selže tři základní barvy pro tři různé oddíly kruh služby by všechny ztratí.</span><span class="sxs-lookup"><span data-stu-id="52f94-345">For example, if the first node fails the three primaries for the three different partitions of the Circle service would all be lost.</span></span> <span data-ttu-id="52f94-346">Naopak služby trojúhelníček a šestiúhelník mít jejich oddíly ztratit repliku.</span><span class="sxs-lookup"><span data-stu-id="52f94-346">Conversely, the Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="52f94-347">To způsobí, že bez přerušení, než bylo nutné obnovit dolů repliky.</span><span class="sxs-lookup"><span data-stu-id="52f94-347">This causes no disruption, other than having to recover the down replica.</span></span>

<span data-ttu-id="52f94-348">V příkladu dolní správce prostředků clusteru byla distribuována repliky podle globální a za službou Vyrovnávání.</span><span class="sxs-lookup"><span data-stu-id="52f94-348">In the bottom example, the Cluster Resource Manager has distributed the replicas based on both the global and per-service balance.</span></span> <span data-ttu-id="52f94-349">Při výpočtu skóre řešení poskytuje nejvíc váhu globální řešení a část (Konfigurovat) pro jednotlivé služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-349">When calculating the score of the solution it gives most of the weight to the global solution, and a (configurable) portion to individual services.</span></span> <span data-ttu-id="52f94-350">Globální vyrovnávání pro metriku je vypočítáváno na průměr metriky váhu z jednotlivých služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-350">Global balance for a metric is calculated based on the average of the metric weights from each service.</span></span> <span data-ttu-id="52f94-351">Každá služba jsou rovnoměrně podle vlastní definované metriky váhu.</span><span class="sxs-lookup"><span data-stu-id="52f94-351">Each service is balanced according to its own defined metric weights.</span></span> <span data-ttu-id="52f94-352">Tím se zajistí, že služby jsou vyváženy v rámci sami podle vlastních potřeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-352">This ensures that the services are balanced within themselves according to their own needs.</span></span> <span data-ttu-id="52f94-353">Výsledkem je Pokud stejné prvního uzlu selže selhání je distribuován pro všechny oddíly všech služeb.</span><span class="sxs-lookup"><span data-stu-id="52f94-353">As a result, if the same first node fails the failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="52f94-354">Dopad na každý je stejný.</span><span class="sxs-lookup"><span data-stu-id="52f94-354">The impact to each is the same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="52f94-355">Další kroky</span><span class="sxs-lookup"><span data-stu-id="52f94-355">Next steps</span></span>
- <span data-ttu-id="52f94-356">Další informace o konfiguraci služby [Další informace o konfiguraci služby](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="52f94-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="52f94-357">Definování defragmentace metriky je jeden způsob, jak konsolidovat zatížení na uzlech místo rozšíří ho. Naučte se konfigurovat defragmentace, najdete v tématu [v tomto článku](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="52f94-357">Defining Defragmentation Metrics is one way to consolidate load on nodes instead of spreading it out. To learn how to configure defragmentation, refer to [this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="52f94-358">Chcete-li zjistit, o tom, jak správce prostředků clusteru spravuje a vyrovnává zatížení v clusteru, podívejte se na článek na [Vyrovnávání zatížení](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="52f94-358">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="52f94-359">Začít od začátku a [získejte Úvod do Service Fabric clusteru správce prostředků](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="52f94-359">Start from the beginning and [get an Introduction to the Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="52f94-360">Náklady na přesunutí je jeden ze způsobů signalizace správce prostředků clusteru, že jsou dražší než jiné přesunout určité služby.</span><span class="sxs-lookup"><span data-stu-id="52f94-360">Movement Cost is one way of signaling to the Cluster Resource Manager that certain services are more expensive to move than others.</span></span> <span data-ttu-id="52f94-361">Další informace o náklady na přesunutí, najdete v tématu [v tomto článku](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="52f94-361">To learn more about movement cost, refer to [this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
