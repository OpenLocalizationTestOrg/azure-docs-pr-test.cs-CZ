---
title: "Přehled modelu programování Service Fabric spolehlivé Service | Microsoft Docs"
description: "Další informace o programovací model spolehlivá služba Service Fabric a začněte psát vlastní služby."
services: Service-Fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: vturecek; mani-ramaswamy
ms.assetid: 0c88a533-73f8-4ae1-a939-67d17456ac06
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: masnider;
ms.openlocfilehash: 601b1c7713c9785d949c1c72000ec7f3f63dd682
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/18/2017
---
# <a name="reliable-services-overview"></a><span data-ttu-id="562b4-103">Přehled Reliable Services</span><span class="sxs-lookup"><span data-stu-id="562b4-103">Reliable Services overview</span></span>
<span data-ttu-id="562b4-104">Azure Service Fabric zjednodušuje zápis a správu bezstavové a stavové spolehlivé služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-104">Azure Service Fabric simplifies writing and managing stateless and stateful Reliable Services.</span></span> <span data-ttu-id="562b4-105">Toto téma obsahuje:</span><span class="sxs-lookup"><span data-stu-id="562b4-105">This topic covers:</span></span>

* <span data-ttu-id="562b4-106">Spolehlivé služby programovací model pro bezstavové a stavové služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-106">The Reliable Services programming model for stateless and stateful services.</span></span>
* <span data-ttu-id="562b4-107">Volby, které je nutné provést při zápisu spolehlivě.</span><span class="sxs-lookup"><span data-stu-id="562b4-107">The choices you have to make when writing a Reliable Service.</span></span>
* <span data-ttu-id="562b4-108">Některé scénáře a příklady použití spolehlivé služby a jak jsou napsány.</span><span class="sxs-lookup"><span data-stu-id="562b4-108">Some scenarios and examples of when to use Reliable Services and how they are written.</span></span>

<span data-ttu-id="562b4-109">Spolehlivé služby je programovací modely k dispozici v Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="562b4-109">Reliable Services is one of the programming models available on Service Fabric.</span></span> <span data-ttu-id="562b4-110">Druhá je programovací model objektu Actor spolehlivé, která poskytuje virtuální programovací model objektu Actor model spolehlivé služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-110">The other is the Reliable Actor programming model, which provides a virtual Actor programming model on top of the Reliable Services model.</span></span> <span data-ttu-id="562b4-111">Další informace o programovacího modelu Reliable Actors najdete v tématu [Úvod do Service Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="562b4-111">For more information on the Reliable Actors programming model, see [Introduction to Service Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span></span>

<span data-ttu-id="562b4-112">Service Fabric spravuje životnost služeb od zřízení a nasazení prostřednictvím aktualizace a odstranění, prostřednictvím [Správa aplikací Service Fabric](service-fabric-deploy-remove-applications.md).</span><span class="sxs-lookup"><span data-stu-id="562b4-112">Service Fabric manages the lifetime of services, from provisioning and deployment through upgrade and deletion, via [Service Fabric application management](service-fabric-deploy-remove-applications.md).</span></span>

## <a name="what-are-reliable-services"></a><span data-ttu-id="562b4-113">Jaké jsou spolehlivé služby?</span><span class="sxs-lookup"><span data-stu-id="562b4-113">What are Reliable Services?</span></span>
<span data-ttu-id="562b4-114">Spolehlivé služby poskytuje jednoduché, výkonné a nejvyšší úrovně programovací model můžete express, co je důležité k vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="562b4-114">Reliable Services gives you a simple, powerful, top-level programming model to help you express what is important to your application.</span></span> <span data-ttu-id="562b4-115">Spolehlivé služby programovací model získáte:</span><span class="sxs-lookup"><span data-stu-id="562b4-115">With the Reliable Services programming model, you get:</span></span>

* <span data-ttu-id="562b4-116">Přístup k zbytek Service Fabric programovací rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="562b4-116">Access to the rest of the Service Fabric programming APIs.</span></span> <span data-ttu-id="562b4-117">Na rozdíl od služby Service Fabric modelován jako [spustitelné soubory hosta](service-fabric-deploy-existing-app.md), spolehlivé služby získat zbytek rozhraní API služby prostředků infrastruktury používat přímo.</span><span class="sxs-lookup"><span data-stu-id="562b4-117">Unlike Service Fabric Services modeled as [Guest Executables](service-fabric-deploy-existing-app.md), Reliable Services get to use the rest of the Service Fabric APIs directly.</span></span> <span data-ttu-id="562b4-118">To umožňuje službám:</span><span class="sxs-lookup"><span data-stu-id="562b4-118">This allows services to:</span></span>
  * <span data-ttu-id="562b4-119">dotaz na systém</span><span class="sxs-lookup"><span data-stu-id="562b4-119">query the system</span></span>
  * <span data-ttu-id="562b4-120">Sestava stavu o entitách v clusteru</span><span class="sxs-lookup"><span data-stu-id="562b4-120">report health about entities in the cluster</span></span>
  * <span data-ttu-id="562b4-121">přijímání oznámení o změnách konfigurace a kódu</span><span class="sxs-lookup"><span data-stu-id="562b4-121">receive notifications about configuration and code changes</span></span>
  * <span data-ttu-id="562b4-122">Najít a komunikovat s jinými službami</span><span class="sxs-lookup"><span data-stu-id="562b4-122">find and communicate with other services,</span></span>
  * <span data-ttu-id="562b4-123">(volitelně) použít [spolehlivé kolekce](service-fabric-reliable-services-reliable-collections.md)</span><span class="sxs-lookup"><span data-stu-id="562b4-123">(optionally) use the [Reliable Collections](service-fabric-reliable-services-reliable-collections.md)</span></span>
  * <span data-ttu-id="562b4-124">.. a bude mít přístup k řadu dalších funkcí z první třídy programovací model v několika programovací jazyky.</span><span class="sxs-lookup"><span data-stu-id="562b4-124">...and giving them access to many other capabilities, all from a first class programming model in several programming languages.</span></span>
* <span data-ttu-id="562b4-125">Jednoduchý model pro spuštění vlastního kódu, který vypadá jako programovací modely, které se používají k.</span><span class="sxs-lookup"><span data-stu-id="562b4-125">A simple model for running your own code that looks like programming models you are used to.</span></span> <span data-ttu-id="562b4-126">Váš kód má jasně definované vstupní bod a jednoduše spravované životního cyklu.</span><span class="sxs-lookup"><span data-stu-id="562b4-126">Your code has a well-defined entry point and easily managed lifecycle.</span></span>
* <span data-ttu-id="562b4-127">Modulární komunikační model.</span><span class="sxs-lookup"><span data-stu-id="562b4-127">A pluggable communication model.</span></span> <span data-ttu-id="562b4-128">Používají přenos podle vaší volby, jako je například HTTP s [webového rozhraní API](service-fabric-reliable-services-communication-webapi.md), Websocket, vlastní protokoly TCP, nebo cokoliv jiného.</span><span class="sxs-lookup"><span data-stu-id="562b4-128">Use the transport of your choice, such as HTTP with [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, custom TCP protocols, or anything else.</span></span> <span data-ttu-id="562b4-129">Spolehlivé služby poskytují některé skvělé možnosti se na pole můžete použít, nebo můžete zadat vlastní.</span><span class="sxs-lookup"><span data-stu-id="562b4-129">Reliable Services provide some great out-of-the-box options you can use, or you can provide your own.</span></span>
* <span data-ttu-id="562b4-130">Spolehlivé služby programovací model pro stavové služby, umožňuje konzistentní a spolehlivě ukládat vašemu stavu právo uvnitř vaší služby pomocí [spolehlivé kolekce](service-fabric-reliable-services-reliable-collections.md).</span><span class="sxs-lookup"><span data-stu-id="562b4-130">For stateful services, the Reliable Services programming model allows you to consistently and reliably store your state right inside your service by using [Reliable Collections](service-fabric-reliable-services-reliable-collections.md).</span></span> <span data-ttu-id="562b4-131">Spolehlivé kolekce jsou jednoduchou sadou třídy vysoce dostupné a spolehlivého kolekce, které budou pro každý, kdo má používá kolekce C#.</span><span class="sxs-lookup"><span data-stu-id="562b4-131">Reliable Collections are a simple set of highly available and reliable collection classes that will be familiar to anyone who has used C# collections.</span></span> <span data-ttu-id="562b4-132">Tradičně služby pro správu spolehlivé stavu potřeba externími systémy.</span><span class="sxs-lookup"><span data-stu-id="562b4-132">Traditionally, services needed external systems for Reliable state management.</span></span> <span data-ttu-id="562b4-133">S spolehlivé kolekce se dají ukládat vašemu stavu vedle výpočetní stejnou vysokou dostupnost a spolehlivost, které jste si zvykli z úložiště s vysokou dostupností externí.</span><span class="sxs-lookup"><span data-stu-id="562b4-133">With Reliable Collections, you can store your state next to your compute with the same high availability and reliability you've come to expect from highly available external stores.</span></span> <span data-ttu-id="562b4-134">Tento model taky zlepšuje latence, protože jsou společné umísťování výpočty a stavu, ve kterém musí fungovat.</span><span class="sxs-lookup"><span data-stu-id="562b4-134">This model also improves latency because you are co-locating the compute and state it needs to function.</span></span>

<span data-ttu-id="562b4-135">Podívejte se na toto video Microsoft Virtual Academy přehled spolehlivé služby:<center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span><span class="sxs-lookup"><span data-stu-id="562b4-135">Watch this Microsoft Virtual Academy video for an overview of Reliable services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span></span>

## <a name="what-makes-reliable-services-different"></a><span data-ttu-id="562b4-136">Díky spolehlivé služby různých?</span><span class="sxs-lookup"><span data-stu-id="562b4-136">What makes Reliable Services different?</span></span>
<span data-ttu-id="562b4-137">Spolehlivé služby v Service Fabric se liší od služby, které může jste napsali před.</span><span class="sxs-lookup"><span data-stu-id="562b4-137">Reliable Services in Service Fabric are different from services you may have written before.</span></span> <span data-ttu-id="562b4-138">Service Fabric nabízí spolehlivost, dostupnost, konzistence a škálovatelnost.</span><span class="sxs-lookup"><span data-stu-id="562b4-138">Service Fabric provides reliability, availability, consistency, and scalability.</span></span>

* <span data-ttu-id="562b4-139">**Spolehlivost** – vaše služba zůstane nahoru i v nespolehlivé prostředích, kde vaše počítače selhat nebo stiskněte tlačítko problémů se sítí nebo v případech, kdy dojde k chybám a havárií služby sami, nebo selhání.</span><span class="sxs-lookup"><span data-stu-id="562b4-139">**Reliability** - Your service stays up even in unreliable environments where your machines fail or hit network issues, or in cases where the services themselves encounter errors and crash or fail.</span></span> <span data-ttu-id="562b4-140">Pro stavové služby je zachovaná vašemu stavu i v případě sítě nebo jiné chyby.</span><span class="sxs-lookup"><span data-stu-id="562b4-140">For stateful services, your state is preserved even in the presence of network or other failures.</span></span>
* <span data-ttu-id="562b4-141">**Dostupnost** – vaše služba je dostupná a dobře reagovaly.</span><span class="sxs-lookup"><span data-stu-id="562b4-141">**Availability** - Your service is reachable and responsive.</span></span> <span data-ttu-id="562b4-142">Service Fabric spravuje vaše požadovaný počet spuštěná kopie.</span><span class="sxs-lookup"><span data-stu-id="562b4-142">Service Fabric maintains your desired number of running copies.</span></span>
* <span data-ttu-id="562b4-143">**Škálovatelnost** – služby, které jsou odpojené od konkrétní hardware, a můžou růst nebo zmenšení podle potřeby prostřednictvím přidání nebo odebrání hardwaru nebo jiným prostředkům.</span><span class="sxs-lookup"><span data-stu-id="562b4-143">**Scalability** - Services are decoupled from specific hardware, and they can grow or shrink as necessary through the addition or removal of hardware or other resources.</span></span> <span data-ttu-id="562b4-144">Služby jsou snadno rozdělena na oddíly (zejména v případě stateful) k zajištění, že můžete škálovat službu a řešit částečné selhání.</span><span class="sxs-lookup"><span data-stu-id="562b4-144">Services are easily partitioned (especially in the stateful case) to ensure that the service can scale and handle partial failures.</span></span> <span data-ttu-id="562b4-145">Služby lze vytvořit a odstranit dynamicky prostřednictvím kódu, povolení více instancí k spuštěné podle potřeby můžete v reakci na požadavky zákazníků.</span><span class="sxs-lookup"><span data-stu-id="562b4-145">Services can be created and deleted dynamically via code, enabling more instances to be spun up as necessary, say in response to customer requests.</span></span> <span data-ttu-id="562b4-146">Nakonec Service Fabric podporuje services lightweight.</span><span class="sxs-lookup"><span data-stu-id="562b4-146">Finally, Service Fabric encourages services to be lightweight.</span></span> <span data-ttu-id="562b4-147">Service Fabric umožňuje tisíce služby, které se má zřídit v jednom procesu, nikoli vyžadují nebo vyhradit celý instancí operačního systému nebo procesy do jediné instance služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-147">Service Fabric allows thousands of services to be provisioned within a single process, rather than requiring or dedicating entire OS instances or processes to a single instance of a service.</span></span>
* <span data-ttu-id="562b4-148">**Konzistence** -jakékoli informace uložené v rámci této služby můžete být musí být konzistentní.</span><span class="sxs-lookup"><span data-stu-id="562b4-148">**Consistency** - Any information stored in this service can be guaranteed to be consistent.</span></span> <span data-ttu-id="562b4-149">To platí i napříč více spolehlivé kolekcí v rámci služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-149">This is true even across multiple reliable collections within a service.</span></span> <span data-ttu-id="562b4-150">Změny mezi kolekcemi v rámci služby mohou být provedeny transakčně atomic způsobem.</span><span class="sxs-lookup"><span data-stu-id="562b4-150">Changes across collections within a service can be made in a transactionally atomic manner.</span></span>

## <a name="service-lifecycle"></a><span data-ttu-id="562b4-151">Životní cyklus služby</span><span class="sxs-lookup"><span data-stu-id="562b4-151">Service lifecycle</span></span>
<span data-ttu-id="562b4-152">Jestli stateful nebo bezstavové služby se poskytují spolehlivé služby jednoduché životního cyklu, které vám umožní rychle zařaďte kódu a začít pracovat.</span><span class="sxs-lookup"><span data-stu-id="562b4-152">Whether your service is stateful or stateless, Reliable Services provide a simple lifecycle that lets you quickly plug in your code and get started.</span></span>  <span data-ttu-id="562b4-153">Existují jen jednu nebo dvě metody, které potřebujete k implementaci pro zprovoznění služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-153">There are just one or two methods that you need to implement to get your service up and running.</span></span>

* <span data-ttu-id="562b4-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** -tato metoda je, kde služba definuje stack(s) komunikaci, která chce používat.</span><span class="sxs-lookup"><span data-stu-id="562b4-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** - This method is where the service defines the communication stack(s) that it wants to use.</span></span> <span data-ttu-id="562b4-155">Komunikace zásobníku, jako například [webového rozhraní API](service-fabric-reliable-services-communication-webapi.md), je co definuje naslouchání koncového bodu nebo koncové body pro službu (jak klienti moci připojit službu).</span><span class="sxs-lookup"><span data-stu-id="562b4-155">The communication stack, such as [Web API](service-fabric-reliable-services-communication-webapi.md), is what defines the listening endpoint or endpoints for the service (how clients reach the service).</span></span> <span data-ttu-id="562b4-156">Také definuje způsob, jakým zprávy, které se zobrazují komunikovat s ostatními kódu služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-156">It also defines how the messages that appear interact with the rest of the service code.</span></span>
* <span data-ttu-id="562b4-157">**RunAsync** -tato metoda je, kde vaše služba spustí své obchodní logiky a kde by nové úlohy na pozadí, které měly být spuštěny po dobu jeho existence služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-157">**RunAsync** - This method is where your service runs its business logic, and where it would kick off any background tasks that should run for the lifetime of the service.</span></span> <span data-ttu-id="562b4-158">Token zrušení, který je k dispozici je signál pro Pokud by se měla zastavit svou práci.</span><span class="sxs-lookup"><span data-stu-id="562b4-158">The cancellation token that is provided is a signal for when that work should stop.</span></span> <span data-ttu-id="562b4-159">Například pokud služba potřebuje načítat zprávy z fronty spolehlivé a jejich zpracování, toto je, kde se stane svou práci.</span><span class="sxs-lookup"><span data-stu-id="562b4-159">For example, if the service needs to pull messages out of a Reliable Queue and process them, this is where that work happens.</span></span>

<span data-ttu-id="562b4-160">Pokud studujete spolehlivé služby poprvé, přečtěte si na!</span><span class="sxs-lookup"><span data-stu-id="562b4-160">If you're learning about reliable services for the first time, read on!</span></span> <span data-ttu-id="562b4-161">Pokud hledáte podrobný návod životního cyklu spolehlivé služby, můžete zamiřte na [v tomto článku](service-fabric-reliable-services-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="562b4-161">If you're looking for a detailed walkthrough of the lifecycle of reliable services, you can head over to [this article](service-fabric-reliable-services-lifecycle.md).</span></span>

## <a name="example-services"></a><span data-ttu-id="562b4-162">Příklad služby</span><span class="sxs-lookup"><span data-stu-id="562b4-162">Example services</span></span>
<span data-ttu-id="562b4-163">Znalost Tento programovací model, podívejme rychlý přehled dva různé služby, pokud chcete zobrazit, jak tyto součásti zapadají.</span><span class="sxs-lookup"><span data-stu-id="562b4-163">Knowing this programming model, let's take a quick look at two different services to see how these pieces fit together.</span></span>

### <a name="stateless-reliable-services"></a><span data-ttu-id="562b4-164">Bezstavové spolehlivé služby</span><span class="sxs-lookup"><span data-stu-id="562b4-164">Stateless Reliable Services</span></span>
<span data-ttu-id="562b4-165">Bezstavové služby je jeden, kdy není žádný stav uchovávaných v rámci služby v rámci volání.</span><span class="sxs-lookup"><span data-stu-id="562b4-165">A stateless service is one where there is no state maintained within the service across calls.</span></span> <span data-ttu-id="562b4-166">Žádný stav, který je k dispozici je zcela na jedno použití a nevyžaduje synchronizace replikace, trvalost nebo vysokou dostupnost.</span><span class="sxs-lookup"><span data-stu-id="562b4-166">Any state that is present is entirely disposable and doesn't require synchronization, replication, persistence, or high availability.</span></span>

<span data-ttu-id="562b4-167">Představte si třeba kalkulačky, která má nedostatek paměti a přijímá všechny podmínky a provést najednou.</span><span class="sxs-lookup"><span data-stu-id="562b4-167">For example, consider a calculator that has no memory and receives all terms and operations to perform at once.</span></span>

<span data-ttu-id="562b4-168">V takovém případě `RunAsync()` (C#) nebo `runAsync()` (Java) služby nesmí být prázdné, protože neexistuje žádná úloha zpracování na pozadí kterou služba potřebuje.</span><span class="sxs-lookup"><span data-stu-id="562b4-168">In this case, the `RunAsync()` (C#) or `runAsync()` (Java) of the service can be empty, since there is no background task-processing that the service needs to do.</span></span> <span data-ttu-id="562b4-169">Když je vytvořen službu kalkulačky, vrátí `ICommunicationListener` (C#) nebo `CommunicationListener` (Java) (například [webového rozhraní API](service-fabric-reliable-services-communication-webapi.md)), otevře se koncový bod naslouchání na některé portu.</span><span class="sxs-lookup"><span data-stu-id="562b4-169">When the calculator service is created, it returns an `ICommunicationListener` (C#) or `CommunicationListener` (Java) (for example [Web API](service-fabric-reliable-services-communication-webapi.md)) that opens up a listening endpoint on some port.</span></span> <span data-ttu-id="562b4-170">Tento koncový bod naslouchání zachytí různé výpočetní metody (Příklad: "Přidat (n1, n2)"), definovat Kalkulačka na veřejné rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="562b4-170">This listening endpoint hooks up to the different calculation methods (example: "Add(n1, n2)") that define the calculator's public API.</span></span>

<span data-ttu-id="562b4-171">Při volání z klienta odpovídající metoda je volána a službu kalkulačky provádí operace na dostupných dat a vrátí výsledek.</span><span class="sxs-lookup"><span data-stu-id="562b4-171">When a call is made from a client, the appropriate method is invoked, and the calculator service performs the operations on the data provided and returns the result.</span></span> <span data-ttu-id="562b4-172">Jakýkoli stav nejsou uložena.</span><span class="sxs-lookup"><span data-stu-id="562b4-172">It doesn't store any state.</span></span>

<span data-ttu-id="562b4-173">Neukládejte žádný vnitřní stav je tento příklad kalkulačky snadné.</span><span class="sxs-lookup"><span data-stu-id="562b4-173">Not storing any internal state makes this example calculator simple.</span></span> <span data-ttu-id="562b4-174">Ale většina služeb nejsou skutečně bezstavové.</span><span class="sxs-lookup"><span data-stu-id="562b4-174">But most services aren't truly stateless.</span></span> <span data-ttu-id="562b4-175">Místo toho využívajícím jejich stavu na některá další úložiště.</span><span class="sxs-lookup"><span data-stu-id="562b4-175">Instead, they externalize their state to some other store.</span></span> <span data-ttu-id="562b4-176">(Například webové aplikace, které jsou závislé na zachování stavu relace v úložišti zálohování nebo mezipaměti není bezstavové.)</span><span class="sxs-lookup"><span data-stu-id="562b4-176">(For example, any web app that relies on keeping session state in a backing store or cache is not stateless.)</span></span>

<span data-ttu-id="562b4-177">Běžným příkladem jak bezstavové služby se používají v Service Fabric je jako front-end, zpřístupní veřejné rozhraní API pro webovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="562b4-177">A common example of how stateless services are used in Service Fabric is as a front-end that exposes the public-facing API for a web application.</span></span> <span data-ttu-id="562b4-178">Front-endová služba potom komunikuje se stavové služby k dokončení požadavku uživatele.</span><span class="sxs-lookup"><span data-stu-id="562b4-178">The front-end service then talks to stateful services to complete a user request.</span></span> <span data-ttu-id="562b4-179">V takovém případě jsou směrované volání od klientů známé port, jako třeba 80, kde bezstavové služby naslouchá.</span><span class="sxs-lookup"><span data-stu-id="562b4-179">In this case, calls from clients are directed to a known port, such as 80, where the stateless service is listening.</span></span> <span data-ttu-id="562b4-180">Tato služba bezstavové přijme hovor a určuje, jestli je volání z důvěryhodné strany a ji obsluhovat je určené pro.</span><span class="sxs-lookup"><span data-stu-id="562b4-180">This stateless service receives the call and determines whether the call is from a trusted party and which service it's destined for.</span></span>  <span data-ttu-id="562b4-181">Bezstavové služby poté předává volání správné oddílu stavové služby a čeká na odpověď.</span><span class="sxs-lookup"><span data-stu-id="562b4-181">Then, the stateless service forwards the call to the correct partition of the stateful service and waits for a response.</span></span> <span data-ttu-id="562b4-182">Když bezstavové služby obdrží odpověď, reaguje na původní klienta.</span><span class="sxs-lookup"><span data-stu-id="562b4-182">When the stateless service receives a response, it replies to the original client.</span></span> <span data-ttu-id="562b4-183">Příkladem takové služby je v naše ukázky [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span><span class="sxs-lookup"><span data-stu-id="562b4-183">An example of such a service is in our samples [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span></span> <span data-ttu-id="562b4-184">Toto je pouze jedním z příkladů tohoto vzoru v ukázkách, existují i další v jiných ukázky také.</span><span class="sxs-lookup"><span data-stu-id="562b4-184">This is only one example of this pattern in the samples, there are others in other samples as well.</span></span>

### <a name="stateful-reliable-services"></a><span data-ttu-id="562b4-185">Stavová spolehlivé služby</span><span class="sxs-lookup"><span data-stu-id="562b4-185">Stateful Reliable Services</span></span>
<span data-ttu-id="562b4-186">Stavové služby je ten, který musí mít některé část stavu zachovány konzistentní a v pořadí pro službu funkce.</span><span class="sxs-lookup"><span data-stu-id="562b4-186">A stateful service is one that must have some portion of state kept consistent and present in order for the service to function.</span></span> <span data-ttu-id="562b4-187">Zvažte službu, která neustále vypočítá kumulativní průměr některá z hodnot na základě aktualizací, které obdrží.</span><span class="sxs-lookup"><span data-stu-id="562b4-187">Consider a service that constantly computes a rolling average of some value based on updates it receives.</span></span> <span data-ttu-id="562b4-188">Chcete-li to provést, musí mít aktuální sadu příchozích požadavků, které potřebuje pro proces a aktuální průměr.</span><span class="sxs-lookup"><span data-stu-id="562b4-188">To do this, it must have the current set of incoming requests it needs to process and the current average.</span></span> <span data-ttu-id="562b4-189">Jakoukoli službu, která načte, procesy a ukládá informace v externím obchodu (například Azure blob nebo table úložišti dnes) je stavový.</span><span class="sxs-lookup"><span data-stu-id="562b4-189">Any service that retrieves, processes, and stores information in an external store (such as an Azure blob or table store today) is stateful.</span></span> <span data-ttu-id="562b4-190">V úložišti externí stavu právě udržuje její stav.</span><span class="sxs-lookup"><span data-stu-id="562b4-190">It just keeps its state in the external state store.</span></span>

<span data-ttu-id="562b4-191">Většina služeb dnes uložit jejich stavu externě, vzhledem k tomu, že externí úložiště je pro tento stav co nabízí spolehlivost, dostupnost, škálovatelnost a konzistence.</span><span class="sxs-lookup"><span data-stu-id="562b4-191">Most services today store their state externally, since the external store is what provides reliability, availability, scalability, and consistency for that state.</span></span> <span data-ttu-id="562b4-192">V Service Fabric nejsou potřeba služby k uložení jejich stavu externě.</span><span class="sxs-lookup"><span data-stu-id="562b4-192">In Service Fabric, services aren't required to store their state externally.</span></span> <span data-ttu-id="562b4-193">Service Fabric má na starosti tyto požadavky pro kódu služby a stav služby.</span><span class="sxs-lookup"><span data-stu-id="562b4-193">Service Fabric takes care of these requirements for both the service code and the service state.</span></span>

> [!NOTE]
> <span data-ttu-id="562b4-194">Podpora pro stavové služby Reliable Services není k dispozici v systému Linux ještě (pro C# nebo Java).</span><span class="sxs-lookup"><span data-stu-id="562b4-194">Support for Stateful Reliable Services is not available on Linux yet (for C# or Java).</span></span>
>

<span data-ttu-id="562b4-195">Řekněme, že chceme zápisu služba, která zpracovává bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="562b4-195">Let's say we want to write a service that processes images.</span></span> <span data-ttu-id="562b4-196">K tomuto účelu službu přebírá bitovou kopii a řadu převody k plnění této bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="562b4-196">To do this, the service takes in an image and the series of conversions to perform on that image.</span></span> <span data-ttu-id="562b4-197">Tato služba vrátí naslouchací proces komunikace (umožňuje Předpokládejme, že je WebAPI), jako například zpřístupňuje rozhraní API `ConvertImage(Image i, IList<Conversion> conversions)`.</span><span class="sxs-lookup"><span data-stu-id="562b4-197">This service returns a communication listener (let's suppose it's a WebAPI) that exposes an API like `ConvertImage(Image i, IList<Conversion> conversions)`.</span></span> <span data-ttu-id="562b4-198">Pokud obdrží požadavek, služba uloží jej do `IReliableQueue`a vrátí některé id do klienta, takže ho můžete sledovat žádosti.</span><span class="sxs-lookup"><span data-stu-id="562b4-198">When it receives a request, the service stores it in a `IReliableQueue`, and returns some id to the client so it can track the request.</span></span>

<span data-ttu-id="562b4-199">V rámci této služby `RunAsync()` může být složitější.</span><span class="sxs-lookup"><span data-stu-id="562b4-199">In this service, `RunAsync()` could be more complex.</span></span> <span data-ttu-id="562b4-200">Služba obsahuje smyčku v jeho `RunAsync()` , vrátí požadavky mimo `IReliableQueue` a provádí převody požadovaný.</span><span class="sxs-lookup"><span data-stu-id="562b4-200">The service has a loop inside its `RunAsync()` that pulls requests out of `IReliableQueue` and performs the conversions requested.</span></span> <span data-ttu-id="562b4-201">Získat výsledky uložené v `IReliableDictionary` tak, že když klient zpátky mohou získat jejich převedený bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="562b4-201">The results get stored in an `IReliableDictionary` so that when the client comes back they can get their converted images.</span></span> <span data-ttu-id="562b4-202">Ujistěte se, že i když se něco nezdaří bitovou kopii není ztraceny, tato spolehlivá služba by pro vyžádání obsahu z fronty, proveďte převody a uložit výsledek vše v rámci jedné transakce.</span><span class="sxs-lookup"><span data-stu-id="562b4-202">To ensure that even if something fails the image isn't lost, this Reliable Service would pull out of the queue, perform the conversions, and store the result all in a single transaction.</span></span> <span data-ttu-id="562b4-203">V takovém případě je zpráva odebrána z fronty a výsledky jsou uloženy ve slovníku výsledek jenom v případě, že převody jsou dokončeny.</span><span class="sxs-lookup"><span data-stu-id="562b4-203">In this case, the message is removed from the queue and the results are stored in the result dictionary only when the conversions are complete.</span></span> <span data-ttu-id="562b4-204">Alternativně může služba bitovou kopii z fronty pro vyžádání obsahu a okamžitě ji uložit do vzdáleného úložiště.</span><span class="sxs-lookup"><span data-stu-id="562b4-204">Alternatively, the service could pull the image out of the queue and immediately store it in a remote store.</span></span> <span data-ttu-id="562b4-205">Tím se snižuje množství stavu, ve kterém je služba pro správu, ale zvyšuje složitost od služby má zachovat metadata potřebná ke správě vzdáleného úložiště.</span><span class="sxs-lookup"><span data-stu-id="562b4-205">This reduces the amount of state the service has to manage, but increases complexity since the service has to keep the necessary metadata to manage the remote store.</span></span> <span data-ttu-id="562b4-206">S buď přístup Pokud se něco nepovedlo uprostřed zůstane požadavek ve frontě čekajících na zpracování.</span><span class="sxs-lookup"><span data-stu-id="562b4-206">With either approach, if something failed in the middle the request remains in the queue waiting to be processed.</span></span>

<span data-ttu-id="562b4-207">Poznámka o této službě je, že vypadá podobně jako normální služby rozhraní .NET!</span><span class="sxs-lookup"><span data-stu-id="562b4-207">One thing to note about this service is that it sounds like a normal .NET service!</span></span> <span data-ttu-id="562b4-208">Jediným rozdílem je, že data struktury používá (`IReliableQueue` a `IReliableDictionary`) jsou poskytovány Service Fabric a jsou vysoce spolehlivé, k dispozici a konzistentní.</span><span class="sxs-lookup"><span data-stu-id="562b4-208">The only difference is that the data structures being used (`IReliableQueue` and `IReliableDictionary`) are provided by Service Fabric, and are highly reliable, available, and consistent.</span></span>

## <a name="when-to-use-reliable-services-apis"></a><span data-ttu-id="562b4-209">Kdy použít rozhraní API spolehlivé služby</span><span class="sxs-lookup"><span data-stu-id="562b4-209">When to use Reliable Services APIs</span></span>
<span data-ttu-id="562b4-210">Pokud některé z následujících charakterizovat služby potřebám vaší aplikace, měli byste zvážit spolehlivé rozhraní API služby:</span><span class="sxs-lookup"><span data-stu-id="562b4-210">If any of the following characterize your application service needs, then you should consider Reliable Services APIs:</span></span>

* <span data-ttu-id="562b4-211">Má vaše služba kód (a volitelně stavu) vysoce dostupné a spolehlivé</span><span class="sxs-lookup"><span data-stu-id="562b4-211">You want your service's code (and optionally state) to be highly available and reliable</span></span>
* <span data-ttu-id="562b4-212">Je nutné transakční záruky přes víc jednotek služby stavu (například objednávek a položek řádku pořadí).</span><span class="sxs-lookup"><span data-stu-id="562b4-212">You need transactional guarantees across multiple units of state (for example, orders and order line items).</span></span>
* <span data-ttu-id="562b4-213">Stav aplikace můžete přirozeně modelován jako slovník spolehlivé a fronty.</span><span class="sxs-lookup"><span data-stu-id="562b4-213">Your application’s state can be naturally modeled as Reliable Dictionaries and Queues.</span></span>
* <span data-ttu-id="562b4-214">Kód aplikace nebo stavu musí být vysoce dostupný s nízkou latencí čtení a zápisy.</span><span class="sxs-lookup"><span data-stu-id="562b4-214">Your applications code or state needs to be highly available with low latency reads and writes.</span></span>
* <span data-ttu-id="562b4-215">Aplikace musí pro řízení souběžnosti nebo členitost zpracovaných operací na jeden nebo více kolekcí spolehlivé.</span><span class="sxs-lookup"><span data-stu-id="562b4-215">Your application needs to control the concurrency or granularity of transacted operations across one or more Reliable Collections.</span></span>
* <span data-ttu-id="562b4-216">Chcete spravovat informace, nebo řídit schéma rozdělení oddílů pro vaši službu.</span><span class="sxs-lookup"><span data-stu-id="562b4-216">You want to manage the communications or control the partitioning scheme for your service.</span></span>
* <span data-ttu-id="562b4-217">Váš kód potřebuje podprocesy běhového prostředí.</span><span class="sxs-lookup"><span data-stu-id="562b4-217">Your code needs a free-threaded runtime environment.</span></span>
* <span data-ttu-id="562b4-218">Aplikace musí dynamicky vytvořit nebo odstranit spolehlivé slovník nebo fronty nebo celý služby za běhu.</span><span class="sxs-lookup"><span data-stu-id="562b4-218">Your application needs to dynamically create or destroy Reliable Dictionaries or Queues or whole Services at runtime.</span></span>
* <span data-ttu-id="562b4-219">Budete muset prostřednictvím kódu programu řízení zadaný Service Fabric zálohování a obnovení funkce pro služby stavu.</span><span class="sxs-lookup"><span data-stu-id="562b4-219">You need to programmatically control Service Fabric-provided backup and restore features for your service’s state.</span></span>
* <span data-ttu-id="562b4-220">Aplikace musí udržovat historii změn pro jeho jednotky stavu.</span><span class="sxs-lookup"><span data-stu-id="562b4-220">Your application needs to maintain change history for its units of state.</span></span>
* <span data-ttu-id="562b4-221">Chcete vyvíjet nebo využívat zprostředkovatelé třetí strany vyvinuté, vlastní stavu.</span><span class="sxs-lookup"><span data-stu-id="562b4-221">You want to develop or consume third-party-developed, custom state providers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="562b4-222">Další kroky</span><span class="sxs-lookup"><span data-stu-id="562b4-222">Next steps</span></span>
* [<span data-ttu-id="562b4-223">Spolehlivé služby rychlý start</span><span class="sxs-lookup"><span data-stu-id="562b4-223">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="562b4-224">Spolehlivé služby advanced využití</span><span class="sxs-lookup"><span data-stu-id="562b4-224">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
* [<span data-ttu-id="562b4-225">Programovacího modelu Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="562b4-225">The Reliable Actors programming model</span></span>](service-fabric-reliable-actors-introduction.md)
