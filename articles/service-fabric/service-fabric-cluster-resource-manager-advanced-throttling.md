---
title: "aaaThrottling ve Správci prostředků clusteru Service Fabric hello | Microsoft Docs"
description: "Další omezení hello tooconfigure poskytované hello správce prostředků clusteru Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f418536911d3e3814e78a4d9f057dfb867ca7c63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="throttling-hello-service-fabric-cluster-resource-manager"></a><span data-ttu-id="e53a2-103">Omezení hello správce prostředků clusteru Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e53a2-103">Throttling hello Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="e53a2-104">I když jste nakonfigurovali hello správce prostředků clusteru správně, může získat dojde k narušení hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="e53a2-104">Even if you’ve configured hello Cluster Resource Manager correctly, hello cluster can get disrupted.</span></span> <span data-ttu-id="e53a2-105">Například může být současně uzel a selhání domény selhání - co by mohlo dojít, pokud, ke kterým došlo během upgradu? Hello clusteru Resource Manager vždy se pokusí toofix všechno využívání prostředků clusteru hello pokusu o tooreorganize a opravte hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="e53a2-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade? hello Cluster Resource Manager always tries toofix everything, consuming hello cluster's resources trying tooreorganize and fix hello cluster.</span></span> <span data-ttu-id="e53a2-106">Omezení zajišťuje backstop tak, aby hello cluster může používat prostředky toostabilize – uzly hello vraťte, retušovat hello síťové oddíly, nasadí opravené bits.</span><span class="sxs-lookup"><span data-stu-id="e53a2-106">Throttles help provide a backstop so that hello cluster can use resources toostabilize - hello nodes come back, hello network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="e53a2-107">toohelp pomocí těchto nastavení neovlivní situacích hello správce prostředků clusteru Service Fabric zahrnuje několik omezení.</span><span class="sxs-lookup"><span data-stu-id="e53a2-107">toohelp with these sorts of situations, hello Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="e53a2-108">Tato omezení jsou všechny bourací kladiva poměrně velké.</span><span class="sxs-lookup"><span data-stu-id="e53a2-108">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="e53a2-109">Obecně se nesmí změnit bez pečlivé plánování a testování.</span><span class="sxs-lookup"><span data-stu-id="e53a2-109">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="e53a2-110">Pokud změníte hello clusteru správce prostředků pro omezení, musí je ladit tooyour očekávané skutečné zátěže.</span><span class="sxs-lookup"><span data-stu-id="e53a2-110">If you change hello Cluster Resource Manager's throttles, you should tune them tooyour expected actual load.</span></span> <span data-ttu-id="e53a2-111">Můžete určit, že potřebujete toohave některé omezí generovaný na místě, i v případě, znamená to, že hello clusteru trvá déle, toostabilize v některých situacích.</span><span class="sxs-lookup"><span data-stu-id="e53a2-111">You may determine you need toohave some throttles in place, even if it means hello cluster takes longer toostabilize in some situations.</span></span> <span data-ttu-id="e53a2-112">Testování je požadovaná toodetermine hello správné hodnoty pro omezení.</span><span class="sxs-lookup"><span data-stu-id="e53a2-112">Testing is required toodetermine hello correct values for throttles.</span></span> <span data-ttu-id="e53a2-113">Omezení potřebovat toobe dostatečně vysoký tooallow hello clusteru toorespond toochanges v přiměřené době a dolní dostatek tooactually zabránit příliš mnoho spotřeby prostředků.</span><span class="sxs-lookup"><span data-stu-id="e53a2-113">Throttles need toobe high enough tooallow hello cluster toorespond toochanges in a reasonable amount of time, and low enough tooactually prevent too much resource consumption.</span></span> 

<span data-ttu-id="e53a2-114">Většinu času hello jsme viděli zákazníkům použít omezení, byla úspěšně, protože již byly v prostředí omezené prostředků.</span><span class="sxs-lookup"><span data-stu-id="e53a2-114">Most of hello time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="e53a2-115">Některé příklady by byla omezena šířka pásma sítě pro jednotlivé uzly nebo disky, které nejsou možné toobuild mnoho stavových replik v paralelní z důvodu omezení toothroughput.</span><span class="sxs-lookup"><span data-stu-id="e53a2-115">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able toobuild many stateful replicas in parallel due toothroughput limitations.</span></span> <span data-ttu-id="e53a2-116">Bez omezení může operace zahlcovat těchto prostředků, způsobuje operations toofail nebo pomalé.</span><span class="sxs-lookup"><span data-stu-id="e53a2-116">Without throttles, operations could overwhelm these resources, causing operations toofail or be slow.</span></span> <span data-ttu-id="e53a2-117">V těchto situacích zákazníků použít omezení a věděl, že se měla rozšíření hello množství času, které by byly třeba hello clusteru tooreach stabilního stavu.</span><span class="sxs-lookup"><span data-stu-id="e53a2-117">In these situations customers used throttles and knew they were extending hello amount of time it would take hello cluster tooreach a stable state.</span></span> <span data-ttu-id="e53a2-118">Zákazníci také za to, že se může stát, že běží na nižší celkovou spolehlivost, zatímco se byly omezeny.</span><span class="sxs-lookup"><span data-stu-id="e53a2-118">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-hello-throttles"></a><span data-ttu-id="e53a2-119">Konfigurace omezení hello</span><span class="sxs-lookup"><span data-stu-id="e53a2-119">Configuring hello throttles</span></span>

<span data-ttu-id="e53a2-120">Service Fabric má dva mechanismy pro omezení počtu hello pohybů repliky.</span><span class="sxs-lookup"><span data-stu-id="e53a2-120">Service Fabric has two mechanisms for throttling hello number of replica movements.</span></span> <span data-ttu-id="e53a2-121">Hello výchozího mechanismu, který existoval Service Fabric 5.7 představuje omezení jako absolutní počet přesune povoleny.</span><span class="sxs-lookup"><span data-stu-id="e53a2-121">hello default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="e53a2-122">Není to funguje pro clustery všech velikostí.</span><span class="sxs-lookup"><span data-stu-id="e53a2-122">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="e53a2-123">Konkrétně pro velkých clusterech hello výchozí hodnota může být příliš malá, výrazně zpomalení vyrovnávání i v případě, že je to nutné, přitom má neplatí v menší clustery.</span><span class="sxs-lookup"><span data-stu-id="e53a2-123">In particular, for large clusters hello default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="e53a2-124">Tento mechanismus předchozí byla nahrazena na základě procenta omezení, která škáluje líp s dynamické clustery v číslo, které hello služeb a uzly pravidelně měnit.</span><span class="sxs-lookup"><span data-stu-id="e53a2-124">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which hello number of services and nodes change regularly.</span></span>

<span data-ttu-id="e53a2-125">omezení Hello jsou založené na procento hello počet replik v clusterech hello.</span><span class="sxs-lookup"><span data-stu-id="e53a2-125">hello throttles are based on a percentage of hello number of replicas in hello clusters.</span></span> <span data-ttu-id="e53a2-126">Omezení Percetage na základě povolení 5násobku pravidla hello: "nepřesouvejte více než 10 % repliky v intervalu 10 minut", například.</span><span class="sxs-lookup"><span data-stu-id="e53a2-126">Percetage based throttles enable expressing hello rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="e53a2-127">nastavení konfigurace Hello na základě procenta omezení jsou:</span><span class="sxs-lookup"><span data-stu-id="e53a2-127">hello configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="e53a2-128">GlobalMovementThrottleThresholdPercentage – maximální počet pohybů v clusteru povolené kdykoli, vyjádřené jako procento celkového počtu replik v clusteru hello.</span><span class="sxs-lookup"><span data-stu-id="e53a2-128">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="e53a2-129">0 znamená bez omezení.</span><span class="sxs-lookup"><span data-stu-id="e53a2-129">0 indicates no limit.</span></span> <span data-ttu-id="e53a2-130">Hello výchozí hodnota je 0.</span><span class="sxs-lookup"><span data-stu-id="e53a2-130">hello default value is 0.</span></span> <span data-ttu-id="e53a2-131">Pokud toto nastavení a GlobalMovementThrottleThreshold jsou nastaveny, pak hello více konzervativní limit se používá.</span><span class="sxs-lookup"><span data-stu-id="e53a2-131">If both this setting and GlobalMovementThrottleThreshold are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="e53a2-132">GlobalMovementThrottleThresholdPercentageForPlacement – maximální počet povolené fázi hello umístění, vyjádřené jako procento celkového počtu replik v clusteru hello pohybů typu.</span><span class="sxs-lookup"><span data-stu-id="e53a2-132">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during hello placement phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="e53a2-133">0 znamená bez omezení.</span><span class="sxs-lookup"><span data-stu-id="e53a2-133">0 indicates no limit.</span></span> <span data-ttu-id="e53a2-134">Hello výchozí hodnota je 0.</span><span class="sxs-lookup"><span data-stu-id="e53a2-134">hello default value is 0.</span></span> <span data-ttu-id="e53a2-135">Pokud toto nastavení a GlobalMovementThrottleThresholdForPlacement jsou nastaveny, pak hello více konzervativní limit se používá.</span><span class="sxs-lookup"><span data-stu-id="e53a2-135">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="e53a2-136">GlobalMovementThrottleThresholdPercentageForBalancing – maximální počet povolených během hello vyrovnávání fáze, vyjádřené jako procento celkového počtu replik v clusteru hello pohybů typu.</span><span class="sxs-lookup"><span data-stu-id="e53a2-136">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during hello balancing phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="e53a2-137">0 znamená bez omezení.</span><span class="sxs-lookup"><span data-stu-id="e53a2-137">0 indicates no limit.</span></span> <span data-ttu-id="e53a2-138">Hello výchozí hodnota je 0.</span><span class="sxs-lookup"><span data-stu-id="e53a2-138">hello default value is 0.</span></span> <span data-ttu-id="e53a2-139">Pokud toto nastavení a GlobalMovementThrottleThresholdForBalancing jsou nastaveny, pak hello více konzervativní limit se používá.</span><span class="sxs-lookup"><span data-stu-id="e53a2-139">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then hello more conservative limit is used.</span></span>

<span data-ttu-id="e53a2-140">Při zadávání hello omezení procento, zadáte jako hodnotu 0,05 5 %.</span><span class="sxs-lookup"><span data-stu-id="e53a2-140">When specifying hello throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="e53a2-141">Hello interval, ve kterém se řídí těchto omezení je hello GlobalMovementThrottleCountingInterval, které se určuje v sekundách.</span><span class="sxs-lookup"><span data-stu-id="e53a2-141">hello interval on which these throttles are governed is hello GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="e53a2-142">pomocí souboru ClusterConfig.json pro samostatné nasazení nebo Template.json pro Azure hostované clustery:</span><span class="sxs-lookup"><span data-stu-id="e53a2-142">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="e53a2-143">Výchozí počet na základě omezení</span><span class="sxs-lookup"><span data-stu-id="e53a2-143">Default count based throttles</span></span>
<span data-ttu-id="e53a2-144">Tyto informace jsou poskytovány v případě, že máte starší clustery nebo zachovat přitom tyto konfigurace clusterů, které od té doby byly upgradovány.</span><span class="sxs-lookup"><span data-stu-id="e53a2-144">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="e53a2-145">Obecně se doporučuje, ty jsou nahrazeny hello na základě procenta omezení výše.</span><span class="sxs-lookup"><span data-stu-id="e53a2-145">In general, it is recommended that these are replaced with hello percentage-based throttles above.</span></span> <span data-ttu-id="e53a2-146">Vzhledem k tomu, že ve výchozím nastavení vypnutá omezování na základě procenta, zůstanou tato omezení hello výchozí omezení pro cluster s podporou, dokud jsou zakázána a nahradí omezení na základě procenta hello.</span><span class="sxs-lookup"><span data-stu-id="e53a2-146">Since percentage-based throttling is disabled by default, these throttles remain hello default throttles for a cluster until they are disabled and replaced with hello percentage-based throttles.</span></span> 

  - <span data-ttu-id="e53a2-147">GlobalMovementThrottleThreshold – toto nastavení určuje celkový počet hello pohybů v clusteru hello delší dobu.</span><span class="sxs-lookup"><span data-stu-id="e53a2-147">GlobalMovementThrottleThreshold – this setting controls hello total number of movements in hello cluster over some time.</span></span> <span data-ttu-id="e53a2-148">Hello množství času se zadávají v sekundách jako hello GlobalMovementThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="e53a2-148">hello amount of time is specified in seconds as hello GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="e53a2-149">hello GlobalMovementThrottleThreshold Hello výchozí hodnota je 1000 a výchozí hodnota hello hello GlobalMovementThrottleCountingInterval je 600.</span><span class="sxs-lookup"><span data-stu-id="e53a2-149">hello default value for hello GlobalMovementThrottleThreshold is 1000 and hello default value for hello GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="e53a2-150">MovementPerPartitionThrottleThreshold – toto nastavení určuje celkový počet hello pohybů pro všechny služby oddíl delší dobu.</span><span class="sxs-lookup"><span data-stu-id="e53a2-150">MovementPerPartitionThrottleThreshold – this setting controls hello total number of movements for any service partition over some time.</span></span> <span data-ttu-id="e53a2-151">Hello množství času se zadávají v sekundách jako hello MovementPerPartitionThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="e53a2-151">hello amount of time is specified in seconds as hello MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="e53a2-152">hello MovementPerPartitionThrottleThreshold Hello výchozí hodnota je 50 a hello MovementPerPartitionThrottleCountingInterval hello výchozí hodnota je 600.</span><span class="sxs-lookup"><span data-stu-id="e53a2-152">hello default value for hello MovementPerPartitionThrottleThreshold is 50 and hello default value for hello MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="e53a2-153">Hello konfigurace těchto omezení způsobem hello stejný vzor jako procento na základě omezení hello.</span><span class="sxs-lookup"><span data-stu-id="e53a2-153">hello configuration for these throttles follows hello same pattern as hello percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e53a2-154">Další kroky</span><span class="sxs-lookup"><span data-stu-id="e53a2-154">Next steps</span></span>
- <span data-ttu-id="e53a2-155">toofind si o tom, jak hello správce prostředků clusteru spravuje a vyrovnává zatížení v clusteru hello, podívejte se na článek hello na [Vyrovnávání zatížení](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="e53a2-155">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="e53a2-156">Hello správce prostředků clusteru má mnoho možností pro popisující hello clusteru.</span><span class="sxs-lookup"><span data-stu-id="e53a2-156">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="e53a2-157">toofind Další informace o jejich, projděte si tento článek na [popisující cluster Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="e53a2-157">toofind out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
