---
title: "Správa aplikací Azure Service Fabric aaaAutomate | Microsoft Docs"
description: "Nasazení, upgrade, testování a odebrání aplikace Service Fabric pomocí prostředí PowerShell."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: a64a39dbee26be8ac15fee767a90fd06bfe4b896
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="automate-hello-application-lifecycle-using-powershell"></a><span data-ttu-id="bfa3f-103">Automatizovat životního cyklu aplikace hello pomocí prostředí PowerShell</span><span class="sxs-lookup"><span data-stu-id="bfa3f-103">Automate hello application lifecycle using PowerShell</span></span>
<span data-ttu-id="bfa3f-104">Mnoho aspektů hello [životního cyklu aplikace Service Fabric](service-fabric-application-lifecycle.md) lze automatizovat.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-104">Many aspects of hello [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="bfa3f-105">Tento článek ukazuje, jak toouse prostředí PowerShell tooautomate běžné úkoly pro nasazení, upgrade, odebrání a testování aplikací pro Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-105">This article shows how toouse PowerShell tooautomate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="bfa3f-106">Spravovat a rozhraní API HTTP pro správu aplikací jsou také k dispozici.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="bfa3f-107">V tématu [životní cyklus aplikace](service-fabric-application-lifecycle.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="bfa3f-108">Požadavky</span><span class="sxs-lookup"><span data-stu-id="bfa3f-108">Prerequisites</span></span>
<span data-ttu-id="bfa3f-109">Před přesunete toohello úlohy v článku hello, nezapomeňte:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-109">Before you move on toohello tasks in hello article, be sure to:</span></span>

* <span data-ttu-id="bfa3f-110">Seznamte se s hello Service Fabric konceptů popsaných v [technický přehled Service Fabric](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-110">Get familiar with hello Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="bfa3f-111">[Instalace hello runtime, sadu SDK a nástrojů pro](service-fabric-get-started.md), který se nainstaluje také hello **ServiceFabric** modul prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-111">[Install hello runtime, SDK, and tools](service-fabric-get-started.md), which also installs hello **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="bfa3f-112">[Povolit spuštění skriptu PowerShell](service-fabric-get-started.md#enable-powershell-script-execution).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="bfa3f-113">Spusťte místní cluster.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-113">Start a local cluster.</span></span>  <span data-ttu-id="bfa3f-114">Spusťte nové okno prostředí PowerShell jako správce a spusťte instalační skript clusteru hello ze složky sady SDK hello:`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="bfa3f-114">Launch a new PowerShell window as an administrator and then run hello cluster setup script from hello SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="bfa3f-115">Než spustíte všechny příkazy prostředí PowerShell v tomto článku, nejprve připojení toohello místní cluster Service Fabric pomocí [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="bfa3f-115">Before you run any PowerShell commands in this article, first connect toohello local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="bfa3f-116">Hello následující úkoly vyžadují toodeploy balíček aplikace v1 a v2 balíček aplikace pro upgrade.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-116">hello following tasks require a v1 application package toodeploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="bfa3f-117">Stáhnout hello [ **WordCount** ukázkové aplikace](http://aka.ms/servicefabricsamples) (umístěný ve ukázky hello Začínáme).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-117">Download hello [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in hello Getting Started samples).</span></span> <span data-ttu-id="bfa3f-118">Sestavení a balíček aplikace hello v sadě Visual Studio (klikněte pravým tlačítkem na **WordCount** v Průzkumníku řešení a vyberte **balíček**).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-118">Build and package hello application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="bfa3f-119">Zkopírování balíčku v1 hello v `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` příliš`C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-119">Copy hello v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` too`C:\Temp\WordCount`.</span></span> <span data-ttu-id="bfa3f-120">Kopírování `C:\Temp\WordCount` příliš`C:\Temp\WordCountV2`, vytváření balíčku aplikace hello v2 pro upgrade.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-120">Copy `C:\Temp\WordCount` too`C:\Temp\WordCountV2`, creating hello v2 application package for upgrade.</span></span> <span data-ttu-id="bfa3f-121">Otevřete `C:\Temp\WordCountV2\ApplicationManifest.xml` v textovém editoru.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="bfa3f-122">V hello **ApplicationManifest** element, změna hello **ApplicationTypeVersion** atribut z "1.0.0" příliš "2.0.0" číslo verze aplikace hello tooupdate.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-122">In hello **ApplicationManifest** element, change hello **ApplicationTypeVersion** attribute from "1.0.0" too"2.0.0" tooupdate hello app version number.</span></span> <span data-ttu-id="bfa3f-123">Uložte soubor ApplicationManifest.xml hello změnit.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-123">Save hello changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="bfa3f-124">Úloha: Nasazení aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="bfa3f-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="bfa3f-125">Jakmile jste vytvořené a zabalené aplikace hello (nebo stáhnout balíček aplikace hello), můžete nasadit aplikaci hello do místní cluster Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-125">After you've built and packaged hello application (or downloaded hello application package), you can deploy hello application into a local Service Fabric cluster.</span></span> <span data-ttu-id="bfa3f-126">Součástí nasazení je odeslání balíčku aplikace hello, registrace typu aplikace hello a vytvoření instance aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-126">Deployment involves uploading hello application package, registering hello application type, and creating hello application instance.</span></span> <span data-ttu-id="bfa3f-127">Použijte hello pokyny v této části toodeploy do nového clusteru tooa aplikace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-127">Use hello instructions in this section toodeploy a new application tooa cluster.</span></span>

### <a name="step-1-upload-hello-application-package"></a><span data-ttu-id="bfa3f-128">Krok 1: Nahrání balíčku aplikace hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-128">Step 1: Upload hello application package</span></span>
<span data-ttu-id="bfa3f-129">Odesílání toohello balíčku aplikace hello úložiště image store vloží ho komponenty Service Fabric přístupné toointernal umístění.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-129">Uploading hello application package toohello image store puts it in a location accessible toointernal Service Fabric components.</span></span>  <span data-ttu-id="bfa3f-130">balíček aplikace Hello obsahuje hello nezbytné manifest aplikace, služby manifesty a kódu, konfiguraci a data balíčky toocreate hello aplikace a instance služby.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-130">hello application package contains hello necessary application manifest, service manifests, and code, configuration, and data package(s) toocreate hello application and service instances.</span></span> <span data-ttu-id="bfa3f-131">Pokud chcete tooverify hello balíček aplikace místně, použijte hello [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) rutiny.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-131">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="bfa3f-132">Hello [kopie ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) příkaz nahrávání hello balíčku.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-132">hello [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads hello package.</span></span> <span data-ttu-id="bfa3f-133">Například:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-hello-application-type"></a><span data-ttu-id="bfa3f-134">Krok 2: Registrace typu aplikace hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-134">Step 2: Register hello application type</span></span>
<span data-ttu-id="bfa3f-135">Registrace balíčku aplikace hello umožňuje hello typ a verze aplikace deklarované v manifestu aplikace hello k dispozici pro použití.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-135">Registering hello application package makes hello application type and version declared in hello application manifest available for use.</span></span> <span data-ttu-id="bfa3f-136">Hello systém přečte hello balíček odeslali v kroku hello 1, zkontrolujte balíček hello (ekvivalentní toorunning [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) místně), zpracovat hello balíček obsah a zkopírujte hello zpracovat balíček tooan Interní systémové umístění.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-136">hello system reads hello package uploaded in hello step 1, verify hello package (equivalent toorunning [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process hello package contents, and copy hello processed package tooan internal system location.</span></span>  <span data-ttu-id="bfa3f-137">Spustit hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) rutiny:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-137">Run hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="bfa3f-138">všechny typy aplikací hello zaregistrován v hello clusteru, spusťte hello toosee [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) rutiny:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-138">toosee all hello application types registered in hello cluster, run hello [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-hello-application-instance"></a><span data-ttu-id="bfa3f-139">Krok 3: Vytvoření instance aplikace hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-139">Step 3: Create hello application instance</span></span>
<span data-ttu-id="bfa3f-140">Aplikace se dá vytvořit instance pomocí verze typu aplikace, který byl úspěšně zaregistrován pomocí hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) příkaz.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-140">An application can be instantiated by using any application type version that has been registered successfully by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="bfa3f-141">Hello názvu každé aplikace je deklarován v nasazení čas a musí začínat hello **prostředků infrastruktury:** scheme a být jedinečné pro každou instanci aplikace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-141">hello name of each application is declared at deploy time and must start with hello **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="bfa3f-142">Hello název typu aplikace a verze typu aplikace jsou deklarované v hello **ApplicationManifest.xml** souboru balíčku aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-142">hello application type name and application type version are declared in hello **ApplicationManifest.xml** file of hello application package.</span></span> <span data-ttu-id="bfa3f-143">Pokud žádné výchozí služby byly definovány manifest aplikace hello hello typ cílové aplikace, pak těch, které jsou v tuto chvíli vytvořit.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-143">If any default services were defined in hello application manifest of hello target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="bfa3f-144">Hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) příkaz vypíše všechny instance aplikace, které byly úspěšně vytvořeny, spolu s jejich celkovým stavem.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-144">hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="bfa3f-145">Hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) příkaz vypíše všechny hello instancí služby, které byly úspěšně vytvořeny v rámci instance dané aplikace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-145">hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of hello service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="bfa3f-146">Jsou uvedeny výchozí služby (pokud existuje).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="bfa3f-147">Úloha: Upgrade aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="bfa3f-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="bfa3f-148">Můžete upgradovat dříve nasazené aplikace Service Fabric se balíček aktualizované aplikace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="bfa3f-149">Tato úloha provede upgrade aplikace WordCount hello, který byl nasazen v "úkolů: nasazení aplikace Service Fabric."</span><span class="sxs-lookup"><span data-stu-id="bfa3f-149">This task upgrades hello WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="bfa3f-150">Pročtěte [upgradu aplikace Service Fabric](service-fabric-application-upgrade.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="bfa3f-151">jednoduché věcí tookeep v tomto příkladu pouze hello číslo verze aplikace byla aktualizována v balíčku aplikace hello WordCountV2 vytvořené v hello požadavky.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-151">tookeep things simple for this example, only hello application version number was updated in hello WordCountV2 application package created in hello prerequisites.</span></span> <span data-ttu-id="bfa3f-152">Realističtější scénář zahrnovat aktualizuje vaše soubory kódu, konfigurace nebo dat služby a pak znovu sestavit a zabalení aplikace hello s aktualizovanou verzi čísla.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging hello application with updated version numbers.</span></span>  

### <a name="step-1-upload-hello-updated-application-package"></a><span data-ttu-id="bfa3f-153">Krok 1: Nahrání balíčku aktualizované aplikace hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-153">Step 1: Upload hello updated application package</span></span>
<span data-ttu-id="bfa3f-154">Hello v1 aplikace WordCount je připraven toobe upgradovat.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-154">hello WordCount v1 application is ready toobe upgraded.</span></span> <span data-ttu-id="bfa3f-155">Pokud jste otevře okno prostředí PowerShell jako správce a zadejte [ **Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), najdete v části nasazení této verze 1.0.0 hello typ aplikace WordCount.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of hello WordCount application type is deployed.</span></span>  

<span data-ttu-id="bfa3f-156">Aktualizována hello kopie aplikace balíčku toohello Service Fabric úložiště bitových kopií (kde jsou hello balíčky aplikací uložené pomocí Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-156">Now copy hello updated application package toohello Service Fabric image store (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="bfa3f-157">Hello parametr **ApplicationPackagePathInImageStore** informuje Service Fabric, kde ji můžete najít balíček aplikace hello.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-157">hello parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="bfa3f-158">Dobrý den, následující příkaz kopie hello balíčku aplikace příliš**WordCountV2** v úložišti bitové kopie hello:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-158">hello following command copies hello application package too**WordCountV2** in hello image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-hello-updated-application-type"></a><span data-ttu-id="bfa3f-159">Krok 2: Registrace hello aktualizovat typ aplikace</span><span class="sxs-lookup"><span data-stu-id="bfa3f-159">Step 2: Register hello updated application type</span></span>
<span data-ttu-id="bfa3f-160">Hello dalším krokem je tooregister hello nové verze aplikace hello s Service Fabric, které lze provést pomocí hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) rutiny:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-160">hello next step is tooregister hello new version of hello application with Service Fabric, which can be performed by using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-hello-upgrade"></a><span data-ttu-id="bfa3f-161">Krok 3: Spuštění upgradu hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-161">Step 3: Start hello upgrade</span></span>
<span data-ttu-id="bfa3f-162">Různé parametry upgradu, vypršení časových limitů a kritéria můžou být použité tooapplication upgrady.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-162">Various upgrade parameters, timeouts, and health criteria can be applied tooapplication upgrades.</span></span> <span data-ttu-id="bfa3f-163">Pročtěte hello [parametry upgradu aplikace](service-fabric-application-upgrade-parameters.md) a [procesu upgradu](service-fabric-application-upgrade.md) toolearn další dokumenty.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-163">Read through hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents toolearn more.</span></span> <span data-ttu-id="bfa3f-164">Všechny instance a služby by měl být *pořádku* po upgradu hello.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-164">All services and instances should be *healthy* after hello upgrade.</span></span>  <span data-ttu-id="bfa3f-165">Sada hello **HealthCheckStableDuration** too60 sekund (tak, aby pro aspoň 20 sekund před provedením upgradu hello toohello další upgradovací doména hello služby jsou v pořádku).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-165">Set hello **HealthCheckStableDuration** too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next upgrade domain).</span></span>  <span data-ttu-id="bfa3f-166">Také sadu hello **UpgradeDomainTimeout** too1200 sekund a hello **UpgradeTimeout** too3000 sekund.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-166">Also set hello **UpgradeDomainTimeout** too1200 seconds and hello **UpgradeTimeout** too3000 seconds.</span></span> <span data-ttu-id="bfa3f-167">Nakonec nastavte hello **UpgradeFailureAction** příliš**vrácení zpět**, které požadavky, které Service Fabric se vrátí k původní hello aplikace toohello předchozí verze, pokud během upgradu došlo k selhání.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-167">Finally, set hello **UpgradeFailureAction** too**rollback**, which requests that Service Fabric rolls back hello application toohello previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="bfa3f-168">Nyní můžete spustit upgradu aplikace hello pomocí hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) rutiny:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-168">You can now start hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="bfa3f-169">Všimněte si, že název aplikace hello je hello stejné jako hello nasadili v1.0.0 název aplikace (fabric: / WordCount).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-169">Note that hello application name is hello same as hello previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="bfa3f-170">Service Fabric používá tento název tooidentify aplikaci, pro kterou je získávání upgradovat.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-170">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="bfa3f-171">Pokud jste nastavili hello vypršení časových limitů toobe příliš krátký, můžete se setkat chybová zpráva o vypršení časového limitu, stavy hello problém.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-171">If you set hello time-outs toobe too short, you might encounter a time-out failure message that states hello problem.</span></span> <span data-ttu-id="bfa3f-172">Odkazovat příliš[řešení potíží s aplikací upgrady](service-fabric-application-upgrade-troubleshooting.md), nebo zvyšte hello vypršení časových limitů.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-172">Refer too[Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase hello time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="bfa3f-173">Krok 4: Průběh upgradu zkontrolujte</span><span class="sxs-lookup"><span data-stu-id="bfa3f-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="bfa3f-174">Průběh upgradu aplikace můžete monitorovat pomocí [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), nebo pomocí hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) rutiny:</span><span class="sxs-lookup"><span data-stu-id="bfa3f-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="bfa3f-175">Za několik minut, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) rutiny ukazuje, že byly upgradovány všechny upgradu domény (Dokončit).</span><span class="sxs-lookup"><span data-stu-id="bfa3f-175">In a few minutes, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="bfa3f-176">Úloha: Testovací aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="bfa3f-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="bfa3f-177">toowrite vysoce kvalitních služeb, vývojáři potřebovat toobe možné tooinduce nespolehlivé infrastruktury chyb tootest hello stabilitu svých služeb.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-177">toowrite high-quality services, developers need toobe able tooinduce unreliable infrastructure faults tootest hello stability of their services.</span></span> <span data-ttu-id="bfa3f-178">Service Fabric nabízí vývojářům hello možnost tooinduce selhání akce a testovací služeb v hello přítomnost chyb pomocí hello testovací scénáře chaos a převzetí služeb při selhání.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-178">Service Fabric gives developers hello ability tooinduce fault actions and test services in hello presence of failures by using hello chaos and failover test scenarios.</span></span>  <span data-ttu-id="bfa3f-179">Pročtěte [Úvod toohello selhání Analysis Service](service-fabric-testability-overview.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-179">Read through [Introduction toohello Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-hello-chaos-test-scenario"></a><span data-ttu-id="bfa3f-180">Krok 1: Spuštění hello chaos testovací scénář</span><span class="sxs-lookup"><span data-stu-id="bfa3f-180">Step 1: Run hello chaos test scenario</span></span>
<span data-ttu-id="bfa3f-181">scénáře testu chaos Hello generuje chyby napříč hello celý cluster Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-181">hello chaos test scenario generates faults across hello entire Service Fabric cluster.</span></span> <span data-ttu-id="bfa3f-182">scénář Hello komprimaci chyb obecně vidět přes měsíců nebo let tooa několik hodin.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-182">hello scenario compresses faults generally seen over months or years tooa few hours.</span></span> <span data-ttu-id="bfa3f-183">kombinace Hello prokládaná chyb míru vysokou odolnost vyhledá náročnějších případech, které by jinak vynechat.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-183">hello combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="bfa3f-184">Vítejte v následujícím příkladu spustí hello chaos testovací scénář po dobu 60 minut.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-184">hello following example runs hello chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-hello-failover-test-scenario"></a><span data-ttu-id="bfa3f-185">Krok 2: Spuštění hello scénáře testu převzetí služeb při selhání</span><span class="sxs-lookup"><span data-stu-id="bfa3f-185">Step 2: Run hello failover test scenario</span></span>
<span data-ttu-id="bfa3f-186">převzetí služeb při selhání Hello testování scénář cíle oddíl specifické služby namísto celého clusteru hello a jiných služeb opustí neovlivní.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-186">hello failover test scenario targets a specific service partition instead of hello entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="bfa3f-187">scénář Hello iteruje posloupnost simulované chyb při ověřování služby průběhu obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-187">hello scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="bfa3f-188">Chyby při ověřování služby označuje potíže, které potřebuje další šetření.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="bfa3f-189">testovací převzetí služeb při selhání Hello indukuje pouze jeden selhání současně, jako názvem na rozdíl od toohello chaos testovací scénář, který může být nutné několik chyb.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-189">hello failover test induces only one fault at a time, as opposed toohello chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="bfa3f-190">Vítejte v následujícím příkladu spustí hello testovací převzetí služeb při selhání po dobu 60 minut proti hello fabric: / WordCount/WordCountService služby.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-190">hello following example runs hello failover test for 60 minutes against hello fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="bfa3f-191">Úloha: Odeberte aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="bfa3f-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="bfa3f-192">Odstranění instance nasazené aplikace, odstraňte typ hello zřizovat aplikace z clusteru hello a odebrání balíčku aplikace hello hello úložiště bitových kopií.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-192">You can delete an instance of a deployed application, remove hello provisioned application type from hello cluster, and remove hello application package from hello ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="bfa3f-193">Krok 1: Odebrání instance aplikace</span><span class="sxs-lookup"><span data-stu-id="bfa3f-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="bfa3f-194">Instance aplikace už je potřeba, trvale odstraníte ho pomocí hello [odebrat ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) rutiny.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-194">When an application instance is no longer needed, you can permanently remove it by using hello [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="bfa3f-195">Tím se také automaticky odebere všechny služby patřící toohello aplikace, trvale odebrat všechny služby stavu.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-195">This also automatically removes all services belonging toohello application, permanently removing all service state.</span></span> <span data-ttu-id="bfa3f-196">Tato operace se nedá vrátit a nelze ji obnovit stav aplikace.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-hello-application-type"></a><span data-ttu-id="bfa3f-197">Krok 2: Zrušení registrace typu aplikace hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-197">Step 2: Unregister hello application type</span></span>
<span data-ttu-id="bfa3f-198">Pokud již nepotřebujete konkrétní verzi typ aplikace, zrušení její registrace pomocí hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) rutiny.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-198">When you no longer need a particular version of an application type, unregister it by using hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="bfa3f-199">Zrušení registrace nepoužívá typy verzích využitého prostoru úložiště pomocí balíčku aplikace hello v úložišti bitové kopie hello.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-199">Unregistering unused types releases storage space used by hello application package in hello image store.</span></span> <span data-ttu-id="bfa3f-200">Typ aplikace může být registrace, dokud nejsou žádné aplikace, u ní nebo čekající upgrady aplikací odkazující na jeho instanci.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-hello-application-package"></a><span data-ttu-id="bfa3f-201">Krok 3: Odebrání balíčku aplikace hello</span><span class="sxs-lookup"><span data-stu-id="bfa3f-201">Step 3: Remove hello application package</span></span>
<span data-ttu-id="bfa3f-202">Po zrušení registrace typu aplikace hello balíčku aplikace hello můžete odebrat z úložiště bitových kopií hello pomocí hello [odebrat ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) rutiny.</span><span class="sxs-lookup"><span data-stu-id="bfa3f-202">After hello application type is unregistered, hello application package can be removed from hello image store by using hello [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="bfa3f-203">Další kroky</span><span class="sxs-lookup"><span data-stu-id="bfa3f-203">Next steps</span></span>
[<span data-ttu-id="bfa3f-204">Životní cyklus aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="bfa3f-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="bfa3f-205">Nasazení aplikace</span><span class="sxs-lookup"><span data-stu-id="bfa3f-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="bfa3f-206">Upgrade aplikace</span><span class="sxs-lookup"><span data-stu-id="bfa3f-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="bfa3f-207">Rutiny Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="bfa3f-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

