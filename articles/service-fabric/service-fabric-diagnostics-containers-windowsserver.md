---
title: "aaaAzure Service Fabric kontejnery monitorování a Diagnostika | Microsoft Docs"
description: "Zjistěte, jak toomonitor a diagnostikovat kontejnery orchestrovat na Microsoft Azure Service Fabric na OMS kontejnery řešení."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="a95a7-103">Monitorování systému Windows Server kontejnery s OMS</span><span class="sxs-lookup"><span data-stu-id="a95a7-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="a95a7-104">Řešení kontejnery OMS</span><span class="sxs-lookup"><span data-stu-id="a95a7-104">OMS Containers Solution</span></span>

<span data-ttu-id="a95a7-105">tým služby Operations Management Suite (OMS) Hello publikovali kontejnery řešení pro diagnostiku a monitorování pro kontejnery.</span><span class="sxs-lookup"><span data-stu-id="a95a7-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="a95a7-106">Spolu s jejich Service Fabric řešení je toto řešení nasazení kontejnerů skvělý nástroj toomonitor orchestrovat v Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a95a7-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="a95a7-107">Tady je jednoduchý příklad jaké hello řídicího panelu řešení hello vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="a95a7-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Řídicí panel základní OMS](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="a95a7-109">Shromažďuje taky různé druhy protokoly, které může být dotazována v nástroj pro analýzu protokolu OMS hello, a může být použité toovisualize všechny metriky nebo události generován.</span><span class="sxs-lookup"><span data-stu-id="a95a7-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="a95a7-110">typy Hello protokolu, které byly shromážděny jsou:</span><span class="sxs-lookup"><span data-stu-id="a95a7-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="a95a7-111">ContainerInventory: obsahuje informace o umístění kontejneru, název a obrázků</span><span class="sxs-lookup"><span data-stu-id="a95a7-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="a95a7-112">ContainerImageInventory: informace o nasazené bitové kopie, včetně ID nebo velikosti</span><span class="sxs-lookup"><span data-stu-id="a95a7-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="a95a7-113">ContainerLog: specifické chybové protokoly, protokoly docker (stdout atd.) a ostatní položky</span><span class="sxs-lookup"><span data-stu-id="a95a7-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="a95a7-114">ContainerServiceLog: docker démon příkazy, které byly spuštěny</span><span class="sxs-lookup"><span data-stu-id="a95a7-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="a95a7-115">Výkonu: čítače včetně kontejneru procesoru, paměti, síťového provozu v diskových operací, a vlastní metriky z hello hostiteli počítačů</span><span class="sxs-lookup"><span data-stu-id="a95a7-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="a95a7-116">Tento článek se zabývá hello kroky požadované tooset až monitorování pro váš cluster kontejneru.</span><span class="sxs-lookup"><span data-stu-id="a95a7-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="a95a7-117">toolearn Další informace o řešení kontejnery na OMS, podívejte se na jejich [dokumentaci](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="a95a7-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="a95a7-118">1. Nastavení clusteru Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a95a7-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="a95a7-119">Vytvoření clusteru s podporou pomocí šablony Azure Resource Manager hello najít [zde](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="a95a7-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="a95a7-120">Ujistěte se, že tooadd jedinečný název pracovní prostor OMS.</span><span class="sxs-lookup"><span data-stu-id="a95a7-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="a95a7-121">Tato šablona také výchozí toodeploying cluster ve verzi preview hello sestavení Service Fabric (v255.255), což znamená, že nelze použít v produkčním prostředí a nemůže být upgradovány tooa jinou verzi Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a95a7-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="a95a7-122">Pokud se rozhodnete toouse této šablony pro dlouhodobé nebo produkční použít, změňte číslo hello verze tooa stabilní verze.</span><span class="sxs-lookup"><span data-stu-id="a95a7-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="a95a7-123">Až nastavíte hello clusteru potvrďte nainstalovali hello příslušný certifikát a ujistěte se, že jsou možné tooconnect toohello clusteru.</span><span class="sxs-lookup"><span data-stu-id="a95a7-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="a95a7-124">Potvrďte, že je vaší skupiny prostředků pomocí záhlaví toohello správně nastavit [portál Azure](https://portal.azure.com/) a hledání hello nasazení.</span><span class="sxs-lookup"><span data-stu-id="a95a7-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="a95a7-125">Skupina prostředků Hello by měl obsahovat všechny prostředky hello Service Fabric a také mít řešení Log Analytics, jakož i řešení Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a95a7-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="a95a7-126">Úpravy stávajícího clusteru Service Fabric:</span><span class="sxs-lookup"><span data-stu-id="a95a7-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="a95a7-127">Zkontrolujte, zda je povoleno diagnostiky (Pokud ne, povolit pomocí [aktualizace škálovací sadu virtuálních počítačů hello](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="a95a7-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="a95a7-128">Přidat pracovním prostorem OMS vytvořením "Service Fabric Analytics" řešení prostřednictvím hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="a95a7-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="a95a7-129">Upravit zdroje dat hello hello Service Fabric řešení toopick zálohovat data z hello příslušné tabulky služby Azure Storage (nastavit tak, že WAD) v hello skupinu prostředků, která hello clusteru je v</span><span class="sxs-lookup"><span data-stu-id="a95a7-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="a95a7-130">Přidat agenta hello jako [škálovací sadu virtuálních počítačů toohello rozšíření](/powershell/module/azurerm.compute/add-azurermvmssextension) prostřednictvím prostředí PowerShell nebo prostřednictvím aktualizace hello sada škálování virtuálních počítačů (stejného propojení, jak je uvedeno výše, šablony Resource Manageru hello toomodify)</span><span class="sxs-lookup"><span data-stu-id="a95a7-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="a95a7-131">2. Nasazení kontejneru</span><span class="sxs-lookup"><span data-stu-id="a95a7-131">2. Deploy a container</span></span>

<span data-ttu-id="a95a7-132">Jakmile hello clusteru je připravené a ověříte, že budete mít přístup, nasaďte tooit kontejneru.</span><span class="sxs-lookup"><span data-stu-id="a95a7-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="a95a7-133">Pokud jste zvolili verze preview hello toouse jako sada hello šablony, můžete si také prostudovat nové docker Service Fabric tvoří funkce.</span><span class="sxs-lookup"><span data-stu-id="a95a7-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="a95a7-134">Opatřeny si, že hello poprvé bitovou kopii kontejneru je nasazené tooa clusteru, bude trvat několik minut toodownload hello image v závislosti na jeho velikosti.</span><span class="sxs-lookup"><span data-stu-id="a95a7-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="a95a7-135">3. Přidat řešení kontejnery hello</span><span class="sxs-lookup"><span data-stu-id="a95a7-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="a95a7-136">V hello portálu Azure, vytvořte prostředek kontejnery (v části hello monitorování + správu kategorie) prostřednictvím Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a95a7-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Přidání kontejnery řešení](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="a95a7-138">V kroku vytváření hello požaduje pracovním prostorem OMS.</span><span class="sxs-lookup"><span data-stu-id="a95a7-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="a95a7-139">Vyberte hello ten, který byl vytvořen s nasazením hello výše.</span><span class="sxs-lookup"><span data-stu-id="a95a7-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="a95a7-140">Tento krok přidává řešení kontejnery v rámci pracovní prostor OMS a je automaticky zjišťován agentem OMS hello nasazené šablonou hello.</span><span class="sxs-lookup"><span data-stu-id="a95a7-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="a95a7-141">Hello agent začne shromažďování dat na hello kontejnery procesů v clusteru hello a v asi 10 až 15 minut, měli byste vidět hello řešení světla až s daty jako obrázek hello řídicí panel hello výše.</span><span class="sxs-lookup"><span data-stu-id="a95a7-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="a95a7-142">4. Další kroky</span><span class="sxs-lookup"><span data-stu-id="a95a7-142">4. Next steps</span></span>

<span data-ttu-id="a95a7-143">OMS nabízí různé nástroje v prostoru toomake hello Pokud užitečnější pro vás.</span><span class="sxs-lookup"><span data-stu-id="a95a7-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="a95a7-144">Prozkoumejte hello následující možnosti toocustomize hello řešení tooyour potřeb:</span><span class="sxs-lookup"><span data-stu-id="a95a7-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="a95a7-145">Získat familiarized s hello [vyhledávání a dotazování protokolu](../log-analytics/log-analytics-log-searches.md) funkcím poskytovaným jako součást analýzy protokolů</span><span class="sxs-lookup"><span data-stu-id="a95a7-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="a95a7-146">Konfigurace toopick agenta OMS hello až konkrétních čítačích výkonu (přejděte toohello prostoru domovské > Nastavení > Data > čítačů výkonu systému Windows)</span><span class="sxs-lookup"><span data-stu-id="a95a7-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="a95a7-147">Konfigurace OMS tooset až [automatizované výstrahy](../log-analytics/log-analytics-alerts.md) tooaid pravidla v zjišťování a Diagnostika</span><span class="sxs-lookup"><span data-stu-id="a95a7-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>
