---
title: "Nastavte průběžnou integraci pro Azure mikroslužeb | Microsoft Docs"
description: "Získáte přehled o tom, jak nastavit průběžnou integraci a nasazení pro aplikace Service Fabric pomocí Visual Studio Team Services (VSTS)."
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 76a1e013e824910c7a489e345b6563ae3951378f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a><span data-ttu-id="7a117-103">Nastavit Service Fabric průběžnou integraci a nasazení s Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="7a117-103">Set up Service Fabric continuous integration and deployment with Visual Studio Team Services</span></span>
<span data-ttu-id="7a117-104">Tento článek popisuje postup nastavení průběžnou integraci a nasazení pro aplikaci Azure Service Fabric pomocí Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="7a117-104">This article describes the steps to set up continuous integration and deployment for an Azure Service Fabric application by using Visual Studio Team Services (VSTS).</span></span>

<span data-ttu-id="7a117-105">Tento dokument odráží aktuální procedury a očekává se časem změnit.</span><span class="sxs-lookup"><span data-stu-id="7a117-105">This document reflects the current procedure and is expected to change over time.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7a117-106">Požadavky</span><span class="sxs-lookup"><span data-stu-id="7a117-106">Prerequisites</span></span>
<span data-ttu-id="7a117-107">Abyste mohli začít, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="7a117-107">To get started, follow these steps:</span></span>

1. <span data-ttu-id="7a117-108">Zajistěte, abyste měli přístup k účtu Team Services nebo [vytvořit](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) sami.</span><span class="sxs-lookup"><span data-stu-id="7a117-108">Ensure that you have access to a Team Services account or [create one](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) yourself.</span></span>
2. <span data-ttu-id="7a117-109">Ujistěte se, zda máte přístup k týmovému projektu Team Services nebo [vytvořit](https://www.visualstudio.com/docs/setup-admin/create-team-project) sami.</span><span class="sxs-lookup"><span data-stu-id="7a117-109">Ensure that you have access to a Team Services team project or [create one](https://www.visualstudio.com/docs/setup-admin/create-team-project) yourself.</span></span>
3. <span data-ttu-id="7a117-110">Ujistěte se, že máte cluster Service Fabric, která můžete nasadit aplikace nebo vytvořte jednu pomocí [portál Azure](service-fabric-cluster-creation-via-portal.md), [šablony Azure Resource Manageru](service-fabric-cluster-creation-via-arm.md), nebo [sadyVisualStudio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="7a117-110">Ensure that you have a Service Fabric cluster to which you can deploy your application or create one using the [Azure portal](service-fabric-cluster-creation-via-portal.md), an [Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md), or [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>
4. <span data-ttu-id="7a117-111">Ujistěte se, že jste již vytvořili projekt aplikace Service Fabric (.sfproj).</span><span class="sxs-lookup"><span data-stu-id="7a117-111">Ensure that you have already created a Service Fabric Application (.sfproj) project.</span></span> <span data-ttu-id="7a117-112">Musíte mít projekt, který byl vytvořen nebo upgradovat pomocí Service Fabric SDK 2.1 nebo vyšší (.sfproj soubor by měl obsahovat hodnotu vlastnosti ProjectVersion 1.1 nebo vyšší).</span><span class="sxs-lookup"><span data-stu-id="7a117-112">You must have a project that was created or upgraded with Service Fabric SDK 2.1 or higher (the .sfproj file should contain a ProjectVersion property value of 1.1 or higher).</span></span>

> [!NOTE]
> <span data-ttu-id="7a117-113">Vlastní sestavovací agentů se už nevyžadují.</span><span class="sxs-lookup"><span data-stu-id="7a117-113">Custom build agents are no longer required.</span></span> <span data-ttu-id="7a117-114">Týmové služby hostované agentů je dodávána předinstalované software pro správu clusteru Service Fabric, povolení pro nasazení aplikací přímo z těchto agentů.</span><span class="sxs-lookup"><span data-stu-id="7a117-114">Team Services hosted agents now come pre-installed with Service Fabric cluster management software, allowing for deployment of your applications directly from those agents.</span></span>
> 
> 

## <a name="configure-and-share-your-source-files"></a><span data-ttu-id="7a117-115">Konfigurace a sdílet zdrojové soubory</span><span class="sxs-lookup"><span data-stu-id="7a117-115">Configure and share your source files</span></span>
<span data-ttu-id="7a117-116">První věc, kterou chcete provést je připravit profil publikování pro použití procesu nasazení, který spouští v rámci Team Services.</span><span class="sxs-lookup"><span data-stu-id="7a117-116">The first thing you want to do is prepare a publish profile for use by the deployment process that executes within Team Services.</span></span>  <span data-ttu-id="7a117-117">Profil publikování by měl být nakonfigurovaný pro cluster, který jste připravili dříve:</span><span class="sxs-lookup"><span data-stu-id="7a117-117">The publish profile should be configured to target the cluster that you've previously prepared:</span></span>

1. <span data-ttu-id="7a117-118">Vyberte profil publikování v rámci projektu aplikace, kterou chcete použít pro pracovní postup nepřetržité integrace.</span><span class="sxs-lookup"><span data-stu-id="7a117-118">Choose a publish profile within your Application project that you want to use for your continuous integration workflow.</span></span> <span data-ttu-id="7a117-119">Postupujte podle [publikovat pokyny](service-fabric-publish-app-remote-cluster.md) o tom, jak publikovat aplikaci do vzdáleného clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-119">Follow the [publish instructions](service-fabric-publish-app-remote-cluster.md) on how to publish an application to a remote cluster.</span></span> <span data-ttu-id="7a117-120">Nemusíte ve skutečnosti Přestože publikování aplikace.</span><span class="sxs-lookup"><span data-stu-id="7a117-120">You don't actually need to publish your application though.</span></span> <span data-ttu-id="7a117-121">Můžete kliknout na **Uložit** hypertextový odkaz v dialogovém okně publikování, když jste správně nakonfigurovali věcí.</span><span class="sxs-lookup"><span data-stu-id="7a117-121">You can click the **Save** hyperlink in the publish dialog once you have configured things appropriately.</span></span>
2. <span data-ttu-id="7a117-122">Pokud chcete, aby vaše aplikace k upgradu pro každé nasazení, který se vyskytuje v Team Services, budete chtít nakonfigurovat profil publikování povolit upgrade.</span><span class="sxs-lookup"><span data-stu-id="7a117-122">If you want your application to be upgraded for each deployment that occurs within Team Services, you want to configure the publish profile to enable upgrade.</span></span> <span data-ttu-id="7a117-123">Ve stejném dialogové okno publikování použitým v kroku 1, ujistěte se, že **upgradu aplikace** je zaškrtnuté políčko.</span><span class="sxs-lookup"><span data-stu-id="7a117-123">In the same publish dialog used in step 1, ensure that the **Upgrade the Application** checkbox is checked.</span></span>  <span data-ttu-id="7a117-124">Další informace o [konfigurace dalších nastavení upgradu](service-fabric-visualstudio-configure-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="7a117-124">Learn more about [configuring additional upgrade settings](service-fabric-visualstudio-configure-upgrade.md).</span></span> <span data-ttu-id="7a117-125">Klikněte **Uložit** hypertextový odkaz na Uložit nastavení do profilu publikování.</span><span class="sxs-lookup"><span data-stu-id="7a117-125">Click the **Save** hyperlink to save the settings to the publish profile.</span></span>
3. <span data-ttu-id="7a117-126">Ujistěte se, že jste uložili změny pro profil publikování a zrušení dialogové okno publikování.</span><span class="sxs-lookup"><span data-stu-id="7a117-126">Ensure that you've saved your changes to the publish profile and cancel the publish dialog.</span></span>
4. <span data-ttu-id="7a117-127">Nyní je čas [sdílet zdrojové soubory vašeho projektu aplikace](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) s Team Services.</span><span class="sxs-lookup"><span data-stu-id="7a117-127">Now it's time to [share your Application project source files](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) with Team Services.</span></span> <span data-ttu-id="7a117-128">Jakmile zdrojové soubory jsou přístupné v Team Services, nyní se můžete přesunout další krok generování sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-128">Once your source files are accessible in Team Services, you can now move on to the next step of generating builds.</span></span> 

## <a name="create-a-build-definition"></a><span data-ttu-id="7a117-129">Vytvořit definici sestavení</span><span class="sxs-lookup"><span data-stu-id="7a117-129">Create a build definition</span></span>
<span data-ttu-id="7a117-130">Definice sestavení Team Services popisuje pracovní postup, který se skládá ze sady kroky sestavení, které jsou prováděny postupně.</span><span class="sxs-lookup"><span data-stu-id="7a117-130">A Team Services build definition describes a workflow that is composed of a set of build steps that are executed sequentially.</span></span> <span data-ttu-id="7a117-131">K vytvoření balíčku aplikace Service Fabric a artefaktů, které lze použít k nasazení aplikace je cílem definici sestavení, kterou vytváříte.</span><span class="sxs-lookup"><span data-stu-id="7a117-131">The goal of the build definition that you are creating is to produce a Service Fabric application package, and other artifacts, that can be used to deploy the application.</span></span> <span data-ttu-id="7a117-132">Další informace o Team Services [sestavení definice](https://www.visualstudio.com/docs/build/define/create).</span><span class="sxs-lookup"><span data-stu-id="7a117-132">Learn more about Team Services [build definitions](https://www.visualstudio.com/docs/build/define/create).</span></span>

### <a name="create-a-definition-from-the-build-template"></a><span data-ttu-id="7a117-133">Vytvoření definice z šablony sestavení</span><span class="sxs-lookup"><span data-stu-id="7a117-133">Create a definition from the build template</span></span>
1. <span data-ttu-id="7a117-134">Otevřete váš týmový projekt v sadě Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="7a117-134">Open your team project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="7a117-135">Vyberte **sestavení** kartě.</span><span class="sxs-lookup"><span data-stu-id="7a117-135">Select the **Build** tab.</span></span>
3. <span data-ttu-id="7a117-136">Vyberte zeleným  **+**  přihlásit k vytvoření nové definice sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-136">Select the green **+** sign to create a new build definition.</span></span>
4. <span data-ttu-id="7a117-137">V dialogovém okně, které se otevře, vyberte **aplikace Azure Service Fabric** v rámci **sestavení** kategorie šablony.</span><span class="sxs-lookup"><span data-stu-id="7a117-137">In the dialog that opens, select **Azure Service Fabric Application** within the **Build** template category.</span></span>
5. <span data-ttu-id="7a117-138">Vyberte **Další**.</span><span class="sxs-lookup"><span data-stu-id="7a117-138">Select **Next**.</span></span>
6. <span data-ttu-id="7a117-139">Vyberte úložiště a větve přidružená aplikace Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="7a117-139">Select the repository and branch associated with your Service Fabric application.</span></span>
7. <span data-ttu-id="7a117-140">Vyberte fronty agenta, kterou chcete použít.</span><span class="sxs-lookup"><span data-stu-id="7a117-140">Select the agent queue you wish to use.</span></span> <span data-ttu-id="7a117-141">Hostovaní agenti jsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="7a117-141">Hosted agents are supported.</span></span>
8. <span data-ttu-id="7a117-142">Vyberte **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="7a117-142">Select **Create**.</span></span>
9. <span data-ttu-id="7a117-143">Uložit definici sestavení a zadejte název.</span><span class="sxs-lookup"><span data-stu-id="7a117-143">Save the build definition and provide a name.</span></span>
10. <span data-ttu-id="7a117-144">Následující odstavce je uveden popis kroků vygenerované šablony:</span><span class="sxs-lookup"><span data-stu-id="7a117-144">The following paragraph is a description of the build steps generated by the template:</span></span>

| <span data-ttu-id="7a117-145">Krok sestavení</span><span class="sxs-lookup"><span data-stu-id="7a117-145">Build step</span></span> | <span data-ttu-id="7a117-146">Popis</span><span class="sxs-lookup"><span data-stu-id="7a117-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7a117-147">Obnovení NuGet</span><span class="sxs-lookup"><span data-stu-id="7a117-147">NuGet restore</span></span> |<span data-ttu-id="7a117-148">Obnoví balíčky NuGet pro řešení.</span><span class="sxs-lookup"><span data-stu-id="7a117-148">Restores the NuGet packages for the solution.</span></span> |
| <span data-ttu-id="7a117-149">Vytvoření řešení \*.sln</span><span class="sxs-lookup"><span data-stu-id="7a117-149">Build solution \*.sln</span></span> |<span data-ttu-id="7a117-150">Sestaví celé řešení.</span><span class="sxs-lookup"><span data-stu-id="7a117-150">Builds the entire solution.</span></span> |
| <span data-ttu-id="7a117-151">Vytvoření řešení \*.sfproj</span><span class="sxs-lookup"><span data-stu-id="7a117-151">Build solution \*.sfproj</span></span> |<span data-ttu-id="7a117-152">Generuje balíček aplikace Service Fabric, který se používá k nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="7a117-152">Generates the Service Fabric application package that is used to deploy the application.</span></span> <span data-ttu-id="7a117-153">Musí být v adresáři artefaktů sestavení je zadat umístění balíčku aplikace.</span><span class="sxs-lookup"><span data-stu-id="7a117-153">The application package location is specified to be within the build's artifact directory.</span></span> |
| <span data-ttu-id="7a117-154">Aktualizace verze aplikace Service Fabric</span><span class="sxs-lookup"><span data-stu-id="7a117-154">Update Service Fabric App Versions</span></span> |<span data-ttu-id="7a117-155">Aktualizace hodnoty verze součástí souborů manifestu balíčku aplikace umožňující podpora upgradu.</span><span class="sxs-lookup"><span data-stu-id="7a117-155">Updates the version values contained in the application package's manifest files to allow for upgrade support.</span></span> <span data-ttu-id="7a117-156">Najdete v článku [stránky dokumentace, která úloha](https://go.microsoft.com/fwlink/?LinkId=820529) Další informace.</span><span class="sxs-lookup"><span data-stu-id="7a117-156">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> |
| <span data-ttu-id="7a117-157">Kopírování souborů</span><span class="sxs-lookup"><span data-stu-id="7a117-157">Copy Files</span></span> |<span data-ttu-id="7a117-158">Zkopíruje soubory parametry profilu a aplikaci publikovat do artefakty sestavení, který se má používat pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="7a117-158">Copies the publish profile and application parameters files to the build's artifacts to be consumed for deployment.</span></span> |
| <span data-ttu-id="7a117-159">Publikování artefaktů</span><span class="sxs-lookup"><span data-stu-id="7a117-159">Publish Artifact</span></span> |<span data-ttu-id="7a117-160">Publikuje sestavení artefaktů.</span><span class="sxs-lookup"><span data-stu-id="7a117-160">Publishes the build's artifacts.</span></span> <span data-ttu-id="7a117-161">Umožňuje definici verze artefakty sestavení využívat.</span><span class="sxs-lookup"><span data-stu-id="7a117-161">Allows a release definition to consume the build's artifacts.</span></span> |

### <a name="verify-the-default-set-of-tasks"></a><span data-ttu-id="7a117-162">Ověřte výchozí skupinu úlohy</span><span class="sxs-lookup"><span data-stu-id="7a117-162">Verify the default set of tasks</span></span>
1. <span data-ttu-id="7a117-163">Ověřte **řešení** vstupní pole pro **obnovení NuGet** a **sestavení řešení** kroky sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-163">Verify the **Solution** input field for the **NuGet restore** and **Build solution** build steps.</span></span>  <span data-ttu-id="7a117-164">Ve výchozím nastavení, tyto kroky sestavení spuštění na všechny soubory řešení, které jsou obsaženy v úložišti přidružené.</span><span class="sxs-lookup"><span data-stu-id="7a117-164">By default, these build steps execute upon all solution files that are contained in the associated repository.</span></span>  <span data-ttu-id="7a117-165">Pokud chcete pouze definici sestavení pracovat na jednom z těchto souborů řešení, budete muset explicitně aktualizujte cestu k souboru.</span><span class="sxs-lookup"><span data-stu-id="7a117-165">If you only want the build definition to operate on one of those solution files, you need to explicitly update the path to that file.</span></span>
2. <span data-ttu-id="7a117-166">Ověřte **řešení** vstupní pole pro **balíčku aplikace** kroku sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-166">Verify the **Solution** input field for the **Package application** build step.</span></span>  <span data-ttu-id="7a117-167">Ve výchozím nastavení tento krok sestavení předpokládá, že existuje jenom jedna aplikace Service Fabric projektu (.sfproj) v úložišti.</span><span class="sxs-lookup"><span data-stu-id="7a117-167">By default, this build step assumes only one Service Fabric Application project (.sfproj) exists in the repository.</span></span>  <span data-ttu-id="7a117-168">Pokud máte více tyto soubory do úložiště a chcete cílit pouze jedna je pro tuto definici sestavení, budete muset explicitně aktualizujte cestu k souboru.</span><span class="sxs-lookup"><span data-stu-id="7a117-168">If you have multiple such files in your repository and want to target only one of them for this build definition, you need to explicitly update the path to that file.</span></span>  <span data-ttu-id="7a117-169">Pokud chcete balíček více projektů aplikace v úložišti, budete muset vytvořit další **Visual Studio sestavení** kroky v definici sestavení, každý cílí projekt aplikace.</span><span class="sxs-lookup"><span data-stu-id="7a117-169">If you want to package multiple Application projects in your repository, you need to create additional **Visual Studio Build** steps in the build definition that each target an Application project.</span></span>  <span data-ttu-id="7a117-170">By pak také musíte aktualizovat **argumenty MSBuild** pole pro každý z nich kroky sestavení tak, aby umístění balíčku je jedinečný pro každý z nich.</span><span class="sxs-lookup"><span data-stu-id="7a117-170">You would then also need to update the **MSBuild Arguments** field for each of those build steps so that the package location is unique for each of them.</span></span>
3. <span data-ttu-id="7a117-171">Ověřte nastavení správy verzí definované v **verze aktualizace Service Fabric aplikace** kroku sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-171">Verify the versioning behavior defined in the **Update Service Fabric App Versions** build step.</span></span>  <span data-ttu-id="7a117-172">Ve výchozím nastavení tento krok sestavení připojí číslo sestavení pro všechny verze hodnoty v souborech manifestu balíčku aplikace.</span><span class="sxs-lookup"><span data-stu-id="7a117-172">By default, this build step appends the build number to all version values in the application package's manifest files.</span></span> <span data-ttu-id="7a117-173">Najdete v článku [stránky dokumentace, která úloha](https://go.microsoft.com/fwlink/?LinkId=820529) Další informace.</span><span class="sxs-lookup"><span data-stu-id="7a117-173">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> <span data-ttu-id="7a117-174">To je užitečné pro podporu upgradu vaší aplikace, vzhledem k tomu, že každé nasazení upgradu vyžaduje jinou verzi hodnoty z předchozí nasazení.</span><span class="sxs-lookup"><span data-stu-id="7a117-174">This is useful for supporting upgrade of your application since each upgrade deployment requires different version values from the previous deployment.</span></span> <span data-ttu-id="7a117-175">Pokud nejsou hodláte použít upgradu aplikace v pracovním postupu, zvažte zákaz tento krok sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-175">If you're not intending to use application upgrade in your workflow, you may consider disabling this build step.</span></span> <span data-ttu-id="7a117-176">Musí být zakázáno, pokud chcete vytvořit sestavení, které je možné přepsat stávající aplikace Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="7a117-176">It must be disabled if your intention is to produce a build that can be used to overwrite an existing Service Fabric application.</span></span> <span data-ttu-id="7a117-177">Nasazení se nezdaří, pokud verze aplikace vyprodukované sestavení neodpovídá verzi aplikace v clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-177">The deployment fails if the version of the application produced by the build does not match the version of the application in the cluster.</span></span>
4. <span data-ttu-id="7a117-178">Pokud vaše řešení obsahuje projektu .NET Core, je nutné zajistit, že vaše definice sestavení obsahuje krok sestavení, která obnoví závislosti:</span><span class="sxs-lookup"><span data-stu-id="7a117-178">If your solution contains a .NET Core project, you must ensure that your build definition contains a build step that restores the dependencies:</span></span>
   1. <span data-ttu-id="7a117-179">Vyberte **krok sestavení přidat...** .</span><span class="sxs-lookup"><span data-stu-id="7a117-179">Select **Add build step...**.</span></span>
   2. <span data-ttu-id="7a117-180">Vyhledejte **příkazového řádku** v rámci kartě nástrojů a klikněte na jeho tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="7a117-180">Locate the **Command-Line** task within the Utility tab and click its Add button.</span></span>
   3. <span data-ttu-id="7a117-181">Úkolu vstupní pole, použijte následující hodnoty:</span><span class="sxs-lookup"><span data-stu-id="7a117-181">For the task's input fields, use the following values:</span></span>
   4. <span data-ttu-id="7a117-182">Nástroj: dotnet.</span><span class="sxs-lookup"><span data-stu-id="7a117-182">Tool: dotnet</span></span>
   5. <span data-ttu-id="7a117-183">Argumenty: obnovení</span><span class="sxs-lookup"><span data-stu-id="7a117-183">Arguments: restore</span></span>
   6. <span data-ttu-id="7a117-184">Přetáhněte úlohu tak, aby se okamžitě po **obnovení NuGet** krok.</span><span class="sxs-lookup"><span data-stu-id="7a117-184">Drag the task so that it is immediately after the **NuGet restore** step.</span></span>
5. <span data-ttu-id="7a117-185">Uložte změny, které jste udělali na definici sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-185">Save any changes you've made to the build definition.</span></span>

### <a name="try-it"></a><span data-ttu-id="7a117-186">Vyzkoušet</span><span class="sxs-lookup"><span data-stu-id="7a117-186">Try it</span></span>
<span data-ttu-id="7a117-187">Vyberte **fronty sestavení** ruční spuštění sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-187">Select **Queue Build** to manually start a build.</span></span> <span data-ttu-id="7a117-188">Vytvoří také aktivační události nabízené nebo vrácení se změnami.</span><span class="sxs-lookup"><span data-stu-id="7a117-188">Builds also triggers upon push or check-in.</span></span> <span data-ttu-id="7a117-189">Jakmile se ujistíte, že sestavení úspěšně spouští, nyní se můžete přesunout definování definicí verze, která nasadí aplikaci do clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-189">Once you've verified that the build is executing successfully, you can now move on to defining a release definition that deploys your application to a cluster.</span></span>

## <a name="create-a-release-definition"></a><span data-ttu-id="7a117-190">Vytvoření definice verze</span><span class="sxs-lookup"><span data-stu-id="7a117-190">Create a release definition</span></span>
<span data-ttu-id="7a117-191">Verze definice Team Services popisuje pracovní postup, který se skládá z sadu úloh, které jsou prováděny postupně.</span><span class="sxs-lookup"><span data-stu-id="7a117-191">A Team Services release definition describes a workflow that is composed of a set of tasks that are executed sequentially.</span></span> <span data-ttu-id="7a117-192">Cílem definice verze, kterou vytváříte je trvat balíček aplikace a nasadíte ho do clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-192">The goal of the release definition that you are creating is to take an application package and deploy it to a cluster.</span></span> <span data-ttu-id="7a117-193">Při použití společně, definici sestavení a verze definice můžete provést celého pracovního postupu z počínaje zdrojové soubory k konče spuštěné aplikace v clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-193">When used together, the build definition and release definition can execute the entire workflow from starting with source files to ending with a running application in your cluster.</span></span> <span data-ttu-id="7a117-194">Další informace o Team Services [verze definice](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span><span class="sxs-lookup"><span data-stu-id="7a117-194">Learn more about Team Services [release definitions](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span></span>

### <a name="create-a-definition-from-the-release-template"></a><span data-ttu-id="7a117-195">Vytvoření definice z šablony verze</span><span class="sxs-lookup"><span data-stu-id="7a117-195">Create a definition from the release template</span></span>
1. <span data-ttu-id="7a117-196">Otevřete projekt v sadě Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="7a117-196">Open your project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="7a117-197">Vyberte **verze** kartě.</span><span class="sxs-lookup"><span data-stu-id="7a117-197">Select the **Release** tab.</span></span>
3. <span data-ttu-id="7a117-198">Vyberte zeleným  **+**  přihlásit a vytvořte novou definici verze vyberte **vytvořit verze definice** v nabídce.</span><span class="sxs-lookup"><span data-stu-id="7a117-198">Select the green **+** sign to create a new release definition and select **Create release definition** in the menu.</span></span>
4. <span data-ttu-id="7a117-199">V dialogovém okně, které se otevře, vyberte **Azure Service Fabric nasazení** v rámci **nasazení** kategorie šablony.</span><span class="sxs-lookup"><span data-stu-id="7a117-199">In the dialog that opens, select **Azure Service Fabric Deployment** within the **Deployment** template category.</span></span>
5. <span data-ttu-id="7a117-200">Vyberte **Další**.</span><span class="sxs-lookup"><span data-stu-id="7a117-200">Select **Next**.</span></span>
6. <span data-ttu-id="7a117-201">Vyberte definici sestavení, které chcete použít jako zdroj této verze definice.</span><span class="sxs-lookup"><span data-stu-id="7a117-201">Select the build definition you want to use as the source of this release definition.</span></span>  <span data-ttu-id="7a117-202">Verze definice odkazuje artefaktů, které byly vytvořeny podle definice vybrané sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-202">The release definition references the artifacts that were produced by the selected build definition.</span></span>
7. <span data-ttu-id="7a117-203">Zkontrolujte **průběžné nasazování** zaškrtávací políčko, pokud chcete mít Team Services automaticky vytvořit novou verzi a nasadit aplikace Service Fabric vždy, když sestavení se dokončí.</span><span class="sxs-lookup"><span data-stu-id="7a117-203">Check the **Continuous deployment** check box if you wish to have Team Services automatically create a new release and deploy the Service Fabric application whenever a build completes.</span></span>
8. <span data-ttu-id="7a117-204">Vyberte fronty agenta, kterou chcete použít.</span><span class="sxs-lookup"><span data-stu-id="7a117-204">Select the agent queue you wish to use.</span></span> <span data-ttu-id="7a117-205">Hostovaní agenti jsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="7a117-205">Hosted agents are supported.</span></span>
9. <span data-ttu-id="7a117-206">Vyberte **Vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="7a117-206">Select **Create**.</span></span>
10. <span data-ttu-id="7a117-207">Název definice upravte kliknutím na ikonu tužky v horní části stránky.</span><span class="sxs-lookup"><span data-stu-id="7a117-207">Edit the definition name by clicking the pencil icon at the top of the page.</span></span>
11. <span data-ttu-id="7a117-208">Vyberte cluster, do které by měly být aplikace nasazeny z **připojení clusteru** vstupní pole úlohy.</span><span class="sxs-lookup"><span data-stu-id="7a117-208">Select the cluster to which your application should be deployed from the **Cluster Connection** input field of the task.</span></span> <span data-ttu-id="7a117-209">Připojení clusteru poskytuje potřebné informace, které umožňuje úloha nasazení se připojit ke clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-209">The cluster connection provides the necessary information that allows the deployment task to connect to the cluster.</span></span> <span data-ttu-id="7a117-210">Pokud ještě nemáte připojení clusteru pro cluster, vyberte **spravovat** hypertextový odkaz vedle pole, které chcete přidat.</span><span class="sxs-lookup"><span data-stu-id="7a117-210">If you do not yet have a cluster connection for your cluster, select the **Manage** hyperlink next to the field to add one.</span></span> <span data-ttu-id="7a117-211">Na stránce, které se otevře proveďte následující kroky:</span><span class="sxs-lookup"><span data-stu-id="7a117-211">On the page that opens, perform the following steps:</span></span>
    1. <span data-ttu-id="7a117-212">Vyberte **nový koncový bod služby** a pak vyberte **Azure Service Fabric** z nabídky.</span><span class="sxs-lookup"><span data-stu-id="7a117-212">Select **New Service Endpoint** and then select **Azure Service Fabric** from the menu.</span></span>
    2. <span data-ttu-id="7a117-213">Vyberte typ ověřování používá cílem tento koncový bod clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-213">Select the type of authentication being used by the cluster targeted by this endpoint.</span></span>
    3. <span data-ttu-id="7a117-214">Definujte název připojení v **název připojení** pole.</span><span class="sxs-lookup"><span data-stu-id="7a117-214">Define a name for your connection in the **Connection Name** field.</span></span>  <span data-ttu-id="7a117-215">Obvykle byste použili název clusteru.</span><span class="sxs-lookup"><span data-stu-id="7a117-215">Typically, you would use the name of your cluster.</span></span>
    4. <span data-ttu-id="7a117-216">Zadejte adresu URL koncového bodu připojení klienta v **koncový bod clusteru** pole.</span><span class="sxs-lookup"><span data-stu-id="7a117-216">Define the client connection endpoint URL in the **Cluster Endpoint** field.</span></span>  <span data-ttu-id="7a117-217">Příklad: tcp://contoso.westus.cloudapp.azure.com:19000.</span><span class="sxs-lookup"><span data-stu-id="7a117-217">Example: tcp://contoso.westus.cloudapp.azure.com:19000.</span></span>
    5. <span data-ttu-id="7a117-218">Zadání přihlašovacích údajů Azure Active Directory, zadejte pověření, kterou chcete použít pro připojení k clusteru, **uživatelské jméno** a **heslo** pole.</span><span class="sxs-lookup"><span data-stu-id="7a117-218">For Azure Active Directory credentials, define the credentials you want to use to connect to the cluster in the **Username** and **Password** fields.</span></span>
    6. <span data-ttu-id="7a117-219">Pro ověřování pomocí certifikátu, zadejte kódování Base64 souboru certifikátu klienta v **klientský certifikát** pole.</span><span class="sxs-lookup"><span data-stu-id="7a117-219">For Certificate Based authentication, define the Base64 encoding of the client certificate file in the **Client Certificate** field.</span></span>  <span data-ttu-id="7a117-220">Naleznete v nápovědě automaticky otevírané okno na toto pole informace o tom, jak získat tuto hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7a117-220">See the help pop-up on that field for info on how to get that value.</span></span>  <span data-ttu-id="7a117-221">Pokud váš certifikát je chráněný heslem, zadejte heslo do **heslo** pole.</span><span class="sxs-lookup"><span data-stu-id="7a117-221">If your certificate is password-protected, define the password in the **Password** field.</span></span>
    7. <span data-ttu-id="7a117-222">Potvrďte změny kliknutím **OK**.</span><span class="sxs-lookup"><span data-stu-id="7a117-222">Confirm your changes by clicking **OK**.</span></span> <span data-ttu-id="7a117-223">Po přechodu zpět do vaší definice vydání, kliknutím na ikonu aktualizace **připojení clusteru** pole zobrazíte koncový bod, který jste právě přidali.</span><span class="sxs-lookup"><span data-stu-id="7a117-223">After navigating back to your release definition, click the refresh icon on the **Cluster Connection** field to see the endpoint you just added.</span></span>
12. <span data-ttu-id="7a117-224">Uložte definici verze.</span><span class="sxs-lookup"><span data-stu-id="7a117-224">Save the release definition.</span></span>

> [!NOTE]
> <span data-ttu-id="7a117-225">Accounts Microsoft (například @hotmail.com nebo @outlook.com) nejsou podporovány pomocí ověřování Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7a117-225">Microsoft Accounts (for example, @hotmail.com or @outlook.com) are not supported with Azure Active Directory authentication.</span></span>
> 
> 

<span data-ttu-id="7a117-226">Definice, který se vytvoří se skládá z úloh typu **nasazení aplikace Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="7a117-226">The definition that is created consists of one task of type **Service Fabric Application Deployment**.</span></span> <span data-ttu-id="7a117-227">Najdete v článku [stránky dokumentace, která úloha](https://go.microsoft.com/fwlink/?LinkId=820528) Další informace o této úloze.</span><span class="sxs-lookup"><span data-stu-id="7a117-227">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820528) for more information about this task.</span></span>

### <a name="verify-the-template-defaults"></a><span data-ttu-id="7a117-228">Zkontrolujte výchozí nastavení šablony</span><span class="sxs-lookup"><span data-stu-id="7a117-228">Verify the template defaults</span></span>
1. <span data-ttu-id="7a117-229">Ověřte **profil publikování** vstupní pole pro **nasazení aplikace Service Fabric** úloh.</span><span class="sxs-lookup"><span data-stu-id="7a117-229">Verify the **Publish Profile** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="7a117-230">Ve výchozím nastavení odkazuje na toto pole s názvem Cloud.xml, které jsou součástí sestavení artefaktů profil publikování.</span><span class="sxs-lookup"><span data-stu-id="7a117-230">By default, this field references a publish profile named Cloud.xml contained in the build's artifacts.</span></span> <span data-ttu-id="7a117-231">Pokud chcete k odkazování profil publikování jiný nebo pokud sestavení obsahuje několik balíčků aplikace v některé jeho artefakty, budete muset aktualizovat cestu správně.</span><span class="sxs-lookup"><span data-stu-id="7a117-231">If you want to reference a different publish profile or if the build contains multiple application packages in its artifacts, you need to update the path appropriately.</span></span>
2. <span data-ttu-id="7a117-232">Ověřte **balíčku aplikace** vstupní pole pro **nasazení aplikace Service Fabric** úloh.</span><span class="sxs-lookup"><span data-stu-id="7a117-232">Verify the **Application Package** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="7a117-233">Ve výchozím nastavení odkazuje toto pole na výchozí cestu balíčku aplikace použité v šabloně definice sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-233">By default, this field references the default application package path used in the build definition template.</span></span>  <span data-ttu-id="7a117-234">Pokud jste změnili výchozí cestu balíčku aplikace v definici sestavení, budete muset aktualizovat cestu správně zde také.</span><span class="sxs-lookup"><span data-stu-id="7a117-234">If you've modified the default application package path in the build definition, you need to update the path appropriately here as well.</span></span>

### <a name="try-it"></a><span data-ttu-id="7a117-235">Vyzkoušet</span><span class="sxs-lookup"><span data-stu-id="7a117-235">Try it</span></span>
<span data-ttu-id="7a117-236">Vyberte **vytvořit verzi** z **verze** tlačítko nabídky můžete ručně vytvořit verze.</span><span class="sxs-lookup"><span data-stu-id="7a117-236">Select **Create Release** from the **Release** button menu to manually create a release.</span></span> <span data-ttu-id="7a117-237">V dialogovém okně, které se otevře, vyberte sestavení, který chcete na základní verze a potom klikněte na **vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="7a117-237">In the dialog that opens, select the build that you want to base the release on and then click **Create**.</span></span> <span data-ttu-id="7a117-238">Pokud jste povolili průběžné nasazování, verze se vytvoří automaticky po dokončení sestavení definice přidružené sestavení.</span><span class="sxs-lookup"><span data-stu-id="7a117-238">If you enabled continuous deployment, releases will be created automatically when the associated build definition completes a build.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7a117-239">Další kroky</span><span class="sxs-lookup"><span data-stu-id="7a117-239">Next steps</span></span>
<span data-ttu-id="7a117-240">Další informace o průběžnou integraci s aplikací Service Fabric, najdete v následujících článcích:</span><span class="sxs-lookup"><span data-stu-id="7a117-240">To learn more about continuous integration with Service Fabric applications, read the following articles:</span></span>

* [<span data-ttu-id="7a117-241">Dokumentace služby Team domácí</span><span class="sxs-lookup"><span data-stu-id="7a117-241">Team Services documentation home</span></span>](https://www.visualstudio.com/docs/overview)
* [<span data-ttu-id="7a117-242">Sestavení správy v nástroji Team Services</span><span class="sxs-lookup"><span data-stu-id="7a117-242">Build management in Team Services</span></span>](https://www.visualstudio.com/docs/build/overview)
* [<span data-ttu-id="7a117-243">Správy verzí v Team Services</span><span class="sxs-lookup"><span data-stu-id="7a117-243">Release management in Team Services</span></span>](https://www.visualstudio.com/docs/release/overview)

