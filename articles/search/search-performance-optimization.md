---
title: "aspekty výkonu a optimalizace vyhledávání aaaAzure | Microsoft Docs"
description: "Vyladění výkonu Azure Search a nakonfigurujte optimálního škálování"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: 725149ba32773ab6b4c9d4b441424aba78db7c42
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="8d663-103">Aspekty výkonu a optimalizace Azure Search</span><span class="sxs-lookup"><span data-stu-id="8d663-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="8d663-104">Skvělé vyhledáváním je klíče toosuccess pro mnoho mobilních a webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="8d663-104">A great search experience is a key toosuccess for many mobile and web applications.</span></span> <span data-ttu-id="8d663-105">Z nemovitosti ovlivní tooused car tržišť tooonline katalogů, rychlé vyhledávání a relevantní výsledky zkušeností zákazníků se hello.</span><span class="sxs-lookup"><span data-stu-id="8d663-105">From real estate, tooused car marketplaces tooonline catalogs, fast search and relevant results will affect hello customer experience.</span></span> <span data-ttu-id="8d663-106">Tento dokument je určený toohelp zjistit osvědčené postupy pro jak tooget hello naplno Azure Search, zejména pro pokročilé scénáře s pokročilé požadavky pro škálovatelnost, podpora více jazyků nebo vlastní hodnocení.</span><span class="sxs-lookup"><span data-stu-id="8d663-106">This document is intended toohelp you discover best practices for how tooget hello most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="8d663-107">Kromě toho tento dokument popisuje internals a popisuje přístupy, které efektivně fungoval v aplikacích reálného zákazníka.</span><span class="sxs-lookup"><span data-stu-id="8d663-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="8d663-108">Výkonu a škálování optimalizace pro vyhledávací služby</span><span class="sxs-lookup"><span data-stu-id="8d663-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="8d663-109">Snažíme se všechny moduly používané toosearch například Bing a Google a hello vysoký výkon, které nabízejí.</span><span class="sxs-lookup"><span data-stu-id="8d663-109">We are all used toosearch engines such as Bing and Google and hello high performance they offer.</span></span>  <span data-ttu-id="8d663-110">Výsledkem je když zákazníci používají webovým hledání nebo mobilních aplikací, bude očekávané podobné výkonové charakteristiky.</span><span class="sxs-lookup"><span data-stu-id="8d663-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="8d663-111">Při optimalizaci výkonu vyhledávání, jeden z přístupů nejlepší hello je toofocus na latenci, což je hello doba, jakou dotazu trvat toocomplete a vrátí výsledky.</span><span class="sxs-lookup"><span data-stu-id="8d663-111">When optimizing for search performance, one of hello best approaches is toofocus on latency, which is hello time a query takes toocomplete and return results.</span></span>  <span data-ttu-id="8d663-112">Při optimalizaci pro vyhledávací latence je důležité pro:</span><span class="sxs-lookup"><span data-stu-id="8d663-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="8d663-113">Vyberte cílovou latencí (nebo maximální množství času), aby typické vyhledávací žádost neměla překročit toocomplete.</span><span class="sxs-lookup"><span data-stu-id="8d663-113">Pick a target latency (or maximum amount of time) that a typical search request should take toocomplete.</span></span>
2. <span data-ttu-id="8d663-114">Vytvoření a otestování skutečné pracovní zátěže proti služby vyhledávání prostřednictvím realistické datovou sadu toomeasure tyto rychlosti latence.</span><span class="sxs-lookup"><span data-stu-id="8d663-114">Create and test a real workload against your search service with a realistic dataset toomeasure these latency rates.</span></span>
3. <span data-ttu-id="8d663-115">Spustit s nízkou počet dotazů za sekundu (QPS) a pokračovat číslo hello tooincrease provést v hello testu, dokud latence klesne pod hello dotazů hello definované cílovou latencí.</span><span class="sxs-lookup"><span data-stu-id="8d663-115">Start with a low number of queries per second (QPS) and continue tooincrease hello number executed in hello test until hello query latency drops below hello defined target latency.</span></span>  <span data-ttu-id="8d663-116">Toto je toohelp důležité srovnávacího testu, které plánujete pro škálování využití růstem vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d663-116">This is an important benchmark toohelp you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="8d663-117">Pokud je to možné, opakovaně používat připojení prostřednictvím protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="8d663-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="8d663-118">Pokud používáte hello .NET SDK služby Azure Search, znamená to, by měl znovu použít instanci nebo [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance a pokud používáte hello REST API, by měl znovu použít jeden HttpClient.</span><span class="sxs-lookup"><span data-stu-id="8d663-118">If you are using hello Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using hello REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="8d663-119">Při vytváření těchto testovací úlohy, nejsou některé vlastnosti tookeep Azure Search v paměti:</span><span class="sxs-lookup"><span data-stu-id="8d663-119">While creating these test workloads, there are some characteristics of Azure Search tookeep in mind:</span></span>

1. <span data-ttu-id="8d663-120">Je možné toopush mnoho vyhledávací dotazy najednou, že bude přetížena hello prostředky, které jsou k dispozici ve službě Azure Search.</span><span class="sxs-lookup"><span data-stu-id="8d663-120">It is possible toopush so many search queries at one time, that hello resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="8d663-121">Pokud k tomu dojde, zobrazí se kódy odpovědí HTTP 503.</span><span class="sxs-lookup"><span data-stu-id="8d663-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="8d663-122">Z tohoto důvodu je nejlepší toostart pomocí různých rozsahů vyhledávání požadavky toosee hello rozdíly v latence sazby jako přidáte další požadavky hledání.</span><span class="sxs-lookup"><span data-stu-id="8d663-122">For this reason, it is best toostart with various ranges of search requests toosee hello differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="8d663-123">Odesílání obsahu tooAzure, které ovlivní vyhledávání hello celkový výkon a latence hello službu Azure Search.</span><span class="sxs-lookup"><span data-stu-id="8d663-123">Uploading of content tooAzure Search will impact hello overall performance and latency of hello Azure Search service.</span></span>  <span data-ttu-id="8d663-124">Pokud očekáváte toosend dat při provádění hledání uživatele, je důležité tootake tímto zatížením do účtu v testy.</span><span class="sxs-lookup"><span data-stu-id="8d663-124">If you expect toosend data while users are performing searches, it is important tootake this workload into account in your tests.</span></span>
3. <span data-ttu-id="8d663-125">Ne každý vyhledávací dotaz provede na hello stejné úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="8d663-125">Not every search query will perform at hello same performance levels.</span></span>  <span data-ttu-id="8d663-126">Například dokument vyhledávání nebo vyhledávání návrhu bude obvykle rychlejší než dotaz s velký počet omezující vlastnosti a filtry.</span><span class="sxs-lookup"><span data-stu-id="8d663-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="8d663-127">Je nejlepší hello tootake různé dotazy, které očekáváte, že toosee do účet při vytváření testů.</span><span class="sxs-lookup"><span data-stu-id="8d663-127">It is best tootake hello various queries you expect toosee into account when building your tests.</span></span>  
4. <span data-ttu-id="8d663-128">Varianta požadavky search je důležité, protože pokud průběžně provést hello stejné vyhledávat požadavky, ukládání do mezipaměti dat bude počáteční toomake výkonu vypadat lepší, než je může s dotazem více různorodých nastavit.</span><span class="sxs-lookup"><span data-stu-id="8d663-128">Variation of search requests is important because if you continually execute hello same search requests, caching of data will start toomake performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="8d663-129">[Visual Studio zátěžové testování](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) je skutečně dobře tooperform vaše srovnávacího testu testuje jako umožňuje požadavky tooexecute HTTP jako potřebovali byste pro provádění dotazy pro Azure Search a umožňuje paralelního zpracování požadavků.</span><span class="sxs-lookup"><span data-stu-id="8d663-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way tooperform your benchmark tests as it allows you tooexecute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="8d663-130">Škálování Azure Search sazby vysoké dotazu a omezení požadavků</span><span class="sxs-lookup"><span data-stu-id="8d663-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="8d663-131">Když obdrželi příliš mnoho požadavků omezenému nebo překročit sazby latence cílový z dotazu zvýšené zatížení, můžete si prohlédnout toodecrease latence sazby jedním ze dvou způsobů:</span><span class="sxs-lookup"><span data-stu-id="8d663-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look toodecrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="8d663-132">**Zvýšení replik:** replika je jako kopii dat umožňuje Azure Search tooload vyrovnávat požadavky proti hello více kopií.</span><span class="sxs-lookup"><span data-stu-id="8d663-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search tooload balance requests against hello multiple copies.</span></span>  <span data-ttu-id="8d663-133">Všechny Vyrovnávání zatížení a replikace dat mezi replik spravuje Azure Search a upravíte hello počet replik přidělené pro vaši službu kdykoli.</span><span class="sxs-lookup"><span data-stu-id="8d663-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter hello number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="8d663-134">Můžete přidělit too12 replik ve standardní službu vyhledávání a 3 replik v základní vyhledávací službu.</span><span class="sxs-lookup"><span data-stu-id="8d663-134">You can allocate up too12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="8d663-135">Repliky mohou být upravena buď z hello [portál Azure](search-create-service-portal.md) nebo [prostředí PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="8d663-135">Replicas can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="8d663-136">**Zvýšení úrovně vyhledávání:** vyhledávání systému Azure se dodává [počet vrstev](https://azure.microsoft.com/pricing/details/search/) a každý z těchto úrovní nabízí různé úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="8d663-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="8d663-137">V některých případech může mít mnoho dotazy této hello vrstvě, jsou na neposkytuje počty dostatečně nízkou latencí, i v případě, že repliky podle toho se limit.  V takovém případě můžete tooconsider využití jeden z vyšší úrovně vyhledávání hello například hello Azure Search S3 vrstvy, který skvěle hodí pro scénáře s velkým počtem dokumentů a velmi vysoké dotazu úlohy.</span><span class="sxs-lookup"><span data-stu-id="8d663-137">In some cases, you may have so many queries that hello tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.  In this case, you may want tooconsider leveraging one of hello higher search tiers such as hello Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="8d663-138">Škálování Azure Search pomalé jednotlivých dotazů</span><span class="sxs-lookup"><span data-stu-id="8d663-138">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="8d663-139">Z jednoho dotazu trvá příliš dlouho toocomplete je další důvod, proč může být pomalé latence sazby.</span><span class="sxs-lookup"><span data-stu-id="8d663-139">Another reason why latency rates can be slow is from a single query taking too long toocomplete.</span></span>  <span data-ttu-id="8d663-140">V takovém případě přidání repliky nebude zlepšit latenci sazby.</span><span class="sxs-lookup"><span data-stu-id="8d663-140">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="8d663-141">Pro tento případ existují dvě možnosti k dispozici:</span><span class="sxs-lookup"><span data-stu-id="8d663-141">For this case there are two options available:</span></span>

1. <span data-ttu-id="8d663-142">**Zvýšit oddíly** oddíl je mechanismus pro rozdělení dat mezi další prostředky.</span><span class="sxs-lookup"><span data-stu-id="8d663-142">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="8d663-143">Z tohoto důvodu při přidat druhý oddíl získá vaše data rozdělit na dvě.</span><span class="sxs-lookup"><span data-stu-id="8d663-143">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="8d663-144">Třetí oddíl rozdělí indexu na tři atd.  To má také hello účinek, že v některých případech pomalé dotazy bude rychlejší kvůli toohello paralelizace výpočtu.</span><span class="sxs-lookup"><span data-stu-id="8d663-144">A third partition splits your index into three, etc.  This also has hello effect that in some cases, slow queries will perform faster due toohello parallelization of computation.</span></span>  <span data-ttu-id="8d663-145">Existuje několik příkladů kde jsme viděli tento paralelizace velmi dobře fungují s dotazy, které mají nízkou selektivitu dotazy.</span><span class="sxs-lookup"><span data-stu-id="8d663-145">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="8d663-146">Tento postup se skládá z dotazy, které odpovídají mnoho dokumenty nebo při používání omezujících vlastností musí tooprovide počty přes velké počty dokumentů.</span><span class="sxs-lookup"><span data-stu-id="8d663-146">This consists of queries that match many documents or when faceting needs tooprovide counts over large numbers of documents.</span></span>  <span data-ttu-id="8d663-147">Vzhledem k tomu, že je, že mnoho výpočtu tooscore hello důležitosti hello dokumentů nebo toocount hello počty dokumentů, přidání další oddíly může pomoci tooprovide další výpočty.</span><span class="sxs-lookup"><span data-stu-id="8d663-147">Since there is a lot of computation needed tooscore hello relevancy of hello documents or toocount hello numbers of documents, adding extra partitions can help tooprovide additional computation.</span></span>  
   
   <span data-ttu-id="8d663-148">Může být maximálně 12 oddílů ve standardní službu vyhledávání a 1 oddíl v hello základní vyhledávací službu.</span><span class="sxs-lookup"><span data-stu-id="8d663-148">There can be a maximum of 12 partitions in Standard search service and 1 partition in hello basic search service.</span></span>  <span data-ttu-id="8d663-149">Oddíly mohou být upravena buď z hello [portál Azure](search-create-service-portal.md) nebo [prostředí PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="8d663-149">Partitions can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="8d663-150">**Limit vysokou kardinalitou pole:** vysokou kardinalitou pole se skládá z facetable (kategorizovatelné) nebo filtrování pole, které má velký počet jedinečných hodnot a v důsledku toho převezme velké množství prostředků toocompute výsledky.</span><span class="sxs-lookup"><span data-stu-id="8d663-150">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources toocompute results over.</span></span>   <span data-ttu-id="8d663-151">Zkontrolujte například, nastavení produktu ID nebo popisu pole jako facetable (kategorizovatelné) nebo filtrování by pro vysokou kardinalitou protože většina hello hodnoty z toodocument dokumentu jsou jedinečné.</span><span class="sxs-lookup"><span data-stu-id="8d663-151">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of hello values from document toodocument are unique.</span></span> <span data-ttu-id="8d663-152">Pokud je to možné, omezte počet hello pole vysokou kardinalitou.</span><span class="sxs-lookup"><span data-stu-id="8d663-152">Wherever possible, limit hello number of high cardinality fields.</span></span>
3. <span data-ttu-id="8d663-153">**Zvýšení úrovně vyhledávání:** přesunutí nahoru tooa vyšší úroveň Azure Search může být jiný způsob tooimprove výkonu pomalé dotazů.</span><span class="sxs-lookup"><span data-stu-id="8d663-153">**Increase Search Tier:**  Moving up tooa higher Azure Search tier can be another way tooimprove performance of slow queries.</span></span>  <span data-ttu-id="8d663-154">Každý vyšší úroveň také poskytuje rychlejší procesoru a víc paměti, což může mít kladný dopad na výkon dotazů.</span><span class="sxs-lookup"><span data-stu-id="8d663-154">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="8d663-155">Škálování dostupnosti</span><span class="sxs-lookup"><span data-stu-id="8d663-155">Scaling for availability</span></span>
<span data-ttu-id="8d663-156">Repliky nejen snížit latenci dotazu, ale můžete povolit také pro vysokou dostupnost.</span><span class="sxs-lookup"><span data-stu-id="8d663-156">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="8d663-157">S jednu repliku byste měli očekávat pravidelné výpadek z důvodu restartování tooserver po aktualizace softwaru nebo pro další události údržby, které se vyskytnou.</span><span class="sxs-lookup"><span data-stu-id="8d663-157">With a single replica, you should expect periodic downtime due tooserver reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="8d663-158">V důsledku toho je důležité tooconsider Pokud vaše aplikace vyžaduje vysokou dostupnost hledání (dotazy) a také zápisy (indexování událostí).</span><span class="sxs-lookup"><span data-stu-id="8d663-158">As a result, it is important tooconsider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="8d663-159">Služba Azure Search nabízí možnosti SLA na všech hello nabídky placeného vyhledávání s hello následující atributy:</span><span class="sxs-lookup"><span data-stu-id="8d663-159">Azure Search offers SLA options on all hello paid search offerings with hello following attributes:</span></span>

* <span data-ttu-id="8d663-160">2 replik pro vysokou dostupnost úloh jen pro čtení (dotazy)</span><span class="sxs-lookup"><span data-stu-id="8d663-160">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="8d663-161">3 nebo více replik pro vysokou dostupnost úloh pro čtení a zápis (dotazy a indexování)</span><span class="sxs-lookup"><span data-stu-id="8d663-161">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="8d663-162">Další informace o to, navštivte hello [smlouvy o úrovni služeb Azure Search](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="8d663-162">For more details on this, please visit hello [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="8d663-163">Vzhledem k tomu, že repliky jsou kopií vašich dat s více replik umožňuje restartování počítače toodo Azure Search a údržby na jednu repliku současně současně dotazuje toocontinue toobe prováděné vůči hello další repliky.</span><span class="sxs-lookup"><span data-stu-id="8d663-163">Since replicas are copies of your data, having multiple replicas allows Azure Search toodo machine reboots and maintenance against one replica at a time while allowing queries toocontinue toobe executed against hello other replicas.</span></span>  <span data-ttu-id="8d663-164">Z tohoto důvodu je také nutné tooconsider, jak tento výpadek může mít vliv na hello dotazy, které teď máte toobe spustit pro jednu menší kopii dat hello.</span><span class="sxs-lookup"><span data-stu-id="8d663-164">For that reason, you will also need tooconsider how this downtime may impact hello queries that now have toobe executed against one less copy of hello data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="8d663-165">Škálování zeměpisné polohy úloh a zadejte geografická redundance</span><span class="sxs-lookup"><span data-stu-id="8d663-165">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="8d663-166">Pro úlohy, zeměpisné polohy zjistíte, že uživatelé nacházející se daleko od hello datového centra je hostitelem služby Azure Search, budou mít vyšší latence sazby.</span><span class="sxs-lookup"><span data-stu-id="8d663-166">For geo-distributed workloads, you will find that users located far from hello data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="8d663-167">Z tohoto důvodu je často důležité toohave více hledání služeb v oblastech, které jsou v blíže uživatelé toothese blízkosti.</span><span class="sxs-lookup"><span data-stu-id="8d663-167">For this reason, it is often important toohave multiple search services in regions that are in closer proximity toothese users.</span></span>  <span data-ttu-id="8d663-168">Služba Azure Search v oblastech aktuálně neposkytuje metoda automatické geografická replikace indexů Azure Search, ale existují způsoby, které lze použít pomocí kterých můžete nastavit jednoduché tooimplement tento proces a spravovat.</span><span class="sxs-lookup"><span data-stu-id="8d663-168">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple tooimplement and manage.</span></span> <span data-ttu-id="8d663-169">Tyto jsou uvedeny v hello několik dalších částech.</span><span class="sxs-lookup"><span data-stu-id="8d663-169">These are outlined in hello next few sections.</span></span>

<span data-ttu-id="8d663-170">Hello cílem zeměpisné polohy sadu služby vyhledávání je toohave dva nebo více indexů, k dispozici ve dvou nebo více oblastech, kde bude uživatel směrován toohello služby Azure Search, která poskytuje nejnižší latenci hello, jak je vidět v tomto příkladu:</span><span class="sxs-lookup"><span data-stu-id="8d663-170">hello goal of a geo-distributed set of search services is toohave two or more indexes available in two or more regions where a user will be routed toohello Azure Search service that provides hello lowest latency as seen in this example:</span></span>

   ![Mezi – karta služeb podle oblasti][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="8d663-172">Udržování synchronizace dat mezi několika služby vyhledávání systému Azure</span><span class="sxs-lookup"><span data-stu-id="8d663-172">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="8d663-173">Existují dvě možnosti pro zachování vaší distribuované služby vyhledávání synchronizované které se skládají z buď pomocí hello [indexeru pro hledání Azure](search-indexer-overview.md) nebo hello Push rozhraní API (nazývaná také jen tooas hello [REST API služby Azure Search](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="8d663-173">There are two options for keeping your distributed search services in sync which consist of either using hello [Azure Search Indexer](search-indexer-overview.md) or hello Push API (also referred tooas hello [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="8d663-174">Indexery vyhledávání systému Azure</span><span class="sxs-lookup"><span data-stu-id="8d663-174">Azure Search Indexers</span></span>
<span data-ttu-id="8d663-175">Pokud používáte hello Azure Search Indexer, již importujete změny dat z centrální úložiště dat jako databázi SQL Azure nebo Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="8d663-175">If you are using hello Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="8d663-176">Při vytváření nového hledání služby, můžete jednoduše taky vytvořit nové Indexer vyhledávání Azure pro tuto službu této toothis body stejné úložiště.</span><span class="sxs-lookup"><span data-stu-id="8d663-176">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points toothis same datastore.</span></span> <span data-ttu-id="8d663-177">Tímto způsobem vždy, když nové změny začalo hello úložiště dat, potom budou indexovat pomocí hello různé indexery.</span><span class="sxs-lookup"><span data-stu-id="8d663-177">That way, whenever new changes come into hello data store, they will then be indexed by hello various Indexers.</span></span>  

<span data-ttu-id="8d663-178">Tady je příklad, jak by vypadat této architektuře.</span><span class="sxs-lookup"><span data-stu-id="8d663-178">Here is an example of what that architecture would look like.</span></span>

   ![Single – datový zdroj s kombinací služby a distribuované indexeru][2]

### <a name="push-api"></a><span data-ttu-id="8d663-180">Push rozhraní API</span><span class="sxs-lookup"><span data-stu-id="8d663-180">Push API</span></span>
<span data-ttu-id="8d663-181">Pokud používáte hello Push API služby Azure Search příliš[aktualizovat obsah v indexu Azure Search](https://docs.microsoft.com/rest/api/searchservice/update-index), můžete ponechat vaší různé služby vyhledávání synchronizované vynucením změny tooall vyhledávací služby vždy, když je nutná aktualizace.</span><span class="sxs-lookup"><span data-stu-id="8d663-181">If you are using hello Azure Search Push API too[update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes tooall search services whenever an update is required.</span></span>  <span data-ttu-id="8d663-182">Pokud to je důležité toomake zda toohandle případy, kdy služby search tooone aktualizace se nezdaří a jednu nebo více aktualizací úspěšné.</span><span class="sxs-lookup"><span data-stu-id="8d663-182">When doing this it is important toomake sure toohandle cases where an update tooone search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="8d663-183">Využívání Azure Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="8d663-183">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="8d663-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) vám umožní tooroute požadavky toomultiple geograficky umístěné weby, které jsou pak zajišťované více služby vyhledávání systému Azure.</span><span class="sxs-lookup"><span data-stu-id="8d663-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you tooroute requests toomultiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="8d663-185">Jednou z výhod hello Traffic Manager je, že můžete testu tooensure Azure Search, že je k dispozici a směrování služby vyhledávání tooalternate uživatele v případě hello výpadku.</span><span class="sxs-lookup"><span data-stu-id="8d663-185">One advantage of hello Traffic Manager is that it can probe Azure Search tooensure that it is available and route users tooalternate search services in hello event of downtime.</span></span>  <span data-ttu-id="8d663-186">Kromě toho pokud jsou směrování požadavky search prostřednictvím webů Azure, Azure Traffic Manageru můžete tooload vyrovnávání případech, kdy hello web si ale není Azure Search.</span><span class="sxs-lookup"><span data-stu-id="8d663-186">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you tooload balance cases where hello Website is up but not Azure Search.</span></span>  <span data-ttu-id="8d663-187">Tady je příklad jaké hello architekturu, která využívá Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="8d663-187">Here is an example of what hello architecture that leverages Traffic Manager.</span></span>

   ![Mezi – karta služeb podle oblasti, s centrální Traffic Manager][3]

## <a name="monitoring-performance"></a><span data-ttu-id="8d663-189">Sledování výkonu</span><span class="sxs-lookup"><span data-stu-id="8d663-189">Monitoring performance</span></span>
<span data-ttu-id="8d663-190">Služba Azure Search nabízí hello možnost tooanalyze a monitorování hello výkon vaší služby prostřednictvím [Analýza provozu vyhledávání (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="8d663-190">Azure Search offers hello ability tooanalyze and monitor hello performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="8d663-191">Prostřednictvím STA můžete volitelně protokolovat operace hello jednotlivých hledání, jakož i účet úložiště Azure tooan agregovaných metrik, která se dá pak zpracována pro analýzu nebo vizualizována ve službě Power BI.</span><span class="sxs-lookup"><span data-stu-id="8d663-191">Through STA, you can optionally log hello individual search operations as well as aggregated metrics tooan Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="8d663-192">STA metriky můžete zkontrolovat statistiku výkonu tak, jako je například průměrný počet dotazů nebo dobu odezvy na dotazy.</span><span class="sxs-lookup"><span data-stu-id="8d663-192">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="8d663-193">Kromě toho hello operaci protokolování vám umožní toodrill do podrobnosti operace konkrétní hledání.</span><span class="sxs-lookup"><span data-stu-id="8d663-193">In addition, hello operation logging allows you toodrill into details of specific search operations.</span></span>

<span data-ttu-id="8d663-194">STA je cenným nástrojem toounderstand latence sazby z tohoto hlediska Azure Search.</span><span class="sxs-lookup"><span data-stu-id="8d663-194">STA is a valuable tool toounderstand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="8d663-195">Vzhledem k tomu, že metriky výkonu dotazu hello protokolována jsou založené na hello čas dotazu trvá toobe plně zpracovány ve službě Azure Search (od času hello je požadovaný toowhen bude odeslaná), budete moct toouse tento toodetermine Pokud problémy s latencí ze hello služby Azure Search na straně nebo mimo hello služby, například z latence sítě.</span><span class="sxs-lookup"><span data-stu-id="8d663-195">Since hello query performance metrics logged are based on hello time a query takes toobe fully processed in Azure Search (from hello time it is requested toowhen it is sent out), you are able toouse this toodetermine if latency issues are from hello Azure Search service side or outside of hello service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="8d663-196">Další kroky</span><span class="sxs-lookup"><span data-stu-id="8d663-196">Next steps</span></span>
<span data-ttu-id="8d663-197">toolearn Další informace o hello cenové úrovně a omezení služby pro každé z nich, najdete v části [omezení ve službě Azure Search služby](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="8d663-197">toolearn more about hello pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="8d663-198">Navštivte [plánování kapacity](search-capacity-planning.md) toolearn Další informace o oddílu a repliky kombinace.</span><span class="sxs-lookup"><span data-stu-id="8d663-198">Visit [Capacity planning](search-capacity-planning.md) toolearn more about partition and replica combinations.</span></span>

<span data-ttu-id="8d663-199">Pro další přejít k podrobnostem na výkon a toosee některé ukázky jak tooimplement hello optimalizace popsané v tomto článku podívejte se na následující videa hello:</span><span class="sxs-lookup"><span data-stu-id="8d663-199">For more drilldown on performance and toosee some demonstrations of how tooimplement hello optimizations discussed in this article, watch hello following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png
