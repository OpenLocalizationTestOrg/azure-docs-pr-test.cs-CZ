---
title: "Aspekty výkonu a optimalizace Azure Search | Microsoft Docs"
description: "Vyladění výkonu Azure Search a nakonfigurujte optimálního škálování"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: f4e371fc16bc57e6963f1ec51c0ea864fa568f0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/11/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="edc3f-103">Aspekty výkonu a optimalizace Azure Search</span><span class="sxs-lookup"><span data-stu-id="edc3f-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="edc3f-104">Skvělé vyhledáváním je klíčem k úspěchu pro mnoho mobilních a webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="edc3f-104">A great search experience is a key to success for many mobile and web applications.</span></span> <span data-ttu-id="edc3f-105">Z nemovitosti používat car tržišť online katalogů, rychlé vyhledávání a relevantní výsledky ovlivní zkušeností zákazníků.</span><span class="sxs-lookup"><span data-stu-id="edc3f-105">From real estate, to used car marketplaces to online catalogs, fast search and relevant results will affect the customer experience.</span></span> <span data-ttu-id="edc3f-106">Tento dokument je určený pro pomoc zjistíte, že osvědčené postupy pro postup co nejlépe využít Azure Search, zejména pro pokročilé scénáře s sofistikované požadavky pro škálovatelnost, vícejazyčné podpory, nebo vlastní hodnocení.</span><span class="sxs-lookup"><span data-stu-id="edc3f-106">This document is intended to help you discover best practices for how to get the most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="edc3f-107">Kromě toho tento dokument popisuje internals a popisuje přístupy, které efektivně fungoval v aplikacích reálného zákazníka.</span><span class="sxs-lookup"><span data-stu-id="edc3f-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="edc3f-108">Výkonu a škálování optimalizace pro vyhledávací služby</span><span class="sxs-lookup"><span data-stu-id="edc3f-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="edc3f-109">Nemůžeme se používají pro vyhledávací weby, jako je Bing a Google a vysoký výkon, které nabízejí.</span><span class="sxs-lookup"><span data-stu-id="edc3f-109">We are all used to search engines such as Bing and Google and the high performance they offer.</span></span>  <span data-ttu-id="edc3f-110">Výsledkem je když zákazníci používají webovým hledání nebo mobilních aplikací, bude očekávané podobné výkonové charakteristiky.</span><span class="sxs-lookup"><span data-stu-id="edc3f-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="edc3f-111">Optimalizace výkonu vyhledávání, jeden z přístupů nejlepší je soustředit na latenci, což je doby trvání se dokončí a vrátí výsledky dotazu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-111">When optimizing for search performance, one of the best approaches is to focus on latency, which is the time a query takes to complete and return results.</span></span>  <span data-ttu-id="edc3f-112">Při optimalizaci pro vyhledávací latence je důležité pro:</span><span class="sxs-lookup"><span data-stu-id="edc3f-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="edc3f-113">Vybrat cílovou latencí (nebo maximální množství času), typické vyhledávací žádosti by měla být provedena.</span><span class="sxs-lookup"><span data-stu-id="edc3f-113">Pick a target latency (or maximum amount of time) that a typical search request should take to complete.</span></span>
2. <span data-ttu-id="edc3f-114">Vytvoření a otestování skutečné pracovní zátěže proti služby vyhledávání prostřednictvím realistické datová sada k měření tyto rychlosti latence.</span><span class="sxs-lookup"><span data-stu-id="edc3f-114">Create and test a real workload against your search service with a realistic dataset to measure these latency rates.</span></span>
3. <span data-ttu-id="edc3f-115">Spustit s nízkou počet dotazů za sekundu (QPS) a pokračovat tak, abyste provést v testu, dokud latence dotazu klesne pod definované cílovou latencí.</span><span class="sxs-lookup"><span data-stu-id="edc3f-115">Start with a low number of queries per second (QPS) and continue to increase the number executed in the test until the query latency drops below the defined target latency.</span></span>  <span data-ttu-id="edc3f-116">Jde důležité srovnávacího testu při plánování pro škálování růstem vaší aplikace využití.</span><span class="sxs-lookup"><span data-stu-id="edc3f-116">This is an important benchmark to help you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="edc3f-117">Pokud je to možné, opakovaně používat připojení prostřednictvím protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="edc3f-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="edc3f-118">Pokud používáte .NET SDK služby Azure Search, znamená to, by měl znovu použít instanci nebo [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, a pokud používáte rozhraní API REST, jeden HttpClient by měl použít znovu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-118">If you are using the Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using the REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="edc3f-119">Při vytváření těchto testovací úlohy, nejsou některé vlastnosti Azure Search mějte na paměti:</span><span class="sxs-lookup"><span data-stu-id="edc3f-119">While creating these test workloads, there are some characteristics of Azure Search to keep in mind:</span></span>

1. <span data-ttu-id="edc3f-120">Je možné nabízené tak mnoho vyhledávání dotazuje najednou, že bude přetížena prostředky k dispozici ve službě Azure Search.</span><span class="sxs-lookup"><span data-stu-id="edc3f-120">It is possible to push so many search queries at one time, that the resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="edc3f-121">Pokud k tomu dojde, zobrazí se kódy odpovědí HTTP 503.</span><span class="sxs-lookup"><span data-stu-id="edc3f-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="edc3f-122">Z tohoto důvodu je vhodné začít pomocí různých rozsahů vyhledávání žádostí o informace o rozdílech v sazby latence, jak přidat další požadavky search.</span><span class="sxs-lookup"><span data-stu-id="edc3f-122">For this reason, it is best to start with various ranges of search requests to see the differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="edc3f-123">Odesílání obsahu do služby Azure Search ovlivní celkový výkon a latence služby Azure Search.</span><span class="sxs-lookup"><span data-stu-id="edc3f-123">Uploading of content to Azure Search will impact the overall performance and latency of the Azure Search service.</span></span>  <span data-ttu-id="edc3f-124">Pokud očekáváte, že k odesílání dat, zatímco uživatelé fungují hledání, je důležité přihlédnout tímto zatížením v úvahu v testy.</span><span class="sxs-lookup"><span data-stu-id="edc3f-124">If you expect to send data while users are performing searches, it is important to take this workload into account in your tests.</span></span>
3. <span data-ttu-id="edc3f-125">Ne každý vyhledávacího dotazu se provede na stejné úrovni výkonu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-125">Not every search query will perform at the same performance levels.</span></span>  <span data-ttu-id="edc3f-126">Například dokument vyhledávání nebo vyhledávání návrhu bude obvykle rychlejší než dotaz s velký počet omezující vlastnosti a filtry.</span><span class="sxs-lookup"><span data-stu-id="edc3f-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="edc3f-127">Je vhodné provést různé dotazy, které byste měli vidět v úvahu při vytváření testů.</span><span class="sxs-lookup"><span data-stu-id="edc3f-127">It is best to take the various queries you expect to see into account when building your tests.</span></span>  
4. <span data-ttu-id="edc3f-128">Varianta požadavky search je důležité, protože pokud průběžně spustit stejné požadavky search, ukládání dat do mezipaměti se spustí aby výkonu vypadat lépe než ji může s dotazem více různorodých nastaveno.</span><span class="sxs-lookup"><span data-stu-id="edc3f-128">Variation of search requests is important because if you continually execute the same search requests, caching of data will start to make performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="edc3f-129">[Visual Studio zátěžové testování](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) je skutečně vhodný způsob k provedení vaší srovnávacího testu testuje jako umožňuje provést požadavků HTTP, jako byste potřebovali pro spuštění dotazy pro Azure Search a umožňuje paralelního zpracování požadavků.</span><span class="sxs-lookup"><span data-stu-id="edc3f-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way to perform your benchmark tests as it allows you to execute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="edc3f-130">Škálování Azure Search sazby vysoké dotazu a omezení požadavků</span><span class="sxs-lookup"><span data-stu-id="edc3f-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="edc3f-131">Když obdrželi příliš mnoho požadavků omezenému nebo překročit sazby latence cílový z dotazu zvýšené zatížení, můžou se podívat snížení latence sazby v jednom ze dvou způsobů:</span><span class="sxs-lookup"><span data-stu-id="edc3f-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look to decrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="edc3f-132">**Zvýšení replik:** replika je jako kopii dat umožňuje Azure Search načíst vyrovnávat požadavky na více kopií.</span><span class="sxs-lookup"><span data-stu-id="edc3f-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search to load balance requests against the multiple copies.</span></span>  <span data-ttu-id="edc3f-133">Všechny Vyrovnávání zatížení a replikace dat mezi replik spravuje Azure Search a můžete změnit počet replik přidělené pro vaši službu kdykoli.</span><span class="sxs-lookup"><span data-stu-id="edc3f-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter the number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="edc3f-134">Můžete přidělit až 12 replik ve standardní službu vyhledávání a 3 replik v základní vyhledávací službu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-134">You can allocate up to 12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="edc3f-135">Repliky může být buď z upravena [portál Azure](search-create-service-portal.md) nebo [prostředí PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="edc3f-135">Replicas can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="edc3f-136">**Zvýšení úrovně vyhledávání:** vyhledávání systému Azure se dodává [počet vrstev](https://azure.microsoft.com/pricing/details/search/) a každý z těchto úrovní nabízí různé úrovně výkonu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="edc3f-137">V některých případech může mít mnoho dotazy vrstvy, které jsou na neposkytuje počty dostatečně nízkou latencí, i v případě, že repliky podle toho se limit.</span><span class="sxs-lookup"><span data-stu-id="edc3f-137">In some cases, you may have so many queries that the tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.</span></span>  <span data-ttu-id="edc3f-138">Chcete v tomto případě zvažte využití jeden vyšší vyhledávání vrstvami, jako je Azure Search S3 vrstvy, která dobře hodí pro scénáře s velkým počtem dokumentů a velmi vysoké dotazu úlohy.</span><span class="sxs-lookup"><span data-stu-id="edc3f-138">In this case, you may want to consider leveraging one of the higher search tiers such as the Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="edc3f-139">Škálování Azure Search pomalé jednotlivých dotazů</span><span class="sxs-lookup"><span data-stu-id="edc3f-139">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="edc3f-140">Z jednoho dotazu trvá příliš dlouho dokončení je další důvod, proč může být pomalé latence sazby.</span><span class="sxs-lookup"><span data-stu-id="edc3f-140">Another reason why latency rates can be slow is from a single query taking too long to complete.</span></span>  <span data-ttu-id="edc3f-141">V takovém případě přidání repliky nebude zlepšit latenci sazby.</span><span class="sxs-lookup"><span data-stu-id="edc3f-141">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="edc3f-142">Pro tento případ existují dvě možnosti k dispozici:</span><span class="sxs-lookup"><span data-stu-id="edc3f-142">For this case there are two options available:</span></span>

1. <span data-ttu-id="edc3f-143">**Zvýšit oddíly** oddíl je mechanismus pro rozdělení dat mezi další prostředky.</span><span class="sxs-lookup"><span data-stu-id="edc3f-143">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="edc3f-144">Z tohoto důvodu při přidat druhý oddíl získá vaše data rozdělit na dvě.</span><span class="sxs-lookup"><span data-stu-id="edc3f-144">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="edc3f-145">Třetí oddíl rozdělí indexu na tři atd.  To také má za následek, že v některých případech pomalé dotazy bude rychlejší z důvodu paralelizace výpočtu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-145">A third partition splits your index into three, etc.  This also has the effect that in some cases, slow queries will perform faster due to the parallelization of computation.</span></span>  <span data-ttu-id="edc3f-146">Existuje několik příkladů kde jsme viděli tento paralelizace velmi dobře fungují s dotazy, které mají nízkou selektivitu dotazy.</span><span class="sxs-lookup"><span data-stu-id="edc3f-146">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="edc3f-147">Tento postup se skládá dotazů odpovídající mnoho dokumenty nebo při používání omezujících vlastností je třeba počty přes velké počty dokumentů.</span><span class="sxs-lookup"><span data-stu-id="edc3f-147">This consists of queries that match many documents or when faceting needs to provide counts over large numbers of documents.</span></span>  <span data-ttu-id="edc3f-148">Vzhledem k tomu, že existuje mnoho výpočtu skóre důležitosti dokumentů nebo počítat počty dokumentů potřeba, přidání další oddíly může pomoci zajistit další výpočty.</span><span class="sxs-lookup"><span data-stu-id="edc3f-148">Since there is a lot of computation needed to score the relevancy of the documents or to count the numbers of documents, adding extra partitions can help to provide additional computation.</span></span>  
   
   <span data-ttu-id="edc3f-149">Může být maximálně 12 oddílů ve standardní službu vyhledávání a 1 oddíl v základní vyhledávací službu.</span><span class="sxs-lookup"><span data-stu-id="edc3f-149">There can be a maximum of 12 partitions in Standard search service and 1 partition in the basic search service.</span></span>  <span data-ttu-id="edc3f-150">Oddíly mohou být upravena buď z [portál Azure](search-create-service-portal.md) nebo [prostředí PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="edc3f-150">Partitions can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="edc3f-151">**Limit vysokou kardinalitou pole:** vysokou kardinalitou pole se skládá z facetable (kategorizovatelné) nebo filtrování pole, které má velký počet jedinečných hodnot a v důsledku toho trvá velké množství prostředků k výpočtu výsledky přes.</span><span class="sxs-lookup"><span data-stu-id="edc3f-151">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources to compute results over.</span></span>   <span data-ttu-id="edc3f-152">Zkontrolujte například, nastavení produktu ID nebo popisu pole jako facetable (kategorizovatelné) nebo filtrování by pro vysokou kardinalitou protože většina hodnot z dokumentu do dokumentu jsou jedinečné.</span><span class="sxs-lookup"><span data-stu-id="edc3f-152">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of the values from document to document are unique.</span></span> <span data-ttu-id="edc3f-153">Je to možné, omezte počet polí vysokou kardinalitou.</span><span class="sxs-lookup"><span data-stu-id="edc3f-153">Wherever possible, limit the number of high cardinality fields.</span></span>
3. <span data-ttu-id="edc3f-154">**Zvýšení úrovně vyhledávání:** přesun až vyšší úroveň Azure Search může být jiný způsob, jak zlepšit výkon dotazů pomalé.</span><span class="sxs-lookup"><span data-stu-id="edc3f-154">**Increase Search Tier:**  Moving up to a higher Azure Search tier can be another way to improve performance of slow queries.</span></span>  <span data-ttu-id="edc3f-155">Každý vyšší úroveň také poskytuje rychlejší procesoru a víc paměti, což může mít kladný dopad na výkon dotazů.</span><span class="sxs-lookup"><span data-stu-id="edc3f-155">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="edc3f-156">Škálování dostupnosti</span><span class="sxs-lookup"><span data-stu-id="edc3f-156">Scaling for availability</span></span>
<span data-ttu-id="edc3f-157">Repliky nejen snížit latenci dotazu, ale můžete povolit také pro vysokou dostupnost.</span><span class="sxs-lookup"><span data-stu-id="edc3f-157">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="edc3f-158">S jednu repliku byste měli očekávat pravidelné výpadky v důsledku restartování serveru po aktualizace softwaru nebo pro další události údržby, které se vyskytnou.</span><span class="sxs-lookup"><span data-stu-id="edc3f-158">With a single replica, you should expect periodic downtime due to server reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="edc3f-159">V důsledku toho je důležité vzít v úvahu, pokud vaše aplikace vyžaduje vysokou dostupnost hledání (dotazy) a také zápisy (indexování událostí).</span><span class="sxs-lookup"><span data-stu-id="edc3f-159">As a result, it is important to consider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="edc3f-160">Služba Azure Search nabízí možnosti SLA na všech nabídek placeného vyhledávání s následujícími atributy:</span><span class="sxs-lookup"><span data-stu-id="edc3f-160">Azure Search offers SLA options on all the paid search offerings with the following attributes:</span></span>

* <span data-ttu-id="edc3f-161">2 replik pro vysokou dostupnost úloh jen pro čtení (dotazy)</span><span class="sxs-lookup"><span data-stu-id="edc3f-161">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="edc3f-162">3 nebo více replik pro vysokou dostupnost úloh pro čtení a zápis (dotazy a indexování)</span><span class="sxs-lookup"><span data-stu-id="edc3f-162">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="edc3f-163">Další informace o to, najdete [smlouvy o úrovni služeb Azure Search](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="edc3f-163">For more details on this, please visit the [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="edc3f-164">Vzhledem k tomu, že repliky jsou kopií vašich dat, s více replik umožňuje Azure Search na počítač restartování a údržba pro jednu repliku současně současně dotazy pokračujte mají být provedeny u jiných replik.</span><span class="sxs-lookup"><span data-stu-id="edc3f-164">Since replicas are copies of your data, having multiple replicas allows Azure Search to do machine reboots and maintenance against one replica at a time while allowing queries to continue to be executed against the other replicas.</span></span>  <span data-ttu-id="edc3f-165">Z tohoto důvodu bude také nutné vzít v úvahu, jak tento výpadek může mít vliv na dotazy, které teď mají mají být provedeny u jednoho menší kopii dat.</span><span class="sxs-lookup"><span data-stu-id="edc3f-165">For that reason, you will also need to consider how this downtime may impact the queries that now have to be executed against one less copy of the data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="edc3f-166">Škálování zeměpisné polohy úloh a zadejte geografická redundance</span><span class="sxs-lookup"><span data-stu-id="edc3f-166">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="edc3f-167">Pro úlohy, zeměpisné polohy zjistíte, že uživatelé nacházející se daleko od datového centra je hostitelem služby Azure Search, budou mít vyšší latence sazby.</span><span class="sxs-lookup"><span data-stu-id="edc3f-167">For geo-distributed workloads, you will find that users located far from the data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="edc3f-168">Z tohoto důvodu je často důležité, aby byly víc služby vyhledávání v oblastech, které se nacházejí v těsné blízkosti pro tyto uživatele.</span><span class="sxs-lookup"><span data-stu-id="edc3f-168">For this reason, it is often important to have multiple search services in regions that are in closer proximity to these users.</span></span>  <span data-ttu-id="edc3f-169">Služba Azure Search v oblastech aktuálně neposkytuje metoda automatické geografická replikace indexů Azure Search, ale existují některé techniky, které lze použít které může být tento proces snadno implementovat a spravovat.</span><span class="sxs-lookup"><span data-stu-id="edc3f-169">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple to implement and manage.</span></span> <span data-ttu-id="edc3f-170">Tyto jsou uvedeny v následujících částech několik.</span><span class="sxs-lookup"><span data-stu-id="edc3f-170">These are outlined in the next few sections.</span></span>

<span data-ttu-id="edc3f-171">Cílem sady zeměpisné polohy služby vyhledávání je mít dvě nebo více indexů, které jsou k dispozici ve dvou nebo více oblastech, kde bude uživatel směrován na službu Azure Search, která poskytuje nejnižší latenci, jak je vidět v tomto příkladu:</span><span class="sxs-lookup"><span data-stu-id="edc3f-171">The goal of a geo-distributed set of search services is to have two or more indexes available in two or more regions where a user will be routed to the Azure Search service that provides the lowest latency as seen in this example:</span></span>

   ![Mezi – karta služeb podle oblasti][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="edc3f-173">Udržování synchronizace dat mezi několika služby vyhledávání systému Azure</span><span class="sxs-lookup"><span data-stu-id="edc3f-173">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="edc3f-174">Existují dvě možnosti pro zachování vaší distribuované služby vyhledávání synchronizované které se skládají z buď pomocí [indexeru pro hledání Azure](search-indexer-overview.md) nebo rozhraní API Push (také označuje jako [REST API služby Azure Search](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="edc3f-174">There are two options for keeping your distributed search services in sync which consist of either using the [Azure Search Indexer](search-indexer-overview.md) or the Push API (also referred to as the [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="edc3f-175">Indexery vyhledávání systému Azure</span><span class="sxs-lookup"><span data-stu-id="edc3f-175">Azure Search Indexers</span></span>
<span data-ttu-id="edc3f-176">Pokud používáte Azure indexeru pro hledání, jsou již import změny dat z centrální úložiště dat jako databázi SQL Azure nebo Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="edc3f-176">If you are using the Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="edc3f-177">Při vytváření nového hledání služby, můžete jednoduše taky vytvořit nové Indexer vyhledávání Azure pro tuto službu, která odkazuje na tato stejné úložiště.</span><span class="sxs-lookup"><span data-stu-id="edc3f-177">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points to this same datastore.</span></span> <span data-ttu-id="edc3f-178">Tímto způsobem, vždy, když se nové změny do úložiště dat, budou se pak indexovat pomocí různých indexery.</span><span class="sxs-lookup"><span data-stu-id="edc3f-178">That way, whenever new changes come into the data store, they will then be indexed by the various Indexers.</span></span>  

<span data-ttu-id="edc3f-179">Tady je příklad, jak by vypadat této architektuře.</span><span class="sxs-lookup"><span data-stu-id="edc3f-179">Here is an example of what that architecture would look like.</span></span>

   ![Single – datový zdroj s kombinací služby a distribuované indexeru][2]

### <a name="push-api"></a><span data-ttu-id="edc3f-181">Push rozhraní API</span><span class="sxs-lookup"><span data-stu-id="edc3f-181">Push API</span></span>
<span data-ttu-id="edc3f-182">Pokud používáte API služby Azure Search Push na [aktualizovat obsah v indexu Azure Search](https://docs.microsoft.com/rest/api/searchservice/update-index), můžete ponechat vaší různé služby vyhledávání synchronizované vynucením změny všech vyhledávacích služeb vždy, když je nutná aktualizace.</span><span class="sxs-lookup"><span data-stu-id="edc3f-182">If you are using the Azure Search Push API to [update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes to all search services whenever an update is required.</span></span>  <span data-ttu-id="edc3f-183">Pokud to je důležité nezapomeňte zpracování případy, kdy se nezdaří aktualizace jeden vyhledávací služby a jednu nebo více aktualizací úspěšné.</span><span class="sxs-lookup"><span data-stu-id="edc3f-183">When doing this it is important to make sure to handle cases where an update to one search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="edc3f-184">Využívání Azure Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="edc3f-184">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="edc3f-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) umožňuje směrování požadavků na více geograficky umístěné weby, které jsou pak zajišťované více služby vyhledávání systému Azure.</span><span class="sxs-lookup"><span data-stu-id="edc3f-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you to route requests to multiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="edc3f-186">Jednou z výhod Traffic Manager je, že ho probe Azure Search a ujistěte se, že je k dispozici směrovat uživatelé služby alternativní vyhledávání v případě výpadku.</span><span class="sxs-lookup"><span data-stu-id="edc3f-186">One advantage of the Traffic Manager is that it can probe Azure Search to ensure that it is available and route users to alternate search services in the event of downtime.</span></span>  <span data-ttu-id="edc3f-187">Kromě toho pokud jsou směrování požadavky search prostřednictvím webů Azure, Azure Traffic Manager umožňuje můžete načíst vyrovnávání případech, kdy web si ale není Azure Search.</span><span class="sxs-lookup"><span data-stu-id="edc3f-187">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you to load balance cases where the Website is up but not Azure Search.</span></span>  <span data-ttu-id="edc3f-188">Tady je příklad co na architektuře, která využívá Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="edc3f-188">Here is an example of what the architecture that leverages Traffic Manager.</span></span>

   ![Mezi – karta služeb podle oblasti, s centrální Traffic Manager][3]

## <a name="monitoring-performance"></a><span data-ttu-id="edc3f-190">Sledování výkonu</span><span class="sxs-lookup"><span data-stu-id="edc3f-190">Monitoring performance</span></span>
<span data-ttu-id="edc3f-191">Služba Azure Search nabízí možnost analyzovat a monitorovat výkon služby prostřednictvím [Analýza provozu vyhledávání (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="edc3f-191">Azure Search offers the ability to analyze and monitor the performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="edc3f-192">Prostřednictvím STA můžete volitelně protokolovat operace jednotlivých hledání, jakož i agregovaných metrik k účtu Azure Storage, který lze potom zpracována pro analýzu nebo vizualizována ve službě Power BI.</span><span class="sxs-lookup"><span data-stu-id="edc3f-192">Through STA, you can optionally log the individual search operations as well as aggregated metrics to an Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="edc3f-193">STA metriky můžete zkontrolovat statistiku výkonu tak, jako je například průměrný počet dotazů nebo dobu odezvy na dotazy.</span><span class="sxs-lookup"><span data-stu-id="edc3f-193">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="edc3f-194">Kromě toho operaci protokolování umožňuje podrobnostem operace konkrétní hledání.</span><span class="sxs-lookup"><span data-stu-id="edc3f-194">In addition, the operation logging allows you to drill into details of specific search operations.</span></span>

<span data-ttu-id="edc3f-195">STA je cenným nástrojem pochopit latence sazby z tohoto hlediska Azure Search.</span><span class="sxs-lookup"><span data-stu-id="edc3f-195">STA is a valuable tool to understand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="edc3f-196">Vzhledem k tomu, že metriky výkonu dotazu protokolována jsou založená na dobu, kterou dotazem vyžádá mají být plně zpracovány ve službě Azure Search (od okamžiku, kdy je požadavek na odeslání), budete moci použít k určení, pokud jsou problémy s latencí z výpisů na straně služby Azure Search IDE služby, například kvůli latence sítě.</span><span class="sxs-lookup"><span data-stu-id="edc3f-196">Since the query performance metrics logged are based on the time a query takes to be fully processed in Azure Search (from the time it is requested to when it is sent out), you are able to use this to determine if latency issues are from the Azure Search service side or outside of the service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="edc3f-197">Další kroky</span><span class="sxs-lookup"><span data-stu-id="edc3f-197">Next steps</span></span>
<span data-ttu-id="edc3f-198">Další informace o omezení cenové úrovně a služby pro každé z nich najdete v tématu [omezení ve službě Azure Search služby](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="edc3f-198">To learn more about the pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="edc3f-199">Navštivte [plánování kapacity](search-capacity-planning.md) Další informace o oddílu a repliky kombinace.</span><span class="sxs-lookup"><span data-stu-id="edc3f-199">Visit [Capacity planning](search-capacity-planning.md) to learn more about partition and replica combinations.</span></span>

<span data-ttu-id="edc3f-200">Další podrobnosti o výkonu a zobrazit některé předvádění o tom, jak implementovat optimalizace popsané v tomto článku v následujícím videu:</span><span class="sxs-lookup"><span data-stu-id="edc3f-200">For more drilldown on performance and to see some demonstrations of how to implement the optimizations discussed in this article, watch the following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png
