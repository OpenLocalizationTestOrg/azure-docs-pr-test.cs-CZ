---
title: "aaaHow tooimplement Fasetové navigace ve službě Azure Search | Microsoft Docs"
description: "Přidejte tooapplications Fasetové navigace, který integraci se službou Azure Search, hostované cloudové vyhledávací službu v Microsoft Azure."
services: search
documentationcenter: 
author: HeidiSteen
manager: mblythe
editor: 
ms.assetid: cdf98fd4-63fd-4b50-b0b0-835cb08ad4d3
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 3/10/2017
ms.author: heidist
ms.openlocfilehash: c1e6bf9dc55d0044525db79e37d35a50ded5a736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooimplement-faceted-navigation-in-azure-search"></a><span data-ttu-id="ddebb-103">Jak tooimplement Fasetové navigace ve službě Azure Search</span><span class="sxs-lookup"><span data-stu-id="ddebb-103">How tooimplement faceted navigation in Azure Search</span></span>
<span data-ttu-id="ddebb-104">Fasetové navigace je filtrační mechanismus, který poskytuje řízené samotným přejít k podrobnostem navigace ve vyhledávání aplikací.</span><span class="sxs-lookup"><span data-stu-id="ddebb-104">Faceted navigation is a filtering mechanism that provides self-directed drilldown navigation in search applications.</span></span> <span data-ttu-id="ddebb-105">Hello termín "Fasetové navigace, může být obeznámeni, ale pravděpodobně ho před jste použili.</span><span class="sxs-lookup"><span data-stu-id="ddebb-105">hello term 'faceted navigation' may be unfamiliar, but you've probably used it before.</span></span> <span data-ttu-id="ddebb-106">Fasetové navigace jako hello následující příklad ukazuje, není nic jiného než hello kategorií používá toofilter výsledky.</span><span class="sxs-lookup"><span data-stu-id="ddebb-106">As hello following example shows, faceted navigation is nothing more than hello categories used toofilter results.</span></span>

 ![Portál ukázkové úlohy vyhledávání systému Azure][1]

<span data-ttu-id="ddebb-108">Fasetové navigace je toosearch alternativní vstupní bod.</span><span class="sxs-lookup"><span data-stu-id="ddebb-108">Faceted navigation is an alternative entry point toosearch.</span></span> <span data-ttu-id="ddebb-109">Nabízí pohodlný alternativní tootyping komplexní vyhledávacích výrazech ručně.</span><span class="sxs-lookup"><span data-stu-id="ddebb-109">It offers a convenient alternative tootyping complex search expressions by hand.</span></span> <span data-ttu-id="ddebb-110">Omezující vlastnosti můžete najít, co hledáte, a zajistit, že neobdržíte nulové výsledky.</span><span class="sxs-lookup"><span data-stu-id="ddebb-110">Facets can help you find what you're looking for, while ensuring that you don’t get zero results.</span></span> <span data-ttu-id="ddebb-111">Jako vývojář omezující vlastnosti vám umožní vystavit hello nejužitečnější vyhledávací kritéria pro navigace vaše vyhledávání souhrnu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-111">As a developer, facets let you expose hello most useful search criteria for navigating your search corpus.</span></span> <span data-ttu-id="ddebb-112">V aplikacích online prodejní Fasetové navigace je často sestavena značky, oddělení (dětský vcítit), velikost, ceny, oblíbenosti a hodnocení.</span><span class="sxs-lookup"><span data-stu-id="ddebb-112">In online retail applications, faceted navigation is often built over brands, departments (kid’s shoes), size, price, popularity, and ratings.</span></span> 

<span data-ttu-id="ddebb-113">Implementace Fasetové navigace se liší mezi technologie vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-113">Implementing faceted navigation differs across search technologies.</span></span> <span data-ttu-id="ddebb-114">Ve službě Azure Search je Fasetové navigace vytvořená v době dotazů s využitím pole, které jste dříve s atributy ve schématu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-114">In Azure Search, faceted navigation is built at query time, using fields that you previously attributed in your schema.</span></span>

-   <span data-ttu-id="ddebb-115">V hello dotazy, které vaše aplikace vytvoří, musíte odeslat dotaz *parametry dotazu omezující vlastnost* sada výsledků tooget hello k dispozici omezující vlastnosti hodnoty filtru pro tento dokument.</span><span class="sxs-lookup"><span data-stu-id="ddebb-115">In hello queries that your application builds, a query must send *facet query parameters* tooget hello available facet filter values for that document result set.</span></span>

-   <span data-ttu-id="ddebb-116">tooactually trim sadu výsledků hello dokumentů, musíte také použít aplikaci hello `$filter` výraz.</span><span class="sxs-lookup"><span data-stu-id="ddebb-116">tooactually trim hello document result set, hello application must also apply a `$filter` expression.</span></span>

<span data-ttu-id="ddebb-117">Při vývoji vaší aplikace psaní kódu, který vytvoří dotazy se považuje za hello hromadné hello práce.</span><span class="sxs-lookup"><span data-stu-id="ddebb-117">In your application development, writing code that constructs queries constitutes hello bulk of hello work.</span></span> <span data-ttu-id="ddebb-118">Řadu hello chování aplikace, které by uživatel očekával od Fasetové navigace jsou poskytovány hello služby, včetně integrovanou podporu pro definování rozsahy a získávání počty omezující vlastnost výsledků.</span><span class="sxs-lookup"><span data-stu-id="ddebb-118">Many of hello application behaviors that you would expect from faceted navigation are provided by hello service, including built-in support for defining ranges and getting counts for facet results.</span></span> <span data-ttu-id="ddebb-119">Hello služby zahrnuje také rozumný výchozí hodnoty, které vám pomůžou vyhnout nepraktické navigační struktury.</span><span class="sxs-lookup"><span data-stu-id="ddebb-119">hello service also includes sensible defaults that help you avoid unwieldy navigation structures.</span></span> 

## <a name="sample-code-and-demo"></a><span data-ttu-id="ddebb-120">Ukázkový kód a demo</span><span class="sxs-lookup"><span data-stu-id="ddebb-120">Sample code and demo</span></span>
<span data-ttu-id="ddebb-121">Tento článek používá portál úlohy vyhledávání jako příklad.</span><span class="sxs-lookup"><span data-stu-id="ddebb-121">This article uses a job search portal as an example.</span></span> <span data-ttu-id="ddebb-122">Příklad Hello je implementovaný jako aplikace ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ddebb-122">hello example is implemented as an ASP.NET MVC application.</span></span>

-   <span data-ttu-id="ddebb-123">Zobrazit a otestovat hello pracovní ukázkový online v [Azure Search úlohy portál ukázku](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="ddebb-123">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="ddebb-124">Stáhnout hello kód z hello [Azure-Samples úložišti na Githubu](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="ddebb-124">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

## <a name="get-started"></a><span data-ttu-id="ddebb-125">Začínáme</span><span class="sxs-lookup"><span data-stu-id="ddebb-125">Get started</span></span>
<span data-ttu-id="ddebb-126">Pokud jste vývoj nových toosearch, hello nejlepší způsob, jak toothink Fasetové navigace je zobrazuje hello možnosti řízené samotným vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-126">If you're new toosearch development, hello best way toothink of faceted navigation is that it shows hello possibilities for self-directed search.</span></span> <span data-ttu-id="ddebb-127">Je typ procházení hledání založené na předdefinovaných filtrů, použít pro rychlé zužující dolů výsledky hledání prostřednictvím akce bodu a kliknutím.</span><span class="sxs-lookup"><span data-stu-id="ddebb-127">It’s a type of drill-down search experience, based on predefined filters, used for quickly narrowing down search results through point-and-click actions.</span></span> 

### <a name="interaction-model"></a><span data-ttu-id="ddebb-128">Interakce modelu</span><span class="sxs-lookup"><span data-stu-id="ddebb-128">Interaction model</span></span>

<span data-ttu-id="ddebb-129">Možnosti hledání Hello Fasetové navigace je iterativní, proto budeme, začněte tím, že vysvětlení jako posloupnost dotazy, které unfold v odpovědi toouser akce.</span><span class="sxs-lookup"><span data-stu-id="ddebb-129">hello search experience for faceted navigation is iterative, so let’s start by understanding it as a sequence of queries that unfold in response toouser actions.</span></span>

<span data-ttu-id="ddebb-130">výchozí bod Hello je stránku aplikace, která poskytuje Fasetové navigace, obvykle umístěny na obvodu hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-130">hello starting point is an application page that provides faceted navigation, typically placed on hello periphery.</span></span> <span data-ttu-id="ddebb-131">Fasetové navigace je často stromová struktura, s zaškrtávací políčka pro každou hodnotu, nebo můžete kliknout text.</span><span class="sxs-lookup"><span data-stu-id="ddebb-131">Faceted navigation is often a tree structure, with checkboxes for each value, or clickable text.</span></span> 

1. <span data-ttu-id="ddebb-132">Dotaz odeslané tooAzure vyhledávání určuje struktuře Fasetové navigace hello přes jeden nebo více parametrů dotazu omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-132">A query sent tooAzure Search specifies hello faceted navigation structure via one or more facet query parameters.</span></span> <span data-ttu-id="ddebb-133">Dotaz hello může zahrnovat `facet=Rating`, případně s `:values` nebo `:sort` toofurther možnost Upřesnit prezentace hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-133">For instance, hello query might include `facet=Rating`, perhaps with a `:values` or `:sort` option toofurther refine hello presentation.</span></span>
2. <span data-ttu-id="ddebb-134">Prezentační vrstva Hello vykreslí stránku vyhledávání poskytující Fasetové navigace, pomocí hello omezujícími vlastnostmi zadanými na vyžádání hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-134">hello presentation layer renders a search page that provides faceted navigation, using hello facets specified on hello request.</span></span>
3. <span data-ttu-id="ddebb-135">Zadané strukturu Fasetové navigace, která zahrnuje hodnocení, kliknutí tooindicate "4", která má být zobrazena pouze produkty s hodnocení 4 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="ddebb-135">Given a faceted navigation structure that includes Rating, you click "4" tooindicate that only products with a rating of 4 or higher should be shown.</span></span> 
4. <span data-ttu-id="ddebb-136">V odpovědi hello aplikace odešle dotaz, který zahrnuje`$filter=Rating ge 4`</span><span class="sxs-lookup"><span data-stu-id="ddebb-136">In response, hello application sends a query that includes `$filter=Rating ge 4`</span></span> 
5. <span data-ttu-id="ddebb-137">Hello prezentační vrstvy aktualizace hello stránky, zobrazující snížené výslednou sadu, obsahující pouze tyto položky, které splňují kritéria nové hello (v tomto případě produkty hodnocení 4 a vyšší).</span><span class="sxs-lookup"><span data-stu-id="ddebb-137">hello presentation layer updates hello page, showing a reduced result set, containing just those items that satisfy hello new criteria (in this case, products rated 4 and up).</span></span>

<span data-ttu-id="ddebb-138">Omezující vlastnost je parametr dotazu, ale Nezaměňujte se vstupem dotazu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-138">A facet is a query parameter, but do not confuse it with query input.</span></span> <span data-ttu-id="ddebb-139">Se nikdy nepoužívá jako kritéria pro výběr v dotazu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-139">It is never used as selection criteria in a query.</span></span> <span data-ttu-id="ddebb-140">Místo toho představit omezující vlastnost parametry dotazu jako vstupy toohello navigační strukturu, která se dodává zpět v odpovědi hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-140">Instead, think of facet query parameters as inputs toohello navigation structure that comes back in hello response.</span></span> <span data-ttu-id="ddebb-141">Pro každý parametr dotazu omezující vlastnosti, které poskytnete vyhodnotí Azure Search, kolik dokumenty jsou v hello částečné výsledky pro každou hodnotu omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-141">For each facet query parameter you provide, Azure Search evaluates how many documents are in hello partial results for each facet value.</span></span>

<span data-ttu-id="ddebb-142">Všimněte si hello `$filter` v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="ddebb-142">Notice hello `$filter` in step 4.</span></span> <span data-ttu-id="ddebb-143">Filtr Hello je důležitým aspektem Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-143">hello filter is an important aspect of faceted navigation.</span></span> <span data-ttu-id="ddebb-144">I když omezující vlastnosti a filtry jsou nezávislé v hello rozhraní API, musíte obou toodeliver hello prostředí, které máte v plánu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-144">Although facets and filters are independent in hello API, you need both toodeliver hello experience you intend.</span></span> 

### <a name="app-design-pattern"></a><span data-ttu-id="ddebb-145">Vzor návrhu aplikace</span><span class="sxs-lookup"><span data-stu-id="ddebb-145">App design pattern</span></span>

<span data-ttu-id="ddebb-146">V kódu aplikace je vzor hello toouse omezující vlastnosti dotazu parametry tooreturn hello Fasetové navigace struktura spolu s výsledky omezující vlastnost plus výraz $filter.</span><span class="sxs-lookup"><span data-stu-id="ddebb-146">In application code, hello pattern is toouse facet query parameters tooreturn hello faceted navigation structure along with facet results, plus a $filter expression.</span></span>  <span data-ttu-id="ddebb-147">hello popisovače výraz filtru Hello click – událost na hodnota omezující vlastnosti hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-147">hello filter expression handles hello click event on hello facet value.</span></span> <span data-ttu-id="ddebb-148">Představte si, že hello `$filter` výraz hello kódu skutečné oříznutí hello výsledků vyhledávání vrátil toohello prezentační vrstvy.</span><span class="sxs-lookup"><span data-stu-id="ddebb-148">Think of hello `$filter` expression as hello code behind hello actual trimming of search results returned toohello presentation layer.</span></span> <span data-ttu-id="ddebb-149">Zadána omezující vlastnost barvy, klikněte na barvu hello Red se implementuje pomocí `$filter` výraz, který vybere jen ty položky, které mají barva red.</span><span class="sxs-lookup"><span data-stu-id="ddebb-149">Given a Colors facet, clicking hello color Red is implemented through a `$filter` expression that selects only those items that have a color of red.</span></span> 

### <a name="query-basics"></a><span data-ttu-id="ddebb-150">Základy dotazů</span><span class="sxs-lookup"><span data-stu-id="ddebb-150">Query basics</span></span>

<span data-ttu-id="ddebb-151">Ve službě Azure Search, požadavek se specifikuje prostřednictvím jeden nebo více parametrů dotazu (viz [vyhledávání dokumentů](http://msdn.microsoft.com/library/azure/dn798927.aspx) popis každé z nich).</span><span class="sxs-lookup"><span data-stu-id="ddebb-151">In Azure Search, a request is specified through one or more query parameters (see [Search Documents](http://msdn.microsoft.com/library/azure/dn798927.aspx) for a description of each one).</span></span> <span data-ttu-id="ddebb-152">Žádný z parametrů dotazu hello jsou požadovány, ale musí mít alespoň jeden v pořadí pro dotaz toobe, který je platný.</span><span class="sxs-lookup"><span data-stu-id="ddebb-152">None of hello query parameters are required, but you must have at least one in order for a query toobe valid.</span></span>

<span data-ttu-id="ddebb-153">Přesnost, porozuměl jsem jim jako hello toofilter možnost si důležité přístupů je dosaženo pomocí jednoho nebo obou těchto výrazů:</span><span class="sxs-lookup"><span data-stu-id="ddebb-153">Precision, understood as hello ability toofilter out irrelevant hits, is achieved through one or both of these expressions:</span></span>

-   <span data-ttu-id="ddebb-154">**hledání =**</span><span class="sxs-lookup"><span data-stu-id="ddebb-154">**search=**</span></span>  
    <span data-ttu-id="ddebb-155">Hello hodnota tohoto parametru se považuje za hello hledaný výraz.</span><span class="sxs-lookup"><span data-stu-id="ddebb-155">hello value of this parameter constitutes hello search expression.</span></span> <span data-ttu-id="ddebb-156">Může být jediný text nebo výraz komplexní vyhledávání, který obsahuje více podmínek a operátory.</span><span class="sxs-lookup"><span data-stu-id="ddebb-156">It might be a single piece of text, or a complex search expression that includes multiple terms and operators.</span></span> <span data-ttu-id="ddebb-157">Na serveru hello hledaný výraz slouží pro fulltextové vyhledávání, dotazování prohledávatelné pole v indexu hello k porovnání podmínky, vrátí výsledky v rank pořadí.</span><span class="sxs-lookup"><span data-stu-id="ddebb-157">On hello server, a search expression is used for full-text search, querying searchable fields in hello index for matching terms, returning results in rank order.</span></span> <span data-ttu-id="ddebb-158">Pokud nastavíte `search` toonull, provádění dotazů je nad celý index hello (tedy `search=*`).</span><span class="sxs-lookup"><span data-stu-id="ddebb-158">If you set `search` toonull, query execution is over hello entire index (that is, `search=*`).</span></span> <span data-ttu-id="ddebb-159">In this Case, další prvky hello dotazu, jako například `$filter` nebo vyhodnocování profil, jsou hello primární faktory, které mají vliv na dokumenty, které jsou vráceny `($filter`) a pořadí, v jakém (`scoringProfile` nebo `$orderby`).</span><span class="sxs-lookup"><span data-stu-id="ddebb-159">In this case, other elements of hello query, such as a `$filter` or scoring profile, are hello primary factors affecting which documents are returned `($filter`) and in what order (`scoringProfile` or `$orderby`).</span></span>

-   <span data-ttu-id="ddebb-160">**$filter =**</span><span class="sxs-lookup"><span data-stu-id="ddebb-160">**$filter=**</span></span>  
    <span data-ttu-id="ddebb-161">Filtr je výkonný mechanismus pro omezení velikosti hello výsledků vyhledávání na základě hello hodnot atributů určitého dokumentu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-161">A filter is a powerful mechanism for limiting hello size of search results based on hello values of specific document attributes.</span></span> <span data-ttu-id="ddebb-162">A `$filter` je nejdřív vyhodnotit, za nímž následuje používání omezujících vlastností logiky, která generuje hello dostupné hodnoty a odpovídající počty pro každou hodnotu</span><span class="sxs-lookup"><span data-stu-id="ddebb-162">A `$filter` is evaluated first, followed by faceting logic that generates hello available values and corresponding counts for each value</span></span>

<span data-ttu-id="ddebb-163">Komplexní vyhledávacích výrazech snížit výkon hello hello dotazu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-163">Complex search expressions decrease hello performance of hello query.</span></span> <span data-ttu-id="ddebb-164">Kde je to možné, použijte filtr dobře sestavený výrazy tooincrease přesnost a zlepšit výkon dotazů.</span><span class="sxs-lookup"><span data-stu-id="ddebb-164">Where possible, use well-constructed filter expressions tooincrease precision and improve query performance.</span></span>

<span data-ttu-id="ddebb-165">toobetter pochopit, jak filtr přidá další přesnost, porovnání tooone komplexní vyhledávání výraz, který obsahuje výraz filtru:</span><span class="sxs-lookup"><span data-stu-id="ddebb-165">toobetter understand how a filter adds more precision, compare a complex search expression tooone that includes a filter expression:</span></span>

-   `GET /indexes/hotel/docs?search=lodging budget +Seattle –motel +parking`
-   `GET /indexes/hotel/docs?search=lodging&$filter=City eq ‘Seattle’ and Parking and Type ne ‘motel’`

<span data-ttu-id="ddebb-166">Obě dotazy jsou platné, ale hello druhou je vyšší, pokud hledáte bez motely s parkovací v Praze.</span><span class="sxs-lookup"><span data-stu-id="ddebb-166">Both queries are valid, but hello second is superior if you’re looking for non-motels with parking in Seattle.</span></span>
-   <span data-ttu-id="ddebb-167">první dotaz Hello závisí na těchto určitá slova se uvedených nebo není uveden v polí s řetězcem jako název, popis a žádné jiné pole obsahující prohledávatelná data.</span><span class="sxs-lookup"><span data-stu-id="ddebb-167">hello first query relies on those specific words being mentioned or not mentioned in string fields like Name, Description, and any other field containing searchable data.</span></span>
-   <span data-ttu-id="ddebb-168">Hello druhý dotaz hledá přesné shody na strukturovaných dat a je pravděpodobně toobe mnohem přesnější.</span><span class="sxs-lookup"><span data-stu-id="ddebb-168">hello second query looks for precise matches on structured data and is likely toobe much more accurate.</span></span>

<span data-ttu-id="ddebb-169">V aplikacích, které zahrnují Fasetové navigace, ujistěte se, že je přiložena akce každého uživatele v struktuře Fasetové navigace zúžení výsledků vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-169">In applications that include faceted navigation, make sure that each user action over a faceted navigation structure is accompanied by a narrowing of search results.</span></span> <span data-ttu-id="ddebb-170">toonarrow výsledky, použijte výraz filtru.</span><span class="sxs-lookup"><span data-stu-id="ddebb-170">toonarrow results, use a filter expression.</span></span>

<a name="howtobuildit"></a>

## <a name="build-a-faceted-navigation-app"></a><span data-ttu-id="ddebb-171">Sestavení aplikace Fasetové navigace</span><span class="sxs-lookup"><span data-stu-id="ddebb-171">Build a faceted navigation app</span></span>
<span data-ttu-id="ddebb-172">V kódu aplikace, vytvoří žádost o vyhledávání hello implementujete Fasetové navigace s Azure Search.</span><span class="sxs-lookup"><span data-stu-id="ddebb-172">You implement faceted navigation with Azure Search in your application code that builds hello search request.</span></span> <span data-ttu-id="ddebb-173">Hello Fasetové navigace spoléhá na elementy ve vašem schématu, které jste definovali dříve.</span><span class="sxs-lookup"><span data-stu-id="ddebb-173">hello faceted navigation relies on elements in your schema that you defined previously.</span></span>

<span data-ttu-id="ddebb-174">Předdefinované v indexu vyhledávání je hello `Facetable [true|false]` indexu atribut, nastavení na vybrané pole tooenable nebo zakázat jejich použití ve struktuře Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-174">Predefined in your search index is hello `Facetable [true|false]` index attribute, set on selected fields tooenable or disable their use in a faceted navigation structure.</span></span> <span data-ttu-id="ddebb-175">Bez `"Facetable" = true`, pole nelze použít v omezující vlastnost navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-175">Without `"Facetable" = true`, a field cannot be used in facet navigation.</span></span>

<span data-ttu-id="ddebb-176">Hello prezentační vrstvy do vašeho kódu nabízí hello uživatelské prostředí.</span><span class="sxs-lookup"><span data-stu-id="ddebb-176">hello presentation layer in your code provides hello user experience.</span></span> <span data-ttu-id="ddebb-177">By měl zobrazit seznam hello základní částí hello Fasetové navigace, například hello štítek, hodnoty, zaškrtněte políčka a počet hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-177">It should list hello constituent parts of hello faceted navigation, such as hello label, values, check boxes, and hello count.</span></span> <span data-ttu-id="ddebb-178">Hello REST API služby Azure Search je nezávislá na platformě, takže použijte jakoukoli jazyk a platformy, které chcete.</span><span class="sxs-lookup"><span data-stu-id="ddebb-178">hello Azure Search REST API is platform agnostic, so use whatever language and platform you want.</span></span> <span data-ttu-id="ddebb-179">Hello důležité je, že tooinclude prvky uživatelského rozhraní, které podporují přírůstkové aktualizace, s aktualizovaný stav uživatelského rozhraní je vybrán každý další omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-179">hello important thing is tooinclude UI elements that support incremental refresh, with updated UI state as each additional facet is selected.</span></span> 

<span data-ttu-id="ddebb-180">V době dotazů kódu aplikace vytvoří žádost, která zahrnuje `facet=[string]`, parametr požadavek, který poskytuje hello pole toofacet podle.</span><span class="sxs-lookup"><span data-stu-id="ddebb-180">At query time, your application code creates a request that includes `facet=[string]`, a request parameter that provides hello field toofacet by.</span></span> <span data-ttu-id="ddebb-181">Dotaz může mít více omezující, jako například `&facet=color&facet=category&facet=rating`, každé z nich oddělených ampersand (&) znaků.</span><span class="sxs-lookup"><span data-stu-id="ddebb-181">A query can have multiple facets, such as `&facet=color&facet=category&facet=rating`, each one separated by an ampersand (&) character.</span></span>

<span data-ttu-id="ddebb-182">Kód aplikace také musí vytvořit `$filter` výraz toohandle hello klikněte na události v Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-182">Application code must also construct a `$filter` expression toohandle hello click events in faceted navigation.</span></span> <span data-ttu-id="ddebb-183">A `$filter` snižuje hello výsledky hledání, pomocí hodnoty omezující vlastnost hello jako kritéria filtru.</span><span class="sxs-lookup"><span data-stu-id="ddebb-183">A `$filter` reduces hello search results, using hello facet value as filter criteria.</span></span>

<span data-ttu-id="ddebb-184">Služba Azure Search vrátí výsledky hledání hello, založené na jeden nebo více výrazů, které zadáte, společně s struktuře Fasetové navigace toohello aktualizace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-184">Azure Search returns hello search results, based on one or more terms that you enter, along with updates toohello faceted navigation structure.</span></span> <span data-ttu-id="ddebb-185">Ve službě Azure Search Fasetové navigace je konstrukce jedna úroveň, s hodnotami omezující vlastnost, počty a kolik výsledků, které se nacházejí pro každé z nich.</span><span class="sxs-lookup"><span data-stu-id="ddebb-185">In Azure Search, faceted navigation is a single-level construction, with facet values, and counts of how many results are found for each one.</span></span>

<span data-ttu-id="ddebb-186">V následujících částech hello, můžeme provést podrobnější o tom, jak toobuild každou část.</span><span class="sxs-lookup"><span data-stu-id="ddebb-186">In hello following sections, we take a closer look at how toobuild each part.</span></span>

<a name="buildindex"></a>

## <a name="build-hello-index"></a><span data-ttu-id="ddebb-187">Sestavení indexu hello</span><span class="sxs-lookup"><span data-stu-id="ddebb-187">Build hello index</span></span>
<span data-ttu-id="ddebb-188">Používání omezujících vlastností je povolena na základě pole pole v indexu hello prostřednictvím tohoto atributu indexu: `"Facetable": true`.</span><span class="sxs-lookup"><span data-stu-id="ddebb-188">Faceting is enabled on a field-by-field basis in hello index, via this index attribute: `"Facetable": true`.</span></span>  
<span data-ttu-id="ddebb-189">Všechny typy pole, které by mohly být použity pravděpodobně v Fasetové navigace jsou `Facetable` ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="ddebb-189">All field types that could possibly be used in faceted navigation are `Facetable` by default.</span></span> <span data-ttu-id="ddebb-190">Zahrnout tyto typy polí `Edm.String`, `Edm.DateTimeOffset`, a všechny hello číselné pole typů (v podstatě všechny typy polí jsou facetable (kategorizovatelné) s výjimkou `Edm.GeographyPoint`, který nelze použít v Fasetové navigace).</span><span class="sxs-lookup"><span data-stu-id="ddebb-190">Such field types include `Edm.String`, `Edm.DateTimeOffset`, and all hello numeric field types (essentially, all field types are facetable except `Edm.GeographyPoint`, which can’t be used in faceted navigation).</span></span> 

<span data-ttu-id="ddebb-191">Při vytváření indexu, je vhodné, Fasetové navigace pro pole, která má být nikdy použit jako omezující vlastnost tooexplicitly zapněte používání omezujících vlastností vypnuté.</span><span class="sxs-lookup"><span data-stu-id="ddebb-191">When building an index, a best practice for faceted navigation is tooexplicitly turn faceting off for fields that should never be used as a facet.</span></span>  <span data-ttu-id="ddebb-192">Konkrétně polí s řetězcem hodnoty typu singleton, jako je například ID nebo produktu, název, musí být nastavená příliš`"Facetable": false` tooprevent jejich náhodnému (a neúčinná) použít v Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-192">In particular, string fields for singleton values, such as an ID or product name, should be set too`"Facetable": false` tooprevent their accidental (and ineffective) use in faceted navigation.</span></span> <span data-ttu-id="ddebb-193">Zapnutí používání omezujících vlastností vypnout kde nepotřebujete ho pomáhá udržet co nejmenší velikost hello hello indexu a obvykle zvyšuje výkon.</span><span class="sxs-lookup"><span data-stu-id="ddebb-193">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

<span data-ttu-id="ddebb-194">Toto je součástí hello schéma pro hello ukázkové úlohy portál ukázkovou aplikaci, oříznut některé atributy tooreduce hello velikosti:</span><span class="sxs-lookup"><span data-stu-id="ddebb-194">Following is part of hello schema for hello Job Portal Demo sample app, trimmed of some attributes tooreduce hello size:</span></span>

```json
{
  ...
  "name": "nycjobs",
  "fields": [
    { “name”: "id",                 "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "job_id",             "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "agency",              "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "posting_type",        "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "num_of_positions",    "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "business_title",      "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "civil_service_title", "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "title_code_no",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "level",               "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_from",   "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_to",     "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_frequency",    "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "work_location",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
…
    { “name”: "geo_location",        "type": "Edm.GeographyPoint",     "searchable": false, "filterable": true, ...  "facetable": false, ... },
    { “name”: "tags",                "type": "Collection(Edm.String)", "searchable": true,  "filterable": true, ...  "facetable": true, ...  }
  ],
…
}
```

<span data-ttu-id="ddebb-195">Jak je vidět ve schématu ukázkový text hello, `Facetable` je vypnuté pro pole řetězce, které by se neměla používat jako omezující, jako je třeba ID hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ddebb-195">As you can see in hello sample schema, `Facetable` is turned off for string fields that shouldn’t be used as facets, such as ID values.</span></span> <span data-ttu-id="ddebb-196">Zapnutí používání omezujících vlastností vypnout kde nepotřebujete ho pomáhá udržet co nejmenší velikost hello hello indexu a obvykle zvyšuje výkon.</span><span class="sxs-lookup"><span data-stu-id="ddebb-196">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

> [!TIP]
> <span data-ttu-id="ddebb-197">Jako osvědčený postup zahrnují hello úplnou sadu atributů index pro každé pole.</span><span class="sxs-lookup"><span data-stu-id="ddebb-197">As a best practice, include hello full set of index attributes for each field.</span></span> <span data-ttu-id="ddebb-198">I když `Facetable` je ve výchozím skoro všech polí, účelově nastavení každý atribut vám může pomoct pečlivě promyslete hello důsledků každé rozhodnutí schématu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-198">Although `Facetable` is on by default for almost all fields, purposely setting each attribute can help you think through hello implications of each schema decision.</span></span> 

<a name="checkdata"></a>

## <a name="check-hello-data"></a><span data-ttu-id="ddebb-199">Zkontrolujte, zda text hello data</span><span class="sxs-lookup"><span data-stu-id="ddebb-199">Check hello data</span></span>
<span data-ttu-id="ddebb-200">Hello kvality dat. má přímý vliv na tom, jestli bude realizována hello Fasetové navigace struktura podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-200">hello quality of your data has a direct effect on whether hello faceted navigation structure materializes as you expect it to.</span></span> <span data-ttu-id="ddebb-201">Ovlivní také hello snadné vytváření filtrů tooreduce hello výslednou sadu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-201">It also affects hello ease of constructing filters tooreduce hello result set.</span></span>

<span data-ttu-id="ddebb-202">Pokud chcete toofacet Brand nebo ceny, musí každý dokument obsahovat hodnoty pro *značka* a *ProductPrice* které jsou platné, konzistentní a produktivitu jako možnost filter.</span><span class="sxs-lookup"><span data-stu-id="ddebb-202">If you want toofacet by Brand or Price, each document should contain values for *BrandName* and *ProductPrice* that are valid, consistent, and productive as a filter option.</span></span>

<span data-ttu-id="ddebb-203">Tady je několik připomenutí co tooscrub pro:</span><span class="sxs-lookup"><span data-stu-id="ddebb-203">Here are a few reminders of what tooscrub for:</span></span>

* <span data-ttu-id="ddebb-204">Pro každé pole, které chcete toofacet podle položte si zda obsahuje hodnoty, které jsou vhodné jako filtry řízené samotným vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-204">For every field that you want toofacet by, ask yourself whether it contains values that are suitable as filters in self-directed search.</span></span> <span data-ttu-id="ddebb-205">Hello hodnoty by měly být krátké, popisný a dostatečně odlišný toooffer zrušte výběr mezi konkurenční možnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-205">hello values should be short, descriptive, and sufficiently distinctive toooffer a clear choice between competing options.</span></span>
* <span data-ttu-id="ddebb-206">Pravopisné chyby nebo téměř odpovídající hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ddebb-206">Misspellings or nearly matching values.</span></span> <span data-ttu-id="ddebb-207">Pokud jste omezující vlastnost barvy a hodnoty polí obsahovat oranžová a Ornage (chybné), obě by vyzvednutí omezující vlastnost podle pole barev hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-207">If you facet on Color, and field values include Orange and Ornage (a misspelling), a facet based on hello Color field would pick up both.</span></span>
* <span data-ttu-id="ddebb-208">Smíšená případu textu můžete také způsobí zmatek v Fasetové navigace s oranžová a oranžová zobrazí jako dvě různé hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ddebb-208">Mixed case text can also wreak havoc in faceted navigation, with orange and Orange appearing as two different values.</span></span> 
* <span data-ttu-id="ddebb-209">Verze jednoho a množném čísle stejnou hodnotu může mít za následek samostatné omezující vlastnosti pro každou hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-209">Single and plural versions of hello same value can result in a separate facet for each.</span></span>

<span data-ttu-id="ddebb-210">Si lze představit, péči k přípravě hello dat je zásadní aspekt efektivní Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-210">As you can imagine, diligence in preparing hello data is an essential aspect of effective faceted navigation.</span></span>

<a name="presentationlayer"></a>

## <a name="build-hello-ui"></a><span data-ttu-id="ddebb-211">Sestavení hello uživatelského rozhraní</span><span class="sxs-lookup"><span data-stu-id="ddebb-211">Build hello UI</span></span>
<span data-ttu-id="ddebb-212">Práce zpět z hello prezentační vrstvy můžete nápovědy odkrýt požadavky, které může být načteni jinak a zjistěte, jaké funkce jsou nezbytné toohello možností vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-212">Working back from hello presentation layer can help you uncover requirements that might be missed otherwise, and understand which capabilities are essential toohello search experience.</span></span>

<span data-ttu-id="ddebb-213">Z hlediska Fasetové navigace zobrazí hello Fasetové navigace struktura stránku web nebo aplikaci, zjistí vstupu uživatele na stránku hello a vloží elementy hello změnit.</span><span class="sxs-lookup"><span data-stu-id="ddebb-213">In terms of faceted navigation, your web or application page displays hello faceted navigation structure, detects user input on hello page, and inserts hello changed elements.</span></span> 

<span data-ttu-id="ddebb-214">Pro webové aplikace se AJAX obvykle používá v prezentační vrstvě hello protože umožňuje toorefresh přírůstkové změny.</span><span class="sxs-lookup"><span data-stu-id="ddebb-214">For web applications, AJAX is commonly used in hello presentation layer because it allows you toorefresh incremental changes.</span></span> <span data-ttu-id="ddebb-215">Můžete také použít rozhraní ASP.NET MVC nebo jakoukoli jinou vizualizaci platformu, zda se může připojit tooan služby Azure Search pomocí protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="ddebb-215">You could also use ASP.NET MVC or any other visualization platform that can connect tooan Azure Search service over HTTP.</span></span> <span data-ttu-id="ddebb-216">Ukázková aplikace Hello odkazuje v tomto článku – hello **Azure Search úlohy portál ukázku** – se stane toobe aplikaci ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ddebb-216">hello sample application referenced throughout this article -- hello **Azure Search Job Portal Demo** – happens toobe an ASP.NET MVC application.</span></span>

<span data-ttu-id="ddebb-217">V ukázce hello Fasetové navigace je integrovaná hello stránky s výsledky hledání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-217">In hello sample, faceted navigation is built into hello search results page.</span></span> <span data-ttu-id="ddebb-218">v následujícím příkladu, které jsou převzaty z hello Hello `index.cshtml` stránka s výsledky souboru hello ukázkové aplikace, zobrazí hello statické HTML struktury pro zobrazení Fasetové navigace na hello vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-218">hello following example, taken from hello `index.cshtml` file of hello sample application, shows hello static HTML structure for displaying faceted navigation on hello search results page.</span></span> <span data-ttu-id="ddebb-219">Hello seznam omezující vlastnosti je sestavit nebo znovu sestavit dynamicky při odeslání hledaný termín, nebo zaškrtněte nebo zrušte omezující vlastnost.</span><span class="sxs-lookup"><span data-stu-id="ddebb-219">hello list of facets is built or rebuilt dynamically when you submit a search term, or select or clear a facet.</span></span>

```html
<div class="widget sidebar-widget jobs-filter-widget">
  <h5 class="widget-title">Filter Results</h5>
    <p id="filterReset"></p>
    <div class="widget-content">

      <h6 id="businessTitleFacetTitle">Business Title</h6>
      <ul class="filter-list" id="business_title_facets">
      </ul>

      <h6>Location</h6>
      <ul class="filter-list" id="posting_type_facets">
      </ul>

      <h6>Posting Type</h6>
      <ul class="filter-list" id="posting_type_facets"></ul>

      <h6>Minimum Salary</h6>
      <ul class="filter-list" id="salary_range_facets">
      </ul>

  </div>
</div>
```

<span data-ttu-id="ddebb-220">Následující fragment kódu z hello Hello `index.cshtml` stránky dynamicky vytvoří hello HTML toodisplay hello první podmínka, název firmy.</span><span class="sxs-lookup"><span data-stu-id="ddebb-220">hello following code snippet from hello `index.cshtml` page dynamically builds hello HTML toodisplay hello first facet, Business Title.</span></span> <span data-ttu-id="ddebb-221">Podobné funkce jako dynamicky sestavení hello HTML pro hello jiné omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-221">Similar functions dynamically build hello HTML for hello other facets.</span></span> <span data-ttu-id="ddebb-222">Každý omezující vlastnosti má popisek a počet, který zobrazí hello počet položek pro tento výsledek omezující vlastnost nalezena.</span><span class="sxs-lookup"><span data-stu-id="ddebb-222">Each facet has a label and a count, which displays hello number of items found for that facet result.</span></span>

```js
function UpdateBusinessTitleFacets(data) {
  var facetResultsHTML = '';
  for (var i = 0; i < data.length; i++) {
    facetResultsHTML += '<li><a href="javascript:void(0)" onclick="ChooseBusinessTitleFacet(\'' + data[i].Value + '\');">' + data[i].Value + ' (' + data[i].Count + ')</span></a></li>';
  }

  $("#business_title_facets").html(facetResultsHTML);
}
```

> [!TIP]
> <span data-ttu-id="ddebb-223">Při návrhu hello stránky s výsledky hledání, mějte na paměti tooadd mechanismus pro vymazání omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-223">When you design hello search results page, remember tooadd a mechanism for clearing facets.</span></span> <span data-ttu-id="ddebb-224">Pokud přidáte zaškrtávací políčka, snadno uvidíte jak tooclear hello filtry.</span><span class="sxs-lookup"><span data-stu-id="ddebb-224">If you add check boxes, you can easily see how tooclear hello filters.</span></span> <span data-ttu-id="ddebb-225">Pro jiné rozložení může být nutné vzor s popisem cesty nebo další tvůrčí přístup.</span><span class="sxs-lookup"><span data-stu-id="ddebb-225">For other layouts, you might need a breadcrumb pattern or another creative approach.</span></span> <span data-ttu-id="ddebb-226">Například v hello úlohy vyhledávání portál ukázkovou aplikaci, můžete kliknout na hello `[X]` po omezující vlastnost vybrané omezující vlastnost tooclear hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-226">For example, in hello Job Search Portal sample application, you can click hello `[X]` after a selected facet tooclear hello facet.</span></span>

<a name="buildquery"></a>

## <a name="build-hello-query"></a><span data-ttu-id="ddebb-227">Vytvoření dotazu hello</span><span class="sxs-lookup"><span data-stu-id="ddebb-227">Build hello query</span></span>
<span data-ttu-id="ddebb-228">Hello kód, který můžete psát pro tvorbu dotazů musí určovat, že všechny části platný dotaz, včetně vyhledávacích výrazech, omezující vlastnosti, filtrů, vyhodnocování profilů – nic používá tooformulate žádost.</span><span class="sxs-lookup"><span data-stu-id="ddebb-228">hello code that you write for building queries should specify all parts of a valid query, including search expressions, facets, filters, scoring profiles– anything used tooformulate a request.</span></span> <span data-ttu-id="ddebb-229">V této části nám prozkoumat, kde omezující vlastnosti začlenit do dotazu, a jak se používají filtry s omezujícími vlastnostmi toodeliver snížené sada výsledků.</span><span class="sxs-lookup"><span data-stu-id="ddebb-229">In this section, we explore where facets fit into a query, and how filters are used with facets toodeliver a reduced result set.</span></span>

<span data-ttu-id="ddebb-230">Všimněte si, že omezující vlastnosti jsou nedílnou součástí v této ukázkové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ddebb-230">Notice that facets are integral in this sample application.</span></span> <span data-ttu-id="ddebb-231">Hello vyhledáváním v hello portál ukázkové úlohy je navržen na Fasetové navigace a filtry.</span><span class="sxs-lookup"><span data-stu-id="ddebb-231">hello search experience in hello Job Portal Demo is designed around faceted navigation and filters.</span></span> <span data-ttu-id="ddebb-232">Hello viditelného umístění Fasetové navigace na stránce hello ukazuje její význam.</span><span class="sxs-lookup"><span data-stu-id="ddebb-232">hello prominent placement of faceted navigation on hello page demonstrates its importance.</span></span> 

<span data-ttu-id="ddebb-233">Příkladem je často toobegin vhodné místo.</span><span class="sxs-lookup"><span data-stu-id="ddebb-233">An example is often a good place toobegin.</span></span> <span data-ttu-id="ddebb-234">v následujícím příkladu, které jsou převzaty z hello Hello `JobsSearch.cs` souboru sestavení požadavek, který vytvoří omezující vlastnosti navigace na základě obchodní název, umístění, typ účtování a minimální mzda.</span><span class="sxs-lookup"><span data-stu-id="ddebb-234">hello following example, taken from hello `JobsSearch.cs` file, builds a request that creates facet navigation based on Business Title, Location, Posting Type, and Minimum Salary.</span></span> 

```cs
SearchParameters sp = new SearchParameters()
{
  ...
  // Add facets
  Facets = new List<String>() { "business_title", "posting_type", "level", "salary_range_from,interval:50000" },
};
```

<span data-ttu-id="ddebb-235">Parametr dotazu omezující vlastnosti nastavena tooa pole a v závislosti na typu dat hello, lze nastavit další parametry podle seznamu odděleného čárkami, který zahrnuje `count:<integer>`, `sort:<>`, `interval:<integer>`, a `values:<list>`.</span><span class="sxs-lookup"><span data-stu-id="ddebb-235">A facet query parameter is set tooa field and depending on hello data type, can be further parameterized by comma-delimited list that includes `count:<integer>`, `sort:<>`, `interval:<integer>`, and `values:<list>`.</span></span> <span data-ttu-id="ddebb-236">Seznam hodnot je podporována pro číselná data při nastavování rozsahů.</span><span class="sxs-lookup"><span data-stu-id="ddebb-236">A values list is supported for numeric data when setting up ranges.</span></span> <span data-ttu-id="ddebb-237">V tématu [vyhledávání dokumentů (API služby Azure Search)](http://msdn.microsoft.com/library/azure/dn798927.aspx) podrobnosti o použití.</span><span class="sxs-lookup"><span data-stu-id="ddebb-237">See [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx) for usage details.</span></span>

<span data-ttu-id="ddebb-238">Společně s omezující má požadavek hello formulovali aplikací také sestavit filtry toonarrow dolů hello sadu candidate dokumentů na základě výběru hodnota omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-238">Along with facets, hello request formulated by your application should also build filters toonarrow down hello set of candidate documents based on a facet value selection.</span></span> <span data-ttu-id="ddebb-239">Pro úložiště kolo Fasetové navigace poskytuje různá vodítka tooquestions jako *jaké typy kol, výrobců a barvy jsou k dispozici?*.</span><span class="sxs-lookup"><span data-stu-id="ddebb-239">For a bike store, faceted navigation provides clues tooquestions like *What colors, manufacturers, and types of bikes are available?*.</span></span> <span data-ttu-id="ddebb-240">Filtrování odpovědi na dotazy jako *red které přesný kol se Horská kola, v tomto cena rozsah?*.</span><span class="sxs-lookup"><span data-stu-id="ddebb-240">Filtering answers questions like *Which exact bikes are red, mountain bikes, in this price range?*.</span></span> <span data-ttu-id="ddebb-241">Po kliknutí na tlačítko "Red" tooindicate, která má být zobrazena pouze Red produktů, hello další dotaz hello aplikace odešle zahrnuje `$filter=Color eq ‘Red’`.</span><span class="sxs-lookup"><span data-stu-id="ddebb-241">When you click "Red" tooindicate that only Red products should be shown, hello next query hello application sends includes `$filter=Color eq ‘Red’`.</span></span>

<span data-ttu-id="ddebb-242">Následující fragment kódu z hello Hello `JobsSearch.cs` stránky přidá hello vybraný název firmy toohello filtr, pokud vyberete hodnotu z omezující hello firmy název vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-242">hello following code snippet from hello `JobsSearch.cs` page adds hello selected Business Title toohello filter if you select a value from hello Business Title facet.</span></span>

```cs
if (businessTitleFacet != "")
  filter = "business_title eq '" + businessTitleFacet + "'";
```

<a name="tips"></a> 

## <a name="tips-and-best-practices"></a><span data-ttu-id="ddebb-243">Tipy a osvědčené postupy</span><span class="sxs-lookup"><span data-stu-id="ddebb-243">Tips and best practices</span></span>

### <a name="indexing-tips"></a><span data-ttu-id="ddebb-244">Tipy pro indexování</span><span class="sxs-lookup"><span data-stu-id="ddebb-244">Indexing tips</span></span>
<span data-ttu-id="ddebb-245">**Pokud nepoužijete vyhledávací pole zlepšit efektivitu indexu**</span><span class="sxs-lookup"><span data-stu-id="ddebb-245">**Improve index efficiency if you don't use a Search box**</span></span>

<span data-ttu-id="ddebb-246">Pokud vaše aplikace používá výhradně Fasetové navigace (tedy bez vyhledávacího pole), můžete označit hello pole jako `searchable=false`, `facetable=true` tooproduce kompaktnější index.</span><span class="sxs-lookup"><span data-stu-id="ddebb-246">If your application uses faceted navigation exclusively (that is, no search box), you can mark hello field as `searchable=false`, `facetable=true` tooproduce a more compact index.</span></span> <span data-ttu-id="ddebb-247">Kromě toho indexování proběhne pouze celý omezující vlastnosti hodnoty, ovšem se žádné dělením slov nebo indexování hello součásti aplikace word hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ddebb-247">In addition, indexing occurs only on whole facet values, with no word-break or indexing of hello component parts of a multi-word value.</span></span>

<span data-ttu-id="ddebb-248">**Zadejte pole, která lze použít jako omezující vlastnosti**</span><span class="sxs-lookup"><span data-stu-id="ddebb-248">**Specify which fields can be used as facets**</span></span>

<span data-ttu-id="ddebb-249">Odvolat tuto hello schéma indexu hello určuje pole, která jsou k dispozici toouse jako omezující vlastnost.</span><span class="sxs-lookup"><span data-stu-id="ddebb-249">Recall that hello schema of hello index determines which fields are available toouse as a facet.</span></span> <span data-ttu-id="ddebb-250">Za předpokladu, že je pole facetable (kategorizovatelné), hello dotazu určuje, které pole toofacet podle.</span><span class="sxs-lookup"><span data-stu-id="ddebb-250">Assuming a field is facetable, hello query specifies which fields toofacet by.</span></span> <span data-ttu-id="ddebb-251">Hello pole, podle kterého jsou používání omezujících vlastností poskytuje hello hodnoty, které se zobrazí pod popiskem hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-251">hello field by which you are faceting provides hello values that appear below hello label.</span></span> 

<span data-ttu-id="ddebb-252">Hello hodnoty, které se zobrazí pod každý popisek se načítají z indexu hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-252">hello values that appear under each label are retrieved from hello index.</span></span> <span data-ttu-id="ddebb-253">Například pokud hello omezující vlastnost pole je *barva*, hello hodnoty, které jsou k dispozici pro další filtrování jsou hello hodnot pro toto pole - červená, černé a tak dále.</span><span class="sxs-lookup"><span data-stu-id="ddebb-253">For example, if hello facet field is *Color*, hello values available for additional filtering are hello values for that field - Red, Black, and so forth.</span></span>

<span data-ttu-id="ddebb-254">Číselné a data a času pouze hodnoty, je možné explicitně nastavit hodnoty na hello omezující vlastnosti pole (například `facet=Rating,values:1|2|3|4|5`).</span><span class="sxs-lookup"><span data-stu-id="ddebb-254">For Numeric and DateTime values only, you can explicitly set values on hello facet field (for example, `facet=Rating,values:1|2|3|4|5`).</span></span> <span data-ttu-id="ddebb-255">Seznam hodnot je povolena pro tyto pole typů toosimplify hello oddělení omezující vlastnost výsledky do sousedních rozsahy (buď na základě číselných hodnot nebo časových období rozsahy).</span><span class="sxs-lookup"><span data-stu-id="ddebb-255">A values list is allowed for these field types toosimplify hello separation of facet results into contiguous ranges (either ranges based on numeric values or time periods).</span></span> 

<span data-ttu-id="ddebb-256">**Ve výchozím nastavení může mít pouze jednu úroveň Fasetové navigace**</span><span class="sxs-lookup"><span data-stu-id="ddebb-256">**By default you can only have one level of faceted navigation**</span></span> 

<span data-ttu-id="ddebb-257">Jak jsme uvedli, neexistuje žádné přímé podpory pro vnoření omezující vlastnosti v hierarchii.</span><span class="sxs-lookup"><span data-stu-id="ddebb-257">As noted, there is no direct support for nesting facets in a hierarchy.</span></span> <span data-ttu-id="ddebb-258">Ve výchozím nastavení Fasetové navigace ve službě Azure Search podporuje pouze jednu úroveň filtry.</span><span class="sxs-lookup"><span data-stu-id="ddebb-258">By default, faceted navigation in Azure Search only supports one level of filters.</span></span> <span data-ttu-id="ddebb-259">Ale existuje alternativní řešení.</span><span class="sxs-lookup"><span data-stu-id="ddebb-259">However, workarounds do exist.</span></span> <span data-ttu-id="ddebb-260">Můžete kódovat omezující vlastnost hierarchická struktura v `Collection(Edm.String)` v jedné položce bodu na hierarchii.</span><span class="sxs-lookup"><span data-stu-id="ddebb-260">You can encode a hierarchical facet structure in a `Collection(Edm.String)` with one entry point per hierarchy.</span></span> <span data-ttu-id="ddebb-261">Implementace tohoto řešení je nad rámec hello rámec tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="ddebb-261">Implementing this workaround is beyond hello scope of this article.</span></span> 

### <a name="querying-tips"></a><span data-ttu-id="ddebb-262">Dotazování tipy</span><span class="sxs-lookup"><span data-stu-id="ddebb-262">Querying tips</span></span>
<span data-ttu-id="ddebb-263">**Ověřte pole**</span><span class="sxs-lookup"><span data-stu-id="ddebb-263">**Validate fields**</span></span>

<span data-ttu-id="ddebb-264">Pokud vytvoříte hello seznam omezující vlastnosti dynamicky podle nedůvěryhodné uživatelský vstup, ověřte, zda jsou platná hello názvy polí Fasetové hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-264">If you build hello list of facets dynamically based on untrusted user input, validate that hello names of hello faceted fields are valid.</span></span> <span data-ttu-id="ddebb-265">Nebo řídicí názvy hello při vytváření adres URL pomocí `Uri.EscapeDataString()` v rozhraní .NET, nebo ekvivalentní v vaši platformu volba hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-265">Or, escape hello names when building URLs by using either `Uri.EscapeDataString()` in .NET, or hello equivalent in your platform of choice.</span></span>

### <a name="filtering-tips"></a><span data-ttu-id="ddebb-266">Filtrování tipy</span><span class="sxs-lookup"><span data-stu-id="ddebb-266">Filtering tips</span></span>
<span data-ttu-id="ddebb-267">**Zvýšit přesnost vyhledávání s filtry**</span><span class="sxs-lookup"><span data-stu-id="ddebb-267">**Increase search precision with filters**</span></span>

<span data-ttu-id="ddebb-268">Použití filtrů.</span><span class="sxs-lookup"><span data-stu-id="ddebb-268">Use filters.</span></span> <span data-ttu-id="ddebb-269">Pokud byste tedy spoléhat na vrátí právě vyhledávacích výrazech samostatně, rozklad by mohlo způsobit toobe dokumentu, který nemá hodnotu přesné omezující vlastnost hello v některém z jeho polí.</span><span class="sxs-lookup"><span data-stu-id="ddebb-269">If you rely on just search expressions alone, stemming could cause a document toobe returned that doesn’t have hello precise facet value in any of its fields.</span></span>

<span data-ttu-id="ddebb-270">**Zvýšení výkonu vyhledávání s filtry**</span><span class="sxs-lookup"><span data-stu-id="ddebb-270">**Increase search performance with filters**</span></span>

<span data-ttu-id="ddebb-271">Filtry zúžit hello sadu dokumenty kandidáta pro hledání a vyloučit z hodnocení.</span><span class="sxs-lookup"><span data-stu-id="ddebb-271">Filters narrow down hello set of candidate documents for search and exclude them from ranking.</span></span> <span data-ttu-id="ddebb-272">Pokud máte velké sady dokumentů, často pomocí selektivní omezující vlastnost procházení poskytuje lepší výkon.</span><span class="sxs-lookup"><span data-stu-id="ddebb-272">If you have a large set of documents, using a selective facet drill-down often gives you better performance.</span></span>
  
<span data-ttu-id="ddebb-273">**Filtrovat jenom hello Fasetové pole**</span><span class="sxs-lookup"><span data-stu-id="ddebb-273">**Filter only hello faceted fields**</span></span>

<span data-ttu-id="ddebb-274">V Fasetové procházení, obvykle je vhodné tooonly obsahovat dokumenty, které obsahují hodnota omezující vlastnosti hello v určitém poli (Fasetové), není kdekoli napříč všechna prohledatelná pole.</span><span class="sxs-lookup"><span data-stu-id="ddebb-274">In faceted drill-down, you typically want tooonly include documents that have hello facet value in a specific (faceted) field, not anywhere across all searchable fields.</span></span> <span data-ttu-id="ddebb-275">Přidání filtru posiluje hello cílové pole přesměrováním hello služby toosearch hello Fasetové pole pro odpovídající hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-275">Adding a filter reinforces hello target field by directing hello service toosearch only in hello faceted field for a matching value.</span></span>

<span data-ttu-id="ddebb-276">**Trim omezující vlastnost výsledků s další filtry**</span><span class="sxs-lookup"><span data-stu-id="ddebb-276">**Trim facet results with more filters**</span></span>

<span data-ttu-id="ddebb-277">Omezující vlastnost výsledky jsou dokumenty nalezen ve výsledcích hledání hello, které odpovídají termín omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-277">Facet results are documents found in hello search results that match a facet term.</span></span> <span data-ttu-id="ddebb-278">V následující ukázka ve výsledcích hledání hello *cloud computing*, 254 položky mají také *interní specifikace* jako typ obsahu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-278">In hello following example, in search results for *cloud computing*, 254 items also have *internal specification* as a content type.</span></span> <span data-ttu-id="ddebb-279">Položky nejsou nezbytně vzájemně vylučují.</span><span class="sxs-lookup"><span data-stu-id="ddebb-279">Items are not necessarily mutually exclusive.</span></span> <span data-ttu-id="ddebb-280">Pokud položku splňuje hello kritéria obou filtrů, se počítá v každé z nich.</span><span class="sxs-lookup"><span data-stu-id="ddebb-280">If an item meets hello criteria of both filters, it is counted in each one.</span></span> <span data-ttu-id="ddebb-281">Tato duplikace je možné při používání omezujících vlastností na `Collection(Edm.String)` pole, které jsou často používá tooimplement označování dokumentu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-281">This duplication is possible when faceting on `Collection(Edm.String)` fields, which are often used tooimplement document tagging.</span></span>

        Search term: "cloud computing"
        Content type
           Internal specification (254)
           Video (10) 

<span data-ttu-id="ddebb-282">Obecně platí Pokud zjistíte, že výsledky omezující vlastnost konzistentně příliš velký, doporučujeme přidat další filtry toogive uživatelé další možnosti pro zúžení hello vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-282">In general, if you find that facet results are consistently too large, we recommend that you add more filters toogive users more options for narrowing hello search.</span></span>

### <a name="tips-about-result-count"></a><span data-ttu-id="ddebb-283">Tipy k počet výsledků</span><span class="sxs-lookup"><span data-stu-id="ddebb-283">Tips about result count</span></span>

<span data-ttu-id="ddebb-284">**Limit hello počet položek v hello omezující vlastnosti navigace**</span><span class="sxs-lookup"><span data-stu-id="ddebb-284">**Limit hello number of items in hello facet navigation**</span></span>

<span data-ttu-id="ddebb-285">Pro každé Fasetové pole v hello navigačním stromu je výchozí limit 10 hodnot.</span><span class="sxs-lookup"><span data-stu-id="ddebb-285">For each faceted field in hello navigation tree, there is a default limit of 10 values.</span></span> <span data-ttu-id="ddebb-286">Toto výchozí nastavení má smysl pro navigační struktury, protože udržuje hello hodnoty seznamu tooa spravovat velikost.</span><span class="sxs-lookup"><span data-stu-id="ddebb-286">This default makes sense for navigation structures because it keeps hello values list tooa manageable size.</span></span> <span data-ttu-id="ddebb-287">Můžete přepsat výchozí hello přiřazením toocount hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-287">You can override hello default by assigning a value toocount.</span></span>

* <span data-ttu-id="ddebb-288">`&facet=city,count:5`Určuje, že pouze hello prvních pět města najít v horní části hello seřazeny výsledky se vrátí jako výsledek omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-288">`&facet=city,count:5` specifies that only hello first five cities found in hello top ranked results are returned as a facet result.</span></span> <span data-ttu-id="ddebb-289">Vezměte v úvahu ukázkový dotaz s hledaný termín "letiště" a odpovídá 32.</span><span class="sxs-lookup"><span data-stu-id="ddebb-289">Consider a sample query with a search term of “airport” and 32 matches.</span></span> <span data-ttu-id="ddebb-290">Pokud dotaz hello Určuje `&facet=city,count:5`jen měst prvních pět jedinečný hello s hello jsou součástí většina dokumenty ve výsledcích hledání hello hello omezující vlastnost výsledků.</span><span class="sxs-lookup"><span data-stu-id="ddebb-290">If hello query specifies `&facet=city,count:5`, only hello first five unique cities with hello most documents in hello search results are included in hello facet results.</span></span>

<span data-ttu-id="ddebb-291">Všimněte si hello odlišit omezující vlastnost výsledky a výsledky hledání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-291">Notice hello distinction between facet results and search results.</span></span> <span data-ttu-id="ddebb-292">Výsledky hledání jsou všechny hello dokumenty, které odpovídají dotazu hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-292">Search results are all hello documents that match hello query.</span></span> <span data-ttu-id="ddebb-293">Omezující vlastnost výsledky jsou hello odpovídá pro každou hodnotu omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-293">Facet results are hello matches for each facet value.</span></span> <span data-ttu-id="ddebb-294">V příkladu hello výsledky hledání obsahují města názvy, které nejsou v seznamu klasifikace omezující vlastnost hello (v našem příkladu 5).</span><span class="sxs-lookup"><span data-stu-id="ddebb-294">In hello example, search results include City names that are not in hello facet classification list (5 in our example).</span></span> <span data-ttu-id="ddebb-295">Po vymazání omezující vlastnosti, nebo zvolte jiné omezující vlastnosti kromě města se vidět výsledky, které jsou odfiltrována prostřednictvím Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-295">Results that are filtered out through faceted navigation become visible when you clear facets, or choose other facets besides City.</span></span> 

> [!NOTE]
> <span data-ttu-id="ddebb-296">Hovoříte o `count` při více než jeden typ může být matoucí.</span><span class="sxs-lookup"><span data-stu-id="ddebb-296">Discussing `count` when there is more than one type can be confusing.</span></span> <span data-ttu-id="ddebb-297">Hello následující tabulka nabízí stručné souhrnné informace o použití hello termín v rozhraní API služby Azure Search, ukázky kódu a dokumentaci.</span><span class="sxs-lookup"><span data-stu-id="ddebb-297">hello following table offers a brief summary of how hello term is used in Azure Search API, sample code, and documentation.</span></span> 

* `@colorFacet.count`<br/>
  <span data-ttu-id="ddebb-298">V kódu prezentace měli byste vidět počet parametrů na omezující vlastnost hello, použité toodisplay hello počet výsledků omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-298">In presentation code, you should see a count parameter on hello facet, used toodisplay hello number of facet results.</span></span> <span data-ttu-id="ddebb-299">Ve výsledcích omezující vlastnost určuje počet hello počet dokumentů, které odpovídají na hello omezující vlastnost termín nebo rozsah.</span><span class="sxs-lookup"><span data-stu-id="ddebb-299">In facet results, count indicates hello number of documents that match on hello facet term or range.</span></span>
* `&facet=City,count:12`<br/>
  <span data-ttu-id="ddebb-300">V dotazu omezující vlastnosti můžete nastavit počet tooa hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-300">In a facet query, you can set count tooa value.</span></span>  <span data-ttu-id="ddebb-301">Hello výchozí hodnota je 10, ale můžete nastavit vyšší nebo nižší.</span><span class="sxs-lookup"><span data-stu-id="ddebb-301">hello default is 10, but you can set it higher or lower.</span></span> <span data-ttu-id="ddebb-302">Nastavení `count:12` získá hello nejvyšší 12 odpovídá ve výsledcích omezující vlastnosti podle počtu dokumentu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-302">Setting `count:12` gets hello top 12 matches in facet results by document count.</span></span>
* <span data-ttu-id="ddebb-303">"`@odata.count`"</span><span class="sxs-lookup"><span data-stu-id="ddebb-303">"`@odata.count`"</span></span><br/>
  <span data-ttu-id="ddebb-304">V odpovědi na dotaz hello tato hodnota označuje hello počet odpovídajících položek ve výsledcích hledání hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-304">In hello query response, this value indicates hello number of matching items in hello search results.</span></span> <span data-ttu-id="ddebb-305">V průměru je větší než součet hello výsledků omezující vlastnost kombinaci z důvodu přítomnosti toohello položky, které odpovídají hello hledaný termín, ale obsahuje žádné odpovídající hodnota omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-305">On average, it’s larger than hello sum of all facet results combined, due toohello presence of items that match hello search term, but have no facet value matches.</span></span>

<span data-ttu-id="ddebb-306">**Získat ve výsledcích omezující vlastnost**</span><span class="sxs-lookup"><span data-stu-id="ddebb-306">**Get counts in facet results**</span></span>

<span data-ttu-id="ddebb-307">Když přidáte Fasetové dotazu filter tooa, můžete příkaz omezující vlastnost hello tooretain (například `facet=Rating&$filter=Rating ge 4`).</span><span class="sxs-lookup"><span data-stu-id="ddebb-307">When you add a filter tooa faceted query, you might want tooretain hello facet statement (for example, `facet=Rating&$filter=Rating ge 4`).</span></span> <span data-ttu-id="ddebb-308">Technicky omezující vlastnost = hodnocení není vyžadována, ale bude vrací hello počty hodnoty omezující vlastnosti pro hodnocení, 4 a vyšší.</span><span class="sxs-lookup"><span data-stu-id="ddebb-308">Technically, facet=Rating isn’t needed, but keeping it returns hello counts of facet values for ratings 4 and higher.</span></span> <span data-ttu-id="ddebb-309">Například pokud jste na tlačítko "4" a hello dotaz obsahuje filtr pro větší nebo rovna příliš "4", počty se vrátí pro každou hodnocení, která je 4 a vyšší.</span><span class="sxs-lookup"><span data-stu-id="ddebb-309">For example, if you click "4" and hello query includes a filter for greater or equal too"4", counts are returned for each rating that is 4 and higher.</span></span>  

<span data-ttu-id="ddebb-310">**Ujistěte se, že můžete získat přesné omezující vlastnost**</span><span class="sxs-lookup"><span data-stu-id="ddebb-310">**Make sure you get accurate facet counts**</span></span>

<span data-ttu-id="ddebb-311">Za určitých okolností, můžete zjistit, že počty omezující vlastnost neodpovídají hello sad výsledků dotazu (viz [Fasetové navigace ve službě Azure Search (příspěvek na fóru)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span><span class="sxs-lookup"><span data-stu-id="ddebb-311">Under certain circumstances, you might find that facet counts do not match hello result sets (see [Faceted navigation in Azure Search (forum post)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span></span>

<span data-ttu-id="ddebb-312">Počty omezující vlastnost může být nesprávné kvůli architektura toohello horizontálního dělení.</span><span class="sxs-lookup"><span data-stu-id="ddebb-312">Facet counts can be inaccurate due toohello sharding architecture.</span></span> <span data-ttu-id="ddebb-313">Každý index vyhledávání má víc horizontálních oddílů a každý horizontálního oddílu sestavy omezující vlastnosti hlavních hello podle počtu dokumentu, který je pak zkombinované do jednoho výsledku.</span><span class="sxs-lookup"><span data-stu-id="ddebb-313">Every search index has multiple shards, and each shard reports hello top N facets by document count, which is then combined into a single result.</span></span> <span data-ttu-id="ddebb-314">Pokud některé horizontálních oddílů mnoho odpovídající hodnoty, zatímco ostatní uživatelé mají méně, můžete zjistit, zda některé hodnoty omezující vlastnost chybí a v části započítány ve výsledcích hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-314">If some shards have many matching values, while others have fewer, you may find that some facet values are missing or under-counted in hello results.</span></span>

<span data-ttu-id="ddebb-315">I když toto chování změnit kdykoli, pokud dojde k tomuto chování dnes, můžete alternativně vyřešit ji pomocí uměle nafouknutí počet hello:<number> tooa velký počet tooenforce Úplné generování sestav z každé horizontálního oddílu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-315">Although this behavior could change at any time, if you encounter this behavior today, you can work around it by artificially inflating hello count:<number> tooa large number tooenforce full reporting from each shard.</span></span> <span data-ttu-id="ddebb-316">Pokud hello hodnota počtu: je větší než nebo rovna toohello počet jedinečných hodnot v poli hello, že je zaručeno přesné výsledky.</span><span class="sxs-lookup"><span data-stu-id="ddebb-316">If hello value of count: is greater than or equal toohello number of unique values in hello field, you are guaranteed accurate results.</span></span> <span data-ttu-id="ddebb-317">Ale pokud jsou vysoké počty dokumentů, je snížení výkonu, proto tuto možnost použijte uvážlivě.</span><span class="sxs-lookup"><span data-stu-id="ddebb-317">However, when document counts are high, there is a performance penalty, so use this option judiciously.</span></span>

### <a name="user-interface-tips"></a><span data-ttu-id="ddebb-318">Tipy pro uživatelské rozhraní</span><span class="sxs-lookup"><span data-stu-id="ddebb-318">User interface tips</span></span>
<span data-ttu-id="ddebb-319">**Přidání popisky pro každé pole v omezující vlastnosti navigace**</span><span class="sxs-lookup"><span data-stu-id="ddebb-319">**Add labels for each field in facet navigation**</span></span>

<span data-ttu-id="ddebb-320">Popisky jsou obvykle definovány v hello HTML nebo formátu (`index.cshtml` v ukázkové aplikaci hello).</span><span class="sxs-lookup"><span data-stu-id="ddebb-320">Labels are typically defined in hello HTML or form (`index.cshtml` in hello sample application).</span></span> <span data-ttu-id="ddebb-321">Neexistuje žádné rozhraní API ve službě Azure Search pro omezující vlastnosti navigace popisky nebo další metadata.</span><span class="sxs-lookup"><span data-stu-id="ddebb-321">There is no API in Azure Search for facet navigation labels or any other metadata.</span></span>

<a name="rangefacets"></a>

## <a name="filter-based-on-a-range"></a><span data-ttu-id="ddebb-322">Filtr na základě rozsahu</span><span class="sxs-lookup"><span data-stu-id="ddebb-322">Filter based on a range</span></span>
<span data-ttu-id="ddebb-323">Používání faset přes rozsah hodnot je běžné aplikace požadavek vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="ddebb-323">Faceting over ranges of values is a common search application requirement.</span></span> <span data-ttu-id="ddebb-324">Rozsahy jsou podporovány pro číselná data a hodnoty DateTime.</span><span class="sxs-lookup"><span data-stu-id="ddebb-324">Ranges are supported for numeric data and DateTime values.</span></span> <span data-ttu-id="ddebb-325">Další informace o jednotlivých přístupů v [vyhledávání dokumentů (API služby Azure Search)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span><span class="sxs-lookup"><span data-stu-id="ddebb-325">You can read more about each approach in [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span></span>

<span data-ttu-id="ddebb-326">Vyhledávání systému Azure zjednodušuje vytváření rozsahu tím, že poskytuje dva přístupy pro výpočty rozsah.</span><span class="sxs-lookup"><span data-stu-id="ddebb-326">Azure Search simplifies range construction by providing two approaches for computing a range.</span></span> <span data-ttu-id="ddebb-327">Pro oba přístupy vytvoří Azure Search hello příslušné rozsahy zadané vstupy hello, které jste zadali.</span><span class="sxs-lookup"><span data-stu-id="ddebb-327">For both approaches, Azure Search creates hello appropriate ranges given hello inputs you’ve provided.</span></span> <span data-ttu-id="ddebb-328">Například pokud zadáte hodnoty rozsahu 10 | 20 | 30, automaticky vytvoří rozsahy 0-10, 10 20, 20-30.</span><span class="sxs-lookup"><span data-stu-id="ddebb-328">For instance, if you specify range values of 10|20|30, it automatically creates ranges of 0-10, 10-20, 20-30.</span></span> <span data-ttu-id="ddebb-329">Aplikace můžete volitelně odebrat žádné intervaly, které jsou prázdné.</span><span class="sxs-lookup"><span data-stu-id="ddebb-329">Your application can optionally remove any intervals that are empty.</span></span> 

<span data-ttu-id="ddebb-330">**Způsob 1: Pomocí parametru interval hello**</span><span class="sxs-lookup"><span data-stu-id="ddebb-330">**Approach 1: Use hello interval parameter**</span></span>  
<span data-ttu-id="ddebb-331">tooset omezující cenu v přírůstcích po 10, zadali byste:`&facet=price,interval:10`</span><span class="sxs-lookup"><span data-stu-id="ddebb-331">tooset price facets in $10 increments, you would specify: `&facet=price,interval:10`</span></span>

<span data-ttu-id="ddebb-332">**Způsob 2: Použijte seznam hodnot**</span><span class="sxs-lookup"><span data-stu-id="ddebb-332">**Approach 2: Use a values list**</span></span>  
<span data-ttu-id="ddebb-333">Číselná data můžete seznam hodnot.</span><span class="sxs-lookup"><span data-stu-id="ddebb-333">For numeric data, you can use a values list.</span></span>  <span data-ttu-id="ddebb-334">Vezměte v úvahu rozsah hello omezující vlastnosti pro `listPrice` pole, vykresluje následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="ddebb-334">Consider hello facet range for a `listPrice` field, rendered as follows:</span></span>

  ![Seznam ukázek hodnoty][5]

<span data-ttu-id="ddebb-336">toospecify rozsah omezující vlastnosti, jako v předchozím snímku obrazovky hello hello použijte seznam hodnot:</span><span class="sxs-lookup"><span data-stu-id="ddebb-336">toospecify a facet range like hello one in hello preceding screen shot, use a values list:</span></span>

    facet=listPrice,values:10|25|100|500|1000|2500

<span data-ttu-id="ddebb-337">Každý rozsah je sestaven pomocí 0 jako počáteční bod, hodnotu ze seznamu hello jako koncový bod a pak oříznut hello předchozí rozsah toocreate diskrétní intervalů.</span><span class="sxs-lookup"><span data-stu-id="ddebb-337">Each range is built using 0 as a starting point, a value from hello list as an endpoint, and then trimmed of hello previous range toocreate discrete intervals.</span></span> <span data-ttu-id="ddebb-338">Vyhledávání systému Azure se provádí tyto věci jako součást Fasetové navigace.</span><span class="sxs-lookup"><span data-stu-id="ddebb-338">Azure Search does these things as part of faceted navigation.</span></span> <span data-ttu-id="ddebb-339">Nemáte toowrite kód pro vytvoření struktury v každém intervalu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-339">You do not have toowrite code for structuring each interval.</span></span>

### <a name="build-a-filter-for-a-range"></a><span data-ttu-id="ddebb-340">Vytvořit filtr pro rozsah</span><span class="sxs-lookup"><span data-stu-id="ddebb-340">Build a filter for a range</span></span>
<span data-ttu-id="ddebb-341">na základě rozsahu vyberete toofilter dokumenty, můžete použít hello `"ge"` a `"lt"` filtrovat operátory ve dvou částech výraz, který definuje koncové body hello hello rozsahu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-341">toofilter documents based on a range you select, you can use hello `"ge"` and `"lt"` filter operators in a two-part expression that defines hello endpoints of hello range.</span></span> <span data-ttu-id="ddebb-342">Například pokud se rozhodnete hello rozsah 10 až 25 `listPrice` pole, bude filtr hello `$filter=listPrice ge 10 and listPrice lt 25`.</span><span class="sxs-lookup"><span data-stu-id="ddebb-342">For example, if you choose hello range 10-25 for a `listPrice` field, hello filter would be `$filter=listPrice ge 10 and listPrice lt 25`.</span></span> <span data-ttu-id="ddebb-343">V ukázkovém kódu hello, výrazu filtru hello používá **priceFrom** a **priceTo** parametry tooset hello koncové body.</span><span class="sxs-lookup"><span data-stu-id="ddebb-343">In hello sample code, hello filter expression uses **priceFrom** and **priceTo** parameters tooset hello endpoints.</span></span> 

  ![Dotazy na rozsah hodnot][6]

<a name="geofacets"></a> 

## <a name="filter-based-on-distance"></a><span data-ttu-id="ddebb-345">Filtrovat na základě vzdálenosti</span><span class="sxs-lookup"><span data-stu-id="ddebb-345">Filter based on distance</span></span>
<span data-ttu-id="ddebb-346">Běžné toosee filtry, které pomáhají zvolit úložiště, restaurace nebo cíl v závislosti na jeho blízkosti tooyour aktuálního umístění.</span><span class="sxs-lookup"><span data-stu-id="ddebb-346">It’s common toosee filters that help you choose a store, restaurant, or destination based on its proximity tooyour current location.</span></span> <span data-ttu-id="ddebb-347">Tento typ filtru může vypadat například Fasetové navigace, je právě filtru.</span><span class="sxs-lookup"><span data-stu-id="ddebb-347">While this type of filter might look like faceted navigation, it’s just a filter.</span></span> <span data-ttu-id="ddebb-348">Jsme zmínili ji sem pro těch, které jste, který hledáte konkrétně implementace Rady, jak tento problém konkrétního návrhu.</span><span class="sxs-lookup"><span data-stu-id="ddebb-348">We mention it here for those of you who are specifically looking for implementation advice for that particular design problem.</span></span>

<span data-ttu-id="ddebb-349">Ve službě Azure Search jsou dvě funkce geoprostorové **geo.distance** a **geo.intersects**.</span><span class="sxs-lookup"><span data-stu-id="ddebb-349">There are two Geospatial functions in Azure Search, **geo.distance** and **geo.intersects**.</span></span>

* <span data-ttu-id="ddebb-350">Hello **geo.distance** funkce vrátí hello vzdálenost v kilometrech mezi dva body.</span><span class="sxs-lookup"><span data-stu-id="ddebb-350">hello **geo.distance** function returns hello distance in kilometers between two points.</span></span> <span data-ttu-id="ddebb-351">Jeden bod je pole a druhá je konstanta předanou v rámci hello filtru.</span><span class="sxs-lookup"><span data-stu-id="ddebb-351">One point is a field and other is a constant passed as part of hello filter.</span></span> 
* <span data-ttu-id="ddebb-352">Hello **geo.intersects** funkce vrátí hodnotu true, pokud k danému bodu je v rámci dané mnohoúhelníku.</span><span class="sxs-lookup"><span data-stu-id="ddebb-352">hello **geo.intersects** function returns true if a given point is within a given polygon.</span></span> <span data-ttu-id="ddebb-353">bod Hello je pole a mnohoúhelníku hello je zadán jako seznam souřadnice předanou v rámci hello filtru konstantní.</span><span class="sxs-lookup"><span data-stu-id="ddebb-353">hello point is a field and hello polygon is specified as a constant list of coordinates passed as part of hello filter.</span></span>

<span data-ttu-id="ddebb-354">Můžete najít příklady filtru v [syntaxe výrazu OData (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span><span class="sxs-lookup"><span data-stu-id="ddebb-354">You can find filter examples in [OData expression syntax (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span></span>

<a name="tryitout"></a>

## <a name="try-hello-demo"></a><span data-ttu-id="ddebb-355">Zkuste ukázku hello</span><span class="sxs-lookup"><span data-stu-id="ddebb-355">Try hello demo</span></span>
<span data-ttu-id="ddebb-356">Hello Azure Search úlohy portál ukázku obsahuje příklady hello odkazuje v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="ddebb-356">hello Azure Search Job Portal Demo contains hello examples referenced in this article.</span></span>

-   <span data-ttu-id="ddebb-357">Zobrazit a otestovat hello pracovní ukázkový online v [Azure Search úlohy portál ukázku](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="ddebb-357">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="ddebb-358">Stáhnout hello kód z hello [Azure-Samples úložišti na Githubu](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="ddebb-358">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

<span data-ttu-id="ddebb-359">Při práci s výsledky hledání, podívejte se na adresu URL hello změny v dotazu konstrukce.</span><span class="sxs-lookup"><span data-stu-id="ddebb-359">As you work with search results, watch hello URL for changes in query construction.</span></span> <span data-ttu-id="ddebb-360">Tato aplikace se stane tooappend omezující vlastnosti toohello identifikátoru URI při výběru každé z nich.</span><span class="sxs-lookup"><span data-stu-id="ddebb-360">This application happens tooappend facets toohello URI as you select each one.</span></span>

1. <span data-ttu-id="ddebb-361">mapování funkce toouse hello hello ukázkovou aplikaci, získat klíč mapy Bing z hello [Dev Center pro mapy Bing](https://www.bingmapsportal.com/).</span><span class="sxs-lookup"><span data-stu-id="ddebb-361">toouse hello mapping functionality of hello demo app, get a Bing Maps key from hello [Bing Maps Dev Center](https://www.bingmapsportal.com/).</span></span> <span data-ttu-id="ddebb-362">Vložení prostřednictvím hello existující klíč v hello `index.cshtml` stránky.</span><span class="sxs-lookup"><span data-stu-id="ddebb-362">Paste it over hello existing key in hello `index.cshtml` page.</span></span> <span data-ttu-id="ddebb-363">Hello `BingApiKey` nastavení v hello `Web.config` soubor se nepoužije.</span><span class="sxs-lookup"><span data-stu-id="ddebb-363">hello `BingApiKey` setting in hello `Web.config` file is not used.</span></span> 

2. <span data-ttu-id="ddebb-364">Spusťte aplikaci hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-364">Run hello application.</span></span> <span data-ttu-id="ddebb-365">Volitelné prohlídku hello nebo zavřít dialogové okno hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-365">Take hello optional tour, or dismiss hello dialog box.</span></span>
   
3. <span data-ttu-id="ddebb-366">Zadejte hledaný termín, jako je například "analytik" a klikněte na ikonu hledání hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-366">Enter a search term, such as "analyst", and click hello Search icon.</span></span> <span data-ttu-id="ddebb-367">Hello dotazu se provede rychle.</span><span class="sxs-lookup"><span data-stu-id="ddebb-367">hello query executes quickly.</span></span>
   
   <span data-ttu-id="ddebb-368">Struktura Fasetové navigace, vrátí se výsledky hledání hello.</span><span class="sxs-lookup"><span data-stu-id="ddebb-368">A faceted navigation structure is also returned with hello search results.</span></span> <span data-ttu-id="ddebb-369">Ve výsledcích hello hledání hello Fasetové navigace struktura zahrnuje počty pro každý výsledek omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-369">In hello search result page, hello faceted navigation structure includes counts for each facet result.</span></span> <span data-ttu-id="ddebb-370">Žádné omezující vlastnosti jsou vybrané, takže jsou vráceny všechny odpovídající výsledky.</span><span class="sxs-lookup"><span data-stu-id="ddebb-370">No facets are selected, so all matching results are returned.</span></span>
   
   ![Výsledky hledání před výběrem omezující vlastnosti][11]

4. <span data-ttu-id="ddebb-372">Klikněte na název firmy, umístění nebo minimální mzda.</span><span class="sxs-lookup"><span data-stu-id="ddebb-372">Click a Business Title, Location, or Minimum Salary.</span></span> <span data-ttu-id="ddebb-373">Omezující vlastnost měla hodnotu null u hello počáteční hledání, ale přijmou na hodnoty jsou výsledky hledání hello oříznut položek, které už neodpovídá.</span><span class="sxs-lookup"><span data-stu-id="ddebb-373">Facets were null on hello initial search, but as they take on values, hello search results are trimmed of items that no longer match.</span></span>
   
   ![Výsledky hledání po výběru omezující vlastnosti][12]

5. <span data-ttu-id="ddebb-375">tooclear hello Fasetové dotaz tak, aby můžete zkusit jiný dotaz chování, klikněte na tlačítko hello `[X]` po výběru hello omezující vlastnosti tooclear hello omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-375">tooclear hello faceted query so that you can try different query behaviors, click hello `[X]` after hello selected facets tooclear hello facets.</span></span>
   
<a name="nextstep"></a>

## <a name="learn-more"></a><span data-ttu-id="ddebb-376">Další informace</span><span class="sxs-lookup"><span data-stu-id="ddebb-376">Learn more</span></span>
<span data-ttu-id="ddebb-377">Kukátko [Deep Dive informace o službě Azure Search](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span><span class="sxs-lookup"><span data-stu-id="ddebb-377">Watch [Azure Search Deep Dive](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span></span> <span data-ttu-id="ddebb-378">V 45:25, je ukázku na postupy tooimplement omezující vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ddebb-378">At 45:25, there is a demo on how tooimplement facets.</span></span>

<span data-ttu-id="ddebb-379">Pro další statistiky na zásadách návrhu pro fasetovou navigaci doporučujeme hello následující odkazy:</span><span class="sxs-lookup"><span data-stu-id="ddebb-379">For more insights on design principles for faceted navigation, we recommend hello following links:</span></span>

* [<span data-ttu-id="ddebb-380">Návrh a Fasetové vyhledávání</span><span class="sxs-lookup"><span data-stu-id="ddebb-380">Designing for Faceted Search</span></span>](http://www.uie.com/articles/faceted_search/)
* [<span data-ttu-id="ddebb-381">Vzory návrhu: Fasetové navigace</span><span class="sxs-lookup"><span data-stu-id="ddebb-381">Design Patterns: Faceted Navigation</span></span>](http://alistapart.com/article/design-patterns-faceted-navigation)


<!--Anchors-->
[How toobuild it]: #howtobuildit
[Build hello presentation layer]: #presentationlayer
[Build hello index]: #buildindex
[Check for data quality]: #checkdata
[Build hello query]: #buildquery
[Tips on how toocontrol faceted navigation]: #tips
[Faceted navigation based on range values]: #rangefacets
[Faceted navigation based on GeoPoints]: #geofacets
[Try it out]: #tryitout

<!--Image references-->
[1]: ./media/search-faceted-navigation/azure-search-faceting-example.PNG
[2]: ./media/search-faceted-navigation/Facet-2-CSHTML.PNG
[3]: ./media/search-faceted-navigation/Facet-3-schema.PNG
[4]: ./media/search-faceted-navigation/Facet-4-SearchMethod.PNG
[5]: ./media/search-faceted-navigation/Facet-5-Prices.PNG
[6]: ./media/search-faceted-navigation/Facet-6-buildfilter.PNG
[7]: ./media/search-faceted-navigation/Facet-7-appstart.png
[8]: ./media/search-faceted-navigation/Facet-8-appbike.png
[9]: ./media/search-faceted-navigation/Facet-9-appbikefaceted.png
[10]: ./media/search-faceted-navigation/Facet-10-appTitle.png
[11]: ./media/search-faceted-navigation/faceted-search-before-facets.png
[12]: ./media/search-faceted-navigation/faceted-search-after-facets.png

<!--Link references-->
[Designing for Faceted Search]: http://www.uie.com/articles/faceted_search/
[Design Patterns: Faceted Navigation]: http://alistapart.com/article/design-patterns-faceted-navigation
[Create your first application]: search-create-first-solution.md
[OData expression syntax (Azure Search)]: http://msdn.microsoft.com/library/azure/dn798921.aspx
[Azure Search Adventure Works Demo]: https://azuresearchadventureworksdemo.codeplex.com/
[http://www.odata.org/documentation/odata-version-2-0/overview/]: http://www.odata.org/documentation/odata-version-2-0/overview/ 
[Faceting on Azure Search forum post]: ../faceting-on-azure-search.md?forum=azuresearch
[Search Documents (Azure Search API)]: http://msdn.microsoft.com/library/azure/dn798927.aspx

