---
title: "aaaWorking s velké sady škálování virtuálního počítače Azure | Microsoft Docs"
description: "Co je třeba sad škálování tooknow toouse velký virtuální počítač Azure"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: a39aab25925d7fc50763f0a20148b1f2213b492f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/06/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a><span data-ttu-id="be404-103">Práce s velkými škálovacími sadami virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="be404-103">Working with large virtual machine scale sets</span></span>
<span data-ttu-id="be404-104">Nyní můžete vytvořit Azure [sady škálování virtuálního počítače](/azure/virtual-machine-scale-sets/) s kapacitou až too1 000 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-104">You can now create Azure [virtual machine scale sets](/azure/virtual-machine-scale-sets/) with a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="be404-105">V tomto dokumentu _škálovací sadu virtuálních počítačů velké_ je definován jako škálování nastavit podporující škálování toogreater než 100 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-105">In this document, a _large virtual machine scale set_ is defined as a scale set capable of scaling toogreater than 100 VMs.</span></span> <span data-ttu-id="be404-106">Tato funkce se nastavuje pomocí vlastnosti škálovací sady (_singlePlacementGroup=False_).</span><span class="sxs-lookup"><span data-stu-id="be404-106">This capability is set by a scale set property (_singlePlacementGroup=False_).</span></span> 

<span data-ttu-id="be404-107">Nastaví konkrétních aspektů velkém měřítku, například zatížení vyrovnávání a selhání domény chovat jinak tooa standardní škálovací sadu.</span><span class="sxs-lookup"><span data-stu-id="be404-107">Certain aspects of large scale sets, such as load balancing and fault domains behave differently tooa standard scale set.</span></span> <span data-ttu-id="be404-108">Tento dokument popisuje vlastnosti hello sad velkém měřítku a popisuje, co je třeba tooknow toosuccessfully používat ve svých aplikacích.</span><span class="sxs-lookup"><span data-stu-id="be404-108">This document explains hello characteristics of large scale sets, and describes what you need tooknow toosuccessfully use them in your applications.</span></span> 

<span data-ttu-id="be404-109">Běžný postup nasazení infrastruktury cloudu ve velkém měřítku je toocreate sadu _jednotek škálování_, třeba tak, že vytvoříte víc virtuálních počítačů škálování sad napříč více virtuálních sítí a účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="be404-109">A common approach for deploying cloud infrastructure at large scale is toocreate a set of _scale units_, for example by creating multiple VMs scale sets across multiple VNETs and storage accounts.</span></span> <span data-ttu-id="be404-110">Tento přístup poskytuje snazší správa ve srovnání toosingle virtuální počítače a víc jednotek škálování jsou užitečné pro mnoho aplikací, zejména ty, které vyžadují další stohovatelných komponenty, jako jsou více virtuálních sítí a koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="be404-110">This approach provides easier management compared toosingle VMs, and multiple scale units are useful for many applications, particularly those that require other stackable components like multiple virtual networks and endpoints.</span></span> <span data-ttu-id="be404-111">Pokud vaše aplikace vyžaduje ale jeden cluster velké, může být více přehledné toodeploy jeden škálování, z nastavení too1 000 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-111">If your application requires a single large cluster however, it can be more straightforward toodeploy a single scale set of up too1,000 VMs.</span></span> <span data-ttu-id="be404-112">Ukázkové scénáře zahrnují centralizovaná nasazení pro velké objemy dat nebo výpočetní sítě, které vyžadují jednoduchou správu velkého fondu pracovních uzlů.</span><span class="sxs-lookup"><span data-stu-id="be404-112">Example scenarios include centralized big data deployments, or compute grids requiring simple management of a large pool of worker nodes.</span></span> <span data-ttu-id="be404-113">V kombinaci s sadu škálování virtuálního počítače [připojené datových disků](virtual-machine-scale-sets-attached-disks.md), nastaví velkém měřítku umožňují toodeploy škálovatelné infrastruktury sestávající z tisíce jader a petabajty úložiště, jako jednu operaci.</span><span class="sxs-lookup"><span data-stu-id="be404-113">Combined with VM scale set [attached data disks](virtual-machine-scale-sets-attached-disks.md), large scale sets enable you toodeploy a scalable infrastructure consisting of thousands of cores and petabytes of storage, as a single operation.</span></span>

## <a name="placement-groups"></a><span data-ttu-id="be404-114">Skupiny umístění</span><span class="sxs-lookup"><span data-stu-id="be404-114">Placement groups</span></span> 
<span data-ttu-id="be404-115">Díky _velké_ škálování nastavit zvláštní není hello počet virtuálních počítačů, ale počet hello _umístění skupiny_ obsahuje.</span><span class="sxs-lookup"><span data-stu-id="be404-115">What makes a _large_ scale set special is not hello number of VMs, but hello number of _placement groups_ it contains.</span></span> <span data-ttu-id="be404-116">Umístění skupiny je konstrukce podobné tooan Azure dostupnosti sada, s vlastní domén selhání a domén upgradu.</span><span class="sxs-lookup"><span data-stu-id="be404-116">A placement group is a construct similar tooan Azure availability set, with its own fault domains and upgrade domains.</span></span> <span data-ttu-id="be404-117">Ve výchozím nastavení škálovací sada obsahuje jedinou skupinu umístění s maximální velikostí 100 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-117">By default, a scale set consists of a single placement group with a maximum size of 100 VMs.</span></span> <span data-ttu-id="be404-118">Pokud škálování nastavena vlastnost s názvem _singlePlacementGroup_ nastavena too_false_, hello škálovací sadu můžete skládá z více skupin pro umístění a má rozsah 0-1 000 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-118">If a scale set property called _singlePlacementGroup_ is set too_false_, hello scale set can be composed of multiple placement groups and has a range of 0-1,000 VMs.</span></span> <span data-ttu-id="be404-119">Pokud nastavíte výchozí hodnotu toohello _true_, sada škálování se skládá z jednoho umístění skupiny a má rozsah 0-100 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-119">When set toohello default value of _true_, a scale set is composed of a single placement group, and has a range of 0-100 VMs.</span></span>

## <a name="checklist-for-using-large-scale-sets"></a><span data-ttu-id="be404-120">Kontrolní seznam pro používání velkých škálovací sad</span><span class="sxs-lookup"><span data-stu-id="be404-120">Checklist for using large scale sets</span></span>
<span data-ttu-id="be404-121">jestli vaše aplikace provádět efektivní použití sad velkém měřítku, zvažte toodecide hello následující požadavky:</span><span class="sxs-lookup"><span data-stu-id="be404-121">toodecide whether your application can make effective use of large scale sets, consider hello following requirements:</span></span>

- <span data-ttu-id="be404-122">Velké škálovací sady vyžadují službu Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="be404-122">Large scale sets require Azure Managed Disks.</span></span> <span data-ttu-id="be404-123">Škálovací sady vytvořené bez disků služby Managed Disks vyžadují více účtů úložiště (jeden na každých 20 virtuálních počítačů).</span><span class="sxs-lookup"><span data-stu-id="be404-123">Scale sets that are not created with Managed Disks require multiple storage accounts (one for every 20 VMs).</span></span> <span data-ttu-id="be404-124">Nastavuje velkém měřítku jsou navrženou toowork výhradně pomocí tooreduce spravované disky omezuje riziko úložiště režii správy a tooavoid hello spuštěných do předplatného pro účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="be404-124">Large scale sets are designed toowork exclusively with Managed Disks tooreduce your storage management overhead, and tooavoid hello risk of running into subscription limits for storage accounts.</span></span> <span data-ttu-id="be404-125">Pokud nepoužijete spravované disků, je škálovací sadu virtuálních počítačů omezené too100.</span><span class="sxs-lookup"><span data-stu-id="be404-125">If you do not use Managed Disks, your scale set is limited too100 VMs.</span></span>
- <span data-ttu-id="be404-126">Sady škálování, které jsou vytvořené z imagů z Azure Marketplace můžete postupně škálovat too1 000 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-126">Scale sets created from Azure Marketplace images can scale up too1,000 VMs.</span></span>
- <span data-ttu-id="be404-127">Škálovací sady vytvořené z vlastních bitových kopií (Image virtuálních počítačů můžete vytvořit a odeslat sami) můžete škálovat aktuálně too100 virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="be404-127">Scale sets created from custom images (VM images you create and upload yourself) can currently scale up too100 VMs.</span></span>
- <span data-ttu-id="be404-128">Sady škálování skládá z několika skupin umístění ještě nepodporuje vrstvy 4 Vyrovnávání zatížení s hello Vyrovnávání zatížení Azure.</span><span class="sxs-lookup"><span data-stu-id="be404-128">Layer-4 load balancing with hello Azure Load Balancer is not yet supported for scale sets composed of multiple placement groups.</span></span> <span data-ttu-id="be404-129">Pokud potřebujete toouse hello nástroj pro vyrovnávání zatížení Azure Ujistěte se, že sad škálování hello je nakonfigurované toouse umístění jednu skupinu, která se hello výchozí nastavení.</span><span class="sxs-lookup"><span data-stu-id="be404-129">If you need toouse hello Azure Load Balancer make sure hello scale set is configured toouse a single placement group, which is hello default setting.</span></span>
- <span data-ttu-id="be404-130">S hello Azure Application Gateway Vyrovnávání zatížení vrstvy 7 je podporován pro všechny škálovací sady.</span><span class="sxs-lookup"><span data-stu-id="be404-130">Layer-7 load balancing with hello Azure Application Gateway is supported for all scale sets.</span></span>
- <span data-ttu-id="be404-131">Sada škálování je definován s jedinou podsítí – Ujistěte se, že podsíť pro všechny virtuální počítače hello potřebujete nemá dostatečně velký adresní prostor.</span><span class="sxs-lookup"><span data-stu-id="be404-131">A scale set is defined with a single subnet - make sure your subnet has an address space large enough for all hello VMs you need.</span></span> <span data-ttu-id="be404-132">Ve výchozím nastavení škálování hodnotu overprovisions (vytvoří navíc za virtuální počítače v době nasazení nebo škálování, které vám není účtován) tooimprove nasazení spolehlivost a výkon.</span><span class="sxs-lookup"><span data-stu-id="be404-132">By default a scale set overprovisions (creates extra VMs at deployment time or when scaling out, which you are not charged for) tooimprove deployment reliability and performance.</span></span> <span data-ttu-id="be404-133">Povolit pro větší než hello počet virtuálních počítačů, které máte v plánu tooscale na adresu % 20 místa.</span><span class="sxs-lookup"><span data-stu-id="be404-133">Allow for an address space 20% greater than hello number of VMs you plan tooscale to.</span></span>
- <span data-ttu-id="be404-134">Pokud plánujete toodeploy hodně virtuálních počítačů, může být nutné toobe vyšší kvótami vaše výpočetní jádra.</span><span class="sxs-lookup"><span data-stu-id="be404-134">If you are planning toodeploy many VMs, your Compute core quota limits may need toobe increased.</span></span>
- <span data-ttu-id="be404-135">Domény selhání a upgradovací domény jsou konzistentní pouze v rámci skupiny umístění.</span><span class="sxs-lookup"><span data-stu-id="be404-135">Fault domains and upgrade domains are only consistent within a placement group.</span></span> <span data-ttu-id="be404-136">Tato architektura nezmění hello celkové dostupnosti škálování nastavení, jako virtuální počítače jsou rovnoměrně rozdělené mezi odlišné fyzický hardware, se ale znamená, že pokud budete potřebovat tooguarantee jsou dva virtuální počítače na jiný hardware, ujistěte se, jsou v jiné chyby hello domény ve stejné skupině umístění.</span><span class="sxs-lookup"><span data-stu-id="be404-136">This architecture does not change hello overall availability of a scale set, as VMs are evenly distributed across distinct physical hardware, but it does means that if you need tooguarantee two VMs are on different hardware, make sure they are in different fault domains in hello same placement group.</span></span> <span data-ttu-id="be404-137">ID skupiny chyb doménu a umístění se zobrazují v hello _instanci zobrazení_ rozsahu nastavení virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="be404-137">Fault domain and placement group ID are shown in hello _instance view_ of a scale set VM.</span></span> <span data-ttu-id="be404-138">Hello zobrazení instance škálovací sady virtuálních počítačů si můžete prohlédnout v hello [Průzkumníka prostředků Azure](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="be404-138">You can view hello instance view of a scale set VM in hello [Azure Resource Explorer](https://resources.azure.com/).</span></span>


## <a name="creating-a-large-scale-set"></a><span data-ttu-id="be404-139">Vytvoření velké škálovací sady</span><span class="sxs-lookup"><span data-stu-id="be404-139">Creating a large scale set</span></span>
<span data-ttu-id="be404-140">Když vytvoříte škálování nastavit v hello portálu Azure, můžete povolit jeho tooscale toomultiple umístění skupiny podle nastavení hello _Limit tooa jeden umístění skupiny_ too_False_ možnost v hello _Základy_ okno.</span><span class="sxs-lookup"><span data-stu-id="be404-140">When you create a scale set in hello Azure portal, you can allow it tooscale toomultiple placement groups by setting hello _Limit tooa single placement group_ option too_False_ in hello _Basics_ blade.</span></span> <span data-ttu-id="be404-141">Pomocí sady too_False_ tuto možnost, můžete určit _Instance počet_ hodnotu až too1, 000.</span><span class="sxs-lookup"><span data-stu-id="be404-141">With this option set too_False_, you can specify an _Instance count_ value of up too1,000.</span></span>

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

<span data-ttu-id="be404-142">Můžete vytvořit s velkou škálou virtuálních počítačů, nastavit pomocí hello [rozhraní příkazového řádku Azure](https://github.com/Azure/azure-cli) _vytvořit az vmss_ příkaz.</span><span class="sxs-lookup"><span data-stu-id="be404-142">You can create a large VM scale set using hello [Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ command.</span></span> <span data-ttu-id="be404-143">Tento příkaz nastaví inteligentního výchozí nastavení, jako je například velikost podsítě podle hello _počet instancí_ argument:</span><span class="sxs-lookup"><span data-stu-id="be404-143">This command sets intelligent defaults such as subnet size based on hello _instance-count_ argument:</span></span>

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
<span data-ttu-id="be404-144">Všimněte si, že hello _vmss vytvořit_ příkaz výchozí určité hodnoty konfigurace, pokud nezadáte je.</span><span class="sxs-lookup"><span data-stu-id="be404-144">Note that hello _vmss create_ command defaults certain configuration values if you do not specify them.</span></span> <span data-ttu-id="be404-145">hello toosee dostupné se možnosti, které můžete přepsat, zkuste:</span><span class="sxs-lookup"><span data-stu-id="be404-145">toosee hello available options that you can override, try:</span></span>
```bash
az vmss create --help
```

<span data-ttu-id="be404-146">Pokud vytváříte velkém měřítku, která nastavuje skládání šablonu Azure Resource Manager, zkontrolujte, zda šablona hello vytvoří sadu škálování založenou na discích spravovaných Azure.</span><span class="sxs-lookup"><span data-stu-id="be404-146">If you are creating a large scale set by composing an Azure Resource Manager template, make sure hello template creates a scale set based on Azure Managed Disks.</span></span> <span data-ttu-id="be404-147">Můžete nastavit hello _singlePlacementGroup_ vlastnost too_false_ v hello _vlastnosti_ části hello _Microsoft.Compute/virtualMAchineScaleSets_ prostředků.</span><span class="sxs-lookup"><span data-stu-id="be404-147">You can set hello _singlePlacementGroup_ property too_false_ in hello _properties_ section of hello _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span></span> <span data-ttu-id="be404-148">Hello následující JSON fragment ukazuje hello začátku šablonu sady škálování, včetně kapacity hello 1 000 virtuálních počítačů a hello _"singlePlacementGroup": false_ nastavení:</span><span class="sxs-lookup"><span data-stu-id="be404-148">hello following JSON fragment shows hello beginning of a scale set template, including hello 1,000 VM capacity and hello _"singlePlacementGroup" : false_ setting:</span></span>
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
<span data-ttu-id="be404-149">Úplný příklad velkém měřítku nastavení šablony, získáte příliš[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span><span class="sxs-lookup"><span data-stu-id="be404-149">For a complete example of a large scale set template, refer too[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span></span>

## <a name="converting-an-existing-scale-set-toospan-multiple-placement-groups"></a><span data-ttu-id="be404-150">Převod existující škálovací sady toospan více skupin umístění</span><span class="sxs-lookup"><span data-stu-id="be404-150">Converting an existing scale set toospan multiple placement groups</span></span>
<span data-ttu-id="be404-151">toomake existující sady škálování virtuálního počítače podporující škálování toomore než 100 virtuálních počítačů, je nutné toochange hello _singplePlacementGroup_ too_false_ vlastnost hello rozsahu nastavit modelu.</span><span class="sxs-lookup"><span data-stu-id="be404-151">toomake an existing VM scale set capable of scaling toomore than 100 VMs, you need toochange hello _singplePlacementGroup_ property too_false_ in hello scale set model.</span></span> <span data-ttu-id="be404-152">Změna této vlastnosti se hello můžete otestovat [Průzkumníka prostředků Azure](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="be404-152">You can test changing this property with hello [Azure Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="be404-153">Najít existující sady škálování, vyberte _upravit_ a změňte hello _singlePlacementGroup_ vlastnost.</span><span class="sxs-lookup"><span data-stu-id="be404-153">Find an existing scale set, select _Edit_ and change hello _singlePlacementGroup_ property.</span></span> <span data-ttu-id="be404-154">Pokud nevidíte tuto vlastnost, může být zobrazení sad s starší verzi rozhraní API Microsoft.Compute hello škálování hello.</span><span class="sxs-lookup"><span data-stu-id="be404-154">If you do not see this property, you may be viewing hello scale set with an older version of hello Microsoft.Compute API.</span></span>

>[!NOTE] 
<span data-ttu-id="be404-155">Můžete změnit škálování nastavit od podpora jednom umístění skupiny pouze (hello výchozí chování) tooa podpora více skupin umístění, ale nelze převést hello opačným způsobem.</span><span class="sxs-lookup"><span data-stu-id="be404-155">You can change a scale set from supporting a single placement group only (hello default behavior) tooa supporting multiple placement groups, but you cannot convert hello other way around.</span></span> <span data-ttu-id="be404-156">Proto ujistěte se, že rozumíte hello vlastnosti sad velkém měřítku před převodem.</span><span class="sxs-lookup"><span data-stu-id="be404-156">Therefore make sure you understand hello properties of large scale sets before converting.</span></span> <span data-ttu-id="be404-157">Konkrétně zkontrolujte, zda že není nutné vrstvy 4 Vyrovnávání zatížení s hello Vyrovnávání zatížení Azure.</span><span class="sxs-lookup"><span data-stu-id="be404-157">In particular, make sure you do not need layer-4 load balancing with hello Azure Load Balancer.</span></span>


