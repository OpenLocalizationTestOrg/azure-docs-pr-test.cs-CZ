### <a name="open-tcp-ports-in-hello-windows-firewall-for-hello-default-instance-of-hello-database-engine"></a><span data-ttu-id="a9187-101">Otevřete porty protokolu TCP v bráně firewall systému Windows hello pro hello výchozí instanci databázového stroje hello</span><span class="sxs-lookup"><span data-stu-id="a9187-101">Open TCP ports in hello Windows firewall for hello default instance of hello Database Engine</span></span>
1. <span data-ttu-id="a9187-102">Připojte toohello virtuálního počítače pomocí vzdálené plochy.</span><span class="sxs-lookup"><span data-stu-id="a9187-102">Connect toohello virtual machine with Remote Desktop.</span></span> <span data-ttu-id="a9187-103">Podrobné pokyny o připojení toohello virtuálních počítačů najdete v tématu [otevřete virtuálního počítače s SQL pomocí vzdálené plochy](../articles/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-server-provision.md#open-the-vm-with-remote-desktop).</span><span class="sxs-lookup"><span data-stu-id="a9187-103">For detailed instructions on connecting toohello VM, see [Open a SQL VM with Remote Desktop](../articles/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-server-provision.md#open-the-vm-with-remote-desktop).</span></span>
2. <span data-ttu-id="a9187-104">Po přihlášení na úvodní obrazovce hello zadejte **WF.msc**a pak stiskněte ENTER.</span><span class="sxs-lookup"><span data-stu-id="a9187-104">Once logged in, at hello Start screen, type **WF.msc**, and then hit ENTER.</span></span>
   
    ![Spustit hello brány firewall](./media/virtual-machines-sql-server-connection-steps/12Open-WF.png)
3. <span data-ttu-id="a9187-106">V hello **brány Windows Firewall s pokročilým zabezpečením**, v levém podokně text hello, klikněte pravým tlačítkem na **příchozí pravidla**a potom klikněte na **nové pravidlo** v podokně Akce hello.</span><span class="sxs-lookup"><span data-stu-id="a9187-106">In hello **Windows Firewall with Advanced Security**, in hello left pane, right-click **Inbound Rules**, and then click **New Rule** in hello action pane.</span></span>
   
    ![Nové pravidlo](./media/virtual-machines-sql-server-connection-steps/13New-FW-Rule.png)
4. <span data-ttu-id="a9187-108">V hello **pravidla Průvodce vytvořením nového příchozího** dialogovém **typ pravidla**, vyberte **Port**a potom klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="a9187-108">In hello **New Inbound Rule Wizard** dialog box, under **Rule Type**, select **Port**, and then click **Next**.</span></span>
5. <span data-ttu-id="a9187-109">V hello **protokol a porty** dialogové okno, použít výchozí hello **TCP**.</span><span class="sxs-lookup"><span data-stu-id="a9187-109">In hello **Protocol and Ports** dialog, use hello default **TCP**.</span></span> <span data-ttu-id="a9187-110">V hello **určité místní porty** pole a pak typ hello portu počet hello instanci hello databázový stroj (**1433** pro výchozí instanci hello nebo zvoleného pro privátní port hello v kroku hello koncového bodu).</span><span class="sxs-lookup"><span data-stu-id="a9187-110">In hello **Specific local ports** box, then type hello port number of hello instance of hello Database Engine (**1433** for hello default instance or your choice for hello private port in hello endpoint step).</span></span>
   
    ![Port 1433 protokolu TCP](./media/virtual-machines-sql-server-connection-steps/14Port-1433.png)
6. <span data-ttu-id="a9187-112">Klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="a9187-112">Click **Next**.</span></span>
7. <span data-ttu-id="a9187-113">V hello **akce** dialogové okno, vyberte **povolit připojení hello**a potom klikněte na **Další**.</span><span class="sxs-lookup"><span data-stu-id="a9187-113">In hello **Action** dialog box, select **Allow hello connection**, and then click **Next**.</span></span>
   
    <span data-ttu-id="a9187-114">**Poznámka k zabezpečení:** zvolíte **povolit připojení hello zabezpečená** můžete dále zvýšit zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="a9187-114">**Security Note:** Selecting **Allow hello connection if it is secure** can provide additional security.</span></span> <span data-ttu-id="a9187-115">Tuto možnost vyberte, pokud chcete další bezpečnostní možnosti tooconfigure ve vašem prostředí.</span><span class="sxs-lookup"><span data-stu-id="a9187-115">Select this option if you want tooconfigure additional security options in your environment.</span></span>
   
    ![Povolení připojení](./media/virtual-machines-sql-server-connection-steps/15Allow-Connection.png)
8. <span data-ttu-id="a9187-117">V hello **profil** dialogové okno, vyberte **veřejné**, **privátní**, a **domény**.</span><span class="sxs-lookup"><span data-stu-id="a9187-117">In hello **Profile** dialog box, select **Public**, **Private**, and **Domain**.</span></span> <span data-ttu-id="a9187-118">Pak klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="a9187-118">Then click **Next**.</span></span>
   
    <span data-ttu-id="a9187-119">**Poznámka k zabezpečení:** zvolíte **veřejné** umožňuje přístup přes hello internet.</span><span class="sxs-lookup"><span data-stu-id="a9187-119">**Security Note:**  Selecting **Public** allows access over hello internet.</span></span> <span data-ttu-id="a9187-120">Pokud je to možné, vybírejte vždy restriktivnější profil.</span><span class="sxs-lookup"><span data-stu-id="a9187-120">Whenever possible, select a more restrictive profile.</span></span>
   
    ![Veřejný profil](./media/virtual-machines-sql-server-connection-steps/16Public-Private-Domain-Profile.png)
9. <span data-ttu-id="a9187-122">V hello **název** dialogové okno, zadejte název a popis pro toto pravidlo a pak klikněte na tlačítko **Dokončit**.</span><span class="sxs-lookup"><span data-stu-id="a9187-122">In hello **Name** dialog box, type a name and description for this rule, and then click **Finish**.</span></span>
   
    ![Název pravidla](./media/virtual-machines-sql-server-connection-steps/17Rule-Name.png)

<span data-ttu-id="a9187-124">Podle potřeby otevřete další porty pro ostatní komponenty.</span><span class="sxs-lookup"><span data-stu-id="a9187-124">Open additional ports for other components as needed.</span></span> <span data-ttu-id="a9187-125">Další informace najdete v tématu [konfigurace brány Windows Firewall tooAllow hello přístup k serveru SQL](http://msdn.microsoft.com/library/cc646023.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9187-125">For more information, see [Configuring hello Windows Firewall tooAllow SQL Server Access](http://msdn.microsoft.com/library/cc646023.aspx).</span></span>

### <a name="configure-sql-server-toolisten-on-hello-tcp-protocol"></a><span data-ttu-id="a9187-126">Konfigurace systému SQL Server toolisten na hello protokolu TCP</span><span class="sxs-lookup"><span data-stu-id="a9187-126">Configure SQL Server toolisten on hello TCP protocol</span></span>

[!INCLUDE [Enable TCP](virtual-machines-sql-server-connection-tcp-protocol.md)]

### <a name="configure-sql-server-for-mixed-mode-authentication"></a><span data-ttu-id="a9187-127">Konfigurace SQL Serveru pro kombinovaný režim ověřování</span><span class="sxs-lookup"><span data-stu-id="a9187-127">Configure SQL Server for mixed mode authentication</span></span>
<span data-ttu-id="a9187-128">Hello databázového stroje SQL Server nelze použít ověřování systému Windows bez prostředí domény.</span><span class="sxs-lookup"><span data-stu-id="a9187-128">hello SQL Server Database Engine cannot use Windows Authentication without domain environment.</span></span> <span data-ttu-id="a9187-129">tooconnect toohello databázový stroj z jiného počítače, nakonfigurujte pro smíšený režim ověřování systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9187-129">tooconnect toohello Database Engine from another computer, configure SQL Server for mixed mode authentication.</span></span> <span data-ttu-id="a9187-130">Smíšený režim ověřování umožňuje ověřování systému SQL Server i ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="a9187-130">Mixed mode authentication allows both SQL Server Authentication and Windows Authentication.</span></span>

> [!NOTE]
> <span data-ttu-id="a9187-131">Konfigurace ověřování ve smíšeném režimu nemusí být nutná v případě, že jste nakonfigurovali Azure Virtual Network s nakonfigurovaným doménovým prostředím.</span><span class="sxs-lookup"><span data-stu-id="a9187-131">Configuring mixed mode authentication might not be necessary if you have configured an Azure Virtual Network with a configured domain environment.</span></span>
> 
> 

1. <span data-ttu-id="a9187-132">Při připojené toohello virtuální počítač, na hello úvodní stránky, zadejte **SQL Server Management Studio** a klikněte na ikonu vybrané hello.</span><span class="sxs-lookup"><span data-stu-id="a9187-132">While connected toohello virtual machine, on hello Start page, type **SQL Server Management Studio** and click hello selected icon.</span></span>
   
    <span data-ttu-id="a9187-133">Při prvním spuštění Management Studio musí vytvořit prostředí Management Studio uživatelé hello Hello.</span><span class="sxs-lookup"><span data-stu-id="a9187-133">hello first time you open Management Studio it must create hello users Management Studio environment.</span></span> <span data-ttu-id="a9187-134">Tato operace může chvíli trvat.</span><span class="sxs-lookup"><span data-stu-id="a9187-134">This may take a few moments.</span></span>
2. <span data-ttu-id="a9187-135">Management Studio uvede hello **připojit tooServer** dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="a9187-135">Management Studio presents hello **Connect tooServer** dialog box.</span></span> <span data-ttu-id="a9187-136">V hello **název serveru** pole, název typu hello hello virtuálního počítače tooconnect toohello databázový stroj s hello Průzkumník objektů (místo hello název virtuálního počítače můžete použít také **(místní)** nebo jedno období jako hello **název serveru**).</span><span class="sxs-lookup"><span data-stu-id="a9187-136">In hello **Server name** box, type hello name of hello virtual machine tooconnect toohello Database Engine  with hello Object Explorer (Instead of hello virtual machine name you can also use **(local)** or a single period as hello **Server name**).</span></span> <span data-ttu-id="a9187-137">Vyberte **ověřování systému Windows**a nechat  ***název_virtuálního_počítače*\your_local_administrator** v hello **uživatelské jméno** pole.</span><span class="sxs-lookup"><span data-stu-id="a9187-137">Select **Windows Authentication**, and leave ***your_VM_name*\your_local_administrator** in hello **User name** box.</span></span> <span data-ttu-id="a9187-138">Klikněte na **Připojit**.</span><span class="sxs-lookup"><span data-stu-id="a9187-138">Click **Connect**.</span></span>
   
    ![Připojit tooServer](./media/virtual-machines-sql-server-connection-steps/19Connect-to-Server.png)
3. <span data-ttu-id="a9187-140">V Průzkumník objektů systému SQL Server Management Studio, klikněte pravým tlačítkem na název hello hello instance systému SQL Server (hello název virtuálního počítače) a pak klikněte na tlačítko **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="a9187-140">In SQL Server Management Studio Object Explorer, right-click hello name of hello instance of SQL Server (hello virtual machine name), and then click **Properties**.</span></span>
   
    ![Vlastnosti serveru](./media/virtual-machines-sql-server-connection-steps/20Server-Properties.png)
4. <span data-ttu-id="a9187-142">Na hello **zabezpečení** v části **ověřování serveru**, vyberte **systému SQL Server a ověřování systému Windows režimu**a potom klikněte na **OK** .</span><span class="sxs-lookup"><span data-stu-id="a9187-142">On hello **Security** page, under **Server authentication**, select **SQL Server and Windows Authentication mode**, and then click **OK**.</span></span>
   
    ![Výběr režimu ověřování](./media/virtual-machines-sql-server-connection-steps/21Mixed-Mode.png)
5. <span data-ttu-id="a9187-144">V dialogovém okně SQL Server Management Studio hello, klikněte na tlačítko **OK** tooacknowledge hello požadavek toorestart systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9187-144">In hello SQL Server Management Studio dialog box, click **OK** tooacknowledge hello requirement toorestart SQL Server.</span></span>
6. <span data-ttu-id="a9187-145">V Průzkumníku objektů klikněte pravým tlačítkem na server a potom klikněte na **Restartovat**.</span><span class="sxs-lookup"><span data-stu-id="a9187-145">In Object Explorer, right-click your server, and then click **Restart**.</span></span> <span data-ttu-id="a9187-146">(Pokud je spuštěný agent systému SQL Server, musí se také restartovat.)</span><span class="sxs-lookup"><span data-stu-id="a9187-146">(If SQL Server Agent is running, it must also be restarted.)</span></span>
   
    ![Restartování](./media/virtual-machines-sql-server-connection-steps/22Restart2.png)
7. <span data-ttu-id="a9187-148">V dialogovém okně SQL Server Management Studio hello, klikněte na tlačítko **Ano** tooagree, které chcete toorestart systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9187-148">In hello SQL Server Management Studio dialog box, click **Yes** tooagree that you want toorestart SQL Server.</span></span>

### <a name="create-sql-server-authentication-logins"></a><span data-ttu-id="a9187-149">Vytvoření účtů ověřování serveru SQL</span><span class="sxs-lookup"><span data-stu-id="a9187-149">Create SQL Server authentication logins</span></span>
<span data-ttu-id="a9187-150">tooconnect toohello databázový stroj z jiného počítače, musíte vytvořit alespoň jeden účet ověřování systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9187-150">tooconnect toohello Database Engine from another computer, you must create at least one SQL Server authentication login.</span></span>

1. <span data-ttu-id="a9187-151">V Průzkumník objektů systému SQL Server Management Studio rozbalte složku hello instance hello serveru, který chcete toocreate hello nové přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="a9187-151">In SQL Server Management Studio Object Explorer, expand hello folder of hello server instance in which you want toocreate hello new login.</span></span>
2. <span data-ttu-id="a9187-152">Klikněte pravým tlačítkem na hello **zabezpečení** složky, bod příliš**nový**a vyberte **přihlášení...** .</span><span class="sxs-lookup"><span data-stu-id="a9187-152">Right-click hello **Security** folder, point too**New**, and select **Login...**.</span></span>
   
    ![Nové přihlášení](./media/virtual-machines-sql-server-connection-steps/23New-Login.png)
3. <span data-ttu-id="a9187-154">V hello **přihlášení – nové** dialogové okno, v hello **Obecné** stránky, zadejte název hello hello nového uživatele do hello **přihlašovací jméno** pole.</span><span class="sxs-lookup"><span data-stu-id="a9187-154">In hello **Login - New** dialog box, on hello **General** page, enter hello name of hello new user in hello **Login name** box.</span></span>
4. <span data-ttu-id="a9187-155">Vyberte **Ověřování SQL Serveru**.</span><span class="sxs-lookup"><span data-stu-id="a9187-155">Select **SQL Server authentication**.</span></span>
5. <span data-ttu-id="a9187-156">V hello **heslo** pole, zadejte heslo pro nového uživatele hello.</span><span class="sxs-lookup"><span data-stu-id="a9187-156">In hello **Password** box, enter a password for hello new user.</span></span> <span data-ttu-id="a9187-157">Znovu zadejte toto heslo do hello **Potvrdit heslo** pole.</span><span class="sxs-lookup"><span data-stu-id="a9187-157">Enter that password again into hello **Confirm Password** box.</span></span>
6. <span data-ttu-id="a9187-158">Vyberte požadované možnosti pro vynucení hello hesla (**vynutit zásady hesel**, **vynutit vypršení platnosti hesla**, a **musí uživatel změnit heslo při příštím přihlášení**).</span><span class="sxs-lookup"><span data-stu-id="a9187-158">Select hello password enforcement options required (**Enforce password policy**, **Enforce password expiration**, and **User must change password at next login**).</span></span> <span data-ttu-id="a9187-159">Pokud používáte toto přihlášení pro sami, není nutné toorequire změnit heslo při příštím přihlášení hello.</span><span class="sxs-lookup"><span data-stu-id="a9187-159">If you are using this login for yourself, you do not need toorequire a password change at hello next login.</span></span>
7. <span data-ttu-id="a9187-160">Z hello **výchozí databázi** seznamu, vyberte výchozí databázi pro přihlášení hello.</span><span class="sxs-lookup"><span data-stu-id="a9187-160">From hello **Default database** list, select a default database for hello login.</span></span> <span data-ttu-id="a9187-161">**hlavní** je hello výchozího nastavení pro tuto možnost.</span><span class="sxs-lookup"><span data-stu-id="a9187-161">**master** is hello default for this option.</span></span> <span data-ttu-id="a9187-162">Pokud jste ještě nevytvořili uživatelské databáze, nechte toto nastavení příliš**hlavní**.</span><span class="sxs-lookup"><span data-stu-id="a9187-162">If you have not yet created a user database, leave this set too**master**.</span></span>
   
    ![Vlastnosti přihlášení](./media/virtual-machines-sql-server-connection-steps/24Test-Login.png)
8. <span data-ttu-id="a9187-164">Pokud je to první přihlášení hello, kterou vytváříte, můžete chtít toodesignate toto přihlášení jako správce systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9187-164">If this is hello first login you are creating, you may want toodesignate this login as a SQL Server administrator.</span></span> <span data-ttu-id="a9187-165">Pokud ano, na hello **role serveru** stránka, zkontrolujte **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="a9187-165">If so, on hello **Server Roles** page, check **sysadmin**.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="a9187-166">Členové pevné role serveru sysadmin hello mít úplnou kontrolu nad hello databázového stroje.</span><span class="sxs-lookup"><span data-stu-id="a9187-166">Members of hello sysadmin fixed server role have complete control of hello Database Engine.</span></span> <span data-ttu-id="a9187-167">Členství v této roli byste měli pečlivě omezit.</span><span class="sxs-lookup"><span data-stu-id="a9187-167">You should carefully restrict membership in this role.</span></span>
   > 
   > 
   
   ![Správce systému](./media/virtual-machines-sql-server-connection-steps/25sysadmin.png)
9. <span data-ttu-id="a9187-169">Klikněte na tlačítko OK.</span><span class="sxs-lookup"><span data-stu-id="a9187-169">Click OK.</span></span>

<span data-ttu-id="a9187-170">Další informace o přihlášeních SQL Serveru najdete v tématu věnovaném [vytvoření přihlášení](http://msdn.microsoft.com/library/aa337562.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9187-170">For more information about SQL Server logins, see [Create a Login](http://msdn.microsoft.com/library/aa337562.aspx).</span></span>

