<span data-ttu-id="8017c-101">Azure pravidelně provádí aktualizace ke zlepšení spolehlivosti, výkonu a zabezpečení infrastruktury hostitele pro virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="8017c-101">Azure periodically performs updates to improve the reliability, performance, and security of the host infrastructure for virtual machines.</span></span> <span data-ttu-id="8017c-102">Tyto aktualizace rozsahu od opravy softwarové součásti v hostitelské prostředí (např. operační systém, hypervisor a různé agenty nasazené na hostiteli), upgrade síťových součástí, na vyřazení z provozu hardwaru.</span><span class="sxs-lookup"><span data-stu-id="8017c-102">These updates range from patching software components in the hosting environment (like operating system, hypervisor, and various agents deployed on the host), upgrading networking components, to hardware decommissioning.</span></span> <span data-ttu-id="8017c-103">Většina tyto aktualizace se provádějí bez žádný vliv na hostované virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="8017c-103">The majority of these updates are performed without any impact to the hosted virtual machines.</span></span> <span data-ttu-id="8017c-104">Ale existují případy, kdy aktualizace mít vliv:</span><span class="sxs-lookup"><span data-stu-id="8017c-104">However, there are cases where updates do have an impact:</span></span>

- <span data-ttu-id="8017c-105">Pokud údržby nevyžaduje restartování, Azure používá místní migrace pro pozastavení virtuálního počítače během hostitele je aktualizována.</span><span class="sxs-lookup"><span data-stu-id="8017c-105">If the maintenance does not require a reboot, Azure uses in-place migration to pause the VM while the host is updated.</span></span>

- <span data-ttu-id="8017c-106">Pokud údržby vyžaduje restartování, zobrazí oznámení o při plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="8017c-106">If maintenance requires a reboot, you get a notice of when the maintenance is planned.</span></span> <span data-ttu-id="8017c-107">V těchto případech budete také mít k dispozici časový interval, kde můžete spustit údržby sami, v čase, který vám vyhovuje.</span><span class="sxs-lookup"><span data-stu-id="8017c-107">In these cases, you'll also be given a time window where you can start the maintenance yourself, at a time that works for you.</span></span>

<span data-ttu-id="8017c-108">Tato stránka popisuje, jak Microsoft Azure provádí oba typy údržby.</span><span class="sxs-lookup"><span data-stu-id="8017c-108">This page describes how Microsoft Azure performs both types of maintenance.</span></span> <span data-ttu-id="8017c-109">Další informace o neplánované události (výpadků) najdete v tématu Správa dostupnosti virtuálních počítačů [Windows] (.. / articles/virtual-machines/windows/manage-availability.md) nebo [Linux](../articles/virtual-machines/linux/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="8017c-109">For more information about unplanned events (outages), see Manage the availability of virtual machines for [Windows] (../articles/virtual-machines/windows/manage-availability.md) or [Linux](../articles/virtual-machines/linux/manage-availability.md).</span></span>

<span data-ttu-id="8017c-110">Aplikace běžící na virtuálním počítači může shromažďovat informace o nadcházejících aktualizace pomocí služby Azure Metadata pro [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) nebo [Linux] (.. / articles/virtual-machines/linux/instance-metadata-service.md).</span><span class="sxs-lookup"><span data-stu-id="8017c-110">Applications running in a virtual machine can gather information about upcoming updates by using the Azure Metadata Service for [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) or [Linux] (../articles/virtual-machines/linux/instance-metadata-service.md).</span></span>

## <a name="in-place-vm-migration"></a><span data-ttu-id="8017c-111">Místní migrace virtuálních počítačů</span><span class="sxs-lookup"><span data-stu-id="8017c-111">In-place VM migration</span></span>

<span data-ttu-id="8017c-112">Když se aktualizace nevyžadují úplné restartování, použije se při migraci za provozu na místě.</span><span class="sxs-lookup"><span data-stu-id="8017c-112">When updates don't require a full reboot, an in-place live migration is used.</span></span> <span data-ttu-id="8017c-113">Během aktualizace se virtuální počítač pozastaví na přibližně 30 sekund, zachování paměti v paměti RAM, během hostitelské prostředí potřebné aktualizace a opravy.</span><span class="sxs-lookup"><span data-stu-id="8017c-113">During the update the virtual machine is paused for about 30 seconds, preserving the memory in RAM, while the hosting environment applies the necessary updates and patches.</span></span> <span data-ttu-id="8017c-114">Virtuální počítač je pak obnoveno a automaticky synchronizuje hodiny virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="8017c-114">The virtual machine is then resumed and the clock of the virtual machine is automatically synchronized.</span></span>

<span data-ttu-id="8017c-115">U virtuálních počítačů ve skupinách dostupnosti aktualizace domény jsou aktualizované současně.</span><span class="sxs-lookup"><span data-stu-id="8017c-115">For VMs in availability sets, update domains are updated one at a time.</span></span> <span data-ttu-id="8017c-116">Všechny virtuální počítače v jedné doméně aktualizace (UD) jsou pozastavena, aktualizovat a potom obnovit před plánovanou údržbu přejde k další UD.</span><span class="sxs-lookup"><span data-stu-id="8017c-116">All VMs in one update domain (UD) are paused, updated and then resumed before planned maintenance moves on to the next UD.</span></span>

<span data-ttu-id="8017c-117">Některé aplikace může být ovlivněno tyto typy aktualizací.</span><span class="sxs-lookup"><span data-stu-id="8017c-117">Some applications may be impacted by these types of updates.</span></span> <span data-ttu-id="8017c-118">Aplikace, které provádějí v reálném čase událostí zpracování, jako jsou datové proudy media nebo překódování nebo vysokou propustnost sítě scénáře, nemusí být navržena k tolerovat 30 sekundové pauzy.</span><span class="sxs-lookup"><span data-stu-id="8017c-118">Applications that perform real-time event processing, like media streaming or transcoding, or high throughput networking scenarios, may not be designed to tolerate a 30 second pause.</span></span> <!-- sooooo, what should they do? --> 


## <a name="maintenance-requiring-a-reboot"></a><span data-ttu-id="8017c-119">Údržby, které vyžadují restartování</span><span class="sxs-lookup"><span data-stu-id="8017c-119">Maintenance requiring a reboot</span></span>

<span data-ttu-id="8017c-120">Pokud virtuální počítače je potřeba restartovat kvůli plánované údržbě, zobrazí se zpráva předem.</span><span class="sxs-lookup"><span data-stu-id="8017c-120">When VMs need to be rebooted for planned maintenance, you are notified in advance.</span></span> <span data-ttu-id="8017c-121">Plánovaná údržba má dvě fáze: okno samoobslužné služby a plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="8017c-121">Planned maintenance has two phases: the self-service window and a scheduled maintenance window.</span></span>

<span data-ttu-id="8017c-122">**Samoobslužné služby okno** umožňuje zahájení údržby na virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="8017c-122">The **self-service window** lets you initiate the maintenance on your VMs.</span></span> <span data-ttu-id="8017c-123">Během této doby se můžete dotazovat každý virtuální počítač a zobrazit jejich stav zkontrolujte výsledek vaší poslední žádosti údržby.</span><span class="sxs-lookup"><span data-stu-id="8017c-123">During this time, you can query each VM to see their status and check the result of your last maintenance request.</span></span>

<span data-ttu-id="8017c-124">Spouštění samoobslužné služby údržby virtuálního počítače je přesunuta do uzel, který již byl aktualizován a pak ho znovu zapne.</span><span class="sxs-lookup"><span data-stu-id="8017c-124">When you start self-service maintenance, your VM is moved to a node that has already been updated and then powers it back on.</span></span> <span data-ttu-id="8017c-125">Protože virtuální počítač se restartuje, dojde ke ztrátě dočasným diskovým a dynamické IP adresy přidružené k rozhraní virtuální sítě se aktualizují.</span><span class="sxs-lookup"><span data-stu-id="8017c-125">Because the VM reboots, the temporary disk is lost and dynamic IP addresses associated with virtual network interface are updated.</span></span>

<span data-ttu-id="8017c-126">-Li spustit samoobslužné služby údržby a dojde k chybě během procesu, operace se zastavila, virtuální počítač není aktualizován a také odebere se ze iterace plánované údržby.</span><span class="sxs-lookup"><span data-stu-id="8017c-126">If you start self-service maintenance and there is an error during the process, the operation is stopped, the VM is not updated and it is also removed from the planned maintenance iteration.</span></span> <span data-ttu-id="8017c-127">Můžete se kontaktovat v později pomocí nového plánu a nabízí novou možnost udělat Údržba samoobslužné služby.</span><span class="sxs-lookup"><span data-stu-id="8017c-127">You will be contacted in a later time with a new schedule and offered a new opportunity to do self-service maintenance.</span></span> 

<span data-ttu-id="8017c-128">Po uplynutí období samoobslužné služby, **plánované údržby** začne.</span><span class="sxs-lookup"><span data-stu-id="8017c-128">When the self-service window has passed, the **scheduled maintenance window** begins.</span></span> <span data-ttu-id="8017c-129">Během této doby čas můžete stále dotazu pro okna údržby, ale již nebude možné spustit údržby sami.</span><span class="sxs-lookup"><span data-stu-id="8017c-129">During this time window, you can still query for the maintenance window, but no longer be able to start the maintenance yourself.</span></span>

## <a name="availability-considerations-during-planned-maintenance"></a><span data-ttu-id="8017c-130">Důležité informace o dostupnosti během plánované údržby</span><span class="sxs-lookup"><span data-stu-id="8017c-130">Availability Considerations during Planned Maintenance</span></span> 

<span data-ttu-id="8017c-131">Pokud se rozhodnete k čekání, dokud okno plánované údržby, existuje několik možností vzít v úvahu pro údržbu nejvyšší availabilty vaše virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="8017c-131">If you decide to wait until the planned maintenance window, there are a few things to consider for maintaining the highest availabilty of your VMs.</span></span> 

### <a name="paired-regions"></a><span data-ttu-id="8017c-132">Spárované oblastí</span><span class="sxs-lookup"><span data-stu-id="8017c-132">Paired Regions</span></span>

<span data-ttu-id="8017c-133">Každé oblasti Azure je spárován s jinou oblast v rámci stejné geography, společně provádění pár místní.</span><span class="sxs-lookup"><span data-stu-id="8017c-133">Each Azure region is paired with another region within the same geography, together they make a regional pair.</span></span> <span data-ttu-id="8017c-134">Během plánované údržby bude Azure aktualizovat pouze virtuální počítače v jedné oblasti pár oblast.</span><span class="sxs-lookup"><span data-stu-id="8017c-134">During planned maintenance, Azure will only update the VMs in a single region of a region pair.</span></span> <span data-ttu-id="8017c-135">Například při aktualizaci virtuálních počítačů v oblasti Střed USA – sever nebude Azure zároveň aktualizovat žádné virtuální počítače v oblasti Střed USA – jih.</span><span class="sxs-lookup"><span data-stu-id="8017c-135">For example, when updating the Virtual Machines in North Central US, Azure will not update any Virtual Machines in South Central US at the same time.</span></span> <span data-ttu-id="8017c-136">V ostatních oblastech, jako je Severní Evropa, však může údržba probíhat ve stejnou dobu jako v oblasti Východní USA.</span><span class="sxs-lookup"><span data-stu-id="8017c-136">However, other regions such as North Europe can be under maintenance at the same time as East US.</span></span> <span data-ttu-id="8017c-137">Pochopení fungování oblast páry vám může pomoci lépe distribuovat virtuální počítače v oblastech.</span><span class="sxs-lookup"><span data-stu-id="8017c-137">Understanding how region pairs work can help you better distribute your VMs across regions.</span></span> <span data-ttu-id="8017c-138">Další informace najdete v tématu [oblast Azure páry](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="8017c-138">For more information, see [Azure region pairs](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span></span>

### <a name="availability-sets-and-scale-sets"></a><span data-ttu-id="8017c-139">Skupiny dostupnosti a sady škálování</span><span class="sxs-lookup"><span data-stu-id="8017c-139">Availability sets and scale sets</span></span>

<span data-ttu-id="8017c-140">Pokud nasazujete zatížení na virtuálních počítačích Azure, můžete vytvořit virtuální počítače v rámci dostupnosti nastavit pro zajištění vysoké dostupnosti do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="8017c-140">When deploying a workload on Azure VMs, you can create the VMs within an availability set to provide high availability to your application.</span></span> <span data-ttu-id="8017c-141">To zajistí, že během výpadku nebo údržby událostí, je k dispozici alespoň jeden virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="8017c-141">This ensures that during either an outage or maintenance events, at least one virtual machine is available.</span></span>

<span data-ttu-id="8017c-142">V rámci skupiny dostupnosti jednotlivé virtuální počítače jsou rozloženy až 20 aktualizace domény (UDs).</span><span class="sxs-lookup"><span data-stu-id="8017c-142">Within an availability set, individual VMs are spread across up to 20 update domains (UDs).</span></span> <span data-ttu-id="8017c-143">Během plánované údržby je v každém okamžiku dopad pouze jednu aktualizaci domény.</span><span class="sxs-lookup"><span data-stu-id="8017c-143">During planned maintenance, only a single update domain is impacted at any given time.</span></span> <span data-ttu-id="8017c-144">Upozorňujeme, že pořadí aktualizace domén ovlivněný neodehrává nutně postupně.</span><span class="sxs-lookup"><span data-stu-id="8017c-144">Be aware that the order of update domains being impacted does not necessarily happen sequentially.</span></span> 

<span data-ttu-id="8017c-145">Sady škálování virtuálního počítače se Azure výpočtový prostředek, který umožňuje nasadit a spravovat sadu identické virtuální počítače jako jeden prostředek.</span><span class="sxs-lookup"><span data-stu-id="8017c-145">Virtual machine scale sets are an Azure compute resource that enables you to deploy and manage a set of identical VMs as a single resource.</span></span> <span data-ttu-id="8017c-146">Sada škálování je automaticky nasadí napříč doménami aktualizace, jako jsou virtuální počítače v nastavení dostupnosti.</span><span class="sxs-lookup"><span data-stu-id="8017c-146">The scale set is automatically deployed across update domains, like VMs in an availability set.</span></span> <span data-ttu-id="8017c-147">Stejně jako s skupiny dostupnosti s sady škálování pouze jednu aktualizaci doméně ovlivní v každém okamžiku.</span><span class="sxs-lookup"><span data-stu-id="8017c-147">Just like with availability sets, with scale sets only a single update domain is impacted at any given time.</span></span>

<span data-ttu-id="8017c-148">Další informace o konfiguraci virtuálních počítačů pro vysokou dostupnost, najdete v části Správa dostupnosti virtuálních počítačů pro Windows (.. / articles/virtual-machines/windows/manage-availability.md) nebo [Linux](../articles/virtual-machines/linux/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="8017c-148">For more information about configuring your virtual machines for high availability, see Manage the availability of your virtual machines for Windows (../articles/virtual-machines/windows/manage-availability.md) or [Linux](../articles/virtual-machines/linux/manage-availability.md).</span></span>