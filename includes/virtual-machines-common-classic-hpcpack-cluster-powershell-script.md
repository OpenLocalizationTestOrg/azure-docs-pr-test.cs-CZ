



<span data-ttu-id="2ed35-101">V závislosti na prostředí a možnosti můžete vytvořit skript všechny clusteru infrastruktury, včetně virtuální síť Azure, účty úložiště, cloudové služby, řadič domény, vzdálení nebo místní databáze SQL, hlavního uzlu a další uzly clusteru.</span><span class="sxs-lookup"><span data-stu-id="2ed35-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="2ed35-102">Skript můžete alternativně použít existující infrastrukturu Azure a vytvořit pouze uzly clusteru prostředí HPC.</span><span class="sxs-lookup"><span data-stu-id="2ed35-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="2ed35-103">Základní informace o plánování clusteru služby HPC Pack, najdete v článku [období pro vyzkoušení produktu a plánování](https://technet.microsoft.com/library/jj899596.aspx) a [Začínáme](https://technet.microsoft.com/library/jj899590.aspx) obsahu v knihovně TechNet HPC Pack 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="2ed35-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2ed35-104">Požadavky</span><span class="sxs-lookup"><span data-stu-id="2ed35-104">Prerequisites</span></span>
* <span data-ttu-id="2ed35-105">**Předplatné Azure**: předplatné můžete použít ve službě Azure globální nebo Azure China.</span><span class="sxs-lookup"><span data-stu-id="2ed35-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="2ed35-106">Vaše předplatné omezení ovlivnit počet a typ uzly clusteru, který můžete nasadit.</span><span class="sxs-lookup"><span data-stu-id="2ed35-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="2ed35-107">Informace najdete v tématu [předplatného Azure a omezení služby, kvóty a omezení](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="2ed35-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="2ed35-108">**Klientský počítač s Windows v prostředí Azure PowerShell 0.8.10 nebo později nainstalovaný a nakonfigurovaný**: najdete v části [Začínáme s Azure PowerShell](/powershell/azureps-cmdlets-docs) pokyny k instalaci a kroky pro připojení k předplatnému Azure.</span><span class="sxs-lookup"><span data-stu-id="2ed35-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="2ed35-109">**Skript nasazení HPC Pack IaaS**: Stáhněte a rozbalte nejnovější verzi skript z [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="2ed35-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="2ed35-110">Zkontrolujte verzi skript spuštěním `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="2ed35-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="2ed35-111">Tento článek vychází z verze 4.5.2 skriptu.</span><span class="sxs-lookup"><span data-stu-id="2ed35-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="2ed35-112">**Konfigurační soubor skriptu**: Vytvořte soubor XML, který používá skript ke konfiguraci clusteru HPC.</span><span class="sxs-lookup"><span data-stu-id="2ed35-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="2ed35-113">Informace a příklady najdete v částech dále v tomto článku a soubor Manual.rtf, který doprovází skript nasazení.</span><span class="sxs-lookup"><span data-stu-id="2ed35-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="2ed35-114">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="2ed35-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="2ed35-115">Spusťte skript jako správce.</span><span class="sxs-lookup"><span data-stu-id="2ed35-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="2ed35-116">Parametry</span><span class="sxs-lookup"><span data-stu-id="2ed35-116">Parameters</span></span>
* <span data-ttu-id="2ed35-117">**ConfigFile**: Určuje cestu k souboru konfiguračního souboru k popisu clusteru prostředí HPC.</span><span class="sxs-lookup"><span data-stu-id="2ed35-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="2ed35-118">Další informace o konfigurační soubor v tomto tématu najdete v článku nebo v souboru Manual.rtf ve složce obsahující skript.</span><span class="sxs-lookup"><span data-stu-id="2ed35-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="2ed35-119">**AdminUserName**: Určuje uživatelské jméno.</span><span class="sxs-lookup"><span data-stu-id="2ed35-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="2ed35-120">Pokud domény doménové struktury se vytvoří skript, to se změní na uživatelské jméno místního správce pro všechny virtuální počítače a jméno správce domény.</span><span class="sxs-lookup"><span data-stu-id="2ed35-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="2ed35-121">Pokud doménová struktura domény už existuje, určuje uživatele domény jako uživatelské jméno místního správce k instalaci sady HPC Pack.</span><span class="sxs-lookup"><span data-stu-id="2ed35-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="2ed35-122">**AdminPassword**: Určuje heslo správce.</span><span class="sxs-lookup"><span data-stu-id="2ed35-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="2ed35-123">Pokud není zadaný v příkazovém řádku, skript zobrazí výzvu k zadejte heslo.</span><span class="sxs-lookup"><span data-stu-id="2ed35-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="2ed35-124">**HPCImageName** (volitelné): Určuje název bitové kopie prostředí HPC Pack virtuálního počítače použít k nasazení clusteru HPC.</span><span class="sxs-lookup"><span data-stu-id="2ed35-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="2ed35-125">Musí to být image poskytovaný společností Microsoft HPC Pack z Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="2ed35-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="2ed35-126">Není-li zadána (doporučeno obvykle), skript vybere nejnovější publikované [image HPC Pack 2012 R2](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span><span class="sxs-lookup"><span data-stu-id="2ed35-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="2ed35-127">Nejnovější bitové kopie je založená na Windows Server 2012 R2 Datacenter s HPC Pack 2012 R2 Update 3 nainstalován.</span><span class="sxs-lookup"><span data-stu-id="2ed35-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="2ed35-128">Nasazení se nezdaří, pokud neurčíte platnou bitovou kopií HPC Pack.</span><span class="sxs-lookup"><span data-stu-id="2ed35-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="2ed35-129">**Soubor protokolu** (volitelné): Určuje cestu k souboru protokolu nasazení.</span><span class="sxs-lookup"><span data-stu-id="2ed35-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="2ed35-130">Pokud není zadaný, skript vytvoří soubor protokolu v adresáři temp počítače se systémem skript.</span><span class="sxs-lookup"><span data-stu-id="2ed35-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="2ed35-131">**Platnost** (volitelné): potlačí všechny výzvy potvrzení.</span><span class="sxs-lookup"><span data-stu-id="2ed35-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="2ed35-132">**NoCleanOnFailure** (volitelné): Určuje, že nejsou odstranit virtuální počítače Azure, které nejsou úspěšně nasazena.</span><span class="sxs-lookup"><span data-stu-id="2ed35-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="2ed35-133">Odebrat tyto virtuální počítače ručně před opětovným spuštěním skriptu pokračujte nasazení nebo nasazení může selhat.</span><span class="sxs-lookup"><span data-stu-id="2ed35-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="2ed35-134">**PSSessionSkipCACheck** (volitelné): pro všechny cloudové služby s virtuálními počítači nasadit pomocí tohoto skriptu, je certifikát podepsaný svým držitelem automaticky generuje služba Azure, a všechny virtuální počítače v rámci cloudové služby použít tento certifikát jako výchozí vzdáleného systému Windows Certifikát správy (WinRM).</span><span class="sxs-lookup"><span data-stu-id="2ed35-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="2ed35-135">Pokud chcete nasadit HPC funkcí v těchto virtuálních počítačích Azure, skript ve výchozím nastavení dočasně nainstaluje tyto certifikáty v místním počítači\\úložiště Důvěryhodné kořenové certifikační autority klientského počítače k potlačení chyby "není důvěryhodné certifikační Autority" zabezpečení. Při provádění skriptu.</span><span class="sxs-lookup"><span data-stu-id="2ed35-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="2ed35-136">Certifikáty jsou odebrány, po dokončení skriptu.</span><span class="sxs-lookup"><span data-stu-id="2ed35-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="2ed35-137">Pokud je tento parametr zadán, v klientském počítači nejsou nainstalovány certifikáty a potlačeno upozornění zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="2ed35-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="2ed35-138">Tento parametr se nedoporučuje pro nasazení v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="2ed35-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="2ed35-139">Příklad</span><span class="sxs-lookup"><span data-stu-id="2ed35-139">Example</span></span>
<span data-ttu-id="2ed35-140">Následující příklad vytvoří cluster služby HPC Pack pomocí konfiguračního souboru *MyConfigFile.xml*a určuje přihlašovací údaje správce pro instalaci clusteru.</span><span class="sxs-lookup"><span data-stu-id="2ed35-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="2ed35-141">Další aspekty</span><span class="sxs-lookup"><span data-stu-id="2ed35-141">Additional considerations</span></span>
* <span data-ttu-id="2ed35-142">Skript Volitelně můžete umožnit odesílání úlohy prostřednictvím webového portálu HPC Pack nebo HPC Pack REST API.</span><span class="sxs-lookup"><span data-stu-id="2ed35-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="2ed35-143">Skript můžete případně spustit vlastní skripty před a po konfiguraci z hlavního uzlu Pokud chcete nainstalovat další software nebo konfigurovat další nastavení.</span><span class="sxs-lookup"><span data-stu-id="2ed35-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="2ed35-144">Konfigurační soubor</span><span class="sxs-lookup"><span data-stu-id="2ed35-144">Configuration file</span></span>
<span data-ttu-id="2ed35-145">Konfigurační soubor nasazení skriptu je soubor XML.</span><span class="sxs-lookup"><span data-stu-id="2ed35-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="2ed35-146">Soubor schématu HPCIaaSClusterConfig.xsd je ve složce HPC Pack IaaS nasazení skriptu.</span><span class="sxs-lookup"><span data-stu-id="2ed35-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="2ed35-147">**IaaSClusterConfig** je kořenový prvek konfiguračního souboru, který obsahuje podřízené elementy podrobně popsány v souboru Manual.rtf ve složce nasazení skriptu.</span><span class="sxs-lookup"><span data-stu-id="2ed35-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>

