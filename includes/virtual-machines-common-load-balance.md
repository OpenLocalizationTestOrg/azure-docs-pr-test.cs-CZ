

<span data-ttu-id="68581-101">Existují dvě úrovně služby Vyrovnávání zatížení pro služby infrastruktury Azure k dispozici:</span><span class="sxs-lookup"><span data-stu-id="68581-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="68581-102">**Úroveň DNS**: Vyrovnávání zatížení pro provoz na jiné cloudové služby umístěné v různých datových centrech na různé weby Azure umístěné v různých datových střediscích, nebo o externí koncové body.</span><span class="sxs-lookup"><span data-stu-id="68581-102">**DNS Level**:  Load balancing for traffic to different cloud services located in different data centers, to different Azure websites located in different data centers, or to external endpoints.</span></span> <span data-ttu-id="68581-103">To lze provést pomocí Azure Traffic Manager a metodu Vyrovnávání zatížení, kruhové dotazování.</span><span class="sxs-lookup"><span data-stu-id="68581-103">This is done with Azure Traffic Manager and the Round Robin load balancing method.</span></span>
* <span data-ttu-id="68581-104">**Sítě úroveň**: příchozí přenosy z Internetu pro různé virtuální počítače cloudové služby Vyrovnávání zatížení nebo provozu mezi virtuálními počítači v cloudové službě nebo virtuální sítě vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="68581-104">**Network Level**:  Load balancing of incoming Internet traffic to different virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="68581-105">To lze provést pomocí nástroje pro vyrovnávání zatížení Azure.</span><span class="sxs-lookup"><span data-stu-id="68581-105">This is done with the Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="68581-106">Správce provozu Vyrovnávání zatížení pro služby cloud services a weby</span><span class="sxs-lookup"><span data-stu-id="68581-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="68581-107">Traffic Manager umožňuje řízení distribuce provozu generovaného uživateli na koncové body, které může zahrnovat cloudové služby, weby, externí servery a jiné profily Traffic Manageru.</span><span class="sxs-lookup"><span data-stu-id="68581-107">Traffic Manager allows you to control the distribution of user traffic to endpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="68581-108">Traffic Manager funguje tak, že použití modul inteligentních zásad na systému DNS (Domain Name) dotazy na názvy domény internetovým prostředkům.</span><span class="sxs-lookup"><span data-stu-id="68581-108">Traffic Manager works by applying an intelligent policy engine to Domain Name System (DNS) queries for the domain names of your Internet resources.</span></span> <span data-ttu-id="68581-109">Cloudové služby nebo weby lze spustit v různých datových centrech po celém světě.</span><span class="sxs-lookup"><span data-stu-id="68581-109">Your cloud services or websites can be running in different datacenters across the world.</span></span>

<span data-ttu-id="68581-110">REST nebo prostředí Windows PowerShell musíte použít ke konfiguraci externí koncové body ani profily Traffic Manageru jako koncové body.</span><span class="sxs-lookup"><span data-stu-id="68581-110">You must use either REST or Windows PowerShell to configure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="68581-111">Traffic Manager používá tři metody vyrovnávání zatížení pro distribuci přenosů:</span><span class="sxs-lookup"><span data-stu-id="68581-111">Traffic Manager uses three load-balancing methods to distribute traffic:</span></span>

* <span data-ttu-id="68581-112">**Převzetí služeb při selhání**: tuto metodu použijte, pokud chcete použít primární koncový bod pro všechny přenosy, ale zadejte zálohování v případě, že primární nedostupný.</span><span class="sxs-lookup"><span data-stu-id="68581-112">**Failover**:  Use this method when you want to use a primary endpoint for all traffic, but provide backups in case the primary becomes unavailable.</span></span>
* <span data-ttu-id="68581-113">**Výkon**: tuto metodu použijte, pokud máte koncové body v různých zeměpisných místech a chcete žádajícím klientům používat "nejbližší" koncového bodu z hlediska nejnižší latenci.</span><span class="sxs-lookup"><span data-stu-id="68581-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients to use the "closest" endpoint in terms of the lowest latency.</span></span>
* <span data-ttu-id="68581-114">**Kruhové dotazování:** tuto metodu použijte, pokud chcete rozdělovat mezi sadu cloudové služby ve stejném datovém centru nebo přes cloud services nebo weby v různých datových centrech.</span><span class="sxs-lookup"><span data-stu-id="68581-114">**Round Robin:**  Use this method when you want to distribute load across a set of cloud services in the same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="68581-115">Další informace najdete v tématu [o provozu Manager zatížení vyrovnávání metody](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="68581-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="68581-116">Následující diagram ukazuje příklad metodu pro distribuci přenosů mezi jiné cloudové služby pro vyrovnávání zatížení kruhové dotazování.</span><span class="sxs-lookup"><span data-stu-id="68581-116">The following diagram shows an example of the Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![Vyrovnávání zatížení](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="68581-118">Základní proces je následující:</span><span class="sxs-lookup"><span data-stu-id="68581-118">The basic process is the following:</span></span>

1. <span data-ttu-id="68581-119">Internetový klient se dotazuje název domény odpovídající k webové službě.</span><span class="sxs-lookup"><span data-stu-id="68581-119">An Internet client queries a domain name corresponding to a web service.</span></span>
2. <span data-ttu-id="68581-120">DNS předává dotaz požadavek název do Traffic Manageru.</span><span class="sxs-lookup"><span data-stu-id="68581-120">DNS forwards the name query request to Traffic Manager.</span></span>
3. <span data-ttu-id="68581-121">Traffic Manager vybere další cloudové služby v seznamu kruhové dotazování a odesílá zpět název DNS.</span><span class="sxs-lookup"><span data-stu-id="68581-121">Traffic Manager chooses the next cloud service in the Round Robin list and sends back the DNS name.</span></span> <span data-ttu-id="68581-122">Server DNS klienta Internet překládá název na adresu IP a odešle ji do klientů v síti Internet.</span><span class="sxs-lookup"><span data-stu-id="68581-122">The Internet client's DNS server resolves the name to an IP address and sends it to the Internet client.</span></span>
4. <span data-ttu-id="68581-123">Klienta Internet připojí ke službě cloud vybrali Traffic Managerem.</span><span class="sxs-lookup"><span data-stu-id="68581-123">The Internet client connects with the cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="68581-124">Další informace najdete v tématu [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="68581-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="68581-125">Azure Vyrovnávání zatížení pro virtuální počítače</span><span class="sxs-lookup"><span data-stu-id="68581-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="68581-126">Virtuální počítače ve stejné cloudové služby nebo virtuální sítě můžou navzájem komunikují, přímo pomocí jejich privátní IP adresy.</span><span class="sxs-lookup"><span data-stu-id="68581-126">Virtual machines in the same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="68581-127">Počítače a služby mimo cloudovou službu nebo virtuální sítě mohou komunikovat pouze s virtuálními počítači v cloudové službě nebo virtuální sítě s nakonfigurovanou koncový bod.</span><span class="sxs-lookup"><span data-stu-id="68581-127">Computers and services outside the cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="68581-128">Koncový bod je mapování veřejnou IP adresu a port pro tuto adresu a port virtuálního počítače nebo webovou roli v rámci cloudové služby Azure.</span><span class="sxs-lookup"><span data-stu-id="68581-128">An endpoint is a mapping of a public IP address and port to that private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="68581-129">Vyrovnávání zatížení Azure náhodně distribuuje určitý typ příchozí provoz mezi více virtuálních počítačů nebo služby v konfiguraci se označuje jako sadu s vyrovnáváním zatížení.</span><span class="sxs-lookup"><span data-stu-id="68581-129">The Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="68581-130">Můžete například šíří zatížení webový požadavek provoz napříč více webové servery nebo webové role.</span><span class="sxs-lookup"><span data-stu-id="68581-130">For example, you can spread the load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="68581-131">Následující diagram znázorňuje koncový bod Vyrovnávání zatížení sítě pro standardní (nezašifrované) webový provoz, která je sdílena mezi tři virtuální počítače pro veřejné a privátní port TCP 80.</span><span class="sxs-lookup"><span data-stu-id="68581-131">The following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for the public and private TCP port of 80.</span></span> <span data-ttu-id="68581-132">Tyto tři virtuální počítače jsou v sadě s vyrovnáváním zatížení.</span><span class="sxs-lookup"><span data-stu-id="68581-132">These three virtual machines are in a load-balanced set.</span></span>

![Vyrovnávání zatížení](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="68581-134">Další informace najdete v tématu [nástroj pro vyrovnávání zatížení Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="68581-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="68581-135">Postup vytvoření sady Vyrovnávání zatížení sítě najdete v tématu [nakonfigurovat sadu s vyrovnáváním zatížení](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="68581-135">For the steps to create a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="68581-136">Azure můžete také načíst vyrovnání v rámci cloudové služby nebo virtuální sítě.</span><span class="sxs-lookup"><span data-stu-id="68581-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="68581-137">To se označuje jako interní zátěže a mohou být používány následujícími způsoby:</span><span class="sxs-lookup"><span data-stu-id="68581-137">This is known as internal load balancing and can be used in the following ways:</span></span>

* <span data-ttu-id="68581-138">Chcete-li načíst rovnováhu mezi servery v různých vrstev vícevrstvé aplikace (například mezi webové a databázová vrstva).</span><span class="sxs-lookup"><span data-stu-id="68581-138">To load balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="68581-139">Načíst vyrovnávání-obchodní (LOB) aplikace hostované v Azure bez nutnosti další zátěž vyrovnávání hardwaru nebo softwaru.</span><span class="sxs-lookup"><span data-stu-id="68581-139">To load balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="68581-140">Chcete-li zahrnout do více počítačů, jejichž provoz se zatížení na místní servery s vyrovnáváním.</span><span class="sxs-lookup"><span data-stu-id="68581-140">To include on-premises servers in the set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="68581-141">Podobně jako zatížení Azure vyrovnávání, interní Vyrovnávání zatížení je usnadněno konfigurace interní sady vyrovnáváním zatížení.</span><span class="sxs-lookup"><span data-stu-id="68581-141">Similar to Azure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="68581-142">Následující diagram ukazuje příklad interního Vyrovnávání zatížení koncového bodu pro řádek obchodní (LOB) aplikace, která je sdílena mezi tři virtuální počítače ve virtuální síti mezi různými místy.</span><span class="sxs-lookup"><span data-stu-id="68581-142">The following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![Vyrovnávání zatížení](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="68581-144">Důležité informace o vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="68581-144">Load balancer considerations</span></span>
<span data-ttu-id="68581-145">Nástroj pro vyrovnávání zatížení je nakonfigurované ve výchozím nastavení časového limitu na nečinnosti relace v 4 minuty.</span><span class="sxs-lookup"><span data-stu-id="68581-145">A load balancer is configured by default to timeout an idle session in 4 minutes.</span></span> <span data-ttu-id="68581-146">Pokud vaše aplikace za službou Vyrovnávání zatížení odejde připojení nečinnosti pro více než 4 minuty a nemá Keep-Alive konfiguraci, připojení se zahodí.</span><span class="sxs-lookup"><span data-stu-id="68581-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, the connection will be dropped.</span></span> <span data-ttu-id="68581-147">Můžete změnit chování nástroje pro vyrovnávání zatížení povolit [delší časový limit nastavení nástroje pro vyrovnávání zatížení Azure](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="68581-147">You can change the load balancer behavior to allow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="68581-148">Další aspekt je typ režim distribuce podporovaný nástroj pro vyrovnávání zatížení Azure.</span><span class="sxs-lookup"><span data-stu-id="68581-148">Other consideration is the type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="68581-149">Můžete nakonfigurovat spřažení IP zdroje (zdrojová adresa IP, cílovou IP adresu) nebo zdroj protokol IP (zdrojová adresa IP, cílovou IP adresu a protocol).</span><span class="sxs-lookup"><span data-stu-id="68581-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="68581-150">Podívejte se na [režim distribuce pro vyrovnávání zatížení Azure (zdrojové IP spřažení)](../articles/load-balancer/load-balancer-distribution-mode.md) Další informace.</span><span class="sxs-lookup"><span data-stu-id="68581-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="68581-151">Další kroky</span><span class="sxs-lookup"><span data-stu-id="68581-151">Next steps</span></span>
<span data-ttu-id="68581-152">Postup vytvoření sady Vyrovnávání zatížení sítě najdete v tématu [konfigurace interní sady vyrovnáváním zatížení](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="68581-152">For the steps to create a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="68581-153">Další informace o vyrovnávání zatížení najdete v tématu [Vyrovnávání zatížení pro vnitřní](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="68581-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>

