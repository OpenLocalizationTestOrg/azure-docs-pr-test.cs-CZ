<span data-ttu-id="55158-101">Pokud virtuální počítač (VM) v Azure dojde k chybě spouštěcí nebo disk, může být nutné tooperform řešení potíží s kroky hello virtuální pevný disk sám sebe.</span><span class="sxs-lookup"><span data-stu-id="55158-101">If your virtual machine (VM) in Azure encounters a boot or disk error, you may need tooperform troubleshooting steps on hello virtual hard disk itself.</span></span> <span data-ttu-id="55158-102">Běžným příkladem bude aplikaci, která selhala aktualizace, která zabrání spuštění úspěšně hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-102">A common example would be a failed application update that prevents hello VM from booting successfully.</span></span> <span data-ttu-id="55158-103">Tento článek popisuje, jak toouse Azure portálu tooconnect vaše virtuální pevný disk tooanother virtuálních počítačů toofix všechny chyby a potom je znovu vytvořit původní virtuální počítač.</span><span class="sxs-lookup"><span data-stu-id="55158-103">This article describes how toouse Azure portal tooconnect your virtual hard disk tooanother VM toofix any errors and then re-create your original VM.</span></span>

## <a name="recovery-process-overview"></a><span data-ttu-id="55158-104">Přehled procesu obnovení</span><span class="sxs-lookup"><span data-stu-id="55158-104">Recovery process overview</span></span>
<span data-ttu-id="55158-105">řešení potíží s procesem Hello vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="55158-105">hello troubleshooting process is as follows:</span></span>

1. <span data-ttu-id="55158-106">Odstranit hello virtuální počítač, který je zjištění problémy, ale zachovat hello virtuální pevné disky.</span><span class="sxs-lookup"><span data-stu-id="55158-106">Delete hello VM that's encountering issues, but retain hello virtual hard disks.</span></span>
2. <span data-ttu-id="55158-107">Připojte a připojit virtuální pevný disk tooanother hello virtuálních počítačů pro řešení potíží.</span><span class="sxs-lookup"><span data-stu-id="55158-107">Attach and mount hello virtual hard disk tooanother VM for troubleshooting.</span></span>
3. <span data-ttu-id="55158-108">Připojte toohello řešení potíží s virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-108">Connect toohello troubleshooting VM.</span></span> <span data-ttu-id="55158-109">Úpravy souborů nebo spuštěním nástroje toofix chyby v hello původní virtuální pevný disk.</span><span class="sxs-lookup"><span data-stu-id="55158-109">Edit files or run tools toofix errors on hello original virtual hard disk.</span></span>
4. <span data-ttu-id="55158-110">Odpojte Image a odpojte hello virtuální pevný disk z hello řešení potíží s virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-110">Unmount and detach hello virtual hard disk from hello troubleshooting VM.</span></span>
5. <span data-ttu-id="55158-111">Vytvoření virtuálního počítače pomocí hello původní virtuální pevný disk.</span><span class="sxs-lookup"><span data-stu-id="55158-111">Create a VM by using hello original virtual hard disk.</span></span>

## <a name="delete-hello-original-vm"></a><span data-ttu-id="55158-112">Odstranit hello původní virtuální počítač</span><span class="sxs-lookup"><span data-stu-id="55158-112">Delete hello original VM</span></span>
<span data-ttu-id="55158-113">Virtuální pevné disky a virtuální počítače jsou v Azure dva různé prostředky.</span><span class="sxs-lookup"><span data-stu-id="55158-113">Virtual hard disks and VMs are two distinct resources in Azure.</span></span> <span data-ttu-id="55158-114">Virtuální pevný disk je, kde jsou uloženy hello operačního systému, aplikací a konfigurace.</span><span class="sxs-lookup"><span data-stu-id="55158-114">A virtual hard disk is where hello operating system, applications, and configurations are stored.</span></span> <span data-ttu-id="55158-115">Hello virtuálního počítače je jenom metadata, která definuje hello velikosti nebo umístění a prostředkům, například virtuální pevný disk nebo virtuální síťová karta (NIC), který odkazuje.</span><span class="sxs-lookup"><span data-stu-id="55158-115">hello VM is just metadata that defines hello size or location and that references resources such as a virtual hard disk or virtual network interface card (NIC).</span></span> <span data-ttu-id="55158-116">Každý virtuální pevný disk získá zapůjčení přiřazené připojené tooa virtuálních počítačů po tohoto disku.</span><span class="sxs-lookup"><span data-stu-id="55158-116">Each virtual hard disk gets a lease assigned when that disk is attached tooa VM.</span></span> <span data-ttu-id="55158-117">I když datových disků můžete připojit a odpojit i hello virtuálních počítačů se systémem, disk operačního systému hello nejde odpojit, pokud se odstraní hello prostředků virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="55158-117">Although data disks can be attached and detached even while hello VM is running, hello OS disk cannot be detached unless hello VM resource is deleted.</span></span> <span data-ttu-id="55158-118">Hello zapůjčení pokračuje tooassociate hello operačního systému disku tooa virtuálních počítačů i v případě, že tento virtuální počítač je ve stavu Zastaveno a deallocated.</span><span class="sxs-lookup"><span data-stu-id="55158-118">hello lease continues tooassociate hello OS disk tooa VM even when that VM is in a stopped and deallocated state.</span></span>

<span data-ttu-id="55158-119">první krok toorecovering Hello virtuálního počítače je prostředků virtuálního počítače hello toodelete sám sebe.</span><span class="sxs-lookup"><span data-stu-id="55158-119">hello first step toorecovering your VM is toodelete hello VM resource itself.</span></span> <span data-ttu-id="55158-120">Odstraňování hello virtuálního počítače zůstane hello virtuální pevné disky ve vašem účtu úložiště.</span><span class="sxs-lookup"><span data-stu-id="55158-120">Deleting hello VM leaves hello virtual hard disks in your storage account.</span></span> <span data-ttu-id="55158-121">Po hello odstranění virtuálního počítače můžete připojit hello virtuálního pevného disku tooanother virtuálních počítačů tootroubleshoot a vyřešte chyby hello.</span><span class="sxs-lookup"><span data-stu-id="55158-121">After hello VM is deleted, you can attach hello virtual hard disk tooanother VM tootroubleshoot and resolve hello errors.</span></span> 

1. <span data-ttu-id="55158-122">Přihlaste se toohello [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="55158-122">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="55158-123">V nabídce hello na levé straně hello, klikněte na tlačítko **virtuálních počítačů (klasické)**.</span><span class="sxs-lookup"><span data-stu-id="55158-123">On hello menu on hello left side, click **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="55158-124">Klikněte na virtuální počítač, který má problém hello vyberte hello **disky**a pak určit název hello hello virtuálního pevného disku.</span><span class="sxs-lookup"><span data-stu-id="55158-124">Select hello VM that has hello problem, click **Disks**, and then identify hello name of hello virtual hard disk.</span></span> 
4. <span data-ttu-id="55158-125">Vyberte virtuální pevný disk hello operačního systému a zkontrolujte hello **umístění** tooidentify hello úložiště účet, který obsahuje tento virtuální pevný disk.</span><span class="sxs-lookup"><span data-stu-id="55158-125">Select hello OS virtual hard disk and check hello **Location** tooidentify hello storage account that contains that virtual hard disk.</span></span> <span data-ttu-id="55158-126">V následujícím příkladu hello, hello řetězec bezprostředně před ". blob.core.windows.net" je název účtu úložiště hello.</span><span class="sxs-lookup"><span data-stu-id="55158-126">In hello following example, hello string immediately before ".blob.core.windows.net" is hello storage account name.</span></span>

    ```
    https://portalvhds73fmhrw5xkp43.blob.core.windows.net/vhds/SCCM2012-2015-08-28.vhd
    ```

    ![Obrázek Hello o umístění Virtuálního počítače](./media/virtual-machines-classic-recovery-disks-portal/vm-location.png)

5. <span data-ttu-id="55158-128">Klikněte pravým tlačítkem na hello virtuálních počítačů a potom vyberte **odstranit**.</span><span class="sxs-lookup"><span data-stu-id="55158-128">Right-click hello VM and then select **Delete**.</span></span> <span data-ttu-id="55158-129">Ujistěte se, že hello disky nejsou vybrané, při odstranění hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-129">Make sure that hello disks are not selected when you delete hello VM.</span></span>
6. <span data-ttu-id="55158-130">Vytvořte nový virtuální počítač pro obnovení.</span><span class="sxs-lookup"><span data-stu-id="55158-130">Create a new recovery VM.</span></span> <span data-ttu-id="55158-131">Tento virtuální počítač musí být v hello stejné oblasti nebo skupině prostředků (Cloudová služba) jako hello problém virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-131">This VM must be in hello same region and resource group (Cloud Service) as hello problem VM.</span></span>
7. <span data-ttu-id="55158-132">Vyberte virtuální počítač pro obnovení hello a pak vyberte **disky** > **připojit existující**.</span><span class="sxs-lookup"><span data-stu-id="55158-132">Select hello recovery VM, and then select **Disks** > **Attach Existing**.</span></span>
8. <span data-ttu-id="55158-133">tooselect existující virtuální pevný disk, klikněte na tlačítko **souboru virtuálního pevného disku**:</span><span class="sxs-lookup"><span data-stu-id="55158-133">tooselect your existing virtual hard disk, click **VHD File**:</span></span>

    ![Vyhledání existujícího VHD procházením](./media/virtual-machines-classic-recovery-disks-portal/select-vhd-location.png)

9. <span data-ttu-id="55158-135">Vyberte účet úložiště hello > kontejner virtuálního pevného disku > Dobrý den virtuální pevný disk, klikněte na tlačítko hello **vyberte** tlačítko tooconfirm svého výběru.</span><span class="sxs-lookup"><span data-stu-id="55158-135">Select hello storage account > VHD container > hello virtual hard disk, click hello **Select** button tooconfirm your choice.</span></span>

    ![Výběr existujícího VHD](./media/virtual-machines-classic-recovery-disks-portal/select-vhd.png)

10. <span data-ttu-id="55158-137">S svůj disk VHD nyní vybrána, vyberte **OK** tooattach hello existující virtuální pevný disk.</span><span class="sxs-lookup"><span data-stu-id="55158-137">With your VHD now selected, select **OK** tooattach hello existing virtual hard disk.</span></span>
11. <span data-ttu-id="55158-138">Za několik sekund, hello **disky** virtuálního počítače v podokně se zobrazí existující virtuální pevný disk připojený jako datový disk:</span><span class="sxs-lookup"><span data-stu-id="55158-138">After a few seconds, hello **Disks** pane for your VM will display your existing virtual hard disk connected as a data disk:</span></span>

    ![Existující virtuální pevný disk připojený jako datový disk](./media/virtual-machines-classic-recovery-disks-portal/attached-disk.png)

## <a name="fix-issues-on-hello-original-virtual-hard-disk"></a><span data-ttu-id="55158-140">Vyřešte problémy na hello původní virtuální pevný disk</span><span class="sxs-lookup"><span data-stu-id="55158-140">Fix issues on hello original virtual hard disk</span></span>
<span data-ttu-id="55158-141">Pokud je připojené hello existující virtuální pevný disk, teď můžete dělat žádné údržby a řešení potíží s kroky, podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="55158-141">When hello existing virtual hard disk is mounted, you can now perform any maintenance and troubleshooting steps as needed.</span></span> <span data-ttu-id="55158-142">Jakmile jste vyřešili problémy hello, pokračujte hello následující kroky.</span><span class="sxs-lookup"><span data-stu-id="55158-142">Once you have addressed hello issues, continue with hello following steps.</span></span>

## <a name="unmount-and-detach-hello-original-virtual-hard-disk"></a><span data-ttu-id="55158-143">Odpojte Image a odpojit hello původní virtuální pevný disk</span><span class="sxs-lookup"><span data-stu-id="55158-143">Unmount and detach hello original virtual hard disk</span></span>
<span data-ttu-id="55158-144">Jakmile jsou všechny chyby vyřešeny, odpojte Image a odpojit hello existující virtuální pevný disk z virtuálního počítače řešení potíží.</span><span class="sxs-lookup"><span data-stu-id="55158-144">Once any errors are resolved, unmount and detach hello existing virtual hard disk from your troubleshooting VM.</span></span> <span data-ttu-id="55158-145">Virtuální pevný disk společně s jiných virtuálních počítačů nelze používat, dokud vydání hello zapůjčení, který připojí hello virtuálního pevného disku toohello řešení potíží s virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-145">You cannot use your virtual hard disk together with any other VM until hello lease that attaches hello virtual hard disk toohello troubleshooting VM is released.</span></span>  

1. <span data-ttu-id="55158-146">Přihlaste se toohello [portál Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="55158-146">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="55158-147">V nabídce hello na levé straně hello vyberte **virtuálních počítačů (klasické)**.</span><span class="sxs-lookup"><span data-stu-id="55158-147">On hello menu on hello left side, select **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="55158-148">Vyhledejte hello virtuální počítač pro obnovení.</span><span class="sxs-lookup"><span data-stu-id="55158-148">Locate hello recovery VM.</span></span> <span data-ttu-id="55158-149">Vyberte disky, klikněte pravým tlačítkem na hello disku a pak vyberte **odpojení**.</span><span class="sxs-lookup"><span data-stu-id="55158-149">Select Disks, right-click hello disk, and then select **Detach**.</span></span>

## <a name="create-a-vm-from-hello-original-hard-disk"></a><span data-ttu-id="55158-150">Vytvoření virtuálního počítače z hello původní pevného disku</span><span class="sxs-lookup"><span data-stu-id="55158-150">Create a VM from hello original hard disk</span></span>

<span data-ttu-id="55158-151">použijte virtuální počítač z původní virtuální pevný disk, toocreate [portál Azure classic](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="55158-151">toocreate a VM from your original virtual hard disk, use [Azure classic portal](https://manage.windowsazure.com).</span></span>

1. <span data-ttu-id="55158-152">Přihlaste se k [portálu Azure Classic](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="55158-152">Sign into [Azure classic portal](https://manage.windowsazure.com).</span></span>
2. <span data-ttu-id="55158-153">V dolní části hello hello portálu, vyberte **nový** > **výpočetní** > **virtuálního počítače** > **z Galerie** .</span><span class="sxs-lookup"><span data-stu-id="55158-153">At hello bottom of hello portal, select **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span>
3. <span data-ttu-id="55158-154">V hello **zvolí obrázek** vyberte **Moje disky**, a pak vyberte hello původní virtuální pevný disk.</span><span class="sxs-lookup"><span data-stu-id="55158-154">In hello **Choose an Image** section, select **My disks**, and then select hello original virtual hard disk.</span></span> <span data-ttu-id="55158-155">Zkontrolujte informace o umístění hello.</span><span class="sxs-lookup"><span data-stu-id="55158-155">Check hello location information.</span></span> <span data-ttu-id="55158-156">Toto je hello oblasti, kde musí být nasazený hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-156">This is hello region where hello VM must be deployed.</span></span> <span data-ttu-id="55158-157">Kliknutím na tlačítko Další hello.</span><span class="sxs-lookup"><span data-stu-id="55158-157">Select hello next button.</span></span>
4. <span data-ttu-id="55158-158">V hello **konfigurace virtuálního počítače** , zadejte název virtuálního počítače hello a vyberte velikost hello virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="55158-158">In hello **Virtual machine configuration** section, type hello VM name and select a size for hello VM.</span></span>
